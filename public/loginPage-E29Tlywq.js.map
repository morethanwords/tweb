{"version":3,"file":"loginPage-E29Tlywq.js","sources":["../src/pages/loginPage.ts"],"sourcesContent":["/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport PopupElement, {addCancelButton, PopupButton} from '@components/popups';\nimport {FormatterArguments, LangPackKey, i18n} from '@lib/langPack';\n\n\n// ! cant use PopupPeer/confirmationPopup because of awkward recursive dependencies\nexport class SimpleConfirmationPopup extends PopupElement {\n  constructor(options: {\n    titleLangKey: LangPackKey;\n    descriptionLangKey: LangPackKey;\n    descriptionArgs?: FormatterArguments;\n    buttons: PopupButton[];\n  }) {\n    super('popup-peer popup-confirmation', {\n      title: options.titleLangKey,\n      buttons: options.buttons\n    });\n\n    const description = document.createElement('p');\n    description.classList.add('popup-description');\n    description.append(i18n(options.descriptionLangKey, options.descriptionArgs));\n    this.header.after(description);\n  }\n\n  static show(options: {\n    titleLangKey: LangPackKey;\n    descriptionLangKey: LangPackKey;\n    descriptionArgs?: FormatterArguments;\n    button: PopupButton\n  }) {\n    return new Promise<void>((resolve, reject) => {\n      let resolved = false\n\n      const buttons = addCancelButton([options.button])\n      const cancelButton = buttons.find((button) => button.isCancel);\n      cancelButton.callback = () => {\n        if(!resolved) {\n          reject();\n          resolved = true;\n        }\n      }\n      options.button.callback = () => {\n        if(!resolved) {\n          resolve()\n          resolved = true;\n        }\n      }\n\n      const popup = PopupElement.createPopup(SimpleConfirmationPopup, {\n        titleLangKey: options.titleLangKey,\n        descriptionLangKey: options.descriptionLangKey,\n        descriptionArgs: options.descriptionArgs,\n        buttons: buttons\n      })\n\n      popup.addEventListener('closeAfterTimeout', () => {\n        if(!resolved) {\n          reject();\n          resolved = true;\n        }\n      })\n\n      popup.show()\n    })\n  }\n}\n\nexport default class LoginPage {\n  public element: HTMLElement;\n  public container: HTMLElement;\n  public imageDiv: HTMLElement;\n  public inputWrapper: HTMLElement;\n  public title: HTMLElement;\n  public subtitle: HTMLParagraphElement;\n\n  constructor(options: {\n    className: string,\n    withInputWrapper?: boolean,\n    titleLangKey?: LangPackKey,\n    subtitleLangKey?: LangPackKey,\n  }) {\n    this.element = document.body.querySelector('.' + options.className) as HTMLDivElement;\n    // this.element = document.createElement('div');\n    // this.element.className = 'page-' + options.className;\n\n    this.container = document.createElement('div');\n    this.container.className = 'container center-align';\n\n    this.imageDiv = document.createElement('div');\n    this.imageDiv.className = 'auth-image';\n\n    this.title = document.createElement('h4');\n    if(options.titleLangKey) {\n      this.title.append(i18n(options.titleLangKey));\n    }\n\n    this.subtitle = document.createElement('p');\n    this.subtitle.className = 'subtitle';\n    if(options.subtitleLangKey) {\n      this.subtitle.append(i18n(options.subtitleLangKey));\n    }\n\n    this.container.append(this.imageDiv, this.title, this.subtitle);\n\n    if(options.withInputWrapper) {\n      this.inputWrapper = document.createElement('div');\n      this.inputWrapper.className = 'input-wrapper';\n      this.container.append(this.inputWrapper);\n    }\n\n    this.element.append(this.container);\n  }\n}\n"],"names":["SimpleConfirmationPopup","PopupElement","options","description","i18n","resolve","reject","resolved","buttons","addCancelButton","cancelButton","button","popup","LoginPage"],"mappings":"sDAWO,MAAMA,UAAgCC,CAAa,CACxD,YAAYC,EAKT,CACD,MAAM,gCAAiC,CACrC,MAAOA,EAAQ,aACf,QAASA,EAAQ,OAAA,CAClB,EAEK,MAAAC,EAAc,SAAS,cAAc,GAAG,EAClCA,EAAA,UAAU,IAAI,mBAAmB,EAC7CA,EAAY,OAAOC,EAAKF,EAAQ,mBAAoBA,EAAQ,eAAe,CAAC,EACvE,KAAA,OAAO,MAAMC,CAAW,CAC/B,CAEA,OAAO,KAAKD,EAKT,CACD,OAAO,IAAI,QAAc,CAACG,EAASC,IAAW,CAC5C,IAAIC,EAAW,GAEf,MAAMC,EAAUC,EAAgB,CAACP,EAAQ,MAAM,CAAC,EAC1CQ,EAAeF,EAAQ,KAAMG,GAAWA,EAAO,QAAQ,EAC7DD,EAAa,SAAW,IAAM,CACxBH,IACKD,IACIC,EAAA,GACb,EAEML,EAAA,OAAO,SAAW,IAAM,CAC1BK,IACMF,IACGE,EAAA,GACb,EAGI,MAAAK,EAAQX,EAAa,YAAYD,EAAyB,CAC9D,aAAcE,EAAQ,aACtB,mBAAoBA,EAAQ,mBAC5B,gBAAiBA,EAAQ,gBACzB,QAAAM,CAAA,CACD,EAEKI,EAAA,iBAAiB,oBAAqB,IAAM,CAC5CL,IACKD,IACIC,EAAA,GACb,CACD,EAEDK,EAAM,KAAK,CAAA,CACZ,CACH,CACF,CAEA,MAAqBC,CAAU,CAQ7B,YAAYX,EAKT,CACD,KAAK,QAAU,SAAS,KAAK,cAAc,IAAMA,EAAQ,SAAS,EAI7D,KAAA,UAAY,SAAS,cAAc,KAAK,EAC7C,KAAK,UAAU,UAAY,yBAEtB,KAAA,SAAW,SAAS,cAAc,KAAK,EAC5C,KAAK,SAAS,UAAY,aAErB,KAAA,MAAQ,SAAS,cAAc,IAAI,EACrCA,EAAQ,cACT,KAAK,MAAM,OAAOE,EAAKF,EAAQ,YAAY,CAAC,EAGzC,KAAA,SAAW,SAAS,cAAc,GAAG,EAC1C,KAAK,SAAS,UAAY,WACvBA,EAAQ,iBACT,KAAK,SAAS,OAAOE,EAAKF,EAAQ,eAAe,CAAC,EAGpD,KAAK,UAAU,OAAO,KAAK,SAAU,KAAK,MAAO,KAAK,QAAQ,EAE3DA,EAAQ,mBACJ,KAAA,aAAe,SAAS,cAAc,KAAK,EAChD,KAAK,aAAa,UAAY,gBACzB,KAAA,UAAU,OAAO,KAAK,YAAY,GAGpC,KAAA,QAAQ,OAAO,KAAK,SAAS,CACpC,CACF"}