import{dT as v,c as o,ag as M,ah as _,b as e,ab as k,k as y,a5 as D}from"./index-BADHTlgz.js";import{T as R}from"./transition-DzrEwt1Z.js";import{I as T,R as c,Q as h}from"./appDialogsManager-DpDJuVgr.js";import{u as A,S as E}from"./saveButton-BWHou7bA.js";import{S as H}from"./starsRangeInput-Ci207hpT.js";import{u as I}from"./useStarsCommissionAndWithdrawalPrice-Cm0jpiqH.js";import{S as L}from"./staticSwitch-Bci0SlkV.js";import"./page-BmhISZ_F.js";import"./avatar-D1dEAMCU.js";import"./toast-DldnwnKq.js";import"./classNames-CN4lTu6a.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-anKMCwQ-.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./emailSetup-DiJaahi7.js";import"./iconTsx-DoSczV7A.js";import"./fastBlur-Co-79rP4.js";import"./putPreloader-K30N2k1L.js";import"./countryInputField-32Ovn8C_.js";import"./scrollable2-D8ePU3YR.js";import"./chatBackground-nUzwn1Yy.js";import"./tracking-Ba_rtFbf.js";import"./useAppConfig-C2TMt3rg.js";const re=()=>{const[a]=T(),{apiManagerProxy:p,rootScope:u}=v(),n=a.payload.chat;if(!n)return[];const s=n.linked_monoforum_id?p.getChat(n.linked_monoforum_id):void 0,l=!!s,m=s?._==="channel"&&+s.send_paid_messages_stars||0,[t,S]=o(l),[r,f]=o(m),[d,C]=o(!1),{commissionPercents:b,willReceiveDollars:w}=I(r),P=M(C,200);_(()=>{P(l!==t()||t()&&m!==r())});let i=!1;async function g(){if(!i){i=!0;try{await u.managers.appChatsManager.updateChannelPaidMessagesPrice(n.id,t()?r():0,t()),a.close()}finally{i=!1}}}return a.isConfirmationNeededOnClose=A({saveAllSettings:g,hasChanges:d,descriptionLangKey:"UnsavedChangesDescription.Channel"}),[e(k,{get mount(){return a.header},get children(){return e(E,{get hasChanges(){return d()},onClick:()=>void g()})}}),e(h,{caption:"ChannelDirectMessages.Settings.SwitchLabelCaption",get children(){return e(c,{clickable:()=>{S(!t())},get children(){return[e(c.Title,{get children(){return y("ChannelDirectMessages.Settings.SwitchLabel")}}),e(c.RightContent,{get children(){return e(L,{get checked(){return t()}})}})]}})}}),e(R,{name:"fade",get children(){return e(D,{get when(){return t()},get children(){return e(h,{name:"PaidMessages.SetPrice",class:"overflow-hidden",caption:"PaidMessages.SetPriceChannelDescription",get captionArgs(){return[b(),w()]},get children(){return e(H,{get value(){return r()},onChange:f,startFromZero:!0})}})}})}})]};export{re as default};
//# sourceMappingURL=channelDirectMessages-4Gk11N7v.js.map
