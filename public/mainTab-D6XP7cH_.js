import{a7 as J,bP as oe,i as k,a4 as A,E as W,a2 as B,a as $,a6 as V,b as n,t as M,br as me,aQ as he,c as D,ah as _e,a8 as ge,a3 as Z,a9 as Q,bQ as pe,ab as ve,bs as ee,ai as Se,bO as fe,dS as te,af as F,cR as N,a5 as G,k as h,bq as be,aX as $e}from"./index-CKohjhry.js";import{u as se}from"./actions-MR4_RW7w.js";import{D as Pe,E as ce,G as Y,R as b,r as ye}from"./appDialogsManager-B4IRnhlR.js";import{S as ke}from"./staticSwitch-DHzvo2lx.js";import{S as U}from"./space-L7WpB8o9.js";import{I as ne}from"./iconTsx-DOiJm1ci.js";import{L as ae,c as Ce}from"./lottieAnimation-Coq350jy.js";import{T as Le}from"./transition-DN2xTdXy.js";import"./page-rjQSrWOg.js";import"./avatar-C0cuGHTP.js";import"./toast-D_LJQErt.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./classNames-CN4lTu6a.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./emailSetup-W0kjvZWV.js";import"./fastBlur-Co-79rP4.js";import"./putPreloader-BgEVPg6_.js";import"./countryInputField-B_vmakRK.js";import"./scrollable2-CvJWlig5.js";import"./chatBackground--6k88cXM.js";import"./tracking-CHb4yDIG.js";const we="_Container_1qplo_1",Te="_KeysContainer_1qplo_7",Ee="_KeyButton_1qplo_13",Re="_selected_1qplo_35",Be="_KeyButtonFirst_1qplo_53",Me="_KeyButtonLast_1qplo_57",Oe="_PlusIcon_1qplo_62",xe="_TargetKey_1qplo_67",E={Container:we,KeysContainer:Te,KeyButton:Ee,selected:Re,KeyButtonFirst:Be,KeyButtonLast:Me,PlusIcon:Oe,TargetKey:xe},Ke=M("<span>"),Ae=M("<div><div></div><div>"),De=M("<button>"),X=["Ctrl","Alt","Shift","Meta"],Ie=o=>{const u=oe(()=>o.value,(c,l)=>l.includes(c)),P=c=>c==="Meta"?n(ne,{icon:me?"mac_command_key":"win_key"}):(()=>{const l=Ke();return k(l,c),l})(),C=c=>{if(o.value.includes(c)){const l=o.value.filter(_=>_!==c);if(!l.length){const _=[0,1,2,3].filter(e=>e!==X.indexOf(c));l.push(X[_[Math.floor(Math.random()*_.length)]])}o.onChange(l)}else o.onChange([...o.value,c])};return(()=>{const c=Ae(),l=c.firstChild,_=l.nextSibling;return k(l,()=>X.map((e,i,v)=>(()=>{const p=De();return p.$$click=C,p.$$clickData=e,A(W,p,()=>!0),k(p,()=>P(e)),B(t=>{const d=E.KeyButton,m={[E.selected]:u(e),[E.KeyButtonFirst]:i===0,[E.KeyButtonLast]:i===v.length-1};return d!==t._v$5&&$(p,t._v$5=d),t._v$6=V(p,m,t._v$6),t},{_v$5:void 0,_v$6:void 0}),p})())),k(c,n(ne,{get class(){return E.PlusIcon},icon:"plus"}),_),k(_,()=>o.key),B(e=>{const i=E.Container,v={[o.class]:!!o.class},p=E.KeysContainer,t=E.TargetKey;return i!==e._v$&&$(c,e._v$=i),e._v$2=V(c,v,e._v$2),p!==e._v$3&&$(l,e._v$3=p),t!==e._v$4&&$(_,e._v$4=t),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),c})()};J(["click"]);const He="_Overlay_deagn_36",qe="_Value_deagn_45",Fe="_Select_deagn_52",Ne="_SelectClip_deagn_63",Ve="_Option_deagn_75",Qe="_selected_deagn_87",O={Overlay:He,Value:qe,Select:Fe,SelectClip:Ne,Option:Ve,selected:Qe},Ue=M("<div>"),ze=M("<div><div><div>"),Xe=M("<div><span>"),Ge=o=>{let u;const P=he(()=>o.options.find(t=>t.value===o.value)?.label),[C,c]=D();_e(()=>{c(P()())});const l=oe(()=>o.value),[_,e]=D();ge(()=>{const t=new ee;t.add(window)("resize",()=>{o.isOpen&&o.onClose?.()}),Z(()=>{t.removeAll()})});const i=(t,d)=>{const m=t.firstElementChild,r=m.querySelector(`.${O.selected}`);if(!r||!m)return;const a=u.getBoundingClientRect(),S=m.getBoundingClientRect(),g=r.getBoundingClientRect(),y=g.top-S.top,L=y+g.height,I=y+g.height/2,H=a.left+a.width/2;let w=a.top+a.height/2-I;const K=w+S.height>window.innerHeight||w<0;if(K&&(w+=Math.max(0,-w)+Math.min(0,window.innerHeight-(w+S.height))),m.style.setProperty("--x",""+H),m.style.setProperty("--y",""+w),m.animate({opacity:[0,1]},{duration:120}).finished.then(()=>{K&&d()}),K)return;const z=Math.max(y,S.height-L),q=T=>`polygon(0% ${y-T}px, 100% ${y-T}px, 100% ${L+T}px, 0px ${L+T}px)`;Se(0,z,400,T=>{m.style.setProperty("clip-path",q(T))},{easing:fe,onEnd:()=>{m.style.removeProperty("clip-path"),d()}})},v=async(t,d)=>{await t.firstElementChild.animate({opacity:[1,0]},{duration:120}).finished,d()},p=t=>{const d=[o.parent,_()];if(!d.every(Boolean))return;d.every(r=>{const a=r.getBoundingClientRect();return Math.max(a.left-t.clientX,t.clientX-a.right,a.top-t.clientY,t.clientY-a.bottom)>100})&&o.onClose?.()};return[(()=>{const t=Ue(),d=u;return typeof d=="function"?A(d,t):u=t,k(t,C),B(()=>$(t,O.Value)),t})(),n(ve,{get children(){return n(Le,{appear:!0,onEnter:i,onExit:v,get children(){return Q(()=>!!o.isOpen)()&&(()=>{const t=ze(),d=t.firstChild,m=d.firstChild;return t.$$mousemove=p,t.$$click=r=>{r.stopPropagation(),o.onClose?.()},A(e,m),k(m,n(pe,{get each(){return o.options},children:r=>(()=>{const a=Xe(),S=a.firstChild;return a.$$click=o.onChange,a.$$clickData=r.value,A(W,a,()=>!0),k(S,()=>r.label()),B(g=>{const y=O.Option,L={[O.selected]:l(r.value)};return y!==g._v$4&&$(a,g._v$4=y),g._v$5=V(a,L,g._v$5),g},{_v$4:void 0,_v$5:void 0}),a})()})),B(r=>{const a=O.Overlay,S=O.SelectClip,g=O.Select;return a!==r._v$&&$(t,r._v$=a),S!==r._v$2&&$(d,r._v$2=S),g!==r._v$3&&$(m,r._v$3=g),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}})}})]};J(["click","mousemove"]);const Ye="_MainDescription_1pm2o_36",je="_FirstSection_1pm2o_44",Je="_Row_1pm2o_49",We="_ShortcutBuilderRow_1pm2o_54",Ze="_ShortcutBuilderRowChild_1pm2o_60",et="_collapsed_1pm2o_63",tt="_Hint_1pm2o_68",R={MainDescription:Ye,FirstSection:je,Row:Je,ShortcutBuilderRow:We,ShortcutBuilderRowChild:Ze,collapsed:et,Hint:tt},ie=M("<div>"),nt=M('<div><button class="btn-primary btn-color-primary btn-large">'),j=(o,u)=>({appendTo:o.scrollable.container,duration:2500,from:"bottom",textElement:h(u),icon:"premium_lock",class:R.Hint,canCloseOnPeerChange:!1}),wt=()=>{const{rootScope:o}=te(),u=Pe(),[P,{mutate:C}]=F(()=>{const e=o.managers.appStateManager.getState().then(i=>i.settings?.passcode?.enabled||!1);return u.collect(e),e}),[c,l]=D(!1),_=new ee;return _.add(o)("settings_updated",({key:e,value:i})=>{e===N("settings","passcode","enabled")&&C(i)}),Z(()=>{_.removeAll()}),n(G,{get when(){return P.state==="ready"},get children(){return Q(()=>!!(P()||c()))()?n(st,{onDisable:()=>l(!0)}):n(ot,{})}})},ot=()=>{const[o,{AppPasscodeEnterPasswordTab:u,AppPasscodeLockTab:P}]=ce(),{enablePasscode:C}=se(),{setQuizHint:c}=te(),l=()=>{o.slider.createTab(u).open({onSubmit:e=>{_(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},_=e=>{o.slider.createTab(u).open({onSubmit:async(i,v)=>{if(i!==e)throw{};await C(i),i="",v.slider.sliceTabsUntilTab(P,v),v.close(),c(j(o,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return n(Y,{caption:"PasscodeLock.Notice",get children(){return[n(ae,{name:"UtyanPasscode"}),(()=>{const e=ie();return k(e,()=>h("PasscodeLock.Description")),B(()=>$(e,R.MainDescription)),e})(),n(U,{amount:"0.5rem"}),(()=>{const e=nt(),i=e.firstChild;return i.$$click=l,A(W,i,()=>!0),k(i,()=>h("PasscodeLock.TurnOn")),B(()=>$(e,Ce.AdditionalPadding)),e})(),n(U,{amount:"1rem"})]}})},st=o=>{const[u,{AppPasscodeEnterPasswordTab:P,AppPasscodeLockTab:C,AppPrivacyAndSecurityTab:c}]=ce(),{disablePasscode:l,changePasscode:_}=se(),{rootScope:e,setQuizHint:i}=te(),[,v]=$e(),p=[{value:0,label:()=>h("PasscodeLock.Disabled")},{value:1,label:()=>h("MinutesShort",[1])},{value:5,label:()=>h("MinutesShort",[5])},{value:10,label:()=>h("MinutesShort",[10])},{value:15,label:()=>h("MinutesShort",[15])},{value:30,label:()=>h("MinutesShort",[30])}],[t,d]=D(),[m,r]=D(!1),[a,{mutate:S}]=F(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.autoLockTimeoutMins||0)),[g,{mutate:y}]=F(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcutEnabled||!1)),[L,{mutate:I}]=F(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcut||[])),H=new ee;H.add(e)("settings_updated",({key:s,value:f})=>{s===N("settings","passcode","lockShortcut")?I(f):s===N("settings","passcode","lockShortcutEnabled")?y(f):s===N("settings","passcode","autoLockTimeoutMins")&&S(f)});function w(s){I(s),v("passcode","lockShortcut",s)}function K(s){y(s),v("passcode","lockShortcutEnabled",s)}function z(s){S(s),v("passcode","autoLockTimeoutMins",s)}Z(()=>{H.removeAll()});const q=()=>!be&&L.state==="ready"&&g.state==="ready",T=()=>{u.slider.createTab(P).open({onSubmit:s=>{re(s),s=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},re=s=>{u.slider.createTab(P).open({onSubmit:async(f,x)=>{if(f!==s)throw{};await _(f),f="",x.slider.sliceTabsUntilTab(C,x),x.close(),i(j(u,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},le=()=>{ye({title:h("PasscodeLock.TurnOff.Title"),description:h("PasscodeLock.TurnOff.Description"),button:{text:h("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{o.onDisable(),await l(),u.close(),i(j(u.slider.getTab(c),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},ue=[Q(()=>h("PasscodeLock.Description")),n(U,{amount:"1rem"}),Q(()=>h("PasscodeLock.Notice"))];return[n(Y,{get class(){return R.FirstSection},caption:ue,get children(){return[n(ae,{name:"UtyanPasscode"}),n(U,{amount:"1.125rem"}),n(b,{clickable:le,get children(){return[n(b.Icon,{icon:"lockoff"}),n(b.Title,{get children(){return h("PasscodeLock.TurnOff.Title")}})]}}),n(b,{clickable:T,get children(){return[n(b.Icon,{icon:"key"}),n(b.Title,{get children(){return h("PasscodeLock.ChangePasscode")}})]}})]}}),n(Y,{get caption(){return q()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[n(G,{get when(){return a.state==="ready"},get children(){return n(b,{ref:d,get class(){return R.Row},clickable:()=>{r(!0)},get children(){return[n(b.Title,{get children(){return h("PasscodeLock.AutoLock")}}),n(b.RightContent,{get children(){return n(Ge,{get value(){return a()},onClose:()=>r(!1),options:p,onChange:z,get isOpen(){return m()},get parent(){return t()}})}})]}})}}),n(G,{get when(){return q()},get children(){return[n(b,{get class(){return R.Row},clickable:s=>{K(!g())},get children(){return[n(b.Title,{get children(){return h("PasscodeLock.EnableLockShortcut")}}),n(b.RightContent,{get children(){return n(ke,{get checked(){return g()}})}})]}}),(()=>{const s=ie();return k(s,n(Ie,{get class(){return R.ShortcutBuilderRowChild},get value(){return L()||[]},onChange:w,key:"L"})),B(f=>{const x=R.ShortcutBuilderRow,de={[R.collapsed]:!g()};return x!==f._v$&&$(s,f._v$=x),f._v$2=V(s,de,f._v$2),f},{_v$:void 0,_v$2:void 0}),s})()]}})]}})]};J(["click"]);export{wt as default};
//# sourceMappingURL=mainTab-D6XP7cH_.js.map
