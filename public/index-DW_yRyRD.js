import{a9 as Y,c as x,aQ as Z,i as O,a5 as I,a as p,ah as T,ai as ee,aV as te,a6 as j,aj as ne,a7 as Q,b as M,bU as oe,t as P,bV as le,dN as se,K as ie}from"./index-BvGL1xuo.js";import{s as re,I as ae}from"./emailSetup-WdO0dYdx.js";import{v as ce,d as ue,a1 as de}from"./appDialogsManager-XaPh8Ebl.js";import{s as me}from"./useSwipe-Dv2ByJbd.js";import{u as pe}from"./useIsCleaned-CEuuOTrv.js";import{u as fe}from"./useScrollTop-DpXqA7I6.js";import"./classNames-CN4lTu6a.js";import"./iconTsx-CaCwBDRa.js";import"./transition-BiOz51yx.js";import"./page-BVzOy6XJ.js";import"./putPreloader-kvx-XxnM.js";import"./avatar-CB40gZt-.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-Ckwu71fG.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-RbAV3hV8.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-BLPl1XHv.js";import"./scrollable2-B-xx7ucK.js";import"./chatBackground-D1efQpC1.js";import"./tracking-B2ZwtkRX.js";const ve="_Container_88x8u_1",_e="_Scrollable_88x8u_5",ge="_Option_88x8u_15",he="_hidden_88x8u_23",$e="_EmptyOption_88x8u_27",be="_Divider_88x8u_31",Se="_upper_88x8u_40",Ce="_lower_88x8u_43",c={Container:ve,Scrollable:_e,Option:ge,hidden:he,EmptyOption:$e,Divider:be,upper:Se,lower:Ce},ye=P("<div>"),xe=P("<div><div><div></div><div></div><div></div><div></div></div><div></div><div>"),Te=250,Oe=5,De=320,E=40,Ee=10,Ie=.1,Me=f=>{const[s,_]=x(),[h,$]=x(!1),[u,d]=x(!1),[U,w]=x(!1),A=fe(s),k=ce(s),W=pe(),b=Z(()=>f.options.map((e,t)=>({option:e,element:(()=>{const n=ye();return n.$$click=X,n.$$clickData=t,O(n,()=>e.label),I(()=>p(n,c.Option)),n})()})));T(ee(b,()=>{const e=s(),t=b();if(!e||!t.length)return;const n=Math.max(0,t.findIndex(({option:r})=>r.value===f.value));n&&(e.scrollTop=n*E),$(!0)})),T(()=>{const e=b();if(!e.length||!h())return;let t=e[0],n=1/0;for(let a=0;a<e.length;a++){const i=e[a],v=i.element,o=F(a),C=Math.abs(o),y=o/k.height*2,g=Math.abs(y);C<n&&(t=i,n=C),v.classList.toggle(c.hidden,g>1),g<=1?(v.style.setProperty("--current-dist",`${g}`),v.style.setProperty("--current-dist-sign",`${Math.sign(y)}`)):(v.style.removeProperty("--current-dist"),v.style.removeProperty("--current-dist-sign"))}const r=te(()=>f.value),l=t.option.value;l!==r&&f.onChange(l)});let V;T(()=>{u()||(A(),V=self.setTimeout(J,Te),j(()=>{self.clearTimeout(V)}))}),T(()=>{const e=s();e&&re(e)("wheel",()=>{S?.()},{passive:!0})});let D,S;j(()=>{S?.(),D?.()});let z=0,m=[];const q={onStart:()=>{z=s()?.scrollTop??0,m=[],D?.(),S?.(),d(!0)},onMove:(e,t)=>{const n=s();n&&(m=[t,...m.slice(0,Oe-1)],Math.abs(t)>Ee&&w(!0),n.scrollTop=z-t)},onEnd:()=>{D=B(),d(!1),setTimeout(()=>{w(!1)},0)}};function F(e){return k.height/2+A()-(e+2.5)*E}function B(){const e=s();if(m.length<2||!e){m=[];return}let t=!1;const n=.1,r=1e3/60;let l=0;for(let i=0;i<m.length-1;i++)l+=m[i+1]-m[i];l=l/(m.length-1);let a=performance.now();return le(()=>{if(W()||t)return!1;const i=performance.now(),v=i-a;if(a=i,e.scrollTop+=l,l-=Math.sign(l)*(n*v/r),Math.abs(l)>1)return!0;m=[]}),()=>{t=!0}}function J(){const e=s(),t=b();if(!t.length||!e)return;let n=0,r=1/0;for(let l=0;l<t.length;l++){const a=Math.abs(F(l));a<r&&(n=l,r=a)}r>Ie&&H(n)}function X(e){U()||H(e)}function H(e){const t=s();t&&(S?.(),S=ne(t.scrollTop,e*E,De,n=>{t.scrollTop=n}))}return(()=>{const e=xe(),t=e.firstChild,n=t.firstChild,r=n.nextSibling,l=r.nextSibling,a=l.nextSibling,i=t.nextSibling,v=i.nextSibling;return e.style.setProperty("--option-size","40px"),Q(me,t,()=>q),Q(_,t),O(t,M(oe,{get each(){return b()},children:({element:o})=>o}),l),I(o=>{const C=c.Container,y=c.Scrollable,g=c.EmptyOption,K=c.EmptyOption,L=c.EmptyOption,N=c.EmptyOption,R=`${c.Divider} ${c.upper}`,G=`${c.Divider} ${c.lower}`;return C!==o._v$&&p(e,o._v$=C),y!==o._v$2&&p(t,o._v$2=y),g!==o._v$3&&p(n,o._v$3=g),K!==o._v$4&&p(r,o._v$4=K),L!==o._v$5&&p(l,o._v$5=L),N!==o._v$6&&p(a,o._v$6=N),R!==o._v$7&&p(i,o._v$7=R),G!==o._v$8&&p(v,o._v$8=G),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),e})()};Y(["click"]);const Pe="_Container_1kyr7_1",we={Container:Pe},Ae=P("<div>"),ke=ue({name:"auto-delete-messages-custom-time-popup-content",component:f=>{const{i18n:s}=se(),[_,h]=x(f.initialPeriod),$=[{value:0,label:()=>s("Never")},...de];return(()=>{const u=Ae();return O(u,M(ae,{get key(){return f.descriptionLangKey}}),null),O(u,M(Me,{get value(){return _()},onChange:d=>{h(d),f.onChange(d)},get options(){return $.map(d=>({label:d.label(),value:d.value}))}}),null),I(()=>p(u,we.Container)),u})()}});class nt extends ie{constructor({descriptionLangKey:s,period:_,HotReloadGuard:h,onFinish:$}){super("auto-delete-messages-custom-time-popup",{overlayClosable:!0,closable:!0,body:!0,title:"AutoDeleteMessages",buttons:[{langKey:"Save",callback:()=>{$(this.period),this.hide()}},{langKey:"Cancel",isCancel:!0}]}),this.period=_;const u=new ke;u.HotReloadGuard=h,u.feedProps({initialPeriod:_||0,descriptionLangKey:s,onChange:d=>{this.period=d}}),this.body.append(u)}}export{nt as default};
//# sourceMappingURL=index-DW_yRyRD.js.map
