(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const cr="modulepreload",ur=function(t,e){return new URL(t,e).href},Cs={},V=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){const i=document.getElementsByTagName("link");r=Promise.all(s.map(o=>{if(o=ur(o,n),o in Cs)return;Cs[o]=!0;const c=o.endsWith(".css"),a=c?'[rel="stylesheet"]':"";if(!!n)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!c||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=c?"stylesheet":cr,c||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),c)return new Promise((h,f)=>{l.addEventListener("load",h),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},_s=["web.telegram.org","webk.telegram.org"],da="pattern",Ps=Math.min(4,navigator.hardwareConcurrency??4),x={id:1025907,hash:"452b0359b988148995f22ff0f4229750",version:"2.0.0",versionFull:"2.0.0 (487)",build:487,langPackVersion:"4.7.3",langPack:"webk",langPackCode:"en",domains:_s,baseDcId:2,isMainDomain:_s.includes(location.hostname),suffix:"K",threads:Ps,cryptoWorkers:Ps};x.isMainDomain&&(x.id=2496,x.hash="8da85b0d5bfe62527e5b244c209159c3");function lr(){return document.activeElement?.blur?(document.activeElement.blur(),!0):!1}function ks(t){if(t||(t=window.event),t){t=t.originalEvent||t;try{t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.cancelBubble=!0}catch{}}return!1}const fe="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,ds=typeof window<"u"?window:self,xe=navigator?navigator.userAgent:null,$t=navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i)!==-1,Qs=navigator.userAgent.toLowerCase().indexOf("android")!==-1,en=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),tn=(()=>{try{return+navigator.userAgent.match(/Chrom(?:e|ium)\/(.+?)(?:\s|\.)/)[1]}catch{}})(),Te=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!ds.MSStream,J="safari"in ds||!!(xe&&(/\b(iPad|iPhone|iPod)\b/.test(xe)||xe.match("Safari")&&!xe.match("Chrome"))),Me=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,fs=J&&Te,ne=(navigator.maxTouchPoints===void 0||navigator.maxTouchPoints>0)&&navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i)!=-1,hr=Object.freeze(Object.defineProperty({__proto__:null,CHROMIUM_VERSION:tn,IS_ANDROID:Qs,IS_APPLE:$t,IS_APPLE_MOBILE:Te,IS_CHROMIUM:en,IS_FIREFOX:Me,IS_MOBILE:ne,IS_MOBILE_SAFARI:fs,IS_SAFARI:J,USER_AGENT:xe},Symbol.toStringTag,{value:"Module"}));function dr(t,e){return t.closest("."+e)}let Ie;function Ht(t){Ie?Ie.push(t):(Ie=[t],requestAnimationFrame(()=>{const e=Ie;Ie=void 0,e.forEach(s=>s())}))}let ye,Tt=!1;function fa(t){ye?Tt?t():ye.push(t):(ye=[t],requestAnimationFrame(()=>{Tt=!0;for(let e=0;e<ye.length;++e)ye[e]();ye=void 0,Tt=!1}))}let Se;function ga(){return Se||(Se=new Promise(t=>Ht(()=>t())),Se.then(()=>{Se=void 0}),Se)}function fr(){return new Promise(t=>{Ht(()=>{Ht(t)})})}function Ts(t){t.style.transform="translateY(-99999px)",t.focus(),fr().then(()=>{t.style.transform=""})}const at=J&&ne&&fe&&!1;if(at){const t="clientY";let e=0;const s={capture:!0,passive:!1},n=i=>{const o=i.touches[0],c=dr(o.target,"scrollable-y");if(c){const a=o[t],u=e-a,l=c.scrollTop,h=c.scrollHeight,f=c.clientHeight,g=l?Math.round(l+c.clientHeight+u):l+u;(h===f||g>=h||g<=0)&&i.preventDefault()}else i.preventDefault()};let r=0;document.addEventListener("focusin",i=>{!i.target.classList.contains("is-sticky-input-bugged")||i.timeStamp-r<50||(Ts(i.target),document.addEventListener("touchmove",n,s),document.addEventListener("touchstart",o=>{if(o.touches.length>1)return;e=o.touches[0][t]}))},{passive:!0}),document.addEventListener("focusout",i=>{document.removeEventListener("touchmove",n,s),r=i.timeStamp},{passive:!0}),document.addEventListener("visibilitychange",()=>{document.activeElement&&document.activeElement.classList.contains("is-sticky-input-bugged")&&document.activeElement.blur&&Ts(document.activeElement)},{passive:!0})}function ma(t){at&&t.classList.add("is-sticky-input-bugged")}const sn="Roboto",gr=sn+', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',mr="16px",Dr="400",Da=`${Dr} ${mr} ${gr}`;function ct(){}function gs(t){return new Promise(e=>{setTimeout(e,t)})}const nn="tgico";function pa(t){return nn+"-"+t}const Mt=["b","Ğ±"],Lt={},pr={text:sn,icons:nn,monospace:"Roboto Mono"};function Fr(t={text:Mt,icons:void 0,monospace:Mt}){if(!("fonts"in document))return Promise.resolve();const e=[];for(const s in t){let n=t[s];n==="all"&&(n=Mt);const r=pr[s],i=s==="icons"?[500]:[400,500];for(const o of i){const c=(n||[void 0]).map(a=>{var h,f;const u=[o,"1rem",r].join(" ");return(h=Lt[u]??(Lt[u]={}))[f=a||""]??(h[f]=document.fonts.load(u,a))});e.push(...c)}}return Promise.race([Promise.all(e).catch(ct),gs(1e3)])}const Kt=navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i)!==-1;function rn(t){return t instanceof URL||(t=new URL(t+"",location.href)),location.search&&t.protocol!=="blob:"&&new URLSearchParams(location.search).forEach((s,n)=>{t.searchParams.set(n,s)}),t.searchParams.delete("swfix"),t}function Er(){const t={construct(e,s){return s[0]=rn(s[0]),new e(...s)}};[Worker,typeof SharedWorker<"u"&&SharedWorker].filter(Boolean).forEach(e=>{window[e.name]=new Proxy(e,t)})}Er();function vr(){Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(t,e){return e!==void 0&&(e=!!e),this.hasAttribute(t)?e?!0:(this.removeAttribute(t),!1):e===!1?!1:(this.setAttribute(t,""),!0)})}const on=0,Fa=1271266957,Ea=777,va=2666e3,Aa=777e3,ya=2147483647,Sa="",ba=20*1024*1024,Ar="",wa=[7322096,16766590,13338331,9367192,16749490,16478047],Ca="default_static",ut=4294967296,_a=ut+1,yr=new Set(["web","k","z","a"]),Pa=2147483646,ka=new Set(["image/jpeg","image/png","image/bmp","image/gif"]),Sr=0,br=1,wr=new Set([Sr,br]);Math.max(...Array.from(wr))+1;const Ta=!1;class Ee{constructor(e){this._constructor(e)}_constructor(e){this.reuseResults=e,this.listeners={},this.listenerResults={}}addEventListener(e,s,n){var i;const r={callback:s,options:n};if(((i=this.listeners)[e]??(i[e]=new Set)).add(r),this.listenerResults.hasOwnProperty(e)&&(s(...this.listenerResults[e]),n?.once)){this.listeners[e].delete(r);return}}addMultipleEventsListeners(e){for(const s in e)this.addEventListener(s,e[s])}removeEventListener(e,s,n){if(this.listeners[e]){for(const r of this.listeners[e])if(r.callback===s){this.listeners[e].delete(r);break}}}invokeListenerCallback(e,s,...n){let r,i;try{r=s.callback(...n)}catch(o){i=o}if(s.options?.once&&this.removeEventListener(e,s.callback),i)throw i;return r}_dispatchEvent(e,s,...n){this.reuseResults&&(this.listenerResults[e]=n);const r=s&&[],i=this.listeners[e];if(i)for(const o of i){const c=this.invokeListenerCallback(e,o,...n);r&&r.push(c)}return r}dispatchResultableEvent(e,...s){return this._dispatchEvent(e,!0,...s)}dispatchEvent(e,...s){this._dispatchEvent(e,!1,...s)}cleanup(){this.listeners={},this.listenerResults={}}}const z={test:location.search.indexOf("test=1")>0,debug:location.search.indexOf("debug=1")>0,http:!1,ssl:!0,asServiceWorker:!1,transport:"websocket",noSharedWorker:location.search.indexOf("noSharedWorker=1")>0,multipleTransports:!0};(z.http=location.search.indexOf("http=1")>0)&&(z.multipleTransports=!1);z.multipleTransports&&(z.http=!0);z.http&&(z.transport="https");const Cr=!1,me=z.debug,_r=typeof window<"u"?window:self,P=_r,an=Date.now()%Math.random()*1e8|0;function It(t,e){const s=t.indexOf(e);return(s===-1?void 0:t.splice(s,1))?.[0]}const He=typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope,yt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&!He,De=yt||He,Pr=()=>self.clients.matchAll({includeUncontrolled:!1,type:"window"}),cn=(t,...e)=>{try{t.postMessage(...e)}catch(s){console.error("[worker] postMessage error:",s,e)}},un=(t,...e)=>{Pr().then(s=>{s.length&&s.slice(t?0:-1).forEach(n=>{cn(n,...e)})})},ln=(...t)=>{cn(self,...t)},hn=()=>{};He&&un.bind(null,!1);He&&un.bind(null,!0);const Ot={};function ge(t){return Ot[t]??(Ot[t]={type:t})}const kr=Date.now();function lt(){return"["+((Date.now()-kr)/1e3).toFixed(3)+"]"}var ms=(t=>(t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Log=4]="Log",t[t.Debug=8]="Debug",t))(ms||{});const Tr=[0,1,2,4,8],Mr=J||Me,Ms=!Mr,Rt={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},Lr=[["debug",8],["info",4],["warn",2],["error",1],["assert",1],["trace",4],["group",4],["groupCollapsed",4],["groupEnd",4]];function re(t,e=7,s=!1,n=""){let r;!me&&!s&&(e=1),Ms?n||(He?n=Rt.fg.yellow:yt&&(n=Rt.fg.cyan)):n="";const i=n;n?n=`%s ${n}%s`:n="%s";const o=function(...a){return e&4&&console.log(n,lt(),t,...a)};Lr.forEach(([a,u])=>{o[a]=function(...l){return e&u&&console[a](n,lt(),t,...l)}}),o.setPrefix=function(a){r=a,t="["+a+"]"},o.setPrefix(t),o.setLevel=function(a){e=Tr.slice(0,a+1).reduce((u,l)=>u|l,0)};const c={};return o.bindPrefix=function(a,u=e){return c[a]??(c[a]=re(`${r}] ${Ms&&i?Rt.reset:""}[${a}`,u,s,i))},o}const Ir=!0;class Ds extends Ee{constructor(e){super(!1),this.logSuffix=e,this.onMessage=s=>{const n=s.data,r=s.source||s.currentTarget;this.processTaskMap[n.type](n,r,s)},this.processResultTask=s=>{const{taskId:n,result:r,error:i}=s.payload,o=this.awaiting[n];o&&(this.debug&&this.log.debug("done",o.taskType,r,i),"error"in s.payload?o.reject(i):o.resolve(r),delete this.awaiting[n])},this.processAckTask=s=>{const n=s.payload,r=this.awaiting[n.taskId];if(!r)return;const i=r.resolve,o={cached:n.cached,result:n.cached?"result"in n?Promise.resolve(n.result):Promise.reject(n.error):new Promise((c,a)=>{r.resolve=c,r.reject=a})};i(o),n.cached&&delete this.awaiting[n.taskId]},this.processPingTask=(s,n,r)=>{this.pushTask(this.createTask("pong",void 0),r.source)},this.processPongTask=(s,n,r)=>{const i=this.pingResolves.get(n);i&&(this.pingResolves.delete(n),i())},this.processCloseTask=(s,n,r)=>{this.detachPort(n)},this.processBatchTask=(s,n,r)=>{const i={data:r.data,source:r.source,currentTarget:r.currentTarget};s.payload.forEach(o=>{i.data=o,this.onMessage(i)})},this.processLockTask=(s,n,r)=>{const i=s.payload;this.requestedLocks.has(i)||(this.requestedLocks.set(i,n),navigator.locks.request(i,()=>{this.processCloseTask(void 0,n,void 0),this.requestedLocks.delete(i)}))},this.processInvokeTask=async(s,n,r)=>{const i=s.id,o=s.payload;let c,a,u;o.void||(c={taskId:i},a=this.createTask("result",c)),o.withAck&&(u=this.createTask("ack",{taskId:i,cached:!0}));let l;try{const h=this.listeners[o.type];if(!h?.size)throw new Error("no listener");const f=h.values().next().value;let g=this.invokeListenerCallback(o.type,f,o.payload,n,r);if(o.void)return;if(l=g instanceof Promise,u){const S=!l;if(u.payload.cached=S,S&&(u.payload.result=g),this.pushTask(u,n),S)return}l&&(g=await g),c.result=g}catch(h){if(this.log.error("worker task error:",h,s),o.void)return;if(u&&u.payload.cached){u.payload.error=h,this.pushTask(u,n);return}c.error=h}this.pushTask(a,n)},this.listenPorts=[],this.sendPorts=[],this.pingResolves=new Map,this.taskId=0,this.awaiting={},this.pending=new Map,this.log=re("MP"+(e?"-"+e:"")),this.debug=me,this.heldLocks=new Map,this.requestedLocks=new Map,this.processTaskMap={result:this.processResultTask,ack:this.processAckTask,invoke:this.processInvokeTask,ping:this.processPingTask,pong:this.processPongTask,close:this.processCloseTask,lock:this.processLockTask,batch:this.processBatchTask}}setOnPortDisconnect(e){this.onPortDisconnect=e}attachPort(e){this.attachListenPort(e),this.attachSendPort(e)}attachListenPort(e){this.listenPorts.push(e),e.addEventListener("message",this.onMessage)}attachSendPort(e){if(this.log.warn("attaching send port"),e.start?.(),this.sendPorts.push(e),typeof window<"u"&&Ir)if("locks"in navigator){const s=["lock",an,this.logSuffix||"",Math.random()*2147483647|0].join("-");this.log.warn("created lock",s);const n=new Promise(r=>this.heldLocks.set(e,{resolve:r,id:s})).then(()=>this.heldLocks.delete(e));navigator.locks.request(s,()=>(this.resendLockTask(e),n))}else window.addEventListener("beforeunload",()=>{const s=this.createTask("close",void 0);this.postMessage(void 0,s)});this.releasePending()}resendLockTask(e){const s=this.heldLocks.get(e);s&&this.pushTask(this.createTask("lock",s.id),e)}detachPort(e){this.log.warn("disconnecting port"),It(this.listenPorts,e),It(this.sendPorts,e),e.removeEventListener?.("message",this.onMessage),e.close?.(),this.onPortDisconnect?.(e),this.heldLocks.get(e)?.resolve();const n=ge("PORT_DISCONNECTED");for(const r in this.awaiting){const i=this.awaiting[r];i.port===e&&(i.reject(n),delete this.awaiting[r])}}postMessage(e,s){(Array.isArray(e)?e:e?[e]:this.sendPorts).forEach(r=>{r.postMessage(s,s.transfer)})}async releasePending(){this.releasingPending||(this.releasingPending=!0,await Promise.resolve(),this.debug&&this.log.debug("releasing tasks, length:",this.pending.size),this.pending.forEach((e,s)=>{let n=e;{let i;n=[],e.forEach(o=>{o.transfer?(i=void 0,n.push(o)):(i||(i=this.createTask("batch",[]),n.push(i)),i.payload.push(o))})}const r=s?[s]:this.sendPorts;r.length&&(n.forEach(i=>{try{this.postMessage(r,i)}catch(o){this.log.error("postMessage error:",o,i,r)}}),this.pending.delete(s))}),this.debug&&this.log.debug("released tasks"),this.releasingPending=!1)}createTask(e,s,n){return{type:e,payload:s,id:this.taskId++,transfer:n}}createInvokeTask(e,s,n,r,i){return this.createTask("invoke",{type:e,payload:s,withAck:n,void:r},i)}pushTask(e,s){let n=this.pending.get(s);n||this.pending.set(s,n=[]),n.push(e),this.releasePending()}invokeVoid(e,s,n,r){const i=this.createInvokeTask(e,s,void 0,!0,r);this.pushTask(i,n)}invoke(e,s,n,r,i){this.debug&&this.log.debug("start",e,s);let o;const c=new Promise((a,u)=>{o=this.createInvokeTask(e,s,n,void 0,i),this.awaiting[o.id]={resolve:a,reject:u,taskType:e,port:r},this.pushTask(o,r)});if(De){c.finally(()=>{clearInterval(a)});const a=ds.setInterval(()=>{this.log.error("task still has no result",o,r)},6e4)}return c}invokeExceptSource(e,s,n){const r=this.sendPorts.slice();It(r,n),r.forEach(i=>{this.invokeVoid(e,s,i)})}}class Ke extends Ds{constructor(){super("MTPROTO"),Ke.INSTANCE=this,P&&(P.mtprotoMessagePort=this)}static getInstance(){return this.INSTANCE}}class Or extends Ee{constructor(){super(),this.myId=on,this.connectionStatus={},this.premium=!1,this.addEventListener("user_auth",({id:e})=>{this.myId=e.toPeerId()}),this.addEventListener("premium_toggle_private",({isNew:e,isPremium:s})=>{this.premium=s,e||this.dispatchEventSingle("premium_toggle",s)}),this.addEventListener("connection_status_change",e=>{this.connectionStatus[e.name]=e}),this.dispatchEvent=(e,...s)=>{super.dispatchEvent(e,...s),Ke.getInstance().invokeVoid("event",{name:e,args:s})},De||this.addEventListener("settings_updated",({settings:e})=>{this.settings=e})}getConnectionStatus(){return this.connectionStatus}getPremium(){return this.premium}dispatchEventSingle(...e){super.dispatchEvent(...e)}}const y=new Or;P.rootScope=y;const Rr={isFulfilled:!1,isRejected:!1,notify:()=>{},notifyAll:function(...t){this.lastNotify=t,this.listeners?.forEach(e=>e(...t))},addNotifyListener:function(t){this.lastNotify&&t(...this.lastNotify),(this.listeners??(this.listeners=[])).push(t)},resolve:function(t){this.isFulfilled||this.isRejected||(this.isFulfilled=!0,this._resolve(t),this.onFinish())},reject:function(...t){this.isRejected||this.isFulfilled||(this.isRejected=!0,this._reject(...t),this.onFinish())},onFinish:function(){this.notify=this.notifyAll=this.lastNotify=null,this.listeners&&(this.listeners.length=0),this.cancel&&(this.cancel=ct)}};function te(){let t,e;const s=new Promise((n,r)=>{t=n,e=r});return Object.assign(s,Rr),s._resolve=t,s._reject=e,s}self.deferredPromise=te;function Bt(t,e,s=!0){let n=null,r,i;const o=()=>{clearInterval(n),n=null},c=(...a)=>{r=!0,i=a,n||(s&&(r=!1,t(...i)),n=setInterval(()=>{if(!r){o();return}r=!1,t(...i)},e))};return c.clear=o,c}function qt(t,e){if(e)for(const s in e)e[s]!==void 0&&(t[s]=e[s]);return t}const je=class je{constructor(e){qt(this,e),z.test&&(this.name+="_test"),this.storageIsAvailable=!0,this.log=re(["IDB",e.name].join("-")),this.log("constructor"),this.openDatabase(!0),je.INSTANCES.push(this)}isAvailable(){return this.storageIsAvailable}openDatabase(e=!1){if(this.openDbPromise&&!e)return this.openDbPromise;const s=(o,c)=>{const a=Array.from(o.indexNames);for(const u of a)o.deleteIndex(u);if(c.indexes?.length)for(const u of c.indexes)o.indexNames.contains(u.indexName)||o.createIndex(u.indexName,u.keyPath,u.objectParameters)},n=(o,c)=>{const a=o.createObjectStore(c.name);s(a,c)};try{var r=indexedDB.open(this.name,this.version);if(!r)return Promise.reject()}catch(o){return this.log.error("error opening db",o.message),this.storageIsAvailable=!1,Promise.reject(o)}let i=!1;return setTimeout(()=>{i||r.onerror(ge("IDB_CREATE_TIMEOUT"))},3e3),this.openDbPromise=new Promise((o,c)=>{r.onsuccess=a=>{i=!0;const u=r.result;let l=!1;this.log("Opened"),u.onerror=h=>{this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",h),c(h)},u.onclose=h=>{this.log.error("closed:",h),!l&&this.openDatabase()},u.onabort=h=>{this.log.error("abort:",h);const f=h.target;this.openDatabase(l=!0),f.onerror&&f.onerror(h),u.close()},u.onversionchange=h=>{this.log.error("onversionchange, lol?")},o(this.db=u)},r.onerror=a=>{i=!0,this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",a),c(a)},r.onupgradeneeded=a=>{i=!0,this.log.warn("performing idb upgrade from",a.oldVersion,"to",a.newVersion);const u=a.target,l=u.result;this.stores.forEach(h=>{if(!l.objectStoreNames.contains(h.name))n(l,h);else{const g=u.transaction.objectStore(h.name);s(g,h)}})}})}static create(e){return this.INSTANCES.find(s=>s.name===e.name)??new je(e)}static closeDatabases(e){this.INSTANCES.forEach(s=>{if(e&&e===s)return;const n=s.db;n&&(n.onclose=()=>{},n.close())})}};je.INSTANCES=[];let Jt=je;class Br{constructor(e,s){this.storeName=s,this.log=re(["IDB",e.name,s].join("-")),this.idb=Jt.create(e)}delete(e,s){const n=Array.isArray(e);return n||(e=[].concat(e)),this.getObjectStore("readwrite",r=>{const i=e.map(o=>r.delete(o));return n?i:i[0]},"",s)}clear(e){return this.getObjectStore("readwrite",s=>s.clear(),"",e)}save(e,s,n){const r=Array.isArray(e);return r||(e=[].concat(e),s=[].concat(s)),this.getObjectStore("readwrite",i=>{const o=e.map((c,a)=>i.put(s[a],c));return r?o:o[0]},"",n)}get(e,s){const n=Array.isArray(e);if(n){if(!e.length)return Promise.resolve([])}else{if(!e)return;e=[].concat(e)}return this.getObjectStore("readonly",r=>{const i=e.map(o=>r.get(o));return n?i:i[0]},"",s)}getObjectStore(e,s,n,r=this.storeName){let i;return n&&(i=performance.now(),this.log(n+": start")),this.idb.openDatabase().then(o=>new Promise((c,a)=>{const u=o.transaction([r],e,{durability:"relaxed"}),l=()=>{clearTimeout(g),a(u.error)},h=()=>{clearTimeout(g),n&&this.log(n+": end",performance.now()-i);const k=D.map(T=>T.result);c(b?k:k[0])};u.onerror=l;const f=e==="readwrite";f&&(u.oncomplete=()=>h());const g=setTimeout(()=>{this.log.error("transaction not finished",u,n)},1e4),S=s(u.objectStore(r)),b=Array.isArray(S),D=b?S:[].concat(S);if(f)return;const F=D.length;let C=F;const _=()=>{u.error||--C||h()};for(let k=0;k<F;++k){const T=D[k];T.onerror=l,T.onsuccess=_}}))}getAll(e){return this.getObjectStore("readonly",s=>s.getAll(),"",e)}}function Ls(){}const xt=16,we=class we{constructor(e,s){this.db=e,this.storeName=s,this.cache={},this.getPromises=new Map,this.keysToSet=new Set,this.saveDeferred=te(),this.keysToDelete=new Set,this.deleteDeferred=te(),this.storage=new Br(e,s),we.STORAGES.length?this.useStorage=we.STORAGES[0].useStorage:this.useStorage=!0,this.savingFreezed=!1,we.STORAGES.push(this),this.saveThrottled=Bt(async()=>{const n=this.saveDeferred;this.saveDeferred=te();const r=this.keysToSet;if(r.size){const i=Array.from(r.values());r.clear();const o=i.map(c=>this.cache[c]);try{await this.storage.save(i,o)}catch(c){console.error("[AS]: set error:",c,i,o)}}n.resolve(),r.size&&this.saveThrottled()},xt,!1),this.deleteThrottled=Bt(async()=>{const n=this.deleteDeferred;this.deleteDeferred=te();const r=this.keysToDelete;if(r.size){const i=Array.from(r.values());r.clear();try{await this.storage.delete(i)}catch(o){console.error("[AS]: delete error:",o,i)}}n.resolve(),r.size&&this.deleteThrottled()},xt,!1),this.getThrottled=Bt(async()=>{const n=Array.from(this.getPromises.keys());this.storage.get(n).then(r=>{for(let i=0,o=n.length;i<o;++i){const c=n[i],a=this.getPromises.get(c);a&&(a.resolve(this.cache[c]=r[i]),this.getPromises.delete(c))}},r=>{new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE"]).has(r.type)||(this.useStorage=!1,console.error("[AS]: get error:",r,n,s));for(let o=0,c=n.length;o<c;++o){const a=n[o],u=this.getPromises.get(a);u&&(u.resolve(void 0),this.getPromises.delete(a))}}).finally(()=>{this.getPromises.size&&this.getThrottled()})},xt,!1)}isAvailable(){return this.useStorage}getCache(){return this.cache}getFromCache(e){return this.cache[e]}setToCache(e,s){return this.cache[e]=s}async get(e,s=!0){if(this.cache.hasOwnProperty(e)&&s)return this.getFromCache(e);if(this.useStorage){const n=this.getPromises.get(e);if(n)return n;const r=te();return this.getPromises.set(e,r),this.getThrottled(),r}}getAll(){return this.storage.getAll().catch(()=>[])}set(e,s=!1){const n=this.useStorage&&!s&&!this.savingFreezed;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];this.setToCache(r,i),n&&(this.keysToSet.add(r),this.keysToDelete.delete(r),this.saveThrottled())}return n?this.saveDeferred:Promise.resolve()}delete(e,s=!1){return e=""+e,s||delete this.cache[e],this.useStorage&&(this.keysToSet.delete(e),this.keysToDelete.add(e),this.deleteThrottled()),this.useStorage?this.deleteDeferred:Promise.resolve()}clear(e=!1){if(!e)for(const s in this.cache)delete this.cache[s];return this.storage.clear().catch(Ls)}static toggleStorage(e,s){return Promise.all(this.STORAGES.map(n=>{if(n.useStorage=e,!(!De||!s))return e?n.set(n.cache):(n.keysToSet.clear(),n.keysToDelete.clear(),n.getPromises.forEach(r=>r.resolve(void 0)),n.getPromises.clear(),n.clear(!0))})).catch(Ls)}static freezeSaving(e,s){this.STORAGES.forEach(n=>n.savingFreezed=!0);try{e()}catch(n){console.error("freezeSaving callback error:",n)}this.STORAGES.forEach(n=>n.savingFreezed=!1)}};we.STORAGES=[];let Ve=we;P&&(P.AppStorage=Ve);const xr={name:"tweb",version:7,stores:[{name:"session"},{name:"stickerSets"},{name:"users"},{name:"chats"},{name:"dialogs"},{name:"messages"}]};class Nr extends Ve{constructor(){super(xr,"session")}}const _e=new Nr;P.stateStorage=_e;function dn(t,e,s){const n=s&&new Set(s),r=a=>Object.keys(a).filter(u=>a[u]!==void 0),i=s?a=>r(a).filter(u=>!n.has(u)):r,o=typeof t;return t&&e&&o==="object"&&o===typeof e?i(t).length===i(e).length&&i(t).every(a=>dn(t[a],e[a],s)):t===e}function St(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ur=new Set(["javascript:"]);function fn(t){if(!t)return null;try{const e=new URL(t).protocol;return Ur.has(e)?null:e}catch{return null}}const Wr="((?:ğŸ‘¨ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFC-\uDFFF]|ğŸ§‘ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ§‘ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ§‘ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ§‘ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB-\uDFFE]|ğŸ‘¨ğŸ»â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ»â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFC-\uDFFF]|ğŸ‘¨ğŸ¼â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¼â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘¨ğŸ½â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘¨ğŸ¾â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¾â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘¨ğŸ¿â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFE]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFC-\uDFFF]|ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFC-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFE]|ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB-\uDFFE]|ğŸ§‘ğŸ»â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFC-\uDFFF]|ğŸ§‘ğŸ»â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¼â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ§‘ğŸ¼â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ½â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¾â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¿â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB-\uDFFE]|ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨|ğŸ‘©â€â¤ï¸?â€ğŸ’‹â€\uD83D[\uDC68\uDC69]|ğŸ«±ğŸ»â€ğŸ«²\uD83C[\uDFFC-\uDFFF]|ğŸ«±ğŸ¼â€ğŸ«²\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ«±ğŸ½â€ğŸ«²\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ«±ğŸ¾â€ğŸ«²\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ«±ğŸ¿â€ğŸ«²\uD83C[\uDFFB-\uDFFE]|ğŸ‘¨â€â¤ï¸?â€ğŸ‘¨|ğŸ‘©â€â¤ï¸?â€\uD83D[\uDC68\uDC69]|ğŸ§‘â€ğŸ¤â€ğŸ§‘|ğŸ‘«\uD83C[\uDFFB-\uDFFF]|ğŸ‘¬\uD83C[\uDFFB-\uDFFF]|ğŸ‘­\uD83C[\uDFFB-\uDFFF]|ğŸ’\uD83C[\uDFFB-\uDFFF]|ğŸ’‘\uD83C[\uDFFB-\uDFFF]|ğŸ¤\uD83C[\uDFFB-\uDFFF]|\uD83D[\uDC6B-\uDC6D\uDC8F\uDC91]|ğŸ¤)|(?:\uD83D[\uDC68\uDC69]|ğŸ§‘)(?:\uD83C[\uDFFB-\uDFFF])?â€(?:âš•ï¸?|âš–ï¸?|âœˆï¸?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75]|â›¹)(?:(?:\uD83C[\uDFFB-\uDFFF]|ï¸?)â€[â™€â™‚]ï¸?)|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?â€[â™€â™‚]ï¸?|(?:ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘¨â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ³ï¸?â€âš§ï¸?|ğŸ³ï¸?â€ğŸŒˆ|ğŸ˜¶â€ğŸŒ«ï¸?|â¤ï¸?â€ğŸ”¥|â¤ï¸?â€ğŸ©¹|ğŸ´â€â˜ ï¸?|ğŸ•â€ğŸ¦º|ğŸ»â€â„ï¸?|ğŸ‘â€ğŸ—¨|ğŸ‘¨â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ‘¯â€â™€ï¸?|ğŸ‘¯â€â™‚ï¸?|ğŸ˜®â€ğŸ’¨|ğŸ˜µâ€ğŸ’«|ğŸ¤¼â€â™€ï¸?|ğŸ¤¼â€â™‚ï¸?|ğŸ§â€â™€ï¸?|ğŸ§â€â™‚ï¸?|ğŸ§Ÿâ€â™€ï¸?|ğŸ§Ÿâ€â™‚ï¸?|ğŸˆâ€â¬›)|[#*0-9]ï¸??âƒ£|(?:[Â©Â®â„¢â™Ÿ]ï¸?)|(?:\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC3F\uDC41\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]|[â€¼â‰â„¹â†”-â†™â†©â†ªâŒšâŒ›âŒ¨ââ­-â¯â±â²â¸-âºâ“‚â–ªâ–«â–¶â—€â—»-â—¾â˜€-â˜„â˜â˜‘â˜”â˜•â˜˜â˜ â˜¢â˜£â˜¦â˜ªâ˜®â˜¯â˜¸-â˜ºâ™€â™‚â™ˆ-â™“â™ â™£â™¥â™¦â™¨â™»â™¿âš’-âš—âš™âš›âšœâš âš¡âš§âšªâš«âš°âš±âš½âš¾â›„â›…â›ˆâ›â›‘â›“â›”â›©â›ªâ›°-â›µâ›¸â›ºâ›½âœ‚âœˆâœ‰âœâœ’âœ”âœ–âœâœ¡âœ³âœ´â„â‡â—â£â¤â¡â¤´â¤µâ¬…-â¬‡â¬›â¬œâ­â­•ã€°ã€½ãŠ—ãŠ™])(?:ï¸?|(?!ï¸))|(?:(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75\uDD90]|[â˜â›·â›¹âœŒâœ])(?:ï¸?|(?!ï¸))|(?:\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD\uDEC3-\uDEC5\uDEF0-\uDEF6]|[âœŠâœ‹]))(?:\uD83C[\uDFFB-\uDFFF])?|(?:ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿|ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿|ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿|ğŸ‡¦\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|ğŸ‡§\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|ğŸ‡¨\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|ğŸ‡©\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|ğŸ‡ª\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|ğŸ‡«\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|ğŸ‡¬\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|ğŸ‡­\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|ğŸ‡®\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|ğŸ‡¯\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|ğŸ‡°\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|ğŸ‡±\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|ğŸ‡²\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|ğŸ‡³\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|ğŸ‡´ğŸ‡²|ğŸ‡µ\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|ğŸ‡¶ğŸ‡¦|ğŸ‡·\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|ğŸ‡¸\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|ğŸ‡¹\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|ğŸ‡º\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|ğŸ‡»\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|ğŸ‡¼\uD83C[\uDDEB\uDDF8]|ğŸ‡½ğŸ‡°|ğŸ‡¾\uD83C[\uDDEA\uDDF9]|ğŸ‡¿\uD83C[\uDDE6\uDDF2\uDDFC]|\uD83C[\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC6F\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3C\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDDE-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|[â©-â¬â°â³â™¾â›âœ…âœ¨âŒââ“-â•â•-â—â°â¿î”Š])|ï¸)",We="a-z\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0100-\\u024f\\u0253\\u0254\\u0256\\u0257\\u0259\\u025b\\u0263\\u0268\\u026f\\u0272\\u0289\\u028b\\u02bb\\u0300-\\u036f\\u1e00-\\u1eff\\u0400-\\u04ff\\u0500-\\u0527\\u2de0-\\u2dff\\ua640-\\ua69f\\u0591-\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u05d0-\\u05ea\\u05f0-\\u05f4\\ufb1d-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4f\\u0610-\\u061a\\u0620-\\u065f\\u066e-\\u06d3\\u06d5-\\u06dc\\u06de-\\u06e8\\u06ea-\\u06ef\\u06fa-\\u06fc\\u06ff\\u0750-\\u077f\\u08a0\\u08a2-\\u08ac\\u08e4-\\u08fe\\ufb50-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\u200c\\u0e01-\\u0e3a\\u0e40-\\u0e4e\\u1100-\\u11ff\\u3130-\\u3185\\uA960-\\uA97F\\uAC00-\\uD7AF\\uD7B0-\\uD7FF\\u3003\\u3005\\u303b\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uff9f\\uffa1-\\uffdc",jr="0-9_"+We,Is="Â·",Xe="["+We+"0-9]",Vr="((?:https?|ftp)://|mailto:)?",Gr=Vr+"(?:"+Xe+"{1,64}(?::"+Xe+"{0,64})?@)?(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}|"+Xe+"["+We+Is+"0-9-]{0,64}(?:\\."+Xe+"["+We+Is+"0-9-]{0,64}){0,10}(?:\\.(xn--[0-9a-z]{2,16}|["+We+`]{2,24})))(?::\\d{2,5})?(?:/(?:\\S{0,255}[^\\s.;,(\\[\\]{}<>"'])?)?`,gn="[a-zA-Z\\d_]{5,32}",Yr="(?:\\s|^)((?:\\d{1,2}:)?(?:[0-5]?[0-9]):(?:[0-5][0-9]))(?:\\s|$)",zr="\\/([a-zA-Z\\d_]{1,32})(?:@("+gn+"))?(\\b|$)",Ma=new RegExp("(^| )(@)("+gn+")|("+Gr+")|(\\n)|("+Wr+")|(^|[\\s\\(\\]])(#["+jr+"]{2,64})|(^|\\s)"+zr+"|"+Yr,"i"),La=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ia=/(^|\s|\n)(````?)([\s\S]+?)(````?)([\s\n\.,:?!;]|$)|(^|\s|\x01)(`|~~|\*\*|__|_-_|\|\|)([^\n]+?)\7([\x01\s\.,:?!;]|$)|@(\d+)\s*\((.+?)\)|(\[(.+?)\]\((.+?)\))/m,Oa={Telegram:"tg://search_hashtag?hashtag={1}",Twitter:"https://twitter.com/hashtag/{1}",Instagram:"https://instagram.com/explore/tags/{1}/","Google Plus":"https://plus.google.com/explore/{1}"},Xt={"`":"messageEntityCode","``":"messageEntityPre","**":"messageEntityBold",__:"messageEntityItalic","~~":"messageEntityStrike","_-_":"messageEntityUnderline","||":"messageEntitySpoiler"};new Set(Object.values(Xt));const mn=new Set(["messageEntityEmoji","messageEntityLinebreak","messageEntityCaret"]),Ra=new Set(mn);for(const t in Xt)mn.add(Xt[t]);const $r=/^\+\d+$/;function Dn(t,e){fn(t)||(t="https://"+t);const s={url:t};let n,r,i;if(n=t.match(/^(?:https?:\/\/)?(?:(.+?)\.)?(?:(?:web|k|z|a)\.)?t(?:elegram)?\.me(?:\/(.+))?/)){const o=new URL(t);let c=n[1];c&&yr.has(n[1])&&(c=void 0),c&&(o.pathname=c+(o.pathname==="/"?"":o.pathname));const a=o.pathname.slice(1),u=a.split("/");if(u[0]&&u[0][0]==="$"&&u[0].length>1)i="invoice";else if(/^\+/.test(a)&&!$r.test(a))i="joinchat";else if(u[0])switch(u[0]){case"addlist":case"joinchat":case"addstickers":case"addemoji":case"voicechat":case"invoice":case"boost":case"giftcode":if(u.length!==1&&!c){i=u[0];break}default:if(u.length<=2||u[1]?.match(/^\d+(?:\?(?:comment|thread)=\d+)?$/)||u[1]==="s"){i="im";break}break}}else t.match(/^(?:https?:\/\/)?telesco\.pe\/([^/?]+)\/(\d+)/)?i="im":(r=t.match(/tg:(?:\/\/)?(.+?)(?:\?|$)/))&&(i="tg_"+r[1]);return window[i]||(i=void 0),s.onclick=i,s}P&&(P.wrapUrl=Dn);function Ba(t,e){pn(t),e===void 0?t.replaceChildren():typeof e=="string"?e?t.textContent=e:t.replaceChildren():t.replaceChildren(e)}function pn(t){t.setAttribute("dir","auto")}const xa={messageActionChatCreate:"ActionCreateGroup",messageActionChatCreateYou:"ActionYouCreateGroup",messageActionChatEditTitle:"ActionChangedTitle",messageActionChatEditPhoto:"ActionChangedPhoto",messageActionChatEditVideo:"ActionChangedVideo",messageActionChatDeletePhoto:"ActionRemovedPhoto",messageActionChatReturn:"ActionAddUserSelf",messageActionChatReturnYou:"ActionAddUserSelfYou",messageActionChatJoined:"ActionAddUserSelfMega",messageActionChatJoinedYou:"ChannelMegaJoined",messageActionChatAddUser:"ActionAddUser",messageActionChatAddUsers:"ActionAddUser",messageActionChatLeave:"ActionLeftUser",messageActionChatLeaveYou:"YouLeft",messageActionChatDeleteUser:"ActionKickUser",messageActionChatJoinedByLink:"ActionInviteUser",messageActionPinMessage:"Chat.Service.Group.UpdatedPinnedMessage",messageActionContactSignUp:"Chat.Service.PeerJoinedTelegram",messageActionChannelCreate:"ActionCreateChannel",messageActionChannelEditTitle:"Chat.Service.Channel.UpdatedTitle",messageActionChannelEditPhoto:"Chat.Service.Channel.UpdatedPhoto",messageActionChannelEditVideo:"Chat.Service.Channel.UpdatedVideo",messageActionChannelDeletePhoto:"Chat.Service.Channel.RemovedPhoto",messageActionHistoryClear:"HistoryCleared",messageActionDiscussionStarted:"DiscussionStarted",messageActionGiveawayLaunch:"BoostingGiveawayJustStarted",messageActionChannelJoined:"ChannelJoined",messageActionChannelMigrateFrom:"ActionMigrateFromGroup","messageActionPhoneCall.video_in_ok":"ChatList.Service.VideoCall.incoming","messageActionPhoneCall.video_out_ok":"ChatList.Service.VideoCall.outgoing","messageActionPhoneCall.video_missed":"ChatList.Service.VideoCall.Missed","messageActionPhoneCall.video_cancelled":"ChatList.Service.VideoCall.Cancelled","messageActionPhoneCall.in_ok":"ChatList.Service.Call.incoming","messageActionPhoneCall.out_ok":"ChatList.Service.Call.outgoing","messageActionPhoneCall.missed":"ChatList.Service.Call.Missed","messageActionPhoneCall.cancelled":"ChatList.Service.Call.Cancelled","messageActionGroupCall.started":"Chat.Service.VoiceChatStarted.Channel","messageActionGroupCall.started_by":"Chat.Service.VoiceChatStarted","messageActionGroupCall.started_byYou":"Chat.Service.VoiceChatStartedYou","messageActionGroupCall.ended":"Chat.Service.VoiceChatFinished.Channel","messageActionGroupCall.ended_by":"Chat.Service.VoiceChatFinished","messageActionGroupCall.ended_byYou":"Chat.Service.VoiceChatFinishedYou",messageActionBotAllowed:"Chat.Service.BotPermissionAllowed"},Na=ne?"Message.Unsupported.Mobile":"Message.Unsupported.Desktop";var ue;(t=>{t.strings=new Map,t.countriesList=[];let e,s;t.requestedServerLanguage=!1,t.isRTL=!1;function n(d){t.isRTL=d}t.setRTL=n;function r(d){t.lastRequestedLangCode=d,t.lastRequestedNormalizedLangCode=d.split("-")[0]}function i(){return s||(s=Promise.all([_e.get("langPack"),t.polyfillPromise]).then(([d])=>d?(t.lastRequestedLangCode||r(d.lang_code),S(d),d):a()).finally(()=>{s=void 0}))}t.getCacheLangPack=i;function o(){if(t.timeFormat==="h12")try{const d=T({hour:"numeric",minute:"numeric",hour12:!0}),m=new Date;m.setHours(0);const A=d.format(m);t.amPmCache.am=A.split(/\s/)[1],m.setHours(12);const p=d.format(m);t.amPmCache.pm=p.split(/\s/)[1]}catch(d){console.error("cannot get am/pm",d),t.amPmCache={am:"AM",pm:"PM"}}}function c(d,m=!!t.timeFormat&&t.timeFormat!==d){t.timeFormat=d,o(),m&&(k.clear(),Array.from(document.querySelectorAll(".i18n")).forEach(p=>{const I=t.weakMap.get(p);I instanceof v&&I.update()}))}t.setTimeFormat=c;function a(){const d=x.langPackCode;return r(d),Promise.all([V(()=>import("./lang-Y4EV1698.js"),__vite__mapDeps([]),import.meta.url),V(()=>import("./langSign-lcKrqmwM.js"),__vite__mapDeps([]),import.meta.url),V(()=>import("./countries-lRU-UavE.js"),__vite__mapDeps([]),import.meta.url)]).then(([m,A,p])=>{const I=[];h(m.default,I),h(A.default,I);const $={_:"langPackDifference",from_version:0,lang_code:d,strings:I,version:0,local:!0,countries:p.default};return g($)})}t.loadLocalLangPack=a;function u(d,m){m=!0,t.requestedServerLanguage=!0;const A=y.managers;return Promise.all([A.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:d,lang_pack:m?"web":x.langPack}),!m&&A.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:d,lang_pack:"android"}),V(()=>import("./lang-Y4EV1698.js"),__vite__mapDeps([]),import.meta.url),V(()=>import("./langSign-lcKrqmwM.js"),__vite__mapDeps([]),import.meta.url),A.apiManager.invokeApiCacheable("help.getCountriesList",{lang_code:d,hash:0}),t.polyfillPromise])}t.loadLangPack=u;function l(d,m){return y.managers.apiManager.invokeApi("langpack.getStrings",{lang_pack:x.langPack,lang_code:d,keys:m})}t.getStrings=l;function h(d,m=[]){for(const A in d){const p=d[A];typeof p=="string"?m.push({_:"langPackString",key:A,value:p}):m.push({_:"langPackStringPluralized",key:A,...p})}return m}t.formatLocalStrings=h;function f(d,m){return r(d),u(d,m).then(([A,p,I,$,N,he])=>{let Ae=[];return[I,$].forEach(Ct=>{h(Ct.default,Ae)}),Ae=Ae.concat(...[A.strings,p.strings].filter(Boolean)),A.strings=Ae,A.countries=N,g(A)})}t.getLangPack=f;function g(d){return d.appVersion=x.langPackVersion,_e.set({langPack:d}).then(()=>(S(d),d))}t.saveLangPack=g,t.polyfillPromise=function(){return typeof Intl<"u"&&typeof Intl.PluralRules<"u"?Promise.resolve():V(()=>import("./pluralPolyfill-BfW71bf-.js"),__vite__mapDeps([]),import.meta.url).then(m=>{window.Intl=Object.assign(typeof Intl<"u"?Intl:{},m.default)})}();function S(d){const m=t.lastRequestedLangCode;if(d.lang_code!==m)return;try{e=new Intl.PluralRules(t.lastRequestedNormalizedLangCode)}catch(p){console.error("pluralRules error",p),e=new Intl.PluralRules(t.lastRequestedNormalizedLangCode.split("-",1)[0])}try{e=new Intl.PluralRules(d.lang_code)}catch(p){console.error("pluralRules error",p),e=new Intl.PluralRules(d.lang_code.split("-",1)[0])}t.strings.clear();for(const p of d.strings)t.strings.set(p.key,p);d.countries&&(t.countriesList.length=0,t.countriesList.push(...d.countries.countries),d.countries.countries.forEach(p=>{if(p.name){const I=p.default_name;t.strings.set(I,{_:"langPackString",key:I,value:p.name})}})),t.lastAppliedLangCode!==m&&(t.lastAppliedLangCode&&y.myId&&(y.managers.appReactionsManager.resetAvailableReactions(),y.managers.appUsersManager.indexMyself(),y.managers.dialogsStorage.indexMyDialog()),t.lastAppliedLangCode=m,k.clear(),o(),y.dispatchEvent("language_change",m)),Array.from(document.querySelectorAll(".i18n")).forEach(p=>{const I=t.weakMap.get(p);I&&I.update()})}t.applyLangPack=S;function b(d,m,A,p){const I=m[p===void 0?A.i++:p];Array.isArray(I)?d.push(...I):d.push(I)}function D(d,m,A){if(!A){A={i:0};const N=d.match(/(%|un)\d+/g);N?.length&&(A.i=Math.max(...N.map(he=>+he.replace(/\D/g,""))))}const p=[],I=/(\*\*|__)(.+?)\1|(\n)|(\[.+?\]\(.*?\))|un\d|%\d\$.|%./g;let $=0;return d.replace(I,(N,he,Ae,Ct,Le,_t,or)=>{if(_t>$&&p.push(or.slice($,_t)),he){let q;switch(he){case"**":{q=document.createElement("b");break}case"__":{q=document.createElement("i");break}}q.append(...D(Ae,m,A)),p.push(q)}else if(Ct)p.push(document.createElement("br"));else if(Le){const q=Le.lastIndexOf("]"),ar=Le.slice(1,q),Pt=Le.slice(q+2,Le.length-1);let Y;if(Pt&&fn(Pt)){Y=document.createElement("a");const kt=Dn(Pt);Y.href=kt.url,kt.onclick&&Y.setAttribute("onclick",kt.onclick+"(this)"),Y.target="_blank"}else Y=m[A.i++],Y instanceof DocumentFragment&&(Y=Y.firstChild),typeof Y!="string"&&(Y.textContent="");const ws=D(ar,m,A);typeof Y=="string"?p.push(...ws):(Y.append(...ws),p.push(Y))}else if(m){const q=N.replace(/\D/g,"");b(p,m,A,!q||Number.isNaN(+q)?void 0:Math.min(m.length-1,+q-1))}return $=_t+N.length,""}),$!==d.length&&p.push(d.slice($)),p}t.superFormatter=D;function F(d,m=!1,A){const p=t.strings.get(d);let I;if(p)if(p._==="langPackStringPluralized"&&A?.length){let N=A[0];typeof N=="string"&&(N=+N.replace(/\D/g,""));const he=e.select(N);I=p[he+"_value"]||p.other_value}else p._==="langPackString"?I=p.value:I=d;else I=d;const $=D(I,A);return m?$.map(N=>N instanceof Node?N.textContent:N).join(""):$}t.format=F,t.weakMap=new WeakMap;class C{constructor(m){this.element=m?.element||document.createElement("span"),this.element.classList.add("i18n"),this.property=m?.property,t.weakMap.set(this.element,this)}}class _ extends C{constructor(m={}){super({...m,property:m.property??"innerHTML"}),m?.key&&this.update(m)}update(m){if(qt(this,m),this.property==="innerHTML")this.element.replaceChildren(...F(this.key,!1,this.args)),this.args?.length&&this.element.normalize();else{const A=this.element[this.property],p=F(this.key,!0,this.args);A===void 0?this.element.dataset[this.property]=p:this.element[this.property]=p}}compareAndUpdate(m){if(!(this.key===m.key&&dn(this.args,m.args)))return this.update(m)}}t.IntlElement=_;const k=new Map;function T(d={}){const m=JSON.stringify(d);let A=k.get(m);return A||(A=new Intl.DateTimeFormat(t.lastRequestedNormalizedLangCode+"-u-hc-"+t.timeFormat,d),k.set(m,A)),A}t.getDateTimeFormat=T,t.amPmCache={am:"AM",pm:"PM"};class v extends C{constructor(m){super({...m,property:m.property??"textContent"}),pn(this.element),m?.date&&this.update(m)}update(m){qt(this,m);let A;if(this.options.hour&&this.options.minute&&Object.keys(this.options).length===2){const p=this.date.getHours();A=("0"+(t.timeFormat==="h12"?p%12||12:p)).slice(-2)+":"+("0"+this.date.getMinutes()).slice(-2),t.timeFormat==="h12"&&(A+=" "+(p<12?t.amPmCache.am:t.amPmCache.pm))}else{const p=T(this.options);A=St(p.format(this.date))}this.element[this.property]=A}}t.IntlDateElement=v;function R(d,m){return new _({key:d,args:m}).element}t.i18n=R;function w(d){return new _(d).element}t.i18n_=w;function E(d,m,A,p){return new _({element:d,key:m,args:A,property:p}).element}t._i18n=E})(ue||(ue={}));const U=ue,Ge=ue.i18n,Ua=ue.i18n_,Wa=ue._i18n;function Hr(t,e){const s=t.slice(0,1);for(let n=1;n<t.length;++n){const r=t.length-1===n;s.push(typeof e=="function"?e(r):e),s.push(t[n])}return s}function ja(t,e=!0,s){const n=Hr(t,r=>{const i=r&&e?"AutoDownloadSettings.LastDelimeter":"AutoDownloadSettings.Delimeter";return s?ue.format(i,!0):Ge(i)});return s?n.join(""):n}P&&(P.I18n=ue);function Kr(t){return+t<0}function qr(t){return+t>=0}String.prototype.toUserId=function(){return(+this).toUserId()};String.prototype.toChatId=function(){return(+this).toChatId()};String.prototype.toPeerId=function(t){return(+this).toPeerId(t)};String.prototype.isPeerId=function(){return/^[\d-]/.test(this.toString())};Number.prototype.toUserId=function(){return+this};Number.prototype.toChatId=function(){return Math.abs(this)};Number.prototype.toPeerId=function(t){return t===void 0?+this:t?-Math.abs(this):+this};Number.prototype.isPeerId=function(){return!0};[["isUser",qr],["isAnyChat",Kr]].forEach(t=>{const e=Array.isArray(t)?t[0]:t,s=Array.isArray(t)?t[1]:t;String.prototype[e]=function(){return s.call(null,this.toString())},Number.prototype[e]=function(){return s.call(null,+this)}});function Jr(...t){const e=t.reduce((r,i)=>r+(i.byteLength||i.length),0),s=new Uint8Array(e);let n=0;return t.forEach(r=>{s.set(r instanceof ArrayBuffer?new Uint8Array(r):r,n),n+=r.byteLength||r.length}),s}Uint8Array.prototype.concat=function(...t){return Jr(this,...t)};Uint8Array.prototype.toJSON=function(){return[...this]};Promise.prototype.finally=Promise.prototype.finally||function(t){const e=s=>Promise.resolve(t()).then(s);return this.then(s=>e(()=>s),s=>e(()=>Promise.reject(s)))};class Xr{constructor(){this.convertPromises={}}init(){this.worker=new Worker(new URL(""+new URL("webp.worker-Yvt9Ei06.js",import.meta.url).href,import.meta.url)),this.worker.addEventListener("message",e=>{const n=e.data.payload,r=this.convertPromises[n.fileName];r&&(n.bytes?r.resolve(n.bytes):r.reject(),delete this.convertPromises[n.fileName])})}postMessage(e){this.init&&(this.init(),this.init=null),this.worker.postMessage(e)}convert(e,s){if(this.convertPromises.hasOwnProperty(e))return this.convertPromises[e];const n=te();return this.postMessage({type:"convertWebp",payload:{fileName:e,bytes:s}}),this.convertPromises[e]=n}}const Fn=new Xr;P.webpWorkerController=Fn;class Zr{constructor(){this.prefix="",this.cache={},this.useStorage=!0,z.test&&(this.prefix="t_")}get(e,s=!0){if(this.cache.hasOwnProperty(e)&&s)return this.cache[e];if(this.useStorage){let n;try{n=localStorage.getItem(this.prefix+e)}catch{throw this.useStorage=!1,ge("STORAGE_OFFLINE")}if(n!==null)try{n=JSON.parse(n)}catch{}else n=void 0;return n}else throw ge("STORAGE_OFFLINE")}set(e,s=!1){let n;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];if(this.cache[r]=i,!s)try{if(!this.useStorage)throw ge("STORAGE_OFFLINE");const o=JSON.stringify(i);localStorage.setItem(this.prefix+r,o)}catch(o){this.useStorage=!1,n=o}}if(n)throw n}delete(e,s=!1){e=""+e,s||delete this.cache[e];try{localStorage.removeItem(this.prefix+e)}catch{}}clear(){const e=["dc","server_time_offset","xt_instance","user_auth","state_id","k_build"];for(let s=1;s<=5;++s)e.push(`dc${s}_server_salt`),e.push(`dc${s}_auth_key`);for(const s of e)this.delete(s,!0)}toggleStorage(e,s){if(this.useStorage=e,!!s)if(!e)this.clear();else return this.set(this.cache)}}const At=class At{constructor(){At.STORAGES.push(this),De||(this.storage=new Zr)}async proxy(e,...s){return De?Ke.getInstance().invoke("localStorageProxy",{type:e,args:s}):(s=Array.prototype.slice.call(s),this.storage[e].apply(this.storage,s))}get(e,s){return this.proxy("get",e,s)}set(e,s){return this.proxy("set",e,s)}delete(e,s){return this.proxy("delete",e,s)}clear(){return this.proxy("clear")}toggleStorage(e,s){return this.proxy("toggleStorage",e,s)}};At.STORAGES=[];let Zt=At;const B=new Zt;P.appStorage=B;class Qr{reload(){try{location.reload()}catch{}}close(){try{window.close()}catch{}}focus(){window.focus()}}const En=new Qr;function j(t){if(t===null||typeof t!="object")return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return t.map(r=>j(r));if(ArrayBuffer.isView(t))return t.slice();const e=new t.constructor;for(var s in t)t.hasOwnProperty(s)&&(e[s]=j(t[s]));return e}const ht=typeof SharedWorker<"u"&&!z.noSharedWorker,ei=fe?"touchstart":"mousemove";class ti extends Ee{constructor(){super(),this._isIdle=!0,this.focusPromise=Promise.resolve(),this.focusResolve=()=>{},window.addEventListener("blur",()=>{this.isIdle=!0,window.addEventListener("focus",()=>{this.isIdle=!1},{once:!0})}),window.addEventListener(ei,()=>{this.isIdle=!1},{once:!0,passive:!0}),this.addEventListener("change",e=>{e?this.focusPromise=new Promise(s=>{this.focusResolve=s}):this.focusResolve()})}getFocusPromise(){return this.focusPromise}get isIdle(){return this._isIdle}set isIdle(e){this._isIdle!==e&&(this._isIdle=e,this.dispatchEvent("change",e))}}const dt=new ti,si=5e3,ni=3e4,ri=2e4,ii=ht;class oi extends Ee{constructor(){super(!1),this.log=re("INSTANCE"),this.clearInstance=()=>{this.masterInstance&&!this.deactivated&&(this.log.warn("clear master instance"),B.delete("xt_instance"))},this.checkInstance=async(e=dt.isIdle)=>{if(this.deactivated)return;const s=Date.now(),n={id:this.instanceId,idle:e,time:s},[r,i=x.build]=await Promise.all([B.get("xt_instance",!1),B.get("k_build",!1)]);if(i>x.build){this.masterInstance=!1,y.managers.networkerFactory.stopAll(),this.deactivateInstance("version"),Je.toggleStorages(!1,!1);return}else if(ii){B.set({xt_instance:n});return}!e||!r||r.id===this.instanceId||r.time<s-ri?(B.set({xt_instance:n}),this.masterInstance||(this.masterInstance=!0,y.managers.networkerFactory.startAll(),this.log.warn("now master instance",n)),this.clearDeactivateTimeout()):this.masterInstance&&(this.masterInstance=!1,y.managers.networkerFactory.stopAll(),this.log.warn("now idle instance",n),this.deactivateTimeout||(this.deactivateTimeout=window.setTimeout(()=>this.deactivateInstance("tabs"),ni)))},this.log=re("INSTANCE"),this.instanceId=an}get deactivatedReason(){return this.deactivated}start(){if(this.reset(),!this.started){this.started=!0,dt.addEventListener("change",this.checkInstance),setInterval(this.checkInstance,si),this.checkInstance();try{document.documentElement.addEventListener("beforeunload",this.clearInstance)}catch{}}}reset(){this.masterInstance=!1,this.clearDeactivateTimeout(),this.deactivated=void 0}activateInstance(){this.deactivated&&(this.reset(),this.checkInstance(!1),this.dispatchEvent("activated"))}deactivateInstance(e){this.masterInstance||this.deactivated||(this.log.warn("deactivate",e),this.clearDeactivateTimeout(),this.deactivated=e,this.dispatchEvent("deactivated",e))}clearDeactivateTimeout(){this.deactivateTimeout&&(clearTimeout(this.deactivateTimeout),this.deactivateTimeout=0)}}const ft=new oi;P&&(P.singleInstance=ft);function ai(t,e){if(t!==void 0)return t=+t.toFixed(0),e?t<ut?t:t%ut:t}function ci(t){return ai(t,!0)}const ui=1e4;class vn extends Ee{constructor(){super(!1),this.isAvailable=!0,this.isPushEnabled=!1,this.localNotificationsAvailable=!0,this.started=!1,this.settings={},this.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,this.userVisibleOnly=!this.isFirefox,this.log=re("PUSH-API"),this.subscribe=()=>{this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.subscribe({userVisibleOnly:this.userVisibleOnly}).then(s=>{this.isPushEnabled=!0,this.pushSubscriptionNotify("subscribe",s)}).catch(s=>{Notification.permission==="denied"?this.log("Permission for Notifications was denied"):(this.log("Unable to subscribe to push.",s),this.userVisibleOnly||(this.userVisibleOnly=!0,setTimeout(this.subscribe,0)))})})},this.isAliveNotify=()=>{if(!this.isAvailable||ft.deactivatedReason)return;this.settings.baseUrl=(location.href||"").replace(/#.*$/,"");const e={},s={push_action_mute1d:ne?"PushNotification.Action.Mute1d.Mobile":"PushNotification.Action.Mute1d",push_action_settings:ne?"PushNotification.Action.Settings.Mobile":"PushNotification.Action.Settings",push_message_nopreview:"PushNotification.Message.NoPreview"};for(const n in s)e[n]=U.format(s[n],!0);this.serviceMessagePort.invokeVoid("pushPing",{localNotifications:this.localNotificationsAvailable,lang:e,settings:this.settings}),this.isAliveTO=setTimeout(this.isAliveNotify,ui)},(!("PushManager"in window)||!("Notification"in window)||!("serviceWorker"in navigator))&&(this.log.warn("Push messaging is not supported."),this.isAvailable=!1,this.localNotificationsAvailable=!1),this.isAvailable&&Notification.permission==="denied"&&this.log.warn("The user has blocked notifications.")}start(){this.started||(this.started=!0,this.getSubscription(),this.setUpServiceWorkerChannel())}setLocalNotificationsDisabled(){this.localNotificationsAvailable=!1}getSubscription(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.isPushEnabled=!!s,this.pushSubscriptionNotify("init",s)}).catch(s=>{this.log.error("Error during getSubscription()",s)})})}unsubscribe(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.isPushEnabled=!1,s&&(this.pushSubscriptionNotify("unsubscribe",s),setTimeout(()=>{s.unsubscribe().then(n=>{this.isPushEnabled=!1}).catch(n=>{this.log.error("Unsubscription error: ",n)})},3e3))}).catch(s=>{this.log.error("Error thrown while unsubscribing from push messaging.",s)})})}forceUnsubscribe(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.log.warn("force unsubscribe",s),s&&s.unsubscribe().then(n=>{this.log.warn("force unsubscribe successful",n),this.isPushEnabled=!1}).catch(n=>{this.log.error("Unsubscription error: ",n)})}).catch(s=>{this.log.error("Error thrown while unsubscribing from push messaging.",s)})})}setSettings(e){this.settings=j(e),clearTimeout(this.isAliveTO),this.isAliveNotify()}hidePushNotifications(){this.isAvailable&&this.serviceMessagePort.invokeVoid("notificationsClear",void 0)}setUpServiceWorkerChannel(){this.isAvailable&&(this.serviceMessagePort.addEventListener("pushClick",e=>{if(ft.deactivatedReason){En.reload();return}this.dispatchEvent("push_notification_click",e)}),navigator.serviceWorker.ready.then(this.isAliveNotify))}pushSubscriptionNotify(e,s){if(s){const n=s.toJSON();if(!n||!n.endpoint||!n.keys||!n.keys.p256dh||!n.keys.auth){this.log.warn("Invalid push subscription",n),this.unsubscribe(),this.isAvailable=!1,this.pushSubscriptionNotify(e);return}this.log.warn("Push",e,n),this.dispatchEvent("push_"+e,{tokenType:10,tokenValue:JSON.stringify(n)})}else this.log.warn("Push",e,!1),this.dispatchEvent("push_"+e,!1)}ignorePushByMid(e,s){this.isAvailable&&this.serviceMessagePort.invokeVoid("shownNotification",e+"_"+ci(s))}}const gt=new vn;P&&(P.webPushApiManager=gt);const li=Object.freeze(Object.defineProperty({__proto__:null,WebPushApiManager:vn,default:gt},Symbol.toStringTag,{value:"Module"}));function hi(t){const e=document.createElement("script"),s=new Promise(n=>{e.onload=e.onerror=()=>{n(e)}});return e.src=t,document.body.appendChild(e),s}function di(t){const e=Date.now();return t?e/1e3|0:e}class An{constructor(){this.disabled=z.test||!x.domains.includes(location.hostname)}setAuthorized(e){if(!this.disabled)return B.get("tgme_sync").then(s=>{const n=di(!0);if(e&&s?.canRedirect===e&&s.ts+86400>n)return;B.set({tgme_sync:{canRedirect:e,ts:n}});const r=`_websync_?authed=${e?"1":"0"}&version=${encodeURIComponent(x.version+" "+x.suffix)}`,o=["//telegram.me/"+r,"//t.me/"+r].map(c=>hi(c).then(a=>{a.remove()}));return Promise.all(o)})}}const ps=new An;P&&(P.telegramMeWebManager=ps);const fi=Object.freeze(Object.defineProperty({__proto__:null,TelegramMeWebManager:An,default:ps},Symbol.toStringTag,{value:"Module"})),Fs=typeof RTCPeerConnection<"u"&&!Me,gi=Fs;let nt;if(!J)nt=!0;else try{nt=+navigator.userAgent.match(/Version\/(.+?) /)[1]>=14}catch{nt=!1}const mi=nt,Di="filter"in(document.createElement("canvas").getContext("2d")||{}),pi=!!navigator?.geolocation?.getCurrentPosition&&!1,Fi=Fs,yn=document.createElement("canvas").toDataURL("image/webp").startsWith("data:image/webp"),Ye=new Set(["image/jpeg","image/png","image/bmp"]);yn&&Ye.add("image/webp");const Ei=[["image/jxl","data:image/jxl;base64,/woIAAAMABKIAgC4AF3lEgAAFSqjjBu8nOv58kOHxbSN6wxttW1hSaLIODZJJ3BIEkkaoCUzGM6qJAE="],["image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="]],vi=Ei.map(([t,e])=>{const s=new Image,n=new Promise(r=>{s.onload=s.onerror=()=>{const i=s.height===2;r(i?t:void 0)}});return s.src=e,n}),Sn=Promise.all(vi).then(t=>t.filter(Boolean)),Es=document.createElement("video"),Ai=!!Es.canPlayType("video/webm")&&!J&&!Te,bn=!!Es.canPlayType("video/quicktime")||J||Te,yi=!!Es.canPlayType('video/mp4; codecs="hev1"'),Si=Object.freeze(Object.defineProperty({__proto__:null,IS_H265_SUPPORTED:yi,IS_MOV_SUPPORTED:bn,IS_WEBM_SUPPORTED:Ai},Symbol.toStringTag,{value:"Module"})),vs=new Set(["image/gif","video/mp4","video/webm"]);bn&&vs.add("video/quicktime");const bi=[...Ye].concat([...vs]),wn=new Set(bi),wi=!Me&&!1,Ci="getDisplayMedia"in(navigator?.mediaDevices||{}),_i=!!navigator?.vibrate,Os=document.createElement("audio"),Cn=!!(Os.canPlayType&&Os.canPlayType("audio/ogg;").replace(/no/,""));let _n=!1;try{const t=document.createElement("canvas").getContext("webgl"),e=t.getExtension("WEBGL_debug_renderer_info"),s=e&&t.getParameter(e.UNMASKED_RENDERER_WEBGL)||"";(s.match(/Apple/)&&!s.match(/Apple GPU/)||t.getSupportedExtensions().indexOf("WEBGL_compressed_texture_s3tc_srgb")===-1)&&(_n=!0)}catch{}const Pi=_n,Rs={CAN_USE_TRANSFERABLES:mi,IS_APPLE_MX:Pi,IS_CALL_SUPPORTED:gi,IS_CANVAS_FILTER_SUPPORTED:Di,IS_EMOJI_SUPPORTED:Kt,IS_GEOLOCATION_SUPPORTED:pi,IS_GROUP_CALL_SUPPORTED:Fi,IS_PARALLAX_SUPPORTED:wi,IS_SCREEN_SHARING_SUPPORTED:Ci,IS_TOUCH_SUPPORTED:fe,...Si,IS_VIBRATE_SUPPORTED:_i,IS_OPUS_SUPPORTED:Cn,IS_SHARED_WORKER_SUPPORTED:ht,IS_WEBP_SUPPORTED:yn,IS_WEBRTC_SUPPORTED:Fs,IMAGE_MIME_TYPES_SUPPORTED:Ye,MEDIA_MIME_TYPES_SUPPORTED:wn,VIDEO_MIME_TYPES_SUPPORTED:vs,...hr};function ki(){const t=document.createElement("input");t.type="time",t.value="15:00",t.style.visibility="hidden",document.body.append(t);const e=t.offsetWidth;return t.remove(),e>110?"h12":"h23"}const Ti={8:new Uint8Array(1),16:new Uint16Array(1),32:new Uint32Array(1)};function mt(t){const e=Ti[t];return crypto.getRandomValues(e),e[0]}function Va(){return""+mt(32)+mt(32)%16777215}const Mi=x.version,Li=x.build,Bs={_:"theme",access_hash:"",id:"",settings:[{_:"themeSettings",pFlags:{},base_theme:{_:"baseThemeClassic"},accent_color:3379436,message_colors:[6072403],wallpaper:{_:"wallPaper",pFlags:{default:!0,pattern:!0},access_hash:"",document:void 0,id:"",slug:"pattern",settings:{_:"wallPaperSettings",pFlags:{},intensity:50,background_color:14409147,second_background_color:7054727,third_background_color:14014605,fourth_background_color:8960132}}},{_:"themeSettings",pFlags:{},base_theme:{_:"baseThemeNight"},accent_color:8877281,message_colors:[8877281],wallpaper:{_:"wallPaper",pFlags:{default:!0,pattern:!0,dark:!0},access_hash:"",document:void 0,id:"",slug:"pattern",settings:{_:"wallPaperSettings",pFlags:{},intensity:-50,background_color:16696470,second_background_color:14511289,third_background_color:9842623,fourth_background_color:5200853}}}],slug:"",title:"",emoticon:"ğŸ ",pFlags:{default:!0}},xs=(t,e,s)=>({...Bs,name:t,settings:{...Bs.settings.find(n=>n.base_theme._===e),highlightingColor:s}}),G={allDialogsLoaded:{},pinnedOrders:{},contactsListCachedTime:0,updates:{},filtersArr:[],maxSeenMsgId:0,stateCreatedTime:Date.now(),recentEmoji:[],recentCustomEmoji:[],topPeersCache:{},recentSearch:[],version:Mi,build:Li,authState:{_:ne?"authStateSignIn":"authStateSignQr"},hiddenPinnedMessages:{},settings:{messagesTextSize:16,distanceUnit:"kilometers",sendShortcut:"enter",autoDownload:{photo:{contacts:!0,private:!0,groups:!0,channels:!0},video:{contacts:!0,private:!0,groups:!0,channels:!0},file:{contacts:!0,private:!0,groups:!0,channels:!0}},autoDownloadNew:{_:"autoDownloadSettings",file_size_max:3145728,pFlags:{video_preload_large:!0,audio_preload_next:!0},photo_size_max:1048576,video_size_max:15728640,video_upload_maxbitrate:100,small_queue_active_operations_max:0,large_queue_active_operations_max:0},stickers:{suggest:"all",dynamicPackOrder:!0,loop:!0},emoji:{suggest:!0,big:!0},themes:[xs("day","baseThemeClassic","hsla(86.4, 43.846153%, 45.117647%, .4)"),xs("night","baseThemeNight","hsla(299.142857, 44.166666%, 37.470588%, .4)")],theme:"system",notifications:{sound:!1},timeFormat:ki(),liteMode:{all:!1,animations:!1,chat:!1,chat_background:!1,chat_spoilers:!1,effects:!1,effects_premiumstickers:!1,effects_reactions:!1,effects_emoji:!1,emoji:!1,emoji_messages:!1,emoji_panel:!1,gif:!1,stickers:!1,stickers_chat:!1,stickers_panel:!1,video:!1},savedAsForum:!1},playbackParams:{volume:1,muted:!1,playbackRate:1,playbackRates:{voice:1,video:1,audio:1},loop:!1,round:!1},keepSigned:!0,chatContextMenuHintWasShown:!1,hideChatJoinRequests:{},stateId:mt(32),notifySettings:{},confirmedWebViews:[],seenTooltips:{storySound:!1},hiddenSimilarChannels:[],appConfig:{}};function Ze(t,e){t=t.split(" ",1)[0],e=e.split(" ",1)[0];const s=t.split("."),n=e.split(".");for(let r=0;r<s.length;++r){const i=+s[r],o=+n[r];if(i>o)return 1;if(i<o)return-1}return 0}function Ii(t){return typeof t=="object"&&t!==null}function Pn(t,e,s,n,r,i){for(const o in t){const c=i?`${i}.${o}`:o;r?.has(c)||(typeof e[o]!=typeof t[o]?(e[o]=j(t[o]),s?.(n||o)):Ii(t[o])&&Pn(t[o],e[o],s,n||o,r,c))}}function Oi(t,e,s){const n=performance.now();return(s||console).warn(lt(),"start",e),t.then(()=>{(s||console).warn(lt(),"end",e,performance.now()-n)}),t}function Ri(t){return(...e)=>Oi(...e,t)}const Bi=24*60*60*1e3,Qe=G.version,Oe=G.build,et=Object.keys(G),xi=["contactsListCachedTime","stateCreatedTime","maxSeenMsgId","filtersArr"];async function Ni(){const t=re("STATE-LOADER",ms.Error),e=performance.now(),s=Ri(t),n=et.map(v=>s(_e.get(v),"state "+v)).concat(s(B.get("user_auth"),"auth"),s(B.get("state_id"),"auth"),s(B.get("k_build"),"auth"),s(B.get("auth_key_fingerprint"),"auth"),s(B.get(`dc${x.baseDcId}_auth_key`),"auth")).concat(s(_e.get("user_auth"),"old auth")),r=await Promise.all(n);t.warn("promises",performance.now()-e);const i=[],o=(v,R)=>{a[v]=R,i.push(v)},c=v=>{i.length=0,a=v,i.push(...Object.keys(a))};let a={};for(let v=0,R=et.length;v<R;++v){const w=et[v],E=r[v];E!==void 0?a[w]=E:o(w,j(G[w]))}r.splice(0,et.length);let u=r.shift();const l=r.shift(),h=r.shift(),f=r.shift(),g=r.shift(),S=r.shift();if(!u&&S){u=S;const v=["dc","server_time_offset","xt_instance"];for(let E=1;E<=5;++E)v.push(`dc${E}_server_salt`),v.push(`dc${E}_auth_key`);const R=await Promise.all(v.map(E=>_e.get(E)));v.push("user_auth"),R.push(typeof u=="number"||typeof u=="string"?{dcID:R[0]||x.baseDcId,date:Date.now()/1e3|0,id:u.toPeerId(!1)}:u);const w={};v.forEach((E,d)=>{w[E]=R[d]}),await B.set(w)}u&&(a.authState={_:"authStateSignedIn"},y.dispatchEvent("user_auth",typeof u=="number"||typeof u=="string"?{dcID:0,date:Date.now()/1e3|0,id:u.toPeerId(!1)}:u));const b=new Set,D=v=>{v.push("authState","stateId");const R=new Map(v.map(E=>[E,a[E]]));a=j(G),R.forEach((E,d)=>{a[d]=E});const w=["chats","dialogs","users"];for(const E of w)b.add(E);c(a)};if(a.stateId!==l&&(l!==void 0&&D([]),await B.set({state_id:a.stateId})),g){const v=g.slice(0,8);f?f!==v&&D([]):D(["settings"]),f!==v&&await B.set({auth_key_fingerprint:v})}const F=Date.now();a.stateCreatedTime+Bi<F&&(me&&t("will refresh state",a.stateCreatedTime,F),(R=>{R.forEach(w=>{o(w,j(G[w]))})})(xi));const C=a.settings.autoDownload;if(C?.private!==void 0){const v=["contacts","private","groups","channels"];["photo","video","file"].forEach(w=>{const E=C[w]={};v.forEach(d=>{E[d]=C[d]})}),v.forEach(w=>{delete C[w]}),o("settings",a.settings)}Pn(G,a,v=>{o(v,a[v])},void 0,new Set(["settings.themes"]));let k,T;if(a.version!==Qe||a.build!==Oe){if(a.build<322&&(o("allDialogsLoaded",j(G.allDialogsLoaded)),o("pinnedOrders",j(G.pinnedOrders)),o("filtersArr",j(G.filtersArr)),b.add("dialogs")),Ze(a.version,"1.7.1")===-1){let v=!1;if(Ze(a.version,"1.3.0")===-1)v=!0,a.settings.theme=j(G.settings.theme),a.settings.themes=j(G.settings.themes);else if(Ze(a.version,"1.7.1")===-1){v=!0;const R=a.settings.themes;a.settings.themes=j(G.settings.themes);try{R.forEach(w=>{const E=w.background;if(!E)return;const d=a.settings.themes.find(p=>p.name===w.name);d.settings.highlightingColor=E.highlightingColor;const m=p=>p&&parseInt(p.slice(1),16),A=(E.color||"").split(",").map(m);if(E.color&&!E.slug)d.settings.wallpaper={_:"wallPaperNoFile",id:0,pFlags:{},settings:{_:"wallPaperSettings",pFlags:{}}};else{const p={_:"wallPaper",id:0,access_hash:0,slug:E.slug,document:{},pFlags:{},settings:{_:"wallPaperSettings",pFlags:{}}},I=p.settings;d.settings.wallpaper=p,E.slug&&!E.color?I.pFlags.blur=E.blur||void 0:E.intensity&&(I.intensity=E.intensity,p.pFlags.pattern=!0,p.pFlags.dark=E.intensity<0||void 0)}if(A.length){const p=d.settings.wallpaper.settings;p.background_color=A[0],p.second_background_color=A[1],p.third_background_color=A[2],p.fourth_background_color=A[3]}})}catch(w){console.error("migrating themes error",w)}}v&&o("settings",a.settings)}if(a.build<309&&(a.settings.liteMode.animations=!a.settings.animationsEnabled,a.settings.liteMode.video=!a.settings.autoPlay.videos,a.settings.liteMode.gif=!a.settings.autoPlay.gifs),a.build<312&&typeof a.settings.stickers.suggest=="boolean"&&(a.settings.stickers.suggest=a.settings.stickers.suggest?"all":"none"),a.build<=432){let v=!1;try{for(const R of a.settings.themes)R.settings.highlightingColor||(R.settings.highlightingColor=R.settings.highlightningColor,delete R.settings.highlightningColor,v=!0)}catch{}v&&o("settings",a.settings)}a.appConfig=j(G.appConfig),Ze(a.version,Qe)!==0&&(k=Qe,T=a.version),o("version",Qe),o("build",Oe)}return h!==Oe&&(!h||h<Oe)&&B.set({k_build:Oe}),y.settings=a.settings,me&&t("state res",a,j(a)),t.warn("total",performance.now()-e),{state:a,resetStorages:b,newVersion:k,oldVersion:T,pushedKeys:i}}let Ui;function Wi(){return Ui??(Ui=Ni())}class ji{constructor(){this.sampleRate=48e3,this.tasks=[],this.keepAlive=!1,this.log=re("OPUS",ms.Error)}isPlaySupported(){return Cn}loadWavWorker(){this.wavWorker||(this.wavWorker=new Worker("waveWorker.min.js"),this.wavWorker.addEventListener("message",e=>{const s=e.data;if(this.log("[WAV] got message:",s),s&&s.page){const n=s.page;this.onTaskEnd(this.tasks.shift(),n)}}))}loadWorker(){this.worker||(this.worker=new Worker("decoderWorker.min.js"),this.worker.addEventListener("message",e=>{const s=e.data;this.log("[DECODER] got message",s),s.type==="done"?(this.wavWorker.postMessage({command:"done"}),s.waveform&&(this.tasks[0].waveform=s.waveform)):this.wavWorker.postMessage({command:"encode",buffers:e.data},J?void 0:s.map(n=>n.buffer))}))}setKeepAlive(e){this.keepAlive=e,this.keepAlive?(this.loadWorker(),this.loadWavWorker()):this.tasks.length||this.terminateWorkers()}onTaskEnd(e,s){s?(clearTimeout(e.timeout),e.callback.resolve({bytes:s,waveform:e.waveform})):e.callback.reject("timeout"),this.tasks.length&&this.executeNewTask(this.tasks[0]),this.terminateWorkers()}terminateWorkers(e=!1){(this.keepAlive||this.tasks.length)&&!e||(this.worker&&(this.worker.terminate(),this.worker=null),this.wavWorker&&(this.wavWorker.terminate(),this.wavWorker=null))}executeNewTask(e){this.worker.postMessage({command:"init",decoderSampleRate:this.sampleRate,outputBufferSampleRate:this.sampleRate}),this.wavWorker.postMessage({command:"init",wavBitDepth:16,wavSampleRate:this.sampleRate}),this.log("[DECODER] send decode"),this.worker.postMessage({command:"decode",pages:e.pages,waveform:e.withWaveform},J?void 0:[e.pages.buffer]),e.timeout=window.setTimeout(()=>{this.log.error("decode timeout"),this.terminateWorkers(!0),this.tasks.length&&(this.loadWorker(),this.loadWavWorker()),this.onTaskEnd(this.tasks.shift())},1e4)}pushDecodeTask(e,s){return new Promise((n,r)=>{const i={pages:e,withWaveform:s,callback:{resolve:n,reject:r},timeout:0};this.loadWorker(),this.loadWavWorker(),this.tasks.push(i)===1&&this.executeNewTask(i)})}async decode(e,s=!1){return this.pushDecodeTask(e,s).then(async n=>{const r=new Blob([n.bytes],{type:"audio/wav"});return{url:await Je.invoke("createObjectURL",r),waveform:n.waveform}})}}const kn=new ji;P.opusDecodeController=kn;class Vi extends Ds{constructor(){super("CRYPTO"),this.lastIndex=-1}invokeCryptoNew({method:e,args:s,transfer:n}){const r={method:e,args:s},i=this.listeners.invoke;if(i?.size){let c=i.values().next().value.callback(r);return!De&&!(c instanceof Promise)&&(c=Promise.resolve(c)),c}const o=e==="aes-encrypt"||e==="aes-decrypt"?this.lastIndex=(this.lastIndex+1)%this.sendPorts.length:0;return this.invoke("invoke",r,void 0,this.sendPorts[o],n)}invokeCrypto(e,...s){return this.invokeCryptoNew({method:e,args:s})}}const rt=new Vi;P&&(P.cryptoMessagePort=rt);function Gi(t){return["image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/bmp","image/avif","image/jxl","video/mp4","video/webm","video/quicktime","audio/ogg","audio/mpeg","audio/mp4","audio/wav","application/json","application/pdf"].indexOf(t)===-1?"application/octet-stream":t}function Tn(t,e=""){Array.isArray(t)||(t=[t]);const s=Gi(e);return new Blob(t,{type:s})}class Yi{constructor(e,s,n){this.mimeType=e,this.size=s,this.saveFileCallback=n,this.bytes=new Uint8Array(s)}async write(e,s){const n=s+e.byteLength;if(n>this.bytes.byteLength){const r=new Uint8Array(n);r.set(this.bytes,0),this.bytes=r}this.bytes.set(e,s)}truncate(){this.bytes=new Uint8Array}trim(e){this.bytes=this.bytes.slice(0,e)}finalize(e=!0){const s=Tn(this.bytes,this.mimeType);return e&&this.saveFileCallback&&this.saveFileCallback(s),s}getParts(){return this.bytes}replaceParts(e){this.bytes=e}}const Ce=class Ce{constructor(e){this.dbName=e,this.useStorage=!0,z.test&&(this.dbName+="_test"),Ce.STORAGES.length&&(this.useStorage=Ce.STORAGES[0].useStorage),this.openDatabase(),Ce.STORAGES.push(this)}openDatabase(){return this.openDbPromise??(this.openDbPromise=caches.open(this.dbName))}delete(e){return this.timeoutOperation(s=>s.delete("/"+e))}deleteAll(){return caches.delete(this.dbName)}get(e){return this.timeoutOperation(s=>s.match("/"+e))}save(e,s){return this.timeoutOperation(n=>n.put("/"+e,s))}getFile(e,s="blob"){return this.get(e).then(n=>{if(!n)throw ge("NO_ENTRY_FOUND");return n[s]()})}saveFile(e,s){s instanceof Blob||(s=Tn(s));const n=new Response(s,{headers:{"Content-Length":""+s.size}});return this.save(e,n).then(()=>s)}timeoutOperation(e){return this.useStorage?new Promise(async(s,n)=>{let r=!1;const i=setTimeout(()=>{n(),r=!0},15e3);try{const o=await this.openDatabase();if(!o)throw this.useStorage=!1,this.openDbPromise=void 0,"no cache?";const c=await e(o);if(r)return;s(c)}catch(o){n(o)}clearTimeout(i)}):Promise.reject(ge("STORAGE_OFFLINE"))}prepareWriting(e,s,n){return{deferred:te(),getWriter:()=>new Yi(n,s,i=>this.saveFile(e,i).catch(()=>i))}}static toggleStorage(e,s){return Promise.all(this.STORAGES.map(n=>{if(n.useStorage=e,!!s&&!e)return n.deleteAll()}))}};Ce.STORAGES=[];let Qt=Ce;function Ns(t,e){return Promise.all([Ve.toggleStorage(t,e),Qt.toggleStorage(t,e),B.toggleStorage(t,e)]).then(ct,ct)}class zi extends Ds{constructor(){super("SERVICE"),P&&(P.serviceMessagePort=this)}}const $i=""+new URL("sw-z2SR8lXJ.js",import.meta.url).href,Mn="";function Us(...t){return t.join(Mn)}function Hi(t,e,s,n){const r=e.split(Mn),i=r.length;let o=t;for(let a=0;a<i-1;++a){const u=r[a];o=o[u]??(o[u]={})}const c=r[i-1];s===void 0&&n?delete o[c]:o[c]=s}const de="_";function Ki(t,e){const s="",n=s[s.length-1]||"";let r;switch(t._){case"inputPhotoFileLocation":{r=["photo",s[0],t.id,t.thumb_size].filter(Boolean).join(de);break}case"inputDocumentFileLocation":{r=["document",s[0],t.id,t.thumb_size].filter(Boolean).join(de);break}case"inputPeerPhotoFileLocation":r=["peerPhoto",t.photo_id,t.pFlags.big?"big":"small"].join(de);break;case"inputStickerSetThumb":{r=["stickerSetThumb",t.stickerset.id||t.stickerset.short_name||t.stickerset.emoticon||t.stickerset._,t.thumb_version].join(de);break}case"inputFileLocation":{r=[t.volume_id,t.local_id].join(de);break}case"inputWebFileLocation":{r=["webFile",t.url].join(de);break}case"inputWebFileGeoPointLocation":{const i=t.geo_point;r=["geoPoint",i.lat,i.long,t.w,t.h,t.zoom,t.scale].join(de);break}default:{console.error("Unrecognized location:",t),r="";break}}return r+(e?.downloadId?"_download":"")+(n&&"."+n)}function qi(t){return t?._.includes("inputWebFile")}function Ji(t){return qi(t)?Ki(t):t._+(t.id??t.url)}function Xi(t){return{downloaded:0,url:"",type:t}}function Zi(t,e){return t+(e!==void 0?"-"+e:"")}function Nt(t,e){return t instanceof Promise?t.then(e):e(t)}function Ws(t){return typeof t=="number"&&t<ut}const Ga={context:void 0,registry:void 0},Qi=(t,e)=>t===e,X=Symbol("solid-proxy"),es=Symbol("solid-track"),Dt={equals:Qi};let Ln=Bn;const ie=1,pt=2,In={owned:null,cleanups:null,context:null,owner:null},Ut={};var M=null;let Wt=null,O=null,W=null,se=null,bt=0;const[eo,Ya]=ce(!1);function it(t,e){const s=O,n=M,r=t.length===0,i=e===void 0?n:e,o=r?In:{owned:null,cleanups:null,context:i?i.context:null,owner:i},c=r?t:()=>t(()=>K(()=>wt(o)));M=o,O=null;try{return Q(c,!0)}finally{O=s,M=n}}function ce(t,e){e=e?Object.assign({},Dt,e):Dt;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},n=r=>(typeof r=="function"&&(r=r(s.value)),Rn(s,r));return[On.bind(s),n]}function js(t,e,s){const n=qe(t,e,!0,ie);ve(n)}function to(t,e,s){const n=qe(t,e,!1,ie);ve(n)}function so(t,e,s){Ln=ho;const n=qe(t,e,!1,ie);(!s||!s.render)&&(n.user=!0),se?se.push(n):ve(n)}function za(t,e){let s;const n=qe(()=>{s?s():K(t),s=void 0},void 0,!1,0);return n.user=!0,r=>{s=r,ve(n)}}function pe(t,e,s){s=s?Object.assign({},Dt,s):Dt;const n=qe(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,ve(n),On.bind(n)}function no(t){return t&&typeof t=="object"&&"then"in t}function $a(t,e,s){let n,r,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(n=!0,r=t,i=e||{}):(n=t,r=e,i=s||{});let o=null,c=Ut,a=!1,u="initialValue"in i,l=typeof n=="function"&&pe(n);const h=new Set,[f,g]=(i.storage||ce)(i.initialValue),[S,b]=ce(void 0),[D,F]=ce(void 0,{equals:!1}),[C,_]=ce(u?"ready":"unresolved");function k(w,E,d,m){return o===w&&(o=null,m!==void 0&&(u=!0),(w===c||E===c)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(m,{value:E})),c=Ut,T(E,d)),E}function T(w,E){Q(()=>{E===void 0&&g(()=>w),_(E!==void 0?"errored":u?"ready":"unresolved"),b(E);for(const d of h.keys())d.decrement();h.clear()},!1)}function v(){const w=co,E=f(),d=S();if(d!==void 0&&!o)throw d;return O&&!O.user&&w&&js(()=>{D(),o&&(w.resolved||h.has(w)||(w.increment(),h.add(w)))}),E}function R(w=!0){if(w!==!1&&a)return;a=!1;const E=l?l():n;if(E==null||E===!1){k(o,K(f));return}const d=c!==Ut?c:K(()=>r(E,{value:f(),refetching:w}));return no(d)?(o=d,a=!0,queueMicrotask(()=>a=!1),Q(()=>{_(u?"refreshing":"pending"),F()},!1),d.then(m=>k(d,m,void 0,E),m=>k(d,void 0,Nn(m),E))):(k(o,d,void 0,E),d)}return Object.defineProperties(v,{state:{get:()=>C()},error:{get:()=>S()},loading:{get(){const w=C();return w==="pending"||w==="refreshing"}},latest:{get(){if(!u)return v();const w=S();if(w&&!o)throw w;return f()}}}),l?js(()=>R(!1)):R(!1),[v,{refetch:R,mutate:g}]}function ro(t){return Q(t,!1)}function K(t){if(O===null)return t();const e=O;O=null;try{return t()}finally{O=e}}function Ha(t,e,s){const n=Array.isArray(t);let r,i=s&&s.defer;return o=>{let c;if(n){c=Array(t.length);for(let u=0;u<t.length;u++)c[u]=t[u]()}else c=t();if(i){i=!1;return}const a=K(()=>e(c,r,o));return r=c,a}}function Ka(t){so(()=>K(t))}function io(t){return M===null||(M.cleanups===null?M.cleanups=[t]:M.cleanups.push(t)),t}function ts(){return O}function qa(){return M}function Ja(t,e){const s=M,n=O;M=t,O=null;try{return Q(e,!0)}catch(r){As(r)}finally{M=s,O=n}}function oo(t){const e=O,s=M;return Promise.resolve().then(()=>{O=e,M=s;let n;return Q(t,!1),O=M=null,n?n.done:void 0})}function Xa(){return[eo,oo]}function Za(t,e){const s=Symbol("context");return{id:s,Provider:fo(s),defaultValue:t}}function Qa(t){return M&&M.context&&M.context[t.id]!==void 0?M.context[t.id]:t.defaultValue}function ao(t){const e=pe(t),s=pe(()=>ss(e()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}let co;function On(){if(this.sources&&this.state)if(this.state===ie)ve(this);else{const t=W;W=null,Q(()=>Et(this),!1),W=t}if(O){const t=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(t)):(O.sources=[this],O.sourceSlots=[t]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return this.value}function Rn(t,e,s){let n=t.value;return(!t.comparator||!t.comparator(n,e))&&(t.value=e,t.observers&&t.observers.length&&Q(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],o=Wt&&Wt.running;o&&Wt.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?W.push(i):se.push(i),i.observers&&xn(i)),o||(i.state=ie)}if(W.length>1e6)throw W=[],new Error},!1)),e}function ve(t){if(!t.fn)return;wt(t);const e=M,s=O,n=bt;O=M=t,uo(t,t.value,n),O=s,M=e}function uo(t,e,s){let n;try{n=t.fn(e)}catch(r){return t.pure&&(t.state=ie,t.owned&&t.owned.forEach(wt),t.owned=null),t.updatedAt=s+1,As(r)}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?Rn(t,n):t.value=n,t.updatedAt=s)}function qe(t,e,s,n=ie,r){const i={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:M,context:M?M.context:null,pure:s};return M===null||M!==In&&(M.owned?M.owned.push(i):M.owned=[i]),i}function Ft(t){if(t.state===0)return;if(t.state===pt)return Et(t);if(t.suspense&&K(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<bt);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===ie)ve(t);else if(t.state===pt){const n=W;W=null,Q(()=>Et(t,e[0]),!1),W=n}}function Q(t,e){if(W)return t();let s=!1;e||(W=[]),se?s=!0:se=[],bt++;try{const n=t();return lo(s),n}catch(n){s||(se=null),W=null,As(n)}}function lo(t){if(W&&(Bn(W),W=null),t)return;const e=se;se=null,e.length&&Q(()=>Ln(e),!1)}function Bn(t){for(let e=0;e<t.length;e++)Ft(t[e])}function ho(t){let e,s=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[s++]=n:Ft(n)}for(e=0;e<s;e++)Ft(t[e])}function Et(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const n=t.sources[s];if(n.sources){const r=n.state;r===ie?n!==e&&(!n.updatedAt||n.updatedAt<bt)&&Ft(n):r===pt&&Et(n,e)}}}function xn(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=pt,s.pure?W.push(s):se.push(s),s.observers&&xn(s))}}function wt(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),n=t.sourceSlots.pop(),r=s.observers;if(r&&r.length){const i=r.pop(),o=s.observerSlots.pop();n<r.length&&(i.sourceSlots[o]=n,r[n]=i,s.observerSlots[n]=o)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)wt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Nn(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function As(t,e=M){const s=Nn(t);{console.error("solid error",s);return}}function ss(t){if(typeof t=="function"&&!t.length)return ss(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const n=ss(t[s]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return t}function fo(t,e){return function(n){let r;return to(()=>r=K(()=>(M.context={...M.context,[t]:n.value},ao(()=>n.children))),void 0),r}}const go=Symbol("fallback");function Vs(t){for(let e=0;e<t.length;e++)t[e]()}function mo(t,e,s={}){let n=[],r=[],i=[],o=0,c=e.length>1?[]:null;return io(()=>Vs(i)),()=>{let a=t()||[],u,l;return a[es],K(()=>{let f=a.length,g,S,b,D,F,C,_,k,T;if(f===0)o!==0&&(Vs(i),i=[],n=[],r=[],o=0,c&&(c=[])),s.fallback&&(n=[go],r[0]=it(v=>(i[0]=v,s.fallback())),o=1);else if(o===0){for(r=new Array(f),l=0;l<f;l++)n[l]=a[l],r[l]=it(h);o=f}else{for(b=new Array(f),D=new Array(f),c&&(F=new Array(f)),C=0,_=Math.min(o,f);C<_&&n[C]===a[C];C++);for(_=o-1,k=f-1;_>=C&&k>=C&&n[_]===a[k];_--,k--)b[k]=r[_],D[k]=i[_],c&&(F[k]=c[_]);for(g=new Map,S=new Array(k+1),l=k;l>=C;l--)T=a[l],u=g.get(T),S[l]=u===void 0?-1:u,g.set(T,l);for(u=C;u<=_;u++)T=n[u],l=g.get(T),l!==void 0&&l!==-1?(b[l]=r[u],D[l]=i[u],c&&(F[l]=c[u]),l=S[l],g.set(T,l)):i[u]();for(l=C;l<f;l++)l in b?(r[l]=b[l],i[l]=D[l],c&&(c[l]=F[l],c[l](l))):r[l]=it(h);r=r.slice(0,o=f),n=a.slice(0)}return r});function h(f){if(i[l]=f,c){const[g,S]=ce(l);return c[l]=S,e(a[l],g)}return e(a[l])}}}function ec(t,e){return K(()=>t(e||{}))}function tt(){return!0}const ns={get(t,e,s){return e===X?s:t.get(e)},has(t,e){return e===X?!0:t.has(e)},set:tt,deleteProperty:tt,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:tt,deleteProperty:tt}},ownKeys(t){return t.keys()}};function jt(t){return(t=typeof t=="function"?t():t)?t:{}}function Do(){for(let t=0,e=this.length;t<e;++t){const s=this[t]();if(s!==void 0)return s}}function tc(...t){let e=!1;for(let i=0;i<t.length;i++){const o=t[i];e=e||!!o&&X in o,t[i]=typeof o=="function"?(e=!0,pe(o)):o}if(e)return new Proxy({get(i){for(let o=t.length-1;o>=0;o--){const c=jt(t[o])[i];if(c!==void 0)return c}},has(i){for(let o=t.length-1;o>=0;o--)if(i in jt(t[o]))return!0;return!1},keys(){const i=[];for(let o=0;o<t.length;o++)i.push(...Object.keys(jt(t[o])));return[...new Set(i)]}},ns);const s={},n={},r=new Set;for(let i=t.length-1;i>=0;i--){const o=t[i];if(!o)continue;const c=Object.getOwnPropertyNames(o);for(let a=0,u=c.length;a<u;a++){const l=c[a];if(l==="__proto__"||l==="constructor")continue;const h=Object.getOwnPropertyDescriptor(o,l);if(!r.has(l))h.get?(r.add(l),Object.defineProperty(s,l,{enumerable:!0,configurable:!0,get:Do.bind(n[l]=[h.get.bind(o)])})):(h.value!==void 0&&r.add(l),s[l]=h.value);else{const f=n[l];f?h.get?f.push(h.get.bind(o)):h.value!==void 0&&f.push(()=>h.value):s[l]===void 0&&(s[l]=h.value)}}}return s}function sc(t,...e){if(X in t){const r=new Set(e.length>1?e.flat():e[0]),i=e.map(o=>new Proxy({get(c){return o.includes(c)?t[c]:void 0},has(c){return o.includes(c)&&c in t},keys(){return o.filter(c=>c in t)}},ns));return i.push(new Proxy({get(o){return r.has(o)?void 0:t[o]},has(o){return r.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!r.has(o))}},ns)),i}const s={},n=e.map(()=>({}));for(const r of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,r),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let c=!1,a=0;for(const u of e)u.includes(r)&&(c=!0,o?n[a][r]=i.value:Object.defineProperty(n[a],r,i)),++a;c||(o?s[r]=i.value:Object.defineProperty(s,r,i))}return[...n,s]}const po=t=>`Stale read from <${t}>.`;function nc(t){const e="fallback"in t&&{fallback:()=>t.fallback};return pe(mo(()=>t.each,t.children,e||void 0))}function rc(t){const e=t.keyed,s=pe(()=>t.when,void 0,{equals:(n,r)=>e?n===r:!n==!r});return pe(()=>{const n=s();if(n){const r=t.children;return typeof r=="function"&&r.length>0?K(()=>r(e?n:()=>{if(!K(s))throw po("Show");return t.when})):r}return t.fallback},void 0,void 0)}const rs=Symbol("store-raw"),Pe=Symbol("store-node"),ee=Symbol("store-has"),Un=Symbol("store-self");function Wn(t){let e=t[X];if(!e&&(Object.defineProperty(t,X,{value:e=new Proxy(t,vo)}),!Array.isArray(t))){const s=Object.keys(t),n=Object.getOwnPropertyDescriptors(t);for(let r=0,i=s.length;r<i;r++){const o=s[r];n[o].get&&Object.defineProperty(t,o,{enumerable:n[o].enumerable,get:n[o].get.bind(e)})}}return e}function le(t){let e;return t!=null&&typeof t=="object"&&(t[X]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function Fe(t,e=new Set){let s,n,r,i;if(s=t!=null&&t[rs])return s;if(!le(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,c=t.length;o<c;o++)r=t[o],(n=Fe(r,e))!==r&&(t[o]=n)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),c=Object.getOwnPropertyDescriptors(t);for(let a=0,u=o.length;a<u;a++)i=o[a],!c[i].get&&(r=t[i],(n=Fe(r,e))!==r&&(t[i]=n))}return t}function vt(t,e){let s=t[e];return s||Object.defineProperty(t,e,{value:s=Object.create(null)}),s}function ze(t,e,s){if(t[e])return t[e];const[n,r]=ce(s,{equals:!1,internal:!0});return n.$=r,t[e]=n}function Fo(t,e){const s=Reflect.getOwnPropertyDescriptor(t,e);return!s||s.get||!s.configurable||e===X||e===Pe||(delete s.value,delete s.writable,s.get=()=>t[X][e]),s}function jn(t){ts()&&ze(vt(t,Pe),Un)()}function Eo(t){return jn(t),Reflect.ownKeys(t)}const vo={get(t,e,s){if(e===rs)return t;if(e===X)return s;if(e===es)return jn(t),s;const n=vt(t,Pe),r=n[e];let i=r?r():t[e];if(e===Pe||e===ee||e==="__proto__")return i;if(!r){const o=Object.getOwnPropertyDescriptor(t,e);ts()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(o&&o.get)&&(i=ze(n,e,i)())}return le(i)?Wn(i):i},has(t,e){return e===rs||e===X||e===es||e===Pe||e===ee||e==="__proto__"?!0:(ts()&&ze(vt(t,ee),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:Eo,getOwnPropertyDescriptor:Fo};function H(t,e,s,n=!1){if(!n&&t[e]===s)return;const r=t[e],i=t.length;s===void 0?(delete t[e],t[ee]&&t[ee][e]&&r!==void 0&&t[ee][e].$()):(t[e]=s,t[ee]&&t[ee][e]&&r===void 0&&t[ee][e].$());let o=vt(t,Pe),c;if((c=ze(o,e,r))&&c.$(()=>s),Array.isArray(t)&&t.length!==i){for(let a=t.length;a<i;a++)(c=o[a])&&c.$();(c=ze(o,"length",i))&&c.$(t.length)}(c=o[Un])&&c.$()}function Vn(t,e){const s=Object.keys(e);for(let n=0;n<s.length;n+=1){const r=s[n];H(t,r,e[r])}}function Ao(t,e){if(typeof e=="function"&&(e=e(t)),e=Fe(e),Array.isArray(e)){if(t===e)return;let s=0,n=e.length;for(;s<n;s++){const r=e[s];t[s]!==r&&H(t,s,r)}H(t,"length",n)}else Vn(t,e)}function Ne(t,e,s=[]){let n,r=t;if(e.length>1){n=e.shift();const o=typeof n,c=Array.isArray(t);if(Array.isArray(n)){for(let a=0;a<n.length;a++)Ne(t,[n[a]].concat(e),s);return}else if(c&&o==="function"){for(let a=0;a<t.length;a++)n(t[a],a)&&Ne(t,[a].concat(e),s);return}else if(c&&o==="object"){const{from:a=0,to:u=t.length-1,by:l=1}=n;for(let h=a;h<=u;h+=l)Ne(t,[h].concat(e),s);return}else if(e.length>1){Ne(t[n],e,[n].concat(s));return}r=t[n],s=[n].concat(s)}let i=e[0];typeof i=="function"&&(i=i(r,s),i===r)||n===void 0&&i==null||(i=Fe(i),n===void 0||le(r)&&le(i)&&!Array.isArray(i)?Vn(r,i):H(t,n,i))}function yo(...[t,e]){const s=Fe(t||{}),n=Array.isArray(s),r=Wn(s);function i(...o){ro(()=>{n&&o.length===1?Ao(s,o[0]):Ne(s,o)})}return[r,i]}const is=Symbol("store-root");function be(t,e,s,n,r){const i=e[s];if(t===i)return;if(s!==is&&(!le(t)||!le(i)||r&&t[r]!==i[r])){H(e,s,t);return}if(Array.isArray(t)){if(t.length&&i.length&&(!n||r&&t[0]&&t[0][r]!=null)){let a,u,l,h,f,g,S,b;for(l=0,h=Math.min(i.length,t.length);l<h&&(i[l]===t[l]||r&&i[l]&&t[l]&&i[l][r]===t[l][r]);l++)be(t[l],i,l,n,r);const D=new Array(t.length),F=new Map;for(h=i.length-1,f=t.length-1;h>=l&&f>=l&&(i[h]===t[f]||r&&i[l]&&t[l]&&i[h][r]===t[f][r]);h--,f--)D[f]=i[h];if(l>f||l>h){for(u=l;u<=f;u++)H(i,u,t[u]);for(;u<t.length;u++)H(i,u,D[u]),be(t[u],i,u,n,r);i.length>t.length&&H(i,"length",t.length);return}for(S=new Array(f+1),u=f;u>=l;u--)g=t[u],b=r&&g?g[r]:g,a=F.get(b),S[u]=a===void 0?-1:a,F.set(b,u);for(a=l;a<=h;a++)g=i[a],b=r&&g?g[r]:g,u=F.get(b),u!==void 0&&u!==-1&&(D[u]=i[a],u=S[u],F.set(b,u));for(u=l;u<t.length;u++)u in D?(H(i,u,D[u]),be(t[u],i,u,n,r)):H(i,u,t[u])}else for(let a=0,u=t.length;a<u;a++)be(t[a],i,a,n,r);i.length>t.length&&H(i,"length",t.length);return}const o=Object.keys(t);for(let a=0,u=o.length;a<u;a++)be(t[o[a]],i,o[a],n,r);const c=Object.keys(i);for(let a=0,u=c.length;a<u;a++)t[c[a]]===void 0&&H(i,c[a],void 0)}function ic(t,e={}){const{merge:s,key:n="id"}=e,r=Fe(t);return i=>{if(!le(i)||!le(r))return r;const o=be(r,{[is]:i},is,s,n);return o===void 0?i:o}}const[So,Gn]=it(()=>yo({})),oc=(...t)=>{const e=t[0];Gn(...t),y.managers.appStateManager.setByKey(e,Fe(So[e]))},Gs=Gn;class bo extends Ke{constructor(){super(),this.onMirrorTask=e=>{var o;const{name:s,key:n,value:r}=e;if(this.processMirrorTaskMap[s]?.(e),!e.hasOwnProperty("key")){this.mirrors[s]=r;return}const i=(o=this.mirrors)[s]??(o[s]={});Hi(i,n,r,!0)},this.mirrors={state:void 0,thumbs:{},stickerThumbs:{},availableReactions:void 0,messages:{},groupedMessages:{},peers:{},avatars:{}},this.processMirrorTaskMap={messages:e=>{var o;const s=e.value;let n,r;if(s)n=s.mid,r=s.grouped_id;else{const[c,a]=e.key.split(".");n=+a;const u=this.mirrors.messages[c]?.[n];if(!u)return;r=u.grouped_id}if(!r)return;const i=(o=this.mirrors.groupedMessages)[r]??(o[r]=new Map);e.value?i.set(n,s):(i.delete(n),i.size||delete this.mirrors.groupedMessages[r])},state:e=>{e.key?Gs({[e.key]:e.value}):console.error(e)}},this.tabState={chatPeerIds:[],idleStartTime:0},this.log("constructor"),this.registerWorker(),this.registerServiceWorker(),this.registerCryptoWorker(),this.addMultipleEventsListeners({convertWebp:({fileName:e,bytes:s})=>Fn.convert(e,s),convertOpus:({fileName:e,bytes:s})=>kn.pushDecodeTask(s,!1).then(n=>n.bytes),event:({name:e,args:s})=>{y.dispatchEventSingle(e,...s)},localStorageProxy:e=>{const s=e;return B[s.type](...s.args)},mirror:this.onMirrorTask}),y.addEventListener("language_change",e=>{y.managers.networkerFactory.setLanguage(e),y.managers.appAttachMenuBotsManager.onLanguageChange()}),window.addEventListener("online",()=>{y.managers.networkerFactory.forceReconnectTimeout()}),y.addEventListener("logging_out",()=>{const e=["cachedFiles","cachedStreamChunks"];Promise.all([Ns(!1,!0),B.clear(),Promise.race([ps.setAuthorized(!1),gs(3e3)]),gt.forceUnsubscribe(),Promise.all(e.map(s=>caches.delete(s)))]).finally(()=>{En.reload()})}),dt.addEventListener("change",e=>{this.updateTabStateIdle(e)}),this.updateTabStateIdle(dt.isIdle)}sendEnvironment(){this.log("Passing environment:",Rs),this.invoke("environment",Rs)}pingServiceWorkerWithIframe(){if(this.pingServiceWorkerPromise)return this.pingServiceWorkerPromise;const e=this.pingServiceWorkerPromise=te(),s=document.createElement("iframe");s.hidden=!0;const n=()=>{setTimeout(()=>{this.pingServiceWorkerPromise=void 0},1e4),clearTimeout(r),s.remove(),s.removeEventListener("load",n),s.removeEventListener("error",n),e.resolve()};s.addEventListener("load",n),s.addEventListener("error",n),s.src="ping/"+(Math.random()*4294967295|0)+".nocache",document.body.append(s);const r=window.setTimeout(n,1e3);return e}attachServiceWorker(e){if(this.lastServiceWorker===e){this.log.warn("trying to attach same service worker");return}this.lastServiceWorker&&this.serviceMessagePort.detachPort(this.lastServiceWorker),this.serviceMessagePort.attachSendPort(this.lastServiceWorker=e),this.serviceMessagePort.invokeVoid("hello",void 0)}_registerServiceWorker(){navigator.serviceWorker.register($i,{type:"module",scope:"./"}).then(e=>{this.log("SW registered",e);const s=new URL(window.location.href),n="swfix",r=+s.searchParams.get(n)||0;if(e.active&&!navigator.serviceWorker.controller){if(r>=3)throw new Error("no controller");return e.unregister().then(()=>{s.searchParams.set(n,""+(r+1)),window.location.href=s.toString()})}r&&(s.searchParams.delete(n),history.pushState(void 0,"",s)),(e.installing||e.waiting||e.active).addEventListener("statechange",c=>{this.log("SW statechange",c)});const o=navigator.serviceWorker.controller||e.installing||e.waiting||e.active;this.attachServiceWorker(o)}).catch(e=>{this.log.error("SW registration failed!",e),this.invokeVoid("serviceWorkerOnline",!1)})}registerServiceWorker(){if(!("serviceWorker"in navigator))return;this.serviceMessagePort=gt.serviceMessagePort=new zi;const e=navigator.serviceWorker;this._registerServiceWorker(),e.addEventListener("controllerchange",()=>{this.log.warn("controllerchange");const s=e.controller;this.attachServiceWorker(s),s.addEventListener("error",n=>{this.log.error("controller error:",n)})}),this.serviceMessagePort.attachListenPort(e),this.serviceMessagePort.addMultipleEventsListeners({port:(s,n,r)=>{this.invokeVoid("serviceWorkerPort",void 0,void 0,[r.ports[0]])},hello:(s,n)=>{this.serviceMessagePort.resendLockTask(n)},share:s=>{this.log("will try to share something"),this.share=s}}),e.addEventListener("messageerror",s=>{this.log.error("SW messageerror:",s)})}async registerCryptoWorker(){const e=g=>fetch(g).then(S=>S.text()).then(S=>{const b=location.pathname.split("/");b[b.length-1]="";const D=location.origin+b.join("/");return S=S.replace(/(import (?:.+? from )?['"])\//g,"$1"+D),new Blob([S],{type:"application/javascript"})}),s={construct(g,S){return{url:rn(S[0]).toString()}}},n=[Worker,typeof SharedWorker<"u"&&SharedWorker].filter(Boolean);n.forEach(g=>window[g.name]=new Proxy(g,s));const r=new Worker(new URL(""+new URL("crypto.worker-T8uEdtAd.js",import.meta.url).href,import.meta.url),{type:"module"});n.forEach(g=>window[g.name]=g);const i=r.url,o=g=>new a(g,{type:"module"}),c=g=>this.attachWorkerToPort(g,rt,"crypto"),a=ht?SharedWorker:Worker;rt.addEventListener("port",(g,S,b)=>{this.invokeVoid("cryptoPort",void 0,void 0,[b.ports[0]])});const u=o(i);c(u);const l=await e(i);(await this.invoke("createProxyWorkerURLs",{originalUrl:i,blob:l})).slice(1).map(o).forEach(c)}registerWorker(){let e;ht?e=new SharedWorker(new URL(""+new URL("mtproto.worker-lv57U12U.js",import.meta.url).href,import.meta.url),{type:"module"}):e=new Worker(new URL(""+new URL("mtproto.worker-lv57U12U.js",import.meta.url).href,import.meta.url),{type:"module"}),this.onWorkerFirstMessage(e)}attachWorkerToPort(e,s,n){const r=e.port||e;s.attachPort(r),e.addEventListener("error",i=>{this.log.error(n,"worker error",i)})}onWorkerFirstMessage(e){this.log("set webWorker"),this.attachWorkerToPort(e,this,"mtproto")}loadState(){return Promise.all([Wi().then(e=>(this.newVersion=e.newVersion,this.oldVersion=e.oldVersion,this.mirrors.state=e.state,Gs(e.state),e))])}sendState(){return this.loadState().then(e=>{const[s]=e;return this.invoke("state",{...s,userId:y.myId.toUserId()}),e})}invokeCrypto(e,...s){return rt.invokeCrypto(e,...s)}async toggleStorages(e,s){await Ns(e,s),this.invoke("toggleStorages",{enabled:e,clearWrite:s}),this.serviceMessagePort?.invokeVoid("toggleStorages",{enabled:e,clearWrite:s})}async getMirror(e){return this.mirrors[e]}getState(){return this.getMirror("state")}getCacheContext(e,s=Ar,n=Ji(e)){return this.mirrors.thumbs[n]?.[s]||Xi(s)}getStickerCachedThumb(e,s){const n=Zi(e,s);return this.mirrors.stickerThumbs[n]}getAvailableReactions(){var e;return(e=this.mirrors).availableReactions||(e.availableReactions=y.managers.appReactionsManager.getAvailableReactions())}getReaction(e){return Nt(this.getAvailableReactions(),s=>s.find(n=>n.reaction===e))}getMessageFromStorage(e,s){return e.endsWith("history")&&Ws(s)&&(e=this.getGlobalHistoryMessagesStorage()),this.mirrors.messages[e]?.[s]}getGroupsFirstMessage(e){if(!e?.grouped_id)return e;const s=this.mirrors.groupedMessages[e.grouped_id];let n=Number.MAX_SAFE_INTEGER;for(const[r,i]of s)i.mid<n&&(n=i.mid);return s.get(n)}getHistoryMessagesStorage(e){return`${e}_history`}getGlobalHistoryMessagesStorage(){return this.getHistoryMessagesStorage(on)}getMessageById(e){if(Ws(e))return this.getMessageFromStorage(this.getGlobalHistoryMessagesStorage(),e)}getMessageByPeer(e,s){return e?this.getMessageFromStorage(this.getHistoryMessagesStorage(e),s):this.getMessageById(s)}getPeer(e){return this.mirrors.peers[e]}getUser(e){return this.mirrors.peers[e.toPeerId(!1)]}getChat(e){return this.mirrors.peers[e.toPeerId(!0)]}isForum(e){return!!this.getPeer(e)?.pFlags?.forum}isAvatarCached(e,s){const n=this.mirrors.avatars[e];return s===void 0?!!n:!!(n&&n[s]&&!(n[s]instanceof Promise))}loadAvatar(e,s,n){var i;const r=(i=this.mirrors.avatars)[e]??(i[e]={});return r[n]??(r[n]=y.managers.appAvatarsManager.loadAvatar(e,s,n))}getAppConfig(e){if(e&&(this.appConfig=void 0),!this.appConfig){const s=y.managers.apiManager.getAppConfig().then(n=>(this.appConfig===s&&(this.appConfig=n),n));return this.appConfig=s}return this.appConfig}isPremiumFeaturesHidden(){return Nt(this.isPremiumPurchaseBlocked(),e=>e&&!y.premium)}isPremiumPurchaseBlocked(){return Nt(this.getAppConfig(),e=>!!e.premium_purchase_blocked)}updateTabState(e,s){this.tabState[e]=s,this.invokeVoid("tabState",this.tabState)}updateTabStateIdle(e){this.updateTabState("idleStartTime",e?Date.now():0)}}const Yn=new bo;P.apiManagerProxy=Yn;const Je=Yn,wo={};function Co(t,e){return new Proxy({},{get:(n,r,i)=>(...o)=>{const c=Je.invoke("manager",{name:t,method:r,args:o},e);return me&&wo[t]?.has(r)&&console.warn("manager request",t,r,o,e),c}})}function Ys(t,e){return new Proxy(t,{get:(s,n,r)=>s[n]??(s[n]=Co(n,e))})}let Re;function _o(){return Re||(Re=Ys({},!1),Re.acknowledged=Ys({},!0),Re)}function zn(t,e,s){return Math.min(s,Math.max(e,t))}function ae(t,e,s){t/=255,e/=255,s/=255;const n=Math.max(t,e,s),r=n-Math.min(t,e,s),i=r&&(n===t?(e-s)/r:n==e?2+(s-t)/r:4+(t-e)/r);return[60*(i<0?i+6:i),n&&r/n,n]}function ys(t,e,s){const n=(r,i=(r+t/60)%6)=>Math.round((s-s*e*Math.max(Math.min(i,4-i,1),0))*255);return[n(5),n(3),n(1)]}function os(t,e,s,n=1){t/=255,e/=255,s/=255;const r=Math.max(t,e,s),i=Math.min(t,e,s);let o,c;const a=(r+i)/2;if(r===i)o=c=0;else{const u=r-i;switch(c=a>.5?u/(2-r-i):u/(r+i),r){case t:o=(e-s)/u+(e<s?6:0);break;case e:o=(s-t)/u+2;break;case s:o=(t-e)/u+4;break}o/=6}return{h:o*360,s:c*100,l:a*100,a:n}}function $n(t,e,s,n){t/=360,e/=100,s/=100;let r,i,o;if(e===0)r=i=o=s;else{const c=function(h,f,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?h+(f-h)*6*g:g<.5?f:g<.6666666666666666?h+(f-h)*(.6666666666666666-g)*6:h},a=s<.5?s*(1+e):s+e-s*e,u=2*s-a;r=c(u,a,t+1/3),i=c(u,a,t),o=c(u,a,t-1/3)}return[r,i,o,n].map(c=>Math.round(c*255))}function Hn(t){const e=t.slice(5,-1).split(", "),s=+e.pop(),n=e.map(r=>r.endsWith("%")?+r.slice(0,-1):+r);return $n(n[0],n[1],n[2],s)}function Kn(t){const e=[],s=t[0]==="#"?1:0;if(t.length===5+s&&(t=(s?"#":"")+"0"+t.slice(s)),t.length===3+s)for(let n=s;n<t.length;++n)e.push(parseInt(t[n]+t[n],16));else if(t.length===4+s){for(let n=s;n<t.length-1;++n)e.push(parseInt(t[n]+t[n],16));e.push(parseInt(t[t.length-1],16))}else for(let n=s;n<t.length;n+=2)e.push(parseInt(t.slice(n,n+2),16));return e}function oe(t){return Kn(t.slice(0,7))}function ac(t){const e=Kn(t);return os(e[0],e[1],e[2],e[3])}function Ue(t){return"#"+t.map(e=>("0"+e.toString(16)).slice(-2)).join("")}function Po(t){return Ue(Hn(t))}function ko(t){return Po(t).slice(0,-2)}function Vt(t,e,s){const n=new Array(3);for(let r=0;r<3;++r){const i=t[r],o=e[r];n[r]=Math.floor(o+(i-o)*s)}return n}function zs(t){return(t[0]*.2126+t[1]*.7152+t[2]*.0722)/255}function To(t,e){return t.map((s,n)=>Math.round((s+e[n])/2))}function Mo(t,e,s){const n=ae(...e),r=ae(...s),i=Math.min(1.5*n[1]/t[1],1);return n[0]=Math.min(360,r[0]-n[0]+t[0]),n[1]=Math.min(1,r[1]*t[1]/n[1]),n[2]=Math.min(1,(r[2]/n[2]+i-1)*t[2]/i),n[2]<.3?s:ys(...n)}function Lo(t,e,s,n){const r=ae(...s);if(Math.min(Math.abs(r[0]-t[0]),Math.abs(r[0]-t[0]-360))>30)return s;const o=t[1]?Math.min(1.5*r[1]/t[1],1):0;r[0]=Math.min(360,r[0]+e[0]-t[0]),r[1]=t[1]?Math.min(1,r[1]*e[1]/t[1]):0,r[2]=t[2]?Math.min(1,r[2]*(1-o+o*e[2]/t[2])):0;let c=ys(...r);const a=zs(s),u=zs(c);if(n?a>u:a<u){const f=.4*a/u+.6;c=Io(c,f)}return c}function Io(t,e){return t.map(s=>zn(Math.round(s*e),0,255))}function qn(t){const e=(t<0?16777215+t:t).toString(16);return"#"+(e.length>=6?e:"0".repeat(6-e.length)+e)}function st(t){return oe(qn(t))}function cc(t){return t.settings?[t.settings.background_color,t.settings.second_background_color,t.settings.third_background_color,t.settings.fourth_background_color].filter(Boolean).map(qn).join(","):""}function uc(t,e){const s=t[3];return t.slice(0,3).map((n,r)=>zn(Math.round((s*(n/255)+s*(e[r]/255))*255),0,255))}function lc(t){const[e,s,n]=t;return .2126*e/255+.7152*s/255+.0722*n/255}function hc(t){return t>.5?[0,0,0]:[255,255,255]}function dc(t,e){const s=t>.5?0:1,n=(t-s+e)/e;return+Math.max(.5,Math.min(.64,n)).toFixed(2)}function Jn(t,e,s,n,r=!0){if(t<s&&e<n&&r)return L(t,e);let i=s,o=n;return t/e>s/n?o=e*s/t|0:(i=t*n/e|0,i>s&&(o=o*s/i|0,i=s)),r&&i>=t&&o>=e&&(i=t,o=e),L(i,o)}P.calcImageInBox=Jn;class Oo{constructor(e=0,s=e){this.width=e,this.height=s}aspect(e,s){return Jn(this.width,this.height,e.width,e.height,s)}aspectFitted(e){return this.aspect(e,!0)}aspectCovered(e){return this.aspect(e,!1)}}function L(t,e){return new Oo(t,e)}var Ro=(t=>(t[t.mobile=0]="mobile",t[t.medium=1]="medium",t[t.large=2]="large",t))(Ro||{});const Bo=600,xo=1275,No=1680,$s=L(20,20),Hs=L(36,36),Ks=L(18,18);class Uo extends Ee{constructor(){super(),this.screenSizes=[{key:0,value:Bo},{key:1,value:xo},{key:2,value:No}],this.sizes={handhelds:{regular:L(270,270),webpage:L(270,200),album:L(270,0),esgSticker:L(68,68),animatedSticker:L(180,180),staticSticker:L(180,180),emojiSticker:L(112,112),poll:L(240,0),round:L(240,240),documentName:L(200,0),invoice:L(270,270),extendedInvoice:L(270,270),customEmoji:$s,esgCustomEmoji:Hs,emojiStatus:Ks,popupSticker:L(68,68)},desktop:{regular:L(420,340),webpage:L(420,340),album:L(420,0),esgSticker:L(72,72),animatedSticker:L(200,200),staticSticker:L(200,200),emojiSticker:L(112,112),poll:L(330,0),round:L(280,280),documentName:L(240,0),invoice:L(320,320),extendedInvoice:L(420,340),customEmoji:$s,esgCustomEmoji:Hs,emojiStatus:Ks,popupSticker:L(80,80)}},this.isMobile=!1,this.handleResize=()=>{const e=window.innerWidth;let s=this.screenSizes[0].key;for(let r=this.screenSizes.length-1;r>=0;--r)if(this.screenSizes[r].value<e){s=(this.screenSizes[r+1]||this.screenSizes[r]).key;break}const n=this.activeScreen;this.activeScreen=s,this.isMobile=this.activeScreen===0,this.active=this.isMobile?this.sizes.handhelds:this.sizes.desktop,n!==s&&n!==void 0&&this.dispatchEvent("changeScreen",n,s),n!==void 0&&this.dispatchEvent("resize")},window.addEventListener("resize",()=>{this.rAF&&window.cancelAnimationFrame(this.rAF),this.rAF=window.requestAnimationFrame(()=>{this.handleResize(),this.rAF=0})}),this.handleResize()}}const Xn=new Uo;P.mediaSizes=Xn;class Wo{constructor(){this.resetCache=()=>{this.computedStyle=void 0;const e=this.cache;this.cache={};for(const s in e)this.getProperty(s)},this.cache={},this.nightElement=document.createElement("div"),this.nightElement.className="night",this.nightElement.style.display="none",document.body.append(this.nightElement),y.addEventListener("theme_changed",this.resetCache),Xn.addEventListener("resize",this.resetCache)}getProperty(e,s){const n=this.cache[e],r=s?1:0;if(n?.[r])return n[r];this.computedStyle??(this.computedStyle=window.getComputedStyle(document.documentElement)),this.nightComputedStyle??(this.nightComputedStyle=window.getComputedStyle(this.nightElement));const i=(s?this.nightComputedStyle:this.computedStyle).getPropertyValue("--"+e).trim();return this.setPropertyCache(e,i,s)}getPropertyAsColor(e){const s=this.getProperty(e);return s[0]==="#"?s:`rgb(${s})`}getPropertyAsSize(e){const s=this.getProperty(e);let n;return s[s.length-1]==="%"||(s.indexOf("rem")?n=+s.replace("rem","")*16:n=+s.replace("px","")),n}setPropertyCache(e,s,n){var r;return((r=this.cache)[e]??(r[e]=[]))[n?1:0]=s}}const as=new Wo;P&&(P.customProperties=as);function qs(...t){const[e,s]=ce(...t);return(...n)=>n.length===0?e():s(...n)}class jo{constructor(){if(De)return;this._width=qs(),this._height=qs(),this.viewport=window;const e=()=>{this.setDimensions()};this.viewport.addEventListener("resize",e),e()}setDimensions(){const e=this.viewport;this._width(e.width||e.innerWidth),this._height(e.height||e.innerHeight)}get width(){return this._width()}get height(){return this._height()}}const cs=new jo;P&&(P.windowSize=cs);class Vo{isEnabled(){return!!(y.settings&&y.settings.liteMode.all)}isAvailable(e){return!!(y.settings&&!y.settings.liteMode.all&&!y.settings.liteMode[e])}}const Zn=new Vo;P&&(P.liteMode=Zn);const Js={"primary-color":{rgb:!0,light:!0,lightFilled:!0,dark:!0,darkRgb:!0},"message-out-primary-color":{lightFilled:!0,rgb:!0},"surface-color":{rgb:!0},"danger-color":{rgb:!0,light:!0,dark:!0},"primary-text-color":{rgb:!0},"secondary-text-color":{light:!0,lightFilled:!0},"message-background-color":{light:!0,lightFilled:!0,dark:!0,darkFilled:!0},"message-out-background-color":{light:!0,lightFilled:!0,dark:!0,darkFilled:!0,rgb:!0},"saved-color":{lightFilled:!0},"green-color":{}},Gt={day:{"primary-color":"#3390ec","message-out-primary-color":"#5CA853","message-background-color":"#ffffff","surface-color":"#ffffff","danger-color":"#df3f40","primary-text-color":"#000000","secondary-text-color":"#707579","saved-color":"#359AD4","green-color":"#70b768"},night:{"primary-color":"#8774E1","message-out-primary-color":"#8774E1","message-background-color":"#212121","surface-color":"#212121","danger-color":"#ff595a","primary-text-color":"#ffffff","secondary-text-color":"#aaaaaa","saved-color":"#8774E1","green-color":"#5CC85E"}};class Go{constructor(){y.addEventListener("theme_change",e=>{this.setTheme(typeof e=="object"?e:void 0)}),y.addEventListener("theme_changed",()=>{this.setWorkerThemeParams()})}setWorkerThemeParams(){y.managers.apiManager.setThemeParams({_:"dataJSON",data:JSON.stringify(this.getThemeParamsForWebView())})}get themeColorElem(){return this._themeColorElem!==void 0?this._themeColorElem:this._themeColorElem=document.head.querySelector('[name="theme-color"]')||null}setThemeColor(e=this.themeColor){e||(e=this.isNight()?"#212121":"#ffffff");const s=this.themeColorElem;s&&s.setAttribute("content",e)}setThemeListener(){try{const e=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{this.systemTheme=e.matches?"night":"day",y.myId?y.dispatchEvent("theme_change"):this.setTheme()};"addEventListener"in e?e.addEventListener("change",s):"addListener"in e&&e.addListener(s),s()}catch{}}applyHighlightingColor(){let e="hsla(85.5319, 36.9171%, 40.402%, .4)";const s=this.getTheme();s.settings?.highlightingColor&&(e=s.settings.highlightingColor);const n=Hn(e);document.documentElement.style.setProperty("--message-highlighting-color",e),document.documentElement.style.setProperty("--message-highlighting-color-rgb",n.slice(0,3).join(",")),document.documentElement.style.setProperty("--message-highlighting-alpha",""+n[3]/255),!fe&&e&&(this.themeColor=ko(e))}_setTheme(e){const s=this.isNight();document.head.querySelector('[name="color-scheme"]')?.setAttribute("content",s?"dark":"light"),document.documentElement.classList.toggle("night",s),this.setThemeColor();const r=this.getTheme();this.applyTheme(r);let i=this.styleElement;i||(i=this.styleElement=document.createElement("style"),document.head.append(i));const o=document.createElement("div");this.applyTheme(y.settings.themes.find(c=>c.name==="night"),o,!0),i.textContent=`.night {${o.style.cssText}}`,this.applyHighlightingColor(),!e&&y.dispatchEventSingle("theme_changed")}setTheme(e){if(!("startViewTransition"in document)||!this.applied){const c=!this.applied,a=this.applied;this.applied=!0,this._setTheme(c),a||this.setWorkerThemeParams();return}Zn.isAvailable("animations")||(e=void 0);const s=!this.isNight();e&&(document.documentElement.classList.add("no-view-transition"),document.documentElement.classList.toggle("reverse",s),document.documentElement.offsetLeft);const n=document.startViewTransition(()=>{this._setTheme()});if(!e)return;const{x:r,y:i}=e,o=Math.hypot(Math.max(r,cs.width-r),Math.max(i,cs.height-i));n.ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0 at ${r}px ${i}px)`,`circle(${o}px at ${r}px ${i}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:`::view-transition-${s?"old":"new"}(root)`,direction:s?"reverse":"normal"})}),n.finished.finally(()=>{document.documentElement.classList.remove("no-view-transition","reverse")})}async switchTheme(e,s){await y.managers.appStateManager.setByKey(Us("settings","theme"),e),y.dispatchEvent("theme_change",s)}isNight(){return this.getTheme().name==="night"}getTheme(e=y.settings.theme==="system"?this.systemTheme:y.settings.theme){return y.settings.themes.find(s=>s.name===e)}bindColorApplier(e){const s=new Set;return{applyAppColor:n=>(s.add(n.name),this.applyAppColor({...n,...e})),finalize:()=>{const n=e.isNight;for(const r in Js)s.has(r)||this.applyAppColor({name:r,hex:Gt[n?"night":"day"][r],...e})}}}applyAppColor({name:e,hex:s,element:n,lightenAlpha:r=.08,darkenAlpha:i=r,mixColor:o,isNight:c=this.isNight(),saveToCache:a}){const u=Js[e],l=oe(s),h=os(...l);o??(o=oe(Gt[c?"night":"day"]["surface-color"]));const f=Vt(l,o,r),g={...h,l:h.l-i*100},S=[[e,s],u.rgb&&[e+"-rgb",l.join(",")],u.light&&["light-"+e,`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${r})`],u.lightFilled&&["light-filled-"+e,Ue(f)],u.dark&&["dark-"+e,`hsl(${g.h}, ${g.s}%, ${g.l}%)`]];a??(a=n===document.documentElement),S.filter(Boolean).forEach(([b,D])=>{n.style.setProperty("--"+b,D),a&&as.setPropertyCache(b,D,c)})}async applyNewTheme(e){const s=this.isNightTheme(e),n=this.getTheme(),r=y.settings.themes,i=e.settings.find(c=>c.base_theme._===(s?"baseThemeNight":"baseThemeClassic")),o={...e,name:n.name,settings:{...i,highlightingColor:""}};await this.AppBackgroundTab.setBackgroundDocument(i.wallpaper,o.settings),r[r.indexOf(n)]=o,await y.managers.appStateManager.setByKey(Us("settings","themes"),y.settings.themes),y.dispatchEvent("theme_change")}isNightTheme(e){return e.name==="night"||this.isNight()}applyTheme(e,s=document.documentElement,n){const r=this.isNightTheme(e),i=Array.isArray(e.settings)?e.settings.find(T=>T.base_theme._===(r?"baseThemeNight":"baseThemeClassic")):e.settings,o=Gt[r?"night":"day"];let c=ae(...oe(o["primary-color"])),a=ae(...st(i.accent_color));const u=Lo(c,a,oe(o["primary-color"]),!r),l=Ue(u),{applyAppColor:h,finalize:f}=this.bindColorApplier({element:s,isNight:r,saveToCache:n});if(h({name:"primary-color",hex:l,darkenAlpha:.04}),h({name:"saved-color",hex:l,lightenAlpha:.64,mixColor:[255,255,255]}),!i.message_colors?.length)return;const g=r?1:.12,S=oe(o["message-out-primary-color"]);c=ae(...S);const b=Vt(S,oe(o["surface-color"]),g);let F=st(i.message_colors[0]);i.message_colors.length>1&&(i.message_colors.slice(1).forEach(T=>{F=To(F,st(T))}),F=Mo(c,b,F)),a=ae(...F);const _=i.outbox_accent_color!==void 0&&ae(...st(i.outbox_accent_color));let k=Vt(F,oe(o["surface-color"]),g);if(!r){const T=os(...k);T.s=Math.min(T.s+(r?8:63),100),k=$n(T.h,T.s,T.l,T.a).slice(0,3)}h({name:"message-out-background-color",hex:Ue(k),lightenAlpha:g}),h({name:"message-out-primary-color",hex:r?"#ffffff":Ue(_?ys(..._):F),mixColor:k}),f()}getThemeParamsForWebView(){const e={bg_color:"surface-color",button_color:"primary-color",button_text_color:"#ffffff",hint_color:"secondary-text-color",link_color:"link-color",secondary_bg_color:"background-color-true",text_color:"primary-text-color",header_bg_color:"surface-color",accent_text_color:"primary-color",section_bg_color:"surface-color",section_header_text_color:"primary-color",subtitle_text_color:"secondary-text-color",destructive_text_color:"danger-color"},s={};for(const n in e){const r=e[n];s[n]=r[0]==="#"?r:as.getProperty(r)}return s}}const Qn=new Go;P&&(P.themeController=Qn);class Yo extends Ee{constructor(){super(...arguments),this.overlaysActive=0,this.hasDarkOverlays=0}get isOverlayActive(){return this.overlaysActive>0}set isOverlayActive(e){this.overlaysActive+=e?1:-1,this.dispatchEvent("change",this.isOverlayActive)}get isDarkOverlayActive(){return this.hasDarkOverlays>0}set isDarkOverlayActive(e){this.hasDarkOverlays+=e?1:-1,this.isOverlayActive=e}}const ot=new Yo;P&&(P.overlayCounter=ot);function fc(t,e=t.split("?")){return er(e?.[1])}function er(t){const e={};return t&&t.split("&").forEach(s=>{const[n,r=""]=s.split("=");e[n]=decodeURIComponent(r)}),e}const zo="onbeforeinstallprompt"in window;let us;function $o(){window.addEventListener("beforeinstallprompt",t=>{us=async()=>{t.prompt();const{outcome:e}=await t.userChoice;e==="accepted"&&(us=void 0)}})}function gc(){return us}const Ss=["January","February","March","April","May","June","July","August","September","October","November","December"],Ho=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$e=Ss.slice(),ls=Ho.slice(),ke=86400;function Ko(){const t=U.getDateTimeFormat({weekday:"long"}),e=new Date(Date.UTC(2017,0,2)),s=[];for(let n=0;n<7;++n)s.push(St(t.format(e))),e.setDate(e.getDate()+1);return s}function qo(){const t=U.getDateTimeFormat({month:"long"}),e=new Date(Date.UTC(2017,0,1)),s=[];for(let n=0;n<12;++n)s.push(St(t.format(e))),e.setMonth(e.getMonth()+1);return s}function Xs(){$e.splice(0,$e.length,...qo()),ls.splice(0,ls.length,...Ko())}const Zs=t=>{const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),s=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-s);const n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-n.getTime())/ke+1)/7)};function mc(t,e){e||(e=new Date,e.setHours(0,0,0,0));const s={day:"numeric",month:"long"};return t.getFullYear()!==e.getFullYear()&&(s.year="numeric"),new U.IntlDateElement({date:t,options:s}).element}function Jo(t){const e=new Date,s=e.getTime()/1e3|0,n=t.getTime()/1e3|0,r={};return s-n<ke&&e.getDate()===t.getDate()?r.hour=r.minute="2-digit":e.getFullYear()!==t.getFullYear()?(r.year=r.day="numeric",r.month="2-digit"):s-n<ke*7&&Zs(e)===Zs(t)?r.weekday="short":(r.month="short",r.day="numeric"),new U.IntlDateElement({date:t,options:r}).element}const hs={hour:"2-digit",minute:"2-digit"};function Xo(t,e={}){e.combined&&(e.noToday=!0);const s=new Date,n=new Date(t*1e3),i=(s.getTime()/1e3|0)-t,o=e.combined?void 0:Zo(n);let c;return!e.noToday&&i<ke&&s.getDate()===n.getDate()?c=Ge(e.capitalize?"Date.Today":"Peer.Status.Today"):!e.noToday&&i>0&&i<ke*2&&new Date(s.getTime()-ke*1e3).getDate()===n.getDate()?(c=Ge(e.capitalize?"Yesterday":"Peer.Status.Yesterday"),e.capitalize&&(c.style.textTransform="capitalize")):s.getFullYear()!==n.getFullYear()?c=new U.IntlDateElement({date:n,options:{month:"short",day:"numeric",year:"numeric",...e.combined?hs:{}}}).element:c=new U.IntlDateElement({date:n,options:{month:"short",day:"numeric",...e.combined?hs:{}}}).element,{dateEl:c,timeEl:o}}function Dc(t,e=!0,s=!1){const{dateEl:n,timeEl:r}=Xo(t,{capitalize:e,noToday:s}),i=document.createDocumentFragment();return i.append(n," ",Ge("ScheduleController.at")," ",r),i}function Zo(t){return new U.IntlDateElement({date:t,options:hs}).element}P&&(P.formatDateAccordingToTodayNew=Jo);const pc=(t,e={})=>{const s=e.monthAsNumber?".":" ",n=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+(e.noSeconds?"":":"+("0"+t.getSeconds()).slice(-2)),r=t.getFullYear();return(e.leadingZero?("0"+t.getDate()).slice(-2):t.getDate())+s+(e.monthAsNumber?("0"+(t.getMonth()+1)).slice(-2):Ss[t.getMonth()])+s+(""+r).slice(e.shortYear?2:0)+(e.noTime?"":", "+n)};function Fc(t,e){const s=t>=12&&!(t%12);return Ge(e?s?"BoldYears":"BoldMonths":s?"Years":"Months",[s?t/12:t])}const Z=2013,Qo=new RegExp("20[0-9]{1,2}"),bs="\\p{L}",ea=new RegExp(`(${bs}{3,})`,"iu"),ta=new RegExp(`(${bs}{3,}) ([0-9]{0,4})`,"iu"),sa=new RegExp(`([0-9]{0,4}) (${bs}{2,})`,"iu"),na=new RegExp("^([0-9]{1,4})(\\.| |/|\\-)([0-9]{1,4})$","i"),ra=new RegExp("^([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,4})$","i"),ia=[31,29,31,30,31,30,31,31,30,31,30,31];function oa(t,e){const s=t.trim().toLowerCase();if(s.length<3)return;if(["today",U.format("Peer.Status.Today",!0)].some(i=>i.indexOf(s)===0)){const i=new Date,o=i.getFullYear(),c=i.getMonth(),a=i.getDate();i.setFullYear(o,c,a),i.setHours(0,0,0);const u=i.getTime();i.setFullYear(o,c,a+1),i.setHours(0,0,0);const l=i.getTime()-1;e.push({title:U.format("Date.Today",!0),minDate:u,maxDate:l});return}if(["yesterday",U.format("Peer.Status.Yesterday",!0)].some(i=>i.indexOf(s)===0)){const i=new Date,o=i.getFullYear(),c=i.getMonth(),a=i.getDate();i.setFullYear(o,c,a),i.setHours(0,0,0);const u=i.getTime()-864e5;i.setFullYear(o,c,a+1),i.setHours(0,0,0);const l=i.getTime()-86400001;e.push({title:St(U.format("Yesterday",!0)),minDate:u,maxDate:l});return}const n=la(s);if(n>=0){const i=new Date,o=i.getTime(),c=i.getDay(),a=n-c;i.setDate(i.getDate()+a),i.getTime()>o&&i.setTime(i.getTime()-6048e5);const u=i.getFullYear(),l=i.getMonth(),h=i.getDate();i.setFullYear(u,l,h),i.setHours(0,0,0);const f=i.getTime();i.setFullYear(u,l,h+1),i.setHours(0,0,0);const g=i.getTime()-1;e.push({title:sr(f),minDate:f,maxDate:g});return}let r;if((r=na.exec(s))!==null){const i=r[1],o=r[3],c=parseInt(i),a=parseInt(o);if(c>0&&c<=31){if(a>=Z&&c<=12){const u=a,l=c-1;Be(e,l,u);return}else if(a<=12){const u=c-1,l=a-1;Yt(e,u,l)}}else if(c>=Z&&a<=12){const u=c,l=a-1;Be(e,l,u)}return}if((r=ra.exec(s))!==null){const i=r[1],o=r[3],c=r[5];if(!r[2]===r[4])return;const a=parseInt(i),u=parseInt(o)-1;let l=parseInt(c);l>=10&&l<=99&&(l+=2e3);const h=new Date().getFullYear();if(nr(a-1,u)&&l>=Z&&l<=h){const f=new Date;f.setFullYear(l,u,a),f.setHours(0,0,0);const g=f.getTime();f.setFullYear(l,u,a+1),f.setHours(0,0,0);const S=f.getTime()-1;e.push({title:tr(g),minDate:g,maxDate:S});return}return}if((r=ta.exec(s))!==null){const i=r[1],o=r[2],c=zt(i);if(c>=0){const a=+o||new Date().getUTCFullYear();if(a>0&&a<=31){const u=a-1;Yt(e,u,c);return}else if(a>=Z){Be(e,c,a);return}}}if((r=sa.exec(s))!==null){const i=r[1],o=r[2],c=zt(o);if(c>=0){const a=+i;if(a>0&&a<=31){const u=a-1;Yt(e,u,c);return}else a>=Z&&Be(e,c,a)}}if((r=ea.exec(s))!==null){const i=r[1],o=zt(i);if(o>=0){const c=new Date().getFullYear();for(let a=c;a>=Z;--a)Be(e,o,a)}}if((r=Qo.exec(s))!==null){let i=+r[0];const o=new Date().getFullYear();if(i<Z){i=Z;for(let c=o;c>=i;c--){const a=new Date;a.setFullYear(c,0,1),a.setHours(0,0,0);const u=a.getTime();a.setFullYear(c+1,0,1),a.setHours(0,0,0);const l=a.getTime()-1;e.push({title:""+c,minDate:u,maxDate:l})}}else if(i<=o){const c=new Date;c.setFullYear(i,0,1),c.setHours(0,0,0);const a=c.getTime();c.setFullYear(i+1,0,1),c.setHours(0,0,0);const u=c.getTime()-1;e.push({title:""+i,minDate:a,maxDate:u})}return}}function Be(t,e,s){const n=new Date().getFullYear(),r=Date.now();if(s>=Z&&s<=n){const i=new Date;i.setFullYear(s,e,1),i.setHours(0,0,0);const o=i.getTime();if(o>r)return;i.setMonth(i.getMonth()+1);const c=i.getTime()-1;t.push({title:aa(o),minDate:o,maxDate:c})}}function Yt(t,e,s){if(nr(e,s)){const n=new Date().getFullYear(),r=Date.now();for(let i=n;i>=Z;i--){if(s===1&&e===28&&!ua(i))continue;const o=new Date;o.setFullYear(i,s,e+1),o.setHours(0,0,0);const c=o.getTime();if(c>r)continue;o.setFullYear(i,s,e+2),o.setHours(0,0,0);const a=o.getTime()-1;i===n?t.push({title:ca(c),minDate:c,maxDate:a}):t.push({title:tr(c),minDate:c,maxDate:a})}}}function aa(t){const e=new Date(t);return $e[e.getMonth()]+" "+e.getFullYear()}function ca(t){const e=new Date(t);return $e[e.getMonth()]+" "+e.getDate()}function tr(t){const e=new Date(t);return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()}function sr(t){const e=new Date(t);return ls[e.getDay()]}function nr(t,e){return e>=0&&e<12&&t>=0&&t<ia[e]}function ua(t){return t%4===0&&t%100!==0||t%400===0}function zt(t){t=t.toLowerCase();for(let e=0;e<12;e++)if([Ss[e],$e[e]].some(s=>s.toLowerCase().indexOf(t)===0))return e;return-1}function la(t){const e=new Date;if(t.length<=3)return-1;for(let s=0;s<7;s++)if(e.setDate(e.getDate()+1),sr(e.getTime()).toLowerCase().indexOf(t)===0)return e.getDay();return-1}P.fillTipDates=oa;const rr=ne,ir=ne||!en&&(!J||fs)||tn<113,ha=!rr&&!ir;Sn.then(t=>{t.forEach(e=>{Ye.add(e),wn.add(e)}),console.log("Supported image mime types",Ye),Je.sendEnvironment()});document.addEventListener("DOMContentLoaded",async()=>{try{x.isMainDomain&&document.referrer&&/(^|\.)(google|bing|duckduckgo|ya|yandex)\./i.test(new URL(document.referrer).host)&&(localStorage.getItem("kz_version")==="Z"||mt(8)>127?(localStorage.setItem("kz_version","Z"),location.href="https://web.telegram.org/a/"):localStorage.setItem("kz_version","K"))}catch{}vr(),Node.prototype.replaceChildren===void 0&&(Node.prototype.replaceChildren=function(...D){this.textContent="",D&&this.append(...D)}),y.managers=_o();const t=document.getElementById("manifest");t&&(t.href=`site${$t&&!Te?"_apple":""}.webmanifest?v=jw3mK7G9Aq`),ft.start();const e=window.visualViewport||window;let s=!1,n;const r=()=>{let D=(s&&!ot.isOverlayActive?e.height||e.innerHeight:window.innerHeight)*.01;D=+D.toFixed(2),n!==D&&(fe&&n<D&&D-n>1&&lr(),n=D,document.documentElement.style.setProperty("--vh",`${D}px`))};window.addEventListener("resize",r),r();const i=()=>{const D=document.querySelector(".chat.active");if(!D)return;const F=D.cloneNode(!0);F.querySelectorAll(".chat-input, .chat-background").forEach(v=>v.remove());const C=F.querySelector(".bubbles"),_=C.querySelector(".bubbles-inner");C.replaceChildren(_),C.querySelectorAll("video").forEach(v=>v.muted=!0);const T=document.createElement("div");T.setAttribute("id","printable"),T.append(F),document.body.append(T)},o=()=>{document.getElementById("printable")?.remove()};if(window.addEventListener("beforeprint",i),window.addEventListener("afterprint",o),at){const D=()=>{s=F===1&&at&&!ot.isOverlayActive,r(),e!==window&&(s?(window.removeEventListener("resize",r),e.addEventListener("resize",r)):(e.removeEventListener("resize",r),window.addEventListener("resize",r)))};let F;window.onImTabChange=C=>{const _=F!==void 0;F=C,(_||F===1)&&D()},ot.addEventListener("change",()=>{D()})}Me&&!Kt&&document.addEventListener("dragstart",D=>{const F=D.target;if(F.tagName==="IMG"&&F.classList.contains("emoji"))return ks(D),!1}),Kt&&document.documentElement.classList.add("native-emoji"),rr?document.documentElement.classList.add("native-scroll"):ir?document.documentElement.classList.add("overlay-scroll"):ha&&document.documentElement.classList.add("custom-scroll"),document.addEventListener("dragstart",D=>{if(D.target?.tagName==="IMG")return D.preventDefault(),!1}),document.addEventListener("contextmenu",D=>{D.target.tagName==="IMG"&&!window.appMediaViewer&&ks(D)}),Me&&document.documentElement.classList.add("is-firefox","no-backdrop"),ne&&document.documentElement.classList.add("is-mobile"),$t?(J&&document.documentElement.classList.add("is-safari"),Te?document.documentElement.classList.add("is-ios"):document.documentElement.classList.add("is-mac")):Qs&&document.documentElement.classList.add("is-android"),fe?document.documentElement.classList.add("is-touch"):document.documentElement.classList.add("no-touch"),zo&&$o();const c=performance.now(),a=U.getCacheLangPack(),[u,l]=await Promise.all([Je.sendState().then(([D])=>D),a]);U.setTimeFormat(u.state.settings.timeFormat),y.managers.rootScope.getPremium().then(D=>{y.premium=D}),Qn.setThemeListener(),l.appVersion!==x.langPackVersion?U.getLangPack(l.lang_code):Xs(),y.addEventListener("language_change",()=>{Xs()});function h(D,F){D.style.opacity="0",F.then(()=>{window.requestAnimationFrame(()=>{D.style.opacity=""})})}console.log("got state, time:",performance.now()-c),await Sn,l.lang_code==="ar"||l.lang_code==="fa"&&Cr&&!1?(document.documentElement.classList.add("is-rtl"),document.documentElement.dir="rtl",document.documentElement.lang=l.lang_code,U.setRTL(!0)):document.documentElement.dir="ltr";let f=u.state.authState;const S=location.hash.split("?"),b=er(S[1]??S[0].slice(1));if(b.tgWebAuthToken&&f._!=="authStateSignedIn"){const D={token:b.tgWebAuthToken,dcId:+b.tgWebAuthDcId,userId:b.tgWebAuthUserId.toUserId(),isTest:b.tgWebAuthTest!==void 0&&!!+b.tgWebAuthTest,tgAddr:b.tgaddr};if(D.isTest!==z.test){const F=new URLSearchParams(location.search);+b.tgWebAuthTest?F.set("test","1"):F.delete("test"),location.search=F.toString();return}y.managers.appStateManager.pushToState("authState",f={_:"authStateSignImport",data:D})}if(f._!=="authStateSignedIn"){console.log("Will mount auth page:",f._,Date.now()/1e3);const D=document.getElementById("auth-pages");let F;if(D){F=D.querySelector(".scrollable"),(!fe||fs)&&F.classList.add("no-scrollbar"),F.style.opacity="0";const _=document.createElement("div");_.classList.add("auth-placeholder"),F.prepend(_),F.append(_.cloneNode())}try{await Promise.all([V(()=>Promise.resolve().then(()=>fi),void 0,import.meta.url),V(()=>Promise.resolve().then(()=>li),void 0,import.meta.url)]).then(([_,k])=>{_.default.setAuthorized(!1),k.default.forceUnsubscribe()})}catch{}let C;switch(f._){case"authStateSignIn":C=(await V(()=>import("./pageSignIn-N45VQ3GF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)).default.mount();break;case"authStateSignQr":C=(await V(()=>import("./pageSignQR-VxURk7YO.js").then(_=>_.a),__vite__mapDeps([7,2,4,1,8]),import.meta.url)).default.mount();break;case"authStateAuthCode":C=(await V(()=>import("./pageAuthCode-tLfkajQz.js"),__vite__mapDeps([9,2,0,1,3,4,5,6,7,8,10]),import.meta.url)).default.mount(f.sentCode);break;case"authStatePassword":C=(await V(()=>import("./pagePassword-q_GU3dwQ.js"),__vite__mapDeps([11,1,2,4,12,5,13]),import.meta.url)).default.mount();break;case"authStateSignUp":C=(await V(()=>import("./pageSignUp-fAex3eRP.js"),__vite__mapDeps([14,13,2,5,4,15,6,1]),import.meta.url)).default.mount(f.authCode);break;case"authStateSignImport":C=(await V(()=>import("./pageSignImport-Dsp43SYx.js"),__vite__mapDeps([16,1,2]),import.meta.url)).default.mount(f.data);break}if(F){C&&await C;const _="fonts"in document?Promise.race([gs(1e3),document.fonts.ready]):Promise.resolve();h(F,_)}}else console.log("Will mount IM page:",Date.now()/1e3),h(document.getElementById("main-columns"),Fr()),(await V(()=>import("./pageIm-wngHxkKH.js"),__vite__mapDeps([17,2]),import.meta.url)).default.mount()});export{qa as $,x as A,xa as B,Zo as C,me as D,Ee as E,It as F,pn as G,_a as H,fe as I,qt as J,va as K,it as L,P as M,on as N,ke as O,K as P,to as Q,so as R,G as S,wa as T,Na as U,Ja as V,ce as W,io as X,Ga as Y,pe as Z,V as _,y as a,fc as a$,Qn as a0,oe as a1,qn as a2,Ar as a3,L as a4,Ea as a5,qi as a6,ct as a7,dr as a8,ec as a9,Dc as aA,J as aB,Qs as aC,La as aD,mr as aE,gr as aF,Da as aG,pa as aH,Pa as aI,Vt as aJ,os as aK,Te as aL,wi as aM,js as aN,ro as aO,Xa as aP,Kt as aQ,Dr as aR,Jo as aS,yi as aT,Bt as aU,Ro as aV,pc as aW,wn as aX,ba as aY,ci as aZ,yr as a_,rc as aa,tc as ab,So as ac,Ha as ad,Fa as ae,as as af,Nt as ag,fs as ah,ot as ai,ne as aj,$t as ak,ya as al,di as am,fr as an,zn as ao,ft as ap,re as aq,Xo as ar,Ua as as,Hr as at,ge as au,ms as av,ds as aw,cs as ax,j as ay,dn as az,Je as b,fa as b$,Fe as b0,nc as b1,Ka as b2,sc as b3,yo as b4,Za as b5,ic as b6,Qa as b7,$a as b8,Fc as b9,Us as bA,$n as bB,Ue as bC,Kn as bD,Oo as bE,da as bF,Bs as bG,pi as bH,wr as bI,br as bJ,Ta as bK,gc as bL,oa as bM,Ci as bN,Jr as bO,_i as bP,gt as bQ,En as bR,dc as bS,uc as bT,hc as bU,lc as bV,Qt as bW,Ze as bX,oc as bY,ps as bZ,ht as b_,Fi as ba,$r as bb,gi as bc,ai as bd,dt as be,Sa as bf,Me as bg,Sr as bh,cc as bi,qs as bj,ka as bk,Jn as bl,Ye as bm,vs as bn,Ia as bo,Xt as bp,Ca as bq,Gr as br,fn as bs,sn as bt,kn as bu,at as bv,ma as bw,Ts as bx,es as by,za as bz,ks as c,_o as c0,Mn as c1,ir as c2,Pi as c3,mi as c4,Tn as c5,Di as c6,Zi as c7,an as c8,Ki as c9,en as ca,yn as cb,Fn as cc,Ma as cd,Oa as ce,Ra as cf,mn as cg,nn as ch,Wa as d,U as e,B as f,lr as g,te as h,Ge as i,Zn as j,Ht as k,Fr as l,Xn as m,ga as n,Ai as o,gs as p,ja as q,Va as r,_e as s,Ii as t,Wr as u,ac as v,Dn as w,mc as x,Aa as y,Ba as z};
//# sourceMappingURL=index-M8z-nwNm.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./pageSignIn-N45VQ3GF.js","./putPreloader-jxB4tqkF.js","./page-kT6kVFv9.js","./countryInputField-tqY1KpER.js","./button-Mm7TqKr1.js","./wrapEmojiText-PAHdiQbe.js","./scrollable-ILmNatrX.js","./pageSignQR-VxURk7YO.js","./textToSvgURL-Z4O-nL1S.js","./pageAuthCode-tLfkajQz.js","./codeInputField-Ofayp2TX.js","./pagePassword-q_GU3dwQ.js","./htmlToSpan-BQ96zqgl.js","./loginPage-0kq1JorQ.js","./pageSignUp-fAex3eRP.js","./avatar-HalcuPNE.js","./pageSignImport-Dsp43SYx.js","./pageIm-wngHxkKH.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}