import{J as _,K as b,L as q,M as O,D as W,N as $,O as A,w as H,Q as R,R as U,T as V,y as z,U as j,V as B,k as G,W as J,X as K,Y as Q,v as Y}from"./index-cZ9AAHAN.js";function X(){const e=_("back");return e.addEventListener("click",async()=>{await b.set({should_animate_main:1});const t=q(await b.get("previous_account"));await b.delete("previous_account");const s=document.getElementById("auth-pages");s.classList.add("auth-pages-exit"),await O(),s.classList.add("auth-pages-exiting"),await W(200),$(t)}),e}function T(e,t){return z.isRTL&&(e=-e),`translate3d(${e}px, ${t}px, 0)`}const Z={callback:(e,t,s)=>{const c=t.getBoundingClientRect().width,n=[e,t];return s&&n.reverse(),n[0].style.filter="brightness(80%)",n[0].style.transform=T(-c*.25,0),n[1].style.transform=T(c,0),e.classList.add("active"),e.offsetWidth,e.style.transform="",e.style.filter="",()=>{t.style.transform=t.style.filter=""}},animateFirst:!1},C={callback:(e,t,s)=>{const c=t.getBoundingClientRect().width,n=[e,t];return s&&n.reverse(),n[0].style.transform=T(-c,0),n[1].style.transform=T(c,0),e.classList.add("active"),e.offsetWidth,e.style.transform="",()=>{t.style.transform=""}},animateFirst:!1},tt={callback:(e,t,s)=>{const c=t.getBoundingClientRect().width,n=[e,t],f=["slide-right","slide-left"];return s&&(n.reverse(),f.reverse()),n[0].style.transform=T(-c,0),n[1].style.transform=T(c,0),e.classList.add("active",f[0]),t.classList.add(f[1]),e.offsetWidth,e.style.transform="",e.classList.remove(f[0]),()=>{t.style.transform="",t.classList.remove(f[1])}},animateFirst:!1},et={navigation:Z,premiumTabs:tt,tabs:C},st=e=>{let{content:t,type:s,transitionTime:c,onTransitionEnd:n,onTransitionStart:f,onTransitionStartAfter:L,isHeavy:p=!0,once:w=!1,withAnimationListener:S=!0,listenerSetter:y,animateFirst:I=!1}=e;const M=s,{callback:h,animateFirst:d}=et[M]||{};t.dataset.animation=M,d!==void 0&&(I=d);const a=new Map;let v,i=null;if(S){const r=h?"transitionend":"animationend",l=u=>{H(u),!(u.target.parentElement!==t||(a.get(u.target)?.(),u.target!==i))&&(!v&&p||(v&&(v.resolve(),v=void 0),n?.(m.prevId()),t.classList.remove("animating","backwards","disable-hover"),w&&(y?y.removeManual(t,r,l):t.removeEventListener(r,l),i=v=void 0,a.clear())))};y?y.add(t)(r,l):t.addEventListener(r,l)}function m(r,l=!0,u){u&&(i=u),r instanceof HTMLElement&&(r=A(r));const E=m.prevId();if(r===E)return!1;f?.(r);const o=t.children[r];if((!R.isAvailable("animations")||E===-1&&!I)&&(l=!1),!S){const g=t.dataset.timeout;g!==void 0&&clearTimeout(+g),delete t.dataset.timeout}if(!l){i?i.classList.remove("active","to","from"):o&&a.get(o)?.(),o&&(o.classList.remove("to","from"),o.classList.add("active")),t.classList.remove("animating","backwards","disable-hover"),i=o,n?.(r);return}S||(t.dataset.timeout=""+window.setTimeout(()=>{o.classList.remove("to"),i&&i.classList.remove("from"),t.classList.remove("animating","backwards","disable-hover"),delete t.dataset.timeout},c)),i&&(i.classList.remove("to"),i.classList.add("from")),t.classList.add("animating");const D=E<r;t.classList.toggle("backwards",!D);let F;if(o&&(h?F=h(o,i,D):o.classList.add("active"),L?.(r),o.classList.remove("from"),o.classList.add("to")),o){const g=o.dataset.transitionTimeout;g&&clearTimeout(+g),a.set(o,()=>{o.classList.remove("to"),a.delete(o)})}if(i){let g;const k=i,P=()=>{clearTimeout(g),k.classList.remove("active","from"),F?.(),a.delete(k)};o?(g=window.setTimeout(P,c+100),a.set(k,P)):(g=window.setTimeout(P,c+100),a.set(k,()=>{clearTimeout(g),a.delete(k)})),k.dataset.transitionTimeout=""+g,p&&(v||(v=U()),V(v,c*2))}i=o}return m.prevId=()=>i?A(i):-1,m.getFrom=()=>i,m.setFrom=r=>i=r,m};function nt({tabs:e,content:t,onClick:s,onTransitionEnd:c,transitionTime:n,scrollableX:f,listenerSetter:L,onChange:p}){return x(e,t,s,c,n,f,L,p)}function x(e,t,s,c,n=200,f,L,p){const w=st({content:t,type:e||t.dataset.animation==="tabs"?"tabs":"navigation",transitionTime:n,onTransitionEnd:c,listenerSetter:L});if(!e)return w;const S=new Proxy(w,{apply:(h,d,a)=>{const v=a[1]!==void 0?a[1]:!0;let i,m;a[0]instanceof HTMLElement?(i=A(a[0]),m=a[0]):(i=+a[0],m=e.querySelector(`[data-tab="${i}"]`)||e.children[i]),y(m,i,v)}}),y=async(h,d,a=!0)=>{const v=t.children[d];if(s){const l=s(d,v,a),u=l instanceof Promise?await l:l;if(u!==void 0&&!u)return}f&&f.scrollIntoViewNew({element:h.parentElement.children[d],position:"center",forceDirection:a?void 0:j.Static,forceDuration:n,axis:"x"}),R.isAvailable("animations")||(a=!1);const i=w.prevId();if(h.classList.contains("active")||d===i)return!1;const m=a?B:l=>l(),r=e.querySelector(M.toLowerCase()+".active");r&&m(()=>{r.classList.remove("active"),p?.({element:r,active:!1})}),I&&i!==-1&&a&&m(()=>{const l=h.querySelector("i"),u=h.parentElement.children[i].querySelector("i");u.classList.remove("animate"),l.classList.remove("animate");const E=u.parentElement.parentElement.offsetLeft-l.parentElement.parentElement.offsetLeft,o=u.clientWidth/l.clientWidth;l.style.transform=`translate3d(${E}px, 0, 0) scale3d(${o}, 1, 1)`,B(()=>{l.classList.add("animate"),l.style.transform="none"})}),m(()=>{h.classList.add("active"),p?.({element:h,active:!0})}),w(d,a)},I=!e.classList.contains("no-stripe"),M=e.firstElementChild.tagName;return G(e,h=>{let d=h.target;if(d=J(d,e),!d)return!1;let a;if(d.dataset.tab){if(a=+d.dataset.tab,a===-1)return!1}else a=A(d);y(d,a)},{listenerSetter:L}),S}class it{constructor(){this.pageId=-1,this.pagesDiv=document.getElementById("auth-pages"),this.scrollableDiv=this.pagesDiv.querySelector(".scrollable"),this.selectTab=x(null,this.scrollableDiv.querySelector(".tabs-container"),null,()=>{this.page?.onShown&&this.page.onShown()})}setPage(t){if(t.isAuthPage){this.pagesDiv.style.display="";const s=A(t.pageEl);if(this.pageId===s)return;this.selectTab(s),this.pageId=s,this.scrollableDiv&&K({container:this.scrollableDiv,element:this.scrollableDiv.firstElementChild,position:"start"})}else this.pagesDiv.style.display="none",t.pageEl.style.display="",this.pageId=-1;this.page=t}}const N=new it;Q.pagesManager=N;class ot{constructor(t,s,c,n,f){this.isAuthPage=s,this.onFirstMount=c,this.onMount=n,this.onShown=f,this.pageEl=document.body.querySelector("."+t)}async mount(...t){if(this.onMount){const s=this.onMount(...t);s instanceof Promise&&await s}this.installPromise??(this.installPromise=this.install(...t)),await this.installPromise,N.setPage(this)}async install(...t){if(this.onFirstMount)try{const s=this.onFirstMount(...t);s instanceof Promise&&await s}catch(s){console.error("PAGE MOUNT ERROR:",s)}this.mountBackButtonIfAuth()}mountBackButtonIfAuth(){if(!this.isAuthPage||Y()===1)return;const t=document.getElementById("auth-pages-close");t?.style.removeProperty("display"),t?.replaceChildren(),t?.append(X())}}export{ot as P,st as T,nt as a,x as h};
//# sourceMappingURL=page-B3fcTjWa.js.map
