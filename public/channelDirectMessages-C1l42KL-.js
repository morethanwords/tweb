import{dM as v,c,ag as M,ah as _,b as e,ad as k,k as y,a2 as D}from"./index-BKArEJfv.js";import{T as R}from"./transition-ClRFvYjQ.js";import{u as T,S as A}from"./saveButton-BEV2Q7uv.js";import{a4 as E,aa as h}from"./appDialogsManager-e3KVNKCm.js";import{S as H}from"./starsRangeInput-BH-Dc9gi.js";import{u as L}from"./useStarsCommissionAndWithdrawalPrice-B1ZstzpX.js";import{S as x}from"./staticSwitch-BTWJ3i4I.js";import"./iconTsx-CEZQ1gXv.js";import"./classNames-CN4lTu6a.js";import"./page-tGDT43t7.js";import"./putPreloader-Bpgd7WUY.js";import"./avatar-B3piUcGv.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-CGR38Gtg.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-CzNKsOSh.js";import"./fastBlur-Co-79rP4.js";import"./emailSetup-Dn-rcfhb.js";import"./countryInputField-nKtJ2S_I.js";import"./scrollable2-BWCbsPxK.js";import"./chatBackground-Dh9axlMd.js";import"./tracking-DWwgOucp.js";import"./useAppConfig-BRK-764J.js";const re=()=>{const[a]=E(),{apiManagerProxy:p,rootScope:u,Row:s}=v(),n=a.payload.chat;if(!n)return[];const i=n.linked_monoforum_id?p.getChat(n.linked_monoforum_id):void 0,l=!!i,m=i?._==="channel"&&+i.send_paid_messages_stars||0,[t,S]=c(l),[r,f]=c(m),[d,C]=c(!1),{commissionPercents:w,willReceiveDollars:P}=L(r),b=M(C,200);_(()=>{b(l!==t()||t()&&m!==r())});let o=!1;async function g(){if(!o){o=!0;try{await u.managers.appChatsManager.updateChannelPaidMessagesPrice(n.id,t()?r():0,t()),a.close()}finally{o=!1}}}return a.isConfirmationNeededOnClose=T({saveAllSettings:g,hasChanges:d,descriptionLangKey:"UnsavedChangesDescription.Channel"}),[e(k,{get mount(){return a.header},get children(){return e(A,{get hasChanges(){return d()},onClick:()=>void g()})}}),e(h,{caption:"ChannelDirectMessages.Settings.SwitchLabelCaption",get children(){return e(s,{clickable:()=>{S(!t())},get children(){return[e(s.Title,{get children(){return y("ChannelDirectMessages.Settings.SwitchLabel")}}),e(s.RightContent,{get children(){return e(x,{get checked(){return t()}})}})]}})}}),e(R,{name:"fade",get children(){return e(D,{get when(){return t()},get children(){return e(h,{name:"PaidMessages.SetPrice",class:"overflow-hidden",caption:"PaidMessages.SetPriceChannelDescription",get captionArgs(){return[w(),P()]},get children(){return e(H,{get value(){return r()},onChange:f,startFromZero:!0})}})}})}})]};export{re as default};
//# sourceMappingURL=channelDirectMessages-C1l42KL-.js.map
