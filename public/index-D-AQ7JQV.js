import{c as h,b as e,ab as f,a2 as $,i as l,a5 as g,a6 as v,E as I,a9 as k,t as y,a as _,K as F}from"./index-B7WIMVLo.js";import{d as M,a0 as w,a1 as D}from"./appDialogsManager-DWM6BLp0.js";import{b as N,I as u}from"./emailSetup-0NlYvq0Q.js";import{u as x}from"./useAppConfig-dNDrQAnD.js";import{u as R}from"./useStarsCommissionAndWithdrawalPrice-BhT8olYf.js";import{S as n}from"./index-NZ28QDJ6.js";import{S as b}from"./space-Bz_xbP0m.js";import{s as d,c as G,P as L}from"./publishTimeField-Jvkiz_S6.js";import"./page-CFQq45dV.js";import"./putPreloader-BhMVPekh.js";import"./avatar-CyLVJWYN.js";import"./classNames-CN4lTu6a.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-N7gVnHGH.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-CTXjJKhu.js";import"./iconTsx-Dm7uuor6.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-CGoQGdNE.js";import"./transition-4sVVeuD9.js";import"./scrollable2-B9qrN0bL.js";import"./chatBackground-BOw4waSL.js";import"./tracking-CFAwSx7m.js";const C=y("<div>"),H=y('<button class="btn-primary btn-color-primary btn-large">'),K=5,O=1e5,U=1,B=M({name:"suggested-post-popup-content",component:s=>{N(s.element,d.Container);const[o,c]=h(s.initialStars?s.initialStars+"":""),[i,p]=h(s.initialTimestamp&&s.initialTimestamp*1e3>Date.now()+U*60*1e3?s.initialTimestamp:void 0),[r]=x(),{willReceiveDollars:a}=R(()=>+o()||0,{commissionKey:"stars_suggested_post_commission_permille"}),S=()=>r()?.stars_suggested_post_amount_min||K,T=()=>r()?.stars_suggested_post_amount_max||O,m=()=>+o()&&+o()<S(),P=()=>m(),E=t=>{c(t&&""+Math.min(T(),+t.replace(/\D/g,"")||0))},A=()=>{P()||s.onFinish({stars:+o()||void 0,timestamp:i()||void 0})};return[e(n,{get value(){return o()},onChange:E,get isError(){return m()},get children(){return[e(n.SideContent,{first:!0,get children(){return w({class:G.Icon})}}),e(n.Input,{type:"number",forceFieldValue:!0}),e(n.Label,{forceOffset:44,get children(){return e(u,{get key(){return m()?"SuggestedPosts.EnterPrice.MinOffer":"SuggestedPosts.EnterPrice.Label"},get args(){return f(()=>!!m())()?[S()+""]:void 0}})}}),e(n.SideContent,{last:!0,get children(){return e($,{get when(){return a()},get children(){return["~",f(()=>D(a(),",")),"$"]}})}})]}}),(()=>{const t=C();return l(t,e(u,{key:"SuggestedPosts.EnterPrice.Description"})),g(()=>_(t,d.Caption)),t})(),e(b,{amount:"2rem"}),e(L,{noTimeLangKey:"SuggestedPosts.PublishingTime.Anytime",get value(){return i()},onChange:p}),(()=>{const t=C();return l(t,e(u,{key:"SuggestedPosts.PublishingTime.Description"})),g(()=>_(t,d.Caption)),t})(),e(b,{amount:"2rem"}),(()=>{const t=H();return t.$$click=A,v(I,t,()=>!0),l(t,e(u,{key:"SuggestedPosts.MakeAnOffer"})),g(()=>t.disabled=P()),t})()]}}),V=B;k(["click"]);class dt extends F{constructor({HotReloadGuard:o,suggestChange:c,onFinish:i,...p}){super("suggested-post-popup",{overlayClosable:!0,closable:!0,body:!0,title:c?"SuggestedPosts.SuggestAChange":"SuggestedPosts.SuggestAPost"});const r=new V;r.HotReloadGuard=o,r.feedProps({...p,onFinish:a=>{i(a),this.hide()}}),this.body.append(r)}}export{dt as default};
//# sourceMappingURL=index-D-AQ7JQV.js.map
