{"version":3,"file":"crypto.worker-BF3mmoUv.js","sources":["src/helpers/bytes/bufferConcats.ts","src/lib/polyfill.ts","node_modules/.pnpm/big-integer@1.6.52/node_modules/big-integer/BigInteger.js","src/helpers/bigInt/bigIntConstants.ts","src/helpers/bigInt/bigIntConversion.ts","src/helpers/bytes/bytesModPow.ts","node_modules/.pnpm/fflate@0.8.2/node_modules/fflate/esm/browser.js","src/helpers/gzipUncompress.ts","src/environment/ctx.ts","src/helpers/listenMessagePort.ts","src/config/modes.ts","src/config/debug.ts","src/config/tabId.ts","src/helpers/array/indexOfAndSplice.ts","src/helpers/context.ts","src/helpers/eventListenerBase.ts","src/helpers/makeError.ts","src/environment/userAgent.ts","src/helpers/dT.ts","src/lib/logger.ts","src/lib/superMessagePort.ts","src/lib/crypto/cryptoMessagePort.ts","src/lib/calls/helpers/getEmojisFingerprint.ts","src/lib/crypto/computeDhKey.ts","src/helpers/array/randomize.ts","src/helpers/bytes/addPadding.ts","src/helpers/bytes/bytesFromHex.ts","src/helpers/random.ts","src/lib/crypto/generateDh.ts","src/helpers/bytes/bytesXor.ts","src/helpers/bytes/convertToUint8Array.ts","src/helpers/bytes/bytesToHex.ts","src/lib/crypto/srp.ts","node_modules/.pnpm/@cryptography+aes@0.1.1/node_modules/@cryptography/aes/dist/es/aes.js","src/helpers/bytes/bytesFromWordss.ts","src/helpers/bytes/bytesToWordss.ts","src/lib/crypto/utils/aesIGE.ts","src/helpers/bigInt/bigIntRandom.ts","src/lib/crypto/utils/factorize/BrentPollard.ts","src/lib/crypto/subtle.ts","src/lib/crypto/utils/pbkdf2.ts","src/lib/crypto/utils/rsa.ts","src/lib/crypto/utils/sha1.ts","src/lib/crypto/utils/sha256.ts","src/lib/crypto/utils/aesCTR.ts","src/lib/crypto/aesCtrUtils.ts","src/lib/crypto/utils/aesLocal.ts","src/lib/crypto/crypto.worker.ts"],"sourcesContent":["export default function bufferConcats(...args: (ArrayBuffer | Uint8Array | number[])[]) {\n  const length = args.reduce((acc, v) => acc + ((v as ArrayBuffer).byteLength || (v as Uint8Array).length), 0);\n\n  const tmp = new Uint8Array(length);\n\n  let lastLength = 0;\n  args.forEach((b) => {\n    tmp.set(b instanceof ArrayBuffer ? new Uint8Array(b) : b, lastLength);\n    lastLength += (b as ArrayBuffer).byteLength || (b as Uint8Array).length;\n  });\n\n  return tmp/* .buffer */;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport bufferConcats from '@helpers/bytes/bufferConcats';\n\nUint8Array.prototype.concat = function(...args: Array<Uint8Array | ArrayBuffer | number[]>) {\n  return bufferConcats(this, ...args);\n};\n\n/* Uint8Array.prototype.toString = function() {\n  return String.fromCharCode.apply(null, [...this]);\n}; */\n\nUint8Array.prototype.toJSON = function() {\n  return [...this];\n  // return {type: 'bytes', value: [...this]};\n};\n\nPromise.prototype.finally = Promise.prototype.finally || function<T>(this: Promise<T>, fn: () => any) {\n  const onFinally = (callback: typeof fn) => Promise.resolve(fn()).then(callback);\n  return this.then(\n    (result) => onFinally(() => result),\n    (reason) => onFinally(() => Promise.reject(reason))\n  );\n};\n\ndeclare global {\n  interface Uint8Array {\n    concat: (...args: Array<Uint8Array | ArrayBuffer | number[]>) => Uint8Array,\n    // toString: () => string,\n    toJSON: () => number[],\n    // toJSON: () => {type: 'bytes', value: number[]},\n  }\n\n  interface Promise<T> {\n    finally: (onfinally?: () => void) => Promise<T>;\n  }\n}\n","var bigInt = (function (undefined) {\r\n    \"use strict\";\r\n\r\n    var BASE = 1e7,\r\n        LOG_BASE = 7,\r\n        MAX_INT = 9007199254740992,\r\n        MAX_INT_ARR = smallToArray(MAX_INT),\r\n        DEFAULT_ALPHABET = \"0123456789abcdefghijklmnopqrstuvwxyz\";\r\n\r\n    var supportsNativeBigInt = typeof BigInt === \"function\";\r\n\r\n    function Integer(v, radix, alphabet, caseSensitive) {\r\n        if (typeof v === \"undefined\") return Integer[0];\r\n        if (typeof radix !== \"undefined\") return +radix === 10 && !alphabet ? parseValue(v) : parseBase(v, radix, alphabet, caseSensitive);\r\n        return parseValue(v);\r\n    }\r\n\r\n    function BigInteger(value, sign) {\r\n        this.value = value;\r\n        this.sign = sign;\r\n        this.isSmall = false;\r\n    }\r\n    BigInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function SmallInteger(value) {\r\n        this.value = value;\r\n        this.sign = value < 0;\r\n        this.isSmall = true;\r\n    }\r\n    SmallInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function NativeBigInt(value) {\r\n        this.value = value;\r\n    }\r\n    NativeBigInt.prototype = Object.create(Integer.prototype);\r\n\r\n    function isPrecise(n) {\r\n        return -MAX_INT < n && n < MAX_INT;\r\n    }\r\n\r\n    function smallToArray(n) { // For performance reasons doesn't reference BASE, need to change this function if BASE changes\r\n        if (n < 1e7)\r\n            return [n];\r\n        if (n < 1e14)\r\n            return [n % 1e7, Math.floor(n / 1e7)];\r\n        return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)];\r\n    }\r\n\r\n    function arrayToSmall(arr) { // If BASE changes this function may need to change\r\n        trim(arr);\r\n        var length = arr.length;\r\n        if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {\r\n            switch (length) {\r\n                case 0: return 0;\r\n                case 1: return arr[0];\r\n                case 2: return arr[0] + arr[1] * BASE;\r\n                default: return arr[0] + (arr[1] + arr[2] * BASE) * BASE;\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function trim(v) {\r\n        var i = v.length;\r\n        while (v[--i] === 0);\r\n        v.length = i + 1;\r\n    }\r\n\r\n    function createArray(length) { // function shamelessly stolen from Yaffle's library https://github.com/Yaffle/BigInteger\r\n        var x = new Array(length);\r\n        var i = -1;\r\n        while (++i < length) {\r\n            x[i] = 0;\r\n        }\r\n        return x;\r\n    }\r\n\r\n    function truncate(n) {\r\n        if (n > 0) return Math.floor(n);\r\n        return Math.ceil(n);\r\n    }\r\n\r\n    function add(a, b) { // assumes a and b are arrays with a.length >= b.length\r\n        var l_a = a.length,\r\n            l_b = b.length,\r\n            r = new Array(l_a),\r\n            carry = 0,\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l_b; i++) {\r\n            sum = a[i] + b[i] + carry;\r\n            carry = sum >= base ? 1 : 0;\r\n            r[i] = sum - carry * base;\r\n        }\r\n        while (i < l_a) {\r\n            sum = a[i] + carry;\r\n            carry = sum === base ? 1 : 0;\r\n            r[i++] = sum - carry * base;\r\n        }\r\n        if (carry > 0) r.push(carry);\r\n        return r;\r\n    }\r\n\r\n    function addAny(a, b) {\r\n        if (a.length >= b.length) return add(a, b);\r\n        return add(b, a);\r\n    }\r\n\r\n    function addSmall(a, carry) { // assumes a is array, carry is number with 0 <= carry < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l; i++) {\r\n            sum = a[i] - base + carry;\r\n            carry = Math.floor(sum / base);\r\n            r[i] = sum - carry * base;\r\n            carry += 1;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall) {\r\n            return new BigInteger(addSmall(a, Math.abs(b)), this.sign);\r\n        }\r\n        return new BigInteger(addAny(a, b), this.sign);\r\n    };\r\n    BigInteger.prototype.plus = BigInteger.prototype.add;\r\n\r\n    SmallInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            if (isPrecise(a + b)) return new SmallInteger(a + b);\r\n            b = smallToArray(Math.abs(b));\r\n        }\r\n        return new BigInteger(addSmall(b, Math.abs(a)), a < 0);\r\n    };\r\n    SmallInteger.prototype.plus = SmallInteger.prototype.add;\r\n\r\n    NativeBigInt.prototype.add = function (v) {\r\n        return new NativeBigInt(this.value + parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.plus = NativeBigInt.prototype.add;\r\n\r\n    function subtract(a, b) { // assumes a and b are arrays with a >= b\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            r = new Array(a_l),\r\n            borrow = 0,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < b_l; i++) {\r\n            difference = a[i] - borrow - b[i];\r\n            if (difference < 0) {\r\n                difference += base;\r\n                borrow = 1;\r\n            } else borrow = 0;\r\n            r[i] = difference;\r\n        }\r\n        for (i = b_l; i < a_l; i++) {\r\n            difference = a[i] - borrow;\r\n            if (difference < 0) difference += base;\r\n            else {\r\n                r[i++] = difference;\r\n                break;\r\n            }\r\n            r[i] = difference;\r\n        }\r\n        for (; i < a_l; i++) {\r\n            r[i] = a[i];\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function subtractAny(a, b, sign) {\r\n        var value;\r\n        if (compareAbs(a, b) >= 0) {\r\n            value = subtract(a, b);\r\n        } else {\r\n            value = subtract(b, a);\r\n            sign = !sign;\r\n        }\r\n        value = arrayToSmall(value);\r\n        if (typeof value === \"number\") {\r\n            if (sign) value = -value;\r\n            return new SmallInteger(value);\r\n        }\r\n        return new BigInteger(value, sign);\r\n    }\r\n\r\n    function subtractSmall(a, b, sign) { // assumes a is array, b is number with 0 <= b < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            carry = -b,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < l; i++) {\r\n            difference = a[i] + carry;\r\n            carry = Math.floor(difference / base);\r\n            difference %= base;\r\n            r[i] = difference < 0 ? difference + base : difference;\r\n        }\r\n        r = arrayToSmall(r);\r\n        if (typeof r === \"number\") {\r\n            if (sign) r = -r;\r\n            return new SmallInteger(r);\r\n        } return new BigInteger(r, sign);\r\n    }\r\n\r\n    BigInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall)\r\n            return subtractSmall(a, Math.abs(b), this.sign);\r\n        return subtractAny(a, b, this.sign);\r\n    };\r\n    BigInteger.prototype.minus = BigInteger.prototype.subtract;\r\n\r\n    SmallInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            return new SmallInteger(a - b);\r\n        }\r\n        return subtractSmall(b, Math.abs(a), a >= 0);\r\n    };\r\n    SmallInteger.prototype.minus = SmallInteger.prototype.subtract;\r\n\r\n    NativeBigInt.prototype.subtract = function (v) {\r\n        return new NativeBigInt(this.value - parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.minus = NativeBigInt.prototype.subtract;\r\n\r\n    BigInteger.prototype.negate = function () {\r\n        return new BigInteger(this.value, !this.sign);\r\n    };\r\n    SmallInteger.prototype.negate = function () {\r\n        var sign = this.sign;\r\n        var small = new SmallInteger(-this.value);\r\n        small.sign = !sign;\r\n        return small;\r\n    };\r\n    NativeBigInt.prototype.negate = function () {\r\n        return new NativeBigInt(-this.value);\r\n    }\r\n\r\n    BigInteger.prototype.abs = function () {\r\n        return new BigInteger(this.value, false);\r\n    };\r\n    SmallInteger.prototype.abs = function () {\r\n        return new SmallInteger(Math.abs(this.value));\r\n    };\r\n    NativeBigInt.prototype.abs = function () {\r\n        return new NativeBigInt(this.value >= 0 ? this.value : -this.value);\r\n    }\r\n\r\n\r\n    function multiplyLong(a, b) {\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            l = a_l + b_l,\r\n            r = createArray(l),\r\n            base = BASE,\r\n            product, carry, i, a_i, b_j;\r\n        for (i = 0; i < a_l; ++i) {\r\n            a_i = a[i];\r\n            for (var j = 0; j < b_l; ++j) {\r\n                b_j = b[j];\r\n                product = a_i * b_j + r[i + j];\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n                r[i + j + 1] += carry;\r\n            }\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function multiplySmall(a, b) { // assumes a is array, b is number with |b| < BASE\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            carry = 0,\r\n            product, i;\r\n        for (i = 0; i < l; i++) {\r\n            product = a[i] * b + carry;\r\n            carry = Math.floor(product / base);\r\n            r[i] = product - carry * base;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    function shiftLeft(x, n) {\r\n        var r = [];\r\n        while (n-- > 0) r.push(0);\r\n        return r.concat(x);\r\n    }\r\n\r\n    function multiplyKaratsuba(x, y) {\r\n        var n = Math.max(x.length, y.length);\r\n\r\n        if (n <= 30) return multiplyLong(x, y);\r\n        n = Math.ceil(n / 2);\r\n\r\n        var b = x.slice(n),\r\n            a = x.slice(0, n),\r\n            d = y.slice(n),\r\n            c = y.slice(0, n);\r\n\r\n        var ac = multiplyKaratsuba(a, c),\r\n            bd = multiplyKaratsuba(b, d),\r\n            abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));\r\n\r\n        var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));\r\n        trim(product);\r\n        return product;\r\n    }\r\n\r\n    // The following function is derived from a surface fit of a graph plotting the performance difference\r\n    // between long multiplication and karatsuba multiplication versus the lengths of the two arrays.\r\n    function useKaratsuba(l1, l2) {\r\n        return -0.012 * l1 - 0.012 * l2 + 0.000015 * l1 * l2 > 0;\r\n    }\r\n\r\n    BigInteger.prototype.multiply = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value, b = n.value,\r\n            sign = this.sign !== n.sign,\r\n            abs;\r\n        if (n.isSmall) {\r\n            if (b === 0) return Integer[0];\r\n            if (b === 1) return this;\r\n            if (b === -1) return this.negate();\r\n            abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                return new BigInteger(multiplySmall(a, abs), sign);\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        if (useKaratsuba(a.length, b.length)) // Karatsuba is only faster for certain array sizes\r\n            return new BigInteger(multiplyKaratsuba(a, b), sign);\r\n        return new BigInteger(multiplyLong(a, b), sign);\r\n    };\r\n\r\n    BigInteger.prototype.times = BigInteger.prototype.multiply;\r\n\r\n    function multiplySmallAndArray(a, b, sign) { // a >= 0\r\n        if (a < BASE) {\r\n            return new BigInteger(multiplySmall(b, a), sign);\r\n        }\r\n        return new BigInteger(multiplyLong(b, smallToArray(a)), sign);\r\n    }\r\n    SmallInteger.prototype._multiplyBySmall = function (a) {\r\n        if (isPrecise(a.value * this.value)) {\r\n            return new SmallInteger(a.value * this.value);\r\n        }\r\n        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign);\r\n    };\r\n    BigInteger.prototype._multiplyBySmall = function (a) {\r\n        if (a.value === 0) return Integer[0];\r\n        if (a.value === 1) return this;\r\n        if (a.value === -1) return this.negate();\r\n        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign);\r\n    };\r\n    SmallInteger.prototype.multiply = function (v) {\r\n        return parseValue(v)._multiplyBySmall(this);\r\n    };\r\n    SmallInteger.prototype.times = SmallInteger.prototype.multiply;\r\n\r\n    NativeBigInt.prototype.multiply = function (v) {\r\n        return new NativeBigInt(this.value * parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.times = NativeBigInt.prototype.multiply;\r\n\r\n    function square(a) {\r\n        //console.assert(2 * BASE * BASE < MAX_INT);\r\n        var l = a.length,\r\n            r = createArray(l + l),\r\n            base = BASE,\r\n            product, carry, i, a_i, a_j;\r\n        for (i = 0; i < l; i++) {\r\n            a_i = a[i];\r\n            carry = 0 - a_i * a_i;\r\n            for (var j = i; j < l; j++) {\r\n                a_j = a[j];\r\n                product = 2 * (a_i * a_j) + r[i + j] + carry;\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n            }\r\n            r[i + l] = carry;\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.square = function () {\r\n        return new BigInteger(square(this.value), false);\r\n    };\r\n\r\n    SmallInteger.prototype.square = function () {\r\n        var value = this.value * this.value;\r\n        if (isPrecise(value)) return new SmallInteger(value);\r\n        return new BigInteger(square(smallToArray(Math.abs(this.value))), false);\r\n    };\r\n\r\n    NativeBigInt.prototype.square = function (v) {\r\n        return new NativeBigInt(this.value * this.value);\r\n    }\r\n\r\n    function divMod1(a, b) { // Left over from previous version. Performs faster than divMod2 on smaller input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            base = BASE,\r\n            result = createArray(b.length),\r\n            divisorMostSignificantDigit = b[b_l - 1],\r\n            // normalization\r\n            lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),\r\n            remainder = multiplySmall(a, lambda),\r\n            divisor = multiplySmall(b, lambda),\r\n            quotientDigit, shift, carry, borrow, i, l, q;\r\n        if (remainder.length <= a_l) remainder.push(0);\r\n        divisor.push(0);\r\n        divisorMostSignificantDigit = divisor[b_l - 1];\r\n        for (shift = a_l - b_l; shift >= 0; shift--) {\r\n            quotientDigit = base - 1;\r\n            if (remainder[shift + b_l] !== divisorMostSignificantDigit) {\r\n                quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit);\r\n            }\r\n            // quotientDigit <= base - 1\r\n            carry = 0;\r\n            borrow = 0;\r\n            l = divisor.length;\r\n            for (i = 0; i < l; i++) {\r\n                carry += quotientDigit * divisor[i];\r\n                q = Math.floor(carry / base);\r\n                borrow += remainder[shift + i] - (carry - q * base);\r\n                carry = q;\r\n                if (borrow < 0) {\r\n                    remainder[shift + i] = borrow + base;\r\n                    borrow = -1;\r\n                } else {\r\n                    remainder[shift + i] = borrow;\r\n                    borrow = 0;\r\n                }\r\n            }\r\n            while (borrow !== 0) {\r\n                quotientDigit -= 1;\r\n                carry = 0;\r\n                for (i = 0; i < l; i++) {\r\n                    carry += remainder[shift + i] - base + divisor[i];\r\n                    if (carry < 0) {\r\n                        remainder[shift + i] = carry + base;\r\n                        carry = 0;\r\n                    } else {\r\n                        remainder[shift + i] = carry;\r\n                        carry = 1;\r\n                    }\r\n                }\r\n                borrow += carry;\r\n            }\r\n            result[shift] = quotientDigit;\r\n        }\r\n        // denormalization\r\n        remainder = divModSmall(remainder, lambda)[0];\r\n        return [arrayToSmall(result), arrayToSmall(remainder)];\r\n    }\r\n\r\n    function divMod2(a, b) { // Implementation idea shamelessly stolen from Silent Matt's library http://silentmatt.com/biginteger/\r\n        // Performs faster than divMod1 on larger input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            result = [],\r\n            part = [],\r\n            base = BASE,\r\n            guess, xlen, highx, highy, check;\r\n        while (a_l) {\r\n            part.unshift(a[--a_l]);\r\n            trim(part);\r\n            if (compareAbs(part, b) < 0) {\r\n                result.push(0);\r\n                continue;\r\n            }\r\n            xlen = part.length;\r\n            highx = part[xlen - 1] * base + part[xlen - 2];\r\n            highy = b[b_l - 1] * base + b[b_l - 2];\r\n            if (xlen > b_l) {\r\n                highx = (highx + 1) * base;\r\n            }\r\n            guess = Math.ceil(highx / highy);\r\n            do {\r\n                check = multiplySmall(b, guess);\r\n                if (compareAbs(check, part) <= 0) break;\r\n                guess--;\r\n            } while (guess);\r\n            result.push(guess);\r\n            part = subtract(part, check);\r\n        }\r\n        result.reverse();\r\n        return [arrayToSmall(result), arrayToSmall(part)];\r\n    }\r\n\r\n    function divModSmall(value, lambda) {\r\n        var length = value.length,\r\n            quotient = createArray(length),\r\n            base = BASE,\r\n            i, q, remainder, divisor;\r\n        remainder = 0;\r\n        for (i = length - 1; i >= 0; --i) {\r\n            divisor = remainder * base + value[i];\r\n            q = truncate(divisor / lambda);\r\n            remainder = divisor - q * lambda;\r\n            quotient[i] = q | 0;\r\n        }\r\n        return [quotient, remainder | 0];\r\n    }\r\n\r\n    function divModAny(self, v) {\r\n        var value, n = parseValue(v);\r\n        if (supportsNativeBigInt) {\r\n            return [new NativeBigInt(self.value / n.value), new NativeBigInt(self.value % n.value)];\r\n        }\r\n        var a = self.value, b = n.value;\r\n        var quotient;\r\n        if (b === 0) throw new Error(\"Cannot divide by zero\");\r\n        if (self.isSmall) {\r\n            if (n.isSmall) {\r\n                return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)];\r\n            }\r\n            return [Integer[0], self];\r\n        }\r\n        if (n.isSmall) {\r\n            if (b === 1) return [self, Integer[0]];\r\n            if (b == -1) return [self.negate(), Integer[0]];\r\n            var abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                value = divModSmall(a, abs);\r\n                quotient = arrayToSmall(value[0]);\r\n                var remainder = value[1];\r\n                if (self.sign) remainder = -remainder;\r\n                if (typeof quotient === \"number\") {\r\n                    if (self.sign !== n.sign) quotient = -quotient;\r\n                    return [new SmallInteger(quotient), new SmallInteger(remainder)];\r\n                }\r\n                return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)];\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        var comparison = compareAbs(a, b);\r\n        if (comparison === -1) return [Integer[0], self];\r\n        if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];\r\n\r\n        // divMod1 is faster on smaller input sizes\r\n        if (a.length + b.length <= 200)\r\n            value = divMod1(a, b);\r\n        else value = divMod2(a, b);\r\n\r\n        quotient = value[0];\r\n        var qSign = self.sign !== n.sign,\r\n            mod = value[1],\r\n            mSign = self.sign;\r\n        if (typeof quotient === \"number\") {\r\n            if (qSign) quotient = -quotient;\r\n            quotient = new SmallInteger(quotient);\r\n        } else quotient = new BigInteger(quotient, qSign);\r\n        if (typeof mod === \"number\") {\r\n            if (mSign) mod = -mod;\r\n            mod = new SmallInteger(mod);\r\n        } else mod = new BigInteger(mod, mSign);\r\n        return [quotient, mod];\r\n    }\r\n\r\n    BigInteger.prototype.divmod = function (v) {\r\n        var result = divModAny(this, v);\r\n        return {\r\n            quotient: result[0],\r\n            remainder: result[1]\r\n        };\r\n    };\r\n    NativeBigInt.prototype.divmod = SmallInteger.prototype.divmod = BigInteger.prototype.divmod;\r\n\r\n\r\n    BigInteger.prototype.divide = function (v) {\r\n        return divModAny(this, v)[0];\r\n    };\r\n    NativeBigInt.prototype.over = NativeBigInt.prototype.divide = function (v) {\r\n        return new NativeBigInt(this.value / parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;\r\n\r\n    BigInteger.prototype.mod = function (v) {\r\n        return divModAny(this, v)[1];\r\n    };\r\n    NativeBigInt.prototype.mod = NativeBigInt.prototype.remainder = function (v) {\r\n        return new NativeBigInt(this.value % parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;\r\n\r\n    BigInteger.prototype.pow = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value,\r\n            value, x, y;\r\n        if (b === 0) return Integer[1];\r\n        if (a === 0) return Integer[0];\r\n        if (a === 1) return Integer[1];\r\n        if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.sign) {\r\n            return Integer[0];\r\n        }\r\n        if (!n.isSmall) throw new Error(\"The exponent \" + n.toString() + \" is too large.\");\r\n        if (this.isSmall) {\r\n            if (isPrecise(value = Math.pow(a, b)))\r\n                return new SmallInteger(truncate(value));\r\n        }\r\n        x = this;\r\n        y = Integer[1];\r\n        while (true) {\r\n            if (b & 1 === 1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === 0) break;\r\n            b /= 2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    };\r\n    SmallInteger.prototype.pow = BigInteger.prototype.pow;\r\n\r\n    NativeBigInt.prototype.pow = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value, b = n.value;\r\n        var _0 = BigInt(0), _1 = BigInt(1), _2 = BigInt(2);\r\n        if (b === _0) return Integer[1];\r\n        if (a === _0) return Integer[0];\r\n        if (a === _1) return Integer[1];\r\n        if (a === BigInt(-1)) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.isNegative()) return new NativeBigInt(_0);\r\n        var x = this;\r\n        var y = Integer[1];\r\n        while (true) {\r\n            if ((b & _1) === _1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === _0) break;\r\n            b /= _2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    }\r\n\r\n    BigInteger.prototype.modPow = function (exp, mod) {\r\n        exp = parseValue(exp);\r\n        mod = parseValue(mod);\r\n        if (mod.isZero()) throw new Error(\"Cannot take modPow with modulus 0\");\r\n        var r = Integer[1],\r\n            base = this.mod(mod);\r\n        if (exp.isNegative()) {\r\n            exp = exp.multiply(Integer[-1]);\r\n            base = base.modInv(mod);\r\n        }\r\n        while (exp.isPositive()) {\r\n            if (base.isZero()) return Integer[0];\r\n            if (exp.isOdd()) r = r.multiply(base).mod(mod);\r\n            exp = exp.divide(2);\r\n            base = base.square().mod(mod);\r\n        }\r\n        return r;\r\n    };\r\n    NativeBigInt.prototype.modPow = SmallInteger.prototype.modPow = BigInteger.prototype.modPow;\r\n\r\n    function compareAbs(a, b) {\r\n        if (a.length !== b.length) {\r\n            return a.length > b.length ? 1 : -1;\r\n        }\r\n        for (var i = a.length - 1; i >= 0; i--) {\r\n            if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    BigInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) return 1;\r\n        return compareAbs(a, b);\r\n    };\r\n    SmallInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = Math.abs(this.value),\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            b = Math.abs(b);\r\n            return a === b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        return -1;\r\n    };\r\n    NativeBigInt.prototype.compareAbs = function (v) {\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        a = a >= 0 ? a : -a;\r\n        b = b >= 0 ? b : -b;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n\r\n    BigInteger.prototype.compare = function (v) {\r\n        // See discussion about comparison with Infinity:\r\n        // https://github.com/peterolson/BigInteger.js/issues/61\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (this.sign !== n.sign) {\r\n            return n.sign ? 1 : -1;\r\n        }\r\n        if (n.isSmall) {\r\n            return this.sign ? -1 : 1;\r\n        }\r\n        return compareAbs(a, b) * (this.sign ? -1 : 1);\r\n    };\r\n    BigInteger.prototype.compareTo = BigInteger.prototype.compare;\r\n\r\n    SmallInteger.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            return a == b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        if (a < 0 !== n.sign) {\r\n            return a < 0 ? -1 : 1;\r\n        }\r\n        return a < 0 ? 1 : -1;\r\n    };\r\n    SmallInteger.prototype.compareTo = SmallInteger.prototype.compare;\r\n\r\n    NativeBigInt.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n    NativeBigInt.prototype.compareTo = NativeBigInt.prototype.compare;\r\n\r\n    BigInteger.prototype.equals = function (v) {\r\n        return this.compare(v) === 0;\r\n    };\r\n    NativeBigInt.prototype.eq = NativeBigInt.prototype.equals = SmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;\r\n\r\n    BigInteger.prototype.notEquals = function (v) {\r\n        return this.compare(v) !== 0;\r\n    };\r\n    NativeBigInt.prototype.neq = NativeBigInt.prototype.notEquals = SmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;\r\n\r\n    BigInteger.prototype.greater = function (v) {\r\n        return this.compare(v) > 0;\r\n    };\r\n    NativeBigInt.prototype.gt = NativeBigInt.prototype.greater = SmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;\r\n\r\n    BigInteger.prototype.lesser = function (v) {\r\n        return this.compare(v) < 0;\r\n    };\r\n    NativeBigInt.prototype.lt = NativeBigInt.prototype.lesser = SmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;\r\n\r\n    BigInteger.prototype.greaterOrEquals = function (v) {\r\n        return this.compare(v) >= 0;\r\n    };\r\n    NativeBigInt.prototype.geq = NativeBigInt.prototype.greaterOrEquals = SmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;\r\n\r\n    BigInteger.prototype.lesserOrEquals = function (v) {\r\n        return this.compare(v) <= 0;\r\n    };\r\n    NativeBigInt.prototype.leq = NativeBigInt.prototype.lesserOrEquals = SmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;\r\n\r\n    BigInteger.prototype.isEven = function () {\r\n        return (this.value[0] & 1) === 0;\r\n    };\r\n    SmallInteger.prototype.isEven = function () {\r\n        return (this.value & 1) === 0;\r\n    };\r\n    NativeBigInt.prototype.isEven = function () {\r\n        return (this.value & BigInt(1)) === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isOdd = function () {\r\n        return (this.value[0] & 1) === 1;\r\n    };\r\n    SmallInteger.prototype.isOdd = function () {\r\n        return (this.value & 1) === 1;\r\n    };\r\n    NativeBigInt.prototype.isOdd = function () {\r\n        return (this.value & BigInt(1)) === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isPositive = function () {\r\n        return !this.sign;\r\n    };\r\n    SmallInteger.prototype.isPositive = function () {\r\n        return this.value > 0;\r\n    };\r\n    NativeBigInt.prototype.isPositive = SmallInteger.prototype.isPositive;\r\n\r\n    BigInteger.prototype.isNegative = function () {\r\n        return this.sign;\r\n    };\r\n    SmallInteger.prototype.isNegative = function () {\r\n        return this.value < 0;\r\n    };\r\n    NativeBigInt.prototype.isNegative = SmallInteger.prototype.isNegative;\r\n\r\n    BigInteger.prototype.isUnit = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isUnit = function () {\r\n        return Math.abs(this.value) === 1;\r\n    };\r\n    NativeBigInt.prototype.isUnit = function () {\r\n        return this.abs().value === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isZero = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isZero = function () {\r\n        return this.value === 0;\r\n    };\r\n    NativeBigInt.prototype.isZero = function () {\r\n        return this.value === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isDivisibleBy = function (v) {\r\n        var n = parseValue(v);\r\n        if (n.isZero()) return false;\r\n        if (n.isUnit()) return true;\r\n        if (n.compareAbs(2) === 0) return this.isEven();\r\n        return this.mod(n).isZero();\r\n    };\r\n    NativeBigInt.prototype.isDivisibleBy = SmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;\r\n\r\n    function isBasicPrime(v) {\r\n        var n = v.abs();\r\n        if (n.isUnit()) return false;\r\n        if (n.equals(2) || n.equals(3) || n.equals(5)) return true;\r\n        if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;\r\n        if (n.lesser(49)) return true;\r\n        // we don't know if it's prime: let the other functions figure it out\r\n    }\r\n\r\n    function millerRabinTest(n, a) {\r\n        var nPrev = n.prev(),\r\n            b = nPrev,\r\n            r = 0,\r\n            d, t, i, x;\r\n        while (b.isEven()) b = b.divide(2), r++;\r\n        next: for (i = 0; i < a.length; i++) {\r\n            if (n.lesser(a[i])) continue;\r\n            x = bigInt(a[i]).modPow(b, n);\r\n            if (x.isUnit() || x.equals(nPrev)) continue;\r\n            for (d = r - 1; d != 0; d--) {\r\n                x = x.square().mod(n);\r\n                if (x.isUnit()) return false;\r\n                if (x.equals(nPrev)) continue next;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // Set \"strict\" to true to force GRH-supported lower bound of 2*log(N)^2\r\n    BigInteger.prototype.isPrime = function (strict) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var bits = n.bitLength();\r\n        if (bits <= 64)\r\n            return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);\r\n        var logN = Math.log(2) * bits.toJSNumber();\r\n        var t = Math.ceil((strict === true) ? (2 * Math.pow(logN, 2)) : logN);\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt(i + 2));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isPrime = SmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;\r\n\r\n    BigInteger.prototype.isProbablePrime = function (iterations, rng) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var t = iterations === undefined ? 5 : iterations;\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt.randBetween(2, n.minus(2), rng));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isProbablePrime = SmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;\r\n\r\n    BigInteger.prototype.modInv = function (n) {\r\n        var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;\r\n        while (!newR.isZero()) {\r\n            q = r.divide(newR);\r\n            lastT = t;\r\n            lastR = r;\r\n            t = newT;\r\n            r = newR;\r\n            newT = lastT.subtract(q.multiply(newT));\r\n            newR = lastR.subtract(q.multiply(newR));\r\n        }\r\n        if (!r.isUnit()) throw new Error(this.toString() + \" and \" + n.toString() + \" are not co-prime\");\r\n        if (t.compare(0) === -1) {\r\n            t = t.add(n);\r\n        }\r\n        if (this.isNegative()) {\r\n            return t.negate();\r\n        }\r\n        return t;\r\n    };\r\n\r\n    NativeBigInt.prototype.modInv = SmallInteger.prototype.modInv = BigInteger.prototype.modInv;\r\n\r\n    BigInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return subtractSmall(value, 1, this.sign);\r\n        }\r\n        return new BigInteger(addSmall(value, 1), this.sign);\r\n    };\r\n    SmallInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (value + 1 < MAX_INT) return new SmallInteger(value + 1);\r\n        return new BigInteger(MAX_INT_ARR, false);\r\n    };\r\n    NativeBigInt.prototype.next = function () {\r\n        return new NativeBigInt(this.value + BigInt(1));\r\n    }\r\n\r\n    BigInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return new BigInteger(addSmall(value, 1), true);\r\n        }\r\n        return subtractSmall(value, 1, this.sign);\r\n    };\r\n    SmallInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);\r\n        return new BigInteger(MAX_INT_ARR, true);\r\n    };\r\n    NativeBigInt.prototype.prev = function () {\r\n        return new NativeBigInt(this.value - BigInt(1));\r\n    }\r\n\r\n    var powersOfTwo = [1];\r\n    while (2 * powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);\r\n    var powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];\r\n\r\n    function shift_isSmall(n) {\r\n        return Math.abs(n) <= BASE;\r\n    }\r\n\r\n    BigInteger.prototype.shiftLeft = function (v) {\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftRight(-n);\r\n        var result = this;\r\n        if (result.isZero()) return result;\r\n        while (n >= powers2Length) {\r\n            result = result.multiply(highestPower2);\r\n            n -= powers2Length - 1;\r\n        }\r\n        return result.multiply(powersOfTwo[n]);\r\n    };\r\n    NativeBigInt.prototype.shiftLeft = SmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;\r\n\r\n    BigInteger.prototype.shiftRight = function (v) {\r\n        var remQuo;\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftLeft(-n);\r\n        var result = this;\r\n        while (n >= powers2Length) {\r\n            if (result.isZero() || (result.isNegative() && result.isUnit())) return result;\r\n            remQuo = divModAny(result, highestPower2);\r\n            result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n            n -= powers2Length - 1;\r\n        }\r\n        remQuo = divModAny(result, powersOfTwo[n]);\r\n        return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n    };\r\n    NativeBigInt.prototype.shiftRight = SmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;\r\n\r\n    function bitwise(x, y, fn) {\r\n        y = parseValue(y);\r\n        var xSign = x.isNegative(), ySign = y.isNegative();\r\n        var xRem = xSign ? x.not() : x,\r\n            yRem = ySign ? y.not() : y;\r\n        var xDigit = 0, yDigit = 0;\r\n        var xDivMod = null, yDivMod = null;\r\n        var result = [];\r\n        while (!xRem.isZero() || !yRem.isZero()) {\r\n            xDivMod = divModAny(xRem, highestPower2);\r\n            xDigit = xDivMod[1].toJSNumber();\r\n            if (xSign) {\r\n                xDigit = highestPower2 - 1 - xDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            yDivMod = divModAny(yRem, highestPower2);\r\n            yDigit = yDivMod[1].toJSNumber();\r\n            if (ySign) {\r\n                yDigit = highestPower2 - 1 - yDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            xRem = xDivMod[0];\r\n            yRem = yDivMod[0];\r\n            result.push(fn(xDigit, yDigit));\r\n        }\r\n        var sum = fn(xSign ? 1 : 0, ySign ? 1 : 0) !== 0 ? bigInt(-1) : bigInt(0);\r\n        for (var i = result.length - 1; i >= 0; i -= 1) {\r\n            sum = sum.multiply(highestPower2).add(bigInt(result[i]));\r\n        }\r\n        return sum;\r\n    }\r\n\r\n    BigInteger.prototype.not = function () {\r\n        return this.negate().prev();\r\n    };\r\n    NativeBigInt.prototype.not = SmallInteger.prototype.not = BigInteger.prototype.not;\r\n\r\n    BigInteger.prototype.and = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a & b; });\r\n    };\r\n    NativeBigInt.prototype.and = SmallInteger.prototype.and = BigInteger.prototype.and;\r\n\r\n    BigInteger.prototype.or = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a | b; });\r\n    };\r\n    NativeBigInt.prototype.or = SmallInteger.prototype.or = BigInteger.prototype.or;\r\n\r\n    BigInteger.prototype.xor = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a ^ b; });\r\n    };\r\n    NativeBigInt.prototype.xor = SmallInteger.prototype.xor = BigInteger.prototype.xor;\r\n\r\n    var LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;\r\n    function roughLOB(n) { // get lowestOneBit (rough)\r\n        // SmallInteger: return Min(lowestOneBit(n), 1 << 30)\r\n        // BigInteger: return Min(lowestOneBit(n), 1 << 14) [BASE=1e7]\r\n        var v = n.value,\r\n            x = typeof v === \"number\" ? v | LOBMASK_I :\r\n                typeof v === \"bigint\" ? v | BigInt(LOBMASK_I) :\r\n                    v[0] + v[1] * BASE | LOBMASK_BI;\r\n        return x & -x;\r\n    }\r\n\r\n    function integerLogarithm(value, base) {\r\n        if (base.compareTo(value) <= 0) {\r\n            var tmp = integerLogarithm(value, base.square(base));\r\n            var p = tmp.p;\r\n            var e = tmp.e;\r\n            var t = p.multiply(base);\r\n            return t.compareTo(value) <= 0 ? { p: t, e: e * 2 + 1 } : { p: p, e: e * 2 };\r\n        }\r\n        return { p: bigInt(1), e: 0 };\r\n    }\r\n\r\n    BigInteger.prototype.bitLength = function () {\r\n        var n = this;\r\n        if (n.compareTo(bigInt(0)) < 0) {\r\n            n = n.negate().subtract(bigInt(1));\r\n        }\r\n        if (n.compareTo(bigInt(0)) === 0) {\r\n            return bigInt(0);\r\n        }\r\n        return bigInt(integerLogarithm(n, bigInt(2)).e).add(bigInt(1));\r\n    }\r\n    NativeBigInt.prototype.bitLength = SmallInteger.prototype.bitLength = BigInteger.prototype.bitLength;\r\n\r\n    function max(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.greater(b) ? a : b;\r\n    }\r\n    function min(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.lesser(b) ? a : b;\r\n    }\r\n    function gcd(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        if (a.equals(b)) return a;\r\n        if (a.isZero()) return b;\r\n        if (b.isZero()) return a;\r\n        var c = Integer[1], d, t;\r\n        while (a.isEven() && b.isEven()) {\r\n            d = min(roughLOB(a), roughLOB(b));\r\n            a = a.divide(d);\r\n            b = b.divide(d);\r\n            c = c.multiply(d);\r\n        }\r\n        while (a.isEven()) {\r\n            a = a.divide(roughLOB(a));\r\n        }\r\n        do {\r\n            while (b.isEven()) {\r\n                b = b.divide(roughLOB(b));\r\n            }\r\n            if (a.greater(b)) {\r\n                t = b; b = a; a = t;\r\n            }\r\n            b = b.subtract(a);\r\n        } while (!b.isZero());\r\n        return c.isUnit() ? a : a.multiply(c);\r\n    }\r\n    function lcm(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        return a.divide(gcd(a, b)).multiply(b);\r\n    }\r\n    function randBetween(a, b, rng) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        var usedRNG = rng || Math.random;\r\n        var low = min(a, b), high = max(a, b);\r\n        var range = high.subtract(low).add(1);\r\n        if (range.isSmall) return low.add(Math.floor(usedRNG() * range));\r\n        var digits = toBase(range, BASE).value;\r\n        var result = [], restricted = true;\r\n        for (var i = 0; i < digits.length; i++) {\r\n            var top = restricted ? digits[i] + (i + 1 < digits.length ? digits[i + 1] / BASE : 0) : BASE;\r\n            var digit = truncate(usedRNG() * top);\r\n            result.push(digit);\r\n            if (digit < digits[i]) restricted = false;\r\n        }\r\n        return low.add(Integer.fromArray(result, BASE, false));\r\n    }\r\n\r\n    var parseBase = function (text, base, alphabet, caseSensitive) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        text = String(text);\r\n        if (!caseSensitive) {\r\n            text = text.toLowerCase();\r\n            alphabet = alphabet.toLowerCase();\r\n        }\r\n        var length = text.length;\r\n        var i;\r\n        var absBase = Math.abs(base);\r\n        var alphabetValues = {};\r\n        for (i = 0; i < alphabet.length; i++) {\r\n            alphabetValues[alphabet[i]] = i;\r\n        }\r\n        for (i = 0; i < length; i++) {\r\n            var c = text[i];\r\n            if (c === \"-\") continue;\r\n            if (c in alphabetValues) {\r\n                if (alphabetValues[c] >= absBase) {\r\n                    if (c === \"1\" && absBase === 1) continue;\r\n                    throw new Error(c + \" is not a valid digit in base \" + base + \".\");\r\n                }\r\n            }\r\n        }\r\n        base = parseValue(base);\r\n        var digits = [];\r\n        var isNegative = text[0] === \"-\";\r\n        for (i = isNegative ? 1 : 0; i < text.length; i++) {\r\n            var c = text[i];\r\n            if (c in alphabetValues) digits.push(parseValue(alphabetValues[c]));\r\n            else if (c === \"<\") {\r\n                var start = i;\r\n                do { i++; } while (text[i] !== \">\" && i < text.length);\r\n                digits.push(parseValue(text.slice(start + 1, i)));\r\n            }\r\n            else throw new Error(c + \" is not a valid character\");\r\n        }\r\n        return parseBaseFromArray(digits, base, isNegative);\r\n    };\r\n\r\n    function parseBaseFromArray(digits, base, isNegative) {\r\n        var val = Integer[0], pow = Integer[1], i;\r\n        for (i = digits.length - 1; i >= 0; i--) {\r\n            val = val.add(digits[i].times(pow));\r\n            pow = pow.times(base);\r\n        }\r\n        return isNegative ? val.negate() : val;\r\n    }\r\n\r\n    function stringify(digit, alphabet) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        if (digit < alphabet.length) {\r\n            return alphabet[digit];\r\n        }\r\n        return \"<\" + digit + \">\";\r\n    }\r\n\r\n    function toBase(n, base) {\r\n        base = bigInt(base);\r\n        if (base.isZero()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            throw new Error(\"Cannot convert nonzero numbers to base 0.\");\r\n        }\r\n        if (base.equals(-1)) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            if (n.isNegative())\r\n                return {\r\n                    value: [].concat.apply([], Array.apply(null, Array(-n.toJSNumber()))\r\n                        .map(Array.prototype.valueOf, [1, 0])\r\n                    ),\r\n                    isNegative: false\r\n                };\r\n\r\n            var arr = Array.apply(null, Array(n.toJSNumber() - 1))\r\n                .map(Array.prototype.valueOf, [0, 1]);\r\n            arr.unshift([1]);\r\n            return {\r\n                value: [].concat.apply([], arr),\r\n                isNegative: false\r\n            };\r\n        }\r\n\r\n        var neg = false;\r\n        if (n.isNegative() && base.isPositive()) {\r\n            neg = true;\r\n            n = n.abs();\r\n        }\r\n        if (base.isUnit()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n\r\n            return {\r\n                value: Array.apply(null, Array(n.toJSNumber()))\r\n                    .map(Number.prototype.valueOf, 1),\r\n                isNegative: neg\r\n            };\r\n        }\r\n        var out = [];\r\n        var left = n, divmod;\r\n        while (left.isNegative() || left.compareAbs(base) >= 0) {\r\n            divmod = left.divmod(base);\r\n            left = divmod.quotient;\r\n            var digit = divmod.remainder;\r\n            if (digit.isNegative()) {\r\n                digit = base.minus(digit).abs();\r\n                left = left.next();\r\n            }\r\n            out.push(digit.toJSNumber());\r\n        }\r\n        out.push(left.toJSNumber());\r\n        return { value: out.reverse(), isNegative: neg };\r\n    }\r\n\r\n    function toBaseString(n, base, alphabet) {\r\n        var arr = toBase(n, base);\r\n        return (arr.isNegative ? \"-\" : \"\") + arr.value.map(function (x) {\r\n            return stringify(x, alphabet);\r\n        }).join('');\r\n    }\r\n\r\n    BigInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    SmallInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    NativeBigInt.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    BigInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix !== 10 || alphabet) return toBaseString(this, radix, alphabet);\r\n        var v = this.value, l = v.length, str = String(v[--l]), zeros = \"0000000\", digit;\r\n        while (--l >= 0) {\r\n            digit = String(v[l]);\r\n            str += zeros.slice(digit.length) + digit;\r\n        }\r\n        var sign = this.sign ? \"-\" : \"\";\r\n        return sign + str;\r\n    };\r\n\r\n    SmallInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix != 10 || alphabet) return toBaseString(this, radix, alphabet);\r\n        return String(this.value);\r\n    };\r\n\r\n    NativeBigInt.prototype.toString = SmallInteger.prototype.toString;\r\n\r\n    NativeBigInt.prototype.toJSON = BigInteger.prototype.toJSON = SmallInteger.prototype.toJSON = function () { return this.toString(); }\r\n\r\n    BigInteger.prototype.valueOf = function () {\r\n        return parseInt(this.toString(), 10);\r\n    };\r\n    BigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;\r\n\r\n    SmallInteger.prototype.valueOf = function () {\r\n        return this.value;\r\n    };\r\n    SmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;\r\n    NativeBigInt.prototype.valueOf = NativeBigInt.prototype.toJSNumber = function () {\r\n        return parseInt(this.toString(), 10);\r\n    }\r\n\r\n    function parseStringValue(v) {\r\n        if (isPrecise(+v)) {\r\n            var x = +v;\r\n            if (x === truncate(x))\r\n                return supportsNativeBigInt ? new NativeBigInt(BigInt(x)) : new SmallInteger(x);\r\n            throw new Error(\"Invalid integer: \" + v);\r\n        }\r\n        var sign = v[0] === \"-\";\r\n        if (sign) v = v.slice(1);\r\n        var split = v.split(/e/i);\r\n        if (split.length > 2) throw new Error(\"Invalid integer: \" + split.join(\"e\"));\r\n        if (split.length === 2) {\r\n            var exp = split[1];\r\n            if (exp[0] === \"+\") exp = exp.slice(1);\r\n            exp = +exp;\r\n            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error(\"Invalid integer: \" + exp + \" is not a valid exponent.\");\r\n            var text = split[0];\r\n            var decimalPlace = text.indexOf(\".\");\r\n            if (decimalPlace >= 0) {\r\n                exp -= text.length - decimalPlace - 1;\r\n                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1);\r\n            }\r\n            if (exp < 0) throw new Error(\"Cannot include negative exponent part for integers\");\r\n            text += (new Array(exp + 1)).join(\"0\");\r\n            v = text;\r\n        }\r\n        var isValid = /^([0-9][0-9]*)$/.test(v);\r\n        if (!isValid) throw new Error(\"Invalid integer: \" + v);\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(sign ? \"-\" + v : v));\r\n        }\r\n        var r = [], max = v.length, l = LOG_BASE, min = max - l;\r\n        while (max > 0) {\r\n            r.push(+v.slice(min, max));\r\n            min -= l;\r\n            if (min < 0) min = 0;\r\n            max -= l;\r\n        }\r\n        trim(r);\r\n        return new BigInteger(r, sign);\r\n    }\r\n\r\n    function parseNumberValue(v) {\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(v));\r\n        }\r\n        if (isPrecise(v)) {\r\n            if (v !== truncate(v)) throw new Error(v + \" is not an integer.\");\r\n            return new SmallInteger(v);\r\n        }\r\n        return parseStringValue(v.toString());\r\n    }\r\n\r\n    function parseValue(v) {\r\n        if (typeof v === \"number\") {\r\n            return parseNumberValue(v);\r\n        }\r\n        if (typeof v === \"string\") {\r\n            return parseStringValue(v);\r\n        }\r\n        if (typeof v === \"bigint\") {\r\n            return new NativeBigInt(v);\r\n        }\r\n        return v;\r\n    }\r\n    // Pre-define numbers in range [-999,999]\r\n    for (var i = 0; i < 1000; i++) {\r\n        Integer[i] = parseValue(i);\r\n        if (i > 0) Integer[-i] = parseValue(-i);\r\n    }\r\n    // Backwards compatibility\r\n    Integer.one = Integer[1];\r\n    Integer.zero = Integer[0];\r\n    Integer.minusOne = Integer[-1];\r\n    Integer.max = max;\r\n    Integer.min = min;\r\n    Integer.gcd = gcd;\r\n    Integer.lcm = lcm;\r\n    Integer.isInstance = function (x) { return x instanceof BigInteger || x instanceof SmallInteger || x instanceof NativeBigInt; };\r\n    Integer.randBetween = randBetween;\r\n\r\n    Integer.fromArray = function (digits, base, isNegative) {\r\n        return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative);\r\n    };\r\n\r\n    return Integer;\r\n})();\r\n\r\n// Node.js check\r\nif (typeof module !== \"undefined\" && module.hasOwnProperty(\"exports\")) {\r\n    module.exports = bigInt;\r\n}\r\n\r\n//amd check\r\nif (typeof define === \"function\" && define.amd) {\r\n    define( function () {\r\n        return bigInt;\r\n    });\r\n}\r\n","import bigInt from 'big-integer';\n\nexport const safeBigInt = bigInt(Number.MAX_SAFE_INTEGER);\nexport const ulongBigInt = bigInt(bigInt[2]).pow(64);\nexport const longBigInt = ulongBigInt.divide(bigInt[2]);\n","import bigInt from 'big-integer';\nimport {longBigInt, ulongBigInt} from '@helpers/bigInt/bigIntConstants';\n\nexport function bigIntFromBytes(bytes: Uint8Array | number[], base = 256) {\n  return bigInt.fromArray(bytes instanceof Uint8Array ? [...bytes] : bytes, base);\n}\n\nexport function bigIntToBytes(bigInt: bigInt.BigInteger) {\n  return new Uint8Array(bigInt.toArray(256).value);\n}\n\nexport function bigIntToSigned(bigInt: bigInt.BigInteger) {\n  return bigInt.greater(longBigInt) ? bigInt.minus(ulongBigInt) : bigInt;\n}\n\nexport function bigIntToUnsigned(bigInt: bigInt.BigInteger) {\n  return bigInt.isNegative() ? ulongBigInt.add(bigInt) : bigInt;\n}\n","import {bigIntFromBytes, bigIntToBytes} from '@helpers/bigInt/bigIntConversion';\n\nexport default function bytesModPow(bytes: number[] | Uint8Array, exp: number[] | Uint8Array, mod: number[] | Uint8Array) {\n  const bytesBigInt = bigIntFromBytes(bytes);\n  const expBigInt = bigIntFromBytes(exp);\n  const modBigInt = bigIntFromBytes(mod);\n  const resBigInt = bytesBigInt.modPow(expBigInt, modBigInt);\n  return bigIntToBytes(resBigInt);\n}\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) {\n        if (ev.data.length) {\n            strm.push(ev.data[0], ev.data[1]);\n            postMessage([ev.data[0].length]);\n        }\n        else\n            strm.flush();\n    };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else if (dat.length == 1) {\n            strm.queuedSize -= dat[0];\n            if (strm.ondrain)\n                strm.ondrain(dat[0]);\n        }\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.queuedSize = 0;\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        strm.queuedSize += d.length;\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n    if (flush) {\n        strm.flush = function () { w.postMessage([]); };\n    }\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            this.b.set(chunk.subarray(0, split), this.s.z);\n            this.s.z = this.b.length;\n            this.p(this.b, false);\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * deflated output for small inputs.\n     */\n    Deflate.prototype.flush = function () {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        this.p(this.b, false);\n        this.s.w = this.s.i, this.s.i -= 2;\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6, 1);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7, 0);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * GZIPped output for small inputs.\n     */\n    Gzip.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8, 1);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l && !final) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * zlibbed output for small inputs.\n     */\n    Zlib.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10, 1);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11, 0);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.o = StrmOpt.call(this, opts, cb) || {};\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n    }\n    // init substream\n    // overriden by AsyncDecompress\n    Decompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (dat, final) {\n            _this.ondata(dat, final);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o)\n                        : new this.Z(this.o);\n                this.i();\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        Decompress.call(this, opts, cb);\n        this.queuedSize = 0;\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n    }\n    AsyncDecompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        };\n        this.s.ondrain = function (size) {\n            _this.queuedSize -= size;\n            if (_this.ondrain)\n                _this.ondrain(size);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        this.queuedSize += chunk.length;\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this.ondata(err, dat, final);\n                    _this.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this.d & 1))\n                        return;\n                    _this.u.splice(-1, 1);\n                    _this.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this = this;\n        this.i = new Inflate(function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this.k[0] == chks_3 && _this.c)\n                                        _this.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    // Synchronously decompress under 512KB, or barely-compressed data\n                    if (su < 524288 || sc > 0.8 * su) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n","// export function gzipUncompress(bytes: ArrayBuffer, toString: true): string;\n\nimport {decompressSync} from 'fflate';\n// import dT from '@helpers/dT';\n\n// export function gzipUncompress(bytes: ArrayBuffer, toString?: false): Uint8Array;\nexport default function gzipUncompress(bytes: ArrayBuffer, toString?: boolean): string | Uint8Array {\n  // console.log(dT(), 'Gzip uncompress start');\n  const result = decompressSync(new Uint8Array(bytes));\n  // console.log(dT(), 'Gzip uncompress finish'/* , result */);\n  return toString ? new TextDecoder().decode(result) : result;\n}\n","const ctx = typeof(window) !== 'undefined' ? window : self;\n\nexport default ctx;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type SuperMessagePort from '@lib/superMessagePort';\nimport ctx from '@environment/ctx';\n\nexport default function listenMessagePort(\n  messagePort: SuperMessagePort<any, any, any>,\n  onConnect?: (source: MessageEventSource) => void,\n  onDisconnect?: (source: MessageEventSource) => void\n) {\n  const attachPort = (listenPort: any, sendPort: any) => {\n    messagePort.attachListenPort(listenPort);\n    sendPort && messagePort.attachSendPort(sendPort);\n    onConnect?.(listenPort);\n  };\n\n  messagePort.setOnPortDisconnect(onDisconnect);\n\n  if(typeof(SharedWorkerGlobalScope) !== 'undefined') {\n    (ctx as any as SharedWorkerGlobalScope).addEventListener('connect', (e) => attachPort(e.source, e.source));\n  } else if(typeof(ServiceWorkerGlobalScope) !== 'undefined') {\n    attachPort(ctx, null);\n  } else {\n    attachPort(ctx, ctx);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport type {TransportType} from '@lib/mtproto/dcConfigurator';\n\nconst Modes = {\n  test: location.search.indexOf('test=1') > 0/*  || true */,\n  debug: location.search.indexOf('debug=1') > 0,\n  http: false,\n  ssl: true, // location.search.indexOf('ssl=1') > 0 || location.protocol === 'https:' && location.search.indexOf('ssl=0') === -1,\n  asServiceWorker: !!import.meta.env.VITE_MTPROTO_SW,\n  transport: 'websocket' as TransportType,\n  noSharedWorker: location.search.indexOf('noSharedWorker=1') > 0,\n  noServiceWorker: location.search.indexOf('noServiceWorker=1') > 0,\n  multipleTransports: !!(import.meta.env.VITE_MTPROTO_AUTO && import.meta.env.VITE_MTPROTO_HAS_HTTP && import.meta.env.VITE_MTPROTO_HAS_WS) && location.search.indexOf('noMultipleTransports=1') === -1,\n  noPfs: true || location.search.indexOf('noPfs=1') > 0\n};\n\nif(import.meta.env.VITE_MTPROTO_HAS_HTTP) {\n  const httpOnly = Modes.http = location.search.indexOf('http=1') > 0;\n  if(httpOnly) {\n    Modes.multipleTransports = false;\n  }\n}\n\n// * start with HTTP first\nif(Modes.multipleTransports) {\n  Modes.http = true;\n}\n\nif(Modes.http) {\n  Modes.transport = 'https';\n}\n\nexport default Modes;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport Modes from '@config/modes';\n\nexport const IS_BETA = import.meta.env.DEV;\nexport const DEBUG = (IS_BETA || Modes.debug)/*  && false */;\nconst ctx: any = typeof(window) !== 'undefined' ? window : self;\nexport const MOUNT_CLASS_TO: any = DEBUG || true/*  && false */ ? ctx : {};\nexport default DEBUG;\n\n// let m = DEBUG;\n/* if(!DEBUG) {\n  ctx.sandpitTurtle = () => {\n    //if(!m) {\n      for(let i in MOUNT_CLASS_TO) {\n        ctx[i] = MOUNT_CLASS_TO[i];\n      }\n      //m = true;\n    //}\n\n    //DEBUG = !DEBUG;\n  };\n} */\n\n/* export const superDebug = (object: any, key: string) => {\n  var d = object[key];\n  var beforeStr = '', afterStr = '';\n  for(var r of d) {\n    beforeStr += r.before.hex + '\\n';\n    afterStr += r.after.hex + '\\n';\n  }\n\n  beforeStr = beforeStr.trim();\n  afterStr = afterStr.trim();\n  //var beforeStr = d.map((r) => r.before.hex).join('\\n');\n  //var afterStr = d.map((r) => r.after.hex).join('\\n');\n\n  var dada = (name: string, str: string) => {\n    var a = document.createElement('a');\n    a.target = '_blank';\n    a.download = name + '.txt';\n    a.href = URL.createObjectURL(new Blob([str], {\n      type: 'text/plain'\n    }));\n    document.body.append(a);\n    a.click();\n  };\n\n  dada(key + '_' + 'before', beforeStr);\n  dada(key + '_' + 'after', afterStr);\n}\n\nMOUNT_CLASS_TO.superDebug = superDebug; */\n","const tabId = Date.now() % Math.random() * 100000000 | 0;\nexport default tabId;\n","export default function indexOfAndSplice<T>(array: Array<T>, item: T) {\n  const idx = array.indexOf(item);\n  const spliced = idx === -1 ? undefined : array.splice(idx, 1);\n  return spliced?.[0];\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n//  SW      TRUE\nexport const IS_SERVICE_WORKER = typeof ServiceWorkerGlobalScope !== 'undefined' && self instanceof ServiceWorkerGlobalScope;\nexport const IS_WEB_WORKER = typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope && !IS_SERVICE_WORKER;\nexport const IS_WORKER = IS_WEB_WORKER || IS_SERVICE_WORKER;\n\nexport const getWindowClients = () => {\n  return (self as any as ServiceWorkerGlobalScope)\n  .clients\n  .matchAll({includeUncontrolled: false, type: 'window'});\n};\n\nexport const getLastWindowClient = () => getWindowClients().then((windowClients) => windowClients.slice(-1)[0]);\n\nconst postMessage = (listener: WindowClient | DedicatedWorkerGlobalScope, ...args: any[]) => {\n  try {\n    // @ts-ignore\n    listener.postMessage(...args);\n  } catch(err) {\n    console.error('[worker] postMessage error:', err, args);\n  }\n};\n\nconst notifyServiceWorker = (all: boolean, ...args: any[]) => {\n  getWindowClients().then((listeners) => {\n    if(!listeners.length) {\n      // console.trace('no listeners?', self, listeners);\n      return;\n    }\n\n    listeners.slice(all ? 0 : -1).forEach((listener) => {\n      postMessage(listener, ...args);\n    });\n  });\n};\n\nconst notifyWorker = (...args: any[]) => {\n  postMessage(self as any as DedicatedWorkerGlobalScope, ...args);\n};\n\nconst noop = () => {};\n\nexport const notifySomeone = IS_SERVICE_WORKER ? notifyServiceWorker.bind(null, false) : (IS_WEB_WORKER ? notifyWorker : noop);\nexport const notifyAll = IS_SERVICE_WORKER ? notifyServiceWorker.bind(null, true) : (IS_WEB_WORKER ? notifyWorker : noop);\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// import { MOUNT_CLASS_TO } from \"@config/debug\";\nimport type {ArgumentTypes, SuperReturnType} from '@types';\n\n// class EventSystem {\n//   wm: WeakMap<any, Record<any, Set<any>>> = new WeakMap();\n\n//   add(target: any, event: any, listener: any) {\n//     let listeners = this.wm.get(target);\n//     if (listeners === undefined) {\n//         listeners = {};\n//     }\n//     let listenersForEvent = listeners[event];\n//     if (listenersForEvent === undefined) {\n//         listenersForEvent = new Set();\n//     }\n//     listenersForEvent.add(listener);\n//     listeners[event] = listenersForEvent;\n//     //target.addEventListener(event, listener);\n//     this.wm.set(target, listeners);\n//   };\n\n//   remove(target: any, event: any, listener: any) {\n//     let listeners = this.wm.get(target);\n//     if (!listeners) return;\n//     let listenersForEvent = listeners[event];\n//     if (!listenersForEvent) return;\n//     listenersForEvent.delete(listener);\n//   };\n\n//   /* fire(target, event) {\n//      let listeners = this.wm.get(target);\n//      if (!listeners) return;\n//      let listenersForEvent = listeners[event];\n//      if (!listenersForEvent) return;\n//      for (let handler of handlers) {\n//          setTimeout(handler, 0, event, target); // we use a setTimeout here because we want event triggering to be asynchronous.\n//      }\n//   }; */\n// }\n\n// console.log = () => {};\n\n// const e = new EventSystem();\n// MOUNT_CLASS_TO.e = e;\n\nexport type EventListenerListeners = Record<string, Function>;\n// export type EventListenerListeners = Record<string, (...args: any[]) => any>;\n// export type EventListenerListeners = {[name in string]: Function};\n\n/**\n * Better not to remove listeners during setting\n * Should add listener callback only once\n */\n\ntype ListenerObject<T> = {callback: T, options: boolean | AddEventListenerOptions};\n\n// type EventLitenerCallback<T> = (data: T) =>\n// export default class EventListenerBase<Listeners extends {[name: string]: Function}> {\nexport default class EventListenerBase<Listeners extends EventListenerListeners> {\n  protected listeners: Partial<{\n    [k in keyof Listeners]: Set<ListenerObject<Listeners[k]>>\n  }>;\n  protected listenerResults: Partial<{\n    [k in keyof Listeners]: ArgumentTypes<Listeners[k]>\n  }>;\n\n  private reuseResults: boolean;\n\n  constructor(reuseResults?: boolean) {\n    this._constructor(reuseResults);\n  }\n\n  public _constructor(reuseResults?: boolean): any {\n    this.reuseResults = reuseResults;\n    this.listeners = {};\n    this.listenerResults = {};\n  }\n\n  public addEventListener<T extends keyof Listeners>(name: T, callback: Listeners[T], options?: boolean | AddEventListenerOptions) {\n    const listenerObject: ListenerObject<Listeners[T]> = {callback, options};\n    (this.listeners[name] ??= new Set()).add(listenerObject); // ! add before because if you don't, you won't be able to delete it from callback\n\n    if(this.listenerResults.hasOwnProperty(name)) {\n      callback(...this.listenerResults[name]);\n\n      if((options as AddEventListenerOptions)?.once) {\n        this.listeners[name].delete(listenerObject);\n        return;\n      }\n    }\n\n    // e.add(this, name, {callback, once});\n  }\n\n  public addMultipleEventsListeners(obj: {\n    [name in keyof Listeners]?: Listeners[name]\n  }) {\n    for(const i in obj) {\n      this.addEventListener(i, obj[i]);\n    }\n  }\n\n  public removeEventListener<T extends keyof Listeners>(\n    name: T,\n    callback: Listeners[T],\n    options?: boolean | AddEventListenerOptions\n  ) {\n    if(this.listeners[name]) {\n      for(const l of this.listeners[name]) {\n        if(l.callback === callback) {\n          this.listeners[name].delete(l);\n          break;\n        }\n      }\n    }\n    // e.remove(this, name, callback);\n  }\n\n  protected invokeListenerCallback<T extends keyof Listeners, L extends ListenerObject<any>>(\n    name: T,\n    listener: L,\n    ...args: ArgumentTypes<L['callback']>\n  ) {\n    let result: any, error: any;\n    try {\n      result = listener.callback(...args);\n    } catch(err) {\n      error = err;\n      // console.error('listener callback error', err);\n    }\n\n    if((listener.options as AddEventListenerOptions)?.once) {\n      this.removeEventListener(name, listener.callback);\n    }\n\n    if(error) {\n      throw error;\n    }\n\n    return result;\n  }\n\n  private _dispatchEvent<T extends keyof Listeners>(\n    name: T,\n    collectResults: boolean,\n    ...args: ArgumentTypes<Listeners[T]>\n  ) {\n    if(this.reuseResults) {\n      this.listenerResults[name] = args;\n    }\n\n    const results: Array<SuperReturnType<Listeners[typeof name]>> = collectResults && [];\n\n    const listeners = this.listeners[name];\n    for(const listener of listeners || []) {\n      try {\n        const result = this.invokeListenerCallback(name, listener, ...args);\n        if(results) {\n          results.push(result);\n        }\n      } catch(err) {\n        if(results) {\n          throw err;\n        }\n      }\n    }\n\n    return results;\n  }\n\n  public dispatchResultableEvent<T extends keyof Listeners>(name: T, ...args: ArgumentTypes<Listeners[T]>) {\n    return this._dispatchEvent(name, true, ...args);\n  }\n\n  // * must be protected, but who cares\n  public dispatchEvent<L extends EventListenerListeners = Listeners, T extends keyof L = keyof L>(\n    name: T,\n    ...args: ArgumentTypes<L[T]>\n  ) {\n    // @ts-ignore\n    this._dispatchEvent(name, false, ...args);\n  }\n\n  public cleanup() {\n    this.listeners = {};\n    this.listenerResults = {};\n  }\n}\n","export default function makeError(type: ErrorType, message?: string): ApiError {\n  const realError = new Error();\n  const error: ApiError = {type, stack: realError.stack};\n  if(message) {\n    error.message = message;\n  }\n\n  return error;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport ctx from '@environment/ctx';\n\nexport const USER_AGENT = navigator ? navigator.userAgent : null;\nexport const IS_APPLE = navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i) !== -1;\nexport const IS_ANDROID = navigator.userAgent.toLowerCase().indexOf('android') !== -1;\nexport const IS_CHROMIUM = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\nexport const CHROMIUM_VERSION = (() => {\n  try {\n    return +navigator.userAgent.match(/Chrom(?:e|ium)\\/(.+?)(?:\\s|\\.)/)[1];\n  } catch(err) {\n  }\n})();\n\n// https://stackoverflow.com/a/58065241\nexport const IS_APPLE_MOBILE = (/iPad|iPhone|iPod/.test(navigator.platform) ||\n  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n  !(ctx as any).MSStream;\n\nexport const IS_SAFARI = !!('safari' in ctx) || !!(USER_AGENT && (/\\b(iPad|iPhone|iPod)\\b/.test(USER_AGENT) || (!!USER_AGENT.match('Safari') && !USER_AGENT.match('Chrome'))))/*  || true */;\nexport const IS_FIREFOX = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\nexport const IS_MOBILE_SAFARI = IS_SAFARI && IS_APPLE_MOBILE;\n\nexport const IS_MOBILE = (navigator.maxTouchPoints === undefined || navigator.maxTouchPoints > 0) && navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i) != -1;\n","const _logTimer = Date.now();\nexport default function dT() {\n  return '[' + ((Date.now() - _logTimer) / 1000).toFixed(3) + ']';\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport DEBUG from '@config/debug';\nimport {IS_FIREFOX, IS_SAFARI} from '@environment/userAgent';\nimport {IS_SERVICE_WORKER, IS_WEB_WORKER} from '@helpers/context';\nimport dT from '@helpers/dT';\n\nexport enum LogTypes {\n  None = 0,\n  Error = 1,\n  Warn = 2,\n  Log = 4,\n  Debug = 8\n};\n\nexport const LOG_LEVELS = [\n  LogTypes.None,\n  LogTypes.Error,\n  LogTypes.Warn,\n  LogTypes.Log,\n  LogTypes.Debug\n];\n\nconst IS_WEBKIT = IS_SAFARI || IS_FIREFOX;\n\n// let getCallerFunctionNameFromLine: (line: string) => string;\n// if(IS_WEBKIT) {\n//   getCallerFunctionNameFromLine = (line) => {\n//     const splitted = line.split('@');\n//     return splitted[0];\n//   };\n// } else {\n//   getCallerFunctionNameFromLine = (line: string) => {\n//     const splitted = line.trim().split(' ');\n//     if(splitted.length === 3) {\n//       return splitted[1].slice(splitted[1].lastIndexOf('.') + 1);\n//     }\n//   };\n// }\n\nconst STYLES_SUPPORTED = !IS_WEBKIT;\n// const LINE_INDEX = IS_WEBKIT ? 2 : 3;\n\n// function getCallerFunctionName() {\n//   const stack = new Error().stack;\n//   const lines = stack.split('\\n');\n//   const line = lines[LINE_INDEX] || lines[lines.length - 1];\n//   // const match = line.match(/\\.([^\\.]+?)\\s/);\n//   // line = match ? match[1] : line.trim();\n//   const caller = getCallerFunctionNameFromLine(line) || '<anonymous>';\n//   return '[' + caller + ']';\n// }\n\nexport const LOGGER_STYLES = {\n  reset: '\\x1b[0m',\n  bright: '\\x1b[1m',\n  dim: '\\x1b[2m',\n  underscore: '\\x1b[4m',\n  blink: '\\x1b[5m',\n  reverse: '\\x1b[7m',\n  hidden: '\\x1b[8m',\n  // Foreground (text) colors\n  fg: {\n    black: '\\x1b[30m',\n    red: '\\x1b[31m',\n    green: '\\x1b[32m',\n    yellow: '\\x1b[33m',\n    blue: '\\x1b[34m',\n    magenta: '\\x1b[35m',\n    cyan: '\\x1b[36m',\n    white: '\\x1b[37m'\n  },\n  // Background colors\n  bg: {\n    black: '\\x1b[40m',\n    red: '\\x1b[41m',\n    green: '\\x1b[42m',\n    yellow: '\\x1b[43m',\n    blue: '\\x1b[44m',\n    magenta: '\\x1b[45m',\n    cyan: '\\x1b[46m',\n    white: '\\x1b[47m'\n  }\n};\n\nexport type Logger = {\n  (...args: any[]): void;\n  warn(...args: any[]): void;\n  info(...args: any[]): void;\n  error(...args: any[]): void;\n  trace(...args: any[]): void;\n  debug(...args: any[]): void;\n  assert(...args: any[]): void;\n  // log(...args: any[]): void;\n  group(...args: any[]): void;\n  groupCollapsed(...args: any[]): void;\n  groupEnd(...args: any[]): void;\n  setPrefix(newPrefix: string): void;\n  setLevel(level: 0 | 1 | 2 | 3 | 4): void;\n  bindPrefix(prefix: string, type?: LogTypes): Logger;\n};\n\nconst methods: [\n  'debug' | 'info' | 'warn' | 'error' | 'assert' | 'trace'/*  | 'log' */ | 'group' | 'groupCollapsed' | 'groupEnd',\n  LogTypes\n][] = [\n  ['debug', LogTypes.Debug],\n  ['info', LogTypes.Log],\n  ['warn', LogTypes.Warn],\n  ['error', LogTypes.Error],\n  ['assert', LogTypes.Error],\n  ['trace', LogTypes.Log],\n  ['group', LogTypes.Log],\n  ['groupCollapsed', LogTypes.Log],\n  ['groupEnd', LogTypes.Log]\n  // [\"log\", LogTypes.Log]\n];\n\nexport function logger(\n  prefix: string,\n  type: LogTypes = LogTypes.Log | LogTypes.Warn | LogTypes.Error,\n  ignoreDebugReset = false,\n  style = ''\n): Logger {\n  let originalPrefix: string;\n  if(!DEBUG && !ignoreDebugReset/*  || true */) {\n    type = LogTypes.Error;\n  }\n\n  if(!STYLES_SUPPORTED) {\n    style = '';\n  } else if(!style) {\n    if(IS_SERVICE_WORKER) style = LOGGER_STYLES.fg.yellow;\n    else if(IS_WEB_WORKER) style = LOGGER_STYLES.fg.cyan;\n  }\n\n  const originalStyle = style;\n  if(style) style = `%s ${style}%s`;\n  else style = '%s';\n\n  // level = LogLevels.log | LogLevels.warn | LogLevels.error | LogLevels.debug\n\n  const log: Logger = function(...args: any[]) {\n    return type & LogTypes.Log && console.log(style, dT(), prefix, /* getCallerFunctionName(), */ ...args);\n  } as any;\n\n  methods.forEach(([method, logType]) => {\n    log[method] = function(...args: any[]) {\n      return type & logType && console[method](style, dT(), prefix, /* getCallerFunctionName(), */ ...args);\n    };\n  });\n\n  log.setPrefix = function(newPrefix: string) {\n    originalPrefix = newPrefix;\n    prefix = '[' + newPrefix + ']';\n  };\n\n  log.setPrefix(prefix);\n\n  log.setLevel = function(level: 0 | 1 | 2 | 3 | 4) {\n    type = LOG_LEVELS.slice(0, level + 1).reduce((acc, v) => acc | v, 0) as any;\n  };\n\n  const prefixCache: {[prefix: string]: Logger} = {};\n  log.bindPrefix = function(prefix: string, _type = type) {\n    return prefixCache[prefix] ??= logger(\n      // `${originalPrefix}] ${LOGGER_STYLES.fg.magenta}[${prefix}`,\n      `${originalPrefix}] ${STYLES_SUPPORTED && originalStyle ? LOGGER_STYLES.reset : ''}[${prefix}`,\n      // `${originalPrefix}] [${prefix}`,\n      _type,\n      ignoreDebugReset,\n      // originalStyle || LOGGER_STYLES.reset\n      originalStyle\n      // LOGGER_STYLES.reset\n    );\n  };\n\n  return log;\n};\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport DEBUG from '@config/debug';\nimport tabId from '@config/tabId';\nimport ctx from '@environment/ctx';\nimport indexOfAndSplice from '@helpers/array/indexOfAndSplice';\nimport {IS_WORKER} from '@helpers/context';\nimport EventListenerBase from '@helpers/eventListenerBase';\nimport makeError from '@helpers/makeError';\nimport {WorkerTaskTemplate, WorkerTaskVoidTemplate} from '@types';\nimport {logger} from '@lib/logger';\n\ntype SuperMessagePortTask = WorkerTaskTemplate & {\n  transfer?: Transferable[]\n};\n\ninterface InvokeTask extends SuperMessagePortTask {\n  type: 'invoke',\n  payload: WorkerTaskVoidTemplate & {withAck?: boolean, void?: boolean}\n}\n\ninterface ResultTask extends SuperMessagePortTask {\n  type: 'result',\n  payload: {\n    taskId: number,\n    result?: any,\n    error?: any\n  }\n}\n\ninterface AckTask extends SuperMessagePortTask {\n  type: 'ack',\n  payload: {\n    cached: boolean,\n    taskId: number\n    result?: any,\n    error?: any,\n  }\n}\n\ninterface PingTask extends SuperMessagePortTask {\n  type: 'ping'\n}\n\ninterface PongTask extends SuperMessagePortTask {\n  type: 'pong'\n}\n\ninterface BatchTask extends SuperMessagePortTask {\n  type: 'batch',\n  payload: Task[]\n}\n\ninterface CloseTask extends SuperMessagePortTask {\n  type: 'close'\n}\n\n// interface OpenTask extends SuperMessagePortTask {\n//   type: 'open'\n// }\n\ninterface LockTask extends SuperMessagePortTask {\n  type: 'lock',\n  payload: string\n}\n\ntype Task = InvokeTask | ResultTask | AckTask | PingTask | PongTask | BatchTask | CloseTask/*  | OpenTask */ | LockTask;\ntype TaskMap = {\n  [type in Task as type['type']]?: (task: Extract<Task, type>, source: MessageEventSource, event: MessageEvent<any>) => void | Promise<any>\n};\n\nexport type AckedResult<T> = {\n  cached: boolean,\n  result: Promise<T>\n};\n// export type AckedResult<T> = {\n//   cached: true,\n//   result: T\n// } | {\n//   cached: false,\n//   result: Promise<T>\n// };\n\ntype ListenPort = WindowProxy | MessagePort | ServiceWorker | Worker | ServiceWorkerContainer;\ntype SendPort = Pick<MessageEventSource, 'postMessage'>/* WindowProxy | MessagePort | ServiceWorker | Worker */;\n\nexport type MessageListenPort = ListenPort;\nexport type MessageSendPort = SendPort;\n\ntype ListenerCallback = (payload: any, source: MessageEventSource, event: MessageEvent<any>) => any;\ntype Listeners = Record<string, ListenerCallback>;\n\nconst USE_LOCKS = true;\nconst USE_BATCHING = true;\n\n// const PING_INTERVAL = DEBUG && false ? 0x7FFFFFFF : 5000;\n// const PING_TIMEOUT = DEBUG && false ? 0x7FFFFFFF : 10000;\n\n\nclass SuperMessagePort<\n  Workers extends Listeners,\n  Masters extends Listeners,\n  IsMaster extends boolean,\n  Receive extends Listeners = IsMaster extends true ? Masters : Workers,\n  Send extends Listeners = IsMaster extends true ? Workers : Masters\n> extends EventListenerBase<Receive> {\n  protected listenPorts: Array<ListenPort>;\n  protected sendPorts: Array<SendPort>;\n  protected pingResolves: Map<SendPort, () => void>;\n\n  protected taskId: number;\n  protected awaiting: {\n    [id: number]: {\n      resolve: any,\n      reject: any,\n      taskType: string,\n      port?: SendPort\n    }\n  };\n  protected pending: Map<SendPort, Task[]>;\n\n  protected log: ReturnType<typeof logger>;\n  protected debug: boolean;\n  protected releasingPending: boolean;\n\n  protected processTaskMap: TaskMap;\n\n  protected onPortDisconnect: (source: MessageEventSource) => void;\n  // protected onPortConnect: (source: MessageEventSource) => void;\n\n  protected heldLocks: Map<SendPort, {resolve: () => void, id: string}>;\n  protected requestedLocks: Map<string, SendPort>;\n\n  constructor(protected logSuffix?: string) {\n    super(false);\n\n    this.listenPorts = [];\n    this.sendPorts = [];\n    this.pingResolves = new Map();\n    this.taskId = Math.random(); // [0 <-> 1] Have some decimals to prevent tabs from overlapping ids\n    this.awaiting = {};\n    this.pending = new Map();\n    this.log = logger('MP' + (logSuffix ? '-' + logSuffix : ''));\n    this.debug = DEBUG;\n    this.heldLocks = new Map();\n    this.requestedLocks = new Map();\n\n    this.processTaskMap = {\n      result: this.processResultTask,\n      ack: this.processAckTask,\n      invoke: this.processInvokeTask,\n      ping: this.processPingTask,\n      pong: this.processPongTask,\n      close: this.processCloseTask,\n      // open: this.processOpenTask,\n      lock: this.processLockTask,\n      batch: this.processBatchTask\n    };\n  }\n\n  public setOnPortDisconnect(callback: (source: MessageEventSource) => void) {\n    this.onPortDisconnect = callback;\n  }\n\n  // public setOnPortConnect(callback: (source: MessageEventSource) => void) {\n  //   this.onPortConnect = callback;\n  // }\n\n  public attachPort(port: MessageEventSource) {\n    this.attachListenPort(port);\n    this.attachSendPort(port);\n  }\n\n  public attachListenPort(port: ListenPort) {\n    this.listenPorts.push(port);\n    port.addEventListener('message', this.onMessage as any);\n  }\n\n  public attachSendPort(port: SendPort) {\n    this.log.warn('attaching send port');\n\n    (port as MessagePort).start?.();\n\n    this.sendPorts.push(port);\n    // this.sendPing(port);\n\n    // const task = this.createTask('open', undefined);\n    // this.postMessage(port, task);\n\n    if(typeof(window) !== 'undefined' && USE_LOCKS) {\n      if('locks' in navigator) {\n        const id = ['lock', tabId, this.logSuffix || '', Math.random() * 0x7FFFFFFF | 0].join('-');\n        this.log.warn('created lock', id);\n        const promise = new Promise<void>((resolve) => this.heldLocks.set(port, {resolve, id}))\n        .then(() => this.heldLocks.delete(port));\n        navigator.locks.request(id, () => {\n          this.resendLockTask(port);\n          return promise;\n        });\n      } else {\n        window.addEventListener('beforeunload', () => {\n          const task = this.createTask('close', undefined);\n          this.postMessage(undefined, task);\n        });\n      }\n    }\n\n    this.releasePending();\n  }\n\n  public resendLockTask(port: SendPort) {\n    const lock = this.heldLocks.get(port);\n    if(!lock) {\n      return;\n    }\n\n    this.pushTask(this.createTask('lock', lock.id), port);\n  }\n\n  // ! Can't rely on ping because timers can be suspended\n  // protected sendPing(port: SendPort, loop = IS_WORKER) {\n  //   let timeout: number;\n  //   const promise = new Promise<void>((resolve, reject) => {\n  //     this.pingResolves.set(port, resolve);\n  //     this.pushTask(this.createTask('ping', undefined), port);\n\n  //     timeout = ctx.setTimeout(() => {\n  //       reject();\n  //     }, PING_TIMEOUT);\n  //   });\n\n  //   promise.then(() => {\n  //     // this.log('got pong');\n\n  //     clearTimeout(timeout);\n  //     this.pingResolves.delete(port);\n\n  //     if(loop) {\n  //       this.sendPingWithTimeout(port);\n  //     }\n  //   }, () => {\n  //     this.pingResolves.delete(port);\n  //     this.detachPort(port);\n  //   });\n  // }\n\n  // protected sendPingWithTimeout(port: SendPort, timeout = PING_INTERVAL) {\n  //   ctx.setTimeout(() => {\n  //     if(!this.sendPorts.includes(port)) {\n  //       return;\n  //     }\n\n  //     this.sendPing(port);\n  //   }, timeout);\n  // }\n\n  public detachPort(port: ListenPort) {\n    this.log.warn('disconnecting port');\n\n    indexOfAndSplice(this.listenPorts, port);\n    indexOfAndSplice(this.sendPorts, port as any);\n\n    port.removeEventListener?.('message', this.onMessage as any);\n    (port as MessagePort).close?.();\n\n    this.onPortDisconnect?.(port as any);\n\n    const heldLock = this.heldLocks.get(port as SendPort);\n    heldLock?.resolve();\n\n    const error = makeError('PORT_DISCONNECTED');\n    for(const id in this.awaiting) {\n      const task = this.awaiting[id];\n      if(task.port === port) {\n        task.reject(error);\n        delete this.awaiting[id];\n      }\n    }\n  }\n\n  protected postMessage(port: SendPort | SendPort[], task: Task) {\n    const ports = Array.isArray(port) ? port : (port ? [port] : this.sendPorts);\n    ports.forEach((port) => {\n      if(import.meta.env.MODE === 'test') {\n        return;\n      }\n\n      // try {\n      //   const perf = performance.now();\n      //   const clone = structuredClone(task); clone;\n      //   this.log('postMessage clone time',\n      //     task.type,\n      //     performance.now() - perf,\n      //     task.type === 'batch' ? task.payload.length : undefined\n      //   );\n      // } catch(err) {\n      //   console.error('postMessage clone error', err);\n      // }\n\n      port.postMessage(task, task.transfer as any);\n    });\n  }\n\n  protected onMessage = (event: MessageEvent) => {\n    const task: Task = event.data;\n    // this.log('got message', task);\n\n    const source: MessageEventSource = event.source || event.currentTarget as any; // can have no source\n\n    // @ts-ignore\n    this.processTaskMap[task.type](task, source, event);\n  };\n\n  protected async releasePending() {\n    // return;\n\n    if(/* !this.listenPorts.length || !this.sendPorts.length ||  */this.releasingPending) {\n      return;\n    }\n\n    this.releasingPending = true;\n    // const perf = performance.now();\n\n    if(USE_BATCHING) {\n      await Promise.resolve();\n    }\n    // await pause(0);\n\n    this.debug && this.log.debug('releasing tasks, length:', this.pending.size/* , performance.now() - perf */);\n\n    this.pending.forEach((portTasks, port) => {\n      let tasks: Task[] = portTasks;\n      if(USE_BATCHING) {\n        let batchTask: BatchTask;\n        tasks = [];\n        portTasks.forEach((task) => {\n          if(task.transfer) {\n            batchTask = undefined;\n            tasks.push(task);\n          } else {\n            if(!batchTask) {\n              batchTask = this.createTask('batch', []);\n              tasks.push(batchTask);\n            }\n\n            batchTask.payload.push(task);\n          }\n        });\n      }\n\n      const ports = port ? [port] : this.sendPorts;\n      if(!ports.length) {\n        return;\n      }\n\n      tasks.forEach((task) => {\n        // if(USE_BATCHING && task.type === 'batch') {\n        //   this.log(`batching ${task.payload.length} tasks`);\n        // }\n\n        try {\n          // if(IS_SERVICE_WORKER && !port) {\n          //   notifyAll(task);\n          // } else {\n          this.postMessage(ports, task);\n          // }\n        } catch(err) {\n          this.log.error('postMessage error:', err, task, ports);\n        }\n      });\n\n      this.pending.delete(port);\n    });\n\n    this.debug && this.log.debug('released tasks');\n\n    this.releasingPending = false;\n  }\n\n  protected processResultTask = (task: ResultTask) => {\n    const {taskId, result, error} = task.payload;\n    const deferred = this.awaiting[taskId];\n    if(!deferred) {\n      return;\n    }\n\n    this.debug && this.log.debug('done', deferred.taskType, result, error);\n    'error' in task.payload ? deferred.reject(error) : deferred.resolve(result);\n    delete this.awaiting[taskId];\n  };\n\n  protected processAckTask = (task: AckTask) => {\n    const payload = task.payload;\n    const deferred = this.awaiting[payload.taskId];\n    if(!deferred) {\n      return;\n    }\n\n    // * will finish the init promise with incoming result\n    const previousResolve: (acked: AckedResult<any>) => void = deferred.resolve;\n    // const previousReject = deferred.reject;\n\n    // if(payload.cached) {\n    //   if('result' in payload) {\n    //     previousResolve({\n    //       cached: true,\n    //       result: payload.result\n    //     });\n    //   } else {\n    //     previousReject(payload.error);\n    //   }\n    // } else {\n    //   const ret: AckedResult<any> = {\n    //     cached: false,\n    //     result: new Promise((resolve, reject) => {\n    //       deferred.resolve = resolve;\n    //       deferred.reject = reject;\n    //     })\n    //   };\n\n    //   previousResolve(ret);\n    // }\n\n    const ret: AckedResult<any> = {\n      cached: payload.cached,\n      result: payload.cached ? ('result' in payload ? Promise.resolve(payload.result) : Promise.reject(payload.error)) : new Promise((resolve, reject) => {\n        deferred.resolve = resolve;\n        deferred.reject = reject;\n      })\n    };\n\n    previousResolve(ret);\n\n    if(payload.cached) {\n      delete this.awaiting[payload.taskId];\n    }\n  };\n\n  protected processPingTask = (task: PingTask, source: MessageEventSource, event: MessageEvent) => {\n    this.pushTask(this.createTask('pong', undefined), event.source);\n  };\n\n  protected processPongTask = (task: PongTask, source: MessageEventSource, event: MessageEvent) => {\n    const pingResolve = this.pingResolves.get(source);\n    if(pingResolve) {\n      this.pingResolves.delete(source);\n      pingResolve();\n    }\n  };\n\n  protected processCloseTask = (task: CloseTask, source: MessageEventSource, event: MessageEvent) => {\n    this.detachPort(source);\n  };\n\n  protected processBatchTask = (task: BatchTask, source: MessageEventSource, event: MessageEvent) => {\n    if(!USE_BATCHING) {\n      return;\n    }\n\n    const newEvent: MessageEvent = {data: event.data, source: event.source, currentTarget: event.currentTarget} as any;\n    task.payload.forEach((task) => {\n      // @ts-ignore\n      newEvent.data = task;\n      this.onMessage(newEvent);\n    });\n  };\n\n  // * it's just an 'open' callback, DO NOT attach port from here\n  // protected processOpenTask = (task: OpenTask, source: MessageEventSource, event: MessageEvent) => {\n  //   this.onPortConnect?.(source);\n  // };\n\n  protected processLockTask = (task: LockTask, source: MessageEventSource, event: MessageEvent) => {\n    const id = task.payload;\n    if(this.requestedLocks.has(id)) {\n      return;\n    }\n\n    this.requestedLocks.set(id, source);\n    navigator.locks.request(id, () => {\n      this.processCloseTask(undefined, source, undefined);\n      this.requestedLocks.delete(id);\n    });\n  };\n\n  protected processInvokeTask = async(task: InvokeTask, source: MessageEventSource, event: MessageEvent) => {\n    const id = task.id;\n    const innerTask = task.payload;\n\n    let resultTaskPayload: ResultTask['payload'];\n    let resultTask: ResultTask, ackTask: AckTask;\n    if(!innerTask.void) {\n      resultTaskPayload = {taskId: id};\n      resultTask = this.createTask('result', resultTaskPayload);\n    }\n\n    if(innerTask.withAck) {\n      ackTask = this.createTask('ack', {\n        taskId: id,\n        cached: true\n      });\n    }\n\n    let isPromise: boolean;\n\n    try {\n      const listeners = this.listeners[innerTask.type];\n      if(!listeners?.size) {\n        throw new Error('no listener');\n      }\n\n      const listener = listeners.values().next().value;\n\n      // @ts-ignore\n      let result = this.invokeListenerCallback(innerTask.type, listener, innerTask.payload, source, event);\n      if(innerTask.void) {\n        return;\n      }\n\n      isPromise = result instanceof Promise;\n\n      if(ackTask) {\n        const cached = !isPromise;\n        ackTask.payload.cached = cached;\n        if(cached) ackTask.payload.result = result;\n        this.pushTask(ackTask, source);\n\n        if(cached) {\n          return;\n        }\n      }\n\n      if(isPromise) {\n        result = await result;\n      }\n\n      if(result instanceof SuperMessagePort.TransferableResult) {\n        resultTask.transfer = result.transferables;\n        result = result.value;\n      }\n\n      resultTaskPayload.result = result;\n    } catch(error) {\n      this.log.error('worker task error:', error, task);\n      if(innerTask.void) {\n        return;\n      }\n\n      if(ackTask && ackTask.payload.cached) {\n        ackTask.payload.error = error;\n        this.pushTask(ackTask, source);\n        return;\n      }\n\n      resultTaskPayload.error = error;\n    }\n\n    this.pushTask(resultTask, source);\n  };\n\n  protected createTask<T extends Task['type'], K extends Task = Parameters<TaskMap[T]>[0]>(type: T, payload: K['payload'], transfer?: Transferable[]): K {\n    return {\n      type,\n      payload,\n      id: this.taskId++,\n      transfer\n    } as K;\n  }\n\n  protected createInvokeTask(type: string, payload: any, withAck?: boolean, _void?: boolean, transfer?: Transferable[]): InvokeTask {\n    return this.createTask('invoke', {\n      type,\n      payload,\n      withAck,\n      void: _void\n    }, transfer);\n  }\n\n  protected pushTask(task: Task, port?: SendPort) {\n    let tasks = this.pending.get(port);\n    if(!tasks) {\n      this.pending.set(port, tasks = []);\n    }\n\n    tasks.push(task);\n    this.releasePending();\n  }\n\n  public invokeVoid<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], port?: SendPort, transfer?: Transferable[]) {\n    const task = this.createInvokeTask(type as string, payload, undefined, true, transfer);\n    this.pushTask(task, port);\n  }\n\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: false, port?: SendPort, transfer?: Transferable[], timeout?: number): Promise<Awaited<ReturnType<Send[T]>>>;\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: true, port?: SendPort, transfer?: Transferable[], timeout?: number): Promise<AckedResult<Awaited<ReturnType<Send[T]>>>>;\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: boolean, port?: SendPort, transfer?: Transferable[], timeout?: number) {\n    this.debug && this.log.debug('start', type, payload);\n\n    let task: InvokeTask;\n    const promise = new Promise<Awaited<ReturnType<Send[T]>>>((resolve, reject) => {\n      task = this.createInvokeTask(type as string, payload, withAck, undefined, transfer);\n      this.awaiting[task.id] = {resolve, reject, taskType: type as string, port};\n      this.pushTask(task, port);\n    });\n\n    if(timeout) {\n      const {reject} = this.awaiting[task.id];\n      setTimeout(() => {\n        reject(makeError('TIMEOUT'));\n      }, timeout);\n    }\n\n    if(IS_WORKER/*  || true */) {\n      promise.finally(() => {\n        clearInterval(interval);\n      });\n\n      const interval = ctx.setInterval(() => {\n        this.log.error('task still has no result', task, port);\n      }, IS_WORKER ? 60e3 : 5e3);\n    } else if(false) {\n      // let timedOut = false;\n      const startTime = Date.now();\n      promise.finally(() => {\n        const elapsedTime = Date.now() - startTime;\n        if(elapsedTime >= TIMEOUT) {\n          this.log.error(`task was processing ${Date.now() - startTime}ms`, task.payload.payload, port);\n        }/*  else {\n          clearTimeout(timeout);\n        } */\n      });\n\n      const TIMEOUT = 10;\n      // const timeout = ctx.setTimeout(() => {\n      //   timedOut = true;\n      //   // this.log.error(`task is processing more than ${TIMEOUT} milliseconds`, task, port);\n      // }, TIMEOUT);\n    }\n\n    return promise;\n  }\n\n  public invokeExceptSource<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], source?: SendPort) {\n    const ports = this.sendPorts.slice();\n    indexOfAndSplice(ports, source);\n\n    ports.forEach((target) => {\n      this.invokeVoid(type, payload, target);\n    });\n  }\n\n  public async invokeExceptSourceAsync<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], source?: SendPort) {\n    const ports = this.sendPorts.slice();\n    indexOfAndSplice(ports, source);\n\n    await Promise.all(ports.map((target) => this.invoke(type, payload, undefined, target)));\n  }\n}\n\nnamespace SuperMessagePort {\n  export type TransferableResultValue<T> = T extends MaybePromise<TransferableResult<infer U>> ? U : T;\n\n  export class TransferableResult<T> {\n    constructor(public value: T, public transferables: Transferable[]) { }\n  };\n}\n\nexport default SuperMessagePort;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {CryptoMethods} from '@lib/crypto/crypto_methods';\nimport SuperMessagePort from '@lib/superMessagePort';\nimport {MOUNT_CLASS_TO} from '@config/debug';\nimport {IS_WORKER} from '@helpers/context';\n\n\ntype CryptoEvent = {\n  invoke: <T extends keyof CryptoMethods>(payload: {method: T, args: Parameters<CryptoMethods[T]>}) =>\n    SuperMessagePort.TransferableResultValue<ReturnType<CryptoMethods[T]>>,\n  port: (payload: void, source: MessageEventSource, event: MessageEvent) => void,\n  terminate: () => void\n};\n\nexport class CryptoMessagePort<Master extends boolean = false> extends SuperMessagePort<CryptoEvent, CryptoEvent, Master> {\n  private lastIndex: number;\n\n  constructor() {\n    super('CRYPTO');\n    this.lastIndex = -1;\n  }\n\n  // TODO: Transfer transferables on result tasks?\n  public invokeCryptoNew<T extends keyof CryptoMethods>({method, args, transfer}: {\n    method: T,\n    args: Parameters<CryptoMethods[T]>,\n    transfer?: Transferable[]\n  }): Promise<Awaited<SuperMessagePort.TransferableResultValue<ReturnType<CryptoMethods[T]>>>> {\n    const payload = {method, args};\n    const listeners = this.listeners['invoke'];\n    if(listeners?.size) { // already in worker\n      // try {\n      let result: any = listeners.values().next().value.callback(payload);\n      if(!IS_WORKER && !(result instanceof Promise)) {\n        result = Promise.resolve(result);\n      }\n\n      return result;\n      // } catch(err) {\n      //   return Promise.reject(err);\n      // }\n    }\n\n    const sendPortIndex = method === 'aes-encrypt' || method === 'aes-decrypt' ?\n      this.lastIndex = (this.lastIndex + 1) % this.sendPorts.length :\n      0;\n    // @ts-ignore\n    return this.invoke('invoke', payload, undefined, this.sendPorts[sendPortIndex], transfer);\n  }\n\n  public invokeCrypto<T extends keyof CryptoMethods>(method: T, ...args: Parameters<CryptoMethods[T]>) {\n    return this.invokeCryptoNew({method, args});\n  }\n\n  public sendToOnePort(port: MessagePort) {\n    this.invokeVoid('port', undefined, this.sendPorts[0], [port]);\n  }\n}\n\nconst cryptoMessagePort = new CryptoMessagePort<false>();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.cryptoMessagePort = cryptoMessagePort);\nexport default cryptoMessagePort;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport cryptoWorker from '@lib/crypto/cryptoMessagePort';\nimport bigInt from 'big-integer';\n\nfunction readBigIntFromBytesBE(bytes: Uint8Array) {\n  const length = bytes.length;\n  const bits = length * 8;\n  let value = bigInt(bytes[0]).and(0x7F).shiftLeft(bits - 8);\n  for(let i = 1; i < length; ++i) {\n    const _bits = bits - (i + 1) * 8;\n    const b = bigInt(bytes[i]);\n    value = value.or(_bits ? b.shiftLeft(_bits) : b);\n  }\n\n  return value;\n}\n\n// Emojis were taken from tdlib\nconst emojis = [\n  '1f609', '1f60d', '1f61b', '1f62d', '1f631', '1f621', '1f60e',\n  '1f634', '1f635', '1f608', '1f62c', '1f607', '1f60f', '1f46e',\n  '1f477', '1f482', '1f476', '1f468', '1f469', '1f474', '1f475',\n  '1f63b', '1f63d', '1f640', '1f47a', '1f648', '1f649', '1f64a',\n  '1f480', '1f47d', '1f4a9', '1f525', '1f4a5', '1f4a4', '1f442',\n  '1f440', '1f443', '1f445', '1f444', '1f44d', '1f44e', '1f44c',\n  '1f44a', '270c', '270b', '1f450', '1f446', '1f447', '1f449',\n  '1f448', '1f64f', '1f44f', '1f4aa', '1f6b6', '1f3c3', '1f483',\n  '1f46b', '1f46a', '1f46c', '1f46d', '1f485', '1f3a9', '1f451',\n  '1f452', '1f45f', '1f45e', '1f460', '1f455', '1f457', '1f456',\n  '1f459', '1f45c', '1f453', '1f380', '1f484', '1f49b', '1f499',\n  '1f49c', '1f49a', '1f48d', '1f48e', '1f436', '1f43a', '1f431',\n  '1f42d', '1f439', '1f430', '1f438', '1f42f', '1f428', '1f43b',\n  '1f437', '1f42e', '1f417', '1f434', '1f411', '1f418', '1f43c',\n  '1f427', '1f425', '1f414', '1f40d', '1f422', '1f41b', '1f41d',\n  '1f41c', '1f41e', '1f40c', '1f419', '1f41a', '1f41f', '1f42c',\n  '1f40b', '1f410', '1f40a', '1f42b', '1f340', '1f339', '1f33b',\n  '1f341', '1f33e', '1f344', '1f335', '1f334', '1f333', '1f31e',\n  '1f31a', '1f319', '1f30e', '1f30b', '26a1', '2614', '2744', '26c4',\n  '1f300', '1f308', '1f30a', '1f393', '1f386', '1f383', '1f47b',\n  '1f385', '1f384', '1f381', '1f388', '1f52e', '1f3a5', '1f4f7',\n  '1f4bf', '1f4bb', '260e', '1f4e1', '1f4fa', '1f4fb', '1f509',\n  '1f514', '23f3', '23f0', '231a', '1f512', '1f511', '1f50e',\n  '1f4a1', '1f526', '1f50c', '1f50b', '1f6bf', '1f6bd', '1f527',\n  '1f528', '1f6aa', '1f6ac', '1f4a3', '1f52b', '1f52a', '1f48a',\n  '1f489', '1f4b0', '1f4b5', '1f4b3', '2709', '1f4eb', '1f4e6',\n  '1f4c5', '1f4c1', '2702', '1f4cc', '1f4ce', '2712', '270f',\n  '1f4d0', '1f4da', '1f52c', '1f52d', '1f3a8', '1f3ac', '1f3a4',\n  '1f3a7', '1f3b5', '1f3b9', '1f3bb', '1f3ba', '1f3b8', '1f47e',\n  '1f3ae', '1f0cf', '1f3b2', '1f3af', '1f3c8', '1f3c0', '26bd',\n  '26be', '1f3be', '1f3b1', '1f3c9', '1f3b3', '1f3c1', '1f3c7',\n  '1f3c6', '1f3ca', '1f3c4', '2615', '1f37c', '1f37a', '1f377',\n  '1f374', '1f355', '1f354', '1f35f', '1f357', '1f371', '1f35a',\n  '1f35c', '1f361', '1f373', '1f35e', '1f369', '1f366', '1f382',\n  '1f370', '1f36a', '1f36b', '1f36d', '1f36f', '1f34e', '1f34f',\n  '1f34a', '1f34b', '1f352', '1f347', '1f349', '1f353', '1f351',\n  '1f34c', '1f350', '1f34d', '1f346', '1f345', '1f33d', '1f3e1',\n  '1f3e5', '1f3e6', '26ea', '1f3f0', '26fa', '1f3ed', '1f5fb',\n  '1f5fd', '1f3a0', '1f3a1', '26f2', '1f3a2', '1f6a2', '1f6a4',\n  '2693', '1f680', '2708', '1f681', '1f682', '1f68b', '1f68e',\n  '1f68c', '1f699', '1f697', '1f695', '1f69b', '1f6a8', '1f694',\n  '1f692', '1f691', '1f6b2', '1f6a0', '1f69c', '1f6a6', '26a0',\n  '1f6a7', '26fd', '1f3b0', '1f5ff', '1f3aa', '1f3ad',\n  '1f1ef-1f1f5', '1f1f0-1f1f7', '1f1e9-1f1ea', '1f1e8-1f1f3',\n  '1f1fa-1f1f8', '1f1eb-1f1f7', '1f1ea-1f1f8', '1f1ee-1f1f9',\n  '1f1f7-1f1fa', '1f1ec-1f1e7', '0031-20e3', '0032-20e3', '0033-20e3',\n  '0034-20e3', '0035-20e3', '0036-20e3', '0037-20e3', '0038-20e3', '0039-20e3',\n  '0030-20e3', '1f51f', '2757', '2753', '2665', '2666', '1f4af', '1f517',\n  '1f531', '1f534', '1f535', '1f536', '1f537'\n];\n\nexport default async function getEmojisFingerprint(key: Uint8Array, g_a: Uint8Array) {\n  const arr = key.concat(g_a);\n  const hash = await cryptoWorker.invokeCrypto('sha256', arr);\n\n  const result: [string, string, string, string] = [] as any;\n  const emojisLength = emojis.length;\n\n  const kPartSize = 8;\n  for(let partOffset = 0; partOffset != hash.length; partOffset += kPartSize) {\n    const bytes = hash.slice(partOffset, partOffset + kPartSize);\n    const value = readBigIntFromBytesBE(bytes);\n    const index = value.mod(emojisLength).toJSNumber();\n\n    // const emoji = emojiFromCodePoints(emojis[index]);\n    const codePoints = emojis[index];\n    result.push(codePoints);\n  }\n\n  return result;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {bigIntFromBytes, bigIntToSigned} from '@helpers/bigInt/bigIntConversion';\nimport cryptoWorker from '@lib/crypto/cryptoMessagePort';\n\nexport default async function computeDhKey(g_b: Uint8Array, a: Uint8Array, p: Uint8Array) {\n  const key = await cryptoWorker.invokeCrypto('mod-pow', g_b, a, p);\n  const keySha1Hashed = await cryptoWorker.invokeCrypto('sha1', key);\n  const key_fingerprint = keySha1Hashed.slice(-8).reverse();\n  const key_fingerprint_long = bigIntToSigned(bigIntFromBytes(key_fingerprint)).toString(10);\n\n  return {key, key_fingerprint: key_fingerprint_long};\n}\n","export default function randomize<T extends ArrayBufferView>(arr: T) {\n  if(crypto && 'getRandomValues' in crypto) {\n    crypto.getRandomValues(arr);\n  } else {\n    throw new Error('NO_SECURE_RANDOM');\n  }\n\n  return arr;\n}\n","import randomize from '@helpers/array/randomize';\nimport bufferConcats from '@helpers/bytes/bufferConcats';\n\nexport default function addPadding<T extends number[] | ArrayBuffer | Uint8Array>(\n  bytes: T,\n  blockSize: number = 16,\n  zeroes?: boolean,\n  blockSizeAsTotalLength = false,\n  prepend = false\n): T {\n  const len = (bytes as ArrayBuffer).byteLength || (bytes as Uint8Array).length;\n  const needPadding = blockSizeAsTotalLength ? blockSize - len : blockSize - (len % blockSize);\n  if(needPadding > 0 && needPadding < blockSize) {\n    // //console.log('addPadding()', len, blockSize, needPadding);\n    const padding = new Uint8Array(needPadding);\n    if(zeroes) {\n      for(let i = 0; i < needPadding; ++i) {\n        padding[i] = 0;\n      }\n    } else {\n      randomize(padding);\n    }\n\n    if(bytes instanceof ArrayBuffer) {\n      return (prepend ? bufferConcats(padding, bytes) : bufferConcats(bytes, padding)).buffer as T;\n    } else if(bytes instanceof Uint8Array) {\n      return (prepend ? bufferConcats(padding, bytes) : bufferConcats(bytes, padding)) as T;\n    } else {\n      // @ts-ignore\n      return (prepend ? [...padding].concat(bytes) : bytes.concat([...padding])) as T;\n    }\n  }\n\n  return bytes;\n}\n","import {MOUNT_CLASS_TO} from '@config/debug';\n\nexport default function bytesFromHex(hexString: string) {\n  const len = hexString.length;\n  const bytes = new Uint8Array(Math.ceil(len / 2));\n  let start = 0;\n\n  if(len % 2) { // read 0x581 as 0x0581\n    bytes[start++] = parseInt(hexString.charAt(0), 16);\n  }\n\n  for(let i = start; i < len; i += 2) {\n    bytes[start++] = parseInt(hexString.substr(i, 2), 16);\n  }\n\n  return bytes;\n}\n\nMOUNT_CLASS_TO.bytesFromHex = bytesFromHex;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport randomize from '@helpers/array/randomize';\n\nconst arrays = {\n  8: new Uint8Array(1),\n  16: new Uint16Array(1),\n  32: new Uint32Array(1)\n};\nexport function nextRandomUint(bits: 8 | 16 | 32) {\n  const array = arrays[bits];\n  randomize(array);\n  return array[0];\n}\n\nexport function randomLong() {\n  return '' + nextRandomUint(32) + nextRandomUint(32) % 0xFFFFFF;\n}\n\nexport function randomBytes(length: number) {\n  return randomize(new Uint8Array(length));\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type CallInstance from '@lib/calls/callInstance';\nimport type {MessagesDhConfig} from '@layer';\nimport bigInt from 'big-integer';\nimport {bigIntFromBytes} from '@helpers/bigInt/bigIntConversion';\nimport addPadding from '@helpers/bytes/addPadding';\nimport bytesFromHex from '@helpers/bytes/bytesFromHex';\nimport cryptoWorker from '@lib/crypto/cryptoMessagePort';\nimport {randomBytes} from '@helpers/random';\n\nexport default async function generateDh(dhConfig: MessagesDhConfig.messagesDhConfig) {\n  const {p, g} = dhConfig;\n\n  const generateA = (p: Uint8Array) => {\n    for(;;) {\n      const a = randomBytes(p.length);\n\n      const aBigInt = bigIntFromBytes(a);\n      if(!aBigInt.greater(bigInt.one)) {\n        continue;\n      }\n\n      const pBigInt = bigIntFromBytes(p);\n      if(!aBigInt.lesser(pBigInt.subtract(bigInt.one))) {\n        continue;\n      }\n\n      return a;\n    }\n  };\n\n  const a = generateA(p);\n\n  const gBytes = bytesFromHex(g.toString(16));\n  const g_a = addPadding(await cryptoWorker.invokeCrypto('mod-pow', gBytes, a, p), 256, true, true, true);\n  const g_a_hash = await cryptoWorker.invokeCrypto('sha256', g_a);\n\n  const dh: CallInstance['dh'] = {\n    a: a,\n    g_a: g_a,\n    g_a_hash: g_a_hash,\n    p\n  };\n\n  return dh;\n}\n","export default function bytesXor(bytes1: Uint8Array, bytes2: Uint8Array) {\n  const len = bytes1.length;\n  const bytes = new Uint8Array(len);\n\n  for(let i = 0; i < len; ++i) {\n    bytes[i] = bytes1[i] ^ bytes2[i];\n  }\n\n  return bytes;\n}\n","export default function convertToUint8Array(bytes: Uint8Array | ArrayBuffer | number[] | string): Uint8Array {\n  if(bytes instanceof Uint8Array) {\n    return bytes;\n  } else if(typeof(bytes) === 'string') {\n    return new TextEncoder().encode(bytes);\n  }\n\n  return new Uint8Array(bytes);\n}\n","import ctx from '@environment/ctx';\n\nexport default function bytesToHex(bytes: ArrayLike<number>, joiner = '', uppercase?: boolean) {\n  const length = bytes.length;\n  const arr: string[] = new Array(length);\n  for(let i = 0; i < length; ++i) {\n    arr[i] = (bytes[i] < 16 ? '0' : '') + (bytes[i] || 0).toString(16);\n  }\n\n  const joined = arr.join(joiner);\n  return uppercase ? joined.toUpperCase() : joined;\n}\n\n(ctx as any).bytesToHex = bytesToHex;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport cryptoWorker from '@lib/crypto/cryptoMessagePort';\nimport {AccountPassword, InputCheckPasswordSRP, PasswordKdfAlgo} from '@layer';\nimport addPadding from '@helpers/bytes/addPadding';\nimport bufferConcats from '@helpers/bytes/bufferConcats';\nimport bytesXor from '@helpers/bytes/bytesXor';\nimport convertToUint8Array from '@helpers/bytes/convertToUint8Array';\nimport bigInt from 'big-integer';\nimport {bigIntFromBytes, bigIntToBytes} from '@helpers/bigInt/bigIntConversion';\nimport bytesToHex from '@helpers/bytes/bytesToHex';\n\nexport async function makePasswordHash(password: string, client_salt: Uint8Array, server_salt: Uint8Array) {\n  // ! look into crypto_methods.test.ts\n  let buffer = await cryptoWorker.invokeCrypto('sha256', bufferConcats(client_salt, new TextEncoder().encode(password), client_salt));\n  buffer = bufferConcats(server_salt, buffer, server_salt);\n  buffer = await cryptoWorker.invokeCrypto('sha256', buffer);\n\n  let hash = await cryptoWorker.invokeCrypto('pbkdf2', new Uint8Array(buffer), client_salt, 100000);\n  hash = bufferConcats(server_salt, hash, server_salt);\n\n  buffer = await cryptoWorker.invokeCrypto('sha256', hash);\n\n  return buffer;\n}\n\nexport default async function computeSRP(password: string, state: AccountPassword, isNew: boolean) {\n  const algo = (isNew ? state.new_algo : state.current_algo) as PasswordKdfAlgo.passwordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow;\n\n  const p = bigIntFromBytes(algo.p);\n  const g = bigInt(algo.g);\n\n  /* if(B.compareTo(BigInteger.ZERO) < 0) {\n    console.error('srp_B < 0')\n  }\n\n  if(B.compareTo(p) <= 0) {\n    console.error('srp_B <= p');\n  } */\n\n  /* let check_prime_and_good = (bytes: any, g: number) => {\n    let good_prime = 'c71caeb9c6b1c9048e6c522f70f13f73980d40238e3e21c14934d037563d930f48198a0aa7c14058229493d22530f4dbfa336f6e0ac925139543aed44cce7c3720fd51f69458705ac68cd4fe6b6b13abdc9746512969328454f18faf8c595f642477fe96bb2a941d5bcd1d4ac8cc49880708fa9b378e3c4f3a9060bee67cf9a4a4a695811051907e162753b56b0f6b410dba74d8a84b2a14b3144e0ef1284754fd17ed950d5965b4b9dd46582db1178d169c6bc465b0d6ff9ca3928fef5b9ae4e418fc15e83ebea0f87fa9ff5eed70050ded2849f47bf959d956850ce929851f0d8115f635b105ee2e4e15d04b2454bf6f4fadf034b10403119cd8e3b92fcc5b';\n\n    if(bytesToHex(bytes) === good_prime && [3, 4, 5, 7].indexOf(g) !== -1) {\n      return true;\n    }\n\n    // TO-DO check_prime_and_good_check\n  }; */\n\n  // check_prime_and_good(algo.p, g);\n\n  const pw_hash = await makePasswordHash(password, algo.salt1, algo.salt2);\n  const x = bigInt(bytesToHex(pw_hash), 16);\n\n  const padArray = function(arr: number[] | Uint8Array, len: number) {\n    if(!(arr instanceof Uint8Array)) {\n      arr = convertToUint8Array(arr);\n    }\n\n    return addPadding(arr, len, true, true, true);\n  };\n\n  const v = g.modPow(x, p);\n\n  const flipper = (arr: Uint8Array | number[]) => {\n    const out = new Uint8Array(arr.length);\n    for(let i = 0; i < arr.length; i += 4) {\n      out[i] = arr[i + 3];\n      out[i + 1] = arr[i + 2];\n      out[i + 2] = arr[i + 1];\n      out[i + 3] = arr[i];\n    }\n\n    return out;\n  };\n\n  // * https://core.telegram.org/api/srp#setting-a-new-2fa-password\n  if(isNew) {\n    const bytes = bigIntToBytes(v);\n    return padArray(/* (isBigEndian ? bytes.reverse() : bytes) */bytes, 256);\n  }\n\n  const B = bigIntFromBytes(state.srp_B);\n\n  const pForHash = padArray(bigIntToBytes(p), 256);\n  const gForHash = padArray(bigIntToBytes(g), 256);\n  const b_for_hash = padArray(bigIntToBytes(B), 256);\n\n  const kHash = await cryptoWorker.invokeCrypto('sha256', bufferConcats(pForHash, gForHash));\n  const k = bigIntFromBytes(kHash);\n\n  const k_v = k.multiply(v).mod(p);\n\n  const is_good_mod_exp_first = (modexp: bigInt.BigInteger, prime: bigInt.BigInteger) => {\n    const diff = prime.subtract(modexp);\n    const min_diff_bits_count = 2048 - 64;\n    const max_mod_exp_size = 256;\n    if(diff.isNegative() ||\n      diff.bitLength().toJSNumber() < min_diff_bits_count ||\n      modexp.bitLength().toJSNumber() < min_diff_bits_count ||\n      Math.floor((modexp.bitLength().toJSNumber() + 7) / 8) > max_mod_exp_size)\n      return false;\n    return true;\n  };\n\n  const generate_and_check_random = async() => {\n    while(true) {\n      const a = bigIntFromBytes(flipper(state.secure_random));\n      // const a = str2bigInt('9153faef8f2bb6da91f6e5bc96bc00860a530a572a0f45aac0842b4602d711f8bda8d59fb53705e4ae3e31a3c4f0681955425f224297b8e9efd898fec22046debb7ba8a0bcf2be1ada7b100424ea318fdcef6ccfe6d7ab7d978c0eb76a807d4ab200eb767a22de0d828bc53f42c5a35c2df6e6ceeef9a3487aae8e9ef2271f2f6742e83b8211161fb1a0e037491ab2c2c73ad63c8bd1d739de1b523fe8d461270cedcf240de8da75f31be4933576532955041dc5770c18d3e75d0b357df9da4a5c8726d4fced87d15752400883dc57fa1937ac17608c5446c4774dcd123676d683ce3a1ab9f7e020ca52faafc99969822717c8e07ea383d5fb1a007ba0d170cb', 16);\n\n      const A = g.modPow(a, p);\n      if(is_good_mod_exp_first(A, p)) {\n        const a_for_hash = bigIntToBytes(A);\n\n        const s = await cryptoWorker.invokeCrypto('sha256', bufferConcats(a_for_hash, b_for_hash));\n        // const u = bigInt(s.hex, 16);\n        const u = bigIntFromBytes(s);\n        if(!u.isZero() && !u.isNegative())\n          return {a, a_for_hash, u};\n      }\n    }\n  }\n\n  const {a, a_for_hash, u} = await generate_and_check_random();\n\n  let g_b: bigInt.BigInteger;\n  if(!B.greater(k_v)) {\n    g_b = B.add(p);\n  } else g_b = B;\n  g_b = g_b.subtract(k_v).mod(p);\n\n  const ux = u.multiply(x);\n  const a_ux = a.add(ux);\n  const S = g_b.modPow(a_ux, p);\n\n  const K = await cryptoWorker.invokeCrypto('sha256', padArray(bigIntToBytes(S), 256));\n\n  let h1 = await cryptoWorker.invokeCrypto('sha256', pForHash);\n  const h2 = await cryptoWorker.invokeCrypto('sha256', gForHash);\n  h1 = bytesXor(h1, h2);\n\n  const buff = bufferConcats(\n    h1,\n    await cryptoWorker.invokeCrypto('sha256', algo.salt1),\n    await cryptoWorker.invokeCrypto('sha256', algo.salt2),\n    a_for_hash,\n    b_for_hash,\n    K\n  );\n\n  const M1 = await cryptoWorker.invokeCrypto('sha256', buff);\n\n  const out: InputCheckPasswordSRP.inputCheckPasswordSRP = {\n    _: 'inputCheckPasswordSRP',\n    srp_id: state.srp_id,\n    A: new Uint8Array(a_for_hash),\n    M1\n  };\n\n  return out;\n}\n","var S = new Uint8Array(256);\nvar Si = new Uint8Array(256);\nvar T1 = new Uint32Array(256);\nvar T2 = new Uint32Array(256);\nvar T3 = new Uint32Array(256);\nvar T4 = new Uint32Array(256);\nvar T5 = new Uint32Array(256);\nvar T6 = new Uint32Array(256);\nvar T7 = new Uint32Array(256);\nvar T8 = new Uint32Array(256);\nfunction computeTables() {\n    var d = new Uint8Array(256);\n    var t = new Uint8Array(256);\n    var x2;\n    var x4;\n    var x8;\n    var s;\n    var tEnc;\n    var tDec;\n    var x = 0;\n    var xInv = 0;\n    // Compute double and third tables\n    for (var i = 0; i < 256; i++) {\n        d[i] = i << 1 ^ (i >> 7) * 283;\n        t[d[i] ^ i] = i;\n    }\n    for (; !S[x]; x ^= x2 || 1) {\n        // Compute sbox\n        s = xInv ^ xInv << 1 ^ xInv << 2 ^ xInv << 3 ^ xInv << 4;\n        s = s >> 8 ^ s & 255 ^ 99;\n        S[x] = s;\n        Si[s] = x;\n        // Compute MixColumns\n        x8 = d[x4 = d[x2 = d[x]]];\n        tDec = x8 * 0x1010101 ^ x4 * 0x10001 ^ x2 * 0x101 ^ x * 0x1010100;\n        tEnc = d[s] * 0x101 ^ s * 0x1010100;\n        T1[x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n        T2[x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n        T3[x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n        T4[x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n        T5[s] = tDec = tDec << 24 ^ tDec >>> 8;\n        T6[s] = tDec = tDec << 24 ^ tDec >>> 8;\n        T7[s] = tDec = tDec << 24 ^ tDec >>> 8;\n        T8[s] = tDec = tDec << 24 ^ tDec >>> 8;\n        xInv = t[xInv] || 1;\n    }\n}\n\n/**\n * Gets a uint32 from string in big-endian order order\n */\nfunction s2i(str, pos) {\n    return (str.charCodeAt(pos) << 24\n        ^ str.charCodeAt(pos + 1) << 16\n        ^ str.charCodeAt(pos + 2) << 8\n        ^ str.charCodeAt(pos + 3));\n}\n\n/* eslint-disable import/prefer-default-export */\n/**\n * Helper function for transforming string key to Uint32Array\n */\nfunction getWords(key) {\n    if (key instanceof Uint32Array) {\n        return key;\n    }\n    if (typeof key === 'string') {\n        if (key.length % 4 !== 0)\n            for (var i = key.length % 4; i <= 4; i++)\n                key += '\\0x00';\n        var buf = new Uint32Array(key.length / 4);\n        for (var i = 0; i < key.length; i += 4)\n            buf[i / 4] = s2i(key, i);\n        return buf;\n    }\n    if (key instanceof Uint8Array) {\n        var buf = new Uint32Array(key.length / 4);\n        for (var i = 0; i < key.length; i += 4) {\n            buf[i / 4] = (key[i] << 24\n                ^ key[i + 1] << 16\n                ^ key[i + 2] << 8\n                ^ key[i + 3]);\n        }\n        return buf;\n    }\n    throw new Error('Unable to create 32-bit words');\n}\nfunction xor(left, right, to) {\n    if (to === void 0) { to = left; }\n    for (var i = 0; i < left.length; i++)\n        to[i] = left[i] ^ right[i];\n}\n\ncomputeTables();\n/**\n * Low-level AES Cipher\n */\nvar AES = /** @class */ (function () {\n    function AES(_key) {\n        var key = getWords(_key);\n        if (key.length !== 4 && key.length !== 6 && key.length !== 8) {\n            throw new Error('Invalid key size');\n        }\n        this.encKey = new Uint32Array(4 * key.length + 28);\n        this.decKey = new Uint32Array(4 * key.length + 28);\n        this.encKey.set(key);\n        var rcon = 1;\n        var i = key.length;\n        var tmp;\n        // schedule encryption keys\n        for (; i < 4 * key.length + 28; i++) {\n            tmp = this.encKey[i - 1];\n            // apply sbox\n            if (i % key.length === 0 || (key.length === 8 && i % key.length === 4)) {\n                tmp = S[tmp >>> 24] << 24 ^ S[(tmp >> 16) & 255] << 16 ^ S[(tmp >> 8) & 255] << 8 ^ S[tmp & 255];\n                // shift rows and add rcon\n                if (i % key.length === 0) {\n                    tmp = tmp << 8 ^ tmp >>> 24 ^ (rcon << 24);\n                    rcon = rcon << 1 ^ (rcon >> 7) * 283;\n                }\n            }\n            this.encKey[i] = this.encKey[i - key.length] ^ tmp;\n        }\n        // schedule decryption keys\n        for (var j = 0; i; j++, i--) {\n            tmp = this.encKey[j & 3 ? i : i - 4];\n            if (i <= 4 || j < 4) {\n                this.decKey[j] = tmp;\n            }\n            else {\n                this.decKey[j] = (T5[S[tmp >>> 24]]\n                    ^ T6[S[(tmp >> 16) & 255]]\n                    ^ T7[S[(tmp >> 8) & 255]]\n                    ^ T8[S[tmp & 255]]);\n            }\n        }\n    }\n    AES.prototype.encrypt = function (_message) {\n        var message = getWords(_message);\n        var out = new Uint32Array(4);\n        var a = message[0] ^ this.encKey[0];\n        var b = message[1] ^ this.encKey[1];\n        var c = message[2] ^ this.encKey[2];\n        var d = message[3] ^ this.encKey[3];\n        var rounds = this.encKey.length / 4 - 2;\n        var k = 4;\n        var a2;\n        var b2;\n        var c2;\n        // Inner rounds.  Cribbed from OpenSSL.\n        for (var i = 0; i < rounds; i++) {\n            a2 = T1[a >>> 24] ^ T2[(b >> 16) & 255] ^ T3[(c >> 8) & 255] ^ T4[d & 255] ^ this.encKey[k];\n            b2 = T1[b >>> 24] ^ T2[(c >> 16) & 255] ^ T3[(d >> 8) & 255] ^ T4[a & 255] ^ this.encKey[k + 1];\n            c2 = T1[c >>> 24] ^ T2[(d >> 16) & 255] ^ T3[(a >> 8) & 255] ^ T4[b & 255] ^ this.encKey[k + 2];\n            d = T1[d >>> 24] ^ T2[(a >> 16) & 255] ^ T3[(b >> 8) & 255] ^ T4[c & 255] ^ this.encKey[k + 3];\n            a = a2;\n            b = b2;\n            c = c2;\n            k += 4;\n            // console.log(a, b, c, d);\n        }\n        // Last round.\n        for (var i = 0; i < 4; i++) {\n            out[i] = (S[a >>> 24] << 24\n                ^ S[(b >> 16) & 255] << 16\n                ^ S[(c >> 8) & 255] << 8\n                ^ S[d & 255]\n                ^ this.encKey[k++]);\n            a2 = a;\n            a = b;\n            b = c;\n            c = d;\n            d = a2;\n        }\n        return out;\n    };\n    AES.prototype.decrypt = function (_message) {\n        var message = getWords(_message);\n        var out = new Uint32Array(4);\n        var a = message[0] ^ this.decKey[0];\n        var b = message[3] ^ this.decKey[1];\n        var c = message[2] ^ this.decKey[2];\n        var d = message[1] ^ this.decKey[3];\n        var rounds = this.decKey.length / 4 - 2;\n        var a2;\n        var b2;\n        var c2;\n        var k = 4;\n        // Inner rounds.  Cribbed from OpenSSL.\n        for (var i = 0; i < rounds; i++) {\n            a2 = T5[a >>> 24] ^ T6[(b >> 16) & 255] ^ T7[(c >> 8) & 255] ^ T8[d & 255] ^ this.decKey[k];\n            b2 = T5[b >>> 24] ^ T6[(c >> 16) & 255] ^ T7[(d >> 8) & 255] ^ T8[a & 255] ^ this.decKey[k + 1];\n            c2 = T5[c >>> 24] ^ T6[(d >> 16) & 255] ^ T7[(a >> 8) & 255] ^ T8[b & 255] ^ this.decKey[k + 2];\n            d = T5[d >>> 24] ^ T6[(a >> 16) & 255] ^ T7[(b >> 8) & 255] ^ T8[c & 255] ^ this.decKey[k + 3];\n            a = a2;\n            b = b2;\n            c = c2;\n            k += 4;\n        }\n        // Last round.\n        for (var i = 0; i < 4; i++) {\n            out[3 & -i] = (Si[a >>> 24] << 24\n                ^ Si[(b >> 16) & 255] << 16\n                ^ Si[(c >> 8) & 255] << 8\n                ^ Si[d & 255]\n                ^ this.decKey[k++]);\n            a2 = a;\n            a = b;\n            b = c;\n            c = d;\n            d = a2;\n        }\n        return out;\n    };\n    return AES;\n}());\n\n/**\n * AES-IGE mode.\n */\nvar AES_IGE = /** @class */ (function () {\n    function AES_IGE(key, iv, blockSize) {\n        if (blockSize === void 0) { blockSize = 16; }\n        this.key = getWords(key);\n        this.iv = getWords(iv);\n        this.cipher = new AES(key);\n        this.blockSize = blockSize / 4;\n    }\n    /**\n     * Encrypts plain text with AES-IGE mode.\n     */\n    AES_IGE.prototype.encrypt = function (message, buf) {\n        var text = getWords(message);\n        var cipherText = buf || new Uint32Array(text.length);\n        var prevX = this.iv.subarray(this.blockSize, this.iv.length);\n        var prevY = this.iv.subarray(0, this.blockSize);\n        var yXOR = new Uint32Array(this.blockSize);\n        for (var i = 0; i < text.length; i += this.blockSize) {\n            var x = text.subarray(i, i + this.blockSize);\n            xor(x, prevY, yXOR);\n            var y = this.cipher.encrypt(yXOR);\n            xor(y, prevX);\n            prevX = x;\n            prevY = y;\n            for (var j = i, k = 0; j < text.length && k < 4; j++, k++)\n                cipherText[j] = y[k];\n        }\n        return cipherText;\n    };\n    /**\n     * Decrypts cipher text with AES-IGE mode.\n     */\n    AES_IGE.prototype.decrypt = function (message, buf) {\n        var cipherText = getWords(message);\n        var text = buf || new Uint32Array(cipherText.length);\n        var prevY = this.iv.subarray(this.blockSize, this.iv.length);\n        var prevX = this.iv.subarray(0, this.blockSize);\n        var yXOR = new Uint32Array(this.blockSize);\n        for (var i = 0; i < text.length; i += this.blockSize) {\n            var x = cipherText.subarray(i, i + this.blockSize);\n            xor(x, prevY, yXOR);\n            var y = this.cipher.decrypt(yXOR);\n            xor(y, prevX);\n            prevX = x;\n            prevY = y;\n            for (var j = i, k = 0; j < text.length && k < 4; j++, k++)\n                text[j] = y[k];\n        }\n        return text;\n    };\n    return AES_IGE;\n}());\n\n/**\n * AES-IGE mode.\n */\nvar AES_IGE$1 = /** @class */ (function () {\n    function AES_IGE(key, counter, blockSize) {\n        if (blockSize === void 0) { blockSize = 16; }\n        this.offset = 0;\n        this.key = getWords(key);\n        this.counter = getWords(counter);\n        this.cipher = new AES(key);\n        this.blockSize = blockSize / 4;\n        if (this.counter.length !== 4) {\n            throw new Error('AES-CTR mode counter must be 16 bytes length');\n        }\n    }\n    /**\n     * Encrypts plain text with AES-IGE mode.\n     */\n    AES_IGE.prototype.encrypt = function (message, buf) {\n        var text = getWords(message);\n        var cipherText = buf || new Uint32Array(text.length);\n        var offset = this.offset;\n        for (var i = 0; i < text.length; i += this.blockSize) {\n            var x = this.cipher.encrypt(this.counter);\n            for (var j = i, k = offset; j < text.length && k < this.blockSize; j++, k++)\n                cipherText[j] = x[k] ^ text[j];\n            if (text.length - i >= this.blockSize)\n                this.incrementCounter();\n            if (offset) {\n                i -= offset;\n                offset = 0;\n            }\n        }\n        this.offset = (this.offset + (text.length % 4)) % 4;\n        return cipherText;\n    };\n    /**\n     * Decrypts cipher text with AES-IGE mode.\n     */\n    AES_IGE.prototype.decrypt = function (message, buf) {\n        return this.encrypt(message, buf);\n    };\n    AES_IGE.prototype.incrementCounter = function () {\n        // increment counter\n        for (var carry = this.counter.length - 1; carry >= 0; carry--) {\n            if (++this.counter[carry] < 0xFFFFFFFF)\n                break; // If overflowing, it'll be 0 and we'll have to continue propagating the carry\n        }\n    };\n    return AES_IGE;\n}());\n\nexport default AES;\nexport { AES_IGE$1 as CTR, AES_IGE as IGE };\n","export default function bytesFromWordss(input: Uint32Array) {\n  const o = new Uint8Array(input.byteLength);\n  for(let i = 0, length = input.length * 4; i < length; ++i) {\n    o[i] = ((input[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff);\n  }\n\n  return o;\n}\n","import convertToUint8Array from '@helpers/bytes/convertToUint8Array';\n\nexport default function bytesToWordss(input: Parameters<typeof convertToUint8Array>[0]) {\n  const bytes = convertToUint8Array(input);\n\n  const words: number[] = [];\n  for(let i = 0, len = bytes.length; i < len; ++i) {\n    words[i >>> 2] |= bytes[i] << (24 - (i % 4) * 8);\n  }\n\n  return new Uint32Array(words);\n}\n","import {IGE} from '@cryptography/aes';\nimport addPadding from '@helpers/bytes/addPadding';\nimport bytesFromWordss from '@helpers/bytes/bytesFromWordss';\nimport bytesToWordss from '@helpers/bytes/bytesToWordss';\n\nexport default function aesSync(bytes: Uint8Array, keyBytes: Uint8Array, ivBytes: Uint8Array, encrypt = true) {\n  // console.log(dT(), 'AES start', bytes, keyBytes, ivBytes);\n\n  const cipher = new IGE(bytesToWordss(keyBytes), bytesToWordss(ivBytes));\n  const performedBytes = cipher[encrypt ? 'encrypt' : 'decrypt'](bytesToWordss(bytes));\n  // console.log(dT(), 'AES finish');\n\n  return bytesFromWordss(performedBytes);\n}\n\nexport function aesEncryptSync(bytes: Uint8Array, keyBytes: Uint8Array, ivBytes: Uint8Array) {\n  return aesSync(addPadding(bytes), keyBytes, ivBytes, true);\n}\n\nexport function aesDecryptSync(bytes: Uint8Array, keyBytes: Uint8Array, ivBytes: Uint8Array) {\n  return aesSync(bytes, keyBytes, ivBytes, false);\n}\n","import bigInt from 'big-integer';\nimport {nextRandomUint} from '@helpers/random';\n\nexport default function bigIntRandom(min: bigInt.BigNumber, max: bigInt.BigNumber) {\n  return bigInt.randBetween(min, max, () => {\n    return nextRandomUint(32) / 0xFFFFFFFF;\n    /* const bits = 32;\n    const randomBytes = new Uint8Array(bits / 8);\n    crypto.getRandomValues(randomBytes);\n    const r = bigIntFromBytes(randomBytes).mod(bigInt(2).pow(bits));\n    return r.toJSNumber(); */\n  });\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// Thanks to https://xn--2-umb.com/09/12/brent-pollard-rho-factorisation/\n\nimport bigInt from 'big-integer';\nimport {bigIntFromBytes, bigIntToBytes} from '@helpers/bigInt/bigIntConversion';\nimport bigIntRandom from '@helpers/bigInt/bigIntRandom';\n\n// let test = 0;\nfunction BrentPollardFactor(n: bigInt.BigInteger) {\n  const two = bigInt[2];\n  if(n.remainder(two).isZero()) {\n    return two;\n  }\n\n  const m = bigInt(1000);\n  let a: bigInt.BigInteger,\n    x: bigInt.BigInteger,\n    y: bigInt.BigInteger,\n    ys: bigInt.BigInteger,\n    r: bigInt.BigInteger,\n    q: bigInt.BigInteger,\n    g: bigInt.BigInteger;\n  do\n    a = bigIntRandom(bigInt.one, n.minus(1));\n  while(a.isZero() || a.eq(n.minus(two)));\n  y = bigIntRandom(bigInt.one, n.minus(1));\n  r = bigInt.one;\n  q = bigInt.one;\n\n  // if(!test++) {\n  //   a = bigInt(3);\n  //   y = bigInt(3);\n  // }\n\n  const bigIntUint64 = bigInt('FFFFFFFFFFFFFFFF', 16);\n  const bigIntUint64MinusPqPlusOne = bigIntUint64.minus(n).plus(1);\n\n  const performY = (y: bigInt.BigInteger) => {\n    y = y.pow(two).mod(n);\n    y = y.add(a);\n    if(y.lesser(a)) { // it slows down the script\n      y = y.add(bigIntUint64MinusPqPlusOne);\n    }\n    y = y.mod(n);\n    return y;\n  };\n\n  do {\n    x = y;\n    for(let i = 0; bigInt(i).lesser(r); ++i) {\n      y = performY(y);\n    }\n\n    let k = bigInt.zero;\n    do {\n      ys = y;\n      const condition = bigInt.min(m, r.minus(k));\n      for(let i = 0; bigInt(i).lesser(condition); ++i) {\n        y = performY(y);\n        q = q.multiply(x.greater(y) ? x.minus(y) : y.minus(x)).mod(n);\n      }\n      g = bigInt.gcd(q, n);\n      k = k.add(m);\n    } while(k.lesser(r) && g.eq(bigInt.one));\n\n    r = r.shiftLeft(bigInt.one);\n  } while(g.eq(bigInt.one));\n\n  if(g.eq(n)) {\n    do {\n      ys = performY(ys);\n      g = bigInt.gcd(x.minus(ys).abs(), n);\n    } while(g.eq(bigInt.one));\n  }\n\n  return g;\n}\n\nfunction primeFactors(pqBytes: Uint8Array | number[]) {\n  const n = bigIntFromBytes(pqBytes);\n\n  const factors: bigInt.BigInteger[] = [];\n  const primes: bigInt.BigInteger[] = [];\n\n  let factor = BrentPollardFactor(n);\n  factors.push(n.divide(factor));\n  factors.push(factor);\n\n  // return [factor];\n\n  do {\n    const m = factors.pop();\n\n    if(m.eq(bigInt.one))\n      continue;\n\n    if(m.isPrime(true)) {\n      primes.push(m);\n\n      // Remove the prime from the other factors\n      for(let i = 0; i < factors.length; ++i) {\n        let k = factors[i];\n        if(k.mod(m).isZero()) {\n          do\n            k = k.divide(m);\n          while(k.mod(m).isZero());\n          factors[i] = k;\n        }\n      }\n    } else {\n      // factor = m.lesser(100) ? bigInt(PollardRho(m.toJSNumber())) : this.brentPollardFactor(m);\n      factor = BrentPollardFactor(m);\n      factors.push(m.divide(factor));\n      factors.push(factor);\n    }\n  } while(factors.length);\n\n  return primes;\n}\n\nexport default function factorizeBrentPollardPQ(pqBytes: Uint8Array | number[]): [Uint8Array, Uint8Array] {\n  let factors = primeFactors(pqBytes);\n  factors.sort((a, b) => a.compare(b));\n  if(factors.length > 2) {\n    factors = [\n      factors.splice(factors.length - 2, 1)[0],\n      factors.reduce((acc, v) => acc.multiply(v), bigInt.one)\n    ];\n  }\n\n  const p = factors[0], q = factors[factors.length - 1];\n  return (p.lesser(q) ? [p, q] : [q, p]).map((b) => bigIntToBytes(b)) as any;\n}\n","const subtle = typeof(window) !== 'undefined' && 'crypto' in window ? window.crypto.subtle : self.crypto.subtle;\n\nexport default subtle;\n","import subtle from '@lib/crypto/subtle';\n\nexport default async function pbkdf2(buffer: Parameters<SubtleCrypto['importKey']>[1], salt: HkdfParams['salt'], iterations: number) {\n  const importKey = await subtle.importKey(\n    'raw',\n    buffer,\n    {name: 'PBKDF2'},\n    false,\n    [/* 'deriveKey',  */'deriveBits']\n  );\n\n  /* await subtle.deriveKey(\n    {\n      name: 'PBKDF2',\n      salt,\n      iterations,\n      hash: {name: 'SHA-512'}\n    },\n    importKey,\n    {\n      name: 'AES-CTR',\n      length: 256\n    },\n    false,\n    ['encrypt', 'decrypt']\n  ); */\n\n  const bits = subtle.deriveBits({\n    name: 'PBKDF2',\n    salt,\n    iterations,\n    hash: {name: 'SHA-512'}\n  },\n  importKey,\n  512\n  );\n\n  return bits.then((buffer) => new Uint8Array(buffer));\n}\n","import type {RSAPublicKeyHex} from '@lib/mtproto/rsaKeysManager';\nimport bytesModPow from '@helpers/bytes/bytesModPow';\nimport bytesFromHex from '@helpers/bytes/bytesFromHex';\n\nexport default function rsaEncrypt(bytes: Uint8Array, publicKey: RSAPublicKeyHex) {\n  return bytesModPow(bytes, bytesFromHex(publicKey.exponent), bytesFromHex(publicKey.modulus));\n}\n","import convertToUint8Array from '@helpers/bytes/convertToUint8Array';\nimport subtle from '@lib/crypto/subtle';\n// import sha1 from '@cryptography/sha1';\n\nexport default function sha1(bytes: Parameters<typeof convertToUint8Array>[0]) {\n  return subtle.digest('SHA-1', convertToUint8Array(bytes)).then((b) => {\n    return new Uint8Array(b);\n  });\n  /* //console.trace(dT(), 'SHA-1 hash start', bytes);\n\n  const hashBytes: number[] = [];\n\n  let hash = sha1(String.fromCharCode.apply(null,\n    bytes instanceof Uint8Array ? [...bytes] : [...new Uint8Array(bytes)]));\n  for(let i = 0; i < hash.length; ++i) {\n    hashBytes.push(hash.charCodeAt(i));\n  }\n\n  //console.log(dT(), 'SHA-1 hash finish', hashBytes, bytesToHex(hashBytes));\n\n  return new Uint8Array(hashBytes); */\n}\n","import convertToUint8Array from '@helpers/bytes/convertToUint8Array';\nimport subtle from '@lib/crypto/subtle';\n// import sha256 from '@cryptography/sha256';\n\nexport default function sha256(bytes: Parameters<typeof convertToUint8Array>[0]) {\n  return subtle.digest('SHA-256', convertToUint8Array(bytes)).then((b) => {\n    // console.log('legacy', performance.now() - perfS);\n    return new Uint8Array(b);\n  });\n  /* //console.log('SHA-256 hash start');\n\n  let perfS = performance.now();\n\n\n  let perfD = performance.now();\n  let words = typeof(bytes) === 'string' ? bytes : bytesToWordss(bytes as any);\n  let hash = sha256(words);\n  console.log('darutkin', performance.now() - perfD);\n\n  //console.log('SHA-256 hash finish', hash, sha256(words, 'hex'));\n\n  return bytesFromWordss(hash); */\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {BigInteger} from 'big-integer';\nimport {bigIntFromBytes, bigIntToBytes} from '@helpers/bigInt/bigIntConversion';\nimport addPadding from '@helpers/bytes/addPadding';\nimport subtle from '@lib/crypto/subtle';\n\nconst COUNTER_LENGTH = 16;\n\nexport default class CTR {\n  private cryptoKey: CryptoKey;\n  // private encLeft: Uint8Array;\n  private leftLength: number;\n  private mode: 'encrypt' | 'decrypt';\n  private counter: BigInteger;\n  private queue: {data: Uint8Array, resolve: (data: Uint8Array) => void}[];\n  private releasing: boolean;\n\n  constructor(mode: 'encrypt' | 'decrypt', cryptoKey: CryptoKey, counter: Uint8Array) {\n    this.mode = mode;\n    this.cryptoKey = cryptoKey;\n    this.queue = [];\n    this.counter = bigIntFromBytes(counter);\n  }\n\n  public async update(data: Uint8Array) {\n    return new Promise<Uint8Array>((resolve) => {\n      this.queue.push({data, resolve});\n      this.release();\n    });\n  }\n\n  private async release() {\n    if(this.releasing) {\n      return;\n    }\n\n    this.releasing = true;\n    while(this.queue.length) {\n      const {data, resolve} = this.queue.shift();\n      resolve(await this._update(data));\n    }\n    this.releasing = false;\n  }\n\n  private async perform(data: Uint8Array) {\n    const arrayBuffer: ArrayBuffer = await subtle[this.mode]({\n      name: 'AES-CTR',\n      counter: addPadding(bigIntToBytes(this.counter), COUNTER_LENGTH, true, true, true),\n      length: 128\n    },\n    this.cryptoKey,\n    data\n    );\n\n    return arrayBuffer;\n  }\n\n  private async _update(data: Uint8Array) {\n    let toEncrypt = data;\n    let head: Uint8Array/* , tail: Uint8Array */;\n    if(this.leftLength) {\n      // const leftLength = this.encLeft.byteLength;\n      const leftLength = this.leftLength;\n      const leftLength2 = COUNTER_LENGTH - leftLength;\n      // const left = this.encLeft.concat(toEncrypt.slice(0, leftLength2));\n      const left = (new Uint8Array(leftLength)).concat(toEncrypt.slice(0, leftLength2));\n\n      const performed = await this.perform(left);\n\n      head = new Uint8Array(performed.slice(leftLength));\n\n      toEncrypt = toEncrypt.slice(leftLength2);\n\n      this.counter = this.counter.add(1);\n    }\n\n    const tail = new Uint8Array(await this.perform(toEncrypt));\n\n    const result = head ? head.concat(tail) : tail;\n\n    let length = toEncrypt.length;\n    const leftAfter = length % COUNTER_LENGTH;\n    length -= leftAfter;\n\n    const a = length / COUNTER_LENGTH;\n    this.counter = this.counter.add(a);\n\n    this.leftLength = leftAfter || undefined;\n    // this.encLeft = leftAfter ? toEncrypt.slice(-leftAfter) : undefined;\n\n    return result;\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport CTR from '@lib/crypto/utils/aesCTR';\nimport subtle from '@lib/crypto/subtle';\n\nconst aesCTRs: Map<number, K> = new Map();\nlet lastCTRId = -1;\n\ntype K = {\n  enc: CTR,\n  dec: CTR,\n};\n\nexport async function aesCtrPrepare({encKey, encIv, decKey, decIv}: {[k in 'encKey' | 'encIv' | 'decKey' | 'decIv']: Uint8Array}) {\n  const id = ++lastCTRId;\n\n  const a = [['encrypt', encKey], ['decrypt', decKey]] as ['encrypt' | 'decrypt', Uint8Array][];\n  const promises = a.map(([mode, key]) => {\n    return subtle.importKey(\n      'raw',\n      key,\n      {name: 'AES-CTR'},\n      false,\n      [mode]\n    )\n  });\n\n  const [encCryptoKey, decCryptoKey] = await Promise.all(promises);\n  const enc = new CTR('encrypt', encCryptoKey, encIv.slice());\n  const dec = new CTR('decrypt', decCryptoKey, decIv.slice());\n\n  const k: K = {\n    enc,\n    dec\n  };\n\n  aesCTRs.set(id, k);\n\n  return id;\n}\n\nexport async function aesCtrProcess({id, data, operation}: {id: number, data: Uint8Array, operation: 'encrypt' | 'decrypt'}) {\n  const ctrs = aesCTRs.get(id);\n  const result = await (operation === 'encrypt' ? ctrs.enc : ctrs.dec).update(data);\n  return result;\n}\n\nexport function aesCtrDestroy(id: number) {\n  aesCTRs.delete(id);\n}\n","import SuperMessagePort from '@lib/superMessagePort';\n\n\nconst IV_LENGTH = 12;\n\nexport type EncryptLocalDataArgs = {\n  key: CryptoKey;\n  data: Uint8Array;\n};\n\nexport async function encryptLocalData({key, data}: EncryptLocalDataArgs) {\n  const iv = crypto.getRandomValues(new Uint8Array(IV_LENGTH));\n\n  const encrypted = await crypto.subtle.encrypt(\n    {name: 'AES-GCM', iv},\n    key,\n    data\n  );\n\n  const combined = new Uint8Array(iv.length + encrypted.byteLength);\n  combined.set(iv, 0);\n  combined.set(new Uint8Array(encrypted), iv.length);\n\n  return new SuperMessagePort.TransferableResult(combined, [combined.buffer]);\n}\n\nexport type DecryptLocalDataArgs = {\n  key: CryptoKey;\n  encryptedData: Uint8Array;\n};\n\nexport async function decryptLocalData({key, encryptedData}: DecryptLocalDataArgs) {\n  const iv = encryptedData.slice(0, IV_LENGTH);\n  const ciphertext = encryptedData.slice(IV_LENGTH);\n\n  const decrypted = await crypto.subtle.decrypt(\n    {name: 'AES-GCM', iv},\n    key,\n    ciphertext\n  );\n\n  return new SuperMessagePort.TransferableResult(decrypted, [decrypted])\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport '@lib/polyfill'; // just to include\n\nimport bytesModPow from '@helpers/bytes/bytesModPow';\nimport gzipUncompress from '@helpers/gzipUncompress';\nimport listenMessagePort from '@helpers/listenMessagePort';\nimport getEmojisFingerprint from '@lib/calls/helpers/getEmojisFingerprint';\nimport computeDhKey from '@lib/crypto/computeDhKey';\nimport cryptoMessagePort from '@lib/crypto/cryptoMessagePort';\nimport {CryptoMethods} from '@lib/crypto/crypto_methods';\nimport generateDh from '@lib/crypto/generateDh';\nimport computeSRP from '@lib/crypto/srp';\nimport {aesEncryptSync, aesDecryptSync} from '@lib/crypto/utils/aesIGE';\nimport factorizeBrentPollardPQ from '@lib/crypto/utils/factorize/BrentPollard';\nimport pbkdf2 from '@lib/crypto/utils/pbkdf2';\nimport rsaEncrypt from '@lib/crypto/utils/rsa';\nimport sha1 from '@lib/crypto/utils/sha1';\nimport sha256 from '@lib/crypto/utils/sha256';\nimport {aesCtrDestroy, aesCtrPrepare, aesCtrProcess} from '@lib/crypto/aesCtrUtils';\nimport ctx from '@environment/ctx';\nimport {decryptLocalData, encryptLocalData} from '@lib/crypto/utils/aesLocal';\n// import gzipCompress from '@helpers/gzipCompress';\n\nconsole.log('CryptoWorker start');\n\nconst cryptoMethods: CryptoMethods = {\n  'sha1': sha1,\n  'sha256': sha256,\n  'pbkdf2': pbkdf2,\n  'aes-encrypt': aesEncryptSync,\n  'aes-decrypt': aesDecryptSync,\n  'rsa-encrypt': rsaEncrypt,\n  'factorize': factorizeBrentPollardPQ,\n  // 'factorize-tdlib': factorizeTdlibPQ,\n  // 'factorize-new-new': pqPrimeLeemonNew,\n  'mod-pow': bytesModPow,\n  // 'gzipCompress': gzipCompress,\n  'gzipUncompress': gzipUncompress,\n  'computeSRP': computeSRP,\n  'generate-dh': generateDh,\n  'compute-dh-key': computeDhKey,\n  'get-emojis-fingerprint': getEmojisFingerprint,\n  'aes-ctr-prepare': aesCtrPrepare,\n  'aes-ctr-process': aesCtrProcess,\n  'aes-ctr-destroy': aesCtrDestroy,\n  'aes-local-encrypt': encryptLocalData,\n  'aes-local-decrypt': decryptLocalData\n};\n\ncryptoMessagePort.addMultipleEventsListeners({\n  invoke: ({method, args}) => {\n    // @ts-ignore\n    const result: any = cryptoMethods[method](...args);\n    return result;\n  },\n\n  terminate: () => {\n    ctx.close();\n  },\n\n  port: (_, __, event) => {\n    cryptoMessagePort.attachPort(event.ports[0]);\n  }\n});\n\nif(typeof(MessageChannel) !== 'undefined') listenMessagePort(cryptoMessagePort, (source) => {\n  const channel = new MessageChannel();\n  cryptoMessagePort.attachPort(channel.port1);\n  cryptoMessagePort.invokeVoid('port', undefined, source, [channel.port2]);\n});\n"],"names":["bufferConcats","args","length","acc","v","tmp","lastLength","b","fn","onFinally","callback","result","reason","bigInt","undefined","BASE","LOG_BASE","MAX_INT","MAX_INT_ARR","smallToArray","DEFAULT_ALPHABET","supportsNativeBigInt","Integer","radix","alphabet","caseSensitive","parseValue","parseBase","BigInteger","value","sign","SmallInteger","NativeBigInt","isPrecise","n","arrayToSmall","arr","trim","compareAbs","i","createArray","x","truncate","add","a","l_a","l_b","r","carry","base","sum","addAny","addSmall","l","subtract","a_l","b_l","borrow","difference","subtractAny","subtractSmall","small","multiplyLong","product","a_i","b_j","j","multiplySmall","shiftLeft","multiplyKaratsuba","y","d","c","ac","bd","abcd","useKaratsuba","l1","l2","abs","multiplySmallAndArray","square","a_j","divMod1","divisorMostSignificantDigit","lambda","remainder","divisor","quotientDigit","shift","q","divModSmall","divMod2","part","guess","xlen","highx","highy","check","quotient","divModAny","self","comparison","qSign","mod","mSign","_0","_1","_2","exp","isBasicPrime","millerRabinTest","nPrev","next","strict","isPrime","bits","logN","t","iterations","rng","newT","newR","lastT","lastR","powersOfTwo","powers2Length","highestPower2","shift_isSmall","remQuo","bitwise","xSign","ySign","xRem","yRem","xDigit","yDigit","xDivMod","yDivMod","LOBMASK_I","LOBMASK_BI","roughLOB","integerLogarithm","p","e","max","min","gcd","lcm","randBetween","usedRNG","low","high","range","digits","toBase","restricted","top","digit","text","absBase","alphabetValues","isNegative","start","parseBaseFromArray","val","pow","stringify","neg","out","left","divmod","toBaseString","str","zeros","parseStringValue","split","decimalPlace","isValid","parseNumberValue","module","ulongBigInt","longBigInt","bigIntFromBytes","bytes","bigIntToBytes","bigIntToSigned","bytesModPow","bytesBigInt","expBigInt","modBigInt","resBigInt","u8","u16","i32","fleb","fdeb","clim","freb","eb","_a","fl","revfl","_b","fd","rev","hMap","cd","mb","s","le","co","rvb","sv","r_1","m","flt","fdt","flrm","fdrm","bits16","o","shft","slc","ec","err","ind","msg","nt","inflt","dat","st","buf","dict","sl","dl","noBuf","resize","noSt","cbuf","bl","nbuf","final","pos","bt","lm","dm","lbt","dbt","tbts","type","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","lpos","sym","dsym","end","dend","et","gzs","flg","zs","gzl","zls","inflateSync","data","opts","gunzipSync","unzlibSync","decompressSync","td","tds","gzipUncompress","toString","ctx","listenMessagePort","messagePort","onConnect","onDisconnect","attachPort","listenPort","sendPort","Modes","DEBUG","MOUNT_CLASS_TO","tabId","indexOfAndSplice","array","item","idx","IS_SERVICE_WORKER","IS_WEB_WORKER","IS_WORKER","getWindowClients","postMessage","listener","notifyServiceWorker","all","listeners","notifyWorker","noop","EventListenerBase","reuseResults","name","options","listenerObject","obj","error","collectResults","results","makeError","message","realError","USER_AGENT","IS_SAFARI","IS_FIREFOX","_logTimer","dT","LOG_LEVELS","IS_WEBKIT","STYLES_SUPPORTED","LOGGER_STYLES","methods","logger","prefix","ignoreDebugReset","style","originalPrefix","originalStyle","log","method","logType","newPrefix","level","prefixCache","_type","prefix2","USE_LOCKS","SuperMessagePort","logSuffix","event","task","source","taskId","deferred","payload","previousResolve","ret","resolve","reject","pingResolve","newEvent","id","innerTask","resultTaskPayload","resultTask","ackTask","isPromise","cached","port","promise","lock","port2","portTasks","tasks","batchTask","ports","transfer","withAck","_void","timeout","interval","target","TransferableResult","transferables","SuperMessagePort$1","CryptoMessagePort","sendPortIndex","cryptoMessagePort","readBigIntFromBytesBE","_bits","emojis","getEmojisFingerprint","key","g_a","hash","cryptoWorker","emojisLength","kPartSize","partOffset","index","codePoints","computeDhKey","g_b","key_fingerprint","key_fingerprint_long","randomize","addPadding","blockSize","zeroes","blockSizeAsTotalLength","prepend","len","needPadding","padding","bytesFromHex","hexString","arrays","nextRandomUint","randomBytes","generateDh","dhConfig","g","aBigInt","pBigInt","gBytes","g_a_hash","bytesXor","bytes1","bytes2","convertToUint8Array","bytesToHex","joiner","uppercase","joined","makePasswordHash","password","client_salt","server_salt","buffer","computeSRP","state","isNew","algo","pw_hash","padArray","flipper","B","pForHash","gForHash","b_for_hash","kHash","k_v","is_good_mod_exp_first","modexp","prime","diff","min_diff_bits_count","generate_and_check_random","A","a_for_hash","u","ux","a_ux","S","K","h1","h2","buff","M1","Si","T1","T2","T3","T4","T5","T6","T7","T8","computeTables","x2","x4","x8","tEnc","tDec","xInv","s2i","getWords","xor","right","to","AES","_key","rcon","_message","rounds","k","a2","b2","c2","AES_IGE","iv","cipherText","prevX","prevY","yXOR","bytesFromWordss","input","bytesToWordss","words","aesSync","keyBytes","ivBytes","encrypt","performedBytes","IGE","aesEncryptSync","aesDecryptSync","bigIntRandom","BrentPollardFactor","two","ys","bigIntUint64MinusPqPlusOne","performY","condition","primeFactors","pqBytes","factors","primes","factor","factorizeBrentPollardPQ","subtle","pbkdf2","salt","importKey","rsaEncrypt","publicKey","sha1","sha256","COUNTER_LENGTH","CTR","mode","cryptoKey","counter","toEncrypt","head","leftLength","leftLength2","performed","tail","leftAfter","aesCTRs","lastCTRId","aesCtrPrepare","encKey","encIv","decKey","decIv","promises","encCryptoKey","decCryptoKey","enc","dec","aesCtrProcess","operation","ctrs","aesCtrDestroy","IV_LENGTH","encryptLocalData","encrypted","combined","decryptLocalData","encryptedData","ciphertext","decrypted","cryptoMethods","_","__","channel"],"mappings":"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QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,OAAQ,OAAQ,QAAS,QAAS,QAAS,QACpD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,OAAQ,OAAQ,OAAQ,OAC5D,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,OAAQ,QAAS,QAAS,QAAS,QACrD,QAAS,OAAQ,OAAQ,OAAQ,QAAS,QAAS,QACnD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,OAAQ,QAAS,QACrD,QAAS,QAAS,OAAQ,QAAS,QAAS,OAAQ,OACpD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OACtD,OAAQ,QAAS,QAAS,QAAS,QAAS,QAAS,QACrD,QAAS,QAAS,QAAS,OAAQ,QAAS,QAAS,QACrD,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QACtD,QAAS,QAAS,QAAS,QAAS,QA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","x_google_ignoreList":[2,6,33]}