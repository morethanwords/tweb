function ct(...r){const e=r.reduce((s,n)=>s+(n.byteLength||n.length),0),t=new Uint8Array(e);let a=0;return r.forEach(s=>{t.set(s instanceof ArrayBuffer?new Uint8Array(s):s,a),a+=s.byteLength||s.length}),t}Uint8Array.prototype.concat=function(...r){return ct(this,...r)};Uint8Array.prototype.toJSON=function(){return[...this]};Promise.prototype.finally=Promise.prototype.finally||function(r){const e=t=>Promise.resolve(r()).then(t);return this.then(t=>e(()=>t),t=>e(()=>Promise.reject(t)))};function vi(r){return+r<0}function Pi(r){return+r>=0}String.prototype.toUserId=function(){return(+this).toUserId()};String.prototype.toChatId=function(){return(+this).toChatId()};String.prototype.toPeerId=function(r){return(+this).toPeerId(r)};String.prototype.isPeerId=function(){return/^[\d-]/.test(this.toString())};Number.prototype.toUserId=function(){return+this};Number.prototype.toChatId=function(){return Math.abs(this)};Number.prototype.toPeerId=function(r){return r===void 0?+this:r?-Math.abs(this):+this};Number.prototype.isPeerId=function(){return!0};[["isUser",Pi],["isAnyChat",vi]].forEach(r=>{const e=Array.isArray(r)?r[0]:r,t=Array.isArray(r)?r[1]:r;String.prototype[e]=function(){return t.call(null,this.toString())},Number.prototype[e]=function(){return t.call(null,+this)}});const ce={test:location.search.indexOf("test=1")>0,debug:location.search.indexOf("debug=1")>0,http:!1,ssl:!0,asServiceWorker:!1,transport:"websocket",noSharedWorker:location.search.indexOf("noSharedWorker=1")>0,noServiceWorker:location.search.indexOf("noServiceWorker=1")>0,multipleTransports:location.search.indexOf("noMultipleTransports=1")===-1,noPfs:!0};(ce.http=location.search.indexOf("http=1")>0)&&(ce.multipleTransports=!1);ce.multipleTransports&&(ce.http=!0);ce.http&&(ce.transport="https");const Ce=ce.debug,qr=typeof window<"u"?window:self,pe=qr,Ns=Date.now()%Math.random()*1e8|0,de=typeof window<"u"?window:self;function Me(r,e){const t=r.indexOf(e);return(t===-1?void 0:r.splice(t,1))?.[0]}const ja=typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope,hs=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&!ja,Lt=hs||ja,jr=()=>self.clients.matchAll({includeUncontrolled:!1,type:"window"}),Mi=(r,...e)=>{try{r.postMessage(...e)}catch(t){console.error("[worker] postMessage error:",t,e)}},Si=(r,...e)=>{jr().then(t=>{t.length&&t.slice(r?0:-1).forEach(a=>{Mi(a,...e)})})},bi=(...r)=>{Mi(self,...r)},Di=()=>{};ja&&Si.bind(null,!1);ja&&Si.bind(null,!0);class ba{constructor(e){this._constructor(e)}_constructor(e){this.reuseResults=e,this.listeners={},this.listenerResults={}}addEventListener(e,t,a){var n;const s={callback:t,options:a};if(((n=this.listeners)[e]??(n[e]=new Set)).add(s),this.listenerResults.hasOwnProperty(e)&&(t(...this.listenerResults[e]),a?.once)){this.listeners[e].delete(s);return}}addMultipleEventsListeners(e){for(const t in e)this.addEventListener(t,e[t])}removeEventListener(e,t,a){if(this.listeners[e]){for(const s of this.listeners[e])if(s.callback===t){this.listeners[e].delete(s);break}}}invokeListenerCallback(e,t,...a){let s,n;try{s=t.callback(...a)}catch(i){n=i}if(t.options?.once&&this.removeEventListener(e,t.callback),n)throw n;return s}_dispatchEvent(e,t,...a){this.reuseResults&&(this.listenerResults[e]=a);const s=t&&[],n=this.listeners[e];for(const i of n||[])try{const o=this.invokeListenerCallback(e,i,...a);s&&s.push(o)}catch(o){if(s)throw o}return s}dispatchResultableEvent(e,...t){return this._dispatchEvent(e,!0,...t)}dispatchEvent(e,...t){this._dispatchEvent(e,!1,...t)}cleanup(){this.listeners={},this.listenerResults={}}}function ne(r,e){const t=new Error,a={type:r,stack:t.stack};return e&&(a.message=e),a}const Ka=navigator?navigator.userAgent:null;navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i);navigator.userAgent.toLowerCase().indexOf("android");(()=>{try{return+navigator.userAgent.match(/Chrom(?:e|ium)\/(.+?)(?:\s|\.)/)[1]}catch{}})();const zr="safari"in de||!!(Ka&&(/\b(iPad|iPhone|iPod)\b/.test(Ka)||Ka.match("Safari")&&!Ka.match("Chrome"))),Hr=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;(navigator.maxTouchPoints===void 0||navigator.maxTouchPoints>0)&&navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i)!=-1;const Kr=Date.now();function Aa(){return"["+((Date.now()-Kr)/1e3).toFixed(3)+"]"}var ye=(r=>(r[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Log=4]="Log",r[r.Debug=8]="Debug",r))(ye||{});const Wr=[0,1,2,4,8],Jr=zr||Hr,Fn=!Jr,bs={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},$r=[["debug",8],["info",4],["warn",2],["error",1],["assert",1],["trace",4],["group",4],["groupCollapsed",4],["groupEnd",4]];function je(r,e=7,t=!1,a=""){let s;!Ce&&!t&&(e=1),Fn?a||(ja?a=bs.fg.yellow:hs&&(a=bs.fg.cyan)):a="";const n=a;a?a=`%s ${a}%s`:a="%s";const i=function(...p){return e&4&&console.log(a,Aa(),r,...p)};$r.forEach(([p,d])=>{i[p]=function(...c){return e&d&&console[p](a,Aa(),r,...c)}}),i.setPrefix=function(p){s=p,r="["+p+"]"},i.setPrefix(r),i.setLevel=function(p){e=Wr.slice(0,p+1).reduce((d,c)=>d|c,0)};const o={};return i.bindPrefix=function(p,d=e){return o[p]??(o[p]=je(`${s}] ${Fn&&n?bs.reset:""}[${p}`,d,t,n))},i}const Qr=!0;class Ba extends ba{constructor(e){super(!1),this.logSuffix=e,this.onMessage=t=>{const a=t.data,s=t.source||t.currentTarget;this.processTaskMap[a.type](a,s,t)},this.processResultTask=t=>{const{taskId:a,result:s,error:n}=t.payload,i=this.awaiting[a];i&&(this.debug&&this.log.debug("done",i.taskType,s,n),"error"in t.payload?i.reject(n):i.resolve(s),delete this.awaiting[a])},this.processAckTask=t=>{const a=t.payload,s=this.awaiting[a.taskId];if(!s)return;const n=s.resolve,i={cached:a.cached,result:a.cached?"result"in a?Promise.resolve(a.result):Promise.reject(a.error):new Promise((o,p)=>{s.resolve=o,s.reject=p})};n(i),a.cached&&delete this.awaiting[a.taskId]},this.processPingTask=(t,a,s)=>{this.pushTask(this.createTask("pong",void 0),s.source)},this.processPongTask=(t,a,s)=>{const n=this.pingResolves.get(a);n&&(this.pingResolves.delete(a),n())},this.processCloseTask=(t,a,s)=>{this.detachPort(a)},this.processBatchTask=(t,a,s)=>{const n={data:s.data,source:s.source,currentTarget:s.currentTarget};t.payload.forEach(i=>{n.data=i,this.onMessage(n)})},this.processLockTask=(t,a,s)=>{const n=t.payload;this.requestedLocks.has(n)||(this.requestedLocks.set(n,a),navigator.locks.request(n,()=>{this.processCloseTask(void 0,a,void 0),this.requestedLocks.delete(n)}))},this.processInvokeTask=async(t,a,s)=>{const n=t.id,i=t.payload;let o,p,d;i.void||(o={taskId:n},p=this.createTask("result",o)),i.withAck&&(d=this.createTask("ack",{taskId:n,cached:!0}));let c;try{const f=this.listeners[i.type];if(!f?.size)throw new Error("no listener");const l=f.values().next().value;let m=this.invokeListenerCallback(i.type,l,i.payload,a,s);if(i.void)return;if(c=m instanceof Promise,d){const g=!c;if(d.payload.cached=g,g&&(d.payload.result=m),this.pushTask(d,a),g)return}c&&(m=await m),m instanceof Ba.TransferableResult&&(p.transfer=m.transferables,m=m.value),o.result=m}catch(f){if(this.log.error("worker task error:",f,t),i.void)return;if(d&&d.payload.cached){d.payload.error=f,this.pushTask(d,a);return}o.error=f}this.pushTask(p,a)},this.listenPorts=[],this.sendPorts=[],this.pingResolves=new Map,this.taskId=Math.random(),this.awaiting={},this.pending=new Map,this.log=je("MP"+(e?"-"+e:"")),this.debug=Ce,this.heldLocks=new Map,this.requestedLocks=new Map,this.processTaskMap={result:this.processResultTask,ack:this.processAckTask,invoke:this.processInvokeTask,ping:this.processPingTask,pong:this.processPongTask,close:this.processCloseTask,lock:this.processLockTask,batch:this.processBatchTask}}setOnPortDisconnect(e){this.onPortDisconnect=e}attachPort(e){this.attachListenPort(e),this.attachSendPort(e)}attachListenPort(e){this.listenPorts.push(e),e.addEventListener("message",this.onMessage)}attachSendPort(e){if(this.log.warn("attaching send port"),e.start?.(),this.sendPorts.push(e),typeof window<"u"&&Qr)if("locks"in navigator){const t=["lock",Ns,this.logSuffix||"",Math.random()*2147483647|0].join("-");this.log.warn("created lock",t);const a=new Promise(s=>this.heldLocks.set(e,{resolve:s,id:t})).then(()=>this.heldLocks.delete(e));navigator.locks.request(t,()=>(this.resendLockTask(e),a))}else window.addEventListener("beforeunload",()=>{const t=this.createTask("close",void 0);this.postMessage(void 0,t)});this.releasePending()}resendLockTask(e){const t=this.heldLocks.get(e);t&&this.pushTask(this.createTask("lock",t.id),e)}detachPort(e){this.log.warn("disconnecting port"),Me(this.listenPorts,e),Me(this.sendPorts,e),e.removeEventListener?.("message",this.onMessage),e.close?.(),this.onPortDisconnect?.(e),this.heldLocks.get(e)?.resolve();const a=ne("PORT_DISCONNECTED");for(const s in this.awaiting){const n=this.awaiting[s];n.port===e&&(n.reject(a),delete this.awaiting[s])}}postMessage(e,t){(Array.isArray(e)?e:e?[e]:this.sendPorts).forEach(s=>{s.postMessage(t,t.transfer)})}async releasePending(){this.releasingPending||(this.releasingPending=!0,await Promise.resolve(),this.debug&&this.log.debug("releasing tasks, length:",this.pending.size),this.pending.forEach((e,t)=>{let a=e;{let n;a=[],e.forEach(i=>{i.transfer?(n=void 0,a.push(i)):(n||(n=this.createTask("batch",[]),a.push(n)),n.payload.push(i))})}const s=t?[t]:this.sendPorts;s.length&&(a.forEach(n=>{try{this.postMessage(s,n)}catch(i){this.log.error("postMessage error:",i,n,s)}}),this.pending.delete(t))}),this.debug&&this.log.debug("released tasks"),this.releasingPending=!1)}createTask(e,t,a){return{type:e,payload:t,id:this.taskId++,transfer:a}}createInvokeTask(e,t,a,s,n){return this.createTask("invoke",{type:e,payload:t,withAck:a,void:s},n)}pushTask(e,t){let a=this.pending.get(t);a||this.pending.set(t,a=[]),a.push(e),this.releasePending()}invokeVoid(e,t,a,s){const n=this.createInvokeTask(e,t,void 0,!0,s);this.pushTask(n,a)}invoke(e,t,a,s,n,i){this.debug&&this.log.debug("start",e,t);let o;const p=new Promise((d,c)=>{o=this.createInvokeTask(e,t,a,void 0,n),this.awaiting[o.id]={resolve:d,reject:c,taskType:e,port:s},this.pushTask(o,s)});if(i){const{reject:d}=this.awaiting[o.id];setTimeout(()=>{d(ne("TIMEOUT"))},i)}if(Lt){p.finally(()=>{clearInterval(d)});const d=de.setInterval(()=>{this.log.error("task still has no result",o,s)},Lt?6e4:5e3)}return p}invokeExceptSource(e,t,a){const s=this.sendPorts.slice();Me(s,a),s.forEach(n=>{this.invokeVoid(e,t,n)})}async invokeExceptSourceAsync(e,t,a){const s=this.sendPorts.slice();Me(s,a),await Promise.all(s.map(n=>this.invoke(e,t,void 0,n)))}}(r=>{class e{constructor(a,s){this.value=a,this.transferables=s}}r.TransferableResult=e})(Ba||(Ba={}));var cn=Ba;class Yr extends cn{constructor(){super("CRYPTO"),this.lastIndex=-1}invokeCryptoNew({method:e,args:t,transfer:a}){const s={method:e,args:t},n=this.listeners.invoke;if(n?.size){let o=n.values().next().value.callback(s);return!Lt&&!(o instanceof Promise)&&(o=Promise.resolve(o)),o}const i=e==="aes-encrypt"||e==="aes-decrypt"?this.lastIndex=(this.lastIndex+1)%this.sendPorts.length:0;return this.invoke("invoke",s,void 0,this.sendPorts[i],a)}invokeCrypto(e,...t){return this.invokeCryptoNew({method:e,args:t})}sendToOnePort(e){this.invokeVoid("port",void 0,this.sendPorts[0],[e])}}const Y=new Yr;pe&&(pe.cryptoMessagePort=Y);let Ci;function Ft(){return Ci}function Xr(r){return Ci=r}const Zr=26,Tn=["web.telegram.org","webk.telegram.org"],Un=Math.min(4,navigator.hardwareConcurrency??4),le={id:1025907,hash:"452b0359b988148995f22ff0f4229750",pushServerKey:"BB3JzmQIBTl8ZdTmLzhkZVnoYxoSvUmCe1CqqF53u2j0WbEFo2m--mOBagroDFdqMeESfz3ue1Z1e5PTIxMYH_g",version:"2.2",versionFull:"2.2 (628)",build:628,langPackVersion:261880,langPackLocalVersion:Zr,langPack:"webk",langPackCode:"en",domains:Tn,baseDcId:2,isMainDomain:Tn.includes(location.hostname),suffix:"K",threads:Un,cryptoWorkers:Un,interclientBroadcastChannel:"tgweb"};le.isMainDomain&&(le.id=2496,le.hash="8da85b0d5bfe62527e5b244c209159c3",le.pushServerKey="BHEbKOXt-GD8MCTTYiAYT3I5R4MB0epIE7Tbbymj1uR0xJRE_7m27eXTVAC_P19TeZnO9413lRz-0oZ87JRPKPM");function Se(){}const eo={isFulfilled:!1,isRejected:!1,notify:()=>{},notifyAll:function(...r){this.lastNotify=r,this.listeners?.forEach(e=>e(...r))},addNotifyListener:function(r){this.lastNotify&&r(...this.lastNotify),(this.listeners??(this.listeners=[])).push(r)},resolve:function(r){this.isFulfilled||this.isRejected||(this.isFulfilled=!0,this._resolve(r),this.onFinish())},reject:function(...r){this.isRejected||this.isFulfilled||(this.isRejected=!0,this._reject(...r),this.onFinish())},onFinish:function(){this.notify=this.notifyAll=this.lastNotify=null,this.listeners&&(this.listeners.length=0),this.cancel&&(this.cancel=Se)}};function $(){let r,e;const t=new Promise((a,s)=>{r=a,e=s});return Object.assign(t,eo),t._resolve=r,t._reject=e,t}self.deferredPromise=$;function qe(r){return new Promise(e=>{setTimeout(e,r)})}class jt{constructor(e,t,a){this.dcId=e,this.url=t,this.pending=[],this.debug=ce.debug&&!1;let s=ye.Error|ye.Log;this.debug&&(s|=ye.Debug),this.log=je(`HTTP-${e}`+a,s),this.log("constructor"),this.connected=!1}_send(e,t,a=3e4){this.debug&&this.log.debug("-> body length to send:",e.length);const s=new AbortController,n=setTimeout(()=>s.abort(),a);return fetch(this.url,{method:"POST",body:e,mode:t,signal:s.signal}).then(async i=>{if(i.status!==200&&!t)throw i.arrayBuffer().then(p=>{this.log.error("not 200",new TextDecoder("utf-8").decode(new Uint8Array(p)))}),i;this.setConnected(!0);const o=await i.arrayBuffer();return new Uint8Array(o)}).catch(i=>{throw this.setConnected(!1),i}).finally(()=>{clearTimeout(n)})}setConnected(e){this.connected===e||this.destroyed||(this.connected=e,ce.multipleTransports&&va.setTransportValue("https",e))}destroy(){this.setConnected(!1),this.destroyed=!0,this.pending.forEach(e=>e.reject()),this.pending.length=0}send(e){if(this.noScheduler)return this._send(e);{const t=new Promise((a,s)=>{this.pending.push({resolve:a,reject:s,body:e})});return this.releasePending(),t}}async releasePending(){if(!this.releasing){this.releasing=!0;for(let e=0;e<this.pending.length;++e){const t=this.pending[e],{body:a,resolve:s}=t;try{const n=await this._send(a);s(n),this.pending.splice(e,1)}catch(n){this.log.error("Send plain request error:",n),await qe(5e3)}--e}this.releasing=!1}}}class to extends ba{constructor(e,t,a){super(),this.dcId=e,this.url=t,this.debug=ce.debug&&!1,this.handleOpen=()=>{this.log("opened"),this.clearConnectionTimeout(),this.debug&&this.log.debug("sending init packet"),this.dispatchEvent("open")},this.handleError=n=>{this.log.error("handleError",n),this.close()},this.handleClose=n=>{this.log("closed",n),this.removeListeners(),this.dispatchEvent("close")},this.handleMessage=n=>{this.debug&&this.log.debug("<-","handleMessage",n.data.byteLength),this.dispatchEvent("message",n.data)},this.send=n=>{this.debug&&this.log.debug("-> body length to send:",n.length),this.ws.send(n)};let s=ye.Error|ye.Log;this.debug&&(s|=ye.Debug),this.log=je(`WS-${e}`+a,s),this.log("constructor"),this.connect()}removeListeners(){this.ws&&(this.ws.removeEventListener("open",this.handleOpen),this.ws.removeEventListener("close",this.handleClose),this.ws.removeEventListener("error",this.handleError),this.ws.removeEventListener("message",this.handleMessage),this.ws=void 0,this.clearConnectionTimeout())}connect(){this.ws=new WebSocket(this.url,"binary"),this.ws.binaryType="arraybuffer",this.ws.addEventListener("open",this.handleOpen),this.ws.addEventListener("close",this.handleClose),this.ws.addEventListener("error",this.handleError),this.ws.addEventListener("message",this.handleMessage),this.connectionTimeout=de.setTimeout(()=>{this.handleError(new Error("CONNECTION_TIMEOUT"))},7500)}close(){if(this.ws){this.log("close execution");try{this.ws.close()}catch{}this.handleClose()}}clearConnectionTimeout(){clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0}}function ra(r){if(crypto&&"getRandomValues"in crypto)crypto.getRandomValues(r);else throw new Error("NO_SECURE_RANDOM");return r}class ao{constructor(){this._process=(e,t)=>Y.invokeCryptoNew({method:"aes-ctr-process",args:[{id:this.id,data:e,operation:t}],transfer:[e.buffer]})}async init(e){this.idPromise!==void 0&&this.release();const t=new Uint8Array(64);for(ra(t);;){const c=t[3]<<24|t[2]<<16|t[1]<<8|t[0],f=t[7]<<24|t[6]<<16|t[5]<<8|t[4];if(t[0]!==239&&c!==1145128264&&c!==1414745936&&c!==542393671&&c!==1230262351&&c!==4008636142&&c!==3722304989&&f!==0)break;ra(t)}const a=t.slice().reverse(),s=t.slice(8,40),n=t.slice(40,56),i=a.slice(8,40),o=a.slice(40,56),p=this.idPromise=Y.invokeCrypto("aes-ctr-prepare",{encKey:s,encIv:n,decKey:i,decIv:o});this.process=async(c,f)=>(await p,this._process(c,f)),this.id=await p,this.process=this._process,t.set(e.obfuscateTag,56);const d=await this.encode(t.slice());return t.set(d.slice(56,64),56),t}encode(e){return this.process(e,"encrypt")}decode(e){return this.process(e,"decrypt")}async release(){const e=this.idPromise;if(e===void 0)return;this.id=void 0,this.idPromise=void 0;const t=await e;Y.invokeCrypto("aes-ctr-destroy",t)}destroy(){this.release()}}class so{constructor(){this.tag=239,this.obfuscateTag=new Uint8Array([this.tag,this.tag,this.tag,this.tag])}encodePacket(e){const t=e.byteLength>>2;let a;return t<127?a=new Uint8Array([t]):a=new Uint8Array([127,t&255,t>>8&255,t>>16&255]),a.concat(e)}readPacket(e){let t=e[0];return t>=127?(t=e[1]|e[2]<<8|e[3]<<16,e.slice(4,t<<3)):e.slice(1,t<<3)}}var no=new so,pt=(r=>(r[r.Connected=0]="Connected",r[r.Connecting=1]="Connecting",r[r.Closed=2]="Closed",r[r.TimedOut=3]="TimedOut",r))(pt||{});function ue(r,e="",t){const a=r.length,s=new Array(a);for(let i=0;i<a;++i)s[i]=(r[i]<16?"0":"")+(r[i]||0).toString(16);const n=s.join(e);return t?n.toUpperCase():n}de.bytesToHex=ue;class io{constructor(e,t,a,s,n){this.Connection=e,this.dcId=t,this.url=a,this.logSuffix=s,this.retryTimeout=n,this.codec=no,this.obfuscation=new ao,this.pending=[],this.debug=ce.debug&&!1,this.connected=!1,this.autoReconnect=!0,this.onOpen=async()=>{this.connected=!0,ce.multipleTransports&&va.setTransportOpened("websocket");const o=await this.obfuscation.init(this.codec);this.connected&&(this.connection.send(o),this.networker&&(this.pending.length=0,this.networker.onTransportOpen()),setTimeout(()=>{this.releasePending()},0))},this.onMessage=async o=>{const p=Date.now();let d=await this.obfuscation.decode(new Uint8Array(o));if(d=this.codec.readPacket(d),this.networker){this.networker.onTransportData(d,p);return}const c=this.pending.shift();if(!c){this.debug&&this.log.debug("no pending for res:",ue(d));return}c.resolve(d)},this.onClose=()=>{this.clear();let o,p;if(this.autoReconnect){const d=Date.now(),c=d-this.lastCloseTime;o=!isNaN(c)&&c<this.retryTimeout?this.retryTimeout-c:0,p=d+o}this.networker&&(this.networker.setConnectionStatus(pt.Closed,p),this.pending.length=0),this.autoReconnect?(this.log("will try to reconnect after timeout:",o/1e3),this.reconnectTimeout=de.setTimeout(this.reconnect,o)):this.log("reconnect isn't needed")},this.reconnect=()=>{if(this.reconnectTimeout!==void 0&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),!this.connection){if(this.log("trying to reconnect..."),this.lastCloseTime=Date.now(),this.networker)this.networker.setConnectionStatus(pt.Connecting);else for(const o of this.pending)o.bodySent&&(o.bodySent=!1);this.connect()}};let i=ye.Error|ye.Log;this.debug&&(i|=ye.Debug),this.log=je(`TCP-${t}`+s,i),this.log("constructor"),this.connect()}clear(){ce.multipleTransports&&this.connected&&va.setTransportClosed("websocket"),this.connected=!1,this.connection&&(this.connection.removeEventListener("open",this.onOpen),this.connection.removeEventListener("close",this.onClose),this.connection.removeEventListener("message",this.onMessage),this.connection=void 0)}forceReconnect(){this.close(),this.reconnect()}destroy(){this.setAutoReconnect(!1),this.close(),this.obfuscation&&this.obfuscation.destroy(),this.pending.forEach(e=>{e.reject&&e.reject()}),this.pending.length=0}close(){const e=this.connection;if(e){const t=this.connected;this.clear(),t&&(e.addEventListener("message",this.onMessage),e.addEventListener("close",()=>{e.removeEventListener("message",this.onMessage)},{once:!0}),e.close())}}setAutoReconnect(e){this.autoReconnect=e,e?!this.connection&&this.reconnectTimeout===void 0&&this.reconnect():this.reconnectTimeout!==void 0&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0)}connect(){this.connection&&this.close(),this.connection=new this.Connection(this.dcId,this.url,this.logSuffix),this.connection.addEventListener("open",this.onOpen),this.connection.addEventListener("close",this.onClose),this.connection.addEventListener("message",this.onMessage)}changeUrl(e){this.url!==e&&(this.url=e,this.forceReconnect())}encodeBody(e){const t=this.codec.encodePacket(e);return this.obfuscation.encode(t)}send(e){this.debug&&this.log.debug("-> body length to pending:",e.length);const t=void 0;if(this.networker)this.pending.push({body:e,encoded:t}),this.releasePending();else{const a=new Promise((s,n)=>{this.pending.push({resolve:s,reject:n,body:e,encoded:t})});return this.releasePending(),a}}async releasePending(){if(!this.connected||this.releasingPending)return;this.releasingPending=!0;let e=this.pending.length,t=!1;for(let a=0;a<e;++a){const s=this.pending[a];if(!s)break;const{body:n,bodySent:i}=s;if(n&&!i){this.debug&&this.log.debug("-> body length to send:",n.length);const o=s.encoded??(s.encoded=await this.encodeBody(n));if(!this.connected)break;this.connection.send(o),s.resolve?s.bodySent=!0:(this.pending.splice(a--,1),e--),t=!0}}this.releasingPending=void 0,this.pending.length&&t&&this.releasePending()}}const Rn=ce.test?"_test":"",ro="_premium",oo=3e3,po=3e3;function Ii(r){return r==="client"?"":"-1"}function wi(r,e,t){const a=Ii(e),s=e!=="client"?"apiws"+Rn+(t?ro:""):"apiws"+Rn;return`wss://${le.suffix.toLowerCase()}ws${r}${a}.web.telegram.org/${s}`}class ka{constructor(){this.sslSubdomains=["pluto","venus","aurora","vesta","flora"],this.dcOptions=ce.test?[{id:1,host:"149.154.175.10",port:80},{id:2,host:"149.154.167.40",port:80},{id:3,host:"149.154.175.117",port:80}]:[{id:1,host:"149.154.175.50",port:80},{id:2,host:"149.154.167.50",port:80},{id:3,host:"149.154.175.100",port:80},{id:4,host:"149.154.167.91",port:80},{id:5,host:"149.154.171.5",port:80}],this.chosenServers={},this.transportSocket=(e,t,a)=>{const s=wi(e,t,a),n=t==="upload"?"-U":t==="download"?"-D":"",i=t==="client"?oo:po;let o;return o=to,new io(o,e,s,n,i)},this.transportHTTP=(e,t,a)=>{let s;{const i=Ii(t),o=this.sslSubdomains[e-1]+i,p=ce.test?"apiw_test1":"apiw1";s="https://"+o+".web.telegram.org/"+p}const n=t==="upload"?"-U":t==="download"?"-D":"";return new jt(e,s,n)}}chooseServer(e,t="client",a=ce.transport,s=!0,n){this.chosenServers.hasOwnProperty(a)||(this.chosenServers[a]={client:{},download:{},upload:{}});const i=this.chosenServers[a][t];e in i||(i[e]=[]);const o=i[e];if(!o.length||!s){let p;return p=(a==="websocket"?this.transportSocket:this.transportHTTP)(e,t,n),p?(s&&o.push(p),p):(console.error("No chosenServer!",e),null)}return o[0]}static removeTransport(e,t){for(const a in e)for(const s in e[a])for(const n in e[a][s]){const i=e[a][s][n];Me(i,t)}}}class co extends ba{constructor(){super(!0),this.opened=new Map,this.addEventListener("change",e=>{e.get("websocket")||this.waitForWebSocket()})}async pingTransports(){const e=this.dcConfigurator??(this.dcConfigurator=new ka),t=2e3,a=this.transports={https:e.chooseServer(le.baseDcId,"client","https",!1),websocket:e.chooseServer(le.baseDcId,"client","websocket",!1)},s=$();this.transports.https._send(new Uint8Array,"no-cors").then(()=>s.resolve(!0),()=>s.resolve(!1)),setTimeout(()=>s.resolve(!1),t);const n=$(),i=a.websocket;i.setAutoReconnect(!1),i.connection.addEventListener("close",()=>n.resolve(!1),{once:!0}),i.connection.addEventListener("open",()=>n.resolve(!0),{once:!0}),setTimeout(()=>{n.isFulfilled||n.isRejected||(i.connection&&i.connection.close(),n.resolve(!1))},t);const[o,p]=await Promise.all([s,n]);for(const c in a)a[c].destroy();return{https:o||this.opened.get("https")>0,websocket:p||this.opened.get("websocket")>0}}async waitForWebSocket(){if(!this.pinging){for(this.pinging=!0;;){const{https:e,websocket:t}=await this.pingTransports();if((e||t)&&this.dispatchEvent("transport",t||!e?"websocket":"https"),t)break;await qe(1e4)}this.pinging=!1}}setTransportValue(e,t){let a=this.opened.get(e)||0;a+=t?1:-1,this.opened.set(e,a),this.dispatchEvent("change",this.opened)}setTransportOpened(e){return this.setTransportValue(e,!0)}setTransportClosed(e){return this.setTransportValue(e,!1)}}const fo=new co;var va=fo;class re extends cn{constructor(){super("MTPROTO"),re.INSTANCE=this,pe&&(pe.mtprotoMessagePort=this)}static getInstance(){return this.INSTANCE}}class lo extends cn{constructor(){super("SERVICE"),pe&&(pe.serviceMessagePort=this)}}function se(r,e){return r instanceof Promise?r.then(e):e(r)}const Ai=()=>({name:"tweb",version:7,stores:[{name:"session"},{name:"stickerSets"},{name:"users"},{name:"chats"},{name:"dialogs"},{name:"messages"}]}),ns=()=>({name:"tweb-common",version:8,stores:[{name:"session"},{name:"localStorage",encryptedName:"localStorage__encrypted"}]}),kt=r=>({name:`tweb-account-${r}`,version:9,stores:[{name:"session",encryptedName:"session__encrypted"},{name:"stickerSets",encryptedName:"stickerSets__encrypted"},{name:"users",encryptedName:"users__encrypted"},{name:"chats",encryptedName:"chats__encrypted"},{name:"dialogs",encryptedName:"dialogs__encrypted"},{name:"messages",encryptedName:"messages__encrypted"},{name:"webapp",encryptedName:"webapp__encrypted"}]});pe.getDatabaseState=kt;const mo=4,is=mo;function Ds(r,e,t=!1){let a,s,n;const i=(...o)=>{if(a=!0,n=o,s)return;t&&(a=!1,e(...n));const p=s=Math.random();r(()=>{s===p&&(i.clear(),a&&(a=!1,e(...n)))})};return i.clear=()=>{s=void 0},i}function Pa(r,e){if(e)for(const t in e)e[t]!==void 0&&(r[t]=e[t]);return r}const Ua=class Ua{constructor(e){Pa(this,e),ce.test&&(this.name+="_test"),this.storageIsAvailable=!0,this.log=je(["IDB",e.name].join("-")),this.log("constructor"),this.openDatabase(!0),Ua.INSTANCES.push(this)}isAvailable(){return this.storageIsAvailable}openDatabase(e=!1){if(this.openDbPromise&&!e)return this.openDbPromise;const t=(i,o)=>{const p=Array.from(i.indexNames);for(const d of p)i.deleteIndex(d);if(o.indexes?.length)for(const d of o.indexes)i.indexNames.contains(d.indexName)||i.createIndex(d.indexName,d.keyPath,d.objectParameters)},a=(i,o)=>{const p=i.createObjectStore(o.name);t(p,o)};try{var s=indexedDB.open(this.name,this.version);if(!s)return Promise.reject()}catch(i){return this.log.error("error opening db",i.message),this.storageIsAvailable=!1,Promise.reject(i)}let n=!1;return setTimeout(()=>{n||s.onerror(ne("IDB_CREATE_TIMEOUT"))},3e3),this.openDbPromise=new Promise((i,o)=>{s.onsuccess=p=>{n=!0;const d=s.result;let c=!1;this.log("Opened"),d.onerror=f=>{this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",f),o(f)},d.onclose=f=>{this.log.error("closed:",f),!c&&this.openDatabase()},d.onabort=f=>{this.log.error("abort:",f);const l=f.target;this.openDatabase(c=!0),l.onerror&&l.onerror(f),d.close()},d.onversionchange=f=>{this.log.error("onversionchange, lol?")},i(this.db=d)},s.onerror=p=>{n=!0,this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",p),o(p)},s.onupgradeneeded=p=>{n=!0,this.log.warn("performing idb upgrade from",p.oldVersion,"to",p.newVersion);const d=p.target,c=d.result;this.stores.forEach(f=>{if(!c.objectStoreNames.contains(f.name))a(c,f);else{const m=d.transaction.objectStore(f.name);t(m,f)}f.encryptedName&&!c.objectStoreNames.contains(f.encryptedName)&&c.createObjectStore(f.encryptedName)})}}).then(i=>this.openDbPromise=i)}async closeDatabase(){this.db&&(this.db.onclose=()=>{},this.db.close())}static create(e){return this.INSTANCES.find(t=>t.name===e.name)??new Ua(e)}static closeDatabases(e){this.INSTANCES.forEach(t=>{e&&e===t||t.closeDatabase()})}static deleteDatabaseByName(e){return new Promise((t,a)=>{this.INSTANCES.forEach(n=>{if(n.name===e)return n.closeDatabase()});const s=indexedDB.deleteDatabase(e);s.onerror=()=>a(),s.onsuccess=()=>t()})}};Ua.INSTANCES=[];let xa=Ua;class es{constructor(e,t){this.storeName=t,this.log=je(["IDB",e.name,t].join("-")),this.idb=xa.create(e)}close(){return this.idb.closeDatabase()}delete(e,t){const a=Array.isArray(e);return a||(e=[].concat(e)),this.getObjectStore("readwrite",s=>{const n=e.map(i=>s.delete(i));return a?n:n[0]},"",t)}clear(e){return this.getObjectStore("readwrite",t=>t.clear(),"",e)}save(e,t,a){const s=Array.isArray(e);return s||(e=[e],t=[t]),this.getObjectStore("readwrite",n=>{const i=e.map((o,p)=>n.put(t[p],o));return s?i:i[0]},"",a)}get(e,t){const a=Array.isArray(e);if(a){if(!e.length)return Promise.resolve([])}else{if(!e)return;e=[].concat(e)}return this.getObjectStore("readonly",s=>{const n=e.map(i=>s.get(i));return a?n:n[0]},"",t)}async getObjectStore(e,t,a,s=this.storeName){let n;a&&(n=performance.now(),this.log(a+": start"));const i=setTimeout(()=>{this.log.error("transaction not finished",l,a)},1e4),o=this.idb.openDatabase(),p=o instanceof Promise?await o:o;let d,c;const f=new Promise((B,L)=>[d,c]=[B,L]),l=p.transaction([s],e,{durability:"relaxed"}),m=()=>{clearTimeout(i),c(l.error)},g=()=>{clearTimeout(i),a&&this.log(a+": end",performance.now()-n);const B=C.map(L=>L.result);d(D?B:B[0]),a&&this.log(a+": resolved",D?B:B[0])};l.onerror=m;const _=e==="readwrite";_&&(l.oncomplete=()=>g());const S=t(l.objectStore(s),g,m),D=Array.isArray(S),C=D?S:[].concat(S);if(_)return f;const b=C.length;let w=b;const k=()=>{l.error||--w||g()};for(let B=0;B<b;++B){const L=C[B];L.onerror=m,L.onsuccess=k}return f}getAll(e){return this.getObjectStore("readonly",t=>t.getAll(),"",e)}getAllKeys(e){return this.getObjectStore("readonly",t=>t.getAllKeys(),"",e)}getAllEntries(e){const t=[];return new Promise((a,s)=>{this.getObjectStore("readonly",(n,i,o)=>{const p=n.openCursor();return p.onsuccess=d=>{const c=d.target.result;c?(t.push([c.key,c.value]),c.continue()):(i(),a(t))},p.onerror=o,[]},"",e).catch(s)})}}class fn{constructor(){throw new Error("Cannot instantiate a static utility class")}}const In=class In extends fn{static resolveDeferred(e){this.value=e,this.deferred?.resolve(),this.deferred=void 0}static async isUsingPasscode(){if(this.deferred&&await this.deferred,typeof this.value!="boolean")throw new Error("Is using passcode is not boolean WTF?");return this.value}static isUsingPasscodeUndeferred(){return this.value}static resetDeferred(){this.value=void 0,this.deferred=$()}};In.deferred=$();let mt=In;function ha(r){return Array.isArray(r)?r:[r]}function go(r){return r instanceof Uint8Array?r:typeof r=="string"?new TextEncoder().encode(r):new Uint8Array(r)}function uo(r,e="auto"){if(r===0)return"0 B";const t=e==="auto",a=1024,s=Math.floor(Math.log(r)/Math.log(a)),n=e==="auto"?Math.max(0,s-1):e,i=Math.max(0,n),o=["B","KB","MB","GB"],p=(r/Math.pow(a,s)).toFixed(i);return[o[s],t?p:parseFloat(p)].reverse().join(" ")}function ho(r,e){let t,a,s=!1;function n(){a=self.setTimeout(()=>{s=!1,r(...t)?.then(()=>{a=void 0,s&&n()})},e)}const i=(...o)=>{t=o,s=!0,!a&&n()};return i.clear=()=>{self.clearTimeout(a),t=void 0,a=void 0,s=!1},i}const us=class us extends fn{static async get(){return this.deferred&&await this.deferred,this.key}static async getAsBase64(){const e=await this.get();if(!e)return null;const t=await crypto.subtle.exportKey("raw",e);return btoa(String.fromCharCode(...new Uint8Array(t)))}static save(e){this.key=e||null,this.deferred?.resolve(),this.deferred=void 0}static resetDeferred(){this.key=null,this.deferred=$()}};us.key=null,us.deferred=$();let Dt=us;const vt=class vt{constructor(e,t){this.db=e,this.encryptedStoreName=t,this.saveToIDB=async()=>{await this.waitToLoad();const a=performance.now(),s=await vt.encrypt(this.data),n=s.length,i=performance.now();await this.storage.save(vt.STORAGE_KEY,s);const o=performance.now();if(Ce&&Lt){const p=c=>c.toFixed(2);re.getInstance().invokeVoid("log",`[${this.db.name}-${this.encryptedStoreName}] Encrypted and saved ${n} bytes (${uo(n,2)}) of data in ${p(o-a)}ms -- (encrypted in ${p(i-a)}ms, saved in ${p(o-i)}ms)`)}},this.saveToIDBThrottled=ho(()=>this.saveToIDB(),vt.STORAGE_THROTTLE_TIME_MS),this.storage=new es(e,t),this.log=je(`encrypted-storage-${t}`)}static getInstance(e,t){const a=this.getStorageKey(e.name,t);if(this.instances.has(a))return this.instances.get(a);const s=new vt(e,t);return this.instances.set(a,s),s}static getStorageKey(e,t){return`${e}**${t}`}static async encrypt(e){if(!Object.keys(e).length)return null;const t=await Dt.get(),a=go(JSON.stringify(e));return await Y.invokeCryptoNew({method:"aes-local-encrypt",args:[{key:t,data:a}],transfer:[a.buffer]})}static async decrypt(e){const t=await Dt.get(),a=await Y.invokeCryptoNew({method:"aes-local-decrypt",args:[{key:t,encryptedData:e}],transfer:[e.buffer]}),s=new TextDecoder().decode(a);return JSON.parse(s)}loadEncrypted(){(async()=>(this.loadingDataPromise=this.loadFromIDB(),await this.loadingDataPromise,this.loadingDataPromise=void 0))()}async loadDecrypted(e){this.log("loading decrypted",e),this.data=e,await this.saveToIDB()}waitToLoad(){if(this.loadingDataPromise)return this.loadingDataPromise}async loadFromIDB(){try{const e=await this.storage.get(vt.STORAGE_KEY);if(e==null)throw null;if(!(e instanceof Uint8Array))throw new Error("Stored data in encrypted store is not a Uint8Array");const t=await vt.decrypt(e);this.data=t}catch(e){e&&this.log(e),this.data={}}return this.data}async reEncrypt(){await this.saveToIDB()}async save(e,t){await this.waitToLoad();const a=ha(e),s=ha(t);a.forEach((n,i)=>{this.data[n]=s[i]}),this.saveToIDBThrottled()}async get(e){return await this.waitToLoad(),e.map(t=>this.data[t])}async getAllEntries(){return await this.waitToLoad(),Object.entries(this.data)}async getAll(){return await this.waitToLoad(),Object.values(this.data)}async getAllKeys(){return await this.waitToLoad(),Object.keys(this.data)}async delete(e){await this.waitToLoad(),ha(e).forEach(a=>{delete this.data[a]}),this.saveToIDBThrottled()}async clear(){this.data={},await this.storage.clear()}};vt.STORAGE_KEY="data",vt.STORAGE_THROTTLE_TIME_MS=0,vt.instances=new Map;let ft=vt;function yo(){}const ua=class ua{constructor(e,t){this.db=e,this.storeName=t,this._save=async()=>{const s=this.saveDeferred;this.saveDeferred=$();const n=this.keysToSet;if(n.size){const i=Array.from(n.values());n.clear();const o=i.map(p=>this.cache[p]);try{(await this.getStorage()).save(i,o)}catch(p){this.log.error("set error",p,i,o)}}s.resolve(),n.size&&this.saveThrottled()},this._delete=async()=>{const s=this.deleteDeferred;this.deleteDeferred=$();const n=this.keysToDelete;if(n.size){const i=Array.from(n.values());n.clear();try{(await this.getStorage()).delete(i)}catch(o){this.log.error("delete error",o,i)}}s.resolve(),n.size&&this.deleteThrottled()},this._get=async()=>{const s=Array.from(this.getPromises.keys());(await this.getStorage()).get(s).then(i=>{for(let o=0,p=s.length;o<p;++o){const d=s[o],c=this.getPromises.get(d);c&&(c.resolve(this.cache[d]=i[o]),this.getPromises.delete(d))}},i=>{new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE"]).has(i.type)||(this.useStorage=!1,this.log.error("get error",i,s,this.storeName));for(let p=0,d=s.length;p<d;++p){const c=s[p],f=this.getPromises.get(c);f&&(f.resolve(void 0),this.getPromises.delete(c))}}).finally(()=>{this.getPromises.size&&this.getThrottled()})},this.log=je(`AS-${e.name}-${t}`),this.cache={},this.getPromises=new Map,this.keysToSet=new Set,this.saveDeferred=$(),this.keysToDelete=new Set,this.deleteDeferred=$();const a=e.stores.find(s=>s.name===t);this.isEncryptable=!!a?.encryptedName,this.encryptedStoreName=a?.encryptedName,ua.STORAGES.length?this.useStorage=ua.STORAGES[0].useStorage:this.useStorage=!0,this.savingFreezed=!1,ua.STORAGES.push(this),this.saveThrottled=Ds(queueMicrotask,this._save,!1),this.deleteThrottled=Ds(queueMicrotask,this._delete,!1),this.getThrottled=Ds(queueMicrotask,this._get,!1)}async getStorage(){if(this.storage)return this.storage;const e=this.isEncryptable?await mt.isUsingPasscode():!1,t=this.storage=e?ft.getInstance(this.db,this.encryptedStoreName):new es(this.db,this.storeName);return t instanceof ft&&t.loadEncrypted(),t}isAvailable(){return this.useStorage}getCache(){return this.cache}getFromCache(e){return this.cache[e]}setToCache(e,t){return this.cache[e]=t}async get(e,t=!0){if(this.cache.hasOwnProperty(e)&&t)return this.getFromCache(e);if(this.useStorage){const a=this.getPromises.get(e);if(a)return a;const s=$();return this.getPromises.set(e,s),this.getThrottled(),s}}async getAll(){return(await this.getStorage()).getAll().catch(()=>[])}async getAllKeys(){return(await this.getStorage()).getAllKeys().catch(()=>[])}async getAllEntries(){return(await this.getStorage()).getAllEntries().catch(()=>[])}warnAboutSaving(){}set(e,t=!1){const a=this.useStorage&&!t&&!this.savingFreezed;this.warnAboutSaving();let s=!1;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];this.setToCache(n,i),a&&(this.keysToSet.add(n),this.keysToDelete.delete(n),this.saveThrottled()),s=!0}return a&&s?this.saveDeferred:Promise.resolve()}delete(e,t=!1){return this.warnAboutSaving(),e=""+e,t||delete this.cache[e],this.useStorage&&(this.keysToSet.delete(e),this.keysToDelete.add(e),this.deleteThrottled()),this.useStorage?this.deleteDeferred:Promise.resolve()}async clear(e=!1){if(!e)for(const t in this.cache)delete this.cache[t];try{const t=await this.getStorage();await t.clear(),t instanceof ft?await new es(this.db,this.storeName).clear():this.isEncryptable&&await ft.getInstance(this.db,this.encryptedStoreName).clear()}catch{}}async unfreezeAsync(e){const t=this.savingFreezed;this.savingFreezed=!1;try{await e()}catch(a){console.error("unfreezeAsync callback error:",a)}this.savingFreezed=t}static toggleStorage(e,t){return Promise.all(this.STORAGES.map(a=>{if(a.useStorage=e,!(!Lt||!t))if(!e)a.keysToSet.clear(),a.keysToDelete.clear(),a.getPromises.forEach(s=>s.resolve(void 0)),a.getPromises.clear();else return a.set(a.cache)})).catch(yo)}static freezeSaving(e,t){this.STORAGES.forEach(a=>a.savingFreezed=!0);try{e()}catch(a){console.error("freezeSaving callback error:",a)}this.STORAGES.forEach(a=>a.savingFreezed=!1)}static async freezeSavingAsync(e){this.STORAGES.forEach(t=>t.savingFreezed=!0);try{await e()}catch(t){console.error("freezeSavingAsync callback error:",t)}this.STORAGES.forEach(t=>t.savingFreezed=!1)}async toggleEncrypted(e){if(!this.isEncryptable)return;const t=this.storage instanceof ft;if(e===t)return;const a=await this.getAllEntries();if(await this.storage.clear(),e){const s=this.storage=ft.getInstance(this.db,this.encryptedStoreName),n=Object.fromEntries(a);await s.loadDecrypted(n)}else{const s=this.storage=new es(this.db,this.storeName),n=a.map(o=>o[0]),i=a.map(o=>o[1]);await s.save(n,i)}}async reEncrypt(){this.storage instanceof ft&&await this.storage.reEncrypt()}static async toggleEncryptedForAll(e){this.freezeSavingAsync(async()=>{await Promise.all(this.STORAGES.map(t=>t.toggleEncrypted(e)))})}static async reEncryptEncrypted(){this.freezeSavingAsync(async()=>{await Promise.all(this.STORAGES.map(e=>e.reEncrypt()))})}};ua.STORAGES=[];let Ke=ua;pe&&(pe.AppStorage=Ke);class W{getAccountNumber(){return this.accountNumber}createLogger(e,t,a){return je(`ACC-${this.accountNumber}-${e}`,t,a)}setManagersAndAccountNumber(e,t){Object.assign(this,{...e,accountNumber:t}),this.name=this.name??"",this.log=this.createLogger(this.name,this.logTypes,this.logIgnoreDebugReset)}}function _o(r){const e=["users","chats","dialogs"],t={};for(const a of e)t[a]=new Ke(r===void 0?Ai():kt(r),a);return t}function vo(r,e,t=console){if(!(r instanceof Promise))return r;const a=performance.now();t.warn(Aa(),"start",e),r.then(()=>{t.warn(Aa(),"end",e,performance.now()-a)});const s=setTimeout(()=>{t.warn(Aa(),"timeout",e,performance.now()-a)},1e3);return r.finally(()=>{clearTimeout(s)}),r}function Po(r){return(...e)=>vo(...e,r)}async function ki(r,e,t,a){const s=Po(je("STORAGES-LOADER-"+r)),n=Object.keys(e),i=n.map(l=>{const m=e[l].getAll();return s(m,"storage "+l)}),o={},p=await Promise.all(i);for(let l=0,m=n.length;l<m;++l)o[n[l]]=p[l];p.splice(0,n.length);const{storages:d,refetch:c,callback:f}=await t;if(c&&!a)return ki(r,e,t,!0);if(d.size){const l={};for(const[_,S]of d){const D=S.map(C=>e[_].get(""+C));l[_]=Promise.all(D)}await Promise.all(Object.values(l)).catch(Se);const m=[];for(const[_]of d)o[_].length=0,m.push(e[_].clear());await Promise.all(m).catch(Se);const g=[];for(const[_,S]of d){const D=await l[_];for(let C=0;C<S.length;++C){const b=D[C];o[_].push(b),g.push(e[_].set({[S[C]]:b}))}}await Promise.all(g).catch(Se),d.clear()}return await f(),o}const wn=class wn extends W{constructor(e,t){super(),this.resetStoragesPromise=t,this.name="STORAGES",this.storages=_o(e),this._accountNumber=e}loadStorages(){return this.loadStoragesPromise??(this.loadStoragesPromise=ki(this._accountNumber,this.storages,this.resetStoragesPromise))}async loadStorage(e){return this.loadStorages().then(t=>({storage:this.storages[e],results:t[e]}))}static async moveAccountStorages(e,t){const a=this.allStoreNames.map(async s=>{const n=new Ke(kt(e),s),i=new Ke(kt(t),s),o=await n.getAllEntries();o.length&&await i.set(Object.fromEntries(o))});await Promise.all(a)}static async clearAllStoresForAccount(e){const t=this.allStoreNames.map(a=>new Ke(kt(e),a).clear());await Promise.all(t)}static async clearSessionStores(){const e=[2,3,4].map(async t=>{await new Ke(kt(t),"session").clear()});await Promise.all(e)}static async shiftStorages(e){for(let t=e;t<=is;t++)await this.clearAllStoresForAccount(t),t<is&&await this.moveAccountStorages(t+1,t)}};wn.allStoreNames=kt(1).stores.map(e=>e.name);let sa=wn;class Mo extends W{getState(){return this.apiManager.invokeApi("account.getPassword")}updateSettings(e={}){return this.getState().then(t=>{let a,s;const n={password:null,new_settings:{_:"account.passwordInputSettings",hint:e.hint,email:e.email}};e.currentPassword?a=this.cryptoWorker.invokeCrypto("computeSRP",e.currentPassword,t,!1):a=Promise.resolve({_:"inputCheckPasswordEmpty"});const i=t.new_algo,o=new Uint8Array(i.salt1.length+32);return ra(o),o.set(i.salt1,0),i.salt1=o,e.newPassword?s=this.cryptoWorker.invokeCrypto("computeSRP",e.newPassword,t,!0):s=Promise.resolve(new Uint8Array),Promise.all([a,s]).then(p=>{var d;return n.password=p[0],n.new_settings.new_algo=i,n.new_settings.new_password_hash=p[1],(d=n.new_settings).hint??(d.hint=""),this.apiManager.invokeApi("account.updatePasswordSettings",n)})})}getInputCheckPassword(e,t){return this.cryptoWorker.invokeCrypto("computeSRP",e,t,!1)}check(e,t,a={}){return this.getInputCheckPassword(e,t).then(s=>this.apiManager.invokeApi("auth.checkPassword",{password:s},a).then(n=>(n._==="auth.authorization"&&this.apiManager.setUser(n.user),n)))}confirmPasswordEmail(e){return this.apiManager.invokeApi("account.confirmPasswordEmail",{code:e})}requestRecovery(e={}){return this.apiManager.invokeApi("auth.requestPasswordRecovery",{},e)}async confirmPasswordResetEmail(e){const t=await this.apiManager.invokeApi("auth.recoverPassword",{code:e});return t._==="auth.authorization"&&this.apiManager.setUser(t.user),t}resendPasswordEmail(){return this.apiManager.invokeApi("account.resendPasswordEmail")}cancelPasswordEmail(){return this.apiManager.invokeApi("account.cancelPasswordEmail")}resetPassword(){return this.apiManager.invokeApi("account.resetPassword")}declinePasswordReset(){return this.apiManager.invokeApi("account.declinePasswordReset")}getTmpPassword(e,t){return this.apiManager.invokeApi("account.getTmpPassword",{password:e,period:t})}}function We(r,e,t){const a=t&&new Set(t),s=p=>Object.keys(p).filter(d=>p[d]!==void 0),n=t?p=>s(p).filter(d=>!a.has(d)):s,i=typeof r;return r&&e&&i==="object"&&i===typeof e?n(r).length===n(e).length&&n(r).every(p=>We(r[p],e[p],t)):r===e}class So extends W{constructor(){super(),this.contexts=new Map,this.links={},this.name="REFS",this.logIgnoreDebugReset=!0}saveContext(e,t,a){[a,e]=this.getContexts(e),a||(a=new Set,this.contexts.set(e,a)),this.links[ue(e)]=e;for(const s of a)if(We(s,t))return;a.add(t)}getReferenceByLink(e){return this.links[ue(e)]}getContexts(e){return[this.contexts.get(e)||(e=this.getReferenceByLink(e)||e,this.contexts.get(e)),e]}getContext(e){const t=this.getContexts(e);return t[0]?[t[0].values().next().value,t[1]]:void 0}deleteContext(e,t,a){if([a,e]=this.getContexts(e),a){for(const s of a)if(We(s,t))return a.delete(s),a.size||(this.contexts.delete(e),this.apiFileManager.cancelDownloadByReference(e),delete this.links[ue(e)]),!0}return!1}getRefreshPromise(e){switch(e?.type){case"message":return this.appMessagesManager.reloadMessage(e.peerId,e.messageId,!0);case"emojiesSounds":return this.refreshEmojiesSoundsPromise||this.appStickersManager.getAnimatedEmojiSounds(!0).then(()=>{this.refreshEmojiesSoundsPromise=void 0});case"userFull":return this.appProfileManager.getProfile(e.userId,!0);case"customEmoji":return this.appEmojiManager.getCustomEmojiDocuments([e.docId]);case"attachMenuBotIcon":return this.appAttachMenuBotsManager.getAttachMenuBot(e.botId,!0);case"wallPaper":return this.appThemesManager.getWallPaperById(e.wallPaperId);case"storyItem":return this.appStoriesManager.getStoryById(e.peerId,e.storyId,!0);case"premiumPromo":return this.appPaymentsManager.getPremiumPromo(!0);case"webPage":return this.appWebPagesManager.getWebPage(e.url);case"botApp":return this.appAttachMenuBotsManager.getBotApp(e.botId,e.appName);case"chatInvite":return this.appChatInvitesManager.checkChatInvite(e.hash);case"effects":return this.appReactionsManager.getAvailableEffects(!0);case"savedGifs":return this.appGifsManager.getGifs(!0);case"recentStickers":return this.appStickersManager.getRecentStickers(!0);case"favedStickers":return this.appStickersManager.getFavedStickers(!0);case"stickerSet":return this.appStickersManager.getStickerSet(e.input,{overwrite:!0});case"availableEffects":return this.appReactionsManager.getAvailableEffects(!0);case"stickerSearch":return this.appStickersManager.getStickersByEmoticon({emoticon:e.emoticon,includeServerStickers:!0,includeOurStickers:!1});case"savedMusic":return this.appProfileManager.getSavedMusic(e.userId,0,100);default:throw this.log.warn("not implemented context",e),ne("NO_CONTEXT")}}refreshReference(e,t){const a=this.log.bindPrefix("refreshReference");if(a("start",e.slice(),t),!t){const o=this.getContext(e);if(!o)return a("got no context for reference",e.slice()),Promise.reject(ne("NO_CONTEXT"));[t,e]=o}const s=ue(e);let n;try{n=this.getRefreshPromise(t),n instanceof Promise||(n=Promise.resolve(n))}catch(o){n=Promise.reject(o)}a("refreshing reference",s);const i=()=>{const o=ue(e);if(a("refreshed, reference before",s,"after",o),s!==o)return e;this.deleteContext(e,t);const p=this.getContext(e);if(p)return this.refreshReference(e,p[0]);throw a.error("no new context, reference before",s,"after",o,t),ne("NO_NEW_CONTEXT")};return n.then(i,o=>(a.error("error",o),i()))}}function te(r){const e=Date.now();return r?e/1e3|0:e}const bo={Á:"A",Ă:"A",Ắ:"A",Ặ:"A",Ằ:"A",Ẳ:"A",Ẵ:"A",Ǎ:"A",Â:"A",Ấ:"A",Ậ:"A",Ầ:"A",Ẩ:"A",Ẫ:"A",Ä:"A",Ǟ:"A",Ȧ:"A",Ǡ:"A",Ạ:"A",Ȁ:"A",À:"A",Ả:"A",Ȃ:"A",Ā:"A",Ą:"A",Å:"A",Ǻ:"A",Ḁ:"A","Ⱥ":"A",Ã:"A","Ꜳ":"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY",Ḃ:"B",Ḅ:"B",Ɓ:"B",Ḇ:"B","Ƀ":"B",Ƃ:"B",Ć:"C",Č:"C",Ç:"C",Ḉ:"C",Ĉ:"C",Ċ:"C",Ƈ:"C","Ȼ":"C",Ď:"D",Ḑ:"D",Ḓ:"D",Ḋ:"D",Ḍ:"D",Ɗ:"D",Ḏ:"D",ǲ:"D",ǅ:"D",Đ:"D",Ƌ:"D",Ǳ:"DZ",Ǆ:"DZ",É:"E",Ĕ:"E",Ě:"E",Ȩ:"E",Ḝ:"E",Ê:"E",Ế:"E",Ệ:"E",Ề:"E",Ể:"E",Ễ:"E",Ḙ:"E",Ë:"E",Ė:"E",Ẹ:"E",Ȅ:"E",È:"E",Ẻ:"E",Ȇ:"E",Ē:"E",Ḗ:"E",Ḕ:"E",Ę:"E","Ɇ":"E",Ẽ:"E",Ḛ:"E","Ꝫ":"ET",Ḟ:"F",Ƒ:"F",Ǵ:"G",Ğ:"G",Ǧ:"G",Ģ:"G",Ĝ:"G",Ġ:"G",Ɠ:"G",Ḡ:"G",Ǥ:"G",Ḫ:"H",Ȟ:"H",Ḩ:"H",Ĥ:"H","Ⱨ":"H",Ḧ:"H",Ḣ:"H",Ḥ:"H",Ħ:"H",Í:"I",Ĭ:"I",Ǐ:"I",Î:"I",Ï:"I",Ḯ:"I",İ:"I",Ị:"I",Ȉ:"I",Ì:"I",Ỉ:"I",Ȋ:"I",Ī:"I",Į:"I",Ɨ:"I",Ĩ:"I",Ḭ:"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS",Ĵ:"J","Ɉ":"J",Ḱ:"K",Ǩ:"K",Ķ:"K","Ⱪ":"K","Ꝃ":"K",Ḳ:"K",Ƙ:"K",Ḵ:"K","Ꝁ":"K","Ꝅ":"K",Ĺ:"L","Ƚ":"L",Ľ:"L",Ļ:"L",Ḽ:"L",Ḷ:"L",Ḹ:"L","Ⱡ":"L","Ꝉ":"L",Ḻ:"L",Ŀ:"L","Ɫ":"L",ǈ:"L",Ł:"L",Ǉ:"LJ",Ḿ:"M",Ṁ:"M",Ṃ:"M","Ɱ":"M",Ń:"N",Ň:"N",Ņ:"N",Ṋ:"N",Ṅ:"N",Ṇ:"N",Ǹ:"N",Ɲ:"N",Ṉ:"N","Ƞ":"N",ǋ:"N",Ñ:"N",Ǌ:"NJ",Ó:"O",Ŏ:"O",Ǒ:"O",Ô:"O",Ố:"O",Ộ:"O",Ồ:"O",Ổ:"O",Ỗ:"O",Ö:"O",Ȫ:"O",Ȯ:"O",Ȱ:"O",Ọ:"O",Ő:"O",Ȍ:"O",Ò:"O",Ỏ:"O",Ơ:"O",Ớ:"O",Ợ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ȏ:"O","Ꝋ":"O","Ꝍ":"O",Ō:"O",Ṓ:"O",Ṑ:"O",Ɵ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Õ:"O",Ṍ:"O",Ṏ:"O",Ȭ:"O",Ƣ:"OI","Ꝏ":"OO",Ɛ:"E",Ɔ:"O",Ȣ:"OU",Ṕ:"P",Ṗ:"P","Ꝓ":"P",Ƥ:"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q",Ŕ:"R",Ř:"R",Ŗ:"R",Ṙ:"R",Ṛ:"R",Ṝ:"R",Ȑ:"R",Ȓ:"R",Ṟ:"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C",Ǝ:"E",Ś:"S",Ṥ:"S",Š:"S",Ṧ:"S",Ş:"S",Ŝ:"S",Ș:"S",Ṡ:"S",Ṣ:"S",Ṩ:"S","ẞ":"SS",Ť:"T",Ţ:"T",Ṱ:"T",Ț:"T","Ⱦ":"T",Ṫ:"T",Ṭ:"T",Ƭ:"T",Ṯ:"T",Ʈ:"T",Ŧ:"T","Ɐ":"A","Ꞁ":"L",Ɯ:"M","Ʌ":"V","Ꜩ":"TZ",Ú:"U",Ŭ:"U",Ǔ:"U",Û:"U",Ṷ:"U",Ü:"U",Ǘ:"U",Ǚ:"U",Ǜ:"U",Ǖ:"U",Ṳ:"U",Ụ:"U",Ű:"U",Ȕ:"U",Ù:"U",Ủ:"U",Ư:"U",Ứ:"U",Ự:"U",Ừ:"U",Ử:"U",Ữ:"U",Ȗ:"U",Ū:"U",Ṻ:"U",Ų:"U",Ů:"U",Ũ:"U",Ṹ:"U",Ṵ:"U","Ꝟ":"V",Ṿ:"V",Ʋ:"V",Ṽ:"V","Ꝡ":"VY",Ẃ:"W",Ŵ:"W",Ẅ:"W",Ẇ:"W",Ẉ:"W",Ẁ:"W","Ⱳ":"W",Ẍ:"X",Ẋ:"X",Ý:"Y",Ŷ:"Y",Ÿ:"Y",Ẏ:"Y",Ỵ:"Y",Ỳ:"Y",Ƴ:"Y",Ỷ:"Y","Ỿ":"Y",Ȳ:"Y","Ɏ":"Y",Ỹ:"Y",Ź:"Z",Ž:"Z",Ẑ:"Z","Ⱬ":"Z",Ż:"Z",Ẓ:"Z",Ȥ:"Z",Ẕ:"Z",Ƶ:"Z",Ĳ:"IJ",Œ:"OE","ᴀ":"A","ᴁ":"AE",ʙ:"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F",ɢ:"G",ʛ:"G",ʜ:"H",ɪ:"I",ʁ:"R","ᴊ":"J","ᴋ":"K",ʟ:"L","ᴌ":"L","ᴍ":"M",ɴ:"N","ᴏ":"O",ɶ:"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P",ʀ:"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W",ʏ:"Y","ᴢ":"Z",á:"a",ă:"a",ắ:"a",ặ:"a",ằ:"a",ẳ:"a",ẵ:"a",ǎ:"a",â:"a",ấ:"a",ậ:"a",ầ:"a",ẩ:"a",ẫ:"a",ä:"a",ǟ:"a",ȧ:"a",ǡ:"a",ạ:"a",ȁ:"a",à:"a",ả:"a",ȃ:"a",ā:"a",ą:"a","ᶏ":"a",ẚ:"a",å:"a",ǻ:"a",ḁ:"a","ⱥ":"a",ã:"a","ꜳ":"aa",æ:"ae",ǽ:"ae",ǣ:"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay",ḃ:"b",ḅ:"b",ɓ:"b",ḇ:"b","ᵬ":"b","ᶀ":"b",ƀ:"b",ƃ:"b",ɵ:"o",ć:"c",č:"c",ç:"c",ḉ:"c",ĉ:"c",ɕ:"c",ċ:"c",ƈ:"c","ȼ":"c",ď:"d",ḑ:"d",ḓ:"d","ȡ":"d",ḋ:"d",ḍ:"d",ɗ:"d","ᶑ":"d",ḏ:"d","ᵭ":"d","ᶁ":"d",đ:"d",ɖ:"d",ƌ:"d",ı:"i","ȷ":"j",ɟ:"j",ʄ:"j",ǳ:"dz",ǆ:"dz",é:"e",ĕ:"e",ě:"e",ȩ:"e",ḝ:"e",ê:"e",ế:"e",ệ:"e",ề:"e",ể:"e",ễ:"e",ḙ:"e",ë:"e",ė:"e",ẹ:"e",ȅ:"e",è:"e",ẻ:"e",ȇ:"e",ē:"e",ḗ:"e",ḕ:"e","ⱸ":"e",ę:"e","ᶒ":"e","ɇ":"e",ẽ:"e",ḛ:"e","ꝫ":"et",ḟ:"f",ƒ:"f","ᵮ":"f","ᶂ":"f",ǵ:"g",ğ:"g",ǧ:"g",ģ:"g",ĝ:"g",ġ:"g",ɠ:"g",ḡ:"g","ᶃ":"g",ǥ:"g",ḫ:"h",ȟ:"h",ḩ:"h",ĥ:"h","ⱨ":"h",ḧ:"h",ḣ:"h",ḥ:"h",ɦ:"h",ẖ:"h",ħ:"h",ƕ:"hv",í:"i",ĭ:"i",ǐ:"i",î:"i",ï:"i",ḯ:"i",ị:"i",ȉ:"i",ì:"i",ỉ:"i",ȋ:"i",ī:"i",į:"i","ᶖ":"i",ɨ:"i",ĩ:"i",ḭ:"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is",ǰ:"j",ĵ:"j",ʝ:"j","ɉ":"j",ḱ:"k",ǩ:"k",ķ:"k","ⱪ":"k","ꝃ":"k",ḳ:"k",ƙ:"k",ḵ:"k","ᶄ":"k","ꝁ":"k","ꝅ":"k",ĺ:"l",ƚ:"l",ɬ:"l",ľ:"l",ļ:"l",ḽ:"l","ȴ":"l",ḷ:"l",ḹ:"l","ⱡ":"l","ꝉ":"l",ḻ:"l",ŀ:"l",ɫ:"l","ᶅ":"l",ɭ:"l",ł:"l",ǉ:"lj",ſ:"s","ẜ":"s",ẛ:"s","ẝ":"s",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m","ᵯ":"m","ᶆ":"m",ń:"n",ň:"n",ņ:"n",ṋ:"n","ȵ":"n",ṅ:"n",ṇ:"n",ǹ:"n",ɲ:"n",ṉ:"n",ƞ:"n","ᵰ":"n","ᶇ":"n",ɳ:"n",ñ:"n",ǌ:"nj",ó:"o",ŏ:"o",ǒ:"o",ô:"o",ố:"o",ộ:"o",ồ:"o",ổ:"o",ỗ:"o",ö:"o",ȫ:"o",ȯ:"o",ȱ:"o",ọ:"o",ő:"o",ȍ:"o",ò:"o",ỏ:"o",ơ:"o",ớ:"o",ợ:"o",ờ:"o",ở:"o",ỡ:"o",ȏ:"o","ꝋ":"o","ꝍ":"o","ⱺ":"o",ō:"o",ṓ:"o",ṑ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",õ:"o",ṍ:"o",ṏ:"o",ȭ:"o",ƣ:"oi","ꝏ":"oo",ɛ:"e","ᶓ":"e",ɔ:"o","ᶗ":"o",ȣ:"ou",ṕ:"p",ṗ:"p","ꝓ":"p",ƥ:"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q",ʠ:"q","ɋ":"q","ꝗ":"q",ŕ:"r",ř:"r",ŗ:"r",ṙ:"r",ṛ:"r",ṝ:"r",ȑ:"r",ɾ:"r","ᵳ":"r",ȓ:"r",ṟ:"r",ɼ:"r","ᵲ":"r","ᶉ":"r","ɍ":"r",ɽ:"r","ↄ":"c","ꜿ":"c",ɘ:"e",ɿ:"r",ś:"s",ṥ:"s",š:"s",ṧ:"s",ş:"s",ŝ:"s",ș:"s",ṡ:"s",ṣ:"s",ṩ:"s",ʂ:"s","ᵴ":"s","ᶊ":"s","ȿ":"s",ɡ:"g",ß:"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u",ť:"t",ţ:"t",ṱ:"t",ț:"t","ȶ":"t",ẗ:"t","ⱦ":"t",ṫ:"t",ṭ:"t",ƭ:"t",ṯ:"t","ᵵ":"t",ƫ:"t",ʈ:"t",ŧ:"t","ᵺ":"th",ɐ:"a","ᴂ":"ae",ǝ:"e","ᵷ":"g",ɥ:"h","ʮ":"h","ʯ":"h","ᴉ":"i",ʞ:"k","ꞁ":"l",ɯ:"m",ɰ:"m","ᴔ":"oe",ɹ:"r",ɻ:"r",ɺ:"r","ⱹ":"r",ʇ:"t",ʌ:"v",ʍ:"w",ʎ:"y","ꜩ":"tz",ú:"u",ŭ:"u",ǔ:"u",û:"u",ṷ:"u",ü:"u",ǘ:"u",ǚ:"u",ǜ:"u",ǖ:"u",ṳ:"u",ụ:"u",ű:"u",ȕ:"u",ù:"u",ủ:"u",ư:"u",ứ:"u",ự:"u",ừ:"u",ử:"u",ữ:"u",ȗ:"u",ū:"u",ṻ:"u",ų:"u","ᶙ":"u",ů:"u",ũ:"u",ṹ:"u",ṵ:"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v",ṿ:"v",ʋ:"v","ᶌ":"v","ⱱ":"v",ṽ:"v","ꝡ":"vy",ẃ:"w",ŵ:"w",ẅ:"w",ẇ:"w",ẉ:"w",ẁ:"w","ⱳ":"w",ẘ:"w",ẍ:"x",ẋ:"x","ᶍ":"x",ý:"y",ŷ:"y",ÿ:"y",ẏ:"y",ỵ:"y",ỳ:"y",ƴ:"y",ỷ:"y","ỿ":"y",ȳ:"y",ẙ:"y","ɏ":"y",ỹ:"y",ź:"z",ž:"z",ẑ:"z",ʑ:"z","ⱬ":"z",ż:"z",ẓ:"z",ȥ:"z",ẕ:"z","ᵶ":"z","ᶎ":"z",ʐ:"z",ƶ:"z","ɀ":"z",ﬀ:"ff",ﬃ:"ffi",ﬄ:"ffl",ﬁ:"fi",ﬂ:"fl",ĳ:"ij",œ:"oe",ﬆ:"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x",Ё:"YO",Й:"I",Ц:"TS",У:"U",К:"K",Е:"E",Н:"N",Г:"G",Ш:"SH",Щ:"SCH",З:"Z",Х:"H",Ъ:"",ё:"yo",й:"i",ц:"ts",у:"u",к:"k",е:"e",н:"n",г:"g",ш:"sh",щ:"sch",з:"z",х:"h",ъ:"",Ф:"F",Ы:"I",В:"V",А:"A",П:"P",Р:"R",О:"O",Л:"L",Д:"D",Ж:"ZH",Э:"E",ф:"f",ы:"i",в:"v",а:"a",п:"p",р:"r",о:"o",л:"l",д:"d",ж:"zh",э:"e",Я:"Ya",Ч:"CH",С:"S",М:"M",И:"I",Т:"T",Ь:"",Б:"B",Ю:"YU",я:"ya",ч:"ch",с:"s",м:"m",и:"i",т:"t",ь:"",б:"b",ю:"yu"},Do=/[`~!@#$%^&*()\-_=+\[\]\\|{}'";:\/?.>,<]+/g,Co=/^\s+|\s$/g,Io={й:"q",ц:"w",у:"e",к:"r",е:"t",н:"y",г:"u",ш:"i",щ:"o",з:"p",х:"[",ъ:"]",ф:"a",ы:"s",в:"d",а:"f",п:"g",р:"h",о:"j",л:"k",д:"l",ж:";",э:"'",я:"z",ч:"x",с:"c",м:"v",и:"b",т:"n",ь:"m",б:",",ю:".",".":"/"};function wo(r){return r.replace(Do,"").replace(Co,"")}function Ao(r){return r.toLowerCase().replace(/[\wа-я]/g,e=>Io[e]??e)}function ko(r){return r.replace(/[^A-Za-z0-9]/g,e=>bo[e]??e)}function Eo(r,e=!0){return Ei(r,{clearBadChars:!0,latinize:e,ignoreCase:!0})}function Ei(r="",e={}){const t=e.includeTag&&r.charAt(0)==="%",a=r;return e.clearBadChars&&(r=wo(r)),e.latinize&&(r=ko(r)),e.ignoreCase&&(r=r.toLowerCase()),t&&(r="%"+r),e.latinize&&(r+=""+Ao(a)),r}function Fi(r){return r.reduce((e,t)=>(e.push(...t),e),[])}class za{constructor(e={}){this.options=e,this.fullTexts=new Map,e.minChars??(e.minChars=0)}indexObject(e,t){if(t.trim()&&(t=this.processSearchText(t)),!t)return this.fullTexts.delete(e),!1;this.fullTexts.set(e,t)}indexObjectArray(e,t){return this.indexObject(e,t.join(" "))}_search(e,t=e.split(" ").filter(s=>s.trim()),a=this.options.minChars){const s=[],n=this.fullTexts,i=t.length;return n.forEach((o,p)=>{let d=!0,c=0;for(let f=0;f<i;++f){const l=t[f],m=o.indexOf(l),g=f===i-1;if(m===-1||this.options.fullWords&&!g&&o[m+l.length]!==" "||m!==0&&o[m-1]!==" "){d=!1;break}c+=l.length}if(d){c+=i-1;const f=o.length;(a<=c||f<=c)&&s.push({fullText:o,fullTextLength:f,what:p,foundChars:c})}}),s}search(e,t){e=this.processSearchText(e);const s=e.split("").map(o=>this._search(o,void 0,t)),n=Fi(s);return n.sort((o,p)=>{const d=o.fullTextLength-o.foundChars,c=p.fullTextLength-p.foundChars;return d-c||o.fullTextLength-p.fullTextLength}),new Set(n.map(o=>o.what))}processSearchText(e){return this.options?Ei(e,this.options):e}}function Ti(r,e){const t=r.length;if(t!==e.length){const s=t-e.length;return s<0?-1:s>0?1:0}const a=15;for(let s=0;s<t;s+=a){const n=+r.slice(s,s+a),i=+e.slice(s,s+a),o=n-i;if(o)return o}return 0}function Fo(r,e){if(r.toExponential){const t=r-e;return t<0?-1:t>0?1:0}return Ti(r,e)}var _e=(r=>(r[r.None=0]="None",r[r.Top=1]="Top",r[r.Bottom=2]="Bottom",r[r.Both=3]="Both",r))(_e||{});class Jt{constructor(){this.sliceConstructor=Jt.getSliceConstructor(this),this.compareValue??(this.compareValue=Fo);const e=this.constructSlice();this.slices=[e]}static getSliceConstructor(e){return class extends Array{constructor(){super(...arguments),this.end=0}isEnd(a){if((this.end&a)===a)return!0;let s=!1;if(a===1){const n=e.last;s=n.end&a?this.includes(n[n.length-1]):!1}else if(a===2){const n=e.first;s=n.end&a?this.includes(n[0]):!1}else if(a===3)return this.isEnd(1)&&this.isEnd(2);return s&&this.setEnd(a),s}getEnds(){return{top:this.isEnd(1),bottom:this.isEnd(2),both:this.isEnd(3)}}setEnd(a){this.end|=a}unsetEnd(a){this.end&=~a}splice(a,s,...n){const i=super.splice(a,s,...n);if(!this.length){const o=e.slices,p=o.indexOf(this);p!==-1&&(o.length===1?this.unsetEnd(3):o.splice(p,1))}return i}}}constructSlice(...e){const t=new this.sliceConstructor(e.length);for(let a=0,s=e.length;a<s;++a)t[a]=e[a];return t}insertSlice(e,t=!0){if(!e.length)return;const a=this.slices[0];if(!a.length)return a.push(...e),a;const s=e[e.length-1],n=e[0];let i,o=-1,p=-1,d=0;for(;d<this.slices.length&&(i=this.slices[d],o=i.indexOf(s),p=i.indexOf(n),!(p!==-1&&o!==-1));++d)if(p!==-1||o!==-1)break;if(!(p!==-1&&o!==-1))if(p!==-1){const c=e.slice(i.length-p);i.push(...c)}else if(o!==-1){const c=e.slice(0,e.length-o-1);i.unshift(...c)}else{let c=0;for(const f=this.slices.length;c<f;++c){const l=this.slices[c];if(this.compareValue(e[0],l[0])===1)break}this.slices.splice(c,0,this.constructSlice(...e)),d=c}if(t)return this.flatten(d)}flatten(e){if(this.slices.length>=2)for(let t=0,a=this.slices.length;t<a-1;++t){const s=this.slices[t],n=this.slices[t+1];s.indexOf(n[0])!==-1&&(s.setEnd(n.end),this.slices.splice(t+1,1),t<e&&--e,--a,--t,this.insertSlice(n,!1))}return this.slices[e]}get first(){return this.slices[0]}get last(){return this.slices[this.slices.length-1]}get slice(){return this.first}get length(){return this.slice.length}findSlice(e){for(let t=0,a=this.slices.length;t<a;++t){const s=this.slices[t],n=s.indexOf(e);if(n!==-1)return{slice:s,index:n}}}findOffsetInSlice(e,t){for(let a=0;a<t.length;++a)if(this.compareValue(e,t[a])>=0)return{slice:t,offset:e===t[a]?a+1:a}}findSliceOffset(e){let t;for(let a=0;a<this.slices.length;++a){t=this.slices[a];const s=this.findOffsetInSlice(e,t);if(s)return{...s,sliceIndex:a}}if(t?.isEnd(1))return{slice:t,offset:t.length,sliceIndex:this.slices.length-1}}sliceMe(e,t,a){let s=this.slice,n=0,i=0;if(e){const g=this.findSliceOffset(e);if(!g)return;s=g.slice,n=i=g.offset}else if(!s.isEnd(2))return;const o=Math.max(i+t,0),p=i+t+a,d=s.slice(o,p),c=t<0?a+t:a,f=Math.abs(t),l=s.length-i>=c||(s.isEnd(1)?(d.setEnd(1),!0):!1),m=i-f>=0||(s.isEnd(2)?(d.setEnd(2),!0):!1);return{slice:d,offsetIdOffset:n,fulfilled:0|(l&&m?3:(l?1:0)|(m?2:0))}}unshift(...e){let t=this.first;t.length?t.isEnd(2)||(t=this.constructSlice(),t.setEnd(2),this.slices.unshift(t)):t.setEnd(2),t.unshift(...e)}push(...e){let t=this.last;t.length?t.isEnd(1)||(t=this.constructSlice(),t.setEnd(1),this.slices.push(t)):t.setEnd(1),t.push(...e)}delete(e){const t=this.findSlice(e);return t?(t.slice.splice(t.index,1),!0):!1}deleteSlice(e){Me(this.slices,e)}toJSON(){const t={slices:this.slices.map(a=>({values:a.slice(),isEnd:a.getEnds()}))};return JSON.stringify(t)}static fromJSON(e){const t=JSON.parse(e),a=new Jt;return t.slices.forEach(s=>{const n=a.insertSlice(s.values)||a.first;s.isEnd.top&&n.setEnd(1),s.isEnd.bottom&&n.setEnd(2)}),a}}pe&&(pe.SlicedArray=Jt);const Ye=0,Ui=1271266957,To=777,Uo=2666e3,Gs=777e3,Ri=2147483647,Bn=20*1024*1024,Ea="",xn=[7322096,16766590,13338331,9367192,16749490,16478047],Ro="default_static",pa=10,La=4294967296,Bi=La+1,Bo=!1,xo=new Set(["web","k","z","a"]),qs="XTR",Lo="TON",Oo=5e3,Wa=-1,Cs=3*6e4,Qe=0,Pt=1,Ae=new Set([Qe,Pt]),Is=Math.max(...Array.from(Ae))+1;function ht(r,e){for(let t=r.length,a=t-1;a>=0;--a)e(r[a],a,r)}function Ct(r,e,t,a,s){if(!t)t=o=>o;else if(typeof t!="function"){const o=t;t=p=>p[o]}s||(s=(o,p)=>o-p);const n=t(e);if(a??(a=r.indexOf(e)),a!==-1){const o=r[a-1],p=r[a+1];if((!o||s(t(o),n)>=0)&&(!p||s(t(p),n)<=0))return a;r.splice(a,1)}const i=r.length;if(!i||s(n,t(r[i-1]))<=0)return r.push(e)-1;if(s(n,t(r[0]))>=0)return r.unshift(e),0;for(let o=0;o<i;o++)if(s(n,t(r[o]))>0)return r.splice(o,0,e),o;return console.error("wtf",r,e),r.indexOf(e)}function $t(r,e){if(!r)return e;for(var t in r)e.hasOwnProperty(t)||delete r[t];for(var t in e)r[t]=e[t];return r}function Vo(r,e){if(r!==void 0)return r=+r.toFixed(0),r<La?r:r%La}function H(r){return Vo(r)}function wa(r=0){return`index_${r}`}function be(r){return typeof r=="object"&&r!==null}function js(r,e=wa(r?.folder_id)){return r?.[e]}function oe(r){if(r!==void 0&&(r.isPeerId&&r.isPeerId()))return r;if(be(r)){const a=r.user_id;if(a!==void 0)return a.toPeerId(!1);const s=r.channel_id||r.chat_id;return s!==void 0?s.toPeerId(!0):Ye}else if(!r)return Ye;const e=r.charAt(0)==="u",t=r.substr(1).split("_");return e?t[0].toPeerId():(t[0]||"").toPeerId(!0)}function No(r){const e=[r.fromId,r.viaBotId,r.fwdFromId],t=r.media;if(t){const d=[t.user_id,...t.winners||[]];e.push(...d.filter(Boolean).map(m=>m.toPeerId()));const c=[...t.channels||[],t.channel_id];e.push(...c.filter(Boolean).map(m=>m.toPeerId(!0)));const f=[...t.results?.recent_voters||[],t.peer],l=t?.webpage;if(l){const m=l.attributes?.find(g=>g._==="webPageAttributeStory");f.push(m?.peer)}e.push(...f.filter(Boolean).map(m=>oe(m)))}const a=r.reactions?.recent_reactions;a?.length&&e.push(...a.map(d=>oe(d.peer_id)));const s=r.reactions?.top_reactors;s?.length&&e.push(...s.map(d=>oe(d.peer_id)));const n=r.action;if(n){const d=[...n.users||[],n.user_id,n.inviter_id,n.new_creator_id];e.push(...d.filter(Boolean).map(l=>l.toPeerId()));const c=[n.channel_id,n.chat_id];e.push(...c.filter(Boolean).map(l=>l.toPeerId(!0)));const f=[n.boost_peer,...n.peers||[],n.from_id,n.to_id];e.push(...f.filter(Boolean).map(l=>oe(l)))}const i=r.replies?.recent_repliers;i?.length&&e.push(...i.map(d=>oe(d)));const o=r.saved_peer_id;o&&e.push(oe(o));const p=r.reply_to;return p&&e.push(...[p.reply_to_peer_id].filter(Boolean).map(d=>oe(d))),[r.fwd_from,p?.reply_from].filter(Boolean).forEach(d=>{e.push(...[d.from_id,d.saved_from_id,d.saved_from_peer].filter(Boolean).map(c=>oe(c)))}),new Set(e.filter(Boolean))}function na(r,e){const t={writable:!0,configurable:!0},a={};e.forEach(s=>{r.hasOwnProperty(s)||(a[s]=t)}),Object.defineProperties(r,a)}function Ln(r,e,t){return r[e]=t}function Ue(r){return r?._==="forumTopic"}function xe(r){return r?._==="savedDialog"}function Go(r){return r?._==="monoForumDialog"}function nt(r){return r?._==="dialog"}function Mt(r){let e;return nt(r)?e=r.peerId:Ue(r)?e=r.id:xe(r)&&(e=r.savedPeerId),e}function qo(r){if(!nt(r))return Mt(r)}function zs(r){return r>Math.floor(r)}var Hs=(r=>(r[r.Folder=0]="Folder",r[r.Forum=1]="Forum",r[r.Saved=2]="Saved",r))(Hs||{});const St=void 0;class jo extends W{constructor(){super(),this.clear=(e=!1)=>{if(e){this.allDialogsLoaded={},this.pinnedOrders={};for(const t of Ae)this.pinnedOrders[t]=[]}else{this.storage.clear(),this.allDialogsLoaded={},this.saveAllDialogsLoaded(),this.pinnedOrders=Object.assign({},this.pinnedOrders);for(const t of Ae)this.resetPinnedOrder(t);this.savePinnedOrders()}this.forumTopics=new Map,this.savedDialogsPromises=new Map,this.folders={},this.dialogsOffsetDate={},this.dialogsNum=0,this.dialogsIndex=this.createSearchIndex(),this.cachedResults={query:"",count:0,dialogs:[],folderId:0},this.savedDialogs={}},this.onUpdateFolderPeers=e=>{e.folder_peers.forEach(a=>{const{folder_id:s,peer:n}=a,i=this.appPeersManager.getPeerId(n),o=this.dropDialog(i)[0];o&&(o.pFlags?.pinned&&this.handleDialogUnpinning(o,s),o.folder_id=s,this.generateIndexForDialog(o),this.pushDialog({dialog:o})),this.appMessagesManager.scheduleHandleNewDialogs(i,o)})},this.onUpdateDialogPinned=e=>{const t=this.appPeersManager.getPeerId(e.peer.peer);let a,s;e._==="updateDialogPinned"?(s=e.folder_id??Qe,a=this.getDialogOnly(t)):(s=this.appPeersManager.peerId,a=this.getAnyDialog(this.appPeersManager.peerId,t)),this.handleDialogTogglePinned(a,e.pFlags.pinned,s)},this.onUpdatePinnedForumTopic=e=>{const t=this.appPeersManager.getPeerId(e.peer),a=t.isAnyChat()?t.toChatId():void 0,s=this.appMessagesIdsManager.generateMessageId(e.topic_id,a),n=this.getForumTopic(t,s);n&&this.handleDialogTogglePinned(n,e.pFlags.pinned,this.getFilterIdForForum(n))},this.onUpdatePinnedDialogs=e=>{const t=e._==="updatePinnedSavedDialogs";let a;if(t?a=this.appPeersManager.peerId:a=e.folder_id??Qe,e.order)this.handleDialogsPinned(a,e.order.map(s=>this.appPeersManager.getPeerId(s.peer)));else{let s;t?s=this.apiManager.invokeApi("messages.getPinnedSavedDialogs"):s=this.apiManager.invokeApi("messages.getPinnedDialogs",{folder_id:a}),s.then(n=>{this.applyDialogs(n),this.handleDialogsPinned(a,n.dialogs.map(i=>i.peerId))})}},this.onUpdatePinnedForumTopics=async e=>{const t=this.appPeersManager.getPeerId(e.peer),a=t.isAnyChat()?t.toChatId():void 0;if(!this.forumTopics.get(t))return;const n=t;if(e.order){const i=e.order.map(o=>this.appMessagesIdsManager.generateMessageId(o,a));this.handleDialogsPinned(n,i)}else{const i=await this.apiManager.getLimit("topicPin",!0),o=this.apiManager.invokeApi("messages.getForumTopics",{peer:this.appPeersManager.getInputPeerById(t),limit:i,offset_date:0,offset_id:0,offset_topic:0}),c=(await this.processTopics(t,o)).topics.filter(f=>f.pFlags.pinned);this.handleDialogsPinned(n,c.map(f=>f.id))}},this.onUpdateChannelViewForumAsMessages=e=>{const t=e.channel_id.toPeerId(!0),a=this.getDialogOnly(t);a&&(e.enabled?a.pFlags.view_forum_as_messages=!0:delete a.pFlags.view_forum_as_messages,this.setDialogToState(a))},this.name="DIALOGS"}after(){this.clear(!0);const e=t=>{const a=this.getCachedDialogs(!1);for(let s=0;s<a.length;++s)this.processDialogForFilter(a[s],t)};return this.rootScope.addEventListener("filter_order",()=>{const t=this.getCachedDialogs(!1);for(const a in this.folders)this.isVirtualFilter(+a)||delete this.folders[a];for(let a=0;a<t.length;++a){const s=t[a];this.processDialogForFilters(s)}}),this.rootScope.addEventListener("filter_update",e),this.rootScope.addEventListener("filter_new",e),this.rootScope.addEventListener("filter_delete",t=>{const a=this.getCachedDialogs(!1),s=this.getDialogIndexKeyByFilterId(t.id);for(let n=0;n<a.length;++n){const i=a[n];delete i[s]}delete this.folders[t.id]}),this.rootScope.addEventListener("dialog_notify_settings",t=>{this.processChangedUnreadOrUnmuted(t.peerId)}),this.rootScope.addEventListener("chat_update",t=>{const a=t.toPeerId(!0),s=this.getDialogOnly(a);s&&!this.canSaveDialog(a,s)&&this.dropDialogOnDeletion(a)}),this.rootScope.addEventListener("chat_toggle_forum",({chatId:t,enabled:a})=>{const s=t.toPeerId(!0);a||this.flushForumTopicsCache(s),this.processChangedUnreadOrUnmuted(s)}),this.rootScope.addEventListener("user_auth",()=>{this.rootScope.addEventListener("premium_toggle",()=>{[Qe,Pt].forEach(t=>{this.apiUpdatesManager.processLocalUpdate({_:"updatePinnedDialogs",folder_id:t})})})}),this.apiUpdatesManager.addMultipleEventsListeners({updateFolderPeers:this.onUpdateFolderPeers,updateDialogPinned:this.onUpdateDialogPinned,updateSavedDialogPinned:this.onUpdateDialogPinned,updatePinnedForumTopic:this.onUpdatePinnedForumTopic,updatePinnedDialogs:this.onUpdatePinnedDialogs,updatePinnedSavedDialogs:this.onUpdatePinnedDialogs,updatePinnedForumTopics:this.onUpdatePinnedForumTopics,updateChannelViewForumAsMessages:this.onUpdateChannelViewForumAsMessages}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("dialogs")]).then(([t,{results:a,storage:s}])=>{this.storage=s,this.dialogs=this.storage.getCache();for(const n of Ae){const i=t.pinnedOrders[n];if(!i)continue;const o=this.getPinnedOrders(n);o.splice(0,o.length,...i)}a.length&&Ke.freezeSaving(this.setDialogsFromState.bind(this,a),["chats","dialogs","messages","users"]),this.allDialogsLoaded=t.allDialogsLoaded||{},a.length&&this.appDraftsManager.addMissedDialogs()})}indexMyDialog(){const e=this.appUsersManager.getSelf().id.toPeerId(!1);if(this.getDialogOnly(e)){const a=this.appPeersManager.getPeerSearchText(e);this.dialogsIndex.indexObject(e,a)}}setDialogsFromState(e){for(let t=0,a=e.length;t<a;++t){const s=e[t];if(!s)continue;s.top_message=H(s.top_message),s.topMessage&&this.appMessagesManager.saveMessages([s.topMessage]);for(let i=0;i<=21;++i){const o=`index_${i}`;delete s[o]}this.saveDialog({dialog:s,ignoreOffsetDate:!0}),this.appMessagesManager.getMessageByPeer(s.peerId,s.top_message)||this.appMessagesManager.reloadConversation(s.peerId)}}isDialogsLoaded(e){return!!this.allDialogsLoaded[e]}setDialogsLoaded(e,t){const a=this.isVirtualFilter(e);e===St&&t?(this.allDialogsLoaded[Qe]=t,this.allDialogsLoaded[Pt]=t):(a&&na(this.allDialogsLoaded,[e]),this.allDialogsLoaded[e]=t),!a&&(Array.from(Ae).every(s=>this.allDialogsLoaded[s])&&(this.allDialogsLoaded[St]=!0),this.saveAllDialogsLoaded())}saveAllDialogsLoaded(){this.appStateManager.pushToState("allDialogsLoaded",this.allDialogsLoaded)}createSearchIndex(){return new za({clearBadChars:!0,ignoreCase:!0,latinize:!0,includeTag:!0})}handleDialogUnpinning(e,t){delete e.pFlags.pinned,Me(this.getPinnedOrders(t),Mt(e)),this.savePinnedOrders()}savePinnedOrders(){this.appStateManager.pushToState("pinnedOrders",this.pinnedOrders)}resetPinnedOrder(e){this.getPinnedOrders(e).length=0}getPinnedOrders(e){let t=this.pinnedOrders[e];return!t&&this.isVirtualFilter(e)&&(na(this.pinnedOrders,[e]),t=this.pinnedOrders[e]=[]),t}isDialogPinned(e,t){const a=this.filtersStorage.getFilter(t);let s;return a?s=a.pinnedPeerIds.indexOf(e)!==-1:s=!!this.getDialogOnly(e).pFlags.pinned,s}getOffsetDate(e){const t=this.dialogsOffsetDate[e]||0;return e===St&&!t?Math.min(...Array.from(Ae).sort((a,s)=>a-s)):t}generateFolder(e){const t={dialogs:[],id:e,count:null,unreadMessagesCount:0,unreadPeerIds:new Set,unreadUnmutedPeerIds:new Set,unreadMentionsPeerIds:new Set};return na(t,["dispatchUnreadTimeout"]),t}getFolder(e){var t;return(t=this.folders)[e]??(t[e]=this.generateFolder(e))}isVirtualFilter(e){return this.getFilterType(e)!==0}getFilterType(e){return e&&e<0||this.appPeersManager.isBotforum(e)?1:e===this.appPeersManager.peerId?2:0}isFilterIdForForum(e){return e&&e<0}getFilterIdForForum(e){return e.peerId}getFolderDialogs(e,t=!0){if(e===St)return this.getCachedDialogs(t);const a=this.getFolder(e),s=this.getFilterType(e);return s===1?t?a.dialogs.filter(n=>!n.pFlags.hidden):a.dialogs:s===2?a.dialogs:t?a.dialogs.filter(n=>n.migratedTo===void 0):a.dialogs}getNextDialog(e,t,a){const s=this.getFolderDialogs(a,!0);let n;if(!e)t&&(n=s[0]);else{const i=s.findIndex(o=>o.peerId===e);if(i!==-1){const o=t?i+1:i-1;n=s[o]}}return n}getDialogIndexKeyByFilterId(e){if(this.isVirtualFilter(e))return wa();if(Ae.has(e))return wa(e);const t=this.filtersStorage.getFilter(e);return wa(t.localId)}isDialogUnmuted(e){return!this.appNotificationsManager.isPeerLocalMuted({peerId:e.peerId,respectType:!0,threadId:Ue(e)?e.id:void 0})}getFolderUnreadCount(e){const t=this.getFolder(e);return{unreadUnmutedCount:t.unreadUnmutedPeerIds.size,unreadCount:t.unreadPeerIds.size,unreadMentionsCount:t.unreadMentionsPeerIds.size}}getCachedDialogs(e){const t=Array.from(Ae).map(a=>this.getFolderDialogs(a,e));return[].concat(...t)}setDialogIndexInFilter(e,t,a){let s;const n=this.isVirtualFilter(this.getDialogFilterId(e)),i=n||Ae.has(a.id);if(this.filtersStorage.testDialogForFilter(e,a)){const o=n?this.getPinnedOrdersByDialog(e):a.pinnedPeerIds,p=Mt(e),d=o.indexOf(p);d!==-1?s=this.generateDialogIndex(this.generateDialogPinnedDateByIndex(o.length-1-d),!0):e.pFlags?.pinned||i?s=this.generateIndexForDialog(e,!0,void 0,!i):s=js(e)??this.generateIndexForDialog(e,!0)}return Ln(e,t,s)}getDialog(e,t,a,s=!0){const n=[];a&&(t=e),t===void 0?n.push(...Array.from(Ae).map(o=>this.getFolder(o).dialogs)):n.push(this.getFolderDialogs(t,!1));let i;a?this.isFilterIdForForum(t)||this.appPeersManager.isBotforum(e)?i=o=>o.id===a:i=o=>o.savedPeerId===a:i=o=>o.peerId===e;for(const o of n){let p=0,d=0;for(let c=o.length;p<c;++p){const f=o[p];if(i(f))return[f,p-d];s&&(f.pFlags.hidden||f.migratedTo!==void 0)&&++d}}return[]}getDialogOnly(e){return this.dialogs[e]}getAnyDialog(e,t){return t?e.isUser()&&!this.appPeersManager.isBotforum(e)?this.savedDialogs[t]:this.getForumTopic(e,t):this.dialogs[e]}getDialogIndex(e,t,a){const s=be(e)?e:this.getAnyDialog(e,a);return js(s,t)}generateDialogIndex(e,t){return e??(e=te(!0)+this.timeManager.getServerTimeOffset()),e*65536+(t?0:++this.dialogsNum&65535)}getDialogFilterId(e){let t;return Ue(e)?t=this.getFilterIdForForum(e):xe(e)?t=e.peerId:t=e.folder_id,t}getPinnedOrdersByDialog(e){return this.getPinnedOrders(this.getDialogFilterId(e))}processDialogForFilters(e,t){if(e?._==="forumTopic"&&zs(e.id))return;if(!nt(e)){this.processDialogForFilter(e,void 0,t);return}const a=this.filtersStorage.getFilters();for(const s in a){const n=a[s];this.processDialogForFilter(e,n,t)}}processDialogForFilter(e,t,a){const s=t?.id??this.getDialogFilterId(e),n=this.getDialogIndexKeyByFilterId(s),i=this.getFolder(s),o=i.dialogs,d={dialog:g=>g.peerId===e.peerId,forumTopic:g=>g.id===e.id,savedDialog:g=>g.savedPeerId===e.savedPeerId}[e._],c=o.findIndex(d),f=o[c],l=this.getDialogIndex(f,n),m=a?void 0:this.setDialogIndexInFilter(e,n,t);return l===m?!1:(!!l!=!!m&&this.prepareFolderUnreadCountModifyingByDialog(s,e,!!m),c!==-1&&(o.splice(c,1),i.count!==null&&--i.count),m&&(Ct(o,e,g=>this.getDialogIndex(g,n),-1),c===-1&&i.count!==null&&++i.count),!0)}prepareDialogUnreadCountModifying(e,t){if(xe(e))return()=>{};const a=Ue(e),s=[],n=a?this.getFilterIdForForum(e):e.folder_id;if(s.push(this.prepareFolderUnreadCountModifyingByDialog(n,e,t)),!a){const i=this.filtersStorage.getFilters();for(const o in i){const p=i[o];this.filtersStorage.testDialogForFilter(e,p)&&s.push(this.prepareFolderUnreadCountModifyingByDialog(p.id,e,t))}}return()=>!t&&s.forEach(i=>i())}prepareFolderUnreadCountModifyingByDialog(e,t,a){if(xe(t))return a!==void 0?void 0:()=>{};const s=this.appMessagesManager.getDialogUnreadCount(t),n=this.isDialogUnmuted(t),i=s?t.unread_mentions_count:0;if(a!==void 0){const o=a?s:-s;this.modifyFolderUnreadCount(e,o,!!(a&&s),!!(a&&s&&n),!!(a&&i),t);return}return()=>{const o=this.appMessagesManager.getDialogUnreadCount(t),p=this.isDialogUnmuted(t),d=o?t.unread_mentions_count:0,c=o-s;this.modifyFolderUnreadCount(e,c,!!o,!!(o&&p),!!d,t)}}modifyFolderUnreadCount(e,t,a,s,n,i){const{peerId:o}=i,p=this.appPeersManager.isForum(o),d=Ue(i);if(p&&!d&&!i.pFlags.view_forum_as_messages){const l=this.getForumUnreadCount(o);if(l instanceof Promise){l.then(({count:m,hasUnmuted:g})=>{i=this.getDialogOnly(o);const _=this.getFolder(e);!i||!this.appPeersManager.isForum(o)||!_||!_.dialogs.some(S=>S.peerId===o)||this.modifyFolderUnreadCount(e,0,!1,!1,!1,i)});return}else t=0,a=l.count>0,s=l.hasUnmuted}const c=this.getFolder(e);t&&(c.unreadMessagesCount=Math.max(0,c.unreadMessagesCount+t));const f=Mt(i);a?c.unreadPeerIds.add(f):c.unreadPeerIds.delete(f),s?c.unreadUnmutedPeerIds.add(f):c.unreadUnmutedPeerIds.delete(f),n?c.unreadMentionsPeerIds.add(f):c.unreadMentionsPeerIds.delete(f),c.dispatchUnreadTimeout??(c.dispatchUnreadTimeout=de.setTimeout(()=>{c.dispatchUnreadTimeout=void 0;const l={...c};delete l.dialogs,this.rootScope.dispatchEvent("folder_unread",l),d&&this.processChangedUnreadOrUnmuted(o)},0))}processChangedUnreadOrUnmuted(e){const t=this.getDialogOnly(e);t&&(this.processDialogForFilters(t),this.prepareDialogUnreadCountModifying(t)(),this.rootScope.dispatchEvent("dialog_unread",{peerId:e,dialog:t}))}generateIndexForDialog(e,t,a,s){if(!t)return;const n=Ue(e),i=nt(e);let o=0,p;if(n&&e.pFlags.hidden&&Bo)o=this.generateDialogPinnedDateByIndex(4095),p=!0;else if(e.pFlags.pinned&&!s)o=this.generateDialogPinnedDate(e),p=!0;else{const{peerId:f}=e;if(a||(a=this.appMessagesManager.getMessageByPeer(f,e.top_message)),o=a?.date||o,i){const l=this.appPeersManager.isChannel(f)&&f.toChatId();if(l){const m=this.appChatsManager.getChat(l);(!o||m.date&&m.date>o)&&(o=m.date)}}(n||i)&&e.draft?._==="draftMessage"&&e.draft.date>o&&(o=e.draft.date)}o||(o=te(!0));const d=this.generateDialogIndex(o,p);if(t)return d;const c=wa(e.folder_id);Ln(e,c,d)}generateDialogPinnedDateByIndex(e){return 2147418112+(e&65535)}generateDialogPinnedDate(e){const t=this.getPinnedOrdersByDialog(e),a=Mt(e);let s=t.indexOf(a);return s===-1&&(t.unshift(a),s=0,nt(e)&&this.savePinnedOrders()),this.generateDialogPinnedDateByIndex(t.length-1-s)}getDialogMessageForState(e){const{peerId:t}=e,a=xe(e)?e.savedPeerId:void 0,s=this.appMessagesManager.getHistoryStorage(t,a),n=this.appMessagesManager.getHistoryMessagesStorage(t),i=s.history.slice;let o;for(let p=0,d=i.length;p<d;++p){const c=i[p],f=this.appMessagesManager.getMessageFromStorage(n,c);if(f&&!f.pFlags.is_outgoing){o=f;break}}return o}setDialogToState(e){if(!nt(e))return;const{peerId:t,pts:a}=e,s=this.getDialogMessageForState(e);if(s){const n=No(s);this.peersStorage.requestPeersForKey(n,`topMessage_${t}`)}if(e.topMessage=s,t.isAnyChat()&&a){const n=this.apiUpdatesManager.getChannelState(t.toChatId(),a).pts;e.pts=n}this.storage.set({[t]:e}),this.peersStorage.requestPeer(t,"dialog")}pushDialog({dialog:e,offsetDate:t,ignoreOffsetDate:a,saveGlobalOffset:s}){const n=nt(e),{peerId:i}=e,o=Mt(e);if(n?this.dialogs[o]=e:Ue(e)?this.getForumTopicsCache(i).topics.set(o,e):xe(e)&&(this.savedDialogs[o]=e),t??(t=this.getDialogOffsetDate(e)),this.processDialogForFilters(e),t&&!e.pFlags.pinned){if(n&&s){const c=this.dialogsOffsetDate[St];(!c||t<c)&&this.setDialogOffsetDate(St,t)}const p=this.getDialogFilterId(e),d=this.dialogsOffsetDate[p];if(!d||t<d){if(!a&&!this.isDialogsLoaded(p)){this.dropDialog(i,qo(e),!0);return}this.setDialogOffsetDate(p,t)}}this.setDialogToState(e)}dropDialogFromFolders(e,t,a){const s=this.getDialog(e,void 0,t,!1),[n,i]=s;if(n){const o=this.getDialogFilterId(n),p=Me(this.getPinnedOrders(o),Mt(n))!==void 0;this.processDialogForFilters(n,!0),a||(Ue(n)?this.getForumTopicsCache(e).index.indexObject(t,""):xe(n)||this.dialogsIndex.indexObject(e,"")),p&&this.savePinnedOrders()}return s}dropDialog(e,t,a){const s=this.getAnyDialog(e,t),n=this.dropDialogFromFolders(e,t,a);return s&&(a||(Ue(s)?this.getForumTopicsCache(e).topics.delete(t):xe(s)?delete this.savedDialogs[t]:delete this.dialogs[e]),this.clearDialogFromState(s,a)),n}clearDialogFromState(e,t){if(!nt(e))return;const{peerId:a}=e;this.peersStorage.requestPeersForKey([],`topMessage_${a}`),this.peersStorage.releasePeer(a,"dialog"),this.storage.delete(a,t)}dropDialogWithEvent(e,t){const a=this.dropDialog(e,t);return a.length&&this.rootScope.dispatchEvent("dialog_drop",a[0]),a}dropDialogOnDeletion(e,t){if(this.dropDialogWithEvent(e,t),this.appPeersManager.isBroadcast(e)){const a=this.appMessagesManager.getHistoryStorage(e),s=a?.channelJoinedMid;s&&(a.channelJoinedMid=void 0,this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:e.toChatId(),messages:[s],pts:void 0,pts_count:void 0}))}this.rootScope.dispatchEvent("peer_deleted",e)}applyDialogs(e,t){const a=e._==="messages.forumTopics",s=e._==="messages.savedDialogs",n=!a&&!s,i=a?e.topics:e.dialogs;a?this.processTopics(t,e):n&&ht(e.dialogs,(d,c,f)=>{d._==="dialogFolder"&&f.splice(c,1)}),this.appMessagesManager.saveApiResult(e);const o=new Map,p=d=>{let c=o.get(d);return c||o.set(d,c={}),c};i.forEach(d=>{const c=this.getDialogPeerId(d);let f=d.top_message;const{pendingTopMsgs:l}=this.appMessagesManager;let m,g;n?m=c:a?(g=this.appMessagesIdsManager.generateMessageId(d.id,this.getDialogPeerId(d).toChatId()),m=`${c}_${g}`):(g=oe(d.peer),m=`${c}_${g}`);const _=l[m];if(_){const C=this.appMessagesManager.getMessageByPeer(c,_),b=this.appMessagesManager.getMessageByPeer(c,f);(!f||C&&(!b||C?.date>b?.date))&&(d.top_message=f=_,this.appMessagesManager.getHistoryStorage(c,g)._maxId=_)}if(f||d.draft?._==="draftMessage"){if(this.saveDialog({dialog:d})){const C=p(c);a?(C.topics??(C.topics=new Map)).set(d.id,d):s?(C.saved??(C.saved=new Map)).set(d.savedPeerId,d):C.dialog=d}}else this.dropDialogWithEvent(c,g);const S=this.appMessagesManager.getUpdateAfterReloadKey(c,g),D=this.appMessagesManager.newUpdatesAfterReloadToHandle[S];if(D!==void 0){const C=[...D];for(const b of C)D.delete(b),this.apiUpdatesManager.saveUpdate(b);D.size||delete this.appMessagesManager.newUpdatesAfterReloadToHandle[S]}}),o.size&&this.rootScope.dispatchEvent("dialogs_multiupdate",o)}getDialogOffsetDate(e){return this.getDialogMessageForState(e)?.date||0}setDialogOffsetDate(e,t){return this.log("setting offset date",e,t),this.dialogsOffsetDate[e]=t}canSaveDialog(e,t){if(e.isAnyChat()){const a=this.appChatsManager.getChat(e.toChatId());if(a._==="channelForbidden"||a.pFlags.left)return!1}else if(this.appUsersManager.isDeleted(e.toUserId())&&!H(t.top_message))return!1;return!0}getDialogPeerId(e){const{peerId:t}=e;return t||(xe(e)?this.appPeersManager.peerId:this.appPeersManager.getPeerId(e.peer))}saveDialog({dialog:e,folderId:t,ignoreOffsetDate:a,saveGlobalOffset:s}){const n=Ue(e),i=xe(e),o=nt(e),p=this.getDialogPeerId(e),d=this.appPeersManager.isChannel(p)?p.toChatId():void 0,c=i?oe(e.peer):void 0,f=n?e.id=this.appMessagesIdsManager.generateMessageId(e.id,d):i?c:void 0;if(o&&(t??(t=e.folder_id??Qe)),!p)return this.log.error("saveConversation no peerId???",e,t),!1;if(o&&e._!=="dialog"&&this.log.error("saveConversation not regular dialog",e,Object.assign({},e)),o&&!d&&p.isAnyChat()){const D=this.appChatsManager.getChat(p.toChatId());if(D&&D.migrated_to&&D.pFlags.deactivated){const C=this.appPeersManager.getPeerId(D.migrated_to);this.appMessagesManager.migratedFromTo[p]=C,this.appMessagesManager.migratedToFrom[C]=p,e.migratedTo=C}}if(o&&!this.canSaveDialog(p,e))return!1;if(n)this.getForumTopicsCache(p).index.indexObject(f,e.title);else if(o&&!e.migratedTo){const D=this.appPeersManager.getPeerSearchText(p);this.dialogsIndex.indexObject(p,D)}const l=this.getAnyDialog(p,f);let m,g;if(e.top_message,m=this.appMessagesIdsManager.generateMessageId(e.top_message,d),(l?.top_message&&this.appMessagesManager.getMessageByPeer(p,l.top_message))?.pFlags?.is_outgoing&&l.top_message>=m&&(m=l.top_message),g=this.appMessagesManager.getMessageByPeer(p,m),e.top_message=m,i||(e.read_inbox_max_id=this.appMessagesIdsManager.generateMessageId(l&&!e.read_inbox_max_id?l.read_inbox_max_id:e.read_inbox_max_id,d),e.read_outbox_max_id=this.appMessagesIdsManager.generateMessageId(l&&!e.read_outbox_max_id?l.read_outbox_max_id:e.read_outbox_max_id,d)),o&&e.folder_id===void 0&&e._==="dialog"&&(e.folder_id=l?l.folder_id:t),i?e.savedPeerId=c:e.draft=this.appDraftsManager.saveDraft({peerId:p,threadId:f,draft:e.draft}),e.peerId=p,!i&&g&&g.pFlags.is_outgoing){const D=g.pFlags.out,C=e[D?"read_outbox_max_id":"read_inbox_max_id"];m>C?(g.pFlags.unread=!0,!e.unread_count&&!D&&++e.unread_count):delete g.pFlags.unread}const _=this.appMessagesManager.getHistoryStorage(p,f),S=_.history.slice;if(m&&(!S.length||!S.isEnd(_e.Bottom)?(_.history.unshift(m),_.count||(_.count=_.history.length),this.appMessagesManager.mergeReplyKeyboard(_,g)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:p}),_.originalInsertSlice&&this.appMessagesManager.insertChannelJoinedService(p,_,_.history.slice)):o&&!l&&this.appMessagesManager.insertChannelJoinedService(p,_)),o&&e.top_message<_.history.first[0]&&(m=e.top_message=_.history.first[0],e.topMessage=this.appMessagesManager.getMessageByPeer(p,e.top_message)),_._maxId=m,i||(_.readMaxId=e.read_inbox_max_id,_.readOutboxMaxId=e.read_outbox_max_id,this.appNotificationsManager.savePeerSettings({peerId:p,threadId:n?e.id:void 0,settings:e.notify_settings})),o&&d&&e.pts&&this.apiUpdatesManager.addChannelState(d,e.pts),this.generateIndexForDialog(e),l){const D=this.dialogsStorage.prepareDialogUnreadCountModifying(l);$t(l,e),D()}return this.pushDialog({dialog:e,ignoreOffsetDate:a,saveGlobalOffset:s}),n&&this.processTopicUpdate(e,l),!0}processTopicUpdate(e,t){if(!t)return;const{peerId:a,id:s}=e,n=e.icon_emoji_id!==t.icon_emoji_id,i=e.title!==t.title,o=n||i;n&&this.rootScope.dispatchEvent("avatar_update",{peerId:a,threadId:s}),o&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:a,threadId:s})}getDialogs(e){const{query:t="",offsetIndex:a,limit:s=20,filterId:n=Qe,filterType:i=this.getFilterType(n),skipMigrated:o=i===1,forceLocal:p,recursion:d}=e,c=this.isFilterIdForForum(n),f=this.appPeersManager.isBotforum(n),l=this.isVirtualFilter(n);if(!l&&!Ae.has(n)){const k=[],B=this.appUsersManager.fillContacts();B.cached||k.push(B.promise);const L=this.filtersStorage.reloadMissingPeerIds(n);if(L&&k.push(L),k.length)return Promise.all(k).then(()=>this.getDialogs(e))}const m=(!Ae.has(n)||this.getOffsetDate(n))&&!l?St:n;let g=this.getFolderDialogs(n,o);const _=this.getDialogIndexKeyByFilterId(n),S=i!==2,D=i===1;if(t&&S){if(!s||this.cachedResults.query!==t||this.cachedResults.folderId!==n||d){this.cachedResults.query=t,this.cachedResults.folderId=n;const B=(c||f?this.getForumTopicsCache(n).index:this.dialogsIndex).search(t),L=[];if(c||f)for(const R of B){const T=this.getForumTopic(n,R);T&&L.push(T)}else for(const R of B){const T=this.dialogs[R];T&&T.folder_id===n&&L.push(T)}L.sort((R,T)=>this.getDialogIndex(T,_)-this.getDialogIndex(R,_)),this.cachedResults.dialogs=L,this.cachedResults.count=L.length}g=this.cachedResults.dialogs}else this.cachedResults.query="";let C=0;if(a>0)for(let k=g.length;C<k&&!(a>this.getDialogIndex(g[C],_));++C);const b=this.isDialogsLoaded(m),w=g.length>=C+s;if(!D&&t||b||w||p){const k=g.slice(C,C+s);return{dialogs:k,count:b?g.length:this.getFolder(n).count,isTopEnd:g.length&&(k[0]&&k[0]===g[0]||this.getDialogIndex(g[0],_)<a),isEnd:((D?!1:t)||b)&&C+s>=g.length}}return this.appMessagesManager.getTopMessages({limit:s,folderId:m,query:t,offsetTopicId:c&&t?g[g.length-1]?.id:void 0,offsetBotforumTopic:f?g[g.length-1]:void 0}).then(k=>{if(t)return this.getDialogs({...e,forceLocal:!0,recursion:!0});const B=this.getFolder(n);if(B.count=k.count,o&&(g=this.getFolderDialogs(n,o)),C=0,a>0)for(let R=g.length;C<R&&!(a>this.getDialogIndex(g[C],_));++C);const L=g.slice(C,C+s);return{dialogs:L,count:k.count??g.length,isTopEnd:g.length&&(L[0]&&L[0]===g[0]||this.getDialogIndex(g[0],_)<a),isEnd:k.isEnd&&g[g.length-1]===L[L.length-1]}})}async markFolderAsRead(e){const a=[...this.getFolder(e).unreadPeerIds];for(const s of a)await this.appMessagesManager.markDialogUnread({peerId:s,read:!0})}flushForumTopicsCache(e){const t=this.forumTopics.get(e);if(!t)return;const a=this.folders[e];a&&(a.dispatchUnreadTimeout&&clearTimeout(a.dispatchUnreadTimeout),delete this.allDialogsLoaded[e],delete this.pinnedOrders[e],delete this.dialogsOffsetDate[e],delete this.folders[e]),t.topics.clear(),t.temporaryTopics.clear()}getForumTopicsCache(e){let t=this.forumTopics.get(e);return t||(t={topics:new Map,temporaryTopics:new Map,deletedTopics:new Set,getTopicPromises:new Map,index:this.createSearchIndex()},this.forumTopics.set(e,t)),t}getForumTopicById(e,t){if(!this.appPeersManager.isForum(e)&&!this.appPeersManager.isBotforum(e))return Promise.reject(ne("CHANNEL_FORUM_MISSING"));const a=this.getForumTopicsCache(e);let s;if(t){if(s=a.getTopicPromises.get(t),s)return s;if(a.deletedTopics.has(t))return Promise.resolve(void 0);a.getTopicPromises.set(t,s=$())}return a.getTopicsPromise??(a.getTopicsPromise=qe(0).then(()=>{const n={},i=[];for(const[d,c]of a.getTopicPromises)n[d]=c,i.push(H(d));a.getTopicPromises.clear();const o=()=>{for(const d in n)n[d].resolve(void 0),a.deletedTopics.add(+d)};if(this.getForumTopicsCache(e)!==a){o();return}const p=this.getFolder(e);return Promise.all([this.apiManager.invokeApi("messages.getForumTopicsByID",{peer:this.appPeersManager.getInputPeerById(e),topics:i}),p.count===null&&this.apiManager.invokeApi("messages.getForumTopics",{peer:this.appPeersManager.getInputPeerById(e),offset_date:0,offset_id:0,limit:1,offset_topic:0})]).then(([d,c])=>{if(this.getForumTopicsCache(e)===a)return this.applyDialogs(d,e),typeof c?.count=="number"&&(p.count=c.count),d.topics.forEach(f=>{Ue(f)&&(n[f.id]?.resolve(f),delete n[f.id])}),d},()=>{}).then(()=>{o(),a.getTopicsPromise=void 0,a.getTopicPromises.size&&this.getForumTopicById(e)})})),s||a.getTopicsPromise}setTemporaryForumTopic(e){const t=this.getForumTopicsCache(e.peerId);return t.temporaryTopics.set(e.id,e),()=>{t.temporaryTopics.delete(e.id)}}getForumTopic(e,t){const a=this.forumTopics.get(e);return a?.topics?.get(t)||a?.temporaryTopics?.get(t)}getForumTopicOrReload(e,t){const a=this.getForumTopic(e,t);return a||(this.getForumTopicsCache(e)?.deletedTopics?.has(t)?void 0:this.getForumTopicById(e,t))}processTopics(e,t){return se(t,a=>{"pts"in a&&e.isAnyChat()&&this.apiUpdatesManager.addChannelState(e.toChatId(),a.pts);const s=this.appPeersManager.getOutputPeer(e);return a.topics=a.topics.map(n=>{if(Ue(n))return n.peer=s,n.id=this.appMessagesIdsManager.generateMessageId(n.id,s.channel_id),n}).filter(Boolean),a})}processTopicsPromise(e,t){return t.then(a=>(this.processTopics(e,a),a))}getForumUnreadCount(e,t){if(!this.appPeersManager.isForum(e))return;if(t){const n=this.getDialogOnly(e);if(n&&n.pFlags.view_forum_as_messages)return}const a=this.getFolder(e),s=a.dialogs.length>=20||this.isDialogsLoaded(e)?a.dialogs.slice(0,20):se(this.getDialogs({filterId:e,limit:20}),n=>n.dialogs);return se(s,n=>({count:n.reduce((i,o)=>i+ +!!o.unread_count,0),hasUnmuted:n.some(i=>i.unread_count&&this.isDialogUnmuted(i))}))}canManageTopic(e){if(e.pFlags.my)return!0;const t=e.peerId;if(this.appPeersManager.isBotforum(t))return!0;if(!t.isAnyChat())return!1;const a=t.toChatId();return this.appChatsManager.getChat(a).admin_rights?this.appChatsManager.hasRights(e.peerId.toChatId(),"manage_topics"):!1}getSavedDialogById(e){let t=this.savedDialogsPromises.get(e);if(t)return t;const a=this.appPeersManager.peerId;t=this.apiManager.invokeApi("messages.getSavedHistory",{peer:this.appPeersManager.getInputPeerById(e),add_offset:0,hash:0,limit:1,max_id:0,min_id:0,offset_date:0,offset_id:0}).then(s=>{this.savedDialogsPromises.get(e)===t&&this.savedDialogsPromises.delete(e),this.appMessagesManager.saveApiResult(s);const i=s.messages[0];if(!i){this.log("reloaded saved dialog is empty",e),this.dropDialogOnDeletion(a,e);return}const o=this.getPinnedOrders(a),p={_:"savedDialog",peer:this.appPeersManager.getOutputPeer(e),pFlags:{pinned:o.includes(e)||void 0},top_message:i.id||0};return this.log("saving reloaded saved dialog",e),this.applyDialogs({_:"messages.savedDialogs",dialogs:[p]}),p.peerId?p:void 0})}handleDialogTogglePinned(e,t,a){e&&(t?e.pFlags.pinned=!0:this.handleDialogUnpinning(e,a),this.generateIndexForDialog(e)),this.appMessagesManager.scheduleHandleNewDialogs(e.peerId,e)}handleDialogsPinned(e,t){const a=this.isFilterIdForForum(e),s=e===this.appPeersManager.peerId,n=a||s;this.resetPinnedOrder(e),this.getPinnedOrders(e).push(...t),this.savePinnedOrders(),t.reverse();const i={};t.forEach(p=>{i[p]=!0;const d=n?e:p,c=n?p:void 0,f=this.getAnyDialog(d,c);this.appMessagesManager.scheduleHandleNewDialogs(d,f),f&&(f.pFlags.pinned=!0,this.generateIndexForDialog(f))});const o=this.getFolderDialogs(e,!1);for(const p of o){if(!p.pFlags.pinned)break;i[Mt(p)]||(delete p.pFlags.pinned,this.generateIndexForDialog(p),this.appMessagesManager.scheduleHandleNewDialogs(p.peerId,p))}}}function Oe(r){if(r===null||typeof r!="object")return r;if(r instanceof Date)return new Date(r.getTime());if(Array.isArray(r))return r.map(s=>Oe(s));if(ArrayBuffer.isView(r))return r.slice();const e=new r.constructor;for(var t in r)r.hasOwnProperty(t)&&(e[t]=Oe(r[t]));return e}function Xe(r,e){const t=r.findIndex(e);return t!==-1?r.splice(t,1)[0]:void 0}const zo=[["pinned_peers","pinnedPeerIds"],["exclude_peers","excludePeerIds"],["include_peers","includePeerIds"]],Ho=Ae.size,Ko={_:"dialogFilter",pFlags:{},id:0,title:{_:"textWithEntities",text:"",entities:[]},exclude_peers:[],include_peers:[],pinned_peers:[],excludePeerIds:[],includePeerIds:[],pinnedPeerIds:[]};class Wo extends W{constructor(){super(...arguments),this.clear=e=>{if(!e)this.reloadedPeerIds.clear(),this.clearFilters();else{this.filters={},this.filtersArr=[],this.reloadedPeerIds=new Set,this.localFilters={};for(const t of Ae)this.localFilters[t]=this.generateLocalFilter(t)}this.localId=Is},this.onUpdateDialogFilter=e=>{e.filter?this.saveDialogFilter(e.filter):this.filters[e.id]&&(this.rootScope.dispatchEvent("filter_delete",this.filters[e.id]),delete this.filters[e.id],Xe(this.filtersArr,t=>t.id===e.id)),this.pushToState()},this.onUpdateDialogFilters=e=>{const t=Oe(this.filters);this.getDialogFilters(!0).then(a=>{for(const s in t){const n=+s;a.find(i=>i.id===n)||this.onUpdateDialogFilter({_:"updateDialogFilter",id:n})}this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:a.map(s=>s.id)})})},this.onUpdateDialogFilterOrder=e=>{const t=e.order.slice();t.includes(Pt)||t.splice(t[0]===Qe?1:0,0,Pt),this.localId=Is,t.forEach(a=>{const s=this.filters[a];delete s.localId,this.setLocalId(s)}),this.rootScope.dispatchEvent("filter_order",t),this.pushToState()}}after(){return this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateDialogFilter:this.onUpdateDialogFilter,updateDialogFilters:this.onUpdateDialogFilters,updateDialogFilterOrder:this.onUpdateDialogFilterOrder}),this.rootScope.addEventListener("premium_toggle",()=>{this.onUpdateDialogFilters({_:"updateDialogFilters"})}),this.appStateManager.getState().then(e=>{this.prependFilters(e.filtersArr).map(a=>{this.saveDialogFilter(a,!1,!0)})})}prependFilters(e){e=e.slice();const t=this.localFilters[Qe],a=this.localFilters[Pt],s=e.findIndex(n=>n._==="dialogFilterDefault"||n.id===Qe);return s!==-1?e[s]=t:e.unshift(t),Xe(e,n=>n.id===Pt),e.splice(e[0]===t?1:0,0,a),this.localId=Is,e.forEach(n=>{delete n.localId}),e}generateLocalFilter(e){const t={...Oe(Ko),id:e};return e===Qe?t.pFlags.exclude_archived=!0:e===Pt&&(t.pFlags.exclude_unarchived=!0),Ae.has(e)&&(t.pinnedPeerIds=this.dialogsStorage.getPinnedOrders(e)),t}pushToState(){this.appStateManager.pushToState("filtersArr",this.filtersArr)}testDialogForFilter(e,t){if(!t||!nt(e))return!0;const{peerId:a}=e;if(Ae.has(t.id))return e.folder_id===t.id&&this.dialogsStorage.canSaveDialog(a,e);if(!this.appMessagesManager.getDialogOnly(a)||t.excludePeerIds?.includes(a))return!1;if(t.includePeerIds?.includes(a))return!0;const s=t.pFlags;if(!s)return!0;if(s.exclude_archived&&e.folder_id===Pt||s.exclude_read&&!this.appMessagesManager.isDialogUnread(e)||s.exclude_muted&&this.appNotificationsManager.isPeerLocalMuted({peerId:a})&&!(e.unread_mentions_count&&e.unread_count))return!1;if(this.appPeersManager.isAnyChat(a)){if(s.broadcasts&&this.appPeersManager.isBroadcast(a)||s.groups&&this.appPeersManager.isAnyGroup(a))return!0}else{const n=a.toUserId();if(this.appUsersManager.isBot(n))return!!s.bots;if(s.non_contacts&&!this.appUsersManager.isContact(n)||s.contacts&&this.appUsersManager.isContact(n))return!0}return!1}testDialogForFilterId(e,t){return this.testDialogForFilter(e,this.filters[t])}getFilter(e){return this.filters[e]}getFilters(){return this.filters}clearFilters(){const e=this.getFilters();for(const t in e)Ae.has(+t)||this.onUpdateDialogFilter({_:"updateDialogFilter",id:+t})}async toggleDialogPin(e,t){const a=this.filters[t],s=a.pinnedPeerIds.indexOf(e),n=s!==-1;if(n&&(a.pinned_peers.splice(s,1),a.pinnedPeerIds.splice(s,1)),!n){if(a.pinned_peers.length>=await this.apiManager.getLimit("folderPin"))return Promise.reject(ne("PINNED_DIALOGS_TOO_MUCH"));a.pinned_peers.unshift(this.appPeersManager.getInputPeerById(e)),a.pinnedPeerIds.unshift(e)}return this.updateDialogFilter(a)}createDialogFilter(e,t){const a=Math.max(1,...Object.keys(this.filters).map(s=>+s));return e=Oe(e),e.id=a+1,this.updateDialogFilter(e,void 0,t)}updateDialogFilter(e,t=!1,a=!1){return this.apiManager.invokeApi("messages.updateDialogFilter",{id:e.id,filter:t?void 0:this.getOutputDialogFilter(e)}).then(()=>{if(this.onUpdateDialogFilter({_:"updateDialogFilter",id:e.id,filter:t?void 0:e}),a){const n=Object.values(this.filters).sort((i,o)=>i.localId-o.localId).map(i=>i.id);Me(n,e.id),Me(n,Pt),n.splice(n[0]===Qe?1:0,0,e.id),this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:n})}return e})}updateDialogFiltersOrder(e){return this.apiManager.invokeApi("messages.updateDialogFiltersOrder",{order:e}).then(()=>{this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:e})})}getOutputDialogFilter(e){const t=Oe(e);return this.filterIncludedPinnedPeers(e),t}filterIncludedPinnedPeers(e){ht(e.includePeerIds,(t,a)=>{e.pinnedPeerIds.includes(t)&&(e.include_peers.splice(a,1),e.includePeerIds.splice(a,1))})}reloadMissingPeerIds(e,t="pinned_peers"){const s=this.getFilter(e)?.[t];if(!s?.length)return;const n=s.filter(p=>{const d=this.appPeersManager.getPeerId(p),c=this.reloadedPeerIds.has(d),f=this.appMessagesManager.getDialogOnly(d);return!c&&!f});if(!n.length)return;const i=n.map(p=>{const d=this.appPeersManager.getPeerId(p);return this.appMessagesManager.reloadConversation(p).then(f=>(this.reloadedPeerIds.add(d),f?void 0:d))});return Promise.all(i).then(p=>{p=p.filter(Boolean),p.length})}async getDialogFilters(e=!1){const t=Object.keys(this.filters);if(t.length>Ho&&!e)return t.map(n=>this.filters[n]).sort((n,i)=>n.localId-i.localId);const a=await this.apiManager.invokeApiSingle("messages.getDialogFilters");return this.prependFilters(a.filters).map(n=>this.saveDialogFilter(n,e)).filter(Boolean)}getSuggestedDialogsFilters(){return this.apiManager.invokeApi("messages.getSuggestedDialogFilters")}saveDialogFilter(e,t=!0,a){e._==="dialogFilterDefault"&&(e=this.localFilters[Qe]),Ae.has(e.id)||(zo.forEach(([n,i])=>{const o=e[n];o&&(e[i]=o.map(p=>this.appPeersManager.getPeerId(p)))}),this.filterIncludedPinnedPeers(e),e.include_peers=e.pinned_peers.concat(e.include_peers),e.includePeerIds=e.pinnedPeerIds.concat(e.includePeerIds));const s=this.filters[e.id];return s?e=Object.assign(s,e):this.filters[e.id]=e,this.setLocalId(e),a||(t?this.rootScope.dispatchEvent("filter_update",e):s||this.rootScope.dispatchEvent("filter_new",e)),e}setLocalId(e){e.localId!==void 0?e.localId>=this.localId&&(this.localId=e.localId+1):(e.localId=this.localId++,Xe(this.filtersArr,t=>t.id===e.id),this.filtersArr.push(e),this.pushToState())}async isFilterIdAvailable(e){if(Ae.has(e))return!0;const t=await this.apiManager.getLimit("folders");return this.filtersArr.filter(s=>!Ae.has(s.id)).slice(0,t).some(s=>s.id===e)}getChatlistInput(e){return{_:"inputChatlistDialogFilter",filter_id:e}}exportChatlistInvite(e){return this.apiManager.invokeApiSingleProcess({method:"chatlists.exportChatlistInvite",params:{chatlist:this.getChatlistInput(e.id),title:e.title.text,peers:e.include_peers},processResult:t=>(this.saveDialogFilter(t.filter),t)})}deleteExportedInvite(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.deleteExportedInvite",params:{chatlist:this.getChatlistInput(e),slug:t}})}editExportedInvite(e,t,a,s){return this.apiManager.invokeApi("chatlists.editExportedInvite",{chatlist:this.getChatlistInput(e),slug:t,title:s,peers:a.map(n=>this.appPeersManager.getInputPeerById(n))})}getExportedInvites(e){return this.getFilter(e)?._==="dialogFilter"?Promise.reject(ne("FILTER_NOT_SUPPORTED")):this.apiManager.invokeApiSingleProcess({method:"chatlists.getExportedInvites",params:{chatlist:this.getChatlistInput(e)},processResult:a=>(this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats),a.invites)})}checkChatlistInvite(e){return this.apiManager.invokeApiSingleProcess({method:"chatlists.checkChatlistInvite",params:{slug:e},processResult:t=>(this.appUsersManager.saveApiUsers(t.users),this.appChatsManager.saveApiChats(t.chats),t)})}joinChatlistInvite(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.joinChatlistInvite",params:{slug:e,peers:t.map(a=>this.appPeersManager.getInputPeerById(a))},processResult:a=>{this.apiUpdatesManager.processUpdateMessage(a);const n=a.updates.find(i=>i._==="updateDialogFilter").id;return this.rootScope.dispatchEvent("filter_joined",this.getFilter(n)),n}})}getChatlistUpdates(e){if(this.getFilter(e)?._!=="dialogFilterChatlist")return Promise.reject(ne("FILTER_NOT_SUPPORTED"));const a=Date.now();return this.apiManager.invokeApiSingleProcess({method:"chatlists.getChatlistUpdates",params:{chatlist:this.getChatlistInput(e)},processResult:s=>{this.appUsersManager.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats);const n=this.getFilter(e);return n?._==="dialogFilterChatlist"&&(n.updatedTime=a,this.pushToState()),s}})}joinChatlistUpdates(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.joinChatlistUpdates",params:{chatlist:this.getChatlistInput(e),peers:t.map(a=>this.appPeersManager.getInputPeerById(a))},processResult:a=>{this.apiUpdatesManager.processUpdateMessage(a)}})}hideChatlistUpdates(e){return this.apiManager.invokeApiSingle("chatlists.hideChatlistUpdates",{chatlist:this.getChatlistInput(e)})}getLeaveChatlistSuggestions(e){return this.apiManager.invokeApiSingle("chatlists.getLeaveChatlistSuggestions",{chatlist:this.getChatlistInput(e)})}leaveChatlist(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.leaveChatlist",params:{chatlist:this.getChatlistInput(e),peers:t.map(a=>this.appPeersManager.getInputPeerById(a))},processResult:a=>{this.apiUpdatesManager.processUpdateMessage(a)}})}}function Qt(r){return[...new Set(r)]}const Jo="([#*0-9]️?⃣|[©®‼⁉™ℹ↔-↙↩↪⌚⌛⌨⏏⏭-⏯⏱⏲⏸-⏺Ⓜ▪▫▶◀◻◼◾☀-☄☎☑☔☕☘☠☢☣☦☪☮☯☸-☺♀♂♈-♓♟♠♣♥♦♨♻♾♿⚒⚔-⚗⚙⚛⚜⚠⚧⚪⚰⚱⚽⚾⛄⛈⛏⛑⛩⛰-⛵⛷⛸⛺✂✈✉✏✒✔✖✝✡✳✴❄❇❗❣➡⤴⤵⬅-⬇⬛⬜⭕〰〽㊗㊙]️?|[☝✌✍](?:\uD83C[\uDFFB-\uDFFF]|️)?|[✊✋](?:\uD83C[\uDFFB-\uDFFF])?|[⏩-⏬⏰⏳◽⚓⚡⚫⛅⛎⛔⛪⛽✅✨❌❎❓-❕➕-➗➰➿⭐]|⛓️?(?:‍💥)?|⛹(?:\uD83C[\uDFFB-\uDFFF]|️)?(?:‍[♀♂]️?)?|❤️?(?:‍(?:🔥|🩹))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]️?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:‍[♀♂]️?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|️)?(?:‍[♀♂]️?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4🇲|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6🇦|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD🇰|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:‍🟫)?|\uDF4B(?:‍🟩)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:‍(?:[♀♂]️?(?:‍➡️?)?|➡️?))?|\uDFF3️?(?:‍(?:⚧️?|🌈))?|\uDFF4(?:‍☠️?|󠁧󠁢\uDB40(?:\uDC65󠁮󠁧|\uDC73󠁣󠁴|\uDC77󠁬󠁳)󠁿)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]️?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:‍[♀♂]️?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|️)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:‍⬛)?|\uDC15(?:‍🦺)?|\uDC26(?:‍(?:⬛|🔥))?|\uDC3B(?:‍❄️?)?|\uDC41️?(?:‍🗨️?)?|\uDC68(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:\uDC8B‍\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]‍\uD83D(?:\uDC66(?:‍👦)?|\uDC67(?:‍\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:‍👦)?|\uDC67(?:‍\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:\uDC8B‍\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍👨\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:\uDC8B‍\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍👨\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:\uDC8B‍\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍👨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:\uDC8B‍\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍👨\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:\uDC8B‍\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍👨\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:\uDC8B‍\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:‍👦)?|\uDC67(?:‍\uD83D[\uDC66\uDC67])?|\uDC69‍\uD83D(?:\uDC66(?:‍👦)?|\uDC67(?:‍\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:[\uDC68\uDC69]|\uDC8B‍\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:[\uDC68\uDC69]|\uDC8B‍\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:[\uDC68\uDC69]|\uDC8B‍\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:[\uDC68\uDC69]|\uDC8B‍\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:‍(?:[⚕⚖✈]️?|❤️?‍\uD83D(?:[\uDC68\uDC69]|\uDC8B‍\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:‍[♀♂]️?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|️)?(?:‍[♀♂]️?)?|\uDE2E(?:‍💨)?|\uDE35(?:‍💫)?|\uDE36(?:‍🌫️?)?|\uDE42(?:‍[↔↕]️?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:‍(?:[♀♂]️?(?:‍➡️?)?|➡️?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:‍[♀♂]️?)?|[\uDDDE\uDDDF](?:‍[♀♂]️?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:‍[♀♂]️?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:‍(?:[♀♂]️?(?:‍➡️?)?|➡️?))?|\uDDD1(?:‍(?:[⚕⚖✈]️?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍🧑|\uDDD1‍🧒(?:‍🧒)?|\uDDD2(?:‍🧒)?))|\uD83C(?:\uDFFB(?:‍(?:[⚕⚖✈]️?|❤️?‍(?:💋‍)?🧑\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍🧑\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:‍(?:[⚕⚖✈]️?|❤️?‍(?:💋‍)?🧑\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍🧑\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:‍(?:[⚕⚖✈]️?|❤️?‍(?:💋‍)?🧑\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍🧑\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:‍(?:[⚕⚖✈]️?|❤️?‍(?:💋‍)?🧑\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍🧑\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:‍(?:[⚕⚖✈]️?|❤️?‍(?:💋‍)?🧑\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:‍➡️?)?|[\uDDB0-\uDDB3]|\uDD1D‍🧑\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:‍🫲\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:‍🫲\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:‍🫲\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:‍🫲\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:‍🫲\uD83C[\uDFFB-\uDFFE])?))?))",Fa="a-z\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0100-\\u024f\\u0253\\u0254\\u0256\\u0257\\u0259\\u025b\\u0263\\u0268\\u026f\\u0272\\u0289\\u028b\\u02bb\\u0300-\\u036f\\u1e00-\\u1eff\\u0400-\\u04ff\\u0500-\\u0527\\u2de0-\\u2dff\\ua640-\\ua69f\\u0591-\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u05d0-\\u05ea\\u05f0-\\u05f4\\ufb1d-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4f\\u0610-\\u061a\\u0620-\\u065f\\u066e-\\u06d3\\u06d5-\\u06dc\\u06de-\\u06e8\\u06ea-\\u06ef\\u06fa-\\u06fc\\u06ff\\u0750-\\u077f\\u08a0\\u08a2-\\u08ac\\u08e4-\\u08fe\\ufb50-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\u200c\\u0e01-\\u0e3a\\u0e40-\\u0e4e\\u1100-\\u11ff\\u3130-\\u3185\\uA960-\\uA97F\\uAC00-\\uD7AF\\uD7B0-\\uD7FF\\u3003\\u3005\\u303b\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uff9f\\uffa1-\\uffdc",$o="0-9_"+Fa,On="·",Ja="["+Fa+"0-9]",Qo="((?:https?|ftp)://|mailto:)?",xi=Qo+"(?:"+Ja+"{1,64}(?::"+Ja+"{0,64})?@)?(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}|"+Ja+"["+Fa+On+"0-9-]{0,64}(?:\\."+Ja+"["+Fa+On+"0-9-]{0,64}){0,10}(?:\\.(xn--[0-9a-z]{2,16}|["+Fa+`]{2,24})))(?::\\d{2,5})?(?:/(?:\\S{0,255}[^\\s.;,(\\[\\]{}<>"'])?)?`,Li="[a-zA-Z\\d_]{5,32}",Yo="(?:\\s|^)((?:(\\d{1,2}):(?:[0-5]?[0-9])|(?:\\d{1,2}|\\d{3,})):(?:[0-5][0-9]))(?:\\s|$)",Xo="\\/([a-zA-Z\\d_]{1,32})(?:@("+Li+"))?(\\b|$)",Vn=new RegExp("(^| )(@)("+Li+")|("+xi+")|(\\n)|("+Jo+")|(^|[\\s\\(\\]])(#["+$o+"]{2,64})|(^|\\s)"+Xo+"|"+Yo,"i"),Zo=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ep=/(^|\s|\n)(````?)([\s\S]+?)(````?)([\s\n\.,:?!;]|$)|(^|\s|\x01)(`|~~|\*\*|__|_-_|\|\|)([^\n]+?)\7([\x01\s\.,:?!;]|$)|@(\d+)\s*\((.+?)\)|(\[(.+?)\]\((.+?)\))/m,rs={"`":"messageEntityCode","``":"messageEntityPre","**":"messageEntityBold",__:"messageEntityItalic","~~":"messageEntityStrike","_-_":"messageEntityUnderline","||":"messageEntitySpoiler"};new Set(Object.values(rs));const os=new Set(["messageEntityEmoji","messageEntityLinebreak","messageEntityCaret"]),tp=new Set(os);for(const r in rs)os.add(rs[r]);const ap=/^\+\d+$/,sp=new Set(["messageEntityLinebreak","messageEntityCaret","messageEntityHighlight","messageEntityBotCommand","messageEntityTimestamp"]),np=new Set(["messageEntityBold","messageEntityItalic","messageEntityCode","messageEntityPre","messageEntityUnderline","messageEntityStrike","messageEntityBlockquote","messageEntitySpoiler"]);function ip(r){for(let e=0;e<r.length;++e){const t=r[e];let a=-1;do if(a=r.findIndex((s,n)=>np.has(s._)&&n!==e&&s._===t._&&s.offset-t.length===t.offset),a!==-1){const s=r[a];t.length+=s.length,r.splice(a,1)}while(a!==-1)}}function rp(r,e){return r.offset<e.offset+e.length&&r.offset+r.length>e.offset}const Nn=new Set(["messageEntityPre","messageEntityCode"]);function Oi(r,e,t=Nn.has(e._)){if(t)return r.find(n=>rp(n,e));let a=-1,s=-1;return r.find(n=>{const{offset:i,length:o}=n;return Nn.has(n._)&&(a=i,s=a+o),a!==-1&&e.offset>=a&&e.offset<s&&!tp.has(e._)?!0:e._===n._||!os.has(e._)&&!os.has(n._)?e.offset>=i&&e.length+e.offset<=o+i:!1})}function op(r){r.sort((e,t)=>e.offset-t.offset||t.length-e.length)}function Vi(r,e){r=r.slice();const t=e.filter(a=>!Oi(r,a));r.push(...t),op(r);for(let a=0;a<r.length;++a){let s=r[a];if(s._==="messageEntityEmoji"){const n=r[a+1];n&&n.offset<s.offset+s.length&&(s=r[a]={...s},s.length=n.offset-s.offset)}}return r}function Ht(r,e=[],t){const a=[];let s=!1;const n=(f,l=0,m=0)=>Oi(e,l||m?{...f,length:f.length+m+l}:f,!0)?s=!1:(a.push(f),s=!0),i=[];let o=0,p;for(;p=r.match(ep);){const f=p[1]||"",l=p.index+f.length,m=p[0].slice(f.length),g=o+l,_=g+m.length,S=l>0&&r.slice(0,l);S&&i.push(S);const D=p[3]||p[8]||p[11]||p[13];let C;if(s=!1,D.match(/^`*$/))i.push(m);else if(p[3]){const k=p[3].match(/(.*?)\n/)?.[1]||"";let B=k?p[3].slice(k.length):p[3];const L=B[0]===`
`?1:0,R=B[B.length-1]===`
`?-1:void 0;B=B.slice(L,R),C={_:"messageEntityPre",language:k,offset:g,length:B.length};const T=p[2].length+(k?k.length:0)+(L?1:0),V=p[4].length+(R?1:0);if(n(C,T,V)){L&&(o-=1),R&&(o-=1),k&&(o-=k.length);let O="";{const h=i[i.length-1];h&&!/\s/.test(h[h.length-1])&&(O=`
`)}i.push(O,B,p[5]),o-=p[2].length+p[4].length}}else if(p[7]){const w=p[6]==="",k=p[7];C={_:rs[k],offset:g+(w?0:p[6].length),length:D.length},n(C,k.length,k.length)&&(w?i.push(D):i.push(p[6]+D+p[9]),o-=k.length*2+(w?2:0))}else if(p[11])C={_:"messageEntityMentionName",user_id:p[10].toUserId(),offset:g,length:D.length},n(C)&&(i.push(D),o-=m.length-D.length);else if(p[12]){const w=p[14];C={_:"messageEntityTextUrl",url:w,offset:g,length:D.length};const k=1,B=4+w.length;n(C,k,B)&&(i.push(D),o-=p[12].length-D.length)}s||i.push(m),r=r.substr(l+m.length),o+=l+m.length;const b=o-_;b&&e.forEach(w=>{w.offset>=g&&(w.offset+=b)})}r&&i.push(r);let d=i.join("");d.replace(/\s+/g,"").length||(d=r,a.splice(0,a.length)),e=Vi(e,a),ip(e);let c=d.length;if(!t){d=d.replace(/^\s*/,"");let f=c-d.length;f&&e.forEach(l=>{l.offset=Math.max(0,l.offset-f)}),d=d.replace(/\s*$/,""),f=c-d.length,c=d.length,f&&e.forEach(l=>{l.offset+l.length>c&&(l.length=c-l.offset)})}return[d,e]}pe&&(pe.parseMarkdown=Ht);function Ni(r,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(a=>{const s=Object.getOwnPropertyDescriptor(t.prototype,a)||Object.create(null);a!=="constructor"&&Object.defineProperty(r.prototype,a,s)})})}function ps(r,e){if(be(r))return"nanos"in r?+r.amount+ +r.nanos/1e9:+r.amount/1e9;const t=+r%1*1e9;return{_:"starsAmount",amount:Math.abs(+r|0),nanos:t}}function Gi(r,e,t=!0,a=!0){let s,n,i,o,p=!1;const d=f=>{const l=i,m=o;try{const g=r.apply(null,f);l(g)}catch(g){console.error("debounce error",g),m(g)}},c=(...f)=>{n||(n=new Promise((m,g)=>(i=m,o=g))),s?(clearTimeout(s),p=!0,o(),n=new Promise((m,g)=>(i=m,o=g))):t&&(d(f),p=!1);const l=de.setTimeout(()=>{a&&(!t||p)&&d(f),s===l&&(s=n=i=o=void 0,p=!1)},e);return s=l,n.catch(Se),n};return c.clearTimeout=()=>{s&&(de.clearTimeout(s),o(),s=n=i=o=void 0,p=!1)},c.isDebounced=()=>!!s,c}const ws=6;class qi{constructor(){this.updatesState={pendingPtsUpdates:[],pendingSeqUpdates:{},syncPending:null,syncLoading:null},this.channelStates={},this.attached=!1,this.subscriptions={},this.processUpdateMessage=(e,t={})=>{const a=this.log.bindPrefix("processUpdateMessage"),s={date:e.date,seq:e.seq,seqStart:e.seq_start,ignoreSyncLoading:t.ignoreSyncLoading,local:t.local};switch(a.debug("processUpdateMessage",e,t),e._){case"updatesTooLong":case"new_session_created":this.forceGetDifference();break;case"updateShort":this.processUpdate(e.update,s);break;case"updateShortMessage":case"updateShortChatMessage":{a.debug("updateShortMessage | updateShortChatMessage",{...e});const n=e.pFlags.out,i=e.from_id||(n?this.appPeersManager.peerId:e.user_id),o=e.chat_id?e.chat_id.toPeerId(!0):e.user_id.toPeerId(!1)||this.appPeersManager.peerId;this.processUpdate({_:"updateNewMessage",message:{_:"message",pFlags:e.pFlags,id:e.id,from_id:this.appPeersManager.getOutputPeer(i.toPeerId()),peer_id:this.appPeersManager.getOutputPeer(o),date:e.date,message:e.message,fwd_from:e.fwd_from,reply_to:e.reply_to,entities:e.entities,ttl_period:e.ttl_period},pts:e.pts,pts_count:e.pts_count},s);break}case"updatesCombined":case"updates":this.appUsersManager.saveApiUsers(e.users,t.override),this.appChatsManager.saveApiChats(e.chats,t.override),e.updates.forEach(n=>{this.processUpdate(n,s)});break;default:a.warn("unknown update message",e)}},this.debouncedUpdateStarsBalance=Gi(()=>{const e=this.appPaymentsManager.getStarsStatus(!0);e instanceof Promise&&e.then(t=>{this.appPaymentsManager.updateLocalStarsBalance(t.balance)})},1e3,!1,!0),this._constructor(!1),this.name="UPDATES",this.logTypes=ye.Error|ye.Warn|ye.Log}setProxy(){const e=this;this.updatesState=new Proxy(this.updatesState,{set:function(t,a,s){return t[a]=s,e.saveUpdatesState(),!0}})}saveUpdatesState(){const e=this.updatesState;this.appStateManager.pushToState("updates",{seq:e.seq,pts:e.pts,date:e.date})}popPendingSeqUpdate(){const e=this.updatesState,t=e.seq+1,a=e.pendingSeqUpdates[t];if(!a)return!1;const s=a.updates;for(let n=0,i=s.length;n<i;++n)this.saveUpdate(s[n]);return e.seq=a.seq,a.date&&e.date<a.date&&(e.date=a.date),delete e.pendingSeqUpdates[t],!this.popPendingSeqUpdate()&&e.syncPending?.seqAwaiting&&e.seq>=e.syncPending.seqAwaiting&&(e.syncPending.ptsAwaiting?delete e.syncPending.seqAwaiting:this.clearStatePendingSync(e)),!0}popPendingPtsUpdate(e){const t=e?this.getChannelState(e):this.updatesState;if(!t.pendingPtsUpdates.length)return!1;t.pendingPtsUpdates.sort((i,o)=>i.pts-o.pts);let a=t.pts,s=0,n=0;for(let i=0,o=t.pendingPtsUpdates.length;i<o;++i){const p=t.pendingPtsUpdates[i];a+=p.pts_count,a>=p.pts&&(s=p.pts,n=i)}if(!s)return!1;this.log.debug("pop pending pts updates",s,t.pendingPtsUpdates.slice(0,n+1)),t.pts=s;for(let i=0;i<=n;++i){const o=t.pendingPtsUpdates[i];this.saveUpdate(o)}return t.pendingPtsUpdates.splice(0,n+1),!t.pendingPtsUpdates.length&&t.syncPending&&(t.syncPending.seqAwaiting?delete t.syncPending.ptsAwaiting:this.clearStatePendingSync(t)),!0}forceGetDifference(){this.updatesState.syncLoading||this.getDifference()}processLocalUpdate(e){this.processUpdateMessage({_:"updateShort",update:e},{local:!0,ignoreSyncLoading:!0})}processPaidMessageUpdate(e){const t=this.appPaymentsManager.getCachedStarsStatus();if(e.paidStars&&t){const s=ps(t.balance)-e.paidStars;this.appPaymentsManager.updateLocalStarsBalance(ps(s),e.wereStarsReserved?e.paidStars:void 0),this.debouncedUpdateStarsBalance()}}getDifference(e=!1){const t=this.log.bindPrefix("getDifference");t("get",e);const a=this.updatesState,s=a.syncLoading;s||(a.pendingSeqUpdates={},a.pendingPtsUpdates=[]),this.clearStatePendingSync(a);const n=this.apiManager.invokeApi("updates.getDifference",{pts:a.pts,pts_total_limit:e?1200:void 0,date:a.date,qts:-1},{timeout:2147483647}).then(i=>{if(t("result",i),i._==="updates.differenceEmpty"){t("apply empty diff",i.seq),a.date=i.date,a.seq=i.seq;return}if(e&&this.rootScope.dispatchEvent("state_synchronizing"),i._!=="updates.differenceTooLong"){this.appUsersManager.saveApiUsers(i.users),this.appChatsManager.saveApiChats(i.chats),t("applying",i.other_updates.length,"other updates"),i.other_updates.forEach(p=>{switch(p._){case"updateChannelTooLong":case"updateNewChannelMessage":case"updateEditChannelMessage":this.processUpdate(p);return}this.saveUpdate(p)}),t("applying",i.new_messages.length,"new messages"),i.new_messages.forEach(p=>{this.saveUpdate({_:"updateNewMessage",message:p,pts:a.pts,pts_count:0})});const o=i._==="updates.difference"?i.state:i.intermediate_state;a.seq=o.seq,a.pts=o.pts,a.date=o.date}else a.pts=i.pts,a.date=te(!0)+this.timeManager.getServerTimeOffset(),delete a.seq,this.channelStates={},t.warn("result type",i._),this.onDifferenceTooLong();if(t("apply diff",a.seq,a.pts),i._==="updates.differenceSlice")return this.getDifference();t("finish")});return s||this.setDifferencePromise(a,n),n}clearStatePendingSync(e){e.syncPending&&(clearTimeout(e.syncPending.timeout),e.syncPending=null)}getChannelDifference(e){const t=this.getChannelState(e),a=t.syncLoading;a||(t.pendingPtsUpdates=[]);const s=this.log.bindPrefix("getChannelDifference-"+e);this.clearStatePendingSync(t),s("get",t.pts);const n=this.apiManager.invokeApi("updates.getChannelDifference",{channel:this.appChatsManager.getChannelInput(e),filter:{_:"channelMessagesFilterEmpty"},pts:t.pts,limit:1e3},{timeout:2147483647}).then(i=>{if(s("diff result",i),t.pts="pts"in i?i.pts:void 0,t.lastDifferenceTime=Date.now(),i._==="updates.channelDifferenceEmpty"){s("apply channel empty diff",i);return}if(i._==="updates.channelDifferenceTooLong"){s("channel diff too long",i),delete this.channelStates[e],this.saveUpdate({_:"updateChannelReload",channel_id:e});return}if(this.appUsersManager.saveApiUsers(i.users),this.appChatsManager.saveApiChats(i.chats),s("applying",i.other_updates.length,"channel other updates"),i.other_updates.forEach(o=>{this.saveUpdate(o)}),s("applying",i.new_messages.length,"channel new messages"),i.new_messages.forEach(o=>{this.saveUpdate({_:"updateNewChannelMessage",message:o,pts:t.pts,pts_count:0})}),s("apply channel diff",t.pts),i._==="updates.channelDifference"&&!i.pFlags.final)return this.getChannelDifference(e);s("finished channel get diff")});return a||this.setDifferencePromise(t,n,e),n}onDifferenceTooLong(){for(const e in this){const t=this[e];t instanceof W&&t.clear?.()}this.rootScope.dispatchEvent("state_cleared")}setDifferencePromise(e,t,a){e.syncLoading=t,!a&&this.rootScope.dispatchEvent("state_synchronizing"),t.then(()=>{e.syncLoading=null,!a&&this.rootScope.dispatchEvent("state_synchronized")},()=>{e.syncLoading=null})}addChannelState(e,t){var a;if(!t)throw new Error("Add channel state without pts "+e);return(a=this.channelStates)[e]??(a[e]={pts:t,pendingPtsUpdates:[],syncPending:null,syncLoading:null})}getChannelState(e,t){return this.channelStates[e]===void 0&&this.addChannelState(e,t),this.channelStates[e]}processUpdate(e,t={}){var c;let a;switch(e._){case"updateNewChannelMessage":case"updateEditChannelMessage":a=this.appPeersManager.getPeerId(e.message.peer_id).toChatId();break;case"updateChannelTooLong":if(a=e.channel_id,!(a in this.channelStates))return!1;break;default:"channel_id"in e&&"pts"in e&&(a=e.channel_id);break}const{pts:s,pts_count:n}=e,i=a?this.getChannelState(a,s):this.updatesState,o=this.log.bindPrefix(`processUpdate${a?`-${a}`:""}`);if(o("process",i.pts,Oe(e)),i.syncLoading&&!t.ignoreSyncLoading)return o("ignoring update, sync loading"),!1;if(i.syncLoading&&o("ignoring syncLoading"),e._==="updateChannelTooLong")return(!i.lastPtsUpdateTime||i.lastPtsUpdateTime<Date.now()-ws)&&(o.warn("channel too long, get diff"),this.getChannelDifference(a)),!1;if(e._==="updateNewMessage"||e._==="updateEditMessage"||e._==="updateNewChannelMessage"||e._==="updateEditChannelMessage"){const f=e.message,l=this.appPeersManager.getPeerId(f.peer_id),m=f.fwd_from||{};let g;if(f.from_id&&!this.appUsersManager.hasUser(this.appPeersManager.getPeerId(f.from_id),f.pFlags.post)&&(g="author")||m.from_id&&!this.appUsersManager.hasUser(this.appPeersManager.getPeerId(m.from_id),!!m.from_id.channel_id)&&(g="fwdAuthor")||m.from_id?.channel_id&&!this.appChatsManager.hasChat(m.from_id.channel_id,!0)&&(g="fwdChannel")||l.isUser()&&!this.appUsersManager.hasUser(l)&&(g="toPeer User")||l.isAnyChat()&&!this.appChatsManager.hasChat(l.toChatId())&&(g="toPeer Chat"))return o.warn("not enough data for message update",l,g,f),a&&this.appChatsManager.hasChat(a)?this.getChannelDifference(a):this.forceGetDifference(),!1}else if(a&&!this.appChatsManager.hasChat(a))return o("skipping update, missing channel"),!1;let p,d;if(s){if(i.pts+(n||0)<s)return o.warn("pts hole",i,e,a&&this.appChatsManager.getChat(a)),i.pendingPtsUpdates.push(e),!i.syncPending&&!i.syncLoading&&(i.syncPending={timeout:de.setTimeout(()=>{i.syncPending=null,!i.syncLoading&&(a?this.getChannelDifference(a):this.getDifference())},ws)}),i.syncPending&&(i.syncPending.ptsAwaiting=!0),!1;if(s>i.pts)i.pts=s,p=!0,i.lastPtsUpdateTime=Date.now();else if(n)return o.warn("duplicate update"),!1;a&&t.date&&this.updatesState.date<t.date&&(this.updatesState.date=t.date)}else if(!a&&t.seq>0){const f=t.seq,l=t.seqStart||f;if(l!==i.seq+1&&l>i.seq)return o.warn("seq hole",i,i.syncPending?.seqAwaiting),(c=i.pendingSeqUpdates)[l]??(c[l]={seq:f,date:t.date,updates:[]}),i.pendingSeqUpdates[l].updates.push(e),i.syncPending||(i.syncPending={timeout:de.setTimeout(()=>{i.syncPending=null,!i.syncLoading&&this.getDifference()},ws)}),(!i.syncPending.seqAwaiting||i.syncPending.seqAwaiting<l)&&(i.syncPending.seqAwaiting=l),!1;i.seq!==f&&(i.seq=f,t.date&&i.date<t.date&&(i.date=t.date),d=!0)}this.saveUpdate(e),p?this.popPendingPtsUpdate(a):d&&this.popPendingSeqUpdate()}saveUpdate(e){this.log.debug("update",e),this.dispatchEvent(e._,e)}subscribeToChannelUpdates(e){var s;const t=(s=this.subscriptions)[e]??(s[e]={count:0});++t.count;const a=()=>{const n=this.getChannelState(e);!n.syncLoading&&(!n.lastDifferenceTime||Date.now()-n.lastDifferenceTime>2500)&&this.getChannelDifference(e)};t.interval??(t.interval=de.setInterval(a,3e3)),a()}unsubscribeFromChannelUpdates(e,t){const a=this.subscriptions[e];!a?.interval||--a.count&&!t||(clearInterval(a.interval),a.interval=void 0,delete this.subscriptions[e])}attach(){this.attached||(this.log("attach"),this.attached=!0,this.appStateManager.getState().then(({updates:e})=>{const t=this.appStateManager.newVersion;this.log("got state",e),!e||!e.pts||!e.date?(this.log("will get new state"),this.updatesState.syncLoading=new Promise(a=>{this.apiManager.invokeApi("updates.getState",{},{noErrorBox:!0}).then(s=>{this.updatesState.seq=s.seq,this.updatesState.pts=s.pts,this.updatesState.date=s.date,this.saveUpdatesState(),this.updatesState.syncLoading=null,a()})})):(Object.assign(this.updatesState,e),this.log("will get difference",Object.assign({},e)),this.getDifference(!0)),this.apiManager.setUpdatesProcessor(this.processUpdateMessage),this.setProxy(),t&&this.updatesState.syncLoading.then(async()=>{const a={en:"was updated to version",ru:"обновлён до версии"},s=i=>fetch(`changelogs/${i}_${t.split(" ")[0]}.md`).then(o=>o.status===200&&o.ok&&o.text()||Promise.reject()).then(o=>{const p=a[i]||a.en;o=`**Telegram Web${le.suffix} ${p} ${t}**

`+o;const[c,f]=Ht(o,[]),l={_:"updateServiceNotification",entities:f,message:c,type:"local",pFlags:{},inbox_date:te(!0),media:void 0};this.processLocalUpdate(l)}),n=Qt([this.networkerFactory.language,"en"]);for(const i of n)try{await s(i);break}catch{}})}))}}Ni(qi,[ba,W]);const ln="";function Rt(...r){return r.join(ln)}function pp(r){return r.split(ln)}function dp(r,e,t,a){const s=e.split(ln),n=s.length;let i=r;for(let p=0;p<n-1;++p){const d=s[p];i=i[d]??(i[d]={})}const o=s[n-1];t===void 0&&a?delete i[o]:i[o]=t}class cp extends W{constructor(){super(...arguments),this.savedAvatarURLs={}}after(){this.rootScope.addEventListener("avatar_update",({peerId:e,threadId:t})=>{t||this.removeFromAvatarsCache(e)})}isAvatarCached(e,t){const a=this.savedAvatarURLs[e];return t===void 0?!!a:!!(a&&a[t]&&!(a[t]instanceof Promise))}removeFromAvatarsCache(e){this.savedAvatarURLs[e]&&(delete this.savedAvatarURLs[e],re.getInstance().invokeVoid("mirror",{name:"avatars",key:""+e,accountNumber:this.getAccountNumber()}))}loadAvatar(e,t,a){var p;const s=(p=this.savedAvatarURLs)[e]??(p[e]={});if(s[a])return s[a];const n={_:"inputPeerPhotoFileLocation",pFlags:{},peer:this.appPeersManager.getInputPeerById(e),photo_id:t.photo_id},i={dcId:t.dc_id,location:n};a==="photo_big"&&(n.pFlags.big=!0,i.limitPart=512*1024);const o=this.apiFileManager.download(i);return s[a]=o.then(d=>{const c=s[a]=URL.createObjectURL(d);return re.getInstance().invokeVoid("mirror",{name:"avatars",key:Rt(e,a),value:c,accountNumber:this.getAccountNumber()}),c})}}const fp={8:new Uint8Array(1),16:new Uint16Array(1),32:new Uint32Array(1)};function Ma(r){const e=fp[r];return ra(e),e[0]}function Et(){return""+Ma(32)+Ma(32)%16777215}function Kt(r){return ra(new Uint8Array(r))}class lp{constructor(){this.onTabStateChange=()=>{},this.tabs=new Map}start(){const e=re.getInstance();e.addEventListener("tabState",(t,a)=>{const s=this.tabs.get(a);s.state=t,this.onTabStateChange(),e.invokeVoid("tabsUpdated",[...this.tabs.values()].map(({state:n})=>n))})}getTabs(){return[...this.tabs.values()].filter(e=>!!e.state)}addTab(e){const t={source:e,state:void 0};this.tabs.set(e,t),this.onTabStateChange()}deleteTab(e){this.tabs.delete(e),this.onTabStateChange(),re.getInstance().invokeVoid("tabsUpdated",[...this.tabs.values()].map(({state:t})=>t))}}const Yt=new lp;pe&&(pe.appTabsManager=Yt);class mp extends W{after(){this.calls=new Map,Ft().IS_CALL_SUPPORTED&&this.apiUpdatesManager.addMultipleEventsListeners({updatePhoneCall:e=>{this.saveCall(e.phone_call)},updatePhoneCallSignalingData:e=>{this.rootScope.dispatchEvent("call_signaling",{callId:e.phone_call_id,data:e.data})}})}computeKey(e,t,a){return this.cryptoWorker.invokeCrypto("compute-dh-key",e,t,a)}saveCall(e){const t=e._==="phoneCallDiscarded",a=this.calls.get(e.id);a?($t(a,e),t&&this.calls.delete(e.id),e=a):t||this.calls.set(e.id,e);const s=Yt.getTabs();s.sort((o,p)=>o.state.idleStartTime-p.state.idleStartTime);const n=s.find(o=>o.state.accountNumber===this.getAccountNumber()),i=s[0];return n?re.getInstance().invokeVoid("event",{name:"call_update",args:[e],accountNumber:this.getAccountNumber()},n.source):i&&e._!=="phoneCallEmpty"&&e._!=="phoneCallDiscarded"&&re.getInstance().invokeVoid("callNotification",{callerId:e.admin_id,callId:e.id,accountNumber:this.getAccountNumber()}),e}getCall(e){return this.calls.get(e)}getCallInput(e){const t=this.getCall(e);return{_:"inputPhoneCall",id:t.id,access_hash:t.access_hash}}savePhonePhoneCall(e){return this.appUsersManager.saveApiUsers(e.users),this.saveCall(e.phone_call)}generateDh(){return this.apiManager.invokeApi("messages.getDhConfig",{version:0,random_length:256}).then(e=>this.cryptoWorker.invokeCrypto("generate-dh",e))}async requestCall(e,t,a,s){const n=await this.apiManager.invokeApi("phone.requestCall",{user_id:this.appUsersManager.getUserInput(e),protocol:t,video:s,random_id:Ma(32),g_a_hash:a});return this.savePhonePhoneCall(n)}async discardCall(e,t,a,s){if(!this.getCall(e))return;const n=await this.apiManager.invokeApi("phone.discardCall",{video:s,peer:this.getCallInput(e),duration:t,reason:a,connection_id:"0"});this.apiUpdatesManager.processUpdateMessage(n)}}function gp(r,e,t,a){if(!r||r.pFlags.deactivated&&e!=="view_messages")return!1;const s=t===void 0;if(r.pFlags.creator&&s)return!0;if(r._==="chatForbidden"||r._==="channelForbidden"||r.pFlags.left&&!r.pFlags.megagroup||!t&&(t=r.admin_rights||r.banned_rights||r.default_banned_rights,!t))return!1;let n={};t&&(n=t.pFlags);const i=t._==="chatAdminRights";switch(e){case"embed_links":case"send_games":case"send_gifs":case"send_inline":case"send_media":case"send_messages":case"send_polls":case"send_stickers":case"send_photos":case"send_videos":case"send_roundvideos":case"send_audios":case"send_voices":case"send_docs":case"send_plain":{if(!i&&n[e]||r._==="channel"&&!r.pFlags.megagroup&&!n.post_messages)return!1;break}case"delete_messages":case"manage_call":return!!n[e];case"pin_messages":return i?!!(n[e]||!r.pFlags.megagroup&&n.post_messages):!n[e];case"invite_links":return i&&!!n.invite_users;case"toggle_forum":case"change_type":case"delete_chat":return!1;case"change_info":case"invite_users":return i||r.pFlags.broadcast?!!n[e]:!n[e];case"delete_stories":case"edit_stories":case"post_stories":case"add_admins":case"anonymous":case"post_messages":case"manage_direct_messages":case"edit_messages":return i&&!!n[e];case"ban_users":case"change_permissions":return i&&!!n.ban_users;case"view_participants":return!!(r._==="chat"||!r.pFlags.broadcast||r.pFlags.creator||i);case"create_giveaway":return i&&!!n.post_messages;case"manage_topics":return i?!!n[e]:!n[e];case"just_admin":return i}return!0}function ut(r){return typeof r!="object"?r:r.peer?oe(r.peer):r.user_id?.toPeerId()}function Xt(r){if(!r)return[];const e=r.usernames;return e?e.filter(t=>t.pFlags.active).map(t=>t.username):r.username?[r.username]:[]}function xt(r){return r[r.length-1]}function up(r,e,t){const a=[];let s=0,n=0;for(;s<r.length&&n<e.length;){const i=r[s],o=e[n];t(i,o)===0?(a.push(o),s++,n++):t(i,o)<0?(a.push(i),s++):(a.push(o),n++)}for(;s<r.length;)a.push(r[s++]);for(;n<e.length;)a.push(e[n++]);return a}function hp(r,e,t){let a=0;if(r.length){for(;a<e.length;a++){const s=e[a];if(Gn(r,s,t)<0)break;let n=a;for(;n<e.length&&Gn(r,e[n],t)===0;)n++;if(a===n)continue;let i=[...r];for(let o=a;o<n;o++)i=up(i,e[o],t);e.splice(a,n-a,i);return}e.splice(a,0,r)}}function Gn(r,e,t){if(!r.length||!e.length)return 0;const a=r[0],s=xt(r),n=e[0],i=xt(e);return t(s,n)<0?-1:t(i,a)<0?1:0}class yp{constructor(){this.isEnd=!1,this.cachedSlices=[],this.cachedItemsMap=new Map}async getItems({limit:e,offsetId:t,fetchItems:a,getId:s,backLimit:n=0}){let i=[],o=e,p=!1,d=!1,c=!1,f=!1;if(t)for(const g of this.cachedSlices){const _=g.indexOf(String(t));if(_===-1)continue;c=g===this.cachedSlices[0],p=g===xt(this.cachedSlices);const S=Math.max(0,_-n);i=g.slice(S,_+e+1),o=Math.max(0,e+1-i.length-(_-S)),f=S===0,d=xt(i)===xt(g)}const l=p&&this.isEnd;if(o&&!l){const g=xt(i),_=g?(BigInt(xt(i))+BigInt(1)).toString():void 0,S=g?1:0,D=o+S,C=await a({limit:D,offsetId:_||t});C.length===S&&(this.isEnd=!0),hp(C.map(w=>String(s(w))),this.cachedSlices,(w,k)=>-1*Ti(w,k));for(const w of C)this.cachedItemsMap.set(String(s(w)),w);const b=new Set(C.map(w=>String(s(w))));i=[...i.filter(w=>!b.has(String(w))),...C.map(s)]}return{items:i.filter(g=>String(g)!==String(t)).map(g=>this.cachedItemsMap.get(String(g))),isStart:!t||c&&f,isEnd:this.isEnd&&(p&&d||!this.cachedSlices.length)}}}const _p={_:"chatAdminRights",pFlags:{change_info:!0,delete_messages:!0,ban_users:!0,invite_users:!0,pin_messages:!0,manage_call:!0,other:!0,manage_topics:!0}};class vp extends W{constructor(){super(...arguments),this.clear=(e=!1)=>{if(e)this.chats={};else for(const t in this.chats)if(t&&!this.peersStorage.isPeerNeeded(t.toPeerId(!0))){const a=this.chats[t];this.appUsersManager.modifyUsernamesCache(a,!1),this.storage.delete(t),delete this.chats[t]}this.recommendations={}},this.onChatUpdated=(e,t,a)=>{this.apiUpdatesManager.processUpdateMessage(t),(a||t?.updates?.length)&&this.isChannel(e)&&this.rootScope.dispatchEvent("invalidate_participants",e)},this.onChatUpdatedForce=(e,t)=>this.onChatUpdated(e,t,!0),this.adminLogsFetcherMap=new Map,this.onUpdateChannelParticipant=e=>{this.appProfileManager.invalidateChannelParticipants(e.channel_id),this.rootScope.dispatchEvent("chat_participant",e)},this.onUpdateChatDefaultBannedRights=e=>{const t=this.appPeersManager.getPeerId(e.peer).toChatId(),a=this.chats[t];a&&(a.default_banned_rights=e.default_banned_rights,this.rootScope.dispatchEvent("chat_update",t))}}after(){return this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateChannelParticipant:this.onUpdateChannelParticipant,updateChatDefaultBannedRights:this.onUpdateChatDefaultBannedRights}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("chats")]).then(([e,{results:t,storage:a}])=>{this.storage=a,this.saveApiChats(t),this.peersStorage.addEventListener("peerNeeded",s=>{s.isUser()||this.storage.getFromCache(s.toChatId())||this.storage.set({[s.toChatId()]:this.getChat(s.toChatId())})}),this.peersStorage.addEventListener("peerUnneeded",s=>{s.isUser()||!this.storage.getFromCache(s.toChatId())||this.storage.delete(s.toChatId())}),this.rootScope.addEventListener("premium_toggle",()=>{this.recommendations={}})})}saveApiChats(e,t){!e||e.saved||(e.saved=!0,e.forEach(a=>this.saveApiChat(a,t)))}saveApiChat(e,t){if(!e||e._==="chatEmpty")return;const a=this.chats[e.id];if(e.pFlags??(e.pFlags={}),e.pFlags.min&&a!==void 0)return;e._==="channel"&&e.participants_count===void 0&&a!==void 0&&a.participants_count&&(e.participants_count=a.participants_count),e.photo?._==="chatPhotoEmpty"&&delete e.photo;const s=this.appUsersManager.setUsernameToCache(e,a);e.emoji_status?._==="emojiStatusEmpty"&&delete e.emoji_status;const n=e.id.toPeerId(!0);if(a===void 0)this.chats[e.id]=e,this.mirrorChat(e);else{const i=a.photo?.photo_id,o=e.photo?.photo_id,p=a.pFlags.forum!==e.pFlags.forum,d=i!==o||p,c=a.emoji_status?.document_id!==e.emoji_status?.document_id,f=a.title!==e.title||s,l=c||a.pFlags.verified!==e.pFlags.verified||a.pFlags.scam!==e.pFlags.scam||a.pFlags.fake!==e.pFlags.fake,m=a.pFlags.left!==e.pFlags.left,g=a.pFlags.signature_profiles!==e.pFlags.signature_profiles,_=this.appStoriesManager.saveApiPeerStories(e,a);$t(a,e),this.mirrorChat(a),this.rootScope.dispatchEvent("chat_update",e.id),_?.(),m&&this.rootScope.dispatchEvent("chat_participation",{chatId:e.id,left:!!e.pFlags.left}),d&&this.rootScope.dispatchEvent("avatar_update",{peerId:n}),(f||l)&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:n}),p&&this.rootScope.dispatchEvent("chat_toggle_forum",{chatId:e.id,enabled:!!e.pFlags.forum}),g&&this.apiUpdatesManager.processLocalUpdate({_:"updateChannelReload",channel_id:e.id})}this.peersStorage.isPeerNeeded(n)&&this.storage.set({[e.id]:e})}mirrorChat(e){re.getInstance().invokeVoid("mirror",{name:"peers",key:""+e.id.toPeerId(!0),value:e,accountNumber:this.getAccountNumber()})}getChat(e){return this.chats[e]}getChats(){return this.chats}hasRights(e,t,a,s){return gp(this.getChat(e),t,a)}editChatDefaultBannedRights(e,t){const a=this.getChat(e);return a.default_banned_rights&&a.default_banned_rights.until_date===t.until_date&&We(a.default_banned_rights.pFlags,t.pFlags)?Promise.resolve():this.apiManager.invokeApi("messages.editChatDefaultBannedRights",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0)),banned_rights:t}).then(this.onChatUpdated.bind(this,e))}updateChannelPaidMessagesPrice(e,t,a){return this.apiManager.invokeApi("channels.updatePaidMessagesPrice",{broadcast_messages_allowed:a,channel:this.getChannelInput(e),send_paid_messages_stars:t}).then(this.onChatUpdated.bind(this,e))}isChannel(e){const t=this.chats[e];return!!(t&&(t._==="channel"||t._==="channelForbidden"))}isMegagroup(e){return!!this.chats[e]?.pFlags?.megagroup}isForum(e){return!!this.chats[e]?.pFlags?.forum}isBroadcast(e){return this.isChannel(e)&&!this.isMegagroup(e)}isMonoforum(e){const t=this.chats[e];return!!(t?._==="channel"&&t?.pFlags?.monoforum)}isInChat(e){let t=!0;const a=this.getChat(e);return(!a||a._==="channelForbidden"||a._==="chatForbidden"||a._==="chatEmpty"||a.pFlags.left||a.pFlags.deactivated)&&(t=!1),t}canManageDirectMessages(e){let t=this.getChat(e);return t?._!=="channel"||(t?.pFlags?.monoforum&&t?.linked_monoforum_id&&(t=this.getChat(t.linked_monoforum_id)),t?._!=="channel")?!1:!!t.admin_rights?.pFlags?.manage_direct_messages}getStarsAmount(e){const t=this.getChat(e);if(t?._==="channel")return!t.admin_rights&&+t.send_paid_messages_stars||void 0}isPublic(e){const t=this.getChat(e);return!!Xt(t)[0]}getChannelInput(e){const t=this.getChat(e);return!t||!t.access_hash?{_:"inputChannelEmpty"}:{_:"inputChannel",channel_id:e,access_hash:t.access_hash||"0"}}getInputPeer(e){return this.isChannel(e)?this.getChannelInputPeer(e):this.getChatInputPeer(e)}getChatInputPeer(e){return{_:"inputPeerChat",chat_id:e}}getChannelInputPeer(e){return{_:"inputPeerChannel",channel_id:e,access_hash:this.getChat(e).access_hash||0}}hasChat(e,t){const a=this.chats[e];return be(a)&&(t||!a.pFlags.min)}getChatString(e){const t=this.getChat(e);return this.isChannel(e)?(this.isMegagroup(e)?"s":"c")+e+"_"+t.access_hash:"g"+e}getChatSearchText(e){const t=this.chats[e];return t?[t.title,...Xt(t)].filter(Boolean).join(" "):""}createChannel(e){return this.apiManager.invokeApi("channels.createChannel",e).then(t=>(this.apiUpdatesManager.processUpdateMessage(t),t.chats[0].id))}inviteToChannel(e,t){const a=this.getChannelInput(e),s=t.map(n=>this.appUsersManager.getUserInput(n));return this.apiManager.invokeApi("channels.inviteToChannel",{channel:a,users:s}).then(n=>{const i=te(!0);return t.filter(p=>!n.missing_invitees.some(d=>d.user_id===p)).map(p=>this.generateUpdateChannelParticipant({chatId:e,newParticipant:{_:"channelParticipant",date:i,user_id:p}})).forEach(p=>{this.apiUpdatesManager.processLocalUpdate(p)}),this.onChatUpdatedForce(e,n.updates),n.missing_invitees})}createChat(e,t){return this.apiManager.invokeApi("messages.createChat",{users:t.map(a=>this.appUsersManager.getUserInput(a)),title:e}).then(a=>(this.apiUpdatesManager.processUpdateMessage(a.updates),{chatId:a.updates.chats[0].id,missingInvitees:a.missing_invitees}))}leaveChannel(e){return this.apiManager.invokeApi("channels.leaveChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}joinChannel(e){return this.apiManager.invokeApi("channels.joinChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}addToChat(e,t){return this.isChannel(e)?this.inviteToChannel(e,[t].flat()):this.addChatUser(e,t)}addChatUser(e,t,a=100){return Array.isArray(t)?Promise.all(t.map(s=>this.addChatUser(e,s,a))).then(s=>s.flat()):this.apiManager.invokeApi("messages.addChatUser",{chat_id:e,user_id:this.appUsersManager.getUserInput(t),fwd_limit:a}).then(s=>(this.onChatUpdated(e,s.updates),s.missing_invitees),s=>{if(s.type==="USER_NOT_MUTUAL_CONTACT")return[{_:"missingInvitee",pFlags:{},user_id:t}];throw s})}deleteChatUser(e,t){return this.apiManager.invokeApi("messages.deleteChatUser",{chat_id:e,user_id:this.appUsersManager.getUserInput(t)}).then(this.onChatUpdated.bind(this,e))}leaveChat(e){return this.deleteChatUser(e,this.appUsersManager.getSelf().id)}leave(e){return this.isChannel(e)?this.leaveChannel(e):this.leaveChat(e)}delete(e){return this.isChannel(e)?this.deleteChannel(e):this.deleteChat(e)}deleteChannel(e){return this.apiManager.invokeApi("channels.deleteChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}deleteChat(e){return this.apiManager.invokeApi("messages.deleteChat",{chat_id:e})}async migrateChat(e){const t=this.getChat(e);if(t._==="channel")return t.id;{const a=t.migrated_to;if(a)return a.channel_id}return this.apiManager.invokeApi("messages.migrateChat",{chat_id:e}).then(a=>(this.onChatUpdated(e,a),a.updates.find(n=>n._==="updateChannel").channel_id))}updateUsername(e,t,a){const s=this.apiManager.invokeApi("channels.updateUsername",{channel:this.getChannelInput(e),username:t});return this.refreshChatAfterRequest(e,s,a)}async editAdmin(e,t,a,s=""){const n=this.isChannel(e),o=ut(t).toUserId(),p=Object.keys(a.pFlags).length>0,d=!s&&(!p||We(a,_p));if(!n&&d){await this.apiManager.invokeApi("messages.editChatAdmin",{chat_id:e,user_id:this.appUsersManager.getUserInput(o),is_admin:p}),this.apiUpdatesManager.processLocalUpdate({_:"updateChatParticipantAdmin",chat_id:e,user_id:o,is_admin:p,version:0});return}e=await this.migrateChat(e);const c=await this.apiManager.invokeApi("channels.editAdmin",{channel:this.getChannelInput(e),user_id:this.appUsersManager.getUserInput(o),admin_rights:a,rank:s}),f=te(!0),l=this.generateUpdateChannelParticipant({chatId:e,newParticipant:p?{_:"channelParticipantAdmin",date:f,admin_rights:a,promoted_by:this.appUsersManager.getSelf().id,user_id:o,rank:s,pFlags:{}}:{_:"channelParticipant",date:f,user_id:o},prevParticipant:t,wasChannel:n});this.apiUpdatesManager.processLocalUpdate(l),this.onChatUpdatedForce(e,c)}editPhoto(e,t){const a={_:"inputChatUploadedPhoto",file:t};let s;return this.isChannel(e)?s=this.apiManager.invokeApi("channels.editPhoto",{channel:this.getChannelInput(e),photo:a}):s=this.apiManager.invokeApi("messages.editChatPhoto",{chat_id:e,photo:a}),s.then(this.onChatUpdated.bind(this,e))}editTitle(e,t){let a;return this.isChannel(e)?a=this.apiManager.invokeApi("channels.editTitle",{channel:this.getChannelInput(e),title:t}):a=this.apiManager.invokeApi("messages.editChatTitle",{chat_id:e,title:t}),a.then(this.onChatUpdated.bind(this,e))}editAbout(e,t){const a=e.toPeerId(!0);return this.apiManager.invokeApi("messages.editChatAbout",{peer:this.appPeersManager.getInputPeerById(a),about:t}).then(()=>{this.appProfileManager.modifyCachedFullChat(e,s=>{s.about=t})})}generateUpdateChannelParticipant({chatId:e,prevParticipant:t,newParticipant:a,wasChannel:s}){const n=te(!0),i=ut(t||a);return{_:"updateChannelParticipant",channel_id:e,date:n,actor_id:void 0,qts:void 0,user_id:i,prev_participant:s?t:void 0,new_participant:a,pFlags:{}}}async editBanned(e,t,a){const s=ut(t),n=this.isChannel(e);e=await this.migrateChat(e);const i=await this.apiManager.invokeApi("channels.editBanned",{channel:this.getChannelInput(e),participant:this.appPeersManager.getInputPeerById(s),banned_rights:a}),o=te(!0),p=this.generateUpdateChannelParticipant({chatId:e,wasChannel:n,prevParticipant:t,newParticipant:Object.keys(a.pFlags).length?{_:"channelParticipantBanned",date:o,banned_rights:a,kicked_by:this.appUsersManager.getSelf().id,peer:this.appPeersManager.getOutputPeer(s),pFlags:a.pFlags.view_messages?{left:!0}:{}}:void 0});this.apiUpdatesManager.processLocalUpdate(p),this.onChatUpdated(e,i)}clearChannelParticipantBannedRights(e,t){return this.editBanned(e,t,{_:"chatBannedRights",until_date:0,pFlags:{}})}kickFromChannel(e,t){return this.editBanned(e,t,{_:"chatBannedRights",until_date:0,pFlags:{view_messages:!0}})}kickFromChat(e,t){return this.isChannel(e)?this.kickFromChannel(e,t):this.deleteChatUser(e,be(t)?ut(t):t.toUserId())}resolveChannel(e){return this.apiManager.invokeApiSingle("channels.getChannels",{id:[be(e)?e:{_:"inputChannel",channel_id:e,access_hash:"0"}]}).then(t=>{this.saveApiChats(t.chats)})}setChatAvailableReactions(e,t){return this.appProfileManager.modifyCachedFullChat(e,a=>{a.available_reactions=t}),this.apiManager.invokeApi("messages.setChatAvailableReactions",{peer:this.getInputPeer(e),available_reactions:t}).then(this.onChatUpdated.bind(this,e))}getSendAs(e,t=!1){const a=i=>(this.appUsersManager.saveApiUsers(i.users),this.saveApiChats(i.chats),i.peers),s=this.getChannelInputPeer(e),n=this.apiManager.invokeApiCacheable("channels.getSendAs",{for_paid_reactions:t,peer:s},{cacheSeconds:60,syncIfHasResult:!0});return se(n,a)}checkUsername(e,t){return this.apiManager.invokeApi("channels.checkUsername",{channel:this.getChannelInput(e),username:t})}deactivateAllUsernames(e,t){const a=this.apiManager.invokeApi("channels.deactivateAllUsernames",{channel:this.getChannelInput(e)});return this.refreshChatAfterRequest(e,a,t)}makeChannelPrivate(e){const t=[this.updateUsername(e,"",!0),this.deactivateAllUsernames(e,!0)],a=Promise.all(t).then(()=>!0);return this.refreshChatAfterRequest(e,a)}refreshChatAfterRequest(e,t,a){return a?t:t.then(s=>this.getChannels([e]).then(()=>s))}getChannels(e){return this.apiManager.invokeApi("channels.getChannels",{id:e.map(t=>this.getChannelInput(t))}).then(t=>{this.saveApiChats(t.chats)})}toggleSomething(e,t,a,s){return this.migrateChat(e).then(n=>this.apiManager.invokeApi(`channels.${t}`,{channel:this.getChannelInput(n),enabled:a}).then((s?this.onChatUpdatedForce:this.onChatUpdated).bind(this,n)))}toggleParticipantsHidden(e,t){return this.toggleSomething(e,"toggleParticipantsHidden",t,!0)}togglePreHistoryHidden(e,t){return this.toggleSomething(e,"togglePreHistoryHidden",t,!0)}toggleSignatures(e,t,a){return this.apiManager.invokeApi("channels.toggleSignatures",{channel:this.getChannelInput(e),signatures_enabled:t,profiles_enabled:a}).then(this.onChatUpdated.bind(this,e))}toggleNoForwards(e,t){return this.apiManager.invokeApi("messages.toggleNoForwards",{peer:this.getInputPeer(e),enabled:t}).then(this.onChatUpdated.bind(this,e))}toggleJoinToSend(e,t){return this.toggleSomething(e,"toggleJoinToSend",t)}toggleJoinRequest(e,t){return this.toggleSomething(e,"toggleJoinRequest",t)}toggleForum(e,t){return this.toggleSomething(e,"toggleForum",t)}toggleAntiSpam(e,t){return this.toggleSomething(e,"toggleAntiSpam",t)}toggleViewForumAsMessages(e,t){return this.apiUpdatesManager.processLocalUpdate({_:"updateChannelViewForumAsMessages",channel_id:e,enabled:t}),this.toggleSomething(e,"toggleViewForumAsMessages",t)}toggleAutotranslation(e,t){return this.toggleSomething(e,"toggleAutotranslation",t)}getGroupsForDiscussion(){return this.apiManager.invokeApi("channels.getGroupsForDiscussion").then(e=>(this.saveApiChats(e.chats),e.chats))}async setDiscussionGroup(e,t){return this.getChat(t)&&!this.isChannel(t)&&(t=await this.migrateChat(t)),t&&(await this.appProfileManager.getChannelFull(t)).pFlags.hidden_prehistory&&await this.togglePreHistoryHidden(t,!1),this.apiManager.invokeApi("channels.setDiscussionGroup",{broadcast:this.getChannelInput(e),group:this.getChannelInput(t)}).then(()=>{const a=this.appProfileManager.getCachedFullChat(e),s=t||a.linked_chat_id,n=this.appProfileManager.getCachedFullChat(s);a&&(a.linked_chat_id=t),n&&(n.linked_chat_id=e),a&&this.rootScope.dispatchEvent("chat_full_update",e),n&&this.rootScope.dispatchEvent("chat_full_update",s)})}async toggleSlowMode(e,t){return e=await this.migrateChat(e),this.apiManager.invokeApi("channels.toggleSlowMode",{channel:this.getChannelInput(e),seconds:t}).then(this.onChatUpdated.bind(this,e))}hideChatJoinRequest(e,t,a){return this.apiManager.invokeApi("messages.hideChatJoinRequest",{peer:this.appChatsManager.getInputPeer(e),user_id:this.appUsersManager.getUserInput(t),approved:a}).then(s=>this.onChatUpdated(e,s,!0))}getChannelRecommendations(e){const t=this.recommendations[e];if(t)return t;const a=this.recommendations[e]=this.apiManager.invokeApiSingleProcess({method:"channels.getChannelRecommendations",params:{channel:e?this.getChannelInput(e):void 0},processResult:s=>(this.saveApiChats(s.chats),this.recommendations[e]===a&&(this.recommendations[e]=s),s)});return a}getInactiveChannels(){return this.apiManager.invokeApiSingleProcess({method:"channels.getInactiveChannels",processResult:e=>(this.appPeersManager.saveApiPeers(e),e.chats.map(({id:t},a)=>({id:t,date:e.dates[a]})))})}getSponsoredPeers(e){return this.apiManager.invokeApiSingleProcess({method:"contacts.getSponsoredPeers",params:{q:e},processResult:t=>t._==="contacts.sponsoredPeersEmpty"?[]:(this.appUsersManager.saveApiUsers(t.users),this.appChatsManager.saveApiChats(t.chats),t.peers.map(a=>({...a,peer:oe(a.peer)})))})}fetchAdminLogs({channelId:e,offsetId:t,search:a,flags:s,admins:n,limit:i}){return this.apiManager.invokeApiSingleProcess({method:"channels.getAdminLog",params:{channel:this.getChannelInput(e),q:a||"",min_id:0,max_id:t||0,limit:i,events_filter:s?{_:"channelAdminLogEventsFilter",pFlags:s}:void 0,admins:n?.map(o=>this.appUsersManager.getUserInput(o))},processResult:o=>(this.appUsersManager.saveApiUsers(o.users),this.appChatsManager.saveApiChats(o.chats),o.events)})}getAdminLogsFetcherKey({channelId:e,search:t,flags:a,admins:s}){return a=Object.fromEntries(Object.entries(a||{}).sort(([n],[i])=>n.localeCompare(i)).filter(([,n])=>n)),Object.keys(a).length||(a=void 0),JSON.stringify({channelId:e,search:t||void 0,flags:a,admins:s})}async getAdminLogs({channelId:e,search:t,flags:a,admins:s,offsetId:n,limit:i,backLimit:o}){const p=this.getAdminLogsFetcherKey({channelId:e,search:t,flags:a,admins:s}),d=this.adminLogsFetcherMap.get(p)||new yp;return this.adminLogsFetcherMap.has(p)||this.adminLogsFetcherMap.set(p,d),await d.getItems({offsetId:n,limit:i,backLimit:o,fetchItems:({offsetId:f,limit:l})=>this.fetchAdminLogs({channelId:e,search:t,flags:a,admins:s,offsetId:f,limit:l}),getId:f=>f.id})}setBoostsToUnblockRestrictions(e,t){return this.apiManager.invokeApi("channels.setBoostsToUnblockRestrictions",{channel:this.getChannelInput(e),boosts:t??0}).then(this.onChatUpdatedForce.bind(this,e))}}const Pp=["January","February","March","April","May","June","July","August","September","October","November","December"],Mp=(r,e={})=>{const t=e.monthAsNumber?".":" ",a=("0"+r.getHours()).slice(-2)+":"+("0"+r.getMinutes()).slice(-2)+(e.noSeconds?"":":"+("0"+r.getSeconds()).slice(-2)),s=r.getFullYear();return(e.leadingZero?("0"+r.getDate()).slice(-2):r.getDate())+t+(e.monthAsNumber?("0"+(r.getMonth()+1)).slice(-2):Pp[r.getMonth()])+t+(""+s).slice(e.shortYear?2:0)+(e.noTime?"":(e.timeJoiner||", ")+a)};function ji(r,e,t){"byteLength"in t[r]&&(t[r]=[...t[r]]),e&&e[r]!==t[r]&&(e[r].length=t[r].length,t[r].forEach((a,s)=>{e[r][s]=a}),t[r]=e[r])}function Sp(r){const e="⠁⠂⠄⠈⠐⠠⡀⢀⠃⠅⠆⠉⠊⠌⠑⠒⠔⠘⠡⠢⠤⠨⠰⡁⡂⡄⡈⡐⡠⢁⢂⢄⢈⢐⢠⣀⠇⠋⠍⠎⠓⠕⠖⠙⠚⠜⠣⠥⠦⠩⠪⠬⠱⠲⠴⠸⡃⡅⡆⡉⡊⡌⡑⡒⡔⡘⡡⡢⡤⡨⡰⢃⢅⢆⢉⢊⢌⢑⢒⢔⢘⢡⢢⢤⢨⢰⣁⣂⣄⣈⣐⣠⠏⠗⠛⠝⠞⠧⠫⠭⠮⠳⠵⠶⠹⠺⠼⡇⡋⡍⡎⡓⡕⡖⡙⡚⡜⡣⡥⡦⡩⡪⡬⡱⡲⡴⡸⢇⢋⢍⢎⢓⢕⢖⢙⢚⢜⢣⢥⢦⢩⢪⢬⢱⢲⢴⢸⣃⣅⣆⣉⣊⣌⣑⣒⣔⣘⣡⣢⣤⣨⣰⠟⠯⠷⠻⠽⠾⡏⡗⡛⡝⡞⡧⡫⡭⡮⡳⡵⡶⡹⡺⡼⢏⢗⢛⢝⢞⢧⢫⢭⢮⢳⢵⢶⢹⢺⢼⣇⣋⣍⣎⣓⣕⣖⣙⣚⣜⣣⣥⣦⣩⣪⣬⣱⣲⣴⣸⠿⡟⡯⡷⡻⡽⡾⢟⢯⢷⢻⢽⢾⣏⣗⣛⣝⣞⣧⣫⣭⣮⣳⣵⣶⣹⣺⣼⡿⢿⣟⣯⣷⣻⣽⣾⣿",t=e.length,a=[];for(let s=0;s<r.length;++s)a.push(e[(Math.random()*1e3|0)%t]);return a.join("")}function bp(r,e){const t=r.slice(0,e.offset),a=r.slice(e.offset,e.offset+e.length),s=Sp(a),n=r.slice(e.offset+e.length);return r=t+s+n,{text:r,entityText:s}}function Dp(r,e=[]){return e.forEach(t=>{t._==="messageEntitySpoiler"&&(r=bp(r,t).text)}),r}function zi(r,e){return{_:"inputDocumentFileLocation",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference,thumb_size:e}}const ta="_";function Hi(r,e){const t="",a=t[t.length-1]||"";let s;switch(r._){case"inputPhotoFileLocation":{s=["photo",t[0],r.id,r.thumb_size].filter(Boolean).join(ta);break}case"inputDocumentFileLocation":{s=["document",t[0],r.id,r.thumb_size].filter(Boolean).join(ta);break}case"inputPeerPhotoFileLocation":s=["peerPhoto",r.photo_id,r.pFlags.big?"big":"small"].join(ta);break;case"inputStickerSetThumb":{s=["stickerSetThumb",r.stickerset.id||r.stickerset.short_name||r.stickerset.emoticon||r.stickerset._,r.thumb_version].join(ta);break}case"inputFileLocation":{s=[r.volume_id,r.local_id].join(ta);break}case"inputWebFileLocation":{s=["webFile",r.url].join(ta);break}case"inputWebFileGeoPointLocation":{const n=r.geo_point;s=["geoPoint",n.lat,n.long,r.w,r.h,r.zoom,r.scale].join(ta);break}default:{console.error("Unrecognized location:",r),s="";break}}return s+(e?.downloadId?"_download":"")+(a&&"."+a)}function Cp(r,e){const t=encodeURIComponent(JSON.stringify(e));return r+"/"+t}function Ki(r,{thumb:e,queueId:t,onlyCache:a}={}){const s=zi(r,e?.type);let n;return e?._==="photoSize"?n=r.sticker?"image/webp":r.mime_type.startsWith("image/")?r.mime_type:"image/jpeg":n=r.mime_type||"application/octet-stream",{dcId:r.dc_id,location:s,size:e?e.size:r.size,mimeType:n,fileName:r.file_name,queueId:t,onlyCache:a}}function Ip(r,{download:e=!1,thumb:t,supportsHlsStreaming:a}={}){let s;return e?s="download":t?s="thumb":a?s="hls":r.supportsStreaming?s="stream":s="document",Cp(s,Ki(r,{thumb:t}))}const ze={pdf:"application/pdf",tgv:"application/x-tgwallpattern",tgs:"application/x-tgsticker",json:"application/json",wav:"audio/wav",mp3:"audio/mpeg",ogg:"audio/ogg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",mp4:"video/mp4",webm:"video/webm",mov:"video/quicktime",svg:"image/svg+xml",avif:"image/avif",jxl:"image/jxl",bmp:"image/bmp"},Wi={};for(const r in ze)Wi[ze[r]]=r;function Vt(r){const e=r.length,t=new Uint8Array(Math.ceil(e/2));let a=0;e%2&&(t[a++]=parseInt(r.charAt(0),16));for(let s=a;s<e;s+=2)t[a++]=parseInt(r.substr(s,2),16);return t}pe.bytesFromHex=Vt;function Te(r,e){const t=r.length;if(t!==e.length)return!1;for(let a=0;a<t;++a)if(r[a]!==e[a])return!1;return!0}function ds(r,e){let t=0,a=0;for(let s=0;s<4;s++){const n=r[e+s];if(t=(t<<7)+(n&127),a++,!(n&128))break}return[a,t]}function wp(r){if(r[0]!==5)throw new Error("Invalid DecoderSpecificInfo tag");const[e,t]=ds(r,1),a=1+e;return r.subarray(a,a+t)}function Ap(r){if(r[0]!==4)throw new Error("Invalid DecoderConfigDescriptor tag");const[e,t]=ds(r,1);let a=1+e;return a+=13,wp(r.subarray(a))}function kp(r){if(r[0]!==3)throw new Error("Invalid ES_Descriptor tag");const e=new DataView(r.buffer,r.byteOffset,r.byteLength),[t,a]=ds(r,1);let s=1+t;s+=2;const n=e.getUint8(s);s+=1;const i=n&128,o=n&64;if(i&&(s+=2),o){const d=ds(r,s);s+=1+d[0]+d[1]}return{decoderConfigDescriptor:Ap(r.subarray(s))}}const Ep=[19,136],As=Vt("0327000100041940150000000001f4000000bb750507138856e5a5"),Fp=new TextEncoder().encode("esds"),Tp=new TextEncoder().encode("mp4a");function qn(r,e,t=r.length){for(let a=t-e.length;a>=0;a--){let s=!0;for(let n=0;n<e.length;n++)if(r[a+n]!==e[n]){s=!1;break}if(s)return a}return-1}function Up(r){const e=new DataView(r.buffer,r.byteOffset,r.byteLength);let t=r.length,a=null;for(;;){const i=qn(r,Fp,t);if(i===-1)break;t=i;const o=e.getUint32(i-4);if(o<0||i+o>r.length)continue;const p=qn(r,Tp,i);p===-1||i-p>100||(a={offset:i+8,size:o-12})}if(!a)throw new Error("No ESDS found");const s=r.subarray(a.offset,a.offset+a.size),n=kp(s);if(!n)throw new Error("Invalid ESDS");if(!Te(n.decoderConfigDescriptor,Ep))throw new Error("Not a broken DSCI");if(a.size<As.length)throw new Error(`ESDS Size not enough (expected at least ${As.length}, got ${a.size})`);r.set(As,a.offset)}function Rp(r){try{return Up(r),!0}catch{return!1}}var Ta=(r=>(r[r.Static=1]="Static",r[r.Lottie=2]="Lottie",r[r.WebM=3]="WebM",r))(Ta||{});let Bp=0;class xp extends W{constructor(){super(...arguments),this.onServiceWorkerFail=()=>{for(const e in this.docs){const t=this.docs[e];t.supportsStreaming&&(delete t.supportsStreaming,this.thumbsStorage.deleteCacheContext(t))}}}after(){this.docs={},this.uploadingWallPapers={},this.fixingChromiumMp4={},this.requestingDocParts={},this.altDocsByMainMediaDocument={},re.getInstance().addEventListener("serviceWorkerOnline",e=>{e||this.onServiceWorkerFail()})}saveDoc(e,t,a){if(!e||e._==="documentEmpty")return;if(e.id=e.id.toString(),a){const n=a.map(i=>this.saveDoc(i,t)).filter(Boolean);this.altDocsByMainMediaDocument[e.id]=n,a.splice(0,a.length,...n)}const s=this.docs[e.id];e.file_reference&&(ji("file_reference",s,e),this.referencesStorage.saveContext(e.file_reference,t)),s||(this.docs[e.id]=e);for(let n=0,i=e.attributes.length;n<i;++n){const o=e.attributes[n];switch(o._){case"documentAttributeFilename":{e.file_name=Dp(o.file_name);break}case"documentAttributeAudio":{if(e.type==="round")break;e.duration=o.duration,e.type=o.pFlags.voice&&e.mime_type===ze.ogg?"voice":"audio";break}case"documentAttributeVideo":{e.duration=o.duration,e.w=o.w,e.h=o.h,o.pFlags.round_message?e.type="round":e.type="video";break}case"documentAttributeCustomEmoji":case"documentAttributeSticker":{o.alt!==void 0&&(e.stickerEmojiRaw=o.alt),o.stickerset&&(o.stickerset._==="inputStickerSetEmpty"?delete o.stickerset:o.stickerset._==="inputStickerSetID"&&(e.stickerSetInput=o.stickerset)),e.mime_type===ze.webp&&(e.thumbs||Ft().IS_WEBP_SUPPORTED)?(e.type="sticker",e.sticker=Ta.Static):e.mime_type===ze.webm&&(e.type="sticker",e.sticker=Ta.WebM,e.animated=!0);break}case"documentAttributeImageSize":{e.type="photo",e.w=o.w,e.h=o.h;break}case"documentAttributeAnimated":{(e.mime_type===ze.gif||e.mime_type===ze.mp4)&&(e.type="gif"),e.animated=!0;break}}}if(e.mime_type)e.mime_type===ze.pdf?e.type="pdf":e.mime_type===ze.gif?e.type="gif":e.mime_type===ze.tgs&&e.file_name==="AnimatedSticker.tgs"&&(e.type="sticker",e.animated=!0,e.sticker=Ta.Lottie);else{const n=(e.file_name||"").split(".").pop(),i=n&&ze[n.toLowerCase()];if(i)e.mime_type=i;else switch(e.type){case"gif":case"video":case"round":e.mime_type=ze.mp4;break;case"sticker":e.mime_type=ze.webp;break;case"audio":e.mime_type=ze.mp3;break;case"voice":e.mime_type=ze.ogg;break;default:e.mime_type="application/octet-stream";break}}if(e.type==="voice"||e.type==="round"){const n=e.attributes.find(p=>p._==="documentAttributeFilename"),i=n&&n.file_name.split(".").pop(),o=Mp(new Date(e.date*1e3),{monthAsNumber:!0,leadingZero:!0}).replace(/[:\.]/g,"-").replace(", ","_");e.file_name=`${e.type}_${o}${i?"."+i:""}`}return yt.isServiceWorkerOnline&&(e.type==="gif"&&e.size>8e6||e.type==="audio"||e.type==="video")?(e.supportsStreaming=!0,this.thumbsStorage.getCacheContext(e).url||this.thumbsStorage.setCacheContextURL(e,void 0,Ip(e),0)):e.supportsStreaming=!1,e.file_name||(e.file_name=""),s?Object.assign(s,e):e}getDoc(e){return be(e)?e:this.docs[e]}downloadDoc(e,t,a){return this.apiFileManager.downloadMedia({media:e,queueId:t,onlyCache:a})}saveWebPConvertedStrippedThumb(e,t){const a=this.getDoc(e);if(!a)return;const s=a.thumbs&&a.thumbs.find(n=>n._==="photoStrippedSize");s&&(a.pFlags.stickerThumbConverted=!0,s.bytes=t)}prepareWallPaperUpload(e){const t="wallpaper-upload-"+ ++Bp,a={_:"photoSize",h:0,w:0,location:{},size:e.size,type:Ea};let s={_:"document",access_hash:"",attributes:[],dc_id:0,file_reference:[],id:t,mime_type:e.type,size:e.size,date:te(!0),pFlags:{},thumbs:[a],file_name:e.name};s=this.saveDoc(s);const n=this.thumbsStorage.setCacheContextURL(s,void 0,URL.createObjectURL(e),e.size),i={_:"wallPaper",access_hash:"",document:s,id:t,slug:t,pFlags:{}};return this.uploadingWallPapers[t]={cacheContext:n,file:e},i}uploadWallPaper(e){const{cacheContext:t,file:a}=this.uploadingWallPapers[e];return delete this.uploadingWallPapers[e],this.apiFileManager.upload({file:a,fileName:a.name}).then(n=>this.apiManager.invokeApi("account.uploadWallPaper",{file:n,mime_type:a.type,settings:{_:"wallPaperSettings",pFlags:{}}}).then(i=>(i.document=this.saveDoc(i.document),this.thumbsStorage.setCacheContextURL(i.document,void 0,t.url,t.downloaded),i)))}requestDocPart(e,t,a,s){var f;const n=this.getDoc(e);if(!n)return Promise.reject(ne("NO_DOC"));const i=(f=this.requestingDocParts)[e]??(f[e]=new Set),o=()=>{i.delete(d)&&!i.size&&this.requestingDocParts[e]===i&&delete this.requestingDocParts[e]};let p=!1;const d=()=>{p=!0,o()};i.add(d);const c=this.apiFileManager.requestFilePart({dcId:t,location:zi(n),offset:a,limit:s,checkCancel:()=>{if(p)throw ne("DOWNLOAD_CANCELED")}});return c.finally(o),c}cancelDocPartsRequests(e){const t=this.requestingDocParts[e];if(t)for(const a of t)a()}fixChromiumMp4(e){var t;return(t=this.fixingChromiumMp4)[e]??(t[e]=fetch(e).then(a=>a.arrayBuffer()).then(a=>{const s=new Uint8Array(a);return Rp(s),this.fixingChromiumMp4[e]=URL.createObjectURL(new Blob([s]))}))}getAltDocsByDocument(e){return this.altDocsByMainMediaDocument[e]}}function Lp(r,e){return We(r,e)}function Op(r,e){return We(r,e,["date","reply_to"])&&Lp(r?.reply_to,e?.reply_to)}class Vp extends W{constructor(){super(...arguments),this.getAllDraftsResolved=!1,this.clear=e=>{e||(this.getAllDraftPromise=void 0,this.getAllDraftsResolved=!1),this.drafts={}}}after(){this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateDraftMessage:e=>{const t=this.appPeersManager.getPeerId(e.peer),a=t!==this.rootScope.myId,{draft:s,threadId:n}=e;let i;a&&e.saved_peer_id&&s._==="draftMessage"&&(i=this.appPeersManager.getPeerId(e.saved_peer_id),s.reply_to?._==="inputReplyToMessage"||s.reply_to?._==="inputReplyToMonoForum"?s.reply_to.monoforum_peer_id=i:s.reply_to||(s.reply_to={_:"inputReplyToMonoForum",monoforum_peer_id:this.appPeersManager.getInputPeerById(i)})),this.saveDraft({peerId:t,threadId:n||e.top_msg_id,monoforumThreadId:i,draft:s,notify:!0})}}),this.appStateManager.storage.get("drafts").then(e=>{this.drafts=e||{}})}getKey(e,t){return""+e+(t?"_"+t:"")}getDraft(e,t){return this.drafts[this.getKey(e,t)]}addMissedDialogsOrVoid(){if(!this.getAllDraftsResolved)return this.addMissedDialogs()}addMissedDialogs(){return this.getAllDrafts().then(()=>{this.getAllDraftsResolved=!0;for(const e in this.drafts){if(e.indexOf("_")!==-1){const s=e.split("_")[0]?.toPeerId()||0;this.monoforumDialogsStorage.checkPreloadedDraft(s,this.drafts[e]);continue}const t=e.toPeerId();this.appMessagesManager.getDialogOnly(t)||this.appMessagesManager.reloadConversation(t)}})}getAllDrafts(){return this.getAllDraftPromise??(this.getAllDraftPromise=this.apiManager.invokeApi("messages.getAllDrafts").then(e=>(this.apiUpdatesManager.updatesState.syncLoading||Promise.resolve()).then(()=>{this.apiUpdatesManager.processUpdateMessage(e)})))}saveDraft({peerId:e,threadId:t,monoforumThreadId:a,draft:s,notify:n,force:i}){const o=this.processApiDraft(s,e),p=this.getKey(e,a||t);return o?this.drafts[p]=o:delete this.drafts[p],this.appStateManager.storage.set({drafts:this.drafts}),n&&this.rootScope.dispatchEvent("draft_updated",{peerId:e,threadId:t,monoforumThreadId:a,draft:o,force:i}),o}isEmptyDraft(e){return e?._!=="draftMessage"?!0:e.reply_to!==void 0&&e.reply_to.reply_to_msg_id>0?!1:!e.message.length}processApiDraft(e,t){if(e?._!=="draftMessage")return;const a=e.reply_to;if(a?.reply_to_msg_id){const s=this.appPeersManager.isChannel(t)?t.toChatId():void 0;a.reply_to_msg_id=this.appMessagesIdsManager.generateMessageId(a.reply_to_msg_id,s),a.top_msg_id&&(a.top_msg_id=this.appMessagesIdsManager.generateMessageId(a.top_msg_id,s)),a.reply_to_peer_id&&(a.reply_to_peer_id=this.appPeersManager.getPeerId(a.reply_to_peer_id)),a.monoforum_peer_id&&(a.monoforum_peer_id=this.appPeersManager.getPeerId(a.monoforum_peer_id))}return e}syncDraft({peerId:e,threadId:t,monoforumThreadId:a,localDraft:s,saveOnServer:n=!0,force:i=!1}){const o=this.getDraft(e,a||t);if(Op(o,s))return!0;const p={peer:this.appPeersManager.getInputPeerById(e),message:""};let d;if(this.isEmptyDraft(s)){d={_:"draftMessageEmpty"};let f=a;!f&&this.appPeersManager.isMonoforum(e)&&(o?.reply_to?._==="inputReplyToMessage"||o?.reply_to?._==="inputReplyToMonoForum")&&(f=oe(o.reply_to.monoforum_peer_id)),f&&(p.reply_to={_:"inputReplyToMonoForum",monoforum_peer_id:this.appPeersManager.getInputPeerById(f)})}else{const f=s.message,l=s.entities,m=s.reply_to;m?(p.reply_to={_:"inputReplyToMessage",reply_to_msg_id:H(m.reply_to_msg_id)},m.reply_to_peer_id&&!be(m.reply_to_peer_id)&&(p.reply_to.reply_to_peer_id=this.appPeersManager.getInputPeerById(m.reply_to_peer_id)),m.monoforum_peer_id&&!be(m.monoforum_peer_id)&&(p.reply_to.monoforum_peer_id=this.appPeersManager.getInputPeerById(m.monoforum_peer_id))):a&&(p.reply_to={_:"inputReplyToMonoForum",monoforum_peer_id:this.appPeersManager.getInputPeerById(a)}),l?.length&&(p.entities=this.appMessagesManager.getInputEntities(l)),s.pFlags.no_webpage&&(p.no_webpage=s.pFlags.no_webpage),s.pFlags.invert_media&&(p.invert_media=s.pFlags.invert_media),s.media&&(p.media=s.media),p.message=f}if(t){const f=p.reply_to??(p.reply_to={_:"inputReplyToMessage"});f.reply_to_msg_id?f.top_msg_id=H(t):f.reply_to_msg_id=H(t)}const c=d||s;if(c.date=te(!0)+this.timeManager.getServerTimeOffset(),this.saveDraft({peerId:e,threadId:t,monoforumThreadId:a,draft:c,notify:!0,force:i}),n){const f=this.apiManager.invokeApi("messages.saveDraft",p),l=this.dialogsStorage.getDialogOnly(e);return!l||!H(l.top_message)?f.then(()=>this.appMessagesManager.reloadConversation(e)):f}return!0}clearAllDrafts(){return this.apiManager.invokeApi("messages.clearAllDrafts").then(e=>{if(e)for(const t in this.drafts){const[a,s]=t.split("_"),n=s?+s:void 0;this.rootScope.dispatchEvent("draft_updated",{peerId:a.toPeerId(),...this.appPeersManager.isMonoforum(a.toPeerId())?{threadId:n}:{monoforumThreadId:n},draft:void 0})}})}clearDraft({peerId:e,threadId:t,monoforumThreadId:a}){const s={_:"draftMessageEmpty"};t?this.syncDraft({peerId:e,threadId:t,monoforumThreadId:a,localDraft:s,saveOnServer:!1,force:!0}):this.saveDraft({peerId:e,threadId:t,monoforumThreadId:a,draft:s,notify:!0,force:!0})}setDraft(e,t,a,s){const n={_:"draftMessage",date:te(!0),message:a,pFlags:{},entities:s};t?this.syncDraft({peerId:e,threadId:t,localDraft:n,saveOnServer:!1,force:!0}):this.saveDraft({peerId:e,threadId:t,draft:n,notify:!0,force:!0})}}function Ji(r,e,t,a,s,n){for(const i in r)typeof e[i]!=typeof r[i]?e[i]=Oe(r[i]):be(r[i])&&Ji(r[i],e[i])}function ia(r,e){return r=r.replace(/[\u2640\u2642\u2764](?!\ufe0f)/g,(t,a,s)=>{if(e){const n=t.length;a+=n,e.forEach(i=>{const o=i.offset+i.length;o===a?i.length+=n:o>a&&(i.offset+=n)})}return t+"️"}),r}function jn(r){return r.replace(/\ufe0f/g,"").replace(/🏻|🏼|🏽|🏾|🏿/g,"")}const Np={keywords:{},version:0,langCode:le.langPackCode},ks=32,Ra=class Ra extends W{constructor(){super(...arguments),this.keywordLangPacks={},this.indexedLangPacks={},this.getKeywordsPromises={},this.recent={},this.getRecentEmojisPromises={},this.getCustomEmojiDocumentPromises=new Map,this.emojiGroups={}}getEmojiKeywords(e=le.langPackCode){const t=this.getKeywordsPromises[e];if(t)return t;const a="emojiKeywords_"+e;return this.getKeywordsPromises[e]=this.appStateManager.storage.get(a).then(s=>(be(s)||(s={}),Ji(Np,s),s.langCode=e,this.keywordLangPacks[e]=s,this.apiManager.invokeApi("messages.getEmojiKeywordsDifference",{lang_code:s.langCode,from_version:s.version}).then(n=>{s.version=n.version;const i=s.keywords,o=n.keywords;for(let p=0,d=o.length;p<d;++p){const{keyword:c,emoticons:f}=o[p];i[c]=f}return this.appStateManager.storage.set({[a]:s}),s},()=>s)))}getBothEmojiKeywords(){const e=[this.getEmojiKeywords()];return this.networkerFactory.language!==le.langPackCode&&e.push(this.getEmojiKeywords(this.networkerFactory.language)),this.recent.native||e.push(this.getRecentEmojis("native")),this.rootScope.premium&&e.push(this.appStickersManager.preloadEmojiSets()),Promise.all(e)}indexEmojis(){this.index||(this.index=new za({minChars:2,fullWords:!0}));for(const e in this.keywordLangPacks){if(this.indexedLangPacks[e])continue;const a=this.keywordLangPacks[e].keywords;for(const s in a){const n=a[s];this.index.indexObject(n,s)}this.indexedLangPacks[e]=!0}}searchEmojis({q:e,limit:t=40,minChars:a=2,addCustom:s}){this.indexEmojis(),e=e.toLowerCase().replace(/_/g," ");let n;if(e.trim()){const d=this.index.search(e,a);n=Qt(Fi(Array.from(d))),n.length=Math.min(40,n.length)}else n=this.recent.native.concat(Ra.POPULAR_EMOJI).slice(0,ks),n=Qt(n);const i=[],o=new Set,p=s&&this.appStickersManager.getEmojisSearchIndex();return n.forEach(d=>{if(p){const c=p.search(d,a),f=Array.from(c).filter(l=>!o.has(l)).map(l=>(o.add(l),{docId:l,emoji:d}));i.push(...f)}i.push({emoji:d})}),i.length=Math.min(t,i.length),i}async prepareAndSearchEmojis(e){return await Promise.all([this.getBothEmojiKeywords(),this.appStickersManager.preloadEmojiSets()]),this.searchEmojis(e)}getRecentEmojis(e){const t=this.getRecentEmojisPromises;return t[e]??(t[e]=this.appStateManager.getState().then(a=>{let s=[];if(e==="native"){const{recentEmoji:n}=a;s=Array.isArray(n)&&n.length?n:Ra.POPULAR_EMOJI}else{const{recentCustomEmoji:n}=a;s=Array.isArray(n)&&n.length?n:[]}return this.recent[e]=s}))}modifyRecentEmoji(e,t){const a=e.docId?"custom":"native";e.emoji=ia(e.emoji),this.getRecentEmojis(a).then(s=>{const n=e.docId||e.emoji;Me(s,n),t&&s.unshift(n),s.splice(ks,s.length-ks),this.appStateManager.pushToState(a==="custom"?"recentCustomEmoji":"recentEmoji",s),this.rootScope.dispatchEvent("emoji_recent",{emoji:e,deleted:!t})})}pushRecentEmoji(e){return this.modifyRecentEmoji(e,!0)}deleteRecentEmoji(e){return this.modifyRecentEmoji(e,!1)}getCustomEmojiDocuments(e){return e.length?this.apiManager.invokeApi("messages.getCustomEmojiDocuments",{document_id:e}).then(t=>t.map(a=>this.appDocsManager.saveDoc(a,{type:"customEmoji",docId:a.id})),()=>new Array(e.length).fill(void 0)):Promise.resolve([])}getCachedCustomEmojiDocuments(e){return e.map(t=>this.appDocsManager.getDoc(t))}setDebouncedGetCustomEmojiDocuments(){this.getCustomEmojiDocumentsPromise||!this.getCustomEmojiDocumentPromises.size||(this.getCustomEmojiDocumentsPromise=qe(0).then(()=>{const e=[...this.getCustomEmojiDocumentPromises.keys()],t=[];do{const a=e.splice(0,100),s=this.getCustomEmojiDocuments(a).then(n=>{n.forEach((i,o)=>{const p=a[o],d=this.getCustomEmojiDocumentPromises.get(p);this.getCustomEmojiDocumentPromises.delete(p),d.resolve(i)})});t.push(s)}while(e.length);return Promise.all(t)}).finally(()=>{this.getCustomEmojiDocumentsPromise=void 0,this.setDebouncedGetCustomEmojiDocuments()}))}getCustomEmojiDocument(e){let t=this.getCustomEmojiDocumentPromises.get(e);if(t)return t;const a=this.appDocsManager.getDoc(e);return a||(t=$(),this.getCustomEmojiDocumentPromises.set(e,t),this.setDebouncedGetCustomEmojiDocuments(),t)}getCustomEmojis(){return this.appStickersManager.getEmojiStickers()}getEmojiGroups(e){var a;const t=s=>{s.some(n=>n._==="emojiGroupPremium")||s.push({_:"emojiGroupPremium",title:"Premium",icon_emoji_id:"5269590556232664327"})};return(a=this.emojiGroups)[e]??(a[e]=this.apiManager.invokeApiSingleProcess({method:e==="esg"||e==="stickers"?"messages.getEmojiGroups":e==="status"?"messages.getEmojiStatusGroups":"messages.getEmojiProfilePhotoGroups",params:{hash:0},processResult:async s=>{(e==="esg"||e==="stickers")&&t(s.groups);const n=await Promise.all(s.groups.map(i=>this.getCustomEmojiDocument(i.icon_emoji_id)));return this.emojiGroups[e]=s.groups.map((i,o)=>({group:i,document:n[o]}))}}))}searchCustomEmoji(e){return this.apiManager.invokeApiCacheable("messages.searchCustomEmoji",{hash:0,emoticon:e},{cacheSeconds:3600,syncIfHasResult:!0})}};Ra.POPULAR_EMOJI=["😂","😘","❤️","😍","😊","😁","👍","☺️","😔","😄","😭","💋","😒","😳","😜","🙈","😉","😃","😢","😝","😱","😡","😏","😞","😅","😚","🙊","😌","😀","😋","😆","👌","😐","😕"];let Ks=Ra;var it={MTProto:{constructors:[{id:481674261,predicate:"vector",params:[],type:"Vector t"},{id:85337187,predicate:"resPQ",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"pq",type:"bytes"},{name:"server_public_key_fingerprints",type:"Vector<long>"}],type:"ResPQ"},{id:-1443537003,predicate:"p_q_inner_data_dc",params:[{name:"pq",type:"bytes"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce",type:"int256"},{name:"dc",type:"int"}],type:"P_Q_inner_data"},{id:1459478408,predicate:"p_q_inner_data_temp_dc",params:[{name:"pq",type:"bytes"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce",type:"int256"},{name:"dc",type:"int"},{name:"expires_in",type:"int"}],type:"P_Q_inner_data"},{id:-790100132,predicate:"server_DH_params_ok",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"encrypted_answer",type:"bytes"}],type:"Server_DH_Params"},{id:-1249309254,predicate:"server_DH_inner_data",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"g",type:"int"},{name:"dh_prime",type:"bytes"},{name:"g_a",type:"bytes"},{name:"server_time",type:"int"}],type:"Server_DH_inner_data"},{id:1715713620,predicate:"client_DH_inner_data",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"retry_id",type:"long"},{name:"g_b",type:"bytes"}],type:"Client_DH_Inner_Data"},{id:1003222836,predicate:"dh_gen_ok",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash1",type:"int128"}],type:"Set_client_DH_params_answer"},{id:1188831161,predicate:"dh_gen_retry",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash2",type:"int128"}],type:"Set_client_DH_params_answer"},{id:-1499615742,predicate:"dh_gen_fail",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash3",type:"int128"}],type:"Set_client_DH_params_answer"},{id:1973679973,predicate:"bind_auth_key_inner",params:[{name:"nonce",type:"long"},{name:"temp_auth_key_id",type:"long"},{name:"perm_auth_key_id",type:"long"},{name:"temp_session_id",type:"long"},{name:"expires_at",type:"int"}],type:"BindAuthKeyInner"},{id:-212046591,predicate:"rpc_result",params:[{name:"req_msg_id",type:"long"},{name:"result",type:"Object"}],type:"RpcResult"},{id:558156313,predicate:"rpc_error",params:[{name:"error_code",type:"int"},{name:"error_message",type:"string"}],type:"RpcError"},{id:1579864942,predicate:"rpc_answer_unknown",params:[],type:"RpcDropAnswer"},{id:-847714938,predicate:"rpc_answer_dropped_running",params:[],type:"RpcDropAnswer"},{id:-1539647305,predicate:"rpc_answer_dropped",params:[{name:"msg_id",type:"long"},{name:"seq_no",type:"int"},{name:"bytes",type:"int"}],type:"RpcDropAnswer"},{id:155834844,predicate:"future_salt",params:[{name:"valid_since",type:"int"},{name:"valid_until",type:"int"},{name:"salt",type:"long"}],type:"FutureSalt"},{id:-1370486635,predicate:"future_salts",params:[{name:"req_msg_id",type:"long"},{name:"now",type:"int"},{name:"salts",type:"vector<future_salt>"}],type:"FutureSalts"},{id:880243653,predicate:"pong",params:[{name:"msg_id",type:"long"},{name:"ping_id",type:"long"}],type:"Pong"},{id:-501201412,predicate:"destroy_session_ok",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:1658015945,predicate:"destroy_session_none",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:-1631450872,predicate:"new_session_created",params:[{name:"first_msg_id",type:"long"},{name:"unique_id",type:"long"},{name:"server_salt",type:"long"}],type:"NewSession"},{id:1945237724,predicate:"msg_container",params:[{name:"messages",type:"vector<%Message>"}],type:"MessageContainer"},{id:1538843921,predicate:"message",params:[{name:"msg_id",type:"long"},{name:"seqno",type:"int"},{name:"bytes",type:"int"},{name:"body",type:"Object"}],type:"Message"},{id:-530561358,predicate:"msg_copy",params:[{name:"orig_message",type:"Message"}],type:"MessageCopy"},{id:812830625,predicate:"gzip_packed",params:[{name:"packed_data",type:"bytes"}],type:"Object"},{id:1658238041,predicate:"msgs_ack",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgsAck"},{id:-1477445615,predicate:"bad_msg_notification",params:[{name:"bad_msg_id",type:"long"},{name:"bad_msg_seqno",type:"int"},{name:"error_code",type:"int"}],type:"BadMsgNotification"},{id:-307542917,predicate:"bad_server_salt",params:[{name:"bad_msg_id",type:"long"},{name:"bad_msg_seqno",type:"int"},{name:"error_code",type:"int"},{name:"new_server_salt",type:"long"}],type:"BadMsgNotification"},{id:2105940488,predicate:"msg_resend_req",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgResendReq"},{id:-630588590,predicate:"msgs_state_req",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgsStateReq"},{id:81704317,predicate:"msgs_state_info",params:[{name:"req_msg_id",type:"long"},{name:"info",type:"bytes"}],type:"MsgsStateInfo"},{id:-1933520591,predicate:"msgs_all_info",params:[{name:"msg_ids",type:"Vector<long>"},{name:"info",type:"bytes"}],type:"MsgsAllInfo"},{id:661470918,predicate:"msg_detailed_info",params:[{name:"msg_id",type:"long"},{name:"answer_msg_id",type:"long"},{name:"bytes",type:"int"},{name:"status",type:"int"}],type:"MsgDetailedInfo"},{id:-2137147681,predicate:"msg_new_detailed_info",params:[{name:"answer_msg_id",type:"long"},{name:"bytes",type:"int"},{name:"status",type:"int"}],type:"MsgDetailedInfo"},{id:-161422892,predicate:"destroy_auth_key_ok",params:[],type:"DestroyAuthKeyRes"},{id:178201177,predicate:"destroy_auth_key_none",params:[],type:"DestroyAuthKeyRes"},{id:-368010477,predicate:"destroy_auth_key_fail",params:[],type:"DestroyAuthKeyRes"}],methods:[{id:-1099002127,method:"req_pq_multi",params:[{name:"nonce",type:"int128"}],type:"ResPQ"},{id:-686627650,method:"req_DH_params",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"public_key_fingerprint",type:"long"},{name:"encrypted_data",type:"bytes"}],type:"Server_DH_Params"},{id:-184262881,method:"set_client_DH_params",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"encrypted_data",type:"bytes"}],type:"Set_client_DH_params_answer"},{id:1491380032,method:"rpc_drop_answer",params:[{name:"req_msg_id",type:"long"}],type:"RpcDropAnswer"},{id:-1188971260,method:"get_future_salts",params:[{name:"num",type:"int"}],type:"FutureSalts"},{id:2059302892,method:"ping",params:[{name:"ping_id",type:"long"}],type:"Pong"},{id:-213746804,method:"ping_delay_disconnect",params:[{name:"ping_id",type:"long"},{name:"disconnect_delay",type:"int"}],type:"Pong"},{id:-414113498,method:"destroy_session",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:-1835453025,method:"http_wait",params:[{name:"max_delay",type:"int"},{name:"wait_after",type:"int"},{name:"max_wait",type:"int"}],type:"HttpWait"},{id:-784117408,method:"destroy_auth_key",params:[],type:"DestroyAuthKeyRes"}]},API:{constructors:[{id:-1132882121,predicate:"boolFalse",params:[],type:"Bool"},{id:-1720552011,predicate:"boolTrue",params:[],type:"Bool"},{id:1072550713,predicate:"true",params:[],type:"True"},{id:481674261,predicate:"vector",params:[],type:"Vector t"},{id:-994444869,predicate:"error",params:[{name:"code",type:"int"},{name:"text",type:"string"}],type:"Error"},{id:1450380236,predicate:"null",params:[],type:"Null"},{id:2134579434,predicate:"inputPeerEmpty",params:[],type:"InputPeer"},{id:2107670217,predicate:"inputPeerSelf",params:[],type:"InputPeer"},{id:900291769,predicate:"inputPeerChat",params:[{name:"chat_id",type:"long"}],type:"InputPeer"},{id:-1182234929,predicate:"inputUserEmpty",params:[],type:"InputUser"},{id:-138301121,predicate:"inputUserSelf",params:[],type:"InputUser"},{id:1780335806,predicate:"inputPhoneContact",params:[{name:"flags",type:"#"},{name:"client_id",type:"long"},{name:"phone",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"note",type:"flags.0?TextWithEntities"}],type:"InputContact"},{id:-181407105,predicate:"inputFile",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"name",type:"string"},{name:"md5_checksum",type:"string"}],type:"InputFile"},{id:-1771768449,predicate:"inputMediaEmpty",params:[],type:"InputMedia"},{id:505969924,predicate:"inputMediaUploadedPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.2?true"},{name:"file",type:"InputFile"},{name:"stickers",type:"flags.0?Vector<InputDocument>"},{name:"ttl_seconds",type:"flags.1?int"}],type:"InputMedia"},{id:-1279654347,predicate:"inputMediaPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"id",type:"InputPhoto"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:-104578748,predicate:"inputMediaGeoPoint",params:[{name:"geo_point",type:"InputGeoPoint"}],type:"InputMedia"},{id:-122978821,predicate:"inputMediaContact",params:[{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"}],type:"InputMedia"},{id:480546647,predicate:"inputChatPhotoEmpty",params:[],type:"InputChatPhoto"},{id:-1110593856,predicate:"inputChatUploadedPhoto",params:[{name:"flags",type:"#"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.3?VideoSize"}],type:"InputChatPhoto"},{id:-1991004873,predicate:"inputChatPhoto",params:[{name:"id",type:"InputPhoto"}],type:"InputChatPhoto"},{id:-457104426,predicate:"inputGeoPointEmpty",params:[],type:"InputGeoPoint"},{id:1210199983,predicate:"inputGeoPoint",params:[{name:"flags",type:"#"},{name:"lat",type:"double"},{name:"long",type:"double"},{name:"accuracy_radius",type:"flags.0?int"}],type:"InputGeoPoint"},{id:483901197,predicate:"inputPhotoEmpty",params:[],type:"InputPhoto"},{id:1001634122,predicate:"inputPhoto",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputPhoto"},{id:-539317279,predicate:"inputFileLocation",params:[{name:"volume_id",type:"long"},{name:"local_id",type:"int"},{name:"secret",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputFileLocation"},{id:1498486562,predicate:"peerUser",params:[{name:"user_id",type:"long"}],type:"Peer"},{id:918946202,predicate:"peerChat",params:[{name:"chat_id",type:"long"}],type:"Peer"},{id:-1432995067,predicate:"storage.fileUnknown",params:[],type:"storage.FileType"},{id:1086091090,predicate:"storage.filePartial",params:[],type:"storage.FileType"},{id:8322574,predicate:"storage.fileJpeg",params:[],type:"storage.FileType"},{id:-891180321,predicate:"storage.fileGif",params:[],type:"storage.FileType"},{id:172975040,predicate:"storage.filePng",params:[],type:"storage.FileType"},{id:-1373745011,predicate:"storage.filePdf",params:[],type:"storage.FileType"},{id:1384777335,predicate:"storage.fileMp3",params:[],type:"storage.FileType"},{id:1258941372,predicate:"storage.fileMov",params:[],type:"storage.FileType"},{id:-1278304028,predicate:"storage.fileMp4",params:[],type:"storage.FileType"},{id:276907596,predicate:"storage.fileWebp",params:[],type:"storage.FileType"},{id:-742634630,predicate:"userEmpty",params:[{name:"id",type:"long"}],type:"User"},{id:1326562017,predicate:"userProfilePhotoEmpty",params:[],type:"UserProfilePhoto"},{id:-2100168954,predicate:"userProfilePhoto",params:[{name:"flags",type:"#"},{name:"has_video",type:"flags.0?true"},{name:"personal",type:"flags.2?true"},{name:"photo_id",type:"long"},{name:"stripped_thumb",type:"flags.1?bytes"},{name:"dc_id",type:"int"}],type:"UserProfilePhoto"},{id:164646985,predicate:"userStatusEmpty",params:[],type:"UserStatus"},{id:-306628279,predicate:"userStatusOnline",params:[{name:"expires",type:"int"}],type:"UserStatus"},{id:9203775,predicate:"userStatusOffline",params:[{name:"was_online",type:"int"}],type:"UserStatus"},{id:693512293,predicate:"chatEmpty",params:[{name:"id",type:"long"}],type:"Chat"},{id:1103884886,predicate:"chat",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"left",type:"flags.2?true"},{name:"deactivated",type:"flags.5?true"},{name:"call_active",type:"flags.23?true"},{name:"call_not_empty",type:"flags.24?true"},{name:"noforwards",type:"flags.25?true"},{name:"id",type:"long"},{name:"title",type:"string"},{name:"photo",type:"ChatPhoto"},{name:"participants_count",type:"int"},{name:"date",type:"int"},{name:"version",type:"int"},{name:"migrated_to",type:"flags.6?InputChannel"},{name:"admin_rights",type:"flags.14?ChatAdminRights"},{name:"default_banned_rights",type:"flags.18?ChatBannedRights"}],type:"Chat"},{id:1704108455,predicate:"chatForbidden",params:[{name:"id",type:"long"},{name:"title",type:"string"}],type:"Chat"},{id:640893467,predicate:"chatFull",params:[{name:"flags",type:"#"},{name:"can_set_username",type:"flags.7?true"},{name:"has_scheduled",type:"flags.8?true"},{name:"translations_disabled",type:"flags.19?true"},{name:"id",type:"long"},{name:"about",type:"string"},{name:"participants",type:"ChatParticipants"},{name:"chat_photo",type:"flags.2?Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"exported_invite",type:"flags.13?ExportedChatInvite"},{name:"bot_info",type:"flags.3?Vector<BotInfo>"},{name:"pinned_msg_id",type:"flags.6?int"},{name:"folder_id",type:"flags.11?int"},{name:"call",type:"flags.12?InputGroupCall"},{name:"ttl_period",type:"flags.14?int"},{name:"groupcall_default_join_as",type:"flags.15?Peer"},{name:"theme_emoticon",type:"flags.16?string"},{name:"requests_pending",type:"flags.17?int"},{name:"recent_requesters",type:"flags.17?Vector<long>"},{name:"available_reactions",type:"flags.18?ChatReactions"},{name:"reactions_limit",type:"flags.20?int"}],type:"ChatFull"},{id:-1070776313,predicate:"chatParticipant",params:[{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChatParticipant"},{id:-2023500831,predicate:"chatParticipantsForbidden",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"self_participant",type:"flags.0?ChatParticipant"}],type:"ChatParticipants"},{id:1018991608,predicate:"chatParticipants",params:[{name:"chat_id",type:"long"},{name:"participants",type:"Vector<ChatParticipant>"},{name:"version",type:"int"}],type:"ChatParticipants"},{id:935395612,predicate:"chatPhotoEmpty",params:[],type:"ChatPhoto"},{id:476978193,predicate:"chatPhoto",params:[{name:"flags",type:"#"},{name:"has_video",type:"flags.0?true"},{name:"photo_id",type:"long"},{name:"stripped_thumb",type:"flags.1?bytes"},{name:"dc_id",type:"int"}],type:"ChatPhoto"},{id:-1868117372,predicate:"messageEmpty",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"peer_id",type:"flags.0?Peer"}],type:"Message"},{id:-1665888023,predicate:"message",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"post",type:"flags.14?true"},{name:"from_scheduled",type:"flags.18?true"},{name:"legacy",type:"flags.19?true"},{name:"edit_hide",type:"flags.21?true"},{name:"pinned",type:"flags.24?true"},{name:"noforwards",type:"flags.26?true"},{name:"invert_media",type:"flags.27?true"},{name:"flags2",type:"#"},{name:"offline",type:"flags2.1?true"},{name:"video_processing_pending",type:"flags2.4?true"},{name:"paid_suggested_post_stars",type:"flags2.8?true"},{name:"paid_suggested_post_ton",type:"flags2.9?true"},{name:"id",type:"int"},{name:"from_id",type:"flags.8?Peer"},{name:"from_boosts_applied",type:"flags.29?int"},{name:"peer_id",type:"Peer"},{name:"saved_peer_id",type:"flags.28?Peer"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"via_business_bot_id",type:"flags2.0?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"date",type:"int"},{name:"message",type:"string"},{name:"media",type:"flags.9?MessageMedia"},{name:"reply_markup",type:"flags.6?ReplyMarkup"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"views",type:"flags.10?int"},{name:"forwards",type:"flags.10?int"},{name:"replies",type:"flags.23?MessageReplies"},{name:"edit_date",type:"flags.15?int"},{name:"post_author",type:"flags.16?string"},{name:"grouped_id",type:"flags.17?long"},{name:"reactions",type:"flags.20?MessageReactions"},{name:"restriction_reason",type:"flags.22?Vector<RestrictionReason>"},{name:"ttl_period",type:"flags.25?int"},{name:"quick_reply_shortcut_id",type:"flags.30?int"},{name:"effect",type:"flags2.2?long"},{name:"factcheck",type:"flags2.3?FactCheck"},{name:"report_delivery_until_date",type:"flags2.5?int"},{name:"paid_message_stars",type:"flags2.6?long"},{name:"suggested_post",type:"flags2.7?SuggestedPost"},{name:"schedule_repeat_period",type:"flags2.10?int"},{name:"summary_from_language",type:"flags2.11?string"}],type:"Message"},{id:2055212554,predicate:"messageService",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"reactions_are_possible",type:"flags.9?true"},{name:"silent",type:"flags.13?true"},{name:"post",type:"flags.14?true"},{name:"legacy",type:"flags.19?true"},{name:"id",type:"int"},{name:"from_id",type:"flags.8?Peer"},{name:"peer_id",type:"Peer"},{name:"saved_peer_id",type:"flags.28?Peer"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"date",type:"int"},{name:"action",type:"MessageAction"},{name:"reactions",type:"flags.20?MessageReactions"},{name:"ttl_period",type:"flags.25?int"}],type:"Message"},{id:1038967584,predicate:"messageMediaEmpty",params:[],type:"MessageMedia"},{id:1766936791,predicate:"messageMediaPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.3?true"},{name:"photo",type:"flags.0?Photo"},{name:"ttl_seconds",type:"flags.2?int"}],type:"MessageMedia"},{id:1457575028,predicate:"messageMediaGeo",params:[{name:"geo",type:"GeoPoint"}],type:"MessageMedia"},{id:1882335561,predicate:"messageMediaContact",params:[{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"user_id",type:"long"}],type:"MessageMedia"},{id:-1618676578,predicate:"messageMediaUnsupported",params:[],type:"MessageMedia"},{id:-1230047312,predicate:"messageActionEmpty",params:[],type:"MessageAction"},{id:-1119368275,predicate:"messageActionChatCreate",params:[{name:"title",type:"string"},{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1247687078,predicate:"messageActionChatEditTitle",params:[{name:"title",type:"string"}],type:"MessageAction"},{id:2144015272,predicate:"messageActionChatEditPhoto",params:[{name:"photo",type:"Photo"}],type:"MessageAction"},{id:-1780220945,predicate:"messageActionChatDeletePhoto",params:[],type:"MessageAction"},{id:365886720,predicate:"messageActionChatAddUser",params:[{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1539362612,predicate:"messageActionChatDeleteUser",params:[{name:"user_id",type:"long"}],type:"MessageAction"},{id:-712374074,predicate:"dialog",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"unread_mark",type:"flags.3?true"},{name:"view_forum_as_messages",type:"flags.6?true"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"unread_mentions_count",type:"int"},{name:"unread_reactions_count",type:"int"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"pts",type:"flags.0?int"},{name:"draft",type:"flags.1?DraftMessage"},{name:"folder_id",type:"flags.4?int"},{name:"ttl_period",type:"flags.5?int"}],type:"Dialog"},{id:590459437,predicate:"photoEmpty",params:[{name:"id",type:"long"}],type:"Photo"},{id:-82216347,predicate:"photo",params:[{name:"flags",type:"#"},{name:"has_stickers",type:"flags.0?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"date",type:"int"},{name:"sizes",type:"Vector<PhotoSize>"},{name:"video_sizes",type:"flags.1?Vector<VideoSize>"},{name:"dc_id",type:"int"}],type:"Photo"},{id:236446268,predicate:"photoSizeEmpty",params:[{name:"type",type:"string"}],type:"PhotoSize"},{id:1976012384,predicate:"photoSize",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"size",type:"int"}],type:"PhotoSize"},{id:35527382,predicate:"photoCachedSize",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:286776671,predicate:"geoPointEmpty",params:[],type:"GeoPoint"},{id:-1297942941,predicate:"geoPoint",params:[{name:"flags",type:"#"},{name:"long",type:"double"},{name:"lat",type:"double"},{name:"access_hash",type:"long"},{name:"accuracy_radius",type:"flags.0?int"}],type:"GeoPoint"},{id:1577067778,predicate:"auth.sentCode",params:[{name:"flags",type:"#"},{name:"type",type:"auth.SentCodeType"},{name:"phone_code_hash",type:"string"},{name:"next_type",type:"flags.1?auth.CodeType"},{name:"timeout",type:"flags.2?int"}],type:"auth.SentCode"},{id:782418132,predicate:"auth.authorization",params:[{name:"flags",type:"#"},{name:"setup_password_required",type:"flags.1?true"},{name:"otherwise_relogin_days",type:"flags.1?int"},{name:"tmp_sessions",type:"flags.0?int"},{name:"future_auth_token",type:"flags.2?bytes"},{name:"user",type:"User"}],type:"auth.Authorization"},{id:-1271602504,predicate:"auth.exportedAuthorization",params:[{name:"id",type:"long"},{name:"bytes",type:"bytes"}],type:"auth.ExportedAuthorization"},{id:-1195615476,predicate:"inputNotifyPeer",params:[{name:"peer",type:"InputPeer"}],type:"InputNotifyPeer"},{id:423314455,predicate:"inputNotifyUsers",params:[],type:"InputNotifyPeer"},{id:1251338318,predicate:"inputNotifyChats",params:[],type:"InputNotifyPeer"},{id:-892638494,predicate:"inputPeerNotifySettings",params:[{name:"flags",type:"#"},{name:"show_previews",type:"flags.0?Bool"},{name:"silent",type:"flags.1?Bool"},{name:"mute_until",type:"flags.2?int"},{name:"sound",type:"flags.3?NotificationSound"},{name:"stories_muted",type:"flags.6?Bool"},{name:"stories_hide_sender",type:"flags.7?Bool"},{name:"stories_sound",type:"flags.8?NotificationSound"}],type:"InputPeerNotifySettings"},{id:-1721619444,predicate:"peerNotifySettings",params:[{name:"flags",type:"#"},{name:"show_previews",type:"flags.0?Bool"},{name:"silent",type:"flags.1?Bool"},{name:"mute_until",type:"flags.2?int"},{name:"ios_sound",type:"flags.3?NotificationSound"},{name:"android_sound",type:"flags.4?NotificationSound"},{name:"other_sound",type:"flags.5?NotificationSound"},{name:"stories_muted",type:"flags.6?Bool"},{name:"stories_hide_sender",type:"flags.7?Bool"},{name:"stories_ios_sound",type:"flags.8?NotificationSound"},{name:"stories_android_sound",type:"flags.9?NotificationSound"},{name:"stories_other_sound",type:"flags.10?NotificationSound"}],type:"PeerNotifySettings"},{id:-193510921,predicate:"peerSettings",params:[{name:"flags",type:"#"},{name:"report_spam",type:"flags.0?true"},{name:"add_contact",type:"flags.1?true"},{name:"block_contact",type:"flags.2?true"},{name:"share_contact",type:"flags.3?true"},{name:"need_contacts_exception",type:"flags.4?true"},{name:"report_geo",type:"flags.5?true"},{name:"autoarchived",type:"flags.7?true"},{name:"invite_members",type:"flags.8?true"},{name:"request_chat_broadcast",type:"flags.10?true"},{name:"business_bot_paused",type:"flags.11?true"},{name:"business_bot_can_reply",type:"flags.12?true"},{name:"geo_distance",type:"flags.6?int"},{name:"request_chat_title",type:"flags.9?string"},{name:"request_chat_date",type:"flags.9?int"},{name:"business_bot_id",type:"flags.13?long"},{name:"business_bot_manage_url",type:"flags.13?string"},{name:"charge_paid_message_stars",type:"flags.14?long"},{name:"registration_month",type:"flags.15?string"},{name:"phone_country",type:"flags.16?string"},{name:"name_change_date",type:"flags.17?int"},{name:"photo_change_date",type:"flags.18?int"}],type:"PeerSettings"},{id:-1539849235,predicate:"wallPaper",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"pattern",type:"flags.3?true"},{name:"dark",type:"flags.4?true"},{name:"access_hash",type:"long"},{name:"slug",type:"string"},{name:"document",type:"Document"},{name:"settings",type:"flags.2?WallPaperSettings"}],type:"WallPaper"},{id:1490799288,predicate:"inputReportReasonSpam",params:[],type:"ReportReason"},{id:505595789,predicate:"inputReportReasonViolence",params:[],type:"ReportReason"},{id:777640226,predicate:"inputReportReasonPornography",params:[],type:"ReportReason"},{id:-1376497949,predicate:"inputReportReasonChildAbuse",params:[],type:"ReportReason"},{id:-1041980751,predicate:"inputReportReasonOther",params:[],type:"ReportReason"},{id:-1607745218,predicate:"userFull",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"phone_calls_available",type:"flags.4?true"},{name:"phone_calls_private",type:"flags.5?true"},{name:"can_pin_message",type:"flags.7?true"},{name:"has_scheduled",type:"flags.12?true"},{name:"video_calls_available",type:"flags.13?true"},{name:"voice_messages_forbidden",type:"flags.20?true"},{name:"translations_disabled",type:"flags.23?true"},{name:"stories_pinned_available",type:"flags.26?true"},{name:"blocked_my_stories_from",type:"flags.27?true"},{name:"wallpaper_overridden",type:"flags.28?true"},{name:"contact_require_premium",type:"flags.29?true"},{name:"read_dates_private",type:"flags.30?true"},{name:"flags2",type:"#"},{name:"sponsored_enabled",type:"flags2.7?true"},{name:"can_view_revenue",type:"flags2.9?true"},{name:"bot_can_manage_emoji_status",type:"flags2.10?true"},{name:"display_gifts_button",type:"flags2.16?true"},{name:"id",type:"long"},{name:"about",type:"flags.1?string"},{name:"settings",type:"PeerSettings"},{name:"personal_photo",type:"flags.21?Photo"},{name:"profile_photo",type:"flags.2?Photo"},{name:"fallback_photo",type:"flags.22?Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"bot_info",type:"flags.3?BotInfo"},{name:"pinned_msg_id",type:"flags.6?int"},{name:"common_chats_count",type:"int"},{name:"folder_id",type:"flags.11?int"},{name:"ttl_period",type:"flags.14?int"},{name:"theme",type:"flags.15?ChatTheme"},{name:"private_forward_name",type:"flags.16?string"},{name:"bot_group_admin_rights",type:"flags.17?ChatAdminRights"},{name:"bot_broadcast_admin_rights",type:"flags.18?ChatAdminRights"},{name:"wallpaper",type:"flags.24?WallPaper"},{name:"stories",type:"flags.25?PeerStories"},{name:"business_work_hours",type:"flags2.0?BusinessWorkHours"},{name:"business_location",type:"flags2.1?BusinessLocation"},{name:"business_greeting_message",type:"flags2.2?BusinessGreetingMessage"},{name:"business_away_message",type:"flags2.3?BusinessAwayMessage"},{name:"business_intro",type:"flags2.4?BusinessIntro"},{name:"birthday",type:"flags2.5?Birthday"},{name:"personal_channel_id",type:"flags2.6?long"},{name:"personal_channel_message",type:"flags2.6?int"},{name:"stargifts_count",type:"flags2.8?int"},{name:"starref_program",type:"flags2.11?StarRefProgram"},{name:"bot_verification",type:"flags2.12?BotVerification"},{name:"send_paid_messages_stars",type:"flags2.14?long"},{name:"disallowed_gifts",type:"flags2.15?DisallowedGiftsSettings"},{name:"stars_rating",type:"flags2.17?StarsRating"},{name:"stars_my_pending_rating",type:"flags2.18?StarsRating"},{name:"stars_my_pending_rating_date",type:"flags2.18?int"},{name:"main_tab",type:"flags2.20?ProfileTab"},{name:"saved_music",type:"flags2.21?Document"},{name:"note",type:"flags2.22?TextWithEntities"}],type:"UserFull"},{id:341499403,predicate:"contact",params:[{name:"user_id",type:"long"},{name:"mutual",type:"Bool"}],type:"Contact"},{id:-1052885936,predicate:"importedContact",params:[{name:"user_id",type:"long"},{name:"client_id",type:"long"}],type:"ImportedContact"},{id:383348795,predicate:"contactStatus",params:[{name:"user_id",type:"long"},{name:"status",type:"UserStatus"}],type:"ContactStatus"},{id:-1219778094,predicate:"contacts.contactsNotModified",params:[],type:"contacts.Contacts"},{id:-353862078,predicate:"contacts.contacts",params:[{name:"contacts",type:"Vector<Contact>"},{name:"saved_count",type:"int"},{name:"users",type:"Vector<User>"}],type:"contacts.Contacts"},{id:2010127419,predicate:"contacts.importedContacts",params:[{name:"imported",type:"Vector<ImportedContact>"},{name:"popular_invites",type:"Vector<PopularContact>"},{name:"retry_contacts",type:"Vector<long>"},{name:"users",type:"Vector<User>"}],type:"contacts.ImportedContacts"},{id:182326673,predicate:"contacts.blocked",params:[{name:"blocked",type:"Vector<PeerBlocked>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Blocked"},{id:-513392236,predicate:"contacts.blockedSlice",params:[{name:"count",type:"int"},{name:"blocked",type:"Vector<PeerBlocked>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Blocked"},{id:364538944,predicate:"messages.dialogs",params:[{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Dialogs"},{id:1910543603,predicate:"messages.dialogsSlice",params:[{name:"count",type:"int"},{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Dialogs"},{id:494135274,predicate:"messages.messages",params:[{name:"messages",type:"Vector<Message>"},{name:"topics",type:"Vector<ForumTopic>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:1595959062,predicate:"messages.messagesSlice",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"count",type:"int"},{name:"next_rate",type:"flags.0?int"},{name:"offset_id_offset",type:"flags.2?int"},{name:"search_flood",type:"flags.3?SearchPostsFlood"},{name:"messages",type:"Vector<Message>"},{name:"topics",type:"Vector<ForumTopic>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:1694474197,predicate:"messages.chats",params:[{name:"chats",type:"Vector<Chat>"}],type:"messages.Chats"},{id:-438840932,predicate:"messages.chatFull",params:[{name:"full_chat",type:"ChatFull"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatFull"},{id:-1269012015,predicate:"messages.affectedHistory",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"offset",type:"int"}],type:"messages.AffectedHistory"},{id:1474492012,predicate:"inputMessagesFilterEmpty",params:[],type:"MessagesFilter"},{id:-1777752804,predicate:"inputMessagesFilterPhotos",params:[],type:"MessagesFilter"},{id:-1614803355,predicate:"inputMessagesFilterVideo",params:[],type:"MessagesFilter"},{id:1458172132,predicate:"inputMessagesFilterPhotoVideo",params:[],type:"MessagesFilter"},{id:-1629621880,predicate:"inputMessagesFilterDocument",params:[],type:"MessagesFilter"},{id:2129714567,predicate:"inputMessagesFilterUrl",params:[],type:"MessagesFilter"},{id:-3644025,predicate:"inputMessagesFilterGif",params:[],type:"MessagesFilter"},{id:522914557,predicate:"updateNewMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1318109142,predicate:"updateMessageID",params:[{name:"id",type:"int"},{name:"random_id",type:"long"}],type:"Update"},{id:-1576161051,predicate:"updateDeleteMessages",params:[{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:706199388,predicate:"updateUserTyping",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"top_msg_id",type:"flags.0?int"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:-2092401936,predicate:"updateChatUserTyping",params:[{name:"chat_id",type:"long"},{name:"from_id",type:"Peer"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:125178264,predicate:"updateChatParticipants",params:[{name:"participants",type:"ChatParticipants"}],type:"Update"},{id:-440534818,predicate:"updateUserStatus",params:[{name:"user_id",type:"long"},{name:"status",type:"UserStatus"}],type:"Update"},{id:-1484486364,predicate:"updateUserName",params:[{name:"user_id",type:"long"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"usernames",type:"Vector<Username>"}],type:"Update"},{id:-1991136273,predicate:"updateNewAuthorization",params:[{name:"flags",type:"#"},{name:"unconfirmed",type:"flags.0?true"},{name:"hash",type:"long"},{name:"date",type:"flags.0?int"},{name:"device",type:"flags.0?string"},{name:"location",type:"flags.0?string"}],type:"Update"},{id:-1519637954,predicate:"updates.state",params:[{name:"pts",type:"int"},{name:"qts",type:"int"},{name:"date",type:"int"},{name:"seq",type:"int"},{name:"unread_count",type:"int"}],type:"updates.State"},{id:1567990072,predicate:"updates.differenceEmpty",params:[{name:"date",type:"int"},{name:"seq",type:"int"}],type:"updates.Difference"},{id:16030880,predicate:"updates.difference",params:[{name:"new_messages",type:"Vector<Message>"},{name:"new_encrypted_messages",type:"Vector<EncryptedMessage>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"state",type:"updates.State"}],type:"updates.Difference"},{id:-1459938943,predicate:"updates.differenceSlice",params:[{name:"new_messages",type:"Vector<Message>"},{name:"new_encrypted_messages",type:"Vector<EncryptedMessage>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"intermediate_state",type:"updates.State"}],type:"updates.Difference"},{id:-484987010,predicate:"updatesTooLong",params:[],type:"Updates"},{id:826001400,predicate:"updateShortMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"id",type:"int"},{name:"user_id",type:"long"},{name:"message",type:"string"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:1299050149,predicate:"updateShortChatMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"id",type:"int"},{name:"from_id",type:"long"},{name:"chat_id",type:"long"},{name:"message",type:"string"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:2027216577,predicate:"updateShort",params:[{name:"update",type:"Update"},{name:"date",type:"int"}],type:"Updates"},{id:1918567619,predicate:"updatesCombined",params:[{name:"updates",type:"Vector<Update>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"},{name:"date",type:"int"},{name:"seq_start",type:"int"},{name:"seq",type:"int"}],type:"Updates"},{id:1957577280,predicate:"updates",params:[{name:"updates",type:"Vector<Update>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"},{name:"date",type:"int"},{name:"seq",type:"int"}],type:"Updates"},{id:-1916114267,predicate:"photos.photos",params:[{name:"photos",type:"Vector<Photo>"},{name:"users",type:"Vector<User>"}],type:"photos.Photos"},{id:352657236,predicate:"photos.photosSlice",params:[{name:"count",type:"int"},{name:"photos",type:"Vector<Photo>"},{name:"users",type:"Vector<User>"}],type:"photos.Photos"},{id:539045032,predicate:"photos.photo",params:[{name:"photo",type:"Photo"},{name:"users",type:"Vector<User>"}],type:"photos.Photo"},{id:157948117,predicate:"upload.file",params:[{name:"type",type:"storage.FileType"},{name:"mtime",type:"int"},{name:"bytes",type:"bytes"}],type:"upload.File"},{id:414687501,predicate:"dcOption",params:[{name:"flags",type:"#"},{name:"ipv6",type:"flags.0?true"},{name:"media_only",type:"flags.1?true"},{name:"tcpo_only",type:"flags.2?true"},{name:"cdn",type:"flags.3?true"},{name:"static",type:"flags.4?true"},{name:"this_port_only",type:"flags.5?true"},{name:"id",type:"int"},{name:"ip_address",type:"string"},{name:"port",type:"int"},{name:"secret",type:"flags.10?bytes"}],type:"DcOption"},{id:-870702050,predicate:"config",params:[{name:"flags",type:"#"},{name:"default_p2p_contacts",type:"flags.3?true"},{name:"preload_featured_stickers",type:"flags.4?true"},{name:"revoke_pm_inbox",type:"flags.6?true"},{name:"blocked_mode",type:"flags.8?true"},{name:"force_try_ipv6",type:"flags.14?true"},{name:"date",type:"int"},{name:"expires",type:"int"},{name:"test_mode",type:"Bool"},{name:"this_dc",type:"int"},{name:"dc_options",type:"Vector<DcOption>"},{name:"dc_txt_domain_name",type:"string"},{name:"chat_size_max",type:"int"},{name:"megagroup_size_max",type:"int"},{name:"forwarded_count_max",type:"int"},{name:"online_update_period_ms",type:"int"},{name:"offline_blur_timeout_ms",type:"int"},{name:"offline_idle_timeout_ms",type:"int"},{name:"online_cloud_timeout_ms",type:"int"},{name:"notify_cloud_delay_ms",type:"int"},{name:"notify_default_delay_ms",type:"int"},{name:"push_chat_period_ms",type:"int"},{name:"push_chat_limit",type:"int"},{name:"edit_time_limit",type:"int"},{name:"revoke_time_limit",type:"int"},{name:"revoke_pm_time_limit",type:"int"},{name:"rating_e_decay",type:"int"},{name:"stickers_recent_limit",type:"int"},{name:"channels_read_media_period",type:"int"},{name:"tmp_sessions",type:"flags.0?int"},{name:"call_receive_timeout_ms",type:"int"},{name:"call_ring_timeout_ms",type:"int"},{name:"call_connect_timeout_ms",type:"int"},{name:"call_packet_timeout_ms",type:"int"},{name:"me_url_prefix",type:"string"},{name:"autoupdate_url_prefix",type:"flags.7?string"},{name:"gif_search_username",type:"flags.9?string"},{name:"venue_search_username",type:"flags.10?string"},{name:"img_search_username",type:"flags.11?string"},{name:"static_maps_provider",type:"flags.12?string"},{name:"caption_length_max",type:"int"},{name:"message_length_max",type:"int"},{name:"webfile_dc_id",type:"int"},{name:"suggested_lang_code",type:"flags.2?string"},{name:"lang_pack_version",type:"flags.2?int"},{name:"base_lang_pack_version",type:"flags.2?int"},{name:"reactions_default",type:"flags.15?Reaction"},{name:"autologin_token",type:"flags.16?string"}],type:"Config"},{id:-1910892683,predicate:"nearestDc",params:[{name:"country",type:"string"},{name:"this_dc",type:"int"},{name:"nearest_dc",type:"int"}],type:"NearestDc"},{id:-860107216,predicate:"help.appUpdate",params:[{name:"flags",type:"#"},{name:"can_not_skip",type:"flags.0?true"},{name:"id",type:"int"},{name:"version",type:"string"},{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"document",type:"flags.1?Document"},{name:"url",type:"flags.2?string"},{name:"sticker",type:"flags.3?Document"}],type:"help.AppUpdate"},{id:-1000708810,predicate:"help.noAppUpdate",params:[],type:"help.AppUpdate"},{id:415997816,predicate:"help.inviteText",params:[{name:"message",type:"string"}],type:"help.InviteText"},{id:314359194,predicate:"updateNewEncryptedMessage",params:[{name:"message",type:"EncryptedMessage"},{name:"qts",type:"int"}],type:"Update"},{id:386986326,predicate:"updateEncryptedChatTyping",params:[{name:"chat_id",type:"int"}],type:"Update"},{id:-1264392051,predicate:"updateEncryption",params:[{name:"chat",type:"EncryptedChat"},{name:"date",type:"int"}],type:"Update"},{id:956179895,predicate:"updateEncryptedMessagesRead",params:[{name:"chat_id",type:"int"},{name:"max_date",type:"int"},{name:"date",type:"int"}],type:"Update"},{id:-1417756512,predicate:"encryptedChatEmpty",params:[{name:"id",type:"int"}],type:"EncryptedChat"},{id:1722964307,predicate:"encryptedChatWaiting",params:[{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"}],type:"EncryptedChat"},{id:1223809356,predicate:"encryptedChatRequested",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a",type:"bytes"}],type:"EncryptedChat"},{id:1643173063,predicate:"encryptedChat",params:[{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_or_b",type:"bytes"},{name:"key_fingerprint",type:"long"}],type:"EncryptedChat"},{id:505183301,predicate:"encryptedChatDiscarded",params:[{name:"flags",type:"#"},{name:"history_deleted",type:"flags.0?true"},{name:"id",type:"int"}],type:"EncryptedChat"},{id:-247351839,predicate:"inputEncryptedChat",params:[{name:"chat_id",type:"int"},{name:"access_hash",type:"long"}],type:"InputEncryptedChat"},{id:-1038136962,predicate:"encryptedFileEmpty",params:[],type:"EncryptedFile"},{id:-1476358952,predicate:"encryptedFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"size",type:"long"},{name:"dc_id",type:"int"},{name:"key_fingerprint",type:"int"}],type:"EncryptedFile"},{id:406307684,predicate:"inputEncryptedFileEmpty",params:[],type:"InputEncryptedFile"},{id:1690108678,predicate:"inputEncryptedFileUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"md5_checksum",type:"string"},{name:"key_fingerprint",type:"int"}],type:"InputEncryptedFile"},{id:1511503333,predicate:"inputEncryptedFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputEncryptedFile"},{id:-182231723,predicate:"inputEncryptedFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputFileLocation"},{id:-317144808,predicate:"encryptedMessage",params:[{name:"random_id",type:"long"},{name:"chat_id",type:"int"},{name:"date",type:"int"},{name:"bytes",type:"bytes"},{name:"file",type:"EncryptedFile"}],type:"EncryptedMessage"},{id:594758406,predicate:"encryptedMessageService",params:[{name:"random_id",type:"long"},{name:"chat_id",type:"int"},{name:"date",type:"int"},{name:"bytes",type:"bytes"}],type:"EncryptedMessage"},{id:-1058912715,predicate:"messages.dhConfigNotModified",params:[{name:"random",type:"bytes"}],type:"messages.DhConfig"},{id:740433629,predicate:"messages.dhConfig",params:[{name:"g",type:"int"},{name:"p",type:"bytes"},{name:"version",type:"int"},{name:"random",type:"bytes"}],type:"messages.DhConfig"},{id:1443858741,predicate:"messages.sentEncryptedMessage",params:[{name:"date",type:"int"}],type:"messages.SentEncryptedMessage"},{id:-1802240206,predicate:"messages.sentEncryptedFile",params:[{name:"date",type:"int"},{name:"file",type:"EncryptedFile"}],type:"messages.SentEncryptedMessage"},{id:-95482955,predicate:"inputFileBig",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"name",type:"string"}],type:"InputFile"},{id:767652808,predicate:"inputEncryptedFileBigUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"key_fingerprint",type:"int"}],type:"InputEncryptedFile"},{id:1037718609,predicate:"updateChatParticipantAdd",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"},{name:"version",type:"int"}],type:"Update"},{id:-483443337,predicate:"updateChatParticipantDelete",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"version",type:"int"}],type:"Update"},{id:-1906403213,predicate:"updateDcOptions",params:[{name:"dc_options",type:"Vector<DcOption>"}],type:"Update"},{id:58495792,predicate:"inputMediaUploadedDocument",params:[{name:"flags",type:"#"},{name:"nosound_video",type:"flags.3?true"},{name:"force_file",type:"flags.4?true"},{name:"spoiler",type:"flags.5?true"},{name:"file",type:"InputFile"},{name:"thumb",type:"flags.2?InputFile"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"},{name:"stickers",type:"flags.0?Vector<InputDocument>"},{name:"video_cover",type:"flags.6?InputPhoto"},{name:"video_timestamp",type:"flags.7?int"},{name:"ttl_seconds",type:"flags.1?int"}],type:"InputMedia"},{id:-1468646731,predicate:"inputMediaDocument",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.2?true"},{name:"id",type:"InputDocument"},{name:"video_cover",type:"flags.3?InputPhoto"},{name:"video_timestamp",type:"flags.4?int"},{name:"ttl_seconds",type:"flags.0?int"},{name:"query",type:"flags.1?string"}],type:"InputMedia"},{id:1389939929,predicate:"messageMediaDocument",params:[{name:"flags",type:"#"},{name:"nopremium",type:"flags.3?true"},{name:"spoiler",type:"flags.4?true"},{name:"video",type:"flags.6?true"},{name:"round",type:"flags.7?true"},{name:"voice",type:"flags.8?true"},{name:"document",type:"flags.0?Document"},{name:"alt_documents",type:"flags.5?Vector<Document>"},{name:"video_cover",type:"flags.9?Photo"},{name:"video_timestamp",type:"flags.10?int"},{name:"ttl_seconds",type:"flags.2?int"}],type:"MessageMedia"},{id:1928391342,predicate:"inputDocumentEmpty",params:[],type:"InputDocument"},{id:448771445,predicate:"inputDocument",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputDocument"},{id:-1160743548,predicate:"inputDocumentFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"thumb_size",type:"string"}],type:"InputFileLocation"},{id:922273905,predicate:"documentEmpty",params:[{name:"id",type:"long"}],type:"Document"},{id:-1881881384,predicate:"document",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"date",type:"int"},{name:"mime_type",type:"string"},{name:"size",type:"long"},{name:"thumbs",type:"flags.0?Vector<PhotoSize>"},{name:"video_thumbs",type:"flags.1?Vector<VideoSize>"},{name:"dc_id",type:"int"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"Document"},{id:398898678,predicate:"help.support",params:[{name:"phone_number",type:"string"},{name:"user",type:"User"}],type:"help.Support"},{id:-1613493288,predicate:"notifyPeer",params:[{name:"peer",type:"Peer"}],type:"NotifyPeer"},{id:-1261946036,predicate:"notifyUsers",params:[],type:"NotifyPeer"},{id:-1073230141,predicate:"notifyChats",params:[],type:"NotifyPeer"},{id:-1094555409,predicate:"updateNotifySettings",params:[{name:"peer",type:"NotifyPeer"},{name:"notify_settings",type:"PeerNotifySettings"}],type:"Update"},{id:381645902,predicate:"sendMessageTypingAction",params:[],type:"SendMessageAction"},{id:-44119819,predicate:"sendMessageCancelAction",params:[],type:"SendMessageAction"},{id:-1584933265,predicate:"sendMessageRecordVideoAction",params:[],type:"SendMessageAction"},{id:-378127636,predicate:"sendMessageUploadVideoAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-718310409,predicate:"sendMessageRecordAudioAction",params:[],type:"SendMessageAction"},{id:-212740181,predicate:"sendMessageUploadAudioAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-774682074,predicate:"sendMessageUploadPhotoAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-1441998364,predicate:"sendMessageUploadDocumentAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:393186209,predicate:"sendMessageGeoLocationAction",params:[],type:"SendMessageAction"},{id:1653390447,predicate:"sendMessageChooseContactAction",params:[],type:"SendMessageAction"},{id:-1290580579,predicate:"contacts.found",params:[{name:"my_results",type:"Vector<Peer>"},{name:"results",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Found"},{id:-337352679,predicate:"updateServiceNotification",params:[{name:"flags",type:"#"},{name:"popup",type:"flags.0?true"},{name:"invert_media",type:"flags.2?true"},{name:"inbox_date",type:"flags.1?int"},{name:"type",type:"string"},{name:"message",type:"string"},{name:"media",type:"MessageMedia"},{name:"entities",type:"Vector<MessageEntity>"}],type:"Update"},{id:2065268168,predicate:"userStatusRecently",params:[{name:"flags",type:"#"},{name:"by_me",type:"flags.0?true"}],type:"UserStatus"},{id:1410997530,predicate:"userStatusLastWeek",params:[{name:"flags",type:"#"},{name:"by_me",type:"flags.0?true"}],type:"UserStatus"},{id:1703516023,predicate:"userStatusLastMonth",params:[{name:"flags",type:"#"},{name:"by_me",type:"flags.0?true"}],type:"UserStatus"},{id:-298113238,predicate:"updatePrivacy",params:[{name:"key",type:"PrivacyKey"},{name:"rules",type:"Vector<PrivacyRule>"}],type:"Update"},{id:1335282456,predicate:"inputPrivacyKeyStatusTimestamp",params:[],type:"InputPrivacyKey"},{id:-1137792208,predicate:"privacyKeyStatusTimestamp",params:[],type:"PrivacyKey"},{id:218751099,predicate:"inputPrivacyValueAllowContacts",params:[],type:"InputPrivacyRule"},{id:407582158,predicate:"inputPrivacyValueAllowAll",params:[],type:"InputPrivacyRule"},{id:320652927,predicate:"inputPrivacyValueAllowUsers",params:[{name:"users",type:"Vector<InputUser>"}],type:"InputPrivacyRule"},{id:195371015,predicate:"inputPrivacyValueDisallowContacts",params:[],type:"InputPrivacyRule"},{id:-697604407,predicate:"inputPrivacyValueDisallowAll",params:[],type:"InputPrivacyRule"},{id:-1877932953,predicate:"inputPrivacyValueDisallowUsers",params:[{name:"users",type:"Vector<InputUser>"}],type:"InputPrivacyRule"},{id:-123988,predicate:"privacyValueAllowContacts",params:[],type:"PrivacyRule"},{id:1698855810,predicate:"privacyValueAllowAll",params:[],type:"PrivacyRule"},{id:-1198497870,predicate:"privacyValueAllowUsers",params:[{name:"users",type:"Vector<long>"}],type:"PrivacyRule"},{id:-125240806,predicate:"privacyValueDisallowContacts",params:[],type:"PrivacyRule"},{id:-1955338397,predicate:"privacyValueDisallowAll",params:[],type:"PrivacyRule"},{id:-463335103,predicate:"privacyValueDisallowUsers",params:[{name:"users",type:"Vector<long>"}],type:"PrivacyRule"},{id:1352683077,predicate:"account.privacyRules",params:[{name:"rules",type:"Vector<PrivacyRule>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.PrivacyRules"},{id:-1194283041,predicate:"accountDaysTTL",params:[{name:"days",type:"int"}],type:"AccountDaysTTL"},{id:88680979,predicate:"updateUserPhone",params:[{name:"user_id",type:"long"},{name:"phone",type:"string"}],type:"Update"},{id:1815593308,predicate:"documentAttributeImageSize",params:[{name:"w",type:"int"},{name:"h",type:"int"}],type:"DocumentAttribute"},{id:297109817,predicate:"documentAttributeAnimated",params:[],type:"DocumentAttribute"},{id:1662637586,predicate:"documentAttributeSticker",params:[{name:"flags",type:"#"},{name:"mask",type:"flags.1?true"},{name:"alt",type:"string"},{name:"stickerset",type:"InputStickerSet"},{name:"mask_coords",type:"flags.0?MaskCoords"}],type:"DocumentAttribute"},{id:1137015880,predicate:"documentAttributeVideo",params:[{name:"flags",type:"#"},{name:"round_message",type:"flags.0?true"},{name:"supports_streaming",type:"flags.1?true"},{name:"nosound",type:"flags.3?true"},{name:"duration",type:"double"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"preload_prefix_size",type:"flags.2?int"},{name:"video_start_ts",type:"flags.4?double"},{name:"video_codec",type:"flags.5?string"}],type:"DocumentAttribute"},{id:-1739392570,predicate:"documentAttributeAudio",params:[{name:"flags",type:"#"},{name:"voice",type:"flags.10?true"},{name:"duration",type:"int"},{name:"title",type:"flags.0?string"},{name:"performer",type:"flags.1?string"},{name:"waveform",type:"flags.2?bytes"}],type:"DocumentAttribute"},{id:358154344,predicate:"documentAttributeFilename",params:[{name:"file_name",type:"string"}],type:"DocumentAttribute"},{id:-244016606,predicate:"messages.stickersNotModified",params:[],type:"messages.Stickers"},{id:816245886,predicate:"messages.stickers",params:[{name:"hash",type:"long"},{name:"stickers",type:"Vector<Document>"}],type:"messages.Stickers"},{id:313694676,predicate:"stickerPack",params:[{name:"emoticon",type:"string"},{name:"documents",type:"Vector<long>"}],type:"StickerPack"},{id:-395967805,predicate:"messages.allStickersNotModified",params:[],type:"messages.AllStickers"},{id:-843329861,predicate:"messages.allStickers",params:[{name:"hash",type:"long"},{name:"sets",type:"Vector<StickerSet>"}],type:"messages.AllStickers"},{id:-1635468135,predicate:"updateReadHistoryInbox",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"peer",type:"Peer"},{name:"top_msg_id",type:"flags.1?int"},{name:"max_id",type:"int"},{name:"still_unread_count",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:791617983,predicate:"updateReadHistoryOutbox",params:[{name:"peer",type:"Peer"},{name:"max_id",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-2066640507,predicate:"messages.affectedMessages",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"messages.AffectedMessages"},{id:2139689491,predicate:"updateWebPage",params:[{name:"webpage",type:"WebPage"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:555358088,predicate:"webPageEmpty",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"url",type:"flags.0?string"}],type:"WebPage"},{id:-1328464313,predicate:"webPagePending",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"url",type:"flags.0?string"},{name:"date",type:"int"}],type:"WebPage"},{id:-392411726,predicate:"webPage",params:[{name:"flags",type:"#"},{name:"has_large_media",type:"flags.13?true"},{name:"video_cover_photo",type:"flags.14?true"},{name:"id",type:"long"},{name:"url",type:"string"},{name:"display_url",type:"string"},{name:"hash",type:"int"},{name:"type",type:"flags.0?string"},{name:"site_name",type:"flags.1?string"},{name:"title",type:"flags.2?string"},{name:"description",type:"flags.3?string"},{name:"photo",type:"flags.4?Photo"},{name:"embed_url",type:"flags.5?string"},{name:"embed_type",type:"flags.5?string"},{name:"embed_width",type:"flags.6?int"},{name:"embed_height",type:"flags.6?int"},{name:"duration",type:"flags.7?int"},{name:"author",type:"flags.8?string"},{name:"document",type:"flags.9?Document"},{name:"cached_page",type:"flags.10?Page"},{name:"attributes",type:"flags.12?Vector<WebPageAttribute>"}],type:"WebPage"},{id:-571405253,predicate:"messageMediaWebPage",params:[{name:"flags",type:"#"},{name:"force_large_media",type:"flags.0?true"},{name:"force_small_media",type:"flags.1?true"},{name:"manual",type:"flags.3?true"},{name:"safe",type:"flags.4?true"},{name:"webpage",type:"WebPage"}],type:"MessageMedia"},{id:-1392388579,predicate:"authorization",params:[{name:"flags",type:"#"},{name:"current",type:"flags.0?true"},{name:"official_app",type:"flags.1?true"},{name:"password_pending",type:"flags.2?true"},{name:"encrypted_requests_disabled",type:"flags.3?true"},{name:"call_requests_disabled",type:"flags.4?true"},{name:"unconfirmed",type:"flags.5?true"},{name:"hash",type:"long"},{name:"device_model",type:"string"},{name:"platform",type:"string"},{name:"system_version",type:"string"},{name:"api_id",type:"int"},{name:"app_name",type:"string"},{name:"app_version",type:"string"},{name:"date_created",type:"int"},{name:"date_active",type:"int"},{name:"ip",type:"string"},{name:"country",type:"string"},{name:"region",type:"string"}],type:"Authorization"},{id:1275039392,predicate:"account.authorizations",params:[{name:"authorization_ttl_days",type:"int"},{name:"authorizations",type:"Vector<Authorization>"}],type:"account.Authorizations"},{id:-1787080453,predicate:"account.password",params:[{name:"flags",type:"#"},{name:"has_recovery",type:"flags.0?true"},{name:"has_secure_values",type:"flags.1?true"},{name:"has_password",type:"flags.2?true"},{name:"current_algo",type:"flags.2?PasswordKdfAlgo"},{name:"srp_B",type:"flags.2?bytes"},{name:"srp_id",type:"flags.2?long"},{name:"hint",type:"flags.3?string"},{name:"email_unconfirmed_pattern",type:"flags.4?string"},{name:"new_algo",type:"PasswordKdfAlgo"},{name:"new_secure_algo",type:"SecurePasswordKdfAlgo"},{name:"secure_random",type:"bytes"},{name:"pending_reset_date",type:"flags.5?int"},{name:"login_email_pattern",type:"flags.6?string"}],type:"account.Password"},{id:-1705233435,predicate:"account.passwordSettings",params:[{name:"flags",type:"#"},{name:"email",type:"flags.0?string"},{name:"secure_settings",type:"flags.1?SecureSecretSettings"}],type:"account.PasswordSettings"},{id:-1036572727,predicate:"account.passwordInputSettings",params:[{name:"flags",type:"#"},{name:"new_algo",type:"flags.0?PasswordKdfAlgo"},{name:"new_password_hash",type:"flags.0?bytes"},{name:"hint",type:"flags.0?string"},{name:"email",type:"flags.1?string"},{name:"new_secure_settings",type:"flags.2?SecureSecretSettings"}],type:"account.PasswordInputSettings"},{id:326715557,predicate:"auth.passwordRecovery",params:[{name:"email_pattern",type:"string"}],type:"auth.PasswordRecovery"},{id:-1052959727,predicate:"inputMediaVenue",params:[{name:"geo_point",type:"InputGeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"InputMedia"},{id:784356159,predicate:"messageMediaVenue",params:[{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"MessageMedia"},{id:-1551583367,predicate:"receivedNotifyMessage",params:[{name:"id",type:"int"},{name:"flags",type:"int"}],type:"ReceivedNotifyMessage"},{id:-1574126186,predicate:"chatInviteExported",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.0?true"},{name:"permanent",type:"flags.5?true"},{name:"request_needed",type:"flags.6?true"},{name:"link",type:"string"},{name:"admin_id",type:"long"},{name:"date",type:"int"},{name:"start_date",type:"flags.4?int"},{name:"expire_date",type:"flags.1?int"},{name:"usage_limit",type:"flags.2?int"},{name:"usage",type:"flags.3?int"},{name:"requested",type:"flags.7?int"},{name:"subscription_expired",type:"flags.10?int"},{name:"title",type:"flags.8?string"},{name:"subscription_pricing",type:"flags.9?StarsSubscriptionPricing"}],type:"ExportedChatInvite"},{id:1516793212,predicate:"chatInviteAlready",params:[{name:"chat",type:"Chat"}],type:"ChatInvite"},{id:1553807106,predicate:"chatInvite",params:[{name:"flags",type:"#"},{name:"channel",type:"flags.0?true"},{name:"broadcast",type:"flags.1?true"},{name:"public",type:"flags.2?true"},{name:"megagroup",type:"flags.3?true"},{name:"request_needed",type:"flags.6?true"},{name:"verified",type:"flags.7?true"},{name:"scam",type:"flags.8?true"},{name:"fake",type:"flags.9?true"},{name:"can_refulfill_subscription",type:"flags.11?true"},{name:"title",type:"string"},{name:"about",type:"flags.5?string"},{name:"photo",type:"Photo"},{name:"participants_count",type:"int"},{name:"participants",type:"flags.4?Vector<User>"},{name:"color",type:"int"},{name:"subscription_pricing",type:"flags.10?StarsSubscriptionPricing"},{name:"subscription_form_id",type:"flags.12?long"},{name:"bot_verification",type:"flags.13?BotVerification"}],type:"ChatInvite"},{id:51520707,predicate:"messageActionChatJoinedByLink",params:[{name:"inviter_id",type:"long"}],type:"MessageAction"},{id:-131960447,predicate:"updateReadMessagesContents",params:[{name:"flags",type:"#"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"flags.0?int"}],type:"Update"},{id:-4838507,predicate:"inputStickerSetEmpty",params:[],type:"InputStickerSet"},{id:-1645763991,predicate:"inputStickerSetID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputStickerSet"},{id:-2044933984,predicate:"inputStickerSetShortName",params:[{name:"short_name",type:"string"}],type:"InputStickerSet"},{id:768691932,predicate:"stickerSet",params:[{name:"flags",type:"#"},{name:"archived",type:"flags.1?true"},{name:"official",type:"flags.2?true"},{name:"masks",type:"flags.3?true"},{name:"emojis",type:"flags.7?true"},{name:"text_color",type:"flags.9?true"},{name:"channel_emoji_status",type:"flags.10?true"},{name:"creator",type:"flags.11?true"},{name:"installed_date",type:"flags.0?int"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"title",type:"string"},{name:"short_name",type:"string"},{name:"thumbs",type:"flags.4?Vector<PhotoSize>"},{name:"thumb_dc_id",type:"flags.4?int"},{name:"thumb_version",type:"flags.4?int"},{name:"thumb_document_id",type:"flags.8?long"},{name:"count",type:"int"},{name:"hash",type:"int"}],type:"StickerSet"},{id:1846886166,predicate:"messages.stickerSet",params:[{name:"set",type:"StickerSet"},{name:"packs",type:"Vector<StickerPack>"},{name:"keywords",type:"Vector<StickerKeyword>"},{name:"documents",type:"Vector<Document>"}],type:"messages.StickerSet"},{id:829899656,predicate:"user",params:[{name:"flags",type:"#"},{name:"self",type:"flags.10?true"},{name:"contact",type:"flags.11?true"},{name:"mutual_contact",type:"flags.12?true"},{name:"deleted",type:"flags.13?true"},{name:"bot",type:"flags.14?true"},{name:"bot_chat_history",type:"flags.15?true"},{name:"bot_nochats",type:"flags.16?true"},{name:"verified",type:"flags.17?true"},{name:"restricted",type:"flags.18?true"},{name:"min",type:"flags.20?true"},{name:"bot_inline_geo",type:"flags.21?true"},{name:"support",type:"flags.23?true"},{name:"scam",type:"flags.24?true"},{name:"apply_min_photo",type:"flags.25?true"},{name:"fake",type:"flags.26?true"},{name:"bot_attach_menu",type:"flags.27?true"},{name:"premium",type:"flags.28?true"},{name:"attach_menu_enabled",type:"flags.29?true"},{name:"flags2",type:"#"},{name:"bot_can_edit",type:"flags2.1?true"},{name:"close_friend",type:"flags2.2?true"},{name:"stories_hidden",type:"flags2.3?true"},{name:"stories_unavailable",type:"flags2.4?true"},{name:"contact_require_premium",type:"flags2.10?true"},{name:"bot_business",type:"flags2.11?true"},{name:"bot_has_main_app",type:"flags2.13?true"},{name:"bot_forum_view",type:"flags2.16?true"},{name:"bot_forum_can_manage_topics",type:"flags2.17?true"},{name:"id",type:"long"},{name:"access_hash",type:"flags.0?long"},{name:"first_name",type:"flags.1?string"},{name:"last_name",type:"flags.2?string"},{name:"username",type:"flags.3?string"},{name:"phone",type:"flags.4?string"},{name:"photo",type:"flags.5?UserProfilePhoto"},{name:"status",type:"flags.6?UserStatus"},{name:"bot_info_version",type:"flags.14?int"},{name:"restriction_reason",type:"flags.18?Vector<RestrictionReason>"},{name:"bot_inline_placeholder",type:"flags.19?string"},{name:"lang_code",type:"flags.22?string"},{name:"emoji_status",type:"flags.30?EmojiStatus"},{name:"usernames",type:"flags2.0?Vector<Username>"},{name:"stories_max_id",type:"flags2.5?RecentStory"},{name:"color",type:"flags2.8?PeerColor"},{name:"profile_color",type:"flags2.9?PeerColor"},{name:"bot_active_users",type:"flags2.12?int"},{name:"bot_verification_icon",type:"flags2.14?long"},{name:"send_paid_messages_stars",type:"flags2.15?long"}],type:"User"},{id:-1032140601,predicate:"botCommand",params:[{name:"command",type:"string"},{name:"description",type:"string"}],type:"BotCommand"},{id:1300890265,predicate:"botInfo",params:[{name:"flags",type:"#"},{name:"has_preview_medias",type:"flags.6?true"},{name:"user_id",type:"flags.0?long"},{name:"description",type:"flags.1?string"},{name:"description_photo",type:"flags.4?Photo"},{name:"description_document",type:"flags.5?Document"},{name:"commands",type:"flags.2?Vector<BotCommand>"},{name:"menu_button",type:"flags.3?BotMenuButton"},{name:"privacy_policy_url",type:"flags.7?string"},{name:"app_settings",type:"flags.8?BotAppSettings"},{name:"verifier_settings",type:"flags.9?BotVerifierSettings"}],type:"BotInfo"},{id:2098662655,predicate:"keyboardButton",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:2002815875,predicate:"keyboardButtonRow",params:[{name:"buttons",type:"Vector<KeyboardButton>"}],type:"KeyboardButtonRow"},{id:-1606526075,predicate:"replyKeyboardHide",params:[{name:"flags",type:"#"},{name:"selective",type:"flags.2?true"}],type:"ReplyMarkup"},{id:-2035021048,predicate:"replyKeyboardForceReply",params:[{name:"flags",type:"#"},{name:"single_use",type:"flags.1?true"},{name:"selective",type:"flags.2?true"},{name:"placeholder",type:"flags.3?string"}],type:"ReplyMarkup"},{id:-2049074735,predicate:"replyKeyboardMarkup",params:[{name:"flags",type:"#"},{name:"resize",type:"flags.0?true"},{name:"single_use",type:"flags.1?true"},{name:"selective",type:"flags.2?true"},{name:"persistent",type:"flags.4?true"},{name:"rows",type:"Vector<KeyboardButtonRow>"},{name:"placeholder",type:"flags.3?string"}],type:"ReplyMarkup"},{id:-571955892,predicate:"inputPeerUser",params:[{name:"user_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPeer"},{id:-233744186,predicate:"inputUser",params:[{name:"user_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputUser"},{id:-1148011883,predicate:"messageEntityUnknown",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-100378723,predicate:"messageEntityMention",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1868782349,predicate:"messageEntityHashtag",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1827637959,predicate:"messageEntityBotCommand",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1859134776,predicate:"messageEntityUrl",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1692693954,predicate:"messageEntityEmail",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1117713463,predicate:"messageEntityBold",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-2106619040,predicate:"messageEntityItalic",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:681706865,predicate:"messageEntityCode",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1938967520,predicate:"messageEntityPre",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"language",type:"string"}],type:"MessageEntity"},{id:1990644519,predicate:"messageEntityTextUrl",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"url",type:"string"}],type:"MessageEntity"},{id:-1877614335,predicate:"updateShortSentMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"id",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"media",type:"flags.9?MessageMedia"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:-292807034,predicate:"inputChannelEmpty",params:[],type:"InputChannel"},{id:-212145112,predicate:"inputChannel",params:[{name:"channel_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputChannel"},{id:-1566230754,predicate:"peerChannel",params:[{name:"channel_id",type:"long"}],type:"Peer"},{id:666680316,predicate:"inputPeerChannel",params:[{name:"channel_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPeer"},{id:473084188,predicate:"channel",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"left",type:"flags.2?true"},{name:"broadcast",type:"flags.5?true"},{name:"verified",type:"flags.7?true"},{name:"megagroup",type:"flags.8?true"},{name:"restricted",type:"flags.9?true"},{name:"signatures",type:"flags.11?true"},{name:"min",type:"flags.12?true"},{name:"scam",type:"flags.19?true"},{name:"has_link",type:"flags.20?true"},{name:"has_geo",type:"flags.21?true"},{name:"slowmode_enabled",type:"flags.22?true"},{name:"call_active",type:"flags.23?true"},{name:"call_not_empty",type:"flags.24?true"},{name:"fake",type:"flags.25?true"},{name:"gigagroup",type:"flags.26?true"},{name:"noforwards",type:"flags.27?true"},{name:"join_to_send",type:"flags.28?true"},{name:"join_request",type:"flags.29?true"},{name:"forum",type:"flags.30?true"},{name:"flags2",type:"#"},{name:"stories_hidden",type:"flags2.1?true"},{name:"stories_hidden_min",type:"flags2.2?true"},{name:"stories_unavailable",type:"flags2.3?true"},{name:"signature_profiles",type:"flags2.12?true"},{name:"autotranslation",type:"flags2.15?true"},{name:"broadcast_messages_allowed",type:"flags2.16?true"},{name:"monoforum",type:"flags2.17?true"},{name:"forum_tabs",type:"flags2.19?true"},{name:"id",type:"long"},{name:"access_hash",type:"flags.13?long"},{name:"title",type:"string"},{name:"username",type:"flags.6?string"},{name:"photo",type:"ChatPhoto"},{name:"date",type:"int"},{name:"restriction_reason",type:"flags.9?Vector<RestrictionReason>"},{name:"admin_rights",type:"flags.14?ChatAdminRights"},{name:"banned_rights",type:"flags.15?ChatBannedRights"},{name:"default_banned_rights",type:"flags.18?ChatBannedRights"},{name:"participants_count",type:"flags.17?int"},{name:"usernames",type:"flags2.0?Vector<Username>"},{name:"stories_max_id",type:"flags2.4?RecentStory"},{name:"color",type:"flags2.7?PeerColor"},{name:"profile_color",type:"flags2.8?PeerColor"},{name:"emoji_status",type:"flags2.9?EmojiStatus"},{name:"level",type:"flags2.10?int"},{name:"subscription_until_date",type:"flags2.11?int"},{name:"bot_verification_icon",type:"flags2.13?long"},{name:"send_paid_messages_stars",type:"flags2.14?long"},{name:"linked_monoforum_id",type:"flags2.18?long"}],type:"Chat"},{id:399807445,predicate:"channelForbidden",params:[{name:"flags",type:"#"},{name:"broadcast",type:"flags.5?true"},{name:"megagroup",type:"flags.8?true"},{name:"monoforum",type:"flags.10?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"title",type:"string"},{name:"until_date",type:"flags.16?int"}],type:"Chat"},{id:2131196633,predicate:"contacts.resolvedPeer",params:[{name:"peer",type:"Peer"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.ResolvedPeer"},{id:-455036259,predicate:"channelFull",params:[{name:"flags",type:"#"},{name:"can_view_participants",type:"flags.3?true"},{name:"can_set_username",type:"flags.6?true"},{name:"can_set_stickers",type:"flags.7?true"},{name:"hidden_prehistory",type:"flags.10?true"},{name:"can_set_location",type:"flags.16?true"},{name:"has_scheduled",type:"flags.19?true"},{name:"can_view_stats",type:"flags.20?true"},{name:"blocked",type:"flags.22?true"},{name:"flags2",type:"#"},{name:"can_delete_channel",type:"flags2.0?true"},{name:"antispam",type:"flags2.1?true"},{name:"participants_hidden",type:"flags2.2?true"},{name:"translations_disabled",type:"flags2.3?true"},{name:"stories_pinned_available",type:"flags2.5?true"},{name:"view_forum_as_messages",type:"flags2.6?true"},{name:"restricted_sponsored",type:"flags2.11?true"},{name:"can_view_revenue",type:"flags2.12?true"},{name:"paid_media_allowed",type:"flags2.14?true"},{name:"can_view_stars_revenue",type:"flags2.15?true"},{name:"paid_reactions_available",type:"flags2.16?true"},{name:"stargifts_available",type:"flags2.19?true"},{name:"paid_messages_available",type:"flags2.20?true"},{name:"id",type:"long"},{name:"about",type:"string"},{name:"participants_count",type:"flags.0?int"},{name:"admins_count",type:"flags.1?int"},{name:"kicked_count",type:"flags.2?int"},{name:"banned_count",type:"flags.2?int"},{name:"online_count",type:"flags.13?int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"chat_photo",type:"Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"exported_invite",type:"flags.23?ExportedChatInvite"},{name:"bot_info",type:"Vector<BotInfo>"},{name:"migrated_from_chat_id",type:"flags.4?long"},{name:"migrated_from_max_id",type:"flags.4?int"},{name:"pinned_msg_id",type:"flags.5?int"},{name:"stickerset",type:"flags.8?StickerSet"},{name:"available_min_id",type:"flags.9?int"},{name:"folder_id",type:"flags.11?int"},{name:"linked_chat_id",type:"flags.14?long"},{name:"location",type:"flags.15?ChannelLocation"},{name:"slowmode_seconds",type:"flags.17?int"},{name:"slowmode_next_send_date",type:"flags.18?int"},{name:"stats_dc",type:"flags.12?int"},{name:"pts",type:"int"},{name:"call",type:"flags.21?InputGroupCall"},{name:"ttl_period",type:"flags.24?int"},{name:"pending_suggestions",type:"flags.25?Vector<string>"},{name:"groupcall_default_join_as",type:"flags.26?Peer"},{name:"theme_emoticon",type:"flags.27?string"},{name:"requests_pending",type:"flags.28?int"},{name:"recent_requesters",type:"flags.28?Vector<long>"},{name:"default_send_as",type:"flags.29?Peer"},{name:"available_reactions",type:"flags.30?ChatReactions"},{name:"reactions_limit",type:"flags2.13?int"},{name:"stories",type:"flags2.4?PeerStories"},{name:"wallpaper",type:"flags2.7?WallPaper"},{name:"boosts_applied",type:"flags2.8?int"},{name:"boosts_unrestrict",type:"flags2.9?int"},{name:"emojiset",type:"flags2.10?StickerSet"},{name:"bot_verification",type:"flags2.17?BotVerification"},{name:"stargifts_count",type:"flags2.18?int"},{name:"send_paid_messages_stars",type:"flags2.21?long"},{name:"main_tab",type:"flags2.22?ProfileTab"}],type:"ChatFull"},{id:182649427,predicate:"messageRange",params:[{name:"min_id",type:"int"},{name:"max_id",type:"int"}],type:"MessageRange"},{id:-948520370,predicate:"messages.channelMessages",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"pts",type:"int"},{name:"count",type:"int"},{name:"offset_id_offset",type:"flags.2?int"},{name:"messages",type:"Vector<Message>"},{name:"topics",type:"Vector<ForumTopic>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:-1781355374,predicate:"messageActionChannelCreate",params:[{name:"title",type:"string"}],type:"MessageAction"},{id:277713951,predicate:"updateChannelTooLong",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"pts",type:"flags.0?int"}],type:"Update"},{id:1666927625,predicate:"updateChannel",params:[{name:"channel_id",type:"long"}],type:"Update"},{id:1656358105,predicate:"updateNewChannelMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1842450928,predicate:"updateReadChannelInbox",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"channel_id",type:"long"},{name:"max_id",type:"int"},{name:"still_unread_count",type:"int"},{name:"pts",type:"int"}],type:"Update"},{id:-1020437742,predicate:"updateDeleteChannelMessages",params:[{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-232346616,predicate:"updateChannelMessageViews",params:[{name:"channel_id",type:"long"},{name:"id",type:"int"},{name:"views",type:"int"}],type:"Update"},{id:1041346555,predicate:"updates.channelDifferenceEmpty",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"pts",type:"int"},{name:"timeout",type:"flags.1?int"}],type:"updates.ChannelDifference"},{id:-1531132162,predicate:"updates.channelDifferenceTooLong",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"timeout",type:"flags.1?int"},{name:"dialog",type:"Dialog"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"updates.ChannelDifference"},{id:543450958,predicate:"updates.channelDifference",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"pts",type:"int"},{name:"timeout",type:"flags.1?int"},{name:"new_messages",type:"Vector<Message>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"updates.ChannelDifference"},{id:-1798033689,predicate:"channelMessagesFilterEmpty",params:[],type:"ChannelMessagesFilter"},{id:-847783593,predicate:"channelMessagesFilter",params:[{name:"flags",type:"#"},{name:"exclude_new_messages",type:"flags.1?true"},{name:"ranges",type:"Vector<MessageRange>"}],type:"ChannelMessagesFilter"},{id:-885426663,predicate:"channelParticipant",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"subscription_until_date",type:"flags.0?int"}],type:"ChannelParticipant"},{id:1331723247,predicate:"channelParticipantSelf",params:[{name:"flags",type:"#"},{name:"via_request",type:"flags.0?true"},{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"},{name:"subscription_until_date",type:"flags.1?int"}],type:"ChannelParticipant"},{id:803602899,predicate:"channelParticipantCreator",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"flags.0?string"}],type:"ChannelParticipant"},{id:-566281095,predicate:"channelParticipantsRecent",params:[],type:"ChannelParticipantsFilter"},{id:-1268741783,predicate:"channelParticipantsAdmins",params:[],type:"ChannelParticipantsFilter"},{id:-1548400251,predicate:"channelParticipantsKicked",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-1699676497,predicate:"channels.channelParticipants",params:[{name:"count",type:"int"},{name:"participants",type:"Vector<ChannelParticipant>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.ChannelParticipants"},{id:-541588713,predicate:"channels.channelParticipant",params:[{name:"participant",type:"ChannelParticipant"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.ChannelParticipant"},{id:-462696732,predicate:"chatParticipantCreator",params:[{name:"user_id",type:"long"}],type:"ChatParticipant"},{id:-1600962725,predicate:"chatParticipantAdmin",params:[{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChatParticipant"},{id:-674602590,predicate:"updateChatParticipantAdmin",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"is_admin",type:"Bool"},{name:"version",type:"int"}],type:"Update"},{id:-519864430,predicate:"messageActionChatMigrateTo",params:[{name:"channel_id",type:"long"}],type:"MessageAction"},{id:-365344535,predicate:"messageActionChannelMigrateFrom",params:[{name:"title",type:"string"},{name:"chat_id",type:"long"}],type:"MessageAction"},{id:-1328445861,predicate:"channelParticipantsBots",params:[],type:"ChannelParticipantsFilter"},{id:2013922064,predicate:"help.termsOfService",params:[{name:"flags",type:"#"},{name:"popup",type:"flags.0?true"},{name:"id",type:"DataJSON"},{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"min_age_confirm",type:"flags.1?int"}],type:"help.TermsOfService"},{id:1753886890,predicate:"updateNewStickerSet",params:[{name:"stickerset",type:"messages.StickerSet"}],type:"Update"},{id:196268545,predicate:"updateStickerSetsOrder",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"order",type:"Vector<long>"}],type:"Update"},{id:834816008,predicate:"updateStickerSets",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"}],type:"Update"},{id:-402498398,predicate:"messages.savedGifsNotModified",params:[],type:"messages.SavedGifs"},{id:-2069878259,predicate:"messages.savedGifs",params:[{name:"hash",type:"long"},{name:"gifs",type:"Vector<Document>"}],type:"messages.SavedGifs"},{id:-1821035490,predicate:"updateSavedGifs",params:[],type:"Update"},{id:864077702,predicate:"inputBotInlineMessageMediaAuto",params:[{name:"flags",type:"#"},{name:"invert_media",type:"flags.3?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1036876423,predicate:"inputBotInlineMessageText",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.0?true"},{name:"invert_media",type:"flags.3?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-2000710887,predicate:"inputBotInlineResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"url",type:"flags.3?string"},{name:"thumb",type:"flags.4?InputWebDocument"},{name:"content",type:"flags.5?InputWebDocument"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:1984755728,predicate:"botInlineMessageMediaAuto",params:[{name:"flags",type:"#"},{name:"invert_media",type:"flags.3?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1937807902,predicate:"botInlineMessageText",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.0?true"},{name:"invert_media",type:"flags.3?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:295067450,predicate:"botInlineResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"url",type:"flags.3?string"},{name:"thumb",type:"flags.4?WebDocument"},{name:"content",type:"flags.5?WebDocument"},{name:"send_message",type:"BotInlineMessage"}],type:"BotInlineResult"},{id:-534646026,predicate:"messages.botResults",params:[{name:"flags",type:"#"},{name:"gallery",type:"flags.0?true"},{name:"query_id",type:"long"},{name:"next_offset",type:"flags.1?string"},{name:"switch_pm",type:"flags.2?InlineBotSwitchPM"},{name:"switch_webview",type:"flags.3?InlineBotWebView"},{name:"results",type:"Vector<BotInlineResult>"},{name:"cache_time",type:"int"},{name:"users",type:"Vector<User>"}],type:"messages.BotResults"},{id:1232025500,predicate:"updateBotInlineQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"query",type:"string"},{name:"geo",type:"flags.0?GeoPoint"},{name:"peer_type",type:"flags.1?InlineQueryPeerType"},{name:"offset",type:"string"}],type:"Update"},{id:317794823,predicate:"updateBotInlineSend",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"query",type:"string"},{name:"geo",type:"flags.0?GeoPoint"},{name:"id",type:"string"},{name:"msg_id",type:"flags.1?InputBotInlineMessageID"}],type:"Update"},{id:1358283666,predicate:"inputMessagesFilterVoice",params:[],type:"MessagesFilter"},{id:928101534,predicate:"inputMessagesFilterMusic",params:[],type:"MessagesFilter"},{id:-1107622874,predicate:"inputPrivacyKeyChatInvite",params:[],type:"InputPrivacyKey"},{id:1343122938,predicate:"privacyKeyChatInvite",params:[],type:"PrivacyKey"},{id:1571494644,predicate:"exportedMessageLink",params:[{name:"link",type:"string"},{name:"html",type:"string"}],type:"ExportedMessageLink"},{id:1313731771,predicate:"messageFwdHeader",params:[{name:"flags",type:"#"},{name:"imported",type:"flags.7?true"},{name:"saved_out",type:"flags.11?true"},{name:"from_id",type:"flags.0?Peer"},{name:"from_name",type:"flags.5?string"},{name:"date",type:"int"},{name:"channel_post",type:"flags.2?int"},{name:"post_author",type:"flags.3?string"},{name:"saved_from_peer",type:"flags.4?Peer"},{name:"saved_from_msg_id",type:"flags.4?int"},{name:"saved_from_id",type:"flags.8?Peer"},{name:"saved_from_name",type:"flags.9?string"},{name:"saved_date",type:"flags.10?int"},{name:"psa_type",type:"flags.6?string"}],type:"MessageFwdHeader"},{id:457133559,predicate:"updateEditChannelMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1799538451,predicate:"messageActionPinMessage",params:[],type:"MessageAction"},{id:1923290508,predicate:"auth.codeTypeSms",params:[],type:"auth.CodeType"},{id:1948046307,predicate:"auth.codeTypeCall",params:[],type:"auth.CodeType"},{id:577556219,predicate:"auth.codeTypeFlashCall",params:[],type:"auth.CodeType"},{id:1035688326,predicate:"auth.sentCodeTypeApp",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1073693790,predicate:"auth.sentCodeTypeSms",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:1398007207,predicate:"auth.sentCodeTypeCall",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1425815847,predicate:"auth.sentCodeTypeFlashCall",params:[{name:"pattern",type:"string"}],type:"auth.SentCodeType"},{id:-670292500,predicate:"keyboardButtonUrl",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:-433338016,predicate:"keyboardButtonCallback",params:[{name:"flags",type:"#"},{name:"requires_password",type:"flags.0?true"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"data",type:"bytes"}],type:"KeyboardButton"},{id:1098841487,predicate:"keyboardButtonRequestPhone",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1438582451,predicate:"keyboardButtonRequestGeoLocation",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1726768644,predicate:"keyboardButtonSwitchInline",params:[{name:"flags",type:"#"},{name:"same_peer",type:"flags.0?true"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"query",type:"string"},{name:"peer_types",type:"flags.1?Vector<InlineQueryPeerType>"}],type:"KeyboardButton"},{id:1218642516,predicate:"replyInlineMarkup",params:[{name:"rows",type:"Vector<KeyboardButtonRow>"}],type:"ReplyMarkup"},{id:911761060,predicate:"messages.botCallbackAnswer",params:[{name:"flags",type:"#"},{name:"alert",type:"flags.1?true"},{name:"has_url",type:"flags.3?true"},{name:"native_ui",type:"flags.4?true"},{name:"message",type:"flags.0?string"},{name:"url",type:"flags.2?string"},{name:"cache_time",type:"int"}],type:"messages.BotCallbackAnswer"},{id:-1177566067,predicate:"updateBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"},{name:"game_short_name",type:"flags.1?string"}],type:"Update"},{id:649453030,predicate:"messages.messageEditData",params:[{name:"flags",type:"#"},{name:"caption",type:"flags.0?true"}],type:"messages.MessageEditData"},{id:-469536605,predicate:"updateEditMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1768777083,predicate:"inputBotInlineMessageMediaGeo",params:[{name:"flags",type:"#"},{name:"geo_point",type:"InputGeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1098628881,predicate:"inputBotInlineMessageMediaVenue",params:[{name:"flags",type:"#"},{name:"geo_point",type:"InputGeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-1494368259,predicate:"inputBotInlineMessageMediaContact",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:85477117,predicate:"botInlineMessageMediaGeo",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1970903652,predicate:"botInlineMessageMediaVenue",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:416402882,predicate:"botInlineMessageMediaContact",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1462213465,predicate:"inputBotInlineResultPhoto",params:[{name:"id",type:"string"},{name:"type",type:"string"},{name:"photo",type:"InputPhoto"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:-459324,predicate:"inputBotInlineResultDocument",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"document",type:"InputDocument"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:400266251,predicate:"botInlineMediaResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"photo",type:"flags.0?Photo"},{name:"document",type:"flags.1?Document"},{name:"title",type:"flags.2?string"},{name:"description",type:"flags.3?string"},{name:"send_message",type:"BotInlineMessage"}],type:"BotInlineResult"},{id:-1995686519,predicate:"inputBotInlineMessageID",params:[{name:"dc_id",type:"int"},{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputBotInlineMessageID"},{id:1763610706,predicate:"updateInlineBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"msg_id",type:"InputBotInlineMessageID"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"},{name:"game_short_name",type:"flags.1?string"}],type:"Update"},{id:1008755359,predicate:"inlineBotSwitchPM",params:[{name:"text",type:"string"},{name:"start_param",type:"string"}],type:"InlineBotSwitchPM"},{id:863093588,predicate:"messages.peerDialogs",params:[{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"state",type:"updates.State"}],type:"messages.PeerDialogs"},{id:-305282981,predicate:"topPeer",params:[{name:"peer",type:"Peer"},{name:"rating",type:"double"}],type:"TopPeer"},{id:-1419371685,predicate:"topPeerCategoryBotsPM",params:[],type:"TopPeerCategory"},{id:344356834,predicate:"topPeerCategoryBotsInline",params:[],type:"TopPeerCategory"},{id:104314861,predicate:"topPeerCategoryCorrespondents",params:[],type:"TopPeerCategory"},{id:-1122524854,predicate:"topPeerCategoryGroups",params:[],type:"TopPeerCategory"},{id:371037736,predicate:"topPeerCategoryChannels",params:[],type:"TopPeerCategory"},{id:-75283823,predicate:"topPeerCategoryPeers",params:[{name:"category",type:"TopPeerCategory"},{name:"count",type:"int"},{name:"peers",type:"Vector<TopPeer>"}],type:"TopPeerCategoryPeers"},{id:-567906571,predicate:"contacts.topPeersNotModified",params:[],type:"contacts.TopPeers"},{id:1891070632,predicate:"contacts.topPeers",params:[{name:"categories",type:"Vector<TopPeerCategoryPeers>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.TopPeers"},{id:-595914432,predicate:"messageEntityMentionName",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"user_id",type:"long"}],type:"MessageEntity"},{id:546203849,predicate:"inputMessageEntityMentionName",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"user_id",type:"InputUser"}],type:"MessageEntity"},{id:975236280,predicate:"inputMessagesFilterChatPhotos",params:[],type:"MessagesFilter"},{id:-1218471511,predicate:"updateReadChannelOutbox",params:[{name:"channel_id",type:"long"},{name:"max_id",type:"int"}],type:"Update"},{id:-302247650,predicate:"updateDraftMessage",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"top_msg_id",type:"flags.0?int"},{name:"saved_peer_id",type:"flags.1?Peer"},{name:"draft",type:"DraftMessage"}],type:"Update"},{id:453805082,predicate:"draftMessageEmpty",params:[{name:"flags",type:"#"},{name:"date",type:"flags.0?int"}],type:"DraftMessage"},{id:-1763006997,predicate:"draftMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"invert_media",type:"flags.6?true"},{name:"reply_to",type:"flags.4?InputReplyTo"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"media",type:"flags.5?InputMedia"},{name:"date",type:"int"},{name:"effect",type:"flags.7?long"},{name:"suggested_post",type:"flags.8?SuggestedPost"}],type:"DraftMessage"},{id:-1615153660,predicate:"messageActionHistoryClear",params:[],type:"MessageAction"},{id:-958657434,predicate:"messages.featuredStickersNotModified",params:[{name:"count",type:"int"}],type:"messages.FeaturedStickers"},{id:-1103615738,predicate:"messages.featuredStickers",params:[{name:"flags",type:"#"},{name:"premium",type:"flags.0?true"},{name:"hash",type:"long"},{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"},{name:"unread",type:"Vector<long>"}],type:"messages.FeaturedStickers"},{id:1461528386,predicate:"updateReadFeaturedStickers",params:[],type:"Update"},{id:186120336,predicate:"messages.recentStickersNotModified",params:[],type:"messages.RecentStickers"},{id:-1999405994,predicate:"messages.recentStickers",params:[{name:"hash",type:"long"},{name:"packs",type:"Vector<StickerPack>"},{name:"stickers",type:"Vector<Document>"},{name:"dates",type:"Vector<int>"}],type:"messages.RecentStickers"},{id:-1706939360,predicate:"updateRecentStickers",params:[],type:"Update"},{id:1338747336,predicate:"messages.archivedStickers",params:[{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.ArchivedStickers"},{id:946083368,predicate:"messages.stickerSetInstallResultSuccess",params:[],type:"messages.StickerSetInstallResult"},{id:904138920,predicate:"messages.stickerSetInstallResultArchive",params:[{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.StickerSetInstallResult"},{id:1678812626,predicate:"stickerSetCovered",params:[{name:"set",type:"StickerSet"},{name:"cover",type:"Document"}],type:"StickerSetCovered"},{id:-1574314746,predicate:"updateConfig",params:[],type:"Update"},{id:861169551,predicate:"updatePtsChanged",params:[],type:"Update"},{id:-440664550,predicate:"inputMediaPhotoExternal",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"url",type:"string"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:2006319353,predicate:"inputMediaDocumentExternal",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"url",type:"string"},{name:"ttl_seconds",type:"flags.0?int"},{name:"video_cover",type:"flags.2?InputPhoto"},{name:"video_timestamp",type:"flags.3?int"}],type:"InputMedia"},{id:872932635,predicate:"stickerSetMultiCovered",params:[{name:"set",type:"StickerSet"},{name:"covers",type:"Vector<Document>"}],type:"StickerSetCovered"},{id:-1361650766,predicate:"maskCoords",params:[{name:"n",type:"int"},{name:"x",type:"double"},{name:"y",type:"double"},{name:"zoom",type:"double"}],type:"MaskCoords"},{id:-1744710921,predicate:"documentAttributeHasStickers",params:[],type:"DocumentAttribute"},{id:1251549527,predicate:"inputStickeredMediaPhoto",params:[{name:"id",type:"InputPhoto"}],type:"InputStickeredMedia"},{id:70813275,predicate:"inputStickeredMediaDocument",params:[{name:"id",type:"InputDocument"}],type:"InputStickeredMedia"},{id:-1107729093,predicate:"game",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"short_name",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"Photo"},{name:"document",type:"flags.0?Document"}],type:"Game"},{id:1336154098,predicate:"inputBotInlineResultGame",params:[{name:"id",type:"string"},{name:"short_name",type:"string"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:1262639204,predicate:"inputBotInlineMessageGame",params:[{name:"flags",type:"#"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-38694904,predicate:"messageMediaGame",params:[{name:"game",type:"Game"}],type:"MessageMedia"},{id:-750828557,predicate:"inputMediaGame",params:[{name:"id",type:"InputGame"}],type:"InputMedia"},{id:53231223,predicate:"inputGameID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputGame"},{id:-1020139510,predicate:"inputGameShortName",params:[{name:"bot_id",type:"InputUser"},{name:"short_name",type:"string"}],type:"InputGame"},{id:-1983540999,predicate:"keyboardButtonGame",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1834538890,predicate:"messageActionGameScore",params:[{name:"game_id",type:"long"},{name:"score",type:"int"}],type:"MessageAction"},{id:1940093419,predicate:"highScore",params:[{name:"pos",type:"int"},{name:"user_id",type:"long"},{name:"score",type:"int"}],type:"HighScore"},{id:-1707344487,predicate:"messages.highScores",params:[{name:"scores",type:"Vector<HighScore>"},{name:"users",type:"Vector<User>"}],type:"messages.HighScores"},{id:1258196845,predicate:"updates.differenceTooLong",params:[{name:"pts",type:"int"}],type:"updates.Difference"},{id:791390623,predicate:"updateChannelWebPage",params:[{name:"channel_id",type:"long"},{name:"webpage",type:"WebPage"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1663561404,predicate:"messages.chatsSlice",params:[{name:"count",type:"int"},{name:"chats",type:"Vector<Chat>"}],type:"messages.Chats"},{id:-599948721,predicate:"textEmpty",params:[],type:"RichText"},{id:1950782688,predicate:"textPlain",params:[{name:"text",type:"string"}],type:"RichText"},{id:1730456516,predicate:"textBold",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-653089380,predicate:"textItalic",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-1054465340,predicate:"textUnderline",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-1678197867,predicate:"textStrike",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:1816074681,predicate:"textFixed",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:1009288385,predicate:"textUrl",params:[{name:"text",type:"RichText"},{name:"url",type:"string"},{name:"webpage_id",type:"long"}],type:"RichText"},{id:-564523562,predicate:"textEmail",params:[{name:"text",type:"RichText"},{name:"email",type:"string"}],type:"RichText"},{id:2120376535,predicate:"textConcat",params:[{name:"texts",type:"Vector<RichText>"}],type:"RichText"},{id:324435594,predicate:"pageBlockUnsupported",params:[],type:"PageBlock"},{id:1890305021,predicate:"pageBlockTitle",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1879401953,predicate:"pageBlockSubtitle",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1162877472,predicate:"pageBlockAuthorDate",params:[{name:"author",type:"RichText"},{name:"published_date",type:"int"}],type:"PageBlock"},{id:-1076861716,predicate:"pageBlockHeader",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-248793375,predicate:"pageBlockSubheader",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:1182402406,predicate:"pageBlockParagraph",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1066346178,predicate:"pageBlockPreformatted",params:[{name:"text",type:"RichText"},{name:"language",type:"string"}],type:"PageBlock"},{id:1216809369,predicate:"pageBlockFooter",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-618614392,predicate:"pageBlockDivider",params:[],type:"PageBlock"},{id:-837994576,predicate:"pageBlockAnchor",params:[{name:"name",type:"string"}],type:"PageBlock"},{id:-454524911,predicate:"pageBlockList",params:[{name:"items",type:"Vector<PageListItem>"}],type:"PageBlock"},{id:641563686,predicate:"pageBlockBlockquote",params:[{name:"text",type:"RichText"},{name:"caption",type:"RichText"}],type:"PageBlock"},{id:1329878739,predicate:"pageBlockPullquote",params:[{name:"text",type:"RichText"},{name:"caption",type:"RichText"}],type:"PageBlock"},{id:391759200,predicate:"pageBlockPhoto",params:[{name:"flags",type:"#"},{name:"photo_id",type:"long"},{name:"caption",type:"PageCaption"},{name:"url",type:"flags.0?string"},{name:"webpage_id",type:"flags.0?long"}],type:"PageBlock"},{id:2089805750,predicate:"pageBlockVideo",params:[{name:"flags",type:"#"},{name:"autoplay",type:"flags.0?true"},{name:"loop",type:"flags.1?true"},{name:"video_id",type:"long"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:972174080,predicate:"pageBlockCover",params:[{name:"cover",type:"PageBlock"}],type:"PageBlock"},{id:-1468953147,predicate:"pageBlockEmbed",params:[{name:"flags",type:"#"},{name:"full_width",type:"flags.0?true"},{name:"allow_scrolling",type:"flags.3?true"},{name:"url",type:"flags.1?string"},{name:"html",type:"flags.2?string"},{name:"poster_photo_id",type:"flags.4?long"},{name:"w",type:"flags.5?int"},{name:"h",type:"flags.5?int"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-229005301,predicate:"pageBlockEmbedPost",params:[{name:"url",type:"string"},{name:"webpage_id",type:"long"},{name:"author_photo_id",type:"long"},{name:"author",type:"string"},{name:"date",type:"int"},{name:"blocks",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1705048653,predicate:"pageBlockCollage",params:[{name:"items",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:52401552,predicate:"pageBlockSlideshow",params:[{name:"items",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1930545681,predicate:"webPageNotModified",params:[{name:"flags",type:"#"},{name:"cached_page_views",type:"flags.0?int"}],type:"WebPage"},{id:-88417185,predicate:"inputPrivacyKeyPhoneCall",params:[],type:"InputPrivacyKey"},{id:1030105979,predicate:"privacyKeyPhoneCall",params:[],type:"PrivacyKey"},{id:-580219064,predicate:"sendMessageGamePlayAction",params:[],type:"SendMessageAction"},{id:-2048646399,predicate:"phoneCallDiscardReasonMissed",params:[],type:"PhoneCallDiscardReason"},{id:-527056480,predicate:"phoneCallDiscardReasonDisconnect",params:[],type:"PhoneCallDiscardReason"},{id:1471006352,predicate:"phoneCallDiscardReasonHangup",params:[],type:"PhoneCallDiscardReason"},{id:-84416311,predicate:"phoneCallDiscardReasonBusy",params:[],type:"PhoneCallDiscardReason"},{id:1852826908,predicate:"updateDialogPinned",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"folder_id",type:"flags.1?int"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:-99664734,predicate:"updatePinnedDialogs",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.1?int"},{name:"order",type:"flags.0?Vector<DialogPeer>"}],type:"Update"},{id:2104790276,predicate:"dataJSON",params:[{name:"data",type:"string"}],type:"DataJSON"},{id:-2095595325,predicate:"updateBotWebhookJSON",params:[{name:"data",type:"DataJSON"}],type:"Update"},{id:-1684914010,predicate:"updateBotWebhookJSONQuery",params:[{name:"query_id",type:"long"},{name:"data",type:"DataJSON"},{name:"timeout",type:"int"}],type:"Update"},{id:-886477832,predicate:"labeledPrice",params:[{name:"label",type:"string"},{name:"amount",type:"long"}],type:"LabeledPrice"},{id:77522308,predicate:"invoice",params:[{name:"flags",type:"#"},{name:"test",type:"flags.0?true"},{name:"name_requested",type:"flags.1?true"},{name:"phone_requested",type:"flags.2?true"},{name:"email_requested",type:"flags.3?true"},{name:"shipping_address_requested",type:"flags.4?true"},{name:"flexible",type:"flags.5?true"},{name:"phone_to_provider",type:"flags.6?true"},{name:"email_to_provider",type:"flags.7?true"},{name:"recurring",type:"flags.9?true"},{name:"currency",type:"string"},{name:"prices",type:"Vector<LabeledPrice>"},{name:"max_tip_amount",type:"flags.8?long"},{name:"suggested_tip_amounts",type:"flags.8?Vector<long>"},{name:"terms_url",type:"flags.10?string"},{name:"subscription_period",type:"flags.11?int"}],type:"Invoice"},{id:1080028941,predicate:"inputMediaInvoice",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?InputWebDocument"},{name:"invoice",type:"Invoice"},{name:"payload",type:"bytes"},{name:"provider",type:"flags.3?string"},{name:"provider_data",type:"DataJSON"},{name:"start_param",type:"flags.1?string"},{name:"extended_media",type:"flags.2?InputMedia"}],type:"InputMedia"},{id:-368917890,predicate:"paymentCharge",params:[{name:"id",type:"string"},{name:"provider_charge_id",type:"string"}],type:"PaymentCharge"},{id:-6288180,predicate:"messageActionPaymentSentMe",params:[{name:"flags",type:"#"},{name:"recurring_init",type:"flags.2?true"},{name:"recurring_used",type:"flags.3?true"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"payload",type:"bytes"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping_option_id",type:"flags.1?string"},{name:"charge",type:"PaymentCharge"},{name:"subscription_until_date",type:"flags.4?int"}],type:"MessageAction"},{id:-156940077,predicate:"messageMediaInvoice",params:[{name:"flags",type:"#"},{name:"shipping_address_requested",type:"flags.1?true"},{name:"test",type:"flags.3?true"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?WebDocument"},{name:"receipt_msg_id",type:"flags.2?int"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"start_param",type:"string"},{name:"extended_media",type:"flags.4?MessageExtendedMedia"}],type:"MessageMedia"},{id:512535275,predicate:"postAddress",params:[{name:"street_line1",type:"string"},{name:"street_line2",type:"string"},{name:"city",type:"string"},{name:"state",type:"string"},{name:"country_iso2",type:"string"},{name:"post_code",type:"string"}],type:"PostAddress"},{id:-1868808300,predicate:"paymentRequestedInfo",params:[{name:"flags",type:"#"},{name:"name",type:"flags.0?string"},{name:"phone",type:"flags.1?string"},{name:"email",type:"flags.2?string"},{name:"shipping_address",type:"flags.3?PostAddress"}],type:"PaymentRequestedInfo"},{id:1067792645,predicate:"keyboardButtonBuy",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:-970673810,predicate:"messageActionPaymentSent",params:[{name:"flags",type:"#"},{name:"recurring_init",type:"flags.2?true"},{name:"recurring_used",type:"flags.3?true"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"invoice_slug",type:"flags.0?string"},{name:"subscription_until_date",type:"flags.4?int"}],type:"MessageAction"},{id:-842892769,predicate:"paymentSavedCredentialsCard",params:[{name:"id",type:"string"},{name:"title",type:"string"}],type:"PaymentSavedCredentials"},{id:475467473,predicate:"webDocument",params:[{name:"url",type:"string"},{name:"access_hash",type:"long"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"WebDocument"},{id:-1678949555,predicate:"inputWebDocument",params:[{name:"url",type:"string"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"InputWebDocument"},{id:-1036396922,predicate:"inputWebFileLocation",params:[{name:"url",type:"string"},{name:"access_hash",type:"long"}],type:"InputWebFileLocation"},{id:568808380,predicate:"upload.webFile",params:[{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"file_type",type:"storage.FileType"},{name:"mtime",type:"int"},{name:"bytes",type:"bytes"}],type:"upload.WebFile"},{id:-1610250415,predicate:"payments.paymentForm",params:[{name:"flags",type:"#"},{name:"can_save_credentials",type:"flags.2?true"},{name:"password_missing",type:"flags.3?true"},{name:"form_id",type:"long"},{name:"bot_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.5?WebDocument"},{name:"invoice",type:"Invoice"},{name:"provider_id",type:"long"},{name:"url",type:"string"},{name:"native_provider",type:"flags.4?string"},{name:"native_params",type:"flags.4?DataJSON"},{name:"additional_methods",type:"flags.6?Vector<PaymentFormMethod>"},{name:"saved_info",type:"flags.0?PaymentRequestedInfo"},{name:"saved_credentials",type:"flags.1?Vector<PaymentSavedCredentials>"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentForm"},{id:-784000893,predicate:"payments.validatedRequestedInfo",params:[{name:"flags",type:"#"},{name:"id",type:"flags.0?string"},{name:"shipping_options",type:"flags.1?Vector<ShippingOption>"}],type:"payments.ValidatedRequestedInfo"},{id:1314881805,predicate:"payments.paymentResult",params:[{name:"updates",type:"Updates"}],type:"payments.PaymentResult"},{id:1891958275,predicate:"payments.paymentReceipt",params:[{name:"flags",type:"#"},{name:"date",type:"int"},{name:"bot_id",type:"long"},{name:"provider_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.2?WebDocument"},{name:"invoice",type:"Invoice"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping",type:"flags.1?ShippingOption"},{name:"tip_amount",type:"flags.3?long"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"credentials_title",type:"string"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentReceipt"},{id:-74456004,predicate:"payments.savedInfo",params:[{name:"flags",type:"#"},{name:"has_saved_credentials",type:"flags.1?true"},{name:"saved_info",type:"flags.0?PaymentRequestedInfo"}],type:"payments.SavedInfo"},{id:-1056001329,predicate:"inputPaymentCredentialsSaved",params:[{name:"id",type:"string"},{name:"tmp_password",type:"bytes"}],type:"InputPaymentCredentials"},{id:873977640,predicate:"inputPaymentCredentials",params:[{name:"flags",type:"#"},{name:"save",type:"flags.0?true"},{name:"data",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:-614138572,predicate:"account.tmpPassword",params:[{name:"tmp_password",type:"bytes"},{name:"valid_until",type:"int"}],type:"account.TmpPassword"},{id:-1239335713,predicate:"shippingOption",params:[{name:"id",type:"string"},{name:"title",type:"string"},{name:"prices",type:"Vector<LabeledPrice>"}],type:"ShippingOption"},{id:-1246823043,predicate:"updateBotShippingQuery",params:[{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"payload",type:"bytes"},{name:"shipping_address",type:"PostAddress"}],type:"Update"},{id:-1934976362,predicate:"updateBotPrecheckoutQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"payload",type:"bytes"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping_option_id",type:"flags.1?string"},{name:"currency",type:"string"},{name:"total_amount",type:"long"}],type:"Update"},{id:853188252,predicate:"inputStickerSetItem",params:[{name:"flags",type:"#"},{name:"document",type:"InputDocument"},{name:"emoji",type:"string"},{name:"mask_coords",type:"flags.0?MaskCoords"},{name:"keywords",type:"flags.1?string"}],type:"InputStickerSetItem"},{id:-1425052898,predicate:"updatePhoneCall",params:[{name:"phone_call",type:"PhoneCall"}],type:"Update"},{id:506920429,predicate:"inputPhoneCall",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPhoneCall"},{id:1399245077,predicate:"phoneCallEmpty",params:[{name:"id",type:"long"}],type:"PhoneCall"},{id:-987599081,predicate:"phoneCallWaiting",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"protocol",type:"PhoneCallProtocol"},{name:"receive_date",type:"flags.0?int"}],type:"PhoneCall"},{id:347139340,predicate:"phoneCallRequested",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_hash",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"PhoneCall"},{id:912311057,predicate:"phoneCallAccepted",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_b",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"PhoneCall"},{id:810769141,predicate:"phoneCall",params:[{name:"flags",type:"#"},{name:"p2p_allowed",type:"flags.5?true"},{name:"video",type:"flags.6?true"},{name:"conference_supported",type:"flags.8?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_or_b",type:"bytes"},{name:"key_fingerprint",type:"long"},{name:"protocol",type:"PhoneCallProtocol"},{name:"connections",type:"Vector<PhoneConnection>"},{name:"start_date",type:"int"},{name:"custom_parameters",type:"flags.7?DataJSON"}],type:"PhoneCall"},{id:1355435489,predicate:"phoneCallDiscarded",params:[{name:"flags",type:"#"},{name:"need_rating",type:"flags.2?true"},{name:"need_debug",type:"flags.3?true"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"reason",type:"flags.0?PhoneCallDiscardReason"},{name:"duration",type:"flags.1?int"}],type:"PhoneCall"},{id:-1665063993,predicate:"phoneConnection",params:[{name:"flags",type:"#"},{name:"tcp",type:"flags.0?true"},{name:"id",type:"long"},{name:"ip",type:"string"},{name:"ipv6",type:"string"},{name:"port",type:"int"},{name:"peer_tag",type:"bytes"}],type:"PhoneConnection"},{id:-58224696,predicate:"phoneCallProtocol",params:[{name:"flags",type:"#"},{name:"udp_p2p",type:"flags.0?true"},{name:"udp_reflector",type:"flags.1?true"},{name:"min_layer",type:"int"},{name:"max_layer",type:"int"},{name:"library_versions",type:"Vector<string>"}],type:"PhoneCallProtocol"},{id:-326966976,predicate:"phone.phoneCall",params:[{name:"phone_call",type:"PhoneCall"},{name:"users",type:"Vector<User>"}],type:"phone.PhoneCall"},{id:-2134272152,predicate:"inputMessagesFilterPhoneCalls",params:[{name:"flags",type:"#"},{name:"missed",type:"flags.0?true"}],type:"MessagesFilter"},{id:-2132731265,predicate:"messageActionPhoneCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.2?true"},{name:"call_id",type:"long"},{name:"reason",type:"flags.0?PhoneCallDiscardReason"},{name:"duration",type:"flags.1?int"}],type:"MessageAction"},{id:2054952868,predicate:"inputMessagesFilterRoundVoice",params:[],type:"MessagesFilter"},{id:-1253451181,predicate:"inputMessagesFilterRoundVideo",params:[],type:"MessagesFilter"},{id:-1997373508,predicate:"sendMessageRecordRoundAction",params:[],type:"SendMessageAction"},{id:608050278,predicate:"sendMessageUploadRoundAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-242427324,predicate:"upload.fileCdnRedirect",params:[{name:"dc_id",type:"int"},{name:"file_token",type:"bytes"},{name:"encryption_key",type:"bytes"},{name:"encryption_iv",type:"bytes"},{name:"file_hashes",type:"Vector<FileHash>"}],type:"upload.File"},{id:-290921362,predicate:"upload.cdnFileReuploadNeeded",params:[{name:"request_token",type:"bytes"}],type:"upload.CdnFile"},{id:-1449145777,predicate:"upload.cdnFile",params:[{name:"bytes",type:"bytes"}],type:"upload.CdnFile"},{id:-914167110,predicate:"cdnPublicKey",params:[{name:"dc_id",type:"int"},{name:"public_key",type:"string"}],type:"CdnPublicKey"},{id:1462101002,predicate:"cdnConfig",params:[{name:"public_keys",type:"Vector<CdnPublicKey>"}],type:"CdnConfig"},{id:-283684427,predicate:"pageBlockChannel",params:[{name:"channel",type:"Chat"}],type:"PageBlock"},{id:-892239370,predicate:"langPackString",params:[{name:"key",type:"string"},{name:"value",type:"string"}],type:"LangPackString"},{id:1816636575,predicate:"langPackStringPluralized",params:[{name:"flags",type:"#"},{name:"key",type:"string"},{name:"zero_value",type:"flags.0?string"},{name:"one_value",type:"flags.1?string"},{name:"two_value",type:"flags.2?string"},{name:"few_value",type:"flags.3?string"},{name:"many_value",type:"flags.4?string"},{name:"other_value",type:"string"}],type:"LangPackString"},{id:695856818,predicate:"langPackStringDeleted",params:[{name:"key",type:"string"}],type:"LangPackString"},{id:-209337866,predicate:"langPackDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"},{name:"version",type:"int"},{name:"strings",type:"Vector<LangPackString>"}],type:"LangPackDifference"},{id:-288727837,predicate:"langPackLanguage",params:[{name:"flags",type:"#"},{name:"official",type:"flags.0?true"},{name:"rtl",type:"flags.2?true"},{name:"beta",type:"flags.3?true"},{name:"name",type:"string"},{name:"native_name",type:"string"},{name:"lang_code",type:"string"},{name:"base_lang_code",type:"flags.1?string"},{name:"plural_code",type:"string"},{name:"strings_count",type:"int"},{name:"translated_count",type:"int"},{name:"translations_url",type:"string"}],type:"LangPackLanguage"},{id:1180041828,predicate:"updateLangPackTooLong",params:[{name:"lang_code",type:"string"}],type:"Update"},{id:1442983757,predicate:"updateLangPack",params:[{name:"difference",type:"LangPackDifference"}],type:"Update"},{id:885242707,predicate:"channelParticipantAdmin",params:[{name:"flags",type:"#"},{name:"can_edit",type:"flags.0?true"},{name:"self",type:"flags.1?true"},{name:"user_id",type:"long"},{name:"inviter_id",type:"flags.1?long"},{name:"promoted_by",type:"long"},{name:"date",type:"int"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"flags.2?string"}],type:"ChannelParticipant"},{id:1844969806,predicate:"channelParticipantBanned",params:[{name:"flags",type:"#"},{name:"left",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"kicked_by",type:"long"},{name:"date",type:"int"},{name:"banned_rights",type:"ChatBannedRights"}],type:"ChannelParticipant"},{id:338142689,predicate:"channelParticipantsBanned",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:106343499,predicate:"channelParticipantsSearch",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-421545947,predicate:"channelAdminLogEventActionChangeTitle",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1427671598,predicate:"channelAdminLogEventActionChangeAbout",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1783299128,predicate:"channelAdminLogEventActionChangeUsername",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1129042607,predicate:"channelAdminLogEventActionChangePhoto",params:[{name:"prev_photo",type:"Photo"},{name:"new_photo",type:"Photo"}],type:"ChannelAdminLogEventAction"},{id:460916654,predicate:"channelAdminLogEventActionToggleInvites",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:648939889,predicate:"channelAdminLogEventActionToggleSignatures",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-370660328,predicate:"channelAdminLogEventActionUpdatePinned",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:1889215493,predicate:"channelAdminLogEventActionEditMessage",params:[{name:"prev_message",type:"Message"},{name:"new_message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:1121994683,predicate:"channelAdminLogEventActionDeleteMessage",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:405815507,predicate:"channelAdminLogEventActionParticipantJoin",params:[],type:"ChannelAdminLogEventAction"},{id:-124291086,predicate:"channelAdminLogEventActionParticipantLeave",params:[],type:"ChannelAdminLogEventAction"},{id:-484690728,predicate:"channelAdminLogEventActionParticipantInvite",params:[{name:"participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-422036098,predicate:"channelAdminLogEventActionParticipantToggleBan",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-714643696,predicate:"channelAdminLogEventActionParticipantToggleAdmin",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:531458253,predicate:"channelAdminLogEvent",params:[{name:"id",type:"long"},{name:"date",type:"int"},{name:"user_id",type:"long"},{name:"action",type:"ChannelAdminLogEventAction"}],type:"ChannelAdminLogEvent"},{id:-309659827,predicate:"channels.adminLogResults",params:[{name:"events",type:"Vector<ChannelAdminLogEvent>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.AdminLogResults"},{id:-368018716,predicate:"channelAdminLogEventsFilter",params:[{name:"flags",type:"#"},{name:"join",type:"flags.0?true"},{name:"leave",type:"flags.1?true"},{name:"invite",type:"flags.2?true"},{name:"ban",type:"flags.3?true"},{name:"unban",type:"flags.4?true"},{name:"kick",type:"flags.5?true"},{name:"unkick",type:"flags.6?true"},{name:"promote",type:"flags.7?true"},{name:"demote",type:"flags.8?true"},{name:"info",type:"flags.9?true"},{name:"settings",type:"flags.10?true"},{name:"pinned",type:"flags.11?true"},{name:"edit",type:"flags.12?true"},{name:"delete",type:"flags.13?true"},{name:"group_call",type:"flags.14?true"},{name:"invites",type:"flags.15?true"},{name:"send",type:"flags.16?true"},{name:"forums",type:"flags.17?true"},{name:"sub_extend",type:"flags.18?true"}],type:"ChannelAdminLogEventsFilter"},{id:511092620,predicate:"topPeerCategoryPhoneCalls",params:[],type:"TopPeerCategory"},{id:-2143067670,predicate:"pageBlockAudio",params:[{name:"audio_id",type:"long"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1558266229,predicate:"popularContact",params:[{name:"client_id",type:"long"},{name:"importers",type:"int"}],type:"PopularContact"},{id:1200788123,predicate:"messageActionScreenshotTaken",params:[],type:"MessageAction"},{id:-1634752813,predicate:"messages.favedStickersNotModified",params:[],type:"messages.FavedStickers"},{id:750063767,predicate:"messages.favedStickers",params:[{name:"hash",type:"long"},{name:"packs",type:"Vector<StickerPack>"},{name:"stickers",type:"Vector<Document>"}],type:"messages.FavedStickers"},{id:-451831443,predicate:"updateFavedStickers",params:[],type:"Update"},{id:636691703,predicate:"updateChannelReadMessagesContents",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"flags.0?int"},{name:"saved_peer_id",type:"flags.1?Peer"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:-1040652646,predicate:"inputMessagesFilterMyMentions",params:[],type:"MessagesFilter"},{id:1887741886,predicate:"updateContactsReset",params:[],type:"Update"},{id:-1312568665,predicate:"channelAdminLogEventActionChangeStickerSet",params:[{name:"prev_stickerset",type:"InputStickerSet"},{name:"new_stickerset",type:"InputStickerSet"}],type:"ChannelAdminLogEventAction"},{id:-85549226,predicate:"messageActionCustomAction",params:[{name:"message",type:"string"}],type:"MessageAction"},{id:178373535,predicate:"inputPaymentCredentialsApplePay",params:[{name:"payment_data",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:-419271411,predicate:"inputMessagesFilterGeo",params:[],type:"MessagesFilter"},{id:-530392189,predicate:"inputMessagesFilterContacts",params:[],type:"MessagesFilter"},{id:-1304443240,predicate:"updateChannelAvailableMessages",params:[{name:"channel_id",type:"long"},{name:"available_min_id",type:"int"}],type:"Update"},{id:1599903217,predicate:"channelAdminLogEventActionTogglePreHistoryHidden",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-1759532989,predicate:"inputMediaGeoLive",params:[{name:"flags",type:"#"},{name:"stopped",type:"flags.0?true"},{name:"geo_point",type:"InputGeoPoint"},{name:"heading",type:"flags.2?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"}],type:"InputMedia"},{id:-1186937242,predicate:"messageMediaGeoLive",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"int"},{name:"proximity_notification_radius",type:"flags.1?int"}],type:"MessageMedia"},{id:1189204285,predicate:"recentMeUrlUnknown",params:[{name:"url",type:"string"}],type:"RecentMeUrl"},{id:-1188296222,predicate:"recentMeUrlUser",params:[{name:"url",type:"string"},{name:"user_id",type:"long"}],type:"RecentMeUrl"},{id:-1294306862,predicate:"recentMeUrlChat",params:[{name:"url",type:"string"},{name:"chat_id",type:"long"}],type:"RecentMeUrl"},{id:-347535331,predicate:"recentMeUrlChatInvite",params:[{name:"url",type:"string"},{name:"chat_invite",type:"ChatInvite"}],type:"RecentMeUrl"},{id:-1140172836,predicate:"recentMeUrlStickerSet",params:[{name:"url",type:"string"},{name:"set",type:"StickerSetCovered"}],type:"RecentMeUrl"},{id:235081943,predicate:"help.recentMeUrls",params:[{name:"urls",type:"Vector<RecentMeUrl>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"help.RecentMeUrls"},{id:-266911767,predicate:"channels.channelParticipantsNotModified",params:[],type:"channels.ChannelParticipants"},{id:1951620897,predicate:"messages.messagesNotModified",params:[{name:"count",type:"int"}],type:"messages.Messages"},{id:482797855,predicate:"inputSingleMedia",params:[{name:"flags",type:"#"},{name:"media",type:"InputMedia"},{name:"random_id",type:"long"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"}],type:"InputSingleMedia"},{id:-1493633966,predicate:"webAuthorization",params:[{name:"hash",type:"long"},{name:"bot_id",type:"long"},{name:"domain",type:"string"},{name:"browser",type:"string"},{name:"platform",type:"string"},{name:"date_created",type:"int"},{name:"date_active",type:"int"},{name:"ip",type:"string"},{name:"region",type:"string"}],type:"WebAuthorization"},{id:-313079300,predicate:"account.webAuthorizations",params:[{name:"authorizations",type:"Vector<WebAuthorization>"},{name:"users",type:"Vector<User>"}],type:"account.WebAuthorizations"},{id:-1502174430,predicate:"inputMessageID",params:[{name:"id",type:"int"}],type:"InputMessage"},{id:-1160215659,predicate:"inputMessageReplyTo",params:[{name:"id",type:"int"}],type:"InputMessage"},{id:-2037963464,predicate:"inputMessagePinned",params:[],type:"InputMessage"},{id:-1687559349,predicate:"messageEntityPhone",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1280209983,predicate:"messageEntityCashtag",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-988359047,predicate:"messageActionBotAllowed",params:[{name:"flags",type:"#"},{name:"attach_menu",type:"flags.1?true"},{name:"from_request",type:"flags.3?true"},{name:"domain",type:"flags.0?string"},{name:"app",type:"flags.2?BotApp"}],type:"MessageAction"},{id:-55902537,predicate:"inputDialogPeer",params:[{name:"peer",type:"InputPeer"}],type:"InputDialogPeer"},{id:-445792507,predicate:"dialogPeer",params:[{name:"peer",type:"Peer"}],type:"DialogPeer"},{id:223655517,predicate:"messages.foundStickerSetsNotModified",params:[],type:"messages.FoundStickerSets"},{id:-1963942446,predicate:"messages.foundStickerSets",params:[{name:"hash",type:"long"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.FoundStickerSets"},{id:-207944868,predicate:"fileHash",params:[{name:"offset",type:"long"},{name:"limit",type:"int"},{name:"hash",type:"bytes"}],type:"FileHash"},{id:-104284986,predicate:"webDocumentNoProxy",params:[{name:"url",type:"string"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"WebDocument"},{id:1968737087,predicate:"inputClientProxy",params:[{name:"address",type:"string"},{name:"port",type:"int"}],type:"InputClientProxy"},{id:-483352705,predicate:"help.termsOfServiceUpdateEmpty",params:[{name:"expires",type:"int"}],type:"help.TermsOfServiceUpdate"},{id:686618977,predicate:"help.termsOfServiceUpdate",params:[{name:"expires",type:"int"},{name:"terms_of_service",type:"help.TermsOfService"}],type:"help.TermsOfServiceUpdate"},{id:859091184,predicate:"inputSecureFileUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"md5_checksum",type:"string"},{name:"file_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"InputSecureFile"},{id:1399317950,predicate:"inputSecureFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputSecureFile"},{id:-876089816,predicate:"inputSecureFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputFileLocation"},{id:1679398724,predicate:"secureFileEmpty",params:[],type:"SecureFile"},{id:2097791614,predicate:"secureFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"size",type:"long"},{name:"dc_id",type:"int"},{name:"date",type:"int"},{name:"file_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureFile"},{id:-1964327229,predicate:"secureData",params:[{name:"data",type:"bytes"},{name:"data_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureData"},{id:2103482845,predicate:"securePlainPhone",params:[{name:"phone",type:"string"}],type:"SecurePlainData"},{id:569137759,predicate:"securePlainEmail",params:[{name:"email",type:"string"}],type:"SecurePlainData"},{id:-1658158621,predicate:"secureValueTypePersonalDetails",params:[],type:"SecureValueType"},{id:1034709504,predicate:"secureValueTypePassport",params:[],type:"SecureValueType"},{id:115615172,predicate:"secureValueTypeDriverLicense",params:[],type:"SecureValueType"},{id:-1596951477,predicate:"secureValueTypeIdentityCard",params:[],type:"SecureValueType"},{id:-1717268701,predicate:"secureValueTypeInternalPassport",params:[],type:"SecureValueType"},{id:-874308058,predicate:"secureValueTypeAddress",params:[],type:"SecureValueType"},{id:-63531698,predicate:"secureValueTypeUtilityBill",params:[],type:"SecureValueType"},{id:-1995211763,predicate:"secureValueTypeBankStatement",params:[],type:"SecureValueType"},{id:-1954007928,predicate:"secureValueTypeRentalAgreement",params:[],type:"SecureValueType"},{id:-1713143702,predicate:"secureValueTypePassportRegistration",params:[],type:"SecureValueType"},{id:-368907213,predicate:"secureValueTypeTemporaryRegistration",params:[],type:"SecureValueType"},{id:-1289704741,predicate:"secureValueTypePhone",params:[],type:"SecureValueType"},{id:-1908627474,predicate:"secureValueTypeEmail",params:[],type:"SecureValueType"},{id:411017418,predicate:"secureValue",params:[{name:"flags",type:"#"},{name:"type",type:"SecureValueType"},{name:"data",type:"flags.0?SecureData"},{name:"front_side",type:"flags.1?SecureFile"},{name:"reverse_side",type:"flags.2?SecureFile"},{name:"selfie",type:"flags.3?SecureFile"},{name:"translation",type:"flags.6?Vector<SecureFile>"},{name:"files",type:"flags.4?Vector<SecureFile>"},{name:"plain_data",type:"flags.5?SecurePlainData"},{name:"hash",type:"bytes"}],type:"SecureValue"},{id:-618540889,predicate:"inputSecureValue",params:[{name:"flags",type:"#"},{name:"type",type:"SecureValueType"},{name:"data",type:"flags.0?SecureData"},{name:"front_side",type:"flags.1?InputSecureFile"},{name:"reverse_side",type:"flags.2?InputSecureFile"},{name:"selfie",type:"flags.3?InputSecureFile"},{name:"translation",type:"flags.6?Vector<InputSecureFile>"},{name:"files",type:"flags.4?Vector<InputSecureFile>"},{name:"plain_data",type:"flags.5?SecurePlainData"}],type:"InputSecureValue"},{id:-316748368,predicate:"secureValueHash",params:[{name:"type",type:"SecureValueType"},{name:"hash",type:"bytes"}],type:"SecureValueHash"},{id:-391902247,predicate:"secureValueErrorData",params:[{name:"type",type:"SecureValueType"},{name:"data_hash",type:"bytes"},{name:"field",type:"string"},{name:"text",type:"string"}],type:"SecureValueError"},{id:12467706,predicate:"secureValueErrorFrontSide",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-2037765467,predicate:"secureValueErrorReverseSide",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-449327402,predicate:"secureValueErrorSelfie",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:2054162547,predicate:"secureValueErrorFile",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:1717706985,predicate:"secureValueErrorFiles",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"Vector<bytes>"},{name:"text",type:"string"}],type:"SecureValueError"},{id:871426631,predicate:"secureCredentialsEncrypted",params:[{name:"data",type:"bytes"},{name:"hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureCredentialsEncrypted"},{id:-1389486888,predicate:"account.authorizationForm",params:[{name:"flags",type:"#"},{name:"required_types",type:"Vector<SecureRequiredType>"},{name:"values",type:"Vector<SecureValue>"},{name:"errors",type:"Vector<SecureValueError>"},{name:"users",type:"Vector<User>"},{name:"privacy_policy_url",type:"flags.0?string"}],type:"account.AuthorizationForm"},{id:-2128640689,predicate:"account.sentEmailCode",params:[{name:"email_pattern",type:"string"},{name:"length",type:"int"}],type:"account.SentEmailCode"},{id:455635795,predicate:"messageActionSecureValuesSentMe",params:[{name:"values",type:"Vector<SecureValue>"},{name:"credentials",type:"SecureCredentialsEncrypted"}],type:"MessageAction"},{id:-648257196,predicate:"messageActionSecureValuesSent",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"MessageAction"},{id:1722786150,predicate:"help.deepLinkInfoEmpty",params:[],type:"help.DeepLinkInfo"},{id:1783556146,predicate:"help.deepLinkInfo",params:[{name:"flags",type:"#"},{name:"update_app",type:"flags.0?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"}],type:"help.DeepLinkInfo"},{id:289586518,predicate:"savedPhoneContact",params:[{name:"phone",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"date",type:"int"}],type:"SavedContact"},{id:1304052993,predicate:"account.takeout",params:[{name:"id",type:"long"}],type:"account.Takeout"},{id:700340377,predicate:"inputTakeoutFileLocation",params:[],type:"InputFileLocation"},{id:-1235684802,predicate:"updateDialogUnreadMark",params:[{name:"flags",type:"#"},{name:"unread",type:"flags.0?true"},{name:"peer",type:"DialogPeer"},{name:"saved_peer_id",type:"flags.1?Peer"}],type:"Update"},{id:-253500010,predicate:"messages.dialogsNotModified",params:[{name:"count",type:"int"}],type:"messages.Dialogs"},{id:-1625153079,predicate:"inputWebFileGeoPointLocation",params:[{name:"geo_point",type:"InputGeoPoint"},{name:"access_hash",type:"long"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"zoom",type:"int"},{name:"scale",type:"int"}],type:"InputWebFileLocation"},{id:-1255369827,predicate:"contacts.topPeersDisabled",params:[],type:"contacts.TopPeers"},{id:-1685456582,predicate:"inputReportReasonCopyright",params:[],type:"ReportReason"},{id:-732254058,predicate:"passwordKdfAlgoUnknown",params:[],type:"PasswordKdfAlgo"},{id:4883767,predicate:"securePasswordKdfAlgoUnknown",params:[],type:"SecurePasswordKdfAlgo"},{id:-1141711456,predicate:"securePasswordKdfAlgoPBKDF2HMACSHA512iter100000",params:[{name:"salt",type:"bytes"}],type:"SecurePasswordKdfAlgo"},{id:-2042159726,predicate:"securePasswordKdfAlgoSHA512",params:[{name:"salt",type:"bytes"}],type:"SecurePasswordKdfAlgo"},{id:354925740,predicate:"secureSecretSettings",params:[{name:"secure_algo",type:"SecurePasswordKdfAlgo"},{name:"secure_secret",type:"bytes"},{name:"secure_secret_id",type:"long"}],type:"SecureSecretSettings"},{id:982592842,predicate:"passwordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow",params:[{name:"salt1",type:"bytes"},{name:"salt2",type:"bytes"},{name:"g",type:"int"},{name:"p",type:"bytes"}],type:"PasswordKdfAlgo"},{id:-1736378792,predicate:"inputCheckPasswordEmpty",params:[],type:"InputCheckPasswordSRP"},{id:-763367294,predicate:"inputCheckPasswordSRP",params:[{name:"srp_id",type:"long"},{name:"A",type:"bytes"},{name:"M1",type:"bytes"}],type:"InputCheckPasswordSRP"},{id:-2036501105,predicate:"secureValueError",params:[{name:"type",type:"SecureValueType"},{name:"hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-1592506512,predicate:"secureValueErrorTranslationFile",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:878931416,predicate:"secureValueErrorTranslationFiles",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"Vector<bytes>"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-2103600678,predicate:"secureRequiredType",params:[{name:"flags",type:"#"},{name:"native_names",type:"flags.0?true"},{name:"selfie_required",type:"flags.1?true"},{name:"translation_required",type:"flags.2?true"},{name:"type",type:"SecureValueType"}],type:"SecureRequiredType"},{id:41187252,predicate:"secureRequiredTypeOneOf",params:[{name:"types",type:"Vector<SecureRequiredType>"}],type:"SecureRequiredType"},{id:-1078332329,predicate:"help.passportConfigNotModified",params:[],type:"help.PassportConfig"},{id:-1600596305,predicate:"help.passportConfig",params:[{name:"hash",type:"int"},{name:"countries_langs",type:"DataJSON"}],type:"help.PassportConfig"},{id:488313413,predicate:"inputAppEvent",params:[{name:"time",type:"double"},{name:"type",type:"string"},{name:"peer",type:"long"},{name:"data",type:"JSONValue"}],type:"InputAppEvent"},{id:-1059185703,predicate:"jsonObjectValue",params:[{name:"key",type:"string"},{name:"value",type:"JSONValue"}],type:"JSONObjectValue"},{id:1064139624,predicate:"jsonNull",params:[],type:"JSONValue"},{id:-952869270,predicate:"jsonBool",params:[{name:"value",type:"Bool"}],type:"JSONValue"},{id:736157604,predicate:"jsonNumber",params:[{name:"value",type:"double"}],type:"JSONValue"},{id:-1222740358,predicate:"jsonString",params:[{name:"value",type:"string"}],type:"JSONValue"},{id:-146520221,predicate:"jsonArray",params:[{name:"value",type:"Vector<JSONValue>"}],type:"JSONValue"},{id:-1715350371,predicate:"jsonObject",params:[{name:"value",type:"Vector<JSONObjectValue>"}],type:"JSONValue"},{id:-1311015810,predicate:"inputNotifyBroadcasts",params:[],type:"InputNotifyPeer"},{id:-703403793,predicate:"notifyBroadcasts",params:[],type:"NotifyPeer"},{id:-311786236,predicate:"textSubscript",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-939827711,predicate:"textSuperscript",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:55281185,predicate:"textMarked",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:483104362,predicate:"textPhone",params:[{name:"text",type:"RichText"},{name:"phone",type:"string"}],type:"RichText"},{id:136105807,predicate:"textImage",params:[{name:"document_id",type:"long"},{name:"w",type:"int"},{name:"h",type:"int"}],type:"RichText"},{id:504660880,predicate:"pageBlockKicker",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:878078826,predicate:"pageTableCell",params:[{name:"flags",type:"#"},{name:"header",type:"flags.0?true"},{name:"align_center",type:"flags.3?true"},{name:"align_right",type:"flags.4?true"},{name:"valign_middle",type:"flags.5?true"},{name:"valign_bottom",type:"flags.6?true"},{name:"text",type:"flags.7?RichText"},{name:"colspan",type:"flags.1?int"},{name:"rowspan",type:"flags.2?int"}],type:"PageTableCell"},{id:-524237339,predicate:"pageTableRow",params:[{name:"cells",type:"Vector<PageTableCell>"}],type:"PageTableRow"},{id:-1085412734,predicate:"pageBlockTable",params:[{name:"flags",type:"#"},{name:"bordered",type:"flags.0?true"},{name:"striped",type:"flags.1?true"},{name:"title",type:"RichText"},{name:"rows",type:"Vector<PageTableRow>"}],type:"PageBlock"},{id:1869903447,predicate:"pageCaption",params:[{name:"text",type:"RichText"},{name:"credit",type:"RichText"}],type:"PageCaption"},{id:-1188055347,predicate:"pageListItemText",params:[{name:"text",type:"RichText"}],type:"PageListItem"},{id:635466748,predicate:"pageListItemBlocks",params:[{name:"blocks",type:"Vector<PageBlock>"}],type:"PageListItem"},{id:1577484359,predicate:"pageListOrderedItemText",params:[{name:"num",type:"string"},{name:"text",type:"RichText"}],type:"PageListOrderedItem"},{id:-1730311882,predicate:"pageListOrderedItemBlocks",params:[{name:"num",type:"string"},{name:"blocks",type:"Vector<PageBlock>"}],type:"PageListOrderedItem"},{id:-1702174239,predicate:"pageBlockOrderedList",params:[{name:"items",type:"Vector<PageListOrderedItem>"}],type:"PageBlock"},{id:1987480557,predicate:"pageBlockDetails",params:[{name:"flags",type:"#"},{name:"open",type:"flags.0?true"},{name:"blocks",type:"Vector<PageBlock>"},{name:"title",type:"RichText"}],type:"PageBlock"},{id:-1282352120,predicate:"pageRelatedArticle",params:[{name:"flags",type:"#"},{name:"url",type:"string"},{name:"webpage_id",type:"long"},{name:"title",type:"flags.0?string"},{name:"description",type:"flags.1?string"},{name:"photo_id",type:"flags.2?long"},{name:"author",type:"flags.3?string"},{name:"published_date",type:"flags.4?int"}],type:"PageRelatedArticle"},{id:370236054,predicate:"pageBlockRelatedArticles",params:[{name:"title",type:"RichText"},{name:"articles",type:"Vector<PageRelatedArticle>"}],type:"PageBlock"},{id:-1538310410,predicate:"pageBlockMap",params:[{name:"geo",type:"GeoPoint"},{name:"zoom",type:"int"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-1738178803,predicate:"page",params:[{name:"flags",type:"#"},{name:"part",type:"flags.0?true"},{name:"rtl",type:"flags.1?true"},{name:"v2",type:"flags.2?true"},{name:"url",type:"string"},{name:"blocks",type:"Vector<PageBlock>"},{name:"photos",type:"Vector<Photo>"},{name:"documents",type:"Vector<Document>"},{name:"views",type:"flags.3?int"}],type:"Page"},{id:-610373422,predicate:"inputPrivacyKeyPhoneP2P",params:[],type:"InputPrivacyKey"},{id:961092808,predicate:"privacyKeyPhoneP2P",params:[],type:"PrivacyKey"},{id:894777186,predicate:"textAnchor",params:[{name:"text",type:"RichText"},{name:"name",type:"string"}],type:"RichText"},{id:-1945767479,predicate:"help.supportName",params:[{name:"name",type:"string"}],type:"help.SupportName"},{id:-206688531,predicate:"help.userInfoEmpty",params:[],type:"help.UserInfo"},{id:32192344,predicate:"help.userInfo",params:[{name:"message",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"author",type:"string"},{name:"date",type:"int"}],type:"help.UserInfo"},{id:-202219658,predicate:"messageActionContactSignUp",params:[],type:"MessageAction"},{id:-1398708869,predicate:"updateMessagePoll",params:[{name:"flags",type:"#"},{name:"poll_id",type:"long"},{name:"poll",type:"flags.0?Poll"},{name:"results",type:"PollResults"}],type:"Update"},{id:-15277366,predicate:"pollAnswer",params:[{name:"text",type:"TextWithEntities"},{name:"option",type:"bytes"}],type:"PollAnswer"},{id:1484026161,predicate:"poll",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"closed",type:"flags.0?true"},{name:"public_voters",type:"flags.1?true"},{name:"multiple_choice",type:"flags.2?true"},{name:"quiz",type:"flags.3?true"},{name:"question",type:"TextWithEntities"},{name:"answers",type:"Vector<PollAnswer>"},{name:"close_period",type:"flags.4?int"},{name:"close_date",type:"flags.5?int"}],type:"Poll"},{id:997055186,predicate:"pollAnswerVoters",params:[{name:"flags",type:"#"},{name:"chosen",type:"flags.0?true"},{name:"correct",type:"flags.1?true"},{name:"option",type:"bytes"},{name:"voters",type:"int"}],type:"PollAnswerVoters"},{id:2061444128,predicate:"pollResults",params:[{name:"flags",type:"#"},{name:"min",type:"flags.0?true"},{name:"results",type:"flags.1?Vector<PollAnswerVoters>"},{name:"total_voters",type:"flags.2?int"},{name:"recent_voters",type:"flags.3?Vector<Peer>"},{name:"solution",type:"flags.4?string"},{name:"solution_entities",type:"flags.4?Vector<MessageEntity>"}],type:"PollResults"},{id:261416433,predicate:"inputMediaPoll",params:[{name:"flags",type:"#"},{name:"poll",type:"Poll"},{name:"correct_answers",type:"flags.0?Vector<bytes>"},{name:"solution",type:"flags.1?string"},{name:"solution_entities",type:"flags.1?Vector<MessageEntity>"}],type:"InputMedia"},{id:1272375192,predicate:"messageMediaPoll",params:[{name:"poll",type:"Poll"},{name:"results",type:"PollResults"}],type:"MessageMedia"},{id:-264117680,predicate:"chatOnlines",params:[{name:"onlines",type:"int"}],type:"ChatOnlines"},{id:1202287072,predicate:"statsURL",params:[{name:"url",type:"string"}],type:"StatsURL"},{id:-525288402,predicate:"photoStrippedSize",params:[{name:"type",type:"string"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:1605510357,predicate:"chatAdminRights",params:[{name:"flags",type:"#"},{name:"change_info",type:"flags.0?true"},{name:"post_messages",type:"flags.1?true"},{name:"edit_messages",type:"flags.2?true"},{name:"delete_messages",type:"flags.3?true"},{name:"ban_users",type:"flags.4?true"},{name:"invite_users",type:"flags.5?true"},{name:"pin_messages",type:"flags.7?true"},{name:"add_admins",type:"flags.9?true"},{name:"anonymous",type:"flags.10?true"},{name:"manage_call",type:"flags.11?true"},{name:"other",type:"flags.12?true"},{name:"manage_topics",type:"flags.13?true"},{name:"post_stories",type:"flags.14?true"},{name:"edit_stories",type:"flags.15?true"},{name:"delete_stories",type:"flags.16?true"},{name:"manage_direct_messages",type:"flags.17?true"}],type:"ChatAdminRights"},{id:-1626209256,predicate:"chatBannedRights",params:[{name:"flags",type:"#"},{name:"view_messages",type:"flags.0?true"},{name:"send_messages",type:"flags.1?true"},{name:"send_media",type:"flags.2?true"},{name:"send_stickers",type:"flags.3?true"},{name:"send_gifs",type:"flags.4?true"},{name:"send_games",type:"flags.5?true"},{name:"send_inline",type:"flags.6?true"},{name:"embed_links",type:"flags.7?true"},{name:"send_polls",type:"flags.8?true"},{name:"change_info",type:"flags.10?true"},{name:"invite_users",type:"flags.15?true"},{name:"pin_messages",type:"flags.17?true"},{name:"manage_topics",type:"flags.18?true"},{name:"send_photos",type:"flags.19?true"},{name:"send_videos",type:"flags.20?true"},{name:"send_roundvideos",type:"flags.21?true"},{name:"send_audios",type:"flags.22?true"},{name:"send_voices",type:"flags.23?true"},{name:"send_docs",type:"flags.24?true"},{name:"send_plain",type:"flags.25?true"},{name:"until_date",type:"int"}],type:"ChatBannedRights"},{id:1421875280,predicate:"updateChatDefaultBannedRights",params:[{name:"peer",type:"Peer"},{name:"default_banned_rights",type:"ChatBannedRights"},{name:"version",type:"int"}],type:"Update"},{id:-433014407,predicate:"inputWallPaper",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputWallPaper"},{id:1913199744,predicate:"inputWallPaperSlug",params:[{name:"slug",type:"string"}],type:"InputWallPaper"},{id:-1150621555,predicate:"channelParticipantsContacts",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:771095562,predicate:"channelAdminLogEventActionDefaultBannedRights",params:[{name:"prev_banned_rights",type:"ChatBannedRights"},{name:"new_banned_rights",type:"ChatBannedRights"}],type:"ChannelAdminLogEventAction"},{id:-1895328189,predicate:"channelAdminLogEventActionStopPoll",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:471437699,predicate:"account.wallPapersNotModified",params:[],type:"account.WallPapers"},{id:-842824308,predicate:"account.wallPapers",params:[{name:"hash",type:"long"},{name:"wallpapers",type:"Vector<WallPaper>"}],type:"account.WallPapers"},{id:-1390068360,predicate:"codeSettings",params:[{name:"flags",type:"#"},{name:"allow_flashcall",type:"flags.0?true"},{name:"current_number",type:"flags.1?true"},{name:"allow_app_hash",type:"flags.4?true"},{name:"allow_missed_call",type:"flags.5?true"},{name:"allow_firebase",type:"flags.7?true"},{name:"unknown_number",type:"flags.9?true"},{name:"logout_tokens",type:"flags.6?Vector<bytes>"},{name:"token",type:"flags.8?string"},{name:"app_sandbox",type:"flags.8?Bool"}],type:"CodeSettings"},{id:925826256,predicate:"wallPaperSettings",params:[{name:"flags",type:"#"},{name:"blur",type:"flags.1?true"},{name:"motion",type:"flags.2?true"},{name:"background_color",type:"flags.0?int"},{name:"second_background_color",type:"flags.4?int"},{name:"third_background_color",type:"flags.5?int"},{name:"fourth_background_color",type:"flags.6?int"},{name:"intensity",type:"flags.3?int"},{name:"rotation",type:"flags.4?int"},{name:"emoticon",type:"flags.7?string"}],type:"WallPaperSettings"},{id:-1163561432,predicate:"autoDownloadSettings",params:[{name:"flags",type:"#"},{name:"disabled",type:"flags.0?true"},{name:"video_preload_large",type:"flags.1?true"},{name:"audio_preload_next",type:"flags.2?true"},{name:"phonecalls_less_data",type:"flags.3?true"},{name:"stories_preload",type:"flags.4?true"},{name:"photo_size_max",type:"int"},{name:"video_size_max",type:"long"},{name:"file_size_max",type:"long"},{name:"video_upload_maxbitrate",type:"int"},{name:"small_queue_active_operations_max",type:"int"},{name:"large_queue_active_operations_max",type:"int"}],type:"AutoDownloadSettings"},{id:1674235686,predicate:"account.autoDownloadSettings",params:[{name:"low",type:"AutoDownloadSettings"},{name:"medium",type:"AutoDownloadSettings"},{name:"high",type:"AutoDownloadSettings"}],type:"account.AutoDownloadSettings"},{id:-709641735,predicate:"emojiKeyword",params:[{name:"keyword",type:"string"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiKeyword"},{id:594408994,predicate:"emojiKeywordDeleted",params:[{name:"keyword",type:"string"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiKeyword"},{id:1556570557,predicate:"emojiKeywordsDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"},{name:"version",type:"int"},{name:"keywords",type:"Vector<EmojiKeyword>"}],type:"EmojiKeywordsDifference"},{id:-1519029347,predicate:"emojiURL",params:[{name:"url",type:"string"}],type:"EmojiURL"},{id:-1275374751,predicate:"emojiLanguage",params:[{name:"lang_code",type:"string"}],type:"EmojiLanguage"},{id:-1529000952,predicate:"inputPrivacyKeyForwards",params:[],type:"InputPrivacyKey"},{id:1777096355,predicate:"privacyKeyForwards",params:[],type:"PrivacyKey"},{id:1461304012,predicate:"inputPrivacyKeyProfilePhoto",params:[],type:"InputPrivacyKey"},{id:-1777000467,predicate:"privacyKeyProfilePhoto",params:[],type:"PrivacyKey"},{id:1075322878,predicate:"inputPhotoFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"thumb_size",type:"string"}],type:"InputFileLocation"},{id:-667654413,predicate:"inputPhotoLegacyFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"volume_id",type:"long"},{name:"local_id",type:"int"},{name:"secret",type:"long"}],type:"InputFileLocation"},{id:925204121,predicate:"inputPeerPhotoFileLocation",params:[{name:"flags",type:"#"},{name:"big",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"photo_id",type:"long"}],type:"InputFileLocation"},{id:-1652231205,predicate:"inputStickerSetThumb",params:[{name:"stickerset",type:"InputStickerSet"},{name:"thumb_version",type:"int"}],type:"InputFileLocation"},{id:-11252123,predicate:"folder",params:[{name:"flags",type:"#"},{name:"autofill_new_broadcasts",type:"flags.0?true"},{name:"autofill_public_groups",type:"flags.1?true"},{name:"autofill_new_correspondents",type:"flags.2?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"photo",type:"flags.3?ChatPhoto"}],type:"Folder"},{id:1908216652,predicate:"dialogFolder",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"folder",type:"Folder"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"unread_muted_peers_count",type:"int"},{name:"unread_unmuted_peers_count",type:"int"},{name:"unread_muted_messages_count",type:"int"},{name:"unread_unmuted_messages_count",type:"int"}],type:"Dialog"},{id:1684014375,predicate:"inputDialogPeerFolder",params:[{name:"folder_id",type:"int"}],type:"InputDialogPeer"},{id:1363483106,predicate:"dialogPeerFolder",params:[{name:"folder_id",type:"int"}],type:"DialogPeer"},{id:-70073706,predicate:"inputFolderPeer",params:[{name:"peer",type:"InputPeer"},{name:"folder_id",type:"int"}],type:"InputFolderPeer"},{id:-373643672,predicate:"folderPeer",params:[{name:"peer",type:"Peer"},{name:"folder_id",type:"int"}],type:"FolderPeer"},{id:422972864,predicate:"updateFolderPeers",params:[{name:"folder_peers",type:"Vector<FolderPeer>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:497305826,predicate:"inputUserFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"user_id",type:"long"}],type:"InputUser"},{id:1536380829,predicate:"inputChannelFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"channel_id",type:"long"}],type:"InputChannel"},{id:-1468331492,predicate:"inputPeerUserFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"user_id",type:"long"}],type:"InputPeer"},{id:-1121318848,predicate:"inputPeerChannelFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"channel_id",type:"long"}],type:"InputPeer"},{id:55761658,predicate:"inputPrivacyKeyPhoneNumber",params:[],type:"InputPrivacyKey"},{id:-778378131,predicate:"privacyKeyPhoneNumber",params:[],type:"PrivacyKey"},{id:-1472172887,predicate:"topPeerCategoryForwardUsers",params:[],type:"TopPeerCategory"},{id:-68239120,predicate:"topPeerCategoryForwardChats",params:[],type:"TopPeerCategory"},{id:84703944,predicate:"channelAdminLogEventActionChangeLinkedChat",params:[{name:"prev_value",type:"long"},{name:"new_value",type:"long"}],type:"ChannelAdminLogEventAction"},{id:-398136321,predicate:"messages.searchCounter",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"filter",type:"MessagesFilter"},{name:"count",type:"int"}],type:"messages.SearchCounter"},{id:-183499015,predicate:"keyboardButtonUrlAuth",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"fwd_text",type:"flags.0?string"},{name:"url",type:"string"},{name:"button_id",type:"int"}],type:"KeyboardButton"},{id:1744911986,predicate:"inputKeyboardButtonUrlAuth",params:[{name:"flags",type:"#"},{name:"request_write_access",type:"flags.0?true"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"fwd_text",type:"flags.1?string"},{name:"url",type:"string"},{name:"bot",type:"InputUser"}],type:"KeyboardButton"},{id:855293722,predicate:"urlAuthResultRequest",params:[{name:"flags",type:"#"},{name:"request_write_access",type:"flags.0?true"},{name:"request_phone_number",type:"flags.1?true"},{name:"bot",type:"User"},{name:"domain",type:"string"},{name:"browser",type:"flags.2?string"},{name:"platform",type:"flags.2?string"},{name:"ip",type:"flags.2?string"},{name:"region",type:"flags.2?string"}],type:"UrlAuthResult"},{id:1648005024,predicate:"urlAuthResultAccepted",params:[{name:"flags",type:"#"},{name:"url",type:"flags.0?string"}],type:"UrlAuthResult"},{id:-1445536993,predicate:"urlAuthResultDefault",params:[],type:"UrlAuthResult"},{id:-2079962673,predicate:"inputPrivacyValueAllowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"InputPrivacyRule"},{id:-380694650,predicate:"inputPrivacyValueDisallowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"InputPrivacyRule"},{id:1796427406,predicate:"privacyValueAllowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"PrivacyRule"},{id:1103656293,predicate:"privacyValueDisallowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"PrivacyRule"},{id:-1672577397,predicate:"messageEntityUnderline",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1090087980,predicate:"messageEntityStrike",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1786671974,predicate:"updatePeerSettings",params:[{name:"peer",type:"Peer"},{name:"settings",type:"PeerSettings"}],type:"Update"},{id:-1078612597,predicate:"channelLocationEmpty",params:[],type:"ChannelLocation"},{id:547062491,predicate:"channelLocation",params:[{name:"geo_point",type:"GeoPoint"},{name:"address",type:"string"}],type:"ChannelLocation"},{id:-901375139,predicate:"peerLocated",params:[{name:"peer",type:"Peer"},{name:"expires",type:"int"},{name:"distance",type:"int"}],type:"PeerLocated"},{id:-1263546448,predicate:"updatePeerLocated",params:[{name:"peers",type:"Vector<PeerLocated>"}],type:"Update"},{id:241923758,predicate:"channelAdminLogEventActionChangeLocation",params:[{name:"prev_value",type:"ChannelLocation"},{name:"new_value",type:"ChannelLocation"}],type:"ChannelAdminLogEventAction"},{id:-606798099,predicate:"inputReportReasonGeoIrrelevant",params:[],type:"ReportReason"},{id:1401984889,predicate:"channelAdminLogEventActionToggleSlowMode",params:[{name:"prev_value",type:"int"},{name:"new_value",type:"int"}],type:"ChannelAdminLogEventAction"},{id:1148485274,predicate:"auth.authorizationSignUpRequired",params:[{name:"flags",type:"#"},{name:"terms_of_service",type:"flags.0?help.TermsOfService"}],type:"auth.Authorization"},{id:-666824391,predicate:"payments.paymentVerificationNeeded",params:[{name:"url",type:"string"}],type:"payments.PaymentResult"},{id:42402760,predicate:"inputStickerSetAnimatedEmoji",params:[],type:"InputStickerSet"},{id:967122427,predicate:"updateNewScheduledMessage",params:[{name:"message",type:"Message"}],type:"Update"},{id:-223929981,predicate:"updateDeleteScheduledMessages",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"},{name:"sent_messages",type:"flags.0?Vector<int>"}],type:"Update"},{id:-797791052,predicate:"restrictionReason",params:[{name:"platform",type:"string"},{name:"reason",type:"string"},{name:"text",type:"string"}],type:"RestrictionReason"},{id:1012306921,predicate:"inputTheme",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputTheme"},{id:-175567375,predicate:"inputThemeSlug",params:[{name:"slug",type:"string"}],type:"InputTheme"},{id:-1609668650,predicate:"theme",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"for_chat",type:"flags.5?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"slug",type:"string"},{name:"title",type:"string"},{name:"document",type:"flags.2?Document"},{name:"settings",type:"flags.3?Vector<ThemeSettings>"},{name:"emoticon",type:"flags.6?string"},{name:"installs_count",type:"flags.4?int"}],type:"Theme"},{id:-199313886,predicate:"account.themesNotModified",params:[],type:"account.Themes"},{id:-1707242387,predicate:"account.themes",params:[{name:"hash",type:"long"},{name:"themes",type:"Vector<Theme>"}],type:"account.Themes"},{id:-2112423005,predicate:"updateTheme",params:[{name:"theme",type:"Theme"}],type:"Update"},{id:-786326563,predicate:"inputPrivacyKeyAddedByPhone",params:[],type:"InputPrivacyKey"},{id:1124062251,predicate:"privacyKeyAddedByPhone",params:[],type:"PrivacyKey"},{id:-2027964103,predicate:"updateGeoLiveViewed",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"}],type:"Update"},{id:1448076945,predicate:"updateLoginToken",params:[],type:"Update"},{id:1654593920,predicate:"auth.loginToken",params:[{name:"expires",type:"int"},{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:110008598,predicate:"auth.loginTokenMigrateTo",params:[{name:"dc_id",type:"int"},{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:957176926,predicate:"auth.loginTokenSuccess",params:[{name:"authorization",type:"auth.Authorization"}],type:"auth.LoginToken"},{id:1474462241,predicate:"account.contentSettings",params:[{name:"flags",type:"#"},{name:"sensitive_enabled",type:"flags.0?true"},{name:"sensitive_can_change",type:"flags.1?true"}],type:"account.ContentSettings"},{id:-1456996667,predicate:"messages.inactiveChats",params:[{name:"dates",type:"Vector<int>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.InactiveChats"},{id:-1012849566,predicate:"baseThemeClassic",params:[],type:"BaseTheme"},{id:-69724536,predicate:"baseThemeDay",params:[],type:"BaseTheme"},{id:-1212997976,predicate:"baseThemeNight",params:[],type:"BaseTheme"},{id:1834973166,predicate:"baseThemeTinted",params:[],type:"BaseTheme"},{id:1527845466,predicate:"baseThemeArctic",params:[],type:"BaseTheme"},{id:-1770371538,predicate:"inputWallPaperNoFile",params:[{name:"id",type:"long"}],type:"InputWallPaper"},{id:-528465642,predicate:"wallPaperNoFile",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"default",type:"flags.1?true"},{name:"dark",type:"flags.4?true"},{name:"settings",type:"flags.2?WallPaperSettings"}],type:"WallPaper"},{id:-1881255857,predicate:"inputThemeSettings",params:[{name:"flags",type:"#"},{name:"message_colors_animated",type:"flags.2?true"},{name:"base_theme",type:"BaseTheme"},{name:"accent_color",type:"int"},{name:"outbox_accent_color",type:"flags.3?int"},{name:"message_colors",type:"flags.0?Vector<int>"},{name:"wallpaper",type:"flags.1?InputWallPaper"},{name:"wallpaper_settings",type:"flags.1?WallPaperSettings"}],type:"InputThemeSettings"},{id:-94849324,predicate:"themeSettings",params:[{name:"flags",type:"#"},{name:"message_colors_animated",type:"flags.2?true"},{name:"base_theme",type:"BaseTheme"},{name:"accent_color",type:"int"},{name:"outbox_accent_color",type:"flags.3?int"},{name:"message_colors",type:"flags.0?Vector<int>"},{name:"wallpaper",type:"flags.1?WallPaper"}],type:"ThemeSettings"},{id:1421174295,predicate:"webPageAttributeTheme",params:[{name:"flags",type:"#"},{name:"documents",type:"flags.0?Vector<Document>"},{name:"settings",type:"flags.1?ThemeSettings"}],type:"WebPageAttribute"},{id:619974263,predicate:"updateMessagePollVote",params:[{name:"poll_id",type:"long"},{name:"peer",type:"Peer"},{name:"options",type:"Vector<bytes>"},{name:"qts",type:"int"}],type:"Update"},{id:1218005070,predicate:"messages.votesList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"votes",type:"Vector<MessagePeerVote>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"messages.VotesList"},{id:2047989634,predicate:"keyboardButtonRequestPoll",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"quiz",type:"flags.0?Bool"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:1981704948,predicate:"messageEntityBankCard",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-177732982,predicate:"bankCardOpenUrl",params:[{name:"url",type:"string"},{name:"name",type:"string"}],type:"BankCardOpenUrl"},{id:1042605427,predicate:"payments.bankCardData",params:[{name:"title",type:"string"},{name:"open_urls",type:"Vector<BankCardOpenUrl>"}],type:"payments.BankCardData"},{id:-118740917,predicate:"peerSelfLocated",params:[{name:"expires",type:"int"}],type:"PeerLocated"},{id:-1438177711,predicate:"dialogFilter",params:[{name:"flags",type:"#"},{name:"contacts",type:"flags.0?true"},{name:"non_contacts",type:"flags.1?true"},{name:"groups",type:"flags.2?true"},{name:"broadcasts",type:"flags.3?true"},{name:"bots",type:"flags.4?true"},{name:"exclude_muted",type:"flags.11?true"},{name:"exclude_read",type:"flags.12?true"},{name:"exclude_archived",type:"flags.13?true"},{name:"title_noanimate",type:"flags.28?true"},{name:"id",type:"int"},{name:"title",type:"TextWithEntities"},{name:"emoticon",type:"flags.25?string"},{name:"color",type:"flags.27?int"},{name:"pinned_peers",type:"Vector<InputPeer>"},{name:"include_peers",type:"Vector<InputPeer>"},{name:"exclude_peers",type:"Vector<InputPeer>"}],type:"DialogFilter"},{id:2004110666,predicate:"dialogFilterSuggested",params:[{name:"filter",type:"DialogFilter"},{name:"description",type:"string"}],type:"DialogFilterSuggested"},{id:654302845,predicate:"updateDialogFilter",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"filter",type:"flags.0?DialogFilter"}],type:"Update"},{id:-1512627963,predicate:"updateDialogFilterOrder",params:[{name:"order",type:"Vector<int>"}],type:"Update"},{id:889491791,predicate:"updateDialogFilters",params:[],type:"Update"},{id:-1237848657,predicate:"statsDateRangeDays",params:[{name:"min_date",type:"int"},{name:"max_date",type:"int"}],type:"StatsDateRangeDays"},{id:-884757282,predicate:"statsAbsValueAndPrev",params:[{name:"current",type:"double"},{name:"previous",type:"double"}],type:"StatsAbsValueAndPrev"},{id:-875679776,predicate:"statsPercentValue",params:[{name:"part",type:"double"},{name:"total",type:"double"}],type:"StatsPercentValue"},{id:1244130093,predicate:"statsGraphAsync",params:[{name:"token",type:"string"}],type:"StatsGraph"},{id:-1092839390,predicate:"statsGraphError",params:[{name:"error",type:"string"}],type:"StatsGraph"},{id:-1901828938,predicate:"statsGraph",params:[{name:"flags",type:"#"},{name:"json",type:"DataJSON"},{name:"zoom_token",type:"flags.0?string"}],type:"StatsGraph"},{id:963421692,predicate:"stats.broadcastStats",params:[{name:"period",type:"StatsDateRangeDays"},{name:"followers",type:"StatsAbsValueAndPrev"},{name:"views_per_post",type:"StatsAbsValueAndPrev"},{name:"shares_per_post",type:"StatsAbsValueAndPrev"},{name:"reactions_per_post",type:"StatsAbsValueAndPrev"},{name:"views_per_story",type:"StatsAbsValueAndPrev"},{name:"shares_per_story",type:"StatsAbsValueAndPrev"},{name:"reactions_per_story",type:"StatsAbsValueAndPrev"},{name:"enabled_notifications",type:"StatsPercentValue"},{name:"growth_graph",type:"StatsGraph"},{name:"followers_graph",type:"StatsGraph"},{name:"mute_graph",type:"StatsGraph"},{name:"top_hours_graph",type:"StatsGraph"},{name:"interactions_graph",type:"StatsGraph"},{name:"iv_interactions_graph",type:"StatsGraph"},{name:"views_by_source_graph",type:"StatsGraph"},{name:"new_followers_by_source_graph",type:"StatsGraph"},{name:"languages_graph",type:"StatsGraph"},{name:"reactions_by_emotion_graph",type:"StatsGraph"},{name:"story_interactions_graph",type:"StatsGraph"},{name:"story_reactions_by_emotion_graph",type:"StatsGraph"},{name:"recent_posts_interactions",type:"Vector<PostInteractionCounters>"}],type:"stats.BroadcastStats"},{id:-428884101,predicate:"inputMediaDice",params:[{name:"emoticon",type:"string"}],type:"InputMedia"},{id:147581959,predicate:"messageMediaDice",params:[{name:"flags",type:"#"},{name:"value",type:"int"},{name:"emoticon",type:"string"},{name:"game_outcome",type:"flags.0?messages.EmojiGameOutcome"}],type:"MessageMedia"},{id:-427863538,predicate:"inputStickerSetDice",params:[{name:"emoticon",type:"string"}],type:"InputStickerSet"},{id:-1728664459,predicate:"help.promoDataEmpty",params:[{name:"expires",type:"int"}],type:"help.PromoData"},{id:145021050,predicate:"help.promoData",params:[{name:"flags",type:"#"},{name:"proxy",type:"flags.0?true"},{name:"expires",type:"int"},{name:"peer",type:"flags.3?Peer"},{name:"psa_type",type:"flags.1?string"},{name:"psa_message",type:"flags.2?string"},{name:"pending_suggestions",type:"Vector<string>"},{name:"dismissed_suggestions",type:"Vector<string>"},{name:"custom_pending_suggestion",type:"flags.4?PendingSuggestion"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"help.PromoData"},{id:-567037804,predicate:"videoSize",params:[{name:"flags",type:"#"},{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"size",type:"int"},{name:"video_start_ts",type:"flags.0?double"}],type:"VideoSize"},{id:643940105,predicate:"updatePhoneCallSignalingData",params:[{name:"phone_call_id",type:"long"},{name:"data",type:"bytes"}],type:"Update"},{id:1634294960,predicate:"chatInvitePeek",params:[{name:"chat",type:"Chat"},{name:"expires",type:"int"}],type:"ChatInvite"},{id:-1660637285,predicate:"statsGroupTopPoster",params:[{name:"user_id",type:"long"},{name:"messages",type:"int"},{name:"avg_chars",type:"int"}],type:"StatsGroupTopPoster"},{id:-682079097,predicate:"statsGroupTopAdmin",params:[{name:"user_id",type:"long"},{name:"deleted",type:"int"},{name:"kicked",type:"int"},{name:"banned",type:"int"}],type:"StatsGroupTopAdmin"},{id:1398765469,predicate:"statsGroupTopInviter",params:[{name:"user_id",type:"long"},{name:"invitations",type:"int"}],type:"StatsGroupTopInviter"},{id:-276825834,predicate:"stats.megagroupStats",params:[{name:"period",type:"StatsDateRangeDays"},{name:"members",type:"StatsAbsValueAndPrev"},{name:"messages",type:"StatsAbsValueAndPrev"},{name:"viewers",type:"StatsAbsValueAndPrev"},{name:"posters",type:"StatsAbsValueAndPrev"},{name:"growth_graph",type:"StatsGraph"},{name:"members_graph",type:"StatsGraph"},{name:"new_members_by_source_graph",type:"StatsGraph"},{name:"languages_graph",type:"StatsGraph"},{name:"messages_graph",type:"StatsGraph"},{name:"actions_graph",type:"StatsGraph"},{name:"top_hours_graph",type:"StatsGraph"},{name:"weekdays_graph",type:"StatsGraph"},{name:"top_posters",type:"Vector<StatsGroupTopPoster>"},{name:"top_admins",type:"Vector<StatsGroupTopAdmin>"},{name:"top_inviters",type:"Vector<StatsGroupTopInviter>"},{name:"users",type:"Vector<User>"}],type:"stats.MegagroupStats"},{id:-29248689,predicate:"globalPrivacySettings",params:[{name:"flags",type:"#"},{name:"archive_and_mute_new_noncontact_peers",type:"flags.0?true"},{name:"keep_archived_unmuted",type:"flags.1?true"},{name:"keep_archived_folders",type:"flags.2?true"},{name:"hide_read_marks",type:"flags.3?true"},{name:"new_noncontact_peers_require_premium",type:"flags.4?true"},{name:"display_gifts_button",type:"flags.7?true"},{name:"noncontact_peers_paid_stars",type:"flags.5?long"},{name:"disallowed_gifts",type:"flags.6?DisallowedGiftsSettings"}],type:"GlobalPrivacySettings"},{id:1667228533,predicate:"phoneConnectionWebrtc",params:[{name:"flags",type:"#"},{name:"turn",type:"flags.0?true"},{name:"stun",type:"flags.1?true"},{name:"id",type:"long"},{name:"ip",type:"string"},{name:"ipv6",type:"string"},{name:"port",type:"int"},{name:"username",type:"string"},{name:"password",type:"string"}],type:"PhoneConnection"},{id:1107543535,predicate:"help.countryCode",params:[{name:"flags",type:"#"},{name:"country_code",type:"string"},{name:"prefixes",type:"flags.0?Vector<string>"},{name:"patterns",type:"flags.1?Vector<string>"}],type:"help.CountryCode"},{id:-1014526429,predicate:"help.country",params:[{name:"flags",type:"#"},{name:"hidden",type:"flags.0?true"},{name:"iso2",type:"string"},{name:"default_name",type:"string"},{name:"name",type:"flags.1?string"},{name:"country_codes",type:"Vector<help.CountryCode>"}],type:"help.Country"},{id:-1815339214,predicate:"help.countriesListNotModified",params:[],type:"help.CountriesList"},{id:-2016381538,predicate:"help.countriesList",params:[{name:"countries",type:"Vector<help.Country>"},{name:"hash",type:"int"}],type:"help.CountriesList"},{id:1163625789,predicate:"messageViews",params:[{name:"flags",type:"#"},{name:"views",type:"flags.0?int"},{name:"forwards",type:"flags.1?int"},{name:"replies",type:"flags.2?MessageReplies"}],type:"MessageViews"},{id:-761649164,predicate:"updateChannelMessageForwards",params:[{name:"channel_id",type:"long"},{name:"id",type:"int"},{name:"forwards",type:"int"}],type:"Update"},{id:-96535659,predicate:"photoSizeProgressive",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"sizes",type:"Vector<int>"}],type:"PhotoSize"},{id:-1228606141,predicate:"messages.messageViews",params:[{name:"views",type:"Vector<MessageViews>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.MessageViews"},{id:-693004986,predicate:"updateReadChannelDiscussionInbox",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"int"},{name:"read_max_id",type:"int"},{name:"broadcast_id",type:"flags.0?long"},{name:"broadcast_post",type:"flags.0?int"}],type:"Update"},{id:1767677564,predicate:"updateReadChannelDiscussionOutbox",params:[{name:"channel_id",type:"long"},{name:"top_msg_id",type:"int"},{name:"read_max_id",type:"int"}],type:"Update"},{id:-1506535550,predicate:"messages.discussionMessage",params:[{name:"flags",type:"#"},{name:"messages",type:"Vector<Message>"},{name:"max_id",type:"flags.0?int"},{name:"read_inbox_max_id",type:"flags.1?int"},{name:"read_outbox_max_id",type:"flags.2?int"},{name:"unread_count",type:"int"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.DiscussionMessage"},{id:1763137035,predicate:"messageReplyHeader",params:[{name:"flags",type:"#"},{name:"reply_to_scheduled",type:"flags.2?true"},{name:"forum_topic",type:"flags.3?true"},{name:"quote",type:"flags.9?true"},{name:"reply_to_msg_id",type:"flags.4?int"},{name:"reply_to_peer_id",type:"flags.0?Peer"},{name:"reply_from",type:"flags.5?MessageFwdHeader"},{name:"reply_media",type:"flags.8?MessageMedia"},{name:"reply_to_top_id",type:"flags.1?int"},{name:"quote_text",type:"flags.6?string"},{name:"quote_entities",type:"flags.7?Vector<MessageEntity>"},{name:"quote_offset",type:"flags.10?int"},{name:"todo_item_id",type:"flags.11?int"}],type:"MessageReplyHeader"},{id:-2083123262,predicate:"messageReplies",params:[{name:"flags",type:"#"},{name:"comments",type:"flags.0?true"},{name:"replies",type:"int"},{name:"replies_pts",type:"int"},{name:"recent_repliers",type:"flags.1?Vector<Peer>"},{name:"channel_id",type:"flags.0?long"},{name:"max_id",type:"flags.2?int"},{name:"read_max_id",type:"flags.3?int"}],type:"MessageReplies"},{id:-337610926,predicate:"updatePeerBlocked",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"blocked_my_stories_from",type:"flags.1?true"},{name:"peer_id",type:"Peer"}],type:"Update"},{id:-386039788,predicate:"peerBlocked",params:[{name:"peer_id",type:"Peer"},{name:"date",type:"int"}],type:"PeerBlocked"},{id:-1937192669,predicate:"updateChannelUserTyping",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"flags.0?int"},{name:"from_id",type:"Peer"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:-1392895362,predicate:"inputMessageCallbackQuery",params:[{name:"id",type:"int"},{name:"query_id",type:"long"}],type:"InputMessage"},{id:453242886,predicate:"channelParticipantLeft",params:[{name:"peer",type:"Peer"}],type:"ChannelParticipant"},{id:-531931925,predicate:"channelParticipantsMentions",params:[{name:"flags",type:"#"},{name:"q",type:"flags.0?string"},{name:"top_msg_id",type:"flags.1?int"}],type:"ChannelParticipantsFilter"},{id:-309990731,predicate:"updatePinnedMessages",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1538885128,predicate:"updatePinnedChannelMessages",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:464520273,predicate:"inputMessagesFilterPinned",params:[],type:"MessagesFilter"},{id:2145983508,predicate:"stats.messageStats",params:[{name:"views_graph",type:"StatsGraph"},{name:"reactions_by_emotion_graph",type:"StatsGraph"}],type:"stats.MessageStats"},{id:-1730095465,predicate:"messageActionGeoProximityReached",params:[{name:"from_id",type:"Peer"},{name:"to_id",type:"Peer"},{name:"distance",type:"int"}],type:"MessageAction"},{id:-668906175,predicate:"photoPathSize",params:[{name:"type",type:"string"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:-651419003,predicate:"speakingInGroupCallAction",params:[],type:"SendMessageAction"},{id:2004925620,predicate:"groupCallDiscarded",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"duration",type:"int"}],type:"GroupCall"},{id:-273500649,predicate:"groupCall",params:[{name:"flags",type:"#"},{name:"join_muted",type:"flags.1?true"},{name:"can_change_join_muted",type:"flags.2?true"},{name:"join_date_asc",type:"flags.6?true"},{name:"schedule_start_subscribed",type:"flags.8?true"},{name:"can_start_video",type:"flags.9?true"},{name:"record_video_active",type:"flags.11?true"},{name:"rtmp_stream",type:"flags.12?true"},{name:"listeners_hidden",type:"flags.13?true"},{name:"conference",type:"flags.14?true"},{name:"creator",type:"flags.15?true"},{name:"messages_enabled",type:"flags.17?true"},{name:"can_change_messages_enabled",type:"flags.18?true"},{name:"min",type:"flags.19?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"participants_count",type:"int"},{name:"title",type:"flags.3?string"},{name:"stream_dc_id",type:"flags.4?int"},{name:"record_start_date",type:"flags.5?int"},{name:"schedule_date",type:"flags.7?int"},{name:"unmuted_video_count",type:"flags.10?int"},{name:"unmuted_video_limit",type:"int"},{name:"version",type:"int"},{name:"invite_link",type:"flags.16?string"},{name:"send_paid_messages_stars",type:"flags.20?long"},{name:"default_send_as",type:"flags.21?Peer"}],type:"GroupCall"},{id:-659913713,predicate:"inputGroupCall",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputGroupCall"},{id:2047704898,predicate:"messageActionGroupCall",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"duration",type:"flags.0?int"}],type:"MessageAction"},{id:1345295095,predicate:"messageActionInviteToGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:708691884,predicate:"groupCallParticipant",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"left",type:"flags.1?true"},{name:"can_self_unmute",type:"flags.2?true"},{name:"just_joined",type:"flags.4?true"},{name:"versioned",type:"flags.5?true"},{name:"min",type:"flags.8?true"},{name:"muted_by_you",type:"flags.9?true"},{name:"volume_by_admin",type:"flags.10?true"},{name:"self",type:"flags.12?true"},{name:"video_joined",type:"flags.15?true"},{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"active_date",type:"flags.3?int"},{name:"source",type:"int"},{name:"volume",type:"flags.7?int"},{name:"about",type:"flags.11?string"},{name:"raise_hand_rating",type:"flags.13?long"},{name:"video",type:"flags.6?GroupCallParticipantVideo"},{name:"presentation",type:"flags.14?GroupCallParticipantVideo"},{name:"paid_stars_total",type:"flags.16?long"}],type:"GroupCallParticipant"},{id:-124097970,predicate:"updateChat",params:[{name:"chat_id",type:"long"}],type:"Update"},{id:-219423922,predicate:"updateGroupCallParticipants",params:[{name:"call",type:"InputGroupCall"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"version",type:"int"}],type:"Update"},{id:-1658710304,predicate:"updateGroupCall",params:[{name:"flags",type:"#"},{name:"live_story",type:"flags.2?true"},{name:"peer",type:"flags.1?Peer"},{name:"call",type:"GroupCall"}],type:"Update"},{id:-1636664659,predicate:"phone.groupCall",params:[{name:"call",type:"GroupCall"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"participants_next_offset",type:"string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.GroupCall"},{id:-193506890,predicate:"phone.groupParticipants",params:[{name:"count",type:"int"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"next_offset",type:"string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"version",type:"int"}],type:"phone.GroupParticipants"},{id:813821341,predicate:"inlineQueryPeerTypeSameBotPM",params:[],type:"InlineQueryPeerType"},{id:-2093215828,predicate:"inlineQueryPeerTypePM",params:[],type:"InlineQueryPeerType"},{id:-681130742,predicate:"inlineQueryPeerTypeChat",params:[],type:"InlineQueryPeerType"},{id:1589952067,predicate:"inlineQueryPeerTypeMegagroup",params:[],type:"InlineQueryPeerType"},{id:1664413338,predicate:"inlineQueryPeerTypeBroadcast",params:[],type:"InlineQueryPeerType"},{id:589338437,predicate:"channelAdminLogEventActionStartGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"ChannelAdminLogEventAction"},{id:-610299584,predicate:"channelAdminLogEventActionDiscardGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"ChannelAdminLogEventAction"},{id:-115071790,predicate:"channelAdminLogEventActionParticipantMute",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:-431740480,predicate:"channelAdminLogEventActionParticipantUnmute",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:1456906823,predicate:"channelAdminLogEventActionToggleGroupCallSetting",params:[{name:"join_muted",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-1966921727,predicate:"inputPaymentCredentialsGooglePay",params:[{name:"payment_token",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:375566091,predicate:"messages.historyImport",params:[{name:"id",type:"long"}],type:"messages.HistoryImport"},{id:-606432698,predicate:"sendMessageHistoryImportAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:1578088377,predicate:"messages.historyImportParsed",params:[{name:"flags",type:"#"},{name:"pm",type:"flags.0?true"},{name:"group",type:"flags.1?true"},{name:"title",type:"flags.2?string"}],type:"messages.HistoryImportParsed"},{id:-170010905,predicate:"inputReportReasonFake",params:[],type:"ReportReason"},{id:-275956116,predicate:"messages.affectedFoundMessages",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"offset",type:"int"},{name:"messages",type:"Vector<int>"}],type:"messages.AffectedFoundMessages"},{id:1007897979,predicate:"messageActionSetMessagesTTL",params:[{name:"flags",type:"#"},{name:"period",type:"int"},{name:"auto_setting_from",type:"flags.0?long"}],type:"MessageAction"},{id:-1147422299,predicate:"updatePeerHistoryTTL",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"ttl_period",type:"flags.0?int"}],type:"Update"},{id:-796432838,predicate:"updateChatParticipant",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"date",type:"int"},{name:"actor_id",type:"long"},{name:"user_id",type:"long"},{name:"prev_participant",type:"flags.0?ChatParticipant"},{name:"new_participant",type:"flags.1?ChatParticipant"},{name:"invite",type:"flags.2?ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-1738720581,predicate:"updateChannelParticipant",params:[{name:"flags",type:"#"},{name:"via_chatlist",type:"flags.3?true"},{name:"channel_id",type:"long"},{name:"date",type:"int"},{name:"actor_id",type:"long"},{name:"user_id",type:"long"},{name:"prev_participant",type:"flags.0?ChannelParticipant"},{name:"new_participant",type:"flags.1?ChannelParticipant"},{name:"invite",type:"flags.2?ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-997782967,predicate:"updateBotStopped",params:[{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"stopped",type:"Bool"},{name:"qts",type:"int"}],type:"Update"},{id:-1940201511,predicate:"chatInviteImporter",params:[{name:"flags",type:"#"},{name:"requested",type:"flags.0?true"},{name:"via_chatlist",type:"flags.3?true"},{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"about",type:"flags.2?string"},{name:"approved_by",type:"flags.1?long"}],type:"ChatInviteImporter"},{id:-1111085620,predicate:"messages.exportedChatInvites",params:[{name:"count",type:"int"},{name:"invites",type:"Vector<ExportedChatInvite>"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvites"},{id:410107472,predicate:"messages.exportedChatInvite",params:[{name:"invite",type:"ExportedChatInvite"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvite"},{id:572915951,predicate:"messages.exportedChatInviteReplaced",params:[{name:"invite",type:"ExportedChatInvite"},{name:"new_invite",type:"ExportedChatInvite"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvite"},{id:-2118733814,predicate:"messages.chatInviteImporters",params:[{name:"count",type:"int"},{name:"importers",type:"Vector<ChatInviteImporter>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatInviteImporters"},{id:-219353309,predicate:"chatAdminWithInvites",params:[{name:"admin_id",type:"long"},{name:"invites_count",type:"int"},{name:"revoked_invites_count",type:"int"}],type:"ChatAdminWithInvites"},{id:-1231326505,predicate:"messages.chatAdminsWithInvites",params:[{name:"admins",type:"Vector<ChatAdminWithInvites>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatAdminsWithInvites"},{id:-23084712,predicate:"channelAdminLogEventActionParticipantJoinByInvite",params:[{name:"flags",type:"#"},{name:"via_chatlist",type:"flags.0?true"},{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1515256996,predicate:"channelAdminLogEventActionExportedInviteDelete",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1091179342,predicate:"channelAdminLogEventActionExportedInviteRevoke",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:-384910503,predicate:"channelAdminLogEventActionExportedInviteEdit",params:[{name:"prev_invite",type:"ExportedChatInvite"},{name:"new_invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1048537159,predicate:"channelAdminLogEventActionParticipantVolume",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:1855199800,predicate:"channelAdminLogEventActionChangeHistoryTTL",params:[{name:"prev_value",type:"int"},{name:"new_value",type:"int"}],type:"ChannelAdminLogEventAction"},{id:-1571952873,predicate:"messages.checkedHistoryImportPeer",params:[{name:"confirm_text",type:"string"}],type:"messages.CheckedHistoryImportPeer"},{id:93890858,predicate:"inputGroupCallStream",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"time_ms",type:"long"},{name:"scale",type:"int"},{name:"video_channel",type:"flags.0?int"},{name:"video_quality",type:"flags.0?int"}],type:"InputFileLocation"},{id:-1343921601,predicate:"phone.joinAsPeers",params:[{name:"peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.JoinAsPeers"},{id:541839704,predicate:"phone.exportedGroupCallInvite",params:[{name:"link",type:"string"}],type:"phone.ExportedGroupCallInvite"},{id:-672693723,predicate:"inputBotInlineMessageMediaInvoice",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?InputWebDocument"},{name:"invoice",type:"Invoice"},{name:"payload",type:"bytes"},{name:"provider",type:"string"},{name:"provider_data",type:"DataJSON"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:894081801,predicate:"botInlineMessageMediaInvoice",params:[{name:"flags",type:"#"},{name:"shipping_address_requested",type:"flags.1?true"},{name:"test",type:"flags.3?true"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?WebDocument"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1281329567,predicate:"messageActionGroupCallScheduled",params:[{name:"call",type:"InputGroupCall"},{name:"schedule_date",type:"int"}],type:"MessageAction"},{id:-592373577,predicate:"groupCallParticipantVideoSourceGroup",params:[{name:"semantics",type:"string"},{name:"sources",type:"Vector<int>"}],type:"GroupCallParticipantVideoSourceGroup"},{id:1735736008,predicate:"groupCallParticipantVideo",params:[{name:"flags",type:"#"},{name:"paused",type:"flags.0?true"},{name:"endpoint",type:"string"},{name:"source_groups",type:"Vector<GroupCallParticipantVideoSourceGroup>"},{name:"audio_source",type:"flags.1?int"}],type:"GroupCallParticipantVideo"},{id:192428418,predicate:"updateGroupCallConnection",params:[{name:"flags",type:"#"},{name:"presentation",type:"flags.0?true"},{name:"params",type:"DataJSON"}],type:"Update"},{id:-2046910401,predicate:"stickers.suggestedShortName",params:[{name:"short_name",type:"string"}],type:"stickers.SuggestedShortName"},{id:795652779,predicate:"botCommandScopeDefault",params:[],type:"BotCommandScope"},{id:1011811544,predicate:"botCommandScopeUsers",params:[],type:"BotCommandScope"},{id:1877059713,predicate:"botCommandScopeChats",params:[],type:"BotCommandScope"},{id:-1180016534,predicate:"botCommandScopeChatAdmins",params:[],type:"BotCommandScope"},{id:-610432643,predicate:"botCommandScopePeer",params:[{name:"peer",type:"InputPeer"}],type:"BotCommandScope"},{id:1071145937,predicate:"botCommandScopePeerAdmins",params:[{name:"peer",type:"InputPeer"}],type:"BotCommandScope"},{id:169026035,predicate:"botCommandScopePeerUser",params:[{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"BotCommandScope"},{id:-478701471,predicate:"account.resetPasswordFailedWait",params:[{name:"retry_date",type:"int"}],type:"account.ResetPasswordResult"},{id:-370148227,predicate:"account.resetPasswordRequestedWait",params:[{name:"until_date",type:"int"}],type:"account.ResetPasswordResult"},{id:-383330754,predicate:"account.resetPasswordOk",params:[],type:"account.ResetPasswordResult"},{id:1299263278,predicate:"updateBotCommands",params:[{name:"peer",type:"Peer"},{name:"bot_id",type:"long"},{name:"commands",type:"Vector<BotCommand>"}],type:"Update"},{id:-1008731132,predicate:"chatTheme",params:[{name:"emoticon",type:"string"}],type:"ChatTheme"},{id:-535699004,predicate:"account.chatThemesNotModified",params:[],type:"account.ChatThemes"},{id:-1106673293,predicate:"account.chatThemes",params:[{name:"flags",type:"#"},{name:"hash",type:"long"},{name:"themes",type:"Vector<ChatTheme>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"account.ChatThemes"},{id:-1189364422,predicate:"messageActionSetChatTheme",params:[{name:"theme",type:"ChatTheme"}],type:"MessageAction"},{id:-1336228175,predicate:"sendMessageChooseStickerAction",params:[],type:"SendMessageAction"},{id:2109703795,predicate:"sponsoredMessage",params:[{name:"flags",type:"#"},{name:"recommended",type:"flags.5?true"},{name:"can_report",type:"flags.12?true"},{name:"random_id",type:"bytes"},{name:"url",type:"string"},{name:"title",type:"string"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"photo",type:"flags.6?Photo"},{name:"media",type:"flags.14?MessageMedia"},{name:"color",type:"flags.13?PeerColor"},{name:"button_text",type:"string"},{name:"sponsor_info",type:"flags.7?string"},{name:"additional_info",type:"flags.8?string"},{name:"min_display_duration",type:"flags.15?int"},{name:"max_display_duration",type:"flags.15?int"}],type:"SponsoredMessage"},{id:-2464403,predicate:"messages.sponsoredMessages",params:[{name:"flags",type:"#"},{name:"posts_between",type:"flags.0?int"},{name:"start_delay",type:"flags.1?int"},{name:"between_delay",type:"flags.2?int"},{name:"messages",type:"Vector<SponsoredMessage>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SponsoredMessages"},{id:215889721,predicate:"inputStickerSetAnimatedEmojiAnimations",params:[],type:"InputStickerSet"},{id:630664139,predicate:"sendMessageEmojiInteraction",params:[{name:"emoticon",type:"string"},{name:"msg_id",type:"int"},{name:"interaction",type:"DataJSON"}],type:"SendMessageAction"},{id:-1234857938,predicate:"sendMessageEmojiInteractionSeen",params:[{name:"emoticon",type:"string"}],type:"SendMessageAction"},{id:-1227287081,predicate:"inputBotInlineMessageID64",params:[{name:"dc_id",type:"int"},{name:"owner_id",type:"long"},{name:"id",type:"int"},{name:"access_hash",type:"long"}],type:"InputBotInlineMessageID"},{id:-911191137,predicate:"searchResultsCalendarPeriod",params:[{name:"date",type:"int"},{name:"min_msg_id",type:"int"},{name:"max_msg_id",type:"int"},{name:"count",type:"int"}],type:"SearchResultsCalendarPeriod"},{id:343859772,predicate:"messages.searchResultsCalendar",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.0?true"},{name:"count",type:"int"},{name:"min_date",type:"int"},{name:"min_msg_id",type:"int"},{name:"offset_id_offset",type:"flags.1?int"},{name:"periods",type:"Vector<SearchResultsCalendarPeriod>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SearchResultsCalendar"},{id:2137295719,predicate:"searchResultPosition",params:[{name:"msg_id",type:"int"},{name:"date",type:"int"},{name:"offset",type:"int"}],type:"SearchResultsPosition"},{id:1404185519,predicate:"messages.searchResultsPositions",params:[{name:"count",type:"int"},{name:"positions",type:"Vector<SearchResultsPosition>"}],type:"messages.SearchResultsPositions"},{id:-339958837,predicate:"messageActionChatJoinedByRequest",params:[],type:"MessageAction"},{id:1885586395,predicate:"updatePendingJoinRequests",params:[{name:"peer",type:"Peer"},{name:"requests_pending",type:"int"},{name:"recent_requesters",type:"Vector<long>"}],type:"Update"},{id:299870598,predicate:"updateBotChatInviteRequester",params:[{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"user_id",type:"long"},{name:"about",type:"string"},{name:"invite",type:"ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-1347021750,predicate:"channelAdminLogEventActionParticipantJoinByRequest",params:[{name:"invite",type:"ExportedChatInvite"},{name:"approved_by",type:"long"}],type:"ChannelAdminLogEventAction"},{id:2103314375,predicate:"inputKeyboardButtonUserProfile",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"user_id",type:"InputUser"}],type:"KeyboardButton"},{id:-1057137399,predicate:"keyboardButtonUserProfile",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"user_id",type:"long"}],type:"KeyboardButton"},{id:-191450938,predicate:"channels.sendAsPeers",params:[{name:"peers",type:"Vector<SendAsPeer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.SendAsPeers"},{id:-886388890,predicate:"channelAdminLogEventActionToggleNoForwards",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-738646805,predicate:"messages.stickerSetNotModified",params:[],type:"messages.StickerSet"},{id:997004590,predicate:"users.userFull",params:[{name:"full_user",type:"UserFull"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"users.UserFull"},{id:1753266509,predicate:"messages.peerSettings",params:[{name:"settings",type:"PeerSettings"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.PeerSettings"},{id:663693416,predicate:"channelAdminLogEventActionSendMessage",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:-702884114,predicate:"auth.codeTypeMissedCall",params:[],type:"auth.CodeType"},{id:-2113903484,predicate:"auth.sentCodeTypeMissedCall",params:[{name:"prefix",type:"string"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1012759713,predicate:"auth.loggedOut",params:[{name:"flags",type:"#"},{name:"future_auth_token",type:"flags.0?bytes"}],type:"auth.LoggedOut"},{id:506035194,predicate:"updateMessageReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"top_msg_id",type:"flags.0?int"},{name:"saved_peer_id",type:"flags.1?Peer"},{name:"reactions",type:"MessageReactions"}],type:"Update"},{id:-1546531968,predicate:"reactionCount",params:[{name:"flags",type:"#"},{name:"chosen_order",type:"flags.0?int"},{name:"reaction",type:"Reaction"},{name:"count",type:"int"}],type:"ReactionCount"},{id:171155211,predicate:"messageReactions",params:[{name:"flags",type:"#"},{name:"min",type:"flags.0?true"},{name:"can_see_list",type:"flags.2?true"},{name:"reactions_as_tags",type:"flags.3?true"},{name:"results",type:"Vector<ReactionCount>"},{name:"recent_reactions",type:"flags.1?Vector<MessagePeerReaction>"},{name:"top_reactors",type:"flags.4?Vector<MessageReactor>"}],type:"MessageReactions"},{id:834488621,predicate:"messages.messageReactionsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"reactions",type:"Vector<MessagePeerReaction>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"messages.MessageReactionsList"},{id:-1065882623,predicate:"availableReaction",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"premium",type:"flags.2?true"},{name:"reaction",type:"string"},{name:"title",type:"string"},{name:"static_icon",type:"Document"},{name:"appear_animation",type:"Document"},{name:"select_animation",type:"Document"},{name:"activate_animation",type:"Document"},{name:"effect_animation",type:"Document"},{name:"around_animation",type:"flags.1?Document"},{name:"center_icon",type:"flags.1?Document"}],type:"AvailableReaction"},{id:-1626924713,predicate:"messages.availableReactionsNotModified",params:[],type:"messages.AvailableReactions"},{id:1989032621,predicate:"messages.availableReactions",params:[{name:"hash",type:"int"},{name:"reactions",type:"Vector<AvailableReaction>"}],type:"messages.AvailableReactions"},{id:852137487,predicate:"messageEntitySpoiler",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1102180616,predicate:"channelAdminLogEventActionChangeAvailableReactions",params:[{name:"prev_value",type:"ChatReactions"},{name:"new_value",type:"ChatReactions"}],type:"ChannelAdminLogEventAction"},{id:-1938180548,predicate:"messagePeerReaction",params:[{name:"flags",type:"#"},{name:"big",type:"flags.0?true"},{name:"unread",type:"flags.1?true"},{name:"my",type:"flags.2?true"},{name:"peer_id",type:"Peer"},{name:"date",type:"int"},{name:"reaction",type:"Reaction"}],type:"MessagePeerReaction"},{id:-2132064081,predicate:"groupCallStreamChannel",params:[{name:"channel",type:"int"},{name:"scale",type:"int"},{name:"last_timestamp_ms",type:"long"}],type:"GroupCallStreamChannel"},{id:-790330702,predicate:"phone.groupCallStreamChannels",params:[{name:"channels",type:"Vector<GroupCallStreamChannel>"}],type:"phone.GroupCallStreamChannels"},{id:177124030,predicate:"inputReportReasonIllegalDrugs",params:[],type:"ReportReason"},{id:-1631091139,predicate:"inputReportReasonPersonalDetails",params:[],type:"ReportReason"},{id:767505458,predicate:"phone.groupCallStreamRtmpUrl",params:[{name:"url",type:"string"},{name:"key",type:"string"}],type:"phone.GroupCallStreamRtmpUrl"},{id:1165423600,predicate:"attachMenuBotIconColor",params:[{name:"name",type:"string"},{name:"color",type:"int"}],type:"AttachMenuBotIconColor"},{id:-1297663893,predicate:"attachMenuBotIcon",params:[{name:"flags",type:"#"},{name:"name",type:"string"},{name:"icon",type:"Document"},{name:"colors",type:"flags.0?Vector<AttachMenuBotIconColor>"}],type:"AttachMenuBotIcon"},{id:-653423106,predicate:"attachMenuBot",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"has_settings",type:"flags.1?true"},{name:"request_write_access",type:"flags.2?true"},{name:"show_in_attach_menu",type:"flags.3?true"},{name:"show_in_side_menu",type:"flags.4?true"},{name:"side_menu_disclaimer_needed",type:"flags.5?true"},{name:"bot_id",type:"long"},{name:"short_name",type:"string"},{name:"peer_types",type:"flags.3?Vector<AttachMenuPeerType>"},{name:"icons",type:"Vector<AttachMenuBotIcon>"}],type:"AttachMenuBot"},{id:-237467044,predicate:"attachMenuBotsNotModified",params:[],type:"AttachMenuBots"},{id:1011024320,predicate:"attachMenuBots",params:[{name:"hash",type:"long"},{name:"bots",type:"Vector<AttachMenuBot>"},{name:"users",type:"Vector<User>"}],type:"AttachMenuBots"},{id:-1816172929,predicate:"attachMenuBotsBot",params:[{name:"bot",type:"AttachMenuBot"},{name:"users",type:"Vector<User>"}],type:"AttachMenuBotsBot"},{id:397910539,predicate:"updateAttachMenuBots",params:[],type:"Update"},{id:1294139288,predicate:"webViewResultUrl",params:[{name:"flags",type:"#"},{name:"fullsize",type:"flags.1?true"},{name:"fullscreen",type:"flags.2?true"},{name:"query_id",type:"flags.0?long"},{name:"url",type:"string"}],type:"WebViewResult"},{id:211046684,predicate:"webViewMessageSent",params:[{name:"flags",type:"#"},{name:"msg_id",type:"flags.0?InputBotInlineMessageID"}],type:"WebViewMessageSent"},{id:361936797,predicate:"updateWebViewResultSent",params:[{name:"query_id",type:"long"}],type:"Update"},{id:-398020192,predicate:"keyboardButtonWebView",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:-514047120,predicate:"keyboardButtonSimpleWebView",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:1205698681,predicate:"messageActionWebViewDataSentMe",params:[{name:"text",type:"string"},{name:"data",type:"string"}],type:"MessageAction"},{id:-1262252875,predicate:"messageActionWebViewDataSent",params:[{name:"text",type:"string"}],type:"MessageAction"},{id:347625491,predicate:"updateBotMenuButton",params:[{name:"bot_id",type:"long"},{name:"button",type:"BotMenuButton"}],type:"Update"},{id:1966318984,predicate:"botMenuButtonDefault",params:[],type:"BotMenuButton"},{id:1113113093,predicate:"botMenuButtonCommands",params:[],type:"BotMenuButton"},{id:-944407322,predicate:"botMenuButton",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"BotMenuButton"},{id:-67704655,predicate:"account.savedRingtonesNotModified",params:[],type:"account.SavedRingtones"},{id:-1041683259,predicate:"account.savedRingtones",params:[{name:"hash",type:"long"},{name:"ringtones",type:"Vector<Document>"}],type:"account.SavedRingtones"},{id:1960361625,predicate:"updateSavedRingtones",params:[],type:"Update"},{id:-1746354498,predicate:"notificationSoundDefault",params:[],type:"NotificationSound"},{id:1863070943,predicate:"notificationSoundNone",params:[],type:"NotificationSound"},{id:-2096391452,predicate:"notificationSoundLocal",params:[{name:"title",type:"string"},{name:"data",type:"string"}],type:"NotificationSound"},{id:-9666487,predicate:"notificationSoundRingtone",params:[{name:"id",type:"long"}],type:"NotificationSound"},{id:-1222230163,predicate:"account.savedRingtone",params:[],type:"account.SavedRingtone"},{id:523271863,predicate:"account.savedRingtoneConverted",params:[{name:"document",type:"Document"}],type:"account.SavedRingtone"},{id:2104224014,predicate:"attachMenuPeerTypeSameBotPM",params:[],type:"AttachMenuPeerType"},{id:-1020528102,predicate:"attachMenuPeerTypeBotPM",params:[],type:"AttachMenuPeerType"},{id:-247016673,predicate:"attachMenuPeerTypePM",params:[],type:"AttachMenuPeerType"},{id:84480319,predicate:"attachMenuPeerTypeChat",params:[],type:"AttachMenuPeerType"},{id:2080104188,predicate:"attachMenuPeerTypeBroadcast",params:[],type:"AttachMenuPeerType"},{id:-317687113,predicate:"chatInvitePublicJoinRequests",params:[],type:"ExportedChatInvite"},{id:-977967015,predicate:"inputInvoiceMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"InputInvoice"},{id:-1020867857,predicate:"inputInvoiceSlug",params:[{name:"slug",type:"string"}],type:"InputInvoice"},{id:-1362048039,predicate:"payments.exportedInvoice",params:[{name:"url",type:"string"}],type:"payments.ExportedInvoice"},{id:8703322,predicate:"updateTranscribedAudio",params:[{name:"flags",type:"#"},{name:"pending",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"transcription_id",type:"long"},{name:"text",type:"string"}],type:"Update"},{id:-809903785,predicate:"messages.transcribedAudio",params:[{name:"flags",type:"#"},{name:"pending",type:"flags.0?true"},{name:"transcription_id",type:"long"},{name:"text",type:"string"},{name:"trial_remains_num",type:"flags.1?int"},{name:"trial_remains_until_date",type:"flags.1?int"}],type:"messages.TranscribedAudio"},{id:909284270,predicate:"dialogFilterDefault",params:[],type:"DialogFilter"},{id:1395946908,predicate:"help.premiumPromo",params:[{name:"status_text",type:"string"},{name:"status_entities",type:"Vector<MessageEntity>"},{name:"video_sections",type:"Vector<string>"},{name:"videos",type:"Vector<Document>"},{name:"period_options",type:"Vector<PremiumSubscriptionOption>"},{name:"users",type:"Vector<User>"}],type:"help.PremiumPromo"},{id:-925956616,predicate:"messageEntityCustomEmoji",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"document_id",type:"long"}],type:"MessageEntity"},{id:-48981863,predicate:"documentAttributeCustomEmoji",params:[{name:"flags",type:"#"},{name:"free",type:"flags.0?true"},{name:"text_color",type:"flags.1?true"},{name:"alt",type:"string"},{name:"stickerset",type:"InputStickerSet"}],type:"DocumentAttribute"},{id:1087454222,predicate:"stickerSetFullCovered",params:[{name:"set",type:"StickerSet"},{name:"packs",type:"Vector<StickerPack>"},{name:"keywords",type:"Vector<StickerKeyword>"},{name:"documents",type:"Vector<Document>"}],type:"StickerSetCovered"},{id:-1502273946,predicate:"inputStorePaymentPremiumSubscription",params:[{name:"flags",type:"#"},{name:"restore",type:"flags.0?true"},{name:"upgrade",type:"flags.1?true"}],type:"InputStorePaymentPurpose"},{id:1634697192,predicate:"inputStorePaymentGiftPremium",params:[{name:"user_id",type:"InputUser"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"InputStorePaymentPurpose"},{id:1223234306,predicate:"messageActionGiftPremium",params:[{name:"flags",type:"#"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"days",type:"int"},{name:"crypto_currency",type:"flags.0?string"},{name:"crypto_amount",type:"flags.0?long"},{name:"message",type:"flags.1?TextWithEntities"}],type:"MessageAction"},{id:-930399486,predicate:"inputStickerSetPremiumGifts",params:[],type:"InputStickerSet"},{id:-78886548,predicate:"updateReadFeaturedEmojiStickers",params:[],type:"Update"},{id:-1360618136,predicate:"inputPrivacyKeyVoiceMessages",params:[],type:"InputPrivacyKey"},{id:110621716,predicate:"privacyKeyVoiceMessages",params:[],type:"PrivacyKey"},{id:-1996951013,predicate:"paymentFormMethod",params:[{name:"url",type:"string"},{name:"title",type:"string"}],type:"PaymentFormMethod"},{id:-193992412,predicate:"inputWebFileAudioAlbumThumbLocation",params:[{name:"flags",type:"#"},{name:"small",type:"flags.2?true"},{name:"document",type:"flags.0?InputDocument"},{name:"title",type:"flags.1?string"},{name:"performer",type:"flags.1?string"}],type:"InputWebFileLocation"},{id:769727150,predicate:"emojiStatusEmpty",params:[],type:"EmojiStatus"},{id:-402717046,predicate:"emojiStatus",params:[{name:"flags",type:"#"},{name:"document_id",type:"long"},{name:"until",type:"flags.0?int"}],type:"EmojiStatus"},{id:674706841,predicate:"updateUserEmojiStatus",params:[{name:"user_id",type:"long"},{name:"emoji_status",type:"EmojiStatus"}],type:"Update"},{id:821314523,predicate:"updateRecentEmojiStatuses",params:[],type:"Update"},{id:-796072379,predicate:"account.emojiStatusesNotModified",params:[],type:"account.EmojiStatuses"},{id:-1866176559,predicate:"account.emojiStatuses",params:[{name:"hash",type:"long"},{name:"statuses",type:"Vector<EmojiStatus>"}],type:"account.EmojiStatuses"},{id:2046153753,predicate:"reactionEmpty",params:[],type:"Reaction"},{id:455247544,predicate:"reactionEmoji",params:[{name:"emoticon",type:"string"}],type:"Reaction"},{id:-1992950669,predicate:"reactionCustomEmoji",params:[{name:"document_id",type:"long"}],type:"Reaction"},{id:-352570692,predicate:"chatReactionsNone",params:[],type:"ChatReactions"},{id:1385335754,predicate:"chatReactionsAll",params:[{name:"flags",type:"#"},{name:"allow_custom",type:"flags.0?true"}],type:"ChatReactions"},{id:1713193015,predicate:"chatReactionsSome",params:[{name:"reactions",type:"Vector<Reaction>"}],type:"ChatReactions"},{id:-1334846497,predicate:"messages.reactionsNotModified",params:[],type:"messages.Reactions"},{id:-352454890,predicate:"messages.reactions",params:[{name:"hash",type:"long"},{name:"reactions",type:"Vector<Reaction>"}],type:"messages.Reactions"},{id:1870160884,predicate:"updateRecentReactions",params:[],type:"Update"},{id:-2030252155,predicate:"updateMoveStickerSetToTop",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"stickerset",type:"long"}],type:"Update"},{id:-196020837,predicate:"auth.sentCodeTypeEmailCode",params:[{name:"flags",type:"#"},{name:"apple_signin_allowed",type:"flags.0?true"},{name:"google_signin_allowed",type:"flags.1?true"},{name:"email_pattern",type:"string"},{name:"length",type:"int"},{name:"reset_available_period",type:"flags.3?int"},{name:"reset_pending_date",type:"flags.4?int"}],type:"auth.SentCodeType"},{id:-1521934870,predicate:"auth.sentCodeTypeSetUpEmailRequired",params:[{name:"flags",type:"#"},{name:"apple_signin_allowed",type:"flags.0?true"},{name:"google_signin_allowed",type:"flags.1?true"}],type:"auth.SentCodeType"},{id:1128644211,predicate:"emailVerifyPurposeLoginSetup",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"EmailVerifyPurpose"},{id:1383932651,predicate:"emailVerifyPurposeLoginChange",params:[],type:"EmailVerifyPurpose"},{id:-1141565819,predicate:"emailVerifyPurposePassport",params:[],type:"EmailVerifyPurpose"},{id:-1842457175,predicate:"emailVerificationCode",params:[{name:"code",type:"string"}],type:"EmailVerification"},{id:-611279166,predicate:"emailVerificationGoogle",params:[{name:"token",type:"string"}],type:"EmailVerification"},{id:-1764723459,predicate:"emailVerificationApple",params:[{name:"token",type:"string"}],type:"EmailVerification"},{id:731303195,predicate:"account.emailVerified",params:[{name:"email",type:"string"}],type:"account.EmailVerified"},{id:-507835039,predicate:"account.emailVerifiedLogin",params:[{name:"email",type:"string"},{name:"sent_code",type:"auth.SentCode"}],type:"account.EmailVerified"},{id:1596792306,predicate:"premiumSubscriptionOption",params:[{name:"flags",type:"#"},{name:"current",type:"flags.1?true"},{name:"can_purchase_upgrade",type:"flags.2?true"},{name:"transaction",type:"flags.3?string"},{name:"months",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"bot_url",type:"string"},{name:"store_product",type:"flags.0?string"}],type:"PremiumSubscriptionOption"},{id:80008398,predicate:"inputStickerSetEmojiGenericAnimations",params:[],type:"InputStickerSet"},{id:701560302,predicate:"inputStickerSetEmojiDefaultStatuses",params:[],type:"InputStickerSet"},{id:-1206095820,predicate:"sendAsPeer",params:[{name:"flags",type:"#"},{name:"premium_required",type:"flags.0?true"},{name:"peer",type:"Peer"}],type:"SendAsPeer"},{id:-1386050360,predicate:"messageExtendedMediaPreview",params:[{name:"flags",type:"#"},{name:"w",type:"flags.0?int"},{name:"h",type:"flags.0?int"},{name:"thumb",type:"flags.1?PhotoSize"},{name:"video_duration",type:"flags.2?int"}],type:"MessageExtendedMedia"},{id:-297296796,predicate:"messageExtendedMedia",params:[{name:"media",type:"MessageMedia"}],type:"MessageExtendedMedia"},{id:-710666460,predicate:"updateMessageExtendedMedia",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"extended_media",type:"Vector<MessageExtendedMedia>"}],type:"Update"},{id:-50416996,predicate:"stickerKeyword",params:[{name:"document_id",type:"long"},{name:"keyword",type:"Vector<string>"}],type:"StickerKeyword"},{id:-1274595769,predicate:"username",params:[{name:"flags",type:"#"},{name:"editable",type:"flags.0?true"},{name:"active",type:"flags.1?true"},{name:"username",type:"string"}],type:"Username"},{id:-263212119,predicate:"channelAdminLogEventActionChangeUsernames",params:[{name:"prev_value",type:"Vector<string>"},{name:"new_value",type:"Vector<string>"}],type:"ChannelAdminLogEventAction"},{id:46949251,predicate:"channelAdminLogEventActionToggleForum",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:1483767080,predicate:"channelAdminLogEventActionCreateTopic",params:[{name:"topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:-261103096,predicate:"channelAdminLogEventActionEditTopic",params:[{name:"prev_topic",type:"ForumTopic"},{name:"new_topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:-1374254839,predicate:"channelAdminLogEventActionDeleteTopic",params:[{name:"topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:1569535291,predicate:"channelAdminLogEventActionPinTopic",params:[{name:"flags",type:"#"},{name:"prev_topic",type:"flags.0?ForumTopic"},{name:"new_topic",type:"flags.1?ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:37687451,predicate:"forumTopicDeleted",params:[{name:"id",type:"int"}],type:"ForumTopic"},{id:-838922550,predicate:"forumTopic",params:[{name:"flags",type:"#"},{name:"my",type:"flags.1?true"},{name:"closed",type:"flags.2?true"},{name:"pinned",type:"flags.3?true"},{name:"short",type:"flags.5?true"},{name:"hidden",type:"flags.6?true"},{name:"title_missing",type:"flags.7?true"},{name:"id",type:"int"},{name:"date",type:"int"},{name:"peer",type:"Peer"},{name:"title",type:"string"},{name:"icon_color",type:"int"},{name:"icon_emoji_id",type:"flags.0?long"},{name:"top_message",type:"int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"unread_mentions_count",type:"int"},{name:"unread_reactions_count",type:"int"},{name:"from_id",type:"Peer"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"draft",type:"flags.4?DraftMessage"}],type:"ForumTopic"},{id:913709011,predicate:"messages.forumTopics",params:[{name:"flags",type:"#"},{name:"order_by_create_date",type:"flags.0?true"},{name:"count",type:"int"},{name:"topics",type:"Vector<ForumTopic>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"pts",type:"int"}],type:"messages.ForumTopics"},{id:228168278,predicate:"messageActionTopicCreate",params:[{name:"flags",type:"#"},{name:"title_missing",type:"flags.1?true"},{name:"title",type:"string"},{name:"icon_color",type:"int"},{name:"icon_emoji_id",type:"flags.0?long"}],type:"MessageAction"},{id:-1064024032,predicate:"messageActionTopicEdit",params:[{name:"flags",type:"#"},{name:"title",type:"flags.0?string"},{name:"icon_emoji_id",type:"flags.1?long"},{name:"closed",type:"flags.2?Bool"},{name:"hidden",type:"flags.3?Bool"}],type:"MessageAction"},{id:1548122514,predicate:"inputNotifyForumTopic",params:[{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"int"}],type:"InputNotifyPeer"},{id:577659656,predicate:"notifyForumTopic",params:[{name:"peer",type:"Peer"},{name:"top_msg_id",type:"int"}],type:"NotifyPeer"},{id:1153562857,predicate:"inputStickerSetEmojiDefaultTopicIcons",params:[],type:"InputStickerSet"},{id:406407439,predicate:"messages.sponsoredMessagesEmpty",params:[],type:"messages.SponsoredMessages"},{id:1135897376,predicate:"defaultHistoryTTL",params:[{name:"period",type:"int"}],type:"DefaultHistoryTTL"},{id:116234636,predicate:"auth.codeTypeFragmentSms",params:[],type:"auth.CodeType"},{id:-648651719,predicate:"auth.sentCodeTypeFragmentSms",params:[{name:"url",type:"string"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:1103040667,predicate:"exportedContactToken",params:[{name:"url",type:"string"},{name:"expires",type:"int"}],type:"ExportedContactToken"},{id:1693675004,predicate:"channelAdminLogEventActionToggleAntiSpam",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:1474192222,predicate:"messageActionSuggestProfilePhoto",params:[{name:"photo",type:"Photo"}],type:"MessageAction"},{id:2008112412,predicate:"stickerSetNoCovered",params:[{name:"set",type:"StickerSet"}],type:"StickerSetCovered"},{id:542282808,predicate:"updateUser",params:[{name:"user_id",type:"long"}],type:"Update"},{id:596704836,predicate:"auth.sentCodeSuccess",params:[{name:"authorization",type:"auth.Authorization"}],type:"auth.SentCode"},{id:827428507,predicate:"messageActionRequestedPeer",params:[{name:"button_id",type:"int"},{name:"peers",type:"Vector<Peer>"}],type:"MessageAction"},{id:1597737472,predicate:"requestPeerTypeUser",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.0?Bool"},{name:"premium",type:"flags.1?Bool"}],type:"RequestPeerType"},{id:-906990053,predicate:"requestPeerTypeChat",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"bot_participant",type:"flags.5?true"},{name:"has_username",type:"flags.3?Bool"},{name:"forum",type:"flags.4?Bool"},{name:"user_admin_rights",type:"flags.1?ChatAdminRights"},{name:"bot_admin_rights",type:"flags.2?ChatAdminRights"}],type:"RequestPeerType"},{id:865857388,predicate:"requestPeerTypeBroadcast",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"has_username",type:"flags.3?Bool"},{name:"user_admin_rights",type:"flags.1?ChatAdminRights"},{name:"bot_admin_rights",type:"flags.2?ChatAdminRights"}],type:"RequestPeerType"},{id:1527715317,predicate:"keyboardButtonRequestPeer",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"button_id",type:"int"},{name:"peer_type",type:"RequestPeerType"},{name:"max_quantity",type:"int"}],type:"KeyboardButton"},{id:1209970170,predicate:"emojiListNotModified",params:[],type:"EmojiList"},{id:2048790993,predicate:"emojiList",params:[{name:"hash",type:"long"},{name:"document_id",type:"Vector<long>"}],type:"EmojiList"},{id:10475318,predicate:"auth.sentCodeTypeFirebaseSms",params:[{name:"flags",type:"#"},{name:"nonce",type:"flags.0?bytes"},{name:"play_integrity_project_id",type:"flags.2?long"},{name:"play_integrity_nonce",type:"flags.2?bytes"},{name:"receipt",type:"flags.1?string"},{name:"push_timeout",type:"flags.1?int"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:2056961449,predicate:"emojiGroup",params:[{name:"title",type:"string"},{name:"icon_emoji_id",type:"long"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiGroup"},{id:1874111879,predicate:"messages.emojiGroupsNotModified",params:[],type:"messages.EmojiGroups"},{id:-2011186869,predicate:"messages.emojiGroups",params:[{name:"hash",type:"int"},{name:"groups",type:"Vector<EmojiGroup>"}],type:"messages.EmojiGroups"},{id:-128171716,predicate:"videoSizeEmojiMarkup",params:[{name:"emoji_id",type:"long"},{name:"background_colors",type:"Vector<int>"}],type:"VideoSize"},{id:228623102,predicate:"videoSizeStickerMarkup",params:[{name:"stickerset",type:"InputStickerSet"},{name:"sticker_id",type:"long"},{name:"background_colors",type:"Vector<int>"}],type:"VideoSize"},{id:1964978502,predicate:"textWithEntities",params:[{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"}],type:"TextWithEntities"},{id:870003448,predicate:"messages.translateResult",params:[{name:"result",type:"Vector<TextWithEntities>"}],type:"messages.TranslatedText"},{id:-934791986,predicate:"autoSaveSettings",params:[{name:"flags",type:"#"},{name:"photos",type:"flags.0?true"},{name:"videos",type:"flags.1?true"},{name:"video_max_size",type:"flags.2?long"}],type:"AutoSaveSettings"},{id:-2124403385,predicate:"autoSaveException",params:[{name:"peer",type:"Peer"},{name:"settings",type:"AutoSaveSettings"}],type:"AutoSaveException"},{id:1279133341,predicate:"account.autoSaveSettings",params:[{name:"users_settings",type:"AutoSaveSettings"},{name:"chats_settings",type:"AutoSaveSettings"},{name:"broadcasts_settings",type:"AutoSaveSettings"},{name:"exceptions",type:"Vector<AutoSaveException>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.AutoSaveSettings"},{id:-335171433,predicate:"updateAutoSaveSettings",params:[],type:"Update"},{id:2094949405,predicate:"help.appConfigNotModified",params:[],type:"help.AppConfig"},{id:-585598930,predicate:"help.appConfig",params:[{name:"hash",type:"int"},{name:"config",type:"JSONValue"}],type:"help.AppConfig"},{id:-1457472134,predicate:"inputBotAppID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputBotApp"},{id:-1869872121,predicate:"inputBotAppShortName",params:[{name:"bot_id",type:"InputUser"},{name:"short_name",type:"string"}],type:"InputBotApp"},{id:1571189943,predicate:"botAppNotModified",params:[],type:"BotApp"},{id:-1778593322,predicate:"botApp",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"short_name",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"Photo"},{name:"document",type:"flags.0?Document"},{name:"hash",type:"long"}],type:"BotApp"},{id:-347034123,predicate:"messages.botApp",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"request_write_access",type:"flags.1?true"},{name:"has_settings",type:"flags.2?true"},{name:"app",type:"BotApp"}],type:"messages.BotApp"},{id:-1250781739,predicate:"inlineBotWebView",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"InlineBotWebView"},{id:1246753138,predicate:"readParticipantDate",params:[{name:"user_id",type:"long"},{name:"date",type:"int"}],type:"ReadParticipantDate"},{id:-1772913705,predicate:"dialogFilterChatlist",params:[{name:"flags",type:"#"},{name:"has_my_invites",type:"flags.26?true"},{name:"title_noanimate",type:"flags.28?true"},{name:"id",type:"int"},{name:"title",type:"TextWithEntities"},{name:"emoticon",type:"flags.25?string"},{name:"color",type:"flags.27?int"},{name:"pinned_peers",type:"Vector<InputPeer>"},{name:"include_peers",type:"Vector<InputPeer>"}],type:"DialogFilter"},{id:-203367885,predicate:"inputChatlistDialogFilter",params:[{name:"filter_id",type:"int"}],type:"InputChatlist"},{id:206668204,predicate:"exportedChatlistInvite",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"url",type:"string"},{name:"peers",type:"Vector<Peer>"}],type:"ExportedChatlistInvite"},{id:283567014,predicate:"chatlists.exportedChatlistInvite",params:[{name:"filter",type:"DialogFilter"},{name:"invite",type:"ExportedChatlistInvite"}],type:"chatlists.ExportedChatlistInvite"},{id:279670215,predicate:"chatlists.exportedInvites",params:[{name:"invites",type:"Vector<ExportedChatlistInvite>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ExportedInvites"},{id:-91752871,predicate:"chatlists.chatlistInviteAlready",params:[{name:"filter_id",type:"int"},{name:"missing_peers",type:"Vector<Peer>"},{name:"already_peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistInvite"},{id:-250687953,predicate:"chatlists.chatlistInvite",params:[{name:"flags",type:"#"},{name:"title_noanimate",type:"flags.1?true"},{name:"title",type:"TextWithEntities"},{name:"emoticon",type:"flags.0?string"},{name:"peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistInvite"},{id:-1816295539,predicate:"chatlists.chatlistUpdates",params:[{name:"missing_peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistUpdates"},{id:1348510708,predicate:"messageActionSetChatWallPaper",params:[{name:"flags",type:"#"},{name:"same",type:"flags.0?true"},{name:"for_both",type:"flags.1?true"},{name:"wallpaper",type:"WallPaper"}],type:"MessageAction"},{id:-391678544,predicate:"bots.botInfo",params:[{name:"name",type:"string"},{name:"about",type:"string"},{name:"description",type:"string"}],type:"bots.BotInfo"},{id:238759180,predicate:"inlineQueryPeerTypeBotPM",params:[],type:"InlineQueryPeerType"},{id:-1228133028,predicate:"messagePeerVote",params:[{name:"peer",type:"Peer"},{name:"option",type:"bytes"},{name:"date",type:"int"}],type:"MessagePeerVote"},{id:1959634180,predicate:"messagePeerVoteInputOption",params:[{name:"peer",type:"Peer"},{name:"date",type:"int"}],type:"MessagePeerVote"},{id:1177089766,predicate:"messagePeerVoteMultiple",params:[{name:"peer",type:"Peer"},{name:"options",type:"Vector<bytes>"},{name:"date",type:"int"}],type:"MessagePeerVote"},{id:941870144,predicate:"inputPrivacyKeyAbout",params:[],type:"InputPrivacyKey"},{id:-1534675103,predicate:"privacyKeyAbout",params:[],type:"PrivacyKey"},{id:-1923523370,predicate:"storyViews",params:[{name:"flags",type:"#"},{name:"has_viewers",type:"flags.1?true"},{name:"views_count",type:"int"},{name:"forwards_count",type:"flags.2?int"},{name:"reactions",type:"flags.3?Vector<ReactionCount>"},{name:"reactions_count",type:"flags.4?int"},{name:"recent_viewers",type:"flags.0?Vector<long>"}],type:"StoryViews"},{id:1374088783,predicate:"storyItemDeleted",params:[{name:"id",type:"int"}],type:"StoryItem"},{id:-5388013,predicate:"storyItemSkipped",params:[{name:"flags",type:"#"},{name:"close_friends",type:"flags.8?true"},{name:"live",type:"flags.9?true"},{name:"id",type:"int"},{name:"date",type:"int"},{name:"expire_date",type:"int"}],type:"StoryItem"},{id:-302947087,predicate:"storyItem",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.5?true"},{name:"public",type:"flags.7?true"},{name:"close_friends",type:"flags.8?true"},{name:"min",type:"flags.9?true"},{name:"noforwards",type:"flags.10?true"},{name:"edited",type:"flags.11?true"},{name:"contacts",type:"flags.12?true"},{name:"selected_contacts",type:"flags.13?true"},{name:"out",type:"flags.16?true"},{name:"id",type:"int"},{name:"date",type:"int"},{name:"from_id",type:"flags.18?Peer"},{name:"fwd_from",type:"flags.17?StoryFwdHeader"},{name:"expire_date",type:"int"},{name:"caption",type:"flags.0?string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"media",type:"MessageMedia"},{name:"media_areas",type:"flags.14?Vector<MediaArea>"},{name:"privacy",type:"flags.2?Vector<PrivacyRule>"},{name:"views",type:"flags.3?StoryViews"},{name:"sent_reaction",type:"flags.15?Reaction"},{name:"albums",type:"flags.19?Vector<int>"}],type:"StoryItem"},{id:1974712216,predicate:"updateStory",params:[{name:"peer",type:"Peer"},{name:"story",type:"StoryItem"}],type:"Update"},{id:-145845461,predicate:"updateReadStories",params:[{name:"peer",type:"Peer"},{name:"max_id",type:"int"}],type:"Update"},{id:291044926,predicate:"stories.allStoriesNotModified",params:[{name:"flags",type:"#"},{name:"state",type:"string"},{name:"stealth_mode",type:"StoriesStealthMode"}],type:"stories.AllStories"},{id:1862033025,predicate:"stories.allStories",params:[{name:"flags",type:"#"},{name:"has_more",type:"flags.0?true"},{name:"count",type:"int"},{name:"state",type:"string"},{name:"peer_stories",type:"Vector<PeerStories>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"stealth_mode",type:"StoriesStealthMode"}],type:"stories.AllStories"},{id:1673780490,predicate:"stories.stories",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"stories",type:"Vector<StoryItem>"},{name:"pinned_to_top",type:"flags.0?Vector<int>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"stories.Stories"},{id:793067081,predicate:"inputPrivacyValueAllowCloseFriends",params:[],type:"InputPrivacyRule"},{id:-135735141,predicate:"privacyValueAllowCloseFriends",params:[],type:"PrivacyRule"},{id:-1329730875,predicate:"storyView",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"blocked_my_stories_from",type:"flags.1?true"},{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"reaction",type:"flags.2?Reaction"}],type:"StoryView"},{id:1507299269,predicate:"stories.storyViewsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"views_count",type:"int"},{name:"forwards_count",type:"int"},{name:"reactions_count",type:"int"},{name:"views",type:"Vector<StoryView>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"stories.StoryViewsList"},{id:-560009955,predicate:"stories.storyViews",params:[{name:"views",type:"Vector<StoryViews>"},{name:"users",type:"Vector<User>"}],type:"stories.StoryViews"},{id:-2036351472,predicate:"inputReplyToMessage",params:[{name:"flags",type:"#"},{name:"reply_to_msg_id",type:"int"},{name:"top_msg_id",type:"flags.0?int"},{name:"reply_to_peer_id",type:"flags.1?InputPeer"},{name:"quote_text",type:"flags.2?string"},{name:"quote_entities",type:"flags.3?Vector<MessageEntity>"},{name:"quote_offset",type:"flags.4?int"},{name:"monoforum_peer_id",type:"flags.5?InputPeer"},{name:"todo_item_id",type:"flags.6?int"}],type:"InputReplyTo"},{id:1484862010,predicate:"inputReplyToStory",params:[{name:"peer",type:"InputPeer"},{name:"story_id",type:"int"}],type:"InputReplyTo"},{id:240843065,predicate:"messageReplyStoryHeader",params:[{name:"peer",type:"Peer"},{name:"story_id",type:"int"}],type:"MessageReplyHeader"},{id:468923833,predicate:"updateStoryID",params:[{name:"id",type:"int"},{name:"random_id",type:"long"}],type:"Update"},{id:1070138683,predicate:"exportedStoryLink",params:[{name:"link",type:"string"}],type:"ExportedStoryLink"},{id:-1979852936,predicate:"inputMediaStory",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"InputMedia"},{id:1758159491,predicate:"messageMediaStory",params:[{name:"flags",type:"#"},{name:"via_mention",type:"flags.1?true"},{name:"peer",type:"Peer"},{name:"id",type:"int"},{name:"story",type:"flags.0?StoryItem"}],type:"MessageMedia"},{id:781501415,predicate:"webPageAttributeStory",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"id",type:"int"},{name:"story",type:"flags.0?StoryItem"}],type:"WebPageAttribute"},{id:1898850301,predicate:"storiesStealthMode",params:[{name:"flags",type:"#"},{name:"active_until_date",type:"flags.0?int"},{name:"cooldown_until_date",type:"flags.1?int"}],type:"StoriesStealthMode"},{id:738741697,predicate:"updateStoriesStealthMode",params:[{name:"stealth_mode",type:"StoriesStealthMode"}],type:"Update"},{id:-808853502,predicate:"mediaAreaCoordinates",params:[{name:"flags",type:"#"},{name:"x",type:"double"},{name:"y",type:"double"},{name:"w",type:"double"},{name:"h",type:"double"},{name:"rotation",type:"double"},{name:"radius",type:"flags.0?double"}],type:"MediaAreaCoordinates"},{id:-1098720356,predicate:"mediaAreaVenue",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"MediaArea"},{id:-1300094593,predicate:"inputMediaAreaVenue",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"query_id",type:"long"},{name:"result_id",type:"string"}],type:"MediaArea"},{id:-891992787,predicate:"mediaAreaGeoPoint",params:[{name:"flags",type:"#"},{name:"coordinates",type:"MediaAreaCoordinates"},{name:"geo",type:"GeoPoint"},{name:"address",type:"flags.0?GeoPointAddress"}],type:"MediaArea"},{id:2103604867,predicate:"updateSentStoryReaction",params:[{name:"peer",type:"Peer"},{name:"story_id",type:"int"},{name:"reaction",type:"Reaction"}],type:"Update"},{id:340088945,predicate:"mediaAreaSuggestedReaction",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"flipped",type:"flags.1?true"},{name:"coordinates",type:"MediaAreaCoordinates"},{name:"reaction",type:"Reaction"}],type:"MediaArea"},{id:-1707742823,predicate:"peerStories",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"max_read_id",type:"flags.0?int"},{name:"stories",type:"Vector<StoryItem>"}],type:"PeerStories"},{id:-890861720,predicate:"stories.peerStories",params:[{name:"stories",type:"PeerStories"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"stories.PeerStories"},{id:-44166467,predicate:"messages.webPage",params:[{name:"webpage",type:"WebPage"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.WebPage"},{id:-75955309,predicate:"inputStorePaymentPremiumGiftCode",params:[{name:"flags",type:"#"},{name:"users",type:"Vector<InputUser>"},{name:"boost_peer",type:"flags.0?InputPeer"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"message",type:"flags.1?TextWithEntities"}],type:"InputStorePaymentPurpose"},{id:369444042,predicate:"inputStorePaymentPremiumGiveaway",params:[{name:"flags",type:"#"},{name:"only_new_subscribers",type:"flags.0?true"},{name:"winners_are_visible",type:"flags.3?true"},{name:"boost_peer",type:"InputPeer"},{name:"additional_peers",type:"flags.1?Vector<InputPeer>"},{name:"countries_iso2",type:"flags.2?Vector<string>"},{name:"prize_description",type:"flags.4?string"},{name:"random_id",type:"long"},{name:"until_date",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"InputStorePaymentPurpose"},{id:-1734841331,predicate:"inputInvoicePremiumGiftCode",params:[{name:"purpose",type:"InputStorePaymentPurpose"},{name:"option",type:"PremiumGiftCodeOption"}],type:"InputInvoice"},{id:629052971,predicate:"premiumGiftCodeOption",params:[{name:"flags",type:"#"},{name:"users",type:"int"},{name:"months",type:"int"},{name:"store_product",type:"flags.0?string"},{name:"store_quantity",type:"flags.1?int"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"PremiumGiftCodeOption"},{id:-342343793,predicate:"payments.checkedGiftCode",params:[{name:"flags",type:"#"},{name:"via_giveaway",type:"flags.2?true"},{name:"from_id",type:"flags.4?Peer"},{name:"giveaway_msg_id",type:"flags.3?int"},{name:"to_id",type:"flags.0?long"},{name:"date",type:"int"},{name:"days",type:"int"},{name:"used_date",type:"flags.1?int"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"payments.CheckedGiftCode"},{id:-1442366485,predicate:"messageMediaGiveaway",params:[{name:"flags",type:"#"},{name:"only_new_subscribers",type:"flags.0?true"},{name:"winners_are_visible",type:"flags.2?true"},{name:"channels",type:"Vector<long>"},{name:"countries_iso2",type:"flags.1?Vector<string>"},{name:"prize_description",type:"flags.3?string"},{name:"quantity",type:"int"},{name:"months",type:"flags.4?int"},{name:"stars",type:"flags.5?long"},{name:"until_date",type:"int"}],type:"MessageMedia"},{id:834962247,predicate:"messageActionGiftCode",params:[{name:"flags",type:"#"},{name:"via_giveaway",type:"flags.0?true"},{name:"unclaimed",type:"flags.5?true"},{name:"boost_peer",type:"flags.1?Peer"},{name:"days",type:"int"},{name:"slug",type:"string"},{name:"currency",type:"flags.2?string"},{name:"amount",type:"flags.2?long"},{name:"crypto_currency",type:"flags.3?string"},{name:"crypto_amount",type:"flags.3?long"},{name:"message",type:"flags.4?TextWithEntities"}],type:"MessageAction"},{id:-1475391004,predicate:"messageActionGiveawayLaunch",params:[{name:"flags",type:"#"},{name:"stars",type:"flags.0?long"}],type:"MessageAction"},{id:1130879648,predicate:"payments.giveawayInfo",params:[{name:"flags",type:"#"},{name:"participating",type:"flags.0?true"},{name:"preparing_results",type:"flags.3?true"},{name:"start_date",type:"int"},{name:"joined_too_early_date",type:"flags.1?int"},{name:"admin_disallowed_chat_id",type:"flags.2?long"},{name:"disallowed_country",type:"flags.4?string"}],type:"payments.GiveawayInfo"},{id:-512366993,predicate:"payments.giveawayInfoResults",params:[{name:"flags",type:"#"},{name:"winner",type:"flags.0?true"},{name:"refunded",type:"flags.1?true"},{name:"start_date",type:"int"},{name:"gift_code_slug",type:"flags.3?string"},{name:"stars_prize",type:"flags.4?long"},{name:"finish_date",type:"int"},{name:"winners_count",type:"int"},{name:"activated_count",type:"flags.2?int"}],type:"payments.GiveawayInfo"},{id:-238245204,predicate:"messageEntityBlockquote",params:[{name:"flags",type:"#"},{name:"collapsed",type:"flags.0?true"},{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1303143084,predicate:"prepaidGiveaway",params:[{name:"id",type:"long"},{name:"months",type:"int"},{name:"quantity",type:"int"},{name:"date",type:"int"}],type:"PrepaidGiveaway"},{id:-1038383031,predicate:"inputMediaWebPage",params:[{name:"flags",type:"#"},{name:"force_large_media",type:"flags.0?true"},{name:"force_small_media",type:"flags.1?true"},{name:"optional",type:"flags.2?true"},{name:"url",type:"string"}],type:"InputMedia"},{id:-1109605104,predicate:"inputBotInlineMessageMediaWebPage",params:[{name:"flags",type:"#"},{name:"invert_media",type:"flags.3?true"},{name:"force_large_media",type:"flags.4?true"},{name:"force_small_media",type:"flags.5?true"},{name:"optional",type:"flags.6?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"url",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-2137335386,predicate:"botInlineMessageMediaWebPage",params:[{name:"flags",type:"#"},{name:"invert_media",type:"flags.3?true"},{name:"force_large_media",type:"flags.4?true"},{name:"force_small_media",type:"flags.5?true"},{name:"manual",type:"flags.7?true"},{name:"safe",type:"flags.8?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"url",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:1262359766,predicate:"boost",params:[{name:"flags",type:"#"},{name:"gift",type:"flags.1?true"},{name:"giveaway",type:"flags.2?true"},{name:"unclaimed",type:"flags.3?true"},{name:"id",type:"string"},{name:"user_id",type:"flags.0?long"},{name:"giveaway_msg_id",type:"flags.2?int"},{name:"date",type:"int"},{name:"expires",type:"int"},{name:"used_gift_slug",type:"flags.4?string"},{name:"multiplier",type:"flags.5?int"},{name:"stars",type:"flags.6?long"}],type:"Boost"},{id:-2030542532,predicate:"premium.boostsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"boosts",type:"Vector<Boost>"},{name:"next_offset",type:"flags.0?string"},{name:"users",type:"Vector<User>"}],type:"premium.BoostsList"},{id:-1001897636,predicate:"myBoost",params:[{name:"flags",type:"#"},{name:"slot",type:"int"},{name:"peer",type:"flags.0?Peer"},{name:"date",type:"int"},{name:"expires",type:"int"},{name:"cooldown_until_date",type:"flags.1?int"}],type:"MyBoost"},{id:-1696454430,predicate:"premium.myBoosts",params:[{name:"my_boosts",type:"Vector<MyBoost>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"premium.MyBoosts"},{id:1230586490,predicate:"premium.boostsStatus",params:[{name:"flags",type:"#"},{name:"my_boost",type:"flags.2?true"},{name:"level",type:"int"},{name:"current_level_boosts",type:"int"},{name:"boosts",type:"int"},{name:"gift_boosts",type:"flags.4?int"},{name:"next_level_boosts",type:"flags.0?int"},{name:"premium_audience",type:"flags.1?StatsPercentValue"},{name:"boost_url",type:"string"},{name:"prepaid_giveaways",type:"flags.3?Vector<PrepaidGiveaway>"},{name:"my_boost_slots",type:"flags.2?Vector<int>"}],type:"premium.BoostsStatus"},{id:-1873947492,predicate:"updateBotChatBoost",params:[{name:"peer",type:"Peer"},{name:"boost",type:"Boost"},{name:"qts",type:"int"}],type:"Update"},{id:129403168,predicate:"updateChannelViewForumAsMessages",params:[{name:"channel_id",type:"long"},{name:"enabled",type:"Bool"}],type:"Update"},{id:-2015170219,predicate:"messageActionGiveawayResults",params:[{name:"flags",type:"#"},{name:"stars",type:"flags.0?true"},{name:"winners_count",type:"int"},{name:"unclaimed_count",type:"int"}],type:"MessageAction"},{id:-1371598819,predicate:"updatePeerWallpaper",params:[{name:"flags",type:"#"},{name:"wallpaper_overridden",type:"flags.1?true"},{name:"peer",type:"Peer"},{name:"wallpaper",type:"flags.0?WallPaper"}],type:"Update"},{id:-1205411504,predicate:"storyFwdHeader",params:[{name:"flags",type:"#"},{name:"modified",type:"flags.3?true"},{name:"from",type:"flags.0?Peer"},{name:"from_name",type:"flags.1?string"},{name:"story_id",type:"flags.2?int"}],type:"StoryFwdHeader"},{id:-419066241,predicate:"postInteractionCountersMessage",params:[{name:"msg_id",type:"int"},{name:"views",type:"int"},{name:"forwards",type:"int"},{name:"reactions",type:"int"}],type:"PostInteractionCounters"},{id:-1974989273,predicate:"postInteractionCountersStory",params:[{name:"story_id",type:"int"},{name:"views",type:"int"},{name:"forwards",type:"int"},{name:"reactions",type:"int"}],type:"PostInteractionCounters"},{id:1355613820,predicate:"stats.storyStats",params:[{name:"views_graph",type:"StatsGraph"},{name:"reactions_by_emotion_graph",type:"StatsGraph"}],type:"stats.StoryStats"},{id:32685898,predicate:"publicForwardMessage",params:[{name:"message",type:"Message"}],type:"PublicForward"},{id:-302797360,predicate:"publicForwardStory",params:[{name:"peer",type:"Peer"},{name:"story",type:"StoryItem"}],type:"PublicForward"},{id:-1828487648,predicate:"stats.publicForwards",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"forwards",type:"Vector<PublicForward>"},{name:"next_offset",type:"flags.0?string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"stats.PublicForwards"},{id:-1253352753,predicate:"peerColor",params:[{name:"flags",type:"#"},{name:"color",type:"flags.0?int"},{name:"background_emoji_id",type:"flags.1?long"}],type:"PeerColor"},{id:639736408,predicate:"help.peerColorSet",params:[{name:"colors",type:"Vector<int>"}],type:"help.PeerColorSet"},{id:1987928555,predicate:"help.peerColorProfileSet",params:[{name:"palette_colors",type:"Vector<int>"},{name:"bg_colors",type:"Vector<int>"},{name:"story_colors",type:"Vector<int>"}],type:"help.PeerColorSet"},{id:-1377014082,predicate:"help.peerColorOption",params:[{name:"flags",type:"#"},{name:"hidden",type:"flags.0?true"},{name:"color_id",type:"int"},{name:"colors",type:"flags.1?help.PeerColorSet"},{name:"dark_colors",type:"flags.2?help.PeerColorSet"},{name:"channel_min_level",type:"flags.3?int"},{name:"group_min_level",type:"flags.4?int"}],type:"help.PeerColorOption"},{id:732034510,predicate:"help.peerColorsNotModified",params:[],type:"help.PeerColors"},{id:16313608,predicate:"help.peerColors",params:[{name:"hash",type:"int"},{name:"colors",type:"Vector<help.PeerColorOption>"}],type:"help.PeerColors"},{id:-827703647,predicate:"messageMediaGiveawayResults",params:[{name:"flags",type:"#"},{name:"only_new_subscribers",type:"flags.0?true"},{name:"refunded",type:"flags.2?true"},{name:"channel_id",type:"long"},{name:"additional_peers_count",type:"flags.3?int"},{name:"launch_msg_id",type:"int"},{name:"winners_count",type:"int"},{name:"unclaimed_count",type:"int"},{name:"winners",type:"Vector<long>"},{name:"months",type:"flags.4?int"},{name:"stars",type:"flags.5?long"},{name:"prize_description",type:"flags.1?string"},{name:"until_date",type:"int"}],type:"MessageMedia"},{id:1620104917,predicate:"storyReaction",params:[{name:"peer_id",type:"Peer"},{name:"date",type:"int"},{name:"reaction",type:"Reaction"}],type:"StoryReaction"},{id:-1146411453,predicate:"storyReactionPublicForward",params:[{name:"message",type:"Message"}],type:"StoryReaction"},{id:-808644845,predicate:"storyReactionPublicRepost",params:[{name:"peer_id",type:"Peer"},{name:"story",type:"StoryItem"}],type:"StoryReaction"},{id:-1436583780,predicate:"stories.storyReactionsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"reactions",type:"Vector<StoryReaction>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"stories.StoryReactionsList"},{id:-1870436597,predicate:"storyViewPublicForward",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"blocked_my_stories_from",type:"flags.1?true"},{name:"message",type:"Message"}],type:"StoryView"},{id:-1116418231,predicate:"storyViewPublicRepost",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"blocked_my_stories_from",type:"flags.1?true"},{name:"peer_id",type:"Peer"},{name:"story",type:"StoryItem"}],type:"StoryView"},{id:1469507456,predicate:"channelAdminLogEventActionChangePeerColor",params:[{name:"prev_value",type:"PeerColor"},{name:"new_value",type:"PeerColor"}],type:"ChannelAdminLogEventAction"},{id:1581742885,predicate:"channelAdminLogEventActionChangeProfilePeerColor",params:[{name:"prev_value",type:"PeerColor"},{name:"new_value",type:"PeerColor"}],type:"ChannelAdminLogEventAction"},{id:834362706,predicate:"channelAdminLogEventActionChangeWallpaper",params:[{name:"prev_value",type:"WallPaper"},{name:"new_value",type:"WallPaper"}],type:"ChannelAdminLogEventAction"},{id:1051328177,predicate:"channelAdminLogEventActionChangeEmojiStatus",params:[{name:"prev_value",type:"EmojiStatus"},{name:"new_value",type:"EmojiStatus"}],type:"ChannelAdminLogEventAction"},{id:1232373075,predicate:"inputStickerSetEmojiChannelDefaultStatuses",params:[],type:"InputStickerSet"},{id:1996756655,predicate:"mediaAreaChannelPost",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"channel_id",type:"long"},{name:"msg_id",type:"int"}],type:"MediaArea"},{id:577893055,predicate:"inputMediaAreaChannelPost",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"MediaArea"},{id:-1407069234,predicate:"updateBotMessageReaction",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"date",type:"int"},{name:"actor",type:"Peer"},{name:"old_reactions",type:"Vector<Reaction>"},{name:"new_reactions",type:"Vector<Reaction>"},{name:"qts",type:"int"}],type:"Update"},{id:164329305,predicate:"updateBotMessageReactions",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"date",type:"int"},{name:"reactions",type:"Vector<ReactionCount>"},{name:"qts",type:"int"}],type:"Update"},{id:-1115174036,predicate:"savedDialog",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"}],type:"SavedDialog"},{id:-1364222348,predicate:"updateSavedDialogPinned",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:1751942566,predicate:"updatePinnedSavedDialogs",params:[{name:"flags",type:"#"},{name:"order",type:"flags.0?Vector<DialogPeer>"}],type:"Update"},{id:-130358751,predicate:"messages.savedDialogs",params:[{name:"dialogs",type:"Vector<SavedDialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SavedDialogs"},{id:1153080793,predicate:"messages.savedDialogsSlice",params:[{name:"count",type:"int"},{name:"dialogs",type:"Vector<SavedDialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SavedDialogs"},{id:-1071681560,predicate:"messages.savedDialogsNotModified",params:[{name:"count",type:"int"}],type:"messages.SavedDialogs"},{id:-881854424,predicate:"savedReactionTag",params:[{name:"flags",type:"#"},{name:"reaction",type:"Reaction"},{name:"title",type:"flags.0?string"},{name:"count",type:"int"}],type:"SavedReactionTag"},{id:-2003084817,predicate:"messages.savedReactionTagsNotModified",params:[],type:"messages.SavedReactionTags"},{id:844731658,predicate:"messages.savedReactionTags",params:[{name:"tags",type:"Vector<SavedReactionTag>"},{name:"hash",type:"long"}],type:"messages.SavedReactionTags"},{id:969307186,predicate:"updateSavedReactionTags",params:[],type:"Update"},{id:1001931436,predicate:"outboxReadDate",params:[{name:"date",type:"int"}],type:"OutboxReadDate"},{id:-872240531,predicate:"messageActionBoostApply",params:[{name:"boosts",type:"int"}],type:"MessageAction"},{id:1188577451,predicate:"channelAdminLogEventActionChangeEmojiStickerSet",params:[{name:"prev_stickerset",type:"InputStickerSet"},{name:"new_stickerset",type:"InputStickerSet"}],type:"ChannelAdminLogEventAction"},{id:-594852657,predicate:"smsjobs.eligibleToJoin",params:[{name:"terms_url",type:"string"},{name:"monthly_sent_sms",type:"int"}],type:"smsjobs.EligibilityToJoin"},{id:720277905,predicate:"smsjobs.status",params:[{name:"flags",type:"#"},{name:"allow_international",type:"flags.0?true"},{name:"recent_sent",type:"int"},{name:"recent_since",type:"int"},{name:"recent_remains",type:"int"},{name:"total_sent",type:"int"},{name:"total_since",type:"int"},{name:"last_gift_slug",type:"flags.1?string"},{name:"terms_url",type:"string"}],type:"smsjobs.Status"},{id:-245208620,predicate:"updateSmsJob",params:[{name:"job_id",type:"string"}],type:"Update"},{id:-425595208,predicate:"smsJob",params:[{name:"job_id",type:"string"},{name:"phone_number",type:"string"},{name:"text",type:"string"}],type:"SmsJob"},{id:302717625,predicate:"businessWeeklyOpen",params:[{name:"start_minute",type:"int"},{name:"end_minute",type:"int"}],type:"BusinessWeeklyOpen"},{id:-1936543592,predicate:"businessWorkHours",params:[{name:"flags",type:"#"},{name:"open_now",type:"flags.0?true"},{name:"timezone_id",type:"string"},{name:"weekly_open",type:"Vector<BusinessWeeklyOpen>"}],type:"BusinessWorkHours"},{id:-1403249929,predicate:"businessLocation",params:[{name:"flags",type:"#"},{name:"geo_point",type:"flags.0?GeoPoint"},{name:"address",type:"string"}],type:"BusinessLocation"},{id:1871393450,predicate:"inputBusinessRecipients",params:[{name:"flags",type:"#"},{name:"existing_chats",type:"flags.0?true"},{name:"new_chats",type:"flags.1?true"},{name:"contacts",type:"flags.2?true"},{name:"non_contacts",type:"flags.3?true"},{name:"exclude_selected",type:"flags.5?true"},{name:"users",type:"flags.4?Vector<InputUser>"}],type:"InputBusinessRecipients"},{id:554733559,predicate:"businessRecipients",params:[{name:"flags",type:"#"},{name:"existing_chats",type:"flags.0?true"},{name:"new_chats",type:"flags.1?true"},{name:"contacts",type:"flags.2?true"},{name:"non_contacts",type:"flags.3?true"},{name:"exclude_selected",type:"flags.5?true"},{name:"users",type:"flags.4?Vector<long>"}],type:"BusinessRecipients"},{id:-910564679,predicate:"businessAwayMessageScheduleAlways",params:[],type:"BusinessAwayMessageSchedule"},{id:-1007487743,predicate:"businessAwayMessageScheduleOutsideWorkHours",params:[],type:"BusinessAwayMessageSchedule"},{id:-867328308,predicate:"businessAwayMessageScheduleCustom",params:[{name:"start_date",type:"int"},{name:"end_date",type:"int"}],type:"BusinessAwayMessageSchedule"},{id:26528571,predicate:"inputBusinessGreetingMessage",params:[{name:"shortcut_id",type:"int"},{name:"recipients",type:"InputBusinessRecipients"},{name:"no_activity_days",type:"int"}],type:"InputBusinessGreetingMessage"},{id:-451302485,predicate:"businessGreetingMessage",params:[{name:"shortcut_id",type:"int"},{name:"recipients",type:"BusinessRecipients"},{name:"no_activity_days",type:"int"}],type:"BusinessGreetingMessage"},{id:-2094959136,predicate:"inputBusinessAwayMessage",params:[{name:"flags",type:"#"},{name:"offline_only",type:"flags.0?true"},{name:"shortcut_id",type:"int"},{name:"schedule",type:"BusinessAwayMessageSchedule"},{name:"recipients",type:"InputBusinessRecipients"}],type:"InputBusinessAwayMessage"},{id:-283809188,predicate:"businessAwayMessage",params:[{name:"flags",type:"#"},{name:"offline_only",type:"flags.0?true"},{name:"shortcut_id",type:"int"},{name:"schedule",type:"BusinessAwayMessageSchedule"},{name:"recipients",type:"BusinessRecipients"}],type:"BusinessAwayMessage"},{id:-7173643,predicate:"timezone",params:[{name:"id",type:"string"},{name:"name",type:"string"},{name:"utc_offset",type:"int"}],type:"Timezone"},{id:-1761146676,predicate:"help.timezonesListNotModified",params:[],type:"help.TimezonesList"},{id:2071260529,predicate:"help.timezonesList",params:[{name:"timezones",type:"Vector<Timezone>"},{name:"hash",type:"int"}],type:"help.TimezonesList"},{id:110563371,predicate:"quickReply",params:[{name:"shortcut_id",type:"int"},{name:"shortcut",type:"string"},{name:"top_message",type:"int"},{name:"count",type:"int"}],type:"QuickReply"},{id:609840449,predicate:"inputQuickReplyShortcut",params:[{name:"shortcut",type:"string"}],type:"InputQuickReplyShortcut"},{id:18418929,predicate:"inputQuickReplyShortcutId",params:[{name:"shortcut_id",type:"int"}],type:"InputQuickReplyShortcut"},{id:-963811691,predicate:"messages.quickReplies",params:[{name:"quick_replies",type:"Vector<QuickReply>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.QuickReplies"},{id:1603398491,predicate:"messages.quickRepliesNotModified",params:[],type:"messages.QuickReplies"},{id:-112784718,predicate:"updateQuickReplies",params:[{name:"quick_replies",type:"Vector<QuickReply>"}],type:"Update"},{id:-180508905,predicate:"updateNewQuickReply",params:[{name:"quick_reply",type:"QuickReply"}],type:"Update"},{id:1407644140,predicate:"updateDeleteQuickReply",params:[{name:"shortcut_id",type:"int"}],type:"Update"},{id:1040518415,predicate:"updateQuickReplyMessage",params:[{name:"message",type:"Message"}],type:"Update"},{id:1450174413,predicate:"updateDeleteQuickReplyMessages",params:[{name:"shortcut_id",type:"int"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:-849058964,predicate:"connectedBot",params:[{name:"flags",type:"#"},{name:"bot_id",type:"long"},{name:"recipients",type:"BusinessBotRecipients"},{name:"rights",type:"BusinessBotRights"}],type:"ConnectedBot"},{id:400029819,predicate:"account.connectedBots",params:[{name:"connected_bots",type:"Vector<ConnectedBot>"},{name:"users",type:"Vector<User>"}],type:"account.ConnectedBots"},{id:718878489,predicate:"messages.dialogFilters",params:[{name:"flags",type:"#"},{name:"tags_enabled",type:"flags.0?true"},{name:"filters",type:"Vector<DialogFilter>"}],type:"messages.DialogFilters"},{id:1821253126,predicate:"birthday",params:[{name:"flags",type:"#"},{name:"day",type:"int"},{name:"month",type:"int"},{name:"year",type:"flags.0?int"}],type:"Birthday"},{id:-1964652166,predicate:"updateBotBusinessConnect",params:[{name:"connection",type:"BotBusinessConnection"},{name:"qts",type:"int"}],type:"Update"},{id:-1646578564,predicate:"updateBotNewBusinessMessage",params:[{name:"flags",type:"#"},{name:"connection_id",type:"string"},{name:"message",type:"Message"},{name:"reply_to_message",type:"flags.0?Message"},{name:"qts",type:"int"}],type:"Update"},{id:132077692,predicate:"updateBotEditBusinessMessage",params:[{name:"flags",type:"#"},{name:"connection_id",type:"string"},{name:"message",type:"Message"},{name:"reply_to_message",type:"flags.0?Message"},{name:"qts",type:"int"}],type:"Update"},{id:-1607821266,predicate:"updateBotDeleteBusinessMessage",params:[{name:"connection_id",type:"string"},{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"},{name:"qts",type:"int"}],type:"Update"},{id:-1892371723,predicate:"botBusinessConnection",params:[{name:"flags",type:"#"},{name:"disabled",type:"flags.1?true"},{name:"connection_id",type:"string"},{name:"user_id",type:"long"},{name:"dc_id",type:"int"},{name:"date",type:"int"},{name:"rights",type:"flags.2?BusinessBotRights"}],type:"BotBusinessConnection"},{id:163867085,predicate:"inputBusinessIntro",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"sticker",type:"flags.0?InputDocument"}],type:"InputBusinessIntro"},{id:1510606445,predicate:"businessIntro",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"sticker",type:"flags.0?Document"}],type:"BusinessIntro"},{id:-83926371,predicate:"messages.myStickers",params:[{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.MyStickers"},{id:-476815191,predicate:"inputCollectibleUsername",params:[{name:"username",type:"string"}],type:"InputCollectible"},{id:-1562241884,predicate:"inputCollectiblePhone",params:[{name:"phone",type:"string"}],type:"InputCollectible"},{id:1857945489,predicate:"fragment.collectibleInfo",params:[{name:"purchase_date",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"crypto_currency",type:"string"},{name:"crypto_amount",type:"long"},{name:"url",type:"string"}],type:"fragment.CollectibleInfo"},{id:-991587810,predicate:"inputBusinessBotRecipients",params:[{name:"flags",type:"#"},{name:"existing_chats",type:"flags.0?true"},{name:"new_chats",type:"flags.1?true"},{name:"contacts",type:"flags.2?true"},{name:"non_contacts",type:"flags.3?true"},{name:"exclude_selected",type:"flags.5?true"},{name:"users",type:"flags.4?Vector<InputUser>"},{name:"exclude_users",type:"flags.6?Vector<InputUser>"}],type:"InputBusinessBotRecipients"},{id:-1198722189,predicate:"businessBotRecipients",params:[{name:"flags",type:"#"},{name:"existing_chats",type:"flags.0?true"},{name:"new_chats",type:"flags.1?true"},{name:"contacts",type:"flags.2?true"},{name:"non_contacts",type:"flags.3?true"},{name:"exclude_selected",type:"flags.5?true"},{name:"users",type:"flags.4?Vector<long>"},{name:"exclude_users",type:"flags.6?Vector<long>"}],type:"BusinessBotRecipients"},{id:496600883,predicate:"contactBirthday",params:[{name:"contact_id",type:"long"},{name:"birthday",type:"Birthday"}],type:"ContactBirthday"},{id:290452237,predicate:"contacts.contactBirthdays",params:[{name:"contacts",type:"Vector<ContactBirthday>"},{name:"users",type:"Vector<User>"}],type:"contacts.ContactBirthdays"},{id:-698740276,predicate:"inputPrivacyKeyBirthday",params:[],type:"InputPrivacyKey"},{id:536913176,predicate:"privacyKeyBirthday",params:[],type:"PrivacyKey"},{id:2009975281,predicate:"inputPrivacyValueAllowPremium",params:[],type:"InputPrivacyRule"},{id:-320241333,predicate:"privacyValueAllowPremium",params:[],type:"PrivacyRule"},{id:1653379620,predicate:"missingInvitee",params:[{name:"flags",type:"#"},{name:"premium_would_allow_invite",type:"flags.0?true"},{name:"premium_required_for_pm",type:"flags.1?true"},{name:"user_id",type:"long"}],type:"MissingInvitee"},{id:2136862630,predicate:"messages.invitedUsers",params:[{name:"updates",type:"Updates"},{name:"missing_invitees",type:"Vector<MissingInvitee>"}],type:"messages.InvitedUsers"},{id:292003751,predicate:"inputBusinessChatLink",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"},{name:"title",type:"flags.1?string"}],type:"InputBusinessChatLink"},{id:-1263638929,predicate:"businessChatLink",params:[{name:"flags",type:"#"},{name:"link",type:"string"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"},{name:"title",type:"flags.1?string"},{name:"views",type:"int"}],type:"BusinessChatLink"},{id:-331111727,predicate:"account.businessChatLinks",params:[{name:"links",type:"Vector<BusinessChatLink>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.BusinessChatLinks"},{id:-1708937439,predicate:"account.resolvedBusinessChatLinks",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.ResolvedBusinessChatLinks"},{id:-701500310,predicate:"requestedPeerUser",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"first_name",type:"flags.0?string"},{name:"last_name",type:"flags.0?string"},{name:"username",type:"flags.1?string"},{name:"photo",type:"flags.2?Photo"}],type:"RequestedPeer"},{id:1929860175,predicate:"requestedPeerChat",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"title",type:"flags.0?string"},{name:"photo",type:"flags.2?Photo"}],type:"RequestedPeer"},{id:-1952185372,predicate:"requestedPeerChannel",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"title",type:"flags.0?string"},{name:"username",type:"flags.1?string"},{name:"photo",type:"flags.2?Photo"}],type:"RequestedPeer"},{id:-1816979384,predicate:"messageActionRequestedPeerSentMe",params:[{name:"button_id",type:"int"},{name:"peers",type:"Vector<RequestedPeer>"}],type:"MessageAction"},{id:45580630,predicate:"inputKeyboardButtonRequestPeer",params:[{name:"flags",type:"#"},{name:"name_requested",type:"flags.0?true"},{name:"username_requested",type:"flags.1?true"},{name:"photo_requested",type:"flags.2?true"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"button_id",type:"int"},{name:"peer_type",type:"RequestPeerType"},{name:"max_quantity",type:"int"}],type:"KeyboardButton"},{id:1124938064,predicate:"sponsoredMessageReportOption",params:[{name:"text",type:"string"},{name:"option",type:"bytes"}],type:"SponsoredMessageReportOption"},{id:-2073059774,predicate:"channels.sponsoredMessageReportResultChooseOption",params:[{name:"title",type:"string"},{name:"options",type:"Vector<SponsoredMessageReportOption>"}],type:"channels.SponsoredMessageReportResult"},{id:1044107055,predicate:"channels.sponsoredMessageReportResultAdsHidden",params:[],type:"channels.SponsoredMessageReportResult"},{id:-1384544183,predicate:"channels.sponsoredMessageReportResultReported",params:[],type:"channels.SponsoredMessageReportResult"},{id:1355547603,predicate:"webPageAttributeStickerSet",params:[{name:"flags",type:"#"},{name:"emojis",type:"flags.0?true"},{name:"text_color",type:"flags.1?true"},{name:"stickers",type:"Vector<Document>"}],type:"WebPageAttribute"},{id:-1161583078,predicate:"reactionNotificationsFromContacts",params:[],type:"ReactionNotificationsFrom"},{id:1268654752,predicate:"reactionNotificationsFromAll",params:[],type:"ReactionNotificationsFrom"},{id:1457736048,predicate:"reactionsNotifySettings",params:[{name:"flags",type:"#"},{name:"messages_notify_from",type:"flags.0?ReactionNotificationsFrom"},{name:"stories_notify_from",type:"flags.1?ReactionNotificationsFrom"},{name:"sound",type:"NotificationSound"},{name:"show_previews",type:"Bool"}],type:"ReactionsNotifySettings"},{id:405070859,predicate:"updateNewStoryReaction",params:[{name:"story_id",type:"int"},{name:"peer",type:"Peer"},{name:"reaction",type:"Reaction"}],type:"Update"},{id:-1542017919,predicate:"auth.sentCodeTypeSmsWord",params:[{name:"flags",type:"#"},{name:"beginning",type:"flags.0?string"}],type:"auth.SentCodeType"},{id:-1284008785,predicate:"auth.sentCodeTypeSmsPhrase",params:[{name:"flags",type:"#"},{name:"beginning",type:"flags.0?string"}],type:"auth.SentCodeType"},{id:-2133693241,predicate:"emojiGroupGreeting",params:[{name:"title",type:"string"},{name:"icon_emoji_id",type:"long"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiGroup"},{id:154914612,predicate:"emojiGroupPremium",params:[{name:"title",type:"string"},{name:"icon_emoji_id",type:"long"}],type:"EmojiGroup"},{id:-1815879042,predicate:"availableEffect",params:[{name:"flags",type:"#"},{name:"premium_required",type:"flags.2?true"},{name:"id",type:"long"},{name:"emoticon",type:"string"},{name:"static_icon_id",type:"flags.0?long"},{name:"effect_sticker_id",type:"long"},{name:"effect_animation_id",type:"flags.1?long"}],type:"AvailableEffect"},{id:-772957605,predicate:"messages.availableEffectsNotModified",params:[],type:"messages.AvailableEffects"},{id:-1109696146,predicate:"messages.availableEffects",params:[{name:"hash",type:"int"},{name:"effects",type:"Vector<AvailableEffect>"},{name:"documents",type:"Vector<Document>"}],type:"messages.AvailableEffects"},{id:-1197736753,predicate:"factCheck",params:[{name:"flags",type:"#"},{name:"need_check",type:"flags.0?true"},{name:"country",type:"flags.1?string"},{name:"text",type:"flags.1?TextWithEntities"},{name:"hash",type:"long"}],type:"FactCheck"},{id:-1779253276,predicate:"starsTransactionPeerUnsupported",params:[],type:"StarsTransactionPeer"},{id:-1269320843,predicate:"starsTransactionPeerAppStore",params:[],type:"StarsTransactionPeer"},{id:2069236235,predicate:"starsTransactionPeerPlayMarket",params:[],type:"StarsTransactionPeer"},{id:621656824,predicate:"starsTransactionPeerPremiumBot",params:[],type:"StarsTransactionPeer"},{id:-382740222,predicate:"starsTransactionPeerFragment",params:[],type:"StarsTransactionPeer"},{id:-670195363,predicate:"starsTransactionPeer",params:[{name:"peer",type:"Peer"}],type:"StarsTransactionPeer"},{id:198776256,predicate:"starsTopupOption",params:[{name:"flags",type:"#"},{name:"extended",type:"flags.1?true"},{name:"stars",type:"long"},{name:"store_product",type:"flags.0?string"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"StarsTopupOption"},{id:1710230755,predicate:"inputInvoiceStars",params:[{name:"purpose",type:"InputStorePaymentPurpose"}],type:"InputInvoice"},{id:325426864,predicate:"starsTransaction",params:[{name:"flags",type:"#"},{name:"refund",type:"flags.3?true"},{name:"pending",type:"flags.4?true"},{name:"failed",type:"flags.6?true"},{name:"gift",type:"flags.10?true"},{name:"reaction",type:"flags.11?true"},{name:"stargift_upgrade",type:"flags.18?true"},{name:"business_transfer",type:"flags.21?true"},{name:"stargift_resale",type:"flags.22?true"},{name:"posts_search",type:"flags.24?true"},{name:"stargift_prepaid_upgrade",type:"flags.25?true"},{name:"stargift_drop_original_details",type:"flags.26?true"},{name:"phonegroup_message",type:"flags.27?true"},{name:"stargift_auction_bid",type:"flags.28?true"},{name:"offer",type:"flags.29?true"},{name:"id",type:"string"},{name:"amount",type:"StarsAmount"},{name:"date",type:"int"},{name:"peer",type:"StarsTransactionPeer"},{name:"title",type:"flags.0?string"},{name:"description",type:"flags.1?string"},{name:"photo",type:"flags.2?WebDocument"},{name:"transaction_date",type:"flags.5?int"},{name:"transaction_url",type:"flags.5?string"},{name:"bot_payload",type:"flags.7?bytes"},{name:"msg_id",type:"flags.8?int"},{name:"extended_media",type:"flags.9?Vector<MessageMedia>"},{name:"subscription_period",type:"flags.12?int"},{name:"giveaway_post_id",type:"flags.13?int"},{name:"stargift",type:"flags.14?StarGift"},{name:"floodskip_number",type:"flags.15?int"},{name:"starref_commission_permille",type:"flags.16?int"},{name:"starref_peer",type:"flags.17?Peer"},{name:"starref_amount",type:"flags.17?StarsAmount"},{name:"paid_messages",type:"flags.19?int"},{name:"premium_gift_months",type:"flags.20?int"},{name:"ads_proceeds_from_date",type:"flags.23?int"},{name:"ads_proceeds_to_date",type:"flags.23?int"}],type:"StarsTransaction"},{id:1822222573,predicate:"payments.starsStatus",params:[{name:"flags",type:"#"},{name:"balance",type:"StarsAmount"},{name:"subscriptions",type:"flags.1?Vector<StarsSubscription>"},{name:"subscriptions_next_offset",type:"flags.2?string"},{name:"subscriptions_missing_balance",type:"flags.4?long"},{name:"history",type:"flags.3?Vector<StarsTransaction>"},{name:"next_offset",type:"flags.0?string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"payments.StarsStatus"},{id:1317053305,predicate:"updateStarsBalance",params:[{name:"balance",type:"StarsAmount"}],type:"Update"},{id:2079764828,predicate:"payments.paymentFormStars",params:[{name:"flags",type:"#"},{name:"form_id",type:"long"},{name:"bot_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.5?WebDocument"},{name:"invoice",type:"Invoice"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentForm"},{id:-625215430,predicate:"payments.paymentReceiptStars",params:[{name:"flags",type:"#"},{name:"date",type:"int"},{name:"bot_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.2?WebDocument"},{name:"invoice",type:"Invoice"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"transaction_id",type:"string"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentReceipt"},{id:926421125,predicate:"mediaAreaUrl",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"url",type:"string"}],type:"MediaArea"},{id:-394605632,predicate:"foundStory",params:[{name:"peer",type:"Peer"},{name:"story",type:"StoryItem"}],type:"FoundStory"},{id:-488736969,predicate:"stories.foundStories",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"stories",type:"Vector<FoundStory>"},{name:"next_offset",type:"flags.0?string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"stories.FoundStories"},{id:-565420653,predicate:"geoPointAddress",params:[{name:"flags",type:"#"},{name:"country_iso2",type:"string"},{name:"state",type:"flags.0?string"},{name:"city",type:"flags.1?string"},{name:"street",type:"flags.2?string"}],type:"GeoPointAddress"},{id:513998247,predicate:"updateBusinessBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"connection_id",type:"string"},{name:"message",type:"Message"},{name:"reply_to_message",type:"flags.2?Message"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"}],type:"Update"},{id:-21080943,predicate:"starsRevenueStatus",params:[{name:"flags",type:"#"},{name:"withdrawal_enabled",type:"flags.0?true"},{name:"current_balance",type:"StarsAmount"},{name:"available_balance",type:"StarsAmount"},{name:"overall_revenue",type:"StarsAmount"},{name:"next_withdrawal_at",type:"flags.1?int"}],type:"StarsRevenueStatus"},{id:1814066038,predicate:"payments.starsRevenueStats",params:[{name:"flags",type:"#"},{name:"top_hours_graph",type:"flags.0?StatsGraph"},{name:"revenue_graph",type:"StatsGraph"},{name:"status",type:"StarsRevenueStatus"},{name:"usd_rate",type:"double"}],type:"payments.StarsRevenueStats"},{id:497778871,predicate:"payments.starsRevenueWithdrawalUrl",params:[{name:"url",type:"string"}],type:"payments.StarsRevenueWithdrawalUrl"},{id:-1518030823,predicate:"updateStarsRevenueStatus",params:[{name:"peer",type:"Peer"},{name:"status",type:"StarsRevenueStatus"}],type:"Update"},{id:-1005571194,predicate:"inputMediaPaidMedia",params:[{name:"flags",type:"#"},{name:"stars_amount",type:"long"},{name:"extended_media",type:"Vector<InputMedia>"},{name:"payload",type:"flags.0?string"}],type:"InputMedia"},{id:-1467669359,predicate:"messageMediaPaidMedia",params:[{name:"stars_amount",type:"long"},{name:"extended_media",type:"Vector<MessageExtendedMedia>"}],type:"MessageMedia"},{id:1617438738,predicate:"starsTransactionPeerAds",params:[],type:"StarsTransactionPeer"},{id:961445665,predicate:"payments.starsRevenueAdsAccountUrl",params:[{name:"url",type:"string"}],type:"payments.StarsRevenueAdsAccountUrl"},{id:543876817,predicate:"inputStarsTransaction",params:[{name:"flags",type:"#"},{name:"refund",type:"flags.0?true"},{name:"id",type:"string"}],type:"InputStarsTransaction"},{id:1102307842,predicate:"messageActionPaymentRefunded",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"payload",type:"flags.0?bytes"},{name:"charge",type:"PaymentCharge"}],type:"MessageAction"},{id:-106780981,predicate:"inputStorePaymentStarsTopup",params:[{name:"flags",type:"#"},{name:"stars",type:"long"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"spend_purpose_peer",type:"flags.0?InputPeer"}],type:"InputStorePaymentPurpose"},{id:494149367,predicate:"inputStorePaymentStarsGift",params:[{name:"user_id",type:"InputUser"},{name:"stars",type:"long"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"InputStorePaymentPurpose"},{id:1577421297,predicate:"starsGiftOption",params:[{name:"flags",type:"#"},{name:"extended",type:"flags.1?true"},{name:"stars",type:"long"},{name:"store_product",type:"flags.0?string"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"StarsGiftOption"},{id:1171632161,predicate:"messageActionGiftStars",params:[{name:"flags",type:"#"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"stars",type:"long"},{name:"crypto_currency",type:"flags.0?string"},{name:"crypto_amount",type:"flags.0?long"},{name:"transaction_id",type:"flags.1?string"}],type:"MessageAction"},{id:-39945236,predicate:"topPeerCategoryBotsApp",params:[],type:"TopPeerCategory"},{id:428978491,predicate:"bots.popularAppBots",params:[{name:"flags",type:"#"},{name:"next_offset",type:"flags.0?string"},{name:"users",type:"Vector<User>"}],type:"bots.PopularAppBots"},{id:602479523,predicate:"botPreviewMedia",params:[{name:"date",type:"int"},{name:"media",type:"MessageMedia"}],type:"BotPreviewMedia"},{id:212278628,predicate:"bots.previewInfo",params:[{name:"media",type:"Vector<BotPreviewMedia>"},{name:"lang_codes",type:"Vector<string>"}],type:"bots.PreviewInfo"},{id:1235637404,predicate:"mediaAreaWeather",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"emoji",type:"string"},{name:"temperature_c",type:"double"},{name:"color",type:"int"}],type:"MediaArea"},{id:1658620744,predicate:"inputFileStoryDocument",params:[{name:"id",type:"InputDocument"}],type:"InputFile"},{id:887591921,predicate:"inputInvoiceChatInviteSubscription",params:[{name:"hash",type:"string"}],type:"InputInvoice"},{id:88173912,predicate:"starsSubscriptionPricing",params:[{name:"period",type:"int"},{name:"amount",type:"long"}],type:"StarsSubscriptionPricing"},{id:779004698,predicate:"starsSubscription",params:[{name:"flags",type:"#"},{name:"canceled",type:"flags.0?true"},{name:"can_refulfill",type:"flags.1?true"},{name:"missing_balance",type:"flags.2?true"},{name:"bot_canceled",type:"flags.7?true"},{name:"id",type:"string"},{name:"peer",type:"Peer"},{name:"until_date",type:"int"},{name:"pricing",type:"StarsSubscriptionPricing"},{name:"chat_invite_hash",type:"flags.3?string"},{name:"title",type:"flags.4?string"},{name:"photo",type:"flags.5?WebDocument"},{name:"invoice_slug",type:"flags.6?string"}],type:"StarsSubscription"},{id:1379771627,predicate:"reactionPaid",params:[],type:"Reaction"},{id:1269016922,predicate:"messageReactor",params:[{name:"flags",type:"#"},{name:"top",type:"flags.0?true"},{name:"my",type:"flags.1?true"},{name:"anonymous",type:"flags.2?true"},{name:"peer_id",type:"flags.3?Peer"},{name:"count",type:"int"}],type:"MessageReactor"},{id:1621597305,predicate:"channelAdminLogEventActionToggleSignatureProfiles",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:675009298,predicate:"updateBotPurchasedPaidMedia",params:[{name:"user_id",type:"long"},{name:"payload",type:"string"},{name:"qts",type:"int"}],type:"Update"},{id:1684286899,predicate:"channelAdminLogEventActionParticipantSubExtend",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:1964968186,predicate:"inputStorePaymentStarsGiveaway",params:[{name:"flags",type:"#"},{name:"only_new_subscribers",type:"flags.0?true"},{name:"winners_are_visible",type:"flags.3?true"},{name:"stars",type:"long"},{name:"boost_peer",type:"InputPeer"},{name:"additional_peers",type:"flags.1?Vector<InputPeer>"},{name:"countries_iso2",type:"flags.2?Vector<string>"},{name:"prize_description",type:"flags.4?string"},{name:"random_id",type:"long"},{name:"until_date",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"users",type:"int"}],type:"InputStorePaymentPurpose"},{id:-1341372510,predicate:"messageActionPrizeStars",params:[{name:"flags",type:"#"},{name:"unclaimed",type:"flags.0?true"},{name:"stars",type:"long"},{name:"transaction_id",type:"string"},{name:"boost_peer",type:"Peer"},{name:"giveaway_msg_id",type:"int"}],type:"MessageAction"},{id:-1955438642,predicate:"updatePaidReactionPrivacy",params:[{name:"private",type:"PaidReactionPrivacy"}],type:"Update"},{id:-1798404822,predicate:"starsGiveawayOption",params:[{name:"flags",type:"#"},{name:"extended",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"stars",type:"long"},{name:"yearly_boosts",type:"int"},{name:"store_product",type:"flags.2?string"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"winners",type:"Vector<StarsGiveawayWinnersOption>"}],type:"StarsGiveawayOption"},{id:1411605001,predicate:"starsGiveawayWinnersOption",params:[{name:"flags",type:"#"},{name:"default",type:"flags.0?true"},{name:"users",type:"int"},{name:"per_user_stars",type:"long"}],type:"StarsGiveawayWinnersOption"},{id:-1700956192,predicate:"prepaidStarsGiveaway",params:[{name:"id",type:"long"},{name:"stars",type:"long"},{name:"quantity",type:"int"},{name:"boosts",type:"int"},{name:"date",type:"int"}],type:"PrepaidGiveaway"},{id:-1127960816,predicate:"keyboardButtonCopy",params:[{name:"flags",type:"#"},{name:"style",type:"flags.10?KeyboardButtonStyle"},{name:"text",type:"string"},{name:"copy_text",type:"string"}],type:"KeyboardButton"},{id:825922887,predicate:"starGift",params:[{name:"flags",type:"#"},{name:"limited",type:"flags.0?true"},{name:"sold_out",type:"flags.1?true"},{name:"birthday",type:"flags.2?true"},{name:"require_premium",type:"flags.7?true"},{name:"limited_per_user",type:"flags.8?true"},{name:"peer_color_available",type:"flags.10?true"},{name:"auction",type:"flags.11?true"},{name:"id",type:"long"},{name:"sticker",type:"Document"},{name:"stars",type:"long"},{name:"availability_remains",type:"flags.0?int"},{name:"availability_total",type:"flags.0?int"},{name:"availability_resale",type:"flags.4?long"},{name:"convert_stars",type:"long"},{name:"first_sale_date",type:"flags.1?int"},{name:"last_sale_date",type:"flags.1?int"},{name:"upgrade_stars",type:"flags.3?long"},{name:"resell_min_stars",type:"flags.4?long"},{name:"title",type:"flags.5?string"},{name:"released_by",type:"flags.6?Peer"},{name:"per_user_total",type:"flags.8?int"},{name:"per_user_remains",type:"flags.8?int"},{name:"locked_until_date",type:"flags.9?int"},{name:"auction_slug",type:"flags.11?string"},{name:"gifts_per_round",type:"flags.11?int"},{name:"auction_start_date",type:"flags.11?int"},{name:"upgrade_variants",type:"flags.12?int"},{name:"background",type:"flags.13?StarGiftBackground"}],type:"StarGift"},{id:-1551326360,predicate:"payments.starGiftsNotModified",params:[],type:"payments.StarGifts"},{id:785918357,predicate:"payments.starGifts",params:[{name:"hash",type:"int"},{name:"gifts",type:"Vector<StarGift>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"payments.StarGifts"},{id:-396206446,predicate:"inputInvoiceStarGift",params:[{name:"flags",type:"#"},{name:"hide_name",type:"flags.0?true"},{name:"include_upgrade",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"gift_id",type:"long"},{name:"message",type:"flags.1?TextWithEntities"}],type:"InputInvoice"},{id:-1272590367,predicate:"payments.paymentFormStarGift",params:[{name:"form_id",type:"long"},{name:"invoice",type:"Invoice"}],type:"payments.PaymentForm"},{id:-366202413,predicate:"messageActionStarGift",params:[{name:"flags",type:"#"},{name:"name_hidden",type:"flags.0?true"},{name:"saved",type:"flags.2?true"},{name:"converted",type:"flags.3?true"},{name:"upgraded",type:"flags.5?true"},{name:"refunded",type:"flags.9?true"},{name:"can_upgrade",type:"flags.10?true"},{name:"prepaid_upgrade",type:"flags.13?true"},{name:"upgrade_separate",type:"flags.16?true"},{name:"auction_acquired",type:"flags.17?true"},{name:"gift",type:"StarGift"},{name:"message",type:"flags.1?TextWithEntities"},{name:"convert_stars",type:"flags.4?long"},{name:"upgrade_msg_id",type:"flags.5?int"},{name:"upgrade_stars",type:"flags.8?long"},{name:"from_id",type:"flags.11?Peer"},{name:"peer",type:"flags.12?Peer"},{name:"saved_id",type:"flags.12?long"},{name:"prepaid_upgrade_hash",type:"flags.14?string"},{name:"gift_msg_id",type:"flags.15?int"},{name:"to_id",type:"flags.18?Peer"},{name:"gift_num",type:"flags.19?int"}],type:"MessageAction"},{id:2030298073,predicate:"messageReportOption",params:[{name:"text",type:"string"},{name:"option",type:"bytes"}],type:"MessageReportOption"},{id:-253435722,predicate:"reportResultChooseOption",params:[{name:"title",type:"string"},{name:"options",type:"Vector<MessageReportOption>"}],type:"ReportResult"},{id:1862904881,predicate:"reportResultAddComment",params:[{name:"flags",type:"#"},{name:"optional",type:"flags.0?true"},{name:"option",type:"bytes"}],type:"ReportResult"},{id:-1917633461,predicate:"reportResultReported",params:[],type:"ReportResult"},{id:-110658899,predicate:"starsTransactionPeerAPI",params:[],type:"StarsTransactionPeer"},{id:-1899035375,predicate:"messages.botPreparedInlineMessage",params:[{name:"id",type:"string"},{name:"expire_date",type:"int"}],type:"messages.BotPreparedInlineMessage"},{id:-11046771,predicate:"messages.preparedInlineMessage",params:[{name:"query_id",type:"long"},{name:"result",type:"BotInlineResult"},{name:"peer_types",type:"Vector<InlineQueryPeerType>"},{name:"cache_time",type:"int"},{name:"users",type:"Vector<User>"}],type:"messages.PreparedInlineMessage"},{id:-912582320,predicate:"botAppSettings",params:[{name:"flags",type:"#"},{name:"placeholder_path",type:"flags.0?bytes"},{name:"background_color",type:"flags.1?int"},{name:"background_dark_color",type:"flags.2?int"},{name:"header_color",type:"flags.3?int"},{name:"header_dark_color",type:"flags.4?int"}],type:"BotAppSettings"},{id:1515179237,predicate:"inputPrivacyValueAllowBots",params:[],type:"InputPrivacyRule"},{id:-991594219,predicate:"inputPrivacyValueDisallowBots",params:[],type:"InputPrivacyRule"},{id:558242653,predicate:"privacyValueAllowBots",params:[],type:"PrivacyRule"},{id:-156895185,predicate:"privacyValueDisallowBots",params:[],type:"PrivacyRule"},{id:-512548031,predicate:"inputPrivacyKeyStarGiftsAutoSave",params:[],type:"InputPrivacyKey"},{id:749010424,predicate:"privacyKeyStarGiftsAutoSave",params:[],type:"PrivacyKey"},{id:-586389774,predicate:"starRefProgram",params:[{name:"flags",type:"#"},{name:"bot_id",type:"long"},{name:"commission_permille",type:"int"},{name:"duration_months",type:"flags.0?int"},{name:"end_date",type:"flags.1?int"},{name:"daily_revenue_per_user",type:"flags.2?StarsAmount"}],type:"StarRefProgram"},{id:429997937,predicate:"connectedBotStarRef",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.1?true"},{name:"url",type:"string"},{name:"date",type:"int"},{name:"bot_id",type:"long"},{name:"commission_permille",type:"int"},{name:"duration_months",type:"flags.0?int"},{name:"participants",type:"long"},{name:"revenue",type:"long"}],type:"ConnectedBotStarRef"},{id:-1730811363,predicate:"payments.connectedStarRefBots",params:[{name:"count",type:"int"},{name:"connected_bots",type:"Vector<ConnectedBotStarRef>"},{name:"users",type:"Vector<User>"}],type:"payments.ConnectedStarRefBots"},{id:-1261053863,predicate:"payments.suggestedStarRefBots",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"suggested_bots",type:"Vector<StarRefProgram>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"payments.SuggestedStarRefBots"},{id:-1145654109,predicate:"starsAmount",params:[{name:"amount",type:"long"},{name:"nanos",type:"int"}],type:"StarsAmount"},{id:1611711796,predicate:"messages.foundStickersNotModified",params:[{name:"flags",type:"#"},{name:"next_offset",type:"flags.0?int"}],type:"messages.FoundStickers"},{id:-2100698480,predicate:"messages.foundStickers",params:[{name:"flags",type:"#"},{name:"next_offset",type:"flags.0?int"},{name:"hash",type:"long"},{name:"stickers",type:"Vector<Document>"}],type:"messages.FoundStickers"},{id:-1328716265,predicate:"botVerifierSettings",params:[{name:"flags",type:"#"},{name:"can_modify_custom_description",type:"flags.1?true"},{name:"icon",type:"long"},{name:"company",type:"string"},{name:"custom_description",type:"flags.0?string"}],type:"BotVerifierSettings"},{id:-113453988,predicate:"botVerification",params:[{name:"bot_id",type:"long"},{name:"icon",type:"long"},{name:"description",type:"string"}],type:"BotVerification"},{id:1448235490,predicate:"starGiftAttributeModel",params:[{name:"flags",type:"#"},{name:"crafted",type:"flags.0?true"},{name:"name",type:"string"},{name:"document",type:"Document"},{name:"rarity",type:"StarGiftAttributeRarity"}],type:"StarGiftAttribute"},{id:1315997162,predicate:"starGiftAttributePattern",params:[{name:"name",type:"string"},{name:"document",type:"Document"},{name:"rarity",type:"StarGiftAttributeRarity"}],type:"StarGiftAttribute"},{id:-1624963868,predicate:"starGiftAttributeBackdrop",params:[{name:"name",type:"string"},{name:"backdrop_id",type:"int"},{name:"center_color",type:"int"},{name:"edge_color",type:"int"},{name:"pattern_color",type:"int"},{name:"text_color",type:"int"},{name:"rarity",type:"StarGiftAttributeRarity"}],type:"StarGiftAttribute"},{id:-524291476,predicate:"starGiftAttributeOriginalDetails",params:[{name:"flags",type:"#"},{name:"sender_id",type:"flags.0?Peer"},{name:"recipient_id",type:"Peer"},{name:"date",type:"int"},{name:"message",type:"flags.1?TextWithEntities"}],type:"StarGiftAttribute"},{id:-2047825459,predicate:"starGiftUnique",params:[{name:"flags",type:"#"},{name:"require_premium",type:"flags.6?true"},{name:"resale_ton_only",type:"flags.7?true"},{name:"theme_available",type:"flags.9?true"},{name:"burned",type:"flags.14?true"},{name:"crafted",type:"flags.15?true"},{name:"id",type:"long"},{name:"gift_id",type:"long"},{name:"title",type:"string"},{name:"slug",type:"string"},{name:"num",type:"int"},{name:"owner_id",type:"flags.0?Peer"},{name:"owner_name",type:"flags.1?string"},{name:"owner_address",type:"flags.2?string"},{name:"attributes",type:"Vector<StarGiftAttribute>"},{name:"availability_issued",type:"int"},{name:"availability_total",type:"int"},{name:"gift_address",type:"flags.3?string"},{name:"resell_amount",type:"flags.4?Vector<StarsAmount>"},{name:"released_by",type:"flags.5?Peer"},{name:"value_amount",type:"flags.8?long"},{name:"value_currency",type:"flags.8?string"},{name:"value_usd_amount",type:"flags.8?long"},{name:"theme_peer",type:"flags.10?Peer"},{name:"peer_color",type:"flags.11?PeerColor"},{name:"host_id",type:"flags.12?Peer"},{name:"offer_min_stars",type:"flags.13?int"},{name:"craft_chance_permille",type:"flags.16?int"}],type:"StarGift"},{id:-423422686,predicate:"messageActionStarGiftUnique",params:[{name:"flags",type:"#"},{name:"upgrade",type:"flags.0?true"},{name:"transferred",type:"flags.1?true"},{name:"saved",type:"flags.2?true"},{name:"refunded",type:"flags.5?true"},{name:"prepaid_upgrade",type:"flags.11?true"},{name:"assigned",type:"flags.13?true"},{name:"from_offer",type:"flags.14?true"},{name:"craft",type:"flags.16?true"},{name:"gift",type:"StarGift"},{name:"can_export_at",type:"flags.3?int"},{name:"transfer_stars",type:"flags.4?long"},{name:"from_id",type:"flags.6?Peer"},{name:"peer",type:"flags.7?Peer"},{name:"saved_id",type:"flags.7?long"},{name:"resale_amount",type:"flags.8?StarsAmount"},{name:"can_transfer_at",type:"flags.9?int"},{name:"can_resell_at",type:"flags.10?int"},{name:"drop_original_details_stars",type:"flags.12?long"},{name:"can_craft_at",type:"flags.15?int"}],type:"MessageAction"},{id:1300335965,predicate:"inputInvoiceStarGiftUpgrade",params:[{name:"flags",type:"#"},{name:"keep_original_details",type:"flags.0?true"},{name:"stargift",type:"InputSavedStarGift"}],type:"InputInvoice"},{id:1247763417,predicate:"inputInvoiceStarGiftTransfer",params:[{name:"stargift",type:"InputSavedStarGift"},{name:"to_id",type:"InputPeer"}],type:"InputInvoice"},{id:1038213101,predicate:"payments.starGiftUpgradePreview",params:[{name:"sample_attributes",type:"Vector<StarGiftAttribute>"},{name:"prices",type:"Vector<StarGiftUpgradePrice>"},{name:"next_prices",type:"Vector<StarGiftUpgradePrice>"}],type:"payments.StarGiftUpgradePreview"},{id:1658259128,predicate:"users.users",params:[{name:"users",type:"Vector<User>"}],type:"users.Users"},{id:828000628,predicate:"users.usersSlice",params:[{name:"count",type:"int"},{name:"users",type:"Vector<User>"}],type:"users.Users"},{id:1097619176,predicate:"payments.uniqueStarGift",params:[{name:"gift",type:"StarGift"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"payments.UniqueStarGift"},{id:-814781e3,predicate:"webPageAttributeUniqueStarGift",params:[{name:"gift",type:"StarGift"}],type:"WebPageAttribute"},{id:1468491885,predicate:"mediaAreaStarGift",params:[{name:"coordinates",type:"MediaAreaCoordinates"},{name:"slug",type:"string"}],type:"MediaArea"},{id:-1936029524,predicate:"messages.webPagePreview",params:[{name:"media",type:"MessageMedia"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.WebPagePreview"},{id:1904500795,predicate:"emojiStatusCollectible",params:[{name:"flags",type:"#"},{name:"collectible_id",type:"long"},{name:"document_id",type:"long"},{name:"title",type:"string"},{name:"slug",type:"string"},{name:"pattern_document_id",type:"long"},{name:"center_color",type:"int"},{name:"edge_color",type:"int"},{name:"pattern_color",type:"int"},{name:"text_color",type:"int"},{name:"until",type:"flags.0?int"}],type:"EmojiStatus"},{id:118758847,predicate:"inputEmojiStatusCollectible",params:[{name:"flags",type:"#"},{name:"collectible_id",type:"long"},{name:"until",type:"flags.0?int"}],type:"EmojiStatus"},{id:1105150972,predicate:"savedStarGift",params:[{name:"flags",type:"#"},{name:"name_hidden",type:"flags.0?true"},{name:"unsaved",type:"flags.5?true"},{name:"refunded",type:"flags.9?true"},{name:"can_upgrade",type:"flags.10?true"},{name:"pinned_to_top",type:"flags.12?true"},{name:"upgrade_separate",type:"flags.17?true"},{name:"from_id",type:"flags.1?Peer"},{name:"date",type:"int"},{name:"gift",type:"StarGift"},{name:"message",type:"flags.2?TextWithEntities"},{name:"msg_id",type:"flags.3?int"},{name:"saved_id",type:"flags.11?long"},{name:"convert_stars",type:"flags.4?long"},{name:"upgrade_stars",type:"flags.6?long"},{name:"can_export_at",type:"flags.7?int"},{name:"transfer_stars",type:"flags.8?long"},{name:"can_transfer_at",type:"flags.13?int"},{name:"can_resell_at",type:"flags.14?int"},{name:"collection_id",type:"flags.15?Vector<int>"},{name:"prepaid_upgrade_hash",type:"flags.16?string"},{name:"drop_original_details_stars",type:"flags.18?long"},{name:"gift_num",type:"flags.19?int"},{name:"can_craft_at",type:"flags.20?int"}],type:"SavedStarGift"},{id:-1779201615,predicate:"payments.savedStarGifts",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"chat_notifications_enabled",type:"flags.1?Bool"},{name:"gifts",type:"Vector<SavedStarGift>"},{name:"next_offset",type:"flags.0?string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"payments.SavedStarGifts"},{id:1764202389,predicate:"inputSavedStarGiftUser",params:[{name:"msg_id",type:"int"}],type:"InputSavedStarGift"},{id:-251549057,predicate:"inputSavedStarGiftChat",params:[{name:"peer",type:"InputPeer"},{name:"saved_id",type:"long"}],type:"InputSavedStarGift"},{id:-2069218660,predicate:"payments.starGiftWithdrawalUrl",params:[{name:"url",type:"string"}],type:"payments.StarGiftWithdrawalUrl"},{id:543872158,predicate:"paidReactionPrivacyDefault",params:[],type:"PaidReactionPrivacy"},{id:520887001,predicate:"paidReactionPrivacyAnonymous",params:[],type:"PaidReactionPrivacy"},{id:-596837136,predicate:"paidReactionPrivacyPeer",params:[{name:"peer",type:"InputPeer"}],type:"PaidReactionPrivacy"},{id:-1111124044,predicate:"inputPrivacyKeyNoPaidMessages",params:[],type:"InputPrivacyKey"},{id:399722706,predicate:"privacyKeyNoPaidMessages",params:[],type:"PrivacyKey"},{id:504403720,predicate:"account.paidMessagesRevenue",params:[{name:"stars_amount",type:"long"}],type:"account.PaidMessagesRevenue"},{id:84580409,predicate:"requirementToContactEmpty",params:[],type:"RequirementToContact"},{id:-444472087,predicate:"requirementToContactPremium",params:[],type:"RequirementToContact"},{id:-1258914157,predicate:"requirementToContactPaidMessages",params:[{name:"stars_amount",type:"long"}],type:"RequirementToContact"},{id:-625298705,predicate:"inputInvoicePremiumGiftStars",params:[{name:"flags",type:"#"},{name:"user_id",type:"InputUser"},{name:"months",type:"int"},{name:"message",type:"flags.0?TextWithEntities"}],type:"InputInvoice"},{id:-527082948,predicate:"auth.sentCodePaymentRequired",params:[{name:"store_product",type:"string"},{name:"phone_code_hash",type:"string"},{name:"support_email_address",type:"string"},{name:"support_email_subject",type:"string"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"auth.SentCode"},{id:-1682807955,predicate:"inputStorePaymentAuthCode",params:[{name:"flags",type:"#"},{name:"restore",type:"flags.0?true"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"InputStorePaymentPurpose"},{id:1347068303,predicate:"updateSentPhoneCode",params:[{name:"sent_code",type:"auth.SentCode"}],type:"Update"},{id:-1604170505,predicate:"businessBotRights",params:[{name:"flags",type:"#"},{name:"reply",type:"flags.0?true"},{name:"read_messages",type:"flags.1?true"},{name:"delete_sent_messages",type:"flags.2?true"},{name:"delete_received_messages",type:"flags.3?true"},{name:"edit_name",type:"flags.4?true"},{name:"edit_bio",type:"flags.5?true"},{name:"edit_profile_photo",type:"flags.6?true"},{name:"edit_username",type:"flags.7?true"},{name:"view_gifts",type:"flags.8?true"},{name:"sell_gifts",type:"flags.9?true"},{name:"change_gift_settings",type:"flags.10?true"},{name:"transfer_and_upgrade_gifts",type:"flags.11?true"},{name:"transfer_stars",type:"flags.12?true"},{name:"manage_stories",type:"flags.13?true"}],type:"BusinessBotRights"},{id:-1407246387,predicate:"messageActionPaidMessagesRefunded",params:[{name:"count",type:"int"},{name:"stars",type:"long"}],type:"MessageAction"},{id:-2068281992,predicate:"messageActionPaidMessagesPrice",params:[{name:"flags",type:"#"},{name:"broadcast_messages_allowed",type:"flags.0?true"},{name:"stars",type:"long"}],type:"MessageAction"},{id:1911715524,predicate:"disallowedGiftsSettings",params:[{name:"flags",type:"#"},{name:"disallow_unlimited_stargifts",type:"flags.0?true"},{name:"disallow_limited_stargifts",type:"flags.1?true"},{name:"disallow_unique_stargifts",type:"flags.2?true"},{name:"disallow_premium_gifts",type:"flags.3?true"},{name:"disallow_stargifts_from_channels",type:"flags.4?true"}],type:"DisallowedGiftsSettings"},{id:-963180333,predicate:"sponsoredPeer",params:[{name:"flags",type:"#"},{name:"random_id",type:"bytes"},{name:"peer",type:"Peer"},{name:"sponsor_info",type:"flags.0?string"},{name:"additional_info",type:"flags.1?string"}],type:"SponsoredPeer"},{id:-365775695,predicate:"contacts.sponsoredPeersEmpty",params:[],type:"contacts.SponsoredPeers"},{id:-352114556,predicate:"contacts.sponsoredPeers",params:[{name:"peers",type:"Vector<SponsoredPeer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.SponsoredPeers"},{id:-191267262,predicate:"inputInvoiceBusinessBotTransferStars",params:[{name:"bot",type:"InputUser"},{name:"stars",type:"long"}],type:"InputInvoice"},{id:-33127873,predicate:"inputGroupCallSlug",params:[{name:"slug",type:"string"}],type:"InputGroupCall"},{id:-1945083841,predicate:"inputGroupCallInviteMessage",params:[{name:"msg_id",type:"int"}],type:"InputGroupCall"},{id:-1535694705,predicate:"updateGroupCallChainBlocks",params:[{name:"call",type:"InputGroupCall"},{name:"sub_chain_id",type:"int"},{name:"blocks",type:"Vector<bytes>"},{name:"next_offset",type:"int"}],type:"Update"},{id:805187450,predicate:"messageActionConferenceCall",params:[{name:"flags",type:"#"},{name:"missed",type:"flags.0?true"},{name:"active",type:"flags.1?true"},{name:"video",type:"flags.4?true"},{name:"call_id",type:"long"},{name:"duration",type:"flags.2?int"},{name:"other_participants",type:"flags.3?Vector<Peer>"}],type:"MessageAction"},{id:-1615072777,predicate:"phoneCallDiscardReasonMigrateConferenceCall",params:[{name:"slug",type:"string"}],type:"PhoneCallDiscardReason"},{id:545636920,predicate:"inputSavedStarGiftSlug",params:[{name:"slug",type:"string"}],type:"InputSavedStarGift"},{id:1219145276,predicate:"starGiftAttributeIdModel",params:[{name:"document_id",type:"long"}],type:"StarGiftAttributeId"},{id:1242965043,predicate:"starGiftAttributeIdPattern",params:[{name:"document_id",type:"long"}],type:"StarGiftAttributeId"},{id:520210263,predicate:"starGiftAttributeIdBackdrop",params:[{name:"backdrop_id",type:"int"}],type:"StarGiftAttributeId"},{id:783398488,predicate:"starGiftAttributeCounter",params:[{name:"attribute",type:"StarGiftAttributeId"},{name:"count",type:"int"}],type:"StarGiftAttributeCounter"},{id:-1803939105,predicate:"payments.resaleStarGifts",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"gifts",type:"Vector<StarGift>"},{name:"next_offset",type:"flags.0?string"},{name:"attributes",type:"flags.1?Vector<StarGiftAttribute>"},{name:"attributes_hash",type:"flags.1?long"},{name:"chats",type:"Vector<Chat>"},{name:"counters",type:"flags.2?Vector<StarGiftAttributeCounter>"},{name:"users",type:"Vector<User>"}],type:"payments.ResaleStarGifts"},{id:-1012968668,predicate:"inputInvoiceStarGiftResale",params:[{name:"flags",type:"#"},{name:"ton",type:"flags.0?true"},{name:"slug",type:"string"},{name:"to_id",type:"InputPeer"}],type:"InputInvoice"},{id:-988285058,predicate:"channelAdminLogEventActionToggleAutotranslation",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-1014513586,predicate:"stories.canSendStoryCount",params:[{name:"count_remains",type:"int"}],type:"stories.CanSendStoryCount"},{id:-404214254,predicate:"pendingSuggestion",params:[{name:"suggestion",type:"string"},{name:"title",type:"TextWithEntities"},{name:"description",type:"TextWithEntities"},{name:"url",type:"string"}],type:"PendingSuggestion"},{id:1775660101,predicate:"inputReplyToMonoForum",params:[{name:"monoforum_peer_id",type:"InputPeer"}],type:"InputReplyTo"},{id:1681948327,predicate:"monoForumDialog",params:[{name:"flags",type:"#"},{name:"unread_mark",type:"flags.3?true"},{name:"nopaid_messages_exception",type:"flags.4?true"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"unread_reactions_count",type:"int"},{name:"draft",type:"flags.1?DraftMessage"}],type:"SavedDialog"},{id:2008081266,predicate:"updateReadMonoForumInbox",params:[{name:"channel_id",type:"long"},{name:"saved_peer_id",type:"Peer"},{name:"read_max_id",type:"int"}],type:"Update"},{id:-1532521610,predicate:"updateReadMonoForumOutbox",params:[{name:"channel_id",type:"long"},{name:"saved_peer_id",type:"Peer"},{name:"read_max_id",type:"int"}],type:"Update"},{id:-878074577,predicate:"todoItem",params:[{name:"id",type:"int"},{name:"title",type:"TextWithEntities"}],type:"TodoItem"},{id:1236871718,predicate:"todoList",params:[{name:"flags",type:"#"},{name:"others_can_append",type:"flags.0?true"},{name:"others_can_complete",type:"flags.1?true"},{name:"title",type:"TextWithEntities"},{name:"list",type:"Vector<TodoItem>"}],type:"TodoList"},{id:572241380,predicate:"todoCompletion",params:[{name:"id",type:"int"},{name:"completed_by",type:"Peer"},{name:"date",type:"int"}],type:"TodoCompletion"},{id:-1614454818,predicate:"inputMediaTodo",params:[{name:"todo",type:"TodoList"}],type:"InputMedia"},{id:-1974226924,predicate:"messageMediaToDo",params:[{name:"flags",type:"#"},{name:"todo",type:"TodoList"},{name:"completions",type:"flags.0?Vector<TodoCompletion>"}],type:"MessageMedia"},{id:-864265079,predicate:"messageActionTodoCompletions",params:[{name:"completed",type:"Vector<int>"},{name:"incompleted",type:"Vector<int>"}],type:"MessageAction"},{id:-940721021,predicate:"messageActionTodoAppendTasks",params:[{name:"list",type:"Vector<TodoItem>"}],type:"MessageAction"},{id:-1618924792,predicate:"updateMonoForumNoPaidException",params:[{name:"flags",type:"#"},{name:"exception",type:"flags.0?true"},{name:"channel_id",type:"long"},{name:"saved_peer_id",type:"Peer"}],type:"Update"},{id:244201445,predicate:"suggestedPost",params:[{name:"flags",type:"#"},{name:"accepted",type:"flags.1?true"},{name:"rejected",type:"flags.2?true"},{name:"price",type:"flags.3?StarsAmount"},{name:"schedule_date",type:"flags.0?int"}],type:"SuggestedPost"},{id:-293988970,predicate:"messageActionSuggestedPostApproval",params:[{name:"flags",type:"#"},{name:"rejected",type:"flags.0?true"},{name:"balance_too_low",type:"flags.1?true"},{name:"reject_comment",type:"flags.2?string"},{name:"schedule_date",type:"flags.3?int"},{name:"price",type:"flags.4?StarsAmount"}],type:"MessageAction"},{id:-1780625559,predicate:"messageActionSuggestedPostSuccess",params:[{name:"price",type:"StarsAmount"}],type:"MessageAction"},{id:1777932024,predicate:"messageActionSuggestedPostRefund",params:[{name:"flags",type:"#"},{name:"payer_initiated",type:"flags.0?true"}],type:"MessageAction"},{id:1957618656,predicate:"starsTonAmount",params:[{name:"amount",type:"long"}],type:"StarsAmount"},{id:-1465661799,predicate:"messageActionGiftTon",params:[{name:"flags",type:"#"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"crypto_currency",type:"string"},{name:"crypto_amount",type:"long"},{name:"transaction_id",type:"flags.0?string"}],type:"MessageAction"},{id:485912992,predicate:"inputStickerSetTonGifts",params:[],type:"InputStickerSet"},{id:453922567,predicate:"starsRating",params:[{name:"flags",type:"#"},{name:"level",type:"int"},{name:"current_level_stars",type:"long"},{name:"stars",type:"long"},{name:"next_level_stars",type:"flags.0?long"}],type:"StarsRating"},{id:-1653926992,predicate:"starGiftCollection",params:[{name:"flags",type:"#"},{name:"collection_id",type:"int"},{name:"title",type:"string"},{name:"icon",type:"flags.0?Document"},{name:"gifts_count",type:"int"},{name:"hash",type:"long"}],type:"StarGiftCollection"},{id:-1598402793,predicate:"payments.starGiftCollectionsNotModified",params:[],type:"payments.StarGiftCollections"},{id:-1977011469,predicate:"payments.starGiftCollections",params:[{name:"collections",type:"Vector<StarGiftCollection>"}],type:"payments.StarGiftCollections"},{id:-1826262950,predicate:"storyAlbum",params:[{name:"flags",type:"#"},{name:"album_id",type:"int"},{name:"title",type:"string"},{name:"icon_photo",type:"flags.0?Photo"},{name:"icon_video",type:"flags.1?Document"}],type:"StoryAlbum"},{id:1448008427,predicate:"stories.albumsNotModified",params:[],type:"stories.Albums"},{id:-1013417414,predicate:"stories.albums",params:[{name:"hash",type:"long"},{name:"albums",type:"Vector<StoryAlbum>"}],type:"stories.Albums"},{id:1040931690,predicate:"searchPostsFlood",params:[{name:"flags",type:"#"},{name:"query_is_free",type:"flags.0?true"},{name:"total_daily",type:"int"},{name:"remains",type:"int"},{name:"wait_till",type:"flags.1?int"},{name:"stars_amount",type:"long"}],type:"SearchPostsFlood"},{id:835375875,predicate:"webPageAttributeStarGiftCollection",params:[{name:"icons",type:"Vector<Document>"}],type:"WebPageAttribute"},{id:-1710536520,predicate:"inputInvoiceStarGiftPrepaidUpgrade",params:[{name:"peer",type:"InputPeer"},{name:"hash",type:"string"}],type:"InputInvoice"},{id:1362093126,predicate:"payments.uniqueStarGiftValueInfo",params:[{name:"flags",type:"#"},{name:"last_sale_on_fragment",type:"flags.1?true"},{name:"value_is_average",type:"flags.6?true"},{name:"currency",type:"string"},{name:"value",type:"long"},{name:"initial_sale_date",type:"int"},{name:"initial_sale_stars",type:"long"},{name:"initial_sale_price",type:"long"},{name:"last_sale_date",type:"flags.0?int"},{name:"last_sale_price",type:"flags.0?long"},{name:"floor_price",type:"flags.2?long"},{name:"average_price",type:"flags.3?long"},{name:"listed_count",type:"flags.4?int"},{name:"fragment_listed_count",type:"flags.5?int"},{name:"fragment_listed_url",type:"flags.5?string"}],type:"payments.UniqueStarGiftValueInfo"},{id:-1181952362,predicate:"profileTabPosts",params:[],type:"ProfileTab"},{id:1296815210,predicate:"profileTabGifts",params:[],type:"ProfileTab"},{id:1925597525,predicate:"profileTabMedia",params:[],type:"ProfileTab"},{id:-1422681088,predicate:"profileTabFiles",params:[],type:"ProfileTab"},{id:-1624780178,predicate:"profileTabMusic",params:[],type:"ProfileTab"},{id:-461960914,predicate:"profileTabVoice",params:[],type:"ProfileTab"},{id:-748329831,predicate:"profileTabLinks",params:[],type:"ProfileTab"},{id:-1564412267,predicate:"profileTabGifs",params:[],type:"ProfileTab"},{id:-477656412,predicate:"users.savedMusicNotModified",params:[{name:"count",type:"int"}],type:"users.SavedMusic"},{id:883094167,predicate:"users.savedMusic",params:[{name:"count",type:"int"},{name:"documents",type:"Vector<Document>"}],type:"users.SavedMusic"},{id:1338514798,predicate:"account.savedMusicIdsNotModified",params:[],type:"account.SavedMusicIds"},{id:-1718786506,predicate:"account.savedMusicIds",params:[{name:"ids",type:"Vector<long>"}],type:"account.SavedMusicIds"},{id:927967149,predicate:"payments.checkCanSendGiftResultOk",params:[],type:"payments.CheckCanSendGiftResult"},{id:-706379148,predicate:"payments.checkCanSendGiftResultFail",params:[{name:"reason",type:"TextWithEntities"}],type:"payments.CheckCanSendGiftResult"},{id:878246344,predicate:"chatThemeUniqueGift",params:[{name:"gift",type:"StarGift"},{name:"theme_settings",type:"Vector<ThemeSettings>"}],type:"ChatTheme"},{id:-2094627709,predicate:"inputChatThemeEmpty",params:[],type:"InputChatTheme"},{id:-918689444,predicate:"inputChatTheme",params:[{name:"emoticon",type:"string"}],type:"InputChatTheme"},{id:-2014978076,predicate:"inputChatThemeUniqueGift",params:[{name:"slug",type:"string"}],type:"InputChatTheme"},{id:1048049172,predicate:"inputInvoicePremiumAuthCode",params:[{name:"purpose",type:"InputStorePaymentPurpose"}],type:"InputInvoice"},{id:153344209,predicate:"inputInvoiceStarGiftDropOriginalDetails",params:[{name:"stargift",type:"InputSavedStarGift"}],type:"InputInvoice"},{id:-1712704739,predicate:"starGiftUpgradePrice",params:[{name:"date",type:"int"},{name:"upgrade_stars",type:"long"}],type:"StarGiftUpgradePrice"},{id:929929052,predicate:"sendMessageTextDraftAction",params:[{name:"random_id",type:"long"},{name:"text",type:"TextWithEntities"}],type:"SendMessageAction"},{id:-667783411,predicate:"updateGroupCallMessage",params:[{name:"call",type:"InputGroupCall"},{name:"message",type:"GroupCallMessage"}],type:"Update"},{id:-917002394,predicate:"updateGroupCallEncryptedMessage",params:[{name:"call",type:"InputGroupCall"},{name:"from_id",type:"Peer"},{name:"encrypted_message",type:"bytes"}],type:"Update"},{id:1748708434,predicate:"updatePinnedForumTopic",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"topic_id",type:"int"}],type:"Update"},{id:-554613808,predicate:"updatePinnedForumTopics",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"order",type:"flags.0?Vector<int>"}],type:"Update"},{id:-1178573926,predicate:"peerColorCollectible",params:[{name:"flags",type:"#"},{name:"collectible_id",type:"long"},{name:"gift_emoji_id",type:"long"},{name:"background_emoji_id",type:"long"},{name:"accent_color",type:"int"},{name:"colors",type:"Vector<int>"},{name:"dark_accent_color",type:"flags.0?int"},{name:"dark_colors",type:"flags.1?Vector<int>"}],type:"PeerColor"},{id:-1192589655,predicate:"inputPeerColorCollectible",params:[{name:"collectible_id",type:"long"}],type:"PeerColor"},{id:747579941,predicate:"messageActionSuggestBirthday",params:[{name:"birthday",type:"Birthday"}],type:"MessageAction"},{id:-899896439,predicate:"messageMediaVideoStream",params:[{name:"flags",type:"#"},{name:"rtmp_stream",type:"flags.0?true"},{name:"call",type:"InputGroupCall"}],type:"MessageMedia"},{id:1048963372,predicate:"updateDeleteGroupCallMessages",params:[{name:"call",type:"InputGroupCall"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:445316222,predicate:"groupCallMessage",params:[{name:"flags",type:"#"},{name:"from_admin",type:"flags.1?true"},{name:"id",type:"int"},{name:"from_id",type:"Peer"},{name:"date",type:"int"},{name:"message",type:"TextWithEntities"},{name:"paid_message_stars",type:"flags.0?long"}],type:"GroupCallMessage"},{id:1304334886,predicate:"inputPrivacyKeySavedMusic",params:[],type:"InputPrivacyKey"},{id:-8759525,predicate:"privacyKeySavedMusic",params:[],type:"PrivacyKey"},{id:-297595771,predicate:"groupCallDonor",params:[{name:"flags",type:"#"},{name:"top",type:"flags.0?true"},{name:"my",type:"flags.1?true"},{name:"peer_id",type:"flags.3?Peer"},{name:"stars",type:"long"}],type:"GroupCallDonor"},{id:-1658995418,predicate:"phone.groupCallStars",params:[{name:"total_stars",type:"long"},{name:"top_donors",type:"Vector<GroupCallDonor>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.GroupCallStars"},{id:1897752877,predicate:"recentStory",params:[{name:"flags",type:"#"},{name:"live",type:"flags.0?true"},{name:"max_id",type:"flags.1?int"}],type:"RecentStory"},{id:516618768,predicate:"inputInvoiceStarGiftAuctionBid",params:[{name:"flags",type:"#"},{name:"hide_name",type:"flags.0?true"},{name:"update_bid",type:"flags.2?true"},{name:"peer",type:"flags.3?InputPeer"},{name:"gift_id",type:"long"},{name:"bid_amount",type:"long"},{name:"message",type:"flags.1?TextWithEntities"}],type:"InputInvoice"},{id:822231244,predicate:"auctionBidLevel",params:[{name:"pos",type:"int"},{name:"amount",type:"long"},{name:"date",type:"int"}],type:"AuctionBidLevel"},{id:-30197422,predicate:"starGiftAuctionStateNotModified",params:[],type:"StarGiftAuctionState"},{id:1998212710,predicate:"starGiftAuctionState",params:[{name:"version",type:"int"},{name:"start_date",type:"int"},{name:"end_date",type:"int"},{name:"min_bid_amount",type:"long"},{name:"bid_levels",type:"Vector<AuctionBidLevel>"},{name:"top_bidders",type:"Vector<long>"},{name:"next_round_at",type:"int"},{name:"last_gift_num",type:"int"},{name:"gifts_left",type:"int"},{name:"current_round",type:"int"},{name:"total_rounds",type:"int"},{name:"rounds",type:"Vector<StarGiftAuctionRound>"}],type:"StarGiftAuctionState"},{id:-1758614593,predicate:"starGiftAuctionStateFinished",params:[{name:"flags",type:"#"},{name:"start_date",type:"int"},{name:"end_date",type:"int"},{name:"average_price",type:"long"},{name:"listed_count",type:"flags.0?int"},{name:"fragment_listed_count",type:"flags.1?int"},{name:"fragment_listed_url",type:"flags.1?string"}],type:"StarGiftAuctionState"},{id:787403204,predicate:"starGiftAuctionUserState",params:[{name:"flags",type:"#"},{name:"returned",type:"flags.1?true"},{name:"bid_amount",type:"flags.0?long"},{name:"bid_date",type:"flags.0?int"},{name:"min_bid_amount",type:"flags.0?long"},{name:"bid_peer",type:"flags.0?Peer"},{name:"acquired_count",type:"int"}],type:"StarGiftAuctionUserState"},{id:1222788802,predicate:"updateStarGiftAuctionState",params:[{name:"gift_id",type:"long"},{name:"state",type:"StarGiftAuctionState"}],type:"Update"},{id:-598150370,predicate:"updateStarGiftAuctionUserState",params:[{name:"gift_id",type:"long"},{name:"user_state",type:"StarGiftAuctionUserState"}],type:"Update"},{id:1798960364,predicate:"payments.starGiftAuctionState",params:[{name:"gift",type:"StarGift"},{name:"state",type:"StarGiftAuctionState"},{name:"user_state",type:"StarGiftAuctionUserState"},{name:"timeout",type:"int"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"}],type:"payments.StarGiftAuctionState"},{id:1118831432,predicate:"starGiftAuctionAcquiredGift",params:[{name:"flags",type:"#"},{name:"name_hidden",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"bid_amount",type:"long"},{name:"round",type:"int"},{name:"pos",type:"int"},{name:"message",type:"flags.1?TextWithEntities"},{name:"gift_num",type:"flags.2?int"}],type:"StarGiftAuctionAcquiredGift"},{id:2103169520,predicate:"payments.starGiftAuctionAcquiredGifts",params:[{name:"gifts",type:"Vector<StarGiftAuctionAcquiredGift>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"}],type:"payments.StarGiftAuctionAcquiredGifts"},{id:-753154979,predicate:"starGiftActiveAuctionState",params:[{name:"gift",type:"StarGift"},{name:"state",type:"StarGiftAuctionState"},{name:"user_state",type:"StarGiftAuctionUserState"}],type:"StarGiftActiveAuctionState"},{id:-617358640,predicate:"payments.starGiftActiveAuctionsNotModified",params:[],type:"payments.StarGiftActiveAuctions"},{id:-1359565892,predicate:"payments.starGiftActiveAuctions",params:[{name:"auctions",type:"Vector<StarGiftActiveAuctionState>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"}],type:"payments.StarGiftActiveAuctions"},{id:48327832,predicate:"inputStarGiftAuction",params:[{name:"gift_id",type:"long"}],type:"InputStarGiftAuction"},{id:2058715912,predicate:"inputStarGiftAuctionSlug",params:[{name:"slug",type:"string"}],type:"InputStarGiftAuction"},{id:29770178,predicate:"webPageAttributeStarGiftAuction",params:[{name:"gift",type:"StarGift"},{name:"end_date",type:"int"}],type:"WebPageAttribute"},{id:-1738457409,predicate:"passkey",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"name",type:"string"},{name:"date",type:"int"},{name:"software_emoji_id",type:"flags.0?long"},{name:"last_usage_date",type:"flags.1?int"}],type:"Passkey"},{id:-119494116,predicate:"account.passkeys",params:[{name:"passkeys",type:"Vector<Passkey>"}],type:"account.Passkeys"},{id:-513057567,predicate:"account.passkeyRegistrationOptions",params:[{name:"options",type:"DataJSON"}],type:"account.PasskeyRegistrationOptions"},{id:-503089271,predicate:"auth.passkeyLoginOptions",params:[{name:"options",type:"DataJSON"}],type:"auth.PasskeyLoginOptions"},{id:1046713180,predicate:"inputPasskeyResponseRegister",params:[{name:"client_data",type:"DataJSON"},{name:"attestation_data",type:"bytes"}],type:"InputPasskeyResponse"},{id:-1021329078,predicate:"inputPasskeyResponseLogin",params:[{name:"client_data",type:"DataJSON"},{name:"authenticator_data",type:"bytes"},{name:"signature",type:"bytes"},{name:"user_handle",type:"string"}],type:"InputPasskeyResponse"},{id:1009235855,predicate:"inputPasskeyCredentialPublicKey",params:[{name:"id",type:"string"},{name:"raw_id",type:"string"},{name:"response",type:"InputPasskeyResponse"}],type:"InputPasskeyCredential"},{id:2000845012,predicate:"messageActionStarGiftPurchaseOffer",params:[{name:"flags",type:"#"},{name:"accepted",type:"flags.0?true"},{name:"declined",type:"flags.1?true"},{name:"gift",type:"StarGift"},{name:"price",type:"StarsAmount"},{name:"expires_at",type:"int"}],type:"MessageAction"},{id:1940760427,predicate:"messageActionStarGiftPurchaseOfferDeclined",params:[{name:"flags",type:"#"},{name:"expired",type:"flags.0?true"},{name:"gift",type:"StarGift"},{name:"price",type:"StarsAmount"}],type:"MessageAction"},{id:-1342872680,predicate:"starGiftBackground",params:[{name:"center_color",type:"int"},{name:"edge_color",type:"int"},{name:"text_color",type:"int"}],type:"StarGiftBackground"},{id:984483112,predicate:"starGiftAuctionRound",params:[{name:"num",type:"int"},{name:"duration",type:"int"}],type:"StarGiftAuctionRound"},{id:178266597,predicate:"starGiftAuctionRoundExtendable",params:[{name:"num",type:"int"},{name:"duration",type:"int"},{name:"extend_top",type:"int"},{name:"extend_window",type:"int"}],type:"StarGiftAuctionRound"},{id:1187439471,predicate:"payments.starGiftUpgradeAttributes",params:[{name:"attributes",type:"Vector<StarGiftAttribute>"}],type:"payments.StarGiftUpgradeAttributes"},{id:-634726841,predicate:"messages.emojiGameOutcome",params:[{name:"seed",type:"bytes"},{name:"stake_ton_amount",type:"long"},{name:"ton_amount",type:"long"}],type:"messages.EmojiGameOutcome"},{id:-207018934,predicate:"inputMediaStakeDice",params:[{name:"game_hash",type:"string"},{name:"ton_amount",type:"long"},{name:"client_seed",type:"bytes"}],type:"InputMedia"},{id:1508266805,predicate:"messages.emojiGameUnavailable",params:[],type:"messages.EmojiGameInfo"},{id:1155883043,predicate:"messages.emojiGameDiceInfo",params:[{name:"flags",type:"#"},{name:"game_hash",type:"string"},{name:"prev_stake",type:"long"},{name:"current_streak",type:"int"},{name:"params",type:"Vector<int>"},{name:"plays_left",type:"flags.0?int"}],type:"messages.EmojiGameInfo"},{id:-73640838,predicate:"updateEmojiGameInfo",params:[{name:"info",type:"messages.EmojiGameInfo"}],type:"Update"},{id:1528613672,predicate:"inputPasskeyCredentialFirebasePNV",params:[{name:"pnv_token",type:"string"}],type:"InputPasskeyCredential"},{id:910391095,predicate:"starGiftAttributeRarity",params:[{name:"permille",type:"int"}],type:"StarGiftAttributeRarity"},{id:-607231095,predicate:"starGiftAttributeRarityUncommon",params:[],type:"StarGiftAttributeRarity"},{id:-259174037,predicate:"starGiftAttributeRarityRare",params:[],type:"StarGiftAttributeRarity"},{id:2029777832,predicate:"starGiftAttributeRarityEpic",params:[],type:"StarGiftAttributeRarity"},{id:-822614104,predicate:"starGiftAttributeRarityLegendary",params:[],type:"StarGiftAttributeRarity"},{id:-1408818108,predicate:"updateStarGiftCraftFail",params:[],type:"Update"},{id:1339896880,predicate:"keyboardButtonStyle",params:[{name:"flags",type:"#"},{name:"bg_primary",type:"flags.0?true"},{name:"bg_danger",type:"flags.1?true"},{name:"bg_success",type:"flags.2?true"},{name:"icon",type:"flags.3?long"}],type:"KeyboardButtonStyle"},{id:-1333866363,predicate:"messageActionNewCreatorPending",params:[{name:"new_creator_id",type:"long"}],type:"MessageAction"},{id:-511160261,predicate:"messageActionChangeCreator",params:[{name:"new_creator_id",type:"long"}],type:"MessageAction"}],methods:[{id:-878758099,method:"invokeAfterMsg",params:[{name:"msg_id",type:"long"},{name:"query",type:"!X"}],type:"X"},{id:1036301552,method:"invokeAfterMsgs",params:[{name:"msg_ids",type:"Vector<long>"},{name:"query",type:"!X"}],type:"X"},{id:-1502141361,method:"auth.sendCode",params:[{name:"phone_number",type:"string"},{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:-1429752041,method:"auth.signUp",params:[{name:"flags",type:"#"},{name:"no_joined_notifications",type:"flags.0?true"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"}],type:"auth.Authorization"},{id:-1923962543,method:"auth.signIn",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"flags.0?string"},{name:"email_verification",type:"flags.1?EmailVerification"}],type:"auth.Authorization"},{id:1047706137,method:"auth.logOut",params:[],type:"auth.LoggedOut"},{id:-1616179942,method:"auth.resetAuthorizations",params:[],type:"Bool"},{id:-440401971,method:"auth.exportAuthorization",params:[{name:"dc_id",type:"int"}],type:"auth.ExportedAuthorization"},{id:-1518699091,method:"auth.importAuthorization",params:[{name:"id",type:"long"},{name:"bytes",type:"bytes"}],type:"auth.Authorization"},{id:-841733627,method:"auth.bindTempAuthKey",params:[{name:"perm_auth_key_id",type:"long"},{name:"nonce",type:"long"},{name:"expires_at",type:"int"},{name:"encrypted_message",type:"bytes"}],type:"Bool"},{id:-326762118,method:"account.registerDevice",params:[{name:"flags",type:"#"},{name:"no_muted",type:"flags.0?true"},{name:"token_type",type:"int"},{name:"token",type:"string"},{name:"app_sandbox",type:"Bool"},{name:"secret",type:"bytes"},{name:"other_uids",type:"Vector<long>"}],type:"Bool"},{id:1779249670,method:"account.unregisterDevice",params:[{name:"token_type",type:"int"},{name:"token",type:"string"},{name:"other_uids",type:"Vector<long>"}],type:"Bool"},{id:-2067899501,method:"account.updateNotifySettings",params:[{name:"peer",type:"InputNotifyPeer"},{name:"settings",type:"InputPeerNotifySettings"}],type:"Bool"},{id:313765169,method:"account.getNotifySettings",params:[{name:"peer",type:"InputNotifyPeer"}],type:"PeerNotifySettings"},{id:-612493497,method:"account.resetNotifySettings",params:[],type:"Bool"},{id:2018596725,method:"account.updateProfile",params:[{name:"flags",type:"#"},{name:"first_name",type:"flags.0?string"},{name:"last_name",type:"flags.1?string"},{name:"about",type:"flags.2?string"}],type:"User"},{id:1713919532,method:"account.updateStatus",params:[{name:"offline",type:"Bool"}],type:"Bool"},{id:127302966,method:"account.getWallPapers",params:[{name:"hash",type:"long"}],type:"account.WallPapers"},{id:-977650298,method:"account.reportPeer",params:[{name:"peer",type:"InputPeer"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:227648840,method:"users.getUsers",params:[{name:"id",type:"Vector<InputUser>"}],type:"Vector<User>"},{id:-1240508136,method:"users.getFullUser",params:[{name:"id",type:"InputUser"}],type:"users.UserFull"},{id:2061264541,method:"contacts.getContactIDs",params:[{name:"hash",type:"long"}],type:"Vector<int>"},{id:-995929106,method:"contacts.getStatuses",params:[],type:"Vector<ContactStatus>"},{id:1574346258,method:"contacts.getContacts",params:[{name:"hash",type:"long"}],type:"contacts.Contacts"},{id:746589157,method:"contacts.importContacts",params:[{name:"contacts",type:"Vector<InputContact>"}],type:"contacts.ImportedContacts"},{id:157945344,method:"contacts.deleteContacts",params:[{name:"id",type:"Vector<InputUser>"}],type:"Updates"},{id:269745566,method:"contacts.deleteByPhones",params:[{name:"phones",type:"Vector<string>"}],type:"Bool"},{id:774801204,method:"contacts.block",params:[{name:"flags",type:"#"},{name:"my_stories_from",type:"flags.0?true"},{name:"id",type:"InputPeer"}],type:"Bool"},{id:-1252994264,method:"contacts.unblock",params:[{name:"flags",type:"#"},{name:"my_stories_from",type:"flags.0?true"},{name:"id",type:"InputPeer"}],type:"Bool"},{id:-1702457472,method:"contacts.getBlocked",params:[{name:"flags",type:"#"},{name:"my_stories_from",type:"flags.0?true"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"contacts.Blocked"},{id:1673946374,method:"messages.getMessages",params:[{name:"id",type:"Vector<InputMessage>"}],type:"messages.Messages"},{id:-1594569905,method:"messages.getDialogs",params:[{name:"flags",type:"#"},{name:"exclude_pinned",type:"flags.0?true"},{name:"folder_id",type:"flags.1?int"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Dialogs"},{id:1143203525,method:"messages.getHistory",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:703497338,method:"messages.search",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"q",type:"string"},{name:"from_id",type:"flags.0?InputPeer"},{name:"saved_peer_id",type:"flags.2?InputPeer"},{name:"saved_reaction",type:"flags.3?Vector<Reaction>"},{name:"top_msg_id",type:"flags.1?int"},{name:"filter",type:"MessagesFilter"},{name:"min_date",type:"int"},{name:"max_date",type:"int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:238054714,method:"messages.readHistory",params:[{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"}],type:"messages.AffectedMessages"},{id:-1332768214,method:"messages.deleteHistory",params:[{name:"flags",type:"#"},{name:"just_clear",type:"flags.0?true"},{name:"revoke",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"},{name:"min_date",type:"flags.2?int"},{name:"max_date",type:"flags.3?int"}],type:"messages.AffectedHistory"},{id:-443640366,method:"messages.deleteMessages",params:[{name:"flags",type:"#"},{name:"revoke",type:"flags.0?true"},{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:94983360,method:"messages.receivedMessages",params:[{name:"max_id",type:"int"}],type:"Vector<ReceivedNotifyMessage>"},{id:1486110434,method:"messages.setTyping",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"action",type:"SendMessageAction"}],type:"Bool"},{id:1415369050,method:"messages.sendMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"invert_media",type:"flags.16?true"},{name:"allow_paid_floodskip",type:"flags.19?true"},{name:"peer",type:"InputPeer"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"message",type:"string"},{name:"random_id",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.10?int"},{name:"schedule_repeat_period",type:"flags.24?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"},{name:"effect",type:"flags.18?long"},{name:"allow_paid_stars",type:"flags.21?long"},{name:"suggested_post",type:"flags.22?SuggestedPost"}],type:"Updates"},{id:53536639,method:"messages.sendMedia",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"invert_media",type:"flags.16?true"},{name:"allow_paid_floodskip",type:"flags.19?true"},{name:"peer",type:"InputPeer"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"media",type:"InputMedia"},{name:"message",type:"string"},{name:"random_id",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.10?int"},{name:"schedule_repeat_period",type:"flags.24?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"},{name:"effect",type:"flags.18?long"},{name:"allow_paid_stars",type:"flags.21?long"},{name:"suggested_post",type:"flags.22?SuggestedPost"}],type:"Updates"},{id:326126204,method:"messages.forwardMessages",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"with_my_score",type:"flags.8?true"},{name:"drop_author",type:"flags.11?true"},{name:"drop_media_captions",type:"flags.12?true"},{name:"noforwards",type:"flags.14?true"},{name:"allow_paid_floodskip",type:"flags.19?true"},{name:"from_peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"random_id",type:"Vector<long>"},{name:"to_peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.9?int"},{name:"reply_to",type:"flags.22?InputReplyTo"},{name:"schedule_date",type:"flags.10?int"},{name:"schedule_repeat_period",type:"flags.24?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"},{name:"effect",type:"flags.18?long"},{name:"video_timestamp",type:"flags.20?int"},{name:"allow_paid_stars",type:"flags.21?long"},{name:"suggested_post",type:"flags.23?SuggestedPost"}],type:"Updates"},{id:-820669733,method:"messages.reportSpam",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-270948702,method:"messages.getPeerSettings",params:[{name:"peer",type:"InputPeer"}],type:"messages.PeerSettings"},{id:-59199589,method:"messages.report",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"option",type:"bytes"},{name:"message",type:"string"}],type:"ReportResult"},{id:1240027791,method:"messages.getChats",params:[{name:"id",type:"Vector<long>"}],type:"messages.Chats"},{id:-1364194508,method:"messages.getFullChat",params:[{name:"chat_id",type:"long"}],type:"messages.ChatFull"},{id:1937260541,method:"messages.editChatTitle",params:[{name:"chat_id",type:"long"},{name:"title",type:"string"}],type:"Updates"},{id:903730804,method:"messages.editChatPhoto",params:[{name:"chat_id",type:"long"},{name:"photo",type:"InputChatPhoto"}],type:"Updates"},{id:-876162809,method:"messages.addChatUser",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"},{name:"fwd_limit",type:"int"}],type:"messages.InvitedUsers"},{id:-1575461717,method:"messages.deleteChatUser",params:[{name:"flags",type:"#"},{name:"revoke_history",type:"flags.0?true"},{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:-1831936556,method:"messages.createChat",params:[{name:"flags",type:"#"},{name:"users",type:"Vector<InputUser>"},{name:"title",type:"string"},{name:"ttl_period",type:"flags.0?int"}],type:"messages.InvitedUsers"},{id:-304838614,method:"updates.getState",params:[],type:"updates.State"},{id:432207715,method:"updates.getDifference",params:[{name:"flags",type:"#"},{name:"pts",type:"int"},{name:"pts_limit",type:"flags.1?int"},{name:"pts_total_limit",type:"flags.0?int"},{name:"date",type:"int"},{name:"qts",type:"int"},{name:"qts_limit",type:"flags.2?int"}],type:"updates.Difference"},{id:166207545,method:"photos.updateProfilePhoto",params:[{name:"flags",type:"#"},{name:"fallback",type:"flags.0?true"},{name:"bot",type:"flags.1?InputUser"},{name:"id",type:"InputPhoto"}],type:"photos.Photo"},{id:59286453,method:"photos.uploadProfilePhoto",params:[{name:"flags",type:"#"},{name:"fallback",type:"flags.3?true"},{name:"bot",type:"flags.5?InputUser"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.4?VideoSize"}],type:"photos.Photo"},{id:-2016444625,method:"photos.deletePhotos",params:[{name:"id",type:"Vector<InputPhoto>"}],type:"Vector<long>"},{id:-1291540959,method:"upload.saveFilePart",params:[{name:"file_id",type:"long"},{name:"file_part",type:"int"},{name:"bytes",type:"bytes"}],type:"Bool"},{id:-1101843010,method:"upload.getFile",params:[{name:"flags",type:"#"},{name:"precise",type:"flags.0?true"},{name:"cdn_supported",type:"flags.1?true"},{name:"location",type:"InputFileLocation"},{name:"offset",type:"long"},{name:"limit",type:"int"}],type:"upload.File"},{id:-990308245,method:"help.getConfig",params:[],type:"Config"},{id:531836966,method:"help.getNearestDc",params:[],type:"NearestDc"},{id:1378703997,method:"help.getAppUpdate",params:[{name:"source",type:"string"}],type:"help.AppUpdate"},{id:1295590211,method:"help.getInviteText",params:[],type:"help.InviteText"},{id:-1848823128,method:"photos.getUserPhotos",params:[{name:"user_id",type:"InputUser"},{name:"offset",type:"int"},{name:"max_id",type:"long"},{name:"limit",type:"int"}],type:"photos.Photos"},{id:651135312,method:"messages.getDhConfig",params:[{name:"version",type:"int"},{name:"random_length",type:"int"}],type:"messages.DhConfig"},{id:-162681021,method:"messages.requestEncryption",params:[{name:"user_id",type:"InputUser"},{name:"random_id",type:"int"},{name:"g_a",type:"bytes"}],type:"EncryptedChat"},{id:1035731989,method:"messages.acceptEncryption",params:[{name:"peer",type:"InputEncryptedChat"},{name:"g_b",type:"bytes"},{name:"key_fingerprint",type:"long"}],type:"EncryptedChat"},{id:-208425312,method:"messages.discardEncryption",params:[{name:"flags",type:"#"},{name:"delete_history",type:"flags.0?true"},{name:"chat_id",type:"int"}],type:"Bool"},{id:2031374829,method:"messages.setEncryptedTyping",params:[{name:"peer",type:"InputEncryptedChat"},{name:"typing",type:"Bool"}],type:"Bool"},{id:2135648522,method:"messages.readEncryptedHistory",params:[{name:"peer",type:"InputEncryptedChat"},{name:"max_date",type:"int"}],type:"Bool"},{id:1157265941,method:"messages.sendEncrypted",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"}],type:"messages.SentEncryptedMessage"},{id:1431914525,method:"messages.sendEncryptedFile",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"},{name:"file",type:"InputEncryptedFile"}],type:"messages.SentEncryptedMessage"},{id:852769188,method:"messages.sendEncryptedService",params:[{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"}],type:"messages.SentEncryptedMessage"},{id:1436924774,method:"messages.receivedQueue",params:[{name:"max_qts",type:"int"}],type:"Vector<long>"},{id:1259113487,method:"messages.reportEncryptedSpam",params:[{name:"peer",type:"InputEncryptedChat"}],type:"Bool"},{id:-562337987,method:"upload.saveBigFilePart",params:[{name:"file_id",type:"long"},{name:"file_part",type:"int"},{name:"file_total_parts",type:"int"},{name:"bytes",type:"bytes"}],type:"Bool"},{id:-1043505495,method:"initConnection",params:[{name:"flags",type:"#"},{name:"api_id",type:"int"},{name:"device_model",type:"string"},{name:"system_version",type:"string"},{name:"app_version",type:"string"},{name:"system_lang_code",type:"string"},{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"proxy",type:"flags.0?InputClientProxy"},{name:"params",type:"flags.1?JSONValue"},{name:"query",type:"!X"}],type:"X"},{id:-1663104819,method:"help.getSupport",params:[],type:"help.Support"},{id:916930423,method:"messages.readMessageContents",params:[{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:655677548,method:"account.checkUsername",params:[{name:"username",type:"string"}],type:"Bool"},{id:1040964988,method:"account.updateUsername",params:[{name:"username",type:"string"}],type:"User"},{id:301470424,method:"contacts.search",params:[{name:"q",type:"string"},{name:"limit",type:"int"}],type:"contacts.Found"},{id:-623130288,method:"account.getPrivacy",params:[{name:"key",type:"InputPrivacyKey"}],type:"account.PrivacyRules"},{id:-906486552,method:"account.setPrivacy",params:[{name:"key",type:"InputPrivacyKey"},{name:"rules",type:"Vector<InputPrivacyRule>"}],type:"account.PrivacyRules"},{id:-1564422284,method:"account.deleteAccount",params:[{name:"flags",type:"#"},{name:"reason",type:"string"},{name:"password",type:"flags.0?InputCheckPasswordSRP"}],type:"Bool"},{id:150761757,method:"account.getAccountTTL",params:[],type:"AccountDaysTTL"},{id:608323678,method:"account.setAccountTTL",params:[{name:"ttl",type:"AccountDaysTTL"}],type:"Bool"},{id:-627372787,method:"invokeWithLayer",params:[{name:"layer",type:"int"},{name:"query",type:"!X"}],type:"X"},{id:1918565308,method:"contacts.resolveUsername",params:[{name:"flags",type:"#"},{name:"username",type:"string"},{name:"referer",type:"flags.0?string"}],type:"contacts.ResolvedPeer"},{id:-2108208411,method:"account.sendChangePhoneCode",params:[{name:"phone_number",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1891839707,method:"account.changePhone",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"User"},{id:-710552671,method:"messages.getStickers",params:[{name:"emoticon",type:"string"},{name:"hash",type:"long"}],type:"messages.Stickers"},{id:-1197432408,method:"messages.getAllStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:954152242,method:"account.updateDeviceLocked",params:[{name:"period",type:"int"}],type:"Bool"},{id:1738800940,method:"auth.importBotAuthorization",params:[{name:"flags",type:"int"},{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"bot_auth_token",type:"string"}],type:"auth.Authorization"},{id:1460498287,method:"messages.getWebPagePreview",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"messages.WebPagePreview"},{id:-484392616,method:"account.getAuthorizations",params:[],type:"account.Authorizations"},{id:-545786948,method:"account.resetAuthorization",params:[{name:"hash",type:"long"}],type:"Bool"},{id:1418342645,method:"account.getPassword",params:[],type:"account.Password"},{id:-1663767815,method:"account.getPasswordSettings",params:[{name:"password",type:"InputCheckPasswordSRP"}],type:"account.PasswordSettings"},{id:-1516564433,method:"account.updatePasswordSettings",params:[{name:"password",type:"InputCheckPasswordSRP"},{name:"new_settings",type:"account.PasswordInputSettings"}],type:"Bool"},{id:-779399914,method:"auth.checkPassword",params:[{name:"password",type:"InputCheckPasswordSRP"}],type:"auth.Authorization"},{id:-661144474,method:"auth.requestPasswordRecovery",params:[],type:"auth.PasswordRecovery"},{id:923364464,method:"auth.recoverPassword",params:[{name:"flags",type:"#"},{name:"code",type:"string"},{name:"new_settings",type:"flags.0?account.PasswordInputSettings"}],type:"auth.Authorization"},{id:-1080796745,method:"invokeWithoutUpdates",params:[{name:"query",type:"!X"}],type:"X"},{id:-1537876336,method:"messages.exportChatInvite",params:[{name:"flags",type:"#"},{name:"legacy_revoke_permanent",type:"flags.2?true"},{name:"request_needed",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"expire_date",type:"flags.0?int"},{name:"usage_limit",type:"flags.1?int"},{name:"title",type:"flags.4?string"},{name:"subscription_pricing",type:"flags.5?StarsSubscriptionPricing"}],type:"ExportedChatInvite"},{id:1051570619,method:"messages.checkChatInvite",params:[{name:"hash",type:"string"}],type:"ChatInvite"},{id:1817183516,method:"messages.importChatInvite",params:[{name:"hash",type:"string"}],type:"Updates"},{id:-928977804,method:"messages.getStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"hash",type:"int"}],type:"messages.StickerSet"},{id:-946871200,method:"messages.installStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"archived",type:"Bool"}],type:"messages.StickerSetInstallResult"},{id:-110209570,method:"messages.uninstallStickerSet",params:[{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:-421563528,method:"messages.startBot",params:[{name:"bot",type:"InputUser"},{name:"peer",type:"InputPeer"},{name:"random_id",type:"long"},{name:"start_param",type:"string"}],type:"Updates"},{id:1468322785,method:"messages.getMessagesViews",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"increment",type:"Bool"}],type:"messages.MessageViews"},{id:-871347913,method:"channels.readHistory",params:[{name:"channel",type:"InputChannel"},{name:"max_id",type:"int"}],type:"Bool"},{id:-2067661490,method:"channels.deleteMessages",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:-196443371,method:"channels.reportSpam",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-1383294429,method:"channels.getMessages",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<InputMessage>"}],type:"messages.Messages"},{id:2010044880,method:"channels.getParticipants",params:[{name:"channel",type:"InputChannel"},{name:"filter",type:"ChannelParticipantsFilter"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"channels.ChannelParticipants"},{id:-1599378234,method:"channels.getParticipant",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"}],type:"channels.ChannelParticipant"},{id:176122811,method:"channels.getChannels",params:[{name:"id",type:"Vector<InputChannel>"}],type:"messages.Chats"},{id:141781513,method:"channels.getFullChannel",params:[{name:"channel",type:"InputChannel"}],type:"messages.ChatFull"},{id:-1862244601,method:"channels.createChannel",params:[{name:"flags",type:"#"},{name:"broadcast",type:"flags.0?true"},{name:"megagroup",type:"flags.1?true"},{name:"for_import",type:"flags.3?true"},{name:"forum",type:"flags.5?true"},{name:"title",type:"string"},{name:"about",type:"string"},{name:"geo_point",type:"flags.2?InputGeoPoint"},{name:"address",type:"flags.2?string"},{name:"ttl_period",type:"flags.4?int"}],type:"Updates"},{id:-751007486,method:"channels.editAdmin",params:[{name:"channel",type:"InputChannel"},{name:"user_id",type:"InputUser"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"string"}],type:"Updates"},{id:1450044624,method:"channels.editTitle",params:[{name:"channel",type:"InputChannel"},{name:"title",type:"string"}],type:"Updates"},{id:-248621111,method:"channels.editPhoto",params:[{name:"channel",type:"InputChannel"},{name:"photo",type:"InputChatPhoto"}],type:"Updates"},{id:283557164,method:"channels.checkUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"}],type:"Bool"},{id:890549214,method:"channels.updateUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"}],type:"Bool"},{id:615851205,method:"channels.joinChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-130635115,method:"channels.leaveChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-907854508,method:"channels.inviteToChannel",params:[{name:"channel",type:"InputChannel"},{name:"users",type:"Vector<InputUser>"}],type:"messages.InvitedUsers"},{id:-1072619549,method:"channels.deleteChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:51854712,method:"updates.getChannelDifference",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"filter",type:"ChannelMessagesFilter"},{name:"pts",type:"int"},{name:"limit",type:"int"}],type:"updates.ChannelDifference"},{id:-1470377534,method:"messages.editChatAdmin",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"},{name:"is_admin",type:"Bool"}],type:"Bool"},{id:-1568189671,method:"messages.migrateChat",params:[{name:"chat_id",type:"long"}],type:"Updates"},{id:1271290010,method:"messages.searchGlobal",params:[{name:"flags",type:"#"},{name:"broadcasts_only",type:"flags.1?true"},{name:"groups_only",type:"flags.2?true"},{name:"users_only",type:"flags.3?true"},{name:"folder_id",type:"flags.0?int"},{name:"q",type:"string"},{name:"filter",type:"MessagesFilter"},{name:"min_date",type:"int"},{name:"max_date",type:"int"},{name:"offset_rate",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:2016638777,method:"messages.reorderStickerSets",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"order",type:"Vector<long>"}],type:"Bool"},{id:-1309538785,method:"messages.getDocumentByHash",params:[{name:"sha256",type:"bytes"},{name:"size",type:"long"},{name:"mime_type",type:"string"}],type:"Document"},{id:1559270965,method:"messages.getSavedGifs",params:[{name:"hash",type:"long"}],type:"messages.SavedGifs"},{id:846868683,method:"messages.saveGif",params:[{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:1364105629,method:"messages.getInlineBotResults",params:[{name:"flags",type:"#"},{name:"bot",type:"InputUser"},{name:"peer",type:"InputPeer"},{name:"geo_point",type:"flags.0?InputGeoPoint"},{name:"query",type:"string"},{name:"offset",type:"string"}],type:"messages.BotResults"},{id:-1156406247,method:"messages.setInlineBotResults",params:[{name:"flags",type:"#"},{name:"gallery",type:"flags.0?true"},{name:"private",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"results",type:"Vector<InputBotInlineResult>"},{name:"cache_time",type:"int"},{name:"next_offset",type:"flags.2?string"},{name:"switch_pm",type:"flags.3?InlineBotSwitchPM"},{name:"switch_webview",type:"flags.4?InlineBotWebView"}],type:"Bool"},{id:-1060145594,method:"messages.sendInlineBotResult",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"hide_via",type:"flags.11?true"},{name:"peer",type:"InputPeer"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"random_id",type:"long"},{name:"query_id",type:"long"},{name:"id",type:"string"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"},{name:"allow_paid_stars",type:"flags.21?long"}],type:"Updates"},{id:-432034325,method:"channels.exportMessageLink",params:[{name:"flags",type:"#"},{name:"grouped",type:"flags.0?true"},{name:"thread",type:"flags.1?true"},{name:"channel",type:"InputChannel"},{name:"id",type:"int"}],type:"ExportedMessageLink"},{id:1099781276,method:"channels.toggleSignatures",params:[{name:"flags",type:"#"},{name:"signatures_enabled",type:"flags.0?true"},{name:"profiles_enabled",type:"flags.1?true"},{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-890997469,method:"auth.resendCode",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"reason",type:"flags.0?string"}],type:"auth.SentCode"},{id:520357240,method:"auth.cancelCode",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"Bool"},{id:-39416522,method:"messages.getMessageEditData",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"messages.MessageEditData"},{id:1374175969,method:"messages.editMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"invert_media",type:"flags.16?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"message",type:"flags.11?string"},{name:"media",type:"flags.14?InputMedia"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.15?int"},{name:"schedule_repeat_period",type:"flags.18?int"},{name:"quick_reply_shortcut_id",type:"flags.17?int"}],type:"Updates"},{id:-2091549254,method:"messages.editInlineBotMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"invert_media",type:"flags.16?true"},{name:"id",type:"InputBotInlineMessageID"},{name:"message",type:"flags.11?string"},{name:"media",type:"flags.14?InputMedia"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"Bool"},{id:-1824339449,method:"messages.getBotCallbackAnswer",params:[{name:"flags",type:"#"},{name:"game",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"data",type:"flags.0?bytes"},{name:"password",type:"flags.2?InputCheckPasswordSRP"}],type:"messages.BotCallbackAnswer"},{id:-712043766,method:"messages.setBotCallbackAnswer",params:[{name:"flags",type:"#"},{name:"alert",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"message",type:"flags.0?string"},{name:"url",type:"flags.2?string"},{name:"cache_time",type:"int"}],type:"Bool"},{id:-1758168906,method:"contacts.getTopPeers",params:[{name:"flags",type:"#"},{name:"correspondents",type:"flags.0?true"},{name:"bots_pm",type:"flags.1?true"},{name:"bots_inline",type:"flags.2?true"},{name:"phone_calls",type:"flags.3?true"},{name:"forward_users",type:"flags.4?true"},{name:"forward_chats",type:"flags.5?true"},{name:"groups",type:"flags.10?true"},{name:"channels",type:"flags.15?true"},{name:"bots_app",type:"flags.16?true"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"contacts.TopPeers"},{id:451113900,method:"contacts.resetTopPeerRating",params:[{name:"category",type:"TopPeerCategory"},{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-462373635,method:"messages.getPeerDialogs",params:[{name:"peers",type:"Vector<InputDialogPeer>"}],type:"messages.PeerDialogs"},{id:1420701838,method:"messages.saveDraft",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"invert_media",type:"flags.6?true"},{name:"reply_to",type:"flags.4?InputReplyTo"},{name:"peer",type:"InputPeer"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"media",type:"flags.5?InputMedia"},{name:"effect",type:"flags.7?long"},{name:"suggested_post",type:"flags.8?SuggestedPost"}],type:"Bool"},{id:1782549861,method:"messages.getAllDrafts",params:[],type:"Updates"},{id:1685588756,method:"messages.getFeaturedStickers",params:[{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:1527873830,method:"messages.readFeaturedStickers",params:[{name:"id",type:"Vector<long>"}],type:"Bool"},{id:-1649852357,method:"messages.getRecentStickers",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"},{name:"hash",type:"long"}],type:"messages.RecentStickers"},{id:958863608,method:"messages.saveRecentSticker",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"},{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:-1986437075,method:"messages.clearRecentStickers",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"}],type:"Bool"},{id:1475442322,method:"messages.getArchivedStickers",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"offset_id",type:"long"},{name:"limit",type:"int"}],type:"messages.ArchivedStickers"},{id:457157256,method:"account.sendConfirmPhoneCode",params:[{name:"hash",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1596029123,method:"account.confirmPhone",params:[{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"Bool"},{id:-122669393,method:"channels.getAdminedPublicChannels",params:[{name:"flags",type:"#"},{name:"by_location",type:"flags.0?true"},{name:"check_limit",type:"flags.1?true"},{name:"for_personal",type:"flags.2?true"}],type:"messages.Chats"},{id:1678738104,method:"messages.getMaskStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:-866424884,method:"messages.getAttachedStickers",params:[{name:"media",type:"InputStickeredMedia"}],type:"Vector<StickerSetCovered>"},{id:-1907842680,method:"auth.dropTempAuthKeys",params:[{name:"except_auth_keys",type:"Vector<long>"}],type:"Bool"},{id:-1896289088,method:"messages.setGameScore",params:[{name:"flags",type:"#"},{name:"edit_message",type:"flags.0?true"},{name:"force",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"user_id",type:"InputUser"},{name:"score",type:"int"}],type:"Updates"},{id:363700068,method:"messages.setInlineGameScore",params:[{name:"flags",type:"#"},{name:"edit_message",type:"flags.0?true"},{name:"force",type:"flags.1?true"},{name:"id",type:"InputBotInlineMessageID"},{name:"user_id",type:"InputUser"},{name:"score",type:"int"}],type:"Bool"},{id:-400399203,method:"messages.getGameHighScores",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"user_id",type:"InputUser"}],type:"messages.HighScores"},{id:258170395,method:"messages.getInlineGameHighScores",params:[{name:"id",type:"InputBotInlineMessageID"},{name:"user_id",type:"InputUser"}],type:"messages.HighScores"},{id:-468934396,method:"messages.getCommonChats",params:[{name:"user_id",type:"InputUser"},{name:"max_id",type:"long"},{name:"limit",type:"int"}],type:"messages.Chats"},{id:-333262899,method:"help.setBotUpdatesStatus",params:[{name:"pending_updates_count",type:"int"},{name:"message",type:"string"}],type:"Bool"},{id:-1919511901,method:"messages.getWebPage",params:[{name:"url",type:"string"},{name:"hash",type:"int"}],type:"messages.WebPage"},{id:-1489903017,method:"messages.toggleDialogPin",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:991616823,method:"messages.reorderPinnedDialogs",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"folder_id",type:"int"},{name:"order",type:"Vector<InputDialogPeer>"}],type:"Bool"},{id:-692498958,method:"messages.getPinnedDialogs",params:[{name:"folder_id",type:"int"}],type:"messages.PeerDialogs"},{id:-1440257555,method:"bots.sendCustomRequest",params:[{name:"custom_method",type:"string"},{name:"params",type:"DataJSON"}],type:"DataJSON"},{id:-434028723,method:"bots.answerWebhookJSONQuery",params:[{name:"query_id",type:"long"},{name:"data",type:"DataJSON"}],type:"Bool"},{id:619086221,method:"upload.getWebFile",params:[{name:"location",type:"InputWebFileLocation"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"upload.WebFile"},{id:924093883,method:"payments.getPaymentForm",params:[{name:"flags",type:"#"},{name:"invoice",type:"InputInvoice"},{name:"theme_params",type:"flags.0?DataJSON"}],type:"payments.PaymentForm"},{id:611897804,method:"payments.getPaymentReceipt",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"payments.PaymentReceipt"},{id:-1228345045,method:"payments.validateRequestedInfo",params:[{name:"flags",type:"#"},{name:"save",type:"flags.0?true"},{name:"invoice",type:"InputInvoice"},{name:"info",type:"PaymentRequestedInfo"}],type:"payments.ValidatedRequestedInfo"},{id:755192367,method:"payments.sendPaymentForm",params:[{name:"flags",type:"#"},{name:"form_id",type:"long"},{name:"invoice",type:"InputInvoice"},{name:"requested_info_id",type:"flags.0?string"},{name:"shipping_option_id",type:"flags.1?string"},{name:"credentials",type:"InputPaymentCredentials"},{name:"tip_amount",type:"flags.2?long"}],type:"payments.PaymentResult"},{id:1151208273,method:"account.getTmpPassword",params:[{name:"password",type:"InputCheckPasswordSRP"},{name:"period",type:"int"}],type:"account.TmpPassword"},{id:578650699,method:"payments.getSavedInfo",params:[],type:"payments.SavedInfo"},{id:-667062079,method:"payments.clearSavedInfo",params:[{name:"flags",type:"#"},{name:"credentials",type:"flags.0?true"},{name:"info",type:"flags.1?true"}],type:"Bool"},{id:-436833542,method:"messages.setBotShippingResults",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"error",type:"flags.0?string"},{name:"shipping_options",type:"flags.1?Vector<ShippingOption>"}],type:"Bool"},{id:163765653,method:"messages.setBotPrecheckoutResults",params:[{name:"flags",type:"#"},{name:"success",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"error",type:"flags.0?string"}],type:"Bool"},{id:-1876841625,method:"stickers.createStickerSet",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.5?true"},{name:"text_color",type:"flags.6?true"},{name:"user_id",type:"InputUser"},{name:"title",type:"string"},{name:"short_name",type:"string"},{name:"thumb",type:"flags.2?InputDocument"},{name:"stickers",type:"Vector<InputStickerSetItem>"},{name:"software",type:"flags.3?string"}],type:"messages.StickerSet"},{id:-143257775,method:"stickers.removeStickerFromSet",params:[{name:"sticker",type:"InputDocument"}],type:"messages.StickerSet"},{id:-4795190,method:"stickers.changeStickerPosition",params:[{name:"sticker",type:"InputDocument"},{name:"position",type:"int"}],type:"messages.StickerSet"},{id:-2041315650,method:"stickers.addStickerToSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"sticker",type:"InputStickerSetItem"}],type:"messages.StickerSet"},{id:345405816,method:"messages.uploadMedia",params:[{name:"flags",type:"#"},{name:"business_connection_id",type:"flags.0?string"},{name:"peer",type:"InputPeer"},{name:"media",type:"InputMedia"}],type:"MessageMedia"},{id:1430593449,method:"phone.getCallConfig",params:[],type:"DataJSON"},{id:1124046573,method:"phone.requestCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"user_id",type:"InputUser"},{name:"random_id",type:"int"},{name:"g_a_hash",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:1003664544,method:"phone.acceptCall",params:[{name:"peer",type:"InputPhoneCall"},{name:"g_b",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:788404002,method:"phone.confirmCall",params:[{name:"peer",type:"InputPhoneCall"},{name:"g_a",type:"bytes"},{name:"key_fingerprint",type:"long"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:399855457,method:"phone.receivedCall",params:[{name:"peer",type:"InputPhoneCall"}],type:"Bool"},{id:-1295269440,method:"phone.discardCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"peer",type:"InputPhoneCall"},{name:"duration",type:"int"},{name:"reason",type:"PhoneCallDiscardReason"},{name:"connection_id",type:"long"}],type:"Updates"},{id:1508562471,method:"phone.setCallRating",params:[{name:"flags",type:"#"},{name:"user_initiative",type:"flags.0?true"},{name:"peer",type:"InputPhoneCall"},{name:"rating",type:"int"},{name:"comment",type:"string"}],type:"Updates"},{id:662363518,method:"phone.saveCallDebug",params:[{name:"peer",type:"InputPhoneCall"},{name:"debug",type:"DataJSON"}],type:"Bool"},{id:962554330,method:"upload.getCdnFile",params:[{name:"file_token",type:"bytes"},{name:"offset",type:"long"},{name:"limit",type:"int"}],type:"upload.CdnFile"},{id:-1691921240,method:"upload.reuploadCdnFile",params:[{name:"file_token",type:"bytes"},{name:"request_token",type:"bytes"}],type:"Vector<FileHash>"},{id:1375900482,method:"help.getCdnConfig",params:[],type:"CdnConfig"},{id:-219008246,method:"langpack.getLangPack",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"}],type:"LangPackDifference"},{id:-269862909,method:"langpack.getStrings",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"keys",type:"Vector<string>"}],type:"Vector<LangPackString>"},{id:-845657435,method:"langpack.getDifference",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"from_version",type:"int"}],type:"LangPackDifference"},{id:1120311183,method:"langpack.getLanguages",params:[{name:"lang_pack",type:"string"}],type:"Vector<LangPackLanguage>"},{id:-1763259007,method:"channels.editBanned",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"},{name:"banned_rights",type:"ChatBannedRights"}],type:"Updates"},{id:870184064,method:"channels.getAdminLog",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"q",type:"string"},{name:"events_filter",type:"flags.0?ChannelAdminLogEventsFilter"},{name:"admins",type:"flags.1?Vector<InputUser>"},{name:"max_id",type:"long"},{name:"min_id",type:"long"},{name:"limit",type:"int"}],type:"channels.AdminLogResults"},{id:-1847836879,method:"upload.getCdnFileHashes",params:[{name:"file_token",type:"bytes"},{name:"offset",type:"long"}],type:"Vector<FileHash>"},{id:-1589618665,method:"messages.sendScreenshotNotification",params:[{name:"peer",type:"InputPeer"},{name:"reply_to",type:"InputReplyTo"},{name:"random_id",type:"long"}],type:"Updates"},{id:-359881479,method:"channels.setStickers",params:[{name:"channel",type:"InputChannel"},{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:82946729,method:"messages.getFavedStickers",params:[{name:"hash",type:"long"}],type:"messages.FavedStickers"},{id:-1174420133,method:"messages.faveSticker",params:[{name:"id",type:"InputDocument"},{name:"unfave",type:"Bool"}],type:"Bool"},{id:-357180360,method:"channels.readMessageContents",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-2020263951,method:"contacts.resetSaved",params:[],type:"Bool"},{id:-251140208,method:"messages.getUnreadMentions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"}],type:"messages.Messages"},{id:-1683319225,method:"channels.deleteHistory",params:[{name:"flags",type:"#"},{name:"for_everyone",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"max_id",type:"int"}],type:"Updates"},{id:1036054804,method:"help.getRecentMeUrls",params:[{name:"referer",type:"string"}],type:"help.RecentMeUrls"},{id:-356796084,method:"channels.togglePreHistoryHidden",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:921026381,method:"messages.readMentions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"}],type:"messages.AffectedHistory"},{id:1881817312,method:"messages.getRecentLocations",params:[{name:"peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:469278068,method:"messages.sendMultiMedia",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"invert_media",type:"flags.16?true"},{name:"allow_paid_floodskip",type:"flags.19?true"},{name:"peer",type:"InputPeer"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"multi_media",type:"Vector<InputSingleMedia>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"},{name:"quick_reply_shortcut",type:"flags.17?InputQuickReplyShortcut"},{name:"effect",type:"flags.18?long"},{name:"allow_paid_stars",type:"flags.21?long"}],type:"Updates"},{id:1347929239,method:"messages.uploadEncryptedFile",params:[{name:"peer",type:"InputEncryptedChat"},{name:"file",type:"InputEncryptedFile"}],type:"EncryptedFile"},{id:405695855,method:"account.getWebAuthorizations",params:[],type:"account.WebAuthorizations"},{id:755087855,method:"account.resetWebAuthorization",params:[{name:"hash",type:"long"}],type:"Bool"},{id:1747789204,method:"account.resetWebAuthorizations",params:[],type:"Bool"},{id:896555914,method:"messages.searchStickerSets",params:[{name:"flags",type:"#"},{name:"exclude_featured",type:"flags.0?true"},{name:"q",type:"string"},{name:"hash",type:"long"}],type:"messages.FoundStickerSets"},{id:-1856595926,method:"upload.getFileHashes",params:[{name:"location",type:"InputFileLocation"},{name:"offset",type:"long"}],type:"Vector<FileHash>"},{id:749019089,method:"help.getTermsOfServiceUpdate",params:[],type:"help.TermsOfServiceUpdate"},{id:-294455398,method:"help.acceptTermsOfService",params:[{name:"id",type:"DataJSON"}],type:"Bool"},{id:-1299661699,method:"account.getAllSecureValues",params:[],type:"Vector<SecureValue>"},{id:1936088002,method:"account.getSecureValue",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"Vector<SecureValue>"},{id:-1986010339,method:"account.saveSecureValue",params:[{name:"value",type:"InputSecureValue"},{name:"secure_secret_id",type:"long"}],type:"SecureValue"},{id:-1199522741,method:"account.deleteSecureValue",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"Bool"},{id:-1865902923,method:"users.setSecureValueErrors",params:[{name:"id",type:"InputUser"},{name:"errors",type:"Vector<SecureValueError>"}],type:"Bool"},{id:-1456907910,method:"account.getAuthorizationForm",params:[{name:"bot_id",type:"long"},{name:"scope",type:"string"},{name:"public_key",type:"string"}],type:"account.AuthorizationForm"},{id:-202552205,method:"account.acceptAuthorization",params:[{name:"bot_id",type:"long"},{name:"scope",type:"string"},{name:"public_key",type:"string"},{name:"value_hashes",type:"Vector<SecureValueHash>"},{name:"credentials",type:"SecureCredentialsEncrypted"}],type:"Bool"},{id:-1516022023,method:"account.sendVerifyPhoneCode",params:[{name:"phone_number",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1305716726,method:"account.verifyPhone",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"Bool"},{id:-1730136133,method:"account.sendVerifyEmailCode",params:[{name:"purpose",type:"EmailVerifyPurpose"},{name:"email",type:"string"}],type:"account.SentEmailCode"},{id:53322959,method:"account.verifyEmail",params:[{name:"purpose",type:"EmailVerifyPurpose"},{name:"verification",type:"EmailVerification"}],type:"account.EmailVerified"},{id:1072547679,method:"help.getDeepLinkInfo",params:[{name:"path",type:"string"}],type:"help.DeepLinkInfo"},{id:-2098076769,method:"contacts.getSaved",params:[],type:"Vector<SavedContact>"},{id:-2092831552,method:"channels.getLeftChannels",params:[{name:"offset",type:"int"}],type:"messages.Chats"},{id:-1896617296,method:"account.initTakeoutSession",params:[{name:"flags",type:"#"},{name:"contacts",type:"flags.0?true"},{name:"message_users",type:"flags.1?true"},{name:"message_chats",type:"flags.2?true"},{name:"message_megagroups",type:"flags.3?true"},{name:"message_channels",type:"flags.4?true"},{name:"files",type:"flags.5?true"},{name:"file_max_size",type:"flags.5?long"}],type:"account.Takeout"},{id:489050862,method:"account.finishTakeoutSession",params:[{name:"flags",type:"#"},{name:"success",type:"flags.0?true"}],type:"Bool"},{id:486505992,method:"messages.getSplitRanges",params:[],type:"Vector<MessageRange>"},{id:911373810,method:"invokeWithMessagesRange",params:[{name:"range",type:"MessageRange"},{name:"query",type:"!X"}],type:"X"},{id:-1398145746,method:"invokeWithTakeout",params:[{name:"takeout_id",type:"long"},{name:"query",type:"!X"}],type:"X"},{id:-1940912392,method:"messages.markDialogUnread",params:[{name:"flags",type:"#"},{name:"unread",type:"flags.0?true"},{name:"parent_peer",type:"flags.1?InputPeer"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:555754018,method:"messages.getDialogUnreadMarks",params:[{name:"flags",type:"#"},{name:"parent_peer",type:"flags.0?InputPeer"}],type:"Vector<DialogPeer>"},{id:-2062238246,method:"contacts.toggleTopPeers",params:[{name:"enabled",type:"Bool"}],type:"Bool"},{id:2119757468,method:"messages.clearAllDrafts",params:[],type:"Bool"},{id:1642330196,method:"help.getAppConfig",params:[{name:"hash",type:"int"}],type:"help.AppConfig"},{id:1862465352,method:"help.saveAppLog",params:[{name:"events",type:"Vector<InputAppEvent>"}],type:"Bool"},{id:-966677240,method:"help.getPassportConfig",params:[{name:"hash",type:"int"}],type:"help.PassportConfig"},{id:1784243458,method:"langpack.getLanguage",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"}],type:"LangPackLanguage"},{id:-760547348,method:"messages.updatePinnedMessage",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"unpin",type:"flags.1?true"},{name:"pm_oneside",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"Updates"},{id:-1881204448,method:"account.confirmPasswordEmail",params:[{name:"code",type:"string"}],type:"Bool"},{id:2055154197,method:"account.resendPasswordEmail",params:[],type:"Bool"},{id:-1043606090,method:"account.cancelPasswordEmail",params:[],type:"Bool"},{id:-748624084,method:"help.getSupportName",params:[],type:"help.SupportName"},{id:59377875,method:"help.getUserInfo",params:[{name:"user_id",type:"InputUser"}],type:"help.UserInfo"},{id:1723407216,method:"help.editUserInfo",params:[{name:"user_id",type:"InputUser"},{name:"message",type:"string"},{name:"entities",type:"Vector<MessageEntity>"}],type:"help.UserInfo"},{id:-1626880216,method:"account.getContactSignUpNotification",params:[],type:"Bool"},{id:-806076575,method:"account.setContactSignUpNotification",params:[{name:"silent",type:"Bool"}],type:"Bool"},{id:1398240377,method:"account.getNotifyExceptions",params:[{name:"flags",type:"#"},{name:"compare_sound",type:"flags.1?true"},{name:"compare_stories",type:"flags.2?true"},{name:"peer",type:"flags.0?InputNotifyPeer"}],type:"Updates"},{id:283795844,method:"messages.sendVote",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"options",type:"Vector<bytes>"}],type:"Updates"},{id:1941660731,method:"messages.getPollResults",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Updates"},{id:1848369232,method:"messages.getOnlines",params:[{name:"peer",type:"InputPeer"}],type:"ChatOnlines"},{id:-554301545,method:"messages.editChatAbout",params:[{name:"peer",type:"InputPeer"},{name:"about",type:"string"}],type:"Bool"},{id:-1517917375,method:"messages.editChatDefaultBannedRights",params:[{name:"peer",type:"InputPeer"},{name:"banned_rights",type:"ChatBannedRights"}],type:"Updates"},{id:-57811990,method:"account.getWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"}],type:"WallPaper"},{id:-476410109,method:"account.uploadWallPaper",params:[{name:"flags",type:"#"},{name:"for_chat",type:"flags.0?true"},{name:"file",type:"InputFile"},{name:"mime_type",type:"string"},{name:"settings",type:"WallPaperSettings"}],type:"WallPaper"},{id:1817860919,method:"account.saveWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"},{name:"unsave",type:"Bool"},{name:"settings",type:"WallPaperSettings"}],type:"Bool"},{id:-18000023,method:"account.installWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"},{name:"settings",type:"WallPaperSettings"}],type:"Bool"},{id:-1153722364,method:"account.resetWallPapers",params:[],type:"Bool"},{id:1457130303,method:"account.getAutoDownloadSettings",params:[],type:"account.AutoDownloadSettings"},{id:1995661875,method:"account.saveAutoDownloadSettings",params:[{name:"flags",type:"#"},{name:"low",type:"flags.0?true"},{name:"high",type:"flags.1?true"},{name:"settings",type:"AutoDownloadSettings"}],type:"Bool"},{id:899735650,method:"messages.getEmojiKeywords",params:[{name:"lang_code",type:"string"}],type:"EmojiKeywordsDifference"},{id:352892591,method:"messages.getEmojiKeywordsDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"}],type:"EmojiKeywordsDifference"},{id:1318675378,method:"messages.getEmojiKeywordsLanguages",params:[{name:"lang_codes",type:"Vector<string>"}],type:"Vector<EmojiLanguage>"},{id:-709817306,method:"messages.getEmojiURL",params:[{name:"lang_code",type:"string"}],type:"EmojiURL"},{id:1749536939,method:"folders.editPeerFolders",params:[{name:"folder_peers",type:"Vector<InputFolderPeer>"}],type:"Updates"},{id:465367808,method:"messages.getSearchCounters",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"saved_peer_id",type:"flags.2?InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"filters",type:"Vector<MessagesFilter>"}],type:"Vector<messages.SearchCounter>"},{id:-170208392,method:"channels.getGroupsForDiscussion",params:[],type:"messages.Chats"},{id:1079520178,method:"channels.setDiscussionGroup",params:[{name:"broadcast",type:"InputChannel"},{name:"group",type:"InputChannel"}],type:"Bool"},{id:428848198,method:"messages.requestUrlAuth",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.1?InputPeer"},{name:"msg_id",type:"flags.1?int"},{name:"button_id",type:"flags.1?int"},{name:"url",type:"flags.2?string"}],type:"UrlAuthResult"},{id:-1322487515,method:"messages.acceptUrlAuth",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"share_phone_number",type:"flags.3?true"},{name:"peer",type:"flags.1?InputPeer"},{name:"msg_id",type:"flags.1?int"},{name:"button_id",type:"flags.1?int"},{name:"url",type:"flags.2?string"}],type:"UrlAuthResult"},{id:1336717624,method:"messages.hidePeerSettingsBar",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-642109868,method:"contacts.addContact",params:[{name:"flags",type:"#"},{name:"add_phone_privacy_exception",type:"flags.0?true"},{name:"id",type:"InputUser"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"phone",type:"string"},{name:"note",type:"flags.1?TextWithEntities"}],type:"Updates"},{id:-130964977,method:"contacts.acceptContact",params:[{name:"id",type:"InputUser"}],type:"Updates"},{id:-1892102881,method:"channels.editCreator",params:[{name:"channel",type:"InputChannel"},{name:"user_id",type:"InputUser"},{name:"password",type:"InputCheckPasswordSRP"}],type:"Updates"},{id:-750207932,method:"contacts.getLocated",params:[{name:"flags",type:"#"},{name:"background",type:"flags.1?true"},{name:"geo_point",type:"InputGeoPoint"},{name:"self_expires",type:"flags.0?int"}],type:"Updates"},{id:1491484525,method:"channels.editLocation",params:[{name:"channel",type:"InputChannel"},{name:"geo_point",type:"InputGeoPoint"},{name:"address",type:"string"}],type:"Bool"},{id:-304832784,method:"channels.toggleSlowMode",params:[{name:"channel",type:"InputChannel"},{name:"seconds",type:"int"}],type:"Updates"},{id:-183077365,method:"messages.getScheduledHistory",params:[{name:"peer",type:"InputPeer"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:-1111817116,method:"messages.getScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"messages.Messages"},{id:-1120369398,method:"messages.sendScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1504586518,method:"messages.deleteScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:473805619,method:"account.uploadTheme",params:[{name:"flags",type:"#"},{name:"file",type:"InputFile"},{name:"thumb",type:"flags.0?InputFile"},{name:"file_name",type:"string"},{name:"mime_type",type:"string"}],type:"Document"},{id:1697530880,method:"account.createTheme",params:[{name:"flags",type:"#"},{name:"slug",type:"string"},{name:"title",type:"string"},{name:"document",type:"flags.2?InputDocument"},{name:"settings",type:"flags.3?Vector<InputThemeSettings>"}],type:"Theme"},{id:737414348,method:"account.updateTheme",params:[{name:"flags",type:"#"},{name:"format",type:"string"},{name:"theme",type:"InputTheme"},{name:"slug",type:"flags.0?string"},{name:"title",type:"flags.1?string"},{name:"document",type:"flags.2?InputDocument"},{name:"settings",type:"flags.3?Vector<InputThemeSettings>"}],type:"Theme"},{id:-229175188,method:"account.saveTheme",params:[{name:"theme",type:"InputTheme"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:-953697477,method:"account.installTheme",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"theme",type:"flags.1?InputTheme"},{name:"format",type:"flags.2?string"},{name:"base_theme",type:"flags.3?BaseTheme"}],type:"Bool"},{id:978872812,method:"account.getTheme",params:[{name:"format",type:"string"},{name:"theme",type:"InputTheme"}],type:"Theme"},{id:1913054296,method:"account.getThemes",params:[{name:"format",type:"string"},{name:"hash",type:"long"}],type:"account.Themes"},{id:-1210022402,method:"auth.exportLoginToken",params:[{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"except_ids",type:"Vector<long>"}],type:"auth.LoginToken"},{id:-1783866140,method:"auth.importLoginToken",params:[{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:-392909491,method:"auth.acceptLoginToken",params:[{name:"token",type:"bytes"}],type:"Authorization"},{id:-1250643605,method:"account.setContentSettings",params:[{name:"flags",type:"#"},{name:"sensitive_enabled",type:"flags.0?true"}],type:"Bool"},{id:-1952756306,method:"account.getContentSettings",params:[],type:"account.ContentSettings"},{id:300429806,method:"channels.getInactiveChannels",params:[],type:"messages.InactiveChats"},{id:1705865692,method:"account.getMultiWallPapers",params:[{name:"wallpapers",type:"Vector<InputWallPaper>"}],type:"Vector<WallPaper>"},{id:-1200736242,method:"messages.getPollVotes",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"option",type:"flags.0?bytes"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"messages.VotesList"},{id:-1257951254,method:"messages.toggleStickerSets",params:[{name:"flags",type:"#"},{name:"uninstall",type:"flags.0?true"},{name:"archive",type:"flags.1?true"},{name:"unarchive",type:"flags.2?true"},{name:"stickersets",type:"Vector<InputStickerSet>"}],type:"Bool"},{id:779736953,method:"payments.getBankCardData",params:[{name:"number",type:"string"}],type:"payments.BankCardData"},{id:-271283063,method:"messages.getDialogFilters",params:[],type:"messages.DialogFilters"},{id:-1566780372,method:"messages.getSuggestedDialogFilters",params:[],type:"Vector<DialogFilterSuggested>"},{id:450142282,method:"messages.updateDialogFilter",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"filter",type:"flags.0?DialogFilter"}],type:"Bool"},{id:-983318044,method:"messages.updateDialogFiltersOrder",params:[{name:"order",type:"Vector<int>"}],type:"Bool"},{id:-1421720550,method:"stats.getBroadcastStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.BroadcastStats"},{id:1646092192,method:"stats.loadAsyncGraph",params:[{name:"flags",type:"#"},{name:"token",type:"string"},{name:"x",type:"flags.0?long"}],type:"StatsGraph"},{id:-1486204014,method:"stickers.setStickerSetThumb",params:[{name:"flags",type:"#"},{name:"stickerset",type:"InputStickerSet"},{name:"thumb",type:"flags.0?InputDocument"},{name:"thumb_document_id",type:"flags.1?long"}],type:"messages.StickerSet"},{id:85399130,method:"bots.setBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"},{name:"commands",type:"Vector<BotCommand>"}],type:"Bool"},{id:2127598753,method:"messages.getOldFeaturedStickers",params:[{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:-1063816159,method:"help.getPromoData",params:[],type:"help.PromoData"},{id:505748629,method:"help.hidePromoData",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-8744061,method:"phone.sendSignalingData",params:[{name:"peer",type:"InputPhoneCall"},{name:"data",type:"bytes"}],type:"Bool"},{id:-589330937,method:"stats.getMegagroupStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.MegagroupStats"},{id:-349483786,method:"account.getGlobalPrivacySettings",params:[],type:"GlobalPrivacySettings"},{id:517647042,method:"account.setGlobalPrivacySettings",params:[{name:"settings",type:"GlobalPrivacySettings"}],type:"GlobalPrivacySettings"},{id:-183649631,method:"help.dismissSuggestion",params:[{name:"peer",type:"InputPeer"},{name:"suggestion",type:"string"}],type:"Bool"},{id:1935116200,method:"help.getCountriesList",params:[{name:"lang_code",type:"string"},{name:"hash",type:"int"}],type:"help.CountriesList"},{id:584962828,method:"messages.getReplies",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:1147761405,method:"messages.getDiscussionMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"messages.DiscussionMessage"},{id:-147740172,method:"messages.readDiscussion",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"read_max_id",type:"int"}],type:"Bool"},{id:698914348,method:"contacts.blockFromReplies",params:[{name:"flags",type:"#"},{name:"delete_message",type:"flags.0?true"},{name:"delete_history",type:"flags.1?true"},{name:"report_spam",type:"flags.2?true"},{name:"msg_id",type:"int"}],type:"Updates"},{id:1595212100,method:"stats.getMessagePublicForwards",params:[{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"stats.PublicForwards"},{id:-1226791947,method:"stats.getMessageStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"stats.MessageStats"},{id:103667527,method:"messages.unpinAllMessages",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"saved_peer_id",type:"flags.1?InputPeer"}],type:"messages.AffectedHistory"},{id:1221445336,method:"phone.createGroupCall",params:[{name:"flags",type:"#"},{name:"rtmp_stream",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"random_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"schedule_date",type:"flags.1?int"}],type:"Updates"},{id:-1883951017,method:"phone.joinGroupCall",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"video_stopped",type:"flags.2?true"},{name:"call",type:"InputGroupCall"},{name:"join_as",type:"InputPeer"},{name:"invite_hash",type:"flags.1?string"},{name:"public_key",type:"flags.3?int256"},{name:"block",type:"flags.3?bytes"},{name:"params",type:"DataJSON"}],type:"Updates"},{id:1342404601,method:"phone.leaveGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"source",type:"int"}],type:"Updates"},{id:2067345760,method:"phone.inviteToGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"users",type:"Vector<InputUser>"}],type:"Updates"},{id:2054648117,method:"phone.discardGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:-1757179150,method:"phone.toggleGroupCallSettings",params:[{name:"flags",type:"#"},{name:"reset_invite_hash",type:"flags.1?true"},{name:"call",type:"InputGroupCall"},{name:"join_muted",type:"flags.0?Bool"},{name:"messages_enabled",type:"flags.2?Bool"},{name:"send_paid_messages_stars",type:"flags.3?long"}],type:"Updates"},{id:68699611,method:"phone.getGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"limit",type:"int"}],type:"phone.GroupCall"},{id:-984033109,method:"phone.getGroupParticipants",params:[{name:"call",type:"InputGroupCall"},{name:"ids",type:"Vector<InputPeer>"},{name:"sources",type:"Vector<int>"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"phone.GroupParticipants"},{id:-1248003721,method:"phone.checkGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"sources",type:"Vector<int>"}],type:"Vector<int>"},{id:1540419152,method:"messages.deleteChat",params:[{name:"chat_id",type:"long"}],type:"Bool"},{id:-104078327,method:"messages.deletePhoneCallHistory",params:[{name:"flags",type:"#"},{name:"revoke",type:"flags.0?true"}],type:"messages.AffectedFoundMessages"},{id:1140726259,method:"messages.checkHistoryImport",params:[{name:"import_head",type:"string"}],type:"messages.HistoryImportParsed"},{id:873008187,method:"messages.initHistoryImport",params:[{name:"peer",type:"InputPeer"},{name:"file",type:"InputFile"},{name:"media_count",type:"int"}],type:"messages.HistoryImport"},{id:713433234,method:"messages.uploadImportedMedia",params:[{name:"peer",type:"InputPeer"},{name:"import_id",type:"long"},{name:"file_name",type:"string"},{name:"media",type:"InputMedia"}],type:"MessageMedia"},{id:-1271008444,method:"messages.startHistoryImport",params:[{name:"peer",type:"InputPeer"},{name:"import_id",type:"long"}],type:"Bool"},{id:-1565154314,method:"messages.getExportedChatInvites",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"admin_id",type:"InputUser"},{name:"offset_date",type:"flags.2?int"},{name:"offset_link",type:"flags.2?string"},{name:"limit",type:"int"}],type:"messages.ExportedChatInvites"},{id:1937010524,method:"messages.getExportedChatInvite",params:[{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"messages.ExportedChatInvite"},{id:-1110823051,method:"messages.editExportedChatInvite",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"string"},{name:"expire_date",type:"flags.0?int"},{name:"usage_limit",type:"flags.1?int"},{name:"request_needed",type:"flags.3?Bool"},{name:"title",type:"flags.4?string"}],type:"messages.ExportedChatInvite"},{id:1452833749,method:"messages.deleteRevokedExportedChatInvites",params:[{name:"peer",type:"InputPeer"},{name:"admin_id",type:"InputUser"}],type:"Bool"},{id:-731601877,method:"messages.deleteExportedChatInvite",params:[{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"Bool"},{id:958457583,method:"messages.getAdminsWithInvites",params:[{name:"peer",type:"InputPeer"}],type:"messages.ChatAdminsWithInvites"},{id:-553329330,method:"messages.getChatInviteImporters",params:[{name:"flags",type:"#"},{name:"requested",type:"flags.0?true"},{name:"subscription_expired",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"flags.1?string"},{name:"q",type:"flags.2?string"},{name:"offset_date",type:"int"},{name:"offset_user",type:"InputUser"},{name:"limit",type:"int"}],type:"messages.ChatInviteImporters"},{id:-1207017500,method:"messages.setHistoryTTL",params:[{name:"peer",type:"InputPeer"},{name:"period",type:"int"}],type:"Updates"},{id:-91437323,method:"account.reportProfilePhoto",params:[{name:"peer",type:"InputPeer"},{name:"photo_id",type:"InputPhoto"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:187239529,method:"channels.convertToGigagroup",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:1573261059,method:"messages.checkHistoryImportPeer",params:[{name:"peer",type:"InputPeer"}],type:"messages.CheckedHistoryImportPeer"},{id:-248985848,method:"phone.toggleGroupCallRecord",params:[{name:"flags",type:"#"},{name:"start",type:"flags.0?true"},{name:"video",type:"flags.2?true"},{name:"call",type:"InputGroupCall"},{name:"title",type:"flags.1?string"},{name:"video_portrait",type:"flags.2?Bool"}],type:"Updates"},{id:-1524155713,method:"phone.editGroupCallParticipant",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"participant",type:"InputPeer"},{name:"muted",type:"flags.0?Bool"},{name:"volume",type:"flags.1?int"},{name:"raise_hand",type:"flags.2?Bool"},{name:"video_stopped",type:"flags.3?Bool"},{name:"video_paused",type:"flags.4?Bool"},{name:"presentation_paused",type:"flags.5?Bool"}],type:"Updates"},{id:480685066,method:"phone.editGroupCallTitle",params:[{name:"call",type:"InputGroupCall"},{name:"title",type:"string"}],type:"Updates"},{id:-277077702,method:"phone.getGroupCallJoinAs",params:[{name:"peer",type:"InputPeer"}],type:"phone.JoinAsPeers"},{id:-425040769,method:"phone.exportGroupCallInvite",params:[{name:"flags",type:"#"},{name:"can_self_unmute",type:"flags.0?true"},{name:"call",type:"InputGroupCall"}],type:"phone.ExportedGroupCallInvite"},{id:563885286,method:"phone.toggleGroupCallStartSubscription",params:[{name:"call",type:"InputGroupCall"},{name:"subscribed",type:"Bool"}],type:"Updates"},{id:1451287362,method:"phone.startScheduledGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:1465786252,method:"phone.saveDefaultGroupCallJoinAs",params:[{name:"peer",type:"InputPeer"},{name:"join_as",type:"InputPeer"}],type:"Bool"},{id:-873829436,method:"phone.joinGroupCallPresentation",params:[{name:"call",type:"InputGroupCall"},{name:"params",type:"DataJSON"}],type:"Updates"},{id:475058500,method:"phone.leaveGroupCallPresentation",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:676017721,method:"stickers.checkShortName",params:[{name:"short_name",type:"string"}],type:"Bool"},{id:1303364867,method:"stickers.suggestShortName",params:[{name:"title",type:"string"}],type:"stickers.SuggestedShortName"},{id:1032708345,method:"bots.resetBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"}],type:"Bool"},{id:-481554986,method:"bots.getBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"}],type:"Vector<BotCommand>"},{id:-1828139493,method:"account.resetPassword",params:[],type:"account.ResetPasswordResult"},{id:1284770294,method:"account.declinePasswordReset",params:[],type:"Bool"},{id:221691769,method:"auth.checkRecoveryPassword",params:[{name:"code",type:"string"}],type:"Bool"},{id:-700916087,method:"account.getChatThemes",params:[{name:"hash",type:"long"}],type:"account.Themes"},{id:135398089,method:"messages.setChatTheme",params:[{name:"peer",type:"InputPeer"},{name:"theme",type:"InputChatTheme"}],type:"Updates"},{id:834782287,method:"messages.getMessageReadParticipants",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Vector<ReadParticipantDate>"},{id:1789130429,method:"messages.getSearchResultsCalendar",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"saved_peer_id",type:"flags.2?InputPeer"},{name:"filter",type:"MessagesFilter"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"}],type:"messages.SearchResultsCalendar"},{id:-1669386480,method:"messages.getSearchResultsPositions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"saved_peer_id",type:"flags.2?InputPeer"},{name:"filter",type:"MessagesFilter"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.SearchResultsPositions"},{id:2145904661,method:"messages.hideChatJoinRequest",params:[{name:"flags",type:"#"},{name:"approved",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:-528091926,method:"messages.hideAllChatJoinRequests",params:[{name:"flags",type:"#"},{name:"approved",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"flags.1?string"}],type:"Updates"},{id:-1323389022,method:"messages.toggleNoForwards",params:[{name:"peer",type:"InputPeer"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-855777386,method:"messages.saveDefaultSendAs",params:[{name:"peer",type:"InputPeer"},{name:"send_as",type:"InputPeer"}],type:"Bool"},{id:-410672065,method:"channels.getSendAs",params:[{name:"flags",type:"#"},{name:"for_paid_reactions",type:"flags.0?true"},{name:"for_live_stories",type:"flags.1?true"},{name:"peer",type:"InputPeer"}],type:"channels.SendAsPeers"},{id:-1081501024,method:"account.setAuthorizationTTL",params:[{name:"authorization_ttl_days",type:"int"}],type:"Bool"},{id:1089766498,method:"account.changeAuthorizationSettings",params:[{name:"flags",type:"#"},{name:"confirmed",type:"flags.3?true"},{name:"hash",type:"long"},{name:"encrypted_requests_disabled",type:"flags.0?Bool"},{name:"call_requests_disabled",type:"flags.1?Bool"}],type:"Bool"},{id:913655003,method:"channels.deleteParticipantHistory",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"}],type:"messages.AffectedHistory"},{id:-754091820,method:"messages.sendReaction",params:[{name:"flags",type:"#"},{name:"big",type:"flags.1?true"},{name:"add_to_recent",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"reaction",type:"flags.0?Vector<Reaction>"}],type:"Updates"},{id:-1950707482,method:"messages.getMessagesReactions",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1176190792,method:"messages.getMessageReactionsList",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction",type:"flags.0?Reaction"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"messages.MessageReactionsList"},{id:-2041895551,method:"messages.setChatAvailableReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"available_reactions",type:"ChatReactions"},{name:"reactions_limit",type:"flags.0?int"},{name:"paid_enabled",type:"flags.1?Bool"}],type:"Updates"},{id:417243308,method:"messages.getAvailableReactions",params:[{name:"hash",type:"int"}],type:"messages.AvailableReactions"},{id:1330094102,method:"messages.setDefaultReaction",params:[{name:"reaction",type:"Reaction"}],type:"Bool"},{id:1662529584,method:"messages.translateText",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.0?InputPeer"},{name:"id",type:"flags.0?Vector<int>"},{name:"text",type:"flags.1?Vector<TextWithEntities>"},{name:"to_lang",type:"string"}],type:"messages.TranslatedText"},{id:-1115713364,method:"messages.getUnreadReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"saved_peer_id",type:"flags.1?InputPeer"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"}],type:"messages.Messages"},{id:-1631301741,method:"messages.readReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"saved_peer_id",type:"flags.1?InputPeer"}],type:"messages.AffectedHistory"},{id:-1963375804,method:"contacts.resolvePhone",params:[{name:"phone",type:"string"}],type:"contacts.ResolvedPeer"},{id:447879488,method:"phone.getGroupCallStreamChannels",params:[{name:"call",type:"InputGroupCall"}],type:"phone.GroupCallStreamChannels"},{id:1525991226,method:"phone.getGroupCallStreamRtmpUrl",params:[{name:"flags",type:"#"},{name:"live_story",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"revoke",type:"Bool"}],type:"phone.GroupCallStreamRtmpUrl"},{id:276705696,method:"messages.searchSentMedia",params:[{name:"q",type:"string"},{name:"filter",type:"MessagesFilter"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:385663691,method:"messages.getAttachMenuBots",params:[{name:"hash",type:"long"}],type:"AttachMenuBots"},{id:1998676370,method:"messages.getAttachMenuBot",params:[{name:"bot",type:"InputUser"}],type:"AttachMenuBotsBot"},{id:1777704297,method:"messages.toggleBotInAttachMenu",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"bot",type:"InputUser"},{name:"enabled",type:"Bool"}],type:"Bool"},{id:647873217,method:"messages.requestWebView",params:[{name:"flags",type:"#"},{name:"from_bot_menu",type:"flags.4?true"},{name:"silent",type:"flags.5?true"},{name:"compact",type:"flags.7?true"},{name:"fullscreen",type:"flags.8?true"},{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"},{name:"url",type:"flags.1?string"},{name:"start_param",type:"flags.3?string"},{name:"theme_params",type:"flags.2?DataJSON"},{name:"platform",type:"string"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"send_as",type:"flags.13?InputPeer"}],type:"WebViewResult"},{id:-1328014717,method:"messages.prolongWebView",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"},{name:"query_id",type:"long"},{name:"reply_to",type:"flags.0?InputReplyTo"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Bool"},{id:1094336115,method:"messages.requestSimpleWebView",params:[{name:"flags",type:"#"},{name:"from_switch_webview",type:"flags.1?true"},{name:"from_side_menu",type:"flags.2?true"},{name:"compact",type:"flags.7?true"},{name:"fullscreen",type:"flags.8?true"},{name:"bot",type:"InputUser"},{name:"url",type:"flags.3?string"},{name:"start_param",type:"flags.4?string"},{name:"theme_params",type:"flags.0?DataJSON"},{name:"platform",type:"string"}],type:"WebViewResult"},{id:172168437,method:"messages.sendWebViewResultMessage",params:[{name:"bot_query_id",type:"string"},{name:"result",type:"InputBotInlineResult"}],type:"WebViewMessageSent"},{id:-603831608,method:"messages.sendWebViewData",params:[{name:"bot",type:"InputUser"},{name:"random_id",type:"long"},{name:"button_text",type:"string"},{name:"data",type:"string"}],type:"Updates"},{id:1157944655,method:"bots.setBotMenuButton",params:[{name:"user_id",type:"InputUser"},{name:"button",type:"BotMenuButton"}],type:"Bool"},{id:-1671369944,method:"bots.getBotMenuButton",params:[{name:"user_id",type:"InputUser"}],type:"BotMenuButton"},{id:-510647672,method:"account.getSavedRingtones",params:[{name:"hash",type:"long"}],type:"account.SavedRingtones"},{id:1038768899,method:"account.saveRingtone",params:[{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"account.SavedRingtone"},{id:-2095414366,method:"account.uploadRingtone",params:[{name:"file",type:"InputFile"},{name:"file_name",type:"string"},{name:"mime_type",type:"string"}],type:"Document"},{id:2021942497,method:"bots.setBotBroadcastDefaultAdminRights",params:[{name:"admin_rights",type:"ChatAdminRights"}],type:"Bool"},{id:-1839281686,method:"bots.setBotGroupDefaultAdminRights",params:[{name:"admin_rights",type:"ChatAdminRights"}],type:"Bool"},{id:1092913030,method:"phone.saveCallLog",params:[{name:"peer",type:"InputPhoneCall"},{name:"file",type:"InputFile"}],type:"Bool"},{id:-456419968,method:"channels.toggleJoinToSend",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:1277789622,method:"channels.toggleJoinRequest",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:261206117,method:"payments.exportInvoice",params:[{name:"invoice_media",type:"InputMedia"}],type:"payments.ExportedInvoice"},{id:647928393,method:"messages.transcribeAudio",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"messages.TranscribedAudio"},{id:2132608815,method:"messages.rateTranscribedAudio",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"transcription_id",type:"long"},{name:"good",type:"Bool"}],type:"Bool"},{id:-2131921795,method:"payments.assignAppStoreTransaction",params:[{name:"receipt",type:"bytes"},{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Updates"},{id:-537046829,method:"payments.assignPlayMarketTransaction",params:[{name:"receipt",type:"DataJSON"},{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Updates"},{id:-1206152236,method:"help.getPremiumPromo",params:[],type:"help.PremiumPromo"},{id:-643100844,method:"messages.getCustomEmojiDocuments",params:[{name:"document_id",type:"Vector<long>"}],type:"Vector<Document>"},{id:-67329649,method:"messages.getEmojiStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:248473398,method:"messages.getFeaturedEmojiStickers",params:[{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:-70001045,method:"account.updateEmojiStatus",params:[{name:"emoji_status",type:"EmojiStatus"}],type:"Bool"},{id:-696962170,method:"account.getDefaultEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:257392901,method:"account.getRecentEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:404757166,method:"account.clearRecentEmojiStatuses",params:[],type:"Bool"},{id:1063567478,method:"messages.reportReaction",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction_peer",type:"InputPeer"}],type:"Bool"},{id:-1149164102,method:"messages.getTopReactions",params:[{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Reactions"},{id:960896434,method:"messages.getRecentReactions",params:[{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Reactions"},{id:-1644236876,method:"messages.clearRecentReactions",params:[],type:"Bool"},{id:-2064119788,method:"messages.getExtendedMedia",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:767062953,method:"auth.importWebTokenAuthorization",params:[{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"web_auth_token",type:"string"}],type:"auth.Authorization"},{id:-279966037,method:"account.reorderUsernames",params:[{name:"order",type:"Vector<string>"}],type:"Bool"},{id:1490465654,method:"account.toggleUsername",params:[{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:-1268978403,method:"channels.reorderUsernames",params:[{name:"channel",type:"InputChannel"},{name:"order",type:"Vector<string>"}],type:"Bool"},{id:1358053637,method:"channels.toggleUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:170155475,method:"channels.deactivateAllUsernames",params:[{name:"channel",type:"InputChannel"}],type:"Bool"},{id:1073174324,method:"channels.toggleForum",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"},{name:"tabs",type:"Bool"}],type:"Updates"},{id:1760814315,method:"channels.toggleAntiSpam",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-1471109485,method:"channels.reportAntiSpamFalsePositive",params:[{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"Bool"},{id:-1632299963,method:"messages.setDefaultHistoryTTL",params:[{name:"period",type:"int"}],type:"Bool"},{id:1703637384,method:"messages.getDefaultHistoryTTL",params:[],type:"DefaultHistoryTTL"},{id:-127582169,method:"contacts.exportContactToken",params:[],type:"ExportedContactToken"},{id:318789512,method:"contacts.importContactToken",params:[{name:"token",type:"string"}],type:"User"},{id:-515093903,method:"photos.uploadContactProfilePhoto",params:[{name:"flags",type:"#"},{name:"suggest",type:"flags.3?true"},{name:"save",type:"flags.4?true"},{name:"user_id",type:"InputUser"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.5?VideoSize"}],type:"photos.Photo"},{id:1785624660,method:"channels.toggleParticipantsHidden",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-1850552224,method:"messages.sendBotRequestedPeer",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"button_id",type:"int"},{name:"requested_peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:-495647960,method:"account.getDefaultProfilePhotoEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:-1856479058,method:"account.getDefaultGroupPhotoEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:-1908857314,method:"auth.requestFirebaseSms",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"safety_net_token",type:"flags.0?string"},{name:"play_integrity_token",type:"flags.2?string"},{name:"ios_push_secret",type:"flags.1?string"}],type:"Bool"},{id:1955122779,method:"messages.getEmojiGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:785209037,method:"messages.getEmojiStatusGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:564480243,method:"messages.getEmojiProfilePhotoGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:739360983,method:"messages.searchCustomEmoji",params:[{name:"emoticon",type:"string"},{name:"hash",type:"long"}],type:"EmojiList"},{id:-461589127,method:"messages.togglePeerTranslations",params:[{name:"flags",type:"#"},{name:"disabled",type:"flags.0?true"},{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-1379156774,method:"account.getAutoSaveSettings",params:[],type:"account.AutoSaveSettings"},{id:-694451359,method:"account.saveAutoSaveSettings",params:[{name:"flags",type:"#"},{name:"users",type:"flags.0?true"},{name:"chats",type:"flags.1?true"},{name:"broadcasts",type:"flags.2?true"},{name:"peer",type:"flags.3?InputPeer"},{name:"settings",type:"AutoSaveSettings"}],type:"Bool"},{id:1404829728,method:"account.deleteAutoSaveExceptions",params:[],type:"Bool"},{id:-179077444,method:"stickers.changeSticker",params:[{name:"flags",type:"#"},{name:"sticker",type:"InputDocument"},{name:"emoji",type:"flags.0?string"},{name:"mask_coords",type:"flags.1?MaskCoords"},{name:"keywords",type:"flags.2?string"}],type:"messages.StickerSet"},{id:306912256,method:"stickers.renameStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"title",type:"string"}],type:"messages.StickerSet"},{id:-2022685804,method:"stickers.deleteStickerSet",params:[{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:889046467,method:"messages.getBotApp",params:[{name:"app",type:"InputBotApp"},{name:"hash",type:"long"}],type:"messages.BotApp"},{id:1398901710,method:"messages.requestAppWebView",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"compact",type:"flags.7?true"},{name:"fullscreen",type:"flags.8?true"},{name:"peer",type:"InputPeer"},{name:"app",type:"InputBotApp"},{name:"start_param",type:"flags.1?string"},{name:"theme_params",type:"flags.2?DataJSON"},{name:"platform",type:"string"}],type:"WebViewResult"},{id:282013987,method:"bots.setBotInfo",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.2?InputUser"},{name:"lang_code",type:"string"},{name:"name",type:"flags.3?string"},{name:"about",type:"flags.0?string"},{name:"description",type:"flags.1?string"}],type:"Bool"},{id:-589753091,method:"bots.getBotInfo",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.0?InputUser"},{name:"lang_code",type:"string"}],type:"bots.BotInfo"},{id:2123760019,method:"auth.resetLoginEmail",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"auth.SentCode"},{id:-2072885362,method:"chatlists.exportChatlistInvite",params:[{name:"chatlist",type:"InputChatlist"},{name:"title",type:"string"},{name:"peers",type:"Vector<InputPeer>"}],type:"chatlists.ExportedChatlistInvite"},{id:1906072670,method:"chatlists.deleteExportedInvite",params:[{name:"chatlist",type:"InputChatlist"},{name:"slug",type:"string"}],type:"Bool"},{id:1698543165,method:"chatlists.editExportedInvite",params:[{name:"flags",type:"#"},{name:"chatlist",type:"InputChatlist"},{name:"slug",type:"string"},{name:"title",type:"flags.1?string"},{name:"peers",type:"flags.2?Vector<InputPeer>"}],type:"ExportedChatlistInvite"},{id:-838608253,method:"chatlists.getExportedInvites",params:[{name:"chatlist",type:"InputChatlist"}],type:"chatlists.ExportedInvites"},{id:1103171583,method:"chatlists.checkChatlistInvite",params:[{name:"slug",type:"string"}],type:"chatlists.ChatlistInvite"},{id:-1498291302,method:"chatlists.joinChatlistInvite",params:[{name:"slug",type:"string"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:-1992190687,method:"chatlists.getChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"}],type:"chatlists.ChatlistUpdates"},{id:-527828747,method:"chatlists.joinChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:1726252795,method:"chatlists.hideChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"}],type:"Bool"},{id:-37955820,method:"chatlists.getLeaveChatlistSuggestions",params:[{name:"chatlist",type:"InputChatlist"}],type:"Vector<Peer>"},{id:1962598714,method:"chatlists.leaveChatlist",params:[{name:"chatlist",type:"InputChatlist"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:-1760972350,method:"bots.reorderUsernames",params:[{name:"bot",type:"InputUser"},{name:"order",type:"Vector<string>"}],type:"Bool"},{id:87861619,method:"bots.toggleUsername",params:[{name:"bot",type:"InputUser"},{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:-1879389471,method:"messages.setChatWallPaper",params:[{name:"flags",type:"#"},{name:"for_both",type:"flags.3?true"},{name:"revert",type:"flags.4?true"},{name:"peer",type:"InputPeer"},{name:"wallpaper",type:"flags.0?InputWallPaper"},{name:"settings",type:"flags.2?WallPaperSettings"},{name:"id",type:"flags.1?int"}],type:"Updates"},{id:-896866118,method:"account.invalidateSignInCodes",params:[{name:"codes",type:"Vector<string>"}],type:"Bool"},{id:-1167653392,method:"contacts.editCloseFriends",params:[{name:"id",type:"Vector<long>"}],type:"Bool"},{id:820732912,method:"stories.canSendStory",params:[{name:"peer",type:"InputPeer"}],type:"stories.CanSendStoryCount"},{id:1937752812,method:"stories.sendStory",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"noforwards",type:"flags.4?true"},{name:"fwd_modified",type:"flags.7?true"},{name:"peer",type:"InputPeer"},{name:"media",type:"InputMedia"},{name:"media_areas",type:"flags.5?Vector<MediaArea>"},{name:"caption",type:"flags.0?string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"privacy_rules",type:"Vector<InputPrivacyRule>"},{name:"random_id",type:"long"},{name:"period",type:"flags.3?int"},{name:"fwd_from_id",type:"flags.6?InputPeer"},{name:"fwd_from_story",type:"flags.6?int"},{name:"albums",type:"flags.8?Vector<int>"}],type:"Updates"},{id:-1249658298,method:"stories.editStory",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"media",type:"flags.0?InputMedia"},{name:"media_areas",type:"flags.3?Vector<MediaArea>"},{name:"caption",type:"flags.1?string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"privacy_rules",type:"flags.2?Vector<InputPrivacyRule>"}],type:"Updates"},{id:-1369842849,method:"stories.deleteStories",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Vector<int>"},{id:-1703566865,method:"stories.togglePinned",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"pinned",type:"Bool"}],type:"Vector<int>"},{id:-290400731,method:"stories.getAllStories",params:[{name:"flags",type:"#"},{name:"next",type:"flags.1?true"},{name:"hidden",type:"flags.2?true"},{name:"state",type:"flags.0?string"}],type:"stories.AllStories"},{id:1478600156,method:"stories.getPinnedStories",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"stories.Stories"},{id:-1271586794,method:"stories.getStoriesArchive",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"stories.Stories"},{id:1467271796,method:"stories.getStoriesByID",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"stories.Stories"},{id:2082822084,method:"stories.toggleAllStoriesHidden",params:[{name:"hidden",type:"Bool"}],type:"Bool"},{id:-1521034552,method:"stories.readStories",params:[{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"}],type:"Vector<int>"},{id:-1308456197,method:"stories.incrementStoryViews",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:2127707223,method:"stories.getStoryViewsList",params:[{name:"flags",type:"#"},{name:"just_contacts",type:"flags.0?true"},{name:"reactions_first",type:"flags.2?true"},{name:"forwards_first",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"q",type:"flags.1?string"},{name:"id",type:"int"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"stories.StoryViewsList"},{id:685862088,method:"stories.getStoriesViews",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"stories.StoryViews"},{id:2072899360,method:"stories.exportStoryLink",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"ExportedStoryLink"},{id:433646405,method:"stories.report",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"option",type:"bytes"},{name:"message",type:"string"}],type:"ReportResult"},{id:1471926630,method:"stories.activateStealthMode",params:[{name:"flags",type:"#"},{name:"past",type:"flags.0?true"},{name:"future",type:"flags.1?true"}],type:"Updates"},{id:-1798939530,method:"contacts.setBlocked",params:[{name:"flags",type:"#"},{name:"my_stories_from",type:"flags.0?true"},{name:"id",type:"Vector<InputPeer>"},{name:"limit",type:"int"}],type:"Bool"},{id:2144810674,method:"stories.sendReaction",params:[{name:"flags",type:"#"},{name:"add_to_recent",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"story_id",type:"int"},{name:"reaction",type:"Reaction"}],type:"Updates"},{id:324662502,method:"bots.canSendMessage",params:[{name:"bot",type:"InputUser"}],type:"Bool"},{id:-248323089,method:"bots.allowSendMessage",params:[{name:"bot",type:"InputUser"}],type:"Updates"},{id:142591463,method:"bots.invokeWebViewCustomMethod",params:[{name:"bot",type:"InputUser"},{name:"custom_method",type:"string"},{name:"params",type:"DataJSON"}],type:"DataJSON"},{id:743103056,method:"stories.getPeerStories",params:[{name:"peer",type:"InputPeer"}],type:"stories.PeerStories"},{id:-1688541191,method:"stories.getAllReadPeerStories",params:[],type:"Updates"},{id:2018087280,method:"stories.getPeerMaxIDs",params:[{name:"id",type:"Vector<InputPeer>"}],type:"Vector<RecentStory>"},{id:-1519744160,method:"stories.getChatsToSend",params:[],type:"messages.Chats"},{id:-1123805756,method:"stories.togglePeerStoriesHidden",params:[{name:"peer",type:"InputPeer"},{name:"hidden",type:"Bool"}],type:"Bool"},{id:660060756,method:"payments.getPremiumGiftCodeOptions",params:[{name:"flags",type:"#"},{name:"boost_peer",type:"flags.0?InputPeer"}],type:"Vector<PremiumGiftCodeOption>"},{id:-1907247935,method:"payments.checkGiftCode",params:[{name:"slug",type:"string"}],type:"payments.CheckedGiftCode"},{id:-152934316,method:"payments.applyGiftCode",params:[{name:"slug",type:"string"}],type:"Updates"},{id:-198994907,method:"payments.getGiveawayInfo",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"payments.GiveawayInfo"},{id:1609928480,method:"payments.launchPrepaidGiveaway",params:[{name:"peer",type:"InputPeer"},{name:"giveaway_id",type:"long"},{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Updates"},{id:1749885262,method:"account.updateColor",params:[{name:"flags",type:"#"},{name:"for_profile",type:"flags.1?true"},{name:"color",type:"flags.2?PeerColor"}],type:"Bool"},{id:-659933583,method:"channels.updateColor",params:[{name:"flags",type:"#"},{name:"for_profile",type:"flags.1?true"},{name:"channel",type:"InputChannel"},{name:"color",type:"flags.2?int"},{name:"background_emoji_id",type:"flags.0?long"}],type:"Updates"},{id:-1509246514,method:"account.getDefaultBackgroundEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:1626764896,method:"premium.getBoostsList",params:[{name:"flags",type:"#"},{name:"gifts",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"premium.BoostsList"},{id:199719754,method:"premium.getMyBoosts",params:[],type:"premium.MyBoosts"},{id:1803396934,method:"premium.applyBoost",params:[{name:"flags",type:"#"},{name:"slots",type:"flags.0?Vector<int>"},{name:"peer",type:"InputPeer"}],type:"premium.MyBoosts"},{id:70197089,method:"premium.getBoostsStatus",params:[{name:"peer",type:"InputPeer"}],type:"premium.BoostsStatus"},{id:965037343,method:"premium.getUserBoosts",params:[{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"premium.BoostsList"},{id:-1757889771,method:"channels.toggleViewForumAsMessages",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-1833678516,method:"messages.searchEmojiStickerSets",params:[{name:"flags",type:"#"},{name:"exclude_featured",type:"flags.0?true"},{name:"q",type:"string"},{name:"hash",type:"long"}],type:"messages.FoundStickerSets"},{id:631707458,method:"channels.getChannelRecommendations",params:[{name:"flags",type:"#"},{name:"channel",type:"flags.0?InputChannel"}],type:"messages.Chats"},{id:927985472,method:"stats.getStoryStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"stats.StoryStats"},{id:-1505526026,method:"stats.getStoryPublicForwards",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"stats.PublicForwards"},{id:-629083089,method:"help.getPeerColors",params:[{name:"hash",type:"int"}],type:"help.PeerColors"},{id:-1412453891,method:"help.getPeerProfileColors",params:[{name:"hash",type:"int"}],type:"help.PeerColors"},{id:-1179482081,method:"stories.getStoryReactionsList",params:[{name:"flags",type:"#"},{name:"forwards_first",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction",type:"flags.0?Reaction"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"stories.StoryReactionsList"},{id:-254548312,method:"channels.updateEmojiStatus",params:[{name:"channel",type:"InputChannel"},{name:"emoji_status",type:"EmojiStatus"}],type:"Updates"},{id:1999087573,method:"account.getChannelDefaultEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:900325589,method:"account.getChannelRestrictedStatusEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:512883865,method:"messages.getSavedDialogs",params:[{name:"flags",type:"#"},{name:"exclude_pinned",type:"flags.0?true"},{name:"parent_peer",type:"flags.1?InputPeer"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.SavedDialogs"},{id:-1718964215,method:"messages.getSavedHistory",params:[{name:"flags",type:"#"},{name:"parent_peer",type:"flags.0?InputPeer"},{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:1304758367,method:"messages.deleteSavedHistory",params:[{name:"flags",type:"#"},{name:"parent_peer",type:"flags.0?InputPeer"},{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"},{name:"min_date",type:"flags.2?int"},{name:"max_date",type:"flags.3?int"}],type:"messages.AffectedHistory"},{id:-700607264,method:"messages.getPinnedSavedDialogs",params:[],type:"messages.SavedDialogs"},{id:-1400783906,method:"messages.toggleSavedDialogPin",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:-1955502713,method:"messages.reorderPinnedSavedDialogs",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"order",type:"Vector<InputDialogPeer>"}],type:"Bool"},{id:909631579,method:"messages.getSavedReactionTags",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.0?InputPeer"},{name:"hash",type:"long"}],type:"messages.SavedReactionTags"},{id:1613331948,method:"messages.updateSavedReactionTag",params:[{name:"flags",type:"#"},{name:"reaction",type:"Reaction"},{name:"title",type:"flags.0?string"}],type:"Bool"},{id:-1107741656,method:"messages.getDefaultTagReactions",params:[{name:"hash",type:"long"}],type:"messages.Reactions"},{id:-1941176739,method:"messages.getOutboxReadDate",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"OutboxReadDate"},{id:-1388733202,method:"channels.setBoostsToUnblockRestrictions",params:[{name:"channel",type:"InputChannel"},{name:"boosts",type:"int"}],type:"Updates"},{id:1020866743,method:"channels.setEmojiStickers",params:[{name:"channel",type:"InputChannel"},{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:249313744,method:"smsjobs.isEligibleToJoin",params:[],type:"smsjobs.EligibilityToJoin"},{id:-1488007635,method:"smsjobs.join",params:[],type:"Bool"},{id:-1734824589,method:"smsjobs.leave",params:[],type:"Bool"},{id:155164863,method:"smsjobs.updateSettings",params:[{name:"flags",type:"#"},{name:"allow_international",type:"flags.0?true"}],type:"Bool"},{id:279353576,method:"smsjobs.getStatus",params:[],type:"smsjobs.Status"},{id:2005766191,method:"smsjobs.getSmsJob",params:[{name:"job_id",type:"string"}],type:"SmsJob"},{id:1327415076,method:"smsjobs.finishJob",params:[{name:"flags",type:"#"},{name:"job_id",type:"string"},{name:"error",type:"flags.0?string"}],type:"Bool"},{id:1236468288,method:"help.getTimezonesList",params:[{name:"hash",type:"int"}],type:"help.TimezonesList"},{id:1258348646,method:"account.updateBusinessWorkHours",params:[{name:"flags",type:"#"},{name:"business_work_hours",type:"flags.0?BusinessWorkHours"}],type:"Bool"},{id:-1637149926,method:"account.updateBusinessLocation",params:[{name:"flags",type:"#"},{name:"geo_point",type:"flags.1?InputGeoPoint"},{name:"address",type:"flags.0?string"}],type:"Bool"},{id:1724755908,method:"account.updateBusinessGreetingMessage",params:[{name:"flags",type:"#"},{name:"message",type:"flags.0?InputBusinessGreetingMessage"}],type:"Bool"},{id:-1570078811,method:"account.updateBusinessAwayMessage",params:[{name:"flags",type:"#"},{name:"message",type:"flags.0?InputBusinessAwayMessage"}],type:"Bool"},{id:-729550168,method:"messages.getQuickReplies",params:[{name:"hash",type:"long"}],type:"messages.QuickReplies"},{id:1613961479,method:"messages.reorderQuickReplies",params:[{name:"order",type:"Vector<int>"}],type:"Bool"},{id:-237962285,method:"messages.checkQuickReplyShortcut",params:[{name:"shortcut",type:"string"}],type:"Bool"},{id:1543519471,method:"messages.editQuickReplyShortcut",params:[{name:"shortcut_id",type:"int"},{name:"shortcut",type:"string"}],type:"Bool"},{id:1019234112,method:"messages.deleteQuickReplyShortcut",params:[{name:"shortcut_id",type:"int"}],type:"Bool"},{id:-1801153085,method:"messages.getQuickReplyMessages",params:[{name:"flags",type:"#"},{name:"shortcut_id",type:"int"},{name:"id",type:"flags.0?Vector<int>"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:1819610593,method:"messages.sendQuickReplyMessages",params:[{name:"peer",type:"InputPeer"},{name:"shortcut_id",type:"int"},{name:"id",type:"Vector<int>"},{name:"random_id",type:"Vector<long>"}],type:"Updates"},{id:-519706352,method:"messages.deleteQuickReplyMessages",params:[{name:"shortcut_id",type:"int"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1721797758,method:"account.updateConnectedBot",params:[{name:"flags",type:"#"},{name:"deleted",type:"flags.1?true"},{name:"rights",type:"flags.0?BusinessBotRights"},{name:"bot",type:"InputUser"},{name:"recipients",type:"InputBusinessBotRecipients"}],type:"Updates"},{id:1319421967,method:"account.getConnectedBots",params:[],type:"account.ConnectedBots"},{id:-47326647,method:"messages.toggleDialogFilterTags",params:[{name:"enabled",type:"Bool"}],type:"Bool"},{id:-584540274,method:"invokeWithBusinessConnection",params:[{name:"connection_id",type:"string"},{name:"query",type:"!X"}],type:"X"},{id:1990746736,method:"account.getBotBusinessConnection",params:[{name:"connection_id",type:"string"}],type:"Updates"},{id:-1508585420,method:"account.updateBusinessIntro",params:[{name:"flags",type:"#"},{name:"intro",type:"flags.0?InputBusinessIntro"}],type:"Bool"},{id:1184253338,method:"stickers.replaceSticker",params:[{name:"sticker",type:"InputDocument"},{name:"new_sticker",type:"InputStickerSetItem"}],type:"messages.StickerSet"},{id:-793386500,method:"messages.getMyStickers",params:[{name:"offset_id",type:"long"},{name:"limit",type:"int"}],type:"messages.MyStickers"},{id:-1105295942,method:"fragment.getCollectibleInfo",params:[{name:"collectible",type:"InputCollectible"}],type:"fragment.CollectibleInfo"},{id:1684934807,method:"account.toggleConnectedBotPaused",params:[{name:"peer",type:"InputPeer"},{name:"paused",type:"Bool"}],type:"Bool"},{id:1581481689,method:"account.disablePeerConnectedBot",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-865203183,method:"account.updateBirthday",params:[{name:"flags",type:"#"},{name:"birthday",type:"flags.0?Birthday"}],type:"Bool"},{id:-621959068,method:"contacts.getBirthdays",params:[],type:"contacts.ContactBirthdays"},{id:-2007898482,method:"account.createBusinessChatLink",params:[{name:"link",type:"InputBusinessChatLink"}],type:"BusinessChatLink"},{id:-1942744913,method:"account.editBusinessChatLink",params:[{name:"slug",type:"string"},{name:"link",type:"InputBusinessChatLink"}],type:"BusinessChatLink"},{id:1611085428,method:"account.deleteBusinessChatLink",params:[{name:"slug",type:"string"}],type:"Bool"},{id:1869667809,method:"account.getBusinessChatLinks",params:[],type:"account.BusinessChatLinks"},{id:1418913262,method:"account.resolveBusinessChatLink",params:[{name:"slug",type:"string"}],type:"account.ResolvedBusinessChatLinks"},{id:-649919008,method:"account.updatePersonalChannel",params:[{name:"channel",type:"InputChannel"}],type:"Bool"},{id:-1696000743,method:"channels.restrictSponsoredMessages",params:[{name:"channel",type:"InputChannel"},{name:"restricted",type:"Bool"}],type:"Updates"},{id:-1176919155,method:"account.toggleSponsoredMessages",params:[{name:"enabled",type:"Bool"}],type:"Bool"},{id:187268763,method:"stories.togglePinnedToTop",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:115172684,method:"account.getReactionsNotifySettings",params:[],type:"ReactionsNotifySettings"},{id:829220168,method:"account.setReactionsNotifySettings",params:[{name:"settings",type:"ReactionsNotifySettings"}],type:"ReactionsNotifySettings"},{id:-878841866,method:"auth.reportMissingCode",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"mnc",type:"string"}],type:"Bool"},{id:500711669,method:"messages.getEmojiStickerGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:502868356,method:"invokeWithGooglePlayIntegrity",params:[{name:"nonce",type:"string"},{name:"token",type:"string"},{name:"query",type:"!X"}],type:"X"},{id:229528824,method:"invokeWithApnsSecret",params:[{name:"nonce",type:"string"},{name:"secret",type:"string"},{name:"query",type:"!X"}],type:"X"},{id:-559805895,method:"messages.getAvailableEffects",params:[{name:"hash",type:"int"}],type:"messages.AvailableEffects"},{id:-221973939,method:"channels.searchPosts",params:[{name:"flags",type:"#"},{name:"hashtag",type:"flags.0?string"},{name:"query",type:"flags.1?string"},{name:"offset_rate",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"},{name:"allow_paid_stars",type:"flags.2?long"}],type:"messages.Messages"},{id:92925557,method:"messages.editFactCheck",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"text",type:"TextWithEntities"}],type:"Updates"},{id:-774204404,method:"messages.deleteFactCheck",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Updates"},{id:-1177696786,method:"messages.getFactCheck",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"Vector<int>"}],type:"Vector<FactCheck>"},{id:-1072773165,method:"payments.getStarsTopupOptions",params:[],type:"Vector<StarsTopupOption>"},{id:1319744447,method:"payments.getStarsStatus",params:[{name:"flags",type:"#"},{name:"ton",type:"flags.0?true"},{name:"peer",type:"InputPeer"}],type:"payments.StarsStatus"},{id:1775912279,method:"payments.getStarsTransactions",params:[{name:"flags",type:"#"},{name:"inbound",type:"flags.0?true"},{name:"outbound",type:"flags.1?true"},{name:"ascending",type:"flags.2?true"},{name:"ton",type:"flags.4?true"},{name:"subscription_id",type:"flags.3?string"},{name:"peer",type:"InputPeer"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"payments.StarsStatus"},{id:2040056084,method:"payments.sendStarsForm",params:[{name:"form_id",type:"long"},{name:"invoice",type:"InputInvoice"}],type:"payments.PaymentResult"},{id:632196938,method:"payments.refundStarsCharge",params:[{name:"user_id",type:"InputUser"},{name:"charge_id",type:"string"}],type:"Updates"},{id:-780072697,method:"stories.searchPosts",params:[{name:"flags",type:"#"},{name:"hashtag",type:"flags.0?string"},{name:"area",type:"flags.1?MediaArea"},{name:"peer",type:"flags.2?InputPeer"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"stories.FoundStories"},{id:-652215594,method:"payments.getStarsRevenueStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"ton",type:"flags.1?true"},{name:"peer",type:"InputPeer"}],type:"payments.StarsRevenueStats"},{id:607378578,method:"payments.getStarsRevenueWithdrawalUrl",params:[{name:"flags",type:"#"},{name:"ton",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"amount",type:"flags.1?long"},{name:"password",type:"InputCheckPasswordSRP"}],type:"payments.StarsRevenueWithdrawalUrl"},{id:-774377531,method:"payments.getStarsRevenueAdsAccountUrl",params:[{name:"peer",type:"InputPeer"}],type:"payments.StarsRevenueAdsAccountUrl"},{id:768218808,method:"payments.getStarsTransactionsByID",params:[{name:"flags",type:"#"},{name:"ton",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<InputStarsTransaction>"}],type:"payments.StarsStatus"},{id:-741774392,method:"payments.getStarsGiftOptions",params:[{name:"flags",type:"#"},{name:"user_id",type:"flags.0?InputUser"}],type:"Vector<StarsGiftOption>"},{id:-1034878574,method:"bots.getPopularAppBots",params:[{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"bots.PopularAppBots"},{id:397326170,method:"bots.addPreviewMedia",params:[{name:"bot",type:"InputUser"},{name:"lang_code",type:"string"},{name:"media",type:"InputMedia"}],type:"BotPreviewMedia"},{id:-2061148049,method:"bots.editPreviewMedia",params:[{name:"bot",type:"InputUser"},{name:"lang_code",type:"string"},{name:"media",type:"InputMedia"},{name:"new_media",type:"InputMedia"}],type:"BotPreviewMedia"},{id:755054003,method:"bots.deletePreviewMedia",params:[{name:"bot",type:"InputUser"},{name:"lang_code",type:"string"},{name:"media",type:"Vector<InputMedia>"}],type:"Bool"},{id:-1238895702,method:"bots.reorderPreviewMedias",params:[{name:"bot",type:"InputUser"},{name:"lang_code",type:"string"},{name:"order",type:"Vector<InputMedia>"}],type:"Bool"},{id:1111143341,method:"bots.getPreviewInfo",params:[{name:"bot",type:"InputUser"},{name:"lang_code",type:"string"}],type:"bots.PreviewInfo"},{id:-1566222003,method:"bots.getPreviewMedias",params:[{name:"bot",type:"InputUser"}],type:"Vector<BotPreviewMedia>"},{id:-908059013,method:"messages.requestMainWebView",params:[{name:"flags",type:"#"},{name:"compact",type:"flags.7?true"},{name:"fullscreen",type:"flags.8?true"},{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"},{name:"start_param",type:"flags.1?string"},{name:"theme_params",type:"flags.0?DataJSON"},{name:"platform",type:"string"}],type:"WebViewResult"},{id:52761285,method:"payments.getStarsSubscriptions",params:[{name:"flags",type:"#"},{name:"missing_balance",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"offset",type:"string"}],type:"payments.StarsStatus"},{id:-948500360,method:"payments.changeStarsSubscription",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"subscription_id",type:"string"},{name:"canceled",type:"flags.0?Bool"}],type:"Bool"},{id:-866391117,method:"payments.fulfillStarsSubscription",params:[{name:"peer",type:"InputPeer"},{name:"subscription_id",type:"string"}],type:"Bool"},{id:1488702288,method:"messages.sendPaidReaction",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"count",type:"int"},{name:"random_id",type:"long"},{name:"private",type:"flags.0?PaidReactionPrivacy"}],type:"Updates"},{id:1129874869,method:"messages.togglePaidReactionPrivacy",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"private",type:"PaidReactionPrivacy"}],type:"Bool"},{id:-1122042562,method:"payments.getStarsGiveawayOptions",params:[],type:"Vector<StarsGiveawayOption>"},{id:1193563562,method:"messages.getPaidReactionPrivacy",params:[],type:"Updates"},{id:-1000983152,method:"payments.getStarGifts",params:[{name:"hash",type:"int"}],type:"payments.StarGifts"},{id:707422588,method:"payments.saveStarGift",params:[{name:"flags",type:"#"},{name:"unsave",type:"flags.0?true"},{name:"stargift",type:"InputSavedStarGift"}],type:"Bool"},{id:1958676331,method:"payments.convertStarGift",params:[{name:"stargift",type:"InputSavedStarGift"}],type:"Bool"},{id:647902787,method:"messages.viewSponsoredMessage",params:[{name:"random_id",type:"bytes"}],type:"Bool"},{id:-2110454402,method:"messages.clickSponsoredMessage",params:[{name:"flags",type:"#"},{name:"media",type:"flags.0?true"},{name:"fullscreen",type:"flags.1?true"},{name:"random_id",type:"bytes"}],type:"Bool"},{id:315355332,method:"messages.reportSponsoredMessage",params:[{name:"random_id",type:"bytes"},{name:"option",type:"bytes"}],type:"channels.SponsoredMessageReportResult"},{id:1030547536,method:"messages.getSponsoredMessages",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"flags.0?int"}],type:"messages.SponsoredMessages"},{id:-232816849,method:"messages.savePreparedInlineMessage",params:[{name:"flags",type:"#"},{name:"result",type:"InputBotInlineResult"},{name:"user_id",type:"InputUser"},{name:"peer_types",type:"flags.0?Vector<InlineQueryPeerType>"}],type:"messages.BotPreparedInlineMessage"},{id:-2055291464,method:"messages.getPreparedInlineMessage",params:[{name:"bot",type:"InputUser"},{name:"id",type:"string"}],type:"messages.PreparedInlineMessage"},{id:-308334395,method:"bots.updateUserEmojiStatus",params:[{name:"user_id",type:"InputUser"},{name:"emoji_status",type:"EmojiStatus"}],type:"Bool"},{id:115237778,method:"bots.toggleUserEmojiStatusPermission",params:[{name:"bot",type:"InputUser"},{name:"enabled",type:"Bool"}],type:"Bool"},{id:1342666121,method:"bots.checkDownloadFileParams",params:[{name:"bot",type:"InputUser"},{name:"file_name",type:"string"},{name:"url",type:"string"}],type:"Bool"},{id:1845102114,method:"payments.botCancelStarsSubscription",params:[{name:"flags",type:"#"},{name:"restore",type:"flags.0?true"},{name:"user_id",type:"InputUser"},{name:"charge_id",type:"string"}],type:"Bool"},{id:-1334764157,method:"bots.getAdminedBots",params:[],type:"Vector<User>"},{id:2005621427,method:"bots.updateStarRefProgram",params:[{name:"flags",type:"#"},{name:"bot",type:"InputUser"},{name:"commission_permille",type:"int"},{name:"duration_months",type:"flags.0?int"}],type:"StarRefProgram"},{id:1483318611,method:"payments.getConnectedStarRefBots",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"offset_date",type:"flags.2?int"},{name:"offset_link",type:"flags.2?string"},{name:"limit",type:"int"}],type:"payments.ConnectedStarRefBots"},{id:-1210476304,method:"payments.getConnectedStarRefBot",params:[{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"}],type:"payments.ConnectedStarRefBots"},{id:225134839,method:"payments.getSuggestedStarRefBots",params:[{name:"flags",type:"#"},{name:"order_by_revenue",type:"flags.0?true"},{name:"order_by_date",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"payments.SuggestedStarRefBots"},{id:2127901834,method:"payments.connectStarRefBot",params:[{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"}],type:"payments.ConnectedStarRefBots"},{id:-453204829,method:"payments.editConnectedStarRefBot",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"payments.ConnectedStarRefBots"},{id:699516522,method:"messages.searchStickers",params:[{name:"flags",type:"#"},{name:"emojis",type:"flags.0?true"},{name:"q",type:"string"},{name:"emoticon",type:"string"},{name:"lang_code",type:"Vector<string>"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.FoundStickers"},{id:2097431739,method:"phone.createConferenceCall",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"video_stopped",type:"flags.2?true"},{name:"join",type:"flags.3?true"},{name:"random_id",type:"int"},{name:"public_key",type:"flags.3?int256"},{name:"block",type:"flags.3?bytes"},{name:"params",type:"flags.3?DataJSON"}],type:"Updates"},{id:1517122453,method:"messages.reportMessagesDelivery",params:[{name:"flags",type:"#"},{name:"push",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-1953898563,method:"bots.setCustomVerification",params:[{name:"flags",type:"#"},{name:"enabled",type:"flags.1?true"},{name:"bot",type:"flags.0?InputUser"},{name:"peer",type:"InputPeer"},{name:"custom_description",type:"flags.2?string"}],type:"Bool"},{id:-1667580751,method:"payments.getStarGiftUpgradePreview",params:[{name:"gift_id",type:"long"}],type:"payments.StarGiftUpgradePreview"},{id:-1361648395,method:"payments.upgradeStarGift",params:[{name:"flags",type:"#"},{name:"keep_original_details",type:"flags.0?true"},{name:"stargift",type:"InputSavedStarGift"}],type:"Updates"},{id:2132285290,method:"payments.transferStarGift",params:[{name:"stargift",type:"InputSavedStarGift"},{name:"to_id",type:"InputPeer"}],type:"Updates"},{id:-1581840363,method:"bots.getBotRecommendations",params:[{name:"bot",type:"InputUser"}],type:"users.Users"},{id:-1583919758,method:"payments.getUniqueStarGift",params:[{name:"slug",type:"string"}],type:"payments.UniqueStarGift"},{id:779830595,method:"account.getCollectibleEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:-1558583959,method:"payments.getSavedStarGifts",params:[{name:"flags",type:"#"},{name:"exclude_unsaved",type:"flags.0?true"},{name:"exclude_saved",type:"flags.1?true"},{name:"exclude_unlimited",type:"flags.2?true"},{name:"exclude_unique",type:"flags.4?true"},{name:"sort_by_value",type:"flags.5?true"},{name:"exclude_upgradable",type:"flags.7?true"},{name:"exclude_unupgradable",type:"flags.8?true"},{name:"peer_color_available",type:"flags.9?true"},{name:"exclude_hosted",type:"flags.10?true"},{name:"peer",type:"InputPeer"},{name:"collection_id",type:"flags.6?int"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"payments.SavedStarGifts"},{id:-1269456634,method:"payments.getSavedStarGift",params:[{name:"stargift",type:"Vector<InputSavedStarGift>"}],type:"payments.SavedStarGifts"},{id:-798059608,method:"payments.getStarGiftWithdrawalUrl",params:[{name:"stargift",type:"InputSavedStarGift"},{name:"password",type:"InputCheckPasswordSRP"}],type:"payments.StarGiftWithdrawalUrl"},{id:1626009505,method:"payments.toggleChatStarGiftNotifications",params:[{name:"flags",type:"#"},{name:"enabled",type:"flags.0?true"},{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-1380249708,method:"invokeWithReCaptcha",params:[{name:"token",type:"string"},{name:"query",type:"!X"}],type:"X"},{id:431639143,method:"account.getPaidMessagesRevenue",params:[{name:"flags",type:"#"},{name:"parent_peer",type:"flags.0?InputPeer"},{name:"user_id",type:"InputUser"}],type:"account.PaidMessagesRevenue"},{id:1259483771,method:"channels.updatePaidMessagesPrice",params:[{name:"flags",type:"#"},{name:"broadcast_messages_allowed",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"send_paid_messages_stars",type:"long"}],type:"Updates"},{id:-660962397,method:"users.getRequirementsToContact",params:[{name:"id",type:"Vector<InputUser>"}],type:"Vector<RequirementToContact>"},{id:353626032,method:"payments.toggleStarGiftsPinnedToTop",params:[{name:"peer",type:"InputPeer"},{name:"stargift",type:"Vector<InputSavedStarGift>"}],type:"Bool"},{id:1339842215,method:"payments.canPurchaseStore",params:[{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Bool"},{id:-1228356717,method:"contacts.getSponsoredPeers",params:[{name:"q",type:"string"}],type:"contacts.SponsoredPeers"},{id:-1935276763,method:"phone.deleteConferenceCallParticipants",params:[{name:"flags",type:"#"},{name:"only_left",type:"flags.0?true"},{name:"kick",type:"flags.1?true"},{name:"call",type:"InputGroupCall"},{name:"ids",type:"Vector<long>"},{name:"block",type:"bytes"}],type:"Updates"},{id:-965732096,method:"phone.sendConferenceCallBroadcast",params:[{name:"call",type:"InputGroupCall"},{name:"block",type:"bytes"}],type:"Updates"},{id:-1124981115,method:"phone.inviteConferenceCallParticipant",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"call",type:"InputGroupCall"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:1011325297,method:"phone.declineConferenceCallInvite",params:[{name:"msg_id",type:"int"}],type:"Updates"},{id:-291534682,method:"phone.getGroupCallChainBlocks",params:[{name:"call",type:"InputGroupCall"},{name:"sub_chain_id",type:"int"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"Updates"},{id:2053087798,method:"payments.getResaleStarGifts",params:[{name:"flags",type:"#"},{name:"sort_by_price",type:"flags.1?true"},{name:"sort_by_num",type:"flags.2?true"},{name:"for_craft",type:"flags.4?true"},{name:"attributes_hash",type:"flags.0?long"},{name:"gift_id",type:"long"},{name:"attributes",type:"flags.3?Vector<StarGiftAttributeId>"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"payments.ResaleStarGifts"},{id:-306287413,method:"payments.updateStarGiftPrice",params:[{name:"stargift",type:"InputSavedStarGift"},{name:"resell_amount",type:"StarsAmount"}],type:"Updates"},{id:377471137,method:"channels.toggleAutotranslation",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:1869585558,method:"messages.getSavedDialogsByID",params:[{name:"flags",type:"#"},{name:"parent_peer",type:"flags.1?InputPeer"},{name:"ids",type:"Vector<InputPeer>"}],type:"messages.SavedDialogs"},{id:-1169540261,method:"messages.readSavedHistory",params:[{name:"parent_peer",type:"InputPeer"},{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"}],type:"Bool"},{id:-320691994,method:"channels.getMessageAuthor",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"int"}],type:"User"},{id:-740282076,method:"messages.toggleTodoCompleted",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"completed",type:"Vector<int>"},{name:"incompleted",type:"Vector<int>"}],type:"Updates"},{id:564531287,method:"messages.appendTodoList",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"list",type:"Vector<TodoItem>"}],type:"Updates"},{id:-30483850,method:"account.toggleNoPaidMessagesException",params:[{name:"flags",type:"#"},{name:"refund_charged",type:"flags.0?true"},{name:"require_payment",type:"flags.2?true"},{name:"parent_peer",type:"flags.1?InputPeer"},{name:"user_id",type:"InputUser"}],type:"Bool"},{id:-2130229924,method:"messages.toggleSuggestedPostApproval",params:[{name:"flags",type:"#"},{name:"reject",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"schedule_date",type:"flags.0?int"},{name:"reject_comment",type:"flags.2?string"}],type:"Updates"},{id:524947079,method:"payments.createStarGiftCollection",params:[{name:"peer",type:"InputPeer"},{name:"title",type:"string"},{name:"stargift",type:"Vector<InputSavedStarGift>"}],type:"StarGiftCollection"},{id:1339932391,method:"payments.updateStarGiftCollection",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"collection_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"delete_stargift",type:"flags.1?Vector<InputSavedStarGift>"},{name:"add_stargift",type:"flags.2?Vector<InputSavedStarGift>"},{name:"order",type:"flags.3?Vector<InputSavedStarGift>"}],type:"StarGiftCollection"},{id:-1020594996,method:"payments.reorderStarGiftCollections",params:[{name:"peer",type:"InputPeer"},{name:"order",type:"Vector<int>"}],type:"Bool"},{id:-1386854168,method:"payments.deleteStarGiftCollection",params:[{name:"peer",type:"InputPeer"},{name:"collection_id",type:"int"}],type:"Bool"},{id:-1743023651,method:"payments.getStarGiftCollections",params:[{name:"peer",type:"InputPeer"},{name:"hash",type:"long"}],type:"payments.StarGiftCollections"},{id:-1553754395,method:"stories.createAlbum",params:[{name:"peer",type:"InputPeer"},{name:"title",type:"string"},{name:"stories",type:"Vector<int>"}],type:"StoryAlbum"},{id:1582455222,method:"stories.updateAlbum",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"album_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"delete_stories",type:"flags.1?Vector<int>"},{name:"add_stories",type:"flags.2?Vector<int>"},{name:"order",type:"flags.3?Vector<int>"}],type:"StoryAlbum"},{id:-2060059687,method:"stories.reorderAlbums",params:[{name:"peer",type:"InputPeer"},{name:"order",type:"Vector<int>"}],type:"Bool"},{id:-1925949744,method:"stories.deleteAlbum",params:[{name:"peer",type:"InputPeer"},{name:"album_id",type:"int"}],type:"Bool"},{id:632548039,method:"stories.getAlbums",params:[{name:"peer",type:"InputPeer"},{name:"hash",type:"long"}],type:"stories.Albums"},{id:-1400869535,method:"stories.getAlbumStories",params:[{name:"peer",type:"InputPeer"},{name:"album_id",type:"int"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"stories.Stories"},{id:576090389,method:"channels.checkSearchPostsFlood",params:[{name:"flags",type:"#"},{name:"query",type:"flags.0?string"}],type:"SearchPostsFlood"},{id:1130737515,method:"payments.getUniqueStarGiftValueInfo",params:[{name:"slug",type:"string"}],type:"payments.UniqueStarGiftValueInfo"},{id:-1060835895,method:"payments.checkCanSendGift",params:[{name:"gift_id",type:"long"}],type:"payments.CheckCanSendGiftResult"},{id:1575909552,method:"account.setMainProfileTab",params:[{name:"tab",type:"ProfileTab"}],type:"Bool"},{id:897842353,method:"channels.setMainProfileTab",params:[{name:"channel",type:"InputChannel"},{name:"tab",type:"ProfileTab"}],type:"Bool"},{id:-1301859671,method:"account.saveMusic",params:[{name:"flags",type:"#"},{name:"unsave",type:"flags.0?true"},{name:"id",type:"InputDocument"},{name:"after_id",type:"flags.1?InputDocument"}],type:"Bool"},{id:-526557265,method:"account.getSavedMusicIds",params:[{name:"hash",type:"long"}],type:"account.SavedMusicIds"},{id:2022539235,method:"users.getSavedMusic",params:[{name:"id",type:"InputUser"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"users.SavedMusic"},{id:1970513129,method:"users.getSavedMusicByID",params:[{name:"id",type:"InputUser"},{name:"documents",type:"Vector<InputDocument>"}],type:"users.SavedMusic"},{id:-466818615,method:"account.getUniqueGiftChatThemes",params:[{name:"offset",type:"string"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"account.ChatThemes"},{id:1457889180,method:"auth.checkPaidAuth",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"form_id",type:"long"}],type:"auth.SentCode"},{id:1000635391,method:"messages.getForumTopics",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"q",type:"flags.0?string"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_topic",type:"int"},{name:"limit",type:"int"}],type:"messages.ForumTopics"},{id:-1358280184,method:"messages.getForumTopicsByID",params:[{name:"peer",type:"InputPeer"},{name:"topics",type:"Vector<int>"}],type:"messages.ForumTopics"},{id:-825487052,method:"messages.editForumTopic",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"topic_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"icon_emoji_id",type:"flags.1?long"},{name:"closed",type:"flags.2?Bool"},{name:"hidden",type:"flags.3?Bool"}],type:"Updates"},{id:392032849,method:"messages.updatePinnedForumTopic",params:[{name:"peer",type:"InputPeer"},{name:"topic_id",type:"int"},{name:"pinned",type:"Bool"}],type:"Updates"},{id:242762224,method:"messages.reorderPinnedForumTopics",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"order",type:"Vector<int>"}],type:"Updates"},{id:798540757,method:"messages.createForumTopic",params:[{name:"flags",type:"#"},{name:"title_missing",type:"flags.4?true"},{name:"peer",type:"InputPeer"},{name:"title",type:"string"},{name:"icon_color",type:"flags.0?int"},{name:"icon_emoji_id",type:"flags.3?long"},{name:"random_id",type:"long"},{name:"send_as",type:"flags.2?InputPeer"}],type:"Updates"},{id:-763269360,method:"messages.deleteTopicHistory",params:[{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"int"}],type:"messages.AffectedHistory"},{id:-1311697904,method:"phone.sendGroupCallMessage",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"random_id",type:"long"},{name:"message",type:"TextWithEntities"},{name:"allow_paid_stars",type:"flags.0?long"},{name:"send_as",type:"flags.1?InputPeer"}],type:"Updates"},{id:-441473683,method:"phone.sendGroupCallEncryptedMessage",params:[{name:"call",type:"InputGroupCall"},{name:"encrypted_message",type:"bytes"}],type:"Bool"},{id:329212923,method:"contacts.updateContactNote",params:[{name:"id",type:"InputUser"},{name:"note",type:"TextWithEntities"}],type:"Bool"},{id:-61656206,method:"users.suggestBirthday",params:[{name:"id",type:"InputUser"},{name:"birthday",type:"Birthday"}],type:"Updates"},{id:-798372642,method:"stories.startLive",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"noforwards",type:"flags.4?true"},{name:"rtmp_stream",type:"flags.5?true"},{name:"peer",type:"InputPeer"},{name:"caption",type:"flags.0?string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"privacy_rules",type:"Vector<InputPrivacyRule>"},{name:"random_id",type:"long"},{name:"messages_enabled",type:"flags.6?Bool"},{name:"send_paid_messages_stars",type:"flags.7?long"}],type:"Updates"},{id:-162573065,method:"phone.deleteGroupCallMessages",params:[{name:"flags",type:"#"},{name:"report_spam",type:"flags.0?true"},{name:"call",type:"InputGroupCall"},{name:"messages",type:"Vector<int>"}],type:"Updates"},{id:499117216,method:"phone.deleteGroupCallParticipantMessages",params:[{name:"flags",type:"#"},{name:"report_spam",type:"flags.0?true"},{name:"call",type:"InputGroupCall"},{name:"participant",type:"InputPeer"}],type:"Updates"},{id:1868784386,method:"phone.getGroupCallStars",params:[{name:"call",type:"InputGroupCall"}],type:"phone.GroupCallStars"},{id:1097313745,method:"phone.saveDefaultSendAs",params:[{name:"call",type:"InputGroupCall"},{name:"send_as",type:"InputPeer"}],type:"Bool"},{id:1553986774,method:"payments.getStarGiftAuctionState",params:[{name:"auction",type:"InputStarGiftAuction"},{name:"version",type:"int"}],type:"payments.StarGiftAuctionState"},{id:1805831148,method:"payments.getStarGiftAuctionAcquiredGifts",params:[{name:"gift_id",type:"long"}],type:"payments.StarGiftAuctionAcquiredGifts"},{id:-1513074355,method:"payments.getStarGiftActiveAuctions",params:[{name:"hash",type:"long"}],type:"payments.StarGiftActiveAuctions"},{id:1117079528,method:"account.initPasskeyRegistration",params:[],type:"account.PasskeyRegistrationOptions"},{id:1437867990,method:"account.registerPasskey",params:[{name:"credential",type:"InputPasskeyCredential"}],type:"Passkey"},{id:-367063982,method:"account.getPasskeys",params:[],type:"account.Passkeys"},{id:-172665281,method:"account.deletePasskey",params:[{name:"id",type:"string"}],type:"Bool"},{id:1368051895,method:"auth.initPasskeyLogin",params:[{name:"api_id",type:"int"},{name:"api_hash",type:"string"}],type:"auth.PasskeyLoginOptions"},{id:-1739084537,method:"auth.finishPasskeyLogin",params:[{name:"flags",type:"#"},{name:"credential",type:"InputPasskeyCredential"},{name:"from_dc_id",type:"flags.0?int"},{name:"from_auth_key_id",type:"flags.0?long"}],type:"auth.Authorization"},{id:-372344804,method:"payments.resolveStarGiftOffer",params:[{name:"flags",type:"#"},{name:"decline",type:"flags.0?true"},{name:"offer_msg_id",type:"int"}],type:"Updates"},{id:-1883739327,method:"payments.sendStarGiftOffer",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"slug",type:"string"},{name:"price",type:"StarsAmount"},{name:"duration",type:"int"},{name:"random_id",type:"long"},{name:"allow_paid_stars",type:"flags.0?long"}],type:"Updates"},{id:1828948824,method:"payments.getStarGiftUpgradeAttributes",params:[{name:"gift_id",type:"long"}],type:"payments.StarGiftUpgradeAttributes"},{id:-75592537,method:"messages.getEmojiGameInfo",params:[],type:"messages.EmojiGameInfo"},{id:-1656683294,method:"messages.summarizeText",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"to_lang",type:"flags.0?string"}],type:"TextWithEntities"},{id:-49947392,method:"payments.getCraftStarGifts",params:[{name:"gift_id",type:"long"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"payments.SavedStarGifts"},{id:-1325832113,method:"payments.craftStarGift",params:[{name:"stargift",type:"Vector<InputSavedStarGift>"}],type:"Updates"},{id:-1610016593,method:"channels.getFutureCreatorAfterLeave",params:[{name:"channel",type:"InputChannel"}],type:"User"}]},layer:222},Ge=Uint8Array,lt=Uint16Array,mn=Int32Array,ys=new Ge([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_s=new Ge([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ws=new Ge([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$i=function(r,e){for(var t=new lt(31),a=0;a<31;++a)t[a]=e+=1<<r[a-1];for(var s=new mn(t[30]),a=1;a<30;++a)for(var n=t[a];n<t[a+1];++n)s[n]=n-t[a]<<5|a;return{b:t,r:s}},Qi=$i(ys,2),Yi=Qi.b,Js=Qi.r;Yi[28]=258,Js[258]=28;var Xi=$i(_s,0),Gp=Xi.b,zn=Xi.r,$s=new lt(32768);for(var ve=0;ve<32768;++ve){var Gt=(ve&43690)>>1|(ve&21845)<<1;Gt=(Gt&52428)>>2|(Gt&13107)<<2,Gt=(Gt&61680)>>4|(Gt&3855)<<4,$s[ve]=((Gt&65280)>>8|(Gt&255)<<8)>>1}var Tt=function(r,e,t){for(var a=r.length,s=0,n=new lt(e);s<a;++s)r[s]&&++n[r[s]-1];var i=new lt(e);for(s=1;s<e;++s)i[s]=i[s-1]+n[s-1]<<1;var o;if(t){o=new lt(1<<e);var p=15-e;for(s=0;s<a;++s)if(r[s])for(var d=s<<4|r[s],c=e-r[s],f=i[r[s]-1]++<<c,l=f|(1<<c)-1;f<=l;++f)o[$s[f]>>p]=d}else for(o=new lt(a),s=0;s<a;++s)r[s]&&(o[s]=$s[i[r[s]-1]++]>>15-r[s]);return o},Zt=new Ge(288);for(var ve=0;ve<144;++ve)Zt[ve]=8;for(var ve=144;ve<256;++ve)Zt[ve]=9;for(var ve=256;ve<280;++ve)Zt[ve]=7;for(var ve=280;ve<288;++ve)Zt[ve]=8;var Oa=new Ge(32);for(var ve=0;ve<32;++ve)Oa[ve]=5;var qp=Tt(Zt,9,0),jp=Tt(Zt,9,1),zp=Tt(Oa,5,0),Hp=Tt(Oa,5,1),Es=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},_t=function(r,e,t){var a=e/8|0;return(r[a]|r[a+1]<<8)>>(e&7)&t},Fs=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},gn=function(r){return(r+7)/8|0},Zi=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Ge(r.subarray(e,t))},Kp=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],dt=function(r,e,t){var a=new Error(e||Kp[r]);if(a.code=r,Error.captureStackTrace&&Error.captureStackTrace(a,dt),!t)throw a;return a},un=function(r,e,t,a){var s=r.length,n=0;if(!s||e.f&&!e.l)return t||new Ge(0);var i=!t,o=i||e.i!=2,p=e.i;i&&(t=new Ge(s*3));var d=function(me){var Fe=t.length;if(me>Fe){var Pe=new Ge(Math.max(Fe*2,me));Pe.set(t),t=Pe}},c=e.f||0,f=e.p||0,l=e.b||0,m=e.l,g=e.d,_=e.m,S=e.n,D=s*8;do{if(!m){c=_t(r,f,1);var C=_t(r,f+1,3);if(f+=3,C)if(C==1)m=jp,g=Hp,_=9,S=5;else if(C==2){var B=_t(r,f,31)+257,L=_t(r,f+10,15)+4,R=B+_t(r,f+5,31)+1;f+=14;for(var T=new Ge(R),V=new Ge(19),O=0;O<L;++O)V[Ws[O]]=_t(r,f+O*3,7);f+=L*3;for(var h=Es(V),M=(1<<h)-1,v=Tt(V,h,1),O=0;O<R;){var y=v[_t(r,f,M)];f+=y&15;var b=y>>4;if(b<16)T[O++]=b;else{var x=0,A=0;for(b==16?(A=3+_t(r,f,3),f+=2,x=T[O-1]):b==17?(A=3+_t(r,f,7),f+=3):b==18&&(A=11+_t(r,f,127),f+=7);A--;)T[O++]=x}}var F=T.subarray(0,B),j=T.subarray(B);_=Es(F),S=Es(j),m=Tt(F,_,1),g=Tt(j,S,1)}else dt(1);else{var b=gn(f)+4,w=r[b-4]|r[b-3]<<8,k=b+w;if(k>s){p&&dt(0);break}o&&d(l+w),t.set(r.subarray(b,k),l),e.b=l+=w,e.p=f=k*8,e.f=c;continue}if(f>D){p&&dt(0);break}}o&&d(l+131072);for(var K=(1<<_)-1,ae=(1<<S)-1,De=f;;De=f){var x=m[Fs(r,f)&K],Z=x>>4;if(f+=x&15,f>D){p&&dt(0);break}if(x||dt(2),Z<256)t[l++]=Z;else if(Z==256){De=f,m=null;break}else{var fe=Z-254;if(Z>264){var O=Z-257,ee=ys[O];fe=_t(r,f,(1<<ee)-1)+Yi[O],f+=ee}var Ie=g[Fs(r,f)&ae],Be=Ie>>4;Ie||dt(3),f+=Ie&15;var j=Gp[Be];if(Be>3){var ee=_s[Be];j+=Fs(r,f)&(1<<ee)-1,f+=ee}if(f>D){p&&dt(0);break}o&&d(l+131072);var he=l+fe;if(l<j){var Ze=n-j,we=Math.min(j,he);for(Ze+l<0&&dt(3);l<we;++l)t[l]=a[Ze+l]}for(;l<he;++l)t[l]=t[l-j]}}e.l=m,e.p=De,e.b=l,e.f=c,m&&(c=1,e.m=_,e.d=g,e.n=S)}while(!c);return l!=t.length&&i?Zi(t,0,l):t.subarray(0,l)},Ut=function(r,e,t){t<<=e&7;var a=e/8|0;r[a]|=t,r[a+1]|=t>>8},Ca=function(r,e,t){t<<=e&7;var a=e/8|0;r[a]|=t,r[a+1]|=t>>8,r[a+2]|=t>>16},Ts=function(r,e){for(var t=[],a=0;a<r.length;++a)r[a]&&t.push({s:a,f:r[a]});var s=t.length,n=t.slice();if(!s)return{t:tr,l:0};if(s==1){var i=new Ge(t[0].s+1);return i[t[0].s]=1,{t:i,l:1}}t.sort(function(k,B){return k.f-B.f}),t.push({s:-1,f:25001});var o=t[0],p=t[1],d=0,c=1,f=2;for(t[0]={s:-1,f:o.f+p.f,l:o,r:p};c!=s-1;)o=t[t[d].f<t[f].f?d++:f++],p=t[d!=c&&t[d].f<t[f].f?d++:f++],t[c++]={s:-1,f:o.f+p.f,l:o,r:p};for(var l=n[0].s,a=1;a<s;++a)n[a].s>l&&(l=n[a].s);var m=new lt(l+1),g=Qs(t[c-1],m,0);if(g>e){var a=0,_=0,S=g-e,D=1<<S;for(n.sort(function(B,L){return m[L.s]-m[B.s]||B.f-L.f});a<s;++a){var C=n[a].s;if(m[C]>e)_+=D-(1<<g-m[C]),m[C]=e;else break}for(_>>=S;_>0;){var b=n[a].s;m[b]<e?_-=1<<e-m[b]++-1:++a}for(;a>=0&&_;--a){var w=n[a].s;m[w]==e&&(--m[w],++_)}g=e}return{t:new Ge(m),l:g}},Qs=function(r,e,t){return r.s==-1?Math.max(Qs(r.l,e,t+1),Qs(r.r,e,t+1)):e[r.s]=t},Hn=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new lt(++e),a=0,s=r[0],n=1,i=function(p){t[a++]=p},o=1;o<=e;++o)if(r[o]==s&&o!=e)++n;else{if(!s&&n>2){for(;n>138;n-=138)i(32754);n>2&&(i(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(i(s),--n;n>6;n-=6)i(8304);n>2&&(i(n-3<<5|8208),n=0)}for(;n--;)i(s);n=1,s=r[o]}return{c:t.subarray(0,a),n:e}},Ia=function(r,e){for(var t=0,a=0;a<e.length;++a)t+=r[a]*e[a];return t},er=function(r,e,t){var a=t.length,s=gn(e+2);r[s]=a&255,r[s+1]=a>>8,r[s+2]=r[s]^255,r[s+3]=r[s+1]^255;for(var n=0;n<a;++n)r[s+n+4]=t[n];return(s+4+a)*8},Kn=function(r,e,t,a,s,n,i,o,p,d,c){Ut(e,c++,t),++s[256];for(var f=Ts(s,15),l=f.t,m=f.l,g=Ts(n,15),_=g.t,S=g.l,D=Hn(l),C=D.c,b=D.n,w=Hn(_),k=w.c,B=w.n,L=new lt(19),R=0;R<C.length;++R)++L[C[R]&31];for(var R=0;R<k.length;++R)++L[k[R]&31];for(var T=Ts(L,7),V=T.t,O=T.l,h=19;h>4&&!V[Ws[h-1]];--h);var M=d+5<<3,v=Ia(s,Zt)+Ia(n,Oa)+i,y=Ia(s,l)+Ia(n,_)+i+14+3*h+Ia(L,V)+2*L[16]+3*L[17]+7*L[18];if(p>=0&&M<=v&&M<=y)return er(e,c,r.subarray(p,p+d));var x,A,F,j;if(Ut(e,c,1+(y<v)),c+=2,y<v){x=Tt(l,m,0),A=l,F=Tt(_,S,0),j=_;var K=Tt(V,O,0);Ut(e,c,b-257),Ut(e,c+5,B-1),Ut(e,c+10,h-4),c+=14;for(var R=0;R<h;++R)Ut(e,c+3*R,V[Ws[R]]);c+=3*h;for(var ae=[C,k],De=0;De<2;++De)for(var Z=ae[De],R=0;R<Z.length;++R){var fe=Z[R]&31;Ut(e,c,K[fe]),c+=V[fe],fe>15&&(Ut(e,c,Z[R]>>5&127),c+=Z[R]>>12)}}else x=qp,A=Zt,F=zp,j=Oa;for(var R=0;R<o;++R){var ee=a[R];if(ee>255){var fe=ee>>18&31;Ca(e,c,x[fe+257]),c+=A[fe+257],fe>7&&(Ut(e,c,ee>>23&31),c+=ys[fe]);var Ie=ee&31;Ca(e,c,F[Ie]),c+=j[Ie],Ie>3&&(Ca(e,c,ee>>5&8191),c+=_s[Ie])}else Ca(e,c,x[ee]),c+=A[ee]}return Ca(e,c,x[256]),c+A[256]},Wp=new mn([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tr=new Ge(0),Jp=function(r,e,t,a,s,n){var i=n.z||r.length,o=new Ge(a+i+5*(1+Math.ceil(i/7e3))+s),p=o.subarray(a,o.length-s),d=n.l,c=(n.r||0)&7;if(e){c&&(p[0]=n.r>>3);for(var f=Wp[e-1],l=f>>13,m=f&8191,g=(1<<t)-1,_=n.p||new lt(32768),S=n.h||new lt(g+1),D=Math.ceil(t/3),C=2*D,b=function(et){return(r[et]^r[et+1]<<D^r[et+2]<<C)&g},w=new mn(25e3),k=new lt(288),B=new lt(32),L=0,R=0,T=n.i||0,V=0,O=n.w||0,h=0;T+2<i;++T){var M=b(T),v=T&32767,y=S[M];if(_[v]=y,S[M]=v,O<=T){var x=i-T;if((L>7e3||V>24576)&&(x>423||!d)){c=Kn(r,p,0,w,k,B,R,V,h,T-h,c),V=L=R=0,h=T;for(var A=0;A<286;++A)k[A]=0;for(var A=0;A<30;++A)B[A]=0}var F=2,j=0,K=m,ae=v-y&32767;if(x>2&&M==b(T-ae))for(var De=Math.min(l,x)-1,Z=Math.min(32767,T),fe=Math.min(258,x);ae<=Z&&--K&&v!=y;){if(r[T+F]==r[T+F-ae]){for(var ee=0;ee<fe&&r[T+ee]==r[T+ee-ae];++ee);if(ee>F){if(F=ee,j=ae,ee>De)break;for(var Ie=Math.min(ae,ee-2),Be=0,A=0;A<Ie;++A){var he=T-ae+A&32767,Ze=_[he],we=he-Ze&32767;we>Be&&(Be=we,y=he)}}}v=y,y=_[v],ae+=v-y&32767}if(j){w[V++]=268435456|Js[F]<<18|zn[j];var me=Js[F]&31,Fe=zn[j]&31;R+=ys[me]+_s[Fe],++k[257+me],++B[Fe],O=T+F,++L}else w[V++]=r[T],++k[r[T]]}}for(T=Math.max(T,O);T<i;++T)w[V++]=r[T],++k[r[T]];c=Kn(r,p,d,w,k,B,R,V,h,T-h,c),d||(n.r=c&7|p[c/8|0]<<3,c-=7,n.h=S,n.p=_,n.i=T,n.w=O)}else{for(var T=n.w||0;T<i+d;T+=65535){var Pe=T+65535;Pe>=i&&(p[c/8|0]=d,Pe=i),c=er(p,c+1,r.subarray(T,Pe))}n.i=i}return Zi(o,0,a+gn(c)+s)},$p=function(){for(var r=new Int32Array(256),e=0;e<256;++e){for(var t=e,a=9;--a;)t=(t&1&&-306674912)^t>>>1;r[e]=t}return r}(),Qp=function(){var r=-1;return{p:function(e){for(var t=r,a=0;a<e.length;++a)t=$p[t&255^e[a]]^t>>>8;r=t},d:function(){return~r}}},Yp=function(r,e,t,a,s){if(!s&&(s={l:1},e.dictionary)){var n=e.dictionary.subarray(-32768),i=new Ge(n.length+r.length);i.set(n),i.set(r,n.length),r=i,s.w=n.length}return Jp(r,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,a,s)},Ys=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},Xp=function(r,e){var t=e.filename;if(r[0]=31,r[1]=139,r[2]=8,r[8]=e.level<2?4:e.level==9?2:0,r[9]=3,e.mtime!=0&&Ys(r,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){r[3]=8;for(var a=0;a<=t.length;++a)r[a+10]=t.charCodeAt(a)}},Zp=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&dt(6,"invalid gzip data");var e=r[3],t=10;e&4&&(t+=(r[10]|r[11]<<8)+2);for(var a=(e>>3&1)+(e>>4&1);a>0;a-=!r[t++]);return t+(e&2)},ed=function(r){var e=r.length;return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0},td=function(r){return 10+(r.filename?r.filename.length+1:0)},ad=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&dt(6,"invalid zlib data"),(r[1]>>5&1)==+!e&&dt(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function sd(r,e){return un(r,{i:2},e,e)}function nd(r,e){e||(e={});var t=Qp(),a=r.length;t.p(r);var s=Yp(r,e,td(e),8),n=s.length;return Xp(s,e),Ys(s,n-8,t.d()),Ys(s,n-4,a),s}function id(r,e){var t=Zp(r);return t+8>r.length&&dt(6,"invalid gzip data"),un(r.subarray(t,-8),{i:2},new Ge(ed(r)),e)}function rd(r,e){return un(r.subarray(ad(r,e),-4),{i:2},e,e)}function od(r,e){return r[0]==31&&r[1]==139&&r[2]==8?id(r,e):(r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31?sd(r,e):rd(r,e)}var pd=typeof TextDecoder<"u"&&new TextDecoder,dd=0;try{pd.decode(tr,{stream:!0}),dd=1}catch{}function cd(r,e){return od(new Uint8Array(r))}var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ld(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function md(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(a){var s=Object.getOwnPropertyDescriptor(r,a);Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:function(){return r[a]}})}),t}var ar={exports:{}};(function(r){var e=function(t){var a=1e7,s=7,n=9007199254740992,i=g(n),o="0123456789abcdefghijklmnopqrstuvwxyz",p=typeof BigInt=="function";function d(u,P,I,E){return typeof u>"u"?d[0]:typeof P<"u"?+P==10&&!I?J(u):Vr(u,P,I,E):J(u)}function c(u,P){this.value=u,this.sign=P,this.isSmall=!1}c.prototype=Object.create(d.prototype);function f(u){this.value=u,this.sign=u<0,this.isSmall=!0}f.prototype=Object.create(d.prototype);function l(u){this.value=u}l.prototype=Object.create(d.prototype);function m(u){return-n<u&&u<n}function g(u){return u<1e7?[u]:u<1e14?[u%1e7,Math.floor(u/1e7)]:[u%1e7,Math.floor(u/1e7)%1e7,Math.floor(u/1e14)]}function _(u){S(u);var P=u.length;if(P<4&&K(u,i)<0)switch(P){case 0:return 0;case 1:return u[0];case 2:return u[0]+u[1]*a;default:return u[0]+(u[1]+u[2]*a)*a}return u}function S(u){for(var P=u.length;u[--P]===0;);u.length=P+1}function D(u){for(var P=new Array(u),I=-1;++I<u;)P[I]=0;return P}function C(u){return u>0?Math.floor(u):Math.ceil(u)}function b(u,P){var I=u.length,E=P.length,N=new Array(I),U=0,G=a,q,z;for(z=0;z<E;z++)q=u[z]+P[z]+U,U=q>=G?1:0,N[z]=q-U*G;for(;z<I;)q=u[z]+U,U=q===G?1:0,N[z++]=q-U*G;return U>0&&N.push(U),N}function w(u,P){return u.length>=P.length?b(u,P):b(P,u)}function k(u,P){var I=u.length,E=new Array(I),N=a,U,G;for(G=0;G<I;G++)U=u[G]-N+P,P=Math.floor(U/N),E[G]=U-P*N,P+=1;for(;P>0;)E[G++]=P%N,P=Math.floor(P/N);return E}c.prototype.add=function(u){var P=J(u);if(this.sign!==P.sign)return this.subtract(P.negate());var I=this.value,E=P.value;return P.isSmall?new c(k(I,Math.abs(E)),this.sign):new c(w(I,E),this.sign)},c.prototype.plus=c.prototype.add,f.prototype.add=function(u){var P=J(u),I=this.value;if(I<0!==P.sign)return this.subtract(P.negate());var E=P.value;if(P.isSmall){if(m(I+E))return new f(I+E);E=g(Math.abs(E))}return new c(k(E,Math.abs(I)),I<0)},f.prototype.plus=f.prototype.add,l.prototype.add=function(u){return new l(this.value+J(u).value)},l.prototype.plus=l.prototype.add;function B(u,P){var I=u.length,E=P.length,N=new Array(I),U=0,G=a,q,z;for(q=0;q<E;q++)z=u[q]-U-P[q],z<0?(z+=G,U=1):U=0,N[q]=z;for(q=E;q<I;q++){if(z=u[q]-U,z<0)z+=G;else{N[q++]=z;break}N[q]=z}for(;q<I;q++)N[q]=u[q];return S(N),N}function L(u,P,I){var E;return K(u,P)>=0?E=B(u,P):(E=B(P,u),I=!I),E=_(E),typeof E=="number"?(I&&(E=-E),new f(E)):new c(E,I)}function R(u,P,I){var E=u.length,N=new Array(E),U=-P,G=a,q,z;for(q=0;q<E;q++)z=u[q]+U,U=Math.floor(z/G),z%=G,N[q]=z<0?z+G:z;return N=_(N),typeof N=="number"?(I&&(N=-N),new f(N)):new c(N,I)}c.prototype.subtract=function(u){var P=J(u);if(this.sign!==P.sign)return this.add(P.negate());var I=this.value,E=P.value;return P.isSmall?R(I,Math.abs(E),this.sign):L(I,E,this.sign)},c.prototype.minus=c.prototype.subtract,f.prototype.subtract=function(u){var P=J(u),I=this.value;if(I<0!==P.sign)return this.add(P.negate());var E=P.value;return P.isSmall?new f(I-E):R(E,Math.abs(I),I>=0)},f.prototype.minus=f.prototype.subtract,l.prototype.subtract=function(u){return new l(this.value-J(u).value)},l.prototype.minus=l.prototype.subtract,c.prototype.negate=function(){return new c(this.value,!this.sign)},f.prototype.negate=function(){var u=this.sign,P=new f(-this.value);return P.sign=!u,P},l.prototype.negate=function(){return new l(-this.value)},c.prototype.abs=function(){return new c(this.value,!1)},f.prototype.abs=function(){return new f(Math.abs(this.value))},l.prototype.abs=function(){return new l(this.value>=0?this.value:-this.value)};function T(u,P){var I=u.length,E=P.length,N=I+E,U=D(N),G=a,q,z,Q,ie,X;for(Q=0;Q<I;++Q){ie=u[Q];for(var ge=0;ge<E;++ge)X=P[ge],q=ie*X+U[Q+ge],z=Math.floor(q/G),U[Q+ge]=q-z*G,U[Q+ge+1]+=z}return S(U),U}function V(u,P){var I=u.length,E=new Array(I),N=a,U=0,G,q;for(q=0;q<I;q++)G=u[q]*P+U,U=Math.floor(G/N),E[q]=G-U*N;for(;U>0;)E[q++]=U%N,U=Math.floor(U/N);return E}function O(u,P){for(var I=[];P-- >0;)I.push(0);return I.concat(u)}function h(u,P){var I=Math.max(u.length,P.length);if(I<=30)return T(u,P);I=Math.ceil(I/2);var E=u.slice(I),N=u.slice(0,I),U=P.slice(I),G=P.slice(0,I),q=h(N,G),z=h(E,U),Q=h(w(N,E),w(G,U)),ie=w(w(q,O(B(B(Q,q),z),I)),O(z,2*I));return S(ie),ie}function M(u,P){return-.012*u-.012*P+15e-6*u*P>0}c.prototype.multiply=function(u){var P=J(u),I=this.value,E=P.value,N=this.sign!==P.sign,U;if(P.isSmall){if(E===0)return d[0];if(E===1)return this;if(E===-1)return this.negate();if(U=Math.abs(E),U<a)return new c(V(I,U),N);E=g(U)}return M(I.length,E.length)?new c(h(I,E),N):new c(T(I,E),N)},c.prototype.times=c.prototype.multiply;function v(u,P,I){return u<a?new c(V(P,u),I):new c(T(P,g(u)),I)}f.prototype._multiplyBySmall=function(u){return m(u.value*this.value)?new f(u.value*this.value):v(Math.abs(u.value),g(Math.abs(this.value)),this.sign!==u.sign)},c.prototype._multiplyBySmall=function(u){return u.value===0?d[0]:u.value===1?this:u.value===-1?this.negate():v(Math.abs(u.value),this.value,this.sign!==u.sign)},f.prototype.multiply=function(u){return J(u)._multiplyBySmall(this)},f.prototype.times=f.prototype.multiply,l.prototype.multiply=function(u){return new l(this.value*J(u).value)},l.prototype.times=l.prototype.multiply;function y(u){var P=u.length,I=D(P+P),E=a,N,U,G,q,z;for(G=0;G<P;G++){q=u[G],U=0-q*q;for(var Q=G;Q<P;Q++)z=u[Q],N=2*(q*z)+I[G+Q]+U,U=Math.floor(N/E),I[G+Q]=N-U*E;I[G+P]=U}return S(I),I}c.prototype.square=function(){return new c(y(this.value),!1)},f.prototype.square=function(){var u=this.value*this.value;return m(u)?new f(u):new c(y(g(Math.abs(this.value))),!1)},l.prototype.square=function(u){return new l(this.value*this.value)};function x(u,P){var I=u.length,E=P.length,N=a,U=D(P.length),G=P[E-1],q=Math.ceil(N/(2*G)),z=V(u,q),Q=V(P,q),ie,X,ge,ot,tt,Ms,Ss;for(z.length<=I&&z.push(0),Q.push(0),G=Q[E-1],X=I-E;X>=0;X--){for(ie=N-1,z[X+E]!==G&&(ie=Math.floor((z[X+E]*N+z[X+E-1])/G)),ge=0,ot=0,Ms=Q.length,tt=0;tt<Ms;tt++)ge+=ie*Q[tt],Ss=Math.floor(ge/N),ot+=z[X+tt]-(ge-Ss*N),ge=Ss,ot<0?(z[X+tt]=ot+N,ot=-1):(z[X+tt]=ot,ot=0);for(;ot!==0;){for(ie-=1,ge=0,tt=0;tt<Ms;tt++)ge+=z[X+tt]-N+Q[tt],ge<0?(z[X+tt]=ge+N,ge=0):(z[X+tt]=ge,ge=1);ot+=ge}U[X]=ie}return z=F(z,q)[0],[_(U),_(z)]}function A(u,P){for(var I=u.length,E=P.length,N=[],U=[],G=a,q,z,Q,ie,X;I;){if(U.unshift(u[--I]),S(U),K(U,P)<0){N.push(0);continue}z=U.length,Q=U[z-1]*G+U[z-2],ie=P[E-1]*G+P[E-2],z>E&&(Q=(Q+1)*G),q=Math.ceil(Q/ie);do{if(X=V(P,q),K(X,U)<=0)break;q--}while(q);N.push(q),U=B(U,X)}return N.reverse(),[_(N),_(U)]}function F(u,P){var I=u.length,E=D(I),N=a,U,G,q,z;for(q=0,U=I-1;U>=0;--U)z=q*N+u[U],G=C(z/P),q=z-G*P,E[U]=G|0;return[E,q|0]}function j(u,P){var I,E=J(P);if(p)return[new l(u.value/E.value),new l(u.value%E.value)];var N=u.value,U=E.value,G;if(U===0)throw new Error("Cannot divide by zero");if(u.isSmall)return E.isSmall?[new f(C(N/U)),new f(N%U)]:[d[0],u];if(E.isSmall){if(U===1)return[u,d[0]];if(U==-1)return[u.negate(),d[0]];var q=Math.abs(U);if(q<a){I=F(N,q),G=_(I[0]);var z=I[1];return u.sign&&(z=-z),typeof G=="number"?(u.sign!==E.sign&&(G=-G),[new f(G),new f(z)]):[new c(G,u.sign!==E.sign),new f(z)]}U=g(q)}var Q=K(N,U);if(Q===-1)return[d[0],u];if(Q===0)return[d[u.sign===E.sign?1:-1],d[0]];N.length+U.length<=200?I=x(N,U):I=A(N,U),G=I[0];var ie=u.sign!==E.sign,X=I[1],ge=u.sign;return typeof G=="number"?(ie&&(G=-G),G=new f(G)):G=new c(G,ie),typeof X=="number"?(ge&&(X=-X),X=new f(X)):X=new c(X,ge),[G,X]}c.prototype.divmod=function(u){var P=j(this,u);return{quotient:P[0],remainder:P[1]}},l.prototype.divmod=f.prototype.divmod=c.prototype.divmod,c.prototype.divide=function(u){return j(this,u)[0]},l.prototype.over=l.prototype.divide=function(u){return new l(this.value/J(u).value)},f.prototype.over=f.prototype.divide=c.prototype.over=c.prototype.divide,c.prototype.mod=function(u){return j(this,u)[1]},l.prototype.mod=l.prototype.remainder=function(u){return new l(this.value%J(u).value)},f.prototype.remainder=f.prototype.mod=c.prototype.remainder=c.prototype.mod,c.prototype.pow=function(u){var P=J(u),I=this.value,E=P.value,N,U,G;if(E===0)return d[1];if(I===0)return d[0];if(I===1)return d[1];if(I===-1)return P.isEven()?d[1]:d[-1];if(P.sign)return d[0];if(!P.isSmall)throw new Error("The exponent "+P.toString()+" is too large.");if(this.isSmall&&m(N=Math.pow(I,E)))return new f(C(N));for(U=this,G=d[1];E&!0&&(G=G.times(U),--E),E!==0;)E/=2,U=U.square();return G},f.prototype.pow=c.prototype.pow,l.prototype.pow=function(u){var P=J(u),I=this.value,E=P.value,N=BigInt(0),U=BigInt(1),G=BigInt(2);if(E===N)return d[1];if(I===N)return d[0];if(I===U)return d[1];if(I===BigInt(-1))return P.isEven()?d[1]:d[-1];if(P.isNegative())return new l(N);for(var q=this,z=d[1];(E&U)===U&&(z=z.times(q),--E),E!==N;)E/=G,q=q.square();return z},c.prototype.modPow=function(u,P){if(u=J(u),P=J(P),P.isZero())throw new Error("Cannot take modPow with modulus 0");var I=d[1],E=this.mod(P);for(u.isNegative()&&(u=u.multiply(d[-1]),E=E.modInv(P));u.isPositive();){if(E.isZero())return d[0];u.isOdd()&&(I=I.multiply(E).mod(P)),u=u.divide(2),E=E.square().mod(P)}return I},l.prototype.modPow=f.prototype.modPow=c.prototype.modPow;function K(u,P){if(u.length!==P.length)return u.length>P.length?1:-1;for(var I=u.length-1;I>=0;I--)if(u[I]!==P[I])return u[I]>P[I]?1:-1;return 0}c.prototype.compareAbs=function(u){var P=J(u),I=this.value,E=P.value;return P.isSmall?1:K(I,E)},f.prototype.compareAbs=function(u){var P=J(u),I=Math.abs(this.value),E=P.value;return P.isSmall?(E=Math.abs(E),I===E?0:I>E?1:-1):-1},l.prototype.compareAbs=function(u){var P=this.value,I=J(u).value;return P=P>=0?P:-P,I=I>=0?I:-I,P===I?0:P>I?1:-1},c.prototype.compare=function(u){if(u===1/0)return-1;if(u===-1/0)return 1;var P=J(u),I=this.value,E=P.value;return this.sign!==P.sign?P.sign?1:-1:P.isSmall?this.sign?-1:1:K(I,E)*(this.sign?-1:1)},c.prototype.compareTo=c.prototype.compare,f.prototype.compare=function(u){if(u===1/0)return-1;if(u===-1/0)return 1;var P=J(u),I=this.value,E=P.value;return P.isSmall?I==E?0:I>E?1:-1:I<0!==P.sign?I<0?-1:1:I<0?1:-1},f.prototype.compareTo=f.prototype.compare,l.prototype.compare=function(u){if(u===1/0)return-1;if(u===-1/0)return 1;var P=this.value,I=J(u).value;return P===I?0:P>I?1:-1},l.prototype.compareTo=l.prototype.compare,c.prototype.equals=function(u){return this.compare(u)===0},l.prototype.eq=l.prototype.equals=f.prototype.eq=f.prototype.equals=c.prototype.eq=c.prototype.equals,c.prototype.notEquals=function(u){return this.compare(u)!==0},l.prototype.neq=l.prototype.notEquals=f.prototype.neq=f.prototype.notEquals=c.prototype.neq=c.prototype.notEquals,c.prototype.greater=function(u){return this.compare(u)>0},l.prototype.gt=l.prototype.greater=f.prototype.gt=f.prototype.greater=c.prototype.gt=c.prototype.greater,c.prototype.lesser=function(u){return this.compare(u)<0},l.prototype.lt=l.prototype.lesser=f.prototype.lt=f.prototype.lesser=c.prototype.lt=c.prototype.lesser,c.prototype.greaterOrEquals=function(u){return this.compare(u)>=0},l.prototype.geq=l.prototype.greaterOrEquals=f.prototype.geq=f.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals,c.prototype.lesserOrEquals=function(u){return this.compare(u)<=0},l.prototype.leq=l.prototype.lesserOrEquals=f.prototype.leq=f.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals,c.prototype.isEven=function(){return(this.value[0]&1)===0},f.prototype.isEven=function(){return(this.value&1)===0},l.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},c.prototype.isOdd=function(){return(this.value[0]&1)===1},f.prototype.isOdd=function(){return(this.value&1)===1},l.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},c.prototype.isPositive=function(){return!this.sign},f.prototype.isPositive=function(){return this.value>0},l.prototype.isPositive=f.prototype.isPositive,c.prototype.isNegative=function(){return this.sign},f.prototype.isNegative=function(){return this.value<0},l.prototype.isNegative=f.prototype.isNegative,c.prototype.isUnit=function(){return!1},f.prototype.isUnit=function(){return Math.abs(this.value)===1},l.prototype.isUnit=function(){return this.abs().value===BigInt(1)},c.prototype.isZero=function(){return!1},f.prototype.isZero=function(){return this.value===0},l.prototype.isZero=function(){return this.value===BigInt(0)},c.prototype.isDivisibleBy=function(u){var P=J(u);return P.isZero()?!1:P.isUnit()?!0:P.compareAbs(2)===0?this.isEven():this.mod(P).isZero()},l.prototype.isDivisibleBy=f.prototype.isDivisibleBy=c.prototype.isDivisibleBy;function ae(u){var P=u.abs();if(P.isUnit())return!1;if(P.equals(2)||P.equals(3)||P.equals(5))return!0;if(P.isEven()||P.isDivisibleBy(3)||P.isDivisibleBy(5))return!1;if(P.lesser(49))return!0}function De(u,P){for(var I=u.prev(),E=I,N=0,U,G,q;E.isEven();)E=E.divide(2),N++;e:for(G=0;G<P.length;G++)if(!u.lesser(P[G])&&(q=e(P[G]).modPow(E,u),!(q.isUnit()||q.equals(I)))){for(U=N-1;U!=0;U--){if(q=q.square().mod(u),q.isUnit())return!1;if(q.equals(I))continue e}return!1}return!0}c.prototype.isPrime=function(u){var P=ae(this);if(P!==t)return P;var I=this.abs(),E=I.bitLength();if(E<=64)return De(I,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var N=Math.log(2)*E.toJSNumber(),U=Math.ceil(u===!0?2*Math.pow(N,2):N),G=[],q=0;q<U;q++)G.push(e(q+2));return De(I,G)},l.prototype.isPrime=f.prototype.isPrime=c.prototype.isPrime,c.prototype.isProbablePrime=function(u,P){var I=ae(this);if(I!==t)return I;for(var E=this.abs(),N=u===t?5:u,U=[],G=0;G<N;G++)U.push(e.randBetween(2,E.minus(2),P));return De(E,U)},l.prototype.isProbablePrime=f.prototype.isProbablePrime=c.prototype.isProbablePrime,c.prototype.modInv=function(u){for(var P=e.zero,I=e.one,E=J(u),N=this.abs(),U,G,q;!N.isZero();)U=E.divide(N),G=P,q=E,P=I,E=N,I=G.subtract(U.multiply(I)),N=q.subtract(U.multiply(N));if(!E.isUnit())throw new Error(this.toString()+" and "+u.toString()+" are not co-prime");return P.compare(0)===-1&&(P=P.add(u)),this.isNegative()?P.negate():P},l.prototype.modInv=f.prototype.modInv=c.prototype.modInv,c.prototype.next=function(){var u=this.value;return this.sign?R(u,1,this.sign):new c(k(u,1),this.sign)},f.prototype.next=function(){var u=this.value;return u+1<n?new f(u+1):new c(i,!1)},l.prototype.next=function(){return new l(this.value+BigInt(1))},c.prototype.prev=function(){var u=this.value;return this.sign?new c(k(u,1),!0):R(u,1,this.sign)},f.prototype.prev=function(){var u=this.value;return u-1>-n?new f(u-1):new c(i,!0)},l.prototype.prev=function(){return new l(this.value-BigInt(1))};for(var Z=[1];2*Z[Z.length-1]<=a;)Z.push(2*Z[Z.length-1]);var fe=Z.length,ee=Z[fe-1];function Ie(u){return Math.abs(u)<=a}c.prototype.shiftLeft=function(u){var P=J(u).toJSNumber();if(!Ie(P))throw new Error(String(P)+" is too large for shifting.");if(P<0)return this.shiftRight(-P);var I=this;if(I.isZero())return I;for(;P>=fe;)I=I.multiply(ee),P-=fe-1;return I.multiply(Z[P])},l.prototype.shiftLeft=f.prototype.shiftLeft=c.prototype.shiftLeft,c.prototype.shiftRight=function(u){var P,I=J(u).toJSNumber();if(!Ie(I))throw new Error(String(I)+" is too large for shifting.");if(I<0)return this.shiftLeft(-I);for(var E=this;I>=fe;){if(E.isZero()||E.isNegative()&&E.isUnit())return E;P=j(E,ee),E=P[1].isNegative()?P[0].prev():P[0],I-=fe-1}return P=j(E,Z[I]),P[1].isNegative()?P[0].prev():P[0]},l.prototype.shiftRight=f.prototype.shiftRight=c.prototype.shiftRight;function Be(u,P,I){P=J(P);for(var E=u.isNegative(),N=P.isNegative(),U=E?u.not():u,G=N?P.not():P,q=0,z=0,Q=null,ie=null,X=[];!U.isZero()||!G.isZero();)Q=j(U,ee),q=Q[1].toJSNumber(),E&&(q=ee-1-q),ie=j(G,ee),z=ie[1].toJSNumber(),N&&(z=ee-1-z),U=Q[0],G=ie[0],X.push(I(q,z));for(var ge=I(E?1:0,N?1:0)!==0?e(-1):e(0),ot=X.length-1;ot>=0;ot-=1)ge=ge.multiply(ee).add(e(X[ot]));return ge}c.prototype.not=function(){return this.negate().prev()},l.prototype.not=f.prototype.not=c.prototype.not,c.prototype.and=function(u){return Be(this,u,function(P,I){return P&I})},l.prototype.and=f.prototype.and=c.prototype.and,c.prototype.or=function(u){return Be(this,u,function(P,I){return P|I})},l.prototype.or=f.prototype.or=c.prototype.or,c.prototype.xor=function(u){return Be(this,u,function(P,I){return P^I})},l.prototype.xor=f.prototype.xor=c.prototype.xor;var he=1<<30,Ze=(a&-a)*(a&-a)|he;function we(u){var P=u.value,I=typeof P=="number"?P|he:typeof P=="bigint"?P|BigInt(he):P[0]+P[1]*a|Ze;return I&-I}function me(u,P){if(P.compareTo(u)<=0){var I=me(u,P.square(P)),E=I.p,N=I.e,U=E.multiply(P);return U.compareTo(u)<=0?{p:U,e:N*2+1}:{p:E,e:N*2}}return{p:e(1),e:0}}c.prototype.bitLength=function(){var u=this;return u.compareTo(e(0))<0&&(u=u.negate().subtract(e(1))),u.compareTo(e(0))===0?e(0):e(me(u,e(2)).e).add(e(1))},l.prototype.bitLength=f.prototype.bitLength=c.prototype.bitLength;function Fe(u,P){return u=J(u),P=J(P),u.greater(P)?u:P}function Pe(u,P){return u=J(u),P=J(P),u.lesser(P)?u:P}function et(u,P){if(u=J(u).abs(),P=J(P).abs(),u.equals(P))return u;if(u.isZero())return P;if(P.isZero())return u;for(var I=d[1],E,N;u.isEven()&&P.isEven();)E=Pe(we(u),we(P)),u=u.divide(E),P=P.divide(E),I=I.multiply(E);for(;u.isEven();)u=u.divide(we(u));do{for(;P.isEven();)P=P.divide(we(P));u.greater(P)&&(N=P,P=u,u=N),P=P.subtract(u)}while(!P.isZero());return I.isUnit()?u:u.multiply(I)}function Nt(u,P){return u=J(u).abs(),P=J(P).abs(),u.divide(et(u,P)).multiply(P)}function Ps(u,P,I){u=J(u),P=J(P);var E=I||Math.random,N=Pe(u,P),U=Fe(u,P),G=U.subtract(N).add(1);if(G.isSmall)return N.add(Math.floor(E()*G));for(var q=Da(G,a).value,z=[],Q=!0,ie=0;ie<q.length;ie++){var X=Q?q[ie]+(ie+1<q.length?q[ie+1]/a:0):a,ge=C(E()*X);z.push(ge),ge<q[ie]&&(Q=!1)}return N.add(d.fromArray(z,a,!1))}var Vr=function(u,P,I,E){I=I||o,u=String(u),E||(u=u.toLowerCase(),I=I.toLowerCase());var N=u.length,U,G=Math.abs(P),q={};for(U=0;U<I.length;U++)q[I[U]]=U;for(U=0;U<N;U++){var z=u[U];if(z!=="-"&&z in q&&q[z]>=G){if(z==="1"&&G===1)continue;throw new Error(z+" is not a valid digit in base "+P+".")}}P=J(P);var Q=[],ie=u[0]==="-";for(U=ie?1:0;U<u.length;U++){var z=u[U];if(z in q)Q.push(J(q[z]));else if(z==="<"){var X=U;do U++;while(u[U]!==">"&&U<u.length);Q.push(J(u.slice(X+1,U)))}else throw new Error(z+" is not a valid character")}return An(Q,P,ie)};function An(u,P,I){var E=d[0],N=d[1],U;for(U=u.length-1;U>=0;U--)E=E.add(u[U].times(N)),N=N.times(P);return I?E.negate():E}function Nr(u,P){return P=P||o,u<P.length?P[u]:"<"+u+">"}function Da(u,P){if(P=e(P),P.isZero()){if(u.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(P.equals(-1)){if(u.isZero())return{value:[0],isNegative:!1};if(u.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-u.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var I=Array.apply(null,Array(u.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return I.unshift([1]),{value:[].concat.apply([],I),isNegative:!1}}var E=!1;if(u.isNegative()&&P.isPositive()&&(E=!0,u=u.abs()),P.isUnit())return u.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(u.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:E};for(var N=[],U=u,G;U.isNegative()||U.compareAbs(P)>=0;){G=U.divmod(P),U=G.quotient;var q=G.remainder;q.isNegative()&&(q=P.minus(q).abs(),U=U.next()),N.push(q.toJSNumber())}return N.push(U.toJSNumber()),{value:N.reverse(),isNegative:E}}function kn(u,P,I){var E=Da(u,P);return(E.isNegative?"-":"")+E.value.map(function(N){return Nr(N,I)}).join("")}c.prototype.toArray=function(u){return Da(this,u)},f.prototype.toArray=function(u){return Da(this,u)},l.prototype.toArray=function(u){return Da(this,u)},c.prototype.toString=function(u,P){if(u===t&&(u=10),u!==10||P)return kn(this,u,P);for(var I=this.value,E=I.length,N=String(I[--E]),U="0000000",G;--E>=0;)G=String(I[E]),N+=U.slice(G.length)+G;var q=this.sign?"-":"";return q+N},f.prototype.toString=function(u,P){return u===t&&(u=10),u!=10||P?kn(this,u,P):String(this.value)},l.prototype.toString=f.prototype.toString,l.prototype.toJSON=c.prototype.toJSON=f.prototype.toJSON=function(){return this.toString()},c.prototype.valueOf=function(){return parseInt(this.toString(),10)},c.prototype.toJSNumber=c.prototype.valueOf,f.prototype.valueOf=function(){return this.value},f.prototype.toJSNumber=f.prototype.valueOf,l.prototype.valueOf=l.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function En(u){if(m(+u)){var P=+u;if(P===C(P))return p?new l(BigInt(P)):new f(P);throw new Error("Invalid integer: "+u)}var I=u[0]==="-";I&&(u=u.slice(1));var E=u.split(/e/i);if(E.length>2)throw new Error("Invalid integer: "+E.join("e"));if(E.length===2){var N=E[1];if(N[0]==="+"&&(N=N.slice(1)),N=+N,N!==C(N)||!m(N))throw new Error("Invalid integer: "+N+" is not a valid exponent.");var U=E[0],G=U.indexOf(".");if(G>=0&&(N-=U.length-G-1,U=U.slice(0,G)+U.slice(G+1)),N<0)throw new Error("Cannot include negative exponent part for integers");U+=new Array(N+1).join("0"),u=U}var q=/^([0-9][0-9]*)$/.test(u);if(!q)throw new Error("Invalid integer: "+u);if(p)return new l(BigInt(I?"-"+u:u));for(var z=[],Q=u.length,ie=s,X=Q-ie;Q>0;)z.push(+u.slice(X,Q)),X-=ie,X<0&&(X=0),Q-=ie;return S(z),new c(z,I)}function Gr(u){if(p)return new l(BigInt(u));if(m(u)){if(u!==C(u))throw new Error(u+" is not an integer.");return new f(u)}return En(u.toString())}function J(u){return typeof u=="number"?Gr(u):typeof u=="string"?En(u):typeof u=="bigint"?new l(u):u}for(var ea=0;ea<1e3;ea++)d[ea]=J(ea),ea>0&&(d[-ea]=J(-ea));return d.one=d[1],d.zero=d[0],d.minusOne=d[-1],d.max=Fe,d.min=Pe,d.gcd=et,d.lcm=Nt,d.isInstance=function(u){return u instanceof c||u instanceof f||u instanceof l},d.randBetween=Ps,d.fromArray=function(u,P,I){return An(u.map(J),J(P||10),I)},d}();r.hasOwnProperty("exports")&&(r.exports=e)})(ar);var gd=ar.exports,ke=ld(gd);function Wn(r){return r>>>0}function sr(r,e){return r=Wn(r),e=Wn(e),ke(r).shiftLeft(32).add(ke(e))}const ud=ke(Number.MAX_SAFE_INTEGER),hn=ke(ke[2]).pow(64),hd=hn.divide(ke[2]);function Wt(r,e=256){return ke.fromArray(r instanceof Uint8Array?[...r]:r,e)}function yd(r){return new Uint8Array(r.toArray(256).value)}function _d(r){return r.greater(hd)?r.minus(hn):r}function vd(r){return r.isNegative()?hn.add(r):r}const nr=+it.API.constructors.find(r=>r.predicate==="boolFalse").id,ir=+it.API.constructors.find(r=>r.predicate==="boolTrue").id,rr=+it.API.constructors.find(r=>r.predicate==="vector").id,or=+it.MTProto.constructors.find(r=>r.predicate==="gzip_packed").id,Us="slice";class Ne{constructor(e={}){this.maxLength=2048,this.offset=0,this.mtproto=!1,this.debug=!1,this.maxLength=e.startMaxLength||2048,this.mtproto=e.mtproto||!1,this.createBuffer()}createBuffer(){this.buffer=new ArrayBuffer(this.maxLength),this.intView=new Int32Array(this.buffer),this.byteView=new Uint8Array(this.buffer)}getArray(){const e=new ArrayBuffer(this.offset),t=new Int32Array(e);return t.set(this.intView.subarray(0,this.offset/4)),t}getBuffer(){return this.getArray().buffer}getBytes(e=!0){if(e){const a=new ArrayBuffer(this.offset),s=new Uint8Array(a);return s.set(this.byteView.subarray(0,this.offset)),s}const t=new Array(this.offset);for(let a=0;a<this.offset;++a)t[a]=this.byteView[a];return t}getOffset(){return this.offset}checkLength(e){if(this.offset+e<this.maxLength)return;this.maxLength=Math.ceil(Math.max(this.maxLength*2,this.offset+e+16)/4)*4;const t=this.buffer,a=new Int32Array(t);this.createBuffer(),new Int32Array(this.buffer).set(a)}writeInt(e,t){this.debug&&console.log(">>>",e.toString(16),e,t);const a=this.offset/4;return this.checkLength(4),this.intView[a]=e,this.offset+=4,a}storeInt(e,t){return this.writeInt(e,(t||"")+":int")}storeBool(e,t){e?this.writeInt(ir,(t||"")+":bool"):this.writeInt(nr,(t||"")+":bool")}storeLongP(e,t,a){this.writeInt(t,(a||"")+":long[low]"),this.writeInt(e,(a||"")+":long[high]")}storeLong(e,t){if(Array.isArray(e))return e.length===2?this.storeLongP(e[0],e[1],t):this.storeIntBytes(e,64,t);const a=vd(ke(e)),{quotient:s,remainder:n}=a.divmod(4294967296),i=s.toJSNumber(),o=n.toJSNumber();this.writeInt(o,(t||"")+":long[low]"),this.writeInt(i,(t||"")+":long[high]")}storeDouble(e,t){const a=new ArrayBuffer(8),s=new Int32Array(a),n=new Float64Array(a);n[0]=e,this.writeInt(s[0],(t||"")+":double[low]"),this.writeInt(s[1],(t||"")+":double[high]")}storeString(e,t){this.debug&&console.log(">>>",e,(t||"")+":string"),e===void 0&&(e="");const a=unescape(encodeURIComponent(e));this.checkLength(a.length+8);const s=a.length;s<=253?this.byteView[this.offset++]=s:(this.byteView[this.offset++]=254,this.byteView[this.offset++]=s&255,this.byteView[this.offset++]=(s&65280)>>8,this.byteView[this.offset++]=(s&16711680)>>16);for(let n=0;n<s;++n)this.byteView[this.offset++]=a.charCodeAt(n);for(;this.offset%4;)this.byteView[this.offset++]=0}storeBytes(e,t){e instanceof ArrayBuffer?e=new Uint8Array(e):e===void 0&&(e=[]),this.debug&&console.log(">>>",ue(e),(t||"")+":bytes");const a=e.length;for(this.checkLength(a+8),a<=253?this.byteView[this.offset++]=a:(this.byteView[this.offset++]=254,this.byteView[this.offset++]=a&255,this.byteView[this.offset++]=(a&65280)>>8,this.byteView[this.offset++]=(a&16711680)>>16),this.byteView.set(e,this.offset),this.offset+=a;this.offset%4;)this.byteView[this.offset++]=0}storeIntBytes(e,t,a){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const s=e.length;if(t%32||s*8!==t){const n=new Error("Invalid bits: "+t+", "+s);throw console.error(n,e,a),n}this.debug&&console.log(">>>",ue(e),(a||"")+":int"+t),this.checkLength(s),this.byteView.set(e,this.offset),this.offset+=s}storeRawBytes(e,t){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const a=e.length;this.debug&&console.log(">>>",ue(e),t||""),this.checkLength(a),this.byteView.set(e,this.offset),this.offset+=a}storeMethod(e,t){const s=(this.mtproto?it.MTProto:it.API).methods.find(n=>n.method===e);if(!s)throw new Error("No method "+e+" found");return this.storeInt(s.id,e+"[id]"),this.storeBody(t,s,e),s.type}storeObject(e,t,a){switch(t){case"!X":return e(this);case"#":e||(e=0);case"int":return this.storeInt(e,a);case"long":return this.storeLong(e,a);case"int128":return this.storeIntBytes(e,128,a);case"int256":return this.storeIntBytes(e,256,a);case"int512":return this.storeIntBytes(e,512,a);case"string":return this.storeString(e,a);case"bytes":return this.storeBytes(e,a);case"double":return this.storeDouble(e,a);case"Bool":return this.storeBool(e,a);case"true":return}if(Array.isArray(e)){if(t.substr(0,6)==="Vector")this.writeInt(rr,a+"[id]");else if(t.substr(0,6)!=="vector")throw new Error("Invalid vector type "+t);const p=t.substr(7,t.length-8);this.writeInt(e.length,a+"[count]");for(let d=0;d<e.length;++d)this.storeObject(e[d],p,a+"["+d+"]");return!0}else if(t.substr(0,6).toLowerCase()==="vector")throw new Error("Invalid vector object");if(!be(e))throw new Error("Invalid object for type "+t);const s=this.mtproto?it.MTProto:it.API,n=e._;let i=!1;const o=s.constructors.find(p=>p.predicate===n);if((i=t.charAt(0)==="%")&&(t=t.substr(1)),!o)throw new Error("No predicate "+n+" found");return n===t&&(i=!0),i||this.writeInt(o.id,a+"["+n+"][id]"),this.storeBody(e,o,a+"["+n+"]"),o.type}storeBody(e,t,a){const s=e.pFlags||e;let n;for(const i of t.params){let o=i.type;const p=o.indexOf("?")!==-1;if(p){const f=o.split("?"),l=f[0].split(".");if(f[1]==="true"?s?.[i.name]:e[i.name]!==void 0)n[l[0]].flags|=1<<+l[1];else continue;o=f[1]}const d=o==="#";d?(n??(n={}))[i.name]={flags:0}:!p&&e[i.name]===void 0&&console.error("Param "+i.name+" is undefined",t,e);const c=this.storeObject(d?n[i.name].flags:e[i.name],o,a+"["+i.name+"]");d&&(n[i.name].offset=c)}for(const i in n){const{flags:o,offset:p}=n[i];this.intView[p]=o}}}class It{constructor(e,t={}){this.offset=0,this.mtproto=!1,e instanceof ArrayBuffer?(this.buffer=e,this.intView=new Int32Array(e),this.byteView=new Uint8Array(this.buffer)):(this.buffer=e.buffer,this.intView=new Int32Array(e.buffer,e.byteOffset,e.byteLength/4),this.byteView=e),this.override=t.override||{},this.mtproto=!!t.mtproto,this.debug=t.debug!==void 0?t.debug:!1}readInt(e){if(this.byteView.length-this.offset<4)throw console.error(this.byteView,this.offset),new Error("Nothing to fetch: "+e);const t=this.intView[this.offset/4];return this.debug&&console.log("<<<",t.toString(16),t,e,this.byteView.slice(this.offset-16,this.offset+16),ue(this.byteView.slice(this.offset-16,this.offset+16))),this.offset+=4,t}fetchInt(e){return this.readInt((e||"")+":int")}fetchDouble(e){const t=new ArrayBuffer(8),a=new Int32Array(t),s=new Float64Array(t);return a[0]=this.readInt((e||"")+":double[low]"),a[1]=this.readInt((e||"")+":double[high]"),s[0]}fetchLong(e){const t=this.readInt((e||"")+":long[low]"),a=this.readInt((e||"")+":long[high]");let s=sr(a,t);return this.mtproto||(s=_d(s)),!this.mtproto&&ud.greaterOrEquals(s.abs())?s.toJSNumber():s.toString(10)}fetchBool(e){const t=this.readInt((e||"")+":bool");return t===ir?!0:t===nr?!1:(this.offset-=4,this.fetchObject("Object",e))}fetchStringWithLength(e,t){let a="";for(let n=0;n<e;++n)a+=String.fromCharCode(this.byteView[this.offset++]);for(;this.offset%4;)++this.offset;let s;try{s=decodeURIComponent(escape(a))}catch{s=a}return this.debug&&console.log("<<<",s,(t||"")+":string"),s}fetchString(e){let t=this.byteView[this.offset++];return t===254&&(t=this.byteView[this.offset++]|this.byteView[this.offset++]<<8|this.byteView[this.offset++]<<16),this.fetchStringWithLength(t,e)}fetchBytes(e){let t=this.byteView[this.offset++];t===254&&(t=this.byteView[this.offset++]|this.byteView[this.offset++]<<8|this.byteView[this.offset++]<<16);const a=this.byteView[Us](this.offset,this.offset+t);for(this.offset+=t;this.offset%4;)++this.offset;return this.debug&&console.log("<<<",ue(a),(e||"")+":bytes"),a}fetchIntBytes(e,t=!0,a){if(e%32)throw new Error("Invalid bits: "+e);const s=e/8;if(t){const i=this.byteView[Us](this.offset,this.offset+s);return this.offset+=s,i}const n=new Array(s);for(let i=0;i<s;++i)n[i]=this.byteView[this.offset++];return this.debug&&console.log("<<<",ue(n),(a||"")+":int"+e),n}fetchRawBytes(e,t=!0,a){if(e===!1&&(e=this.readInt((a||"")+"_length"),e>this.byteView.byteLength))throw new Error("Invalid raw bytes length: "+e+", buffer len: "+this.byteView.byteLength);if(t){const n=new Uint8Array(e);return n.set(this.byteView[Us](this.offset,this.offset+e)),this.offset+=e,n}const s=new Array(e);for(let n=0;n<e;++n)s[n]=this.byteView[this.offset++];return this.debug&&console.log("<<<",ue(s),a||""),s}fetchVector(e,t){const a=this.readInt(t+"[count]"),s=new Array(a);if(a>0){const n=e.substr(7,e.length-8);for(let i=0;i<a;++i)s[i]=this.fetchObject(n,t+"["+i+"]")}return s}fetchObject(e,t){switch(e){case"#":case"int":return this.fetchInt(t);case"long":return this.fetchLong(t);case"int128":return this.fetchIntBytes(128,!0,t);case"int256":return this.fetchIntBytes(256,!0,t);case"int512":return this.fetchIntBytes(512,!0,t);case"string":return this.fetchString(t);case"bytes":return this.fetchBytes(t);case"double":return this.fetchDouble(t);case"Bool":return this.fetchBool(t);case"true":return!0}if(t=t||e||"Object",e.charAt(0)==="v"&&e.substr(1,5)==="ector")return this.fetchVector(e,t);const a=this.mtproto?it.MTProto:it.API;let s=null,n=!1;if(e.charAt(0)==="%"){const d=e.substr(1);if(s=a.constructors.find(c=>c.type===d),!s)throw new Error("Constructor not found for type: "+e)}else{const d=this.readInt(t+"[id]");if(d===or){const l=this.fetchBytes(t+"[packed_string]"),m=cd(l);return new It(m).fetchObject(e,t)}if(d===rr)return this.fetchVector(e,t);let c=a.constructorsIndex;if(!c){a.constructorsIndex=c={};for(let l=0,m=a.constructors.length;l<m;++l)c[a.constructors[l].id]=l}const f=c[d];if(f!==void 0&&(s=a.constructors[f]),!s&&this.mtproto){const l=it.API;for(let m=0,g=l.constructors.length;m<g;++m)if(+l.constructors[m].id===d){s=l.constructors[m],delete this.mtproto,n=!0;break}}if(!s){console.error("Constructor not found:",d);let l,m;try{l=this.fetchInt(t),m=this.fetchInt(t)}catch{}throw new Error("Constructor not found: "+d+" "+l+" "+m+" "+t)}}const i=s.predicate,o={_:i},p=(this.mtproto?"mt_":"")+i;if(this.override[p])this.override[p](o,t+"["+i+"]");else{let d={};for(let c=0,f=s.params.length;c<f;++c){const l=s.params[c];let m=l.type;const g=m==="#";g&&(o.pFlags??(o.pFlags={}),(d??(d={}))[l.name]=0);const _=m.indexOf("?")!==-1;if(_){const D=m.split("?"),C=D[0].split(".");if(!(d[C[0]]&1<<+C[1]))continue;m=D[1]}const S=this.fetchObject(m,t+"["+i+"]["+l.name+"]");_&&m==="true"?o.pFlags[l.name]=S:(g?d:o)[l.name]=S}}return n&&(this.mtproto=!0),e==="JSONValue"?this.formatJSONValue(o):o}formatJSONValue(e){if(!e._)return e;switch(e._){case"jsonNull":return null;case"jsonObject":{const t={},a=e.value;for(let s=0,n=a.length;s<n;++s){const i=a[s];t[i.key]=this.formatJSONValue(i.value)}return t}default:return e.value}}getOffset(){return this.offset}setOffset(e){this.offset=e}}pe.TLDeserialization=It;pe.TLSerialization=Ne;function Pd(r){const e=r;r.length%4!==0&&(r=r.subarray(0,r.length-r.length%4));const t=new It(r);if(t.fetchInt()!==-1590787827)throw new Error("Invalid video stream info");const a=t.fetchString(),s=t.fetchInt(),n=t.fetchInt(),i=new Array(n);for(let o=0;o<n;o++)i[o]={offsetValue:t.fetchInt(),endpointId:t.fetchString(),rotation:t.fetchInt(),extra:t.fetchInt()};return{contentOffset:t.getOffset(),container:a,activeMask:s,events:i,bytes:e}}const Jn=100;class Md extends W{after(){this.name="GROUP-CALLS",this.groupCalls=new Map,this.participants=new Map,this.nextOffsets=new Map,this.cachedStreamChannels=new Map,this.apiUpdatesManager.addMultipleEventsListeners({updateGroupCall:e=>{this.saveGroupCall(e.call,this.appPeersManager.getPeerId(e.peer))},updateGroupCallParticipants:e=>{const t=e.call;this.saveGroupCall(t),this.saveApiParticipants(t.id,e.participants)}}),this.rootScope.addEventListener("group_call_update",e=>{e._==="groupCallDiscarded"&&this.participants.delete(e.id)})}getCachedParticipants(e){let t=this.participants.get(e);return t||this.participants.set(e,t=new Map),t}prepareToSavingNextOffset(e){const t=this.nextOffsets,a=n=>{t.get(e)===s&&t.set(e,n)},s=t.get(e);return{nextOffset:s,setNextOffset:a}}saveApiParticipant(e,t,a){const s=this.getCachedParticipants(e),n=oe(t.peer),i=s.get(n),o=t.pFlags.left;if(!i&&o)return;!t.pFlags.muted&&!t.pFlags.can_self_unmute&&(t.pFlags.can_self_unmute=!0),i?($t(i,t),t=i):s.set(n,t);const p=this.getGroupCall(e);if(p?._==="groupCall"){let d=!1;o?(--p.participants_count,d=!0):t.pFlags.just_joined&&!i&&!t.pFlags.self&&(++p.participants_count,d=!0),d&&this.rootScope.dispatchEvent("group_call_update",p)}o&&s.delete(n),this.rootScope.dispatchEvent("group_call_participant",{groupCallId:e,participant:t})}saveApiParticipants(e,t,a){t.saved||(t.saved=!0,t.forEach(s=>this.saveApiParticipant(e,s,a)))}async editParticipant(e,t,a){this.saveApiParticipant(e,t);const s=t.pFlags.self?Ye:oe(t.peer),n=await this.apiManager.invokeApiSingle("phone.editGroupCallParticipant",{call:this.getGroupCallInput(e),participant:s===Ye?this.appPeersManager.getInputPeerSelf():this.appPeersManager.getInputPeerById(s),muted:a.muted,volume:a.volume,raise_hand:a.raiseHand,video_paused:a.videoPaused,video_stopped:a.videoStopped,presentation_paused:a.presentationPaused});this.apiUpdatesManager.processUpdateMessage(n)}getGroupCall(e){return this.groupCalls.get(e)}async getGroupCallFull(e,t){const a=this.getGroupCall(e);if(a&&a._!=="inputGroupCall"&&!t)return a;const s=this.getCachedParticipants(e).size?0:Jn;return this.apiManager.invokeApiSingleProcess({method:"phone.getGroupCall",params:{call:this.getGroupCallInput(e),limit:s},processResult:n=>{this.appUsersManager.saveApiUsers(n.users),this.appChatsManager.saveApiChats(n.chats),this.saveApiParticipants(e,n.participants,!0);const i=this.saveGroupCall(n.call);return s&&this.nextOffsets.get(e)===void 0&&this.nextOffsets.set(e,n.participants_next_offset),i}})}saveGroupCall(e,t){const a=this.groupCalls.get(e.id),s=e._!=="inputGroupCall"&&(!a||a._!=="groupCallDiscarded");return a?(s&&$t(a,e),e=a):this.groupCalls.set(e.id,e),s&&this.rootScope.dispatchEvent("group_call_update",e),e}async createGroupCall(e,t,a,s=!1){const n=await this.apiManager.invokeApi("phone.createGroupCall",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0)),random_id:Ma(32),schedule_date:t,title:a,rtmp_stream:s});return this.apiUpdatesManager.processUpdateMessage(n),n.updates.find(o=>o._==="updateGroupCall").call}getGroupCallInput(e){const t=this.getGroupCall(e);if(!t)throw new Error(`Group call ${e} not found`);return{_:"inputGroupCall",id:t.id,access_hash:t.access_hash}}async getGroupCallParticipants(e){const{nextOffset:t,setNextOffset:a}=this.prepareToSavingNextOffset(e);return t!==""&&await this.apiManager.invokeApiSingleProcess({method:"phone.getGroupParticipants",params:{call:this.getGroupCallInput(e),ids:[],sources:[],offset:t||"",limit:Jn},processResult:s=>{const n=s.count===s.participants.length?"":s.next_offset;this.appChatsManager.saveApiChats(s.chats),this.appUsersManager.saveApiUsers(s.users),this.saveApiParticipants(e,s.participants),a(n)}}),{participants:this.getCachedParticipants(e),isEnd:this.nextOffsets.get(e)===""}}hangUp(e,t){const a=this.getGroupCallInput(e);let s;return typeof t=="boolean"&&t?s=this.apiManager.invokeApi("phone.discardGroupCall",{call:a}):typeof t=="number"?s=this.apiManager.invokeApi("phone.leaveGroupCall",{call:a,source:t}):s=this.apiManager.invokeApi("phone.joinGroupCall",{call:a,join_as:this.appPeersManager.getInputPeerSelf(),muted:!0,video_stopped:!0,params:{_:"dataJSON",data:""}}),s.then(n=>{this.apiUpdatesManager.processUpdateMessage(n)})}async joinGroupCall(e,t,a){const s=this.getGroupCallInput(e);let n;if(a.type==="main"){const p={call:s,join_as:this.appPeersManager.getInputPeerSelf(),params:t,muted:a.isMuted,video_stopped:!a.joinVideo};n=this.apiManager.invokeApi("phone.joinGroupCall",p),this.log(`[api] joinGroupCall id=${e}`,p)}else{const p={call:s,params:t};n=this.apiManager.invokeApi("phone.joinGroupCallPresentation",p),this.log(`[api] joinGroupCallPresentation id=${e}`,p)}const i=await n;return this.apiUpdatesManager.processUpdateMessage(i),i.updates.find(p=>p._==="updateGroupCallConnection")}leaveGroupCallPresentation(e){return this.apiManager.invokeApi("phone.leaveGroupCallPresentation",{call:this.getGroupCallInput(e)}).then(t=>{this.apiUpdatesManager.processUpdateMessage(t)})}async _fetchRtmpState(e,t=0,a){const s=await this.getGroupCallFull(e.id);if(s._==="groupCallDiscarded")throw new Error("Group call discarded");a??(a=s.stream_dc_id||await this.apiManager.getBaseDcId());try{return{channels:(await this.apiManager.invokeApi("phone.getGroupCallStreamChannels",{call:e},{dcId:a})).channels,dcId:a,time:Date.now()}}catch(n){if(n.type?.indexOf("CALL_MIGRATE")===0){const i=+n.type.match(/^(CALL_MIGRATE_)(\d+)/)[2];return this._fetchRtmpState(e,t,i)}if(n.type==="GROUPCALL_INVALID"&&t<3)return this._fetchRtmpState(e,t+1);throw n}}fetchRtmpState(e,t){const a=e.id,s=this.cachedStreamChannels.get(a);if(s&&!t)return s;const n=this._fetchRtmpState(e);return n.finally(()=>{setTimeout(()=>{this.cachedStreamChannels.get(a)===n&&this.cachedStreamChannels.delete(a)},1e3)}),this.cachedStreamChannels.set(a,n),n}fetchRtmpPart(e,t){return this.apiFileManager.requestFilePart({dcId:t,location:e,offset:0,limit:512*1024,priority:32,floodMaxTimeout:0}).then(a=>a.bytes.length?Pd(a.bytes):void 0)}fetchRtmpUrl(e,t=!1){return this.apiManager.invokeApi("phone.getGroupCallStreamRtmpUrl",{peer:this.appPeersManager.getInputPeerById(e),revoke:t})}async startRecording(e,t){const a=await this.apiManager.invokeApi("phone.toggleGroupCallRecord",{start:!0,call:e,video:t.recordVideo,video_portrait:t.videoHorizontal,title:t.name||void 0});this.apiUpdatesManager.processUpdateMessage(a)}async stopRecording(e){const t=await this.apiManager.invokeApi("phone.toggleGroupCallRecord",{start:!1,call:e});this.apiUpdatesManager.processUpdateMessage(t)}}function Va(r){return{_:"inputPhoto",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference}}function pr(r){return{_:"inputMediaPhoto",id:Va(r),ttl_seconds:0,pFlags:{}}}function Sd(r,e){return r+"_"+e}function dr(r){return{_:"inputMediaDocument",id:{_:"inputDocument",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference},ttl_seconds:0,pFlags:{}}}class bd extends W{constructor(){super(...arguments),this.inlineResults={},this.setHash={}}getGeoInput(e){return e._==="geoPoint"?{_:"inputGeoPoint",lat:e.lat,long:e.long,accuracy_radius:e.accuracy_radius}:{_:"inputGeoPointEmpty"}}getInlineResults(e,t,a="",s="",n){return this.apiManager.invokeApi("messages.getInlineBotResults",{bot:this.appUsersManager.getUserInput(t),peer:this.appPeersManager.getInputPeerById(e),query:a,geo_point:n?this.getGeoInput(n):void 0,offset:s},{stopTime:-1,noErrorBox:!0}).then(i=>{const o=i.query_id;return i.results.forEach(p=>{p._==="botInlineMediaResult"?(p.document=this.appDocsManager.saveDoc(p.document),p.photo=this.appPhotosManager.savePhoto(p.photo)):(p.content=this.appWebDocsManager.saveWebDocument(p.content),p.thumb=this.appWebDocsManager.saveWebDocument(p.thumb)),this.inlineResults[Sd(o,p.id)]=p}),i})}pushPopularBot(e){this.appUsersManager.getTopPeers("bots_inline").then(t=>{const a=e.toPeerId(),s=t.findIndex(i=>i.id===a);let n;s!==-1?n=t[s]:n={id:a,rating:0},++n.rating,Ct(t,n,"rating"),this.appStateManager.setKeyValueToStorage("topPeersCache")})}switchToPM(e,t,a){return this.setHash[t]={peerId:e,time:Date.now()},this.appMessagesManager.startBot(t,void 0,a)}async checkSwitchReturn(e){const t=this.appUsersManager.getUser(e);if(!t||!t.pFlags.bot||!t.bot_inline_placeholder)return;const a=this.setHash[e];if(a&&(delete this.setHash[e],Date.now()-a.time<36e5))return a.peerId}switchInlineQuery(e,t,a,s){const n="@"+this.appPeersManager.getPeerUsername(a.toPeerId())+" "+s;this.appDraftsManager.setDraft(e,t,n)}callbackButtonClick(e,t,a){return this.apiManager.invokeApi("messages.getBotCallbackAnswer",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t),data:a.data},{stopTime:-1,noErrorBox:!0})}sendInlineResult(e,t,a,s={}){const n=s.inlineResult??this.inlineResults[a];if(!n)return;this.pushPopularBot(t);const i=a.split("_"),o=i.shift(),p=i.join("_");if(s.viaBotId=t,s.queryId=o,s.resultId=p,n.send_message.reply_markup&&(s.replyMarkup=n.send_message.reply_markup),n.send_message._==="botInlineMessageText")this.appMessagesManager.sendText({...s,peerId:e,text:n.send_message.message,entities:n.send_message.entities});else{let d,c;const f=n.send_message;switch(f._){case"botInlineMessageMediaAuto":{if(f.message,n._==="botInlineMediaResult"){const{document:l,photo:m}=n;l?d=dr(l):d=pr(m)}else{const l=n.content||n.thumb;l&&(n.type==="photo"?d={_:"inputMediaPhotoExternal",pFlags:{},url:l.url}:d={_:"inputMediaDocumentExternal",pFlags:{},url:l.url},s.webDocument=l)}break}case"botInlineMessageMediaGeo":{d={_:"inputMediaGeoPoint",geo_point:this.getGeoInput(f.geo)},s.geoPoint=f.geo;break}case"botInlineMessageMediaVenue":{d={_:"inputMediaVenue",geo_point:this.getGeoInput(f.geo),title:f.title,address:f.address,provider:f.provider,venue_id:f.venue_id,venue_type:f.venue_type},s.geoPoint=f.geo;break}case"botInlineMessageMediaContact":{d={_:"inputMediaContact",phone_number:f.phone_number,first_name:f.first_name,last_name:f.last_name,vcard:f.vcard};break}case"botInlineMessageMediaInvoice":{c={_:"messageMediaInvoice",title:f.title,description:f.description,photo:f.photo,currency:f.currency,total_amount:f.total_amount,pFlags:{shipping_address_requested:f.pFlags.shipping_address_requested,test:f.pFlags.test},start_param:void 0};break}}!d&&c&&(d={_:"messageMediaPending",messageMedia:c}),this.appMessagesManager.sendOther({...s,peerId:e,inputMedia:d})}}}function zt(r){return typeof r=="number"&&r<La}class Dd{generateTempMessageId(e,t){return+(this.generateMessageId(e,t)+1e-4).toFixed(4)}generateMessageId(e,t){return!t||!Number.isInteger(e)||e<=0?e:(e=H(e),La+e)}incrementMessageId(e,t){return this.generateMessageId(H(e)+t,zt(e)?0:1)}getMessageIdInfo(e,t){const a=H(e);return{messageId:a,channelId:e===a?void 0:t}}splitMessageIdsByChannels(e,t){const a=[];let s;for(let n=0,i=e.length;n<i;++n){const o=e[n],{messageId:p,channelId:d}=this.getMessageIdInfo(o,t);(!s||s[0]!==d)&&(s=[d,{mids:[],messageIds:[]}],a.push(s)),s[1].mids.push(o),s[1].messageIds.push(p)}return a}}function yn(r,e,t=!0){let a=null,s,n;const i=()=>{clearInterval(a),a=null},o=(...p)=>{s=!0,n=p,a||(t&&(s=!1,r(...n)),a=setInterval(()=>{if(!s){i();return}s=!1,r(...n)},e))};return o.clear=i,o}const Cd=8,Id=new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE","MIDDLEWARE","NO_AUTO_DOWNLOAD"]);class wd{constructor(e=Cd){this.parallelLimit=e,this.queueId=0,this.queue=[],this.inProcess=new Set,this.lockPromise=null,this.unlockResolve=null,this.log=je("LL",ye.Error),this.processQueue=yn(()=>this._processQueue(),8,!1)}clear(){this.inProcess.clear(),this.queue.length=0}lock(){this.lockPromise||(this.lockPromise=new Promise((e,t)=>{this.unlockResolve=e}))}unlock(){this.unlockResolve&&(this.unlockResolve(),this.unlockResolve=this.lockPromise=null,this.processQueue())}async processItem(e){if(!this.lockPromise){this.inProcess.add(e);try{await this.loadItem(e)}catch(t){Id.has(t?.type)||this.log.error("loadMediaQueue error:",t)}this.inProcess.delete(e),this.processQueue()}}loadItem(e){return e.load()}getItem(){return this.queue.shift()}addElement(e,t){this.queue[e](t),this.processQueue()}_processQueue(e){if(!(!this.queue.length||this.lockPromise||this.parallelLimit>0&&this.inProcess.size>=this.parallelLimit))do{if(e?Me(this.queue,e):e=this.getItem(),e)this.processItem(e);else break;e=null}while(this.inProcess.size<this.parallelLimit&&this.queue.length)}push(e){this.addElement("push",e)}unshift(e){this.addElement("unshift",e)}}const $n=()=>({cleaned:!1,inner:[],onCleanCallbacks:[]}),Ad=ne("MIDDLEWARE");class kd{constructor(){this.details=$n(),this.onDestroyCallbacks=[],this.onDestroy=e=>{if(this.destroyed)return e();this.onDestroyCallbacks.push(e)}}clean(){const e=this.details;e.cleaned=!0,e.inner.splice(0,e.inner.length).forEach(t=>t.destroy()),e.onCleanCallbacks.splice(0,e.onCleanCallbacks.length).forEach(t=>t()),e.middleware=void 0,this.details=$n()}destroy(){this.destroyed=!0,this.clean(),this.onDestroyCallbacks.splice(0,this.onDestroyCallbacks.length).forEach(e=>e()),this.parent&&(Me(this.parent.details.inner,this),this.parent=void 0)}createMiddlewareForDetails(e,t){const a=()=>!e.cleaned&&(!t||t());return a.create=()=>{if(!a())throw Ad;const s=cr();return s.parent=this,e.inner.push(s),s},a.onClean=s=>{if(!a())return s();e.onCleanCallbacks.push(s)},a.onDestroy=this.onDestroy,a}get(e){const t=this.details;return t.cleaned?this.createMiddlewareForDetails(t):e?this.createMiddlewareForDetails(t,e):t.middleware??(t.middleware=this.createMiddlewareForDetails(t))}}function cr(){return new kd}function Qn(r,e="asc"){if(!r)return[];const t=r instanceof Map?[...r.keys()]:Object.keys(r).map(a=>+a);return e==="asc"?t.sort((a,s)=>a-s):t.sort((a,s)=>s-a)}function fr(r,e){if(r.length<e)return[r];let t=0,a=0,s=0;const n=" ",i=[],o=d=>{let c=r.slice(a,d);const f=s++;if(c.length>e){const l=c.slice(e);fr(l,e).forEach(g=>{i[s++]=g}),c=c.slice(0,e)}a=d,t=0,i[f]=(i[f]||"")+c};let p=0;do{let d=r.indexOf(n,p);if(d===-1){p!==r.length-1&&o();break}d+=n.length;const c=d-p;t+c>e&&o(t),p=d,t+=c}while(!0);return i}function Ed(r){return r?r.match(xi):null}function ts(r){return{_:"reactionEmoji",emoticon:r.reaction}}function He(r,e){return typeof r!=typeof e?!1:([r,e]=[r,e].map(t=>t._==="availableReaction"?ts(t):t),We(r,e))}function Yn({inputFilter:r,messages:e,limit:t,savedReaction:a}){if(r==="inputMessagesFilterEmpty"&&!a)return e.slice(0,t);const s=[];if(!e.length)return s;let n=!0;const i={},o=[],p=[];switch(r){case"inputMessagesFilterPhotos":i.messageMediaPhoto=!0;break;case"inputMessagesFilterPhotoVideo":i.messageMediaPhoto=!0,i.messageMediaDocument=!0,o.push("video");break;case"inputMessagesFilterVideo":i.messageMediaDocument=!0,o.push("video");break;case"inputMessagesFilterDocument":i.messageMediaDocument=!0,o.push(void 0,"photo","pdf");break;case"inputMessagesFilterVoice":i.messageMediaDocument=!0,o.push("voice");break;case"inputMessagesFilterRoundVoice":i.messageMediaDocument=!0,o.push("round","voice");break;case"inputMessagesFilterRoundVideo":i.messageMediaDocument=!0,o.push("round");break;case"inputMessagesFilterMusic":i.messageMediaDocument=!0,o.push("audio");break;case"inputMessagesFilterUrl":i.url=!0;break;case"inputMessagesFilterChatPhotos":i.avatar=!0;break;case"inputMessagesFilterPinned":p.push("pinned");break;default:n=!1;break}if(!n&&!a?.length)return s;for(let d=0,c=e.length;d<c;++d){const f=e[d];if(!f)continue;let l=!n;if(p?.some(m=>f.pFlags[m]))l=!0;else if(f._==="message"){if(f.media&&i[f.media._]){const m=f.media.document;if(m&&o.length&&!o.includes(m.type))continue;l=!0}else if(i.url&&f.message){const m=["messageEntityTextUrl","messageEntityUrl"];(f.totalEntities.find(g=>m.includes(g._))||Ed(f.message))&&(l=!0)}if(l&&a){const m=f.reactions?.results;l=m?a.every(g=>m.some(_=>He(_.reaction,g))):!1}}else i.avatar&&f.action&&["messageActionChannelEditPhoto","messageActionChatEditPhoto","messageActionChannelEditVideo","messageActionChatEditVideo"].includes(f.action._)&&(l=!0);if(l&&s.push(f)>=t)break}return s}let Xn=0;function Xs(r){let e;const t=r?.type;if(t){const a=`${Ns}_${Xn++}.${t.split("/")[1]}`;["image/jpeg","image/png","image/bmp"].indexOf(t)>=0?e="photo"+a:t.indexOf("audio/")===0||["video/ogg"].indexOf(t)>=0?e="audio"+a:t.indexOf("video/")===0?e="video"+a:e="document"+a}else e=`upload-${Ns}_${Xn++}`;return e}function Fd(r){let e=0,t;for(const a of r)if(a.message){if(++e>1)break;t=a}return e>1&&(t=void 0),t}function lr(r){return r.video_thumbs?.[0]}function Sa(r){return{_:"inputDocument",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference}}function Zn(r,e,t){t?r[e]=!0:delete r[e]}function qt(r,{isForum:e=!1,isBotforum:t=!1}={}){let a;const s=r.reply_to,n=r.saved_peer_id&&oe(r.saved_peer_id);return n?a=n:s?._==="messageReplyHeader"&&(!e&&!t||s.pFlags.forum_topic)?a=s.reply_to_top_id||s.reply_to_msg_id:(e||t)&&(r._==="messageService"&&r.action?._==="messageActionTopicCreate"?a=r.mid:e&&(a=Bi)),a}const Td=["abogado","ac","academy","accountants","active","actor","ad","adult","ae","aero","af","ag","agency","ai","airforce","al","allfinanz","alsace","am","amsterdam","an","android","ao","apartments","aq","aquarelle","ar","archi","army","arpa","as","asia","associates","at","attorney","au","auction","audio","autos","aw","ax","axa","az","ba","band","bank","bar","barclaycard","barclays","bargains","bayern","bb","bd","be","beer","berlin","best","bf","bg","bh","bi","bid","bike","bingo","bio","biz","bj","black","blackfriday","bloomberg","blue","bm","bmw","bn","bnpparibas","bo","boo","boutique","br","brussels","bs","bt","budapest","build","builders","business","buzz","bv","bw","by","bz","bzh","ca","cab","cal","camera","camp","cancerresearch","canon","capetown","capital","caravan","cards","care","career","careers","cartier","casa","cash","cat","catering","cc","cd","center","ceo","cern","cf","cg","ch","channel","chat","cheap","christmas","chrome","church","ci","citic","city","ck","cl","claims","cleaning","click","clinic","clothing","club","cm","cn","co","coach","codes","coffee","college","cologne","com","community","company","computer","condos","construction","consulting","contractors","cooking","cool","coop","country","cr","credit","creditcard","cricket","crs","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cz","dabur","dad","dance","dating","day","dclk","de","deals","degree","delivery","democrat","dental","dentist","desi","design","dev","diamonds","diet","digital","direct","directory","discount","dj","dk","dm","dnp","do","docs","domains","doosan","durban","dvag","dz","eat","ec","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","equipment","er","es","esq","estate","et","eu","eurovision","eus","events","everbank","exchange","expert","exposed","fail","farm","fashion","feedback","fi","finance","financial","firmdale","fish","fishing","fit","fitness","fj","fk","flights","florist","flowers","flsmidth","fly","fm","fo","foo","forsale","foundation","fr","frl","frogans","fund","furniture","futbol","ga","gal","gallery","garden","gb","gbiz","gd","ge","gent","gf","gg","ggee","gh","gi","gift","gifts","gives","gl","glass","gle","global","globo","gm","gmail","gmo","gmx","gn","goog","google","gop","gov","gp","gq","gr","graphics","gratis","green","gripe","gs","gt","gu","guide","guitars","guru","gw","gy","hamburg","hangout","haus","healthcare","help","here","hermes","hiphop","hiv","hk","hm","hn","holdings","holiday","homes","horse","host","hosting","house","how","hr","ht","hu","ibm","id","ie","ifm","il","im","immo","immobilien","in","industries","info","ing","ink","institute","insure","int","international","investments","io","iq","ir","irish","is","it","iwc","jcb","je","jetzt","jm","jo","jobs","joburg","jp","juegos","kaufen","kddi","ke","kg","kh","ki","kim","kitchen","kiwi","km","kn","koeln","kp","kr","krd","kred","kw","ky","kyoto","kz","la","lacaixa","land","lat","latrobe","lawyer","lb","lc","lds","lease","legal","lgbt","li","lidl","life","lighting","limited","limo","link","lk","loans","london","lotte","lotto","lr","ls","lt","ltda","lu","luxe","luxury","lv","ly","ma","madrid","maison","management","mango","market","marketing","marriott","mc","md","me","media","meet","melbourne","meme","memorial","menu","mg","mh","miami","mil","mini","mk","ml","mm","mn","mo","mobi","moda","moe","monash","money","mormon","mortgage","moscow","motorcycles","mov","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","nagoya","name","navy","nc","ne","net","network","neustar","new","nexus","nf","ng","ngo","nhk","ni","nico","ninja","nl","no","np","nr","nra","nrw","ntt","nu","nyc","nz","okinawa","om","one","ong","onl","ooo","org","organic","osaka","otsuka","ovh","pa","paris","partners","parts","party","pe","pf","pg","ph","pharmacy","photo","photography","photos","physio","pics","pictures","pink","pizza","pk","pl","place","plumbing","pm","pn","pohl","poker","porn","post","pr","praxi","press","pro","prod","productions","prof","properties","property","ps","pt","pub","pw","py","qa","qpon","quebec","re","realtor","recipes","red","rehab","reise","reisen","reit","ren","rentals","repair","report","republican","rest","restaurant","reviews","rich","rio","rip","ro","rocks","rodeo","rs","rsvp","ru","ruhr","rw","ryukyu","sa","saarland","sale","samsung","sarl","saxo","sb","sc","sca","scb","schmidt","schule","schwarz","science","scot","sd","se","services","sew","sexy","sg","sh","shiksha","shoes","shriram","si","singles","sj","sk","sky","sl","sm","sn","so","social","software","sohu","solar","solutions","soy","space","spiegel","sr","st","style","su","supplies","supply","support","surf","surgery","suzuki","sv","sx","sy","sydney","systems","sz","taipei","tatar","tattoo","tax","tc","td","technology","tel","temasek","tennis","tf","tg","th","tienda","tips","tires","tirol","tj","tk","tl","tm","tn","to","today","tokyo","tools","top","toshiba","town","toys","tp","tr","trade","training","travel","trust","tt","tui","tv","tw","tz","ua","ug","uk","university","uno","uol","us","uy","uz","va","vacations","vc","ve","vegas","ventures","versicherung","vet","vg","vi","viajes","video","villas","vision","vlaanderen","vn","vodka","vote","voting","voto","voyage","vu","wales","wang","watch","webcam","website","wed","wedding","wf","whoswho","wien","wiki","williamhill","wme","work","works","world","ws","wtc","wtf","佛山","集团","在线","한국","ভারত","八卦","موقع","公益","公司","移动","我爱你","москва","қаз","онлайн","сайт","срб","淡马锡","орг","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","中文网","中信","中国","中國","谷歌","భారత్","ලංකා","ભારત","भारत","网店","संगठन","网络","укр","香港","台湾","台灣","手机","мон","الجزائر","عمان","ایران","امارات","بازار","الاردن","بھارت","المغرب","السعودية","مليسيا","شبكة","გე","机构","组织机构","ไทย","سورية","рус","рф","تونس","みんな","グーグル","世界","ਭਾਰਤ","网址","游戏","vermögensberater","vermögensberatung","企业","مصر","قطر","广东","இலங்கை","இந்தியா","新加坡","فلسطين","政务","xxx","xyz","yachts","yandex","ye","yoga","yokohama","youtube","yt","za","zip","zm","zone","zuerich","zw"];function Ud(r){for(var e=r.length,t=r.split("(").length-1,a=r.split(")").length-1;a>t&&r.charAt(e-1)===")";)r=r.substr(0,e-1),a--,e--;return t>a&&(r=r.replace(/\)+$/,"")),r}const Zs={14:{"1f6dd":4912,"1f6de":4961,"1f6df":4968,"1f7f0":62940,"1f979":187,"1f9cc":1571,"1fa7b":61383,"1fa7c":61381,"1faa9":51137,"1faaa":61417,"1faab":61238,"1faac":61414,"1fab7":2694,"1fab8":2668,"1fab9":2716,"1faba":2717,"1fac3":1534,"1fac4":1535,"1fac5":1519,"1fad7":3838,"1fad8":3753,"1fad9":3849,"1fae0":111,"1fae1":136,"1fae2":132,"1fae3":133,"1fae4":178,"1fae5":142,"1fae6":1399,"1fae7":61404,"1faf0":1355,"1faf1":1344,"1faf2":1345,"1faf3":1346,"1faf4":1347,"1faf5":1365,"1faf6":1374,"1f91d-1f3fb":0,"1f91d-1f3fc":0,"1f91d-1f3fd":0,"1f91d-1f3fe":0,"1f91d-1f3ff":0,"1faf1-1f3fb-200d-1faf2-1f3fc":0,"1faf1-1f3fb-200d-1faf2-1f3fd":0,"1faf1-1f3fb-200d-1faf2-1f3fe":0,"1faf1-1f3fb-200d-1faf2-1f3ff":0,"1faf1-1f3fc-200d-1faf2-1f3fb":0,"1faf1-1f3fc-200d-1faf2-1f3fd":0,"1faf1-1f3fc-200d-1faf2-1f3fe":0,"1faf1-1f3fc-200d-1faf2-1f3ff":0,"1faf1-1f3fd-200d-1faf2-1f3fb":0,"1faf1-1f3fd-200d-1faf2-1f3fc":0,"1faf1-1f3fd-200d-1faf2-1f3fe":0,"1faf1-1f3fd-200d-1faf2-1f3ff":0,"1faf1-1f3fe-200d-1faf2-1f3fb":0,"1faf1-1f3fe-200d-1faf2-1f3fc":0,"1faf1-1f3fe-200d-1faf2-1f3fd":0,"1faf1-1f3fe-200d-1faf2-1f3ff":0,"1faf1-1f3ff-200d-1faf2-1f3fb":0,"1faf1-1f3ff-200d-1faf2-1f3fc":0,"1faf1-1f3ff-200d-1faf2-1f3fd":0,"1faf1-1f3ff-200d-1faf2-1f3fe":0,"1fac3-1f3fb":0,"1fac3-1f3fc":0,"1fac3-1f3fd":0,"1fac3-1f3fe":0,"1fac3-1f3ff":0,"1fac4-1f3fb":0,"1fac4-1f3fc":0,"1fac4-1f3fd":0,"1fac4-1f3fe":0,"1fac4-1f3ff":0,"1fac5-1f3fb":0,"1fac5-1f3fc":0,"1fac5-1f3fd":0,"1fac5-1f3fe":0,"1fac5-1f3ff":0,"1faf0-1f3fb":0,"1faf0-1f3fc":0,"1faf0-1f3fd":0,"1faf0-1f3fe":0,"1faf0-1f3ff":0,"1faf1-1f3fb":0,"1faf1-1f3fc":0,"1faf1-1f3fd":0,"1faf1-1f3fe":0,"1faf1-1f3ff":0,"1faf2-1f3fb":0,"1faf2-1f3fc":0,"1faf2-1f3fd":0,"1faf2-1f3fe":0,"1faf2-1f3ff":0,"1faf3-1f3fb":0,"1faf3-1f3fc":0,"1faf3-1f3fd":0,"1faf3-1f3fe":0,"1faf3-1f3ff":0,"1faf4-1f3fb":0,"1faf4-1f3fc":0,"1faf4-1f3fd":0,"1faf4-1f3fe":0,"1faf4-1f3ff":0,"1faf5-1f3fb":0,"1faf5-1f3fc":0,"1faf5-1f3fd":0,"1faf5-1f3fe":0,"1faf5-1f3ff":0,"1faf6-1f3fb":0,"1faf6-1f3fc":0,"1faf6-1f3fd":0,"1faf6-1f3fe":0,"1faf6-1f3ff":0},15:{"1f426-200d-2b1b":2646,"1f6dc":62930,"1fa75":1150,"1fa76":1154,"1fa77":1145,"1fa87":61228,"1fa88":61229,"1faad":61174,"1faae":61189,"1faaf":62894,"1fabb":2702,"1fabc":2669,"1fabd":2645,"1fabf":2647,"1face":2581,"1facf":2582,"1fada":3755,"1fadb":3756,"1fae8":150,"1faf7":1348,"1faf8":1349,"1faf7-1f3fb":0,"1faf7-1f3fc":0,"1faf7-1f3fd":0,"1faf7-1f3fe":0,"1faf7-1f3ff":0,"1faf8-1f3fb":0,"1faf8-1f3fc":0,"1faf8-1f3fd":0,"1faf8-1f3fe":0,"1faf8-1f3ff":0},16:{"1f1e8-1f1f6":71701,"1fa89":61230,"1fa8f":61369,"1fabe":2719,"1fac6":1724,"1fadc":3758,"1fadf":62972,"1fae9":158},"":{2049:62943,2122:62971,2139:62997,2194:62870,2195:62869,2196:62868,2197:62862,2198:62864,2199:62866,2328:61243,2600:41035,2601:41043,2602:41058,2603:41063,2604:41065,2611:62959,2614:41059,2615:3826,2618:2711,2620:1110,2622:62859,2623:62860,2626:62889,2638:62886,2639:181,2648:62895,2649:62896,2650:62903,2651:62904,2652:62905,2653:62906,2660:51139,2663:51142,2665:51140,2666:51141,2668:4910,2692:61346,2693:4967,2694:61349,2696:61360,2697:61370,2699:61358,2702:61333,2705:62958,2708:4976,2709:61294,2712:61308,2714:62960,2716:62936,2721:62885,2728:51074,2733:62966,2734:62967,2744:41062,2747:62968,2753:62944,2754:62945,2755:62946,2757:62947,2763:1140,2764:1144,2795:62937,2796:62938,2797:62939,2934:62873,2935:62874,3030:62948,3297:63021,3299:63022,"0023-20e3":62973,"002a-20e3":62974,"0030-20e3":62975,"0031-20e3":62976,"0032-20e3":62977,"0033-20e3":62978,"0034-20e3":62979,"0035-20e3":62980,"0036-20e3":62981,"0037-20e3":62982,"0038-20e3":62983,"0039-20e3":62984,"00a9":62969,"00ae":62970,"1f004":51145,"1f0cf":51144,"1f170":62991,"1f171":62993,"1f17e":63002,"1f17f":63004,"1f18e":62992,"1f191":62994,"1f192":62995,"1f193":62996,"1f194":62998,"1f195":63e3,"1f196":63001,"1f197":63003,"1f198":63005,"1f199":63006,"1f19a":63007,"1f1e6-1f1e8":71650,"1f1e6-1f1e9":71651,"1f1e6-1f1ea":71652,"1f1e6-1f1eb":71653,"1f1e6-1f1ec":71654,"1f1e6-1f1ee":71655,"1f1e6-1f1f1":71656,"1f1e6-1f1f2":71657,"1f1e6-1f1f4":71658,"1f1e6-1f1f6":71659,"1f1e6-1f1f7":71660,"1f1e6-1f1f8":71661,"1f1e6-1f1f9":71662,"1f1e6-1f1fa":71663,"1f1e6-1f1fc":71664,"1f1e6-1f1fd":71665,"1f1e6-1f1ff":71666,"1f1e7-1f1e6":71667,"1f1e7-1f1e7":71668,"1f1e7-1f1e9":71669,"1f1e7-1f1ea":71670,"1f1e7-1f1eb":71671,"1f1e7-1f1ec":71672,"1f1e7-1f1ed":71673,"1f1e7-1f1ee":71674,"1f1e7-1f1ef":71675,"1f1e7-1f1f1":71676,"1f1e7-1f1f2":71677,"1f1e7-1f1f3":71678,"1f1e7-1f1f4":71679,"1f1e7-1f1f6":71680,"1f1e7-1f1f7":71681,"1f1e7-1f1f8":71682,"1f1e7-1f1f9":71683,"1f1e7-1f1fb":71684,"1f1e7-1f1fc":71685,"1f1e7-1f1fe":71686,"1f1e7-1f1ff":71687,"1f1e8-1f1e6":71688,"1f1e8-1f1e8":71689,"1f1e8-1f1e9":71690,"1f1e8-1f1eb":71691,"1f1e8-1f1ec":71692,"1f1e8-1f1ed":71693,"1f1e8-1f1ee":71694,"1f1e8-1f1f0":71695,"1f1e8-1f1f1":71696,"1f1e8-1f1f2":71697,"1f1e8-1f1f3":71698,"1f1e8-1f1f4":71699,"1f1e8-1f1f5":71700,"1f1e8-1f1f7":71702,"1f1e8-1f1fa":71703,"1f1e8-1f1fb":71704,"1f1e8-1f1fc":71705,"1f1e8-1f1fd":71706,"1f1e8-1f1fe":71707,"1f1e8-1f1ff":71708,"1f1e9-1f1ea":71709,"1f1e9-1f1ec":71710,"1f1e9-1f1ef":71711,"1f1e9-1f1f0":71712,"1f1e9-1f1f2":71713,"1f1e9-1f1f4":71714,"1f1e9-1f1ff":71715,"1f1ea-1f1e6":71716,"1f1ea-1f1e8":71717,"1f1ea-1f1ea":71718,"1f1ea-1f1ec":71719,"1f1ea-1f1ed":71720,"1f1ea-1f1f7":71721,"1f1ea-1f1f8":71722,"1f1ea-1f1f9":71723,"1f1ea-1f1fa":71724,"1f1eb-1f1ee":71725,"1f1eb-1f1ef":71726,"1f1eb-1f1f0":71727,"1f1eb-1f1f2":71728,"1f1eb-1f1f4":71729,"1f1eb-1f1f7":71730,"1f1ec-1f1e6":71731,"1f1ec-1f1e7":71732,"1f1ec-1f1e9":71733,"1f1ec-1f1ea":71734,"1f1ec-1f1eb":71735,"1f1ec-1f1ec":71736,"1f1ec-1f1ed":71737,"1f1ec-1f1ee":71738,"1f1ec-1f1f1":71739,"1f1ec-1f1f2":71740,"1f1ec-1f1f3":71741,"1f1ec-1f1f5":71742,"1f1ec-1f1f6":71743,"1f1ec-1f1f7":71744,"1f1ec-1f1f8":71745,"1f1ec-1f1f9":71746,"1f1ec-1f1fa":71747,"1f1ec-1f1fc":71748,"1f1ec-1f1fe":71749,"1f1ed-1f1f0":71750,"1f1ed-1f1f2":71751,"1f1ed-1f1f3":71752,"1f1ed-1f1f7":71753,"1f1ed-1f1f9":71754,"1f1ed-1f1fa":71755,"1f1ee-1f1e8":71756,"1f1ee-1f1e9":71757,"1f1ee-1f1ea":71758,"1f1ee-1f1f1":71759,"1f1ee-1f1f2":71760,"1f1ee-1f1f3":71761,"1f1ee-1f1f4":71762,"1f1ee-1f1f6":71763,"1f1ee-1f1f7":71764,"1f1ee-1f1f8":71765,"1f1ee-1f1f9":71766,"1f1ef-1f1ea":71767,"1f1ef-1f1f2":71768,"1f1ef-1f1f4":71769,"1f1ef-1f1f5":71770,"1f1f0-1f1ea":71771,"1f1f0-1f1ec":71772,"1f1f0-1f1ed":71773,"1f1f0-1f1ee":71774,"1f1f0-1f1f2":71775,"1f1f0-1f1f3":71776,"1f1f0-1f1f5":71777,"1f1f0-1f1f7":71778,"1f1f0-1f1fc":71779,"1f1f0-1f1fe":71780,"1f1f0-1f1ff":71781,"1f1f1-1f1e6":71782,"1f1f1-1f1e7":71783,"1f1f1-1f1e8":71784,"1f1f1-1f1ee":71785,"1f1f1-1f1f0":71786,"1f1f1-1f1f7":71787,"1f1f1-1f1f8":71788,"1f1f1-1f1f9":71789,"1f1f1-1f1fa":71790,"1f1f1-1f1fb":71791,"1f1f1-1f1fe":71792,"1f1f2-1f1e6":71793,"1f1f2-1f1e8":71794,"1f1f2-1f1e9":71795,"1f1f2-1f1ea":71796,"1f1f2-1f1eb":71797,"1f1f2-1f1ec":71798,"1f1f2-1f1ed":71799,"1f1f2-1f1f0":71800,"1f1f2-1f1f1":71801,"1f1f2-1f1f2":71802,"1f1f2-1f1f3":71803,"1f1f2-1f1f4":71804,"1f1f2-1f1f5":71805,"1f1f2-1f1f6":71806,"1f1f2-1f1f7":71807,"1f1f2-1f1f8":71808,"1f1f2-1f1f9":71809,"1f1f2-1f1fa":71810,"1f1f2-1f1fb":71811,"1f1f2-1f1fc":71812,"1f1f2-1f1fd":71813,"1f1f2-1f1fe":71814,"1f1f2-1f1ff":71815,"1f1f3-1f1e6":71816,"1f1f3-1f1e8":71817,"1f1f3-1f1ea":71818,"1f1f3-1f1eb":71819,"1f1f3-1f1ec":71820,"1f1f3-1f1ee":71821,"1f1f3-1f1f1":71822,"1f1f3-1f1f4":71823,"1f1f3-1f1f5":71824,"1f1f3-1f1f7":71825,"1f1f3-1f1fa":71826,"1f1f3-1f1ff":71827,"1f1f4-1f1f2":71828,"1f1f5-1f1e6":71829,"1f1f5-1f1ea":71830,"1f1f5-1f1eb":71831,"1f1f5-1f1ec":71832,"1f1f5-1f1ed":71833,"1f1f5-1f1f0":71834,"1f1f5-1f1f1":71835,"1f1f5-1f1f2":71836,"1f1f5-1f1f3":71837,"1f1f5-1f1f7":71838,"1f1f5-1f1f8":71839,"1f1f5-1f1f9":71840,"1f1f5-1f1fc":71841,"1f1f5-1f1fe":71842,"1f1f6-1f1e6":71843,"1f1f7-1f1ea":71844,"1f1f7-1f1f4":71845,"1f1f7-1f1f8":71846,"1f1f7-1f1fa":71847,"1f1f7-1f1fc":71848,"1f1f8-1f1e6":71849,"1f1f8-1f1e7":71850,"1f1f8-1f1e8":71851,"1f1f8-1f1e9":71852,"1f1f8-1f1ea":71853,"1f1f8-1f1ec":71854,"1f1f8-1f1ed":71855,"1f1f8-1f1ee":71856,"1f1f8-1f1ef":71857,"1f1f8-1f1f0":71858,"1f1f8-1f1f1":71859,"1f1f8-1f1f2":71860,"1f1f8-1f1f3":71861,"1f1f8-1f1f4":71862,"1f1f8-1f1f7":71863,"1f1f8-1f1f8":71864,"1f1f8-1f1f9":71865,"1f1f8-1f1fb":71866,"1f1f8-1f1fd":71867,"1f1f8-1f1fe":71868,"1f1f8-1f1ff":71869,"1f1f9-1f1e6":71870,"1f1f9-1f1e8":71871,"1f1f9-1f1e9":71872,"1f1f9-1f1eb":71873,"1f1f9-1f1ec":71874,"1f1f9-1f1ed":71875,"1f1f9-1f1ef":71876,"1f1f9-1f1f0":71877,"1f1f9-1f1f1":71878,"1f1f9-1f1f2":71879,"1f1f9-1f1f3":71880,"1f1f9-1f1f4":71881,"1f1f9-1f1f7":71882,"1f1f9-1f1f9":71883,"1f1f9-1f1fb":71884,"1f1f9-1f1fc":71885,"1f1f9-1f1ff":71886,"1f1fa-1f1e6":71887,"1f1fa-1f1ec":71888,"1f1fa-1f1f2":71889,"1f1fa-1f1f3":71890,"1f1fa-1f1f8":71891,"1f1fa-1f1fe":71892,"1f1fa-1f1ff":71893,"1f1fb-1f1e6":71894,"1f1fb-1f1e8":71895,"1f1fb-1f1ea":71896,"1f1fb-1f1ec":71897,"1f1fb-1f1ee":71898,"1f1fb-1f1f3":71899,"1f1fb-1f1fa":71900,"1f1fc-1f1eb":71901,"1f1fc-1f1f8":71902,"1f1fd-1f1f0":71903,"1f1fe-1f1ea":71904,"1f1fe-1f1f9":71905,"1f1ff-1f1e6":71906,"1f1ff-1f1f2":71907,"1f1ff-1f1fc":71908,"1f201":63008,"1f202":63009,"1f21a":63015,"1f22f":63012,"1f232":63016,"1f233":63020,"1f234":63019,"1f235":63024,"1f236":63011,"1f237":63010,"1f238":63018,"1f239":63014,"1f23a":63023,"1f250":63013,"1f251":63017,"1f300":41055,"1f301":4902,"1f302":41057,"1f303":4903,"1f304":4905,"1f305":4906,"1f306":4907,"1f307":4908,"1f308":41056,"1f309":4909,"1f30a":41068,"1f30b":4860,"1f30c":41042,"1f30d":4851,"1f30e":4852,"1f30f":4853,"1f310":4854,"1f311":41022,"1f312":41023,"1f313":41024,"1f314":41025,"1f315":41026,"1f316":41027,"1f317":41028,"1f318":41029,"1f319":41030,"1f31a":41031,"1f31b":41032,"1f31c":41033,"1f31d":41036,"1f31e":41037,"1f31f":41040,"1f320":41041,"1f321":41034,"1f324":41046,"1f325":41047,"1f326":41048,"1f327":41049,"1f328":41050,"1f329":41051,"1f32a":41052,"1f32b":41053,"1f32c":41054,"1f32d":3775,"1f32e":3777,"1f32f":3778,"1f330":3754,"1f331":2703,"1f332":2705,"1f333":2706,"1f334":2707,"1f335":2708,"1f336":3745,"1f337":2701,"1f338":2692,"1f339":2696,"1f33a":2698,"1f33b":2699,"1f33c":2700,"1f33d":3744,"1f33e":2709,"1f33f":2710,"1f340":2712,"1f341":2713,"1f342":2714,"1f343":2715,"1f344":2718,"1f345":3737,"1f346":3741,"1f347":3720,"1f348":3721,"1f349":3722,"1f34a":3723,"1f34b":3724,"1f34c":3726,"1f34d":3727,"1f34e":3729,"1f34f":3730,"1f350":3731,"1f351":3732,"1f352":3733,"1f353":3734,"1f354":3772,"1f355":3774,"1f356":3768,"1f357":3769,"1f358":3794,"1f359":3795,"1f35a":3796,"1f35b":3797,"1f35c":3798,"1f35d":3799,"1f35e":3759,"1f35f":3773,"1f360":3800,"1f361":3806,"1f362":3801,"1f363":3802,"1f364":3803,"1f365":3804,"1f366":3810,"1f367":3811,"1f368":3812,"1f369":3813,"1f36a":3814,"1f36b":3819,"1f36c":3820,"1f36d":3821,"1f36e":3822,"1f36f":3823,"1f370":3816,"1f371":3793,"1f372":3785,"1f373":3783,"1f374":3846,"1f375":3828,"1f376":3829,"1f377":3831,"1f378":3832,"1f379":3833,"1f37a":3834,"1f37b":3835,"1f37c":3824,"1f37d":3845,"1f37e":3830,"1f37f":3789,"1f380":51085,"1f381":51086,"1f382":3815,"1f383":51069,"1f384":51070,"1f385":1541,"1f386":51071,"1f387":51072,"1f388":51075,"1f389":51076,"1f38a":51077,"1f38b":51078,"1f38c":71644,"1f38d":51079,"1f38e":51080,"1f38f":51081,"1f390":51082,"1f391":51083,"1f392":61179,"1f393":61193,"1f396":51090,"1f397":51087,"1f399":61213,"1f39a":61214,"1f39b":61215,"1f39e":61252,"1f39f":51088,"1f3a0":4911,"1f3a1":4913,"1f3a2":4914,"1f3a3":51117,"1f3a4":61216,"1f3a5":61251,"1f3a6":62926,"1f3a7":61217,"1f3a8":51149,"1f3a9":61192,"1f3aa":4916,"1f3ab":51089,"1f3ac":61254,"1f3ad":51147,"1f3ae":51130,"1f3af":51123,"1f3b0":51132,"1f3b1":51127,"1f3b2":51133,"1f3b3":51105,"1f3b4":51146,"1f3b5":61211,"1f3b6":61212,"1f3b7":61219,"1f3b8":61221,"1f3b9":61222,"1f3ba":61223,"1f3bb":61224,"1f3bc":61210,"1f3bd":51119,"1f3be":51103,"1f3bf":51120,"1f3c0":51099,"1f3c1":71642,"1f3c2":1632,"1f3c3-200d-2640":1613,"1f3c3-200d-2642":1612,"1f3c3":1611,"1f3c4-200d-2640":1638,"1f3c4-200d-2642":1637,"1f3c4":1636,"1f3c5":51092,"1f3c6":51091,"1f3c7":1630,"1f3c8":51101,"1f3c9":51102,"1f3ca-200d-2640":1644,"1f3ca-200d-2642":1643,"1f3ca":1642,"1f3cb-200d-2640":1650,"1f3cb-200d-2642":1649,"1f3cb":1648,"1f3cc-200d-2640":1635,"1f3cc-200d-2642":1634,"1f3cc":1633,"1f3cd":4947,"1f3ce":4946,"1f3cf":51106,"1f3d0":51100,"1f3d1":51107,"1f3d2":51108,"1f3d3":51110,"1f3d4":4858,"1f3d5":4862,"1f3d6":4863,"1f3d7":4869,"1f3d8":4874,"1f3d9":4904,"1f3da":4875,"1f3db":4868,"1f3dc":4864,"1f3dd":4865,"1f3de":4866,"1f3df":4867,"1f3e0":4876,"1f3e1":4877,"1f3e2":4878,"1f3e3":4879,"1f3e4":4880,"1f3e5":4881,"1f3e6":4882,"1f3e7":62835,"1f3e8":4883,"1f3e9":4884,"1f3ea":4885,"1f3eb":4886,"1f3ec":4887,"1f3ed":4888,"1f3ee":61265,"1f3ef":4889,"1f3f0":4890,"1f3f3-200d-1f308":71647,"1f3f3-200d-26a7":71648,"1f3f3":71646,"1f3f4-200d-2620":71649,"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f":71909,"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f":71910,"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f":71911,"1f3f4":71645,"1f3f5":2695,"1f3f7":61283,"1f3f8":51111,"1f3f9":61352,"1f3fa":3850,"1f3fb":9556,"1f3fc":9557,"1f3fd":9558,"1f3fe":9559,"1f3ff":9560,"1f400":2609,"1f401":2608,"1f402":2589,"1f403":2590,"1f404":2591,"1f405":2578,"1f406":2579,"1f407":2612,"1f408-200d-2b1b":2575,"1f408":2574,"1f409":2655,"1f40a":2650,"1f40b":2659,"1f40c":2675,"1f40d":2653,"1f40e":2583,"1f40f":2596,"1f410":2598,"1f411":2597,"1f412":2562,"1f413":2629,"1f414":2628,"1f415-200d-1f9ba":2568,"1f415":2566,"1f416":2593,"1f417":2594,"1f418":2603,"1f419":2666,"1f41a":2667,"1f41b":2677,"1f41c":2678,"1f41d":2679,"1f41e":2681,"1f41f":2662,"1f420":2663,"1f421":2664,"1f422":2651,"1f423":2630,"1f424":2631,"1f425":2632,"1f426":2633,"1f427":2634,"1f428":2619,"1f429":2569,"1f42a":2599,"1f42b":2600,"1f42c":2660,"1f42d":2607,"1f42e":2588,"1f42f":2577,"1f430":2611,"1f431":2573,"1f432":2654,"1f433":2658,"1f434":2580,"1f435":2561,"1f436":2565,"1f437":2592,"1f438":2649,"1f439":2610,"1f43a":2570,"1f43b-200d-2744":2618,"1f43b":2617,"1f43c":2620,"1f43d":2595,"1f43e":2626,"1f43f":2613,"1f440":1395,"1f441-200d-1f5e8":1165,"1f441":1396,"1f442":1387,"1f443":1389,"1f444":1398,"1f445":1397,"1f446":1361,"1f447":1363,"1f448":1359,"1f449":1360,"1f44a":1369,"1f44b":1339,"1f44c":1350,"1f44d":1366,"1f44e":1367,"1f44f":1372,"1f450":1375,"1f451":61190,"1f452":61191,"1f453":61154,"1f454":61159,"1f455":61160,"1f456":61161,"1f457":61166,"1f458":61167,"1f459":61172,"1f45a":61173,"1f45b":61175,"1f45c":61176,"1f45d":61177,"1f45e":61181,"1f45f":61182,"1f460":61185,"1f461":61186,"1f462":61188,"1f463":1723,"1f464":1715,"1f465":1716,"1f466":1402,"1f467":1403,"1f468-200d-1f33e":1471,"1f468-200d-1f373":1474,"1f468-200d-1f37c":1538,"1f468-200d-1f393":1462,"1f468-200d-1f3a4":1492,"1f468-200d-1f3a8":1495,"1f468-200d-1f3eb":1465,"1f468-200d-1f3ed":1480,"1f468-200d-1f466-200d-1f466":1705,"1f468-200d-1f466":1704,"1f468-200d-1f467-200d-1f466":1707,"1f468-200d-1f467-200d-1f467":1708,"1f468-200d-1f467":1706,"1f468-200d-1f468-200d-1f466":1694,"1f468-200d-1f468-200d-1f466-200d-1f466":1697,"1f468-200d-1f468-200d-1f467":1695,"1f468-200d-1f468-200d-1f467-200d-1f466":1696,"1f468-200d-1f468-200d-1f467-200d-1f467":1698,"1f468-200d-1f469-200d-1f466":1689,"1f468-200d-1f469-200d-1f466-200d-1f466":1692,"1f468-200d-1f469-200d-1f467":1690,"1f468-200d-1f469-200d-1f467-200d-1f466":1691,"1f468-200d-1f469-200d-1f467-200d-1f467":1693,"1f468-200d-1f4bb":1489,"1f468-200d-1f4bc":1483,"1f468-200d-1f527":1477,"1f468-200d-1f52c":1486,"1f468-200d-1f680":1501,"1f468-200d-1f692":1504,"1f468-200d-1f9af":1595,"1f468-200d-1f9b0":1410,"1f468-200d-1f9b1":1411,"1f468-200d-1f9b2":1413,"1f468-200d-1f9b3":1412,"1f468-200d-1f9bc":1601,"1f468-200d-1f9bd":1607,"1f468-200d-2695":1459,"1f468-200d-2696":1468,"1f468-200d-2708":1498,"1f468-200d-2764-200d-1f468":1687,"1f468-200d-2764-200d-1f48b-200d-1f468":1683,"1f468":1406,"1f469-200d-1f33e":1472,"1f469-200d-1f373":1475,"1f469-200d-1f37c":1537,"1f469-200d-1f393":1463,"1f469-200d-1f3a4":1493,"1f469-200d-1f3a8":1496,"1f469-200d-1f3eb":1466,"1f469-200d-1f3ed":1481,"1f469-200d-1f466-200d-1f466":1710,"1f469-200d-1f466":1709,"1f469-200d-1f467-200d-1f466":1712,"1f469-200d-1f467-200d-1f467":1713,"1f469-200d-1f467":1711,"1f469-200d-1f469-200d-1f466":1699,"1f469-200d-1f469-200d-1f466-200d-1f466":1702,"1f469-200d-1f469-200d-1f467":1700,"1f469-200d-1f469-200d-1f467-200d-1f466":1701,"1f469-200d-1f469-200d-1f467-200d-1f467":1703,"1f469-200d-1f4bb":1490,"1f469-200d-1f4bc":1484,"1f469-200d-1f527":1478,"1f469-200d-1f52c":1487,"1f469-200d-1f680":1502,"1f469-200d-1f692":1505,"1f469-200d-1f9af":1597,"1f469-200d-1f9b0":1415,"1f469-200d-1f9b1":1417,"1f469-200d-1f9b2":1421,"1f469-200d-1f9b3":1419,"1f469-200d-1f9bc":1603,"1f469-200d-1f9bd":1609,"1f469-200d-2695":1460,"1f469-200d-2696":1469,"1f469-200d-2708":1499,"1f469-200d-2764-200d-1f468":1686,"1f469-200d-2764-200d-1f469":1688,"1f469-200d-2764-200d-1f48b-200d-1f468":1682,"1f469-200d-2764-200d-1f48b-200d-1f469":1684,"1f469":1414,"1f46a":1718,"1f46b":1679,"1f46c":1680,"1f46d":1678,"1f46e-200d-2640":1508,"1f46e-200d-2642":1507,"1f46e":1506,"1f46f-200d-2640":1622,"1f46f-200d-2642":1621,"1f46f":1620,"1f470-200d-2640":1532,"1f470-200d-2642":1531,"1f470":1530,"1f471-200d-2640":1423,"1f471-200d-2642":1424,"1f471":1405,"1f472":1525,"1f473-200d-2640":1524,"1f473-200d-2642":1523,"1f473":1522,"1f474":1426,"1f475":1427,"1f476":1400,"1f477-200d-2640":1518,"1f477-200d-2642":1517,"1f477":1516,"1f478":1521,"1f479":1113,"1f47a":1114,"1f47b":1115,"1f47c":1540,"1f47d":1116,"1f47e":1117,"1f47f":1108,"1f480":1109,"1f481-200d-2640":1442,"1f481-200d-2642":1441,"1f481":1440,"1f482-200d-2640":1514,"1f482-200d-2642":1513,"1f482":1512,"1f483":1617,"1f484":61198,"1f485":1380,"1f486-200d-2640":1574,"1f486-200d-2642":1573,"1f486":1572,"1f487-200d-2640":1577,"1f487-200d-2642":1576,"1f487":1575,"1f488":4915,"1f489":61377,"1f48a":61379,"1f48b":1156,"1f48c":1131,"1f48d":61199,"1f48e":61200,"1f48f":1681,"1f490":2691,"1f491":1685,"1f492":4891,"1f493":1136,"1f494":1141,"1f495":1138,"1f496":1134,"1f497":1135,"1f498":1132,"1f499":1149,"1f49a":1148,"1f49b":1147,"1f49c":1151,"1f49d":1133,"1f49e":1137,"1f49f":1139,"1f4a0":63055,"1f4a1":61263,"1f4a2":1158,"1f4a3":61350,"1f4a4":1169,"1f4a5":1159,"1f4a6":1161,"1f4a7":41067,"1f4a8":1162,"1f4a9":1111,"1f4aa":1382,"1f4ab":1160,"1f4ac":1164,"1f4ad":1168,"1f4ae":2693,"1f4af":1157,"1f4b0":61284,"1f4b1":62949,"1f4b2":62950,"1f4b3":61291,"1f4b4":61286,"1f4b5":61287,"1f4b6":61288,"1f4b7":61289,"1f4b8":61290,"1f4b9":61293,"1f4ba":4981,"1f4bb":61240,"1f4bc":61314,"1f4bd":61246,"1f4be":61247,"1f4bf":61248,"1f4c0":61249,"1f4c1":61315,"1f4c2":61316,"1f4c3":61276,"1f4c4":61278,"1f4c5":61318,"1f4c6":61319,"1f4c7":61322,"1f4c8":61323,"1f4c9":61324,"1f4ca":61325,"1f4cb":61326,"1f4cc":61327,"1f4cd":61328,"1f4ce":61329,"1f4cf":61331,"1f4d0":61332,"1f4d1":61281,"1f4d2":61275,"1f4d3":61274,"1f4d4":61267,"1f4d5":61268,"1f4d6":61269,"1f4d7":61270,"1f4d8":61271,"1f4d9":61272,"1f4da":61273,"1f4db":62955,"1f4dc":61277,"1f4dd":61313,"1f4de":61234,"1f4df":61235,"1f4e0":61236,"1f4e1":61376,"1f4e2":61205,"1f4e3":61206,"1f4e4":61298,"1f4e5":61299,"1f4e6":61300,"1f4e7":61295,"1f4e8":61296,"1f4e9":61297,"1f4ea":61302,"1f4eb":61301,"1f4ec":61303,"1f4ed":61304,"1f4ee":61305,"1f4ef":61207,"1f4f0":61279,"1f4f1":61231,"1f4f2":61232,"1f4f3":62931,"1f4f4":62932,"1f4f5":62857,"1f4f6":62929,"1f4f7":61256,"1f4f8":61257,"1f4f9":61258,"1f4fa":61255,"1f4fb":61218,"1f4fc":61259,"1f4fd":61253,"1f4ff":61197,"1f500":62908,"1f501":62909,"1f502":62910,"1f503":62875,"1f504":62876,"1f505":62927,"1f506":62928,"1f507":61201,"1f508":61202,"1f509":61203,"1f50a":61204,"1f50b":61237,"1f50c":61239,"1f50d":61260,"1f50e":61261,"1f50f":61339,"1f510":61340,"1f511":61341,"1f512":61337,"1f513":61338,"1f514":61208,"1f515":61209,"1f516":61282,"1f517":61362,"1f518":63056,"1f519":62877,"1f51a":62878,"1f51b":62879,"1f51c":62880,"1f51d":62881,"1f51e":62858,"1f51f":62985,"1f520":62986,"1f521":62987,"1f522":62988,"1f523":62989,"1f524":62990,"1f525":41066,"1f526":61264,"1f527":61355,"1f528":61343,"1f529":61357,"1f52a":3848,"1f52b":51126,"1f52c":61374,"1f52d":61375,"1f52e":51128,"1f52f":62893,"1f530":62956,"1f531":62954,"1f532":63058,"1f533":63057,"1f534":63025,"1f535":63029,"1f536":63049,"1f537":63050,"1f538":63051,"1f539":63052,"1f53a":63053,"1f53b":63054,"1f53c":62918,"1f53d":62920,"1f549":62884,"1f54a":2635,"1f54b":4899,"1f54c":4895,"1f54d":4897,"1f54e":62892,"1f550":41e3,"1f551":41002,"1f552":41004,"1f553":41006,"1f554":41008,"1f555":41010,"1f556":41012,"1f557":41014,"1f558":41016,"1f559":41018,"1f55a":41020,"1f55b":4998,"1f55c":41001,"1f55d":41003,"1f55e":41005,"1f55f":41007,"1f560":41009,"1f561":41011,"1f562":41013,"1f563":41015,"1f564":41017,"1f565":41019,"1f566":41021,"1f567":4999,"1f56f":61262,"1f570":4997,"1f573":1163,"1f574":1619,"1f575-200d-2640":1511,"1f575-200d-2642":1510,"1f575":1509,"1f576":61155,"1f577":2684,"1f578":2685,"1f579":51131,"1f57a":1618,"1f587":61330,"1f58a":61310,"1f58b":61309,"1f58c":61311,"1f58d":61312,"1f590":1341,"1f595":1362,"1f596":1343,"1f5a4":1153,"1f5a5":61241,"1f5a8":61242,"1f5b1":61244,"1f5b2":61245,"1f5bc":51148,"1f5c2":61317,"1f5c3":61334,"1f5c4":61335,"1f5d1":61336,"1f5d2":61320,"1f5d3":61321,"1f5dc":61359,"1f5dd":61342,"1f5de":61280,"1f5e1":61348,"1f5e3":1714,"1f5e8":1166,"1f5ef":1167,"1f5f3":61306,"1f5fa":4855,"1f5fb":4861,"1f5fc":4892,"1f5fd":4893,"1f5fe":4856,"1f5ff":61415,"1f600":11,"1f601":14,"1f602":18,"1f603":12,"1f604":13,"1f605":16,"1f606":15,"1f607":114,"1f608":1107,"1f609":112,"1f60a":113,"1f60b":124,"1f60c":153,"1f60d":116,"1f60e":174,"1f60f":144,"1f610":139,"1f611":140,"1f612":145,"1f613":199,"1f614":154,"1f615":177,"1f616":196,"1f617":119,"1f618":118,"1f619":122,"1f61a":121,"1f61b":125,"1f61c":126,"1f61d":128,"1f61e":198,"1f61f":179,"1f620":1105,"1f621":1104,"1f622":193,"1f623":197,"1f624":1103,"1f625":192,"1f626":188,"1f627":189,"1f628":190,"1f629":1100,"1f62a":155,"1f62b":1101,"1f62c":147,"1f62d":194,"1f62e-200d-1f4a8":148,"1f62e":182,"1f62f":183,"1f630":191,"1f631":195,"1f632":184,"1f633":185,"1f634":157,"1f635-200d-1f4ab":169,"1f635":168,"1f636-200d-1f32b":143,"1f636":141,"1f637":159,"1f638":1120,"1f639":1121,"1f63a":1119,"1f63b":1122,"1f63c":1123,"1f63d":1124,"1f63e":1127,"1f63f":1126,"1f640":1125,"1f641":180,"1f642":19,"1f643":110,"1f644":146,"1f645-200d-2640":1436,"1f645-200d-2642":1435,"1f645":1434,"1f646-200d-2640":1439,"1f646-200d-2642":1438,"1f646":1437,"1f647-200d-2640":1451,"1f647-200d-2642":1450,"1f647":1449,"1f648":1128,"1f649":1129,"1f64a":1130,"1f64b-200d-2640":1445,"1f64b-200d-2642":1444,"1f64b":1443,"1f64c":1373,"1f64d-200d-2640":1430,"1f64d-200d-2642":1429,"1f64d":1428,"1f64e-200d-2640":1433,"1f64e-200d-2642":1432,"1f64e":1431,"1f64f":1378,"1f680":4987,"1f681":4982,"1f682":4917,"1f683":4918,"1f684":4919,"1f685":4920,"1f686":4921,"1f687":4922,"1f688":4923,"1f689":4924,"1f68a":4925,"1f68b":4928,"1f68c":4929,"1f68d":4930,"1f68e":4931,"1f68f":4956,"1f690":4932,"1f691":4933,"1f692":4934,"1f693":4935,"1f694":4936,"1f695":4937,"1f696":4938,"1f697":4939,"1f698":4940,"1f699":4941,"1f69a":4943,"1f69b":4944,"1f69c":4945,"1f69d":4926,"1f69e":4927,"1f69f":4983,"1f6a0":4984,"1f6a1":4985,"1f6a2":4975,"1f6a3-200d-2640":1641,"1f6a3-200d-2642":1640,"1f6a3":1639,"1f6a4":4971,"1f6a5":4963,"1f6a6":4964,"1f6a7":4966,"1f6a8":4962,"1f6a9":71643,"1f6aa":61384,"1f6ab":62851,"1f6ac":61409,"1f6ad":62853,"1f6ae":62836,"1f6af":62854,"1f6b0":62837,"1f6b1":62855,"1f6b2":4952,"1f6b3":62852,"1f6b4-200d-2640":1653,"1f6b4-200d-2642":1652,"1f6b4":1651,"1f6b5-200d-2640":1656,"1f6b5-200d-2642":1655,"1f6b5":1654,"1f6b6-200d-2640":1580,"1f6b6-200d-2642":1579,"1f6b6":1578,"1f6b7":62856,"1f6b8":62849,"1f6b9":62839,"1f6ba":62840,"1f6bb":62841,"1f6bc":62842,"1f6bd":61391,"1f6be":62843,"1f6bf":61393,"1f6c0":1675,"1f6c1":61394,"1f6c2":62844,"1f6c3":62845,"1f6c4":62846,"1f6c5":62847,"1f6cb":61389,"1f6cc":1676,"1f6cd":61178,"1f6ce":4989,"1f6cf":61388,"1f6d0":62882,"1f6d1":4965,"1f6d2":61408,"1f6d5":4896,"1f6d6":4873,"1f6d7":61385,"1f6e0":61347,"1f6e1":61353,"1f6e2":4959,"1f6e3":4957,"1f6e4":4958,"1f6e5":4974,"1f6e9":4977,"1f6eb":4978,"1f6ec":4979,"1f6f0":4986,"1f6f3":4972,"1f6f4":4953,"1f6f5":4948,"1f6f6":4970,"1f6f7":51121,"1f6f8":4988,"1f6f9":4954,"1f6fa":4951,"1f6fb":4942,"1f6fc":4955,"1f7e0":63026,"1f7e1":63027,"1f7e2":63028,"1f7e3":63030,"1f7e4":63031,"1f7e5":63034,"1f7e6":63038,"1f7e7":63035,"1f7e8":63036,"1f7e9":63037,"1f7ea":63039,"1f7eb":63040,"1f90c":1351,"1f90d":1155,"1f90e":1152,"1f90f":1352,"1f910":137,"1f911":129,"1f912":160,"1f913":175,"1f914":135,"1f915":161,"1f916":1118,"1f917":130,"1f918":1357,"1f919":1358,"1f91a":1340,"1f91b":1370,"1f91c":1371,"1f91d":1377,"1f91e":1354,"1f91f":1356,"1f920":171,"1f921":1112,"1f922":162,"1f923":17,"1f924":156,"1f925":149,"1f926-200d-2640":1454,"1f926-200d-2642":1453,"1f926":1452,"1f927":164,"1f928":138,"1f929":117,"1f92a":127,"1f92b":134,"1f92c":1106,"1f92d":131,"1f92e":163,"1f92f":170,"1f930":1533,"1f931":1536,"1f932":1376,"1f933":1381,"1f934":1520,"1f935-200d-2640":1529,"1f935-200d-2642":1528,"1f935":1527,"1f936":1542,"1f937-200d-2640":1457,"1f937-200d-2642":1456,"1f937":1455,"1f938-200d-2640":1659,"1f938-200d-2642":1658,"1f938":1657,"1f939-200d-2640":1671,"1f939-200d-2642":1670,"1f939":1669,"1f93a":1629,"1f93c-200d-2640":1662,"1f93c-200d-2642":1661,"1f93c":1660,"1f93d-200d-2640":1665,"1f93d-200d-2642":1664,"1f93d":1663,"1f93e-200d-2640":1668,"1f93e-200d-2642":1667,"1f93e":1666,"1f93f":51118,"1f940":2697,"1f941":61226,"1f942":3836,"1f943":3837,"1f944":3847,"1f945":51114,"1f947":51093,"1f948":51094,"1f949":51095,"1f94a":51112,"1f94b":51113,"1f94c":51122,"1f94d":51109,"1f94e":51098,"1f94f":51104,"1f950":3760,"1f951":3740,"1f952":3747,"1f953":3771,"1f954":3742,"1f955":3743,"1f956":3761,"1f957":3788,"1f958":3784,"1f959":3780,"1f95a":3782,"1f95b":3825,"1f95c":3752,"1f95d":3736,"1f95e":3765,"1f95f":3807,"1f960":3808,"1f961":3809,"1f962":3844,"1f963":3787,"1f964":3839,"1f965":3739,"1f966":3749,"1f967":3818,"1f968":3763,"1f969":3770,"1f96a":3776,"1f96b":3792,"1f96c":3748,"1f96d":3728,"1f96e":3805,"1f96f":3764,"1f970":115,"1f971":1102,"1f972":123,"1f973":172,"1f974":167,"1f975":165,"1f976":166,"1f977":1515,"1f978":173,"1f97a":186,"1f97b":61168,"1f97c":61157,"1f97d":61156,"1f97e":61183,"1f97f":61184,"1f980":2670,"1f981":2576,"1f982":2686,"1f983":2627,"1f984":2584,"1f985":2636,"1f986":2637,"1f987":2616,"1f988":2665,"1f989":2639,"1f98a":2571,"1f98b":2676,"1f98c":2586,"1f98d":2563,"1f98e":2652,"1f98f":2605,"1f990":2672,"1f991":2673,"1f992":2602,"1f993":2585,"1f994":2615,"1f995":2656,"1f996":2657,"1f997":2682,"1f998":2624,"1f999":2601,"1f99a":2643,"1f99b":2606,"1f99c":2644,"1f99d":2572,"1f99e":2671,"1f99f":2687,"1f9a0":2690,"1f9a1":2625,"1f9a2":2638,"1f9a3":2604,"1f9a4":2640,"1f9a5":2621,"1f9a6":2622,"1f9a7":2564,"1f9a8":2623,"1f9a9":2642,"1f9aa":2674,"1f9ab":2614,"1f9ac":2587,"1f9ad":2661,"1f9ae":2567,"1f9af":61361,"1f9b4":1394,"1f9b5":1385,"1f9b6":1386,"1f9b7":1393,"1f9b8-200d-2640":1546,"1f9b8-200d-2642":1545,"1f9b8":1544,"1f9b9-200d-2640":1549,"1f9b9-200d-2642":1548,"1f9b9":1547,"1f9ba":61158,"1f9bb":1388,"1f9bc":4950,"1f9bd":4949,"1f9be":1383,"1f9bf":1384,"1f9c0":3767,"1f9c1":3817,"1f9c2":3791,"1f9c3":3841,"1f9c4":3750,"1f9c5":3751,"1f9c6":3781,"1f9c7":3766,"1f9c8":3790,"1f9c9":3842,"1f9ca":3843,"1f9cb":3840,"1f9cd-200d-2640":1586,"1f9cd-200d-2642":1585,"1f9cd":1584,"1f9ce-200d-2640":1589,"1f9ce-200d-2642":1588,"1f9ce":1587,"1f9cf-200d-2640":1448,"1f9cf-200d-2642":1447,"1f9cf":1446,"1f9d0":176,"1f9d1-200d-1f33e":1470,"1f9d1-200d-1f373":1473,"1f9d1-200d-1f37c":1539,"1f9d1-200d-1f384":1543,"1f9d1-200d-1f393":1461,"1f9d1-200d-1f3a4":1491,"1f9d1-200d-1f3a8":1494,"1f9d1-200d-1f3eb":1464,"1f9d1-200d-1f3ed":1479,"1f9d1-200d-1f4bb":1488,"1f9d1-200d-1f4bc":1482,"1f9d1-200d-1f527":1476,"1f9d1-200d-1f52c":1485,"1f9d1-200d-1f680":1500,"1f9d1-200d-1f692":1503,"1f9d1-200d-1f91d-200d-1f9d1":1677,"1f9d1-200d-1f9af":1593,"1f9d1-200d-1f9b0":1416,"1f9d1-200d-1f9b1":1418,"1f9d1-200d-1f9b2":1422,"1f9d1-200d-1f9b3":1420,"1f9d1-200d-1f9bc":1599,"1f9d1-200d-1f9bd":1605,"1f9d1-200d-2695":1458,"1f9d1-200d-2696":1467,"1f9d1-200d-2708":1497,"1f9d1":1404,"1f9d2":1401,"1f9d3":1425,"1f9d4-200d-2640":1409,"1f9d4-200d-2642":1408,"1f9d4":1407,"1f9d5":1526,"1f9d6-200d-2640":1625,"1f9d6-200d-2642":1624,"1f9d6":1623,"1f9d7-200d-2640":1628,"1f9d7-200d-2642":1627,"1f9d7":1626,"1f9d8-200d-2640":1674,"1f9d8-200d-2642":1673,"1f9d8":1672,"1f9d9-200d-2640":1552,"1f9d9-200d-2642":1551,"1f9d9":1550,"1f9da-200d-2640":1555,"1f9da-200d-2642":1554,"1f9da":1553,"1f9db-200d-2640":1558,"1f9db-200d-2642":1557,"1f9db":1556,"1f9dc-200d-2640":1561,"1f9dc-200d-2642":1560,"1f9dc":1559,"1f9dd-200d-2640":1564,"1f9dd-200d-2642":1563,"1f9dd":1562,"1f9de-200d-2640":1567,"1f9de-200d-2642":1566,"1f9de":1565,"1f9df-200d-2640":1570,"1f9df-200d-2642":1569,"1f9df":1568,"1f9e0":1390,"1f9e1":1146,"1f9e2":61194,"1f9e3":61162,"1f9e4":61163,"1f9e5":61164,"1f9e6":61165,"1f9e7":51084,"1f9e8":51073,"1f9e9":51134,"1f9ea":61371,"1f9eb":61372,"1f9ec":61373,"1f9ed":4857,"1f9ee":61250,"1f9ef":61407,"1f9f0":61366,"1f9f1":4870,"1f9f2":61367,"1f9f3":4990,"1f9f4":61397,"1f9f5":51150,"1f9f6":51152,"1f9f7":61398,"1f9f8":51135,"1f9f9":61399,"1f9fa":61400,"1f9fb":61401,"1f9fc":61403,"1f9fd":61406,"1f9fe":61292,"1f9ff":61413,"1fa70":61187,"1fa71":61169,"1fa72":61170,"1fa73":61171,"1fa74":61180,"1fa78":61378,"1fa79":61380,"1fa7a":61382,"1fa80":51124,"1fa81":51125,"1fa82":4980,"1fa83":61351,"1fa84":51129,"1fa85":51136,"1fa86":51138,"1fa90":41038,"1fa91":61390,"1fa92":61396,"1fa93":61344,"1fa94":61266,"1fa95":61225,"1fa96":61195,"1fa97":61220,"1fa98":61227,"1fa99":61285,"1fa9a":61354,"1fa9b":61356,"1fa9c":61368,"1fa9d":61365,"1fa9e":61386,"1fa9f":61387,"1faa0":61392,"1faa1":51151,"1faa2":51153,"1faa3":61402,"1faa4":61395,"1faa5":61405,"1faa6":61411,"1faa7":61416,"1faa8":4871,"1fab0":2688,"1fab1":2689,"1fab2":2680,"1fab3":2683,"1fab4":2704,"1fab5":4872,"1fab6":2641,"1fac0":1391,"1fac1":1392,"1fac2":1717,"1fad0":3735,"1fad1":3746,"1fad2":3738,"1fad3":3762,"1fad4":3779,"1fad5":3786,"1fad6":3827,"203c":62942,"21a9":62871,"21aa":62872,"231a":4993,"231b":4991,"23cf":62925,"23e9":62912,"23ea":62916,"23eb":62919,"23ec":62921,"23ed":62913,"23ee":62917,"23ef":62914,"23f0":4994,"23f1":4995,"23f2":4996,"23f3":4992,"23f8":62922,"23f9":62923,"23fa":62924,"24c2":62999,"25aa":63047,"25ab":63048,"25b6":62911,"25c0":62915,"25fb":63044,"25fc":63043,"25fd":63046,"25fe":63045,"260e":61233,"261d":1364,"262a":62890,"262e":62891,"262f":62887,"263a":120,"264a":62897,"264b":62898,"264c":62899,"264d":62900,"264e":62901,"264f":62902,"265f":51143,"267b":62952,"267e":62941,"267f":62838,"269b":62883,"269c":62953,"26a0":62848,"26a1":41061,"26a7":62935,"26aa":63033,"26ab":63032,"26b0":61410,"26b1":61412,"26bd":51096,"26be":51097,"26c4":41064,"26c5":41044,"26c8":41045,"26ce":62907,"26cf":61345,"26d1":61196,"26d3":61364,"26d4":62850,"26e9":4898,"26ea":4894,"26f0":4859,"26f1":41060,"26f2":4900,"26f3":51115,"26f4":4973,"26f5":4969,"26f7":1631,"26f8":51116,"26f9-200d-2640":1647,"26f9-200d-2642":1646,"26f9":1645,"26fa":4901,"26fd":4960,"270a":1368,"270b":1342,"270c":1353,"270d":1379,"270f":61307,"271d":62888,"274c":62961,"274e":62962,"2764-200d-1f525":1142,"2764-200d-1fa79":1143,"27a1":62863,"27b0":62963,"27bf":62964,"2b05":62867,"2b06":62861,"2b07":62865,"2b1b":63041,"2b1c":63042,"2b50":41039,"2b55":62957,"303d":62965,"1f385-1f3fb":0,"1f385-1f3fc":0,"1f385-1f3fd":0,"1f385-1f3fe":0,"1f385-1f3ff":0,"1f3c2-1f3fb":0,"1f3c2-1f3fc":0,"1f3c2-1f3fd":0,"1f3c2-1f3fe":0,"1f3c2-1f3ff":0,"1f3c3-1f3fb-200d-2640":0,"1f3c3-1f3fc-200d-2640":0,"1f3c3-1f3fd-200d-2640":0,"1f3c3-1f3fe-200d-2640":0,"1f3c3-1f3ff-200d-2640":0,"1f3c3-1f3fb-200d-2642":0,"1f3c3-1f3fc-200d-2642":0,"1f3c3-1f3fd-200d-2642":0,"1f3c3-1f3fe-200d-2642":0,"1f3c3-1f3ff-200d-2642":0,"1f3c3-1f3fb":0,"1f3c3-1f3fc":0,"1f3c3-1f3fd":0,"1f3c3-1f3fe":0,"1f3c3-1f3ff":0,"1f3c4-1f3fb-200d-2640":0,"1f3c4-1f3fc-200d-2640":0,"1f3c4-1f3fd-200d-2640":0,"1f3c4-1f3fe-200d-2640":0,"1f3c4-1f3ff-200d-2640":0,"1f3c4-1f3fb-200d-2642":0,"1f3c4-1f3fc-200d-2642":0,"1f3c4-1f3fd-200d-2642":0,"1f3c4-1f3fe-200d-2642":0,"1f3c4-1f3ff-200d-2642":0,"1f3c4-1f3fb":0,"1f3c4-1f3fc":0,"1f3c4-1f3fd":0,"1f3c4-1f3fe":0,"1f3c4-1f3ff":0,"1f3c7-1f3fb":0,"1f3c7-1f3fc":0,"1f3c7-1f3fd":0,"1f3c7-1f3fe":0,"1f3c7-1f3ff":0,"1f3ca-1f3fb-200d-2640":0,"1f3ca-1f3fc-200d-2640":0,"1f3ca-1f3fd-200d-2640":0,"1f3ca-1f3fe-200d-2640":0,"1f3ca-1f3ff-200d-2640":0,"1f3ca-1f3fb-200d-2642":0,"1f3ca-1f3fc-200d-2642":0,"1f3ca-1f3fd-200d-2642":0,"1f3ca-1f3fe-200d-2642":0,"1f3ca-1f3ff-200d-2642":0,"1f3ca-1f3fb":0,"1f3ca-1f3fc":0,"1f3ca-1f3fd":0,"1f3ca-1f3fe":0,"1f3ca-1f3ff":0,"1f3cb-1f3fb-200d-2640":0,"1f3cb-1f3fc-200d-2640":0,"1f3cb-1f3fd-200d-2640":0,"1f3cb-1f3fe-200d-2640":0,"1f3cb-1f3ff-200d-2640":0,"1f3cb-1f3fb-200d-2642":0,"1f3cb-1f3fc-200d-2642":0,"1f3cb-1f3fd-200d-2642":0,"1f3cb-1f3fe-200d-2642":0,"1f3cb-1f3ff-200d-2642":0,"1f3cb-1f3fb":0,"1f3cb-1f3fc":0,"1f3cb-1f3fd":0,"1f3cb-1f3fe":0,"1f3cb-1f3ff":0,"1f3cc-1f3fb-200d-2640":0,"1f3cc-1f3fc-200d-2640":0,"1f3cc-1f3fd-200d-2640":0,"1f3cc-1f3fe-200d-2640":0,"1f3cc-1f3ff-200d-2640":0,"1f3cc-1f3fb-200d-2642":0,"1f3cc-1f3fc-200d-2642":0,"1f3cc-1f3fd-200d-2642":0,"1f3cc-1f3fe-200d-2642":0,"1f3cc-1f3ff-200d-2642":0,"1f3cc-1f3fb":0,"1f3cc-1f3fc":0,"1f3cc-1f3fd":0,"1f3cc-1f3fe":0,"1f3cc-1f3ff":0,"1f442-1f3fb":0,"1f442-1f3fc":0,"1f442-1f3fd":0,"1f442-1f3fe":0,"1f442-1f3ff":0,"1f443-1f3fb":0,"1f443-1f3fc":0,"1f443-1f3fd":0,"1f443-1f3fe":0,"1f443-1f3ff":0,"1f446-1f3fb":0,"1f446-1f3fc":0,"1f446-1f3fd":0,"1f446-1f3fe":0,"1f446-1f3ff":0,"1f447-1f3fb":0,"1f447-1f3fc":0,"1f447-1f3fd":0,"1f447-1f3fe":0,"1f447-1f3ff":0,"1f448-1f3fb":0,"1f448-1f3fc":0,"1f448-1f3fd":0,"1f448-1f3fe":0,"1f448-1f3ff":0,"1f449-1f3fb":0,"1f449-1f3fc":0,"1f449-1f3fd":0,"1f449-1f3fe":0,"1f449-1f3ff":0,"1f44a-1f3fb":0,"1f44a-1f3fc":0,"1f44a-1f3fd":0,"1f44a-1f3fe":0,"1f44a-1f3ff":0,"1f44b-1f3fb":0,"1f44b-1f3fc":0,"1f44b-1f3fd":0,"1f44b-1f3fe":0,"1f44b-1f3ff":0,"1f44c-1f3fb":0,"1f44c-1f3fc":0,"1f44c-1f3fd":0,"1f44c-1f3fe":0,"1f44c-1f3ff":0,"1f44d-1f3fb":0,"1f44d-1f3fc":0,"1f44d-1f3fd":0,"1f44d-1f3fe":0,"1f44d-1f3ff":0,"1f44e-1f3fb":0,"1f44e-1f3fc":0,"1f44e-1f3fd":0,"1f44e-1f3fe":0,"1f44e-1f3ff":0,"1f44f-1f3fb":0,"1f44f-1f3fc":0,"1f44f-1f3fd":0,"1f44f-1f3fe":0,"1f44f-1f3ff":0,"1f450-1f3fb":0,"1f450-1f3fc":0,"1f450-1f3fd":0,"1f450-1f3fe":0,"1f450-1f3ff":0,"1f466-1f3fb":0,"1f466-1f3fc":0,"1f466-1f3fd":0,"1f466-1f3fe":0,"1f466-1f3ff":0,"1f467-1f3fb":0,"1f467-1f3fc":0,"1f467-1f3fd":0,"1f467-1f3fe":0,"1f467-1f3ff":0,"1f468-1f3fb-200d-1f33e":0,"1f468-1f3fc-200d-1f33e":0,"1f468-1f3fd-200d-1f33e":0,"1f468-1f3fe-200d-1f33e":0,"1f468-1f3ff-200d-1f33e":0,"1f468-1f3fb-200d-1f373":0,"1f468-1f3fc-200d-1f373":0,"1f468-1f3fd-200d-1f373":0,"1f468-1f3fe-200d-1f373":0,"1f468-1f3ff-200d-1f373":0,"1f468-1f3fb-200d-1f37c":0,"1f468-1f3fc-200d-1f37c":0,"1f468-1f3fd-200d-1f37c":0,"1f468-1f3fe-200d-1f37c":0,"1f468-1f3ff-200d-1f37c":0,"1f468-1f3fb-200d-1f393":0,"1f468-1f3fc-200d-1f393":0,"1f468-1f3fd-200d-1f393":0,"1f468-1f3fe-200d-1f393":0,"1f468-1f3ff-200d-1f393":0,"1f468-1f3fb-200d-1f3a4":0,"1f468-1f3fc-200d-1f3a4":0,"1f468-1f3fd-200d-1f3a4":0,"1f468-1f3fe-200d-1f3a4":0,"1f468-1f3ff-200d-1f3a4":0,"1f468-1f3fb-200d-1f3a8":0,"1f468-1f3fc-200d-1f3a8":0,"1f468-1f3fd-200d-1f3a8":0,"1f468-1f3fe-200d-1f3a8":0,"1f468-1f3ff-200d-1f3a8":0,"1f468-1f3fb-200d-1f3eb":0,"1f468-1f3fc-200d-1f3eb":0,"1f468-1f3fd-200d-1f3eb":0,"1f468-1f3fe-200d-1f3eb":0,"1f468-1f3ff-200d-1f3eb":0,"1f468-1f3fb-200d-1f3ed":0,"1f468-1f3fc-200d-1f3ed":0,"1f468-1f3fd-200d-1f3ed":0,"1f468-1f3fe-200d-1f3ed":0,"1f468-1f3ff-200d-1f3ed":0,"1f468-1f3fb-200d-1f4bb":0,"1f468-1f3fc-200d-1f4bb":0,"1f468-1f3fd-200d-1f4bb":0,"1f468-1f3fe-200d-1f4bb":0,"1f468-1f3ff-200d-1f4bb":0,"1f468-1f3fb-200d-1f4bc":0,"1f468-1f3fc-200d-1f4bc":0,"1f468-1f3fd-200d-1f4bc":0,"1f468-1f3fe-200d-1f4bc":0,"1f468-1f3ff-200d-1f4bc":0,"1f468-1f3fb-200d-1f527":0,"1f468-1f3fc-200d-1f527":0,"1f468-1f3fd-200d-1f527":0,"1f468-1f3fe-200d-1f527":0,"1f468-1f3ff-200d-1f527":0,"1f468-1f3fb-200d-1f52c":0,"1f468-1f3fc-200d-1f52c":0,"1f468-1f3fd-200d-1f52c":0,"1f468-1f3fe-200d-1f52c":0,"1f468-1f3ff-200d-1f52c":0,"1f468-1f3fb-200d-1f680":0,"1f468-1f3fc-200d-1f680":0,"1f468-1f3fd-200d-1f680":0,"1f468-1f3fe-200d-1f680":0,"1f468-1f3ff-200d-1f680":0,"1f468-1f3fb-200d-1f692":0,"1f468-1f3fc-200d-1f692":0,"1f468-1f3fd-200d-1f692":0,"1f468-1f3fe-200d-1f692":0,"1f468-1f3ff-200d-1f692":0,"1f468-1f3fb-200d-1f9af":0,"1f468-1f3fc-200d-1f9af":0,"1f468-1f3fd-200d-1f9af":0,"1f468-1f3fe-200d-1f9af":0,"1f468-1f3ff-200d-1f9af":0,"1f468-1f3fb-200d-1f9b0":0,"1f468-1f3fc-200d-1f9b0":0,"1f468-1f3fd-200d-1f9b0":0,"1f468-1f3fe-200d-1f9b0":0,"1f468-1f3ff-200d-1f9b0":0,"1f468-1f3fb-200d-1f9b1":0,"1f468-1f3fc-200d-1f9b1":0,"1f468-1f3fd-200d-1f9b1":0,"1f468-1f3fe-200d-1f9b1":0,"1f468-1f3ff-200d-1f9b1":0,"1f468-1f3fb-200d-1f9b2":0,"1f468-1f3fc-200d-1f9b2":0,"1f468-1f3fd-200d-1f9b2":0,"1f468-1f3fe-200d-1f9b2":0,"1f468-1f3ff-200d-1f9b2":0,"1f468-1f3fb-200d-1f9b3":0,"1f468-1f3fc-200d-1f9b3":0,"1f468-1f3fd-200d-1f9b3":0,"1f468-1f3fe-200d-1f9b3":0,"1f468-1f3ff-200d-1f9b3":0,"1f468-1f3fb-200d-1f9bc":0,"1f468-1f3fc-200d-1f9bc":0,"1f468-1f3fd-200d-1f9bc":0,"1f468-1f3fe-200d-1f9bc":0,"1f468-1f3ff-200d-1f9bc":0,"1f468-1f3fb-200d-1f9bd":0,"1f468-1f3fc-200d-1f9bd":0,"1f468-1f3fd-200d-1f9bd":0,"1f468-1f3fe-200d-1f9bd":0,"1f468-1f3ff-200d-1f9bd":0,"1f468-1f3fb-200d-2695":0,"1f468-1f3fc-200d-2695":0,"1f468-1f3fd-200d-2695":0,"1f468-1f3fe-200d-2695":0,"1f468-1f3ff-200d-2695":0,"1f468-1f3fb-200d-2696":0,"1f468-1f3fc-200d-2696":0,"1f468-1f3fd-200d-2696":0,"1f468-1f3fe-200d-2696":0,"1f468-1f3ff-200d-2696":0,"1f468-1f3fb-200d-2708":0,"1f468-1f3fc-200d-2708":0,"1f468-1f3fd-200d-2708":0,"1f468-1f3fe-200d-2708":0,"1f468-1f3ff-200d-2708":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fb":0,"1f468-1f3fc":0,"1f468-1f3fd":0,"1f468-1f3fe":0,"1f468-1f3ff":0,"1f469-1f3fb-200d-1f33e":0,"1f469-1f3fc-200d-1f33e":0,"1f469-1f3fd-200d-1f33e":0,"1f469-1f3fe-200d-1f33e":0,"1f469-1f3ff-200d-1f33e":0,"1f469-1f3fb-200d-1f373":0,"1f469-1f3fc-200d-1f373":0,"1f469-1f3fd-200d-1f373":0,"1f469-1f3fe-200d-1f373":0,"1f469-1f3ff-200d-1f373":0,"1f469-1f3fb-200d-1f37c":0,"1f469-1f3fc-200d-1f37c":0,"1f469-1f3fd-200d-1f37c":0,"1f469-1f3fe-200d-1f37c":0,"1f469-1f3ff-200d-1f37c":0,"1f469-1f3fb-200d-1f393":0,"1f469-1f3fc-200d-1f393":0,"1f469-1f3fd-200d-1f393":0,"1f469-1f3fe-200d-1f393":0,"1f469-1f3ff-200d-1f393":0,"1f469-1f3fb-200d-1f3a4":0,"1f469-1f3fc-200d-1f3a4":0,"1f469-1f3fd-200d-1f3a4":0,"1f469-1f3fe-200d-1f3a4":0,"1f469-1f3ff-200d-1f3a4":0,"1f469-1f3fb-200d-1f3a8":0,"1f469-1f3fc-200d-1f3a8":0,"1f469-1f3fd-200d-1f3a8":0,"1f469-1f3fe-200d-1f3a8":0,"1f469-1f3ff-200d-1f3a8":0,"1f469-1f3fb-200d-1f3eb":0,"1f469-1f3fc-200d-1f3eb":0,"1f469-1f3fd-200d-1f3eb":0,"1f469-1f3fe-200d-1f3eb":0,"1f469-1f3ff-200d-1f3eb":0,"1f469-1f3fb-200d-1f3ed":0,"1f469-1f3fc-200d-1f3ed":0,"1f469-1f3fd-200d-1f3ed":0,"1f469-1f3fe-200d-1f3ed":0,"1f469-1f3ff-200d-1f3ed":0,"1f469-1f3fb-200d-1f4bb":0,"1f469-1f3fc-200d-1f4bb":0,"1f469-1f3fd-200d-1f4bb":0,"1f469-1f3fe-200d-1f4bb":0,"1f469-1f3ff-200d-1f4bb":0,"1f469-1f3fb-200d-1f4bc":0,"1f469-1f3fc-200d-1f4bc":0,"1f469-1f3fd-200d-1f4bc":0,"1f469-1f3fe-200d-1f4bc":0,"1f469-1f3ff-200d-1f4bc":0,"1f469-1f3fb-200d-1f527":0,"1f469-1f3fc-200d-1f527":0,"1f469-1f3fd-200d-1f527":0,"1f469-1f3fe-200d-1f527":0,"1f469-1f3ff-200d-1f527":0,"1f469-1f3fb-200d-1f52c":0,"1f469-1f3fc-200d-1f52c":0,"1f469-1f3fd-200d-1f52c":0,"1f469-1f3fe-200d-1f52c":0,"1f469-1f3ff-200d-1f52c":0,"1f469-1f3fb-200d-1f680":0,"1f469-1f3fc-200d-1f680":0,"1f469-1f3fd-200d-1f680":0,"1f469-1f3fe-200d-1f680":0,"1f469-1f3ff-200d-1f680":0,"1f469-1f3fb-200d-1f692":0,"1f469-1f3fc-200d-1f692":0,"1f469-1f3fd-200d-1f692":0,"1f469-1f3fe-200d-1f692":0,"1f469-1f3ff-200d-1f692":0,"1f469-1f3fb-200d-1f9af":0,"1f469-1f3fc-200d-1f9af":0,"1f469-1f3fd-200d-1f9af":0,"1f469-1f3fe-200d-1f9af":0,"1f469-1f3ff-200d-1f9af":0,"1f469-1f3fb-200d-1f9b0":0,"1f469-1f3fc-200d-1f9b0":0,"1f469-1f3fd-200d-1f9b0":0,"1f469-1f3fe-200d-1f9b0":0,"1f469-1f3ff-200d-1f9b0":0,"1f469-1f3fb-200d-1f9b1":0,"1f469-1f3fc-200d-1f9b1":0,"1f469-1f3fd-200d-1f9b1":0,"1f469-1f3fe-200d-1f9b1":0,"1f469-1f3ff-200d-1f9b1":0,"1f469-1f3fb-200d-1f9b2":0,"1f469-1f3fc-200d-1f9b2":0,"1f469-1f3fd-200d-1f9b2":0,"1f469-1f3fe-200d-1f9b2":0,"1f469-1f3ff-200d-1f9b2":0,"1f469-1f3fb-200d-1f9b3":0,"1f469-1f3fc-200d-1f9b3":0,"1f469-1f3fd-200d-1f9b3":0,"1f469-1f3fe-200d-1f9b3":0,"1f469-1f3ff-200d-1f9b3":0,"1f469-1f3fb-200d-1f9bc":0,"1f469-1f3fc-200d-1f9bc":0,"1f469-1f3fd-200d-1f9bc":0,"1f469-1f3fe-200d-1f9bc":0,"1f469-1f3ff-200d-1f9bc":0,"1f469-1f3fb-200d-1f9bd":0,"1f469-1f3fc-200d-1f9bd":0,"1f469-1f3fd-200d-1f9bd":0,"1f469-1f3fe-200d-1f9bd":0,"1f469-1f3ff-200d-1f9bd":0,"1f469-1f3fb-200d-2695":0,"1f469-1f3fc-200d-2695":0,"1f469-1f3fd-200d-2695":0,"1f469-1f3fe-200d-2695":0,"1f469-1f3ff-200d-2695":0,"1f469-1f3fb-200d-2696":0,"1f469-1f3fc-200d-2696":0,"1f469-1f3fd-200d-2696":0,"1f469-1f3fe-200d-2696":0,"1f469-1f3ff-200d-2696":0,"1f469-1f3fb-200d-2708":0,"1f469-1f3fc-200d-2708":0,"1f469-1f3fd-200d-2708":0,"1f469-1f3fe-200d-2708":0,"1f469-1f3ff-200d-2708":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fb":0,"1f469-1f3fc":0,"1f469-1f3fd":0,"1f469-1f3fe":0,"1f469-1f3ff":0,"1f46b-1f3fb":0,"1f46b-1f3fc":0,"1f46b-1f3fd":0,"1f46b-1f3fe":0,"1f46b-1f3ff":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe":0,"1f46c-1f3fb":0,"1f46c-1f3fc":0,"1f46c-1f3fd":0,"1f46c-1f3fe":0,"1f46c-1f3ff":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe":0,"1f46d-1f3fb":0,"1f46d-1f3fc":0,"1f46d-1f3fd":0,"1f46d-1f3fe":0,"1f46d-1f3ff":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe":0,"1f46e-1f3fb-200d-2640":0,"1f46e-1f3fc-200d-2640":0,"1f46e-1f3fd-200d-2640":0,"1f46e-1f3fe-200d-2640":0,"1f46e-1f3ff-200d-2640":0,"1f46e-1f3fb-200d-2642":0,"1f46e-1f3fc-200d-2642":0,"1f46e-1f3fd-200d-2642":0,"1f46e-1f3fe-200d-2642":0,"1f46e-1f3ff-200d-2642":0,"1f46e-1f3fb":0,"1f46e-1f3fc":0,"1f46e-1f3fd":0,"1f46e-1f3fe":0,"1f46e-1f3ff":0,"1f470-1f3fb-200d-2640":0,"1f470-1f3fc-200d-2640":0,"1f470-1f3fd-200d-2640":0,"1f470-1f3fe-200d-2640":0,"1f470-1f3ff-200d-2640":0,"1f470-1f3fb-200d-2642":0,"1f470-1f3fc-200d-2642":0,"1f470-1f3fd-200d-2642":0,"1f470-1f3fe-200d-2642":0,"1f470-1f3ff-200d-2642":0,"1f470-1f3fb":0,"1f470-1f3fc":0,"1f470-1f3fd":0,"1f470-1f3fe":0,"1f470-1f3ff":0,"1f471-1f3fb-200d-2640":0,"1f471-1f3fc-200d-2640":0,"1f471-1f3fd-200d-2640":0,"1f471-1f3fe-200d-2640":0,"1f471-1f3ff-200d-2640":0,"1f471-1f3fb-200d-2642":0,"1f471-1f3fc-200d-2642":0,"1f471-1f3fd-200d-2642":0,"1f471-1f3fe-200d-2642":0,"1f471-1f3ff-200d-2642":0,"1f471-1f3fb":0,"1f471-1f3fc":0,"1f471-1f3fd":0,"1f471-1f3fe":0,"1f471-1f3ff":0,"1f472-1f3fb":0,"1f472-1f3fc":0,"1f472-1f3fd":0,"1f472-1f3fe":0,"1f472-1f3ff":0,"1f473-1f3fb-200d-2640":0,"1f473-1f3fc-200d-2640":0,"1f473-1f3fd-200d-2640":0,"1f473-1f3fe-200d-2640":0,"1f473-1f3ff-200d-2640":0,"1f473-1f3fb-200d-2642":0,"1f473-1f3fc-200d-2642":0,"1f473-1f3fd-200d-2642":0,"1f473-1f3fe-200d-2642":0,"1f473-1f3ff-200d-2642":0,"1f473-1f3fb":0,"1f473-1f3fc":0,"1f473-1f3fd":0,"1f473-1f3fe":0,"1f473-1f3ff":0,"1f474-1f3fb":0,"1f474-1f3fc":0,"1f474-1f3fd":0,"1f474-1f3fe":0,"1f474-1f3ff":0,"1f475-1f3fb":0,"1f475-1f3fc":0,"1f475-1f3fd":0,"1f475-1f3fe":0,"1f475-1f3ff":0,"1f476-1f3fb":0,"1f476-1f3fc":0,"1f476-1f3fd":0,"1f476-1f3fe":0,"1f476-1f3ff":0,"1f477-1f3fb-200d-2640":0,"1f477-1f3fc-200d-2640":0,"1f477-1f3fd-200d-2640":0,"1f477-1f3fe-200d-2640":0,"1f477-1f3ff-200d-2640":0,"1f477-1f3fb-200d-2642":0,"1f477-1f3fc-200d-2642":0,"1f477-1f3fd-200d-2642":0,"1f477-1f3fe-200d-2642":0,"1f477-1f3ff-200d-2642":0,"1f477-1f3fb":0,"1f477-1f3fc":0,"1f477-1f3fd":0,"1f477-1f3fe":0,"1f477-1f3ff":0,"1f478-1f3fb":0,"1f478-1f3fc":0,"1f478-1f3fd":0,"1f478-1f3fe":0,"1f478-1f3ff":0,"1f47c-1f3fb":0,"1f47c-1f3fc":0,"1f47c-1f3fd":0,"1f47c-1f3fe":0,"1f47c-1f3ff":0,"1f481-1f3fb-200d-2640":0,"1f481-1f3fc-200d-2640":0,"1f481-1f3fd-200d-2640":0,"1f481-1f3fe-200d-2640":0,"1f481-1f3ff-200d-2640":0,"1f481-1f3fb-200d-2642":0,"1f481-1f3fc-200d-2642":0,"1f481-1f3fd-200d-2642":0,"1f481-1f3fe-200d-2642":0,"1f481-1f3ff-200d-2642":0,"1f481-1f3fb":0,"1f481-1f3fc":0,"1f481-1f3fd":0,"1f481-1f3fe":0,"1f481-1f3ff":0,"1f482-1f3fb-200d-2640":0,"1f482-1f3fc-200d-2640":0,"1f482-1f3fd-200d-2640":0,"1f482-1f3fe-200d-2640":0,"1f482-1f3ff-200d-2640":0,"1f482-1f3fb-200d-2642":0,"1f482-1f3fc-200d-2642":0,"1f482-1f3fd-200d-2642":0,"1f482-1f3fe-200d-2642":0,"1f482-1f3ff-200d-2642":0,"1f482-1f3fb":0,"1f482-1f3fc":0,"1f482-1f3fd":0,"1f482-1f3fe":0,"1f482-1f3ff":0,"1f483-1f3fb":0,"1f483-1f3fc":0,"1f483-1f3fd":0,"1f483-1f3fe":0,"1f483-1f3ff":0,"1f485-1f3fb":0,"1f485-1f3fc":0,"1f485-1f3fd":0,"1f485-1f3fe":0,"1f485-1f3ff":0,"1f486-1f3fb-200d-2640":0,"1f486-1f3fc-200d-2640":0,"1f486-1f3fd-200d-2640":0,"1f486-1f3fe-200d-2640":0,"1f486-1f3ff-200d-2640":0,"1f486-1f3fb-200d-2642":0,"1f486-1f3fc-200d-2642":0,"1f486-1f3fd-200d-2642":0,"1f486-1f3fe-200d-2642":0,"1f486-1f3ff-200d-2642":0,"1f486-1f3fb":0,"1f486-1f3fc":0,"1f486-1f3fd":0,"1f486-1f3fe":0,"1f486-1f3ff":0,"1f487-1f3fb-200d-2640":0,"1f487-1f3fc-200d-2640":0,"1f487-1f3fd-200d-2640":0,"1f487-1f3fe-200d-2640":0,"1f487-1f3ff-200d-2640":0,"1f487-1f3fb-200d-2642":0,"1f487-1f3fc-200d-2642":0,"1f487-1f3fd-200d-2642":0,"1f487-1f3fe-200d-2642":0,"1f487-1f3ff-200d-2642":0,"1f487-1f3fb":0,"1f487-1f3fc":0,"1f487-1f3fd":0,"1f487-1f3fe":0,"1f487-1f3ff":0,"1f48f-1f3fb":0,"1f48f-1f3fc":0,"1f48f-1f3fd":0,"1f48f-1f3fe":0,"1f48f-1f3ff":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f491-1f3fb":0,"1f491-1f3fc":0,"1f491-1f3fd":0,"1f491-1f3fe":0,"1f491-1f3ff":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fe":0,"1f4aa-1f3fb":0,"1f4aa-1f3fc":0,"1f4aa-1f3fd":0,"1f4aa-1f3fe":0,"1f4aa-1f3ff":0,"1f574-1f3fb":0,"1f574-1f3fc":0,"1f574-1f3fd":0,"1f574-1f3fe":0,"1f574-1f3ff":0,"1f575-1f3fb-200d-2640":0,"1f575-1f3fc-200d-2640":0,"1f575-1f3fd-200d-2640":0,"1f575-1f3fe-200d-2640":0,"1f575-1f3ff-200d-2640":0,"1f575-1f3fb-200d-2642":0,"1f575-1f3fc-200d-2642":0,"1f575-1f3fd-200d-2642":0,"1f575-1f3fe-200d-2642":0,"1f575-1f3ff-200d-2642":0,"1f575-1f3fb":0,"1f575-1f3fc":0,"1f575-1f3fd":0,"1f575-1f3fe":0,"1f575-1f3ff":0,"1f57a-1f3fb":0,"1f57a-1f3fc":0,"1f57a-1f3fd":0,"1f57a-1f3fe":0,"1f57a-1f3ff":0,"1f590-1f3fb":0,"1f590-1f3fc":0,"1f590-1f3fd":0,"1f590-1f3fe":0,"1f590-1f3ff":0,"1f595-1f3fb":0,"1f595-1f3fc":0,"1f595-1f3fd":0,"1f595-1f3fe":0,"1f595-1f3ff":0,"1f596-1f3fb":0,"1f596-1f3fc":0,"1f596-1f3fd":0,"1f596-1f3fe":0,"1f596-1f3ff":0,"1f645-1f3fb-200d-2640":0,"1f645-1f3fc-200d-2640":0,"1f645-1f3fd-200d-2640":0,"1f645-1f3fe-200d-2640":0,"1f645-1f3ff-200d-2640":0,"1f645-1f3fb-200d-2642":0,"1f645-1f3fc-200d-2642":0,"1f645-1f3fd-200d-2642":0,"1f645-1f3fe-200d-2642":0,"1f645-1f3ff-200d-2642":0,"1f645-1f3fb":0,"1f645-1f3fc":0,"1f645-1f3fd":0,"1f645-1f3fe":0,"1f645-1f3ff":0,"1f646-1f3fb-200d-2640":0,"1f646-1f3fc-200d-2640":0,"1f646-1f3fd-200d-2640":0,"1f646-1f3fe-200d-2640":0,"1f646-1f3ff-200d-2640":0,"1f646-1f3fb-200d-2642":0,"1f646-1f3fc-200d-2642":0,"1f646-1f3fd-200d-2642":0,"1f646-1f3fe-200d-2642":0,"1f646-1f3ff-200d-2642":0,"1f646-1f3fb":0,"1f646-1f3fc":0,"1f646-1f3fd":0,"1f646-1f3fe":0,"1f646-1f3ff":0,"1f647-1f3fb-200d-2640":0,"1f647-1f3fc-200d-2640":0,"1f647-1f3fd-200d-2640":0,"1f647-1f3fe-200d-2640":0,"1f647-1f3ff-200d-2640":0,"1f647-1f3fb-200d-2642":0,"1f647-1f3fc-200d-2642":0,"1f647-1f3fd-200d-2642":0,"1f647-1f3fe-200d-2642":0,"1f647-1f3ff-200d-2642":0,"1f647-1f3fb":0,"1f647-1f3fc":0,"1f647-1f3fd":0,"1f647-1f3fe":0,"1f647-1f3ff":0,"1f64b-1f3fb-200d-2640":0,"1f64b-1f3fc-200d-2640":0,"1f64b-1f3fd-200d-2640":0,"1f64b-1f3fe-200d-2640":0,"1f64b-1f3ff-200d-2640":0,"1f64b-1f3fb-200d-2642":0,"1f64b-1f3fc-200d-2642":0,"1f64b-1f3fd-200d-2642":0,"1f64b-1f3fe-200d-2642":0,"1f64b-1f3ff-200d-2642":0,"1f64b-1f3fb":0,"1f64b-1f3fc":0,"1f64b-1f3fd":0,"1f64b-1f3fe":0,"1f64b-1f3ff":0,"1f64c-1f3fb":0,"1f64c-1f3fc":0,"1f64c-1f3fd":0,"1f64c-1f3fe":0,"1f64c-1f3ff":0,"1f64d-1f3fb-200d-2640":0,"1f64d-1f3fc-200d-2640":0,"1f64d-1f3fd-200d-2640":0,"1f64d-1f3fe-200d-2640":0,"1f64d-1f3ff-200d-2640":0,"1f64d-1f3fb-200d-2642":0,"1f64d-1f3fc-200d-2642":0,"1f64d-1f3fd-200d-2642":0,"1f64d-1f3fe-200d-2642":0,"1f64d-1f3ff-200d-2642":0,"1f64d-1f3fb":0,"1f64d-1f3fc":0,"1f64d-1f3fd":0,"1f64d-1f3fe":0,"1f64d-1f3ff":0,"1f64e-1f3fb-200d-2640":0,"1f64e-1f3fc-200d-2640":0,"1f64e-1f3fd-200d-2640":0,"1f64e-1f3fe-200d-2640":0,"1f64e-1f3ff-200d-2640":0,"1f64e-1f3fb-200d-2642":0,"1f64e-1f3fc-200d-2642":0,"1f64e-1f3fd-200d-2642":0,"1f64e-1f3fe-200d-2642":0,"1f64e-1f3ff-200d-2642":0,"1f64e-1f3fb":0,"1f64e-1f3fc":0,"1f64e-1f3fd":0,"1f64e-1f3fe":0,"1f64e-1f3ff":0,"1f64f-1f3fb":0,"1f64f-1f3fc":0,"1f64f-1f3fd":0,"1f64f-1f3fe":0,"1f64f-1f3ff":0,"1f6a3-1f3fb-200d-2640":0,"1f6a3-1f3fc-200d-2640":0,"1f6a3-1f3fd-200d-2640":0,"1f6a3-1f3fe-200d-2640":0,"1f6a3-1f3ff-200d-2640":0,"1f6a3-1f3fb-200d-2642":0,"1f6a3-1f3fc-200d-2642":0,"1f6a3-1f3fd-200d-2642":0,"1f6a3-1f3fe-200d-2642":0,"1f6a3-1f3ff-200d-2642":0,"1f6a3-1f3fb":0,"1f6a3-1f3fc":0,"1f6a3-1f3fd":0,"1f6a3-1f3fe":0,"1f6a3-1f3ff":0,"1f6b4-1f3fb-200d-2640":0,"1f6b4-1f3fc-200d-2640":0,"1f6b4-1f3fd-200d-2640":0,"1f6b4-1f3fe-200d-2640":0,"1f6b4-1f3ff-200d-2640":0,"1f6b4-1f3fb-200d-2642":0,"1f6b4-1f3fc-200d-2642":0,"1f6b4-1f3fd-200d-2642":0,"1f6b4-1f3fe-200d-2642":0,"1f6b4-1f3ff-200d-2642":0,"1f6b4-1f3fb":0,"1f6b4-1f3fc":0,"1f6b4-1f3fd":0,"1f6b4-1f3fe":0,"1f6b4-1f3ff":0,"1f6b5-1f3fb-200d-2640":0,"1f6b5-1f3fc-200d-2640":0,"1f6b5-1f3fd-200d-2640":0,"1f6b5-1f3fe-200d-2640":0,"1f6b5-1f3ff-200d-2640":0,"1f6b5-1f3fb-200d-2642":0,"1f6b5-1f3fc-200d-2642":0,"1f6b5-1f3fd-200d-2642":0,"1f6b5-1f3fe-200d-2642":0,"1f6b5-1f3ff-200d-2642":0,"1f6b5-1f3fb":0,"1f6b5-1f3fc":0,"1f6b5-1f3fd":0,"1f6b5-1f3fe":0,"1f6b5-1f3ff":0,"1f6b6-1f3fb-200d-2640":0,"1f6b6-1f3fc-200d-2640":0,"1f6b6-1f3fd-200d-2640":0,"1f6b6-1f3fe-200d-2640":0,"1f6b6-1f3ff-200d-2640":0,"1f6b6-1f3fb-200d-2642":0,"1f6b6-1f3fc-200d-2642":0,"1f6b6-1f3fd-200d-2642":0,"1f6b6-1f3fe-200d-2642":0,"1f6b6-1f3ff-200d-2642":0,"1f6b6-1f3fb":0,"1f6b6-1f3fc":0,"1f6b6-1f3fd":0,"1f6b6-1f3fe":0,"1f6b6-1f3ff":0,"1f6c0-1f3fb":0,"1f6c0-1f3fc":0,"1f6c0-1f3fd":0,"1f6c0-1f3fe":0,"1f6c0-1f3ff":0,"1f6cc-1f3fb":0,"1f6cc-1f3fc":0,"1f6cc-1f3fd":0,"1f6cc-1f3fe":0,"1f6cc-1f3ff":0,"1f90c-1f3fb":0,"1f90c-1f3fc":0,"1f90c-1f3fd":0,"1f90c-1f3fe":0,"1f90c-1f3ff":0,"1f90f-1f3fb":0,"1f90f-1f3fc":0,"1f90f-1f3fd":0,"1f90f-1f3fe":0,"1f90f-1f3ff":0,"1f918-1f3fb":0,"1f918-1f3fc":0,"1f918-1f3fd":0,"1f918-1f3fe":0,"1f918-1f3ff":0,"1f919-1f3fb":0,"1f919-1f3fc":0,"1f919-1f3fd":0,"1f919-1f3fe":0,"1f919-1f3ff":0,"1f91a-1f3fb":0,"1f91a-1f3fc":0,"1f91a-1f3fd":0,"1f91a-1f3fe":0,"1f91a-1f3ff":0,"1f91b-1f3fb":0,"1f91b-1f3fc":0,"1f91b-1f3fd":0,"1f91b-1f3fe":0,"1f91b-1f3ff":0,"1f91c-1f3fb":0,"1f91c-1f3fc":0,"1f91c-1f3fd":0,"1f91c-1f3fe":0,"1f91c-1f3ff":0,"1f91e-1f3fb":0,"1f91e-1f3fc":0,"1f91e-1f3fd":0,"1f91e-1f3fe":0,"1f91e-1f3ff":0,"1f91f-1f3fb":0,"1f91f-1f3fc":0,"1f91f-1f3fd":0,"1f91f-1f3fe":0,"1f91f-1f3ff":0,"1f926-1f3fb-200d-2640":0,"1f926-1f3fc-200d-2640":0,"1f926-1f3fd-200d-2640":0,"1f926-1f3fe-200d-2640":0,"1f926-1f3ff-200d-2640":0,"1f926-1f3fb-200d-2642":0,"1f926-1f3fc-200d-2642":0,"1f926-1f3fd-200d-2642":0,"1f926-1f3fe-200d-2642":0,"1f926-1f3ff-200d-2642":0,"1f926-1f3fb":0,"1f926-1f3fc":0,"1f926-1f3fd":0,"1f926-1f3fe":0,"1f926-1f3ff":0,"1f930-1f3fb":0,"1f930-1f3fc":0,"1f930-1f3fd":0,"1f930-1f3fe":0,"1f930-1f3ff":0,"1f931-1f3fb":0,"1f931-1f3fc":0,"1f931-1f3fd":0,"1f931-1f3fe":0,"1f931-1f3ff":0,"1f932-1f3fb":0,"1f932-1f3fc":0,"1f932-1f3fd":0,"1f932-1f3fe":0,"1f932-1f3ff":0,"1f933-1f3fb":0,"1f933-1f3fc":0,"1f933-1f3fd":0,"1f933-1f3fe":0,"1f933-1f3ff":0,"1f934-1f3fb":0,"1f934-1f3fc":0,"1f934-1f3fd":0,"1f934-1f3fe":0,"1f934-1f3ff":0,"1f935-1f3fb-200d-2640":0,"1f935-1f3fc-200d-2640":0,"1f935-1f3fd-200d-2640":0,"1f935-1f3fe-200d-2640":0,"1f935-1f3ff-200d-2640":0,"1f935-1f3fb-200d-2642":0,"1f935-1f3fc-200d-2642":0,"1f935-1f3fd-200d-2642":0,"1f935-1f3fe-200d-2642":0,"1f935-1f3ff-200d-2642":0,"1f935-1f3fb":0,"1f935-1f3fc":0,"1f935-1f3fd":0,"1f935-1f3fe":0,"1f935-1f3ff":0,"1f936-1f3fb":0,"1f936-1f3fc":0,"1f936-1f3fd":0,"1f936-1f3fe":0,"1f936-1f3ff":0,"1f937-1f3fb-200d-2640":0,"1f937-1f3fc-200d-2640":0,"1f937-1f3fd-200d-2640":0,"1f937-1f3fe-200d-2640":0,"1f937-1f3ff-200d-2640":0,"1f937-1f3fb-200d-2642":0,"1f937-1f3fc-200d-2642":0,"1f937-1f3fd-200d-2642":0,"1f937-1f3fe-200d-2642":0,"1f937-1f3ff-200d-2642":0,"1f937-1f3fb":0,"1f937-1f3fc":0,"1f937-1f3fd":0,"1f937-1f3fe":0,"1f937-1f3ff":0,"1f938-1f3fb-200d-2640":0,"1f938-1f3fc-200d-2640":0,"1f938-1f3fd-200d-2640":0,"1f938-1f3fe-200d-2640":0,"1f938-1f3ff-200d-2640":0,"1f938-1f3fb-200d-2642":0,"1f938-1f3fc-200d-2642":0,"1f938-1f3fd-200d-2642":0,"1f938-1f3fe-200d-2642":0,"1f938-1f3ff-200d-2642":0,"1f938-1f3fb":0,"1f938-1f3fc":0,"1f938-1f3fd":0,"1f938-1f3fe":0,"1f938-1f3ff":0,"1f939-1f3fb-200d-2640":0,"1f939-1f3fc-200d-2640":0,"1f939-1f3fd-200d-2640":0,"1f939-1f3fe-200d-2640":0,"1f939-1f3ff-200d-2640":0,"1f939-1f3fb-200d-2642":0,"1f939-1f3fc-200d-2642":0,"1f939-1f3fd-200d-2642":0,"1f939-1f3fe-200d-2642":0,"1f939-1f3ff-200d-2642":0,"1f939-1f3fb":0,"1f939-1f3fc":0,"1f939-1f3fd":0,"1f939-1f3fe":0,"1f939-1f3ff":0,"1f93d-1f3fb-200d-2640":0,"1f93d-1f3fc-200d-2640":0,"1f93d-1f3fd-200d-2640":0,"1f93d-1f3fe-200d-2640":0,"1f93d-1f3ff-200d-2640":0,"1f93d-1f3fb-200d-2642":0,"1f93d-1f3fc-200d-2642":0,"1f93d-1f3fd-200d-2642":0,"1f93d-1f3fe-200d-2642":0,"1f93d-1f3ff-200d-2642":0,"1f93d-1f3fb":0,"1f93d-1f3fc":0,"1f93d-1f3fd":0,"1f93d-1f3fe":0,"1f93d-1f3ff":0,"1f93e-1f3fb-200d-2640":0,"1f93e-1f3fc-200d-2640":0,"1f93e-1f3fd-200d-2640":0,"1f93e-1f3fe-200d-2640":0,"1f93e-1f3ff-200d-2640":0,"1f93e-1f3fb-200d-2642":0,"1f93e-1f3fc-200d-2642":0,"1f93e-1f3fd-200d-2642":0,"1f93e-1f3fe-200d-2642":0,"1f93e-1f3ff-200d-2642":0,"1f93e-1f3fb":0,"1f93e-1f3fc":0,"1f93e-1f3fd":0,"1f93e-1f3fe":0,"1f93e-1f3ff":0,"1f977-1f3fb":0,"1f977-1f3fc":0,"1f977-1f3fd":0,"1f977-1f3fe":0,"1f977-1f3ff":0,"1f9b5-1f3fb":0,"1f9b5-1f3fc":0,"1f9b5-1f3fd":0,"1f9b5-1f3fe":0,"1f9b5-1f3ff":0,"1f9b6-1f3fb":0,"1f9b6-1f3fc":0,"1f9b6-1f3fd":0,"1f9b6-1f3fe":0,"1f9b6-1f3ff":0,"1f9b8-1f3fb-200d-2640":0,"1f9b8-1f3fc-200d-2640":0,"1f9b8-1f3fd-200d-2640":0,"1f9b8-1f3fe-200d-2640":0,"1f9b8-1f3ff-200d-2640":0,"1f9b8-1f3fb-200d-2642":0,"1f9b8-1f3fc-200d-2642":0,"1f9b8-1f3fd-200d-2642":0,"1f9b8-1f3fe-200d-2642":0,"1f9b8-1f3ff-200d-2642":0,"1f9b8-1f3fb":0,"1f9b8-1f3fc":0,"1f9b8-1f3fd":0,"1f9b8-1f3fe":0,"1f9b8-1f3ff":0,"1f9b9-1f3fb-200d-2640":0,"1f9b9-1f3fc-200d-2640":0,"1f9b9-1f3fd-200d-2640":0,"1f9b9-1f3fe-200d-2640":0,"1f9b9-1f3ff-200d-2640":0,"1f9b9-1f3fb-200d-2642":0,"1f9b9-1f3fc-200d-2642":0,"1f9b9-1f3fd-200d-2642":0,"1f9b9-1f3fe-200d-2642":0,"1f9b9-1f3ff-200d-2642":0,"1f9b9-1f3fb":0,"1f9b9-1f3fc":0,"1f9b9-1f3fd":0,"1f9b9-1f3fe":0,"1f9b9-1f3ff":0,"1f9bb-1f3fb":0,"1f9bb-1f3fc":0,"1f9bb-1f3fd":0,"1f9bb-1f3fe":0,"1f9bb-1f3ff":0,"1f9cd-1f3fb-200d-2640":0,"1f9cd-1f3fc-200d-2640":0,"1f9cd-1f3fd-200d-2640":0,"1f9cd-1f3fe-200d-2640":0,"1f9cd-1f3ff-200d-2640":0,"1f9cd-1f3fb-200d-2642":0,"1f9cd-1f3fc-200d-2642":0,"1f9cd-1f3fd-200d-2642":0,"1f9cd-1f3fe-200d-2642":0,"1f9cd-1f3ff-200d-2642":0,"1f9cd-1f3fb":0,"1f9cd-1f3fc":0,"1f9cd-1f3fd":0,"1f9cd-1f3fe":0,"1f9cd-1f3ff":0,"1f9ce-1f3fb-200d-2640":0,"1f9ce-1f3fc-200d-2640":0,"1f9ce-1f3fd-200d-2640":0,"1f9ce-1f3fe-200d-2640":0,"1f9ce-1f3ff-200d-2640":0,"1f9ce-1f3fb-200d-2642":0,"1f9ce-1f3fc-200d-2642":0,"1f9ce-1f3fd-200d-2642":0,"1f9ce-1f3fe-200d-2642":0,"1f9ce-1f3ff-200d-2642":0,"1f9ce-1f3fb":0,"1f9ce-1f3fc":0,"1f9ce-1f3fd":0,"1f9ce-1f3fe":0,"1f9ce-1f3ff":0,"1f9cf-1f3fb-200d-2640":0,"1f9cf-1f3fc-200d-2640":0,"1f9cf-1f3fd-200d-2640":0,"1f9cf-1f3fe-200d-2640":0,"1f9cf-1f3ff-200d-2640":0,"1f9cf-1f3fb-200d-2642":0,"1f9cf-1f3fc-200d-2642":0,"1f9cf-1f3fd-200d-2642":0,"1f9cf-1f3fe-200d-2642":0,"1f9cf-1f3ff-200d-2642":0,"1f9cf-1f3fb":0,"1f9cf-1f3fc":0,"1f9cf-1f3fd":0,"1f9cf-1f3fe":0,"1f9cf-1f3ff":0,"1f9d1-1f3fb-200d-1f33e":0,"1f9d1-1f3fc-200d-1f33e":0,"1f9d1-1f3fd-200d-1f33e":0,"1f9d1-1f3fe-200d-1f33e":0,"1f9d1-1f3ff-200d-1f33e":0,"1f9d1-1f3fb-200d-1f373":0,"1f9d1-1f3fc-200d-1f373":0,"1f9d1-1f3fd-200d-1f373":0,"1f9d1-1f3fe-200d-1f373":0,"1f9d1-1f3ff-200d-1f373":0,"1f9d1-1f3fb-200d-1f37c":0,"1f9d1-1f3fc-200d-1f37c":0,"1f9d1-1f3fd-200d-1f37c":0,"1f9d1-1f3fe-200d-1f37c":0,"1f9d1-1f3ff-200d-1f37c":0,"1f9d1-1f3fb-200d-1f384":0,"1f9d1-1f3fc-200d-1f384":0,"1f9d1-1f3fd-200d-1f384":0,"1f9d1-1f3fe-200d-1f384":0,"1f9d1-1f3ff-200d-1f384":0,"1f9d1-1f3fb-200d-1f393":0,"1f9d1-1f3fc-200d-1f393":0,"1f9d1-1f3fd-200d-1f393":0,"1f9d1-1f3fe-200d-1f393":0,"1f9d1-1f3ff-200d-1f393":0,"1f9d1-1f3fb-200d-1f3a4":0,"1f9d1-1f3fc-200d-1f3a4":0,"1f9d1-1f3fd-200d-1f3a4":0,"1f9d1-1f3fe-200d-1f3a4":0,"1f9d1-1f3ff-200d-1f3a4":0,"1f9d1-1f3fb-200d-1f3a8":0,"1f9d1-1f3fc-200d-1f3a8":0,"1f9d1-1f3fd-200d-1f3a8":0,"1f9d1-1f3fe-200d-1f3a8":0,"1f9d1-1f3ff-200d-1f3a8":0,"1f9d1-1f3fb-200d-1f3eb":0,"1f9d1-1f3fc-200d-1f3eb":0,"1f9d1-1f3fd-200d-1f3eb":0,"1f9d1-1f3fe-200d-1f3eb":0,"1f9d1-1f3ff-200d-1f3eb":0,"1f9d1-1f3fb-200d-1f3ed":0,"1f9d1-1f3fc-200d-1f3ed":0,"1f9d1-1f3fd-200d-1f3ed":0,"1f9d1-1f3fe-200d-1f3ed":0,"1f9d1-1f3ff-200d-1f3ed":0,"1f9d1-1f3fb-200d-1f4bb":0,"1f9d1-1f3fc-200d-1f4bb":0,"1f9d1-1f3fd-200d-1f4bb":0,"1f9d1-1f3fe-200d-1f4bb":0,"1f9d1-1f3ff-200d-1f4bb":0,"1f9d1-1f3fb-200d-1f4bc":0,"1f9d1-1f3fc-200d-1f4bc":0,"1f9d1-1f3fd-200d-1f4bc":0,"1f9d1-1f3fe-200d-1f4bc":0,"1f9d1-1f3ff-200d-1f4bc":0,"1f9d1-1f3fb-200d-1f527":0,"1f9d1-1f3fc-200d-1f527":0,"1f9d1-1f3fd-200d-1f527":0,"1f9d1-1f3fe-200d-1f527":0,"1f9d1-1f3ff-200d-1f527":0,"1f9d1-1f3fb-200d-1f52c":0,"1f9d1-1f3fc-200d-1f52c":0,"1f9d1-1f3fd-200d-1f52c":0,"1f9d1-1f3fe-200d-1f52c":0,"1f9d1-1f3ff-200d-1f52c":0,"1f9d1-1f3fb-200d-1f680":0,"1f9d1-1f3fc-200d-1f680":0,"1f9d1-1f3fd-200d-1f680":0,"1f9d1-1f3fe-200d-1f680":0,"1f9d1-1f3ff-200d-1f680":0,"1f9d1-1f3fb-200d-1f692":0,"1f9d1-1f3fc-200d-1f692":0,"1f9d1-1f3fd-200d-1f692":0,"1f9d1-1f3fe-200d-1f692":0,"1f9d1-1f3ff-200d-1f692":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fb-200d-1f9af":0,"1f9d1-1f3fc-200d-1f9af":0,"1f9d1-1f3fd-200d-1f9af":0,"1f9d1-1f3fe-200d-1f9af":0,"1f9d1-1f3ff-200d-1f9af":0,"1f9d1-1f3fb-200d-1f9b0":0,"1f9d1-1f3fc-200d-1f9b0":0,"1f9d1-1f3fd-200d-1f9b0":0,"1f9d1-1f3fe-200d-1f9b0":0,"1f9d1-1f3ff-200d-1f9b0":0,"1f9d1-1f3fb-200d-1f9b1":0,"1f9d1-1f3fc-200d-1f9b1":0,"1f9d1-1f3fd-200d-1f9b1":0,"1f9d1-1f3fe-200d-1f9b1":0,"1f9d1-1f3ff-200d-1f9b1":0,"1f9d1-1f3fb-200d-1f9b2":0,"1f9d1-1f3fc-200d-1f9b2":0,"1f9d1-1f3fd-200d-1f9b2":0,"1f9d1-1f3fe-200d-1f9b2":0,"1f9d1-1f3ff-200d-1f9b2":0,"1f9d1-1f3fb-200d-1f9b3":0,"1f9d1-1f3fc-200d-1f9b3":0,"1f9d1-1f3fd-200d-1f9b3":0,"1f9d1-1f3fe-200d-1f9b3":0,"1f9d1-1f3ff-200d-1f9b3":0,"1f9d1-1f3fb-200d-1f9bc":0,"1f9d1-1f3fc-200d-1f9bc":0,"1f9d1-1f3fd-200d-1f9bc":0,"1f9d1-1f3fe-200d-1f9bc":0,"1f9d1-1f3ff-200d-1f9bc":0,"1f9d1-1f3fb-200d-1f9bd":0,"1f9d1-1f3fc-200d-1f9bd":0,"1f9d1-1f3fd-200d-1f9bd":0,"1f9d1-1f3fe-200d-1f9bd":0,"1f9d1-1f3ff-200d-1f9bd":0,"1f9d1-1f3fb-200d-2695":0,"1f9d1-1f3fc-200d-2695":0,"1f9d1-1f3fd-200d-2695":0,"1f9d1-1f3fe-200d-2695":0,"1f9d1-1f3ff-200d-2695":0,"1f9d1-1f3fb-200d-2696":0,"1f9d1-1f3fc-200d-2696":0,"1f9d1-1f3fd-200d-2696":0,"1f9d1-1f3fe-200d-2696":0,"1f9d1-1f3ff-200d-2696":0,"1f9d1-1f3fb-200d-2708":0,"1f9d1-1f3fc-200d-2708":0,"1f9d1-1f3fd-200d-2708":0,"1f9d1-1f3fe-200d-2708":0,"1f9d1-1f3ff-200d-2708":0,"1f9d1-1f3fb":0,"1f9d1-1f3fc":0,"1f9d1-1f3fd":0,"1f9d1-1f3fe":0,"1f9d1-1f3ff":0,"1f9d2-1f3fb":0,"1f9d2-1f3fc":0,"1f9d2-1f3fd":0,"1f9d2-1f3fe":0,"1f9d2-1f3ff":0,"1f9d3-1f3fb":0,"1f9d3-1f3fc":0,"1f9d3-1f3fd":0,"1f9d3-1f3fe":0,"1f9d3-1f3ff":0,"1f9d4-1f3fb-200d-2640":0,"1f9d4-1f3fc-200d-2640":0,"1f9d4-1f3fd-200d-2640":0,"1f9d4-1f3fe-200d-2640":0,"1f9d4-1f3ff-200d-2640":0,"1f9d4-1f3fb-200d-2642":0,"1f9d4-1f3fc-200d-2642":0,"1f9d4-1f3fd-200d-2642":0,"1f9d4-1f3fe-200d-2642":0,"1f9d4-1f3ff-200d-2642":0,"1f9d4-1f3fb":0,"1f9d4-1f3fc":0,"1f9d4-1f3fd":0,"1f9d4-1f3fe":0,"1f9d4-1f3ff":0,"1f9d5-1f3fb":0,"1f9d5-1f3fc":0,"1f9d5-1f3fd":0,"1f9d5-1f3fe":0,"1f9d5-1f3ff":0,"1f9d6-1f3fb-200d-2640":0,"1f9d6-1f3fc-200d-2640":0,"1f9d6-1f3fd-200d-2640":0,"1f9d6-1f3fe-200d-2640":0,"1f9d6-1f3ff-200d-2640":0,"1f9d6-1f3fb-200d-2642":0,"1f9d6-1f3fc-200d-2642":0,"1f9d6-1f3fd-200d-2642":0,"1f9d6-1f3fe-200d-2642":0,"1f9d6-1f3ff-200d-2642":0,"1f9d6-1f3fb":0,"1f9d6-1f3fc":0,"1f9d6-1f3fd":0,"1f9d6-1f3fe":0,"1f9d6-1f3ff":0,"1f9d7-1f3fb-200d-2640":0,"1f9d7-1f3fc-200d-2640":0,"1f9d7-1f3fd-200d-2640":0,"1f9d7-1f3fe-200d-2640":0,"1f9d7-1f3ff-200d-2640":0,"1f9d7-1f3fb-200d-2642":0,"1f9d7-1f3fc-200d-2642":0,"1f9d7-1f3fd-200d-2642":0,"1f9d7-1f3fe-200d-2642":0,"1f9d7-1f3ff-200d-2642":0,"1f9d7-1f3fb":0,"1f9d7-1f3fc":0,"1f9d7-1f3fd":0,"1f9d7-1f3fe":0,"1f9d7-1f3ff":0,"1f9d8-1f3fb-200d-2640":0,"1f9d8-1f3fc-200d-2640":0,"1f9d8-1f3fd-200d-2640":0,"1f9d8-1f3fe-200d-2640":0,"1f9d8-1f3ff-200d-2640":0,"1f9d8-1f3fb-200d-2642":0,"1f9d8-1f3fc-200d-2642":0,"1f9d8-1f3fd-200d-2642":0,"1f9d8-1f3fe-200d-2642":0,"1f9d8-1f3ff-200d-2642":0,"1f9d8-1f3fb":0,"1f9d8-1f3fc":0,"1f9d8-1f3fd":0,"1f9d8-1f3fe":0,"1f9d8-1f3ff":0,"1f9d9-1f3fb-200d-2640":0,"1f9d9-1f3fc-200d-2640":0,"1f9d9-1f3fd-200d-2640":0,"1f9d9-1f3fe-200d-2640":0,"1f9d9-1f3ff-200d-2640":0,"1f9d9-1f3fb-200d-2642":0,"1f9d9-1f3fc-200d-2642":0,"1f9d9-1f3fd-200d-2642":0,"1f9d9-1f3fe-200d-2642":0,"1f9d9-1f3ff-200d-2642":0,"1f9d9-1f3fb":0,"1f9d9-1f3fc":0,"1f9d9-1f3fd":0,"1f9d9-1f3fe":0,"1f9d9-1f3ff":0,"1f9da-1f3fb-200d-2640":0,"1f9da-1f3fc-200d-2640":0,"1f9da-1f3fd-200d-2640":0,"1f9da-1f3fe-200d-2640":0,"1f9da-1f3ff-200d-2640":0,"1f9da-1f3fb-200d-2642":0,"1f9da-1f3fc-200d-2642":0,"1f9da-1f3fd-200d-2642":0,"1f9da-1f3fe-200d-2642":0,"1f9da-1f3ff-200d-2642":0,"1f9da-1f3fb":0,"1f9da-1f3fc":0,"1f9da-1f3fd":0,"1f9da-1f3fe":0,"1f9da-1f3ff":0,"1f9db-1f3fb-200d-2640":0,"1f9db-1f3fc-200d-2640":0,"1f9db-1f3fd-200d-2640":0,"1f9db-1f3fe-200d-2640":0,"1f9db-1f3ff-200d-2640":0,"1f9db-1f3fb-200d-2642":0,"1f9db-1f3fc-200d-2642":0,"1f9db-1f3fd-200d-2642":0,"1f9db-1f3fe-200d-2642":0,"1f9db-1f3ff-200d-2642":0,"1f9db-1f3fb":0,"1f9db-1f3fc":0,"1f9db-1f3fd":0,"1f9db-1f3fe":0,"1f9db-1f3ff":0,"1f9dc-1f3fb-200d-2640":0,"1f9dc-1f3fc-200d-2640":0,"1f9dc-1f3fd-200d-2640":0,"1f9dc-1f3fe-200d-2640":0,"1f9dc-1f3ff-200d-2640":0,"1f9dc-1f3fb-200d-2642":0,"1f9dc-1f3fc-200d-2642":0,"1f9dc-1f3fd-200d-2642":0,"1f9dc-1f3fe-200d-2642":0,"1f9dc-1f3ff-200d-2642":0,"1f9dc-1f3fb":0,"1f9dc-1f3fc":0,"1f9dc-1f3fd":0,"1f9dc-1f3fe":0,"1f9dc-1f3ff":0,"1f9dd-1f3fb-200d-2640":0,"1f9dd-1f3fc-200d-2640":0,"1f9dd-1f3fd-200d-2640":0,"1f9dd-1f3fe-200d-2640":0,"1f9dd-1f3ff-200d-2640":0,"1f9dd-1f3fb-200d-2642":0,"1f9dd-1f3fc-200d-2642":0,"1f9dd-1f3fd-200d-2642":0,"1f9dd-1f3fe-200d-2642":0,"1f9dd-1f3ff-200d-2642":0,"1f9dd-1f3fb":0,"1f9dd-1f3fc":0,"1f9dd-1f3fd":0,"1f9dd-1f3fe":0,"1f9dd-1f3ff":0,"261d-1f3fb":0,"261d-1f3fc":0,"261d-1f3fd":0,"261d-1f3fe":0,"261d-1f3ff":0,"26f9-1f3fb-200d-2640":0,"26f9-1f3fc-200d-2640":0,"26f9-1f3fd-200d-2640":0,"26f9-1f3fe-200d-2640":0,"26f9-1f3ff-200d-2640":0,"26f9-1f3fb-200d-2642":0,"26f9-1f3fc-200d-2642":0,"26f9-1f3fd-200d-2642":0,"26f9-1f3fe-200d-2642":0,"26f9-1f3ff-200d-2642":0,"26f9-1f3fb":0,"26f9-1f3fc":0,"26f9-1f3fd":0,"26f9-1f3fe":0,"26f9-1f3ff":0,"270a-1f3fb":0,"270a-1f3fc":0,"270a-1f3fd":0,"270a-1f3fe":0,"270a-1f3ff":0,"270b-1f3fb":0,"270b-1f3fc":0,"270b-1f3fd":0,"270b-1f3fe":0,"270b-1f3ff":0,"270c-1f3fb":0,"270c-1f3fc":0,"270c-1f3fd":0,"270c-1f3fe":0,"270c-1f3ff":0,"270d-1f3fb":0,"270d-1f3fc":0,"270d-1f3fd":0,"270d-1f3fe":0,"270d-1f3ff":0},"15.1":{"1f344-200d-1f7eb":3757,"1f34b-200d-1f7e9":3725,"1f3c3-200d-2640-200d-27a1":1615,"1f3c3-200d-2642-200d-27a1":1616,"1f3c3-200d-27a1":1614,"1f426-200d-1f525":2648,"1f468-200d-1f9af-200d-27a1":1596,"1f468-200d-1f9bc-200d-27a1":1602,"1f468-200d-1f9bd-200d-27a1":1608,"1f469-200d-1f9af-200d-27a1":1598,"1f469-200d-1f9bc-200d-27a1":1604,"1f469-200d-1f9bd-200d-27a1":1610,"1f642-200d-2194":151,"1f642-200d-2195":152,"1f6b6-200d-2640-200d-27a1":1582,"1f6b6-200d-2642-200d-27a1":1583,"1f6b6-200d-27a1":1581,"1f9ce-200d-2640-200d-27a1":1591,"1f9ce-200d-2642-200d-27a1":1592,"1f9ce-200d-27a1":1590,"1f9d1-200d-1f9af-200d-27a1":1594,"1f9d1-200d-1f9bc-200d-27a1":1600,"1f9d1-200d-1f9bd-200d-27a1":1606,"1f9d1-200d-1f9d1-200d-1f9d2":1719,"1f9d1-200d-1f9d1-200d-1f9d2-200d-1f9d2":1720,"1f9d1-200d-1f9d2-200d-1f9d2":1722,"1f9d1-200d-1f9d2":1721,"26d3-200d-1f4a5":61363,"1f3c3-1f3fb-200d-2640-200d-27a1":0,"1f3c3-1f3fc-200d-2640-200d-27a1":0,"1f3c3-1f3fd-200d-2640-200d-27a1":0,"1f3c3-1f3fe-200d-2640-200d-27a1":0,"1f3c3-1f3ff-200d-2640-200d-27a1":0,"1f3c3-1f3fb-200d-2642-200d-27a1":0,"1f3c3-1f3fc-200d-2642-200d-27a1":0,"1f3c3-1f3fd-200d-2642-200d-27a1":0,"1f3c3-1f3fe-200d-2642-200d-27a1":0,"1f3c3-1f3ff-200d-2642-200d-27a1":0,"1f3c3-1f3fb-200d-27a1":0,"1f3c3-1f3fc-200d-27a1":0,"1f3c3-1f3fd-200d-27a1":0,"1f3c3-1f3fe-200d-27a1":0,"1f3c3-1f3ff-200d-27a1":0,"1f468-1f3fb-200d-1f9af-200d-27a1":0,"1f468-1f3fc-200d-1f9af-200d-27a1":0,"1f468-1f3fd-200d-1f9af-200d-27a1":0,"1f468-1f3fe-200d-1f9af-200d-27a1":0,"1f468-1f3ff-200d-1f9af-200d-27a1":0,"1f468-1f3fb-200d-1f9bc-200d-27a1":0,"1f468-1f3fc-200d-1f9bc-200d-27a1":0,"1f468-1f3fd-200d-1f9bc-200d-27a1":0,"1f468-1f3fe-200d-1f9bc-200d-27a1":0,"1f468-1f3ff-200d-1f9bc-200d-27a1":0,"1f468-1f3fb-200d-1f9bd-200d-27a1":0,"1f468-1f3fc-200d-1f9bd-200d-27a1":0,"1f468-1f3fd-200d-1f9bd-200d-27a1":0,"1f468-1f3fe-200d-1f9bd-200d-27a1":0,"1f468-1f3ff-200d-1f9bd-200d-27a1":0,"1f469-1f3fb-200d-1f9af-200d-27a1":0,"1f469-1f3fc-200d-1f9af-200d-27a1":0,"1f469-1f3fd-200d-1f9af-200d-27a1":0,"1f469-1f3fe-200d-1f9af-200d-27a1":0,"1f469-1f3ff-200d-1f9af-200d-27a1":0,"1f469-1f3fb-200d-1f9bc-200d-27a1":0,"1f469-1f3fc-200d-1f9bc-200d-27a1":0,"1f469-1f3fd-200d-1f9bc-200d-27a1":0,"1f469-1f3fe-200d-1f9bc-200d-27a1":0,"1f469-1f3ff-200d-1f9bc-200d-27a1":0,"1f469-1f3fb-200d-1f9bd-200d-27a1":0,"1f469-1f3fc-200d-1f9bd-200d-27a1":0,"1f469-1f3fd-200d-1f9bd-200d-27a1":0,"1f469-1f3fe-200d-1f9bd-200d-27a1":0,"1f469-1f3ff-200d-1f9bd-200d-27a1":0,"1f6b6-1f3fb-200d-2640-200d-27a1":0,"1f6b6-1f3fc-200d-2640-200d-27a1":0,"1f6b6-1f3fd-200d-2640-200d-27a1":0,"1f6b6-1f3fe-200d-2640-200d-27a1":0,"1f6b6-1f3ff-200d-2640-200d-27a1":0,"1f6b6-1f3fb-200d-2642-200d-27a1":0,"1f6b6-1f3fc-200d-2642-200d-27a1":0,"1f6b6-1f3fd-200d-2642-200d-27a1":0,"1f6b6-1f3fe-200d-2642-200d-27a1":0,"1f6b6-1f3ff-200d-2642-200d-27a1":0,"1f6b6-1f3fb-200d-27a1":0,"1f6b6-1f3fc-200d-27a1":0,"1f6b6-1f3fd-200d-27a1":0,"1f6b6-1f3fe-200d-27a1":0,"1f6b6-1f3ff-200d-27a1":0,"1f9ce-1f3fb-200d-2640-200d-27a1":0,"1f9ce-1f3fc-200d-2640-200d-27a1":0,"1f9ce-1f3fd-200d-2640-200d-27a1":0,"1f9ce-1f3fe-200d-2640-200d-27a1":0,"1f9ce-1f3ff-200d-2640-200d-27a1":0,"1f9ce-1f3fb-200d-2642-200d-27a1":0,"1f9ce-1f3fc-200d-2642-200d-27a1":0,"1f9ce-1f3fd-200d-2642-200d-27a1":0,"1f9ce-1f3fe-200d-2642-200d-27a1":0,"1f9ce-1f3ff-200d-2642-200d-27a1":0,"1f9ce-1f3fb-200d-27a1":0,"1f9ce-1f3fc-200d-27a1":0,"1f9ce-1f3fd-200d-27a1":0,"1f9ce-1f3fe-200d-27a1":0,"1f9ce-1f3ff-200d-27a1":0,"1f9d1-1f3fb-200d-1f9af-200d-27a1":0,"1f9d1-1f3fc-200d-1f9af-200d-27a1":0,"1f9d1-1f3fd-200d-1f9af-200d-27a1":0,"1f9d1-1f3fe-200d-1f9af-200d-27a1":0,"1f9d1-1f3ff-200d-1f9af-200d-27a1":0,"1f9d1-1f3fb-200d-1f9bc-200d-27a1":0,"1f9d1-1f3fc-200d-1f9bc-200d-27a1":0,"1f9d1-1f3fd-200d-1f9bc-200d-27a1":0,"1f9d1-1f3fe-200d-1f9bc-200d-27a1":0,"1f9d1-1f3ff-200d-1f9bc-200d-27a1":0,"1f9d1-1f3fb-200d-1f9bd-200d-27a1":0,"1f9d1-1f3fc-200d-1f9bd-200d-27a1":0,"1f9d1-1f3fd-200d-1f9bd-200d-27a1":0,"1f9d1-1f3fe-200d-1f9bd-200d-27a1":0,"1f9d1-1f3ff-200d-1f9bd-200d-27a1":0}},mr=Zs[""];for(const r in Zs)r&&Object.assign(mr,Zs[r]);function Rd(r){return Od(Ld(r)).join("-")}const Bd=/\uFE0F/g,xd="‍",Ld=r=>r.indexOf(xd)<0?r.replace(Bd,""):r;function Od(r){const e=[];let t=0,a=0,s=0;for(;s<r.length;)t=r.charCodeAt(s++),a?(e.push((65536+(a-55296<<10)+(t-56320)).toString(16)),a=0):t>55296&&t<=56319?a=t:e.push(t.toString(16));return e.length&&e[0].length===2&&(e[0]="00"+e[0]),e}function Vd(r){const e=Rd(r).replace(/-?fe0f/g,"");if(mr.hasOwnProperty(e))return e}function _n(r){let e,t=r;const a=[];let s,n=0;for(Vn.lastIndex=0;e=t.match(Vn);){if(s=n+e.index,e[3])a.push({_:"messageEntityMention",offset:s+e[1].length,length:e[2].length+e[3].length});else if(e[4])if(Zo.test(e[4]))a.push({_:"messageEntityEmail",offset:s,length:e[4].length});else{let i,o=e[5];const p=e[6];if(p){if(!o&&(p.substr(0,4)==="xn--"||Td.indexOf(p.toLowerCase())!==-1)&&(o="http://"),o){const d=Ud(e[4]);d.length!==e[4].length&&(e[4]=d),i=(e[5]?"":o)+e[4]}}else i=(e[5]?"":"http://")+e[4];i&&a.push({_:"messageEntityUrl",offset:s,length:e[4].length})}else if(e[7])a.push({_:"messageEntityLinebreak",offset:s,length:1});else if(e[8]){const i=Vd(e[8]);i&&a.push({_:"messageEntityEmoji",offset:s,length:e[8].length,unicode:i})}else if(e[11])a.push({_:"messageEntityHashtag",offset:s+(e[10]?e[10].length:0),length:e[11].length});else if(e[13])a.push({_:"messageEntityBotCommand",offset:s+(e[11]?e[11].length:0)+(e[12]?e[12].length:0),length:1+e[13].length+(e[14]?1+e[14].length:0),unsafe:!0});else if(e[16]){const i=e[16],o=i.split(":"),p=o.length,d=p===3?+o[0]:0,c=+o[p===3?1:0],f=+o[p-1];a.push({_:"messageEntityTimestamp",offset:s+(/\D/.test(e[0][0])?1:0),length:i.length,raw:i,time:d*3600+c*60+f})}t=t.substr(e.index+e[0].length),n+=e.index+e[0].length}return a}function ei(r,e=[]){r=ia(r,e);const t=_n(r),a=Vi(e,t);return{message:r,entities:e,myEntities:t,totalEntities:a}}function ti(r){if(r.inputFilter||r.savedReaction||r.query||r.isPublicHashtag)return r.isCacheableSearch?"cached":r.query||!r.peerId||r.fromPeerId?"uncached":"cached"}function gr(r){const{type:e,peerId:t,threadId:a,monoforumThreadId:s}=r,n=ur(r);return[e,t,n,a,s].filter(Boolean).join("_")}function ur({inputFilter:r,savedReaction:e,query:t,hashtagType:a}){let s;return e&&(s=`tag-${e.map(o=>o.document_id||o.emoticon).join(",")}`,r??(r={_:"inputMessagesFilterEmpty"})),[r?._,a!=="this"&&a,t,s].filter(Boolean).join("_")}function Nd(r){return r&&(r.saved_from_name||r.from_name)}function Rs(r){return r[0]}function Gd(r){const t=r?.reactions?.recent_reactions;if(!t)return;const a=t.filter(s=>s.pFlags.unread);if(a.length)return a}function ca(r){if(!r)return!1;const e=r.media?.document;return!!(r.pFlags.media_unread&&r.pFlags.mentioned&&(!e||!["voice","round"].includes(e.type)))}function qd(r){return!(r?._!=="message"||r.media?.document?.sticker)}class jd extends Ke{constructor(){super(ns(),"session")}}const wt=new jd;wt.get("settings",!1).then(r=>{mt.resolveDeferred(r?.passcode?.enabled||!1)});pe.commonStateStorage=wt;const zd=Oo+2e3;class Hd{constructor(){this.queued=new Map,this.fallbackTimeouts=new Map}add(e,t){const a=this.queued.get(e)||[],s=this.fallbackTimeouts.get(e);self.clearTimeout(s),a.push(t),this.queued.set(e,a),this.fallbackTimeouts.set(e,self.setTimeout(()=>{this.cancelFor(e)},zd))}remove(e){const t=this.fallbackTimeouts.get(e);self.clearTimeout(t),this.queued.delete(e),this.fallbackTimeouts.delete(e)}sendFor(e){(this.queued.get(e)||[]).forEach(a=>{a.send?.()}),this.remove(e)}cancelFor(e){(this.queued.get(e)||[]).forEach(a=>{a.cancel?.()}),this.remove(e)}}const ai="ALLOW_PAYMENT_REQUIRED_";class Na{constructor(e){this.repayRequestsSeed=0,this.repayRequests=new Map,Pa(this,e)}static canHandleError(e){return e.code===403&&e.type?.startsWith(ai)}static attachInvokeArgsToError(e,t){return{...e,invokeApiArgs:t}}tryRegisterRequest({error:e,messageCount:t,repayCallback:a,paidStars:s,wereStarsReserved:n}){if(!Na.canHandleError(e)||!e.invokeApiArgs)return;const i=+e.type.replace(ai,"");if(isNaN(i))return;const o=++this.repayRequestsSeed;return this.repayRequests.set(o,a),this.rootScope.dispatchEvent("insufficent_stars_for_message",{messageCount:t,requestId:o,invokeApiArgs:e.invokeApiArgs,reservedStars:n?s:void 0}),{id:o,messageCount:t}}removeRepayRequest(e){this.repayRequests.delete(e)&&this.rootScope.dispatchEvent("fulfill_repaid_message",{requestId:e})}confirmRepayRequest(e,t){const a=this.repayRequests.get(e);this.removeRepayRequest(e),a?.({confirmedPaymentResult:t})}cancelRepayRequest(e){this.removeRepayRequest(e)}}class Kd{constructor(e){this.actionOnBatch=e,this.map=new Map,this.isProcessing=!1}addToQueue(e,t){const a=this.map.get(e)||[];this.map.has(e)||this.map.set(e,a),a.push(...t),!this.isProcessing&&(this.isProcessing=!0,queueMicrotask(()=>{this.processQueue()}))}async processQueue(){let e;for(;(e=Array.from(this.map.entries())).length;)this.map.clear(),await Promise.all(e.map(([t,a])=>this.actionOnBatch({parentPeerId:t,ids:Qt(a)})));this.isProcessing=!1}}class Wd extends W{constructor(){super(...arguments),this.collectionsByPeerId={},this.fetchByIdBatchQueue=new Kd(e=>this.fetchAndSaveDialogsById(e)),this.queuedDraftDialogs={},this.clear=()=>{this.collectionsByPeerId={}},this.sortDialogsComparator=(e,t)=>this.getDialogIndex(t)-this.getDialogIndex(e)||0,this.sortStableDialogsComparator=(e,t)=>this.getStableDialogIndex(t)-this.getStableDialogIndex(e)||0,this.isResortingQueued=!1,this.onUpdateMonoForumNoPaidException=e=>{const t=e.channel_id.toPeerId(!0),a=oe(e.saved_peer_id),s=this.getDialogByParent(t,a);s&&(s.pFlags||(s.pFlags={}),e.pFlags?.exception?s.pFlags.nopaid_messages_exception=!0:delete s.pFlags.nopaid_messages_exception,this.rootScope.dispatchEvent("monoforum_dialogs_update",{dialogs:[s]}))}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateMonoForumNoPaidException:this.onUpdateMonoForumNoPaidException})}async getDialogs({parentPeerId:e,limit:t,offsetIndex:a}){const s=this.getDialogCollection(e),n=()=>!s.count||s.items.length<s.count;let i=this.getPositionForOffsetIndex(s.items,a),o=-1;for(;i+t>s.stable.length&&n()&&o!==s.stable.length;){o=s.stable.length;const f=xt(s.stable);await this.fetchAndSaveDialogs({parentPeerId:e,limit:t,offsetDialog:f})}let p;p=this.appDraftsManager.addMissedDialogsOrVoid(),p&&await p,p=this.fetchQueuedDraftDialogs(e),p&&await p,i=this.getPositionForOffsetIndex(s.items,a);const d=s.items.slice(i,i+t),c=i+t>=s.items.length&&s.items.length===s.count;return{dialogs:d,count:s.count,isEnd:c}}getDialogByParent(e,t){return this.getDialogCollection(e).map.get(t)}enqueDraftDialog(e,t){var a;((a=this.queuedDraftDialogs)[e]??(a[e]=[])).push(t)}checkPreloadedDraft(e,t){if(t?.reply_to?._!=="inputReplyToMessage"&&t?.reply_to?._!=="inputReplyToMonoForum")return;const a=oe(t.reply_to.monoforum_peer_id);a&&this.enqueDraftDialog(e,a)}fetchQueuedDraftDialogs(e){let t=this.queuedDraftDialogs[e];if(delete this.queuedDraftDialogs[e],!t?.length)return;const a=this.getDialogCollection(e);if(t=t.filter(s=>!a.map.has(s)),!!t.length)return this.fetchAndSaveDialogsById({parentPeerId:e,ids:Qt(t)})}async fetchAndSaveDialogs({parentPeerId:e,limit:t,offsetDialog:a}){const s=this.appPeersManager.getInputPeerById(e),n=this.appPeersManager.getInputPeerById(a?.peerId),i=a?this.appMessagesManager.getMessageByPeer(e,a.top_message)?.date:0,o=H(a?.top_message),p=await this.apiManager.invokeApiSingleProcess({method:"messages.getSavedDialogs",params:{hash:"0",limit:t,offset_date:i,offset_id:o,offset_peer:n,parent_peer:s}}),d=this.processGetDialogsResult({parentPeerId:e,result:p}),{dialogs:c}=d,f=new Set(c.map(m=>m.peerId)),l=this.getDialogCollection(e);return l.stable=l.stable.filter(m=>!f.has(m.peerId)),l.stable.push(...c),l.stable.sort(this.sortStableDialogsComparator),d}async fetchAndSaveDialogsById({parentPeerId:e,ids:t}){const a=this.getDialogCollection(e),s=!a.count,n=this.appPeersManager.getInputPeerById(e),[i]=await Promise.all([this.apiManager.invokeApiSingleProcess({method:"messages.getSavedDialogsByID",params:{ids:t.map(f=>this.appPeersManager.getInputPeerById(f)),parent_peer:n}}),s&&this.fetchAndSaveDialogs({parentPeerId:e,limit:1})]),{dialogs:o}=this.processGetDialogsResult({parentPeerId:e,result:i}),p=xt(a.stable)?.stableIndex||1/0,d=new Set(o.map(f=>f.peerId));a.stable=a.stable.filter(f=>!d.has(f.peerId)),a.stable.push(...o.filter(f=>f.stableIndex>=p)),a.stable.sort(this.sortStableDialogsComparator),this.rootScope.dispatchEvent("monoforum_dialogs_update",{dialogs:o});const c=t.filter(f=>!d.has(f));c.length&&this.dropDeletedDialogs(e,c)}processGetDialogsResult({parentPeerId:e,result:t}){if(t._==="messages.savedDialogsNotModified")return;let a=0;t._==="messages.savedDialogsSlice"?a=t.count:a=t.dialogs.length,this.appMessagesManager.saveApiResult(t);const s=t.dialogs.filter(n=>n._==="monoForumDialog");return this.saveDialogs({parentPeerId:e,dialogs:s,count:a}),{count:a,dialogs:s}}saveDialogs({dialogs:e,parentPeerId:t,count:a}){e.forEach(i=>this.setAdditionalProps(t,i));const s=this.getDialogCollection(t),n=new Set(e.map(i=>i.peerId));s.items=s.items.filter(i=>!n.has(i.peerId)),s.items.push(...e),s.items.sort(this.sortDialogsComparator),e.forEach(i=>s.map.set(i.peerId,i)),s.count=Math.max(a||0,s.count,s.items.length)}setAdditionalProps(e,t){t.peerId=oe(t.peer),t.parentPeerId=e,t.top_message=this.appMessagesIdsManager.generateMessageId(t.top_message,this.appPeersManager.isChannel(e)?e.toChatId():void 0),this.updateDialogIndex(t,!1)}updateDialogIndex(e,t=!0){const a=this.appMessagesManager.getMessageByPeer(e.parentPeerId,e.top_message);let s;e.draft?._!=="draftMessageEmpty"&&e.draft?.date?s=e.draft.date:s=a?.date,e.index_0=s,e.stableIndex=a?.date,!(!t||this.isResortingQueued)&&(this.isResortingQueued=!0,queueMicrotask(()=>{this.isResortingQueued=!1,this.resortDialogs(e.parentPeerId)}))}resortDialogs(e){const t=this.getDialogCollection(e);t.items.sort(this.sortDialogsComparator),t.stable.sort(this.sortStableDialogsComparator)}getDialogIndex(e){return e.index_0}getStableDialogIndex(e){return e.stableIndex}getDialogCollection(e){var t;return(t=this.collectionsByPeerId)[e]??(t[e]={items:[],stable:[],map:new Map,count:0})}getPositionForOffsetIndex(e,t){let a=0;for(;a<e.length&&this.getDialogIndex(e[a])>=t;)a++;return a}dropDeletedDialogs(e,t){const a=new Set(t),s=this.getDialogCollection(e),n=s.items.length===s.count;s.items=s.items.filter(i=>!a.has(i.peerId)),s.stable=s.stable.filter(i=>!a.has(i.peerId)),t.forEach(i=>s.map.delete(i)),n&&(s.count=s.items.length),this.rootScope.dispatchEvent("monoforum_dialogs_drop",{parentPeerId:e,ids:t})}checkLastMessageForExistingDialog(e){const t=e.peerId,a=oe(e.saved_peer_id);if(!a||!t)return;const s=this.collectionsByPeerId[t];if(!s)return;const n=s.map.get(a);if(!n){this.updateDialogsByPeerId({parentPeerId:t,ids:[a]});return}!e.pFlags.out&&e.pFlags.unread&&e.mid>n.top_message&&(cs(n,"unread_count"),ca(e)&&cs(n,"unread_reactions_count")),!(n.top_message>e.mid)&&(n.top_message=e.mid,this.updateDialogIndex(n),this.rootScope.dispatchEvent("monoforum_dialogs_update",{dialogs:[n]}))}updateDialogsByPeerId({parentPeerId:e,ids:t}){this.fetchByIdBatchQueue.addToQueue(e,t)}updateDialogIfExists(e,t){this.getDialogByParent(e,t)&&this.updateDialogsByPeerId({parentPeerId:e,ids:[t]})}async updateDialogUnreadMark({parentPeerId:e,peerId:t,unread:a}){const s=this.getDialogByParent(e,t);s&&(a?s.pFlags.unread_mark=!0:delete s.pFlags.unread_mark,this.rootScope.dispatchEvent("monoforum_dialogs_update",{dialogs:[s]}))}async toggleSuggestedPostApproval({parentPeerId:e,messageId:t,reject:a,rejectComment:s,scheduleTimestamp:n}){const i=await this.apiManager.invokeApi("messages.toggleSuggestedPostApproval",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t),reject:a,reject_comment:s,schedule_date:n&&n>=te(!0)+hr?n:void 0});this.apiUpdatesManager.processUpdateMessage(i)}}function cs(r,e,t=1){r&&(r[e]=Math.max(r[e]+t||0,0))}function Jd(r){if(r){if(r._==="messageMediaPhoto"&&r.photo?._==="photo")return{_:"inputMediaPhoto",id:Va(r.photo),pFlags:{spoiler:r.pFlags.spoiler},ttl_seconds:r.ttl_seconds};if(r._==="messageMediaDocument"&&r.document?._==="document")return{_:"inputMediaDocument",id:Sa(r.document),pFlags:{spoiler:r.pFlags.spoiler},video_cover:r.video_cover?._==="photo"?Va(r.video_cover):void 0,ttl_seconds:r.ttl_seconds};if(r._==="messageMediaContact")return{_:"inputMediaContact",user_id:r.user_id,phone_number:r.phone_number,first_name:r.first_name,last_name:r.last_name,vcard:r.vcard}}}function si(r){if(r&&(r._==="messageMediaPhoto"&&r.photo?._==="photo"||r._==="messageMediaDocument"&&r.document?._==="document"))return Jd(r)}function as(r,e,t){if(!r||typeof r!="object"||r.__wrapped)return r;const a=new Map,s=new Proxy(r,{get(n,i,o){const p=Reflect.get(n,i,o);if(typeof p=="function"&&e.methods.includes(String(i))){let d=a.get(i);return d||(d=function(...c){e.onCallBefore?.();const f=p.apply(n,c);return e.onCall({target:n,method:String(i),args:c,result:f,state:t})??f},a.set(i,d)),d}return p}});return Object.defineProperty(s,"__wrapped",{value:!0,enumerable:!1,configurable:!1,writable:!1}),e.onWrap?.(s),s}function $d(r,{onSet:e,observe:t}){const a=new Proxy(r,{get(s,n,i){const o=Reflect.get(s,n,i);return t[n]?as(o,t[n],a):o},set(s,n,i,o){const p=(()=>{try{return Reflect.get(s,n,o)}catch{return}})(),d=t[n]?as(i,t[n],a):i,c=Reflect.set(s,n,d,o);return c&&e?.({prop:n,value:d,oldValue:p,state:a}),c}});for(const s in t)t[s].key=s,r[s]=as(r[s],t[s],a);return a}function Qd(r){const e=typeof r=="string"?r.split("_")[0]:r.type,t=typeof r=="string"?r:gr(r),a={history:new Jt,type:e,key:t,count:null,_maxId:void 0,get maxId(){const s=a._maxId;if(s)return s;const n=a.history.first;if(n.isEnd(_e.Bottom))return n[0]}};return a}function Yd(){const r=new Jt;return r.insertSlice=e=>(r.first.push(...e),r.first),r.findOffsetInSlice=(e,t)=>{const a=t.indexOf(e);if(a!==-1)return{slice:t,offset:a+1}},r}function Xd(r,e){const t="...";return r=r.trim(),r.length>e-t.length&&(r=r.slice(0,e-t.length)+t),r}function ni(r,e){const t={};return e.forEach(a=>{t[a]=r[a]}),t}async function Zd(r,e){const t={};return await Promise.all(Object.entries(r).map(async([a,s])=>{t[a]=await s})),t}function ma(r,e){return r.some(t=>t instanceof Promise)?Promise.all(r).then(e):e(r)}const da=Ye,ec=16,tc="New Chat",hr=60,ac=r=>{r()},ii=new Set(["_maxId","count","readMaxId","readOutboxMaxId","maxOutId","replyMarkup","key","wasFetched"]);class sc extends W{constructor(){super(),this.pendingByRandomId={},this.pendingByMessageId={},this.pendingAfterMsgs={},this.pendingTopMsgs={},this.tempFinalizeCallbacks={},this.pendingNewBotforumTopics={},this.sendSmthLazyLoadQueue=new wd(10),this.needSingleMessages=new Map,this.extendedMedia=new Map,this.deletedMessages=new Set,this.maxSeenId=0,this.migratedFromTo={},this.migratedToFrom={},this.newDialogsToHandle=new Map,this.newUpdatesAfterReloadToHandle={},this.notificationsToHandle={},this.reloadConversationsPeers=new Map,this.groupedTempId=0,this.mediaTempId=0,this.mediaTempMap={},this.typings={},this.unreadMentions={},this.goToNextMentionPromises={},this.batchUpdates={},this.tempMids={},this.historyMaxIdSubscribed=new Map,this.paidMessagesQueue=new Hd,this.typingBotforumMessages=new Map,this.pendingEditingMessages=new Map,this.clear=e=>{this.middleware?(this.middleware.clean(),this.waitingTranscriptions.forEach(t=>t.reject())):(this.middleware=cr(),this.uploadFilePromises={}),this.messagesStorageByPeerId={},this.groupedMessagesStorage={},this.scheduledMessagesStorage={},this.logsMessagesStorage={},this.historiesStorage={},this.threadsStorage={},this.searchesStorage={},this.pinnedMessages={},this.threadsServiceMessagesIdsStorage={},this.threadsToReplies={},this.references={},this.waitingTranscriptions=new Map,this.pendingNewBotforumTopics={},this.pendingEditingMessages=new Map,this.dialogsStorage&&this.dialogsStorage.clear(e),this.filtersStorage&&this.filtersStorage.clear(e)},this.handleNewDialogs=()=>{let e=0;const t=new Map,a=s=>{const{peerId:n}=s;this.dialogsStorage.pushDialog({dialog:s}),this.appPeersManager.isChannel(n)||(e=Math.max(e,s.top_message||0));let i=t.get(n);i||t.set(n,i={}),Ue(s)?(i.topics??(i.topics=new Map)).set(s.id,s):xe(s)?(i.saved??(i.saved=new Map)).set(s.savedPeerId,s):i.dialog=s};for(const[s,n]of this.newDialogsToHandle){const i="dialog"in n,{dialog:o,topics:p,saved:d}=n;i&&(o?this.dialogsStorage.getDialogOnly(s)&&a(o):this.reloadConversation(s.toPeerId())),p?.forEach((c,f)=>{c?this.dialogsStorage.getForumTopic(s,f)&&a(c):this.dialogsStorage.getForumTopicById(s,f)}),d?.forEach((c,f)=>{c?this.dialogsStorage.getAnyDialog(s,f)&&a(c):this.dialogsStorage.getSavedDialogById(f)})}e!==0&&this.incrementMaxSeenId(e),this.rootScope.dispatchEvent("dialogs_multiupdate",t),this.newDialogsToHandle.clear()},this.handleNotifications=()=>{de.clearTimeout(this.notificationsHandlePromise),this.notificationsHandlePromise=void 0;for(const e in this.notificationsToHandle){const[t,a]=e.split("_"),s=this.notificationsToHandle[e];this.getNotifyPeerSettings(t.toPeerId(),a?+a:void 0).then(({muted:n,peerTypeNotifySettings:i})=>{const o=s.topMessage;n&&!o.pFlags.mentioned||!o.pFlags.unread||o.pFlags.unread&&this.notifyAboutMessage(o,{fwdCount:s.fwdCount,peerTypeNotifySettings:i})})}this.notificationsToHandle={}},this.onUpdateMessageId=e=>{const t=e.random_id,a=this.pendingByRandomId[t];if(!a)return;const{peerId:s}=a,n=this.appPeersManager.isChannel(s)?s.toChatId():void 0,i=this.appMessagesIdsManager.generateMessageId(e.id,n);this.pendingByMessageId[i]=t},this.onUpdateNewMessage=e=>{var C;const t=e.message,a=this.getMessagePeer(t),s=this.getHistoryMessagesStorage(a),n=e._==="updateNewDiscussionMessage";this.saveMessages([t],{storage:this.createMessageStorage(a,"history")});const i=this.appPeersManager.isForum(a),o=this.getThreadKey(t),p=o?+o.split("_")[1]:void 0,d=this.dialogsStorage.getAnyDialog(a,n?p:void 0);if((!d||this.reloadConversationsPeers.has(a))&&!n){let b=!0;if(a.isAnyChat()&&(b=this.appChatsManager.isInChat(a.toChatId())),b){this.handleNewUpdateAfterReload(a,e);return}}if(p&&!n){const b=this.threadsStorage[a]?.[p],w={_:"updateNewDiscussionMessage",message:t};this.appChatsManager.isForum(a.toChatId())&&!this.dialogsStorage.getForumTopic(a,p)?this.handleNewUpdateAfterReload(a,w,p):a===this.appPeersManager.peerId&&!this.dialogsStorage.getAnyDialog(a,p)?this.handleNewUpdateAfterReload(a,w,p):b&&this.onUpdateNewMessage(w)}if(t._==="messageService"){const{action:b}=t;if(b._==="messageActionPaymentSent"&&t.reply_to){const w=t.reply_to;this.rootScope.dispatchEvent("payment_sent",{peerId:w.reply_to_peer_id?this.appPeersManager.getPeerId(w.reply_to_peer_id):t.peerId,mid:t.reply_to_mid,receiptMessage:t})}if(this.appPeersManager.isBotforum(a)&&b._==="messageActionTopicCreate"&&(this.dialogsStorage.getForumTopic(a,p)||this.dialogsStorage.getForumTopicById(a,p)),b._==="messageActionTopicEdit"&&!n){const w=this.dialogsStorage.getForumTopic(a,p);if(!w)this.dialogsStorage.getForumTopicById(a,p);else{const k=Oe(w);b.title!==void 0&&(w.title=b.title),b.closed!==void 0&&Zn(w.pFlags,"closed",b.closed),b.hidden!==void 0&&Zn(w.pFlags,"hidden",b.hidden),b.icon_emoji_id!==void 0&&(w.icon_emoji_id=b.icon_emoji_id),this.scheduleHandleNewDialogs(a,w),this.dialogsStorage.processTopicUpdate(w,k)}}if(b._==="messageActionPaidMessagesPrice"&&this.appPeersManager.isBroadcast(t?.peerId)){const w=this.appChatsManager.getChat(t.peerId.toChatId()),k=w?._==="channel"&&!w?.pFlags?.monoforum&&w?.linked_monoforum_id;k&&this.reloadConversation(k.toPeerId(!0))}}this.saveMessages([t],{storage:s}),this.checkPendingMessage(t);const c=this.getHistoryStorage(a,n?p:void 0);n||this.updateMessageRepliesIfNeeded(t,!0);const f=e.ignoreExisting,l=!!c.history.findSlice(t.mid);if(this.updateMessageContextForInserting(t),l){if(!f)return!1}else{const b=c.history.first;let w=!1;if(b.isEnd(_e.Bottom)){let k=0;for(const B=b.length;k<B&&!(t.mid>b[k]);++k);k>0&&(b.splice(k,0,t.mid),w=!0)}w||c.history.unshift(t.mid),c.count!==null&&++c.count}(!c.maxId||t.mid>c.maxId)&&(c._maxId=t.mid),this.mergeReplyKeyboard(c,t)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:a});const m=t.fromId;if(m.isUser()&&!t.pFlags.out&&t.from_id){t.pFlags.offline||this.appUsersManager.forceUserOnline(m,t.date);const b={_:"sendMessageCancelAction"};let w;a.isUser()?w={_:"updateUserTyping",action:b,user_id:m}:this.appPeersManager.isChannel(a)?w={_:"updateChannelUserTyping",action:b,channel_id:a.toChatId(),from_id:this.appPeersManager.getOutputPeer(m),top_msg_id:p?H(p):void 0}:w={_:"updateChatUserTyping",action:b,chat_id:a.toChatId(),from_id:this.appPeersManager.getOutputPeer(m)},this.apiUpdatesManager.processLocalUpdate(w)}n||this.updateSlowModeOnNewMessage(t),n||this.handleNewMessage(t);const g=Ue(d),_=xe(d);if(n&&!g&&!_||!d)return;const S=!t.pFlags.out&&t.pFlags.unread;{if(S&&t.mid>d.top_message&&!_){const b=this.dialogsStorage.prepareDialogUnreadCountModifying(d);++d.unread_count,ca(t)&&(++d.unread_mentions_count,this.modifyCachedMentions({peerId:a,mid:t.mid,add:!0,threadId:g?p:void 0})),b()}t.mid>=d.top_message&&this.setDialogTopMessage(t,d)}if((!n&&!i||g)&&S){const b=o||a,w=(C=this.notificationsToHandle)[b]??(C[b]={fwdCount:0,fromId:Ye});w.fromId!==m&&(w.fromId=m,w.fwdCount=0),t.fwd_from&&++w.fwdCount,w.topMessage=t,this.notificationsHandlePromise??(this.notificationsHandlePromise=de.setTimeout(this.handleNotifications,0))}t.peerId!==this.rootScope.myId&&t.saved_peer_id&&this.monoforumDialogsStorage.checkLastMessageForExistingDialog(t)},this.onUpdateMessageReactions=e=>{const{peer:t,msg_id:a,top_msg_id:s,saved_peer_id:n,reactions:i}=e,o=t.channel_id,p=this.appMessagesIdsManager.generateMessageId(a,o),d=this.appMessagesIdsManager.generateMessageId(s,o),c=this.appPeersManager.getPeerId(t),f=this.getMonoforumThreadId(c,n),l=this.getMessageByPeer(c,p);if(f&&this.monoforumDialogsStorage.updateDialogIfExists(c,f),!l){this.fixDialogUnreadMentionsIfNoMessage({peerId:c,threadId:d,force:!0});return}const m=w=>{this.modifyCachedMentionsAndSave({peerId:c,mid:l.mid,threadId:d,addReaction:w})},g=i?.recent_reactions,S=l.reactions?.recent_reactions,D=g?.some(w=>w.pFlags.unread),C=!!S?.some(w=>w.pFlags.unread);if(g?.length&&l.pFlags.out){const w=g[g.length-1];this.appPeersManager.getPeerId(w.peer_id)!==this.appPeersManager.peerId&&(!S||S.length<=g.length)&&(!S||!We(w,S[S.length-1]))&&D!==C&&this.getNotifyPeerSettings(c).then(({muted:k,peerTypeNotifySettings:B})=>{B.show_previews&&this.notifyAboutMessage(l,{peerReaction:w,peerTypeNotifySettings:B})})}l.pFlags.out&&D!==C&&m(D);const b=l.peerId+"_"+l.mid;this.pushBatchUpdate("messages_reactions",this.batchUpdateReactions,b,()=>Oe(l.reactions)),this.modifyMessage(l,w=>{w.reactions=i},void 0,e.local)},this.onUpdateDialogUnreadMark=e=>{const t=this.appPeersManager.getPeerId(e.peer.peer),a=this.getMonoforumThreadId(t,e.saved_peer_id),s=this.getDialogOnly(t);if(!s)this.scheduleHandleNewDialogs(t);else if(a)this.monoforumDialogsStorage.updateDialogUnreadMark({parentPeerId:t,peerId:a,unread:!!e?.pFlags?.unread});else{const n=this.dialogsStorage.prepareDialogUnreadCountModifying(s);e.pFlags.unread?s.pFlags.unread_mark=!0:delete s.pFlags.unread_mark,n(),this.dialogsStorage.setDialogToState(s),this.rootScope.dispatchEvent("dialogs_multiupdate",new Map([[t,{dialog:s}]]))}},this.onUpdateEditMessage=e=>{var S,D;const t=e.message,a=this.getMessagePeer(t),s=this.appPeersManager.isChannel(a)?a.toChatId():void 0,n=this.appMessagesIdsManager.generateMessageId(t.id,s),i=this.getHistoryMessagesStorage(a);if(!i.has(n)){this.fixDialogUnreadMentionsIfNoMessage({peerId:a,threadId:qt(t,{isForum:this.appPeersManager.isForum(a)}),force:!0});return}const o=this.getMessageFromStorage(i,n),p=this.modifyMessage(o,()=>(this.saveMessages([t],{storage:i}),this.getMessageFromStorage(i,n)),!1,!0),d=this.pendingEditingMessages.get(n);if(d&&!d.canceled){const{mediaTempId:C}=d;t._==="message"&&(t.media?._==="messageMediaPhoto"&&t.media.photo?._==="photo"?this.updatePhoto(t.media.photo,""+C):t.media?._==="messageMediaDocument"&&t.media.document?._==="document"&&this.updateDocument(t.media.document,C))}this.handleEditedMessage(o,p,i);const c=this.getDialogOnly(a),f=c?.top_message===n;if(t.clear_history){f&&this.rootScope.dispatchEvent("dialog_flush",{peerId:a,dialog:c});return}let l=!0;if(o&&!We(o.reactions,p.reactions)){const C=p.reactions;p.reactions=o.reactions,this.apiUpdatesManager.processLocalUpdate({_:"updateMessageReactions",peer:this.appPeersManager.getOutputPeer(a),msg_id:t.id,reactions:C}),l=!1}l&&this.rootScope.dispatchEvent("message_edit",{storageKey:i.key,peerId:a,mid:n,message:t}),f&&this.dialogsStorage.setDialogToState(c);const m=new Map,g=()=>{let C=m.get(a);return C||m.set(a,C={}),C};(f||t.grouped_id)&&c&&(g().dialog=c);const _=this.getThreadKey(t);if(_){const C=+_.split("_")[1],b=this.dialogsStorage.getAnyDialog(a,C);b&&((S=g())[D=xe(b)?"saved":"topics"]??(S[D]=new Map)).set(C,b)}if(m.size&&this.rootScope.dispatchEvent("dialogs_multiupdate",m),t.saved_peer_id&&a!==this.rootScope.myId){const C=this.getMonoforumThreadId(a,t.saved_peer_id),b=this.monoforumDialogsStorage.getDialogByParent(a,C);b?.top_message===n&&this.rootScope.dispatchEvent("monoforum_dialogs_update",{dialogs:[b]})}},this.onUpdateReadHistory=e=>{const t=e.channel_id,a=this.appMessagesIdsManager.generateMessageId(e.max_id||e.read_max_id,t),s=this.appMessagesIdsManager.generateMessageId(e.top_msg_id,t),n=t?t.toPeerId(!0):this.appPeersManager.getPeerId(e.peer),i=this.getMonoforumThreadId(n,e.saved_peer_id),o=e._==="updateReadHistoryOutbox"||e._==="updateReadChannelOutbox"||e._==="updateReadChannelDiscussionOutbox"||e._==="updateReadMonoForumOutbox"?!0:void 0,p=t?this.appChatsManager.isForum(t):!1,d=this.appPeersManager.isBotforum(n),c=t?this.appChatsManager.isMonoforum(t):!1,f=this.getHistoryMessagesStorage(n),l=Qn(f,"desc"),m=s&&(p||d)?this.dialogsStorage.getForumTopic(n,s):this.getDialogOnly(n),g=e.still_unread_count;let _=0,S=0,D=!1;const C=this.getHistoryStorage(n,s||i);if(n.isUser()&&o&&this.appUsersManager.forceUserOnline(n.toUserId()),s){const L=this.threadsToReplies[n+"_"+s];if(L){const[R,T]=L.split("_");this.updateMessage(R.toPeerId(),+T,"replies_updated")}}const b=m&&this.dialogsStorage.prepareDialogUnreadCountModifying(m),w=this.getReadMaxIdIfUnread(n,s||i),k={};for(let L=0,R=l.length;L<R;L++){const T=l[L];if(T>a)continue;const V=f.get(T);if(V.pFlags.out!==o)continue;const O=qt(V,{isForum:p,isBotforum:d});if(s&&O!==s||i&&O!==i)continue;if(!(V.pFlags.unread||w&&w<T))break;if(this.modifyMessage(V,M=>{delete M.pFlags.unread},f,!0),D||(D=!0),!V.pFlags.out&&m&&(g===void 0&&(_=--m.unread_count),ca(V)&&(S=--m.unread_mentions_count,this.modifyCachedMentions({peerId:n,mid:V.mid,add:!1}))),c){const M=this.monoforumDialogsStorage.getDialogByParent(n,O);!V.pFlags.out&&M&&(k[M.peerId]=M,cs(M,"unread_count",-1),ca(V)&&cs(M,"unread_reactions_count",-1))}this.rootScope.dispatchEvent("notification_cancel",`msg_${this.getAccountNumber()}_${n}_${T}`)}if(o?C.readOutboxMaxId=a:C.readMaxId=a,m){if(o?m.read_outbox_max_id=a:m.read_inbox_max_id=a,!o){let L;g!==void 0?L=g:_<0||a>=m.top_message||!w?L=0:_&&m.top_message>a&&(L=_),L!==void 0&&(m.unread_count=L),(S<0||!m.unread_count)&&(m.unread_mentions_count=0)}b?.(),this.dialogsStorage.processDialogForFilters(m),this.rootScope.dispatchEvent("dialog_unread",{peerId:n,dialog:m}),this.dialogsStorage.setDialogToState(m),!D&&g===void 0&&!o&&m.unread_count&&(Ue(m)?this.dialogsStorage.getForumTopicById(n,s):this.reloadConversation(n))}if(D&&this.rootScope.dispatchEvent("messages_read"),!s&&t){const L=n+"_";for(const R in this.threadsToReplies)if(R.indexOf(L)===0){const[T,V]=this.threadsToReplies[R].split("_");this.rootScope.dispatchEvent("replies_updated",this.getMessageByPeer(T.toPeerId(),+V))}}const B=Object.values(k);B.length&&this.rootScope.dispatchEvent("monoforum_dialogs_update",{dialogs:B})},this.onUpdateReadMessagesContents=e=>{const t=e.channel_id,a=e.top_msg_id,s=a?this.appMessagesIdsManager.generateMessageId(a,t):void 0,n=e.messages.map(o=>this.appMessagesIdsManager.generateMessageId(o,t)),i=t?t.toPeerId(!0):this.findPeerIdByMids(n);for(let o=0,p=n.length;o<p;++o){const d=n[o],c=this.getMessageByPeer(i,d);if(c){if(c.pFlags.media_unread&&(this.modifyMessage(c,f=>{delete f.pFlags.media_unread}),!c.pFlags.out&&ca(c)&&this.modifyCachedMentionsAndSave({peerId:i,mid:d,addMention:!1})),Gd(c)){const f=Oe(c.reactions);f.recent_reactions.forEach(l=>{delete l.pFlags.unread}),this.apiUpdatesManager.processLocalUpdate({_:"updateMessageReactions",peer:this.appPeersManager.getOutputPeer(i),msg_id:c.id,reactions:f})}}else this.fixDialogUnreadMentionsIfNoMessage({peerId:i,threadId:s}),this.fixDialogUnreadMentionsIfNoMessage({peerId:i,threadId:s,isReaction:!0})}this.rootScope.dispatchEvent("messages_media_read",{peerId:i,mids:n})},this.onUpdateChannelAvailableMessages=e=>{const t=e.channel_id,a=t.toPeerId(!0),s=this.getHistoryStorage(a).history.slice,n=this.appMessagesIdsManager.generateMessageId(e.available_min_id,t),i=s.filter(o=>o<=n);e.messages=i,this.onUpdateDeleteMessages(e)},this.onUpdateDeleteMessages=e=>{const t=e.channel_id,a=e.messages.map(m=>this.appMessagesIdsManager.generateMessageId(m,t)),s=t?t.toPeerId(!0):this.findPeerIdByMids(a);if(!s)return;this.apiManager.clearCache("messages.getSearchCounters",m=>this.appPeersManager.getPeerId(m.peer)===s);const n=new Set,i=new Map,o=[];for(const m of a){const g=this.getMessageByPeer(s,m),_=this.getThreadKey(g);if(!_)continue;const S=+_.split("_")[1],D=this.monoforumDialogsStorage.getDialogByParent(s,S);if(D&&o.push(D),this.threadsStorage[s]?.[S]){n.add(_);const C=this.dialogsStorage.getAnyDialog(s,S);C&&i.set(S,C)}}const p=this.handleDeletedMessages(s,this.getHistoryMessagesStorage(s),a),d=Array.from(n).map(m=>{const[g,_]=m.split("_");return this.getHistoryStorage(g.toPeerId(),+_)});[this.getHistoryStorage(s),...d].forEach(m=>{for(const g of p.msgs)m.history.delete(g);p.count&&m.count&&(m.count=Math.max(0,m.count-p.count))}),this.rootScope.dispatchEvent("history_delete",{peerId:s,msgs:p.msgs});const f=[...i.values()],l=this.getDialogOnly(s);l&&f.unshift(l),f.forEach(m=>{const g=Ue(m),_=xe(m),S=nt(m),D=!!(p.unreadMentions||p.unread||p.unreadReactions),C=D&&this.dialogsStorage.prepareDialogUnreadCountModifying(m);if(!_&&p.unread&&(m.unread_count=Math.max(0,m.unread_count-p.unread)),!_&&p.unreadMentions&&(m.unread_mentions_count=m.unread_count?Math.max(0,m.unread_mentions_count-p.unreadMentions):0),!_&&p.unreadReactions&&(m.unread_reactions_count=Math.max(0,m.unread_reactions_count-p.unreadReactions)),D&&(C(),_||this.rootScope.dispatchEvent("dialog_unread",{peerId:s,dialog:m})),p.msgs.has(m.top_message)){const w=this.getHistoryStorage(m.peerId,S?void 0:Mt(m)).history.first;if(w.isEnd(_e.Bottom)&&w.length){const k=w[0],B=this.getMessageByPeer(s,k);this.setDialogTopMessage(B,m)}else g?this.dialogsStorage.getForumTopicById(s,m.id):_?this.dialogsStorage.getSavedDialogById(m.savedPeerId):this.reloadConversation(s)}this.dialogsStorage.setDialogToState(m)});for(const{parentPeerId:m,peerId:g}of o)this.monoforumDialogsStorage.updateDialogsByPeerId({parentPeerId:m,ids:[g]})},this.onUpdateChannel=e=>{const t=e.channel_id,a=t.toPeerId(!0),s=this.appChatsManager.getChat(t),n=this.appChatsManager.isInChat(t),i=!!Xt(s)[0]||!s.pFlags.left,o=this.historiesStorage[a];i!==(o!==void 0)&&(delete this.historiesStorage[a],this.rootScope.dispatchEvent("history_forbidden",a),o&&re.getInstance().invokeVoid("mirror",{name:"historyStorage",key:Rt(o.key,"delete"),accountNumber:this.getAccountNumber()})),!!this.getDialogOnly(a)!==n&&(n?this.reloadConversation(a):this.dialogsStorage.dropDialogOnDeletion(a)),this.rootScope.dispatchEvent("channel_update",t)},this.onUpdateChannelReload=e=>{const t=e.channel_id.toPeerId(!0);this.flushStoragesByPeerId(t),Promise.all([this.reloadConversation(t)]).then(()=>{this.rootScope.dispatchEvent("history_reload",t)})},this.onUpdateChannelMessageViews=e=>{const t=e.views,a=e.channel_id.toPeerId(!0),s=this.appMessagesIdsManager.generateMessageId(e.id,e.channel_id),n=this.getMessageByPeer(a,s);n?.views!==void 0&&n.views<t&&(this.modifyMessage(n,i=>{i.views=t}),this.pushBatchUpdate("messages_views",this.batchUpdateViews,n.peerId+"_"+n.mid))},this.onUpdateServiceNotification=e=>{if(e.pFlags?.popup){this.rootScope.dispatchEvent("service_notification",e);return}const t=Gs,a=t,s=this.generateTempMessageId(a),n={_:"message",id:s,from_id:this.appPeersManager.getOutputPeer(t),peer_id:this.appPeersManager.getOutputPeer(a),pFlags:{unread:!0},date:(e.inbox_date||te(!0))+this.timeManager.getServerTimeOffset(),message:e.message,media:e.media,entities:e.entities};this.appUsersManager.hasUser(t)||this.appUsersManager.saveApiUsers([{_:"user",id:t,pFlags:{verified:!0},access_hash:"0",first_name:"Telegram",phone:"42777"}]),this.saveMessages([n],{isOutgoing:!0}),e.inbox_date&&(this.pendingTopMsgs[a]=s,this.onUpdateNewMessage({_:"updateNewMessage",message:n,pts:void 0,pts_count:void 0}))},this.onUpdatePinnedMessages=e=>{const t=e._==="updatePinnedChannelMessages"?e.channel_id:void 0,a=t?t.toPeerId(!0):this.appPeersManager.getPeerId(e.peer),s=e.messages.map(d=>this.appMessagesIdsManager.generateMessageId(d,t)),n=e.pFlags?.pinned,i=this.getHistoryMessagesStorage(a),o=s.filter(d=>!i.has(d)),p=o.length&&Promise.resolve(this.reloadMessages(a,o)).catch(Se);se(p,()=>{let d;n?d=c=>{c.pFlags.pinned=!0}:d=c=>{delete c.pFlags.pinned};for(const c of s){const f=i.get(c);this.modifyMessage(f,l=>{d(l)},i)}this.resetPinnedMessagesCache(a,s,n)})},this.onUpdateNotifySettings=e=>{const{peer:t,notify_settings:a}=e,s=t._==="notifyForumTopic";if(!(t._==="notifyPeer"||s))return;const i=this.appPeersManager.getPeerId(t.peer),o=this.dialogsStorage.getAnyDialog(i,s?this.appMessagesIdsManager.generateMessageId(t.top_msg_id,t.peer.channel_id):void 0);o&&(o.notify_settings=a,this.rootScope.dispatchEvent("dialog_notify_settings",o),this.dialogsStorage.setDialogToState(o))},this.onUpdateNewScheduledMessage=e=>{const t=e.message,a=this.getMessagePeer(t),s=this.scheduledMessagesStorage[a];if(!s)return;const n=this.appPeersManager.isChannel(a)?a.toChatId():void 0,i=this.appMessagesIdsManager.generateMessageId(t.id,n),o=this.getMessageFromStorage(s,i);this.saveMessages([t],{storage:s,isScheduled:!0});const p=this.getMessageFromStorage(s,i);o?(this.handleEditedMessage(o,p,s),this.rootScope.dispatchEvent("message_edit",{storageKey:s.key,peerId:a,mid:t.mid,message:t})):this.checkPendingMessage(t)||this.rootScope.dispatchEvent("scheduled_new",t)},this.onUpdateDeleteScheduledMessages=e=>{const t=e.peer.channel_id,a=this.appPeersManager.getPeerId(e.peer),s=this.scheduledMessagesStorage[a];if(s){const n=e.messages.map(i=>this.appMessagesIdsManager.generateMessageId(i,t));this.handleDeletedMessages(a,s,n),this.rootScope.dispatchEvent("scheduled_delete",{peerId:a,mids:n})}},this.onUpdateMessageExtendedMedia=e=>{const t=e.peer.channel_id,a=this.appPeersManager.getPeerId(e.peer),s=this.appMessagesIdsManager.generateMessageId(e.msg_id,t),n=this.getHistoryMessagesStorage(a);if(!n.has(s))return;const i=this.getMessageFromStorage(n,s),o=i.media,p=o.extended_media,d=Array.isArray(p);(d?p:[p]).some(f=>f?._==="messageExtendedMedia")||(o.extended_media=d?e.extended_media:e.extended_media[0],this.onUpdateEditMessage({_:"updateEditMessage",message:i,pts:0,pts_count:0}))},this.onUpdateTranscribedAudio=e=>{const t=e.peer.channel_id,a=this.appPeersManager.getPeerId(e.peer),s=e.text,n=this.appMessagesIdsManager.generateMessageId(e.msg_id,t),i=`${a}_${n}`,o=this.waitingTranscriptions.get(i);!e.pFlags.pending&&o&&o.resolve({_:"messages.transcribedAudio",pFlags:{},text:s,transcription_id:e.transcription_id}),this.rootScope.dispatchEvent("message_transcribed",{peerId:a,mid:n,text:s,pending:e.pFlags.pending})},this.batchUpdateViews=e=>{const t=[],a=this.getMessagesFromMap(e);for(const[s]of a)t.push({peerId:s.peerId,mid:s.mid,views:s.views});return t},this.batchUpdateReactions=e=>{const t=[],a=this.getMessagesFromMap(e);for(const[s,n]of a){const i=s.reactions?.results??[],o=n?.results??[],p=i.filter(c=>{const f=o.find(l=>He(l.reaction,c.reaction));return s.pFlags.out&&(!f||c.count>f.count)||c.chosen_order!==void 0&&(!f||f.chosen_order===void 0)}),d=o.filter(c=>!i.some(f=>He(f.reaction,c.reaction)));t.push({message:s,changedResults:p,removedResults:d})}return t},this.processFactCheckBatch=async e=>{for(const[t,a]of e){const s=[...a.keys()].slice(0,100);try{(await this.apiManager.invokeApi("messages.getFactCheck",{peer:this.appPeersManager.getInputPeerById(t),msg_id:s.map(i=>H(i))})).forEach((i,o)=>{const p=s[o],d=this.getMessageByPeer(t,p);d&&this.modifyMessage(d,f=>{f.factcheck=i}),a.get(p).resolve(i),a.delete(p)})}catch(n){s.forEach(i=>{a.get(i).reject(n),a.delete(i)})}a.size||e.delete(t)}},this.processChecklistBatch=async e=>{for(const[t,a]of e){const[s,n]=t.split(":").map(Number),i=new Set,o=new Set,p=new Map;for(const[{taskId:d,oldItem:c,action:f},l]of a)l.resolve(),f==="complete"?(o.delete(d),p.delete(d),i.add(d)):(i.delete(d),o.add(d),c&&p.set(d,c));if(!(!i.size&&!o.size))try{const d=await this.apiManager.invokeApi("messages.toggleTodoCompleted",{completed:Array.from(i),incompleted:Array.from(o),peer:this.appPeersManager.getInputPeerById(s),msg_id:H(n)});this.apiUpdatesManager.processUpdateMessage(d)}catch(d){if(console.error(d),d.type!=="MESSAGE_NOT_MODIFIED"){const c=this.getHistoryMessagesStorage(s),f=this.getMessageFromStorage(c,n);if(!f)return;this.modifyMessage(f,l=>{const m=l.media;m.completions||(m.completions=[]);for(const g of p.values())m.completions.push(g);for(const g of i){const _=m.completions.findIndex(S=>S.id===g);_!==-1&&m.completions.splice(_,1)}},c),this.rootScope.dispatchEvent("message_edit",{storageKey:c.key,peerId:s,mid:n,message:f})}}}e.clear()},this.name="MESSAGES",this.logTypes=ye.Error|ye.Debug|ye.Log|ye.Warn}after(){return this.clear(!0),this.repayRequestHandler=new Na({rootScope:this.rootScope}),this.apiUpdatesManager.addMultipleEventsListeners({updateMessageID:this.onUpdateMessageId,updateNewDiscussionMessage:this.onUpdateNewMessage,updateNewMessage:this.onUpdateNewMessage,updateNewChannelMessage:this.onUpdateNewMessage,updateDialogUnreadMark:this.onUpdateDialogUnreadMark,updateEditMessage:this.onUpdateEditMessage,updateEditChannelMessage:this.onUpdateEditMessage,updateMessageReactions:this.onUpdateMessageReactions,updateReadChannelDiscussionInbox:this.onUpdateReadHistory,updateReadChannelDiscussionOutbox:this.onUpdateReadHistory,updateReadHistoryInbox:this.onUpdateReadHistory,updateReadHistoryOutbox:this.onUpdateReadHistory,updateReadChannelInbox:this.onUpdateReadHistory,updateReadChannelOutbox:this.onUpdateReadHistory,updateReadMonoForumInbox:this.onUpdateReadHistory,updateReadMonoForumOutbox:this.onUpdateReadHistory,updateChannelReadMessagesContents:this.onUpdateReadMessagesContents,updateReadMessagesContents:this.onUpdateReadMessagesContents,updateChannelAvailableMessages:this.onUpdateChannelAvailableMessages,updateDeleteMessages:this.onUpdateDeleteMessages,updateDeleteChannelMessages:this.onUpdateDeleteMessages,updateChannel:this.onUpdateChannel,updateChannelReload:this.onUpdateChannelReload,updateChannelMessageViews:this.onUpdateChannelMessageViews,updateServiceNotification:this.onUpdateServiceNotification,updatePinnedMessages:this.onUpdatePinnedMessages,updatePinnedChannelMessages:this.onUpdatePinnedMessages,updateNotifySettings:this.onUpdateNotifySettings,updateNewScheduledMessage:this.onUpdateNewScheduledMessage,updateDeleteScheduledMessages:this.onUpdateDeleteScheduledMessages,updateMessageExtendedMedia:this.onUpdateMessageExtendedMedia,updateTranscribedAudio:this.onUpdateTranscribedAudio}),this.rootScope.addEventListener("notify_peer_type_settings",({key:e,settings:t})=>{const a=this.dialogsStorage.getFolderDialogs(0).concat(this.dialogsStorage.getFolderDialogs(1));let s;e==="notifyUsers"?s=n=>n.peerId.isUser():e==="notifyBroadcasts"?s=n=>this.appPeersManager.isBroadcast(n.peerId):s=n=>this.appPeersManager.isAnyGroup(n.peerId),a.filter(s).forEach(n=>{this.rootScope.dispatchEvent("dialog_notify_settings",n)})}),this.rootScope.addEventListener("webpage_updated",({id:e,msgs:t})=>{t.forEach(({peerId:a,mid:s,isScheduled:n})=>{const i=n?this.getScheduledMessagesStorage(a):this.getHistoryMessagesStorage(a),o=this.getMessageFromStorage(i,s);o&&(this.modifyMessage(o,p=>{p.media={_:"messageMediaWebPage",pFlags:{},...p.media||{},webpage:this.appWebPagesManager.getCachedWebPage(e)}},i),this.rootScope.dispatchEvent("message_edit",{storageKey:i.key,peerId:a,mid:s,message:o}))})}),this.rootScope.addEventListener("draft_updated",({peerId:e,threadId:t,monoforumThreadId:a,draft:s})=>{if(a){const i=this.monoforumDialogsStorage.getDialogByParent(e,a);if(!i)return;i.draft=s,this.monoforumDialogsStorage.updateDialogIndex(i),this.rootScope.dispatchEvent("monoforum_draft_update",{dialog:i});return}const n=this.dialogsStorage.getAnyDialog(e,t);if(n){n.draft=s;let i=!1;!s&&!H(n.top_message)?(this.dialogsStorage.dropDialog(e),i=!0):(this.dialogsStorage.generateIndexForDialog(n),this.dialogsStorage.pushDialog({dialog:n})),this.rootScope.dispatchEvent("dialog_draft",{peerId:e,dialog:n,drop:i,draft:s})}else if(t){const i=this.appChatsManager.getChat(e.toChatId());i?i.pFlags.forum&&this.dialogsStorage.getForumTopicById(e,t):this.reloadConversation(e)}else this.reloadConversation(e)}),this.rootScope.addEventListener("poll_update",({poll:e})=>{const t=this.appPollsManager.pollToMessages[e.id];if(t)for(const a of t){const[s,n]=a.split("_"),i=this.getMessageByPeer(s.toPeerId(),+n);i&&(this.onMessageModification(i),this.setDialogToStateIfMessageIsTop(i))}}),this.rootScope.addEventListener("chat_toggle_forum",({chatId:e,enabled:t})=>{const a=e.toPeerId(!0);if(!t){delete this.threadsStorage[a];for(const s in this.pinnedMessages)+s===a&&s.startsWith(a+"_")&&delete this.pinnedMessages[s]}}),this.batchUpdatesDebounced=Gi(()=>{for(const e in this.batchUpdates){const t=this.batchUpdates[e];delete this.batchUpdates[e];const a=t.callback(t.batch);a&&(!(a instanceof Array)||a.length)&&this.rootScope.dispatchEvent(e,a)}},33,!1,!0),this.factCheckBatcher=new ri({processBatch:this.processFactCheckBatch}),this.checklistBatcher=new ri({delay:500,debounce:!0,processBatch:this.processChecklistBatch}),this.appStateManager.getState().then(e=>{e.maxSeenMsgId&&(this.maxSeenId=e.maxSeenMsgId)})}getInputEntities(e){const t=Oe(e);if(ht(t,(a,s,n)=>{sp.has(a._)?n.splice(s,1):a._==="messageEntityMentionName"&&(a._="inputMessageEntityMentionName",a.user_id=this.appUsersManager.getUserInput(a.user_id))}),!!t.length)return t}invokeAfterMessageIsSent(e,t,a){var i;const s=(i=this.tempFinalizeCallbacks)[e]??(i[e]={}),n=s[t]??(s[t]={deferred:$()});return n.callback=a,n.deferred}editMessage(e,t,a={}){const{mid:s,peerId:n}=e;if(e.pFlags.is_outgoing)return this.invokeAfterMessageIsSent(s,"edit",c=>this.editMessage(c,t,a));let i=a.entities||[];t&&([t,i]=Ht(t,i));const o=this.getInputEntities(i),p=this.getInputMediaWebPage(a),d=a.scheduleDate||(e.pFlags.is_scheduled?e.date:void 0);return this.apiManager.invokeApi("messages.editMessage",{peer:this.appPeersManager.getInputPeerById(n),id:e.id,message:t,media:a.newMedia,entities:o,no_webpage:a.noWebPage,schedule_date:d,invert_media:a.invertMedia,...p?{media:p}:{}}).then(c=>{this.apiUpdatesManager.processUpdateMessage(c)},c=>{if(this.log.error("editMessage error:",c),c?.type==="MESSAGE_NOT_MODIFIED"){c.handled=!0;return}throw c?.type==="MESSAGE_EMPTY"&&(c.handled=!0),c})}async editMessageMedia({message:e,text:t,sendFileDetails:a,options:s={}}){let{file:n}=a;const{peerId:i}=e,o=structuredClone(e),p=!(n instanceof File)&&!(n instanceof Blob);p&&(n=this.appDocsManager.getDoc(n.id)||n);let d=t||"",c=s.entities||[];d&&([d,c]=Ht(d,c));const f=this.mediaTempId++,{photo:l,document:m,attachType:g,actionName:_,fileType:S,apiFileName:D,attributes:C}=this.makeDocumentAndMetaForSendingFile({file:n,isDocument:p,mediaTempId:f,entities:c,isMedia:s.isMedia,...ni(a,["strippedBytes","width","height","objectURL","duration","thumb","isAnimated"])}),b=$(),w=p?void 0:Xs(n);w&&(this.uploadFilePromises[w]=b);const k=p?void 0:{_:l?"messageMediaPhoto":"messageMediaDocument",pFlags:{},photo:l,document:m};s.invertMedia&&(e.pFlags.invert_media=!0),e.entities=c,e.message=d,e.media=p?{_:"messageMediaDocument",pFlags:{},document:n}:k,e.uploadingFileName=[w];let B=!1,L=null;(()=>{if(p){const O={_:"inputMediaDocument",id:Sa(n),pFlags:{}};b.resolve(O)}else(n instanceof File||n instanceof Blob)&&(()=>{(!B||e?.error)&&(B=!1,L=this.apiFileManager.upload({file:n,fileName:w}),L.catch(M=>{B||(this.log("cancelling upload",k),b.reject(M))}),L.addNotifyListener(M=>{Math.max(1,Math.floor(100*M.done/M.total)),b.notifyAll(M)}),b.notifyAll({done:0,total:n.size}));let h;return g==="video"&&a.objectURL&&a.thumb?.blob&&(h=this.uploadThumbAndCover({blob:a.thumb.blob,isCover:!!a.thumb.isCover,peer:this.appPeersManager.getInputPeerById(i)})),L&&L.then(async M=>{M.name=D,B=!0;let v;switch(g){case"photo":v={_:"inputMediaUploadedPhoto",file:M,pFlags:{spoiler:a.spoiler||void 0}};break;default:v={_:"inputMediaUploadedDocument",file:M,mime_type:S,pFlags:{force_file:_==="sendMessageUploadDocumentAction"||void 0,spoiler:a.spoiler||void 0},attributes:C}}if(h)try{const y=await h;v.thumb=y.file,v.video_cover=y.coverPhoto}catch(y){this.log.error("sendFile thumb upload error:",y)}b.resolve(v)},M=>{this.revertMessageEdit(e.mid)}),b})();return b})(),this.runTempUpdateForMessageEdit(e),this.pendingEditingMessages.set(e.mid,{originalMessage:o,mediaTempId:f});const T=await b,V=O=>this.invokeEditMessageMedia({message:O,inputMedia:T,entities:c,scheduleDate:s.scheduleDate,invertMedia:s.invertMedia});return e.pFlags.is_outgoing?this.invokeAfterMessageIsSent(e.mid,"edit",O=>{if(O?._==="message")return V(O)}):V(e)}runTempUpdateForMessageEdit(e){e.pFlags?.is_scheduled?this.onUpdateNewScheduledMessage({_:"updateNewScheduledMessage",message:e}):this.onUpdateEditMessage({_:"updateEditMessage",message:e,pts:0,pts_count:0})}invokeEditMessageMedia({message:e,inputMedia:t,entities:a,scheduleDate:s,invertMedia:n}){const i=this.getInputEntities(a),o=s||(e.pFlags.is_scheduled?e.date:void 0);return this.apiManager.invokeApi("messages.editMessage",{peer:this.appPeersManager.getInputPeerById(e.peerId),id:e.id,message:e.message,entities:i,media:t,schedule_date:o,invert_media:n}).then(p=>{this.apiUpdatesManager.processUpdateMessage(p)},p=>{if(this.log.error("editMessage error:",p),this.revertMessageEdit(e.mid),p?.type==="MESSAGE_NOT_MODIFIED"){p.handled=!0;return}throw p?.type==="MESSAGE_EMPTY"&&(p.handled=!0),p}).finally(()=>{this.pendingEditingMessages.delete(e.mid)})}revertMessageEdit(e){const t=this.pendingEditingMessages.get(e);t&&(t.canceled=!0,this.runTempUpdateForMessageEdit(t.originalMessage),this.pendingEditingMessages.delete(e))}async transcribeAudio(e,t){const{id:a,peerId:s}=e,n=d=>(this.apiUpdatesManager.processLocalUpdate({_:"updateTranscribedAudio",msg_id:e.id,peer:this.appPeersManager.getOutputPeer(s),pFlags:d.pFlags,text:d.text,transcription_id:d.transcription_id}),d),i=`${s}_${e.mid}`;let o;t&&(o=this.waitingTranscriptions.get(i),o||(this.waitingTranscriptions.set(i,o=$()),o.finally(()=>{this.waitingTranscriptions.delete(i)})));const p=this.apiManager.invokeApiSingleProcess({method:"messages.transcribeAudio",params:{peer:this.appPeersManager.getInputPeerById(s),msg_id:a},processResult:n,processError:d=>{throw(d.type==="TRANSCRIPTION_FAILED"||d.type==="MSG_VOICE_MISSING")&&n({_:"messages.transcribedAudio",transcription_id:0,text:"",pFlags:{}}),d}});return o||p}getCommonThingsForSending(){return Zd({config:this.apiManager.getConfig(),appConfig:this.apiManager.getAppConfig()})}async sendText(e){let{peerId:t,text:a}=e;if(!a.trim()&&!e.suggestedPost?.changeMid)return;e.entities??(e.entities=[]),e.webPageOptions??(e.webPageOptions={});const{config:s,appConfig:n}=await this.checkSendOptions(e);if(n.emojies_send_dice?.includes(a.trim()))return this.sendOther({...e,inputMedia:{_:"inputMediaDice",emoticon:a.trim()}});const i=s.message_length_max,o=fr(a,i);a=o[0],o.length>1&&e.webPage?._==="webPage"&&!a.includes(e.webPage.url)&&delete e.webPage,t=this.appPeersManager.getPeerMigratedTo(t)||t;let p=e.entities;e.viaBotId||([a,p]=Ht(a,p));const d=this.getInputEntities(p),c=this.generateOutgoingMessage(t,e);c.entities=p,c.message=a;const f=this.appPeersManager.isChannel(t),l=this.generateOutgoingWebPage(c,e),m=(S,D)=>{this.onMessagesSendError([c],S,D),this.rootScope.dispatchEvent("messages_pending")},g=e.confirmedPaymentResult?.starsAmount||void 0;c.send=()=>{m();const S={};this.pendingAfterMsgs[t]&&(S.afterMessageId=this.pendingAfterMsgs[t].messageId);const D=e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,C=this.appPeersManager.getInputPeerById(t),b=e.replyTo;let w;if(e.viaBotId)w=this.apiManager.invokeApiAfter("messages.sendInlineBotResult",{peer:C,random_id:c.random_id,reply_to:b,query_id:e.queryId,id:e.resultId,clear_draft:e.clearDraft,send_as:D,allow_paid_stars:g},S);else{let k;if(e.suggestedPost?.changeMid){const R=this.getMessageByPeer(t,e.suggestedPost.changeMid);R?._==="message"&&(k=si(R.media))}const L={...{peer:C,message:a,random_id:c.random_id,reply_to:b,entities:d,clear_draft:e.clearDraft,schedule_date:e.scheduleDate||void 0,silent:e.silent,send_as:D,update_stickersets_order:e.updateStickersetOrder,invert_media:e.invertMedia,effect:e.effect,allow_paid_stars:g,suggested_post:c.suggested_post,media:k},...l};w=this.apiManager.invokeApiAfter(e.webPage||k?"messages.sendMedia":"messages.sendMessage",L,S)}return this.pendingAfterMsgs[t]=S,w.then(k=>{if(k._==="updateShortSentMessage"){const B=c.promise;delete c.promise;const L=Oe(c);na(c,["promise"]),c.promise=B,L.date=k.date,L.id=k.id,L.media=k.media,L.entities=k.entities,L.ttl_period=k.ttl_period,this.wrapMessageEntities(L),k.pFlags.out&&(L.pFlags.out=!0);const{pts:R,pts_count:T}=k;this.apiUpdatesManager.processLocalUpdate({_:"updateMessageID",random_id:c.random_id,id:L.id}),this.apiUpdatesManager.processLocalUpdate({_:e.scheduleDate?"updateNewScheduledMessage":f?"updateNewChannelMessage":"updateNewMessage",message:L,pts:R,pts_count:T}),k=void 0}else k.updates&&k.updates.forEach(B=>{B._==="updateDraftMessage"&&(B.local=!0)});k&&(this.apiUpdatesManager.processUpdateMessage(k),this.apiUpdatesManager.processPaidMessageUpdate({paidStars:g,wereStarsReserved:e.confirmedPaymentResult?.canUndo})),c.promise.resolve()},k=>{const B=this.repayRequestHandler.tryRegisterRequest({error:k,messageCount:1,repayCallback:L=>{this.cancelPendingMessage(c.random_id),this.sendText({...e,...L})},paidStars:g,wereStarsReserved:e.confirmedPaymentResult?.canUndo});throw m(k,B),c.promise.reject(k),k}).finally(()=>{this.pendingAfterMsgs[t]===S&&delete this.pendingAfterMsgs[t]})},this.beforeMessageSending(c,{isScheduled:!!e.scheduleDate||void 0,threadId:e.threadId,clearDraft:e.clearDraft,sequential:!0,confirmedPaymentResult:e.confirmedPaymentResult});const _=[c.promise];for(let S=1;S<o.length;++S)_.push(this.sendText({...e,peerId:t,text:o[S]}));return Promise.all(_).then(Se)}async sendFile(e){let t=e.file,{peerId:a}=e;a=this.appPeersManager.getPeerMigratedTo(a)||a,await this.checkSendOptions(e);const s=!(t instanceof File)&&!(t instanceof Blob);s&&(t=this.appDocsManager.getDoc(t.id)||t);const n=!!e.groupedMessage,i=e.groupedMessage||this.generateOutgoingMessage(a,e);let o=e.caption||"",p=e.entities||[];o&&([o,p]=Ht(o,p));const d=e.useTempMediaId?this.mediaTempId++:i.id,c=this.makeDocumentAndMetaForSendingFile({mediaTempId:d,isDocument:s,file:t,entities:p,...ni(e,["strippedBytes","useTempMediaId","isVoiceMessage","width","height","objectURL","waveform","duration","isMedia","isRoundMessage","noSound","thumb","isAnimated"])}),{document:f,apiFileName:l,actionName:m,photo:g,fileType:_,mediaUnread:S,attributes:D}=c;let{attachType:C}=c;i&&S&&(i.pFlags.media_unread=!0),this.log("sendFile",t,_),this.log("sendFile",C,l,t.type,e);const b=$(),w=s?void 0:{_:g?"messageMediaPhoto":"messageMediaDocument",pFlags:{},photo:g,document:f};w&&(na(w,["promise"]),w.promise=b,e.spoiler&&(w.pFlags.spoiler=!0));const k=this.getInputEntities(p),B=s?void 0:Xs(t);B&&(this.uploadFilePromises[B]=b),n||(e.invertMedia&&(i.pFlags.invert_media=!0),i.entities=p,i.message=o,i.media=s?{_:"messageMediaDocument",pFlags:{},document:t}:w,i.uploadingFileName=[B],e.stars&&(i.media=this.generateOutgoingPaidMedia([i],e.stars)));const L=(h,M)=>{this.onMessagesSendError([i],h,M),this.rootScope.dispatchEvent("messages_pending")};let R=!1,T=null;const V=()=>{if(s){const h={_:"inputMediaDocument",id:Sa(t),pFlags:{}};b.resolve(h)}else if(t instanceof File||t instanceof Blob){const h=()=>{(!R||i?.error)&&(R=!1,T=this.apiFileManager.upload({file:t,fileName:B}),T.catch(v=>{R||(this.log("cancelling upload",w),i&&this.cancelPendingMessage(i.random_id),this.setTyping(a,{_:"sendMessageCancelAction"},void 0,e.threadId),b.reject(v))}),T.addNotifyListener(v=>{const y=Math.max(1,Math.floor(100*v.done/v.total));m&&this.setTyping(a,{_:m,progress:y|0},void 0,e.threadId),b.notifyAll(v)}),b.notifyAll({done:0,total:t.size}));let M;return C==="video"&&e.objectURL&&e.thumb?.blob&&(M=this.uploadThumbAndCover({blob:e.thumb.blob,isCover:!!e.thumb.isCover,peer:this.appPeersManager.getInputPeerById(a)})),T&&T.then(async v=>{v.name=l,R=!0;let y;switch(C){case"photo":y={_:"inputMediaUploadedPhoto",file:v,pFlags:{spoiler:e.spoiler||void 0}};break;default:y={_:"inputMediaUploadedDocument",file:v,mime_type:_,pFlags:{force_file:m==="sendMessageUploadDocumentAction"||void 0,spoiler:e.spoiler||void 0},attributes:D}}if(e.stars&&!e.isGroupedItem&&(y={_:"inputMediaPaidMedia",extended_media:[y],stars_amount:""+e.stars}),M)try{const x=await M;y.thumb=x.file,y.video_cover=x.coverPhoto}catch(x){this.log.error("sendFile thumb upload error:",x)}b.resolve(y)},v=>{L(v)}),b};e.isGroupedItem?h():this.sendSmthLazyLoadQueue.push({load:h})}return b};if(!n&&!e.confirmedPaymentResult?.canUndo&&(i.send=V),n||this.beforeMessageSending(i,{isGroupedItem:e.isGroupedItem,isScheduled:!!e.scheduleDate||void 0,threadId:e.threadId,clearDraft:e.clearDraft,processAfter:e.processAfter}),!e.isGroupedItem){const h=e.confirmedPaymentResult?.starsAmount||void 0,M=y=>this.apiManager.invokeApi("messages.sendMedia",{background:e.background,peer:this.appPeersManager.getInputPeerById(a),media:y,message:o,random_id:i.random_id,reply_to:e.replyTo,schedule_date:e.scheduleDate,silent:e.silent,entities:k,clear_draft:e.clearDraft,send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,update_stickersets_order:e.updateStickersetOrder,invert_media:e.invertMedia,effect:e.effect,allow_paid_stars:h,suggested_post:i.suggested_post}).then(x=>{this.apiUpdatesManager.processUpdateMessage(x),this.apiUpdatesManager.processPaidMessageUpdate({paidStars:h,wereStarsReserved:e.confirmedPaymentResult?.canUndo})}),v=()=>{b.then(x=>{this.setTyping(a,{_:"sendMessageCancelAction"},void 0,e.threadId);let A;return x._==="inputMediaDocument"?A=this.apiFileManager.invokeApiWithReference({context:x.id,callback:()=>M(x)}):A=M(x),A.catch(F=>{if(C==="photo"&&(F.type==="PHOTO_INVALID_DIMENSIONS"||F.type==="PHOTO_SAVE_FILE_INVALID")){F.handled=!0,C="document",i.send();return}const j=this.repayRequestHandler.tryRegisterRequest({error:F,messageCount:1,paidStars:h,repayCallback:K=>{this.cancelPendingMessage(i.random_id),this.sendFile({...e,...K})},wereStarsReserved:e.confirmedPaymentResult?.canUndo});throw L(F,j),F})});const y=i.promise;b.then(()=>y.resolve(),x=>y.reject(x))};e.confirmedPaymentResult?.canUndo?(V(),this.paidMessagesQueue.add(a,{send:v,cancel:()=>{this.cancelPendingMessage(i.random_id),i.promise?.reject()}})):v()}const O={message:i,media:w,uploadingFileName:B};return na(O,["promise","send"]),O.promise=b,O.send=V,O}makeDocumentAndMetaForSendingFile(e){const{file:t,isDocument:a,mediaTempId:s}=e;let n,i,o;const p=t.mime_type||t.type,d=t instanceof File?t.name:"",c=[],f=Ft().IMAGE_MIME_TYPES_SUPPORTED.has(p),l=e.strippedBytes&&{_:"photoStrippedSize",bytes:e.strippedBytes,type:"i"};let m,g,_;if(a)n="document",i="";else if(p.indexOf("audio/")===0||["video/ogg"].indexOf(p)>=0){n="audio",i="audio."+(p.split("/")[1]==="ogg"?"ogg":"mp3"),_="sendMessageUploadAudioAction",e.isVoiceMessage&&(n="voice",o=!0);const S={_:"documentAttributeAudio",pFlags:{voice:e.isVoiceMessage||void 0},waveform:e.waveform,duration:e.duration||void 0};c.push(S)}else if(!e.isMedia)n="document",i="document."+p.split("/")[1],_="sendMessageUploadDocumentAction";else if(f){n="photo",i="photo."+p.split("/")[1],_="sendMessageUploadPhotoAction";const S={_:"photoSize",w:e.width,h:e.height,type:Ea,location:null,size:t.size};m={_:"photo",id:s,sizes:[S],w:e.width,h:e.height},l&&m.sizes.unshift(l),this.thumbsStorage.setCacheContextURL(m,S.type,e.objectURL||"",t.size),m=this.appPhotosManager.savePhoto(m)}else if(Ft().VIDEO_MIME_TYPES_SUPPORTED.has(p)){n="video",i="video.mp4",_="sendMessageUploadVideoAction";const S={_:"documentAttributeVideo",pFlags:{round_message:e.isRoundMessage||void 0,supports_streaming:!0},duration:e.duration,w:e.width,h:e.height};c.push(S),e.isAnimated&&c.push({_:"documentAttributeAnimated"})}else n="document",i="document."+p.split("/")[1],_="sendMessageUploadDocumentAction";if(c.push({_:"documentAttributeFilename",file_name:d||i}),["document","video","audio","voice"].includes(n)&&!a){const S=[];g={_:"document",id:s,duration:e.duration,attributes:c,w:e.width,h:e.height,thumbs:S,mime_type:p,size:t.size},e.objectURL&&this.thumbsStorage.setCacheContextURL(g,void 0,e.objectURL,t.size);let D;f?(c.push({_:"documentAttributeImageSize",w:e.width,h:e.height}),D={_:"photoSize",w:e.width,h:e.height,type:Ea,size:t.size}):n==="video"&&e.thumb&&(D={_:"photoSize",w:e.thumb.size.width,h:e.thumb.size.height,type:"local-thumb",size:e.thumb.blob.size},this.thumbsStorage.setCacheContextURL(g,D.type,e.thumb.url,D.size)),D&&S.push(D),l&&S.unshift(l),g=this.appDocsManager.saveDoc(g)}return{document:g,apiFileName:i,actionName:_,attachType:n,photo:m,fileType:p,mediaUnread:o,attributes:c}}async uploadThumbAndCover({blob:e,isCover:t,peer:a}){const s=await this.apiFileManager.upload({file:e});if(!t)return{file:s};try{const n=await this.uploadVideoCover({file:s,peer:a});return{file:s,coverPhoto:n}}catch(n){this.log.error("uploadVideoCover error:",n)}return{file:s}}async uploadVideoCover({file:e,peer:t}){const a={_:"inputMediaUploadedPhoto",file:e,pFlags:{}},s=await this.apiManager.invokeApi("messages.uploadMedia",{peer:t,media:a});if(s._!=="messageMediaPhoto")throw new Error("Uploaded video cover is not a photo");const n=this.appPhotosManager.savePhoto(s.photo);return Va(n)}async sendGrouped(e){if(await this.checkSendOptions(e),e.sendFileDetails.length===1)return this.sendFile({...e,...e.sendFileDetails[0]});let{peerId:t}=e;t=this.appPeersManager.getPeerMigratedTo(t)||t;let a=e.caption||"",s=e.entities||[];a&&([a,s]=Ht(a,s));let n=this.getInputEntities(s);const i=this.log.bindPrefix("sendGrouped");i(e);const o=e.stars?void 0:""+ ++this.groupedTempId,p=[],d=b=>{p.push(b)};let c;const f=!!e.stars,l=this.mediaTempId,m=e.sendFileDetails.map(async(b,w)=>{const k={peerId:t,isGroupedItem:!0,isMedia:e.isMedia,scheduleDate:e.scheduleDate,silent:e.silent,replyToMsgId:e.replyToMsgId,replyToStoryId:e.replyToStoryId,replyToQuote:e.replyToQuote,threadId:e.threadId,sendAsPeerId:e.sendAsPeerId,useTempMediaId:f,groupedMessage:f&&c,groupId:o,processAfter:d,...b};w===0&&(k.caption=a,k.entities=s,k.effect=e.effect);const B=await this.sendFile(k);return w===0&&(c=B.message,c.paid_message_stars=e.confirmedPaymentResult?.starsAmount),B}),g=await Promise.all(m);if(e.stars){const b=g[0].message;b.media=this.generateOutgoingPaidMedia(g,e.stars),this.mediaTempMap[b.id]=l,b.uploadingFileName=g.map(({uploadingFileName:w})=>w)}e.clearDraft&&p.push(()=>{this.appDraftsManager.clearDraft({peerId:t,threadId:e.threadId,monoforumThreadId:e.replyToMonoforumPeerId})}),p.forEach(b=>{b()});const _=(b,w,k)=>{b.error!==w&&(this.onMessagesSendError([b],w,k),this.rootScope.dispatchEvent("messages_pending"))},S=this.appPeersManager.getInputPeerById(t),D=b=>{this.setTyping(t,{_:"sendMessageCancelAction"},void 0,e.threadId);const w=$();return this.sendSmthLazyLoadQueue.push({load:()=>{const k=e.confirmedPaymentResult?.starsAmount*b.length||void 0;return this.apiManager.invokeApi(e.stars?"messages.sendMedia":"messages.sendMultiMedia",{peer:S,reply_to:e.replyTo,schedule_date:e.scheduleDate,silent:e.silent,clear_draft:e.clearDraft,send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,update_stickersets_order:e.updateStickersetOrder,invert_media:e.invertMedia,effect:e.effect,allow_paid_stars:k,...e.stars?{media:b[0].media,message:b[0].message,entities:b[0].entities,random_id:b[0].random_id}:{multi_media:b}}).then(B=>{this.apiUpdatesManager.processUpdateMessage(B),this.apiUpdatesManager.processPaidMessageUpdate({paidStars:k,wereStarsReserved:e.confirmedPaymentResult?.canUndo}),w.resolve()},B=>{const L=this.repayRequestHandler.tryRegisterRequest({error:B,paidStars:k,messageCount:b.length,repayCallback:R=>{g.forEach(({message:T})=>this.cancelPendingMessage(T.random_id)),this.sendGrouped({...e,...R})},wereStarsReserved:e.confirmedPaymentResult?.canUndo});g.forEach(({message:R})=>_(R,B,L)),w.reject(B)})}}),w},C=g.map(async({message:b,send:w})=>{let k;try{k=await w()}catch(V){const O=V.type==="UPLOAD_CANCELED";if(O&&!f)return;throw O||i.error("upload item error:",V,b),_(b,V),V}let B;try{B=await this.apiManager.invokeApi("messages.uploadMedia",{peer:S,media:k})}catch(V){throw i.error("uploadMedia error:",V,b),_(b,V),V}const L=k;if(B._==="messageMediaPhoto"){const V=this.appPhotosManager.savePhoto(B.photo);k=pr(V)}else if(B._==="messageMediaDocument"){const V=this.appDocsManager.saveDoc(B.document);k=dr(V)}["pFlags","ttl_seconds"].forEach(V=>{k[V]=L[V]??k[V]});const T={_:"inputSingleMedia",media:k,random_id:b?.random_id,message:a,entities:n};return a&&(a="",n=void 0),T});return Promise.all(C).then(b=>{if(b=b.filter(Boolean),e.stars){const w=b.splice(1,1/0);b[0].media={_:"inputMediaPaidMedia",extended_media:[b[0].media,...w.map(({media:k})=>k)],stars_amount:""+e.stars}}if(e.confirmedPaymentResult?.canUndo){this.paidMessagesQueue.add(t,{send:()=>void D(b),cancel:()=>g.forEach(({message:w})=>this.cancelPendingMessage(w.random_id))});return}return D(b)})}sendContact({peerId:e,contactPeerId:t,monoforumThreadId:a,confirmedPaymentResult:s}){return this.sendOther({peerId:e,inputMedia:this.appUsersManager.getContactMediaInput(t),replyToMonoforumPeerId:a,confirmedPaymentResult:s})}async sendOther(e){let{peerId:t,inputMedia:a}=e;t=this.appPeersManager.getPeerMigratedTo(t)||t;const s=a?._==="inputMediaDocumentExternal";await this.checkSendOptions(e);const n=this.generateOutgoingMessage(t,e);let i;switch(a._){case"inputMediaPoll":{const d=Et();a.poll.id=d,this.appPollsManager.savePoll(a.poll,{_:"pollResults",total_voters:0,pFlags:{},recent_voters:[]});const{poll:c,results:f}=this.appPollsManager.getPoll(d);i={_:"messageMediaPoll",poll:c,results:f};break}case"inputMediaPhoto":{i={_:"messageMediaPhoto",photo:this.appPhotosManager.getPhoto(a.id.id),pFlags:{}};break}case"inputMediaDocument":{i={_:"messageMediaDocument",document:this.appDocsManager.getDoc(a.id.id),pFlags:{}};break}case"inputMediaContact":{i={_:"messageMediaContact",phone_number:a.phone_number,first_name:a.first_name,last_name:a.last_name,user_id:a.user_id??"0",vcard:a.vcard};break}case"inputMediaGeoPoint":{i={_:"messageMediaGeo",geo:e.geoPoint};break}case"inputMediaVenue":{i={_:"messageMediaVenue",geo:e.geoPoint,title:a.title,address:a.address,provider:a.provider,venue_id:a.venue_id,venue_type:a.venue_type};break}case"inputMediaPhotoExternal":{if(s)break;i={_:"messageMediaPhotoExternal",photo:e.webDocument};break}case"inputMediaDocumentExternal":{if(s)break;i={_:"messageMediaDocumentExternal",document:e.webDocument};break}case"inputMediaStory":{i={_:"messageMediaStory",id:a.id,pFlags:{},peer:this.appPeersManager.getOutputPeer(this.appPeersManager.getPeerId(a.peer))};break}case"inputMediaTodo":{i={_:"messageMediaToDo",todo:a.todo};break}case"inputMediaDice":{i={_:"messageMediaDice",emoticon:a.emoticon,value:0};break}case"messageMediaPending":{i=a.messageMedia;break}}n.media=i;const o=(d,c)=>{this.onMessagesSendError([n],d,c),this.rootScope.dispatchEvent("messages_pending")};n.send=()=>{const d={};this.pendingAfterMsgs[t]&&(d.afterMessageId=this.pendingAfterMsgs[t].messageId);const c=e.confirmedPaymentResult?.starsAmount||void 0,f=e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0;let l;return e.viaBotId?l=this.apiManager.invokeApiAfter("messages.sendInlineBotResult",{peer:this.appPeersManager.getInputPeerById(t),random_id:n.random_id,reply_to:e.replyTo,query_id:e.queryId,id:e.resultId,clear_draft:e.clearDraft,schedule_date:e.scheduleDate,silent:e.silent,send_as:f,allow_paid_stars:c},d):l=this.apiManager.invokeApiAfter("messages.sendMedia",{peer:this.appPeersManager.getInputPeerById(t),media:a,random_id:n.random_id,reply_to:e.replyTo,message:"",clear_draft:e.clearDraft,schedule_date:e.scheduleDate,silent:e.silent,send_as:f,update_stickersets_order:e.updateStickersetOrder,allow_paid_stars:c},d),this.pendingAfterMsgs[t]=d,l.then(m=>{m.updates&&m.updates.forEach(g=>{g._==="updateDraftMessage"&&(g.local=!0)}),this.apiUpdatesManager.processUpdateMessage(m),this.apiUpdatesManager.processPaidMessageUpdate({paidStars:c,wereStarsReserved:e.confirmedPaymentResult?.canUndo}),p.resolve()},m=>{const g=this.repayRequestHandler.tryRegisterRequest({error:m,paidStars:c,messageCount:1,repayCallback:_=>{this.cancelPendingMessage(n.random_id),this.sendOther({...e,..._})},wereStarsReserved:e.confirmedPaymentResult?.canUndo});throw o(m,g),p.reject(m),m}).finally(()=>{this.pendingAfterMsgs[t]===d&&delete this.pendingAfterMsgs[t]})},this.beforeMessageSending(n,{isScheduled:!!e.scheduleDate||void 0,threadId:e.threadId,clearDraft:e.clearDraft,sequential:!0,noOutgoingMessage:s,confirmedPaymentResult:e.confirmedPaymentResult});const p=n.promise;return p}getMonoforumThreadId(e,t){return t&&this.appPeersManager.isMonoforum(e)?this.appPeersManager.getPeerId(t):void 0}getInputReplyTo(e){if(e.replyToStoryId)return{_:"inputReplyToStory",story_id:e.replyToStoryId,peer:this.appPeersManager.getInputPeerById(e.peerId)};if(e.replyToMsgId)return{_:"inputReplyToMessage",monoforum_peer_id:this.appPeersManager.canManageDirectMessages(e.peerId)&&e.replyToMonoforumPeerId?this.appPeersManager.getInputPeerById(e.replyToMonoforumPeerId):void 0,reply_to_msg_id:H(e.replyToMsgId),reply_to_peer_id:e.replyToPeerId&&this.appPeersManager.getInputPeerById(e.replyToPeerId),top_msg_id:e.threadId?H(e.threadId):void 0,...e.replyToQuote&&{quote_text:e.replyToQuote.text,quote_entities:e.replyToQuote.entities,quote_offset:e.replyToQuote.offset}};if(this.appPeersManager.canManageDirectMessages(e.peerId)&&e.replyToMonoforumPeerId)return{_:"inputReplyToMonoForum",monoforum_peer_id:this.appPeersManager.getInputPeerById(e.replyToMonoforumPeerId)}}checkSendOptions(e){const{peerId:t}=e;if(this.appPeersManager.isBotforum(t)&&this.appPeersManager.canManageBotforumTopics(t)&&!e.replyToMsgId&&(!e.threadId||zs(e.threadId))){e.threadId=void 0;const a=this.getPendingOrCreateBotforumTopic({peerId:t,title:Xd(e.text||tc,ec)});e.replyToMsgId||(e.replyToMsgId=a.tempId,a.beforeMessageSendCallbacks.push(()=>{e.replyToMsgId=a.newId,e.replyTo?._==="inputReplyToMessage"&&(e.replyTo.reply_to_msg_id=a.newId)}))}return e.threadId&&!e.replyToMsgId&&(e.replyToMsgId=e.threadId),e.replyTo??(e.replyTo=this.getInputReplyTo(e)),this.getCommonThingsForSending()}beforeMessageSending(e,t={}){const a=e.id,s=this.getMessagePeer(e),n=t.isScheduled?this.getScheduledMessagesStorage(s):this.getHistoryMessagesStorage(s),i=this.getMonoforumThreadId(s,e.saved_peer_id);e.storageKey=n.key;const o=[];if(t.isScheduled&&!t.noOutgoingMessage)this.saveMessages([e],{storage:n,isScheduled:!0,isOutgoing:!0}),o.push(()=>{this.rootScope.dispatchEvent("scheduled_new",e)});else if(!t.noOutgoingMessage){const d=[this.getHistoryStorage(s),t.threadId?this.getHistoryStorage(s,t.threadId):void 0].filter(Boolean);for(const c of d)c.history.unshift(a);if(this.saveMessages([e],{storage:n,isOutgoing:!0}),this.setDialogTopMessage(e),this.updateMessageContextForInserting(e),t.threadId){const c=this.dialogsStorage.getAnyDialog(s,t.threadId);c&&this.setDialogTopMessage(e,c)}i&&this.monoforumDialogsStorage.checkLastMessageForExistingDialog(e),o.push(()=>{this.rootScope.dispatchEvent("history_append",{storageKey:n.key,message:e})})}let p;if(t.noOutgoingMessage||(p=this.pendingByRandomId[e.random_id]={peerId:s,tempId:a,threadId:t.threadId,storage:n,sequential:t.sequential},t.isScheduled||(this.pendingTopMsgs[s]=a,t.threadId&&(this.pendingTopMsgs[`${s}_${t.threadId}`]=a))),e.reactions){const d=e.reactions.results[0].reaction;this.invokeAfterMessageIsSent(a,"reactions",c=>this.appReactionsManager.sendReaction({message:c,reaction:d}))}return!t.isGroupedItem&&e.send&&o.push(()=>{t.clearDraft&&this.appDraftsManager.clearDraft({peerId:s,threadId:t.threadId,monoforumThreadId:i}),this.pendingNewBotforumTopics[s]&&!t.threadId?this.pendingNewBotforumTopics[s].messageSendCallbacks.push(()=>{e.send()}):t.confirmedPaymentResult?.canUndo?this.paidMessagesQueue.add(s,{send:()=>void e?.send?.(),cancel:()=>void this.cancelPendingMessage(e?.random_id)}):e.send()}),o.length&&(t.processAfter||ac)(()=>{for(const d of o)d()}),p}generateStandaloneOutgoingMessage(e){const t=this.generateOutgoingMessage(e,{});return this.saveMessage(t,{storage:new Map}),t}generateOutgoingMessage(e,t){let a;const s=this.appPeersManager.isBroadcast(e);if(s&&this.appPeersManager.getPeer(e).pFlags.signatures){const c=this.appUsersManager.getSelf();a=c.first_name+(c.last_name?" "+c.last_name:"")}let n;t.threadId&&!this.appPeersManager.isForum(e)&&!this.appPeersManager.isBotforum(e)&&(n=this.getHistoryStorage(e,t.threadId).history.first[0]);let i;if(t.suggestedPost?.changeMid){const d=this.getMessageByPeer(e,t.suggestedPost.changeMid);d?._==="message"&&si(d.media)&&(i=d.media)}let o;if(this.appPeersManager.isMonoforum(e)&&this.appPeersManager.canManageDirectMessages(e)){const d=this.appChatsManager.getChat(e.toChatId()),c=d?._==="channel"&&d?.pFlags?.monoforum&&d?.linked_monoforum_id?.toPeerId?.(!0)||void 0;o=this.appPeersManager.getOutputPeer(c)}else o=t.sendAsPeerId?this.appPeersManager.getOutputPeer(t.sendAsPeerId):this.generateFromId(e);const p={_:"message",id:this.generateTempMessageId(e,n),from_id:o,peer_id:this.appPeersManager.getOutputPeer(e),post_author:a,pFlags:this.generateFlags(e),date:t.scheduleDate||te(!0)+this.timeManager.getServerTimeOffset(),message:"",grouped_id:t.groupId,random_id:Et(),reply_to:this.generateReplyHeader(e,t.replyTo),via_bot_id:t.viaBotId,reply_markup:t.replyMarkup,replies:this.generateReplies(e,t.replyTo),views:s&&1,pending:!0,effect:t.effect,paid_message_stars:t.confirmedPaymentResult?.starsAmount||void 0,saved_peer_id:t.replyToMonoforumPeerId?this.appPeersManager.getOutputPeer(t.replyToMonoforumPeerId):e===this.appPeersManager.peerId?this.appPeersManager.getOutputPeer(this.appPeersManager.peerId):void 0,media:i,suggested_post:t.suggestedPost?{_:"suggestedPost",pFlags:{},price:t.suggestedPost.stars?ps(t.suggestedPost.stars):void 0,schedule_date:t.suggestedPost.timestamp&&t.suggestedPost.timestamp>=te(!0)+hr?t.suggestedPost.timestamp:void 0}:void 0};return na(p,["send","promise"]),t.groupId===void 0&&(p.promise=$()),t.savedReaction&&(p.reactions={_:"messageReactions",pFlags:{reactions_as_tags:!0},results:t.savedReaction.map(d=>({_:"reactionCount",count:1,reaction:d,chosen_order:0}))}),p}generateTopicCreatedServiceMessage({peerId:e,title:t}){const a=xn[Math.floor(Math.random()*xn.length)];return{_:"messageService",pFlags:{out:!0,reactions_are_possible:!0},id:this.generateTempMessageId(e),random_id:Et(),from_id:this.appPeersManager.getOutputPeer(this.rootScope.myId),peer_id:this.appPeersManager.getOutputPeer(e),date:te(!0)+this.timeManager.getServerTimeOffset(),pending:!0,action:{_:"messageActionTopicCreate",pFlags:{title_missing:!0},title:t,icon_color:a}}}generateReplyHeader(e,t){if(!t||t._==="inputReplyToMonoForum")return;if(t._==="inputReplyToStory")return{_:"messageReplyStoryHeader",story_id:t.story_id,peer:this.appPeersManager.getOutputPeer(this.appPeersManager.getPeerId(t.peer))};const a=e,s=this.appPeersManager.getPeerId(t.reply_to_peer_id);s&&(e=s);const n=this.appPeersManager.isChannel(e)?e.toChatId():void 0,i=this.appPeersManager.isForum(e),o=this.appPeersManager.isBotforum(e),p=this.appMessagesIdsManager.generateMessageId(t.reply_to_msg_id,n);let d=t.top_msg_id?this.appMessagesIdsManager.generateMessageId(t.top_msg_id,n):void 0;const c=this.getMessageByPeer(e,p);i&&!d&&c&&(d=qt(c,{isForum:!0})),o&&!d&&c&&qt(c,{isBotforum:!0})&&(d=qt(c,{isBotforum:!0}));const f={_:"messageReplyHeader",pFlags:{},reply_to_msg_id:p||d};return d&&(i&&Bi!==d||o)&&(f.pFlags.forum_topic=!0),d&&f.reply_to_msg_id!==d&&(f.reply_to_top_id=d),t.quote_text&&(f.quote_text=t.quote_text,f.quote_entities=t.quote_entities,f.quote_offset=t.quote_offset,f.pFlags.quote=!0),s&&(s.isUser()||!this.appPeersManager.isPeerPublic(s)?(delete f.reply_to_msg_id,f.quote_text??(f.quote_text=c.message)):f.reply_to_peer_id=this.appPeersManager.getOutputPeer(s)),f.reply_media=c?.media,c&&a!==c.peerId&&(f.reply_from=this.generateForwardHeader(e,c,!0)),f}generateReplies(e,t){let a;if(this.appPeersManager.isBroadcast(e)){const s=this.appProfileManager.getCachedFullChat(e.toChatId());s?.linked_chat_id&&(a={_:"messageReplies",pFlags:{comments:!0},channel_id:s.linked_chat_id,replies:0,replies_pts:0})}else this.appPeersManager.isMegagroup(e)&&!t&&(a={_:"messageReplies",pFlags:{},replies:0,replies_pts:0});return a}generateFromId(e){if(!(this.appPeersManager.isAnyChat(e)&&(this.appPeersManager.isBroadcast(e)||this.isAnonymousSending(e))))return this.appPeersManager.getOutputPeer(this.appUsersManager.getSelf().id.toPeerId())}generateFlags(e){const t={},a=this.appUsersManager.getSelf().id;return e!==a&&(t.out=!0,!this.appPeersManager.isChannel(e)&&!this.appUsersManager.isBot(e)&&(t.unread=!0)),this.appPeersManager.isBroadcast(e)&&(t.post=!0),t}generateForwardHeader(e,t,a){if(!t)return;const s=this.appPeersManager.peerId,n=t.fromId,i=t.peerId,o=t.fwd_from;if(n===s&&i===s&&!o&&!a)return;const p={_:"messageFwdHeader",date:t.date,pFlags:{}};let d;return n.isUser()&&(d=this.appProfileManager.getCachedFullUser(n.toUserId())?.private_forward_name),o?["from_id","from_name","channel_post","post_author"].forEach(f=>{p[f]=o[f]}):(p.post_author=t.post_author,d||(p.from_id=this.appPeersManager.getOutputPeer(n)),this.appPeersManager.isBroadcast(i)&&(p.channel_post=t.id)),p.from_name||(p.from_name=d),e===s&&!a&&(d?p.from_name&&(p.saved_from_name=d):(p.saved_from_msg_id=t.id,p.saved_from_peer=this.appPeersManager.getOutputPeer(i),o&&(p.saved_from_id=this.appPeersManager.getOutputPeer(n))),t.pFlags.out&&!this.appPeersManager.isBroadcast(i)&&(p.pFlags.saved_out=!0),o&&(p.saved_date=t.date)),p}getInputMediaWebPage(e){if(e.webPage)return{_:"inputMediaWebPage",url:e.webPage.url,pFlags:{force_large_media:e.webPageOptions.largeMedia||void 0,force_small_media:e.webPageOptions.smallMedia||void 0,optional:e.webPageOptions.optional||void 0}}}generateOutgoingWebPage(e,t){return e._!=="message"?{}:t.webPage?(e.media={_:"messageMediaWebPage",pFlags:{force_large_media:t.webPageOptions.largeMedia||void 0,force_small_media:t.webPageOptions.smallMedia||void 0},webpage:t.webPage},t.invertMedia&&(e.pFlags.invert_media=!0),{media:this.getInputMediaWebPage(t)}):{no_webpage:t.noWebPage}}generateFakeAvatarMessage(e,t){const a=Number.MAX_SAFE_INTEGER,s={_:"messageService",pFlags:{},action:{_:"messageActionChannelEditPhoto",photo:t},id:a,peer_id:this.appPeersManager.getOutputPeer(e),mid:a,peerId:e,date:t.date,fromId:e};return this.getHistoryMessagesStorage(e).set(a,s),s}generateOutgoingPaidMedia(e,t){return{_:"messageMediaPaidMedia",extended_media:e.map(({media:a})=>({_:"messageExtendedMedia",media:a})),stars_amount:""+t}}getUploadPromise(e){return this.uploadFilePromises[e]}isAnonymousSending(e){return e.isAnyChat()?this.appPeersManager.getPeer(e).admin_rights?.pFlags?.anonymous:!1}setDialogTopMessage(e,t=this.getDialogOnly(e.peerId)){if(!t)return;t.top_message=e.mid;const a=this.getHistoryStorage(e.peerId,nt(t)?void 0:Mt(t));a._maxId=e.mid,this.dialogsStorage.generateIndexForDialog(t,!1,e),this.scheduleHandleNewDialogs(e.peerId,t)}cancelPendingMessage(e){const t=this.pendingByRandomId[e];if(t){const{peerId:a,tempId:s,storage:n}=t,i=this.getHistoryStorage(a);return this.appPeersManager.isChannel(a)?this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:a.toChatId(),messages:[s],pts:void 0,pts_count:void 0}):this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteMessages",messages:[s],pts:void 0,pts_count:void 0}),i.history.delete(s),delete this.pendingByRandomId[e],this.deleteMessageFromStorage(n,s),!0}return!1}async fillConversations(e=St){const t=this.middleware.get();for(;!this.dialogsStorage.isDialogsLoaded(e);){const a=await this.getTopMessages({limit:100,folderId:e});if(!t()||!a||a.isEnd)break}}getReadMaxIdIfUnread(e,t){const a=this.getHistoryStorage(e,t);if(t&&!this.appChatsManager.isForum(e.toChatId())){const s=this.getHistoryStorage(e),n=Math.max(s.readMaxId??0,a.readMaxId);return!this.getMessageByPeer(e,a.maxId)?.pFlags?.out&&n<a.maxId?n:0}else{const s=this.getMessageByPeer(e,a.maxId),n=a.readMaxId;return!s?.pFlags?.out&&n<a.maxId&&H(n)?n:0}}getTopMessages({limit:e,folderId:t,query:a,offsetTopicId:s,filterType:n=this.dialogsStorage.getFilterType(t),offsetBotforumTopic:i}){const o=this.log.bindPrefix("getTopMessages"),p=0;let d,c=0;a||(a=void 0);let f=this.dialogsStorage.getOffsetDate(t);f&&(c=f*65536,f+=this.timeManager.getServerTimeOffset());const l=100,m=this.middleware.get(),g=!!a,_=this.dialogsStorage.isVirtualFilter(t)?t:void 0,S=k=>{if(!m()||k._==="messages.dialogsNotModified"||k._==="messages.savedDialogsNotModified")return null;o("result",k),!_&&!p&&!f&&!d&&t!==St&&(o("resetting pinned order",t),this.dialogsStorage.resetPinnedOrder(t)),!_&&!f&&(o("adding missed dialogs"),this.appDraftsManager.addMissedDialogs()),this.saveApiResult(k);let B=!!f,L=!1;const R=new Map,T=t===St?Qe:t,V=!!_&&!g||t===St,O=k.dialogs||k.topics;if(o("saving",{setFolderId:T,saveGlobalOffset:V,noIdsDialogs:R,isSearch:g}),ht(O,(F,j,K)=>{if(!F){K.splice(j,1);return}if(_||(F.folder_id??(F.folder_id=T)),this.dialogsStorage.saveDialog({dialog:F,ignoreOffsetDate:!g,saveGlobalOffset:V}),F.peerId===void 0){K.splice(j,1);return}if(!B&&!this.appPeersManager.isChannel(F.peerId||this.dialogsStorage.getDialogPeerId(F))&&(this.incrementMaxSeenId(F.top_message),B=!0),c&&js(F)>c&&(this.scheduleHandleNewDialogs(F.peerId,F),L=!0),!_&&!xe(F)&&!H(F.read_inbox_max_id)&&!H(F.read_outbox_max_id)&&!F.unread_count&&H(F.top_message))R.set(F.peerId,{dialog:F}),this.log.error("noIdsDialogs",F,w);else if(F.top_message){const ae=this.getMessageByPeer(F.peerId,F.top_message);ae&&(this.setMessageUnreadByDialog(ae,F),this.dialogsStorage.setDialogToState(F))}}),R.size){const F=[...R.keys()],j=F.map(K=>this.reloadConversation(K));Promise.all(j).then(()=>{this.rootScope.dispatchEvent("dialogs_multiupdate",R);for(let K=0;K<F.length;++K){const ae=F[K];this.rootScope.dispatchEvent("dialog_unread",{peerId:ae,dialog:this.getDialogOnly(ae)})}})}const h=k.count,M=this.dialogsStorage.getFolderDialogs(t,!1);let v=0;if(!g)for(let F=0,j=M.length;F<j;++F){const K=M[F];H(K.top_message)||K.draft?++v:this.log.error("something strange with dialog",K)}let y;g?y=!h||O.length===h:y=!h||v>=h||!O.length,y&&!g&&this.dialogsStorage.setDialogsLoaded(t,!0),L?this.scheduleHandleNewDialogs():this.rootScope.dispatchEvent("dialogs_multiupdate",new Map),o("end",{isEnd:y,hasPrepend:L,offsetDate:this.dialogsStorage.getOffsetDate(t)});const x=O,A=e===l?x:x.slice(0,e);return{isEnd:y&&A[A.length-1]===x[x.length-1],count:Math.max(h||0,O.length),dialogs:A}},D={noErrorBox:!0};let C,b,w;return n===Hs.Forum?C=this.apiManager.invokeApiSingleProcess({method:b="messages.getForumTopics",params:w={peer:this.appPeersManager.getInputPeerById(_),limit:l,offset_date:i?.date||(s?void 0:f),offset_id:p,offset_topic:s,q:a},options:D,processResult:k=>(k=this.dialogsStorage.processTopics(_,k),S(k))}):n===Hs.Saved?C=this.apiManager.invokeApiSingleProcess({method:b="messages.getSavedDialogs",params:w={offset_date:f,offset_id:p,offset_peer:this.appPeersManager.getInputPeerById(d),limit:l,hash:"0"},options:D,processResult:S}):C=this.apiManager.invokeApiSingleProcess({method:b="messages.getDialogs",params:w={folder_id:t,offset_date:f,offset_id:p,offset_peer:this.appPeersManager.getInputPeerById(d),limit:l,hash:"0"},options:D,processResult:S}),o("invoke",b,w),C}async forwardMessagesInner(e){let{peerId:t,fromPeerId:a,mids:s}=e;t=this.appPeersManager.getPeerMigratedTo(t)||t,s=s.slice().sort((_,S)=>_-S);for(let _=0,S=s.length;_<S;++_){const D=s[_],C=this.getMessageByPeer(a,D);C.pFlags.is_outgoing&&(this.sendText({peerId:t,threadId:e.threadId,sendAsPeerId:e.sendAsPeerId,text:C.message,entities:C.entities,scheduleDate:e.scheduleDate,silent:e.silent,confirmedPaymentResult:e.confirmedPaymentResult}),s.splice(_--,1),--S)}if(!s.length)return Promise.resolve();const n=await this.apiManager.getConfig(),i=s.splice(n.forwarded_count_max,s.length-n.forwarded_count_max);e.dropCaptions&&(e.dropAuthor=!0);const o={},p=[],d=s.map(_=>{var L;const S=this.getMessageByPeer(a,_),D=this.generateOutgoingMessage(t,e);p.push(D.id);const C=["entities","media"],b=["invert_media"];e.dropAuthor||(D.fwd_from=this.generateForwardHeader(t,S),C.push("views","forwards"),D.fwd_from?.from_name&&t===this.appPeersManager.peerId&&delete D.from_id),(!e.dropCaptions||!S.media)&&C.push("message");const w=S.reply_to?.reply_to_msg_id,k=s.indexOf(w);if(w&&k!==-1){const R=p[k];D.reply_to={_:"messageReplyHeader",reply_to_msg_id:R,pFlags:{}}}C.forEach(R=>{D[R]=Oe(S[R])}),b.forEach(R=>{D.pFlags[R]=S.pFlags[R]});const B=D.media?.document;return B&&(["round","voice"].includes(B.type)&&(D.pFlags.media_unread=!0),B.sticker&&!this.rootScope.premium&&lr(B)&&(D.media.pFlags.nopremium=!0)),S.grouped_id&&(o[L=S.grouped_id]??(o[L]={tempId:""+ ++this.groupedTempId,messages:[]})).messages.push(D),S.restriction_reason&&(D.restriction_reason=S.restriction_reason),t===this.appPeersManager.peerId&&(D.saved_peer_id=this.appPeersManager.getOutputPeer(a)),D});for(const _ in o){const S=o[_];if(S.messages.length>1){S.messages.forEach(b=>{b.grouped_id=S.tempId});const D=Rs(this.getMessagesByGroupedId(_)),C=Rs(S.messages);D.factcheck&&(C.factcheck=D.factcheck)}}d.forEach(_=>{this.beforeMessageSending(_,{isScheduled:!!e.scheduleDate||void 0,sequential:!0,threadId:_.peerId===this.appPeersManager.peerId?a:void 0,confirmedPaymentResult:e.confirmedPaymentResult})});const c={};this.pendingAfterMsgs[t]&&(c.afterMessageId=this.pendingAfterMsgs[t].messageId);const f=e.confirmedPaymentResult?e.confirmedPaymentResult?.starsAmount*s.length:void 0,l=()=>this.apiManager.invokeApiAfter("messages.forwardMessages",{from_peer:this.appPeersManager.getInputPeerById(a),id:s.map(_=>H(_)),random_id:d.map(_=>_.random_id),to_peer:this.appPeersManager.getInputPeerById(t),with_my_score:e.withMyScore,silent:e.silent,schedule_date:e.scheduleDate,drop_author:e.dropAuthor,drop_media_captions:e.dropCaptions,send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,top_msg_id:e.threadId?this.appMessagesIdsManager.generateMessageId(e.threadId):void 0,allow_paid_stars:f,reply_to:this.getInputReplyTo({peerId:t,replyToMonoforumPeerId:e.replyToMonoforumPeerId,replyToMsgId:this.appPeersManager.isBotforum(t)?e.threadId:void 0})},c).then(_=>{this.log("forwardMessages updates:",_),this.apiUpdatesManager.processUpdateMessage(_),this.apiUpdatesManager.processPaidMessageUpdate({paidStars:f,wereStarsReserved:e.confirmedPaymentResult?.canUndo})},_=>{const S=this.repayRequestHandler.tryRegisterRequest({error:_,messageCount:d.length,paidStars:f,repayCallback:D=>{d.forEach(C=>{this.cancelPendingMessage(C.random_id)}),this.forwardMessagesInner({...e,mids:s,...D})},wereStarsReserved:e.confirmedPaymentResult?.canUndo});throw this.onMessagesSendError(d,_,S),_}).finally(()=>{this.pendingAfterMsgs[t]===c&&delete this.pendingAfterMsgs[t]}),m=()=>{d.forEach(_=>this.cancelPendingMessage(_.random_id))};if(this.pendingAfterMsgs[t]=c,e.confirmedPaymentResult?.canUndo){this.paidMessagesQueue.add(t,{send:()=>void l(),cancel:m}),i.length&&this.forwardMessages({...e,peerId:t,fromPeerId:a,mids:i});return}const g=[l()];return i.length&&g.push(this.forwardMessages({...e,peerId:t,fromPeerId:a,mids:i})),Promise.all(g).then(Se)}async forwardMessages(e){await this.checkSendOptions(e);const{peerId:t,fromPeerId:a,mids:s}=e,n=this.appPeersManager.isChannel(a)?a.toChatId():void 0,o=this.appMessagesIdsManager.splitMessageIdsByChannels(s,n).map(([p,{mids:d}])=>this.forwardMessagesInner({...e,peerId:t,fromPeerId:p?n.toPeerId(!0):this.getMessageByPeer(a,d[0]).peerId,mids:d}));return Promise.all(o).then(Se)}generateEmptyMessage(e){}onMessagesSendError(e,t,a){e.forEach(s=>{if(s.error===t)return;const{uploadingFileName:n}=s;if(n?.length>1&&n.forEach(i=>{this.apiFileManager.cancelDownload(i)}),this.modifyMessage(s,i=>{t?(i.error=t,i.repayRequest=a):(delete i.error,delete i.repayRequest)},void 0,!0),t){this.rootScope.dispatchEvent("message_error",{storageKey:s.storageKey,peerId:s.peerId,tempId:s.mid,error:t});const i=this.getDialogOnly(s.peerId);i&&this.rootScope.dispatchEvent("dialog_unread",{peerId:s.peerId,dialog:i})}})}onMessageModification(e,t){this.setMessageToStorage(t??this.getHistoryMessagesStorage(e.peerId),e)}updateMessageContextForDeletion(e,t,a){const s=this.getReferenceContextByMessage(e,!0);if(!s)return;let n=!1;const{searchStorages:i}=s;i?.forEach(o=>{!t&&o.filterMessage(e)||(n=!0,o.history.delete(e.mid),o.count&&(o.count=Math.max(0,o.count-1)),i.delete(o),this.historyMaxIdSubscribed.has(o.key)&&!a&&this.rootScope.dispatchEvent("history_delete_key",{historyKey:o.key,mid:e.mid}))}),n&&(i&&!i.size&&delete s.searchStorages,Object.keys(s).length||delete this.references[e.peerId+"_"+e.mid])}updateMessageContextForInserting(e){const t=qt(e),a=this.searchesStorage[e.peerId];if(!a)return;const n=this.getReferenceContextByMessage(e,!0)?.searchStorages;Qt([a[void 0],a[t]].filter(Boolean)).forEach(o=>{for(const p in o){const d=o[p];if(n?.has(d)||!d.filterMessage(e))continue;const{first:c,last:f}=d.history,{mid:l}=e;let m=!0;if(c.isEnd(_e.Both)&&c[0]===void 0)d.history.unshift(l);else if(c.isEnd(_e.Bottom)&&c[0]<l)d.history.unshift(l);else if(f.isEnd(_e.Top)&&f[f.length-1]>l)d.history.push(l);else{const g=d.history.findSliceOffset(l),_=g?.slice||[],S=_.findIndex(b=>l>b),D=_[S],C=_[S-1];D&&C?_.splice(S,0,l):(m=!1,this.log.error("cannot insert message for search filter",e,g,d))}m&&(d.onMidInsertion(l),++d.count),this.log("inserting message for search filter",e.mid,p)}})}updateMessageContext(e){this.updateMessageContextForDeletion(e),this.updateMessageContextForInserting(e)}modifyMessage(e,t,a,s){return e=t(e)||e,a!==!1&&this.onMessageModification(e,a),s||this.setDialogToStateIfMessageIsTop(e),this.updateMessageContext(e),e}iterateHistoryStorages(e,t){if(e){if("key"in e){t(e);return}for(const a in e){const s=e[a];this.iterateHistoryStorages(s,t)}}}mirrorAllMessages(e){const t={};[this.messagesStorageByPeerId,this.scheduledMessagesStorage].forEach(s=>{for(const n in s){const i=s[n];t[i.key]=Object.fromEntries(i.entries())}}),re.getInstance().invokeVoid("mirror",{name:"messages",value:t,accountNumber:this.getAccountNumber()},e);const a={};[this.historiesStorage,this.searchesStorage,this.threadsStorage].forEach(s=>{this.iterateHistoryStorages(s,n=>{a[n.key]=this.historyStorageAsTransferable(n)})}),re.getInstance().invokeVoid("mirror",{name:"historyStorage",value:a,accountNumber:this.getAccountNumber()},e)}getMessagesStorageByKey(e){const t=e.split("_"),a=+t[0];return t[1]==="scheduled"?this.getScheduledMessagesStorage(a):this.getHistoryMessagesStorage(a)}getMessageFromStorage(e,t){return e=this.getMessagesStorage(e),e?.type==="history"&&zt(t)&&(e=this.getGlobalHistoryMessagesStorage()),e?.get(t)}setMessageToStorage(e,t){e=this.getMessagesStorage(e);const{mid:a}=t;if(e?.type==="history"&&zt(a)&&e.peerId!==da){const s=this.getGlobalHistoryMessagesStorage();this.setMessageToStorage(s,t)}return e.type!=="grouped"&&re.getInstance().invokeVoid("mirror",{name:"messages",key:Rt(e.key,a),value:t,accountNumber:this.getAccountNumber()}),e?.set(a,t)}deleteMessageFromStorage(e,t){if(e?.type==="history"&&zt(t)&&e.peerId!==da){const a=this.getGlobalHistoryMessagesStorage();this.deleteMessageFromStorage(a,t)}return e.type!=="grouped"&&re.getInstance().invokeVoid("mirror",{name:"messages",key:Rt(e.key,t),accountNumber:this.getAccountNumber()}),e?.delete(t)}deleteMessageFromHistoryStorage(e,t){const a=this.getHistoryMessagesStorage(e);return this.deleteMessageFromStorage(a,t)}createMessageStorage(e,t){const a=new Map;return a.peerId=e,a.type=t,a.key=`${e}_${t}`,a}getHistoryMessagesStorage(e){var t;return(t=this.messagesStorageByPeerId)[e]??(t[e]=this.createMessageStorage(e,"history"))}getLogsMessagesStorage(e){var t;return(t=this.logsMessagesStorage)[e]??(t[e]=this.createMessageStorage(e,"logs"))}getGlobalHistoryMessagesStorage(){return this.getHistoryMessagesStorage(da)}getMessagesStorage(e){return typeof e=="object"?e:this.getMessagesStorageByKey(e)}getMessageById(e){return zt(e)?this.getMessageFromStorage(this.getGlobalHistoryMessagesStorage(),e):this.generateEmptyMessage(e)}getMessageByPeer(e,t){return e?this.getMessageFromStorage(this.getHistoryMessagesStorage(e),t):this.getMessageById(t)}getMessageByPeerOrFromLogs(e,t){return e?this.getMessageFromStorage(this.getHistoryMessagesStorage(e),t)||this.getMessageFromStorage(this.getLogsMessagesStorage(e),t):this.getMessageById(t)}getMessagePeer(e){return e?.peer_id&&this.appPeersManager.getPeerId(e.peer_id)||Ye}getDialogOnly(e){return this.dialogsStorage.getDialogOnly(e)}cantForwardDeleteMids(e,t){const a=this.getMessagesStorage(e);let s=!t.length,n=!t.length;for(const i of t){const o=this.getMessageFromStorage(a,i);if(s||(s=!this.canForward(o)),n||(n=!this.canDeleteMessage(o)),s&&n)break}return{cantForward:s,cantDelete:n}}reloadConversationOrTopic(e,t){t?this.dialogsStorage.getForumTopicById(e,t):this.reloadConversation(e)}reloadConversation(e,t){const a=this.log.bindPrefix("reloadConversation");let s;if(e!==void 0){const n=this.appPeersManager.getPeerId(e);let i=this.reloadConversationsPeers.get(n);if(i&&(t||!i.sentRequest)&&(s=i.promise),a.warn({peerId:n,throttled:!!s,sentRequest:i?.sentRequest}),s)return s;s=$(),this.reloadConversationsPeers.set(n,i={inputDialogPeer:this.appPeersManager.getInputDialogPeerById(e),promise:s})}return this.reloadConversationsPromise?s||this.reloadConversationsPromise:(a("creating throttled promise"),this.reloadConversationsPromise=qe(0).then(()=>{const n=new Map(this.reloadConversationsPeers),i=[...n.values()].map(d=>(d.sentRequest=!0,d.inputDialogPeer)),o=()=>{a("fullfilling left",n);for(const[d,c]of n)this.reloadConversationsPeers.get(d)===c&&this.reloadConversationsPeers.delete(d),c.promise.resolve(void 0)};return(async()=>{for(;;){const d=await this.apiManager.invokeApi("messages.getPeerDialogs",{peers:i},{floodMaxTimeout:1/0}),c=this.apiUpdatesManager.updatesState,{state:f}=d;if(c.pts&&c.pts!==f.pts){this.log.warn("current pts is different, will try again",c.pts,f.pts),await qe(500);continue}return d}})().then(d=>{a("result",d);for(const[c,f]of n)this.reloadConversationsPeers.get(c)===f&&this.reloadConversationsPeers.delete(c);this.dialogsStorage.applyDialogs(d),d.dialogs.forEach(c=>{const f=c.peerId;if(!f)return;n.get(f).promise.resolve(c),n.delete(f)})},d=>{a.error(d)}).then(()=>{o(),this.reloadConversationsPromise=null,this.reloadConversationsPeers.size&&this.reloadConversation()})}),s||this.reloadConversationsPromise)}doFlushHistory({peerId:e,justClear:t,revoke:a,threadOrSavedId:s,participantPeerId:n,monoforumThreadId:i}){const o=this.appPeersManager.isSavedDialog(e,s);let p;const d=c=>{if(this.apiUpdatesManager.processLocalUpdate({_:"updatePts",pts:c.pts,pts_count:c.pts_count}),!c.offset){let f;if(i?f=l=>this.appPeersManager.getPeerId(l.saved_peer_id)===i:n?f=l=>l.fromId===n:o?f=l=>{const m=l.saved_peer_id;return m?this.appPeersManager.getPeerId(m)===s:l.fromId===this.appPeersManager.peerId}:this.appPeersManager.isBotforum(e)&&s&&(f=l=>qt(l,{isBotforum:!0})===s),f){const l=this.getHistoryMessagesStorage(e),m=[];for(const[g,_]of l)f(_)&&m.push(g);this.apiUpdatesManager.processLocalUpdate(e.isUser()?{_:"updateDeleteMessages",messages:m,pts:void 0,pts_count:void 0}:{_:"updateDeleteChannelMessages",channel_id:e.toChatId(),messages:m,pts:void 0,pts_count:void 0})}return!0}return this.doFlushHistory({peerId:e,justClear:t,revoke:a,threadOrSavedId:s,monoforumThreadId:i})};return i?p=this.apiManager.invokeApiSingleProcess({method:"messages.deleteSavedHistory",params:{parent_peer:this.appPeersManager.getInputPeerById(e),peer:this.appPeersManager.getInputPeerById(i),max_id:0},processResult:d}):n?p=this.apiManager.invokeApiSingleProcess({method:"channels.deleteParticipantHistory",params:{channel:this.appChatsManager.getChannelInput(e.toChatId()),participant:this.appPeersManager.getInputPeerById(n)},processResult:d}):s?o?p=this.apiManager.invokeApiSingleProcess({method:"messages.deleteSavedHistory",params:{peer:this.appPeersManager.getInputPeerById(s),max_id:0},processResult:d}):p=this.apiManager.invokeApiSingleProcess({method:"messages.deleteTopicHistory",params:{peer:this.appPeersManager.getInputPeerById(e),top_msg_id:H(s)},processResult:d}):p=this.apiManager.invokeApiSingleProcess({method:"messages.deleteHistory",params:{just_clear:t,revoke:a,peer:this.appPeersManager.getInputPeerById(e),max_id:0},processResult:d}),p}async flushHistory({peerId:e,justClear:t,revoke:a,threadOrSavedId:s,monoforumThreadId:n}){if(this.appPeersManager.isChannel(e)&&!s&&!n){const o=await this.getHistory({peerId:e,offsetId:0,limit:1}),p=e.toChatId(),d=o.history[0]||0;return this.apiManager.invokeApiSingle("channels.deleteHistory",{channel:this.appChatsManager.getChannelInput(p),max_id:H(d)}).then(c=>(c&&this.apiUpdatesManager.processLocalUpdate({_:"updateChannelAvailableMessages",channel_id:p,available_min_id:d}),c))}return this.doFlushHistory({peerId:e,justClear:t,revoke:a,threadOrSavedId:s,monoforumThreadId:n}).then(()=>{if(n){this.monoforumDialogsStorage.dropDeletedDialogs(e,[n]);return}if(s||this.flushStoragesByPeerId(e),t)this.rootScope.dispatchEvent("dialog_flush",{peerId:e,dialog:this.getDialogOnly(e)});else{const i=this.getTypingKey(e,s);if(delete this.notificationsToHandle[i],delete this.typings[i],!s){const o=this.reloadConversationsPeers.get(e);o&&(this.reloadConversationsPeers.delete(e),o.promise.resolve(void 0))}this.dialogsStorage.dropDialogOnDeletion(e,s)}})}flushStoragesByPeerId(e){[this.historiesStorage[e],this.searchesStorage[e],this.threadsStorage[e]].forEach(a=>{this.iterateHistoryStorages(a,s=>{re.getInstance().invokeVoid("mirror",{name:"historyStorage",key:Rt(s.key,"delete"),accountNumber:this.getAccountNumber()})})}),[this.historiesStorage,this.threadsStorage,this.searchesStorage,this.pendingAfterMsgs,this.pendingTopMsgs].forEach(a=>{delete a[e]});for(const a in this.pinnedMessages)(+a===e||a.startsWith(e+"_"))&&delete this.pinnedMessages[a];const t=this.needSingleMessages.get(e);if(t){for(const[a,s]of t)s.resolve(this.generateEmptyMessage(a));t.clear()}[this.messagesStorageByPeerId,this.scheduledMessagesStorage].forEach(a=>{const s=a[e];if(s){if(s.type==="history"&&(s.forEach((n,i)=>{delete this.references[e+"_"+i]}),!this.appPeersManager.isChannel(e))){const n=this.getGlobalHistoryMessagesStorage();s.forEach((i,o)=>{this.deleteMessageFromStorage(n,o)})}s.clear(),delete a[e]}}),this.dialogsStorage.flushForumTopicsCache(e)}hidePinnedMessages(e){return Promise.all([this.appStateManager.getState(),this.getPinnedMessage(e)]).then(([t,a])=>{t.hiddenPinnedMessages[e]=a.maxId,this.rootScope.dispatchEvent("peer_pinned_hidden",{peerId:e,maxId:a.maxId})})}getPinnedMessagesKey(e,t){return e+(t?"_"+t:"")}getPinnedMessage(e,t){var s,n;const a=(s=this.pinnedMessages)[n=this.getPinnedMessagesKey(e,t)]??(s[n]={});return a.promise?a.promise:a.maxId?Promise.resolve(a):a.promise=Promise.resolve(this.getHistory({peerId:e,inputFilter:{_:"inputMessagesFilterPinned"},offsetId:0,limit:1,threadId:t})).then(i=>(a.count=i.count,a.maxId=i.history[0],a)).finally(()=>{delete a.promise})}getPinnedMessagesCount(e,t){return this.pinnedMessages[this.getPinnedMessagesKey(e,t)]?.count}getPinnedMessagesMaxId(e,t){return this.pinnedMessages[this.getPinnedMessagesKey(e,t)]?.maxId}updatePinnedMessage(e,t,a,s,n){return this.apiManager.invokeApi("messages.updatePinnedMessage",{peer:this.appPeersManager.getInputPeerById(e),unpin:a,silent:s,pm_oneside:n,id:H(t)}).then(i=>{this.apiUpdatesManager.processUpdateMessage(i)})}unpinAllMessages(e){return this.apiManager.invokeApiSingle("messages.unpinAllMessages",{peer:this.appPeersManager.getInputPeerById(e)}).then(t=>(this.apiUpdatesManager.processLocalUpdate({_:"updatePts",pts:t.pts,pts_count:t.pts_count}),t.offset?this.unpinAllMessages(e):(this.getHistoryMessagesStorage(e).forEach(s=>{s.pFlags.pinned&&delete s.pFlags.pinned}),this.rootScope.dispatchEvent("peer_pinned_messages",{peerId:e,unpinAll:!0}),delete this.pinnedMessages[this.getPinnedMessagesKey(e)],!0)))}getGroupedText(e){const t=this.groupedMessagesStorage[e];return Fd(Array.from(t.values()))}getGroupsFirstMessage(e){if(!e?.grouped_id)return e;const t=this.groupedMessagesStorage[e.grouped_id];let a=Number.MAX_SAFE_INTEGER;for(const[s,n]of t)n.mid<a&&(a=n.mid);return this.getMessageFromStorage(t,a)}getMidsByGroupedId(e,t="asc"){return Qn(this.groupedMessagesStorage[e],t)}getMessagesByGroupedId(e){const t=this.getMidsByGroupedId(e,"asc"),a=this.groupedMessagesStorage[e];return t.map(s=>this.getMessageFromStorage(a,s))}getMidsByMessage(e){return e?e.grouped_id?this.getMidsByGroupedId(e.grouped_id):[e.mid]:[]}filterMessages(e,t){const a=[];if(e.grouped_id){const s=this.groupedMessagesStorage[e.grouped_id];for(const[n,i]of s)t(i)&&a.push(i)}else t(e)&&a.push(e);return a}generateTempMessageId(e,t,a){if(!t){const o=this.getDialogOnly(e),p=this.historiesStorage[e];t=(o?.top_message??p?.maxId)||0}const s=this.tempMids[e];s&&s>t&&!a&&(t=s);const n=this.appPeersManager.isChannel(e)?e.toChatId():void 0,i=this.appMessagesIdsManager.generateTempMessageId(t,n);return(!s||i>s)&&(this.tempMids[e]=i),i}setMessageUnreadByDialog(e,t=this.getDialogOnly(e.peerId)){xe(t)||t&&e.mid&&e.mid>t[e.pFlags.out?"read_outbox_max_id":"read_inbox_max_id"]&&(e.pFlags.unread=!0)}saveMessage(e,t={}){var D,C;if(!e||e._==="messageEmpty")return;e.pFlags??(e.pFlags={});const a=!!e.peerId,s=this.getMessagePeer(e),n=t.storage||this.getHistoryMessagesStorage(s),i=e.peer_id._==="peerChannel",o=i&&this.appChatsManager.isBroadcast(s.toChatId()),p=e._==="message",d=i?s.toChatId():void 0;t.isOutgoing&&(e.pFlags.is_outgoing=!0);const c=this.appMessagesIdsManager.generateMessageId(e.id,d);if(e.mid=c,p){if(t.isScheduled&&(e.pFlags.is_scheduled=!0),e.grouped_id){const b=(D=this.groupedMessagesStorage)[C=e.grouped_id]??(D[C]=this.createMessageStorage(s,"grouped"));this.setMessageToStorage(b,e)}e.via_bot_id&&(e.viaBotId=e.via_bot_id)}const f=t.isOutgoing?void 0:{type:"message",peerId:s,messageId:c},l=e.reply_to;if(l&&l._==="messageReplyHeader"){const b=l.reply_to_peer_id?.channel_id||d;l.reply_to_msg_id&&(l.reply_to_msg_id=e.reply_to_mid=this.appMessagesIdsManager.generateMessageId(l.reply_to_msg_id,b),this.deletedMessages.has(`${s}_${l.reply_to_msg_id}`)&&(l.reply_to_msg_deleted=!0)),l.reply_to_top_id&&(l.reply_to_top_id=this.appMessagesIdsManager.generateMessageId(l.reply_to_top_id,b)),this.saveMessageMedia(l,f,t.isScheduled)}const m=p&&e.replies;m&&(m.max_id&&(m.max_id=this.appMessagesIdsManager.generateMessageId(m.max_id,m.channel_id)),m.read_max_id&&(m.read_max_id=this.appMessagesIdsManager.generateMessageId(m.read_max_id,m.channel_id))),a||(e.date-=this.timeManager.getServerTimeOffset());const g=this.appPeersManager.peerId,_=p&&e.fwd_from;if(e.peerId=s,s===g){if(p&&!e.saved_peer_id){let w;_?_.saved_from_peer?e.saved_peer_id=_.saved_from_peer:_.from_id?w=g:_.from_name?w=Uo:w=g:w=g,e.saved_peer_id||(e.saved_peer_id=this.appPeersManager.getOutputPeer(w))}const b=_?.saved_from_id||_?.from_id;e.fromId=_?b&&!Nd(_)?this.appPeersManager.getPeerId(b):Ye:g}else e.from_id?e.fromId=this.appPeersManager.getPeerId(e.from_id):e.fromId=s;if(this.setMessageUnreadByDialog(e),_){_.saved_from_msg_id&&(_.saved_from_msg_id=this.appMessagesIdsManager.generateMessageId(_.saved_from_msg_id,_.saved_from_peer.channel_id)),_.channel_post&&(_.channel_post=this.appMessagesIdsManager.generateMessageId(_.channel_post,_.from_id.channel_id));const b=_.saved_from_peer||_.from_id,w=_.saved_from_msg_id||_.channel_post;if(b&&w){const k=this.appPeersManager.getPeerId(b),B=this.appMessagesIdsManager.generateMessageId(w,b.channel_id);e.savedFrom=k+"_"+B}e.fwdFromId=this.appPeersManager.getPeerId(_.from_id),a||(_.date-=this.timeManager.getServerTimeOffset())}const S=this.saveMessageMedia(e,f,t.isScheduled);if(p&&S&&(e.media={_:"messageMediaUnsupported"},e.message="",delete e.entities,delete e.totalEntities),!p&&e.action){const b=e.action,w=e.fromId===this.appUsersManager.getSelf().id?"You":"";let k,B;switch(b.photo&&(b.photo=this.appPhotosManager.savePhoto(b.photo,f)),"document"in b&&(b.document=this.appDocsManager.saveDoc(b.document,f)),b._){case"messageActionChatEditPhoto":b.photo?.video_sizes?b._=o?"messageActionChannelEditVideo":"messageActionChatEditVideo":o&&(b._="messageActionChannelEditPhoto");break;case"messageActionGroupCall":{this.appGroupCallsManager.saveGroupCall(b.call);let L;b.duration===void 0?L="started":L="ended",o||(L+="_by"+w),b.type=L;break}case"messageActionChatEditTitle":o&&(b._="messageActionChannelEditTitle");break;case"messageActionChatDeletePhoto":o&&(b._="messageActionChannelDeletePhoto");break;case"messageActionChatAddUser":b.users.length===1?(b.user_id=b.users[0],e.fromId===b.user_id&&(i?b._="messageActionChatJoined"+w:b._="messageActionChatReturn"+w)):b.users.length>1&&(b._="messageActionChatAddUsers");break;case"messageActionChatDeleteUser":e.fromId===b.user_id&&(b._="messageActionChatLeave"+w);break;case"messageActionChannelMigrateFrom":k=b.chat_id.toPeerId(!0),B=s;break;case"messageActionChatMigrateTo":k=s,B=b.channel_id.toPeerId(!0);break;case"messageActionHistoryClear":e.clear_history=!0,delete e.pFlags.out,delete e.pFlags.unread;break;case"messageActionPhoneCall":b.type=(b.pFlags.video?"video_":"")+(b.duration!==void 0?e.pFlags.out?"out_":"in_":"")+(b.duration!==void 0?"ok":b.reason._==="phoneCallDiscardReasonMissed"?"missed":"cancelled");break;case"messageActionPrizeStars":b.giveaway_msg_id=this.appMessagesIdsManager.generateMessageId(b.giveaway_msg_id,this.appPeersManager.getPeerId(b.boost_peer).toChatId());break}k&&B&&!this.getMigration(k)&&this.migrateChecks(k,B)}return p&&e.message.length&&!e.totalEntities&&this.wrapMessageEntities(e),this.setMessageToStorage(n,e),e}saveMessages(e,t={}){return!e||e.saved||(e.saved=!0,e.forEach((a,s,n)=>{n[s]=this.saveMessage(a,t)})),e}saveMessageMedia(e,t,a){const s="media"in e?"media":"reply_media",n=e[s];if(!n)return;let i=!1;switch(n._){case"messageMediaEmpty":{delete e[s];break}case"messageMediaPhoto":{n.ttl_seconds?i=!0:n.photo=this.appPhotosManager.savePhoto(n.photo,t),n.photo||delete e[s];break}case"messageMediaPoll":{const o=this.appPollsManager.savePoll(n.poll,n.results,e.peerId&&e);n.poll=o.poll,n.results=o.results;break}case"messageMediaDocument":{if(n.ttl_seconds)i=!0;else{const o=n.document;n.document=this.appDocsManager.saveDoc(o,t,n.alt_documents),!n.document&&o._!=="documentEmpty"&&(i=!0)}break}case"messageMediaWebPage":{const o=e.peerId?this.appWebPagesManager.getMessageKeyForPendingWebPage(e.peerId,e.mid,a):void 0;n.webpage=this.appWebPagesManager.saveWebPage(n.webpage,o,t),n.webpage||delete e[s];break}case"messageMediaInvoice":{n.photo=this.appWebDocsManager.saveWebDocument(n.photo);const o=n.extended_media;if(o?._==="messageExtendedMedia"){const p=o.media;p.photo=this.appPhotosManager.savePhoto(p.photo,t),p.document=this.appDocsManager.saveDoc(p.document,t)}break}case"messageMediaStory":{const o=this.appStoriesManager.getPeerStoriesCache(this.appPeersManager.getPeerId(n.peer));n.story=this.appStoriesManager.saveStoryItems([n.story],o)[0];break}case"messageMediaGiveawayResults":{n.launch_msg_id=this.appMessagesIdsManager.generateMessageId(n.launch_msg_id,n.channel_id);break}case"messageMediaPaidMedia":{n.extended_media.forEach(o=>{o._==="messageExtendedMedia"&&this.saveMessageMedia(o,t,a)});break}case"messageMediaUnsupported":{i=!0;break}}return i}saveApiResult(e){this.appPeersManager.saveApiPeers(e),this.saveMessages(e.messages)}async getFirstMessageToEdit({peerId:e,threadId:t,forReply:a,mid:s,up:n}){const o=this.getHistoryStorage(e,t).history.slice;if(!o.isEnd(_e.Bottom))return;let p=[...o.slice()];if(s){const f=p.indexOf(s);if(f===-1)return;n?p=p.slice(f+1):p=p.slice(0,f).reverse(),ht(p,(l,m)=>{const g=this.getMessageByPeer(e,l);this.getGroupsFirstMessage(g)!==g&&p.splice(m,1)})}if(!p.length)return;let d;const c=this.appPeersManager.peerId;for(const f of p){const l=this.getMessageByPeer(e,f);if((a?!l.pFlags.is_outgoing:c===e?l.fromId===c:l.pFlags.out)&&(a||await this.canEditMessage(l,"text"))){d=this.getGroupsFirstMessage(l);break}}return d}wrapMessageEntities(e){if("message"in e){const{message:t,totalEntities:a}=ei(e.message,e.entities);e.message=t,e.totalEntities=a}else{const{message:t,totalEntities:a}=ei(e.text,e.entities);e.text=t,e.entities=a}}reportMessages(e,t,a,s){return this.apiManager.invokeApiSingle("messages.report",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(n=>H(n)),option:a,message:s})}reportSpamMessages(e,t,a){return this.apiManager.invokeApiSingle("channels.reportSpam",{channel:this.appChatsManager.getChannelInput(e.toChatId()),participant:this.appPeersManager.getInputPeerById(t),id:a.map(s=>H(s))})}async unblockBot(e){await this.appProfileManager.isUserBlocked(e)&&await this.appUsersManager.toggleBlock(e.toPeerId(!1),!1)}async startBot(e,t,a){const s=t?t.toPeerId(!0):e.toPeerId();if(t||await this.unblockBot(e),a){const i=Et();return this.apiManager.invokeApi("messages.startBot",{bot:this.appUsersManager.getUserInput(e),peer:this.appPeersManager.getInputPeerById(s),random_id:i,start_param:a}).then(o=>{this.apiUpdatesManager.processUpdateMessage(o)})}const n="/start";if(t){let i;return this.appChatsManager.isChannel(t)?i=this.appChatsManager.inviteToChannel(t,[e]):i=this.appChatsManager.addChatUser(t,e,0),i.catch(o=>{if(o?.type=="USER_ALREADY_PARTICIPANT"){o.handled=!0;return}throw o}).then(()=>this.sendText({peerId:s,text:n+"@"+this.appPeersManager.getPeerUsername(e.toPeerId())}))}return this.sendText({peerId:s,text:n})}editPeerFolders(e,t){this.apiManager.invokeApi("folders.editPeerFolders",{folder_peers:e.map(a=>({_:"inputFolderPeer",peer:this.appPeersManager.getInputPeerById(a),folder_id:t}))}).then(a=>{const s=e[0];e.length===1&&t===Qe&&this.appProfileManager.refreshPeerSettingsIfNeeded(s),this.apiUpdatesManager.processUpdateMessage(a)})}getFilter(e){return this.filtersStorage.getFilter(e)}async toggleDialogPin(e){let{peerId:t,topicOrSavedId:a,filterId:s}=e;if(s!==void 0&&!Ae.has(s))return this.filtersStorage.toggleDialogPin(t,s);const n=this.dialogsStorage.getAnyDialog(t,a);if(!n)throw void 0;const i=xe(n),o=Ue(n),p=nt(n);s??(s=this.dialogsStorage.getDialogFilterId(n));const d=n.pFlags?.pinned?void 0:!0;if(d){let f;i?f="savedPin":o?f="topicPin":f=s===Pt?"folderPin":"pin";const l=await this.apiManager.getLimit(f);if(this.dialogsStorage.getPinnedOrders(s).length>=l)throw ne(p?"PINNED_DIALOGS_TOO_MUCH":"PINNED_TOO_MUCH")}if(o)return this.updatePinnedForumTopic(t,a,d);let c;return i?c=this.apiManager.invokeApi("messages.toggleSavedDialogPin",{peer:this.appPeersManager.getInputDialogPeerById(a),pinned:d}):c=this.apiManager.invokeApi("messages.toggleDialogPin",{peer:this.appPeersManager.getInputDialogPeerById(t),pinned:d}),c.then(()=>{const f=d?{pinned:d}:{},l=this.appPeersManager.getDialogPeer(i?a:t);this.apiUpdatesManager.saveUpdate(i?{_:"updateSavedDialogPinned",peer:l,pFlags:f}:{_:"updateDialogPinned",peer:l,folder_id:s,pFlags:f})})}async markDialogUnread({peerId:e,read:t,monoforumThreadId:a}){const s=a?this.monoforumDialogsStorage.getDialogByParent(e,a):this.getDialogOnly(e);if(!s)return Promise.reject();if(this.appPeersManager.isForum(e)&&s._==="dialog"&&!s.pFlags.view_forum_as_messages&&(t||await this.dialogsStorage.getForumUnreadCount(e))){const i=this.dialogsStorage.getFolder(e);for(const o of i.unreadPeerIds){const p=this.dialogsStorage.getForumTopic(e,o);this.readHistory({peerId:e,maxId:p.top_message,threadId:o,force:!0})}return}const n=t||s.pFlags?.unread_mark?void 0:!0;if(!n&&s.unread_count){const i=this.readHistory({peerId:e,monoforumThreadId:a,maxId:s.top_message,force:!0});if(!s.pFlags.unread_mark)return i}return this.apiManager.invokeApi("messages.markDialogUnread",{parent_peer:a?this.appPeersManager.getInputPeerById(e):void 0,peer:a?this.appPeersManager.getInputDialogPeerById(a):this.appPeersManager.getInputDialogPeerById(e),unread:n}).then(()=>{const i=n?{unread:n}:{};this.onUpdateDialogUnreadMark({_:"updateDialogUnreadMark",peer:this.appPeersManager.getDialogPeer(e),saved_peer_id:a?this.appPeersManager.getOutputPeer(a):void 0,pFlags:i})})}migrateChecks(e,t){if(!this.getMigration(e)&&this.appChatsManager.hasChat(t.toChatId())){const a=this.appChatsManager.getChat(e.toChatId());a?.migrated_to&&a.migrated_to.channel_id===t.toChatId()&&(this.migratedFromTo[e]=t,this.migratedToFrom[t]=e,this.rootScope.dispatchEvent("dialog_migrate",{migrateFrom:e,migrateTo:t}),this.dialogsStorage.dropDialogWithEvent(e))}}canMessageBeEdited(e,t){if(e?.pFlags?.is_outgoing)return!1;const a=["messageMediaPhoto","messageMediaDocument","messageMediaWebPage","messageMediaToDo"];return t==="poll"&&a.push("messageMediaPoll"),!(!e||e._!=="message"||e.fwd_from||e.via_bot_id||e.media&&a.indexOf(e.media._)===-1||e.fromId&&this.appUsersManager.isBot(e.fromId)||e.media?._==="messageMediaDocument"&&(e.media.document.sticker||e.media.document.type==="round"))}async canEditMessage(e,t="text"){if(!e||!this.canMessageBeEdited(e,t))return!1;if(this.getMessagePeer(e)===this.appUsersManager.getSelf().id)return!0;const{peerId:a}=e,s=this.appPeersManager.isBroadcast(a)?this.appChatsManager.hasRights(a.toChatId(),"edit_messages"):(a.isAnyChat()&&t==="text"?!this.getMigration(e.peerId)?.next&&(this.appChatsManager.hasRights(a.toChatId(),"send_plain")||this.appChatsManager.hasRights(a.toChatId(),"send_media")):!0)&&e.pFlags.out,n=this.appPeersManager.isMonoforum(e.peerId)&&!this.appPeersManager.canManageDirectMessages(e.peerId);return!(!s||(e.peer_id._!=="peerChannel"||n)&&e.date<te(!0)-(await this.apiManager.getConfig()).edit_time_limit&&e.media?._!=="messageMediaPoll")}canDeleteMessage(e){return e&&(e.peerId.isUser()||e.pFlags.out||this.appChatsManager.getChat(e.peerId.toChatId())._==="chat"||this.appChatsManager.hasRights(e.peerId.toChatId(),"delete_messages"))&&(!e.pFlags.is_outgoing||!!e.error)}getReplyKeyboard(e){return this.getHistoryStorage(e).replyMarkup}mergeReplyKeyboard(e,t){if(!t)return!1;const a=t.reply_markup;if(!a&&!t.pFlags?.out&&!t.action||a?._==="replyInlineMarkup")return!1;const s=e.replyMarkup;if(a)return s&&s.mid>=t.mid||a.pFlags.selective?!1:(e.maxOutId&&t.mid<e.maxOutId&&a.pFlags.single_use&&(a.pFlags.hidden=!0),a.mid=t.mid,a._!=="replyKeyboardHide"&&(a.fromId=this.appPeersManager.getPeerId(t.from_id||t.peer_id)),e.replyMarkup=a,!0);if(t.pFlags.out)if(s){if(s.pFlags.single_use&&!s.pFlags.hidden&&(t.mid>s.mid||t.pFlags.is_outgoing)&&t.message)return s.pFlags.hidden=!0,!0}else(!e.maxOutId||t.mid>e.maxOutId)&&(e.maxOutId=t.mid);return t.action?._==="messageActionChatDeleteUser"&&(s?t.action.user_id===s.fromId:this.appUsersManager.isBot(t.action.user_id))?(e.replyMarkup={_:"replyKeyboardHide",mid:t.mid,pFlags:{}},!0):!1}getReferenceContext(e,t,a){const s=e+"_"+t;let n=this.references[s];return!n&&!a&&(n=this.references[s]={}),n}getReferenceContextByMessage(e,t){return this.getReferenceContext(e.peerId,e.mid,t)}getSearchStorage(e){var i,o,p,d,c,f;const t={...e,type:"search"};if(ti(e)==="uncached")return this.createHistoryStorage(t);const a=ur(t),s=gr(t);let n;return e.isCacheableSearch?n=(i=this.searchesStorage)[s]??(i[s]=this.createHistoryStorage(t)):n=(f=(d=(o=this.searchesStorage)[p=e.peerId]??(o[p]={}))[c=e.threadId||e.monoforumThreadId]??(d[c]={}))[a]??(f[a]=this.createHistoryStorage(t)),e.isCacheableSearch||n.originalInsertSlice||(n.originalInsertSlice=n.history.insertSlice.bind(n.history),n.history.insertSlice=(...l)=>{const m=n.originalInsertSlice(...l);return m&&l[0].forEach(g=>{n.onMidInsertion(g)}),m},n.filterMessages=l=>Yn({inputFilter:e.inputFilter._,limit:l.length,messages:l,savedReaction:e.savedReaction}),n.filterMessage=l=>!!n.filterMessages([l]).length,n.onMidInsertion=l=>{const m=this.getReferenceContext(e.peerId,l);(m.searchStorages??(m.searchStorages=new Set)).add(n)}),n}async getSearchCounters(e,t,a=!0,s){if(e=this.appPeersManager.getPeerMigratedTo(e)||e,await this.appPeersManager.isPeerRestricted(e))return Promise.resolve(t.map(c=>({_:"messages.searchCounter",pFlags:{},filter:c,count:0})));const n=this.getHistoryType(e,{threadId:s}),i=this.getMigration(e),o="messages.getSearchCounters",p=(a?this.apiManager.invokeApiCacheable:this.apiManager.invokeApi).bind(this.apiManager),d=p(o,{peer:this.appPeersManager.getInputPeerById(e),filters:t,top_msg_id:s&&n!==3?H(s):void 0,saved_peer_id:n===3?this.appPeersManager.getInputPeerById(s):void 0},{cacheSeconds:6e4});if(i){const c=p(o,{peer:this.appPeersManager.getInputPeerById(i.prev),filters:t});return Promise.all([d,c]).then(([f,l])=>f.map((g,_)=>({...g,count:g.count+l[_].count})))}return d}filterMessagesByInputFilterFromStorage(e,t,a,s){const n=this.getMessagesStorage(a);return Yn({inputFilter:e,messages:t.map(i=>n.get(i)),limit:s})}subscribeRepliesThread(e,t){const a=e+"_"+t;for(const s in this.threadsToReplies)if(this.threadsToReplies[s]===a)return;this.getDiscussionMessage(e,t)}generateThreadServiceStartMessage(e){const{peerId:t,mid:a}=e,s=t+"_"+a,n=this.threadsServiceMessagesIdsStorage[s];if(n)return n;const i=Math.max(...this.getMidsByMessage(e)),o={_:"messageService",pFlags:{is_single:!0},id:this.generateTempMessageId(t,i,!0),date:e.date,from_id:{_:"peerUser",user_id:Ye},peer_id:e.peer_id,action:{_:"messageActionDiscussionStarted"},reply_to:this.generateReplyHeader(t,this.getInputReplyTo({replyToMsgId:a,threadId:a}))};return this.saveMessages([o],{isOutgoing:!0}),this.threadsServiceMessagesIdsStorage[s]=o.mid}getThreadServiceMessageId(e,t){return this.threadsServiceMessagesIdsStorage[e+"_"+t]}getDiscussionMessage(e,t){return this.apiManager.invokeApiSingle("messages.getDiscussionMessage",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t)}).then(a=>{this.saveApiResult(a);const s=this.getMessageWithReplies(a.messages[0]),n=s.peerId+"_"+s.mid,i=s.peerId.toChatId();this.log("got discussion message",e,t,a,s.peerId,s.mid);const o=this.getHistoryStorage(s.peerId,s.mid),p=a.max_id=this.appMessagesIdsManager.generateMessageId(a.max_id,i)||0;a.read_inbox_max_id=o.readMaxId=this.appMessagesIdsManager.generateMessageId(a.read_inbox_max_id??s.mid,i),a.read_outbox_max_id=o.readOutboxMaxId=this.appMessagesIdsManager.generateMessageId(a.read_outbox_max_id,i)||0;const d=o.history.first;return o.maxId&&o.maxId<p&&d.isEnd(_e.Bottom)&&d.unsetEnd(_e.Bottom),o._maxId=p,this.threadsToReplies[n]=e+"_"+t,s})}handleNewMessage(e){this.rootScope.dispatchEvent("history_multiappend",e)}scheduleHandleNewDialogs(e,t){if(e!==void 0){let a=this.newDialogsToHandle.get(e);a||this.newDialogsToHandle.set(e,a={});const s=typeof t=="object";if(!t||s&&nt(t))a.dialog=t;else{const n=s?Mt(t):t,i=this.getHistoryType(e,{threadId:n})===3?a.saved??(a.saved=new Map):a.topics??(a.topics=new Map);s?i.set(n,t):i.set(n,void 0)}}return this.newDialogsHandlePromise??(this.newDialogsHandlePromise=qe(0).then(()=>{this.newDialogsHandlePromise=void 0,this.handleNewDialogs()}))}async deleteMessagesInner(e,t,a,s){let n;if(e&&!s){const c=this.appChatsManager.getChat(e);if(!c.pFlags.creator&&!c.admin_rights?.pFlags?.delete_messages&&(t=t.filter(f=>!!this.getMessageByPeer(e.toPeerId(!0),f).pFlags.out),!t.length))return}const i=await this.apiManager.getConfig(),o=t.splice(i.forwarded_count_max,t.length-i.forwarded_count_max),p=t.map(c=>{const f=H(c);return this.appMessagesIdsManager.generateMessageId(f,e)===c&&f}).filter(Boolean);e?n=this.apiManager.invokeApi("channels.deleteMessages",{channel:this.appChatsManager.getChannelInput(e),id:p}).then(c=>{this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:e,messages:t,pts:c.pts,pts_count:c.pts_count})}):n=this.apiManager.invokeApi("messages.deleteMessages",{revoke:a,id:p}).then(c=>{this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteMessages",messages:t,pts:c.pts,pts_count:c.pts_count})});const d=[n];return o.length&&d.push(this.deleteMessagesInner(e,o,a,!0)),Promise.all(d).then(Se)}deleteMessages(e,t,a){const s=this.appPeersManager.isChannel(e)?e.toChatId():void 0,i=this.appMessagesIdsManager.splitMessageIdsByChannels(t,s).map(([o,{mids:p}])=>this.deleteMessagesInner(o,p,a));return Promise.all(i).then(Se)}readHistory({peerId:e,maxId:t=0,threadId:a,monoforumThreadId:s,force:n=!1}){if(this.log("readHistory:",e,t,a),!this.getReadMaxIdIfUnread(e,a)){if(a&&!n){const d=this.dialogsStorage.getForumTopic(e,a);d&&!H(d.read_inbox_max_id)&&(n=!0)}if(!n){const d=this.appChatsManager.isForum(e.toChatId())&&a?this.dialogsStorage.getForumTopic(e,a):this.appPeersManager.isMonoforum(e)&&s?this.monoforumDialogsStorage.getDialogByParent(e,s):this.getDialogOnly(e);d&&this.isDialogUnread(d)&&(n=!0)}if(!n)return this.log("readHistory: isn't unread"),Promise.resolve()}const o=this.getHistoryStorage(e,a||s);if(o.triedToReadMaxId>=t)return Promise.resolve();let p;return s?(o.readPromise||(p=this.apiManager.invokeApi("messages.readSavedHistory",{parent_peer:this.appPeersManager.getInputPeerById(e),peer:this.appPeersManager.getInputPeerById(s),max_id:H(t)})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadMonoForumInbox",read_max_id:t,channel_id:e.toChatId(),saved_peer_id:this.appPeersManager.getOutputPeer(s)})):a?(o.readPromise||(p=this.apiManager.invokeApi("messages.readDiscussion",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(a),read_max_id:H(t)})),e.isAnyChat()?this.apiUpdatesManager.processLocalUpdate({_:"updateReadChannelDiscussionInbox",channel_id:e.toChatId(),top_msg_id:a,read_max_id:t}):this.apiUpdatesManager.processLocalUpdate({_:"updateReadHistoryInbox",peer:this.appPeersManager.getOutputPeer(e),top_msg_id:a,max_id:t,still_unread_count:0,pts:void 0,pts_count:void 0})):this.appPeersManager.isChannel(e)?(o.readPromise||(p=this.apiManager.invokeApi("channels.readHistory",{channel:this.appChatsManager.getChannelInput(e.toChatId()),max_id:H(t)})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadChannelInbox",max_id:t,channel_id:e.toChatId(),still_unread_count:void 0,pts:void 0})):(o.readPromise||(p=this.apiManager.invokeApi("messages.readHistory",{peer:this.appPeersManager.getInputPeerById(e),max_id:H(t)}).then(d=>{this.apiUpdatesManager.processLocalUpdate({_:"updatePts",pts:d.pts,pts_count:d.pts_count})})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadHistoryInbox",max_id:t,peer:this.appPeersManager.getOutputPeer(e),still_unread_count:void 0,pts:void 0,pts_count:void 0})),this.rootScope.dispatchEvent("notification_reset",this.appPeersManager.getPeerString(e)),o.readPromise?o.readPromise:(o.triedToReadMaxId=t,p.finally(()=>{delete o.readPromise;const{readMaxId:d}=o;this.log("readHistory: promise finally",t,d),d>t&&this.readHistory({peerId:e,maxId:d,threadId:a,force:!0})}),o.readPromise=p)}readAllHistory(e,t,a=!1){const s=this.getHistoryStorage(e,t);s.maxId&&this.readHistory({peerId:e,maxId:s.maxId,threadId:t,force:a})}getUnreadMentionsKey({peerId:e,threadId:t,isReaction:a}){return e+(t?`_${t}`:"")+(a?"_reaction":"")}getDialogUnreadMentions(e,t){return e&&(t?e.unread_reactions_count:e.unread_mentions_count)}fixDialogUnreadMentionsIfNoMessage({peerId:e,threadId:t,isReaction:a,force:s}){const n=this.dialogsStorage.getAnyDialog(e,t);(s||this.getDialogUnreadMentions(n,a))&&this.reloadConversationOrTopic(e)}modifyCachedMentions(e){const{mid:t,add:a}=e,s=this.unreadMentions[this.getUnreadMentionsKey(e)];s&&(a?s.first.isEnd(_e.Top)&&s.insertSlice([t]):t?s.delete(t):(s.slices.splice(1,1/0),s.first.length=0,s.first.setEnd(_e.Both)))}modifyCachedMentionsAndSave(e){const t=this.dialogsStorage.getAnyDialog(e.peerId,e.threadId);if(!t)return;const a=this.dialogsStorage.prepareDialogUnreadCountModifying(t);[[e.addMention,"unread_mentions_count"],[e.addReaction,"unread_reactions_count"]].forEach(([n,i])=>{n!==void 0&&(n?t[i]+=+n:t[i]=Math.max(0,t[i]-Math.max(1,+n)),this.modifyCachedMentions({...e,threadId:Ue(t)?e.threadId:void 0,isReaction:i==="unread_reactions_count",add:!!n}))}),a(),this.rootScope.dispatchEvent("dialog_unread",{peerId:e.peerId,dialog:t}),this.dialogsStorage.setDialogToState(t)}fixUnreadMentionsCountIfNeeded({peerId:e,threadId:t,slicedArray:a,isReaction:s}){const n=this.dialogsStorage.getAnyDialog(e,t);!a.length&&this.getDialogUnreadMentions(n,s)&&this.reloadConversationOrTopic(e)}goToNextMention(e){var p;const t=this.getUnreadMentionsKey(e),a=this.goToNextMentionPromises[t];if(a)return a;const s=(p=this.unreadMentions)[t]??(p[t]=new Jt),n=s.length,i=s.first.isEnd(_e.Top);if(!n&&i)return this.fixUnreadMentionsCountIfNeeded({...e,slicedArray:s}),Promise.resolve();let o=Promise.resolve();return!i&&n<25&&(o=this.loadNextMentions(e)),this.goToNextMentionPromises[t]=o.then(()=>{const d=s.last,c=d&&d[d.length-1];if(c)return s.delete(c),c;this.fixUnreadMentionsCountIfNeeded({...e,slicedArray:s})}).finally(()=>{delete this.goToNextMentionPromises[t]})}loadNextMentions(e){const{peerId:t}=e,a=this.unreadMentions[this.getUnreadMentionsKey(e)],s=a.first[0]||1,n=50,i=-n,o=n;return this.getUnreadMentions({...e,offsetId:s,addOffset:i,limit:o}).then(p=>{this.mergeHistoryResult({slicedArray:a,historyResult:p,offsetId:s===1?0:s,limit:o,addOffset:i,peerId:t})})}getUnreadMentions({peerId:e,offsetId:t,addOffset:a,limit:s,maxId:n=0,minId:i=0,threadId:o,isReaction:p}){return this.apiManager.invokeApiSingleProcess({method:p?"messages.getUnreadReactions":"messages.getUnreadMentions",params:{peer:this.appPeersManager.getInputPeerById(e),offset_id:H(t),add_offset:a,limit:s,max_id:H(n),min_id:H(i),top_msg_id:o?H(o):void 0},processResult:d=>(this.saveApiResult(d),d)})}readMessages(e,t){if(!t.length)return Promise.resolve();t=t.map(n=>H(n));let a,s;if(e.isAnyChat()&&this.appPeersManager.isChannel(e)){const n=e.toChatId();s={_:"updateChannelReadMessagesContents",channel_id:n,messages:t},a=this.apiManager.invokeApi("channels.readMessageContents",{channel:this.appChatsManager.getChannelInput(n),id:t})}else s={_:"updateReadMessagesContents",messages:t,pts:void 0,pts_count:void 0},a=this.apiManager.invokeApi("messages.readMessageContents",{id:t}).then(n=>{s.pts=n.pts,s.pts_count=n.pts_count,this.apiUpdatesManager.processLocalUpdate(s)});return this.apiUpdatesManager.processLocalUpdate(s),a}async readMentions(e,t,a){return this.apiManager.invokeApi(a?"messages.readReactions":"messages.readMentions",{peer:this.appPeersManager.getInputPeerById(e),top_msg_id:t?H(t):void 0}).then(s=>{if(this.apiUpdatesManager.processLocalUpdate({_:"updatePts",pts:s.pts,pts_count:s.pts_count}),!s.offset){const n=this.dialogsStorage.getAnyDialog(e,t);return this.modifyCachedMentionsAndSave({peerId:e,threadId:t,mid:void 0,...a?{addReaction:-n.unread_reactions_count}:{addMention:-n.unread_mentions_count}}),!0}return this.readMentions(e,t,a)})}toggleHistoryKeySubscription(e,t){if(!e)return;const a=this.historyMaxIdSubscribed.get(e)||0;t?this.historyMaxIdSubscribed.set(e,a+1):(a&&(a===1&&this.historyMaxIdSubscribed.delete(e),this.historyMaxIdSubscribed.set(e,a-1)),this.historyMaxIdSubscribed.get(e)||delete this.searchesStorage[e])}getDetailsForChannelJoinedService(e,t,a){if(e.isUser()||t.channelJoinedMid)return;const s=e.toChatId(),n=this.appChatsManager.getChat(s),i=n?.date;if(!i||!this.appChatsManager.isInChat(s)||!n.pFlags.broadcast)return;const o=a?[a]:t.history.slices;for(const p of o){let d,c;for(const m of p){const g=this.getMessageByPeer(e,m);if(!g){this.log.error("no message from historyStorage?",e,t,p,m);debugger;continue}if(g.date>=i)d=g;else{c=g;break}}const f=d||p.isEnd(_e.Bottom),l=c||p.isEnd(_e.Top);if(f&&l)return{date:i,slice:p,newerMessage:d,olderMessage:c}}}insertChannelJoinedService(e,t,a){const s=this.getDetailsForChannelJoinedService(e,t,a);if(!s)return!1;const{date:n,slice:i,newerMessage:o,olderMessage:p}=s,d=this.generateTempMessageId(e,p?.mid||o.mid-1);this.log("will insert channel joined",e,d,o?.mid,p?.mid,i);const c={_:"messageService",pFlags:{is_single:!0,out:!0},id:d,date:n,from_id:{_:"peerUser",user_id:Ye},peer_id:this.appPeersManager.getOutputPeer(e),action:{_:"messageActionChannelJoined"}};this.saveMessages([c],{isOutgoing:!0}),Ct(i,d),t._maxId=Math.max(t.maxId,c.mid),t.channelJoinedMid=c.mid,t.originalInsertSlice&&(t.history.insertSlice=t.originalInsertSlice,delete t.originalInsertSlice);const f=this.getDialogOnly(e);return f&&f.top_message<c.mid&&this.setDialogTopMessage(c,f),this.handleNewMessage(c),!0}processNewHistoryStorage(e,t){return this.appPeersManager.isBroadcast(e)&&!t.originalInsertSlice&&(t.originalInsertSlice=t.history.insertSlice.bind(t.history),t.history.insertSlice=(...a)=>{const s=t.originalInsertSlice(...a);return s&&this.insertChannelJoinedService(e,t,s),s}),t}createHistoryStorage(e){const t=Qd(e);if(e.searchType==="uncached")return t;e.isCacheableSearch&&e.searchType==="cached"?t.searchHistory=Yd():t.history=new Jt;let a=!1;const s=t.searchHistory?"searchHistory":"history",n=$d(t,{onSet:({prop:p,value:d,oldValue:c,state:f})=>{ii.has(p)&&re.getInstance().invokeVoid("mirror",{name:"historyStorage",key:Rt(p==="key"?c:t.key,p),value:d,accountNumber:this.getAccountNumber()})},observe:{[s]:{methods:["push","unshift","insertSlice","delete","deleteSlice"],onCallBefore:()=>{a=!0},onCall:({method:p,args:d,result:c,state:f})=>{a=!1,d.forEach((l,m,g)=>{be(l)&&l.unwrapped&&(g[m]=l.unwrapped)}),re.getInstance().invokeVoid("mirror",{name:"historyStorage",key:Rt(t.key,s,p),value:d,accountNumber:this.getAccountNumber()})}}}}),i=n[s],o=i.constructSlice.bind(i);return i.constructSlice=(...p)=>{const d=o(...p),c=as(d,{methods:["setEnd","unsetEnd","splice"],onCall:({method:f,args:l,result:m,state:g})=>{if(a)return;const _=i.slices.indexOf(c);_!==-1&&re.getInstance().invokeVoid("mirror",{name:"historyStorage",key:Rt(t.key,"slices",_,f),value:l,accountNumber:this.getAccountNumber()})}},t);return c.unwrapped=d,c},i.slices.splice(0,1/0,i.constructSlice()),n}getHistoryStorage(e,t){var a,s,n;return t?(s=(a=this.threadsStorage)[e]??(a[e]={}))[t]??(s[t]=this.createHistoryStorage({type:"replies",peerId:e,threadId:t})):(n=this.historiesStorage)[e]??(n[e]=this.processNewHistoryStorage(e,this.createHistoryStorage({type:"history",peerId:e})))}historyStorageAsTransferable(e){const{history:t,searchHistory:a,maxId:s}=e,n={};ii.forEach(o=>{n[o]=e[o]});const i={...n,history:void 0,historySerialized:t.toJSON(),searchHistory:void 0,searchHistorySerialized:a?.toJSON(),maxId:s};for(const o in i)i[o]===void 0&&delete i[o];return i}getNotifyPeerSettings(e,t){const a=this.appPeersManager.getInputNotifyPeerById({peerId:e,ignorePeerId:!0,threadId:t});return Promise.all([this.appNotificationsManager.getNotifyPeerTypeSettings(),this.appNotificationsManager.getNotifySettings(a)]).then(([s,n])=>({muted:this.appNotificationsManager.isPeerLocalMuted({peerId:e,respectType:!0,threadId:t}),peerTypeNotifySettings:n}))}getUpdateAfterReloadKey(e,t){return e+(t?"_"+t:"")}handleNewUpdateAfterReload(e,t,a){var n,i;const s=(n=this.newUpdatesAfterReloadToHandle)[i=this.getUpdateAfterReloadKey(e,a)]??(n[i]=new Set);if(s.has(t)){this.log.error("here we go again",e);return}t.ignoreExisting=!0,s.add(t),this.scheduleHandleNewDialogs(e,a)}updateSlowModeOnNewMessage(e){const{peerId:t}=e;if(e.pFlags.out&&!t.isUser()){const a=t.toChatId();this.appProfileManager.modifyCachedFullChat(a,s=>{const n=this.appChatsManager.getChat(a);if(!(s.slowmode_seconds&&!n.admin_rights))return!1;s.slowmode_next_send_date=e.date+s.slowmode_seconds})}}hasOutgoingMessage(e){for(const t in this.pendingByRandomId)if(this.pendingByRandomId[t].peerId===e)return!0;return!1}editForumTopic(e){const{peerId:t,topicId:a,title:s,iconEmojiId:n,closed:i,hidden:o}=e;return this.apiManager.invokeApi("messages.editForumTopic",{peer:this.appPeersManager.getInputPeerById(t),topic_id:H(a),title:s,icon_emoji_id:n,closed:i,hidden:o}).then(p=>{this.apiUpdatesManager.processUpdateMessage(p)})}async createForumTopic(e){const{peerId:t,title:a,iconColor:s,iconEmojiId:n}=e,i=t.isUser()?void 0:t.toChatId(),o=i?void 0:await this.appProfileManager.getChannelFull(i),p=o?.default_send_as&&this.appPeersManager.getInputPeerById(this.appPeersManager.getPeerId(o.default_send_as));return this.apiManager.invokeApi("messages.createForumTopic",{peer:this.appPeersManager.getInputPeerById(t),title:a,icon_color:s,icon_emoji_id:n,random_id:Et(),send_as:p}).then(d=>{this.apiUpdatesManager.processUpdateMessage(d);const c=d.updates.find(f=>f._==="updateNewChannelMessage");return this.appMessagesIdsManager.generateMessageId(c.message.id,i)})}getPendingOrCreateBotforumTopic({peerId:e,title:t}){if(this.pendingNewBotforumTopics[e])return this.pendingNewBotforumTopics[e];const a=this.generateTopicCreatedServiceMessage({peerId:e,title:t||"New Chat"}),s=a.id,n=[this.getHistoryStorage(e),this.getHistoryStorage(e,s)].filter(Boolean);for(const p of n)p.history.unshift(s);const[i]=this.saveMessages([a]),o=this.getHistoryMessagesStorage(e);return this.rootScope.dispatchEvent("history_append",{storageKey:o.key,message:i}),this.createPendingBotforumTopic({peerId:e,tempId:a.id,randomId:a.random_id,title:t||"New Chat",message:a,iconColor:a.action.icon_color}),this.pendingNewBotforumTopics[e]}async createPendingBotforumTopic({peerId:e,title:t,tempId:a,randomId:s,message:n,iconColor:i}){const o=[],p=[];this.pendingNewBotforumTopics[e]={tempId:a,beforeMessageSendCallbacks:o,messageSendCallbacks:p};const d=this.generateTemporaryTopic(n),c=this.dialogsStorage.setTemporaryForumTopic(d);this.rootScope.dispatchEvent("botforum_pending_topic_created",{peerId:e,tempId:a});const f=this.pendingNewBotforumTopics[e];this.pendingByRandomId[s]={tempId:f.tempId,threadId:f.tempId,peerId:e,storage:this.getHistoryMessagesStorage(e)};const l=await this.apiManager.invokeApi("messages.createForumTopic",{peer:this.appPeersManager.getInputPeerById(e),title:t,icon_color:i,random_id:s,title_missing:!0});if(l._==="updates"){const m=l.updates.find(g=>g._==="updateMessageID");m&&(f.newId=this.appMessagesIdsManager.generateMessageId(m.id))}this.apiUpdatesManager.processUpdateMessage(l),await this.dialogsStorage.getForumTopicById(e,f.newId),this.rootScope.dispatchEvent("botforum_pending_topic_created",{peerId:e,tempId:a,newId:f.newId}),c(),delete this.pendingNewBotforumTopics[e],o.forEach(m=>m()),p.forEach(m=>m())}generateTemporaryTopic(e){return{_:"forumTopic",id:e.id,peerId:e.peerId,date:e.date,from_id:e.from_id,title:e.action.title,icon_color:e.action.icon_color,top_message:e.id,read_inbox_max_id:0,read_outbox_max_id:0,unread_count:0,unread_mentions_count:0,unread_reactions_count:0,notify_settings:{_:"peerNotifySettings"},pFlags:{title_missing:!0}}}updatePinnedForumTopic(e,t,a){return this.apiManager.invokeApi("messages.updatePinnedForumTopic",{peer:this.appPeersManager.getInputPeerById(e),topic_id:H(t),pinned:a}).then(s=>{this.apiUpdatesManager.processUpdateMessage(s)})}setDialogToStateIfMessageIsTop(e){this.isMessageIsTopMessage(e)&&this.dialogsStorage.setDialogToState(this.getDialogOnly(e.peerId))}isMessageIsTopMessage(e){const t=this.getDialogOnly(e.peerId);return t&&t.top_message===e.mid}updateMessageRepliesIfNeeded(e,t){try{const a=this.getThreadKey(e);if(a){const s=this.threadsToReplies[a];if(s){const[n,i]=s.split("_");this.updateMessage(n.toPeerId(),+i,"replies_updated")}else if(e.reply_to){const n=+a.split("_").pop(),i=this.getMessageByPeer(e.peerId,n);i?.replies&&this.modifyMessage(i,p=>{const d=p.replies;d.replies=Math.max(0,d.replies+(t?1:-1)),this.rootScope.dispatchEvent("replies_short_update",p)})}}}catch(a){this.log.error("incrementMessageReplies err",a,e)}}getThreadKey(e){let t="";const a=e?.peerId;if(!a)return t;if(a.isAnyChat()||this.appPeersManager.isBotforum(a)||e.saved_peer_id){const s=qt(e,{isForum:this.appChatsManager.isForum(a.toChatId()),isBotforum:this.appPeersManager.isBotforum(a)});s&&(t=a+"_"+s)}return t}updateMessage(e,t,a){return Promise.resolve(this.reloadMessage(e,t,!0)).then(()=>{const n=this.getMessageByPeer(e,t);if(n)return a&&this.rootScope.dispatchEvent(a,n),n})}checkPendingMessage(e){const t=this.pendingByMessageId[e.mid]||this.getBotforumTypingMessage(e);let a;if(t){const s=this.pendingByRandomId[t];(a=this.finalizePendingMessage(t,e))&&this.rootScope.dispatchEvent("history_update",{storageKey:s.storage.key,message:e,tempId:s.tempId,sequential:s.sequential}),delete this.pendingByMessageId[e.mid],this.deleteBotforumTypingMessageByRandomId(e.peerId,""+t)}return a}getBotforumTypingMessage(e){if(e._!=="message"||e.pFlags.out)return;const t=this.typingBotforumMessages.get(e.peerId);if(t)return t.values().next().value}guessBotforumTypingMessage(e){if(e._!=="message"||e.pFlags.out)return;const t=this.typingBotforumMessages.get(e.peerId);if(!t)return;let a,s=0;for(const n of t){const i=this.pendingByRandomId[n],o=this.getMessageByPeer(i.peerId,i.tempId);o?._==="message"&&e.message?.startsWith(o.message||"")&&o.message?.length>s&&(a=o,s=e.message.length||0)}return a?.random_id}deleteBotforumTypingMessageByRandomId(e,t){const a=this.typingBotforumMessages.get(e);a&&(a.delete(t),a.size===0&&this.typingBotforumMessages.delete(e))}mutePeer(e){if(!(e=this.appNotificationsManager.validatePeerSettings(e)))return;const{peerId:t,muteUntil:a,threadId:s}=e,n={_:"inputPeerNotifySettings"};n.mute_until=a;const i=this.appPeersManager.getInputPeerById(t);return this.appNotificationsManager.updateNotifySettings(s?{_:"inputNotifyForumTopic",peer:i,top_msg_id:H(s)}:{_:"inputNotifyPeer",peer:i},n)}togglePeerMute({peerId:e,mute:t,threadId:a}){return t===void 0&&(t=!this.appNotificationsManager.isPeerLocalMuted({peerId:e,respectType:!1,threadId:a})),this.mutePeer({peerId:e,muteUntil:t?Ri:0,threadId:a})}findPeerIdByMids(e){for(let t=e.length,a=t-1;a>=0;--a){const s=e[a],n=this.getMessageById(s);if(n)return n.peerId}}async canSendToPeer(e,t,a="send_messages"){if(await this.appPeersManager.isPeerRestricted(e))return!1;const s=await this.apiManager.getAppConfig();if(s.freeze_since_date){const n=s.freeze_appeal_url.split("/").pop(),i=await this.appUsersManager.resolveUsername(n);return e===i.id.toPeerId(i._!=="user")}if(e.isAnyChat()){const n=e.toChatId();if(t){const i=this.dialogsStorage.getForumTopic(e,t);if(i?.pFlags?.closed&&!this.dialogsStorage.canManageTopic(i))return!1}return this.appChatsManager.hasRights(n,a,void 0,!!t)}else return this.appUsersManager.canSendToUser(e)}finalizePendingMessage(e,t){const a=this.pendingByRandomId[e];if(!a)return;const{peerId:s,tempId:n,threadId:i,storage:o}=a;[this.getHistoryStorage(s),i?this.getHistoryStorage(s,i):void 0].filter(Boolean).forEach(d=>{d.history.delete(n)});const p=this.getMessageFromStorage(o,n);return p&&(this.updateMessageContextForDeletion(p,!0,t.mid),delete t.pFlags.is_outgoing,delete t.pending,delete t.error,delete t.random_id,delete t.send,t._==="message"&&delete t.pFlags.currentlyTyping),this.rootScope.dispatchEvent("messages_pending"),delete this.pendingByRandomId[e],this.finalizePendingMessageCallbacks(o,n,t),p}finalizePendingMessageCallbacks(e,t,a){const s=this.tempFinalizeCallbacks[t];if(s!==void 0){for(const i in s){const{deferred:o,callback:p}=s[i];p(a).then(o.resolve.bind(o),o.reject.bind(o))}delete this.tempFinalizeCallbacks[t]}if(a.media){const{photo:i,document:o}=a.media,p=a.media.extended_media;if(i)this.updatePhoto(i,""+t);else if(o)this.updateDocument(o,""+t);else if(a.media.poll)delete this.appPollsManager.polls[t],delete this.appPollsManager.results[t];else if(p){const d=this.mediaTempMap[t];p.forEach((c,f)=>{const{photo:l}=c.media,{document:m}=c.media,g=""+(d+f);l?this.updatePhoto(l,g):m&&this.updateDocument(m,g)})}}const n=this.getMessageFromStorage(e,t);this.deleteMessageFromStorage(e,t),!n.reply_markup&&a.reply_markup&&setTimeout(()=>{this.getMessageFromStorage(e,a.mid)&&this.rootScope.dispatchEvent("message_edit",{storageKey:e.key,peerId:a.peerId,mid:a.mid,message:a})},0),this.handleReleasingMessage(n,e),this.onMessageModification(a,e),this.rootScope.dispatchEvent("message_sent",{storageKey:e.key,tempId:t,tempMessage:n,mid:a.mid,message:a})}updatePhoto(e,t){const a=this.appPhotosManager.getPhoto(t);if(!a)return;const s=e.sizes[e.sizes.length-1],n=this.thumbsStorage.getCacheContext(a,Ea);this.thumbsStorage.setCacheContextURL(e,s.type,n.url,n.downloaded)}updateDocument(e,t){const a=this.appDocsManager.getDoc(t);if(!a)return;const s=this.thumbsStorage.getCacheContext(a);a.type&&a.type!=="sticker"&&a.mime_type!=="image/gif"&&s.url&&this.thumbsStorage.setCacheContextURL(e,void 0,s.url,s.downloaded)}incrementMaxSeenId(e){if(!e||!(!this.maxSeenId||e>this.maxSeenId))return!1;this.maxSeenId=e,this.appStateManager.pushToState("maxSeenMsgId",e),this.apiManager.invokeApi("messages.receivedMessages",{max_id:H(e)})}async getMessageReactionsListAndReadParticipants(e,t,a,s,n,i){const o={reactions:[],count:0,next_offset:void 0},p=await this.canViewMessageReadParticipants(e);return t??(t=p?100:50),Promise.all([p&&!a&&!n?this.getMessageReadParticipants(e.peerId,e.mid).catch(()=>[]):[],e.reactions?.recent_reactions?.length&&!i?this.appReactionsManager.getMessageReactionsList(e.peerId,e.mid,t,a,s).catch(d=>o):o]).then(([d,c])=>{const f=d.slice();ht(f,({user_id:m},g,_)=>{c.reactions.some(S=>this.appPeersManager.getPeerId(S.peer_id)===m.toPeerId())&&_.splice(g,1)});let l=c.reactions.map(m=>({peerId:this.appPeersManager.getPeerId(m.peer_id),reaction:m.reaction,date:m.date}));return l=l.concat(f.map(({user_id:m,date:g})=>({date:g,peerId:m.toPeerId()}))),{reactions:c.reactions,reactionsCount:c.count,readParticipantDates:d,combined:l,nextOffset:c.next_offset}})}getMessageReadParticipants(e,t){return this.apiManager.invokeApiSingle("messages.getMessageReadParticipants",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t)}).then(a=>(a.forEach(s=>s.user_id=s.user_id.toUserId()),a))}getOutboxReadDate(e,t){return this.apiManager.invokeApiSingle("messages.getOutboxReadDate",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t)})}async canViewMessageReadParticipants(e){if(e?._!=="message"||e.pFlags.is_outgoing||!e.pFlags.out||e.pFlags.unread||e.peerId===this.appPeersManager.peerId||this.appPeersManager.isBroadcast(e.peerId)||this.appPeersManager.isMonoforum(e.peerId)||e.pFlags.is_scheduled)return!1;const t=await this.apiManager.getAppConfig(),a=te(!0)-e.date;if(e.peerId.isUser()){const n=await this.appProfileManager.getProfile(e.peerId.toUserId());return a<t.pm_read_date_expire_period&&!n.pFlags.read_dates_private}return this.appChatsManager.getChat(e.peerId.toChatId()).participants_count<=t.chat_read_mark_size_threshold&&a<t.chat_read_mark_expire_period}incrementMessageViews(e,t){if(t.length)return this.apiManager.invokeApiSingle("messages.getMessagesViews",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(a=>H(a)),increment:!0}).then(a=>{this.appPeersManager.saveApiPeers(a);for(let s=0,n=t.length;s<n;++s)this.apiUpdatesManager.processLocalUpdate({_:"updateChannelMessageViews",channel_id:e.toChatId(),id:t[s],views:a.views[s].views})})}async notifyAboutMessage(e,t={}){const a=this.getMessagePeer(e);if(await this.appPeersManager.isPeerRestricted(a))return;const s=await wt.get("settings",!1);let n=Yt.getTabs();s.notifyAllAccounts||(n=n.filter(p=>p.state.accountNumber===this.getAccountNumber())),n.sort((p,d)=>p.state.idleStartTime-d.state.idleStartTime);let i=n.find(p=>{const{chatPeerIds:d,accountNumber:c}=p.state;return c===this.getAccountNumber()&&d[d.length-1]===a});i||(i=n.find(p=>p.state.accountNumber===this.getAccountNumber())),!i&&n.length&&(i=n[0].state.idleStartTime?n[n.length-1]:n[0]),re.getInstance().invokeVoid("notificationBuild",{message:e,accountNumber:this.getAccountNumber(),isOtherTabActive:i?!!i.state.idleStartTime:!0,...t},i?.source)}getScheduledMessagesStorage(e){var t;return(t=this.scheduledMessagesStorage)[e]??(t[e]=this.createMessageStorage(e,"scheduled"))}getScheduledMessageByPeer(e,t){return this.getMessageFromStorage(this.getScheduledMessagesStorage(e),t)}async getScheduledMessages(e){if(!await this.canSendToPeer(e)||this.appPeersManager.isMonoforum(e))return;const t=this.getScheduledMessagesStorage(e);return t.size?[...t.keys()]:this.apiManager.invokeApiSingle("messages.getScheduledHistory",{peer:this.appPeersManager.getInputPeerById(e),hash:""}).then(a=>{if(a._!=="messages.messagesNotModified"){this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats);const s=this.getScheduledMessagesStorage(e);return this.saveMessages(a.messages,{storage:s,isScheduled:!0}),[...s.keys()]}return[]})}sendScheduledMessages(e,t){return this.apiManager.invokeApi("messages.sendScheduledMessages",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(a=>H(a))}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}deleteScheduledMessages(e,t){return this.apiManager.invokeApi("messages.deleteScheduledMessages",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(a=>H(a))}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}getMessageWithReplies(e){return Rs(this.filterMessages(e,t=>!!t.replies))}getMessageWithCommentReplies(e){if(e.peerId!==Ui){e=this.getMessageWithReplies(e);const t=e?.replies;if(!(t&&t.pFlags.comments&&t.channel_id.toChatId()!==To))return}return e}isFetchIntervalNeeded(e){return e.isAnyChat()&&(!this.appChatsManager.isInChat(e.toChatId())||this.appChatsManager.isForum(e.toChatId()))}getMigration(e){const t=this.migratedFromTo[e],a=this.migratedToFrom[e];return t||a?{next:t,prev:a}:void 0}getHistoryType(e,{threadId:t,monoforumPeerId:a}={}){return a?4:t?this.appPeersManager.isBotforum(e)?2:e.isUser()?3:this.appPeersManager.isForum(e)?2:1:0}processRequestHistoryOptions(e){return e.offsetId??(e.offsetId=0),e.historyType??(e.historyType=this.getHistoryType(e.peerId,{threadId:e.threadId,monoforumPeerId:e.monoforumThreadId})),e.searchType??(e.searchType=ti(e)),e.savedReaction&&(e.savedReaction=e.savedReaction.filter(Boolean),e.savedReaction.length?e.inputFilter??(e.inputFilter={_:"inputMessagesFilterEmpty"}):delete e.savedReaction),e.addOffset===void 0&&(e.addOffset=0,e.backLimit&&(e.addOffset=-e.backLimit,e.limit+=e.backLimit)),e.historyStorage??(e.historyStorage=e.searchType?this.getSearchStorage(e):this.getHistoryStorage(e.peerId,e.monoforumThreadId||e.threadId)),e}getHistory(e){this.processRequestHistoryOptions(e);const{historyStorage:t,limit:a,addOffset:s,offsetId:n,offsetPeerId:i,needRealOffsetIdOffset:o}=e,p=this.appPeersManager.isPeerRestricted(e.peerId);if(p instanceof Promise)return p.then(()=>this.getHistory(e));if(p){const m=t.history.first;m.setEnd(_e.Both);const g=m.slice(0,0);return g.setEnd(_e.Both),{count:0,history:Array.from(g),isEnd:g.getEnds(),offsetIdOffset:0}}const d=()=>{let m;return t.searchHistory?m=t.searchHistory.sliceMe(n?`${i}_${n}`:void 0,s,a):m=t.history.sliceMe(n,s,a),m},c=e.threadId&&zs(e.threadId),f=e.fetchIfWasNotFetched&&!t.wasFetched&&!c,l=d();if(!f&&l&&(l.slice.length===a||(l.fulfilled&_e.Both)===_e.Both)&&(!o||l.slice.isEnd(_e.Bottom)))return{count:t.count,history:Array.from(l.slice),isEnd:l.slice.getEnds(),offsetIdOffset:l.offsetIdOffset,messages:e.isCacheableSearch?l.slice.map(m=>this.getMessageByPeer(+m.split("_")[0],+m.split("_")[1])):void 0};if(c){const m=t.history.first;m.setEnd(_e.Both);const g=m.slice(0,0);return g.setEnd(_e.Both),{count:0,history:Array.from(g),isEnd:g.getEnds(),offsetIdOffset:0}}return this.fillHistoryStorage(e).then(m=>{if(e.searchType==="uncached"){const C=m.messages.map(b=>b.mid);return{count:m.count??t.count,history:C,isEnd:t.history.slice.getEnds(),offsetIdOffset:m?.offset_id_offset||0,nextRate:m?.next_rate,messages:m.messages,flood:m?.search_flood}}const g=d(),_=g?.slice||t.history.constructSlice(),S=_.getEnds();let D;return o?D=m.offset_id_offset||0:D=g?.offsetIdOffset||t.count,{count:t.count,history:Array.from(_),isEnd:S,offsetIdOffset:D,messages:e.isCacheableSearch?_.map(C=>this.getMessageByPeer(C.split("_")[0].toPeerId(),+C.split("_")[1])):void 0}})}isHistoryResultEnd({historyResult:e,limit:t,addOffset:a,offsetId:s,offsetPeerId:n,inputFilter:i,peerId:o}){const{offset_id_offset:p,messages:d}=e,c=d.map(({mid:k})=>k),f=e.count||d.length,l=a<0?t+a:t,m=Math.abs(a);!o&&i&&(s=0);let g=p,_=!1,S=!s,D=d.length,C=0,b=!1;const w=s&&H(s);if(w){let k=0;for(const B=c.length;k<B&&!(s>c[k]);++k);b=c.includes(s),D=d.length-k,C=k}return g!==void 0?(_=g>=f-l||f<l,S=!g||a<0&&g+a<=0):w?(l&&(_=D<l),m&&(S=C<m),(_||S)&&(g=_?f-D:C-+b)):d.length>=f&&(_=!0,S=!0),g??(g=0),{count:f,offsetIdOffset:g,isTopEnd:_,isBottomEnd:S,mids:c,topWasMeantToLoad:l,bottomWasMeantToLoad:m,topLoaded:D,bottomLoaded:C}}mergeHistoryResult(e){const{slicedArray:t,historyResult:a,offsetId:s,addOffset:n,peerId:i,historyStorage:o}=e,p=o?.searchHistory,{messages:d}=a,c=this.isHistoryResultEnd(e),{count:f,offsetIdOffset:l,mids:m}=c,g=this.getMigration(i);if(g&&o&&o.type!=="replies"&&(g.prev?c.isTopEnd=!1:g.next&&c.isBottomEnd&&(m.unshift(this.appMessagesIdsManager.generateMessageId(1,g.next.toChatId())),c.isBottomEnd=!1)),s&&H(s)&&!m.includes(s)&&l<=f&&(n||0)>=0&&!p&&o.history.findSlice(s)){let D=0;for(const C=m.length;D<C&&!(s>m[D]);++D);m.splice(D,0,s)}let _,S;if(!f)_=t.slice,S=!0;else if(p){let D=d.map(C=>`${C.peerId}_${C.mid}`);D=D.filter(C=>!p.first.includes(C)),_=p.insertSlice(D),S=!!_}else _=t.insertSlice(m),S=!!_,_||(_=t.slice);return S&&(c.isTopEnd&&_.setEnd(_e.Top),c.isBottomEnd&&_.setEnd(_e.Bottom)),{slice:_,mids:m,messages:d,...c}}async fillHistoryStorage(e){const{offsetId:t,historyStorage:a,inputFilter:s,recursion:n}=e;e.recursion=!0;let{peerId:i}=e;const o=a.maxId,p=this.middleware.get();let d=this.getMigration(i),c=i;t&&d?.prev&&H(t)===t&&(c=d.prev),i=e.peerId=this.appPeersManager.getPeerMigratedTo(i)||i;const f=c!==i,l=e.searchType==="cached"&&e.isCacheableSearch;if(l&&a.nextRate){const R=a.searchHistory.last,[T,V]=R[R.length-1].split("_"),O=this.getMessageByPeer(T.toPeerId(),+V);e.offsetId=O.mid,e.offsetPeerId=T.toPeerId(),e.nextRate=a.nextRate}const m=await this.requestHistory({...e,peerId:c});if(!p())return;l&&(a.nextRate=m.next_rate);const g=this.mergeHistoryResult({...e,slicedArray:a.history,historyResult:m,peerId:c});a.wasFetched=!0;const{count:_,isBottomEnd:S,isTopEnd:D,slice:C,messages:b,topWasMeantToLoad:w,bottomWasMeantToLoad:k,topLoaded:B,bottomLoaded:L}=g;if(f||(a.count=_),!s)for(let R=0,T=b.length;R<T;++R){const V=b[R];this.mergeReplyKeyboard(a,V)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:i})}if(!s&&S){const R=C[0];if(a.maxId===o){const T=a.history.first;T!==C&&a.history.deleteSlice(T),a.maxId!==R&&(a._maxId=C[0],this.reloadConversation(i))}}if(!s&&!n){const R=b[0],T=b[b.length-1],V=async O=>{if(!p())return;const{isEnd:h,history:M,messages:v=M.map(y=>this.getMessageByPeer(i,y))}=await this.getHistory({...e,offsetId:(O?R:T).mid,limit:(pa+1)*2,addOffset:-(pa+1)});if(p()&&!h[O?"bottom":"top"]){O||v.reverse();const y=v.slice(0,pa),x=y.map(F=>F.grouped_id),A=y[0]&&a.history.findSlice(y[0].mid);x[0]&&x[0]!==x[pa-1]&&A&&A.index===(O?0:A.slice.length-1)&&y.forEach(F=>{F.grouped_id===x[0]&&a.history.delete(F.mid)})}};!S&&R?.grouped_id&&await V(!0),!D&&T?.grouped_id&&T.grouped_id!==R?.grouped_id&&await V(!1)}if(e.threadId){if(D&&e.historyType===1){const R=a.history.last,T=this.getMessageByPeer(i,e.threadId),V=this.getMessageWithReplies(T),O=this.generateThreadServiceStartMessage(V),h=this.getMidsByMessage(V),M=[O,...h.sort((y,x)=>x-y)];ht(M,(y,x,A)=>{R.includes(y)&&A.splice(x,1)});const v=R.length;R.isEnd(_e.Top)&&v&&M.unshift(R[v-1]),a.history.insertSlice(M),this.log("inserted thread service start message",i,e.threadId,O)}return m}if(d??(d=this.getMigration(i)),d?.prev&&w!==B&&!D){const R=w-B,T=await this.fillHistoryStorage({...e,peerId:d.prev,offsetId:0,limit:R,addOffset:0});m.messages.push(...T.messages);const V=T.count??T.messages.length;m.count=(m.count||0)+V}else if((d?.next||f)&&k!==L&&!S){const R=k-L,T=await this.fillHistoryStorage({...e,offsetId:this.appMessagesIdsManager.generateMessageId(1,i.toChatId()),limit:R,addOffset:-R});m.messages.unshift(...T.messages);const V=T.count??T.messages.length;m.count=(m.count||0)+V;const O=m.offset_id_offset||0;m.offset_id_offset=O+V}else if(d&&s&&!n){const R=await this.requestHistory({...e,peerId:f?i:d.prev,offsetId:0,limit:1}),T=R.count??R.messages.length;m.count=(m.count||0)+T;const V=m.offset_id_offset||0;m.offset_id_offset=V+T}if(p()){if(s&&e.savedReaction){const R=m.messages.filter(T=>T.grouped_id);if(await Promise.all(R.map(T=>this.getHistory({peerId:T.peerId,offsetId:T.mid,limit:(pa+1)*2,addOffset:-(pa+1)}))),!p())return}return m}}requestHistory({peerId:e,offsetId:t=0,limit:a=50,addOffset:s=0,offsetDate:n=0,threadId:i=0,monoforumThreadId:o,offsetPeerId:p,nextRate:d,folderId:c,query:f,inputFilter:l,minDate:m,maxDate:g,historyType:_=this.getHistoryType(e,{threadId:i}),chatType:S,fromPeerId:D,savedReaction:C,isPublicHashtag:b,isPublicPosts:w,allowStars:k}){const B=t&&this.getMessageByPeer(p||e,t);p??(p=B?.peerId),t=H(t)||0,i=_===3?i:H(i)||0,m=m?m/1e3|0:0,g=g?g/1e3|0:0;let L,R;const T={peer:this.appPeersManager.getInputPeerById(e),offset_id:t,offset_date:n,add_offset:s,limit:a,max_id:0,min_id:0,hash:0};if(C&&(l??(l={_:"inputMessagesFilterEmpty"})),b||w){const O={...T,offset_rate:d,offset_peer:this.appPeersManager.getInputPeerById(p)};b?O.hashtag=f.slice(1):(O.query=f,O.allow_paid_stars=k),R="channels.searchPosts",L=O}else if(l&&e&&!d&&c===void 0){const O=o?this.appPeersManager.getInputPeerById(o):_===3?this.appPeersManager.getInputPeerById(i):void 0,h={...T,q:f||"",filter:l,min_date:m,max_date:g,top_msg_id:_===3?void 0:i,saved_peer_id:O,from_id:D?this.appPeersManager.getInputPeerById(D):void 0,saved_reaction:C};R="messages.search",L=h}else if(l){const O={...T,q:f||"",filter:l,min_date:m,max_date:g,offset_rate:d,offset_peer:this.appPeersManager.getInputPeerById(p),folder_id:c,users_only:S==="users"||void 0,groups_only:S==="groups"||void 0,broadcasts_only:S==="channels"||void 0};R="messages.searchGlobal",L=O}else if(_===1||_===2){const O={...T,msg_id:i};R="messages.getReplies",L=O}else if(_===4){const O={...T,parent_peer:this.appPeersManager.getInputPeerById(e),peer:this.appPeersManager.getInputPeerById(o)};R="messages.getSavedHistory",L=O}else if(_===3){const O={...T,peer:this.appPeersManager.getInputPeerById(i)};R="messages.getSavedHistory",L=O}else{const O={...T};R="messages.getHistory",L=O}return this.apiManager.invokeApiSingle(R,L,{noErrorBox:!0}).then(O=>{Ce&&this.log("requestHistory result:",e,Oe(O),t,a,s);const{messages:h}=O;this.saveApiResult(O),"pts"in O&&this.apiUpdatesManager.addChannelState(e.toChatId(),O.pts);let M=h.length;return O.count,M&&!h[M-1]&&(h.splice(M-1,1),M--),O},O=>{switch(O.type){case"CHANNEL_PRIVATE":let h=this.appChatsManager.getChat(e.toChatId());h._==="channel"&&(h={_:"channelForbidden",id:h.id,access_hash:h.access_hash,title:h.title,pFlags:h.pFlags}),this.appChatsManager.saveApiChats([h]),this.apiUpdatesManager.processLocalUpdate({_:"updateChannel",channel_id:h.id});break}throw O})}fetchSingleMessages(){return this.fetchSingleMessagesPromise??(this.fetchSingleMessagesPromise=qe(0).then(()=>{const e=[];for(const[t,a]of this.needSingleMessages){const s=[...a.keys()],n=s.map(d=>({_:"inputMessageID",id:H(d)}));let i;const o=this.appPeersManager.isChannel(t)?t.toChatId():void 0;o?i=this.apiManager.invokeApiSingle("channels.getMessages",{channel:this.appChatsManager.getChannelInput(o),id:n}):i=this.apiManager.invokeApiSingle("messages.getMessages",{id:n});const p=i.then(d=>{this.saveApiResult(d);const{messages:c}=d;for(let f=0;f<c.length;++f){const l=c[f];if(!l)continue;const m=this.appMessagesIdsManager.generateMessageId(l.id,o);a.get(m).resolve(l),a.delete(m)}if(a.size)for(const[f,l]of a){const m=t.isAnyChat()&&zt(f)?da:t;this.deletedMessages.add(`${m}_${f}`),l.resolve(this.generateEmptyMessage(f))}}).finally(()=>{this.rootScope.dispatchEvent("messages_downloaded",{peerId:t,mids:s})});e.push(p)}return this.needSingleMessages.clear(),Promise.all(e).then(Se,Se).then(()=>{this.fetchSingleMessagesPromise=void 0,this.needSingleMessages.size&&this.fetchSingleMessages()})}))}reloadMessage(e,t,a){e.isAnyChat()&&zt(t)&&(e=da);const s=this.getMessageByPeer(e,t);if(this.deletedMessages.has(`${e}_${t}`)||s&&!a)return this.rootScope.dispatchEvent("messages_downloaded",{peerId:e,mids:[t]}),s;{let n=this.needSingleMessages.get(e);n||this.needSingleMessages.set(e,n=new Map);let i=n.get(t);return i||(i=$(),n.set(t,i),this.fetchSingleMessages(),i)}}reloadMessages(e,t,a){return ma(t.map(s=>this.reloadMessage(e,s,a)),s=>s)}getExtendedMedia(e,t){let a=this.extendedMedia.get(e);a||this.extendedMedia.set(e,a=new Map);const s=$(),n=[],i=t.map(o=>{let p=a.get(o);return p||(a.set(o,p=s),n.push(o),p.then(()=>{a.delete(o),!a.size&&this.extendedMedia.get(e)===a&&this.extendedMedia.delete(e)})),p});return n.length?this.apiManager.invokeApi("messages.getExtendedMedia",{peer:this.appPeersManager.getInputPeerById(e),id:n.map(o=>H(o))}).then(o=>{this.apiUpdatesManager.processUpdateMessage(o),s.resolve()}):s.resolve(),Promise.all(i)}clearMessageReplyTo(e){let t=!1;return!e||(e=this.getMessageByPeerOrFromLogs(e.peerId,e.mid),!e||e.reply_to.reply_to_msg_deleted)||(this.modifyMessage(e,a=>{a.reply_to.reply_to_msg_deleted=!0},this.getHistoryMessagesStorage(e.peerId),!0),t=!0),t}fetchMessageReplyTo(e){if(!e)return this.generateEmptyMessage(0);if(e=this.getMessageByPeerOrFromLogs(e.peerId,e.mid),!e?.reply_to)return this.generateEmptyMessage(0);const t=e.reply_to;if(t._==="messageReplyStoryHeader"){const n=this.appStoriesManager.getStoryById(this.appPeersManager.getPeerId(t.peer),t.story_id);return se(n,i=>i)}const a=t.reply_to_peer_id?this.appPeersManager.getPeerId(t.reply_to_peer_id):e.peerId,s=this.reloadMessage(a,e.reply_to_mid);return se(s,n=>{if(n||this.clearMessageReplyTo(e),e._==="messageService"&&s instanceof Promise){const i=e.peerId;this.rootScope.dispatchEvent("message_edit",{storageKey:`${i}_history`,peerId:i,mid:e.mid,message:e}),this.isMessageIsTopMessage(e)&&this.rootScope.dispatchEvent("dialogs_multiupdate",new Map([[i,{dialog:this.getDialogOnly(i)}]]))}return n})}getTypingKey(e,t){return t?`${e}_${t}`:e}async setTyping(e,t,a,s){s&&!this.appPeersManager.isForum(e)&&(s=void 0);const n=this.getTypingKey(e,s);let i=this.typings[n];return!e||!await this.canSendToPeer(e)||e===this.appPeersManager.peerId||!a&&i?.action?._===t._||this.appPeersManager.isMonoforum(e)?Promise.resolve(!1):(i?.timeout&&clearTimeout(i.timeout),i=this.typings[n]={action:t},this.apiManager.invokeApi("messages.setTyping",{peer:this.appPeersManager.getInputPeerById(e),action:t,top_msg_id:s?H(s):void 0}).finally(()=>{i===this.typings[n]&&(i.timeout=de.setTimeout(()=>{delete this.typings[n]},6e3))}))}handleReleasingMessage(e,t){const a=e.media;if(a){const s=a.webpage||a,n=s.photo||s.document;if(n?.file_reference&&this.referencesStorage.deleteContext(n.file_reference,{type:"message",peerId:e.peerId,messageId:e.mid}),"webpage"in a&&a.webpage){const i=this.getScheduledMessagesStorage(e.peerId)===t,o=this.appWebPagesManager.getMessageKeyForPendingWebPage(e.peerId,e.mid,i);this.appWebPagesManager.deleteWebPageFromPending(a.webpage,o)}a.poll&&this.appPollsManager.updatePollToMessage(e,!1)}e.summary_from_language&&this.appTranslationsManager.clearSummaries(e.peerId,e.mid)}handleDeletedMessages(e,t,a){const s={count:0,unread:0,unreadMentions:0,unreadReactions:0,msgs:new Set},n=t.type==="history";for(const i of a){const o=this.getMessageFromStorage(t,i);if(!o){this.fixDialogUnreadMentionsIfNoMessage({peerId:e}),this.fixDialogUnreadMentionsIfNoMessage({peerId:e,isReaction:!0});continue}this.handleReleasingMessage(o,t);{const d=e.isAnyChat()&&zt(i)?da:e;this.deletedMessages.add(`${d}_${o.mid}`)}o.pFlags.pinned&&this.resetPinnedMessagesCache(e,[i],!1),this.updateMessageRepliesIfNeeded(o,!1),!o.pFlags.out&&!o.pFlags.is_outgoing&&o.pFlags.unread&&(++s.unread,this.rootScope.dispatchEvent("notification_cancel",`msg_${this.getAccountNumber()}_${e}_${i}`),ca(o)&&(++s.unreadMentions,this.modifyCachedMentions({peerId:e,mid:i,add:!1}))),++s.count,s.msgs.add(i);const p=o.grouped_id;if(p){const d=this.groupedMessagesStorage[p];d&&(this.deleteMessageFromStorage(d,i),s.grouped||(s.grouped={}),(s.grouped[p]||(s.grouped[p]=new Set)).add(i),d.size||(delete s.grouped,delete this.groupedMessagesStorage[p]))}if(n){this.updateMessageContextForDeletion(o,!0);const d=o.reactions;d&&d.pFlags.reactions_as_tags&&this.appReactionsManager.processMessageReactionsChanges({message:o,changedResults:[],removedResults:d.results});const c=d?.recent_reactions;o.pFlags.out&&c?.some(f=>f.pFlags.unread)&&(++s.unreadReactions,this.modifyCachedMentions({peerId:e,mid:i,add:!1,isReaction:!0})),this.appTranslationsManager.resetMessageTranslations(o.peerId,o.mid)}this.deleteMessageFromStorage(t,i)}if(s.grouped)for(const i in s.grouped)this.dispatchGroupedEdit(i,t,[...s.grouped[i]]);return s}handleEditedMessage(e,t,a){if(e._==="message"){if(e.media?.webpage){const i=this.appWebPagesManager.getMessageKeyForPendingWebPage(e.peerId,e.mid,!!e.pFlags.is_scheduled);this.appWebPagesManager.deleteWebPageFromPending(e.media.webpage,i)}const s=e.grouped_id;s&&this.dispatchGroupedEdit(s,a,[]),this.appTranslationsManager.hasTriedToTranslateMessage(e.peerId,e.mid)&&(e.message!==t.message||!We(e.entities,t.entities))&&this.appTranslationsManager.resetMessageTranslations(e.peerId,e.mid),e.summary_from_language&&this.appTranslationsManager.clearSummaries(e.peerId,e.mid)}}dispatchGroupedEdit(e,t,a){const n=this.getMidsByGroupedId(e).map(i=>this.getMessageFromStorage(t,i));this.rootScope.dispatchEvent("grouped_edit",{peerId:n[0].peerId,groupedId:e,deletedMids:a||[],messages:n})}getDialogUnreadCount(e){let t=e.unread_count;if(!Ue(e)&&!Go(e)&&this.appPeersManager.isForum(e.peerId)&&!e.pFlags.view_forum_as_messages){const a=this.dialogsStorage.getForumUnreadCount(e.peerId);a instanceof Promise?t=0:t=a.count}return t||+!!e.pFlags?.unread_mark}isDialogUnread(e){return!xe(e)&&!!this.getDialogUnreadCount(e)}canForward(e){return e?._==="message"&&!e.pFlags.noforwards&&!this.appPeersManager.noForwards(e.peerId)}pushBatchUpdate(e,t,a,s){let n=this.batchUpdates[e];n||(n=this.batchUpdates[e]={callback:t,batch:new Map}),n.batch.has(a)||(n.batch.set(a,s?s():void 0),this.batchUpdatesDebounced())}resetPinnedMessagesCache(e,t,a){delete this.pinnedMessages[this.getPinnedMessagesKey(e)],this.appStateManager.getState().then(s=>{delete s.hiddenPinnedMessages[e],this.rootScope.dispatchEvent("peer_pinned_messages",{peerId:e,mids:t,pinned:a})})}getMessagesFromMap(e){const t=new Map;for(const[a,s]of e){const[n,i]=a.split("_"),o=this.getMessageByPeer(n.toPeerId(),+i);o&&t.set(o,s)}return t}saveDefaultSendAs(e,t){return this.appProfileManager.modifyCachedFullChat(e.toChatId(),a=>{a.default_send_as=this.appPeersManager.getOutputPeer(t)}),this.apiManager.invokeApi("messages.saveDefaultSendAs",{peer:this.appPeersManager.getInputPeerById(e),send_as:this.appPeersManager.getInputPeerById(t)})}sendBotRequestedPeer(e,t,a,s){return this.apiManager.invokeApi("messages.sendBotRequestedPeer",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t),button_id:a,requested_peers:s.map(n=>this.appPeersManager.getInputPeerById(n))}).then(n=>{this.apiUpdatesManager.processUpdateMessage(n)})}reportSpam(e){return this.apiManager.invokeApi("messages.reportSpam",{peer:this.appPeersManager.getInputPeerById(e)})}canUpdateFactCheck(e,t){if(!this.appPeersManager.isBroadcast(e))return!1;const a=this.getMessageByPeer(e,t);return qd(a)?se(this.apiManager.getAppConfig(),s=>!!s.can_edit_factcheck):!1}updateFactCheck(e,t,a){let s;return a?s=this.apiManager.invokeApi("messages.editFactCheck",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t),text:a}):s=this.apiManager.invokeApi("messages.deleteFactCheck",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t)}),s.then(n=>{this.apiUpdatesManager.processUpdateMessage(n)})}getFactCheck(e,t){const a=this.getMessageByPeer(e,t);return a&&a.factcheck&&!a.factcheck.pFlags.need_check?a.factcheck:this.factCheckBatcher.addToBatch(e,t)}reportSponsoredMessage(e,t){return this.apiManager.invokeApi("messages.reportSponsoredMessage",{random_id:e,option:t})}async getSponsoredMessage(e){return!e.isUser()&&await this.canSendToPeer(e)?Promise.resolve({_:"messages.sponsoredMessagesEmpty"}):this.apiManager.invokeApiCacheable("messages.getSponsoredMessages",{peer:this.appPeersManager.getInputPeerById(e)},{cacheSeconds:300}).then(a=>{if(a._!=="messages.sponsoredMessages")return a;this.appPeersManager.saveApiPeers(a);const s=a.messages.shift();return a.messages.push(s),a.messages.forEach(n=>{n.photo&&(n.photo=this.appPhotosManager.savePhoto(n.photo)),n.media&&this.saveMessageMedia(n,void 0)}),a})}viewSponsoredMessage(e){return this.apiManager.invokeApiSingle("messages.viewSponsoredMessage",{random_id:e})}clickSponsoredMessage(e){return this.apiManager.invokeApiSingle("messages.clickSponsoredMessage",{random_id:e})}sendQueuedPaidMessages(e){this.paidMessagesQueue.sendFor(e)}cancelQueuedPaidMessages(e){this.paidMessagesQueue.cancelFor(e)}confirmRepayRequest(e,t){this.repayRequestHandler.confirmRepayRequest(e,t)}cancelRepayRequest(e){this.repayRequestHandler.cancelRepayRequest(e)}async updateTodo(e){const t=this.getHistoryMessagesStorage(e.peerId),a=this.getMessageFromStorage(t,e.mid);if(!a)return;let s;this.modifyMessage(a,i=>{const o=i.media;o.completions||(o.completions=[]);const p=Date.now()/1e3;if(e.action==="complete"){const d=o.completions.findIndex(c=>c.id===e.taskId);d!==-1&&o.completions.splice(d,1),o.completions.push({_:"todoCompletion",id:e.taskId,completed_by:this.appPeersManager.getOutputPeer(this.rootScope.myId),date:p})}else{const d=o.completions.findIndex(c=>c.id===e.taskId);d!==-1&&(s=o.completions[d],o.completions.splice(d,1))}},t),this.rootScope.dispatchEvent("message_edit",{storageKey:t.key,peerId:e.peerId,mid:e.mid,message:a});const n=`${e.peerId}:${e.mid}`;this.checklistBatcher.addToBatch(n,{taskId:e.taskId,oldItem:s,action:e.action})}async appendTodo(e){const t=this.getHistoryMessagesStorage(e.peerId),a=this.getMessageFromStorage(t,e.mid);a&&(this.modifyMessage(a,s=>{s.media.todo.list.push(...e.tasks)},t),this.rootScope.dispatchEvent("message_edit",{storageKey:t.key,peerId:e.peerId,mid:e.mid,message:a}),await this.apiManager.invokeApiSingleProcess({method:"messages.appendTodoList",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),msg_id:H(e.mid),list:e.tasks},processResult:s=>{this.apiUpdatesManager.processUpdateMessage(s)}}))}handleTypingBotforumUpdate(e){const t=e.action;if(t._!=="sendMessageTextDraftAction")return;const a=e.user_id.toPeerId(),s=e.top_msg_id,n=""+t.random_id;this.typingBotforumMessages.has(a)||this.typingBotforumMessages.set(a,new Set);const i=this.typingBotforumMessages.get(a);if(i.has(n)){const{tempId:o}=this.pendingByRandomId[n],p=this.getMessageByPeer(a,o);p._==="message"&&(p.message=t.text.text,p.entities=t.text.entities,p.totalEntities=void 0),this.saveMessages([p]);const d=this.getHistoryMessagesStorage(a);this.rootScope.dispatchEvent("message_edit",{message:p,storageKey:d.key,peerId:a,mid:o})}else{i.add(n);const o=this.generateTypingBotforumMessage({peerId:a,threadId:s,action:t}),p=[this.getHistoryStorage(a),this.getHistoryStorage(a,s)].filter(Boolean);for(const f of p)f.history.unshift(o.id);const[d]=this.saveMessages([o]),c=this.getHistoryMessagesStorage(a);this.pendingByRandomId[n]={peerId:a,tempId:o.id,threadId:s,storage:c},this.rootScope.dispatchEvent("history_append",{storageKey:c.key,message:d})}for(const o of i)o!==n&&(this.cancelPendingMessage(o),this.deleteBotforumTypingMessageByRandomId(a,o))}generateTypingBotforumMessage({peerId:e,threadId:t,action:a}){return{_:"message",id:this.generateTempMessageId(e),from_id:this.appPeersManager.getOutputPeer(e),peer_id:this.appPeersManager.getOutputPeer(e),pFlags:{currentlyTyping:!0},date:te(!0)+this.timeManager.getServerTimeOffset(),message:a.text.text,entities:a.text.entities,random_id:""+a.random_id,reply_to:{_:"messageReplyHeader",pFlags:{},reply_to_top_id:t,reply_to_msg_id:t}}}saveLogsMessage(e,t){return this.saveMessages([t],{storage:this.getLogsMessagesStorage(e)}),t}}class ri{constructor(e){this.batchMap=new Map,this.delay=e.delay??0,this.debounce=e.debounce??!1,this._processBatch=e.processBatch}async processBatch(){await this._processBatch(this.batchMap),this.timeoutId=void 0,this.batchMap.size&&this.scheduleBatch()}scheduleBatch(){this.debounce&&this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.timeoutId||(this.timeoutId=de.setTimeout(()=>{this.processBatch()},this.delay))}addToBatch(e,t){this.batchMap.has(e)||this.batchMap.set(e,new Map);const a=this.batchMap.get(e),s=a.get(t);if(s)return s;{const n=$();return a.set(t,n),this.scheduleBatch(),n}}}function ya(r){const e=r.replace("input","");return e[0].toLowerCase()+e.slice(1)}class nc extends W{constructor(){super(...arguments),this.peerSettings={notifyPeer:{},notifyUsers:null,notifyChats:null,notifyBroadcasts:null,notifyForumTopic:{}},this.checkMuteUntil=()=>{this.checkMuteUntilTimeout!==void 0&&(clearTimeout(this.checkMuteUntilTimeout),this.checkMuteUntilTimeout=void 0);const e=te(!0);let t=Ri;const a=n=>{if(n instanceof Promise)return!1;const i=n.mute_until;return i?i<=e?(n.mute_until=0,!0):(i<t&&(t=i),!1):!1};["notifyPeer","notifyForumTopic"].forEach(n=>{for(const i in this.peerSettings[n]){const o=this.peerSettings[n][i];if(a(o)){const[p,d]=i.split("_"),c=this.appPeersManager.getOutputPeer(p.toPeerId());this.apiUpdatesManager.saveUpdate({_:"updateNotifySettings",peer:d?{_:"notifyForumTopic",peer:c,top_msg_id:+d}:{_:"notifyPeer",peer:c},notify_settings:o})}}});const s=Math.min(18e5,(t-e)*1e3);this.checkMuteUntilTimeout=de.setTimeout(this.checkMuteUntil,s)},this.onUpdateNotifySettings=e=>{const{peer:t}=e,a=t._==="notifyForumTopic",s=t._==="notifyPeer"||a,n=s&&this.appPeersManager.getPeerId(t.peer),i=s?void 0:t._,o=a?this.appMessagesIdsManager.generateMessageId(t.top_msg_id,t.peer.channel_id):void 0;this.savePeerSettings({key:i,peerId:n,threadId:o,settings:e.notify_settings}),this.rootScope.dispatchEvent("notify_settings",e)}}after(){return this.checkMuteUntilThrottled=yn(this.checkMuteUntil,1e3,!1),this.apiUpdatesManager.addMultipleEventsListeners({updateNotifySettings:this.onUpdateNotifySettings}),this.appStateManager.getState().then(e=>{if(e.notifySettings)for(const t in e.notifySettings)this.savePeerSettings({key:t,settings:e.notifySettings[t]})})}getNotifySettings(e){let t=ya(e._),a=this.peerSettings[t],s;return e._==="inputNotifyPeer"&&(s=t=this.appPeersManager.getPeerId(e.peer),a=a[t]),a||((a||this.peerSettings)[t]=this.apiManager.invokeApi("account.getNotifySettings",{peer:e}).then(n=>(this.savePeerSettings({key:t,peerId:s,settings:n}),n)))}getNotifyPeerTypeSettings(){if(this.getNotifyPeerTypePromise)return this.getNotifyPeerTypePromise;const e=["inputNotifyBroadcasts","inputNotifyUsers","inputNotifyChats"].map(t=>this.getNotifySettings({_:t}));return this.getNotifyPeerTypePromise=Promise.all(e)}generateLocalNotifySettingsUpdate(e,t){this.apiUpdatesManager.processLocalUpdate({_:"updateNotifySettings",peer:{...e,_:ya(e._)},notify_settings:{...t,_:"peerNotifySettings"}})}updateNotifySettings(e,t){return this.apiManager.invokeApi("account.updateNotifySettings",{peer:e,settings:t}).then(()=>{this.generateLocalNotifySettingsUpdate(e,t)})}getContactSignUpNotification(){return this.notifyContactsSignUp?this.notifyContactsSignUp:this.notifyContactsSignUp=this.apiManager.invokeApi("account.getContactSignUpNotification")}setContactSignUpNotification(e){this.apiManager.invokeApi("account.setContactSignUpNotification",{silent:e}).then(t=>{this.notifyContactsSignUp=Promise.resolve(!e)})}getPeerKey(e,t){return e+(t?"_"+t:"")}savePeerSettings({key:e,peerId:t,threadId:a,settings:s}){let n;t&&(e=this.getPeerKey(t,a),n=this.peerSettings[a?"notifyForumTopic":"notifyPeer"]),(n||this.peerSettings)[e]=s,t?this.checkMuteUntilThrottled():(this.rootScope.dispatchEvent("notify_peer_type_settings",{key:e,settings:s}),this.appStateManager.getState().then(i=>{const o=i.notifySettings;o[e]=s,this.appStateManager.pushToState("notifySettings",o)}))}isMuted(e){return e._==="peerNotifySettings"&&(e.silent||e.mute_until!==void 0&&e.mute_until*1e3>te())}getPeerMuted(e){const t=this.getNotifySettings({_:"inputNotifyPeer",peer:this.appPeersManager.getInputPeerById(e)});return(t instanceof Promise?t:Promise.resolve(t)).then(a=>this.isMuted(a))}getPeerLocalSettings({peerId:e,respectType:t=!0,threadId:a}){const s={_:"peerNotifySettings"},n=this.getPeerKey(e,a),i=this.peerSettings[a?"notifyForumTopic":"notifyPeer"][n];if(i&&!(i instanceof Promise)&&Object.assign(s,i),t){const o=this.appPeersManager.getInputNotifyPeerById({peerId:e,ignorePeerId:!0,threadId:a}),p=ya(o._),d=this.peerSettings[p];if(d&&!(d instanceof Promise))for(const c in d)s[c]===void 0&&(s[c]=d[c])}return s}validatePeerSettings(e){if(e.peerId!==this.appPeersManager.peerId)return e.threadId&&!this.appPeersManager.isForum(e.peerId)&&!this.appPeersManager.isBotforum(e.peerId)&&(e.threadId=void 0),e}isPeerLocalMuted(e){if(!(e=this.validatePeerSettings(e)))return!1;if(e.threadId){const s=this.getPeerLocalSettings({...e,respectType:!1});return s.silent!==void 0||s.mute_until!==void 0?this.isMuted(s):this.isPeerLocalMuted({...e,threadId:void 0})}const t=this.getPeerLocalSettings(e);return this.isMuted(t)}isPeerStoriesMuted(e){return!!this.getPeerLocalSettings({peerId:e})?.stories_muted}toggleStoriesMute(e,t,a){const s=this.getPeerLocalSettings({peerId:e}),n={_:"inputNotifyPeer",peer:this.appPeersManager.getInputPeerById(e)},i={...s,_:"inputPeerNotifySettings"};t?i.stories_muted=!0:delete i.stories_muted,a?this.generateLocalNotifySettingsUpdate(n,i):this.updateNotifySettings(n,i)}}const ic=new Set(["all","web","webk"]),en=new Set;function rc(r){return r.find(e=>ic.has(e.platform)&&!en.has(e.reason))}function oc(r){return!!rc(r)}function pc(r){en.clear(),r.forEach(e=>{en.add(e)})}function yr(r,e){let t=r?.restriction_reason;return t&&r.pFlags.restricted?(e&&(t=t.filter(a=>a.reason!=="sensitive")),oc(t)):!1}function dc(r){if(!(!r||yr(r,!1)))return r?.photo}class cc extends W{get peerId(){return this.appUsersManager.userId.toPeerId()}saveApiPeers(e){this.appChatsManager.saveApiChats(e.chats),this.appUsersManager.saveApiUsers(e.users)}canPinMessage(e){return e.isUser()||this.appChatsManager.hasRights(e.toChatId(),"pin_messages")}getPeerPhoto(e){const t=this.getPeer(e);return dc(t)}getPeerMigratedTo(e){if(e.isUser())return;const t=this.appChatsManager.getChat(e.toChatId()),a=t?.migrated_to;if(a&&t.pFlags.deactivated)return oe(a)}getOutputPeer(e){if(e.isUser())return{_:"peerUser",user_id:e.toUserId()};const t=e.toChatId();return this.appChatsManager.isChannel(t)?{_:"peerChannel",channel_id:t}:{_:"peerChat",chat_id:t}}getPeerString(e){return e.isUser()?this.appUsersManager.getUserString(e.toUserId()):this.appChatsManager.getChatString(e.toChatId())}getPeerUsername(e){return this.getPeerActiveUsernames(e)[0]||""}getPeerActiveUsernames(e){const t=this.getPeer(e);return Xt(t)}getPeer(e){return e.isUser()?this.appUsersManager.getUser(e.toUserId()):this.appChatsManager.getChat(e.toChatId())}getPeerId(e){return oe(e)||be(e)&&e._==="inputPeerSelf"&&this.peerId||Ye}getDialogPeer(e){return{_:"dialogPeer",peer:this.getOutputPeer(e)}}isChannel(e){return!e.isUser()&&this.appChatsManager.isChannel(e.toChatId())}isMegagroup(e){return!e.isUser()&&this.appChatsManager.isMegagroup(e.toChatId())}isForum(e){return!e.isUser()&&this.appChatsManager.isForum(e.toChatId())}isAnyGroup(e){return!e.isUser()&&!this.appChatsManager.isBroadcast(e.toChatId())}isLikeGroup(e){if(this.isAnyGroup(e))return!0;const t=this.getPeer(e);return t?!!t.pFlags.signature_profiles:!1}isBroadcast(e){return this.isChannel(e)&&!this.isMegagroup(e)}isBot(e){return e.isUser()&&this.appUsersManager.isBot(e.toUserId())}isContact(e){return e.isUser()&&this.appUsersManager.isContact(e.toUserId())}isUser(e){return Pi(e)}isRegularUser(e){return this.isUser(e)&&this.appUsersManager.isRegularUser(e)}isAnyChat(e){return vi(e)}getPeerRestrictions(e){return this.getPeer(e)?.restriction_reason??[]}isPeerRestricted(e){return se(this.appPrivacyManager.getContentSettings(),t=>yr(this.getPeer(e),!!t.pFlags.sensitive_can_change))}isPeerPublic(e){return!!Xt(this.getPeer(e))[0]}isSavedDialog(e,t){return!!(e===this.peerId&&t)}isMonoforum(e){return!e.isUser()&&this.appChatsManager.isMonoforum(e.toChatId())}isBotforum(e){return e?.isUser()&&this.appUsersManager.isBotforum(e.toChatId())}canManageBotforumTopics(e){return e?.isUser()&&this.appUsersManager.canManageBotforumTopics(e.toChatId())}canManageDirectMessages(e){return e&&!e.isUser()&&this.appChatsManager.canManageDirectMessages(e.toChatId())}getStarsAmount(e,t){return e.isUser()?this.appUsersManager.getStarsAmount(e.toUserId(),void 0,t):this.appChatsManager.getStarsAmount(e.toChatId())}getInputNotifyPeerById({peerId:e,ignorePeerId:t,threadId:a}){return t?e.isUser()?{_:"inputNotifyUsers"}:this.isBroadcast(e)?{_:"inputNotifyBroadcasts"}:{_:"inputNotifyChats"}:a?{_:"inputNotifyForumTopic",peer:this.getInputPeerById(e),top_msg_id:H(a)}:{_:"inputNotifyPeer",peer:this.getInputPeerById(e)}}getInputPeerById(e){if(!e)return{_:"inputPeerEmpty"};if(!e.isUser()){const a=e.toChatId();return this.appChatsManager.getInputPeer(a)}const t=e.toUserId();return this.appUsersManager.getUserInputPeer(t)}getInputPeerSelf(){return{_:"inputPeerSelf"}}getInputDialogPeerById(e){return{_:"inputDialogPeer",peer:be(e)?e:this.getInputPeerById(e)}}getPeerSearchText(e){let t;return this.isUser(e)?t="%pu "+this.appUsersManager.getUserSearchText(e.toUserId()):t="%pg "+this.appChatsManager.getChatSearchText(e.toChatId()),t}getDialogType(e,t){return this.peerId===e&&t?"savedDialog":this.isMonoforum(e)?t?"monoforum_thread":"monoforum":this.isBotforum(e)&&t?"botforum_thread":this.isMegagroup(e)?"megagroup":this.isChannel(e)?"channel":this.isUser(e)?e===this.peerId?"saved":"chat":"group"}getDeleteButtonText(e){switch(this.getDialogType(e)){case"channel":return this.appChatsManager.hasRights(e.toChatId(),"delete_chat")?"ChannelDelete":"ChatList.Context.LeaveChannel";case"megagroup":case"group":return this.appChatsManager.hasRights(e.toChatId(),"delete_chat")?"DeleteMega":"ChatList.Context.LeaveGroup";case"monoforum":return"ChatList.Context.LeaveMonoforum";default:return"ChatList.Context.DeleteChat"}}noForwards(e){return e.isUser()?!1:!!this.appChatsManager.getChat(e.toChatId()).pFlags?.noforwards}mirrorAllPeers(e){const t={...this.appUsersManager.getUsers()},a=this.appChatsManager.getChats();for(const s in a)t[s.toPeerId(!0)]=a[s];re.getInstance().invokeVoid("mirror",{name:"peers",value:t,accountNumber:this.getAccountNumber()},e)}}class fc extends W{constructor(){super(...arguments),this.photos={}}savePhoto(e,t){if(!e||e._==="photoEmpty")return;const a=this.photos[e.id];if(e.file_reference&&(ji("file_reference",a,e),this.referencesStorage.saveContext(e.file_reference,t)),e.sizes?.length){e.sizes.sort((n,i)=>(n.size||(n.sizes?1/0:0))-(i.size||(i.sizes?1/0:0)));const s=e.sizes[e.sizes.length-1];s._==="photoSizeProgressive"&&(s.size=s.sizes[s.sizes.length-1])}return a?Object.assign(a,e):this.photos[e.id]=e}getUserPhotos(e,t="0",a=20){const s=this.appUsersManager.getUserInput(e);return this.apiManager.invokeApiCacheable("photos.getUserPhotos",{user_id:s,offset:0,limit:a,max_id:t},{cacheSeconds:60}).then(n=>{this.appUsersManager.saveApiUsers(n.users);const i=n.photos.map((o,p)=>(n.photos[p]=this.savePhoto(o,{type:"profilePhoto",peerId:e.toPeerId()}),o.id));if(t!=="0"&&t){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}return{count:n.count||i.length,photos:i}})}getPhoto(e){return be(e)?e:this.photos[e]}}class lc extends W{constructor(){super(),this.polls={},this.results={},this.pollToMessages={},this.name="POLLS",this.logTypes=ye.Error}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateMessagePoll:e=>{this.log("updateMessagePoll:",e);let t=e.poll||this.polls[e.poll_id];if(!t)return;let a=e.results;const s=this.savePoll(t,a);t=s.poll,a=s.results,this.rootScope.dispatchEvent("poll_update",{poll:t,results:a})}})}savePoll(e,t,a){a&&this.updatePollToMessage(a,!0);const s=e.id;return this.polls[s]?(e=Object.assign(this.polls[s],e),t=this.saveResults(e,t)):(this.polls[s]=e,e.chosenIndexes=[],t=this.saveResults(e,t)),{poll:e,results:t}}saveResults(e,t){return this.results[e.id]?t=Object.assign(this.results[e.id],t):this.results[e.id]=t,t.pFlags.min||(e.chosenIndexes.length=0,t?.results?.length&&t.results.forEach((a,s)=>{a.pFlags?.chosen&&e.chosenIndexes.push(s)})),t}getPoll(e){return{poll:this.polls[e],results:this.results[e]}}getInputMediaPoll(e,t,a,s){return a?[a,s]=Ht(a,s):a=void 0,{_:"inputMediaPoll",poll:e,correct_answers:t,solution:a,solution_entities:a?s:void 0}}updatePollToMessage(e,t){const{id:a}=e.media.poll;let s=this.pollToMessages[a];if(!t&&!s)return;s||(s=this.pollToMessages[a]=new Set);const n=e.peerId+"_"+e.mid;t?s.add(n):s.delete(n),!t&&!s.size&&(delete this.polls[a],delete this.results[a],delete this.pollToMessages[a])}sendVote(e,t){const a=e.media.poll,s=t.map(p=>a.answers[p].option),n=e.mid,i=e.peerId,o=this.appPeersManager.getInputPeerById(i);return e.pFlags.is_outgoing?this.appMessagesManager.invokeAfterMessageIsSent(n,"sendVote",p=>(this.log("invoke sendVote callback"),this.sendVote(p,t))):this.apiManager.invokeApi("messages.sendVote",{peer:o,msg_id:H(e.mid),options:s}).then(p=>{this.log("sendVote updates:",p),this.apiUpdatesManager.processUpdateMessage(p)})}getResults(e){const t=this.appPeersManager.getInputPeerById(e.peerId);return this.apiManager.invokeApi("messages.getPollResults",{peer:t,msg_id:H(e.mid)}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a),this.log("getResults updates:",a)})}getVotes(e,t,a,s=20){return this.apiManager.invokeApi("messages.getPollVotes",{peer:this.appPeersManager.getInputPeerById(e.peerId),id:H(e.mid),option:t,offset:a,limit:s}).then(n=>(this.log("getPollVotes messages:",n),this.appUsersManager.saveApiUsers(n.users),this.appChatsManager.saveApiChats(n.chats),n))}stopPoll(e){const t=e.media.poll;if(t.pFlags.closed)return Promise.resolve();const a=Oe(t);return a.pFlags.closed=!0,this.appMessagesManager.editMessage(e,void 0,{newMedia:this.getInputMediaPoll(a)}).then(()=>{},s=>{this.log.error("stopPoll error:",s)})}}class mc extends W{constructor(){super(...arguments),this.privacy={}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updatePrivacy:e=>{const t=e.key._;this.privacy[t]=e.rules,this.rootScope.dispatchEvent("privacy_update",e)}}),this.rootScope.addEventListener("user_auth",()=>{this.getContentSettings()})}setPrivacy(e,t){return this.apiManager.invokeApi("account.setPrivacy",{key:{_:e},rules:t}).then(a=>(this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats),this.apiUpdatesManager.processLocalUpdate({_:"updatePrivacy",key:{_:ya(e)},rules:t.map(s=>{const n={};return Object.assign(n,s),n._=ya(n._),n})}),a.rules))}getPrivacy(e){const t=ya(e),a=this.privacy[t];return a?Promise.resolve(a):this.privacy[t]=this.apiManager.invokeApi("account.getPrivacy",{key:{_:e}}).then(s=>(this.appUsersManager.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),this.privacy[t]=s.rules))}getGlobalPrivacySettings(){return this.apiManager.invokeApi("account.getGlobalPrivacySettings")}setGlobalPrivacySettings(e){return this.apiManager.invokeApi("account.setGlobalPrivacySettings",{settings:e})}getContentSettings(e){return this.appStateManager.getSomethingCached({key:"accountContentSettings",defaultValue:{_:"account.contentSettings",pFlags:{}},getValue:()=>this.apiManager.invokeApi("account.getContentSettings"),overwrite:e})}async setContentSettings(e){await this.apiManager.invokeApi("account.setContentSettings",e),await this.apiManager.getAppConfig(!0),await this.getContentSettings(!0)}async notifyAgeVerified(){await this.appStateManager.pushToState("ageVerification",{date:new Date().toISOString(),layer:it.layer,clientVersion:le.versionFull}),await this.setContentSettings({sensitive_enabled:!0})}async getDefaultAutoDeletePeriod(){return(await this.apiManager.invokeApi("messages.getDefaultHistoryTTL")).period}async setDefaultAutoDeletePeriod(e){return this.apiManager.invokeApi("messages.setDefaultHistoryTTL",{period:e})}async setAutoDeletePeriodFor(e,t){const a=await this.apiManager.invokeApi("messages.setHistoryTTL",{peer:this.appPeersManager.getInputPeerById(e),period:t});this.apiUpdatesManager.processUpdateMessage(a)}}function gc(r){return r.participants_count||r.participants?.participants?.length||1}const uc=new Set(["channelParticipantCreator","chatParticipantCreator"]),hc=new Set([...Array.from(uc),"channelParticipantAdmin","chatParticipantAdmin"]),yc=r=>hc.has(r?._),oi={filter:{_:"channelParticipantsRecent"},limit:200,offset:0};class _c extends W{constructor(){super(...arguments),this.usersFull={},this.chatsFull={},this.fullExpiration={},this.onUpdateChatParticipants=e=>this.modifyCachedFullChat(e.participants.chat_id,t=>{const a=e.participants;t.participants=a}),this.onUpdateChatParticipantAdd=e=>this.modifyCachedFullChat(e.chat_id,t=>{const a=t.participants;if(a?._!=="chatParticipants")return!1;const s=a.participants;for(let n=0,i=s.length;n<i;++n)if(s[n].user_id===e.user_id)return!1;s.push({_:"chatParticipant",user_id:e.user_id,inviter_id:e.inviter_id,date:te(!0)}),a.version=e.version}),this.onUpdateChatParticipantDelete=e=>this.modifyCachedFullChat(e.chat_id,t=>{const a=t.participants;if(a?._!=="chatParticipants")return!1;const s=a.participants;for(let n=0,i=s.length;n<i;n++)if(s[n].user_id===e.user_id){s.splice(n,1),a.version=e.version;return}return!1}),this.onUpdateChatParticipantAdmin=e=>this.modifyCachedFullChat(e.chat_id,t=>{const a=t.participants;if(a?._!=="chatParticipants")return!1;const s=a.participants;for(let n=0,i=s.length;n<i;n++)if(s[n].user_id===e.user_id){s[n]={_:e.is_admin?"chatParticipantAdmin":"chatParticipant",user_id:e.user_id,inviter_id:this.appUsersManager.getSelf().id,date:te(!0)};return}return!1}),this.onUpdateUserTyping=e=>{var l;const t=e.user_id?e.user_id.toPeerId():this.appPeersManager.getPeerId(e.from_id);if(this.appPeersManager.peerId===t||e.action._==="speakingInGroupCallAction")return;const a=e.top_msg_id,s=a?this.appMessagesIdsManager.generateMessageId(a,e.channel_id):void 0,n=this.appPeersManager.getPeerId(e),i=this.getTypingsKey(n,s),o=(l=this.typingsInPeer)[i]??(l[i]=[]),p=e.action;let d=o.find(m=>m.userId===t);if(e._==="updateUserTyping"&&p._==="sendMessageTextDraftAction"){this.appMessagesManager.handleTypingBotforumUpdate(e);return}p.msg_id&&(p.msg_id=this.appMessagesIdsManager.generateMessageId(p.msg_id,e.channel_id));const c=()=>{delete d.timeout;const m=o.indexOf(d);m!==-1&&o.splice(m,1),this.rootScope.dispatchEvent("peer_typings",{peerId:n,threadId:s,typings:o}),o.length||delete this.typingsInPeer[i]};if(d?.timeout!==void 0&&clearTimeout(d.timeout),p._==="sendMessageCancelAction"){if(!d)return;c();return}d||(d={userId:t},o.push(d)),d.action=p;const f=this.appUsersManager.hasUser(t);f?this.appUsersManager.forceUserOnline(t):e._==="updateChatUserTyping"&&e.chat_id&&this.appChatsManager.hasChat(e.chat_id)&&!this.appChatsManager.isChannel(e.chat_id)&&Promise.resolve(this.getChatFull(e.chat_id)).then(()=>{d.timeout!==void 0&&this.appUsersManager.hasUser(t)&&this.rootScope.dispatchEvent("peer_typings",{peerId:n,threadId:s,typings:o})}),d.timeout=de.setTimeout(c,6e3),f&&this.rootScope.dispatchEvent("peer_typings",{peerId:n,threadId:s,typings:o})},this.onUpdatePeerBlocked=e=>{const t=this.appPeersManager.getPeerId(e.peer_id);if(this.appPeersManager.isUser(t)){const a=t.toUserId(),s=this.usersFull[a];s&&(e.pFlags.blocked?s.pFlags.blocked=!0:delete s.pFlags.blocked,e.pFlags.blocked_my_stories_from?s.pFlags.blocked_my_stories_from=!0:delete s.pFlags.blocked_my_stories_from),this.rootScope.dispatchEvent("user_full_update",a)}this.rootScope.dispatchEvent("peer_block",{peerId:t,blocked:e.pFlags.blocked,blockedMyStoriesFrom:e.pFlags.blocked_my_stories_from})},this.onUpdatePeerSettings=e=>{const t=this.appPeersManager.getPeerId(e.peer);this.rootScope.dispatchEvent("peer_settings",{peerId:t,settings:e.settings})},this.onUpdatePeerHistoryTTL=e=>{const t=this.appPeersManager.getPeerId(e.peer);this.modifyCachedFullPeer(t,s=>{s.ttl_period=e.ttl_period});const a=this.dialogsStorage.getDialogOnly(t);a&&(a.ttl_period=e.ttl_period,this.dialogsStorage.setDialogToState(a)),this.rootScope.dispatchEvent("auto_delete_period_update",{peerId:t,period:e.ttl_period})}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateChatParticipants:this.onUpdateChatParticipants,updateChatParticipantAdd:this.onUpdateChatParticipantAdd,updateChatParticipantDelete:this.onUpdateChatParticipantDelete,updateChatParticipantAdmin:this.onUpdateChatParticipantAdmin,updateUserTyping:this.onUpdateUserTyping,updateChatUserTyping:this.onUpdateUserTyping,updateChannelUserTyping:this.onUpdateUserTyping,updatePeerBlocked:this.onUpdatePeerBlocked,updatePeerSettings:this.onUpdatePeerSettings,updatePeerHistoryTTL:this.onUpdatePeerHistoryTTL}),this.rootScope.addEventListener("chat_update",e=>{const t=this.chatsFull[e],a=this.appChatsManager.getChat(e);if(!t||!a)return;let s=!1;!!t.call!=!!a.pFlags?.call_active&&(s=!0);const{photo:n}=a;if(n){const i=n._!=="chatPhotoEmpty",o=!!(t.chat_photo&&t.chat_photo._!=="photoEmpty");(i!==o||i&&n.photo_id!==t.chat_photo?.id)&&(s=!0)}s&&this.refreshFullPeer(e.toPeerId(!0))}),this.rootScope.addEventListener("channel_update",e=>{this.refreshFullPeer(e.toPeerId(!0))}),this.rootScope.addEventListener("chat_full_update",e=>{this.rootScope.dispatchEvent("peer_full_update",e.toPeerId(!0))}),this.rootScope.addEventListener("user_full_update",e=>{this.rootScope.dispatchEvent("peer_full_update",e.toPeerId(!1))}),this.rootScope.addEventListener("invalidate_participants",e=>{this.invalidateChannelParticipants(e)}),this.typingsInPeer={},this.peerSettings={}}getProfile(e,t){return this.usersFull[e]&&!t&&Date.now()<this.fullExpiration[e.toPeerId()]?this.usersFull[e]:this.apiManager.invokeApiSingleProcess({method:"users.getFullUser",params:{id:this.appUsersManager.getUserInput(e)},processResult:a=>{this.appChatsManager.saveApiChats(a.chats,!0),this.appUsersManager.saveApiUsers(a.users);const s=a.full_user,n=e.toPeerId(!1);s.profile_photo&&(s.profile_photo=this.appPhotosManager.savePhoto(s.profile_photo,{type:"profilePhoto",peerId:n})),s.wallpaper=this.appThemesManager.saveWallPaper(s.wallpaper);const i=s.bot_info,o={type:"userFull",userId:e};return i&&(i.description_document=this.appDocsManager.saveDoc(i.description_document,o),i.description_photo=this.appPhotosManager.savePhoto(i.description_photo,o)),s.business_intro=this.appBusinessManager.saveBusinessIntro(e,s.business_intro),s.personal_channel_message&&(s.personal_channel_message=this.appMessagesIdsManager.generateMessageId(s.personal_channel_message,s.personal_channel_id)),s.saved_music&&(s.saved_music=this.appDocsManager.saveDoc(s.saved_music,o)),this.appNotificationsManager.savePeerSettings({peerId:n,settings:s.notify_settings}),this.usersFull[e]=s,this.fullExpiration[n]=Date.now()+Cs,this.rootScope.dispatchEvent("user_full_update",e),s}})}async hasBussinesIntro(e,t){const s=(await this.getProfile(e,t))?.business_intro;return s&&(s.title||s.description||s.sticker)}async getSavedMusic(e,t=0,a=50){const s=await this.apiManager.invokeApi("users.getSavedMusic",{id:this.appUsersManager.getUserInput(e),offset:t,limit:a,hash:0});if(s._==="users.savedMusicNotModified")return{count:s.count,documents:[]};const n={type:"savedMusic",userId:e},i=s.documents.map(o=>this.appDocsManager.saveDoc(o,n)).filter(Boolean);return{count:s.count,documents:i}}getProfileByPeerId(e,t){return this.appPeersManager.isAnyChat(e)?this.getChatFull(e.toChatId(),t):this.getProfile(e.toUserId(),t)}getCachedFullChat(e){return this.chatsFull[e]}getCachedFullUser(e){return this.usersFull[e]}getCachedProfileByPeerId(e){return e.isUser()?this.getCachedFullUser(e.toUserId()):this.getCachedFullChat(e.toChatId())}modifyCachedFullChat(e,t){this.modifyCachedFullPeer(e.toPeerId(!0),t)}modifyCachedFullUser(e,t){this.modifyCachedFullPeer(e.toPeerId(!1),t)}modifyCachedFullPeer(e,t){const a=this.getCachedProfileByPeerId(e);if(a){if(t(a)===!1)return;e.isUser()?this.rootScope.dispatchEvent("user_full_update",e.toUserId()):this.rootScope.dispatchEvent("chat_full_update",e.toChatId())}}isUserBlocked(e){return se(this.getProfile(e),t=>!!t.pFlags.blocked)}isCachedUserBlocked(e){const t=this.isUserBlocked(e);return t instanceof Promise?void 0:t}async getFullPhoto(e){const t=await this.getProfileByPeerId(e);switch(t._){case"userFull":return t.profile_photo;case"channelFull":case"chatFull":return t.chat_photo}}getChatFull(e,t){if(this.appChatsManager.isChannel(e))return this.getChannelFull(e,t);const a=e.toPeerId(!0),s=this.chatsFull[e];if(s&&!t&&Date.now()<this.fullExpiration[a]){const n=this.appChatsManager.getChat(e);if(n.pFlags.left||n.pFlags.deactivated||n.version===s.participants.version)return s}return this.apiManager.invokeApiSingleProcess({method:"messages.getFullChat",params:{chat_id:e},processResult:n=>{this.appChatsManager.saveApiChats(n.chats,!0),this.appUsersManager.saveApiUsers(n.users);const i=n.full_chat;return i&&i.chat_photo&&i.chat_photo.id&&(i.chat_photo=this.appPhotosManager.savePhoto(i.chat_photo,{type:"profilePhoto",peerId:a})),i.call&&this.appGroupCallsManager.saveGroupCall(i.call,a),this.appNotificationsManager.savePeerSettings({peerId:a,settings:i.notify_settings}),this.chatsFull[e]=i,this.fullExpiration[a]=Date.now()+Cs,this.rootScope.dispatchEvent("chat_full_update",e),i}})}async getChatInviteLink(e,t){const a=await this.getChatFull(e);return!t&&a.exported_invite&&a.exported_invite._=="chatInviteExported"?a.exported_invite.link:this.apiManager.invokeApi("messages.exportChatInvite",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0))}).then(s=>(this.chatsFull[e]!==void 0&&(this.chatsFull[e].exported_invite=s),s.link))}filterParticipantsByQuery(e,t){const a=this.appUsersManager.createSearchIndex();e.forEach(i=>{const o=ut(i);a.indexObject(o,this.appPeersManager.getPeerSearchText(o))});const s=a.search(t);return e.filter(i=>{const o=ut(i);return s.has(o)})}getParticipants(e){e={...oi,...e};const{id:t,filter:a}=e;return this.appChatsManager.isChannel(t)?this.getChannelParticipants(e):se(this.getChatFull(t),s=>{const n=s.participants;if(n._!=="chatParticipants")throw ne("CHAT_PRIVATE");let{participants:i}=n;a._==="channelParticipantsAdmins"&&(i=i.filter(p=>yc(p)));const o=a.q;return o?.trim()&&(i=this.filterParticipantsByQuery(i,o)),{...n,participants:i}})}getParticipant(e,t){return this.appChatsManager.isChannel(e)?this.getChannelParticipant(e,t):Promise.resolve(this.getParticipants({id:e})).then(a=>{const s=a.participants.find(n=>{if(ut(n)===t)return n});if(!s)throw ne("USER_NOT_PARTICIPANT");return s})}getChannelParticipants(e){e={...oi,...e};const{id:t,filter:a,offset:s,limit:n}=e;if(!this.appChatsManager.hasRights(t,"view_participants"))throw ne("CHAT_ADMIN_REQUIRED");if(this.appPeersManager.isMonoforum(t?.toPeerId(!0)))return{_:"channels.channelParticipants",chats:[],count:0,participants:[],users:[]};const i=new Set(["channelParticipantsAdmins"]),o=this.apiManager.invokeApiCacheable("channels.getParticipants",{channel:this.appChatsManager.getChannelInput(t),filter:a,offset:s,limit:n,hash:"0"},{cacheSeconds:60,syncIfHasResult:!0});let p;if(e.forMessagesSearch)try{p=this.appChatsManager.getSendAs(t),p instanceof Promise&&(p=p.catch(()=>{}))}catch{}return ma([o,p],([d,c])=>{this.appPeersManager.saveApiPeers(d);const f=a.q;if(c){const l=c.map(b=>({_:"channelParticipant",date:0,user_id:0,peer:b.peer})),m=t.toPeerId(!0),g={_:"channelParticipant",date:0,user_id:0,peer:this.appPeersManager.getOutputPeer(m)},_=this.appPeersManager.peerId,S={_:"channelParticipant",date:0,user_id:_.toUserId()};l.unshift(g,S);const D=d.participants.slice(),C=this.filterParticipantsByQuery(l,f);(C.includes(g)||!f?.trim())&&!D.some(b=>ut(b)===m)&&(Me(C,g),D.unshift(g));for(const b of C){const w=ut(b);if(!D.some(k=>ut(k)===w)||!D.some(k=>ut(k)===_)){D.unshift(S);break}}return{...d,participants:D}}return i.has(a._)&&f?.trim()?{...d,participants:this.filterParticipantsByQuery(d.participants,f)}:d})}getChannelParticipant(e,t){return this.apiManager.invokeApiSingle("channels.getParticipant",{channel:this.appChatsManager.getChannelInput(e),participant:this.appPeersManager.getInputPeerById(t)}).then(a=>(this.appUsersManager.saveApiUsers(a.users),a.participant))}getChannelFull(e,t){const a=e.toPeerId(!0);if(this.chatsFull[e]!==void 0&&!t&&Date.now()<this.fullExpiration[a])return this.chatsFull[e];if(this.appChatsManager.getChat(e)._==="channelForbidden")throw ne("CHANNEL_PRIVATE");return this.apiManager.invokeApiSingleProcess({method:"channels.getFullChannel",params:{channel:this.appChatsManager.getChannelInput(e)},processResult:n=>{this.appChatsManager.saveApiChats(n.chats,!0),this.appUsersManager.saveApiUsers(n.users);const i=n.full_chat;return i&&i.chat_photo.id&&(i.chat_photo=this.appPhotosManager.savePhoto(i.chat_photo,{type:"profilePhoto",peerId:a})),i.wallpaper=this.appThemesManager.saveWallPaper(i.wallpaper),i.call&&this.appGroupCallsManager.saveGroupCall(i.call,a),this.appNotificationsManager.savePeerSettings({peerId:a,settings:i.notify_settings}),this.chatsFull[e]=i,this.fullExpiration[a]=Date.now()+Cs,this.rootScope.dispatchEvent("chat_full_update",e),i},processError:n=>{switch(n.type){case"CHANNEL_PRIVATE":const i=this.appChatsManager.getChat(e);i._!=="channelForbidden"&&this.appChatsManager.saveApiChats([{_:"channelForbidden",id:e,access_hash:i.access_hash,title:i.title,pFlags:i.pFlags}]),this.apiUpdatesManager.processLocalUpdate({_:"updateChannel",channel_id:e});break}throw n}})}getMentions(e,t,a,s){const n=o=>{if(t.charAt(0)==="@"&&(t=t.slice(1)),!!!t.trim())return o.map(m=>m.id);const c=new za({ignoreCase:!0}),f=new Map;o.forEach(m=>{c.indexObject(m.id,this.appUsersManager.getUserSearchText(m.id)),f.set(m.id,m.rating)});const l=Array.from(c.search(t));return l.sort((m,g)=>f.get(g)-f.get(m)),l};let i;return this.appChatsManager.isChannel(e)?i=Promise.resolve(this.getChannelParticipants({id:e,filter:{_:"channelParticipantsMentions",q:t,top_msg_id:H(a)},limit:50,offset:0})).then(o=>o.participants.map(p=>ut(p))):e&&(i=Promise.resolve(this.getChatFull(e)).then(o=>o.participants.participants.map(p=>p.user_id.toPeerId()))),Promise.all([s?[]:this.appUsersManager.getTopPeers("bots_inline").catch(()=>[]),i,s&&this.appUsersManager.getContactsPeerIds(t,!1,"rating",30)]).then(([o,p,d])=>{d&&(d=d.filter(l=>{const m=this.appPeersManager.getPeer(l);return!!Xt(m)[0]}));const c=l=>l?l.map(m=>({id:m,rating:0})):[],f=o.concat(c(p),c(d));return n(f)})}invalidateChannelParticipants(e){this.apiManager.clearCache("channels.getParticipants",t=>t.channel.channel_id===e),this.getCachedFullChat(e)&&this.refreshFullPeer(e.toPeerId(!0))}refreshFullPeer(e){if(e.isUser()){const t=e.toUserId();delete this.usersFull[t],this.rootScope.dispatchEvent("user_full_update",t)}else{const t=e.toChatId();delete this.chatsFull[t],this.rootScope.dispatchEvent("chat_full_update",t)}this.getProfileByPeerId(e,!0)}refreshFullPeerIfNeeded(e){(e.isUser()?this.usersFull[e.toUserId()]:this.chatsFull[e.toChatId()])&&this.refreshFullPeer(e)}updateProfile(e,t,a){return this.apiManager.invokeApi("account.updateProfile",{first_name:e,last_name:t,about:a}).then(s=>{this.appUsersManager.saveApiUser(s),this.modifyCachedFullUser(s.id,n=>{n.about=a})})}setBotInfo(e,t,a){return this.apiManager.invokeApi("bots.setBotInfo",{lang_code:"",bot:this.appUsersManager.getUserInput(e),name:t,about:a}).then(()=>{const s=this.appUsersManager.getUser(e);t!==void 0&&this.appUsersManager.saveApiUser({...s,first_name:t}),this.modifyCachedFullUser(e,n=>{n.about=a})})}getBotInfo(e){return this.apiManager.invokeApiSingle("bots.getBotInfo",{bot:this.appUsersManager.getUserInput(e),lang_code:""})}uploadProfilePhoto(e,t){return this.apiManager.invokeApi("photos.uploadProfilePhoto",{file:e,bot:t?this.appUsersManager.getUserInput(t):void 0}).then(a=>{const s=a.photo;if(!a.users.length){const o=s.sizes.find(p=>p._==="photoStrippedSize");a.users.push({...t?this.appUsersManager.getUser(t):this.appUsersManager.getSelf(),photo:{_:"userProfilePhoto",dc_id:s.dc_id,photo_id:s.id,stripped_thumb:o?.bytes,pFlags:{}}})}this.appUsersManager.saveApiUsers(a.users);const n=t?t.toPeerId():this.appPeersManager.peerId;this.appPhotosManager.savePhoto(a.photo,{type:"profilePhoto",peerId:n});const i=n.toUserId();this.apiUpdatesManager.processLocalUpdate({_:"updateUser",user_id:i})})}deletePhotos(e){return this.apiManager.invokeApiSingle("photos.deletePhotos",{id:e.map(t=>{const a=this.appPhotosManager.getPhoto(t);return Va(a)})}).then(t=>{})}verifyParticipantForOnlineCount(e){const t=this.appUsersManager.getUser(e.user_id);return!!(t&&t.status&&t.status._==="userStatusOnline")}reduceParticipantsForOnlineCount(e){return e.reduce((t,a)=>t+ +this.verifyParticipantForOnlineCount(a),0)}getOnlines(e){return this.appChatsManager.isBroadcast(e)?1:se(this.getChatFull(e),a=>{if(gc(a)<2)return 1;if(this.appChatsManager.isMegagroup(e)){if(a.participants_count<=100){const i=this.getChannelParticipants({id:e,filter:{_:"channelParticipantsRecent"},limit:100});return se(i,o=>this.reduceParticipantsForOnlineCount(o.participants))}const n=this.apiManager.invokeApiCacheable("messages.getOnlines",{peer:this.appChatsManager.getChannelInputPeer(e)},{cacheSeconds:60,syncIfHasResult:!0});return se(n,i=>i.onlines??1)}const s=a.participants;return s?.participants?this.reduceParticipantsForOnlineCount(s.participants):1})}getTypingsKey(e,t){return e+(t?`_${t}`:"")}getPeerTypings(e,t){return this.typingsInPeer[this.getTypingsKey(e,t)]}canGiftPremium(e){const t=this.appUsersManager.getUser(e);return t?.pFlags?.premium||t?.pFlags?.bot_forum_view?!1:se(this.appPaymentsManager.getPremiumGiftCodeOptions(),a=>{const s=this.appUsersManager.getUser(e);return a.some(n=>n.users===1)&&!s?.pFlags?.premium})}canViewStatistics(e){if(e.isUser())return!1;const t=e.toChatId(),a=this.getCachedFullChat(t);return a?!!(a.stats_dc&&a.pFlags.can_view_stats):!1}refreshPeerSettingsIfNeeded(e){this.peerSettings[e]&&(delete this.peerSettings[e],se(this.getPeerSettings(e),t=>{this.apiUpdatesManager.processLocalUpdate({_:"updatePeerSettings",peer:this.appPeersManager.getOutputPeer(e),settings:t})}))}getPeerSettings(e){var t;return this.appPeersManager.isMonoforum(e)?(t=this.peerSettings)[e]??(t[e]={_:"peerSettings",pFlags:{}}):this.peerSettings[e]?this.peerSettings[e]:this.apiManager.invokeApiSingleProcess({method:"messages.getPeerSettings",params:{peer:this.appPeersManager.getInputPeerById(e)},processResult:a=>(this.appChatsManager.saveApiChats(a.chats,!0),this.appUsersManager.saveApiUsers(a.users),this.peerSettings[e]=a.settings)})}hidePeerSettingsBar(e){return this.apiManager.invokeApiSingleProcess({method:"messages.hidePeerSettingsBar",params:{peer:this.appPeersManager.getInputPeerById(e)},processResult:()=>{this.refreshPeerSettingsIfNeeded(e)}})}setMyBirthday(e){return this.apiManager.invokeApiSingleProcess({method:"account.updateBirthday",params:{birthday:e??void 0},processResult:t=>{this.modifyCachedFullUser(this.rootScope.myId,a=>(a.birthday=e??void 0,!0))}})}suggestUserBirthday(e,t){return this.apiManager.invokeApiSingleProcess({method:"users.suggestBirthday",params:{id:this.appUsersManager.getUserInput(e),birthday:t},processResult:a=>{a&&this.apiUpdatesManager.processUpdateMessage(a)}})}updateUserNote(e,t){return this.apiManager.invokeApiSingleProcess({method:"contacts.updateContactNote",params:{id:this.appUsersManager.getUserInput(e),note:t},processResult:a=>{a&&this.modifyCachedFullUser(e,s=>(s.note=t.text===""?void 0:t,!0))}})}}var _r={exports:{}},vc={},Pc=Object.freeze({__proto__:null,default:vc}),pi=md(Pc);/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.8.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(r){(function(){var e="input is invalid type",t="finalize already called",a=typeof window=="object",s=a?window:{};s.JS_MD5_NO_WINDOW&&(a=!1);var n=!a&&typeof self=="object",i=!s.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;i?s=fd:n&&(s=self);var o=!s.JS_MD5_NO_COMMON_JS&&!0&&r.exports,p=!s.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",d="0123456789abcdef".split(""),c=[128,32768,8388608,-2147483648],f=[0,8,16,24],l=["hex","array","digest","buffer","arrayBuffer","base64"],m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),g=[],_;if(p){var S=new ArrayBuffer(68);_=new Uint8Array(S),g=new Uint32Array(S)}var D=Array.isArray;(s.JS_MD5_NO_NODE_JS||!D)&&(D=function(h){return Object.prototype.toString.call(h)==="[object Array]"});var C=ArrayBuffer.isView;p&&(s.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!C)&&(C=function(h){return typeof h=="object"&&h.buffer&&h.buffer.constructor===ArrayBuffer});var b=function(h){var M=typeof h;if(M==="string")return[h,!0];if(M!=="object"||h===null)throw new Error(e);if(p&&h.constructor===ArrayBuffer)return[new Uint8Array(h),!1];if(!D(h)&&!C(h))throw new Error(e);return[h,!1]},w=function(h){return function(M){return new T(!0).update(M)[h]()}},k=function(){var h=w("hex");i&&(h=B(h)),h.create=function(){return new T},h.update=function(y){return h.create().update(y)};for(var M=0;M<l.length;++M){var v=l[M];h[v]=w(v)}return h},B=function(h){var M=pi,v=pi.Buffer,y;v.from&&!s.JS_MD5_NO_BUFFER_FROM?y=v.from:y=function(A){return new v(A)};var x=function(A){if(typeof A=="string")return M.createHash("md5").update(A,"utf8").digest("hex");if(A==null)throw new Error(e);return A.constructor===ArrayBuffer&&(A=new Uint8Array(A)),D(A)||C(A)||A.constructor===v?M.createHash("md5").update(y(A)).digest("hex"):h(A)};return x},L=function(h){return function(M,v){return new V(M,!0).update(v)[h]()}},R=function(){var h=L("hex");h.create=function(y){return new V(y)},h.update=function(y,x){return h.create(y).update(x)};for(var M=0;M<l.length;++M){var v=l[M];h[v]=L(v)}return h};function T(h){if(h)g[0]=g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0,this.blocks=g,this.buffer8=_;else if(p){var M=new ArrayBuffer(68);this.buffer8=new Uint8Array(M),this.blocks=new Uint32Array(M)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}T.prototype.update=function(h){if(this.finalized)throw new Error(t);var M=b(h);h=M[0];for(var v=M[1],y,x=0,A,F=h.length,j=this.blocks,K=this.buffer8;x<F;){if(this.hashed&&(this.hashed=!1,j[0]=j[16],j[16]=j[1]=j[2]=j[3]=j[4]=j[5]=j[6]=j[7]=j[8]=j[9]=j[10]=j[11]=j[12]=j[13]=j[14]=j[15]=0),v)if(p)for(A=this.start;x<F&&A<64;++x)y=h.charCodeAt(x),y<128?K[A++]=y:y<2048?(K[A++]=192|y>>>6,K[A++]=128|y&63):y<55296||y>=57344?(K[A++]=224|y>>>12,K[A++]=128|y>>>6&63,K[A++]=128|y&63):(y=65536+((y&1023)<<10|h.charCodeAt(++x)&1023),K[A++]=240|y>>>18,K[A++]=128|y>>>12&63,K[A++]=128|y>>>6&63,K[A++]=128|y&63);else for(A=this.start;x<F&&A<64;++x)y=h.charCodeAt(x),y<128?j[A>>>2]|=y<<f[A++&3]:y<2048?(j[A>>>2]|=(192|y>>>6)<<f[A++&3],j[A>>>2]|=(128|y&63)<<f[A++&3]):y<55296||y>=57344?(j[A>>>2]|=(224|y>>>12)<<f[A++&3],j[A>>>2]|=(128|y>>>6&63)<<f[A++&3],j[A>>>2]|=(128|y&63)<<f[A++&3]):(y=65536+((y&1023)<<10|h.charCodeAt(++x)&1023),j[A>>>2]|=(240|y>>>18)<<f[A++&3],j[A>>>2]|=(128|y>>>12&63)<<f[A++&3],j[A>>>2]|=(128|y>>>6&63)<<f[A++&3],j[A>>>2]|=(128|y&63)<<f[A++&3]);else if(p)for(A=this.start;x<F&&A<64;++x)K[A++]=h[x];else for(A=this.start;x<F&&A<64;++x)j[A>>>2]|=h[x]<<f[A++&3];this.lastByteIndex=A,this.bytes+=A-this.start,A>=64?(this.start=A-64,this.hash(),this.hashed=!0):this.start=A}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var h=this.blocks,M=this.lastByteIndex;h[M>>>2]|=c[M&3],M>=56&&(this.hashed||this.hash(),h[0]=h[16],h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0),h[14]=this.bytes<<3,h[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},T.prototype.hash=function(){var h,M,v,y,x,A,F=this.blocks;this.first?(h=F[0]-680876937,h=(h<<7|h>>>25)-271733879<<0,y=(-1732584194^h&2004318071)+F[1]-117830708,y=(y<<12|y>>>20)+h<<0,v=(-271733879^y&(h^-271733879))+F[2]-1126478375,v=(v<<17|v>>>15)+y<<0,M=(h^v&(y^h))+F[3]-1316259209,M=(M<<22|M>>>10)+v<<0):(h=this.h0,M=this.h1,v=this.h2,y=this.h3,h+=(y^M&(v^y))+F[0]-680876936,h=(h<<7|h>>>25)+M<<0,y+=(v^h&(M^v))+F[1]-389564586,y=(y<<12|y>>>20)+h<<0,v+=(M^y&(h^M))+F[2]+606105819,v=(v<<17|v>>>15)+y<<0,M+=(h^v&(y^h))+F[3]-1044525330,M=(M<<22|M>>>10)+v<<0),h+=(y^M&(v^y))+F[4]-176418897,h=(h<<7|h>>>25)+M<<0,y+=(v^h&(M^v))+F[5]+1200080426,y=(y<<12|y>>>20)+h<<0,v+=(M^y&(h^M))+F[6]-1473231341,v=(v<<17|v>>>15)+y<<0,M+=(h^v&(y^h))+F[7]-45705983,M=(M<<22|M>>>10)+v<<0,h+=(y^M&(v^y))+F[8]+1770035416,h=(h<<7|h>>>25)+M<<0,y+=(v^h&(M^v))+F[9]-1958414417,y=(y<<12|y>>>20)+h<<0,v+=(M^y&(h^M))+F[10]-42063,v=(v<<17|v>>>15)+y<<0,M+=(h^v&(y^h))+F[11]-1990404162,M=(M<<22|M>>>10)+v<<0,h+=(y^M&(v^y))+F[12]+1804603682,h=(h<<7|h>>>25)+M<<0,y+=(v^h&(M^v))+F[13]-40341101,y=(y<<12|y>>>20)+h<<0,v+=(M^y&(h^M))+F[14]-1502002290,v=(v<<17|v>>>15)+y<<0,M+=(h^v&(y^h))+F[15]+1236535329,M=(M<<22|M>>>10)+v<<0,h+=(v^y&(M^v))+F[1]-165796510,h=(h<<5|h>>>27)+M<<0,y+=(M^v&(h^M))+F[6]-1069501632,y=(y<<9|y>>>23)+h<<0,v+=(h^M&(y^h))+F[11]+643717713,v=(v<<14|v>>>18)+y<<0,M+=(y^h&(v^y))+F[0]-373897302,M=(M<<20|M>>>12)+v<<0,h+=(v^y&(M^v))+F[5]-701558691,h=(h<<5|h>>>27)+M<<0,y+=(M^v&(h^M))+F[10]+38016083,y=(y<<9|y>>>23)+h<<0,v+=(h^M&(y^h))+F[15]-660478335,v=(v<<14|v>>>18)+y<<0,M+=(y^h&(v^y))+F[4]-405537848,M=(M<<20|M>>>12)+v<<0,h+=(v^y&(M^v))+F[9]+568446438,h=(h<<5|h>>>27)+M<<0,y+=(M^v&(h^M))+F[14]-1019803690,y=(y<<9|y>>>23)+h<<0,v+=(h^M&(y^h))+F[3]-187363961,v=(v<<14|v>>>18)+y<<0,M+=(y^h&(v^y))+F[8]+1163531501,M=(M<<20|M>>>12)+v<<0,h+=(v^y&(M^v))+F[13]-1444681467,h=(h<<5|h>>>27)+M<<0,y+=(M^v&(h^M))+F[2]-51403784,y=(y<<9|y>>>23)+h<<0,v+=(h^M&(y^h))+F[7]+1735328473,v=(v<<14|v>>>18)+y<<0,M+=(y^h&(v^y))+F[12]-1926607734,M=(M<<20|M>>>12)+v<<0,x=M^v,h+=(x^y)+F[5]-378558,h=(h<<4|h>>>28)+M<<0,y+=(x^h)+F[8]-2022574463,y=(y<<11|y>>>21)+h<<0,A=y^h,v+=(A^M)+F[11]+1839030562,v=(v<<16|v>>>16)+y<<0,M+=(A^v)+F[14]-35309556,M=(M<<23|M>>>9)+v<<0,x=M^v,h+=(x^y)+F[1]-1530992060,h=(h<<4|h>>>28)+M<<0,y+=(x^h)+F[4]+1272893353,y=(y<<11|y>>>21)+h<<0,A=y^h,v+=(A^M)+F[7]-155497632,v=(v<<16|v>>>16)+y<<0,M+=(A^v)+F[10]-1094730640,M=(M<<23|M>>>9)+v<<0,x=M^v,h+=(x^y)+F[13]+681279174,h=(h<<4|h>>>28)+M<<0,y+=(x^h)+F[0]-358537222,y=(y<<11|y>>>21)+h<<0,A=y^h,v+=(A^M)+F[3]-722521979,v=(v<<16|v>>>16)+y<<0,M+=(A^v)+F[6]+76029189,M=(M<<23|M>>>9)+v<<0,x=M^v,h+=(x^y)+F[9]-640364487,h=(h<<4|h>>>28)+M<<0,y+=(x^h)+F[12]-421815835,y=(y<<11|y>>>21)+h<<0,A=y^h,v+=(A^M)+F[15]+530742520,v=(v<<16|v>>>16)+y<<0,M+=(A^v)+F[2]-995338651,M=(M<<23|M>>>9)+v<<0,h+=(v^(M|~y))+F[0]-198630844,h=(h<<6|h>>>26)+M<<0,y+=(M^(h|~v))+F[7]+1126891415,y=(y<<10|y>>>22)+h<<0,v+=(h^(y|~M))+F[14]-1416354905,v=(v<<15|v>>>17)+y<<0,M+=(y^(v|~h))+F[5]-57434055,M=(M<<21|M>>>11)+v<<0,h+=(v^(M|~y))+F[12]+1700485571,h=(h<<6|h>>>26)+M<<0,y+=(M^(h|~v))+F[3]-1894986606,y=(y<<10|y>>>22)+h<<0,v+=(h^(y|~M))+F[10]-1051523,v=(v<<15|v>>>17)+y<<0,M+=(y^(v|~h))+F[1]-2054922799,M=(M<<21|M>>>11)+v<<0,h+=(v^(M|~y))+F[8]+1873313359,h=(h<<6|h>>>26)+M<<0,y+=(M^(h|~v))+F[15]-30611744,y=(y<<10|y>>>22)+h<<0,v+=(h^(y|~M))+F[6]-1560198380,v=(v<<15|v>>>17)+y<<0,M+=(y^(v|~h))+F[13]+1309151649,M=(M<<21|M>>>11)+v<<0,h+=(v^(M|~y))+F[4]-145523070,h=(h<<6|h>>>26)+M<<0,y+=(M^(h|~v))+F[11]-1120210379,y=(y<<10|y>>>22)+h<<0,v+=(h^(y|~M))+F[2]+718787259,v=(v<<15|v>>>17)+y<<0,M+=(y^(v|~h))+F[9]-343485551,M=(M<<21|M>>>11)+v<<0,this.first?(this.h0=h+1732584193<<0,this.h1=M-271733879<<0,this.h2=v-1732584194<<0,this.h3=y+271733878<<0,this.first=!1):(this.h0=this.h0+h<<0,this.h1=this.h1+M<<0,this.h2=this.h2+v<<0,this.h3=this.h3+y<<0)},T.prototype.hex=function(){this.finalize();var h=this.h0,M=this.h1,v=this.h2,y=this.h3;return d[h>>>4&15]+d[h&15]+d[h>>>12&15]+d[h>>>8&15]+d[h>>>20&15]+d[h>>>16&15]+d[h>>>28&15]+d[h>>>24&15]+d[M>>>4&15]+d[M&15]+d[M>>>12&15]+d[M>>>8&15]+d[M>>>20&15]+d[M>>>16&15]+d[M>>>28&15]+d[M>>>24&15]+d[v>>>4&15]+d[v&15]+d[v>>>12&15]+d[v>>>8&15]+d[v>>>20&15]+d[v>>>16&15]+d[v>>>28&15]+d[v>>>24&15]+d[y>>>4&15]+d[y&15]+d[y>>>12&15]+d[y>>>8&15]+d[y>>>20&15]+d[y>>>16&15]+d[y>>>28&15]+d[y>>>24&15]},T.prototype.toString=T.prototype.hex,T.prototype.digest=function(){this.finalize();var h=this.h0,M=this.h1,v=this.h2,y=this.h3;return[h&255,h>>>8&255,h>>>16&255,h>>>24&255,M&255,M>>>8&255,M>>>16&255,M>>>24&255,v&255,v>>>8&255,v>>>16&255,v>>>24&255,y&255,y>>>8&255,y>>>16&255,y>>>24&255]},T.prototype.array=T.prototype.digest,T.prototype.arrayBuffer=function(){this.finalize();var h=new ArrayBuffer(16),M=new Uint32Array(h);return M[0]=this.h0,M[1]=this.h1,M[2]=this.h2,M[3]=this.h3,h},T.prototype.buffer=T.prototype.arrayBuffer,T.prototype.base64=function(){for(var h,M,v,y="",x=this.array(),A=0;A<15;)h=x[A++],M=x[A++],v=x[A++],y+=m[h>>>2]+m[(h<<4|M>>>4)&63]+m[(M<<2|v>>>6)&63]+m[v&63];return h=x[A],y+=m[h>>>2]+m[h<<4&63]+"==",y};function V(h,M){var v,y=b(h);if(h=y[0],y[1]){var x=[],A=h.length,F=0,j;for(v=0;v<A;++v)j=h.charCodeAt(v),j<128?x[F++]=j:j<2048?(x[F++]=192|j>>>6,x[F++]=128|j&63):j<55296||j>=57344?(x[F++]=224|j>>>12,x[F++]=128|j>>>6&63,x[F++]=128|j&63):(j=65536+((j&1023)<<10|h.charCodeAt(++v)&1023),x[F++]=240|j>>>18,x[F++]=128|j>>>12&63,x[F++]=128|j>>>6&63,x[F++]=128|j&63);h=x}h.length>64&&(h=new T(!0).update(h).array());var K=[],ae=[];for(v=0;v<64;++v){var De=h[v]||0;K[v]=92^De,ae[v]=54^De}T.call(this,M),this.update(ae),this.oKeyPad=K,this.inner=!0,this.sharedMemory=M}V.prototype=new T,V.prototype.finalize=function(){if(T.prototype.finalize.call(this),this.inner){this.inner=!1;var h=this.array();T.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(h),T.prototype.finalize.call(this)}};var O=k();O.md5=O,O.md5.hmac=R(),o?r.exports=O:s.md5=O})()})(_r);var Mc=_r.exports;const Sc=["static_icon","appear_animation","select_animation","activate_animation","effect_animation","around_animation","center_icon"],bc={type:"reactions"},Dc={type:"availableEffects"},Cc=10*6e4;class Ic extends W{constructor(){super(...arguments),this.clear=(e=!1)=>{e&&(this.sendReactionPromises=new Map,this.reactions={}),this.savedReactionsTags=new Map},this.onUpdatePaidReactionPrivacy=e=>{this.paidReactionPrivacy=e.private}}after(){this.clear(!0),this.rootScope.addEventListener("user_auth",()=>{setTimeout(()=>{Promise.resolve(this.getAvailableReactions()).then(async e=>{const t=["around_animation","static_icon","appear_animation","center_icon"];for(let a=0,s=Math.min(7,e.length);a<s;++a){const n=e[a],i=t.map(o=>n[o]&&this.apiFileManager.downloadMedia({media:n[o]}));await Promise.all(i),await qe(1e3)}}),this.getTopReactions()},7500),this.getSavedReactionTags()}),this.apiUpdatesManager.addMultipleEventsListeners({updateSavedReactionTags:({tags:e,savedPeerId:t})=>{if(!e){this.savedReactionsTags.get(t)&&Promise.resolve(this.getSavedReactionTags(t,!0)).then(a=>{this.apiUpdatesManager.processLocalUpdate({_:"updateSavedReactionTags",tags:a,savedPeerId:t})});return}this.setSavedReactionTags(t,e)},updatePaidReactionPrivacy:this.onUpdatePaidReactionPrivacy}),this.rootScope.addEventListener("messages_reactions",e=>{for(const t of e)this.processMessageReactionsChanges(t)}),setInterval(()=>{this.savedReactionsTags.size&&(this.savedReactionsTags.clear(),this.rootScope.dispatchEvent("saved_tags_clear"))},Cc)}resetAvailableReactions(){this.availableReactions=void 0,this.getAvailableReactions()}getAvailableReactions(){return this.availableReactions?this.availableReactions:this.apiManager.invokeApiSingleProcess({method:"messages.getAvailableReactions",processResult:e=>{const t=this.availableReactions=e.reactions;for(const a of t)for(const s of Sc)a[s]&&(a[s]=this.appDocsManager.saveDoc(a[s],bc));return re.getInstance().invokeVoid("mirror",{name:"availableReactions",value:t,accountNumber:this.getAccountNumber()}),t},params:{hash:0}})}getActiveAvailableReactions(){return se(this.getAvailableReactions(),e=>e.filter(t=>!t.pFlags.inactive))}getAvailableReactionsForPeer(e,t){const a=this.getActiveAvailableReactions(),s=this.getTopReactions(),n=this.getQuickReaction();if(e.isUser())return ma([s,n],([o,p])=>{const d={type:"chatReactionsAll",reactions:o};return t&&this.unshiftQuickReactionInner(d,p),d});const i=this.appProfileManager.getChatFull(e.toChatId());return ma([a,i,n,s],([o,p,d,c])=>{let f=p.available_reactions??{_:"chatReactionsNone"},l;f._==="chatReactionsAll"&&!f.pFlags.allow_custom&&(f={_:"chatReactionsSome",reactions:o.map(ts)},l=!0);let m=[];if(f._==="chatReactionsAll")m=c;else if(f._==="chatReactionsSome"){const _=f.reactions.map(D=>o.find(C=>C.reaction===D.emoticon)||D).filter(Boolean),S=new Map(o.map((D,C)=>[D.reaction,C]));_.sort((D,C)=>(S.get(D.reaction)||0)-(S.get(C.reaction)||0)),m=_.map(D=>D._==="availableReaction"?ts(D):D)}const g={type:f._,reactions:m,trulyAll:l};return f._==="chatReactionsAll"&&t&&this.unshiftQuickReactionInner(g,d),p._==="channelFull"&&p.pFlags.paid_reactions_available&&g.reactions.unshift({_:"reactionPaid"}),g})}getReactions(e){if(this.reactions[e])return this.reactions[e];let t;return e==="recent"?t="messages.getRecentReactions":e==="top"?t="messages.getTopReactions":t="messages.getDefaultTagReactions",this.apiManager.invokeApiHashable({method:t,params:{limit:75},processResult:a=>this.reactions[e]=a.reactions})}getTopReactions(){return this.getReactions("top")}getRecentReactions(){return this.getReactions("recent")}getTagReactions(e){return ma([this.getReactions("tags"),this.getSavedReactionTags(e)],([t,a])=>(t=t.slice(),ht(a,s=>{const n=Xe(t,i=>He(i,s.reaction));n&&t.unshift(n)}),t))}unshiftQuickReactionInner(e,t){return t._==="availableReaction"&&(t=ts(t)),e.reactions=e.reactions.slice(),Xe(e.reactions,a=>He(a,t)),e.reactions.unshift(t),e}getAvailableReactionsByMessage(e,t){let a;if(e?e._==="messageService"?a=e.peerId:a=e.fwd_from?.channel_post&&this.appPeersManager.isMegagroup(e.peerId)&&e.fromId===e.fwdFromId&&e.fromId||e.peerId:a=Ye,a===this.appPeersManager.peerId){const{reactions:s}=e;if(!s||s.pFlags.reactions_as_tags)return se(this.getTagReactions(),n=>({type:"chatReactionsAll",reactions:n}))}return se(this.getAvailableReactionsForPeer(a,t),s=>{const n=e?.reactions?.results;return n&&s.type==="chatReactionsSome"&&!s.trulyAll&&s.reactions.sort((i,o)=>{if(i._==="reactionPaid")return-1/0;if(i._==="reactionEmoji")return 1/0;const p=n.findIndex(c=>He(c.reaction,i)),d=n.findIndex(c=>He(c.reaction,o));return(p===-1?1/0:p)-(d===-1?1/0:d)}),s})}getQuickReaction(){return ma([this.apiManager.getConfig(),this.getAvailableReactions()],([e,t])=>{const a=e.reactions_default;return a?._==="reactionEmoji"?t.find(s=>s.reaction===a.emoticon):a})}getReactionCached(e){return this.availableReactions.find(t=>t.reaction===e)}getReaction(e){return se(this.getAvailableReactions(),()=>this.getReactionCached(e))}getMessagesReactions(e,t){return this.apiManager.invokeApiSingleProcess({method:"messages.getMessagesReactions",params:{id:t.map(a=>H(a)),peer:this.appPeersManager.getInputPeerById(e)},processResult:a=>{this.apiUpdatesManager.processUpdateMessage(a)}})}getMessageReactionsList(e,t,a,s,n){return this.apiManager.invokeApiSingleProcess({method:"messages.getMessageReactionsList",params:{peer:this.appPeersManager.getInputPeerById(e),id:H(t),limit:a,reaction:s,offset:n},processResult:i=>(this.appUsersManager.saveApiUsers(i.users),i)})}setDefaultReaction(e){return this.apiManager.invokeApi("messages.setDefaultReaction",{reaction:e}).then(async t=>{if(t){const a=await this.apiManager.getConfig();a&&(a.reactions_default=e),this.rootScope.dispatchEvent("quick_reaction",e)}return t})}async sendReaction({message:e,reaction:t,onlyLocalWithUpdate:a,onlyReturn:s,sendAsPeerId:n,count:i}){t._==="availableReaction"&&(t={_:"reactionEmoji",emoticon:t.reaction});const o=t._==="reactionPaid",[p,d]=await Promise.all([this.apiManager.getLimit("reactions"),o&&this.getPaidReactionPrivacy()]);e=this.appMessagesManager.getMessageByPeer(e.peerId,e.mid);const{peerId:c,mid:f}=e;let l;n?l=this.appPeersManager.getOutputPeer(n):l=this.appMessagesManager.generateFromId(c)??this.appPeersManager.getOutputPeer(c);const m=this.appPeersManager.getPeerId(l),g=V=>{--V.count,delete V.chosen_order,He(t,V.reaction)&&(t=void 0),V.count||Me(S.results,V),S.recent_reactions&&Xe(S.recent_reactions,O=>He(O.reaction,V.reaction)&&this.appPeersManager.getPeerId(O.peer_id)===m),S.results.length||(S=void 0)},_=e.reactions?.pFlags?.can_see_list||!this.appPeersManager.isBroadcast(e.peerId)||e.peerId.isUser();e.reactions||(e.reactions={_:"messageReactions",results:[],recent_reactions:_?[]:void 0,pFlags:{can_see_list:_||void 0}});let S=Oe(e.reactions);const D=S.results.filter(V=>V.chosen_order!==void 0&&V.chosen_order>=0);D.sort((V,O)=>O.chosen_order-V.chosen_order);const C=[],b=D.findIndex(V=>He(V.reaction,t));b!==-1&&C.push(...D.splice(b,1)),C.push(...D.splice(p-+(b===-1))),C.forEach(V=>{D.forEach(O=>{O.chosen_order>V.chosen_order&&--O.chosen_order}),g(V)});const w=D.length;if(D.forEach((V,O)=>{V.chosen_order=w-1-O}),t){S||(S={_:"messageReactions",results:[],pFlags:{}},_&&(S.pFlags.can_see_list=!0)),!S.results.length&&c===this.appPeersManager.peerId&&(S.pFlags.reactions_as_tags=!0);let V=S.results.findIndex(h=>He(h.reaction,t)),O=V!==-1&&S.results[V];if(O||(O={_:"reactionCount",count:0,reaction:t},o?(S.results.unshift(O),V=0):V=S.results.push(O)-1),o){O.count+=i,O.chosen_order=-1,S.top_reactors??(S.top_reactors=[]);let h=Xe(S.top_reactors,v=>v.pFlags.my);h||(h={_:"messageReactor",count:0,pFlags:{my:!0}});let M=n;M||(h.pFlags.anonymous?M=Wa:h.peer_id?M=this.appPeersManager.getPeerId(h.peer_id):d._==="paidReactionPrivacyPeer"?M=this.appPeersManager.getPeerId(d.peer):d._==="paidReactionPrivacyDefault"?M=this.appPeersManager.peerId:M=Wa),delete h.pFlags.anonymous,n===Wa&&(h.pFlags.anonymous=!0,M=this.appPeersManager.peerId),h.peer_id=this.appPeersManager.getOutputPeer(M),h.count+=i,Ct(S.top_reactors,h,"count"),h.pFlags.top=S.top_reactors.indexOf(h)<3||void 0}else++O.count,O.chosen_order=D.length?D[0].chosen_order+1:0,D.unshift(O);if(!S.recent_reactions&&_&&(S.recent_reactions=[]),S.recent_reactions){const h={_:"messagePeerReaction",reaction:t,peer_id:l,pFlags:{},date:te(!0)};this.appPeersManager.isMegagroup(c),S.recent_reactions.unshift(h),S.recent_reactions=S.recent_reactions.slice(0,3)}}const k=this.availableReactions;if(S&&k?.length){const V=new Map;k.forEach((h,M)=>{V.set(h.reaction,M)}),S.results.sort((h,M)=>{const v=h.reaction.document_id||h.reaction.emoticon,y=M.reaction.document_id||M.reaction.emoticon;return M.count-h.count||(V.get(v)??0)-(V.get(y)??0)});const O=S.results.findIndex(h=>h.reaction._==="reactionPaid");O!==-1&&S.results.unshift(S.results.splice(O,1)[0])}if(s)return S;if(this.apiUpdatesManager.processLocalUpdate({_:"updateMessageReactions",peer:e.peer_id,msg_id:e.id,reactions:S,local:!0}),a)return;const B=V=>{const O=V.updates.findIndex(h=>h._==="updateEditMessage"||h._==="updateEditChannelMessage");if(O!==-1){const h=V.updates[O];V.updates[O]={_:"updateMessageReactions",msg_id:L,peer:this.appPeersManager.getOutputPeer(c),reactions:h.message.reactions,pts:h.pts,pts_count:h.pts_count}}this.apiUpdatesManager.processUpdateMessage(V),o&&this.apiUpdatesManager.processPaidMessageUpdate({paidStars:i,wereStarsReserved:!0})},L=H(f);if(o){const V=te(!0),O=Math.floor(Math.random()*Math.pow(2,32)),M=ke(V).shiftLeft(32).or(O).toString();this.apiManager.invokeApi("messages.sendPaidReaction",{count:i,msg_id:L,peer:this.appPeersManager.getInputPeerById(c),random_id:M,private:this.peerIdToPaidReactionPrivacy(n)}).then(B);return}const R=[c,f].join("-"),T=this.apiManager.invokeApi("messages.sendReaction",{peer:this.appPeersManager.getInputPeerById(c),msg_id:L,reaction:D.map(V=>V.reaction).reverse()}).then(B).catch(V=>{V.type==="REACTION_INVALID"&&this.sendReactionPromises.get(R)===T&&this.sendReaction({message:e,reaction:D[0]?.reaction,onlyLocalWithUpdate:!0,sendAsPeerId:n})}).finally(()=>{this.sendReactionPromises.get(R)===T&&this.sendReactionPromises.delete(R)});this.sendReactionPromises.set(R,T)}getRandomGenericAnimation(){return se(this.appStickersManager.getLocalStickerSet("inputStickerSetEmojiGenericAnimations"),e=>{const t=e.documents.length;return t?e.documents[Math.floor(Math.random()*t)]:void 0})}setSavedReactionTags(e,t){this.savedReactionsTags.set(e,t),this.rootScope.dispatchEvent("saved_tags",{savedPeerId:e,tags:t})}getSavedReactionTags(e,t){const{savedReactionsTags:a}=this,s=a.get(e);if(s&&!t)return s;const n=this.apiManager.invokeApi("messages.getSavedReactionTags",{peer:e?this.appPeersManager.getInputPeerById(e):void 0,hash:0}).then(i=>{const o=i.tags||[];return a.get(e)===n&&this.setSavedReactionTags(e,o),this.getSavedReactionTags(e)});return a.set(e,n),n}async updateSavedReactionTag(e,t){await this.apiManager.invokeApi("messages.updateSavedReactionTag",{reaction:e,title:t});const a=await this.getSavedReactionTags(),s=a.find(n=>He(n.reaction,e));t?s.title=t:delete s.title,this.apiUpdatesManager.processLocalUpdate({_:"updateSavedReactionTags",tags:a})}getAvailableEffects(e){return this.availableEffects&&e&&(this.availableEffects=void 0),this.availableEffects??(this.availableEffects=this.apiManager.invokeApiSingleProcess({method:"messages.getAvailableEffects",processResult:t=>(t.documents.forEach((a,s,n)=>{n[s]=this.appDocsManager.saveDoc(a,Dc)}),t.effects.forEach(a=>{a.emoticon=ia(a.emoticon)}),this.availableEffects=t.effects)}))}getAvailableEffect(e){return se(this.getAvailableEffects(),t=>t.find(a=>a.id===e))}async searchAvailableEffects({q:e,emoticon:t}){const[a,s]=await Promise.all([e?.trim()?(await this.appEmojiManager.prepareAndSearchEmojis({q:e,limit:1/0})).map(i=>i.emoji):t,this.getAvailableEffects()]),n=new Set(a);return s.filter(i=>n.has(i.emoticon))}processMessageReactionsChanges({message:e,changedResults:t,removedResults:a,savedPeerId:s}){if(e.peerId!==this.appPeersManager.peerId)return;const{reactions:n}=e;if(n&&!n.pFlags.reactions_as_tags)return;s===void 0&&this.processMessageReactionsChanges({message:e,changedResults:t,removedResults:a,savedPeerId:this.appPeersManager.getPeerId(e.saved_peer_id)});const i=this.savedReactionsTags.get(s);if(!i)return;if(i instanceof Promise){this.apiUpdatesManager.processLocalUpdate({_:"updateSavedReactionTags",savedPeerId:s});return}const o=d=>{const c=d.reaction.document_id;return c?ke(""+c,10):Wt(Vt(Mc.md5(d.reaction.emoticon).slice(0,16)))},p=d=>{Ct(i,d,f=>f,void 0,(f,l)=>{const m=f.count-l.count;if(m)return m;const g=o(f),_=o(l);return g.compare(_)})};for(const d of a){const c=i.findIndex(l=>He(l.reaction,d.reaction)),f=i[c];f&&(--f.count?p(f):i.splice(c,1))}for(const d of t){let c=i.find(f=>He(f.reaction,d.reaction));c||(c={_:"savedReactionTag",count:0,reaction:d.reaction}),++c.count,p(c)}this.apiUpdatesManager.processLocalUpdate({_:"updateSavedReactionTags",tags:i,savedPeerId:s})}async getPaidReactionPrivacy(){if(!this.paidReactionPrivacy){const e=await this.apiManager.invokeApiSingleProcess({method:"messages.getPaidReactionPrivacy",params:{}});if(!this.paidReactionPrivacy){const t=e.updates[0];this.onUpdatePaidReactionPrivacy(t)}}return this.paidReactionPrivacy}peerIdToPaidReactionPrivacy(e){let t;return e===Wa?t={_:"paidReactionPrivacyAnonymous"}:e===this.appPeersManager.peerId?t={_:"paidReactionPrivacyDefault"}:e&&(t={_:"paidReactionPrivacyPeer",peer:this.appPeersManager.getInputPeerById(e)}),t}togglePaidReactionPrivacy(e,t,a){return this.apiManager.invokeApi("messages.togglePaidReactionPrivacy",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t),private:this.peerIdToPaidReactionPrivacy(a)}).then(()=>{this.sendReaction({message:this.appMessagesManager.getMessageByPeer(e,t),count:0,onlyLocalWithUpdate:!0,reaction:{_:"reactionPaid"},sendAsPeerId:a})})}}function wc(r,e){return r.replace(/-/g,"+").replace(/_/g,"/")}function vn(r){const e=atob(wc(r)),t=new Uint8Array(e.length);for(let a=0,s=t.length;a<s;++a)t[a]=e[a].charCodeAt(0);return t}pe.base64ToBytes=vn;const aa={EMOJI:"inputStickerSetAnimatedEmoji",EMOJI_ANIMATIONS:"inputStickerSetAnimatedEmojiAnimations",PREMIUM_GIFTS:"inputStickerSetPremiumGifts",GENERIC_ANIMATIONS:"inputStickerSetEmojiGenericAnimations",DEFAULT_STATUSES:"inputStickerSetEmojiDefaultStatuses",DEFAULT_TOPIC_ICONS:"inputStickerSetEmojiDefaultTopicIcons",TON_GIFTS:"inputStickerSetTonGifts"},vr=new Set(Object.values(aa));function tn(r){return{_:r}}function $a(r){return vr.has(r.id)?tn(r.id):ss(r)}function ss({id:r,access_hash:e}){return{_:"inputStickerSetID",id:r,access_hash:e}}function Ac(r){return{_:"inputStickerSetShortName",short_name:r}}function kc(r){return{_:"inputStickerSetDice",emoticon:r}}const Ec=36e5;class Fc extends W{constructor(){super(...arguments),this.clear=e=>{this.getStickerSetPromises={},this.getStickersByEmoticonsPromises={},this.sounds={},this.names={},this.indexes={}},this.processAllStickersResult=e=>e,this.onPreloadStickerSetsResult=e=>{const a=e.sets.map(s=>this.getStickerSet($a(s),{useCache:!0}));return Promise.all(a)}}after(){this.storage=new Ke(kt(this.getAccountNumber()),"stickerSets"),this.clear(!0),this.rootScope.addEventListener("user_auth",()=>{setTimeout(()=>{this.getAnimatedEmojiStickerSet(),Promise.resolve(this.getLocalStickerSet(aa.GENERIC_ANIMATIONS)).then(async e=>{for(const t of e.documents)await this.apiFileManager.downloadMedia({media:t})})},1e3),this.getGreetingStickersPromise||(this.getGreetingStickersTimeout??(this.getGreetingStickersTimeout=de.setTimeout(()=>{this.getGreetingStickersTimeout=void 0,this.getGreetingSticker(!0)},5e3))),this.rootScope.addEventListener("app_config",()=>this.onStickersUpdated("faved",!0))}),this.apiUpdatesManager.addMultipleEventsListeners({updateNewStickerSet:e=>{const t=e.stickerset;this.saveStickerSet(t,this.getCacheKey(ss(t.set))),this.rootScope.dispatchEvent("stickers_installed",t.set)},updateRecentStickers:()=>this.onStickersUpdated("recent",!0),updateFavedStickers:()=>this.onStickersUpdated("faved",!0),updateMoveStickerSetToTop:e=>{this.rootScope.dispatchEvent("stickers_top",e.stickerset)},updateStickerSetsOrder:e=>{this.rootScope.dispatchEvent("stickers_order",{type:e.pFlags.emojis?"emojis":e.pFlags.masks?"masks":"stickers",order:e.order})}})}async onStickersUpdated(e,t){const a=await(e==="faved"?this.getFavedStickersStickers(t):this.getRecentStickersStickers(t));this.rootScope.dispatchEvent("stickers_updated",{type:e,stickers:a})}getGreetingSticker(e=!1){return this.getGreetingStickersTimeout&&(clearTimeout(this.getGreetingStickersTimeout),this.getGreetingStickersTimeout=void 0),this.getGreetingStickersPromise||(this.getGreetingStickersPromise=this.getStickersByEmoticon({emoticon:"👋⭐️",includeServerStickers:!0}).then(t=>{if(!t.length)throw"NO_STICKERS";this.greetingStickers=t.slice(),this.greetingStickers.sort((a,s)=>Math.random()-Math.random())})),this.getGreetingStickersPromise.then(()=>{let t;return e||(t=this.greetingStickers.shift(),this.greetingStickers.push(t)),this.apiFileManager.downloadMedia({media:this.greetingStickers[0]}),t})}saveStickers(e,t){return!e||e.saved||(e.saved=!0,ht(e,(a,s)=>{a=this.appDocsManager.saveDoc(a,t),a?e[s]=a:e.splice(s,1)})),e}canUseStickerSetCache(e,t){return e&&e.documents?.length&&(Date.now()-e.refreshTime<Ec||t)}getStickerSet(e,t={}){typeof e=="string"&&(e=this.names[e]||Ac(e));const a=this.getCacheKey(e);if(this.getStickerSetPromises[a])return this.getStickerSetPromises[a];if(!t.overwrite){const n=this.storage.getFromCache(a);if(this.canUseStickerSetCache(n,t.useCache))return n}const s=this.getStickerSetPromises[a]=new Promise(async n=>{if(!t.overwrite){const i=await this.storage.get(a);if(this.canUseStickerSetCache(i,t.useCache)){delete i.documents.saved,this.saveStickerSetLocal(i),n(i),this.getStickerSetPromises[a]===s&&delete this.getStickerSetPromises[a];return}}try{const i=await this.apiManager.invokeApi("messages.getStickerSet",{stickerset:e,hash:0});this.saveStickerSet(i,a),n(i)}catch{n(null)}this.getStickerSetPromises[a]===s&&delete this.getStickerSetPromises[a]});return s}getLocalStickerSet(e){return this.getStickerSet(tn(e))}getAnimatedEmojiStickerSet(){return Promise.all([this.getLocalStickerSet(aa.EMOJI),this.getLocalStickerSet(aa.EMOJI_ANIMATIONS),this.getAnimatedEmojiSounds(),this.getLocalStickerSet(aa.GENERIC_ANIMATIONS)]).then(([e,t])=>({emoji:e,animations:t}))}getAnimatedEmojiSounds(e){if(this.getAnimatedEmojiSoundsPromise&&!e)return this.getAnimatedEmojiSoundsPromise;const t=this.getAnimatedEmojiSoundsPromise=Promise.all([this.apiManager.getAppConfig(e),this.apiManager.getConfig()]).then(([a,s])=>{if(this.getAnimatedEmojiSoundsPromise===t)for(const n in a.emojies_sounds){const i=a.emojies_sounds[n],o=vn(i.file_reference_base64),p=this.appDocsManager.saveDoc({_:"document",pFlags:{},id:i.id,access_hash:i.access_hash,attributes:[{_:"documentAttributeAudio",duration:1,pFlags:{voice:!0}}],date:0,dc_id:s.this_dc,file_reference:o,mime_type:"audio/ogg"},{type:"emojiesSounds"});this.sounds[n]=p}});return t}async getRecentStickers(e){return await this.apiManager.invokeApiHashable({method:"messages.getRecentStickers",processResult:a=>(this.recentStickers=a.stickers,this.saveStickers(a.stickers,{type:"recentStickers"}),a),overwrite:e})}getRecentStickersStickers(e){if(e)this.recentStickers=void 0;else if(this.recentStickers)return this.recentStickers;return this.getRecentStickers(e).then(()=>this.recentStickers)}async saveRecentSticker(e,t,a){await this.getRecentStickersStickers();const s=this.appDocsManager.getDoc(e);if(Xe(this.recentStickers,n=>n.id===e),!t){this.recentStickers.unshift(s);const n=ia(s.stickerEmojiRaw);for(const i in this.getStickersByEmoticonsPromises)this.getStickersByEmoticonsPromises[i].then(p=>{const d=Xe(p,c=>c.id===s.id);d?p.unshift(d):i.includes(n)&&p.unshift(s)})}return this.rootScope.dispatchEvent("sticker_updated",{type:"recent",faved:!t,document:s}),t&&this.onStickersUpdated("recent",!1),this.apiManager.invokeApi("messages.saveRecentSticker",{id:Sa(s),unsave:t,attached:a})}getAnimatedEmojiSticker(e,t){const a=t?aa.EMOJI_ANIMATIONS:aa.EMOJI,s=this.getCacheKey(tn(a)),n=this.storage.getFromCache(s);if(!n?.documents)return;t&&["🧡","💛","💚","💙","💜","🖤","🤍","🤎"].includes(e)&&(e="❤️"),e=jn(e);const i=n.packs.find(o=>o.emoticon===e);return i?this.appDocsManager.getDoc(i.documents[0]):void 0}getAnimatedEmojiSoundDocument(e){return this.sounds[jn(e)]}preloadAnimatedEmojiSticker(e){const t=this.getAnimatedEmojiStickerSet().then(()=>this.getAnimatedEmojiSticker(e));return Promise.all([t,this.preloadAnimatedEmojiStickerAnimation(e)]).then(([a,s])=>({doc:a,animation:s?.doc,sound:s?.sound}))}preloadAnimatedEmojiStickerAnimation(e){return this.getAnimatedEmojiStickerSet().then(()=>this.getAnimatedEmojiSticker(e,!0)).then(t=>{if(!t)return;const a=this.getAnimatedEmojiSoundDocument(e);return Promise.all([this.preloadSticker(t.id),a?this.preloadSticker(a.id):void 0]).then(()=>({doc:t,sound:a}))})}preloadSticker(e,t){const a=this.appDocsManager.getDoc(e);return this.apiFileManager.downloadMedia({media:a,thumb:t?a.video_thumbs?.[0]:void 0})}getEmojisSearchIndex(){return this.indexes.emojis}indexStickerSet(e){var i,o;const t=e.set.pFlags.emojis,a=(i=this.indexes)[o=t?"emojis":"stickers"]??(i[o]=new za({minChars:2,fullWords:!0})),s=new Map;e.keywords.forEach(p=>{s.set(p.document_id,p.keyword.slice())}),e.packs.forEach(p=>{const d=ia(p.emoticon);p.documents.forEach(c=>{let f=s.get(c);f||s.set(c,f=[]),f.push(d)})});const n=!e.set.installed_date;s.forEach((p,d)=>{a.indexObjectArray(d,n?[]:p)})}getCacheKey(e){return JSON.stringify(e)}saveStickerSetLocal(e){const t=$a(e.set);e.set.short_name&&(this.names[e.set.short_name]=t),this.saveStickers(e.documents,{type:"stickerSet",input:t}),this.indexStickerSet(e)}saveStickerSet(e,t){const a={_:"messages.stickerSet",set:e.set,packs:e.packs,documents:e.documents,keywords:e.keywords};let s=this.storage.getFromCache(t);s?Object.assign(s,a):s=this.storage.setToCache(t,a),this.saveStickerSetLocal(a);const n=s.set.installed_date||vr.has(a.set.id);s.refreshTime=Date.now(),this.storage.set({[t]:s},!n)}getStickerSetThumbDownloadOptions(e){const t=e.thumbs.find(o=>o._==="photoSize"),a=e.thumb_dc_id,s=t.type==="a",n=t.type==="v",i={_:"inputStickerSetThumb",stickerset:$a(e),thumb_version:e.thumb_version};return{dcId:a,location:i,size:t.size,mimeType:s?"application/x-tgsticker":n&&Ft().IS_WEBM_SUPPORTED?"video/webm":"image/webp"}}async getFeaturedStickers(){return(await this.apiManager.invokeApiHashable({method:"messages.getFeaturedStickers",processResult:t=>(t.sets.forEach(a=>{this.saveStickerSet({documents:[],packs:[],keywords:[],...a},this.getCacheKey(ss(a.set)))}),t)})).sets}getPromoPremiumStickers(){return this.getStickersByEmoticon({emoticon:"⭐️⭐️",includeServerStickers:!0})}getPremiumStickers(){return this.getStickersByEmoticon({emoticon:"📂⭐️",includeServerStickers:!0})}getFavedStickers(e){return this.apiManager.invokeApiHashable({method:"messages.getFavedStickers",processResult:t=>(this.saveStickers(t.stickers,{type:"favedStickers"}),this.favedStickers=t.stickers,t),overwrite:e})}getFavedStickersStickers(e){if(e)this.favedStickers=void 0;else if(this.favedStickers)return this.favedStickers;return this.getFavedStickers(e).then(()=>this.favedStickers)}getFavedStickersLimit(){return this.apiManager.getLimit("favedStickers")}async faveSticker(e,t){this.favedStickers||await this.getFavedStickersStickers();const a=await this.getFavedStickersLimit(),s=this.appDocsManager.getDoc(e);return Xe(this.favedStickers,n=>n.id===s.id),t||(this.favedStickers.unshift(s),this.favedStickers.splice(a,this.favedStickers.length-a)),this.rootScope.dispatchEvent("sticker_updated",{type:"faved",faved:!t,document:s}),this.apiManager.invokeApi("messages.faveSticker",{id:Sa(s),unfave:t}).then(()=>{t&&this.onStickersUpdated("faved",!0)})}async toggleStickerSet(e){const t=$a(e),a=this.getCacheKey(t),s=this.storage.getFromCache(a);if(e=s.set,e.installed_date){if(await this.apiManager.invokeApi("messages.uninstallStickerSet",{stickerset:t}))return delete e.installed_date,this.saveStickerSetLocal(s),this.rootScope.dispatchEvent("stickers_deleted",e),this.storage.delete(a,!0),!0}else if(await this.apiManager.invokeApi("messages.installStickerSet",{stickerset:t,archived:!1}))return e.installed_date=te(!0),this.saveStickerSetLocal(s),this.rootScope.dispatchEvent("stickers_installed",e),!0;return!1}toggleStickerSets(e){return Promise.all(e.map(t=>this.toggleStickerSet(t)))}async searchStickerSets(e,t=!0){const a=t?1:0,s=await this.apiManager.invokeApiHashable({method:"messages.searchStickerSets",params:{flags:a,exclude_featured:t||void 0,q:e},processResult:o=>(o.sets.forEach(p=>{this.saveStickerSet({set:p.set,documents:[],keywords:[],packs:[],...p},this.getCacheKey(ss(p.set)))}),o)}),n=[],i=this.storage.getCache();for(const o in i){const{set:p}=i[o];p.title.toLowerCase().includes(e.toLowerCase())&&!s.sets.find(d=>d.set.id===p.id)&&n.push({_:"stickerSetCovered",set:p,cover:null})}return s.sets.concat(n)}getAllStickers(){return this.apiManager.invokeApiHashable({method:"messages.getAllStickers",processResult:this.processAllStickersResult})}getEmojiStickers(){return this.apiManager.invokeApiHashable({method:"messages.getEmojiStickers",processResult:this.processAllStickersResult})}preloadStickerSets(){return this.getAllStickers().then(this.onPreloadStickerSetsResult)}preloadEmojiSets(){return this.getEmojiStickers().then(this.onPreloadStickerSetsResult)}getStickersByEmoticon({emoticon:e,includeOurStickers:t,includeServerStickers:a,excludePremiumEffectStickers:s,overwrite:n}){const i=ha(e).map(p=>ia(p));e=i.join("");const o=e+(t?"1":"0")+(a?"1":"0");return this.getStickersByEmoticonsPromises[o]&&!n?this.getStickersByEmoticonsPromises[o]:this.getStickersByEmoticonsPromises[o]=Promise.all([a?this.apiManager.invokeApiHashable({method:"messages.getStickers",params:{emoticon:e},processResult:p=>p}):void 0,t?this.preloadStickerSets():[],t?this.getRecentStickers():void 0]).then(([p,d,c])=>{const f=p?this.saveStickers(p.stickers,{type:"stickerSearch",emoticon:e}):[],l=[],m=[],g=S=>{for(const D of i)for(const C of S)if(ia(C.emoticon).includes(D))for(const w of C.documents){const k=this.appDocsManager.getDoc(w);(k.animated?l:m).push(k)}};if(c){g(c.packs);const S=c.stickers;[l,m].forEach(D=>{D.sort((C,b)=>S.indexOf(C)-S.indexOf(b))})}for(const S of d)g(S.packs);const _=[...new Set(l.concat(m,f))];return ht(_,(S,D,C)=>{(S.sticker===Ta.WebM&&!Ft().IS_WEBM_SUPPORTED||s&&!this.rootScope.premium&&lr(S))&&C.splice(D,1)}),_})}async splitSearchQuery(e){if(e=e.trim(),!e)return[];let s=_n(e).filter(n=>n._==="messageEntityEmoji"||n._==="messageEntityCustomEmoji").map(n=>e.slice(n.offset,n.offset+n.length));return s.length||(s=(await this.appEmojiManager.prepareAndSearchEmojis({q:e,limit:200,minChars:1})).map(({emoji:n})=>n)),s}async searchStickers(e){return this.getStickersByEmoticon({emoticon:await this.splitSearchQuery(e),includeOurStickers:!0})}clearRecentStickers(){return this.recentStickers&&(this.recentStickers.length=0,this.onStickersUpdated("recent",!1)),this.apiManager.invokeApi("messages.clearRecentStickers")}reorderStickerSets(e,t,a){return this.apiManager.invokeApi("messages.reorderStickerSets",{emojis:t,masks:a,order:e}).then(()=>{this.apiUpdatesManager.processLocalUpdate({_:"updateStickerSetsOrder",order:e,pFlags:{emojis:t||void 0,masks:a||void 0}})})}getStickerSetByDice(e){return this.getStickerSet(kc(e))}}function Tc(r){return r&&r.toLowerCase()||""}const Uc=new Set(["javascript:"]);function Pr(r){if(!r)return null;try{const e=new URL(r).protocol;return Uc.has(e)?null:e}catch{return null}}function Pn(r,e){Pr(r)||(r="https://"+r);const t={url:r};let a,s,n;if(a=r.match(/^(?:https?:\/\/)?(?:(.+?)\.)?(?:(?:web|k|z|a)\.)?t(?:elegram)?\.me(?:\/(.+))?/)){const i=new URL(r);let o=a[1];o&&xo.has(a[1])&&(o=void 0),o&&(i.pathname=o+(i.pathname==="/"?"":i.pathname));const p=i.pathname.slice(1),d=p.split("/");if(d[0]&&d[0][0]==="$"&&d[0].length>1)n="invoice";else if(/^\+/.test(p)&&!ap.test(p))n="joinchat";else if(d[0])switch(d[0]){case"m":case"addlist":case"joinchat":case"addstickers":case"addemoji":case"voicechat":case"invoice":case"boost":case"giftcode":case"share":case"nft":if(d.length!==1&&!o){n=d[0];break}default:if(d.length<=2||d[1]?.match(/^\d+(?:\?(?:comment|thread)=\d+)?$/)||["s","c","a"].includes(d[1])){n="im";break}break}}else if(r.match(/^(?:https?:\/\/)?telesco\.pe\/([^/?]+)\/(\d+)/))n="im";else if(s=r.match(/tg:(?:\/\/)?(.+?)(?:\?|$)/))switch(n="tg_"+s[1].split("/")[0],s[1]){case"iv":t.url=decodeURIComponent(new URL(r).searchParams.get("url"));break}return window[n]||(n=void 0),t.onclick=n,t}pe&&(pe.wrapUrl=Pn);function Rc(r){return!!(r&&!r.pFlags.deleted&&r.id.toPeerId()!==Ui)}const Bc={clearBadChars:!0,ignoreCase:!0,latinize:!0,includeTag:!0};class xc extends W{constructor(){super(...arguments),this.clear=(e=!1)=>{if(e)this.users={},this.usernames={},this.requirementsToContactPromises=new Map,this.requirementsToContactProcessing=!1;else for(const t in this.users){if(!t)continue;const a=t.toPeerId();if(!this.peersStorage.isPeerNeeded(a)){const s=this.users[t];this.modifyUsernamesCache(s,!1),this.storage.delete(t),delete this.users[t]}}this.getTopPeersPromises={},this.contactsIndex=this.createSearchIndex(),this.contactsFillPromise=void 0,this.contactsList=new Set,this.updatedContactsList=!1},this.updateUsersStatuses=()=>{const e=te(!0);for(const t in this.users){const a=this.users[t];this.updateUserStatus(a,e)}}}after(){return this.clear(!0),setInterval(this.updateUsersStatuses,6e4),this.rootScope.addEventListener("state_synchronized",this.updateUsersStatuses),this.apiUpdatesManager.addMultipleEventsListeners({updateUserStatus:e=>{const t=e.user_id,a=this.users[t];a&&(a.status=e.status,this.saveUserStatus(a.status),this.rootScope.dispatchEvent("user_update",t),this.setUserToStateIfNeeded(a))},updateUserName:e=>{const t=e.user_id,a=this.users[t];a&&(this.forceUserOnline(t),this.saveApiUser({...a,first_name:e.first_name,last_name:e.last_name,username:void 0,usernames:e.usernames},!0))},updateUserEmojiStatus:e=>{const t=e.user_id,a=this.users[t];a&&(this.forceUserOnline(t),this.saveApiUser({...a,emoji_status:e.emoji_status},!0))},updateRecentEmojiStatuses:()=>{this.recentEmojiStatuses=void 0,this.getRecentEmojiStatuses()}}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("users")]).then(([e,{results:t,storage:a}])=>{this.storage=a,this.saveApiUsers(t);for(let n=0,i=t.length;n<i;++n){const o=t[n];o&&e.contactsListCachedTime&&(o.pFlags.contact||o.pFlags.mutual_contact)&&(this.pushContact(o.id),this.contactsFillPromise||(this.contactsFillPromise=$(),this.contactsFillPromise.resolve(this.contactsList)))}const s=e.recentSearch||[];for(let n=0,i=s.length;n<i;++n)this.peersStorage.requestPeer(s[n],"recentSearch");this.peersStorage.addEventListener("peerNeeded",n=>{if(!this.appPeersManager.isUser(n))return;const i=n.toUserId();this.storage.getFromCache(i)||this.storage.set({[i]:this.getUser(i)})}),this.peersStorage.addEventListener("peerUnneeded",n=>{if(!this.appPeersManager.isUser(n))return;const i=n.toUserId();this.storage.getFromCache(i)&&this.storage.delete(i)})})}indexMyself(){const e=this.getSelf().id;this.contactsIndex.indexObject(e,this.getUserSearchText(e))}get userId(){return this.rootScope.myId.toUserId()}onContactsModified(e){e&&this.appStateManager.pushToState("contactsListCachedTime",te(!0))}pushRecentSearch(e){return this.appStateManager.getState().then(t=>{const a=t.recentSearch||[];if(a[0]!==e){Me(a,e),a.unshift(e),a.length>20&&(a.length=20),this.appStateManager.pushToState("recentSearch",a);for(const s of a)this.peersStorage.requestPeer(s,"recentSearch")}})}clearRecentSearch(){return this.appStateManager.getState().then(e=>{const t=e.recentSearch||[];for(const a of t)this.peersStorage.releasePeer(a,"recentSearch");t.length=0,this.appStateManager.pushToState("recentSearch",t)})}fillContacts(){if(this.contactsFillPromise&&this.updatedContactsList)return{cached:this.contactsFillPromise.isFulfilled,promise:this.contactsFillPromise};this.updatedContactsList=!0;const e=$();return this.apiManager.invokeApi("contacts.getContacts").then(t=>{t._==="contacts.contacts"&&(this.contactsList.clear(),this.saveApiUsers(t.users),t.contacts.forEach(a=>{this.pushContact(a.user_id)}),this.onContactsModified(!0),this.contactsFillPromise=e),e.resolve(this.contactsList)},()=>{this.updatedContactsList=!1}),{cached:this.contactsFillPromise?.isFulfilled,promise:this.contactsFillPromise||(this.contactsFillPromise=e)}}resolveUsername(e){e[0]==="@"&&(e=e.slice(1)),e=e.toLowerCase();const t=this.usernames[e];return t?this.appPeersManager.getPeer(t):this.apiManager.invokeApiSingleProcess({method:"contacts.resolveUsername",params:{username:e},processResult:a=>this.processResolvedPeer(a)})}resolveUserByUsername(e){return se(this.resolveUsername(e),t=>t?._==="user"?t:void 0)}processResolvedPeer(e){return this.saveApiUsers(e.users),this.appChatsManager.saveApiChats(e.chats),this.appPeersManager.getPeer(oe(e.peer))}resolvePhone(e){return this.apiManager.invokeApi("contacts.resolvePhone",{phone:e}).then(t=>this.processResolvedPeer(t))}pushContact(e){this.contactsList.add(e),this.contactsIndex.indexObject(e,this.getUserSearchText(e)),this.peersStorage.requestPeer(e.toPeerId(),"contact")}popContact(e){this.contactsList.delete(e),this.contactsIndex.indexObject(e,""),this.peersStorage.releasePeer(e.toPeerId(),"contact")}getUserSearchText(e){const t=this.users[e];return t?[t.first_name,t.last_name,t.phone,...Xt(t),t.pFlags.self?"Saved Messages":""].filter(Boolean).join(" "):""}getContacts(e,t=!1,a="name"){const s=this.fillContacts().promise;return Promise.all([s,a==="rating"&&this.getTopPeers("correspondents")]).then(([n,i])=>{let o=[...n];if(e){const d=this.contactsIndex.search(e);o=[...o].filter(f=>d.has(f))}if(a==="name")o.sort((d,c)=>{const f=(this.users[d]||{}).sortName||"",l=(this.users[c]||{}).sortName||"";return f.localeCompare(l)});else if(a==="online")o.sort((d,c)=>{const f=this.getUserStatusForSort(this.getUser(d).status);return this.getUserStatusForSort(this.getUser(c).status)-f});else if(a==="rating")if(!e.trim().replace(/@/g,""))o=i.map(d=>d.id.toUserId());else{const d=new Map(i.map(c=>[c.id.toUserId(),c.rating]));o.sort((c,f)=>{const l=d.get(c)||0;return(d.get(f)||0)-l})}const p=this.userId;return Me(o,p),t&&this.testSelfSearch(e)&&o.unshift(p),o})}getContactsPeerIds(e,t,a,s){return this.getContacts(e,t,a).then(n=>{const i=n.map(o=>o.toPeerId(!1));return s?i.slice(0,s):i})}toggleBlock(e,t,a){return this.apiManager.invokeApiSingle(t?"contacts.block":"contacts.unblock",{id:this.appPeersManager.getInputPeerById(e),my_stories_from:a===void 0?void 0:!0}).then(()=>{this.apiUpdatesManager.processLocalUpdate({_:"updatePeerBlocked",peer_id:this.appPeersManager.getOutputPeer(e),pFlags:{blocked:t||void 0,blocked_my_stories_from:a||void 0}}),this.appProfileManager.refreshPeerSettingsIfNeeded(e)})}testSelfSearch(e){const t=this.getSelf(),a=this.createSearchIndex();return a.indexObject(t.id,this.getUserSearchText(t.id)),a.search(e).has(t.id)}createSearchIndex(){return new za(Bc)}saveApiUsers(e,t){!e||e.saved||(e.saved=!0,e.forEach(a=>this.saveApiUser(a,t)))}modifyUsernamesCache(e,t){const a=Xt(e);if(!a.length)return;const s=a.map(n=>Tc(n));t?s.forEach(n=>{this.usernames[n]=e.id.toPeerId(e._!=="user")}):s.forEach(n=>{delete this.usernames[n]})}setUsernameToCache(e,t){return!t||t.username!==e.username||!We(t.usernames,e.usernames)?(this.modifyUsernamesCache(t,!1),this.modifyUsernamesCache(e,!0),!0):!1}saveUserStatus(e){if(!e)return;const t=e.saved;e.expires&&!t&&(e.expires-=this.timeManager.getServerTimeOffset()),e.was_online&&!t&&(e.was_online-=this.timeManager.getServerTimeOffset()),e.saved=!0}saveApiUser(e,t){if(!e||e._==="userEmpty")return;const a=e.id,s=this.users[a];if(e.pFlags??(e.pFlags={}),e.pFlags.min&&s!==void 0)return;const n=this.setUsernameToCache(e,s);if(!s||s.sortName===void 0||s.first_name!==e.first_name||s.last_name!==e.last_name){const o=e.first_name+(e.last_name?" "+e.last_name:"");e.sortName=e.pFlags.deleted?"":Eo(o,!1)}else e.sortName=s.sortName;this.saveUserStatus(e.status),e.photo?._==="userProfilePhotoEmpty"&&delete e.photo,e.emoji_status?._==="emojiStatusEmpty"&&delete e.emoji_status;const i=a.toPeerId(!1);if(s===void 0)this.users[a]=e,this.mirrorUser(e);else{const o=e.first_name!==s.first_name||e.last_name!==s.last_name||n,p=s.photo?.photo_id,d=e.photo?.photo_id,c=p!==d,f=s.emoji_status?.document_id!==e.emoji_status?.document_id,m=s.pFlags.premium!==e.pFlags.premium||f||s.pFlags.verified!==e.pFlags.verified||s.pFlags.scam!==e.pFlags.scam||s.pFlags.fake!==e.pFlags.fake,g=!!s.pFlags.contact,_=!!e.pFlags.contact,S=this.appStoriesManager.saveApiPeerStories(e,s);$t(s,e),this.mirrorUser(s),this.rootScope.dispatchEvent("user_update",a),g!==_&&this.onContactUpdated(a,_,g),S?.(),c&&this.rootScope.dispatchEvent("avatar_update",{peerId:i}),(o||m)&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:i}),f&&e.pFlags.self&&this.rootScope.dispatchEvent("emoji_status_change")}this.checkPremium(e,s),this.setUserToStateIfNeeded(e)}mirrorUser(e){re.getInstance().invokeVoid("mirror",{name:"peers",key:""+e.id,value:e,accountNumber:this.getAccountNumber()})}checkPremium(e,t){if(e.pFlags.self){const a=!!e.pFlags.premium;this.rootScope.premium!==a&&this.rootScope.dispatchEvent("premium_toggle_private",{isNew:!t,isPremium:a})}}setUserToStateIfNeeded(e){this.peersStorage.isPeerNeeded(e.id.toPeerId())&&this.storage.set({[e.id]:e})}isUserOnlineVisible(e){return this.getUserStatusForSort(e)>3}getUserStatusForSort(e){if(typeof e!="object"&&(e=this.getUser(e)?.status),e){const t=e._==="userStatusOnline"?e.expires:e._==="userStatusOffline"?e.was_online:0;if(t)return t;switch(e._){case"userStatusRecently":return 3;case"userStatusLastWeek":return 2;case"userStatusLastMonth":return 1}}return 0}getUser(e){return be(e)?e:this.users[e]}getUsers(){return this.users}getUserStatus(e){return this.isRegularUser(e)&&!this.users[e].pFlags.self&&this.users[e].status}getApiUsers(e){return this.apiManager.invokeApi("users.getUsers",{id:e.map(t=>be(t)?t:this.getUserInput(t))}).then(t=>(this.saveApiUsers(t),t))}getSelf(){return this.getUser(this.userId)}isBot(e){return this.users[e]&&!!this.users[e].pFlags.bot}isBotforum(e){return this.users[e]&&!!this.users[e].pFlags.bot_forum_view}canManageBotforumTopics(e){return this.users[e]&&!!this.users[e].pFlags.bot_forum_can_manage_topics}isAttachMenuBot(e){return this.isBot(e)&&!!this.users[e].pFlags.bot_attach_menu}isContact(e){return this.contactsList.has(e)||!!(this.users[e]&&this.users[e].pFlags.contact)}isRegularUser(e){const t=this.users[e];return t&&!this.isBot(e)&&!t.pFlags.deleted&&!t.pFlags.support}isNonContactUser(e){return this.isRegularUser(e)&&!this.isContact(e)&&e!==this.userId}isPremium(e){return!!this.users[e]?.pFlags?.premium}isDeleted(e){return!!this.users[e]?.pFlags?.deleted}hasUser(e,t){const a=this.users[e];return be(a)&&(t||!a.pFlags.min)}canEdit(e){return this.userId===e||this.isContact(e)||!!this.users[e]?.pFlags?.bot_can_edit}getUserString(e){const t=this.getUser(e);return"u"+e+(t.access_hash?"_"+t.access_hash:"")}getUserId(e){const t=oe(e);return t?t.toUserId():be(e)&&e._==="inputUserSelf"&&this.getSelf().id||Ye}getUserInput(e){const t=this.getUser(e);return!e||t.pFlags&&t.pFlags.self?{_:"inputUserSelf"}:{_:"inputUser",user_id:e,access_hash:t.access_hash}}getUserInputPeer(e){const t=this.getUser(e);return{_:"inputPeerUser",user_id:e,access_hash:t.access_hash}}getContactMediaInput(e){const t=this.getUser(e);return{_:"inputMediaContact",first_name:t.first_name,last_name:t.last_name,phone_number:t.phone,vcard:"",user_id:e}}updateUserStatus(e,t=te(!0)){e.status&&e.status._==="userStatusOnline"&&e.status.expires<t&&(e.status={_:"userStatusOffline",was_online:e.status.expires},this.rootScope.dispatchEvent("user_update",e.id),this.setUserToStateIfNeeded(e))}forceUserOnline(e,t){if(this.isBot(e))return;const a=te(!0),s=60;if(t){if(a-t>=s)return}else if(this.apiUpdatesManager.updatesState.syncLoading)return;const n=this.getUser(e);n?.status&&n.status._!=="userStatusOnline"&&n.status._!=="userStatusEmpty"&&!n.pFlags.support&&!n.pFlags.deleted&&(n.status={_:"userStatusOnline",expires:a+s},this.rootScope.dispatchEvent("user_update",e),this.setUserToStateIfNeeded(n))}importContact(e,t,a){return this.importContacts([{first_name:e,last_name:t,phones:[a]}]).then(s=>{if(!s.length){const n=new Error;throw n.type="NO_USER",n}return s[0]})}importContacts(e){const t=[];for(let a=0;a<e.length;++a)for(let s=0;s<e[a].phones.length;++s)t.push({_:"inputPhoneContact",client_id:(a<<16|s).toString(10),phone:e[a].phones[s],first_name:e[a].first_name,last_name:e[a].last_name});return this.apiManager.invokeApi("contacts.importContacts",{contacts:t}).then(a=>(this.saveApiUsers(a.users),a.imported.map(n=>(this.onContactUpdated(n.user_id,!0),n.user_id))))}getTopPeers(e){return this.getTopPeersPromises[e]?this.getTopPeersPromises[e]:this.getTopPeersPromises[e]=this.appStateManager.getState().then(t=>{const a=t.topPeersCache[e];return a&&a.cachedTime+864e5>Date.now()&&a.peers?a.peers.filter(s=>this.appPeersManager.getPeer(s.id)):this.apiManager.invokeApi("contacts.getTopPeers",{[e]:!0,offset:0,limit:30,hash:"0"}).then(s=>{let n=[];return s._==="contacts.topPeers"&&(this.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),s.categories.length&&(n=s.categories[0].peers.map(i=>{const o=oe(i.peer);return this.peersStorage.requestPeer(o,"topPeer"),{id:o,rating:i.rating}}))),t.topPeersCache[e]={peers:n,cachedTime:Date.now()},this.appStateManager.pushToState("topPeersCache",t.topPeersCache),n})})}getBlocked(e=0,t=0){return this.apiManager.invokeApiSingle("contacts.getBlocked",{offset:e,limit:t}).then(a=>{this.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats);const s=a._==="contacts.blocked"?a.users.length+a.chats.length:a.count,n=a.users.map(i=>i.id.toPeerId()).concat(a.chats.map(i=>i.id.toPeerId(!0)));return{count:s,peerIds:n}})}getLocated(e,t,a,s=!1,n=0){const i={_:"inputGeoPoint",lat:e,long:t,accuracy_radius:a};return this.apiManager.invokeApi("contacts.getLocated",{geo_point:i,background:s}).then(o=>(this.apiUpdatesManager.processUpdateMessage(o),o))}searchContacts(e,t=20){const a=_n(e);if(a.length&&a[0].length===e.trim().length&&a[0]._==="messageEntityUrl")try{const n=new URL(Pn(e).url).pathname.slice(1);n&&(e=n)}catch{}return this.apiManager.invokeApiCacheable("contacts.search",{q:e,limit:t},{cacheSeconds:60}).then(s=>(this.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),{my_results:Qt(s.my_results.map(i=>oe(i))),results:s.results.map(i=>oe(i))}))}onContactUpdated(e,t,a=this.isContact(e)){t!==a&&(t?this.pushContact(e):this.popContact(e),this.onContactsModified(),this.rootScope.dispatchEvent("contacts_update",e))}updateUsername(e){return this.apiManager.invokeApi("account.updateUsername",{username:e}).then(t=>{this.saveApiUser(t)})}setUserStatus(e,t){if(this.isBot(e))return;const a=this.users[e];if(a){const s=t?{_:"userStatusOffline",was_online:te(!0)}:{_:"userStatusOnline",expires:te(!0)+50};a.status=s,this.rootScope.dispatchEvent("user_update",e),this.setUserToStateIfNeeded(a)}}updateMyOnlineStatus(e){return this.setUserStatus(this.getSelf().id,e),this.apiManager.invokeApiSingle("account.updateStatus",{offline:e})}addContact(e,t,a,s,n){return this.apiManager.invokeApi("contacts.addContact",{id:this.getUserInput(e),first_name:t,last_name:a,phone:s,add_phone_privacy_exception:n}).then(i=>{this.apiUpdatesManager.processUpdateMessage(i,{override:!0}),this.appProfileManager.refreshPeerSettingsIfNeeded(e.toPeerId(!1)),this.onContactUpdated(e,!0)})}deleteContacts(e){return this.apiManager.invokeApi("contacts.deleteContacts",{id:e.map(t=>this.getUserInput(t))}).then(t=>{this.apiUpdatesManager.processUpdateMessage(t,{override:!0}),e.forEach(a=>{this.onContactUpdated(a,!1)})})}checkUsername(e){return this.apiManager.invokeApi("account.checkUsername",{username:e})}canSendToUser(e){return Rc(this.getUser(e))}getCommonChats(e,t=100,a){return this.apiManager.invokeApiSingleProcess({method:"messages.getCommonChats",params:{user_id:this.getUserInput(e),limit:t,max_id:a??0},processResult:s=>(this.appChatsManager.saveApiChats(s.chats),s)})}updateEmojiStatus(e){return this.apiManager.invokeApi("account.updateEmojiStatus",{emoji_status:e}).then(()=>{this.apiUpdatesManager.processLocalUpdate({_:"updateUserEmojiStatus",user_id:this.getSelf().id,emoji_status:e})})}getDefaultEmojiStatuses(){return this.defaultEmojiStatuses??(this.defaultEmojiStatuses=this.apiManager.invokeApiSingleProcess({method:"account.getDefaultEmojiStatuses",processResult:e=>this.defaultEmojiStatuses=e}))}getRecentEmojiStatuses(){return this.recentEmojiStatuses??(this.recentEmojiStatuses=this.apiManager.invokeApiSingleProcess({method:"account.getRecentEmojiStatuses",processResult:e=>this.recentEmojiStatuses=e}))}getRequirementToContact(e,t){const a=this.getUser(e),s={_:"requirementToContactEmpty"};if(!a||a.pFlags.self||!a.send_paid_messages_stars&&(!a.pFlags.contact_require_premium||this.rootScope.premium))return s;const n=this.appProfileManager.getCachedFullUser(e);if(n)return n.pFlags.contact_require_premium&&!this.rootScope.premium?{_:"requirementToContactPremium"}:n.send_paid_messages_stars?{_:"requirementToContactPaidMessages",stars_amount:n.send_paid_messages_stars}:s;if(this.appMessagesManager.getHistoryStorage(e.toPeerId(!1)).count&&!a.send_paid_messages_stars)return s;if(!t)return this.fetchRequirementToContact(e)}fetchRequirementToContact(e){let t=this.requirementsToContactPromises.get(e);return t||this.requirementsToContactPromises.set(e,t=$()),this.getRequirementsToContact(),t}updateCachedUserFullStarsAmount(e,t){this.appProfileManager.modifyCachedFullUser(e,a=>{a.send_paid_messages_stars=t})}getStarsAmount(e,t=!1,a=!1){const s=t?this.fetchRequirementToContact(e):this.getRequirementToContact(e,a);return se(s,n=>n?._==="requirementToContactPaidMessages"?Number(n.stars_amount):void 0)}getRequirementsToContact(){this.requirementsToContactProcessing||(this.requirementsToContactProcessing=!0,qe(0).then(()=>{const e=[...this.requirementsToContactPromises.keys()];this.apiManager.invokeApi("users.getRequirementsToContact",{id:e.map(t=>this.getUserInput(t))}).then(t=>{t.forEach((a,s)=>{a._==="requirementToContactPremium"&&this.rootScope.premium&&(a={_:"requirementToContactEmpty"});const n=e[s];this.requirementsToContactPromises.get(n).resolve(a),this.requirementsToContactPromises.delete(n)})}).finally(()=>{this.requirementsToContactProcessing=!1,this.requirementsToContactPromises.size&&this.getRequirementsToContact()})}))}async getPaidMessagesRevenue({userId:e,parentPeerId:t}){return+(await this.apiManager.invokeApi("account.getPaidMessagesRevenue",{user_id:this.getUserInput(e),parent_peer:t?this.appPeersManager.getInputPeerById(t):void 0})).stars_amount}async toggleNoPaidMessagesException({userId:e,refundCharged:t,requirePayment:a,parentPeerId:s}){const n=await this.apiManager.invokeApi("account.toggleNoPaidMessagesException",{user_id:this.getUserInput(e),refund_charged:t,require_payment:a,parent_peer:s?this.appPeersManager.getInputPeerById(s):void 0});return s&&this.apiUpdatesManager.processLocalUpdate({_:"updateMonoForumNoPaidException",channel_id:s.toChatId(),pFlags:a?{}:{exception:!0},saved_peer_id:this.appPeersManager.getOutputPeer(e.toPeerId())}),n}}const Lc=new Set(["photo","video","gif","document"]);class Oc extends W{constructor(){super(...arguments),this.webpages={},this.pendingWebPages={}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateWebPage:e=>{this.saveWebPage(e.webpage)},updateChannelWebPage:e=>{this.saveWebPage(e.webpage)}})}saveWebPage(e,t,a){if(e._==="webPageNotModified"||e._==="webPageEmpty")return;const{id:s}=e,n=this.webpages[s];if(n?._==="webPage"&&e._!==n._)return this.log.warn("ignore webpage update, type changed",n,e),n;const i=n&&(n._!==e._||n.hash!==e.hash);let o=!1;if(a??(a={type:"webPage",url:e.url}),e._==="webPage"){e.photo?._==="photo"?e.photo=this.appPhotosManager.savePhoto(e.photo,a):delete e.photo,e.document?._==="document"?e.document=this.appDocsManager.saveDoc(e.document,a):(e.type==="document"&&delete e.type,delete e.document),n?._===e._&&(o=n.photo?.id!==e.photo?.id||n.document?.id!==e.document?.id);const d=e.site_name,c=e.title||e.author||"";d&&c===d&&delete e.site_name;for(const l of e.attributes||[])switch(l._){case"webPageAttributeStory":{const m=this.appStoriesManager.getPeerStoriesCache(this.appPeersManager.getPeerId(l.peer));l.story=this.appStoriesManager.saveStoryItem(l.story,m);break}}const f=e.cached_page;f&&(f.photos=f.photos?.map(l=>this.appPhotosManager.savePhoto(l,a)).filter(Boolean),f.documents=f.documents?.map(l=>this.appDocsManager.saveDoc(l,a)).filter(Boolean),e.photo&&(Xe(f.photos,l=>l.id===e.photo.id),f.photos.push(e.photo)),e.document&&(Xe(f.documents,l=>l.id===e.document.id),f.documents.push(e.document)),f.blocks.forEach(l=>{"channel"in l&&this.appChatsManager.saveApiChats([l.channel])})),!Lc.has(e.type)&&!e.description&&e.photo&&(e.type="photo")}let p=this.pendingWebPages[s];if(t&&(p||(p=this.pendingWebPages[s]=new Set),p.add(t)),n===void 0?this.webpages[s]=e:$t(n,e),(!t&&i||o)&&p!==void 0){const d=[];p.forEach(c=>{const[f,l,m]=c.split("_");d.push({peerId:f.toPeerId(),mid:+l,isScheduled:!!m})}),this.rootScope.dispatchEvent("webpage_updated",{id:s,msgs:d})}return e}getMessageKeyForPendingWebPage(e,t,a){return e+"_"+t+(a?"_s":"")}deleteWebPageFromPending(e,t){const a=e.id;if(!a)return;const s=this.pendingWebPages[a];s&&s.has(t)&&(s.delete(t),s.size||delete this.pendingWebPages[a])}getCachedWebPage(e){return this.webpages[e]}getWebPage(e){return this.apiManager.invokeApiHashable({method:"messages.getWebPage",processResult:t=>(this.appPeersManager.saveApiPeers(t),this.saveWebPage(t.webpage)),params:{url:e}})}}class Vc extends W{after(){this.apiUpdatesManager.addMultipleEventsListeners({updateLangPack:e=>{this.rootScope.dispatchEvent("langpack_update",e)},updateLangPackTooLong:e=>{this.rootScope.dispatchEvent("langpack_update_too_long",e)}})}getLangPack(e,t,a){return this.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:e,lang_pack:t},{override:a})}getCountriesList(e,t){return this.apiManager.invokeApiCacheable("help.getCountriesList",{lang_code:e,hash:0},{override:t})}getStrings(e,t){return this.apiManager.invokeApi("langpack.getStrings",{lang_pack:le.langPack,lang_code:e,keys:t})}getDifference(e,t){return this.apiManager.invokeApi("langpack.getDifference",{lang_code:e,from_version:t,lang_pack:le.langPack})}}function Nc(r){return["image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/bmp","image/avif","image/jxl","video/mp4","video/webm","video/quicktime","audio/ogg","audio/mpeg","audio/mp4","audio/wav","application/json","application/pdf"].indexOf(r)===-1?"application/octet-stream":r}function Mr(r,e=""){r=ha(r);const t=Nc(e);return new Blob(r,{type:t})}function Gc(r,e){return new Promise(t=>{const a=new FileReader;a.addEventListener("loadend",s=>{t(s.target.result)}),a[e](r)})}function Sr(r){return Gc(r,"readAsArrayBuffer")}function an(r){return Sr(r).then(e=>new Uint8Array(e))}class qc{constructor(e,t,a){this.mimeType=e,this.size=t,this.saveFileCallback=a,this.bytes=new Uint8Array(t)}async write(e,t){const a=t+e.byteLength;if(a>this.bytes.byteLength){const s=new Uint8Array(a);s.set(this.bytes,0),this.bytes=s}this.bytes.set(e,t)}truncate(){this.bytes=new Uint8Array}trim(e){this.bytes=this.bytes.slice(0,e)}finalize(e=!0){const t=Mr(this.bytes,this.mimeType);return e&&this.saveFileCallback&&this.saveFileCallback(t),t}getParts(){return this.bytes}replaceParts(e){this.bytes=e}}const Bs={cachedTime:"Time-Cached",contentLength:"Content-Length",contentType:"Content-Type"},xs={cachedAssets:{encryptable:!1},cachedBackgrounds:{encryptable:!1},cachedFiles:{encryptable:!0},cachedStreamChunks:{encryptable:!0},cachedHlsQualityFiles:{encryptable:!0},cachedHlsStreamChunks:{encryptable:!0}},br=15e3,jc=br,zc=4,$e=class $e{constructor(e){this.dbName=e,this.useStorage=!0,ce.test&&(this.dbName+="_test"),$e.STORAGES.length&&(this.useStorage=$e.STORAGES[0].useStorage),this.config=Object.entries(xs).find(([t])=>t===e)?.[1],this.openDatabase(),$e.STORAGES.push(this)}forget(){$e.STORAGES=$e.STORAGES.filter(e=>e!==this)}get isEncryptable(){return this.config?.encryptable}static async encrypt(e){const t=await Dt.get(),a=await an(e),s=e.type,n=await Y.invokeCryptoNew({method:"aes-local-encrypt",args:[{key:t,data:a}],transfer:[a.buffer]});return new Blob([n],{type:s})}static async decrypt(e){const t=await Dt.get(),a=await an(e),s=e.type,n=await Y.invokeCryptoNew({method:"aes-local-decrypt",args:[{key:t,encryptedData:a}],transfer:[a.buffer]});return new Blob([n],{type:s})}getDisabledPromises(){return[$e.disabledPromise,$e.disabledPromisesByKey.get(this.dbName)].filter(Boolean)}async waitToEnable(){let e;for(;(e=this.getDisabledPromises()).length;)await Promise.all(e)}openDatabase(){return this.openDbPromise??(this.openDbPromise=caches.open(this.dbName))}delete(e){return this.timeoutOperation(t=>t.delete("/"+e))}deleteAll(){return this.openDbPromise=void 0,caches.delete(this.dbName)}reset(){this.openDbPromise=void 0}async minimalBlockingIterateResponses(e){await this.waitToEnable();const t=10;await this.timeoutOperation(async a=>{const s=await a.keys();let n=performance.now();for(let i=0;i<s.length;i+=t){const o=s.slice(i,i+t);await Promise.all(o.map(async d=>{const c=await a.match(d),f=e({request:d,response:c,cache:a});f instanceof Promise&&await f}));const p=performance.now();p-n>zc&&(await qe(0),n=p)}},jc)}async has(e){return!!await this.timeoutOperation(a=>a.match("/"+e))}async get(e){await this.waitToEnable();const t=await this.timeoutOperation(a=>a.match("/"+e));if(t)return this.config?.encryptable&&await mt.isUsingPasscode()?new Response(await $e.decrypt(await t.blob()),{headers:t.headers,status:t.status,statusText:t.statusText}):t}async save({entryName:e,response:t,size:a,contentType:s}){await this.waitToEnable();let n=new Response(t.body,{headers:{...Object.fromEntries(t.headers),[Bs.cachedTime]:Math.floor(Date.now()/1e3|0).toString(),[Bs.contentLength]:a.toString(),...s?{[Bs.contentType]:s}:{}},status:t.status,statusText:t.statusText});return this.config?.encryptable&&await mt.isUsingPasscode()&&(n=new Response(await $e.encrypt(await t.blob()),{headers:n.headers,status:n.status,statusText:n.statusText})),this.timeoutOperation(i=>i.put("/"+e,n))}getFile(e,t="blob"){return this.get(e).then(a=>{if(!a)throw ne("NO_ENTRY_FOUND");return a[t]()})}saveFile(e,t){t instanceof Blob||(t=Mr(t));const a=new Response(t);return this.save({entryName:e,response:a,size:t.size}).then(()=>t)}timeoutOperation(e,t=br){return this.useStorage?new Promise(async(a,s)=>{let n=!1;const i=setTimeout(()=>{s(),n=!0},t);try{const o=await this.openDatabase();if(!o)throw this.useStorage=!1,this.openDbPromise=void 0,"no cache?";const p=await e(o);if(n)return;a(p)}catch(o){s(o)}clearTimeout(i)}):Promise.reject(ne("STORAGE_OFFLINE"))}prepareWriting(e,t,a){return{deferred:$(),getWriter:()=>new qc(a,t,n=>this.saveFile(e,n).catch(()=>n))}}static toggleStorage(e,t){return this.STORAGES.forEach(a=>{a.useStorage=e}),Promise.resolve()}static async deleteAllStorages(){const e=Object.keys(xs);await Promise.all(e.map(async t=>{await new $e(t).deleteAll()}))}static temporarilyToggle(e){e?(this.disabledPromise?.resolve(),this.disabledPromise=void 0):this.disabledPromise||(this.disabledPromise=$())}static temporarilyToggleByName(e,t){const a=this.disabledPromisesByKey.has(e);t?(this.disabledPromisesByKey.get(e)?.resolve(),this.disabledPromisesByKey.delete(e)):a||this.disabledPromisesByKey.set(e,$())}static temporarilyToggleByNames(e,t){e.forEach(a=>this.temporarilyToggleByName(a,t))}static async clearEncryptableStorages(){const e=Object.entries(xs).filter(([,{encryptable:t}])=>t).map(([t])=>t);await this.clearStoragesByNames(e)}static async clearStoragesByNames(e){await Promise.all(e.map(async t=>{const a=new $e(t);try{await a.deleteAll()}catch(s){console.error(s)}finally{a.forget()}}))}static getOpenEncryptableStorages(){return this.STORAGES.filter(e=>e.isEncryptable)}static resetOpenEncryptableCacheStorages(){this.getOpenEncryptableStorages().forEach(t=>t.reset())}static getOpenStoragesByNames(e){return this.STORAGES.filter(t=>e.includes(t.dbName))}static async resetOpenStoragesByNames(e){this.getOpenStoragesByNames(e).forEach(a=>a.reset())}};$e.STORAGES=[],$e.disabledPromisesByKey=new Map;let bt=$e;function Hc(r){const e=r.indexOf("<svg");e!==0&&(r=r.slice(e));const[t,a,s,n]=r.match(/viewBox="(.+?)"/)[1].split(" ");return r=r.replace(/>/,` width="${s}" height="${n}">`).replace(/[^\x00-\x7F]/g,""),r}function Kc(r,e,t,a){const s=r._==="document";if(!e||e._==="photoSizeEmpty")throw new Error("photoSizeEmpty!");const n=!!((e._==="photoSize"||e._==="photoSizeProgressive")&&r.access_hash&&r.file_reference),i={_:s?"inputDocumentFileLocation":"inputPhotoFileLocation",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference,thumb_size:e.type};return{dcId:r.dc_id,location:i,size:n?e.size:void 0,mimeType:"image/jpeg",queueId:t,onlyCache:a}}function Dr(r){return{dcId:0,location:r,size:0,mimeType:"image/jpeg"}}function Wc(r){const e=Dr({_:"inputWebFileLocation",access_hash:r.access_hash,url:r.url});return e.size=r.size,e.mimeType=r.mime_type,e}function Jc(r){return!!(r&&(r._==="webDocument"||r._==="webDocumentNoProxy"))}function Mn(r){return r?._.includes("inputWebFile")}function sn(r){return Hi(r.location,r)}function $c(r){const{media:e,thumb:t,queueId:a,onlyCache:s}=r;let n;return e._==="document"?n=Ki(e,{thumb:t,queueId:a,onlyCache:s}):e._==="photo"?n=Kc(e,t,a,s):Jc(e)?n=Wc(e):Mn(e)&&(n=Dr(e),r.fileName&&(n.fileName=r.fileName)),n.downloadId=r.downloadId,{fileName:sn(n),downloadOptions:n}}function Qc(r){return encodeURIComponent(r).replace(/['()]/g,escape).replace(/\*/g,"%2A")}class Yc{constructor(e,t){this.serviceMessagePort=e,this.downloadId=t,this.serviceMessagePort=yt.getServiceMessagePort()}async write(e,t){return this.serviceMessagePort.invoke("downloadChunk",{id:this.downloadId,chunk:e})}finalize(e){return this.serviceMessagePort.invoke("downloadFinalize",this.downloadId).then(()=>{})}}class Xc{getFile(e){return Promise.reject(ne("NO_ENTRY_FOUND"))}prepareWriting({fileName:e,downloadId:t,size:a}){const s={"Content-Disposition":"attachment; filename*=UTF-8''"+Qc(e),...a?{"Content-Length":a}:{}},n=yt.getServiceMessagePort(),i=n.invoke("download",{headers:s,id:t}),o=$();return o.cancel=()=>{o.reject(ne("DOWNLOAD_CANCELED"))},o.catch(()=>{yt.getServiceMessagePort().invoke("downloadCancel",t)}),i.then(o.resolve.bind(o),o.reject.bind(o)),{deferred:o,getWriter:()=>new Yc(n,t)}}}function Zc(r,e,t){return Math.min(t,Math.max(e,r))}const ef=1*1024*1024,tf=512*1024,fs=64*1024,af=512*1024,sf=9*512*1024/fs,nf=56*512*1024/fs,rf=new Set(["DOWNLOAD_CANCELED","UPLOAD_CANCELED","UNKNOWN","NO_NEW_CONTEXT"]),of=new Set(["application/zip","application/x-7z-compressed","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-xz","application/zstd","application/pdf","application/epub+zip","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/wasm","application/x-protobuf","application/octet-stream"]);function pf(r){return r.startsWith("image/")||r.startsWith("video/")||r.startsWith("audio/")||of.has(r)}class df extends W{constructor(){super(),this.cacheStorage=new bt("cachedFiles"),this.downloadStorage=new Xc,this.downloadPromises={},this.requestFilePartReferences=new Map,this.uploadPromises={},this.downloadPulls={},this.downloadActives={},this.refreshReferencePromises={},this.tempId=0,this.queueId=0,this.debug=ce.debug,this.maxUploadParts=4e3,this.maxDownloadParts=8e3,this.uncompressTGS=(e,t)=>this.cryptoWorker.invokeCrypto("gzipUncompress",e.slice().buffer,!1),this.uncompressTGV=(e,t)=>{const a=e.slice().buffer;return Ft().IS_FIREFOX?this.cryptoWorker.invokeCrypto("gzipUncompress",a,!0).then(s=>Hc(s)).then(s=>new TextEncoder().encode(s)):this.cryptoWorker.invokeCrypto("gzipUncompress",a,!1)},this.convertWebp=(e,t)=>re.getInstance().invoke("convertWebp",{fileName:t,bytes:e}),this.convertOpus=(e,t)=>re.getInstance().invoke("convertOpus",{fileName:t,bytes:e}),this.name="AFM",this.logTypes=ye.Error|ye.Log}after(){setInterval(()=>{for(const e in this.refreshReferencePromises){const t=this.refreshReferencePromises[e];(t.isFulfilled||t.isRejected)&&delete this.refreshReferencePromises[e]}},18e5),this.rootScope.addEventListener("config",e=>{this.webFileDcId=e.webfile_dc_id}),this.rootScope.addEventListener("app_config",e=>{this.maxUploadParts=this.rootScope.premium?e.upload_max_fileparts_premium:e.upload_max_fileparts_default,this.maxDownloadParts=e.upload_max_fileparts_premium})}downloadRequest({dcId:e,id:t,cb:a,activeDelta:s,queueId:n=0,priority:i=0}){this.downloadPulls[e]===void 0&&(this.downloadPulls[e]=[],this.downloadActives[e]=0);const o=this.downloadPulls[e],p=new Promise((d,c)=>{Ct(o,{id:t,queueId:n,cb:a,deferred:{resolve:d,reject:c},activeDelta:s,priority:i},"priority",-1)});return this.downloadCheck(e),p}downloadCheck(e){const t=this.downloadPulls[e],a=this.rootScope.premium?nf:sf;if(this.downloadActives[e]>=a||!t?.length)return!1;const s=t[0].priority?t.shift():Xe(t,o=>o.queueId===0)||Xe(t,o=>o.queueId===this.queueId)||t.shift(),n=s.activeDelta||1;this.downloadActives[e]+=n;const i=s.cb();i.then(()=>{this.downloadActives[e]-=n,this.downloadCheck(e)},o=>{rf.has(o?.type)||this.log.error("downloadCheck error:",o),this.downloadActives[e]-=n,this.downloadCheck(e)}).finally(()=>{i.then(s.deferred.resolve,s.deferred.reject)})}setQueueId(e){this.queueId=e}getFileStorage(){return this.cacheStorage}cancelDownload(e){const t=[this.downloadPromises[e],this.uploadPromises[e]].filter(Boolean);let a=!1;for(let s=0,n=t.length;s<n;++s){const i=t[s];i&&!i.isRejected&&!i.isFulfilled&&(i.cancel(),a=!0)}return a}cancelDownloadByReference(e){const t=this.requestFilePartReferences.get(e);if(t)for(const a of t)a.reject(ne("DOWNLOAD_CANCELED"))}requestWebFilePart({dcId:e,location:t,offset:a,limit:s,id:n,queueId:i,checkCancel:o}){return this.downloadRequest({dcId:this.webFileDcId,id:n,cb:async()=>{if(o?.(),"url"in t){const p=t.url;if(this.isLocalWebFile(p))return fetch(p).then(d=>d.arrayBuffer()).then(d=>{const c=p.split(".").pop(),f=ze[c]||"application/octet-stream";return{_:"upload.webFile",size:d.byteLength,mime_type:f,file_type:{_:"storage.fileUnknown"},mtime:0,bytes:new Uint8Array(d)}});if(this.isWebAppExtFile(p)){const d=p.replace("web-app-ext:",""),c=await fetch(d,{method:"GET",headers:{Range:`bytes=${a}-${a+s-1}`}}),f=await c.arrayBuffer(),l=c.headers.get("content-range");let m=parseInt(l?.split("/")[1]??"0");if(a==0&&m===0){const g=await fetch(d,{method:"HEAD"}).catch(()=>null);if(g&&g.status===200&&(m=parseInt(g.headers.get("content-length")??"0")),m===0){const _=await fetch(d,{method:"GET"}).catch(()=>null);_&&_.status===200&&(m=parseInt(_.headers.get("content-length")??"0"))}}return{_:"upload.webFile",size:m,mime_type:c.headers.get("content-type")??"application/octet-stream",file_type:{_:"storage.fileUnknown"},mtime:0,bytes:new Uint8Array(f)}}}return this.apiManager.invokeApi("upload.getWebFile",{location:t,offset:a,limit:s},{dcId:this.webFileDcId,fileDownload:!0})},activeDelta:this.getDelta(s),queueId:i})}requestFilePart({dcId:e,location:t,offset:a,limit:s,id:n,queueId:i,checkCancel:o,floodMaxTimeout:p,priority:d}){const c=()=>this.invokeApiWithReference({context:t,callback:()=>this.apiManager.invokeApi("upload.getFile",{location:t,offset:a,limit:s},{dcId:e,fileDownload:!0,floodMaxTimeout:p}),checkCancel:o});return this.downloadRequest({dcId:e,id:n,cb:c,activeDelta:this.getDelta(s),queueId:i,priority:d})}getDelta(e){return e/fs}getLimitPart(e,t){if(!e)return af;let a=fs;const s=t?this.maxUploadParts:this.maxDownloadParts,n=t?tf:ef;for(;e/a>s&&a<n;)a*=2;return a}useReference(e,t){const a=$();t.then(a.resolve.bind(a),a.reject.bind(a));let s=this.requestFilePartReferences.get(e);return s||this.requestFilePartReferences.set(e,s=new Set),s.add(a),a.finally(()=>{s.delete(a),s.size||this.requestFilePartReferences.delete(e)}),a}async invokeApiWithReference({context:e,callback:t,checkCancel:a}){a?.();const s=e.file_reference,n=async()=>{a?.();const i=s?ue(s):void 0;let o=t();return s&&(o=this.useReference(s,o)),o.catch(async p=>{if(a?.(),p.type==="FILE_REFERENCE_EXPIRED"||p.type==="FILE_REFERENCE_INVALID")return this.refreshReference(e,s,i).then(n);throw p})};return n()}refreshReference(e,t,a){const s=ue(t);if(s!==a)return Promise.resolve(t);let n=this.refreshReferencePromises[s];return n||(n=this.refreshReferencePromises[s]=$(),this.referencesStorage.refreshReference(t).then(i=>{s===ue(i)&&n.reject(ne("REFERENCE_IS_NOT_REFRESHED")),n.resolve(i)},n.reject.bind(n))),n}isDownloading(e){return!!this.downloadPromises[e]}getDownload(e){return this.downloadPromises[e]}getUpload(e){return this.uploadPromises[e]}getConvertMethod(e){let t;return e==="application/x-tgwallpattern"?(t=this.uncompressTGV,e="image/svg+xml"):e==="image/webp"&&!Ft().IS_WEBP_SUPPORTED?(t=this.convertWebp,e="image/png"):e==="application/x-tgsticker"?(t=this.uncompressTGS,e="application/json"):e==="audio/ogg"&&!Ft().IS_OPUS_SUPPORTED&&(t=this.convertOpus,e="audio/wav"),{mimeType:e,process:t}}isLocalWebFile(e){return e?.startsWith("assets/")}isWebAppExtFile(e){return e?.startsWith("web-app-ext:")}download(e){const t=this.log.bindPrefix("download");let a=e.size??0;const{dcId:s,location:n}=e;let{downloadId:i}=e;i&&!yt.getServiceMessagePort()&&(t.error("fallback to blob",e),i=void 0);const o=e.mimeType,p=this.getConvertMethod(o),{process:d}=p;e.mimeType=p.mimeType||"image/jpeg";const c=sn(e),f=i?sn({...Oe(e),downloadId:void 0}):c,l=this.getFileStorage(),m=i?this.downloadStorage:void 0;let g=i?void 0:this.downloadPromises[c];if(t("start",c,e,a),g)return g;const _=(M,v)=>{if(!M?.error)for(const y of R)M&&M!==y||(y.error=v,y.deferred.reject(v))},S=Mn(n),D=S&&this.isLocalWebFile(n.url),C=S&&this.isWebAppExtFile(n.url),b=this.tempId++,w=D?a:e.limitPart||this.getLimitPart(a,!1);let k=l.getFile.bind(l),B,L;const R=[],T=a||w,V=()=>R.reduce((M,v)=>M+ +!!v.error,0),O=(M,v)=>{const{deferred:y}=M,x=_.bind(null,M);y.cancel=()=>y.reject(ne("DOWNLOAD_CANCELED")),y.catch(A=>{x(A),M.writer?.truncate?.()}).finally(()=>{this.downloadPromises[v]===y&&delete this.downloadPromises[v],delete M.writer}),this.downloadPromises[v]=y,R.push(M)};if(l&&(!m||T<=Bn)&&(B=l.prepareWriting(f,T,e.mimeType),O(B,f)),m){let M=e.fileName;if(!M){M=f;const v=Wi[e.mimeType];v&&(M+="."+v)}L=m.prepareWriting({fileName:M,downloadId:i,size:T}),O(L,c),B&&L.deferred.catch(v=>B.deferred.reject(v))}g=L?.deferred??B.deferred,m&&d&&(k=m.getFile.bind(m)),k(f).then(async M=>{if(h(),L){const v=L.writer=L.getWriter();h();const y=await an(M);h(),await v.write(y),h(),L.deferred.resolve(await v.finalize())}B&&B.deferred.resolve(M)}).catch(async M=>{if(e.onlyCache){_(null,M);return}R.forEach(Z=>{Z.writer=Z.getWriter()});const v=1/0,y=(S?this.requestWebFilePart:this.requestFilePart).bind(this);S&&this.webFileDcId===void 0&&!D&&!C&&(await this.apiManager.getConfig(),h());const x={done:0,offset:0,total:a,fileName:c},A=()=>{try{h(),x.done=j,this.rootScope.dispatchEvent("download_progress",x)}catch{}},F=yn(A,50,!0);let j=0,K=Promise.resolve(),ae=0;const De=async()=>{if(ae&&ae>a)return;const Z=$(),fe=K,ee=ae;K=Z,ae+=w;try{h();const Ie=performance.now(),Be=await y({dcId:s,location:n,offset:ee,limit:w,id:b,queueId:e.queueId,checkCancel:h});h();const he=performance.now()-Ie,Ze=Be.bytes,we=Ze.byteLength;t("requestPart result",c,Be),a===0&&Be._==="upload.webFile"&&Be.size>0&&(a=Be.size);const me=ee+w>=a||!we;if(we){j+=we,me?A():(De(),F());const Fe=performance.now();await fe,h();const Pe=performance.now()-Fe,et=performance.now();await Promise.all(R.map(({writer:Nt})=>Nt?.write(Ze,ee))),h(),i&&t("write time",performance.now()-et,"request time",he,"queue time",Pe)}if(me&&(!a||j<a)&&R.forEach(({writer:Fe})=>Fe?.trim?.(j)),me&&d){const Fe=R.filter(({writer:Pe})=>Pe?.getParts&&Pe.replaceParts).map(async({writer:Pe})=>{const et=Pe.getParts(),Nt=await d(et,f);Pe.replaceParts(Nt)});await Promise.all(Fe),h()}if(Z.resolve(),me){const Fe=j<=Bn;R.forEach(Pe=>{const{deferred:et,writer:Nt}=Pe;if(et.isFulfilled||et.isRejected||!Nt)return;const Ps=Nt.finalize(Fe);et.resolve(Ps)})}}catch(Ie){_(null,Ie),Z.resolve()}};for(let Z=0,fe=Zc(a/w,1,v);Z<fe;++Z)De()}).catch(Se);const h=()=>{if(V()===R.length)throw R[0].error};return g}downloadMedia(e){let{media:t,thumb:a}=e;const s=t._==="photo";if(s&&!a)return Promise.reject("preloadPhoto photoEmpty!");const n=t._==="document";n?t=this.appDocsManager.getDoc(t.id):s&&(t=this.appPhotosManager.getPhoto(t.id)),e.media=t||e.media;const{fileName:i,downloadOptions:o}=$c(e);let p=this.getDownload(i);return p||(p=this.download(o),n&&!a&&(this.rootScope.dispatchEvent("document_downloading",t.id),p.then(()=>{this.rootScope.dispatchEvent("document_downloaded",t.id)}).catch(Se))),p}downloadMediaURL(e){const{media:t,thumb:a}=e;let s=this.thumbsStorage.getCacheContext(t,a?.type);return(!a||s.downloaded>=("size"in a?a.size:0))&&s.url?Promise.resolve(s.url):this.downloadMedia(e).then(n=>{if(!s.downloaded||!s.url||s.downloaded<n.size){const i=URL.createObjectURL(n);s=this.thumbsStorage.setCacheContextURL(t,s.type,i,n.size)}return s.url})}downloadMediaVoid(e){return this.downloadMedia(e).then(Se)}delete(e){return delete this.downloadPromises[e],this.getFileStorage().delete(e)}upload({file:e,fileName:t}){t||(t=Xs(e));const a=e.size,s=a>=10485760,n=this.getLimitPart(a,!0),i=this.getDelta(n),o=Math.ceil(a/n),p=Et(),d={_:s?"inputFileBig":"inputFile",id:p,parts:o,name:t,md5_checksum:""},c=$();if(o>this.maxUploadParts)return c.reject(ne("FILE_TOO_BIG")),c;let f=!1,l=!1,m=B=>{B?.type!=="UPLOAD_CANCELED"&&this.log.error("up error",B),c.reject(B),f=!0,m=Se};const g=s?"upload.saveBigFilePart":"upload.saveFilePart",_=this.tempId++,S=this;function*D(){let B=0,L=0;for(let R=0;R<a;R+=n){const T=B++;yield S.downloadRequest({dcId:"upload",id:_,cb:async()=>{C();const V=e.slice(R,R+n),O=await Sr(V);return C(),S.debug&&S.log("Upload file part, isBig:",s,T,O.byteLength,new Uint8Array(O).length,new Uint8Array(O).slice().length),S.apiManager.invokeApi(g,{file_id:p,file_part:T,file_total_parts:o,bytes:O},{fileUpload:!0,gzipCompress:pf(e.type)?void 0:!0}).then(()=>{if(f)return;++L;const h={done:L*n,offset:R,total:a,fileName:t};c.notify(h),L>=o&&(c.resolve(d),l=!0)},m)},activeDelta:i}).catch(m)}}const C=()=>{if(f)throw ne("UPLOAD_CANCELED")};c.cancel=()=>{!f&&!l&&(f=!0,m(ne("UPLOAD_CANCELED")))},c.notify=B=>{this.rootScope.dispatchEvent("download_progress",B)},c.finally(()=>{this.uploadPromises[t]===c&&delete this.uploadPromises[t]}),this.uploadPromises[t]=c;const b=D(),w=()=>{if(f)return;const B=b.next();B.done||f||B.value.then(w)},k=1/0;for(let B=0,L=Math.min(k,o);B<L;++B)w();return c}}class cf{constructor(){this.prefix="",this.cache={},this.useStorage=!0,ce.test&&(this.prefix="t_")}get(e,t=!0){if(this.cache.hasOwnProperty(e)&&t)return this.cache[e];if(this.useStorage){let a;try{a=localStorage.getItem(this.prefix+e)}catch{throw this.useStorage=!1,ne("STORAGE_OFFLINE")}if(a!==null)try{a=JSON.parse(a)}catch{}else a=void 0;return a}else throw ne("STORAGE_OFFLINE")}set(e,t=!1){let a;for(const s in e)if(e.hasOwnProperty(s)){const n=e[s];if(this.cache[s]=n,!t)try{if(!this.useStorage)throw ne("STORAGE_OFFLINE");const i=JSON.stringify(n);localStorage.setItem(this.prefix+s,i)}catch(i){this.useStorage=!1,a=i}}if(a)throw a}delete(e,t=!1){e=""+e,t||delete this.cache[e];try{localStorage.removeItem(this.prefix+e)}catch{}}clear(e=[]){try{const t={};e?.length&&e.forEach(a=>{const s=this.get(a);s!==void 0&&(t[a]=s)}),localStorage.clear(),e?.length&&this.set(t)}catch{}}toggleStorage(e,t){if(this.useStorage=e,!!t&&e)return this.set(this.cache)}}const At=class At{constructor(e=[]){this.log=je("[local-storage-controller]"),At.STORAGES.push(this),this.encryptableKeys=new Set(e),Lt||(this.storage=new cf)}async getEncryptedStorage(){return this.encryptedStorage?this.encryptedStorage:(this.encryptedStorage=ft.getInstance(At.ENCRYPTION_DB,At.ENCRYPTION_DB_STORE_NAME),this.encryptedStorage.loadEncrypted(),this.encryptedStorage)}async shouldUseEncryptableStorage(e){return this.encryptableKeys.has(e)===!1?!1:mt.isUsingPasscode()}async localStorageProxy(e,...t){return Lt?re.getInstance().invoke("localStorageProxy",{type:e,args:t}):(t=Array.prototype.slice.call(t),this.storage[e].apply(this.storage,t))}async encryptedStorageProxy(e,...t){return Lt?(await this.getEncryptedStorage())[e](...t):re.getInstance().invoke("localStorageEncryptedProxy",{type:e,args:t})}async waitEncryptionToFinish(){this.encryptionDeferred&&await this.encryptionDeferred}async get(e,t){return await this.waitEncryptionToFinish(),await this.shouldUseEncryptableStorage(e)?(await this.encryptedStorageProxy("get",[e]))[0]:this.localStorageProxy("get",e,t)}async set(e){await this.waitEncryptionToFinish(),e={...e};const t=Object.keys(e).filter(a=>this.encryptableKeys.has(a));if(t.length&&await this.shouldUseEncryptableStorage(t[0])){const a=t.map(s=>e[s]);await this.encryptedStorageProxy("save",t,a),t.forEach(s=>{delete e[s]})}if(Object.keys(e).length)return this.localStorageProxy("set",e)}async delete(e){return await this.waitEncryptionToFinish(),await this.shouldUseEncryptableStorage(e)?this.encryptedStorageProxy("delete",e):this.localStorageProxy("delete",e)}toggleStorage(e,t){return this.localStorageProxy("toggleStorage",e,t)}warnAboutEncrypting(e){return Lt?!1:(this.log.warn(`${e} should not be called in a window client, call it only in the MTProto worker`),!0)}async encryptEncryptable(){if(this.warnAboutEncrypting("encryptEncryptable"))return;this.encryptionDeferred=$();const e=Array.from(this.encryptableKeys.values()),t=await Promise.all(e.map(n=>this.localStorageProxy("get",n))),a=e.map((n,i)=>[n,t[i]]).filter(n=>n[1]),s=Object.fromEntries(a);this.encryptedStorage=ft.getInstance(At.ENCRYPTION_DB,At.ENCRYPTION_DB_STORE_NAME),await this.encryptedStorage.loadDecrypted(s),await Promise.all(a.map(([n])=>this.localStorageProxy("set",n,!0))),await Promise.all(a.map(([n])=>this.localStorageProxy("delete",n))),this.encryptionDeferred?.resolve(),this.encryptionDeferred=void 0}async reEncryptEncryptable(){if(this.warnAboutEncrypting("reEncryptEncryptable"))return;this.encryptionDeferred=$(),await(await this.getEncryptedStorage()).reEncrypt(),this.encryptionDeferred?.resolve(),this.encryptionDeferred=void 0}async decryptEncryptable(){if(this.warnAboutEncrypting("decryptEncryptable"))return;this.encryptionDeferred=$();const e=await this.getEncryptedStorage(),a=(await e.getAllEntries()).filter(n=>this.encryptableKeys.has(n[0])),s=Object.fromEntries(a);await this.localStorageProxy("set",s),await e.clear(),this.encryptionDeferred?.resolve(),this.encryptionDeferred=void 0}};At.STORAGES=[],At.ENCRYPTION_DB=ns(),At.ENCRYPTION_DB_STORE_NAME="localStorage__encrypted";let nn=At;const Ve=new nn(["account1","account2","account3","account4","auth_key_fingerprint","user_auth","dc"]);pe.appStorage=Ve;class Cr extends ba{constructor(){super(),this.myId=Ye,this.connectionStatus={},this.premium=!1,this.addEventListener("user_auth",({id:e})=>{this.myId=e.toPeerId()}),this.addEventListener("premium_toggle_private",({isNew:e,isPremium:t})=>{this.premium=t,e||this.dispatchEventSingle("premium_toggle",t)}),this.addEventListener("connection_status_change",e=>{this.connectionStatus[e.name]=e}),this.dispatchEvent=(e,...t)=>{super.dispatchEvent(e,...t),(async()=>{const a=this.managers?await this.managers.apiManager.getAccountNumber():void 0;re.getInstance().invokeVoid("event",{name:e,args:t,accountNumber:a})})()}}getConnectionStatus(){return this.connectionStatus}getPremium(){return this.premium}getMyId(){return this.myId}dispatchEventSingle(e,...t){super.dispatchEvent(e,...t)}}const Le=new Cr;pe.rootScope=Le;class ff extends W{constructor(){super(),this.hashes={},this.apiPromisesSingleProcess={},this.apiPromisesSingle={},this.apiPromisesCacheable={},this.afterMessageIdTemp=0}after(){this.rootScope.addEventListener("managers_ready",async()=>{const t=await e;this.applyAppConfig(t,!1)},{once:!0});const e=this.appStateManager.getState().then(t=>t.appConfig);return e}setUser(e){return this.appUsersManager.saveApiUser(e),Le.dispatchEvent("account_logged_in",{accountNumber:this.getAccountNumber(),userId:e.id}),this.setUserAuth(e.id)}invokeApiAfter(e,t={},a={}){let s=a;return s.prepareTempMessageId=""+ ++this.afterMessageIdTemp,s={...a},a.messageId=s.prepareTempMessageId,this.invokeApi(e,t,s)}invokeApiHashable(e){e.params??(e.params={}),e.options??(e.options={});const{params:t,options:a,method:s,overwrite:n}=e,i=JSON.stringify(t);let o;return this.hashes[s]&&(o=this.hashes[s][i],o&&(n?(delete this.hashes[s][i],o=void 0):t.hash=o.hash)),this.invokeApiSingleProcess({method:s,processResult:p=>{if(p._.includes("NotModified"))return o.result;if(p.hash){const d=p.hash;this.hashes[s]||(this.hashes[s]={}),o=this.hashes[s][i]={hash:d,result:p}}if(e.processResult){const d=e.processResult(p);return o?o.result=d:d}return p},params:t,options:a})}invokeApiSingle(e,t={},a={}){const s=e+"-"+JSON.stringify(t),n=this.apiPromisesSingle;return n[s]?n[s]:n[s]=this.invokeApi(e,t,a).finally(()=>{delete n[s]})}invokeApiSingleProcess(e){e.params??(e.params={}),e.options??(e.options={});const{method:t,processResult:a,processError:s,params:n,options:i}=e,o=this.apiPromisesSingleProcess,p=i.cacheKey||JSON.stringify(n),d=o[t]??(o[t]=new Map),c=d.get(p);if(c)return c;const f=()=>{const _=d.get(p);return _===g?void 0:_},g=this.invokeApi(t,n,i).then(_=>f()||(a?a(_):_),_=>{const S=f();if(S)return S;if(!s)throw _;return s(_)}).finally(()=>{d.get(p)===g&&(d.delete(p),d.size||delete o[t])});return d.set(p,g),g}invokeApiCacheable(e,t={},a={}){var d;const s=(d=this.apiPromisesCacheable)[e]??(d[e]={}),n=JSON.stringify(t);let i=s[n];if(i&&(!a.override||!i.fulfilled)){if(a.syncIfHasResult){if(i.hasOwnProperty("result"))return i.result;if(i.hasOwnProperty("error"))throw i.error}return i.promise}a.override&&(i?.timeout&&(clearTimeout(i.timeout),delete i.timeout),delete a.override);let o;a.cacheSeconds&&(o=de.setTimeout(()=>{s[n]===i&&delete s[n]},a.cacheSeconds*1e3),delete a.cacheSeconds);const p=this.invokeApi(e,t,a);return p.then(c=>{i.result=c},c=>{i.error=c}),i=s[n]={timestamp:Date.now(),fulfilled:!1,timeout:o,promise:p,params:t},p}clearCache(e,t){const a=this.apiPromisesCacheable[e];if(a)for(const s in a){const n=a[s];try{t(n.params)&&(n.timeout&&clearTimeout(n.timeout),delete a[s])}catch{}}}getConfig(e){return this.config&&!e?this.config:this.invokeApiSingleProcess({method:"help.getConfig",params:{},processResult:t=>(this.config=t,this.rootScope.dispatchEvent("config",t),t),options:{overwrite:e}})}applyAppConfig(e,t){return this.appConfig=e,pc(e.ignore_restriction_reasons??[]),t&&(e.cachedTime=Date.now(),this.appStateManager.pushToState("appConfig",e)),this.rootScope.dispatchEvent("app_config",e),e}getAppConfig(e){return this.appConfig&&!e&&(this.requestedAppConfig||Date.now()-(this.appConfig.cachedTime||0)<864e5)?this.appConfig:this.invokeApiSingleProcess({method:"help.getAppConfig",params:{hash:this.appConfig?.hash||0},processResult:async t=>{this.requestedAppConfig=!0;const a=t.config||this.appConfig;return a.hash=t.hash||a.hash,this.applyAppConfig(a,!0)},options:{overwrite:e}})}getTimezonesList(){return this.invokeApiCacheable("help.getTimezonesList",{hash:0},{cacheSeconds:86400,syncIfHasResult:!0})}getLimit(e,t){return se(this.getAppConfig(),a=>{const s={pin:["dialogs_pinned_limit_default","dialogs_pinned_limit_premium"],folderPin:["dialogs_folder_pinned_limit_default","dialogs_folder_pinned_limit_premium"],folders:["dialog_filters_limit_default","dialog_filters_limit_premium"],favedStickers:["stickers_faved_limit_default","stickers_faved_limit_premium"],reactions:["reactions_user_max_default","reactions_user_max_premium"],bio:["about_length_limit_default","about_length_limit_premium"],topicPin:"topics_pinned_limit",caption:["caption_length_limit_default","caption_length_limit_premium"],chatlistInvites:["chatlist_invites_limit_default","chatlist_invites_limit_premium"],chatlistsJoined:["chatlists_joined_limit_default","chatlists_joined_limit_premium"],channels:["channels_limit_default","channels_limit_premium"],links:["channels_public_limit_default","channels_public_limit_premium"],gifs:["saved_gifs_limit_default","saved_gifs_limit_premium"],folderPeers:["dialog_filters_chats_limit_default","dialog_filters_chats_limit_premium"],uploadFileParts:["upload_max_fileparts_default","upload_max_fileparts_premium"],recommendedChannels:["recommended_channels_limit_default","recommended_channels_limit_premium"],savedPin:["saved_dialogs_pinned_limit_default","saved_dialogs_pinned_limit_premium"]};t??(t=this.rootScope.premium);const n=s[e],i=Array.isArray(n)?n[t?1:0]:n;return a[i]})}getPeerColors(){return this.apiManager.invokeApiCacheable("help.getPeerColors",{hash:0})}getPeerProfileColors(){return this.apiManager.invokeApiCacheable("help.getPeerProfileColors",{hash:0})}setThemeParams(e){this.themeParams=e}getThemeParams(){return this.themeParams}}class st extends fn{static async getTotalAccounts(){const e=[1,2,3,4].map(a=>this.get(a));return(await Promise.all(e)).filter(a=>!!a.userId).length}static async getUnencryptedTotalAccounts(){return Ve.get("number_of_accounts")}static async getUserIds(){const e=[1,2,3,4].map(a=>this.get(a));return(await Promise.all(e)).map(a=>a.userId).filter(Boolean)}static async get(e,t){const a=await Ve.get(`account${e}`)||{};return!t&&this.fillMissingData(a)&&await this.update(e,a),a}static fillMissingData(e){return[this.fillFingerprint(e),this.fillPushKey(e)].some(Boolean)}static fillFingerprint(e){if(!e.auth_key_fingerprint){const t=e[`dc${le.baseDcId}_auth_key`];return t?(e.auth_key_fingerprint=t?t.slice(0,8):void 0,!0):!1}return!1}static fillPushKey(e){return!e.push_key&&e.userId?(e.push_key=ue(ra(new Uint8Array(256))),!0):!1}static async update(e,t,a=!1){const s=await this.get(e,!0),n={...a?{}:s,...t};return this.fillMissingData(n),await Ve.set({[`account${e}`]:n}),e===1&&await this.updateStorageForLegacy(n),(async()=>Ve.set({number_of_accounts:await this.getTotalAccounts()}))(),n}static async shiftAccounts(e){for(let t=e;t<=is;t++)if(await Ve.delete(`account${t}`),t<is){const a=await this.get(t+1);a.userId&&await this.update(t,a,!0)}}static async updateStorageForLegacy(e){if(e!==null&&await mt.isUsingPasscode())return;e===null&&(e={});const t={},a=[],s=(n,i)=>{i?t[n]=i:a.push(n)};for(let n=1;n<=5;n++){const i=`dc${n}_auth_key`,o=`dc${n}_server_salt`;s(i,e[i]),s(o,e[o])}e.auth_key_fingerprint&&s("auth_key_fingerprint",e.auth_key_fingerprint),s("user_auth",e.userId&&{date:te(!0),id:e.userId,dcID:e.dcId||0}),s("dc",e.dcId),await Promise.all([Ve.set(t),Promise.all(a.map(n=>Ve.delete(n)))])}}pe.AccountController=st;class Ir{constructor(e,t,a){this.key=e,this.id=t,this.expiresAt=a}}const lf=6,mf=3;class _a extends ff{constructor(){super(),this.name="API",this.cachedNetworkers={},this.cachedExportPromise={},this.gettingNetworkers={},this.baseDcId=0,this.afterMessageTempIds={},this.transportType=ce.transport;const e=9970*1e3;setInterval(()=>{this.getConfig(!0)},e)}after(){const e=super.after();return ce.multipleTransports&&va.addEventListener("transport",t=>{this.changeTransportType(t)}),this.apiUpdatesManager.addMultipleEventsListeners({updateConfig:()=>{this.getConfig(!0),this.getAppConfig(!0)}}),this.rootScope.addEventListener("user_auth",()=>{this.config&&this.apiUpdatesManager.processLocalUpdate({_:"updateConfig"})}),this.rootScope.addEventListener("premium_toggle",t=>{this.iterateNetworkers(({networker:a,connectionType:s,dcId:n,transportType:i})=>{if(s==="client"||i!=="websocket")return;const o=a.transport;if(!o){this.log.error("wow what, no transport?",a);return}if(o.connection){const p=wi(n,s,t);o.changeUrl(p)}})}),e}getTransportType(e){let t;return t=this.transportType,t}iterateNetworkers(e){for(const t in this.cachedNetworkers){const a=this.cachedNetworkers[t];for(const s in a){const n=a[s];for(const i in n)n[i].forEach((p,d,c)=>{e({networker:p,dcId:+i,connectionType:s,transportType:t,index:d,array:c})})}}}chooseServer(e,t,a){return this.dcConfigurator.chooseServer(e,t,a,t==="client",this.rootScope.premium)}changeTransportType(e){const t=this.transportType;if(t===e)return;this.log("changing transport from",t,"to",e);const a=this.cachedNetworkers[t],s=this.cachedNetworkers[e];this.cachedNetworkers[e]=a,this.cachedNetworkers[t]=s,this.transportType=e;for(const n in this.gettingNetworkers){const i=this.gettingNetworkers[n];delete this.gettingNetworkers[n];const o=n.replace(t,e);this.gettingNetworkers[o]=i,this.log("changed networker getKey from",n,"to",o)}this.iterateNetworkers(n=>{const i=this.getTransportType(n.connectionType),o=this.chooseServer(n.dcId,n.connectionType,i);this.changeNetworkerTransport(n.networker,o)})}async getBaseDcId(){if(this.baseDcId)return this.baseDcId;const t=(await st.get(this.getAccountNumber())).dcId;return this.baseDcId||(t?this.baseDcId=t:this.setBaseDcId(le.baseDcId)),this.baseDcId}async setUserAuth(e){if((typeof e=="string"||typeof e=="number")&&(e={dcID:0,date:te(!0),id:e.toPeerId(!1)}),this.rootScope.dispatchEvent("user_auth",e),!e.dcID){const t=await this.getBaseDcId();e.dcID=t}st.update(this.getAccountNumber(),{date:e.date,userId:e.id,dcId:e.dcID})}setBaseDcId(e){const t=this.baseDcId;t&&t===e||(t&&this.getNetworker(t).then(a=>{this.setOnDrainIfNeeded(a)}),this.baseDcId=e,st.update(this.getAccountNumber(),{dcId:this.baseDcId}))}async logOut(e){if(this.loggingOut)return;this.loggingOut=!0;const t=await st.getTotalAccounts(),a=this.getAccountNumber(),s=await st.get(a),n=[];for(let p=1;p<=5;p++){const d=`dc${p}_auth_key`;s[d]&&n.push(this.invokeApi("auth.logOut",{},{dcId:p,ignoreErrors:!0}))}let i=!1;const o=async()=>{i||(i=!0,this.baseDcId=void 0,t<=1&&a===1&&!e?await Promise.all([(async()=>{const p=["account1","dc","server_time_offset","xt_instance","user_auth","k_build","auth_key_fingerprint"];for(let d=1;d<=5;++d)p.push(`dc${d}_server_salt`),p.push(`dc${d}_auth_key`),p.push(`dc${d}_hash`);return Promise.all(p.map(d=>Ve.delete(d)))})(),sa.clearAllStoresForAccount(1),sa.clearSessionStores(),wt.clear(),ft.getInstance(ns(),"localStorage__encrypted").clear(),bt.deleteAllStorages()]):(await st.shiftAccounts(a),await sa.shiftStorages(a),await mt.isUsingPasscode()&&await Ve.set({encryption_key:await Dt.getAsBase64()})),xa.closeDatabases(),this.rootScope.dispatchEvent("logging_out",{accountNumber:a,migrateTo:e}))};return setTimeout(o,1e3),Promise.all(n).catch(p=>{p.handled=!0}).finally(o)}static async forceLogOutAll(){const e=[1,2,3,4].map(t=>sa.clearAllStoresForAccount(t));await Promise.all([Ve.localStorageProxy("clear"),wt.clear(),ft.getInstance(ns(),"localStorage__encrypted").clear(),...e,bt.deleteAllStorages()]),xa.closeDatabases(),Le.dispatchEvent("logging_out",{})}generateNetworkerGetKey(e,t,a){return[e,t,a].join("-")}async getAuthKeyFromHex(e){const t=Vt(e);return new Ir(t,(await Y.invokeCrypto("sha1",t)).slice(-8))}getNetworker(e,t={}){const a=t.fileDownload?"download":t.fileUpload?"upload":"client",s=this.getTransportType(a);this.cachedNetworkers[s]||(this.cachedNetworkers[s]={client:{},download:{},upload:{}});const n=this.cachedNetworkers[s][a];e in n||(n[e]=[]);const i=n[e],o=a==="client"||s==="https"?1:this.rootScope.premium?lf:mf;if(i.length){let l=i[0];if(o>1){let m=1/0,g,_=1/0,S;for(const D of i){const{activeRequests:C,isOnline:b}=D;C<m&&b&&(m=C,g=D),C<_&&(_=C,S=D)}i.length<o&&m?l=void 0:g?l=g:l=S}if(l)return Promise.resolve(l)}let p=this.generateNetworkerGetKey(e,s,a);if(this.gettingNetworkers[p])return this.gettingNetworkers[p];const d=`dc${e}_auth_key`,c=`dc${e}_server_salt`;_a.fillTimeManagerOffsetPromise||(_a.fillTimeManagerOffsetPromise=Ve.get("server_time_offset").then(l=>{l&&(this.timeManager.timeOffset=l)},()=>{}),this.timeManager.onTimeOffsetChange=l=>{Ve.set({server_time_offset:l})});let f=this.chooseServer(e,a,s);return this.gettingNetworkers[p]=st.get(this.getAccountNumber()).then(l=>[l[d],l[c]]).then(async([l,m])=>{await _a.fillTimeManagerOffsetPromise;let g,_,S,D;if(l?.length===512)m?.length!==16&&(m="AAAAAAAAAAAAAAAA"),S={authKey:await this.getAuthKeyFromHex(l),serverSalt:Vt(m)},D=await this.authorizer.auth(e,!0);else try{[S,D]=await Promise.all([this.authorizer.auth(e,!1),this.authorizer.auth(e,!0)]),l=ue(S.authKey.key),m=ue(S.serverSalt),st.update(this.getAccountNumber(),{[d]:l,[c]:m})}catch(b){_=b}if(!_){const b=D??S;g=this.networkerFactory.getNetworker({dcId:e,permAuthKey:S.authKey,authKey:b.authKey,serverSalt:b.serverSalt,isFileDownload:a==="download",isFileUpload:a==="upload"})}const C=this.getTransportType(a);if(C!==s&&(p=this.generateNetworkerGetKey(e,C,a),f.destroy(),ka.removeTransport(this.dcConfigurator.chosenServers,f),g&&(f=this.chooseServer(e,a,C)),this.log("transport has been changed during authorization from",s,"to",C)),delete this.gettingNetworkers[p],_)throw this.log("get networker error",_,_.stack),_;return this.changeNetworkerTransport(g,f),i.unshift(g),this.setOnDrainIfNeeded(g),g})}getNetworkerVoid(e){return this.getNetworker(e).then(Se,Se)}changeNetworkerTransport(e,t){const a=e.transport;a&&ka.removeTransport(this.dcConfigurator.chosenServers,a),e.changeTransport(t)}onNetworkerDrain(e){this.log("networker drain",e.dcId),e.onDrain=void 0,this.changeNetworkerTransport(e),e.destroy(),this.networkerFactory.removeNetworker(e),ka.removeTransport(this.cachedNetworkers,e)}setOnDrainIfNeeded(e){if(e.onDrain)return;(e.isFileNetworker?Promise.resolve(!0):this.getBaseDcId().then(a=>e.dcId!==a)).then(a=>{e.onDrain||a&&(e.onDrain=()=>this.onNetworkerDrain(e),e.setDrainTimeout())})}setUpdatesProcessor(e){this.networkerFactory.setUpdatesProcessor(e)}invokeApi(e,t={},a={}){const s=$();let{afterMessageId:n,prepareTempMessageId:i}=a;if(i&&s.then(()=>{delete this.afterMessageTempIds[i]}),pe){const l=Date.now(),m=de.setInterval(()=>{(!d||!d.isStopped())&&this.log.error("Request is still processing:",e,t,a,"time:",(Date.now()-l)/1e3)},5e3);s.catch(Se).finally(()=>{clearInterval(m)})}const o=async l=>{throw l?be(l)||(l=ne(void 0,l)):l=ne("ERROR_EMPTY"),(l.code===401&&l.type==="SESSION_REVOKED"||l.code===406&&l.type==="AUTH_KEY_DUPLICATED")&&this.logOut(),a.ignoreErrors||(l.code===406&&(l.handled=!0),a.noErrorBox||setTimeout(()=>{l.handled||(l.code===401&&this.logOut(),l.handled=!0)},100)),l};let p,d;const c=()=>{if(n){const m=this.afterMessageTempIds[n];m&&(a.afterMessageId=m.messageId)}const l=d.wrapApiCall(e,t,a);return i&&(this.afterMessageTempIds[i]={messageId:a.messageId,promise:s}),l.catch(m=>{if(m.type!=="FILE_REFERENCE_EXPIRED"&&m.type!=="FILE_REFERENCE_INVALID"&&this.log.error("Error",m.code,m.type,this.baseDcId,p,e,t),m.code===401&&this.baseDcId===p)throw m.type!=="SESSION_PASSWORD_NEEDED"&&st.update(this.getAccountNumber(),{dcId:void 0}),m;if(m.code===401&&this.baseDcId&&p!==this.baseDcId){if(this.cachedExportPromise[p]===void 0){const g=new Promise((_,S)=>{this.invokeApi("auth.exportAuthorization",{dc_id:p},{noErrorBox:!0}).then(D=>{this.invokeApi("auth.importAuthorization",{id:D.id,bytes:D.bytes},{dcId:p,noErrorBox:!0}).then(_,S)},S)});this.cachedExportPromise[p]=g}return this.cachedExportPromise[p].then(()=>c())}else if(m.code===303){const g=+m.type.match(/^(PHONE_MIGRATE_|NETWORK_MIGRATE_|USER_MIGRATE_|STATS_MIGRATE_)(\d+)/)[2];if(g!==p)return a.dcId?a.dcId=g:this.setBaseDcId(g),this.invokeApi(e,t,a)}else if(m.code===400&&m.type.indexOf("FILE_MIGRATE")===0){const g=+m.type.match(/^(FILE_MIGRATE_)(\d+)/)[2];if(g!==p)return a.dcId=g,this.invokeApi(e,t,a);throw m}else{if(m.code===400&&m.type==="CONNECTION_NOT_INITED")return this.networkerFactory.unsetConnectionInited(),c();if(!a.rawError&&m.code===420&&!m.type.includes("SLOWMODE_WAIT")&&m.type!=="FROZEN_METHOD_INVALID"){const g=m.type.match(/^FLOOD_WAIT_(\d+)/)||m.type.match(/_(\d+)_?/);let _;if(g&&(_=+g[1]),m.type.includes("FLOOD_PREMIUM_WAIT")&&Promise.all([this.getAppConfig(),this.appStateManager.getState()]).then(([S,D])=>{const C=te(!0);C-(D.shownUploadSpeedTimestamp||0)>=S.upload_premium_speedup_notify_period&&(this.appStateManager.pushToState("shownUploadSpeedTimestamp",C),this.rootScope.dispatchEvent("file_speed_limited",{increaseTimes:(a.fileUpload?S.upload_premium_speedup_upload:S.upload_premium_speedup_download)||10,isUpload:!!a.fileUpload}))}),_||(_=1),_>(a.floodMaxTimeout??60)&&!a.prepareTempMessageId)throw m;return qe(_*1e3).then(()=>c())}else if(!a.rawError&&["MSG_WAIT_FAILED","MSG_WAIT_TIMEOUT"].includes(m.type)){const g=this.afterMessageTempIds[n];return n=void 0,delete a.afterMessageId,g?g.promise.then(()=>c()):c()}else if(!a.rawError&&m.code===500){const g=Date.now();if(a.stopTime&&g>=a.stopTime)throw m;return a.waitTime=a.waitTime?Math.min(60,a.waitTime*1.5):1,qe(a.waitTime*1e3).then(()=>c())}else{if(m.type==="UNKNOWN"||m.type==="MTPROTO_CLUSTER_INVALID")return qe(1e3).then(()=>c());throw Na.canHandleError(m)&&(m=Na.attachInvokeArgsToError(m,[e,t,a])),m}}})};let f;return(p=a.dcId||this.baseDcId)?f=this.getNetworker(p,a):f=this.getBaseDcId().then(l=>this.getNetworker(p=l,a)),f.then(l=>{d=l;const m=c();return d.attachPromise(s,a),m}).then(s.resolve.bind(s)).catch(o).catch(s.reject.bind(s)),s}}class wr{constructor(){this.neededPeers=new Map,this.singlePeerMap=new Map,this._constructor(!1)}after(){this.rootScope.addEventListener("user_auth",()=>{this.requestPeer(this.appPeersManager.peerId,"self")})}requestPeer(e,t){let a=this.neededPeers.get(e);a&&a.has(t)||(a||(a=new Set,this.neededPeers.set(e,a)),a.add(t),this.dispatchEvent("peerNeeded",e))}releasePeer(e,t){const a=this.neededPeers.get(e);a&&(a.delete(t),a.size||(this.neededPeers.delete(e),this.dispatchEvent("peerUnneeded",e)))}requestPeersForKey(e,t){Array.isArray(e)&&(e=new Set(e));let a=this.singlePeerMap.get(t);if(a){for(const s of a)e.has(s)||(this.releasePeer(s,t),a.delete(s));if(!a.size&&!e.size){this.singlePeerMap.delete(t);return}}if(e.size){a||(a=new Set,this.singlePeerMap.set(t,a));for(const s of e)a.has(s)||(this.requestPeer(s,t),a.add(s))}}isPeerNeeded(e){return this.neededPeers.has(e)}}Ni(wr,[ba,W]);function gf(r){return{downloaded:0,url:"",type:r}}function di(r,e){return r+(e!==void 0?"-"+e:"")}function Ls(r){return Mn(r)?Hi(r):r._+(r.id??r.url)}const Os=Ea;class uf extends W{constructor(){super(...arguments),this.thumbsCache={},this.stickerCachedThumbs={}}getCacheContext(e,t=Os,a=Ls(e)){var n;const s=(n=this.thumbsCache)[a]??(n[a]={});return s[t]??(s[t]=gf(t))}mirrorCacheContext(e,t,a){re.getInstance().invokeVoid("mirror",{name:"thumbs",key:Rt(e,t),value:a,accountNumber:this.getAccountNumber()})}mirrorStickerThumb(e,t){re.getInstance().invokeVoid("mirror",{name:"stickerThumbs",key:e,value:t,accountNumber:this.getAccountNumber()})}mirrorAll(e){const t=re.getInstance();t.invokeVoid("mirror",{name:"thumbs",value:this.thumbsCache,accountNumber:this.getAccountNumber()},e),t.invokeVoid("mirror",{name:"stickerThumbs",value:this.stickerCachedThumbs,accountNumber:this.getAccountNumber()},e)}setCacheContextURL(e,t=Os,a,s=0,n=Ls(e)){const i=this.getCacheContext(e,t,n);return i.url=a,i.downloaded=s,this.mirrorCacheContext(n,t,i),i}deleteCacheContext(e,t=Os,a=Ls(e)){const s=this.thumbsCache[a];s&&(this.mirrorCacheContext(a,t),delete s[t])}getStickerCachedThumb(e,t){return this.stickerCachedThumbs[di(e,t)]}saveStickerPreview(e,t,a,s,n){const i=di(e,n),o=this.stickerCachedThumbs[i];if(o&&o.w>=a&&o.h>=s)return;const p=this.stickerCachedThumbs[i]={url:URL.createObjectURL(t),w:a,h:s};this.mirrorStickerThumb(i,p)}clearColoredStickerThumbs(){for(const e in this.stickerCachedThumbs){const[,t]=e.split("-");if(t&&isNaN(+t)){const a=this.stickerCachedThumbs[e];URL.revokeObjectURL(a.url),delete this.stickerCachedThumbs[e],this.mirrorStickerThumb(e)}}}}function rn(r,e=16,t,a=!1,s=!1){const n=r.byteLength||r.length,i=a?e-n:e-n%e;if(i>0&&i<e){const o=new Uint8Array(i);if(t)for(let p=0;p<i;++p)o[p]=0;else ra(o);return r instanceof ArrayBuffer?(s?ct(o,r):ct(r,o)).buffer:r instanceof Uint8Array?s?ct(o,r):ct(r,o):s?[...o].concat(r):r.concat([...o])}return r}function hf(r){const e=yd(ke(r)).reverse();return rn(e,8,!0,!1,!1)}function yf(r){return r.map(e=>ke(e)).sort((e,t)=>e.compare(t)).map(e=>e.toString(10))}class ga{static async getAesKeyIv(e,t,a,s){const n=a?8:0;if(s){const[g,_,S,D]=await Promise.all([Y.invokeCrypto("sha1",ct(t,e.subarray(n,n+32))),Y.invokeCrypto("sha1",ct(e.subarray(32+n,32+n+16),t,e.subarray(48+n,48+n+16))),Y.invokeCrypto("sha1",ct(e.subarray(64+n,64+n+32),t)),Y.invokeCrypto("sha1",ct(t,e.subarray(96+n,96+n+32)))]),C=ct(g.subarray(0,8),_.subarray(8,20),S.subarray(4,16)),b=ct(g.subarray(8,20),_.subarray(0,8),S.subarray(16,20),D.subarray(0,8));return{aesKey:C,aesIv:b}}const i=new Uint8Array(52),o=new Uint8Array(52),p=[];i.set(t,0),i.set(e.subarray(n,n+36),16),p.push(Y.invokeCrypto("sha256",i)),o.set(e.subarray(40+n,40+n+36),0),o.set(t,36),p.push(Y.invokeCrypto("sha256",o));const d=await Promise.all(p),c=new Uint8Array(32),f=new Uint8Array(32),l=new Uint8Array(d[0]),m=new Uint8Array(d[1]);return c.set(l.subarray(0,8)),c.set(m.subarray(8,24),8),c.set(l.subarray(24,32),24),f.set(m.subarray(0,8)),f.set(l.subarray(8,24),8),f.set(m.subarray(24,32),24),{aesKey:c,aesIv:f}}static async getMsgKey(e,t,a,s){if(s)return(await Y.invokeCrypto("sha1",t)).subarray(4,20);const n=a?8:0,i=ct(e.subarray(88+n,88+n+32),t),o=await Y.invokeCrypto("sha256",i);return new Uint8Array(o).subarray(8,24)}}function _f(r){return nd(r)}const ci=!0,fi=15,vf=1e4,li={client:{disconnectDelayMin:7,disconnectDelayMax:20,pingInterval:2e3,pingMaxTime:5,connectionTimeout:5e3},file:{disconnectDelayMin:10,disconnectDelayMax:24,pingInterval:3e3,pingMaxTime:7,connectionTimeout:7500}},Pf={notContentRelated:!0,noSchedule:!0},mi={notContentRelated:!0,canCleanup:!0,longPoll:!0};let Qa,Mf=0;class Sf{constructor(e){this.lastServerMessages=new Set,this.sentMessages={},this.pendingMessages={},this.pendingAcks=[],this.pendingResendReq=[],this.sentResendReq=new Map,this.nextReq=0,this.checkConnectionPeriod=0,this.offline=!1,this.isOnline=!1,this.status=pt.Closed,this.lastResponseTime=0,this.debug=ce.debug,this.activeRequests=0,this.sendPingDelayDisconnect=()=>{if(this.pingDelayDisconnectDeferred||!this.transport||!this.transport.connected||this.isStopped())return;const a=this.pingDelayDisconnectDeferred=$(),s=this.delays,n=this.delays.pingMaxTime,i=Math.min(this.lastPingTime??0,n),o=Math.round(s.disconnectDelayMin+i/n*(s.disconnectDelayMax-s.disconnectDelayMin)),p=o*1e3,d=this.lastPingStartTime=Date.now(),c=this.lastPingDelayDisconnectId=Et(),f={notContentRelated:!0,canCleanup:!0};this.wrapMtpCall("ping_delay_disconnect",{ping_id:c,disconnect_delay:o},f);const l=this.log.bindPrefix("sendPingDelayDisconnect");l.debug(`ping, timeout=${p}, lastPingTime=${this.lastPingTime}, msgId=${f.messageId}, pingId=${c}`);const m=de.setTimeout(a.reject.bind(a),p),g=D=>{clearTimeout(m);const C=Date.now()-d;if(this.lastPingTime=C/1e3,l.debug(`pong, reason='${D}', time=${i}, msgId=${f.messageId}`),C>p)throw void 0;return qe(Math.max(0,this.delays.pingInterval-C))},_=()=>{clearTimeout(m);const D=this.transport;this.pingDelayDisconnectDeferred!==a||!D?.connection||this.isStopped()||(l.error("catch, closing connection",this.lastPingTime,f.messageId),D.connection.close())},S=()=>{this.pingDelayDisconnectDeferred===a&&(this.pingDelayDisconnectDeferred=void 0,this.sendPingDelayDisconnect())};a.then(g).catch(_).finally(S)},this.checkLongPoll=()=>{if(this.isFileNetworker&&!ci)return;const a=this.log.bindPrefix("checkLongPoll");if(this.offline||this.longPollPending&&Date.now()<this.longPollPending||this.isStopped()){a("no lp this time");return}a("check",this.longPollPending);const s=this.cleanupSent();this.getBaseDcId().then(n=>{if(s&&(n!==this.dcId||this.sleepAfter&&Date.now()>this.sleepAfter)){a.warn("send long-poll for DC is delayed",this.sleepAfter);return}this.sendLongPoll()})},this.checkConnection=a=>{const s=this.log.bindPrefix("checkConnection");if(s("check connection",a),this.clearCheckConnectionTimeout(),!this.transport){s.warn("no transport for checkConnection");return}const n=new Ne({mtproto:!0}),i=Et();n.storeMethod("ping",{ping_id:i});const o={msg_id:this.timeManager.generateId(),seq_no:this.generateSeqNo(!0),body:n.getBytes(!0)};this.offline&&this.setConnectionStatus(pt.Connecting),this.sendEncryptedRequest(o).then(()=>{s("got ping"),this.toggleOffline(!1)},()=>{s("still error, delay",this.checkConnectionPeriod*1e3),this.checkConnectionTimeout=de.setTimeout(()=>this.checkConnection("from failed checkConnection request"),this.checkConnectionPeriod*1e3|0),this.checkConnectionPeriod=Math.min(fi,this.checkConnectionPeriod*1.5)})},Pa(this,e),this.usingPfs=this.permAuthKey!==this.authKey,this.isFileNetworker=this.isFileUpload||this.isFileDownload,this.delays=this.isFileNetworker?li.file:li.client;const t=this.isFileUpload?"-U":this.isFileDownload?"-D":"";this.name="NET-"+this.dcId+t,this.log=(this.createLogger??je)(this.name+(t?"":"-C")+"-"+Mf++,ye.Log|ye.Error|ye.Warn|(this.debug?ye.Debug:0)),this.log("constructor"),this.updateSession()}updateSession(){this.log("update session"),this.seqNo=0,this.prevSessionId=this.sessionId,this.sessionId=Kt(8)}updateSentMessage(e){const t=this.log.bindPrefix("updateSentMessage"),a=this.sentMessages[e];if(!a)return t.error("no sentMessage",e),!1;if(t("updating",a),delete this.sentMessages[e],a.container){let s=!1;if(ht(a.inner,(n,i)=>{const o=this.updateSentMessage(n);o?a.inner[i]=o.msg_id:(a.inner.splice(i,1),s=!0)}),s&&!a.inner.length){t("deleted container",a);return}}return a.msg_id=this.timeManager.generateId(),a.seq_no=this.generateSeqNo(a.notContentRelated),t("old and new",e,a.msg_id),this.sentMessages[a.msg_id]=a,a}generateSeqNo(e){let t=this.seqNo*2;return e||(t++,this.seqNo++),t}wrapMtpCall(e,t,a){const s=new Ne({mtproto:!0});s.storeMethod(e,t);const n=this.timeManager.generateId(),i=this.generateSeqNo(),o={msg_id:n,seq_no:i,body:s.getBytes(!0),humanReadable:e};return ce.debug&&this.log("MT call",e,t,n,i),this.pushMessage(o,a)}wrapMtpMessage(e,t){const a=new Ne({mtproto:!0});a.storeObject(e,"Object");const s=this.timeManager.generateId(),n=this.generateSeqNo(t.notContentRelated),i={msg_id:s,seq_no:n,body:a.getBytes(!0),humanReadable:e._};return ce.debug&&this.log("MT message",e,s,n),this.pushMessage(i,t)}storeApiCall(e,t,a,s,n){if(s.afterMessageId){if(Qa===void 0){const i=it.API.methods.find(o=>o.method==="invokeAfterMsg");Qa=i?+i.id:0}Qa?(n("store invokeAfterMsg"),e.storeInt(Qa,"invokeAfterMsg"),e.storeLong(s.afterMessageId,"msg_id")):n.error("no invokeAfterMsg")}s.resultType=e.storeMethod(t,a)}wrapApiCall(e,t={},a={}){var c;if(this.usingPfs&&!this.authKey.wrappedBinding)return((c=this.authKey).wrapBindPromise??(c.wrapBindPromise=this.wrapBindAuthKeyCall(this.authKey.expiresAt))).then(()=>this.wrapApiCall(e,t,a));const s=this.log.bindPrefix("wrapApiCall"),n=new Ne(a);this.connectionInited?this.storeApiCall(n,e,t,a,s):(s("adding invokeWithLayer"),n.storeMethod("invokeWithLayer",{layer:it.layer,query:f=>{const l=this.getInitConnectionParams();f.storeMethod("initConnection",{api_id:l.id,device_model:l.deviceModel,system_version:l.systemVersion,app_version:l.version,system_lang_code:l.systemLangCode,lang_pack:l.langPack,lang_code:l.langCode,query:m=>{this.storeApiCall(m,e,t,a,s)}})}}));const i=a.msg_id??this.timeManager.generateId(),o=this.generateSeqNo();let p=n.getBytes(!0);if(a.gzipCompress){const f=_f(p),l=new Ne({startMaxLength:f.length+67&-4});l.storeInt(or,"gzip_packed[id]"),l.storeBytes(f,"gzip_packed[packed_data]"),p=l.getBytes(!0)}const d={msg_id:i,seq_no:o,body:p,isAPI:!0,humanReadable:e};return s("call",e,d,t,a),this.pushMessage(d,a)}async wrapBindAuthKeyCall(e){this.log("will bind temp auth key",e);const t=Wt([...this.permAuthKey.id].reverse()).toString(),a=Wt(Kt(8)).toString(),s=this.timeManager.generateId(),n=new Ne({mtproto:!0});n.storeObject({_:"bind_auth_key_inner",nonce:a,temp_auth_key_id:Wt([...this.authKey.id].reverse()).toString(),perm_auth_key_id:t,temp_session_id:Wt([...this.sessionId].reverse()).toString(),expires_at:e},"BindAuthKeyInner");const i=n.getBytes(!0),o=await this.getEncryptedOutput({body:i,msg_id:s,seq_no:0},!0);this.authKey.wrappedBinding=!0,delete this.authKey.wrapBindPromise,this.connectionInited=!1,this.wrapApiCall("auth.bindTempAuthKey",{perm_auth_key_id:t,nonce:a,expires_at:e,encrypted_message:o},{msg_id:s})}changeTransport(e){const t=this.transport;t&&(t.destroy(),this.clearNextReq(),this.connectionInited=!1,this.longPollInterval&&(clearInterval(this.longPollInterval),this.longPollInterval=void 0),this.clearCheckConnectionTimeout()),this.log("change transport",e,t),this.clearPingDelayDisconnect(),this.transport=e,e&&(e.networker=this,e.noScheduler=!0,e instanceof jt&&((!this.isFileNetworker||ci)&&(this.longPollInterval=de.setInterval(this.checkLongPoll,1e4),this.checkLongPoll()),this.checkConnection("changed transport")),e.connection&&e.connected&&this.setConnectionStatus(pt.Connected),this.resend())}destroy(){this.log("destroy")}forceReconnectTimeout(){this.transport.reconnect?this.transport.reconnect():this.resend()}forceReconnect(){this.transport.forceReconnect?this.transport.forceReconnect():this.checkConnection("force reconnect")}clearPingDelayDisconnect(){const e=this.pingDelayDisconnectDeferred;this.pingDelayDisconnectDeferred=void 0,this.lastPingDelayDisconnectId=void 0,e&&e.reject()}sendLongPoll(){const e=this.log.bindPrefix("sendLongPoll");if(this.sendingLongPoll){e("already sending");return}this.sendingLongPoll=!0;const t=25e3;this.longPollPending=Date.now()+t,e("send",this.longPollPending),this.wrapMtpCall("http_wait",{max_delay:500,wait_after:150,max_wait:t},{...mi,noResponse:!0}).then(()=>{e("success"),this.longPollPending=void 0,setTimeout(this.checkLongPoll,0)},a=>{e("failed",a)}).finally(()=>{this.sendingLongPoll=void 0})}clearCheckConnectionTimeout(){this.checkConnectionTimeout&&(clearTimeout(this.checkConnectionTimeout),this.checkConnectionTimeout=void 0)}toggleOffline(e){if(this.offline!==e)if(this.offline=e,this.clearCheckConnectionTimeout(),e){this.clearNextReq(),this.checkConnectionPeriod<1.5&&(this.checkConnectionPeriod=0);const t=this.checkConnectionPeriod*1e3|0;this.checkConnectionRetryAt=Date.now()+t,this.setConnectionStatus(pt.Closed,this.checkConnectionRetryAt),this.checkConnectionTimeout=de.setTimeout(()=>this.checkConnection("from toggleOffline"),t),this.checkConnectionPeriod=Math.min(fi,(1+this.checkConnectionPeriod)*1.5)}else this.onTransportOpen(),this.checkLongPoll();else this.setConnectionStatus(e?pt.Closed:pt.Connected,e?this.checkConnectionRetryAt:void 0)}handleSentEncryptedRequestHTTP(e,t,a){e.then(async s=>(this.toggleOffline(!1),await this.onTransportData(s),this.checkLongPoll(),this.checkConnectionPeriod=Math.max(1.1,Math.sqrt(this.checkConnectionPeriod)),!0),s=>(this.log.error("encrypted request failed",s,t),this.pushResend(t.msg_id),this.toggleOffline(!0),!1)).then(s=>{const n=this.sentMessages;a.forEach(i=>{const o=n[i];if(o){const{deferred:p}=o;delete n[i],delete this.pendingMessages[i],s?p.resolve():p.reject()}})})}pushMessage(e,t){let a;return(!t.notContentRelated||t.noResponse)&&(a=$()),this.sentMessages[e.msg_id]=Object.assign(e,t,a?{deferred:a}:void 0),this.pendingMessages[e.msg_id]=0,t.noSchedule||this.scheduleRequest(),be(t)&&(t.messageId=e.msg_id),a}attachPromise(e,t){const a=setTimeout(()=>{this.lastResponseTime&&Date.now()-this.lastResponseTime<this.delays.connectionTimeout||(this.log.error("timeout",t),this.isOnline&&this.setConnectionStatus(pt.TimedOut))},this.delays.connectionTimeout);e.catch(Se).finally(()=>{clearTimeout(a),this.setConnectionStatus(pt.Connected),--this.activeRequests,this.setDrainTimeout()}),++this.activeRequests,this.onDrainTimeout&&(clearTimeout(this.onDrainTimeout),this.onDrainTimeout=void 0)}setDrainTimeout(){!this.activeRequests&&this.onDrain&&!this.onDrainTimeout&&(this.onDrainTimeout=de.setTimeout(()=>{this.onDrainTimeout=void 0,this.log("drain"),this.onDrain()},vf))}setConnectionStatus(e,t,a=!0){const s=e===pt.Connected,n=this.status!==e;this.isOnline=s,this.status=e,n&&(this.onConnectionStatus?.({_:"networkerStatus",status:e,dcId:this.dcId,name:this.name,isFileNetworker:this.isFileNetworker,isFileDownload:this.isFileDownload,isFileUpload:this.isFileUpload,retryAt:t}),this.isOnline&&a&&this.scheduleRequest(),this.transport?.connection&&(this.clearPingDelayDisconnect(),this.sendPingDelayDisconnect()))}onTransportOpen(){this.setConnectionStatus(pt.Connected),this.cleanupSent(),this.resend()}pushResend(e,t=100){const a=this.log.bindPrefix("pushResend"),s=this.sentMessages[e];if(!s){a.warn("no sentMessage",e);return}const n=t?Date.now()+t:0;if(s.container){for(const i of s.inner)this.pushResend(i,t);a("deleting container",e),delete this.sentMessages[e]}else{if(this.pendingMessages[e]!==void 0&&this.pendingMessages[e]<=n){a("already pending",e);return}this.pendingMessages[e]=n}s.acked&&a.error("acked message?",s),a("push",s,t),this.scheduleRequest(t)}isStopped(){return(this.isForcedStopped?.()??!1)&&!this.isFileNetworker}performScheduledRequest(){const e=this.log.bindPrefix("performScheduledRequest");if(this.isStopped())return e("is stopped"),!1;let t=!1,a,s;if(a=s=!1,this.pendingAcks.length){const l=this.pendingAcks.splice(0,Math.min(8192,this.pendingAcks.length));this.wrapMtpMessage({_:"msgs_ack",msg_ids:l},{canCleanup:!0,notContentRelated:!0,noSchedule:!0}),e.debug("acking messages",l),this.pendingAcks.length&&(t=!0)}const n=this.pendingResendReq.length;if(n){const l=this.pendingResendReq.splice(0,Math.min(8192,n)),m={...Pf,resending:new Set(l)};this.wrapMtpMessage({_:"msg_resend_req",msg_ids:l},m);const g=this.sentMessages[m.messageId];l.forEach(_=>{this.sentResendReq.set(_,g)}),e.debug("resending requests",m.messageId,l),a=!0,this.pendingResendReq.length&&(t=!0)}let i;const o=[];let p=0;const d=yf(Object.keys(this.pendingMessages));for(const l of d){const m=this.sentMessages[l];if(m?.body){const g=m.body.length+32;if(p+g>655360&&(e.warn("length overflow",m,o),t=!0,i))break;o.push(m),p+=g,m.isAPI?a=!0:m.longPoll&&(s=!0),i=m}else e.error("no body",m,l);delete this.pendingMessages[l]}if(this.transport instanceof jt&&a&&!s){const l={...mi,noSchedule:!0};this.wrapMtpCall("http_wait",{max_delay:500,wait_after:150,max_wait:3e3},l);const m=this.sentMessages[l.messageId];o.push(m),delete this.pendingMessages[m.msg_id],e("appended http_wait",m.msg_id)}if(!o.length){e("no messages to send");return}let c;if(c=o.filter(l=>l.noResponse).map(l=>l.msg_id),o.length>1){const l=this.generateContainerMessage(p,o);i=l.messageWithBody,this.sentMessages[i.msg_id]=l.message}else this.sentMessages[i.msg_id]=i;const f=this.sendEncryptedRequest(i);this.transport instanceof jt&&this.handleSentEncryptedRequestHTTP(f,i,c),this.cleanupSent(),t&&(e("scheduling next request because of overflow"),this.scheduleRequest())}generateContainerMessage(e,t){const a=new Ne({mtproto:!0,startMaxLength:e+64});a.storeInt(1945237724,"CONTAINER[id]"),a.storeInt(t.length,"CONTAINER[count]");const s=t.map((i,o)=>(a.storeLong(i.msg_id,"CONTAINER["+o+"][msg_id]"),a.storeInt(i.seq_no,"CONTAINER["+o+"][seq_no]"),a.storeInt(i.body.length,"CONTAINER["+o+"][bytes]"),a.storeRawBytes(i.body,"CONTAINER["+o+"][body]"),i.msg_id)),n={msg_id:this.timeManager.generateId(),seq_no:this.generateSeqNo(!0),container:!0,inner:s,notContentRelated:!0};return this.log.warn("container",n.msg_id,n.seq_no,s),{message:n,messageWithBody:Object.assign({body:a.getBytes(!0)},n)}}async getEncryptedMessage(e,t,a){const s=await ga.getMsgKey(this.authKey.key,t&&a?e.subarray(0,-t):e,!1,a),n=await ga.getAesKeyIv((a?this.permAuthKey:this.authKey).key,s,!1,a);return{bytes:await Y.invokeCrypto("aes-encrypt",e,n.aesKey,n.aesIv),msgKey:s,messageKeyData:n}}async getDecryptedMessage(e,t){const a=await ga.getAesKeyIv(this.authKey.key,e,!0);return Y.invokeCrypto("aes-decrypt",t,a.aesKey,a.aesIv)}async getEncryptedOutput(e,t){const a=e.body.length,s=new Ne({startMaxLength:a+2048});if(t){const f=Kt(16);s.storeIntBytes(f,128,"random")}else s.storeIntBytes(this.serverSalt,64,"salt"),s.storeIntBytes(this.sessionId,64,"session_id");s.storeLong(e.msg_id,"message_id"),s.storeInt(e.seq_no,"seq_no"),s.storeInt(a,"message_data_length"),s.storeRawBytes(e.body,"message_data");let n=16-s.getOffset()%16+16*(1+Ma(8)%5);t&&(n=(32+a)%16,n&&(n=16-n));const i=Kt(n),o=ct(s.getBuffer(),i),p=await this.getEncryptedMessage(o,n,t),d=new Ne({startMaxLength:p.bytes.length+256});return d.storeIntBytes((t?this.permAuthKey:this.authKey).id,64,"auth_key_id"),d.storeIntBytes(p.msgKey,128,"msg_key"),d.storeRawBytes(p.bytes,"encrypted_data"),d.getBytes(!0)}async sendEncryptedRequest(e){const t=this.log.bindPrefix("sendEncryptedRequest"),a=await this.getEncryptedOutput(e);this.transport||t.error("trying to send something when offline",this.transport,this),t.debug("sending",e,[e.msg_id].concat(e.inner||[]),a.length);const s=this.transport?this.transport.send(a):Promise.reject({});if(!(this.transport instanceof jt))return s;const n=ne("NETWORK_BAD_RESPONSE");return n.code=406,s.then(i=>{if(!i?.byteLength)throw n;return i},i=>{if(i!==n){const o=ne("NETWORK_BAD_REQUEST");o.originalError=i,i=o}throw i})}async onTransportData(e,t=Date.now()){const a=await this.parseResponse(e);this.processMessage(a.response,a.messageId,a.sessionId,t)}async parseResponse(e){this.lastResponseTime=Date.now();let t=new It(e);const a=t.fetchIntBytes(64,!0,"auth_key_id");if(!Te(a,this.authKey.id)){const D=ue(a.slice().reverse()),C=4294967295-parseInt(D,16);throw new Error("[MT] Invalid auth_key_id error: "+C+" "+D)}const s=t.fetchIntBytes(128,!0,"msg_key"),n=t.fetchRawBytes(e.byteLength-t.getOffset(),!0,"encrypted_data"),i=await this.getDecryptedMessage(s,n),o=await ga.getMsgKey(this.authKey.key,i,!0);if(!Te(s,o))throw this.log.warn("[MT] msg_keys",s,o),this.updateSession(),new Error("[MT] server msgKey mismatch, updating session");t=new It(i,{mtproto:!0}),t.fetchIntBytes(64,!0,"salt");const p=t.fetchIntBytes(64,!0,"session_id"),d=t.fetchLong("message_id");if(!Te(p,this.sessionId)&&(!this.prevSessionId||!Te(p,this.prevSessionId)))throw this.log.warn("sessions",p,this.sessionId,this.prevSessionId,i),new Error("[MT] Invalid server session_id: "+ue(p));const c=t.fetchInt("seq_no"),f=i.byteLength,l=t.fetchInt("message_data[length]");let m=t.getOffset();if(l%4||l>f-m)throw new Error("[MT] Invalid body length: "+l);const g=t.fetchRawBytes(l,!0,"message_data");m=t.getOffset();const _=f-m;if(_<12||_>1024)throw new Error("[MT] Invalid padding length: "+_);return{response:this.parseResponseMessageBody(g),messageId:d,sessionId:p,seqNo:c}}parseResponseMessageBody(e){const t=new It(e,{mtproto:!0,override:{mt_message:(a,s)=>{a.msg_id=t.fetchLong(s+"[msg_id]"),a.seqno=t.fetchInt(s+"[seqno]"),a.bytes=t.fetchInt(s+"[bytes]");const n=t.getOffset();try{a.body=t.fetchObject("Object",s+"[body]")}catch(i){this.log.error("parse error",i.message,i.stack),a.body={_:"parse_error",error:i}}t.getOffset()!==n+a.bytes&&t.setOffset(n+a.bytes)},mt_rpc_result:(a,s)=>{a.req_msg_id=t.fetchLong(s+"[req_msg_id]");const n=this.sentMessages[a.req_msg_id],i=n&&n.resultType||"Object";a.req_msg_id&&!n||(a.result=t.fetchObject(i,s+"[result]"))}}});return t.fetchObject("","INPUT")}applyServerSalt(e){const t=hf(e);this.serverSalt=new Uint8Array(t),this.onServerSalt?.(this.serverSalt)}clearNextReq(){const e=this.log.bindPrefix("clearNextReq").debug;if(!this.nextReq){e("nothing to clear");return}this.nextReqTimeout&&(e("clear"),clearTimeout(this.nextReqTimeout),this.nextReqTimeout=0),this.nextReq=0}scheduleRequest(e){const t=this.log.bindPrefix("scheduleRequest").debug;this.transport instanceof jt&&(this.offline&&this.checkConnection("forced schedule"),e||(e=0));const a=Date.now()+(e||0);if(this.nextReq&&(e===void 0||this.nextReq<=a)){t("already has nextReq",this.nextReq,a);return}t("delay",e);const s=()=>{if(n&&t("timeout delay",performance.now()-n),this.clearNextReq(),this.transport instanceof jt&&this.offline){t("cancel scheduled");return}this.performScheduledRequest()};let n;e!==void 0?(n=performance.now(),this.nextReqTimeout&&(clearTimeout(this.nextReqTimeout),this.nextReqTimeout=0),this.nextReq=a,this.nextReqTimeout=de.setTimeout(s,e)):s()}ackMessage(e){this.pendingAcks.push(e);let t;this.transport instanceof jt&&(t=3e4),this.scheduleRequest(t)}processResentReqMessage(e){const t=this.sentResendReq.get(e);t&&(t.resending.delete(e),t.resending.size||delete this.sentMessages[t.msg_id],this.sentResendReq.delete(e))}reqResend(e){this.log.debug("req resend",e),this.pendingResendReq.includes(e)||this.pendingResendReq.push(e),this.scheduleRequest(100)}cleanupSent(){const e=this.log.bindPrefix("cleanupSent",this.debug?ye.Log:ye.None);let t=!1;const a=this.sentMessages;return e.group("start"),Object.keys(a).forEach(s=>{const n=a[s];if(n.canCleanup&&this.pendingMessages[s]===void 0)e("clean canCleanup",s),delete a[s];else if(n.container){for(const i of n.inner)if(a[i]){e(`clean failed, found item=${i} in container=${s}`),t=!0;return}e("clean container",s),delete a[s]}else e("clean failed",s),t=!0}),e("end",t),e.groupEnd(),!t}processMessageAck(e){const t=this.sentMessages[e];t&&!t.acked&&(t.acked=!0)}processError(e){const t=(e.error_message||"").match(/^([A-Z_0-9]+\b)(: (.+))?/)||[];e.error_code=e.error_code;const a=ne(t[1]||"UNKNOWN",t[3]||"CODE#"+e.error_code+" "+e.error_message);return a.originalError=e,a.code=!e.error_code||e.error_code<=0?500:e.error_code,a}resend(){this.log.warn("resending all messages");const e=this.sentMessages;for(const t in e){const a=e[t];(a.body||a.container)&&this.pushResend(t)}this.transport.connection&&(this.clearPingDelayDisconnect(),this.sendPingDelayDisconnect())}applyServerTime(e){const t=ke(e).shiftRight(32).toJSNumber();return this.log("applying server time",t),this.timeManager.applyServerTime(t)}processMessage(e,t,a,s){const n=this.log.bindPrefix("processMessage");if(e._==="messageEmpty"){n.warn("messageEmpty",e,t);return}if(parseInt(t.substr(0,-10),10)%2){n.warn("server even message id",t,e);return}switch(n.debug("process message",e,t,s?Date.now()-s:void 0),this.pingDelayDisconnectDeferred?.resolve("any message"),e._){case"msg_container":{for(const o of e.messages)this.processMessage(o,o.msg_id,a);break}case"bad_server_salt":{n("bad server salt",e),this.applyServerSalt(e.new_server_salt),this.sentMessages[e.bad_msg_id]&&this.pushResend(e.bad_msg_id),this.ackMessage(t);break}case"bad_msg_notification":{switch(n.error("bad msg notification",e),e.error_code){case 16:case 17:case 32:case 33:case 64:{const o=this.applyServerTime(t);(e.error_code===17||o)&&this.updateSession();const p=this.updateSentMessage(e.bad_msg_id);p&&this.pushResend(p.msg_id)}}break}case"message":{if(this.lastServerMessages.has(t)){n.warn("server same messageId",t,e),this.ackMessage(t);return}if(this.lastServerMessages.add(t),this.lastServerMessages.size>100){const o=this.lastServerMessages.values().next().value;this.lastServerMessages.delete(o)}this.processMessage(e.body,e.msg_id,a);break}case"new_session_created":{this.ackMessage(t),n.debug("new_session_created",e),this.processMessageAck(e.first_msg_id),this.applyServerSalt(e.server_salt),this.isFileNetworker||this.getBaseDcId().then(o=>{o===this.dcId&&this.updatesProcessor?.(e)});break}case"msgs_ack":{n.debug("got acks",e.msg_ids);for(const o of e.msg_ids)this.processMessageAck(o);break}case"msg_detailed_info":if(!this.sentMessages[e.msg_id]){this.ackMessage(e.answer_msg_id);break}case"msg_new_detailed_info":{if(this.pendingAcks.includes(e.answer_msg_id))break;this.reqResend(e.answer_msg_id);break}case"msgs_state_info":{const o=e.req_msg_id,p=this.sentMessages[o];n("got msgs_state_info",p,e),p&&delete this.sentMessages[o];const d=[[this.lastResendReq,this.pendingResendReq]];for(const[c,f]of d)if(c?.reqMsgId===o&&f.length)for(const l of c.msgIds)Me(f,l);break}case"rpc_result":{this.ackMessage(t);const o=e.req_msg_id,p=this.sentMessages[o];if(this.processMessageAck(o),p){const{deferred:d}=p,{result:c}=e;if(c._==="rpc_error"){const f=this.processError(c);n("rpc error",c,p,f),d?.reject(f)}else n("rpc result",c,p),d?.resolve(c),p.isAPI&&!this.connectionInited&&(this.connectionInited=!0);this.processResentReqMessage(t),delete this.sentMessages[o]}else n("rpc result for unknown message:",o,e);break}case"pong":{const o=e.ping_id;if(this.lastPingDelayDisconnectId===o){const p=this.pingDelayDisconnectDeferred;p?p.resolve("pong"):n("ping deferred deleted",o)}break}default:this.ackMessage(t),this.updatesProcessor?.(e);break}}}class bf extends W{constructor(){super(),this.networkers=[],this.language=navigator.language||le.langPackCode,this.updatesProcessor=null,this.akStopped=!1,this.name="NET-FACTORY"}removeNetworker(e){Me(this.networkers,e)}setUpdatesProcessor(e){this.updatesProcessor=e}getNetworker(e){const t=new Sf({...e,timeManager:this.timeManager,getInitConnectionParams:()=>({id:le.id,deviceModel:Ft().USER_AGENT||"Unknown UserAgent",systemVersion:navigator.platform||"Unknown Platform",version:le.version+(le.isMainDomain?" "+le.suffix:""),systemLangCode:navigator.language||"en",langPack:le.langPack,langCode:this.language}),getBaseDcId:()=>this.apiManager.getBaseDcId(),createLogger:this.createLogger.bind(this),isForcedStopped:()=>this.akStopped,updatesProcessor:a=>this.updatesProcessor?.(a),onConnectionStatus:a=>{this.rootScope.dispatchEvent("connection_status_change",a)},onServerSalt:a=>{st.update(this.getAccountNumber(),{[`dc${e.dcId}_server_salt`]:ue(a)})}});return this.networkers.push(t),t}startAll(){if(this.akStopped){const e=this.networkers.filter(t=>t.isStopped());this.akStopped=!1,this.updatesProcessor&&this.updatesProcessor({_:"new_session_created"});for(const t of e)t.sendPingDelayDisconnect(),t.scheduleRequest()}}stopAll(){this.akStopped=!0}setLanguage(e){if(this.language!==e){this.language=e;for(const t of this.networkers)t.isFileNetworker||(t.connectionInited=!1)}}unsetConnectionInited(){for(const e of this.networkers)e.connectionInited=!1}forceReconnectTimeout(){for(const e of this.networkers)e.forceReconnectTimeout()}forceReconnect(){for(const e of this.networkers)if(!e.isFileNetworker){e.forceReconnect();break}}}class Df{constructor(){this.testPublicKeysHex=[{modulus:"c8c11d635691fac091dd9489aedced2932aa8a0bcefef05fa800892d9b52ed03200865c9e97211cb2ee6c7ae96d3fb0e15aeffd66019b44a08a240cfdd2868a85e1f54d6fa5deaa041f6941ddf302690d61dc476385c2fa655142353cb4e4b59f6e5b6584db76fe8b1370263246c010c93d011014113ebdf987d093f9d37c2be48352d69a1683f8f6e6c2167983c761e3ab169fde5daaa12123fa1beab621e4da5935e9c198f82f35eae583a99386d8110ea6bd1abb0f568759f62694419ea5f69847c43462abef858b4cb5edc84e7b9226cd7bd7e183aa974a712c079dde85b9dc063b8a5c08e8f859c0ee5dcd824c7807f20153361a7f63cfd2a433a1be7f5",exponent:"010001"}],this.publisKeysHex=[{modulus:"e8bb3305c0b52c6cf2afdf7637313489e63e05268e5badb601af417786472e5f93b85438968e20e6729a301c0afc121bf7151f834436f7fda680847a66bf64accec78ee21c0b316f0edafe2f41908da7bd1f4a5107638eeb67040ace472a14f90d9f7c2b7def99688ba3073adb5750bb02964902a359fe745d8170e36876d4fd8a5d41b2a76cbff9a13267eb9580b2d06d10357448d20d9da2191cb5d8c93982961cdfdeda629e37f1fb09a0722027696032fe61ed663db7a37f6f263d370f69db53a0dc0a1748bdaaff6209d5645485e6e001d1953255757e4b8e42813347b11da6ab500fd0ace7e6dfa3736199ccaf9397ed0745a427dcfa6cd67bcb1acff3",exponent:"010001"}],this.publicKeysParsed={},this.prepared=!1,this.preparePromise=null,ce.test&&(this.publisKeysHex=this.testPublicKeysHex)}prepare(){return this.preparePromise?this.preparePromise:this.prepared?Promise.resolve():this.preparePromise=Promise.all(this.publisKeysHex.map(e=>{const t=new Ne;t.storeBytes(Vt(e.modulus),"n"),t.storeBytes(Vt(e.exponent),"e");const a=t.getBuffer();return Y.invokeCrypto("sha1",a).then(s=>{const n=s.slice(-8);n.reverse(),this.publicKeysParsed[ue(n).toLowerCase()]={modulus:e.modulus,exponent:e.exponent}})})).then(()=>{this.prepared=!0,this.preparePromise=null})}async select(e){await this.prepare();for(let t=0;t<e.length;++t){let a=ke(e[t]).toString(16).toLowerCase();a.length<16&&(a=new Array(16-a.length).fill("0").join("")+a);const s=this.publicKeysParsed[a];if(s)return Object.assign({fingerprint:e[t]},s)}}}var gi=new Df;function ui(r,e){const t=r.length,a=new Uint8Array(t);for(let s=0;s<t;++s)a[s]=r[s]^e[s];return a}const Cf=86400;class If{constructor(e){this.getTransportType=()=>{if(ce.multipleTransports)return this.getTransportTypePromise?this.getTransportTypePromise:this.getTransportTypePromise=va.pingTransports().then(({websocket:t})=>{this.transportType=t?"websocket":"https",this.log("will use transport:",this.transportType)})},Pa(this,e),this.log=je("AUTHORIZER"),this.cached={}}sendPlainRequest(e,t){const a=t.byteLength,s=new Ne;s.storeLongP(0,0,"auth_key_id"),s.storeLong(this.timeManager.generateId(),"msg_id"),s.storeInt(a,"request_length");const n=s.getBytes(!0),i=new Uint8Array(n.byteLength+a);i.set(n),i.set(t,n.length);const o={code:406,type:"NETWORK_BAD_RESPONSE"};return Ce&&this.log("mtpSendPlainRequest: creating requestPromise"),e.send(i).then(d=>{if(Ce&&this.log("mtpSendPlainRequest: in good sector",d),!d||!d.byteLength)throw o;try{const c=new It(d,{mtproto:!0});if(d.length===4){const g=c.fetchInt();throw this.log.error("mtpSendPlainRequest: wrong response, error code:",g),g}const f=c.fetchLong("auth_key_id");f!=="0"&&this.log.error("auth_key_id !== 0",f);const l=c.fetchLong("msg_id");l==="0"&&this.log.error("msg_id === 0",l);const m=c.fetchInt("msg_len");return m||this.log.error("no msg_len",m),c}catch(c){throw this.log.error("mtpSendPlainRequest: deserialization went bad",c),Object.assign(o,{originalError:c})}},d=>{throw!d.message&&!d.type&&(d=Object.assign(o,{originalError:d})),d})}async sendReqPQ(e){const t=new Ne({mtproto:!0});t.storeMethod("req_pq_multi",{nonce:e.nonce}),Ce&&this.log("Send req_pq",ue(e.nonce));let a;try{const o=this.sendPlainRequest(e.transport,t.getBytes(!0));gi.prepare(),a=await o}catch(o){throw this.log.error("req_pq error",o.message),o}const s=a.fetchObject("ResPQ");if(s._!=="resPQ")throw new Error("[MT] resPQ response invalid: "+s._);if(!Te(e.nonce,s.nonce))throw this.log.error(e.nonce,s.nonce),new Error("[MT] resPQ nonce mismatch");e.serverNonce=s.server_nonce,e.pq=s.pq,e.fingerprints=s.server_public_key_fingerprints,Ce&&this.log("Got ResPQ",ue(e.serverNonce),ue(e.pq),e.fingerprints);const n=await gi.select(e.fingerprints);if(!n)throw new Error("[MT] No public key found");e.publicKey=n,Ce&&this.log("PQ factorization start",e.pq);try{var i=await Y.invokeCrypto("factorize",e.pq)}catch(o){throw this.log.error("worker error factorize",o),o}return e.p=i[0],e.q=i[1],Ce&&this.log("PQ factorization done",i),this.sendReqDhParams(e)}async sendReqDhParams(e){e.newNonce=Kt(32);const t={_:"p_q_inner_data_dc",pq:e.pq,p:e.p,q:e.q,nonce:e.nonce,server_nonce:e.serverNonce,new_nonce:e.newNonce,dc:(e.dcId+(ce.test?1e4:0))*(e.media?-1:1)},a=144+(e.temp?4:0);e.temp&&(t._="p_q_inner_data_temp_dc",t.expires_in=e.expiresIn=Cf,e.expiresAt=te(!0)+e.expiresIn);const s=new Ne({mtproto:!0});s.storeObject(t,"P_Q_inner_data","DECRYPTED_DATA");const n=s.getBytes(!0);if(n.length>a)throw"DH_params: data is more than 144 bytes!";const i=rn(n,192,!1,!0,!1),o=i.slice().reverse(),d=await(async()=>{for(;;){const S=Kt(32),D=o.concat(await Y.invokeCrypto("sha256",S.concat(i)));if(D.length!==224)throw"DH_params: dataWithHash !== 224 bytes!";const C=await Y.invokeCrypto("aes-encrypt",D,S,new Uint8Array([0])),w=ui(S,await Y.invokeCrypto("sha256",C)).concat(C),k=Wt(w),B=ke(e.publicKey.modulus,16);if(k.compare(B)===-1)return w}})(),c=rn(await Y.invokeCrypto("rsa-encrypt",d,e.publicKey),256,!0,!0,!0),f={nonce:e.nonce,server_nonce:e.serverNonce,p:e.p,q:e.q,public_key_fingerprint:e.publicKey.fingerprint,encrypted_data:c},l=new Ne({mtproto:!0});l.storeMethod("req_DH_params",f);const m=l.getBytes(!0);Ce&&this.log("Send req_DH_params",f);let g;try{g=await this.sendPlainRequest(e.transport,m)}catch(S){throw this.log.error("Send req_DH_params FAIL!",S),S}const _=g.fetchObject("Server_DH_Params","RESPONSE");if(Ce&&this.log("Sent req_DH_params, response:",_),_._!=="server_DH_params_fail"&&_._!=="server_DH_params_ok")throw new Error("[MT] Server_DH_Params response invalid: "+_._);if(!Te(e.nonce,_.nonce))throw new Error("[MT] Server_DH_Params nonce mismatch");if(!Te(e.serverNonce,_.server_nonce))throw new Error("[MT] Server_DH_Params server_nonce mismatch");if(_._==="server_DH_params_fail"){const S=(await Y.invokeCrypto("sha1",e.newNonce)).slice(-16);throw Te(S,_.new_nonce_hash)?new Error("[MT] server_DH_params_fail"):new Error("[MT] server_DH_params_fail new_nonce_hash mismatch")}try{await this.decryptServerDhDataAnswer(e,_.encrypted_answer)}catch(S){throw this.log.error("mtpDecryptServerDhDataAnswer FAILED!",S),S}return this.sendSetClientDhParams(e)}async decryptServerDhDataAnswer(e,t){e.localTime=Date.now(),e.tmpAesKey=(await Y.invokeCrypto("sha1",e.newNonce.concat(e.serverNonce))).concat((await Y.invokeCrypto("sha1",e.serverNonce.concat(e.newNonce))).slice(0,12)),e.tmpAesIv=(await Y.invokeCrypto("sha1",e.serverNonce.concat(e.newNonce))).slice(12).concat(await Y.invokeCrypto("sha1",e.newNonce.concat(e.newNonce)),e.newNonce.slice(0,4));const a=new Uint8Array(await Y.invokeCrypto("aes-decrypt",t,e.tmpAesKey,e.tmpAesIv)),s=a.slice(0,20),n=a.slice(20),i=new It(n,{mtproto:!0}),o=i.fetchObject("Server_DH_inner_data");if(o._!=="server_DH_inner_data")throw new Error("[MT] server_DH_inner_data response invalid: "+o);if(!Te(e.nonce,o.nonce))throw new Error("[MT] server_DH_inner_data nonce mismatch");if(!Te(e.serverNonce,o.server_nonce))throw new Error("[MT] server_DH_inner_data serverNonce mismatch");Ce&&this.log("Done decrypting answer"),e.g=o.g,e.dhPrime=o.dh_prime,e.gA=o.g_a,e.serverTime=o.server_time,e.retry=0,this.verifyDhParams(e.g,e.dhPrime,e.gA);const p=i.getOffset();if(!Te(s,await Y.invokeCrypto("sha1",n.slice(0,p))))throw new Error("[MT] server_DH_inner_data SHA1 mismatch");this.timeManager.applyServerTime(e.serverTime,e.localTime)}verifyDhParams(e,t,a){Ce&&this.log("Verifying DH params",e,t,a);const s=ue(t);if(e!==3||s!=="c71caeb9c6b1c9048e6c522f70f13f73980d40238e3e21c14934d037563d930f48198a0aa7c14058229493d22530f4dbfa336f6e0ac925139543aed44cce7c3720fd51f69458705ac68cd4fe6b6b13abdc9746512969328454f18faf8c595f642477fe96bb2a941d5bcd1d4ac8cc49880708fa9b378e3c4f3a9060bee67cf9a4a4a695811051907e162753b56b0f6b410dba74d8a84b2a14b3144e0ef1284754fd17ed950d5965b4b9dd46582db1178d169c6bc465b0d6ff9ca3928fef5b9ae4e418fc15e83ebea0f87fa9ff5eed70050ded2849f47bf959d956850ce929851f0d8115f635b105ee2e4e15d04b2454bf6f4fadf034b10403119cd8e3b92fcc5b")throw new Error("[MT] DH params are not verified: unknown dhPrime");Ce&&this.log("dhPrime cmp OK");const n=Wt(a),i=ke(s,16);if(n.compare(ke.one)<=0)throw new Error("[MT] DH params are not verified: gA <= 1");if(n.compare(i.subtract(ke.one))>=0)throw new Error("[MT] DH params are not verified: gA >= dhPrime - 1");Ce&&this.log("1 < gA < dhPrime-1 OK");const o=ke(2).pow(1984);if(n.compare(o)<0)throw new Error("[MT] DH params are not verified: gA < 2^{2048-64}");if(n.compare(i.subtract(o))>=0)throw new Error("[MT] DH params are not verified: gA > dhPrime - 2^{2048-64}");return Ce&&this.log("2^{2048-64} < gA < dhPrime-2^{2048-64} OK"),!0}async sendSetClientDhParams(e){const t=Vt(e.g.toString(16));e.b=Kt(256);try{var a=await Y.invokeCrypto("mod-pow",t,e.b,e.dhPrime)}catch(g){throw g}const s=new Ne({mtproto:!0});s.storeObject({_:"client_DH_inner_data",nonce:e.nonce,server_nonce:e.serverNonce,retry_id:[0,e.retry++],g_b:a},"Client_DH_Inner_Data");const n=(await Y.invokeCrypto("sha1",s.getBuffer())).concat(s.getBytes(!0)),i=await Y.invokeCrypto("aes-encrypt",n,e.tmpAesKey,e.tmpAesIv),o=new Ne({mtproto:!0});o.storeMethod("set_client_DH_params",{nonce:e.nonce,server_nonce:e.serverNonce,encrypted_data:i}),Ce&&this.log("Send set_client_DH_params");let p;try{p=await this.sendPlainRequest(e.transport,o.getBytes(!0))}catch(g){throw g}const d=p.fetchObject("Set_client_DH_params_answer");if(d._!=="dh_gen_ok"&&d._!=="dh_gen_retry"&&d._!=="dh_gen_fail")throw new Error("[MT] Set_client_DH_params_answer response invalid: "+d._);if(!Te(e.nonce,d.nonce))throw new Error("[MT] Set_client_DH_params_answer nonce mismatch");if(!Te(e.serverNonce,d.server_nonce))throw new Error("[MT] Set_client_DH_params_answer server_nonce mismatch");try{var c=await Y.invokeCrypto("mod-pow",e.gA,e.b,e.dhPrime)}catch{throw c}const f=await Y.invokeCrypto("sha1",c),l=f.slice(0,8),m=f.slice(-8);switch(Ce&&this.log("Got Set_client_DH_params_answer",d._,c),d._){case"dh_gen_ok":{const g=(await Y.invokeCrypto("sha1",e.newNonce.concat([1],l))).slice(-16);if(!Te(g,d.new_nonce_hash1))throw this.log.error("Set_client_DH_params_answer new_nonce_hash1 mismatch",g,d),new Error("new_nonce_hash1 mismatch");const _=ui(e.newNonce.slice(0,8),e.serverNonce.slice(0,8));return Ce&&this.log("Auth successfull!",m,c,_),e.authKey=new Ir(c,m,e.expiresAt),e.serverSalt=_,e}case"dh_gen_retry":{const g=(await Y.invokeCrypto("sha1",e.newNonce.concat([2],l))).slice(-16);if(!Te(g,d.new_nonce_hash2))throw new Error("[MT] Set_client_DH_params_answer new_nonce_hash2 mismatch");return this.sendSetClientDhParams(e)}case"dh_gen_fail":{const g=(await Y.invokeCrypto("sha1",e.newNonce.concat([3],l))).slice(-16);throw Te(g,d.new_nonce_hash3)?new Error("[MT] Set_client_DH_params_answer fail"):new Error("[MT] Set_client_DH_params_answer new_nonce_hash3 mismatch")}}}async __auth(e,t){if(t)return;const a={dcId:e,nonce:Kt(16),temp:t,transport:this.dcConfigurator.chooseServer(e,"client",this.transportType,!t),media:!1};return this.sendReqPQ(a)}async _auth(e,t){await this.getTransportType();let a,s=0;for(;++s<=3;)try{return await this.__auth(e,t)}catch(n){a=n}throw a}auth(e,t){var s;const a=`${e}_${t}`;return(s=this.cached)[a]??(s[a]=this._auth(e,t).catch(n=>{throw delete this.cached[a],n}))}}class wf{constructor(){this.lastMessageId=[0,0],this.timeOffset=0}getServerTimeOffset(){return this.timeOffset}generateId(){const e=Date.now(),t=Math.floor(e/1e3)+this.timeOffset,a=e%1e3,s=Ma(16);let n=[t,a<<21|s<<3|4];return(this.lastMessageId[0]>n[0]||this.lastMessageId[0]===n[0]&&this.lastMessageId[1]>=n[1])&&(n=[this.lastMessageId[0],this.lastMessageId[1]+4]),this.lastMessageId=n,sr(n[0],n[1]).toString(10)}applyServerTime(e,t){t=(t||Date.now())/1e3|0;const a=e-t,s=Math.abs(this.timeOffset-a)>10;return this.lastMessageId=[0,0],this.timeOffset!==a&&(this.timeOffset=a),s}}class Af{saveWebDocument(e){if(!e)return;const t=e.attributes.find(a=>a._==="documentAttributeImageSize");return t&&(e.w=t.w,e.h=t.h),e}}class kf extends W{constructor(){super(...arguments),this.saveStarsStatus=e=>(this.appPeersManager.saveApiPeers(e),e.history?.forEach(t=>{const a=t.peer,s=a&&this.appPeersManager.getPeerId(a.peer);t.msg_id&&(t.msg_id=this.appMessagesIdsManager.generateMessageId(t.msg_id,this.appPeersManager.isChannel(s)?s.toChatId():void 0)),t.extended_media&&t.extended_media.forEach(n=>{this.appMessagesManager.saveMessageMedia({media:n},{type:"starsTransaction",peerId:s,mid:t.msg_id})})}),e),this.processPaymentResult=e=>(e._==="payments.paymentResult"&&this.apiUpdatesManager.processUpdateMessage(e.updates),e),this.onUpdateStarsBalance=e=>{const a=e.balance._==="starsTonAmount"?this.starsStatusTon:this.starsStatus;!a||a instanceof Promise||this.updateLocalStarsBalance(e.balance)}}after(){this.rootScope.addEventListener("premium_toggle",()=>{this.getPremiumPromo(!0)}),this.apiUpdatesManager.addMultipleEventsListeners({updateStarsBalance:this.onUpdateStarsBalance})}getInputInvoiceBySlug(e){return{_:"inputInvoiceSlug",slug:e}}getInputInvoiceByPeerId(e,t){return{_:"inputInvoiceMessage",peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t)}}getPaymentForm(e){return this.apiManager.invokeApi("payments.getPaymentForm",{invoice:e,theme_params:this.apiManager.getThemeParams()}).then(t=>(t._!=="payments.paymentFormStarGift"&&(this.appPeersManager.saveApiPeers(t),t.photo=this.appWebDocsManager.saveWebDocument(t.photo)),t))}getPaymentReceipt(e,t){return this.apiManager.invokeApi("payments.getPaymentReceipt",{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t)}).then(a=>(this.appPeersManager.saveApiPeers(a),a.photo=this.appWebDocsManager.saveWebDocument(a.photo),a))}validateRequestedInfo(e,t,a){return this.apiManager.invokeApi("payments.validateRequestedInfo",{save:a,invoice:e,info:t})}sendPaymentForm(e,t,a,s,n,i){return this.apiManager.invokeApi("payments.sendPaymentForm",{form_id:t,invoice:e,requested_info_id:a,shipping_option_id:s,credentials:n,tip_amount:i||void 0}).then(this.processPaymentResult)}clearSavedInfo(e,t){return this.apiManager.invokeApi("payments.clearSavedInfo",{info:e,credentials:t})}getPremiumGiftCodeOptions(e){return this.apiManager.invokeApiCacheable("payments.getPremiumGiftCodeOptions",{boost_peer:e!==void 0?this.appPeersManager.getInputPeerById(e):void 0})}getPremiumPromo(e){return e&&this.premiumPromo&&(this.premiumPromo=void 0),this.premiumPromo??(this.premiumPromo=this.apiManager.invokeApiSingleProcess({method:"help.getPremiumPromo",params:{},processResult:t=>(this.appPeersManager.saveApiPeers(t),t.videos=t.videos.map(a=>this.appDocsManager.saveDoc(a,{type:"premiumPromo"})),this.premiumPromo=t)}))}checkGiftCode(e){return this.apiManager.invokeApiSingleProcess({method:"payments.checkGiftCode",params:{slug:e},processResult:t=>{if(this.appPeersManager.saveApiPeers(t),t.slug=e,t.giveaway_msg_id){const a=t.from_id&&this.appPeersManager.getPeerId(t.from_id);t.giveaway_msg_id=this.appMessagesIdsManager.generateMessageId(t.giveaway_msg_id,!a||a.isUser()?void 0:a.toChatId())}return t}})}applyGiftCode(e){return this.apiManager.invokeApiSingleProcess({method:"payments.applyGiftCode",params:{slug:e},processResult:t=>{this.apiUpdatesManager.processUpdateMessage(t)}})}getGiveawayInfo(e,t){return this.apiManager.invokeApiSingleProcess({method:"payments.getGiveawayInfo",params:{peer:this.appPeersManager.getInputPeerById(e),msg_id:H(t)}})}launchPrepaidGiveaway(e,t,a){return this.apiManager.invokeApiSingleProcess({method:"payments.launchPrepaidGiveaway",params:{peer:this.appPeersManager.getInputPeerById(e),giveaway_id:t,purpose:a},processResult:s=>{this.apiUpdatesManager.processUpdateMessage(s)}})}getStarsTopupOptions(){return this.apiManager.invokeApi("payments.getStarsTopupOptions")}getCachedStarsStatus(){if(!(this.starsStatus instanceof Promise))return this.starsStatus}getStarsStatus(e){return e&&(this.starsStatus=void 0),this.starsStatus??(this.starsStatus=this.apiManager.invokeApiSingleProcess({method:"payments.getStarsStatus",params:{peer:this.appPeersManager.getInputPeerById(this.rootScope.myId)},processResult:t=>this.starsStatus=this.saveStarsStatus(t)}))}getStarsStatusTon(e){return e&&(this.starsStatusTon=void 0),this.starsStatusTon??(this.starsStatusTon=this.apiManager.invokeApiSingleProcess({method:"payments.getStarsStatus",params:{peer:this.appPeersManager.getInputPeerById(this.rootScope.myId),ton:!0},processResult:t=>this.starsStatusTon=this.saveStarsStatus(t)}))}getStarsTransactions(e="",t,a){return this.apiManager.invokeApiSingleProcess({method:"payments.getStarsTransactions",params:{peer:this.appPeersManager.getInputPeerById(this.rootScope.myId),offset:e,inbound:t,outbound:t===!1,limit:30,ton:a},processResult:this.saveStarsStatus})}getStarsSubscriptions(e,t){return this.apiManager.invokeApiSingleProcess({method:"payments.getStarsSubscriptions",params:{peer:this.appPeersManager.getInputPeerById(this.rootScope.myId),offset:e,missing_balance:t},processResult:this.saveStarsStatus})}changeStarsSubscription(e,t){return this.apiManager.invokeApiSingleProcess({method:"payments.changeStarsSubscription",params:{subscription_id:e,peer:this.appPeersManager.getInputPeerById(this.rootScope.myId),canceled:t}})}fulfillStarsSubscription(e){return this.apiManager.invokeApiSingleProcess({method:"payments.fulfillStarsSubscription",params:{subscription_id:e,peer:this.appPeersManager.getInputPeerById(this.rootScope.myId)}})}sendStarsForm(e,t){return this.apiManager.invokeApi("payments.sendStarsForm",{form_id:t,invoice:e}).then(this.processPaymentResult)}getStarsTransactionsByID(e){if(e)return this.apiManager.invokeApi("payments.getStarsTransactionsByID",{peer:this.appPeersManager.getInputPeerById(this.rootScope.myId),id:[{_:"inputStarsTransaction",pFlags:{},id:e}]}).then(t=>t.history?.[0])}getStarsGiftOptions(e){return this.apiManager.invokeApi("payments.getStarsGiftOptions",{user_id:this.appUsersManager.getUserInput(e)})}getStarsGiveawayOptions(){return this.apiManager.invokeApi("payments.getStarsGiveawayOptions")}updateLocalStarsBalance(e,t){const a=e._==="starsTonAmount",s=e._==="starsTonAmount"?this.starsStatusTon:this.starsStatus;s.balance=e,this.rootScope.dispatchEvent("stars_balance",{balance:ps(e),ton:a})}}function Ef(r){if(r)return r.icons.find(e=>e.name===Ro)}const Ff=!0;class Tf extends W{constructor(){super(...arguments),this.clear=(e=!1)=>{e?this.attachMenuBots=new Map:(this.attachMenuBots.clear(),this.attachMenuBotsArr=void 0)},this.onUpdateAttachMenuBots=e=>{this.clear(),this.getAttachMenuBots()},this.onUpdateWebViewResultSent=e=>{this.rootScope.dispatchEvent("web_view_result_sent",e.query_id)}}after(){this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateAttachMenuBots:this.onUpdateAttachMenuBots,updateWebViewResultSent:this.onUpdateWebViewResultSent}),this.rootScope.addEventListener("user_auth",()=>{this.appAttachMenuBotsManager.getAttachMenuBots(),setInterval(()=>{this.onUpdateAttachMenuBots({_:"updateAttachMenuBots"})},30*6e4)})}onLanguageChange(){this.attachMenuBots?.size&&this.onUpdateAttachMenuBots({_:"updateAttachMenuBots"})}saveAttachMenuBot(e){this.attachMenuBots.set(e.bot_id,e);const t=Ef(e);return t&&(t.icon=this.appDocsManager.saveDoc(t.icon,{type:"attachMenuBotIcon",botId:e.bot_id}),this.apiFileManager.downloadMedia({media:t.icon})),this.rootScope.dispatchEvent("attach_menu_bot",e),e}saveAttachMenuBots(e){e.saved||(e.saved=!0,e.forEach(t=>this.saveAttachMenuBot(t)))}saveBotApp(e,t){if(!t)return;const a={type:"botApp",botId:e,appName:t.short_name};return t.photo=this.appPhotosManager.savePhoto(t.photo,a),t.document=this.appDocsManager.saveDoc(t.document,a),t}getAttachMenuBots(){return this.attachMenuBotsArr??this.apiManager.invokeApiSingleProcess({method:"messages.getAttachMenuBots",processResult:e=>(this.appUsersManager.saveApiUsers(e.users),this.saveAttachMenuBots(e.bots),this.attachMenuBotsArr=e.bots.slice(0,void 0))})}getAttachMenuBotCached(e){return this.attachMenuBots.get(e)}getAttachMenuBot(e,t){if(!this.appUsersManager.isAttachMenuBot(e)||!Ff)throw ne("BOT_INVALID");return(!t&&this.getAttachMenuBotCached(e))??this.apiManager.invokeApiSingleProcess({method:"messages.getAttachMenuBot",params:{bot:this.appUsersManager.getUserInput(e)},processResult:a=>(this.appUsersManager.saveApiUsers(a.users),this.saveAttachMenuBot(a.bot))})}requestWebView(e){const{botId:t,peerId:a,url:s,fromBotMenu:n,fromSwitchWebView:i,fromSideMenu:o,themeParams:p=this.apiManager.getThemeParams(),silent:d,sendAsPeerId:c,startParam:f,isSimpleWebView:l,app:m,writeAllowed:g,main:_,compact:S,fullscreen:D}=e,b={start_param:f,theme_params:p,compact:S,fullscreen:D,platform:"web"};return m?this.apiManager.invokeApiSingleProcess({method:"messages.requestAppWebView",params:{...b,peer:this.appPeersManager.getInputPeerById(a),write_allowed:g,app:{_:"inputBotAppID",access_hash:m.access_hash,id:m.id}}}):l?this.apiManager.invokeApiSingleProcess({method:"messages.requestSimpleWebView",params:{...b,bot:this.appUsersManager.getUserInput(t),url:s,from_switch_webview:i,from_side_menu:o}}):_?this.apiManager.invokeApiSingleProcess({method:"messages.requestMainWebView",params:{...b,peer:this.appPeersManager.getInputPeerById(a),bot:this.appUsersManager.getUserInput(t)}}):this.apiManager.invokeApiSingleProcess({method:"messages.requestWebView",params:{...b,peer:this.appPeersManager.getInputPeerById(a),bot:this.appUsersManager.getUserInput(t),silent:d,url:s,reply_to:this.appMessagesManager.getInputReplyTo(e),from_bot_menu:n,send_as:c?this.appPeersManager.getInputPeerById(c):void 0}})}prolongWebView(e){return this.apiManager.invokeApiSingleProcess({method:"messages.prolongWebView",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),bot:this.appUsersManager.getUserInput(e.botId),query_id:e.queryId,silent:e.silent,reply_to:this.appMessagesManager.getInputReplyTo(e),send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0}})}toggleBotInAttachMenu(e,t,a){return this.apiManager.invokeApiSingleProcess({method:"messages.toggleBotInAttachMenu",params:{bot:this.appUsersManager.getUserInput(e),enabled:t,write_allowed:a}})}sendWebViewData(e,t,a){return this.apiManager.invokeApi("messages.sendWebViewData",{bot:this.appUsersManager.getUserInput(e),button_text:t,data:a,random_id:Et()}).then(s=>{this.apiUpdatesManager.processUpdateMessage(s)})}getBotApp(e,t){return this.apiManager.invokeApiSingleProcess({method:"messages.getBotApp",params:{app:{_:"inputBotAppShortName",bot_id:this.appUsersManager.getUserInput(e),short_name:t},hash:0},processResult:a=>(a.app=this.saveBotApp(e,a.app),a)})}getPopularAppBots(e="",t=50){return this.apiManager.invokeApiSingleProcess({method:"bots.getPopularAppBots",params:{limit:t,offset:e},processResult:a=>(this.appPeersManager.saveApiPeers(a),{nextOffset:a.next_offset,userIds:a.users.map(s=>s.id)})})}invokeWebViewCustomMethod(e,t,a){return this.apiManager.invokeApi("bots.invokeWebViewCustomMethod",{bot:this.appUsersManager.getUserInput(e),custom_method:t,params:{_:"dataJSON",data:JSON.stringify(a)}})}}class Uf extends W{requestUrlAuth(e,t,a,s){return this.apiManager.invokeApi("messages.requestUrlAuth",{button_id:s,msg_id:a?H(a):void 0,peer:t?this.appPeersManager.getInputPeerById(t):void 0,url:e}).then(n=>(n._==="urlAuthResultRequest"&&this.appUsersManager.saveApiUser(n.bot),n))}acceptUrlAuth(e,t,a,s,n){return this.apiManager.invokeApi("messages.acceptUrlAuth",{button_id:s,msg_id:a?H(a):void 0,peer:t?this.appPeersManager.getInputPeerById(t):void 0,url:e,write_allowed:n}).then(i=>i)}getWebAuthorizations(){return this.apiManager.invokeApi("account.getWebAuthorizations").then(e=>(this.appUsersManager.saveApiUsers(e.users),e.authorizations))}resetWebAuthorization(e){return this.apiManager.invokeApi("account.resetWebAuthorization",{hash:e})}resetWebAuthorizations(){return this.apiManager.invokeApi("account.resetWebAuthorizations")}}class Rf extends W{after(){return this.wallPapers={},this.wallPapersBySlug={},this.rootScope.addEventListener("user_auth",()=>{this.getThemes()}),this.appStateManager.getState().then(e=>{try{this.saveAccountThemes(e.accountThemes)}catch{}})}saveWallPaper(e){if(!e)return e;let t;return e._!=="wallPaperNoFile"&&(t=e.slug,e.document=this.appDocsManager.saveDoc(e.document,{type:"wallPaper",wallPaperId:e.id})),this.wallPapers[e.id]=e,t&&(this.wallPapersBySlug[t]=e),e}getWallPaper(e){return this.apiManager.invokeApiSingleProcess({method:"account.getWallPaper",params:{wallpaper:e},processResult:t=>this.saveWallPaper(t)})}getInputWallPaper(e){return typeof e=="string"?{_:"inputWallPaperSlug",slug:e}:e._==="wallPaperNoFile"?{_:"inputWallPaperNoFile",id:e.id}:{_:"inputWallPaper",id:e.id,access_hash:e.access_hash}}getWallPaperById(e){const t=this.wallPapers[e];return this.getWallPaper(this.getInputWallPaper(t))}getWallPaperBySlug(e){const t=this.wallPapersBySlug[e];return t||this.getWallPaper(this.getInputWallPaper(e))}saveAccountThemes(e){e.themes?.forEach(t=>{t.settings&&t.settings.forEach(a=>{a.wallpaper=this.saveWallPaper(a.wallpaper)})})}async getThemes(){const t=(await this.appStateManager.getState()).accountThemes;return this.apiManager.invokeApiSingleProcess({method:"account.getThemes",params:{format:"macos",hash:t?.hash??0},processResult:async a=>a._==="account.themesNotModified"?t.themes:(this.saveAccountThemes(a),await this.appStateManager.pushToState("accountThemes",a),a.themes)})}getWallPapers(){return this.apiManager.invokeApiHashable({method:"account.getWallPapers"}).then(e=>{const t=e.wallpapers;return t.forEach((a,s,n)=>{n[s]=this.saveWallPaper(a)}),t})}}class Bf extends W{toggleUsername({username:e,active:t,peerId:a}){if(!a||a===this.appUsersManager.userId)return this.apiManager.invokeApi("account.toggleUsername",{username:e,active:t});if(a.isAnyChat()){const s=a.toChatId(),n=this.apiManager.invokeApi("channels.toggleUsername",{channel:this.appChatsManager.getChannelInput(s),username:e,active:t});return this.appChatsManager.refreshChatAfterRequest(s,n)}else return this.apiManager.invokeApi("bots.toggleUsername",{bot:this.appUsersManager.getUserInput(a),username:e,active:t})}reorderUsernames({peerId:e,order:t}){if(!e||e===this.appUsersManager.userId)return this.apiManager.invokeApi("account.reorderUsernames",{order:t});if(e.isAnyChat()){const a=e.toChatId(),s=this.apiManager.invokeApi("channels.reorderUsernames",{channel:this.appChatsManager.getChannelInput(a),order:t});return this.appChatsManager.refreshChatAfterRequest(a,s)}else return this.apiManager.invokeApi("bots.reorderUsernames",{bot:this.appUsersManager.getUserInput(e),order:t})}}function xf(r){return{_:"starsSubscriptionPricing",amount:r,period:ce.test?60:2592e3}}class Lf extends W{after(){this.apiUpdatesManager.addMultipleEventsListeners({updatePendingJoinRequests:async e=>{const t=oe(e.peer),a=await this.appStateManager.getState();delete a.hideChatJoinRequests[t],this.appStateManager.pushToState("hideChatJoinRequests",a.hideChatJoinRequests),this.rootScope.dispatchEvent("chat_requests",{chatId:t.toChatId(),recentRequesters:e.recent_requesters,requestsPending:e.requests_pending})}})}saveChatInvite(e,t){if(t)return t.chat&&this.appChatsManager.saveApiChat(t.chat,!0),t.photo&&(t.photo=this.appPhotosManager.savePhoto(t.photo,{type:"chatInvite",hash:e})),t}exportChatInvite({chatId:e,expireDate:t,usageLimit:a,requestNeeded:s,title:n,stars:i}){return this.apiManager.invokeApi("messages.exportChatInvite",{peer:this.appChatsManager.getInputPeer(e),expire_date:t,usage_limit:a,request_needed:s,title:n,subscription_pricing:i?xf(i):void 0})}checkChatInvite(e){return this.apiManager.invokeApi("messages.checkChatInvite",{hash:e}).then(t=>this.appChatInvitesManager.saveChatInvite(e,t))}importChatInvite(e){return this.apiManager.invokeApi("messages.importChatInvite",{hash:e}).then(t=>(this.apiUpdatesManager.processUpdateMessage(t),t.chats[0].id))}getExportedChatInvites({chatId:e,revoked:t,adminId:a}){return this.apiManager.invokeApi("messages.getExportedChatInvites",{peer:this.appChatsManager.getInputPeer(e),admin_id:a?this.appUsersManager.getUserInput(a):{_:"inputUserSelf"},limit:50,revoked:t}).then(s=>(this.appUsersManager.saveApiUsers(s.users),s))}editExportedChatInvite({chatId:e,link:t,expireDate:a,usageLimit:s,requestNeeded:n,title:i,revoked:o}){return this.apiManager.invokeApi("messages.editExportedChatInvite",{peer:this.appChatsManager.getInputPeer(e),revoked:o,link:t,expire_date:a,usage_limit:s,request_needed:n,title:i}).then(p=>(this.appUsersManager.saveApiUsers(p.users),p))}deleteRevokedExportedChatInvites(e,t){return this.apiManager.invokeApi("messages.deleteRevokedExportedChatInvites",{peer:this.appChatsManager.getInputPeer(e),admin_id:this.appUsersManager.getUserInput(t)})}deleteExportedChatInvite(e,t){return this.apiManager.invokeApi("messages.deleteExportedChatInvite",{peer:this.appChatsManager.getInputPeer(e),link:t})}getAdminsWithInvites(e){return this.apiManager.invokeApi("messages.getAdminsWithInvites",{peer:this.appChatsManager.getInputPeer(e)}).then(t=>(this.appUsersManager.saveApiUsers(t.users),t))}getChatInviteImporters({chatId:e,limit:t=50,offsetDate:a=0,offsetUserId:s,link:n,q:i,requested:o}){const p=s?this.appUsersManager.getUserInput(s):{_:"inputUserEmpty"};return this.apiManager.invokeApi("messages.getChatInviteImporters",{peer:this.appChatsManager.getInputPeer(e),limit:t,offset_date:a,offset_user:p,link:n,q:i,requested:o}).then(d=>(this.appUsersManager.saveApiUsers(d.users),d))}}var at=(r=>(r.Stories="stories",r.Pinned="pinnedStories",r.Archive="archiveStories",r))(at||{});function Ya(r,e,t,a,s){const n=e.id;return a===at.Pinned?Ct(r,n,i=>{const o=i,p=s.get(o);return p!==void 0?4294967295-p:o}):a===at.Archive?Ct(r,n,i=>i):Ct(r,n,i=>4294967295-i)}class Of extends W{constructor(){super(...arguments),this.clear=e=>{this.cache={},this.lists={stories:[],archive:[]},this.expiring=[]},this.setChangelogPeerIdFromAppConfig=e=>{const t=e.stories_changelog_user_id;return this.changelogPeerId=t?t.toPeerId(!1):Gs},this.onUpdateStory=e=>{const t=this.appPeersManager.getPeerId(e.peer),a=this.getPeerStoriesCache(t);let{story:s}=e;if(s._==="storyItemDeleted"){this.handleDeletedStory(a,s.id);return}if(a.maxReadId===void 0){Promise.resolve(this.getPeerStories(t)).then(o=>{this.rootScope.dispatchEvent("stories_stories",o)});return}const n=this.isStoryExpired(s)?void 0:this.getCacheTypeForPeerId(t),i=a.storiesMap.has(s.id);s=this.saveStoryItems([e.story],a,n)[0],!i&&n&&this.rootScope.dispatchEvent("story_new",{peerId:t,story:s,cacheType:n,maxReadId:a.maxReadId})},this.onUpdateReadStories=e=>{const t=this.appPeersManager.getPeerId(e.peer),a=this.getPeerStoriesCache(t);a.maxReadId=e.max_id,this.updateListCachePosition(a),this.rootScope.dispatchEvent("stories_read",{peerId:t,maxReadId:a.maxReadId})},this.onUpdateStoriesStealthMode=e=>{const t=this.stealthMode!==void 0;this.stealthMode=e.stealth_mode,t&&this.rootScope.dispatchEvent("stories_stealth_mode",e.stealth_mode)}}after(){this.clear(!0),this.changelogPeerId=Gs,this.apiUpdatesManager.addMultipleEventsListeners({updateStory:this.onUpdateStory,updateReadStories:this.onUpdateReadStories,updateStoriesStealthMode:this.onUpdateStoriesStealthMode}),this.rootScope.addEventListener("app_config",this.setChangelogPeerIdFromAppConfig),this.rootScope.addEventListener("contacts_update",e=>{this.onSubscriptionUpdate(e.toPeerId(!1))}),this.rootScope.addEventListener("chat_participation",({chatId:e})=>{this.onSubscriptionUpdate(e.toPeerId(!0))}),this.rootScope.addEventListener("peer_stories_hidden",({peerId:e})=>{const t=this.getPeerStoriesCache(e,!1);t&&(this.updateListCachePosition(t),this.rootScope.dispatchEvent("stories_stories",this.convertPeerStoriesCache(t)))}),this.rootScope.addEventListener("user_auth",()=>{setTimeout(()=>{this.getAllStories(!1,void 0,!0)},2e3)}),setInterval(()=>this.checkExpired(),5e3)}onSubscriptionUpdate(e){const t=this.getPeer(e);if(!t)return;const a=this.getPeerStoriesCache(e,!1);if(!a){const n=this.isSubcribedToPeer(e),i=t.stories_max_id!==void 0;n&&i&&Promise.resolve(this.getPeerStories(e)).then(o=>{this.rootScope.dispatchEvent("stories_stories",o)});return}const s=a.position;this.updateListCachePosition(a),!s&&a.position&&this.rootScope.dispatchEvent("stories_stories",this.convertPeerStoriesCache(a))}checkExpired(){const e=te(!0);let t;for(;(t=this.expiring[0])&&!(t.timestamp>e);){this.expiring.shift();const a=this.getPeerStoriesCache(t.peerId,!1);if(!a)continue;Me(a.stories,t.id)!==void 0&&(this.updateListCachePosition(a),this.rootScope.dispatchEvent("story_expired",{peerId:a.peerId,id:t.id}))}}getChangelogPeerId(){return this.changelogPeerId||se(this.apiManager.getAppConfig(),this.setChangelogPeerIdFromAppConfig)}generateSortIndexForCache(e){if(!this.getCacheTypeForPeerId(e.peerId))return;const a=e.stories[e.stories.length-1];if(!a)return;const s=e.storiesMap.get(a),n=this.getUnreadType(e.peerId),i=e.peerId===this.rootScope.myId,o=n!=="read",p=e.peerId===this.changelogPeerId,d=e.peerId.isUser()?this.appUsersManager.isPremium(e.peerId.toUserId()):!1;return+([i,o,p,d].map(f=>+f).join("")+s.date)}generateListCachePosition(e){const t=this.generateSortIndexForCache(e);return t?{type:this.appPeersManager.getPeer(e.peerId).pFlags.stories_hidden?"archive":"stories",index:t}:void 0}updateListCachePosition(e){const t=e.position,a=this.generateListCachePosition(e);if(!We(t,a)){if(t&&t.type!==a?.type){const s=this.lists[t.type];Me(s,e.peerId)}if(e.position=a,a){const s=this.lists[a.type];Ct(s,e.peerId,n=>this.getPeerStoriesCache(n).position.index)}this.rootScope.dispatchEvent("stories_position",{peerId:e.peerId,position:a})}}getPeerStoriesCache(e,t=!0){var a;return(a=this.cache)[e]??(a[e]=t?{peerId:e,stories:[],pinnedStories:[],archiveStories:[],pinnedToTop:new Map,storiesMap:new Map,getStoriesPromises:new Map,deleted:new Set,albums:new Map}:void 0)}convertPeerStoriesCache(e){return{_:"peerStories",peer:this.appPeersManager.getOutputPeer(e.peerId),stories:e.stories.map(t=>e.storiesMap.get(t)),max_read_id:e.maxReadId}}saveStoryItem(e,t,a){if(!e||e._==="storyItemDeleted")return;const s=t.storiesMap.get(e.id),n=s?._==="storyItemSkipped",i=e._==="storyItemSkipped";if(i&&s&&!n)return s;if(!i){const f={type:"storyItem",peerId:t.peerId,storyId:e.id};this.appMessagesManager.saveMessageMedia(e,f),e.media_areas?.forEach(m=>{m.msg_id=this.appMessagesIdsManager.generateMessageId(m.msg_id,m.channel_id)})}const o=t.pinnedToTop.get(e.id),p=e.pinnedIndex!==o;p&&(e.pinnedIndex=o);let d;if(a!==at.Pinned){const f=!!s?.pFlags?.pinned,l=!!e.pFlags?.pinned;f!==l&&(l?(t.pinnedLoadedAll||t.pinnedStories.length&&e.id>t.pinnedStories[t.pinnedStories.length-1])&&(Ya(t.pinnedStories,e,!0,at.Pinned,t.pinnedToTop),d=!0):Me(t.pinnedStories,e.id)&&(d=!0))}let c;if(a!==at.Archive&&t.peerId===this.appPeersManager.peerId&&!t.archiveStories.includes(e.id)&&(t.archiveLoadedAll||t.archiveStories.length&&e.id>t.archiveStories[t.archiveStories.length-1])&&(Ya(t.archiveStories,e,!0,at.Archive),c=!0),a===at.Stories){const f=this.expiring.findIndex(l=>l.peerId===t.peerId&&l.id===e.id);Ct(this.expiring,{peerId:t.peerId,id:e.id,timestamp:e.expire_date},l=>2147483647-l.timestamp,f)}if(typeof a=="object"&&"albumId"in a){const f=t.albums.get(a.albumId);f&&Ya(f.ids,e,!0,at.Pinned,t.pinnedToTop)}else if(a){const f=t[a];Ya(f,e,!0,a,t.pinnedToTop)}if(!s)t.storiesMap.set(e.id,e);else{if(!n&&!i&&e.pFlags.min){const f=["privacy","views"];for(const l of f)e[l]=s[l]}if(!n&&!i&&e.pFlags.min){const f=["out"];for(const l of f)e.pFlags[l]=s.pFlags[l]}$t(s,e)}return(s||d||c||p)&&this.rootScope.dispatchEvent("story_update",{peerId:t.peerId,story:s||e,modifiedPinned:d,modifiedArchive:c,modifiedPinnedToTop:p}),s||e}saveStoryItems(e,t,a){const s=[],n=e.map((i,o)=>(i=this.saveStoryItem(i,t,a),i||s.push(o),i));if(ht(s,i=>{n.splice(i,1)}),t.stories.length&&a===at.Stories){const i=this.getPeer(t.peerId);if(!i.stories_max_id){const o=t.storiesMap.get(t.stories[t.stories.length-1]),p={...i,stories_max_id:{_:"recentStory",pFlags:{live:o.pFlags.live},max_id:o.id}};t.peerId.isUser()?this.appUsersManager.saveApiUsers([p]):this.appChatsManager.saveApiChats([p])}}return this.updateListCachePosition(t),n}getPeer(e){return this.appPeersManager.getPeer(e)}saveApiPeerStories(e,t){if(e._!=="channel"&&e._!=="user")return;const a=t.stories_max_id?!0:t.pFlags.stories_unavailable?!1:void 0;let s=e.stories_max_id?!0:e.pFlags.stories_unavailable?!1:void 0;a!==s&&s===void 0&&(a&&(e.stories_max_id=t.stories_max_id),s=a);const n=t.pFlags.stories_hidden,i=e.pFlags.stories_hidden;return()=>{const o=e.id.toPeerId(e._!=="user");a!==s&&s!==void 0&&this.rootScope.dispatchEvent("peer_stories",{peerId:o,available:s}),n!==i&&this.rootScope.dispatchEvent("peer_stories_hidden",{peerId:o,hidden:i})}}saveStoriesStories(e,t,a){return this.appPeersManager.saveApiPeers(e),this.saveStoryItems(e.stories,t,a)}savePeerStories(e){const t=this.appPeersManager.getPeerId(e.peer),a=this.getPeerStoriesCache(t),s=this.getCacheTypeForPeerId(t,!0);return a.maxReadId=e.max_read_id??0,e.stories=this.saveStoryItems(e.stories,a,s),a.dispatchStoriesEvent&&(delete a.dispatchStoriesEvent,this.rootScope.dispatchEvent("peer_stories",{peerId:t,available:a.stories.length>0})),e}getUnreadType(e,t,a=this.getPeerStoriesCache(e)){if(t??(t=a.stories[a.stories.length-1]),!t&&!a.dispatchStoriesEvent&&(a.dispatchStoriesEvent=!0,this.getPeerStories(e)),!!t)return t>a.maxReadId?a.storiesMap.get(t).pFlags.close_friends?"close":"unread":"read"}getPeerStoriesSegments(e){const t=this.getPeerStoriesCache(e);if(t.maxReadId===void 0)return se(this.getPeerStories(e),()=>this.getPeerStoriesSegments(e));if(!t.stories.length)return;const a=[];let s;return t.stories.forEach(n=>{const i=this.getUnreadType(e,n,t);s?.type!==i?(s={length:1,type:i},a.push(s)):++s.length}),a}getPeersStoriesSegments(e){return Promise.all(e.map(async t=>({peerId:t,segments:await this.getPeerStoriesSegments(t)})))}deleteStories(e,t){return this.apiManager.invokeApiSingleProcess({method:"stories.deleteStories",params:{peer:this.appPeersManager.getInputPeerById(e),id:t},processResult:a=>{a.forEach(s=>{this.apiUpdatesManager.processLocalUpdate({_:"updateStory",peer:this.appPeersManager.getOutputPeer(e),story:{_:"storyItemDeleted",id:s}})})}})}togglePinned(e,t,a){return t=ha(t),this.apiManager.invokeApiSingleProcess({method:"stories.togglePinned",params:{peer:this.appPeersManager.getInputPeerById(e),id:t,pinned:a},processResult:s=>{if(!s.length)return;const n=this.getPeerStoriesCache(this.rootScope.myId),i=s.map(o=>{const p=n.storiesMap.get(o);if(p?._==="storyItem")return{...p,pFlags:{...p.pFlags,pinned:a||void 0}}});this.saveStoryItems(i,n)}})}async togglePinnedToTop(e,t,a){const s=[...this.getPeerStoriesCache(e).pinnedToTop.entries()].sort((p,d)=>p[1]-d[1]).map(([p])=>p),n=a?s.concat(t):s.filter(p=>!t.includes(p)),o=(await this.apiManager.getAppConfig()).stories_pinned_to_top_count_max??3;if(n.length>o)throw ne("STORY_ID_TOO_MANY",""+o);return this.apiManager.invokeApiSingleProcess({method:"stories.togglePinnedToTop",params:{peer:this.appPeersManager.getInputPeerById(e),id:n},processResult:()=>{const p=this.getPeerStoriesCache(e),d=p.pinnedToTop;t.forEach(c=>{const f=this.getStoryByIdCached(e,c);a?d.set(c,d.size):d.delete(c),this.saveStoryItem(f,p,at.Pinned)})}})}hasArchive(){return this.lists.archive.length>0}getAllStories(e,t,a){return this.apiManager.invokeApiSingleProcess({method:"stories.getAllStories",params:{next:e,state:t,hidden:a},processResult:s=>(this.appPeersManager.saveApiPeers(s),s.peer_stories=s.peer_stories.map(n=>this.savePeerStories(n)).filter(n=>n.stories.length),this.onUpdateStoriesStealthMode({_:"updateStoriesStealthMode",stealth_mode:s.stealth_mode}),s)})}getPeerStories(e){const t=this.getPeerStoriesCache(e);return t.maxReadId!==void 0?this.convertPeerStoriesCache(t):this.apiManager.invokeApiSingleProcess({method:"stories.getPeerStories",params:{peer:this.appPeersManager.getInputPeerById(e)},processResult:a=>(this.appPeersManager.saveApiPeers(a),this.savePeerStories(a.stories))})}getCachedStories(e,t,a,s){let n=t?e.pinnedStories:e.archiveStories;t&&e.pinnedToTop?.size&&s&&(n=n.slice(e.pinnedToTop.size));const i=s?n.findIndex(o=>o<s):0;if(i!==-1){const o=n.slice(i,i+a);if(o.length===a||(t?e.pinnedLoadedAll:e.archiveLoadedAll))return o.map(p=>e.storiesMap.get(p))}}processLoadedStoriesStories(e,t,a,s){t&&(e.pinnedToTop=new Map((s.pinned_to_top||[]).map((p,d)=>[p,d])));const n=s.stories.length,i=this.saveStoriesStories(s,e,t?at.Pinned:at.Archive);return e.count=s.count,((t?e.pinnedStories:e.archiveStories).length===s.count||n<a)&&(t?e.pinnedLoadedAll=!0:e.archiveLoadedAll=!0),{count:s.count,stories:i,pinnedToTop:t?e.pinnedToTop:void 0}}getAlbums(e,t=!1){const a=this.getPeerStoriesCache(e);return!t&&a.albumsOrder?a.albumsOrder.map(s=>a.albums.get(s).info):this.apiManager.invokeApiSingleProcess({method:"stories.getAlbums",params:{peer:this.appPeersManager.getInputPeerById(e),hash:a.albumsHash},processResult:s=>{if(s._==="stories.albumsNotModified")return a.albumsOrder.map(n=>a.albums.get(n).info);a.albumsOrder=[];for(const n of s.albums)n.icon_photo&&this.appPhotosManager.savePhoto(n.icon_photo),n.icon_video&&this.appDocsManager.saveDoc(n.icon_video),a.albumsOrder.push(n.album_id),a.albums.set(n.album_id,{info:n,ids:[],count:0,loadedAll:!1});return a.albumsHash=s.hash,s.albums}})}getPinnedStories(e,t,a=0){const s=this.getPeerStoriesCache(e),n=this.getCachedStories(s,!0,t,a);return n?{count:s.count,stories:n,pinnedToTop:s.pinnedToTop}:this.apiManager.invokeApiSingleProcess({method:"stories.getPinnedStories",params:{peer:this.appPeersManager.getInputPeerById(e),limit:t,offset_id:a},processResult:i=>(this.processLoadedStoriesStories(s,!0,t,i),this.getPinnedStories(e,t,a))})}getAlbumStories(e,t,a,s=0){const n=this.getPeerStoriesCache(e),i=n.albums.get(t);if(!i)return{count:0,stories:[]};let o;const p=s?i.ids.findIndex(d=>d<s):0;if(p!==-1){const d=i.ids.slice(p,p+a);(d.length===a||i.loadedAll)&&(o=d.map(c=>n.storiesMap.get(c)))}return o?{count:n.count,stories:o}:this.apiManager.invokeApiSingleProcess({method:"stories.getAlbumStories",params:{peer:this.appPeersManager.getInputPeerById(e),album_id:t,limit:a,offset:i?.ids.length??0},processResult:d=>(this.saveStoriesStories(d,n,{albumId:t}),i.count=d.count,i.loadedAll=i.ids.length===d.count,this.getAlbumStories(e,t,a,s))})}getStoriesArchive(e,t,a=0){const s=this.getPeerStoriesCache(e),n=this.getCachedStories(s,!1,t,a);return n?{count:s.count,stories:n,pinnedToTop:void 0}:this.apiManager.invokeApiSingleProcess({method:"stories.getStoriesArchive",params:{peer:this.appPeersManager.getInputPeerById(e),limit:t,offset_id:a},processResult:this.processLoadedStoriesStories.bind(this,s,!1,t)})}fetchSingleStories(e){return e.getStoriesPromise??(e.getStoriesPromise=qe(0).then(()=>{const t=[...e.getStoriesPromises.keys()],a=this.apiManager.invokeApi("stories.getStoriesByID",{peer:this.appPeersManager.getInputPeerById(e.peerId),id:t},{floodMaxTimeout:1/0}),s=n=>{const i=new Map(n.map(o=>[o.id,o]));for(const o of t){const p=i.get(o);p||this.handleDeletedStory(e,o);const d=e.getStoriesPromises.get(o);e.getStoriesPromises.delete(o),d.resolve(p)}};a.then(n=>{const i=this.saveStoriesStories(n,e);s(i)},()=>{s([])}).then(()=>{e.getStoriesPromise=void 0,e.getStoriesPromises.size&&this.fetchSingleStories(e),this.rootScope.dispatchEvent("stories_downloaded",{peerId:e.peerId,ids:t})})}))}getStoryByIdCached(e,t){return this.getPeerStoriesCache(e).storiesMap.get(t)}getStoryById(e,t,a){const s=this.getPeerStoriesCache(e),n=s.storiesMap.get(t);if(!s.deleted.has(t)){if(n?._==="storyItem"&&!a)return n;{let i=s.getStoriesPromises.get(t);return i||(s.getStoriesPromises.set(t,i=$()),this.fetchSingleStories(s),i)}}}getStoriesById(e,t,a){const s=t.map(i=>this.getStoryById(e,i,a));return s.some(i=>i instanceof Promise)?Promise.all(s):s}readStories(e,t){const a=this.getPeerStoriesCache(e);if(!(a.maxReadId!==void 0&&a.maxReadId>=t))return this.apiUpdatesManager.processLocalUpdate({_:"updateReadStories",peer:this.appPeersManager.getOutputPeer(e),max_id:t}),this.apiManager.invokeApiSingleProcess({method:"stories.readStories",params:{peer:this.appPeersManager.getInputPeerById(e),max_id:t}})}incrementStoryViews(e,t){return this.apiManager.invokeApiSingleProcess({method:"stories.incrementStoryViews",params:{peer:this.appPeersManager.getInputPeerById(e),id:t}})}getStoryViewsList(e,t,a,s="",n,i){return this.apiManager.invokeApiSingleProcess({method:"stories.getStoryViewsList",params:{peer:this.appPeersManager.getInputPeerById(e),id:t,limit:a,offset:s,q:n,just_contacts:i},processResult:o=>{this.appPeersManager.saveApiPeers(o),o.views.forEach(d=>{d.message=this.appMessagesManager.saveMessage(d.message),d.story=d.story&&this.appStoriesManager.saveStoryItem(d.story,this.appStoriesManager.getPeerStoriesCache(this.appPeersManager.getPeerId(d.peer_id)))});const p=o.views.filter(d=>d._==="storyView");return{count:o.count,views:p,nextOffset:o.next_offset}}})}getStoriesViews(e,t){return this.apiManager.invokeApiSingleProcess({method:"stories.getStoriesViews",params:{peer:this.appPeersManager.getInputPeerById(e),id:t},processResult:a=>{this.appPeersManager.saveApiPeers(a);const s=this.getPeerStoriesCache(this.appPeersManager.peerId);return a.views.forEach((n,i)=>{const o=t[i],p=s.storiesMap.get(o);p&&this.saveStoryItems([{...p,views:n}],s)}),a.views}})}report(e,t,a,s){return this.apiManager.invokeApiSingleProcess({method:"stories.report",params:{peer:this.appPeersManager.getInputPeerById(e),id:t,option:a,message:s}})}sendReaction(e,t,a){a??(a={_:"reactionEmpty"});const s=this.getStoryByIdCached(e,t),n=s.views,i=a._==="reactionEmpty"?void 0:a;if(n){const o=()=>{const p=n.reactions?.find(d=>He(d.reaction,s.sent_reaction));p&&(--p.count,p.count||Me(n.reactions,p))};if(n.reactions_count??(n.reactions_count=0),!s.sent_reaction&&i?++n.reactions_count:s.sent_reaction&&!i&&--n.reactions_count,o(),i){let p=n.reactions?.find(d=>He(d.reaction,i));p||(n.reactions??(n.reactions=[]),n.reactions.push(p={_:"reactionCount",reaction:i,count:0})),++p.count}}return this.saveStoryItems([{...s,sent_reaction:i}],this.getPeerStoriesCache(e)),this.apiManager.invokeApiSingleProcess({method:"stories.sendReaction",params:{peer:this.appPeersManager.getInputPeerById(e),reaction:a,story_id:t},processResult:o=>{this.apiUpdatesManager.processUpdateMessage(o)}})}handleDeletedStory(e,t){e.deleted.add(t),e.storiesMap.delete(t)&&([e.stories,e.pinnedStories,e.archiveStories].forEach(a=>{Me(a,t)}),this.updateListCachePosition(e),this.rootScope.dispatchEvent("story_deleted",{peerId:e.peerId,id:t}))}isSubcribedToPeer(e){if(e.isUser())return this.appUsersManager.isContact(e.toUserId());{const t=e.toChatId();return(this.appChatsManager.isBroadcast(t)||this.appChatsManager.isMegagroup(t))&&this.appChatsManager.isInChat(t)}}getCacheTypeForPeerId(e,t){if(!(!this.isSubcribedToPeer(e)&&e!==this.changelogPeerId&&!t))return at.Stories}isStoryExpired(e){return e.expire_date<=te(!0)}hasRights(e,t,a){if(e.isUser())return this.appPeersManager.peerId===e;const s=e.toChatId(),i=!!this.getStoryByIdCached(e,t).pFlags.out,o=this.appChatsManager.hasRights(s,"edit_stories"),p=this.appChatsManager.hasRights(s,"post_stories"),d=this.appChatsManager.hasRights(s,"delete_stories");switch(a){case"send":return p;case"edit":return i?p:o;case"delete":return i?p:d;case"archive":return o;case"pin":return o;default:return!1}}cantPinDeleteStories(e,t){let a=!t.length,s=!t.length;for(const n of t)if(a||(a=!this.hasRights(e,n,"pin")),s||(s=!this.hasRights(e,n,"delete")),a&&s)break;return{cantPin:a,cantDelete:s}}toggleStoriesHidden(e,t){return this.apiManager.invokeApiSingleProcess({method:"stories.togglePeerStoriesHidden",params:{peer:this.appPeersManager.getInputPeerById(e),hidden:t},processResult:()=>{const a=this.getPeer(e),s={...a.pFlags};t?s.stories_hidden=!0:delete s.stories_hidden;const n={...a,pFlags:s};e.isUser()?this.appUsersManager.saveApiUsers([n]):this.appChatsManager.saveApiChats([n]),this.appNotificationsManager.toggleStoriesMute(e,t,!0)}})}activateStealthMode(){return this.apiManager.invokeApiSingleProcess({method:"stories.activateStealthMode",params:{past:!0,future:!0},processResult:e=>{this.apiUpdatesManager.processUpdateMessage(e)}})}getStealthMode(){return this.stealthMode||this.getAllStories().then(()=>this.stealthMode)}}const Vf=5*1024*1024,Nf=10;class Gf extends W{after(){this.webAppStorage=new Ke(kt(this.getAccountNumber()),"webapp")}canSendMessage(e){return this.apiManager.invokeApiSingleProcess({method:"bots.canSendMessage",params:{bot:this.appUsersManager.getUserInput(e)}})}allowSendMessage(e){return this.apiManager.invokeApiSingleProcess({method:"bots.allowSendMessage",params:{bot:this.appUsersManager.getUserInput(e)},processResult:t=>{this.apiUpdatesManager.processUpdateMessage(t)}})}toggleEmojiStatusPermission(e,t){return this.apiManager.invokeApiSingleProcess({method:"bots.toggleUserEmojiStatusPermission",params:{bot:this.appUsersManager.getUserInput(e),enabled:t},processResult:a=>{this.appProfileManager.refreshFullPeerIfNeeded(e.toPeerId())}})}readBotStorage(e,t,a){return this.webAppStorage.get(`${e.toString()}:${t}:${a}`)}readBotInternalStorage(e,t){return this.readBotStorage(e,"internal",t)}readBotDeviceStorage(e,t){return this.readBotStorage(e,"device",t)}writeBotStorage(e,t,a,s){return this.webAppStorage.set({[`${e.toString()}:${t}:${a}`]:s})}async deleteBotStorage(e,t,a){await this.webAppStorage.delete(`${e.toString()}:${t}:${a}`)}writeBotInternalStorage(e,t,a){return this.writeBotStorage(e,"internal",t,a)}async writeBotDeviceStorage(e,t,a){if(typeof t!="string")return"KEY_INVALID";if(typeof a!="string"&&a!==null)return"VALUE_INVALID";const s=await this.readBotDeviceStorage(e,t);if(s===a)return null;const n=Number(await this.readBotInternalStorage(e,"deviceStorageUsed")??"0"),i=s?t.length+s.length:0,o=n-i+(a?t.length+a.length:0),d=Number(await this.readBotInternalStorage(e,"deviceStorageUsedKeys")??"0")+(a?1:-1);if(o>Vf||d>Nf)return"QUOTA_EXCEEDED";try{a?await this.writeBotStorage(e,"device",t,a):await this.deleteBotStorage(e,"device",t),await this.writeBotInternalStorage(e,"deviceStorageUsed",o.toString()),await this.writeBotInternalStorage(e,"deviceStorageUsedKeys",d.toString())}catch{return"UNKNOWN_ERROR"}return null}async clearBotDeviceStorage(e){const t=`${e.toString()}:device:`,s=(await this.webAppStorage.getAllKeys()).filter(n=>typeof n=="string"&&n.startsWith(t));await Promise.all(s.map(n=>this.webAppStorage.delete(n))),await this.writeBotInternalStorage(e,"deviceStorageUsed","0")}async getPreparedMessage(e,t){const a=await this.apiManager.invokeApiSingleProcess({method:"messages.getPreparedInlineMessage",params:{bot:this.appUsersManager.getUserInput(e),id:t}});return this.appUsersManager.saveApiUsers(a.users),a.result._==="botInlineMediaResult"&&(a.result.document&&this.appDocsManager.saveDoc(a.result.document),a.result.photo&&this.appPhotosManager.savePhoto(a.result.photo)),a}}class qf extends W{saveBoost(e,t){return t.giveaway_msg_id&&(t.giveaway_msg_id=this.appMessagesIdsManager.generateMessageId(t.giveaway_msg_id,this.appPeersManager.isChannel(e)?e.toChatId():void 0)),t}saveBoosts(e,t){return!t||t.saved||(t.saved=!0,t.forEach((a,s,n)=>{n[s]=this.saveBoost(e,a)})),t}getBoostsList({peerId:e,limit:t,offset:a,gifts:s}){return this.apiManager.invokeApi("premium.getBoostsList",{peer:this.appPeersManager.getInputPeerById(e),limit:t,offset:a,gifts:s}).then(n=>(this.appPeersManager.saveApiPeers(n),n.boosts=this.saveBoosts(e,n.boosts),n))}getMyBoosts(){return this.apiManager.invokeApiSingleProcess({method:"premium.getMyBoosts",processResult:e=>(this.appPeersManager.saveApiPeers(e),e)})}getBoostsStatus(e){return this.apiManager.invokeApiSingleProcess({method:"premium.getBoostsStatus",params:{peer:this.appPeersManager.getInputPeerById(e)}})}applyBoost(e,t){return this.apiManager.invokeApiSingleProcess({method:"premium.applyBoost",params:{peer:this.appPeersManager.getInputPeerById(e),slots:t}})}}class jf extends W{constructor(){super(...arguments),this.processPublicForwards=e=>(this.appPeersManager.saveApiPeers(e),e.forwards.forEach(t=>{t.message=this.appMessagesManager.saveMessage(t.message),t.story=t.story&&this.appStoriesManager.saveStoryItem(t.story,this.appStoriesManager.getPeerStoriesCache(this.appPeersManager.getPeerId(t.peer)))}),e)}async getInvokeOptions({peerId:e,dcId:t}){const a={};return e.isUser()||(t??(t=await se(this.appProfileManager.getChatFull(e.toChatId()),async s=>{let n=s.stats_dc;return n===void 0&&(n=await this.apiManager.getBaseDcId()),n})),a.dcId=t),a}async getBroadcastStats(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getBroadcastStats",params:{channel:this.appChatsManager.getChannelInput(e.peerId.toChatId()),dark:e.dark},processResult:a=>(a.recent_posts_interactions.forEach(s=>{s._==="postInteractionCountersMessage"&&(s.msg_id=this.appMessagesIdsManager.generateMessageId(s.msg_id,e.peerId.toChatId()))}),{stats:a,dcId:t.dcId}),options:t})}loadAsyncGraph(e,t,a){return this.apiManager.invokeApiSingleProcess({method:"stats.loadAsyncGraph",params:{token:e,x:t},options:{dcId:a}})}async getMegagroupStats(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getMegagroupStats",params:{channel:this.appChatsManager.getChannelInput(e.peerId.toChatId()),dark:e.dark},processResult:a=>(this.appPeersManager.saveApiPeers(a),{stats:a,dcId:t.dcId}),options:t})}async getMessagePublicForwards(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getMessagePublicForwards",params:{channel:this.appChatsManager.getChannelInput(e.peerId.toChatId()),msg_id:H(e.mid),offset:e.offset,limit:e.limit},processResult:this.processPublicForwards,options:t})}async getMessageStats(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getMessageStats",params:{channel:this.appChatsManager.getChannelInput(e.peerId.toChatId()),dark:e.dark,msg_id:H(e.mid)},processResult:a=>({stats:a,dcId:t.dcId}),options:t})}async getStoryStats(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getStoryStats",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),dark:e.dark,id:e.storyId},processResult:a=>({stats:a,dcId:t.dcId}),options:t})}async getStoryPublicForwards(e){const t=await this.getInvokeOptions(e);return this.apiManager.invokeApiSingleProcess({method:"stats.getStoryPublicForwards",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),id:e.id,limit:e.limit,offset:e.offset},processResult:this.processPublicForwards,options:t})}}class zf extends W{saveBusinessIntro(e,t){if(t)return t.sticker=this.appDocsManager.saveDoc(t.sticker,{type:"userFull",userId:e}),t}resolveBusinessChatLink(e){return this.apiManager.invokeApiSingleProcess({method:"account.resolveBusinessChatLink",params:{slug:e},processResult:t=>{this.appPeersManager.saveApiPeers(t);const a=oe(t.peer),{message:s,entities:n}=t;return{peerId:a,message:s,entities:n}}})}}const Hf=20;class Kf extends W{constructor(){super(...arguments),this.translateTextBatch={},this.triedToTranslateMessages=new Map,this.summaries={},this.processTextWithEntities=e=>(this.appMessagesManager.wrapMessageEntities(e),e)}hasTriedToTranslateMessage(e,t){return this.triedToTranslateMessages.has(`${e}_${t}`)}resetMessageTranslations(e,t){const a=`${e}_${t}`,s=this.triedToTranslateMessages.get(a);if(s){for(const n of s){const i=this.translateTextBatch[n];if(!i)continue;const o=i.messages.get(e);o&&o.delete(t)}this.triedToTranslateMessages.delete(a)}}batchTranslation(e,t,a,s){if(!(!t||![...t.values()].some(n=>n instanceof Promise)))return qe(0).then(async()=>{const n=[...t.entries()].filter(([d,c])=>c instanceof Promise).slice(0,Hf),i=new Map(n),o=n.map(([d])=>d),p=await this.apiManager.invokeApi("messages.translateText",{...a(o),to_lang:e}).catch(d=>{o.forEach(c=>{const f=i.get(c);t.delete(c),f.reject(d)})});p&&p.result.forEach((d,c)=>{this.processTextWithEntities(d);const f=o[c],l=i.get(f);s?t.delete(f):t.set(f,d),l.resolve(d)})})}batchMessageTranslation(e,t){const a=this.translateTextBatch[e];if(!a||a.messagesPromises.get(t))return;const s=a.messages.get(t),n=this.batchTranslation(e,s,i=>({peer:this.appPeersManager.getInputPeerById(t),id:i.map(o=>H(o))}));n&&a.messagesPromises.set(t,n),n?.then(()=>{a.messagesPromises.delete(t),this.batchMessageTranslation(e,t)})}batchTextTranslation(e){const t=this.translateTextBatch[e];if(!t||t.textPromise)return;const a=t.text,s=this.batchTranslation(e,a,n=>({text:n.map(i=>({entities:[],...JSON.parse(i)}))}),!0);s&&(t.textPromise=s),t.textPromise?.then(()=>{t.textPromise=void 0,this.batchTextTranslation(e)})}translateText(e){var s,n;(s=this.translateTextBatch)[n=e.lang]??(s[n]={text:new Map,messages:new Map,messagesPromises:new Map});const t=this.translateTextBatch[e.lang];if("peerId"in e){let i=t.messages.get(e.peerId);i||t.messages.set(e.peerId,i=new Map);let o=i.get(e.mid);if(o||e.onlyCache)return o;o=$(),i.set(e.mid,o);const p=`${e.peerId}_${e.mid}`;let d=this.triedToTranslateMessages.get(p);return d||this.triedToTranslateMessages.set(p,d=new Set),d.add(e.lang),this.batchMessageTranslation(e.lang,e.peerId),o}else{const i=JSON.stringify(e.text);let o=t.text.get(i);return o||e.onlyCache||(o=$(),t.text.set(i,o),this.batchTextTranslation(e.lang)),o}}togglePeerTranslations(e,t){return this.appProfileManager.modifyCachedFullPeer(e,a=>{t?a.pFlags.translations_disabled=!0:delete a.pFlags.translations_disabled}),this.apiManager.invokeApi("messages.togglePeerTranslations",{peer:this.appPeersManager.getInputPeerById(e),disabled:t})}summarizeText({peerId:e,mid:t,lang:a}){var n,i;let s=((i=(n=this.summaries)[e]??(n[e]={}))[t]??(i[t]={}))[a];return s||(this.summaries[e][t][a]=s=this.apiManager.invokeApi("messages.summarizeText",{peer:this.appPeersManager.getInputPeerById(e),id:H(t),to_lang:a}),s.then(o=>{this.summaries[e][t][a]===s&&(this.summaries[e][t][a]=o)}),s)}clearSummaries(e,t){const a=this.summaries[e];a&&(t?delete a[t]:delete this.summaries[e])}}class Wf extends W{after(){this.rootScope.addEventListener("user_auth",()=>{this.rootScope.addEventListener("app_config",()=>this.onGifsUpdated())}),this.apiUpdatesManager.addMultipleEventsListeners({updateSavedGifs:()=>this.onGifsUpdated()})}async onGifsUpdated(){const e=await this.getGifs(!0);this.rootScope.dispatchEvent("gifs_updated",e)}getGifs(e){return e&&Array.isArray(this.gifs)&&(this.gifs=void 0),this.gifs??(this.gifs=this.apiManager.invokeApi("messages.getSavedGifs").then(t=>{const a={type:"savedGifs"};return this.gifs=t.gifs.map(s=>this.appDocsManager.saveDoc(s,a)).filter(Boolean),this.gifs}))}async searchGifs(e,t){const s=(await this.appUsersManager.resolveUsername("gif")).id.toPeerId(!1),{results:n,next_offset:i}=await this.appInlineBotsManager.getInlineResults(Ye,s,e,t);return{documents:n.map(p=>p.document).filter(Boolean),nextOffset:i}}async saveGif(e,t){const[a,s]=await Promise.all([this.apiManager.getLimit("gifs"),this.getGifs()]),n=this.appDocsManager.getDoc(e);return Xe(s,i=>i.id===n.id),t||(s.unshift(n),s.splice(a,s.length-a)),this.rootScope.dispatchEvent("gifs_updated",s),this.rootScope.dispatchEvent("gif_updated",{saved:!t,document:n}),this.apiManager.invokeApi("messages.saveGif",{id:Sa(n),unsave:t}).then(()=>{t&&this.onGifsUpdated()})}}const Jf="tgico",$f={check:"e900",checks:"e901",activesessions:"e902",add:"e903",add_chat:"e904",add_reaction:"e905",addboost:"e906",addmember_filled:"e907",adduser:"e908",admin:"e909",ads:"e90a",align_center:"e90b",align_left:"e90c",align_right:"e90d",animals:"e90e",animations:"e90f",app_expand:"e910",app_shrink:"e911",archive:"e912",archive_filled:"e913",arrow_down:"e914",arrow_next:"e915",arrow_prev:"e916",arrow_up_circle_fill:"e917",arrowcircle:"e918",arrowhead:"e919",attach:"e91a",attach_edit:"e91b",audio_repeat:"e91c",audio_repeat_single:"e91d",author_hidden:"e91e",auto_delete_circle_1:"e91f",auto_delete_circle_2:"e920",auto_delete_circle_3:"e921",auto_delete_circle_4:"e922",auto_delete_circle_5:"e923",auto_delete_circle_6:"e924",auto_delete_circle_clock:"e925",auto_delete_circle_days:"e926",auto_delete_circle_empty:"e927",auto_delete_circle_months:"e928",auto_delete_circle_off:"e929",auto_delete_circle_weeks:"e92a",auto_delete_circle_years:"e92b",avatarnext:"e92c",avatarprevious:"e92d",aversion:"e92e",back:"e92f",backward_5:"e930",binfilled:"e931",bold:"e932",bomb:"e933",boost:"e934",boostcircle:"e935",boosts:"e936",bot_filled:"e937",botcom:"e938",bots:"e939",brightness:"e93a",brush:"e93b",bubblereply:"e93c",bug:"e93d",calendar:"e93e",calendarfilter:"e93f",camera:"e940",cameraadd:"e941",captiondown:"e942",captionup:"e943",car:"e944",card:"e945",card_outline:"e946",cash_circle:"e947",channel:"e948",channel_filled:"e949",channelviews:"e94a",chatspinned:"e94b",chatsplaceholder:"e94c",check1:"e94d",checkbox:"e94e",checkboxblock:"e94f",checkboxempty:"e950",checkboxon:"e951",checklist_add:"e952",checklist_done:"e953",checklist_undone:"e954",checkretract:"e955",checkround:"e956",checkround_filled:"e957",clipboard:"e958",clock:"e959",close:"e95a",clouddownload:"e95b",collapse:"e95c",colorize:"e95d",comments:"e95e",commentssticker:"e95f",contrast:"e960",copy:"e961",crop:"e962",cross:"e963",crossgif:"e964",crossround:"e965",crossround_filled:"e966",crossstar:"e967",crown:"e968",crown_outline:"e969",crownalt:"e96a",crownoff:"e96b",crownoff_outline:"e96c",darkmode:"e96d",data:"e96e",delete:"e96f",delete_filled:"e970",deletedaccount:"e971",deleteleft:"e972",deleteuser:"e973",devices:"e974",document:"e975",dollar_circle:"e976",dollar_circle_x:"e977",down:"e978",down_up:"e979",download:"e97a",dragfiles:"e97b",dragmedia:"e97c",eats:"e97d",edit:"e97e",email:"e97f",endcall_filled:"e980",enhance:"e981",enter:"e982",equalizer:"e983",expand:"e984",eye:"e985",eye1:"e986",eye2:"e987",eyecross_outline:"e988",faceid:"e989",factcheck:"e98a",fade:"e98b",fast_forward:"e98c",fast_rewind:"e98d",favourites:"e98e",filter:"e98f",fire:"e990",flag:"e991",flip:"e992",flip_image_horizontal:"e993",folder:"e994",fontframe:"e995",fontframe_bg:"e996",fontframe_outline:"e997",fontsize:"e998",forward:"e999",forward_25:"e99a",forward_filled:"e99b",free_transform:"e99c",fullscreen:"e99d",gc_microphone:"e99e",gc_microphoneoff:"e99f",gem:"e9a0",gem_exchange:"e9a1",gem_transfer:"e9a2",gem_transfer_outline:"e9a3",geometric_digit_0:"e9a4",geometric_digit_1:"e9a5",geometric_digit_2:"e9a6",geometric_digit_3:"e9a7",geometric_digit_4:"e9a8",geometric_digit_5:"e9a9",geometric_digit_6:"e9aa",geometric_digit_7:"e9ab",geometric_digit_8:"e9ac",geometric_digit_9:"e9ad",geometric_dot:"e9ae",geometric_letter_x:"e9af",gifs:"e9b0",gift:"e9b1",gift_premium:"e9b2",grain:"e9b3",group:"e9b4",group_filled:"e9b5",group_star:"e9b6",groupmedia:"e9b7",groupmediaoff:"e9b8",hand:"e9b9",help:"e9ba",hide:"e9bb",highlights:"e9bc",hourglass:"e9bd",image:"e9be",image_original:"e9bf",info:"e9c0",info2:"e9c1",italic:"e9c2",key:"e9c3",keyboard:"e9c4",lamp:"e9c5",language:"e9c6",largepause:"e9c7",largeplay:"e9c8",left:"e9c9",limit_chat:"e9ca",limit_chats:"e9cb",limit_file:"e9cc",limit_folders:"e9cd",limit_link:"e9ce",limit_pin:"e9cf",link:"e9d0",link_paid:"e9d1",list:"e9d2",listscreenshare:"e9d3",livelocation:"e9d4",location:"e9d5",lock:"e9d6",lockoff:"e9d7",loginlogodesktop:"e9d8",loginlogomobile:"e9d9",logout:"e9da",mac_command_key:"e9db",mediaspeed_empty:"e9dc",mediaspoiler:"e9dd",mediaspoileroff:"e9de",mention:"e9df",menu:"e9e0",menu_feature_cover:"e9e1",menu_feature_unique:"e9e2",menu_verification:"e9e3",message:"e9e4",message_jump:"e9e5",message_quote:"e9e6",messageunread:"e9e7",microphone:"e9e8",microphone_crossed:"e9e9",microphone_crossed_filled:"e9ea",microphone_filled:"e9eb",minus:"e9ec",monospace:"e9ed",more:"e9ee",movetochats:"e9ef",movetomenu:"e9f0",multistories:"e9f1",music:"e9f2",mute:"e9f3",muted:"e9f4",mynotes:"e9f5",newchannel:"e9f6",newchannel_filled:"e9f7",newchat_filled:"e9f8",newgroup:"e9f9",newgroup_filled:"e9fa",newprivate:"e9fb",newprivate_filled:"e9fc",newtab:"e9fd",next:"e9fe",nochannel:"e9ff",noncontacts:"ea00",nosound:"ea01",note:"ea02",okay:"ea03",online:"ea04",passwordoff:"ea05",pause:"ea06",permissions:"ea07",person:"ea08",phone:"ea09",phone_filled:"ea0a",pin:"ea0b",pin2:"ea0c",pinlist:"ea0d",pinned_filled:"ea0e",pinnedchat:"ea0f",pip:"ea10",play:"ea11",playback_05:"ea12",playback_15:"ea13",playback_1x:"ea14",playback_2x:"ea15",plus:"ea16",plusround:"ea17",poll:"ea18",premium_addone:"ea19",premium_avatars:"ea1a",premium_badge:"ea1b",premium_colors:"ea1c",premium_double:"ea1d",premium_emoji:"ea1e",premium_filesize:"ea1f",premium_lastseen:"ea20",premium_limits:"ea21",premium_lock:"ea22",premium_management:"ea23",premium_noads:"ea24",premium_privacy:"ea25",premium_reactions:"ea26",premium_restrict:"ea27",premium_speed:"ea28",premium_status:"ea29",premium_stickers:"ea2a",premium_tags:"ea2b",premium_transcription:"ea2c",premium_translate:"ea2d",premium_unlock:"ea2e",premium_wallpaper:"ea2f",previous:"ea30",promote:"ea31",quote:"ea32",quote_outline:"ea33",radiooff:"ea34",radioon:"ea35",reactions:"ea36",reactions_filled:"ea37",readchats:"ea38",recent:"ea39",redo:"ea3a",reload_star:"ea3b",replace:"ea3c",reply:"ea3d",reply_filled:"ea3e",restrict:"ea3f",revenue:"ea40",rightpanel:"ea41",rotate:"ea42",rotate_left:"ea43",rotate_right:"ea44",round_chats_filled:"ea45",saturation:"ea46",saved:"ea47",savedmessages:"ea48",schedule:"ea49",scheduled:"ea4a",search:"ea4b",select:"ea4c",send:"ea4d",send2:"ea4e",sending:"ea4f",sendingerror:"ea50",settings:"ea51",settings_clipped_corner:"ea52",settings_filled:"ea53",shadows:"ea54",sharescreen_filled:"ea55",sharpen:"ea56",shipping:"ea57",shuffle:"ea58",smallscreen:"ea59",smile:"ea5a",sort_date:"ea5b",sort_num:"ea5c",sort_price:"ea5d",speaker:"ea5e",speakerfilled:"ea5f",speakeroff:"ea60",speakerofffilled:"ea61",spoiler:"ea62",sport:"ea63",star:"ea64",star_filled:"ea65",statistics:"ea66",stickers:"ea67",stickers_face:"ea68",stop:"ea69",stories:"ea6a",story:"ea6b",storyreply:"ea6c",storyrepost:"ea6d",strikethrough:"ea6e",suggested:"ea6f",tag:"ea70",tag_add:"ea71",tag_alt:"ea72",tag_alt_crossed:"ea73",tag_alt_outline:"ea74",tag_crossed:"ea75",tag_filter:"ea76",tag_name:"ea77",text:"ea78",textedit:"ea79",time_lock:"ea7a",timer:"ea7b",tip:"ea7c",ton:"ea7d",tools:"ea7e",topics:"ea7f",trade:"ea80",transcribe:"ea81",unarchive:"ea82",unclaimed:"ea83",underline:"ea84",undo:"ea85",unmute:"ea86",unpack:"ea87",unpin:"ea88",unread:"ea89",up:"ea8a",up_down:"ea8b",user:"ea8c",username:"ea8d",videocamera:"ea8e",videocamera_crossed_filled:"ea8f",videocamera_filled:"ea90",videochat:"ea91",vignette:"ea92",volume_down:"ea93",volume_mute:"ea94",volume_off:"ea95",volume_up:"ea96",warmth:"ea97",warning:"ea98",webview:"ea99",win_key:"ea9a",zoomin:"ea9b",zoomout:"ea9c"},Qf=new Set(["avatarnext","avatarprevious","arrow_next","channel","chatspinned","fast_forward","fast_rewind","forward","forward_filled","group","group_filled","left","listscreenshare","logout","muted","newchannel_filled","newchannel","newgroup","newgroup_filled","next","nosound","previous","send","send2","reply","reply_filled","sharescreen_filled","transcribe","storyreply","premium_noads","topics","pinlist","deleteleft"]);function Yf(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Xf(r){r.setAttribute("dir","auto")}function Zf(r){return r.target="_blank",r.rel="noopener noreferrer",r}const el=!1,tl=(r,e)=>r===e,hi={equals:tl};let Ar=Tr;const oa=1,ls=2,kr={owned:null,cleanups:null,context:null,owner:null};var Re=null;let Vs=null,al=null,Ee=null,Je=null,Ot=null,vs=0;function sl(r,e){const t=Ee,a=Re,s=r.length===0,n=a,i=s?kr:{owned:null,cleanups:null,context:n?n.context:null,owner:n},o=s?r:()=>r(()=>Er(()=>Ga(i)));Re=i,Ee=null;try{return Ha(o,!0)}finally{Ee=t,Re=a}}function on(r,e){e=e?Object.assign({},hi,e):hi;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},a=s=>(typeof s=="function"&&(s=s(t.value)),Fr(t,s));return[rl.bind(t),a]}function nl(r,e,t){Ar=cl;const a=pl(r,e,!1,oa);a.user=!0,Ot?Ot.push(a):Sn(a)}function Er(r){if(Ee===null)return r();const e=Ee;Ee=null;try{return r()}finally{Ee=e}}function il(r){return Re===null||(Re.cleanups===null?Re.cleanups=[r]:Re.cleanups.push(r)),r}function rl(){if(this.sources&&this.state)if(this.state===oa)Sn(this);else{const r=Je;Je=null,Ha(()=>gs(this),!1),Je=r}if(Ee){const r=this.observers?this.observers.length:0;Ee.sources?(Ee.sources.push(this),Ee.sourceSlots.push(r)):(Ee.sources=[this],Ee.sourceSlots=[r]),this.observers?(this.observers.push(Ee),this.observerSlots.push(Ee.sources.length-1)):(this.observers=[Ee],this.observerSlots=[Ee.sources.length-1])}return this.value}function Fr(r,e,t){let a=r.value;return(!r.comparator||!r.comparator(a,e))&&(r.value=e,r.observers&&r.observers.length&&Ha(()=>{for(let s=0;s<r.observers.length;s+=1){const n=r.observers[s],i=Vs&&Vs.running;i&&Vs.disposed.has(n),(i?!n.tState:!n.state)&&(n.pure?Je.push(n):Ot.push(n),n.observers&&Ur(n)),i||(n.state=oa)}if(Je.length>1e6)throw Je=[],new Error},!1)),e}function Sn(r){if(!r.fn)return;Ga(r);const e=vs;ol(r,r.value,e)}function ol(r,e,t){let a;const s=Re,n=Ee;Ee=Re=r;try{a=r.fn(e)}catch(i){return r.pure&&(r.state=oa,r.owned&&r.owned.forEach(Ga),r.owned=null),r.updatedAt=t+1,Rr(i)}finally{Ee=n,Re=s}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?Fr(r,a):r.value=a,r.updatedAt=t)}function pl(r,e,t,a=oa,s){const n={fn:r,state:a,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Re,context:Re?Re.context:null,pure:t};return Re===null||Re!==kr&&(Re.owned?Re.owned.push(n):Re.owned=[n]),n}function ms(r){if(r.state===0)return;if(r.state===ls)return gs(r);if(r.suspense&&Er(r.suspense.inFallback))return r.suspense.effects.push(r);const e=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<vs);)r.state&&e.push(r);for(let t=e.length-1;t>=0;t--)if(r=e[t],r.state===oa)Sn(r);else if(r.state===ls){const a=Je;Je=null,Ha(()=>gs(r,e[0]),!1),Je=a}}function Ha(r,e){if(Je)return r();let t=!1;e||(Je=[]),Ot?t=!0:Ot=[],vs++;try{const a=r();return dl(t),a}catch(a){t||(Ot=null),Je=null,Rr(a)}}function dl(r){if(Je&&(Tr(Je),Je=null),r)return;const e=Ot;Ot=null,e.length&&Ha(()=>Ar(e),!1)}function Tr(r){for(let e=0;e<r.length;e++)ms(r[e])}function cl(r){let e,t=0;for(e=0;e<r.length;e++){const a=r[e];a.user?r[t++]=a:ms(a)}for(e=0;e<t;e++)ms(r[e])}function gs(r,e){r.state=0;for(let t=0;t<r.sources.length;t+=1){const a=r.sources[t];if(a.sources){const s=a.state;s===oa?a!==e&&(!a.updatedAt||a.updatedAt<vs)&&ms(a):s===ls&&gs(a,e)}}}function Ur(r){for(let e=0;e<r.observers.length;e+=1){const t=r.observers[e];t.state||(t.state=ls,t.pure?Je.push(t):Ot.push(t),t.observers&&Ur(t))}}function Ga(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),a=r.sourceSlots.pop(),s=t.observers;if(s&&s.length){const n=s.pop(),i=t.observerSlots.pop();a<s.length&&(n.sourceSlots[i]=a,s[a]=n,t.observerSlots[a]=i)}}if(r.tOwned){for(e=r.tOwned.length-1;e>=0;e--)Ga(r.tOwned[e]);delete r.tOwned}if(r.owned){for(e=r.owned.length-1;e>=0;e--)Ga(r.owned[e]);r.owned=null}if(r.cleanups){for(e=r.cleanups.length-1;e>=0;e--)r.cleanups[e]();r.cleanups=null}r.state=0}function fl(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Rr(r,e=Re){const t=fl(r);{console.error("solid error",t);return}}var rt;(r=>{r.strings=new Map,r.countriesList=[];let e,t;r.isRTL=!1,[r.langCodeNormalized,r.setLangCodeNormalized]=on();function a(v){r.isRTL=v}r.setRTL=a;function s(v){r.lastRequestedLangCode=v,r.lastRequestedNormalizedLangCode=v.split("-")[0],(0,r.setLangCodeNormalized)(r.lastRequestedNormalizedLangCode.split("-")[0])}function n(v){return Promise.all([wt.get("langPack").then(y=>y||(v?void 0:d())),r.polyfillPromise]).then(([y])=>y)}r.getCacheLangPack=n;function i(){return t||(t=n(!0).then(async v=>(v||(v=await d(),v=await g(v,!1)),s(v.lang_code),_(v),v)).finally(()=>{t=void 0}))}r.getCacheLangPackAndApply=i;function o(){if(r.timeFormat==="h12")try{const v=T({hour:"numeric",minute:"numeric",hour12:!0}),y=new Date;y.setHours(0);const x=v.format(y);r.amPmCache.am=x.split(/\s/)[1],y.setHours(12);const A=v.format(y);r.amPmCache.pm=A.split(/\s/)[1]}catch(v){console.error("cannot get am/pm",v),r.amPmCache={am:"AM",pm:"PM"}}}function p(v,y=!!r.timeFormat&&r.timeFormat!==v){r.timeFormat=v,o(),y&&(R.clear(),Array.from(document.querySelectorAll(".i18n")).forEach(A=>{const F=r.weakMap.get(A);F instanceof V&&F.update()}))}r.setTimeFormat=p;function d(){const v=le.langPackCode;return Promise.all([import("./lang-Se52RPea.js"),import("./langSign-dsOn7n1c.js"),import("./countries-CzeCvYH8.js")]).then(([y,x,A])=>{const F=[];return l(y.default,F),l(x.default,F),{_:"langPackDifference",from_version:0,lang_code:v,strings:F,version:le.langPackVersion,countries:A.default,localVersion:le.langPackLocalVersion}})}r.loadLocalLangPack=d;function c(v,y,x){y=!0;const A=Le.managers;return Promise.all([A.appLangPackManager.getLangPack(v,y?"web":le.langPack,x),!y&&A.appLangPackManager.getLangPack(v,"android",x),import("./lang-Se52RPea.js"),import("./langSign-dsOn7n1c.js"),A.appLangPackManager.getCountriesList(v,x),r.polyfillPromise])}r.loadLangPack=c;function f(v,y){return Le.managers.appLangPackManager.getStrings(v,y)}r.getStrings=f;function l(v,y=[]){for(const x in v){const A=v[x];typeof A=="string"?y.push({_:"langPackString",key:x,value:A}):y.push({_:"langPackStringPluralized",key:x,...A})}return y}r.formatLocalStrings=l;function m(v,y,x){return s(v),c(v,y,x).then(([A,F,j,K,ae,De])=>{let Z=[];return[j,K].forEach(fe=>{l(fe.default,Z)}),Z=Z.concat(...[A.strings,F.strings].filter(Boolean)),A.strings=Z,A.countries=ae,A.localVersion=le.langPackLocalVersion,g(A,!0)})}r.getLangPackAndApply=m;function g(v,y){return v.version||(v.version=le.langPackVersion),y?wt.set({langPack:v}).then(()=>(_(v),v)):v}r.saveLangPack=g,r.polyfillPromise=function(){return typeof Intl<"u"&&typeof Intl.PluralRules<"u"?Promise.resolve():import("./pluralPolyfill-B0qpVVRH.js").then(y=>{window.Intl=Object.assign(typeof Intl<"u"?Intl:{},y.default)})}();function _(v){const y=r.lastRequestedLangCode;if(v.lang_code!==y)return;try{e=new Intl.PluralRules(r.lastRequestedNormalizedLangCode)}catch(A){console.error("pluralRules error",A),e=new Intl.PluralRules(r.lastRequestedNormalizedLangCode.split("-",1)[0])}try{e=new Intl.PluralRules(v.lang_code)}catch(A){console.error("pluralRules error",A),e=new Intl.PluralRules(v.lang_code.split("-",1)[0])}r.strings.clear();for(const A of v.strings)r.strings.set(A.key,A);v.countries&&(r.countriesList.length=0,r.countriesList.push(...v.countries.countries),v.countries.countries.forEach(A=>{if(A.name){const F=A.default_name;r.strings.set(F,{_:"langPackString",key:F,value:A.name})}})),r.lastAppliedLangCode!==y&&(r.lastAppliedLangCode&&Le.myId&&(Le.managers.appReactionsManager.resetAvailableReactions(),Le.managers.appUsersManager.indexMyself(),Le.managers.dialogsStorage.indexMyDialog()),r.lastAppliedLangCode=y,R.clear(),o(),Le.dispatchEvent("language_change",y)),Array.from(document.querySelectorAll(".i18n")).forEach(A=>{const F=r.weakMap.get(A);F&&F.update()}),Le.dispatchEventSingle("language_apply")}r.applyLangPack=_;function S(v,y,x,A){const F=y[A===void 0?x.i++:A];Array.isArray(F)?v.push(...F):v.push(F)}const D={">":"next","<":"previous"},C="><",b=Object.keys(D);function w(v,y,x){if(!x){x={i:0};const K=v.match(/(%|un)\d+/g);K?.length&&(x.i=Math.max(...K.map(ae=>+ae.replace(/\D/g,""))))}const A=[],F=new RegExp(`(\\*\\*|__)(.+?)\\1|(\\n)|(\\[.+?\\]\\(.*?\\))|(?:^|\\s)(${b.join("|")})(?:$|\\s)|un\\d|%\\d\\$.|%\\S`,"g");let j=0;return v.replace(F,(K,ae,De,Z,fe,ee,Ie,Be)=>{if(Ie>j&&A.push(Be.slice(j,Ie)),ae){let he;switch(ae){case"**":{he=document.createElement("b");break}case"__":{he=document.createElement("i");break}}he.append(...w(De,y,x)),A.push(he)}else if(Z)A.push(document.createElement("br"));else if(fe){const he=fe.lastIndexOf("]"),Ze=fe.slice(1,he),we=fe.slice(he+2,fe.length-1);let me;if(we&&Pr(we)){me=document.createElement("a");const Pe=Pn(we);me.href=Pe.url,Pe.onclick&&me.setAttribute("onclick",Pe.onclick+"(this)"),Zf(me)}else me=y[x.i++],me instanceof DocumentFragment&&(me=me.firstChild),typeof me!="string"&&(me.textContent="");const Fe=w(Ze,y,x);typeof me=="string"?A.push(...Fe):(me.append(...Fe),A.push(me))}else if(ee){const he=C.includes(ee);!he&&!K.startsWith(ee)&&A.push(K[0]);const Ze="inline-icon",we=D[ee];if(typeof we=="function"){const me=we();me.classList.add(Ze),A.push(me)}else A.push(pn(we,Ze));!he&&K.startsWith(ee)&&A.push(K[K.length-1])}else if(y){const he=K.replace(/\D/g,"");S(A,y,x,!he||Number.isNaN(+he)?void 0:Math.min(y.length-1,+he-1))}return j=Ie+K.length,""}),j!==v.length&&A.push(v.slice(j)),A}r.superFormatter=w;function k(v,y=!1,x){const A=r.strings.get(v);let F;if(A)if(A._==="langPackStringPluralized"&&x?.length){let K=x[0];typeof K=="string"&&(K=+K.replace(/\D/g,""));const ae=e.select(K);F=A[ae+"_value"]||A.other_value}else A._==="langPackString"?F=A.value:F=v;else F=v;const j=w(F,x);return y?j.map(K=>K instanceof HTMLBRElement?`
`:K instanceof Node?K.textContent:K).join(""):j}r.format=k,r.weakMap=new WeakMap;class B{constructor(y){this.element=y?.element||document.createElement("span"),this.element.classList.add("i18n"),this.property=y?.property,r.weakMap.set(this.element,this)}}class L extends B{constructor(y={}){super({...y,property:y.property??"innerHTML"}),y?.key&&this.update(y)}update(y){if(Pa(this,y),!this.key){this.element.replaceChildren();return}if(this.property==="innerHTML")this.element.replaceChildren(...k(this.key,!1,this.args)),this.args?.length&&this.element.normalize();else{const x=this.element[this.property],A=k(this.key,!0,this.args);x===void 0?this.element.dataset[this.property]=A:this.element[this.property]=A}}compareAndUpdateBool(y){return this.key===y.key&&We(this.args,y.args)?!1:(this.update(y),!0)}compareAndUpdate(y){if(!(this.key===y.key&&We(this.args,y.args)))return this.update(y)}}r.IntlElement=L;const R=new Map;function T(v={}){const y=JSON.stringify(v);let x=R.get(y);return x||(x=new Intl.DateTimeFormat(r.lastRequestedNormalizedLangCode+"-u-hc-"+r.timeFormat,v),R.set(y,x)),x}r.getDateTimeFormat=T,r.amPmCache={am:"AM",pm:"PM"};class V extends B{constructor(y){super({...y,property:y.property??"textContent"}),Xf(this.element),y?.date&&this.update(y)}update(y){Pa(this,y);let x;if(this.options.hour&&this.options.minute&&Object.keys(this.options).length===2){const A=this.date.getHours();x=("0"+(r.timeFormat==="h12"?A%12||12:A)).slice(-2)+":"+("0"+this.date.getMinutes()).slice(-2),r.timeFormat==="h12"&&(x+=" "+(A<12?r.amPmCache.am:r.amPmCache.pm))}else{const A=T(this.options);x=Yf(A.format(this.date))}this.element[this.property]=x}}r.IntlDateElement=V;function O(v,y){return new L({key:v,args:y}).element}r.i18n=O;function h(v){return new L(v).element}r.i18n_=h;function M(v,y,x,A){return new L({element:v,key:y,args:x,property:A}).element}r._i18n=M})(rt||(rt={}));var Br=rt;rt.i18n;rt.i18n_;rt._i18n;async function xr(r){const{difference:e}=r;if(e.lang_code!==rt.lastRequestedLangCode)return;const t=await rt.getCacheLangPack();if(!(t?.lang_code!==e.lang_code||t.lang_code!==rt.lastRequestedLangCode)){if(t.version!==e.from_version){bn(e);return}if(e.strings){const a=t.strings||(t.strings=[]);for(const s of e.strings){const n=a.findIndex(i=>i.key===s.key);n!==-1?a[n]=s:a.push(s)}}t.version=e.version,t.from_version=e.from_version,await rt.saveLangPack(t,!0)}}function bn(r){const{lang_code:e}=r;e===rt.lastRequestedLangCode&&ml()}function ll(){bn({lang_code:rt.lastRequestedLangCode})}async function ml(){const r=await rt.getCacheLangPack(),e=await Le.managers.appLangPackManager.getDifference(r.lang_code,r.version);if(e.version>r.version)return xr({difference:e})}Le.addEventListener("langpack_update",xr);Le.addEventListener("langpack_update_too_long",bn);Le.addEventListener("state_cleared",ll);pe&&(pe.I18n=rt);function gl(r){return String.fromCharCode(parseInt($f[r],16))}function pn(r,...e){const t=document.createElement("span");return Br.isRTL&&Qf.has(r)&&e.push("icon-reflect"),t.classList.add(Jf,...e),t.textContent=gl(r),t}const ul={AED:{code:"AED",title:"United Arab Emirates Dirham",symbol:"AED",native:"د.إ.‏",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"367",max_amount:"3673020"},AFN:{code:"AFN",title:"Afghan Afghani",symbol:"AFN",native:"؋",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"7092",max_amount:"70919694"},ALL:{code:"ALL",title:"Albanian Lek",symbol:"ALL",native:"Lek",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!1,drop_zeros:!1,exp:2,min_amount:"9249",max_amount:"92485282"},AMD:{code:"AMD",title:"Armenian Dram",symbol:"AMD",native:"դր.",thousands_sep:",",decimal_sep:".",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"38785",max_amount:"387850064"},ARS:{code:"ARS",title:"Argentine Peso",symbol:"ARS",native:"$",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"93178",max_amount:"931784401"},AUD:{code:"AUD",title:"Australian Dollar",symbol:"AU$",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"153",max_amount:"1534530"},AZN:{code:"AZN",title:"Azerbaijani Manat",symbol:"AZN",native:"ман.",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"170",max_amount:"1700517"},BAM:{code:"BAM",title:"Bosnia & Herzegovina Convertible Mark",symbol:"BAM",native:"KM",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"181",max_amount:"1806101"},BDT:{code:"BDT",title:"Bangladeshi Taka",symbol:"BDT",native:"৳",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"11744",max_amount:"117439546"},BGN:{code:"BGN",title:"Bulgarian Lev",symbol:"BGN",native:"лв.",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"181",max_amount:"1808709"},BND:{code:"BND",title:"Brunei Dollar",symbol:"BND",native:"$",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"133",max_amount:"1330735"},BOB:{code:"BOB",title:"Bolivian Boliviano",symbol:"BOB",native:"Bs",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"691",max_amount:"6906359"},BRL:{code:"BRL",title:"Brazilian Real",symbol:"R$",native:"R$",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"577",max_amount:"5769050"},BYN:{code:"BYN",title:"Belarusian ruble",symbol:"BYN",native:"BYN",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"327",max_amount:"3270247"},CAD:{code:"CAD",title:"Canadian Dollar",symbol:"CA$",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"139",max_amount:"1387645"},CHF:{code:"CHF",title:"Swiss Franc",symbol:"CHF",native:"CHF",thousands_sep:"'",decimal_sep:".",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"87",max_amount:"870429"},CLP:{code:"CLP",title:"Chilean Peso",symbol:"CLP",native:"$",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:0,min_amount:"949",max_amount:"9486298"},CNY:{code:"CNY",title:"Chinese Renminbi Yuan",symbol:"CN¥",native:"CN¥",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"721",max_amount:"7207705"},COP:{code:"COP",title:"Colombian Peso",symbol:"COP",native:"$",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"408665",max_amount:"4086650000"},CRC:{code:"CRC",title:"Costa Rican Colón",symbol:"CRC",native:"₡",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"52313",max_amount:"523125084"},CZK:{code:"CZK",title:"Czech Koruna",symbol:"CZK",native:"Kč",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"2332",max_amount:"23323050"},DKK:{code:"DKK",title:"Danish Krone",symbol:"DKK",native:"kr",thousands_sep:"",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"689",max_amount:"6887630"},DOP:{code:"DOP",title:"Dominican Peso",symbol:"DOP",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"5945",max_amount:"59453394"},DZD:{code:"DZD",title:"Algerian Dinar",symbol:"DZD",native:"د.ج.‏",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"13449",max_amount:"134492834"},EGP:{code:"EGP",title:"Egyptian Pound",symbol:"EGP",native:"ج.م.‏",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"4869",max_amount:"48686201"},ETB:{code:"ETB",title:"Ethiopian Birr",symbol:"ETB",native:"ብር",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"8093",max_amount:"80931744"},EUR:{code:"EUR",title:"Euro",symbol:"€",native:"€",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"92",max_amount:"923025"},GBP:{code:"GBP",title:"British Pound",symbol:"£",native:"£",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"78",max_amount:"784671"},GEL:{code:"GEL",title:"Georgian Lari",symbol:"GEL",native:"GEL",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"271",max_amount:"2709634"},GTQ:{code:"GTQ",title:"Guatemalan Quetzal",symbol:"GTQ",native:"Q",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"775",max_amount:"7745760"},HKD:{code:"HKD",title:"Hong Kong Dollar",symbol:"HK$",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"781",max_amount:"7810275"},HNL:{code:"HNL",title:"Honduran Lempira",symbol:"HNL",native:"L",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"2474",max_amount:"24741783"},HRK:{code:"HRK",title:"Croatian Kuna",symbol:"HRK",native:"kn",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"691",max_amount:"6907950"},HUF:{code:"HUF",title:"Hungarian Forint",symbol:"HUF",native:"Ft",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"36623",max_amount:"366225500"},IDR:{code:"IDR",title:"Indonesian Rupiah",symbol:"IDR",native:"Rp",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"1620255",max_amount:"16202550000"},ILS:{code:"ILS",title:"Israeli New Sheqel",symbol:"₪",native:"₪",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"380",max_amount:"3801205"},INR:{code:"INR",title:"Indian Rupee",symbol:"₹",native:"₹",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"8374",max_amount:"83744750"},ISK:{code:"ISK",title:"Icelandic Króna",symbol:"ISK",native:"kr",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:0,min_amount:"139",max_amount:"1389014"},JMD:{code:"JMD",title:"Jamaican Dollar",symbol:"JMD",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"15637",max_amount:"156368606"},JPY:{code:"JPY",title:"Japanese Yen",symbol:"¥",native:"￥",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:0,min_amount:"149",max_amount:"1490865"},KES:{code:"KES",title:"Kenyan Shilling",symbol:"KES",native:"Ksh",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"12996",max_amount:"129960065"},KGS:{code:"KGS",title:"Kyrgyzstani Som",symbol:"KGS",native:"KGS",thousands_sep:" ",decimal_sep:"-",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"8403",max_amount:"84030175"},KRW:{code:"KRW",title:"South Korean Won",symbol:"₩",native:"₩",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:0,min_amount:"1367",max_amount:"13667698"},KZT:{code:"KZT",title:"Kazakhstani Tenge",symbol:"KZT",native:"₸",thousands_sep:" ",decimal_sep:"-",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"47435",max_amount:"474353706"},LBP:{code:"LBP",title:"Lebanese Pound",symbol:"LBP",native:"ل.ل.‏",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"8950019",max_amount:"89500191612"},LKR:{code:"LKR",title:"Sri Lankan Rupee",symbol:"LKR",native:"රු.",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"30176",max_amount:"301757853"},MAD:{code:"MAD",title:"Moroccan Dirham",symbol:"MAD",native:"د.م.‏",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"987",max_amount:"9874277"},MDL:{code:"MDL",title:"Moldovan Leu",symbol:"MDL",native:"MDL",thousands_sep:",",decimal_sep:".",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"1777",max_amount:"17770719"},MMK:{code:"MMK",title:"Myanmar kyat",symbol:"MMK",native:"MMK",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"324796",max_amount:"3247960992"},MNT:{code:"MNT",title:"Mongolian Tögrög",symbol:"MNT",native:"MNT",thousands_sep:" ",decimal_sep:",",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"345000",max_amount:"3450000346"},MOP:{code:"MOP",title:"Macanese pataca",symbol:"MOP",native:"MOP",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"804",max_amount:"8040613"},MUR:{code:"MUR",title:"Mauritian Rupee",symbol:"MUR",native:"MUR",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"4675",max_amount:"46749662"},MVR:{code:"MVR",title:"Maldivian Rufiyaa",symbol:"MVR",native:"MVR",thousands_sep:",",decimal_sep:".",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"1535",max_amount:"15350296"},MXN:{code:"MXN",title:"Mexican Peso",symbol:"MX$",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"1898",max_amount:"18980550"},MYR:{code:"MYR",title:"Malaysian Ringgit",symbol:"MYR",native:"RM",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"450",max_amount:"4497502"},MZN:{code:"MZN",title:"Mozambican Metical",symbol:"MZN",native:"MTn",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"6390",max_amount:"63899991"},NGN:{code:"NGN",title:"Nigerian Naira",symbol:"NGN",native:"₦",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"163953",max_amount:"1639530235"},NIO:{code:"NIO",title:"Nicaraguan Córdoba",symbol:"NIO",native:"C$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"3679",max_amount:"36791630"},NOK:{code:"NOK",title:"Norwegian Krone",symbol:"NOK",native:"kr",thousands_sep:" ",decimal_sep:",",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"1100",max_amount:"10996470"},NPR:{code:"NPR",title:"Nepalese Rupee",symbol:"NPR",native:"नेरू",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"13390",max_amount:"133897859"},NZD:{code:"NZD",title:"New Zealand Dollar",symbol:"NZ$",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"168",max_amount:"1679219"},PAB:{code:"PAB",title:"Panamanian Balboa",symbol:"PAB",native:"B/.",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"100",max_amount:"999469"},PEN:{code:"PEN",title:"Peruvian Nuevo Sol",symbol:"PEN",native:"S/.",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"374",max_amount:"3740759"},PHP:{code:"PHP",title:"Philippine Peso",symbol:"PHP",native:"₱",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"5806",max_amount:"58056502"},PKR:{code:"PKR",title:"Pakistani Rupee",symbol:"PKR",native:"₨",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"27836",max_amount:"278360445"},PLN:{code:"PLN",title:"Polish Złoty",symbol:"PLN",native:"zł",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"396",max_amount:"3957640"},PYG:{code:"PYG",title:"Paraguayan Guaraní",symbol:"PYG",native:"₲",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:0,min_amount:"7569",max_amount:"75694544"},QAR:{code:"QAR",title:"Qatari Riyal",symbol:"QAR",native:"ر.ق.‏",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"364",max_amount:"3644355"},RON:{code:"RON",title:"Romanian Leu",symbol:"RON",native:"RON",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"459",max_amount:"4592300"},RSD:{code:"RSD",title:"Serbian Dinar",symbol:"RSD",native:"дин.",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"10802",max_amount:"108020115"},RUB:{code:"RUB",title:"Russian Ruble",symbol:"RUB",native:"₽",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"8990",max_amount:"89898410"},SAR:{code:"SAR",title:"Saudi Riyal",symbol:"SAR",native:"ر.س.‏",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"375",max_amount:"3754022"},SEK:{code:"SEK",title:"Swedish Krona",symbol:"SEK",native:"kr",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"1069",max_amount:"10689290"},SGD:{code:"SGD",title:"Singapore Dollar",symbol:"SGD",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"133",max_amount:"1331235"},THB:{code:"THB",title:"Thai Baht",symbol:"฿",native:"฿",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"3535",max_amount:"35351502"},TJS:{code:"TJS",title:"Tajikistani Somoni",symbol:"TJS",native:"TJS",thousands_sep:" ",decimal_sep:";",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"1057",max_amount:"10569158"},TRY:{code:"TRY",title:"Turkish Lira",symbol:"TRY",native:"TL",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"3317",max_amount:"33166840"},TTD:{code:"TTD",title:"Trinidad and Tobago Dollar",symbol:"TTD",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"677",max_amount:"6768188"},TWD:{code:"TWD",title:"New Taiwan Dollar",symbol:"NT$",native:"NT$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"3281",max_amount:"32805499"},TZS:{code:"TZS",title:"Tanzanian Shilling",symbol:"TZS",native:"TSh",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"270000",max_amount:"2700000297"},UAH:{code:"UAH",title:"Ukrainian Hryvnia",symbol:"UAH",native:"₴",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!1,drop_zeros:!1,exp:2,min_amount:"4124",max_amount:"41236639"},UGX:{code:"UGX",title:"Ugandan Shilling",symbol:"UGX",native:"USh",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:0,min_amount:"3723",max_amount:"37234902"},USD:{code:"USD",title:"United States Dollar",symbol:"$",native:"$",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!1,drop_zeros:!1,exp:2,min_amount:"100",max_amount:1e6},UYU:{code:"UYU",title:"Uruguayan Peso",symbol:"UYU",native:"$",thousands_sep:".",decimal_sep:",",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"4027",max_amount:"40269076"},UZS:{code:"UZS",title:"Uzbekistani Som",symbol:"UZS",native:"UZS",thousands_sep:" ",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:2,min_amount:"1256851",max_amount:"12568510387"},VND:{code:"VND",title:"Vietnamese Đồng",symbol:"₫",native:"₫",thousands_sep:".",decimal_sep:",",symbol_left:!1,space_between:!0,drop_zeros:!1,exp:0,min_amount:"25218",max_amount:"252175000"},YER:{code:"YER",title:"Yemeni Rial",symbol:"YER",native:"ر.ي.‏",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"25035",max_amount:"250350255"},ZAR:{code:"ZAR",title:"South African Rand",symbol:"ZAR",native:"R",thousands_sep:",",decimal_sep:".",symbol_left:!0,space_between:!0,drop_zeros:!1,exp:2,min_amount:"1819",max_amount:"18193780"}};function hl(r,e=" "){if(r===void 0)return"";const t=r.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),t.join(".")}function yl(r){return r===void 0?"":hl(r," ")}function _l(r,e,t,a){r=(r+"").replace(/[^0-9+\-Ee.]/g,"");var s=isFinite(+r)?+r:0,n=isFinite(+e)?Math.abs(e):0,i=typeof a>"u"?",":a,o=typeof t>"u"?".":t,p="",d=function(c,f){var l=Math.pow(10,f);return""+Math.round(c*l)/l};return p=(n?d(s,n):""+Math.round(s)).split("."),p[0].length>3&&(p[0]=p[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(p[1]||"").length<n&&(p[1]=p[1]||"",p[1]+=new Array(n-p[1].length+1).join("0")),p.join(o)}const fa=9;function Lr(r,e=2,t=!0){let a=String(r),s=!1;a.startsWith("-")&&(s=!0,a=a.slice(1)),a.length<fa&&(a=a.padStart(fa,"0"));let n=a.slice(0,a.length-fa)||"0";const i=a.slice(-fa).padEnd(fa,"0");let o=i.slice(0,e);if((i.length>e?parseInt(i[e],10):0)>=5){const c=parseInt(o,10)+1;c>=10**e?(n=ke(n).plus(1).toString(),o="00"):o=c.toString().padStart(2,"0")}let d="";return s&&(d+="-"),t?d+=n.replace(/\B(?=(\d{3})+(?!\d))/g,","):d+=n,e>0&&(o=o.replace(/0+$/,""),o&&(d+="."+o)),d}function vl(r){return Number(Lr(r,fa,!1))}function Pl(r,e,t,a,s){if(e===Lo){const m=Lr(r);if(s)return m+" TON";const g=document.createElement("span");return g.classList.add("ton-amount"),g.append(pn("ton","ton-amount-icon")," ",m),g}if(r=+r,e===qs){if(s)return Br.format("StarsCount",!0,[r]);const m=document.createElement("span");return m.classList.add("xtr"),m.append(pn("star","xtr-icon")," ",yl(r)),m}const n=r<0,i=ul[e];if(!i)throw new Error("CURRENCY_WRAP_INVALID");const o=r/Math.pow(10,i.exp);let p=i.exp;e=="IRR"&&Math.floor(o)==o&&(p=0);let d=_l(o,p,i.decimal_sep,i.thousands_sep);if(t)return d;let c=a&&i.native||i.symbol;n&&!i.space_between&&i.symbol_left&&(c="-"+c,d=d.replace("-",""));let f;const l=i.space_between?" ":"";return i.symbol_left?f=c+l+d:f=d+l+c,f}pe.p=Pl;function Ml(r,e){const t="type"in r?r.input:r;return t._==="inputSavedStarGiftChat"&&e._==="inputSavedStarGiftChat"?t.saved_id===e.saved_id&&oe(t.peer)===oe(e.peer):t._==="inputSavedStarGiftUser"&&e._==="inputSavedStarGiftUser"?t.msg_id===e.msg_id:t._==="inputSavedStarGiftSlug"&&e._==="inputSavedStarGiftSlug"?t.slug===e.slug:"raw"in r&&r.raw._==="starGiftUnique"&&e._==="inputSavedStarGiftSlug"?r.raw.slug===e.slug:!1}function Sl(r){const e=new Map;for(const s of r)if(s.users===1&&!(s.months!==3&&s.months!==6&&s.months!==12)){if(e.has(s.months)){const n=e.get(s.months);n.currency===qs?(n.priceStars=n.price,n.price=s.amount,n.currency=s.currency,n.raw=s):s.currency===qs&&(n.priceStars=s.amount);continue}e.set(s.months,{type:"premium",months:s.months,price:s.amount,currency:s.currency,discountPercent:0,raw:s})}const t=ke(e.get(3).price),a=(s,n)=>{const i=s.price,o=t.multiply(n);o.lt(i)||(s.discountPercent=o.subtract(i).toJSNumber()/o.toJSNumber()*100)};return a(e.get(6),2),a(e.get(12),4),[e.get(3),e.get(6),e.get(12)]}class bl extends W{constructor(){super(...arguments),this.cachedStarGiftOptionsHash=0,this.myPinnedGifts=[]}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateNewMessage:({message:e})=>{if(e._!=="messageService")return;const t=e.action;switch(t._){case"messageActionStarGift":this.rootScope.dispatchEvent("star_gift_list_update",{peerId:oe(e.peer_id)});break;case"messageActionStarGiftUnique":{const a=oe(e.peer_id);this.rootScope.dispatchEvent("star_gift_list_update",{peerId:a}),(t.pFlags.transferred&&e.pFlags.out||t.resale_amount||t.pFlags.from_offer)&&this.rootScope.dispatchEvent("star_gift_list_update",{peerId:this.rootScope.myId}),t._==="messageActionStarGiftUnique"&&t.pFlags.upgrade&&this.wrapGiftFromMessage(e).then(s=>{this.rootScope.dispatchEvent("star_gift_upgrade",{gift:s,savedId:t.saved_id,fromMsgId:e.reply_to?._==="messageReplyHeader"?e.reply_to.reply_to_msg_id:void 0})});break}}},updateUserEmojiStatus:e=>{e.user_id===this.rootScope.myId&&(this.wearingGiftSlug&&this.rootScope.dispatchEvent("star_gift_update",{input:{_:"inputSavedStarGiftSlug",slug:this.wearingGiftSlug},wearing:!1}),e.emoji_status._==="emojiStatusCollectible"?(this.wearingGiftSlug=e.emoji_status.slug,this.rootScope.dispatchEvent("star_gift_update",{input:{_:"inputSavedStarGiftSlug",slug:this.wearingGiftSlug},wearing:!0})):this.wearingGiftSlug=null)}})}async ensureHaveWearingGiftSlug(){if(this.wearingGiftSlug===void 0){const e=this.appUsersManager.getSelf();if(!e)return;this.wearingGiftSlug=e.emoji_status?._==="emojiStatusCollectible"?e.emoji_status.slug:null}}wrapGift(e){if(e._==="starGift")return{type:"stargift",raw:e,sticker:this.appDocsManager.saveDoc(e.sticker)};{let t,a,s,n;for(const p of e.attributes)switch(p._){case"starGiftAttributeModel":p.document=this.appDocsManager.saveDoc(p.document),t=p;break;case"starGiftAttributeBackdrop":a=p;break;case"starGiftAttributePattern":p.document=this.appDocsManager.saveDoc(p.document),s=p;break;case"starGiftAttributeOriginalDetails":n=p;break}let i,o;if(e.resell_amount)for(const p of e.resell_amount)p._==="starsAmount"?i=p.amount:p._==="starsTonAmount"&&(o=p.amount);return{type:"stargift",raw:e,sticker:this.appDocsManager.saveDoc(t.document),collectibleAttributes:{model:t,backdrop:a,pattern:s,original:n},resellPriceStars:i,resellPriceTon:o,resellOnlyTon:e.pFlags.resale_ton_only,ownerId:oe(e.owner_id),input:{_:"inputSavedStarGiftSlug",slug:e.slug},isWearing:e.slug===this.wearingGiftSlug}}}async wrapGiftFromMessage(e){const t=e.action,a=t.gift,s=this.wrapGift(t.gift),n=t._==="messageActionStarGiftUnique"&&t.pFlags.upgrade?!!e.pFlags.out:!e.pFlags.out,i={_:"savedStarGift",pFlags:{unsaved:t.pFlags.saved?void 0:!0,can_upgrade:t._==="messageActionStarGift"?t.pFlags.can_upgrade:void 0,refunded:t.pFlags.refunded},from_id:n?e.peer_id:{_:"peerUser",user_id:this.rootScope.myId},date:e.date,gift:a,message:t._==="messageActionStarGift"?t.message:s.collectibleAttributes.original?.message,msg_id:t._==="messageActionStarGift"&&t.pFlags.prepaid_upgrade?t.gift_msg_id:e.id,convert_stars:a._==="starGift"?a.convert_stars:void 0,upgrade_stars:a._==="starGift"?a.upgrade_stars:void 0,transfer_stars:t._==="messageActionStarGiftUnique"?t.transfer_stars:void 0,saved_id:t.saved_id,can_transfer_at:t._==="messageActionStarGiftUnique"?t.can_transfer_at:void 0,can_resell_at:t._==="messageActionStarGiftUnique"?t.can_resell_at:void 0,drop_original_details_stars:t._==="messageActionStarGiftUnique"?t.drop_original_details_stars:void 0,prepaid_upgrade_hash:t._==="messageActionStarGift"?t.prepaid_upgrade_hash:void 0};return s.ownerId||(s.ownerId=n?this.rootScope.myId:e.peerId),{...s,isIncoming:n,isConverted:t._==="messageActionStarGift"&&!!t.pFlags.converted,isUpgraded:t._==="messageActionStarGiftUnique"||!!t.pFlags.upgraded,isUpgradedBySender:t._==="messageActionStarGift"&&t.upgrade_stars!==void 0,saved:i,input:{_:"inputSavedStarGiftUser",msg_id:i.msg_id}}}async wrapGiftFromWebPage(e){return this.wrapGift(e.gift)}async getPinnedGifts(e){return(await this.getProfileGifts({peerId:e,limit:(await this.apiManager.getAppConfig()).stargifts_pinned_to_top_limit})).gifts}async getProfileGifts(e){e.peerId===this.rootScope.myId&&await this.ensureHaveWearingGiftSlug();const t=e.peerId.isUser(),a=this.appPeersManager.getInputPeerById(e.peerId),s=e.withCollections?this.apiManager.invokeApiSingle("payments.getStarGiftCollections",{peer:a,hash:0}):null,n=await this.apiManager.invokeApiSingleProcess({method:"payments.getSavedStarGifts",params:{peer:a,offset:e.offset??"",limit:e.limit??50,sort_by_value:e.sort==="value",exclude_unlimited:e.unlimited===!1,exclude_unupgradable:e.limited===!1,exclude_upgradable:e.upgradable===!1,exclude_unique:e.unique===!1,exclude_saved:e.displayed===!1,exclude_unsaved:e.hidden===!1,collection_id:e.collectionId}});this.appPeersManager.saveApiPeers(n);const i=[];for(const p of n.gifts)i.push({...this.wrapGift(p.gift),ownerId:e.peerId,input:t?{_:"inputSavedStarGiftUser",msg_id:p.msg_id}:{_:"inputSavedStarGiftChat",peer:a,saved_id:p.saved_id},isIncoming:e.peerId.isUser()&&this.rootScope.myId===e.peerId,saved:p});let o;if(s){const p=await s;if(p._==="payments.starGiftCollections"){o=p.collections;for(const d of o)d.icon&&this.appDocsManager.saveDoc(d.icon)}}return e.peerId===this.rootScope.myId&&!e.offset&&(this.myPinnedGifts=i.filter(p=>p.saved?.pFlags.pinned_to_top).map(p=>p.input)),{next:n.next_offset,gifts:i,count:n.count,collections:o}}async getStarGiftOptions(){const e=await this.apiManager.invokeApiSingleProcess({method:"payments.getStarGifts",params:{hash:this.cachedStarGiftOptionsHash}});if(e._==="payments.starGiftsNotModified")return this.cachedStarGiftOptions;this.cachedStarGiftOptionsHash=e.hash;const t=[];for(const a of e.gifts){const s=this.wrapGift(a),n=s.raw._==="starGift"&&!!s.raw.availability_resale;n?s.raw.availability_remains?(t.push(s),t.push({...s,isResale:n})):(s.isResale=!0,t.push(s)):t.push(s)}return this.cachedStarGiftOptions=t}async toggleGiftHidden(e,t){this.rootScope.dispatchEvent("star_gift_update",{input:e,unsaved:t}),await this.apiManager.invokeApiSingle("payments.saveStarGift",{stargift:e,unsave:t})}async convertGift(e){this.rootScope.dispatchEvent("star_gift_update",{input:e,converted:!0}),await this.apiManager.invokeApiSingle("payments.convertStarGift",{stargift:e})}async getPremiumGiftOptions(){const e=await this.apiManager.invokeApiCacheable("payments.getPremiumGiftCodeOptions");return Sl(e)}wrapAttributeList(e){const t=[],a=[],s=[];for(const n of e)switch(n._){case"starGiftAttributeModel":{n.document=this.appDocsManager.saveDoc(n.document),t.push(n);break}case"starGiftAttributeBackdrop":{a.push(n);break}case"starGiftAttributePattern":{n.document=this.appDocsManager.saveDoc(n.document),s.push(n);break}}return{models:t,backdrops:a,patterns:s}}async getUpgradePreview(e){const t=await this.apiManager.invokeApiSingle("payments.getStarGiftUpgradePreview",{gift_id:e});return{...this.wrapAttributeList(t.sample_attributes),prices:t.prices.sort((a,s)=>a.date-s.date),next_prices:t.next_prices.sort((a,s)=>a.date-s.date)}}async getGiftBySlug(e){const[t,a]=await Promise.all([this.apiManager.invokeApiSingle("payments.getUniqueStarGift",{slug:e}),this.apiManager.invokeApiSingle("payments.getSavedStarGift",{stargift:[{_:"inputSavedStarGiftSlug",slug:e}]}).catch(()=>null)]);this.appUsersManager.saveApiUsers(t.users);const s=this.wrapGift(t.gift);return a&&(this.appPeersManager.saveApiPeers(a),s.saved=a.gifts[0],s.raw._==="starGiftUnique"&&!s.raw.owner_id&&(s.raw.owner_id={_:"peerUser",user_id:this.rootScope.myId})),s}async getSavedGiftBySlug(e){return(await this.apiManager.invokeApiSingle("payments.getSavedStarGift",{stargift:[{_:"inputSavedStarGiftSlug",slug:e}]}).catch(()=>null))?.gifts[0]}async togglePinnedGift(e){const t=this.myPinnedGifts.findIndex(a=>Ml(a,e));t!==-1?this.myPinnedGifts.splice(t,1):this.myPinnedGifts.push(e),await this.apiManager.invokeApiSingle("payments.toggleStarGiftsPinnedToTop",{peer:{_:"inputPeerSelf"},stargift:this.myPinnedGifts}),this.rootScope.dispatchEvent("my_pinned_stargifts",{gifts:this.myPinnedGifts})}upgradeStarGift(e,t){return this.apiManager.invokeApiSingleProcess({method:"payments.upgradeStarGift",params:{stargift:e,keep_original_details:t}}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}transferStarGift(e,t){return this.apiManager.invokeApiSingle("payments.transferStarGift",{stargift:e,to_id:this.appPeersManager.getInputPeerById(t)}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}async getResaleOptions(e){const t=await this.apiManager.invokeApi("payments.getResaleStarGifts",{gift_id:e.giftId,sort_by_num:e.sort==="num",sort_by_price:e.sort==="price",attributes:e.filters,attributes_hash:e.attributesHash,offset:e.offset,limit:51});this.appPeersManager.saveApiPeers(t);const a=t.gifts.map(n=>this.wrapGift(n)),s=a.filter(n=>oe(n.raw.owner_id)===this.rootScope.myId);if(s.length>0){const n=await this.apiManager.invokeApiSingle("payments.getSavedStarGift",{stargift:s.map(i=>i.input)}).catch(()=>null);if(n){this.appPeersManager.saveApiPeers(n);for(const i of s){const o=n.gifts.find(p=>p.gift.slug===p.gift.slug);o&&(i.saved=o)}}}return{items:a,next:t.next_offset,count:t.count,counters:t.counters,attributes:t.attributes?this.wrapAttributeList(t.attributes):void 0,attributesHash:t.attributes_hash}}async updateResalePrice(e,t){return this.apiManager.invokeApiSingleProcess({method:"payments.updateStarGiftPrice",params:{stargift:e,resell_amount:t??{_:"starsAmount",amount:0,nanos:0}},processResult:async a=>{this.apiUpdatesManager.processUpdateMessage(a);const s=t?[t]:[];if(t?._==="starsTonAmount"){const n=await this.apiManager.getAppConfig(),o=vl(t.amount)*n.ton_usd_rate/(n.stars_usd_sell_rate_x1000/100)*1e3;s.push({_:"starsAmount",amount:Math.round(o),nanos:0})}this.rootScope.dispatchEvent("star_gift_update",{input:e,resalePrice:s})}})}async getGiftValue(e){return await this.apiManager.invokeApiSingle("payments.getUniqueStarGiftValueInfo",{slug:e})}async getFloorPrice(e){return this.cachedStarGiftOptions?.find(t=>t.raw._==="starGift"&&t.raw.title===e)?.raw?.resell_min_stars}async updateCollection(e){const t=await this.apiManager.invokeApiSingle("payments.updateStarGiftCollection",{peer:this.appPeersManager.getInputPeerById(e.peerId),collection_id:e.collectionId,add_stargift:e.add?.length?e.add:void 0,delete_stargift:e.delete?.length?e.delete:void 0,title:e.title});return t.icon&&this.appDocsManager.saveDoc(t.icon),t}async resolveGiftOffer(e,t){await this.apiManager.invokeApiSingleProcess({method:"payments.resolveStarGiftOffer",params:{offer_msg_id:e,decline:t==="reject"},processResult:async a=>{this.apiUpdatesManager.processUpdateMessage(a)}})}async createGiftOffer(e){await this.apiManager.invokeApiSingleProcess({method:"payments.sendStarGiftOffer",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),slug:e.slug,price:e.amount,duration:e.duration,random_id:Et()},processResult:async t=>{this.apiUpdatesManager.processUpdateMessage(t)}})}}class Dl extends W{constructor(){super(...arguments),this.pendingDismissed=new Set}async getPromoData(e=!1){return!e&&this.promoData&&this.promoData.expires>te(!0)?this.myPromoData:(this.refetchTimeout&&(de.clearTimeout(this.refetchTimeout),this.refetchTimeout=void 0),this.apiManager.invokeApiSingleProcess({method:"help.getPromoData",processResult:t=>(t._==="help.promoData"&&this.appPeersManager.saveApiPeers(t),this.setPromoData(t),this.refetchTimeout=de.setTimeout(()=>{this.getPromoData(!0)},t.expires*1e3-te()),this.myPromoData)}))}setPromoData(e){this.promoData=e;const t=[];if(e._==="help.promoData")for(const a of e.pending_suggestions)this.pendingDismissed.has(a)||t.push(a);this.myPromoData={pendingSuggestions:t},this.rootScope.dispatchEvent("promo_data_update",this.myPromoData)}dismissSuggestion(e){this.pendingDismissed.has(e)||(this.pendingDismissed.add(e),this.apiManager.invokeApiSingleProcess({method:"help.dismissSuggestion",params:{suggestion:e,peer:{_:"inputPeerEmpty"}}}).then(t=>{t&&this.promoData?._==="help.promoData"&&this.setPromoData({...this.promoData,pending_suggestions:this.promoData.pending_suggestions.filter(a=>a!==e)})}).catch(()=>{this.pendingDismissed.delete(e)}))}}class Cl extends W{initPasskeyRegistration(){return this.apiManager.invokeApi("account.initPasskeyRegistration")}registerPasskey(e){return this.apiManager.invokeApi("account.registerPasskey",{credential:e})}getPasskeys(){return this.apiManager.invokeApi("account.getPasskeys")}deletePasskey(e){return this.apiManager.invokeApiSingle("account.deletePasskey",{id:e})}initPasskeyLogin(){return this.apiManager.invokeApi("auth.initPasskeyLogin",{api_hash:le.hash,api_id:le.id})}async finishPasskeyLogin(e,t){const a=t?await this.apiManager.getAuthKeyFromHex((await st.get(this.getAccountNumber()))[`dc${t}_auth_key`]):void 0;return this.apiManager.invokeApi("auth.finishPasskeyLogin",{credential:e,...t?{from_dc_id:t,from_auth_key_id:Wt(a.id.reverse()).toString()}:{}},{ignoreErrors:!0}).then(s=>(s._==="auth.authorization"&&this.apiManager.setUser(s.user),s))}sendVerifyEmailCode(e,t){return this.apiManager.invokeApi("account.sendVerifyEmailCode",{purpose:e,email:t})}verifyEmail(e,t){return this.apiManager.invokeApi("account.verifyEmail",{purpose:e,verification:t})}getAuthorizations(){return this.apiManager.invokeApi("account.getAuthorizations")}resetAuthorization(e){return this.apiManager.invokeApi("account.resetAuthorization",{hash:e})}deleteAccount(e){return this.apiManager.invokeApi("account.deleteAccount",{reason:e})}}function Il(r,e,t,a){const s={appPeersManager:new cc,appChatsManager:new vp,appDocsManager:new xp,appPhotosManager:new fc,appPollsManager:new lc,appUsersManager:new xc,appWebPagesManager:new Oc,appDraftsManager:new Vp,appProfileManager:new _c,appNotificationsManager:new nc,apiUpdatesManager:new qi,appAvatarsManager:new cp,appGroupCallsManager:new Md,appCallsManager:new mp,appReactionsManager:new Ic,appMessagesManager:new sc,appMessagesIdsManager:new Dd,appPrivacyManager:new mc,appInlineBotsManager:new bd,appStickersManager:new Fc,appLangPackManager:new Vc,referencesStorage:new So,appEmojiManager:new Ks,filtersStorage:new Wo,dialogsStorage:new jo,apiManager:new _a,cryptoWorker:Y,passwordManager:new Mo,apiFileManager:new df,peersStorage:new wr,thumbsStorage:new uf,networkerFactory:new bf,rootScope:new Cr,authorizer:void 0,dcConfigurator:new ka,timeManager:new wf,appStoragesManager:r,appStateManager:e,appWebDocsManager:new Af,appPaymentsManager:new kf,appAttachMenuBotsManager:new Tf,appSeamlessLoginManager:new Uf,appThemesManager:new Rf,appUsernamesManager:new Bf,appChatInvitesManager:new Lf,appStoriesManager:new Of,appBotsManager:new Gf,appBoostsManager:new qf,appStatisticsManager:new jf,appBusinessManager:new zf,appTranslationsManager:new Kf,appGifsManager:new Wf,appGiftsManager:new bl,monoforumDialogsStorage:new Wd,appPromoManager:new Dl,appAccountManager:new Cl};s.authorizer=new If({timeManager:s.timeManager,dcConfigurator:s.dcConfigurator});for(const o in s){const p=s[o];p&&(p.setManagersAndAccountNumber&&(p.setManagersAndAccountNumber(s,t),delete p.setManagersAndAccountNumber),de[o]=p)}Object.assign(s.rootScope,{managers:s});const n=[];let i=Object.keys(s);i.unshift("appUsersManager","appChatsManager","appNotificationsManager","appMessagesManager","dialogsStorage"),i=Qt(i);for(const o of i){const p=s[o];if(p?.after){const d=p.after();n.push(d)}}return a&&s.apiManager.setUserAuth(a),Promise.all(n).then(()=>(s.rootScope.dispatchEventSingle("managers_ready"),s))}class wl extends Ke{constructor(e){const t=e==="old"?Ai():kt(e);super(t,"session")}}class Xa{constructor(e){this.accountNumber=e,this.state={},this.storage=new wl(e),this.resetStoragesPromise=$()}getState(){return Promise.resolve(this.state)}setByKey(e,t){dp(this.state,e,t);const a=pp(e)[0];return a==="settings"&&Le.dispatchEvent("settings_updated",{key:e,value:t,settings:this.state.settings}),this.pushToState(a,this.state[a])}pushToState(e,t,a=!0,s){return a&&(this.state[e]=t),this.setKeyValueToStorage(e,t,s)}updateLocalState(e,t){return this.state[e]=t,this.storage.set({[e]:t},!0)}setKeyValueToStorage(e,t=this.state[e],a){return re.getInstance().invokeVoid("mirror",{name:"state",key:e,value:t,accountNumber:this.accountNumber}),e==="settings"?(this.onSettingsUpdate?.(t),wt.set({[e]:t},a)):this.storage.set({[e]:t},a)}getSomethingCached({key:e,defaultValue:t,getValue:a,overwrite:s}){return se(this.state??this.getState(),n=>{const i=n[e],o=be(i)&&Object.keys(i).length,p=Date.now();return(!o||i.timestamp<p-864e5||s)&&a().then(c=>{this.pushToState(e,{value:c,timestamp:p})}),o?i.value:t})}}function Or(r){let e,t="";for(let a=r.length,s=0,n=0;n<a;++n)e=n%3,s|=r[n]<<(16>>>e&24),(e===2||a-n===1)&&(t+=String.fromCharCode(Za(s>>>18&63),Za(s>>>12&63),Za(s>>>6&63),Za(s&63)),s=0);return t.replace(/A(?=A$|$)/g,"=")}function Za(r){return r<26?r+65:r<52?r+71:r<62?r-4:r===62?43:r===63?47:65}pe.bytesToBase64=Or;class Al{constructor(){this.log=je("PUSH"),this.name="pushSingleManager",Le.addEventListener("account_logged_in",()=>{this.registerAgain()})}getKeys(){return this.keys??(this.keys=Promise.all([mt.isUsingPasscode(),this.getLoggedInAccounts()]).then(([e,t])=>Promise.all(t.map(({accountNumber:a})=>this.getKeyForAccountNumber(a,e)))))}async getKeyForAccountNumber(e,t){const a=await st.get(e),s=t?Vt(a.push_key):new Uint8Array,n=s.length?await Y.invokeCrypto("sha1",s):new Uint8Array,i=n.slice(-8),o=Or(i).replace(/=+$/,"").slice(0,-1);return{key:s,id:i,idBase64:o}}getKeysIdsBase64(){return this.getKeys().then(e=>e.map(t=>t.idBase64))}registerAgain(){this.keys=void 0,this.registeredDevice&&this.registerDevice(this.registeredDevice,!0)}isRegistered(){return!!this.registeredDevice}async getLoggedInAccounts(){const e=await yt.getManagersByAccount(),t=[];return Object.values(e).forEach((a,s)=>{const n=a.appPeersManager.peerId;n&&t.push({accountNumber:s+1,userId:n.toUserId(),managers:a})}),t}async registerDevice(e,t){if(!t&&this.registeredDevice&&We(this.registeredDevice,e))return!1;const[a,s]=await Promise.all([this.getLoggedInAccounts(),this.getKeys()]),n=a.map(p=>p.userId);this.registeredDevice=e,this.log("register device",this.registeredDevice,e,n);const i={token_type:e.tokenType,token:e.tokenValue,other_uids:n,app_sandbox:!1,secret:void 0,no_muted:!0},o=a.map(async({managers:p},d)=>p.apiManager.invokeApi("account.registerDevice",{...i,secret:s[d].key}));await Promise.all(o),this.registeredDevice===e&&this.log("registered device")}async unregisterDevice(e){if(!this.registeredDevice||!e)return;const t=await this.getLoggedInAccounts(),a=t.map(i=>i.userId);this.registeredDevice=void 0,this.log("unregister device",e);const s={token_type:e.tokenType,token:e.tokenValue,other_uids:a},n=t.map(({managers:i})=>i.apiManager.invokeApi("account.unregisterDevice",s));await Promise.all(n),!this.registeredDevice&&this.log("unregistered device")}async decryptPush(e,t){const a=await this.getKeys().then(_=>_.find(S=>S.idBase64===t));if(!a)throw new Error("no push key found");const{key:s,id:n}=a,i=vn(e);let o=new It(i);const p=o.fetchIntBytes(64,!0,"auth_key_id");if(!Te(p,n))throw new Error("invalid auth key id");const d=o.fetchIntBytes(128,!0,"msg_key"),c=await ga.getAesKeyIv(s,d,!0),f=await Y.invokeCrypto("aes-decrypt",i.slice(o.getOffset()),c.aesKey,c.aesIv),l=await ga.getMsgKey(s,f,!0);if(!Te(d,l))throw new Error("server messageKey mismatch");o=new It(f);const m=o.fetchInt("length"),g=o.fetchStringWithLength(m,"data");return JSON.parse(g)}}const qa=new Al;pe&&(pe.pushSingleManager=qa);const yi=!ce.noServiceWorker;class kl{constructor(){this._isServiceWorkerOnline=yi,this.cryptoWorkersURLs=[],this.cryptoPortsAttached=0,this.cryptoPortPromise=$(),this.cryptoPortPromise.then(()=>{this.cryptoPortPromise=void 0}),this.stateManagersByAccount={1:new Xa(1),2:new Xa(2),3:new Xa(3),4:new Xa(4)};const e=Object.values(this.stateManagersByAccount);e.forEach(t=>{t.onSettingsUpdate=a=>{e.forEach(s=>{t!==s&&s.updateLocalState("settings",a)})}})}start(){const e=re.getInstance();e.addEventListener("manager",({name:t,method:a,args:s,accountNumber:n})=>se(this.getManagersByAccount(),i=>{if(n===void 0){const d=[];for(const c in i){const l=i[+c][t];d.push(l[a](...s))}return d.some(c=>c instanceof Promise)?Promise.all(d):d}return i[n][t][a](...s)})),e.addEventListener("cryptoPort",(t,a,s)=>{const n=s.ports[0];if(this.cryptoPortsAttached>=this.cryptoWorkersURLs.length){n.close();return}++this.cryptoPortsAttached,Y.attachPort(n),this.cryptoPortPromise?.resolve()}),e.addEventListener("createProxyWorkerURLs",({originalUrl:t,blob:a})=>{let s=this.cryptoWorkersURLs.length;s||(this.cryptoWorkersURLs.push(t),++s);const n=le.cryptoWorkers;if(s===n)return this.cryptoWorkersURLs;const i=new Array(n-s).fill(void 0).map(()=>URL.createObjectURL(a));return this.cryptoWorkersURLs.push(...i),this.cryptoWorkersURLs}),Le.addEventListener("account_logged_in",async({accountNumber:t,userId:a})=>{for(let s=1;s<t;s++){const n=s;(await st.get(n)).userId===a&&(await this.getManagersByAccount())[t].apiManager.logOut(n)}})}async createManagers(){const e=[1,2,3,4].map(async a=>{const s=this.stateManagersByAccount[a],n=new sa(a,s.resetStoragesPromise);await Promise.all([n.loadStorages(),this.cryptoPortPromise]);const i=await Il(n,s,a,s.userId);return[a,i]}),t=await Promise.all(e);return this.managersByAccount=Object.fromEntries(t),this.managersByAccount}getManagersByAccount(){return this.managersByAccount??(this.managersByAccount=this.createManagers())}get isServiceWorkerOnline(){return this._isServiceWorkerOnline}set isServiceWorkerOnline(e){this._isServiceWorkerOnline=yi?e:!1}getServiceMessagePort(){return this._isServiceWorkerOnline?this.serviceMessagePort:void 0}onServiceWorkerPort(e){this.serviceMessagePort?(this.serviceMessagePort.detachPort(this._serviceMessagePort),this._serviceMessagePort=void 0):(this.serviceMessagePort=new lo,this.serviceMessagePort.addMultipleEventsListeners({requestFilePart:t=>se(Bt.getManagersByAccount(),a=>{const{docId:s,dcId:n,offset:i,limit:o,accountNumber:p}=t;return a[p].appDocsManager.requestDocPart(s,n,i,o)}),cancelFilePartRequests:({docId:t,accountNumber:a})=>se(Bt.getManagersByAccount(),s=>s[a].appDocsManager.cancelDocPartsRequests(t)),requestRtmpState({call:t,accountNumber:a}){return se(Bt.getManagersByAccount(),s=>s[a].appGroupCallsManager.fetchRtmpState(t))},requestRtmpPart(t){return se(Bt.getManagersByAccount(),a=>{const{request:s,dcId:n,accountNumber:i}=t;return a[i].appGroupCallsManager.fetchRtmpPart(s,n)})},requestDoc(t){return se(Bt.getManagersByAccount(),a=>{const{docId:s,accountNumber:n}=t;return a[n].appDocsManager.getDoc(s)})},downloadDoc(t){return se(Bt.getManagersByAccount(),a=>{const{docId:s,accountNumber:n}=t,i=a[n].appDocsManager,o=i.getDoc(s);return i.downloadDoc(o)})},requestAltDocsByDoc(t){return se(Bt.getManagersByAccount(),a=>{const{docId:s,accountNumber:n}=t,{appDocsManager:i}=a[n];return i.getAltDocsByDocument(s)})},decryptPush(t){return qa.decryptPush(t.p,t.keyIdBase64)}})),(this._serviceMessagePort=e.ports[0])&&this.serviceMessagePort.attachPort(this._serviceMessagePort)}}const Bt=new kl;pe&&(pe.appManagersManager=Bt);var yt=Bt;function El(r,e,t){const a=(s,n)=>{r.attachListenPort(s),n&&r.attachSendPort(n),e?.(s)};r.setOnPortDisconnect(t),typeof SharedWorkerGlobalScope<"u"?de.addEventListener("connect",s=>a(s.source,s.source)):typeof ServiceWorkerGlobalScope<"u"?a(de,null):a(de,de)}function Fl(r,e){return Promise.all([Ke.toggleStorage(r,e),bt.toggleStorage(r,e),Ve.toggleStorage(r,e)]).then(Se,Se)}function Tl(r,e){return r.reduce((t,a)=>t+a,e)}const Ul=({getPort:r,getIsLocked:e,onLock:t})=>sl(a=>{const[s,n]=on(!1),[i,o]=on(0),p=new Map;let d;nl(()=>{const f=!s(),l=i();let m=!1;il(()=>{m=!0,self.clearTimeout(d)}),(async()=>{const g=await wt.get("settings",!1);if(m)return;const _=g?.passcode?.enabled||!1,S=g?.passcode?.autoLockTimeoutMins||null;!S||!_||f||l>0||e()||(d=self.setTimeout(()=>{!s()||e()||t()},S*1e3*60))})()});function c(){const f=Tl(Array.from(p.values()).map(l=>l.size),0);if(Ce){const l=Object.fromEntries(Array.from(p.entries()).map(([,m],g)=>[g,Array.from(m.values())]));r().invokeVoid("log",l)}o(f)}return{dispose:a,toggleUninteruptableActivity:(f,l,m)=>{p.has(f)||p.set(f,new Set),m?p.get(f).add(l):p.get(f).delete(l),c()},removeTab:f=>{p.delete(f)&&c()},setAreAllIdle:n}});function Rl(r){return typeof r=="object"&&r!==null&&"eventName"in r&&typeof r.eventName=="string"}function Bl(r){const e=new BroadcastChannel(r),t=new Map;return e.onmessage=a=>{const s=a.data;if(!Rl(s))return;const{eventName:n,payload:i}=s,o=t.get(n);o&&o.forEach(p=>p(i))},{on:(a,s)=>{const n=a,i=t.get(n);return i?i.push(s):t.set(n,[s]),()=>{const p=t.get(n);if(p){const d=p.indexOf(s);d!==-1&&p.splice(d,1)}}},emit:(a,s)=>{e.postMessage({eventName:a,payload:s})},emitVoid:a=>{e.postMessage({eventName:a})},close:()=>{e.close()}}}const xl="webk-main-broadcast-channel",dn=je("MTPROTO"),gt=new re,Ll=Bl(xl);let la=!0;const Ol={[qa.name]:qa};gt.addMultipleEventsListeners({environment:r=>{Xr(r),ce.multipleTransports&&va.waitForWebSocket()},crypto:({method:r,args:e})=>Y.invokeCrypto(r,...e),state:({state:r,resetStorages:e,pushedKeys:t,newVersion:a,oldVersion:s,userId:n,accountNumber:i,common:o,refetchStorages:p})=>{dn("got state",i,r,t);const d=yt.stateManagersByAccount[i];d.userId=n,d.newVersion=a,d.oldVersion=s,n&&e.has("users")&&e.set("users",[n]),d.resetStoragesPromise.resolve({storages:e,refetch:p,callback:async()=>{const c=[],f=new Map,l=[...t];if(i===1)for(const m in o)f.set(m,o[m]),l.push(m);for(const m in r)f.set(m,r[m]);for(const[m,g]of f){const _=d.pushToState(m,g,!0,!l.includes(m));c.push(_)}await Promise.all(c)}})},toggleStorages:({enabled:r,clearWrite:e})=>Fl(r,e),event:(r,e)=>{dn("will redirect event",r,e),gt.invokeExceptSource("event",r,e)},serviceWorkerOnline:r=>{yt.isServiceWorkerOnline=r},serviceWorkerPort:(r,e,t)=>{yt.onServiceWorkerPort(t),gt.invokeVoid("receivedServiceMessagePort",void 0,e)},createObjectURL:r=>URL.createObjectURL(r),setInterval:r=>{const e=setInterval(()=>{gt.invokeVoid("intervalCallback",e)},r);return e},clearInterval:r=>{clearInterval(r)},terminate:()=>{Cn()},toggleUsingPasscode:async(r,e)=>{mt.resolveDeferred(r.isUsingPasscode),Dt.save(r.encryptionKey),await Promise.all([Ke.toggleEncryptedForAll(r.isUsingPasscode),r.isUsingPasscode?Ve.encryptEncryptable():Ve.decryptEncryptable()]),qa.registerAgain(),await gt.invokeExceptSourceAsync("toggleUsingPasscode",r,e),la=!1},changePasscode:async({toStore:r,encryptionKey:e},t)=>{await wt.set({passcode:r}),Dt.save(e),await Promise.all([Ke.reEncryptEncrypted(),Ve.reEncryptEncryptable()]),await gt.invokeExceptSourceAsync("saveEncryptionKey",e,t)},isLocked:async(r,e)=>await mt.isUsingPasscode()?(la||await gt.invoke("saveEncryptionKey",await Dt.get(),void 0,e),la):!1,toggleLockOthers:(r,e)=>{la=r,gt.invokeExceptSource("toggleLock",r,e)},saveEncryptionKey:async(r,e)=>{Dt.save(r),la=!1,await gt.invokeExceptSourceAsync("saveEncryptionKey",r,e)},localStorageEncryptedProxy:r=>Ve.encryptedStorageProxy(r.type,...r.args),toggleCacheStorage:async(r,e)=>{bt.temporarilyToggle(r),await gt.invokeExceptSourceAsync("toggleCacheStorage",r,e)},resetEncryptableCacheStorages:()=>{bt.resetOpenEncryptableCacheStorages()},forceLogout:async()=>{await _a.forceLogOutAll()},toggleUninteruptableActivity:({activity:r,active:e},t)=>{Dn.toggleUninteruptableActivity(t,r,e)},singleManager:r=>Ol[r.name][r.method](...r.args),disableCacheStoragesByNames:r=>{bt.temporarilyToggleByNames(r,!1)},enableCacheStoragesByNames:r=>{bt.temporarilyToggleByNames(r,!0)},resetOpenCacheStoragesByNames:r=>{bt.resetOpenStoragesByNames(r)}});dn("MTProto start");yt.start();yt.getManagersByAccount();Yt.start();let _i=!0;function Vl(){wt.set({notificationsCount:{}})}const Dn=Ul({getIsLocked:()=>la,onLock:()=>{Ll.emitVoid("reload"),Cn()},getPort:()=>gt});Yt.onTabStateChange=()=>{const r=Yt.getTabs(),e=r.every(t=>!!t.state.idleStartTime);Dn.setAreAllIdle(e),!r.length&&mt.isUsingPasscodeUndeferred()&&Cn()};El(gt,r=>{Yt.addTab(r),_i?(_i=!1,Vl()):se(yt.getManagersByAccount(),e=>{for(const t in e){const a=t;e[a].thumbsStorage.mirrorAll(r),e[a].appPeersManager.mirrorAllPeers(r),e[a].appMessagesManager.mirrorAllMessages(r)}})},r=>{Yt.deleteTab(r),Dn.removeTab(r)});function Cn(){typeof SharedWorkerGlobalScope<"u"&&self.close()}
//# sourceMappingURL=index.worker-BtecLymJ.js.map
