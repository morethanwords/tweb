{"version":3,"file":"putPreloader-43a37b52.js","sources":["../src/components/putPreloader.ts"],"sourcesContent":["/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {MOUNT_CLASS_TO} from '../config/debug';\r\nimport {_tgico} from '../helpers/tgico';\r\n\r\nexport function putPreloader(elem: Element, returnDiv = false): HTMLElement {\r\n  const html = `\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"preloader-circular\" viewBox=\"25 25 50 50\">\r\n  <circle class=\"preloader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\r\n  </svg>`;\r\n\r\n  if(returnDiv) {\r\n    const div = document.createElement('div');\r\n    div.classList.add('preloader');\r\n    div.innerHTML = html;\r\n\r\n    if(elem) {\r\n      elem.appendChild(div);\r\n    }\r\n\r\n    return div;\r\n  }\r\n\r\n  elem.insertAdjacentHTML('beforeend', html);\r\n  return elem.lastElementChild as HTMLElement;\r\n}\r\n\r\nMOUNT_CLASS_TO.putPreloader = putPreloader;\r\n\r\nexport function setButtonLoader(elem: HTMLButtonElement, icon: Icon = 'check') {\r\n  const iconElement = elem.querySelector('.tgico');\r\n  iconElement?.remove();\r\n  elem.disabled = true;\r\n  putPreloader(elem);\r\n\r\n  return () => {\r\n    elem.replaceChildren();\r\n    if(iconElement) elem.append(iconElement);\r\n    elem.removeAttribute('disabled');\r\n  };\r\n}\r\n\r\n/* export function parseMenuButtonsTo(to: {[name: string]: HTMLElement}, elements: HTMLCollection | NodeListOf<HTMLElement>) {\r\n  Array.from(elements).forEach((el) => {\r\n    const match = el.className.match(/(?:^|\\s)menu-(.+?)(?:$|\\s)/);\r\n    if(!match) return;\r\n    to[match[1]] = el as HTMLElement;\r\n  });\r\n} */\r\n"],"names":["putPreloader","elem","returnDiv","html","div","MOUNT_CLASS_TO","setButtonLoader","icon","iconElement"],"mappings":"wCASgB,SAAAA,EAAaC,EAAeC,EAAY,GAAoB,CAC1E,MAAMC,EAAO;AAAA;AAAA;AAAA,UAKb,GAAGD,EAAW,CACN,MAAAE,EAAM,SAAS,cAAc,KAAK,EACpC,OAAAA,EAAA,UAAU,IAAI,WAAW,EAC7BA,EAAI,UAAYD,EAEbF,GACDA,EAAK,YAAYG,CAAG,EAGfA,EAGJ,OAAAH,EAAA,mBAAmB,YAAaE,CAAI,EAClCF,EAAK,gBACd,CAEAI,EAAe,aAAeL,EAEd,SAAAM,EAAgBL,EAAyBM,EAAa,QAAS,CACvE,MAAAC,EAAcP,EAAK,cAAc,QAAQ,EAC/C,OAAAO,GAAa,OAAO,EACpBP,EAAK,SAAW,GAChBD,EAAaC,CAAI,EAEV,IAAM,CACXA,EAAK,gBAAgB,EAClBO,GAAaP,EAAK,OAAOO,CAAW,EACvCP,EAAK,gBAAgB,UAAU,CAAA,CAEnC"}