function xt(...r){const e=r.reduce((s,n)=>s+(n.byteLength||n.length),0),t=new Uint8Array(e);let a=0;return r.forEach(s=>{t.set(s instanceof ArrayBuffer?new Uint8Array(s):s,a),a+=s.byteLength||s.length}),t}Uint8Array.prototype.concat=function(...r){return xt(this,...r)};Uint8Array.prototype.toJSON=function(){return[...this]};Promise.prototype.finally=Promise.prototype.finally||function(r){const e=t=>Promise.resolve(r()).then(t);return this.then(t=>e(()=>t),t=>e(()=>Promise.reject(t)))};function Hs(r){return+r<0}function zs(r){return+r>=0}String.prototype.toUserId=function(){return(+this).toUserId()};String.prototype.toChatId=function(){return(+this).toChatId()};String.prototype.toPeerId=function(r){return(+this).toPeerId(r)};String.prototype.isPeerId=function(){return/^[\d-]/.test(this.toString())};Number.prototype.toUserId=function(){return+this};Number.prototype.toChatId=function(){return Math.abs(this)};Number.prototype.toPeerId=function(r){return r===void 0?+this:r?-Math.abs(this):+this};Number.prototype.isPeerId=function(){return!0};[["isUser",zs],["isAnyChat",Hs]].forEach(r=>{const e=Array.isArray(r)?r[0]:r,t=Array.isArray(r)?r[1]:r;String.prototype[e]=function(){return t.call(null,this.toString())},Number.prototype[e]=function(){return t.call(null,+this)}});const Ee={test:location.search.indexOf("test=1")>0,debug:location.search.indexOf("debug=1")>0,http:!1,ssl:!0,multipleConnections:!0,asServiceWorker:!1,transport:"websocket",noSharedWorker:location.search.indexOf("noSharedWorker=1")>0};Ee.http=location.search.indexOf("http=1")>0;Ee.http=!0;Ee.http&&(Ee.transport="https");const Ae=Ee.debug,zn=typeof window<"u"?window:self,be=zn,Ja=Date.now()%Math.random()*1e8|0,Pe=typeof window<"u"?window:self;function Ye(r,e){const t=r.indexOf(e);return(t===-1?void 0:r.splice(t,1))?.[0]}const ca=typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope,Ea=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&!ca,Wt=Ea||ca,Wn=()=>self.clients.matchAll({includeUncontrolled:!1,type:"window"}),Ws=(r,...e)=>{try{r.postMessage(...e)}catch(t){console.error("[worker] postMessage error:",t,e)}},Ks=(r,...e)=>{Wn().then(t=>{t.length&&t.slice(r?0:-1).forEach(a=>{Ws(a,...e)})})},Js=(...r)=>{Ws(self,...r)},Zs=()=>{};ca&&Ks.bind(null,!1);ca&&Ks.bind(null,!0);function _t(r,e){const t=r.findIndex(e);return t!==-1?r.splice(t,1)[0]:void 0}class Yt{constructor(e){this._constructor(e)}_constructor(e){this.reuseResults=e,this.listeners={},this.listenerResults={}}addEventListener(e,t,a){var s;if(((s=this.listeners)[e]??(s[e]=[])).push({callback:t,options:a}),this.listenerResults.hasOwnProperty(e)&&(t(...this.listenerResults[e]),a?.once)){this.listeners[e].pop();return}}addMultipleEventsListeners(e){for(const t in e)this.addEventListener(t,e[t])}removeEventListener(e,t,a){this.listeners[e]&&_t(this.listeners[e],s=>s.callback===t)}invokeListenerCallback(e,t,...a){let s,n;try{s=t.callback(...a)}catch(i){n=i}if(t.options?.once&&this.removeEventListener(e,t.callback),n)throw n;return s}_dispatchEvent(e,t,...a){this.reuseResults&&(this.listenerResults[e]=a);const s=t&&[],n=this.listeners[e];return n&&n.slice().forEach(o=>{if(n.findIndex(f=>f.callback===o.callback)===-1)return;const d=this.invokeListenerCallback(e,o,...a);s&&s.push(d)}),s}dispatchResultableEvent(e,...t){return this._dispatchEvent(e,!0,...t)}dispatchEvent(e,...t){this._dispatchEvent(e,!1,...t)}cleanup(){this.listeners={},this.listenerResults={}}}const xa={};function Ue(r){return xa[r]??(xa[r]={type:r})}const va=navigator?navigator.userAgent:null;navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i);navigator.userAgent.toLowerCase().indexOf("android");const Kn="safari"in Pe||!!(va&&(/\b(iPad|iPhone|iPod)\b/.test(va)||va.match("Safari")&&!va.match("Chrome"))),Jn=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;(navigator.maxTouchPoints===void 0||navigator.maxTouchPoints>0)&&navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i)!=-1;const Zn=Date.now();function Ia(){return"["+((Date.now()-Zn)/1e3).toFixed(3)+"]"}var De=(r=>(r[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Log=4]="Log",r[r.Debug=8]="Debug",r))(De||{});const Yn=[0,1,2,4,8],$n=Kn||Jn,Qn=!$n,vs={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},Xn=[["debug",8],["info",4],["warn",2],["error",1],["assert",1],["trace",4],["group",4],["groupCollapsed",4],["groupEnd",4]];function Le(r,e=7,t=!1,a=""){let s;!Ae&&!t&&(e=1),Qn?a||(ca?a=vs.fg.yellow:Ea&&(a=vs.fg.cyan)):a="";const n=a;a?a=`%s ${a}%s`:a="%s";const i=function(...o){return e&4&&console.log(a,Ia(),r,...o)};return Xn.forEach(([o,p])=>{i[o]=function(...d){return e&p&&console[o](a,Ia(),r,...d)}}),i.setPrefix=function(o){s=o,r="["+o+"]"},i.setPrefix(r),i.setLevel=function(o){e=Yn.slice(0,o+1).reduce((p,d)=>p|d,0)},i.bindPrefix=function(o,p=e){return Le(`${s}] [${o}`,p,t,n)},i}const ei=!0;class ps extends Yt{constructor(e){super(!1),this.logSuffix=e,this.onMessage=t=>{const a=t.data,s=t.source||t.currentTarget;this.processTaskMap[a.type](a,s,t)},this.processResultTask=t=>{const{taskId:a,result:s,error:n}=t.payload,i=this.awaiting[a];i&&(this.debug&&this.log.debug("done",i.taskType,s,n),"error"in t.payload?i.reject(n):i.resolve(s),delete this.awaiting[a])},this.processAckTask=t=>{const a=t.payload,s=this.awaiting[a.taskId];if(!s)return;const n=s.resolve,i={cached:a.cached,result:a.cached?"result"in a?Promise.resolve(a.result):Promise.reject(a.error):new Promise((o,p)=>{s.resolve=o,s.reject=p})};n(i),a.cached&&delete this.awaiting[a.taskId]},this.processPingTask=(t,a,s)=>{this.pushTask(this.createTask("pong",void 0),s.source)},this.processPongTask=(t,a,s)=>{const n=this.pingResolves.get(a);n&&(this.pingResolves.delete(a),n())},this.processCloseTask=(t,a,s)=>{this.detachPort(a)},this.processLockTask=(t,a,s)=>{const n=t.payload;this.requestedLocks.has(n)||(this.requestedLocks.set(n,a),navigator.locks.request(n,()=>{this.processCloseTask(void 0,a,void 0),this.requestedLocks.delete(n)}))},this.processInvokeTask=async(t,a,s)=>{const n=t.id,i=t.payload;let o,p,d;i.void||(o={taskId:n},p=this.createTask("result",o)),i.withAck&&(d=this.createTask("ack",{taskId:n,cached:!0}));let f;try{const c=this.listeners[i.type];if(!c?.length)throw new Error("no listener");const g=c[0];let h=this.invokeListenerCallback(i.type,g,i.payload,a,s);if(i.void)return;if(f=h instanceof Promise,d){const y=!f;if(d.payload.cached=y,y&&(d.payload.result=h),this.pushTask(d,a),y)return}f&&(h=await h),o.result=h}catch(c){if(this.log.error("worker task error:",c,t),i.void)return;if(d&&d.payload.cached){d.payload.error=c,this.pushTask(d,a);return}o.error=c}this.pushTask(p,a)},this.listenPorts=[],this.sendPorts=[],this.pingResolves=new Map,this.taskId=0,this.awaiting={},this.pending=new Map,this.log=Le("MP"+(e?"-"+e:"")),this.debug=Ae,this.heldLocks=new Map,this.requestedLocks=new Map,this.processTaskMap={result:this.processResultTask,ack:this.processAckTask,invoke:this.processInvokeTask,ping:this.processPingTask,pong:this.processPongTask,close:this.processCloseTask,lock:this.processLockTask}}setOnPortDisconnect(e){this.onPortDisconnect=e}attachPort(e){this.attachListenPort(e),this.attachSendPort(e)}attachListenPort(e){this.listenPorts.push(e),e.addEventListener("message",this.onMessage)}attachSendPort(e){if(this.log.warn("attaching send port"),e.start?.(),this.sendPorts.push(e),typeof window<"u"&&ei)if("locks"in navigator){const t=["lock",Ja,this.logSuffix||"",Math.random()*2147483647|0].join("-");this.log.warn("created lock",t);const a=new Promise(s=>this.heldLocks.set(e,{resolve:s,id:t})).then(()=>this.heldLocks.delete(e));navigator.locks.request(t,()=>(this.resendLockTask(e),a))}else window.addEventListener("beforeunload",()=>{const t=this.createTask("close",void 0);this.postMessage(void 0,t)});this.releasePending()}resendLockTask(e){const t=this.heldLocks.get(e);t&&this.pushTask(this.createTask("lock",t.id),e)}detachPort(e){this.log.warn("disconnecting port"),Ye(this.listenPorts,e),Ye(this.sendPorts,e),e.removeEventListener?.("message",this.onMessage),e.close?.(),this.onPortDisconnect?.(e),this.heldLocks.get(e)?.resolve();const a=Ue("PORT_DISCONNECTED");for(const s in this.awaiting){const n=this.awaiting[s];n.port===e&&(n.reject(a),delete this.awaiting[s])}}postMessage(e,t){(Array.isArray(e)?e:e?[e]:this.sendPorts).forEach(s=>{s.postMessage(t,t.transfer)})}releasePending(){this.releasingPending||(this.releasingPending=!0,this.debug&&this.log.debug("releasing tasks, length:",this.pending.size),this.pending.forEach((e,t)=>{const a=e,s=t?[t]:this.sendPorts;s.length&&(a.forEach(n=>{try{this.postMessage(s,n)}catch(i){this.log.error("postMessage error:",i,n,s)}}),this.pending.delete(t))}),this.debug&&this.log.debug("released tasks"),this.releasingPending=!1)}createTask(e,t,a){return{type:e,payload:t,id:this.taskId++,transfer:a}}createInvokeTask(e,t,a,s,n){return this.createTask("invoke",{type:e,payload:t,withAck:a,void:s},n)}pushTask(e,t){let a=this.pending.get(t);a||this.pending.set(t,a=[]),a.push(e),this.releasePending()}invokeVoid(e,t,a,s){const n=this.createInvokeTask(e,t,void 0,!0,s);this.pushTask(n,a)}invoke(e,t,a,s,n){this.debug&&this.log.debug("start",e,t);let i;const o=new Promise((p,d)=>{i=this.createInvokeTask(e,t,a,void 0,n),this.awaiting[i.id]={resolve:p,reject:d,taskType:e,port:s},this.pushTask(i,s)});if(Wt){o.finally(()=>{clearInterval(p)});const p=Pe.setInterval(()=>{this.log.error("task still has no result",i,s)},6e4)}return o}invokeExceptSource(e,t,a){const s=this.sendPorts.slice();Ye(s,a),s.forEach(n=>{this.invokeVoid(e,t,n)})}}class ti extends ps{constructor(){super("CRYPTO"),this.lastIndex=-1}invokeCryptoNew({method:e,args:t,transfer:a}){const s={method:e,args:t},n=this.listeners.invoke;if(n?.length){let o=n[0].callback(s);return!Wt&&!(o instanceof Promise)&&(o=Promise.resolve(o)),o}const i=e==="aes-encrypt"||e==="aes-decrypt"?this.lastIndex=(this.lastIndex+1)%this.sendPorts.length:0;return this.invoke("invoke",s,void 0,this.sendPorts[i],a)}invokeCrypto(e,...t){return this.invokeCryptoNew({method:e,args:t})}}const ge=new ti;be&&(be.cryptoMessagePort=ge);let Ys;function dt(){return Ys}function ai(r){return Ys=r}const ct=0,$s=1271266957,si=777,ni=777e3,Qs=2147483647,bs=20*1024*1024,sa="",ii="default_static",oa=4294967296,Xs=oa+1,ri=new Set(["web","k","z","a"]),pt=0,vt=1,Be=new Set([pt,vt]),La=Math.max(...Array.from(Be))+1;class mt extends ps{constructor(){super("MTPROTO"),mt.INSTANCE=this,be&&(be.mtprotoMessagePort=this)}static getInstance(){return this.INSTANCE}}class en extends Yt{constructor(){super(),this.myId=ct,this.connectionStatus={},this.premium=!1,this.addEventListener("user_auth",({id:e})=>{this.myId=e.toPeerId()}),this.addEventListener("premium_toggle_private",({isNew:e,isPremium:t})=>{this.premium=t,this.dispatchEventSingle("premium_toggle",t)}),this.addEventListener("connection_status_change",e=>{this.connectionStatus[e.name]=e}),this.dispatchEvent=(e,...t)=>{super.dispatchEvent(e,...t),mt.getInstance().invokeVoid("event",{name:e,args:t})},Wt||this.addEventListener("settings_updated",({settings:e})=>{this.settings=e})}getConnectionStatus(){return this.connectionStatus}getPremium(){return this.premium}dispatchEventSingle(...e){super.dispatchEvent(...e)}}const kt=new en;be.rootScope=kt;function xe(){}function Me(){const r={isFulfilled:!1,isRejected:!1,notify:()=>{},notifyAll:(...t)=>{r.lastNotify=t,r.listeners.forEach(a=>a(...t))},listeners:[],addNotifyListener:t=>{r.lastNotify&&t(...r.lastNotify),r.listeners.push(t)}},e=new Promise((t,a)=>{r.resolve=s=>{e.isFulfilled||e.isRejected||(e.isFulfilled=!0,t(s))},r.reject=(...s)=>{e.isRejected||e.isFulfilled||(e.isRejected=!0,a(...s))}});return e.catch(xe).finally(()=>{e.notify=e.notifyAll=e.lastNotify=null,e.listeners.length=0,e.cancel&&(e.cancel=xe)}),Object.assign(e,r),e}function Ht(r,e,t=!0){let a=null,s,n;return(...i)=>{s=!0,n=i,a||(t&&(s=!1,r(...n)),a=setInterval(()=>{if(!s){clearInterval(a),a=null;return}s=!1,r(...n)},e))}}function Za(r,e){if(e)for(const t in e)e[t]!==void 0&&(r[t]=e[t]);return r}const Ya=class{constructor(r){Za(this,r),Ee.test&&(this.name+="_test"),this.storageIsAvailable=!0,this.log=Le(["IDB",r.name].join("-")),this.log("constructor"),this.openDatabase(!0),Ya.INSTANCES.push(this)}isAvailable(){return this.storageIsAvailable}openDatabase(r=!1){if(this.openDbPromise&&!r)return this.openDbPromise;const e=(n,i)=>{const o=Array.from(n.indexNames);for(const p of o)n.deleteIndex(p);if(i.indexes?.length)for(const p of i.indexes)n.indexNames.contains(p.indexName)||n.createIndex(p.indexName,p.keyPath,p.objectParameters)},t=(n,i)=>{const o=n.createObjectStore(i.name);e(o,i)};try{var a=indexedDB.open(this.name,this.version);if(!a)return Promise.reject()}catch(n){return this.log.error("error opening db",n.message),this.storageIsAvailable=!1,Promise.reject(n)}let s=!1;return setTimeout(()=>{s||a.onerror(Ue("IDB_CREATE_TIMEOUT"))},3e3),this.openDbPromise=new Promise((n,i)=>{a.onsuccess=o=>{s=!0;const p=a.result;let d=!1;this.log("Opened"),p.onerror=f=>{this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",f),i(f)},p.onclose=f=>{this.log.error("closed:",f),!d&&this.openDatabase()},p.onabort=f=>{this.log.error("abort:",f);const c=f.target;this.openDatabase(d=!0),c.onerror&&c.onerror(f),p.close()},p.onversionchange=f=>{this.log.error("onversionchange, lol?")},n(this.db=p)},a.onerror=o=>{s=!0,this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",o),i(o)},a.onupgradeneeded=o=>{s=!0,this.log.warn("performing idb upgrade from",o.oldVersion,"to",o.newVersion);const p=o.target,d=p.result;this.stores.forEach(f=>{if(!d.objectStoreNames.contains(f.name))t(d,f);else{const g=p.transaction.objectStore(f.name);e(g,f)}})}})}static create(r){return this.INSTANCES.find(e=>e.name===r.name)??new Ya(r)}static closeDatabases(r){this.INSTANCES.forEach(e=>{if(r&&r===e)return;const t=e.db;t&&(t.onclose=()=>{},t.close())})}};let ds=Ya;ds.INSTANCES=[];class oi{constructor(e,t){this.storeName=t,this.log=Le(["IDB",e.name,t].join("-")),this.idb=ds.create(e)}delete(e,t){const a=Array.isArray(e);return a||(e=[].concat(e)),this.getObjectStore("readwrite",s=>{const n=e.map(i=>s.delete(i));return a?n:n[0]},"",t)}clear(e){return this.getObjectStore("readwrite",t=>t.clear(),"",e)}save(e,t,a){const s=Array.isArray(e);return s||(e=[].concat(e),t=[].concat(t)),this.getObjectStore("readwrite",n=>{const i=e.map((o,p)=>n.put(t[p],o));return s?i:i[0]},"",a)}get(e,t){const a=Array.isArray(e);if(a){if(!e.length)return Promise.resolve([])}else{if(!e)return;e=[].concat(e)}return this.getObjectStore("readonly",s=>{const n=e.map(i=>s.get(i));return a?n:n[0]},"",t)}getObjectStore(e,t,a,s=this.storeName){let n;return a&&(n=performance.now(),this.log(a+": start")),this.idb.openDatabase().then(i=>new Promise((o,p)=>{const d=i.transaction([s],e),f=()=>{clearTimeout(h),p(d.error)},c=()=>{clearTimeout(h),a&&this.log(a+": end",performance.now()-n);const w=D.map(R=>R.result);o(P?w:w[0])};d.onerror=f;const g=e==="readwrite";g&&(d.oncomplete=()=>c());const h=setTimeout(()=>{this.log.error("transaction not finished",d,a)},1e4),y=t(d.objectStore(s)),P=Array.isArray(y),D=P?y:[].concat(y);if(g)return;const v=D.length;let k=v;const L=()=>{d.error||--k||c()};for(let w=0;w<v;++w){const R=D[w];R.onerror=f,R.onsuccess=L}}))}getAll(e){return this.getObjectStore("readonly",t=>t.getAll(),"",e)}}function Ss(){}const Oa=16,Ca=class{constructor(r,e){this.db=r,this.storeName=e,this.cache={},this.getPromises=new Map,this.keysToSet=new Set,this.saveDeferred=Me(),this.keysToDelete=new Set,this.deleteDeferred=Me(),this.storage=new oi(r,e),Ca.STORAGES.length?this.useStorage=Ca.STORAGES[0].useStorage:this.useStorage=!0,this.savingFreezed=!1,Ca.STORAGES.push(this),this.saveThrottled=Ht(async()=>{const t=this.saveDeferred;this.saveDeferred=Me();const a=this.keysToSet;if(a.size){const s=Array.from(a.values());a.clear();const n=s.map(i=>this.cache[i]);try{await this.storage.save(s,n)}catch(i){console.error("[AS]: set error:",i,s,n)}}t.resolve(),a.size&&this.saveThrottled()},Oa,!1),this.deleteThrottled=Ht(async()=>{const t=this.deleteDeferred;this.deleteDeferred=Me();const a=this.keysToDelete;if(a.size){const s=Array.from(a.values());a.clear();try{await this.storage.delete(s)}catch(n){console.error("[AS]: delete error:",n,s)}}t.resolve(),a.size&&this.deleteThrottled()},Oa,!1),this.getThrottled=Ht(async()=>{const t=Array.from(this.getPromises.keys());this.storage.get(t).then(a=>{for(let s=0,n=t.length;s<n;++s){const i=t[s],o=this.getPromises.get(i);o&&(o.resolve(this.cache[i]=a[s]),this.getPromises.delete(i))}},a=>{new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE"]).has(a.type)||(this.useStorage=!1,console.error("[AS]: get error:",a,t,e));for(let n=0,i=t.length;n<i;++n){const o=t[n],p=this.getPromises.get(o);p&&(p.resolve(void 0),this.getPromises.delete(o))}}).finally(()=>{this.getPromises.size&&this.getThrottled()})},Oa,!1)}isAvailable(){return this.useStorage}getCache(){return this.cache}getFromCache(r){return this.cache[r]}setToCache(r,e){return this.cache[r]=e}async get(r,e=!0){if(this.cache.hasOwnProperty(r)&&e)return this.getFromCache(r);if(this.useStorage){const t=this.getPromises.get(r);if(t)return t;const a=Me();return this.getPromises.set(r,a),this.getThrottled(),a}}getAll(){return this.storage.getAll().catch(()=>[])}set(r,e=!1){const t=this.useStorage&&!e&&!this.savingFreezed;for(const a in r)if(r.hasOwnProperty(a)){const s=r[a];this.setToCache(a,s),t&&(this.keysToSet.add(a),this.keysToDelete.delete(a),this.saveThrottled())}return t?this.saveDeferred:Promise.resolve()}delete(r,e=!1){return r=""+r,e||delete this.cache[r],this.useStorage&&(this.keysToSet.delete(r),this.keysToDelete.add(r),this.deleteThrottled()),this.useStorage?this.deleteDeferred:Promise.resolve()}clear(r=!1){if(!r)for(const e in this.cache)delete this.cache[e];return this.storage.clear().catch(Ss)}static toggleStorage(r,e){return Promise.all(this.STORAGES.map(t=>{if(t.useStorage=r,!(!Wt||!e))return r?t.set(t.cache):(t.keysToSet.clear(),t.keysToDelete.clear(),t.getPromises.forEach(a=>a.resolve(void 0)),t.getPromises.clear(),t.clear(!0))})).catch(Ss)}static freezeSaving(r,e){this.STORAGES.forEach(t=>t.savingFreezed=!0);try{r()}catch(t){console.error("freezeSaving callback error:",t)}this.STORAGES.forEach(t=>t.savingFreezed=!1)}};let qt=Ca;qt.STORAGES=[];be&&(be.AppStorage=qt);const fs={name:"tweb",version:7,stores:[{name:"session"},{name:"stickerSets"},{name:"users"},{name:"chats"},{name:"dialogs"},{name:"messages"}]};class pi extends qt{constructor(){super(fs,"session")}}const Ut=new pi;be.stateStorage=Ut;function di(r,e){const t=e.split(".");let a=r;return t.forEach(s=>{s&&(a=a[s])}),a}function fi(r,e,t){const a=e.split(".");di(r,a.slice(0,-1).join("."))[a.pop()]=t}class ci{constructor(){this.state={},this.storage=Ut}getState(){return Promise.resolve(this.state)}setByKey(e,t){fi(this.state,e,t);const a=e.split(".")[0];return a==="settings"&&kt.dispatchEvent("settings_updated",{key:e,value:t,settings:this.state.settings}),this.pushToState(a,this.state[a])}pushToState(e,t,a=!0,s){return a&&(this.state[e]=t),this.setKeyValueToStorage(e,t,s)}setKeyValueToStorage(e,t=this.state[e],a){return mt.getInstance().invokeVoid("mirror",{name:"state",key:e,value:t}),this.storage.set({[e]:t},a)}}const Gt=new ci,Cs=["web.telegram.org","webk.telegram.org"],Ds=Math.min(4,navigator.hardwareConcurrency??4),Te={id:+"1025907",hash:"452b0359b988148995f22ff0f4229750",version:"1.9.0",versionFull:"1.9.0 (335)",build:+"335",langPackVersion:"2.1.9",langPack:"webk",langPackCode:"en",domains:Cs,baseDcId:2,isMainDomain:Cs.includes(location.hostname),suffix:"K",threads:Ds,cryptoWorkers:Ds};Te.isMainDomain&&(Te.id=2496,Te.hash="8da85b0d5bfe62527e5b244c209159c3");function ft(r){return new Promise(e=>{setTimeout(e,r)})}class wt{constructor(e,t,a){this.dcId=e,this.url=t,this.pending=[],this.debug=Ee.debug&&!1;let s=De.Error|De.Log;this.debug&&(s|=De.Debug),this.log=Le(`HTTP-${e}`+a,s),this.log("constructor"),this.connected=!1}_send(e,t){const a=e.length;return this.debug&&this.log.debug("-> body length to send:",a),fetch(this.url,{method:"POST",body:e,mode:t}).then(s=>{if(s.status!==200&&!t)throw s.arrayBuffer().then(n=>{this.log.error("not 200",new TextDecoder("utf-8").decode(new Uint8Array(n)))}),s;return this.setConnected(!0),s.arrayBuffer().then(n=>new Uint8Array(n))},s=>{throw this.setConnected(!1),s})}setConnected(e){this.connected===e||this.destroyed||(this.connected=e,Kt.setTransportValue("https",e))}destroy(){this.setConnected(!1),this.destroyed=!0,this.pending.forEach(e=>e.reject()),this.pending.length=0}send(e){if(this.networker)return this._send(e);{const t=new Promise((a,s)=>{this.pending.push({resolve:a,reject:s,body:e})});return this.releasePending(),t}}async releasePending(){if(!this.releasing){this.releasing=!0;for(let e=0;e<this.pending.length;++e){const t=this.pending[e],{body:a,resolve:s}=t;try{const n=await this._send(a);s(n),this.pending.splice(e,1)}catch(n){this.log.error("Send plain request error:",n),await ft(5e3)}--e}this.releasing=!1}}}class li extends Yt{constructor(e,t,a){super(),this.dcId=e,this.url=t,this.debug=Ee.debug&&!1,this.handleOpen=()=>{this.log("opened"),this.debug&&this.log.debug("sending init packet"),this.dispatchEvent("open")},this.handleError=n=>{this.log.error("handleError",n),this.close()},this.handleClose=n=>{this.log("closed",n),this.removeListeners(),this.dispatchEvent("close")},this.handleMessage=n=>{this.debug&&this.log.debug("<-","handleMessage",n.data.byteLength),this.dispatchEvent("message",n.data)},this.send=n=>{this.debug&&this.log.debug("-> body length to send:",n.length),this.ws.send(n)};let s=De.Error|De.Log;return this.debug&&(s|=De.Debug),this.log=Le(`WS-${e}`+a,s),this.log("constructor"),this.connect(),this}removeListeners(){this.ws&&(this.ws.removeEventListener("open",this.handleOpen),this.ws.removeEventListener("close",this.handleClose),this.ws.removeEventListener("error",this.handleError),this.ws.removeEventListener("message",this.handleMessage),this.ws=void 0)}connect(){this.ws=new WebSocket(this.url,"binary"),this.ws.binaryType="arraybuffer",this.ws.addEventListener("open",this.handleOpen),this.ws.addEventListener("close",this.handleClose),this.ws.addEventListener("error",this.handleError),this.ws.addEventListener("message",this.handleMessage)}close(){if(this.ws){this.log("close execution");try{this.ws.close()}catch{}this.handleClose()}}}function St(r){if(crypto&&"getRandomValues"in crypto)crypto.getRandomValues(r);else throw new Error("NO_SECURE_RANDOM");return r}class gi{constructor(){this._process=(e,t)=>ge.invokeCryptoNew({method:"aes-ctr-process",args:[{id:this.id,data:e,operation:t}],transfer:[e.buffer]})}async init(e){this.idPromise!==void 0&&this.release();const t=new Uint8Array(64);for(St(t);;){const f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],c=t[7]<<24|t[6]<<16|t[5]<<8|t[4];if(t[0]!==239&&f!==1145128264&&f!==1414745936&&f!==542393671&&f!==1230262351&&f!==4008636142&&f!==3722304989&&c!==0)break;St(t)}const a=t.slice().reverse(),s=t.slice(8,40),n=t.slice(40,56),i=a.slice(8,40),o=a.slice(40,56),p=this.idPromise=ge.invokeCrypto("aes-ctr-prepare",{encKey:s,encIv:n,decKey:i,decIv:o});this.process=async(f,c)=>(await p,this._process(f,c)),this.id=await p,this.process=this._process,t.set(e.obfuscateTag,56);const d=await this.encode(t.slice());return t.set(d.slice(56,64),56),t}encode(e){return this.process(e,"encrypt")}decode(e){return this.process(e,"decrypt")}async release(){const e=this.idPromise;if(e===void 0)return;this.id=void 0,this.idPromise=void 0;const t=await e;ge.invokeCrypto("aes-ctr-destroy",t)}destroy(){this.release()}}class mi{constructor(){this.tag=239,this.obfuscateTag=new Uint8Array([this.tag,this.tag,this.tag,this.tag])}encodePacket(e){const t=e.byteLength>>2;let a;return t<127?a=new Uint8Array([t]):a=new Uint8Array([127,t&255,t>>8&255,t>>16&255]),a.concat(e)}readPacket(e){let t=e[0];return t>=127?(t=e[1]|e[2]<<8|e[3]<<16,e.slice(4,t<<2+1)):e.slice(1,t<<2+1)}}var hi=new mi,it=(r=>(r[r.Connected=0]="Connected",r[r.Connecting=1]="Connecting",r[r.Closed=2]="Closed",r[r.TimedOut=3]="TimedOut",r))(it||{});function Ce(r){const e=r.length,t=new Array(e);for(let a=0;a<e;++a)t[a]=(r[a]<16?"0":"")+(r[a]||0).toString(16);return t.join("")}class ui{constructor(e,t,a,s,n){this.Connection=e,this.dcId=t,this.url=a,this.logSuffix=s,this.retryTimeout=n,this.codec=hi,this.obfuscation=new gi,this.pending=[],this.debug=Ee.debug&&!1,this.connected=!1,this.autoReconnect=!0,this.onOpen=async()=>{this.connected=!0,Kt.setTransportOpened("websocket");const o=await this.obfuscation.init(this.codec);this.connected&&(this.connection.send(o),this.networker&&(this.pending.length=0,this.networker.setConnectionStatus(it.Connected),this.networker.cleanupSent(),this.networker.resend()),setTimeout(()=>{this.releasePending()},0))},this.onMessage=async o=>{let p=await this.obfuscation.decode(new Uint8Array(o));if(p=this.codec.readPacket(p),this.networker){this.debug&&this.log.debug("redirecting to networker",p.length),this.networker.parseResponse(p).then(f=>{this.debug&&this.log.debug("redirecting to networker response:",f);try{this.networker.processMessage(f.response,f.messageId,f.sessionId)}catch(c){this.log.error("handleMessage networker processMessage error",c)}}).catch(f=>{this.log.error("handleMessage networker parseResponse error",f)});return}const d=this.pending.shift();if(!d){this.debug&&this.log.debug("no pending for res:",Ce(p));return}d.resolve(p)},this.onClose=()=>{this.clear();let o,p;if(this.autoReconnect){const d=Date.now(),f=d-this.lastCloseTime;o=!isNaN(f)&&f<this.retryTimeout?this.retryTimeout-f:0,p=d+o}this.networker&&(this.networker.setConnectionStatus(it.Closed,p),this.pending.length=0),this.autoReconnect?(this.log("will try to reconnect after timeout:",o/1e3),this.reconnectTimeout=Pe.setTimeout(this.reconnect,o)):this.log("reconnect isn't needed")},this.reconnect=()=>{if(this.reconnectTimeout!==void 0&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),!this.connection){if(this.log("trying to reconnect..."),this.lastCloseTime=Date.now(),this.networker)this.networker.setConnectionStatus(it.Connecting);else for(const o of this.pending)o.bodySent&&(o.bodySent=!1);this.connect()}};let i=De.Error|De.Log;this.debug&&(i|=De.Debug),this.log=Le(`TCP-${t}`+s,i),this.log("constructor"),this.connect()}clear(){this.connected&&Kt.setTransportClosed("websocket"),this.connected=!1,this.connection&&(this.connection.removeEventListener("open",this.onOpen),this.connection.removeEventListener("close",this.onClose),this.connection.removeEventListener("message",this.onMessage),this.connection=void 0)}forceReconnect(){this.close(),this.reconnect()}destroy(){this.setAutoReconnect(!1),this.close(),this.obfuscation&&this.obfuscation.destroy(),this.pending.forEach(e=>{e.reject&&e.reject()}),this.pending.length=0}close(){const e=this.connection;if(e){const t=this.connected;this.clear(),t&&(e.addEventListener("message",this.onMessage),e.addEventListener("close",()=>{e.removeEventListener("message",this.onMessage)},{once:!0}),e.close())}}setAutoReconnect(e){this.autoReconnect=e,e?!this.connection&&this.reconnectTimeout===void 0&&this.reconnect():this.reconnectTimeout!==void 0&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0)}connect(){this.connection&&this.close(),this.connection=new this.Connection(this.dcId,this.url,this.logSuffix),this.connection.addEventListener("open",this.onOpen),this.connection.addEventListener("close",this.onClose),this.connection.addEventListener("message",this.onMessage)}changeUrl(e){this.url!==e&&(this.url=e,this.forceReconnect())}encodeBody(e){const t=this.codec.encodePacket(e);return this.obfuscation.encode(t)}send(e){this.debug&&this.log.debug("-> body length to pending:",e.length);const t=void 0;if(this.networker)this.pending.push({body:e,encoded:t}),this.releasePending();else{const a=new Promise((s,n)=>{this.pending.push({resolve:s,reject:n,body:e,encoded:t})});return this.releasePending(),a}}async releasePending(){if(!this.connected||this.releasingPending)return;this.releasingPending=!0;let e=this.pending.length,t=!1;for(let a=0;a<e;++a){const s=this.pending[a];if(!s)break;const{body:n,bodySent:i}=s;if(n&&!i){this.debug&&this.log.debug("-> body length to send:",n.length);const o=s.encoded??(s.encoded=await this.encodeBody(n));if(!this.connected)break;this.connection.send(o),s.resolve?s.bodySent=!0:(this.pending.splice(a--,1),e--),t=!0}}this.releasingPending=void 0,this.pending.length&&t&&this.releasePending()}}const Is=Ee.test?"_test":"",yi="_premium";function tn(r){return r==="client"?"":"-1"}function an(r,e,t){const a=tn(e),s=e!=="client"?"apiws"+Is+(t?yi:""):"apiws"+Is;return`wss://${Te.suffix.toLowerCase()}ws${r}${a}.web.telegram.org/${s}`}class na{constructor(){this.sslSubdomains=["pluto","venus","aurora","vesta","flora"],this.dcOptions=Ee.test?[{id:1,host:"149.154.175.10",port:80},{id:2,host:"149.154.167.40",port:80},{id:3,host:"149.154.175.117",port:80}]:[{id:1,host:"149.154.175.50",port:80},{id:2,host:"149.154.167.50",port:80},{id:3,host:"149.154.175.100",port:80},{id:4,host:"149.154.167.91",port:80},{id:5,host:"149.154.171.5",port:80}],this.chosenServers={},this.transportSocket=(e,t,a)=>{const s=an(e,t,a),n=t==="upload"?"-U":t==="download"?"-D":"",i=1e4;let o;return o=li,new ui(o,e,s,n,i)},this.transportHTTP=(e,t,a)=>{let s;{const i=tn(t),o=this.sslSubdomains[e-1]+i,p=Ee.test?"apiw_test1":"apiw1";s="https://"+o+".web.telegram.org/"+p}const n=t==="upload"?"-U":t==="download"?"-D":"";return new wt(e,s,n)}}chooseServer(e,t="client",a=Ee.transport,s=!0,n){this.chosenServers.hasOwnProperty(a)||(this.chosenServers[a]={client:{},download:{},upload:{}});const i=this.chosenServers[a][t];e in i||(i[e]=[]);const o=i[e];if(!o.length||!s){let p;return p=(a==="websocket"?this.transportSocket:this.transportHTTP)(e,t,n),p?(s&&o.push(p),p):(console.error("No chosenServer!",e),null)}return o[0]}static removeTransport(e,t){for(const a in e)for(const s in e[a])for(const n in e[a][s]){const i=e[a][s][n];Ye(i,t)}}}class _i extends Yt{constructor(){super(!0),this.opened=new Map,this.addEventListener("change",e=>{e.get("websocket")||this.waitForWebSocket()})}async pingTransports(){const e=this.dcConfigurator??(this.dcConfigurator=new na),t=2e3,a=this.transports={https:e.chooseServer(Te.baseDcId,"client","https",!1),websocket:e.chooseServer(Te.baseDcId,"client","websocket",!1)},s=Me();this.transports.https._send(new Uint8Array,"no-cors").then(()=>s.resolve(!0),()=>s.resolve(!1)),setTimeout(()=>s.resolve(!1),t);const n=Me(),i=a.websocket;i.setAutoReconnect(!1),i.connection.addEventListener("close",()=>n.resolve(!1),{once:!0}),i.connection.addEventListener("open",()=>n.resolve(!0),{once:!0}),setTimeout(()=>{n.isFulfilled||n.isRejected||(i.connection&&i.connection.close(),n.resolve(!1))},t);const[o,p]=await Promise.all([s,n]);for(const f in a)a[f].destroy();return{https:o||this.opened.get("https")>0,websocket:p||this.opened.get("websocket")>0}}async waitForWebSocket(){if(!this.pinging){for(this.pinging=!0;;){const{https:e,websocket:t}=await this.pingTransports();if((e||t)&&this.dispatchEvent("transport",t||!e?"websocket":"https"),t)break;await ft(1e4)}this.pinging=!1}}setTransportValue(e,t){let a=this.opened.get(e)||0;a+=t?1:-1,this.opened.set(e,a),this.dispatchEvent("change",this.opened)}setTransportOpened(e){return this.setTransportValue(e,!0)}setTransportClosed(e){return this.setTransportValue(e,!1)}}const Mi=new _i;var Kt=Mi;const sn=Me();class Pi extends ps{constructor(){super("SERVICE"),be&&(be.serviceMessagePort=this)}}function gt(r,e){return r instanceof Promise?r.then(e):e(r)}class ce{setManagers(e){Object.assign(this,e)}}function vi(){const r=["users","chats","dialogs"],e={};for(const t of r)e[t]=new qt(fs,t);return e}function bi(r,e,t){const a=performance.now();return(t||console).warn(Ia(),"start",e),r.then(()=>{(t||console).warn(Ia(),"end",e,performance.now()-a)}),r}function Si(r){return(...e)=>bi(...e,r)}async function Ci(r){const e=Si(Le("STORAGES-LOADER")),t=Object.keys(r),a=t.map(p=>{const d=r[p].getAll();return e(d,"storage "+p)}),s={},n=await Promise.all(a);for(let p=0,d=t.length;p<d;++p)s[t[p]]=n[p];n.splice(0,t.length);const{storages:i,callback:o}=await sn;if(i.size){const p=[];for(const d of i)s[d].length=0,p.push(r[d].clear());i.clear(),await Promise.all(p).catch(xe)}return o(),s}let Di;function Ii(r){return Di??(Di=Ci(r))}class wi extends ce{constructor(){super(),this.log=Le("STORAGES"),this.storages=vi()}loadStorages(){return Ii(this.storages)}async loadStorage(e){return this.loadStorages().then(t=>({storage:this.storages[e],results:t[e]}))}}class ki extends ce{getState(){return this.apiManager.invokeApi("account.getPassword").then(e=>e)}updateSettings(e={}){return this.getState().then(t=>{let a,s;const n={password:null,new_settings:{_:"account.passwordInputSettings",hint:e.hint,email:e.email}};e.currentPassword?a=this.cryptoWorker.invokeCrypto("computeSRP",e.currentPassword,t,!1):a=Promise.resolve({_:"inputCheckPasswordEmpty"});const i=t.new_algo,o=new Uint8Array(i.salt1.length+32);return St(o),o.set(i.salt1,0),i.salt1=o,e.newPassword?s=this.cryptoWorker.invokeCrypto("computeSRP",e.newPassword,t,!0):s=Promise.resolve(new Uint8Array),Promise.all([a,s]).then(p=>(n.password=p[0],n.new_settings.new_algo=i,n.new_settings.new_password_hash=p[1],this.apiManager.invokeApi("account.updatePasswordSettings",n)))})}getInputCheckPassword(e,t){return this.cryptoWorker.invokeCrypto("computeSRP",e,t,!1)}check(e,t,a={}){return this.getInputCheckPassword(e,t).then(s=>this.apiManager.invokeApi("auth.checkPassword",{password:s},a).then(n=>(n._==="auth.authorization"&&this.apiManager.setUser(n.user),n)))}confirmPasswordEmail(e){return this.apiManager.invokeApi("account.confirmPasswordEmail",{code:e})}resendPasswordEmail(){return this.apiManager.invokeApi("account.resendPasswordEmail")}cancelPasswordEmail(){return this.apiManager.invokeApi("account.cancelPasswordEmail")}}function Ct(r,e){const t=Object.keys,a=typeof r;return r&&e&&a==="object"&&a===typeof e?t(r).length===t(e).length&&t(r).every(n=>Ct(r[n],e[n])):r===e}class Ai extends ce{constructor(){super(...arguments),this.contexts=new Map,this.links={},this.log=Le("RD",void 0,!0)}saveContext(e,t,a){[a,e]=this.getContexts(e),a||(a=new Set,this.contexts.set(e,a)),this.links[Ce(e)]=e;for(const s of a)if(Ct(s,t))return;a.add(t)}getReferenceByLink(e){return this.links[Ce(e)]}getContexts(e){return[this.contexts.get(e)||(e=this.getReferenceByLink(e)||e,this.contexts.get(e)),e]}getContext(e){const t=this.getContexts(e);return t[0]?[t[0].values().next().value,t[1]]:void 0}deleteContext(e,t,a){if([a,e]=this.getContexts(e),a){for(const s of a)if(Ct(s,t))return a.delete(s),a.size||(this.contexts.delete(e),delete this.links[Ce(e)]),!0}return!1}refreshReference(e,t){if(this.log("refreshReference: start",e.slice(),t),!t){const n=this.getContext(e);if(!n)return this.log("refreshReference: got no context for reference:",e.slice()),Promise.reject("NO_CONTEXT");[t,e]=n}let a;switch(t?.type){case"message":{a=this.appMessagesManager.reloadMessages(t.peerId,t.messageId,!0);break}case"emojiesSounds":{a=this.refreshEmojiesSoundsPromise||this.appStickersManager.getAnimatedEmojiSounds(!0).then(()=>{this.refreshEmojiesSoundsPromise=void 0});break}case"userFull":{a=Promise.resolve(this.appProfileManager.getProfile(t.userId,!0));break}case"customEmoji":{a=this.appEmojiManager.getCustomEmojiDocuments([t.docId]);break}case"attachMenuBotIcon":{a=this.appAttachMenuBotsManager.getAttachMenuBot(t.botId,!0);break}case"wallPaper":{a=this.appThemesManager.getWallPaperById(t.wallPaperId);break}default:return this.log.warn("refreshReference: not implemented context",t),Promise.reject()}const s=Ce(e);return this.log("refreshReference: refreshing reference:",s),a.then(()=>{const n=Ce(e);if(this.log("refreshReference: refreshed, reference before:",s,"after:",n),s!==n)return e;this.deleteContext(e,t);const i=this.getContext(e);if(i)return this.refreshReference(e,i[0]);throw this.log.error("refreshReference: no new context, reference before:",s,"after:",n,t),Ue("NO_NEW_CONTEXT")})}}function ve(r){const e=Date.now();return r?e/1e3|0:e}const Fi={Á:"A",Ă:"A",Ắ:"A",Ặ:"A",Ằ:"A",Ẳ:"A",Ẵ:"A",Ǎ:"A",Â:"A",Ấ:"A",Ậ:"A",Ầ:"A",Ẩ:"A",Ẫ:"A",Ä:"A",Ǟ:"A",Ȧ:"A",Ǡ:"A",Ạ:"A",Ȁ:"A",À:"A",Ả:"A",Ȃ:"A",Ā:"A",Ą:"A",Å:"A",Ǻ:"A",Ḁ:"A","Ⱥ":"A",Ã:"A","Ꜳ":"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY",Ḃ:"B",Ḅ:"B",Ɓ:"B",Ḇ:"B","Ƀ":"B",Ƃ:"B",Ć:"C",Č:"C",Ç:"C",Ḉ:"C",Ĉ:"C",Ċ:"C",Ƈ:"C","Ȼ":"C",Ď:"D",Ḑ:"D",Ḓ:"D",Ḋ:"D",Ḍ:"D",Ɗ:"D",Ḏ:"D",ǲ:"D",ǅ:"D",Đ:"D",Ƌ:"D",Ǳ:"DZ",Ǆ:"DZ",É:"E",Ĕ:"E",Ě:"E",Ȩ:"E",Ḝ:"E",Ê:"E",Ế:"E",Ệ:"E",Ề:"E",Ể:"E",Ễ:"E",Ḙ:"E",Ë:"E",Ė:"E",Ẹ:"E",Ȅ:"E",È:"E",Ẻ:"E",Ȇ:"E",Ē:"E",Ḗ:"E",Ḕ:"E",Ę:"E","Ɇ":"E",Ẽ:"E",Ḛ:"E","Ꝫ":"ET",Ḟ:"F",Ƒ:"F",Ǵ:"G",Ğ:"G",Ǧ:"G",Ģ:"G",Ĝ:"G",Ġ:"G",Ɠ:"G",Ḡ:"G",Ǥ:"G",Ḫ:"H",Ȟ:"H",Ḩ:"H",Ĥ:"H","Ⱨ":"H",Ḧ:"H",Ḣ:"H",Ḥ:"H",Ħ:"H",Í:"I",Ĭ:"I",Ǐ:"I",Î:"I",Ï:"I",Ḯ:"I",İ:"I",Ị:"I",Ȉ:"I",Ì:"I",Ỉ:"I",Ȋ:"I",Ī:"I",Į:"I",Ɨ:"I",Ĩ:"I",Ḭ:"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS",Ĵ:"J","Ɉ":"J",Ḱ:"K",Ǩ:"K",Ķ:"K","Ⱪ":"K","Ꝃ":"K",Ḳ:"K",Ƙ:"K",Ḵ:"K","Ꝁ":"K","Ꝅ":"K",Ĺ:"L","Ƚ":"L",Ľ:"L",Ļ:"L",Ḽ:"L",Ḷ:"L",Ḹ:"L","Ⱡ":"L","Ꝉ":"L",Ḻ:"L",Ŀ:"L","Ɫ":"L",ǈ:"L",Ł:"L",Ǉ:"LJ",Ḿ:"M",Ṁ:"M",Ṃ:"M","Ɱ":"M",Ń:"N",Ň:"N",Ņ:"N",Ṋ:"N",Ṅ:"N",Ṇ:"N",Ǹ:"N",Ɲ:"N",Ṉ:"N","Ƞ":"N",ǋ:"N",Ñ:"N",Ǌ:"NJ",Ó:"O",Ŏ:"O",Ǒ:"O",Ô:"O",Ố:"O",Ộ:"O",Ồ:"O",Ổ:"O",Ỗ:"O",Ö:"O",Ȫ:"O",Ȯ:"O",Ȱ:"O",Ọ:"O",Ő:"O",Ȍ:"O",Ò:"O",Ỏ:"O",Ơ:"O",Ớ:"O",Ợ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ȏ:"O","Ꝋ":"O","Ꝍ":"O",Ō:"O",Ṓ:"O",Ṑ:"O",Ɵ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Õ:"O",Ṍ:"O",Ṏ:"O",Ȭ:"O",Ƣ:"OI","Ꝏ":"OO",Ɛ:"E",Ɔ:"O",Ȣ:"OU",Ṕ:"P",Ṗ:"P","Ꝓ":"P",Ƥ:"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q",Ŕ:"R",Ř:"R",Ŗ:"R",Ṙ:"R",Ṛ:"R",Ṝ:"R",Ȑ:"R",Ȓ:"R",Ṟ:"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C",Ǝ:"E",Ś:"S",Ṥ:"S",Š:"S",Ṧ:"S",Ş:"S",Ŝ:"S",Ș:"S",Ṡ:"S",Ṣ:"S",Ṩ:"S","ẞ":"SS",Ť:"T",Ţ:"T",Ṱ:"T",Ț:"T","Ⱦ":"T",Ṫ:"T",Ṭ:"T",Ƭ:"T",Ṯ:"T",Ʈ:"T",Ŧ:"T","Ɐ":"A","Ꞁ":"L",Ɯ:"M","Ʌ":"V","Ꜩ":"TZ",Ú:"U",Ŭ:"U",Ǔ:"U",Û:"U",Ṷ:"U",Ü:"U",Ǘ:"U",Ǚ:"U",Ǜ:"U",Ǖ:"U",Ṳ:"U",Ụ:"U",Ű:"U",Ȕ:"U",Ù:"U",Ủ:"U",Ư:"U",Ứ:"U",Ự:"U",Ừ:"U",Ử:"U",Ữ:"U",Ȗ:"U",Ū:"U",Ṻ:"U",Ų:"U",Ů:"U",Ũ:"U",Ṹ:"U",Ṵ:"U","Ꝟ":"V",Ṿ:"V",Ʋ:"V",Ṽ:"V","Ꝡ":"VY",Ẃ:"W",Ŵ:"W",Ẅ:"W",Ẇ:"W",Ẉ:"W",Ẁ:"W","Ⱳ":"W",Ẍ:"X",Ẋ:"X",Ý:"Y",Ŷ:"Y",Ÿ:"Y",Ẏ:"Y",Ỵ:"Y",Ỳ:"Y",Ƴ:"Y",Ỷ:"Y","Ỿ":"Y",Ȳ:"Y","Ɏ":"Y",Ỹ:"Y",Ź:"Z",Ž:"Z",Ẑ:"Z","Ⱬ":"Z",Ż:"Z",Ẓ:"Z",Ȥ:"Z",Ẕ:"Z",Ƶ:"Z",Ĳ:"IJ",Œ:"OE","ᴀ":"A","ᴁ":"AE",ʙ:"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F",ɢ:"G",ʛ:"G",ʜ:"H",ɪ:"I",ʁ:"R","ᴊ":"J","ᴋ":"K",ʟ:"L","ᴌ":"L","ᴍ":"M",ɴ:"N","ᴏ":"O",ɶ:"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P",ʀ:"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W",ʏ:"Y","ᴢ":"Z",á:"a",ă:"a",ắ:"a",ặ:"a",ằ:"a",ẳ:"a",ẵ:"a",ǎ:"a",â:"a",ấ:"a",ậ:"a",ầ:"a",ẩ:"a",ẫ:"a",ä:"a",ǟ:"a",ȧ:"a",ǡ:"a",ạ:"a",ȁ:"a",à:"a",ả:"a",ȃ:"a",ā:"a",ą:"a","ᶏ":"a",ẚ:"a",å:"a",ǻ:"a",ḁ:"a","ⱥ":"a",ã:"a","ꜳ":"aa",æ:"ae",ǽ:"ae",ǣ:"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay",ḃ:"b",ḅ:"b",ɓ:"b",ḇ:"b","ᵬ":"b","ᶀ":"b",ƀ:"b",ƃ:"b",ɵ:"o",ć:"c",č:"c",ç:"c",ḉ:"c",ĉ:"c",ɕ:"c",ċ:"c",ƈ:"c","ȼ":"c",ď:"d",ḑ:"d",ḓ:"d","ȡ":"d",ḋ:"d",ḍ:"d",ɗ:"d","ᶑ":"d",ḏ:"d","ᵭ":"d","ᶁ":"d",đ:"d",ɖ:"d",ƌ:"d",ı:"i","ȷ":"j",ɟ:"j",ʄ:"j",ǳ:"dz",ǆ:"dz",é:"e",ĕ:"e",ě:"e",ȩ:"e",ḝ:"e",ê:"e",ế:"e",ệ:"e",ề:"e",ể:"e",ễ:"e",ḙ:"e",ë:"e",ė:"e",ẹ:"e",ȅ:"e",è:"e",ẻ:"e",ȇ:"e",ē:"e",ḗ:"e",ḕ:"e","ⱸ":"e",ę:"e","ᶒ":"e","ɇ":"e",ẽ:"e",ḛ:"e","ꝫ":"et",ḟ:"f",ƒ:"f","ᵮ":"f","ᶂ":"f",ǵ:"g",ğ:"g",ǧ:"g",ģ:"g",ĝ:"g",ġ:"g",ɠ:"g",ḡ:"g","ᶃ":"g",ǥ:"g",ḫ:"h",ȟ:"h",ḩ:"h",ĥ:"h","ⱨ":"h",ḧ:"h",ḣ:"h",ḥ:"h",ɦ:"h",ẖ:"h",ħ:"h",ƕ:"hv",í:"i",ĭ:"i",ǐ:"i",î:"i",ï:"i",ḯ:"i",ị:"i",ȉ:"i",ì:"i",ỉ:"i",ȋ:"i",ī:"i",į:"i","ᶖ":"i",ɨ:"i",ĩ:"i",ḭ:"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is",ǰ:"j",ĵ:"j",ʝ:"j","ɉ":"j",ḱ:"k",ǩ:"k",ķ:"k","ⱪ":"k","ꝃ":"k",ḳ:"k",ƙ:"k",ḵ:"k","ᶄ":"k","ꝁ":"k","ꝅ":"k",ĺ:"l",ƚ:"l",ɬ:"l",ľ:"l",ļ:"l",ḽ:"l","ȴ":"l",ḷ:"l",ḹ:"l","ⱡ":"l","ꝉ":"l",ḻ:"l",ŀ:"l",ɫ:"l","ᶅ":"l",ɭ:"l",ł:"l",ǉ:"lj",ſ:"s","ẜ":"s",ẛ:"s","ẝ":"s",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m","ᵯ":"m","ᶆ":"m",ń:"n",ň:"n",ņ:"n",ṋ:"n","ȵ":"n",ṅ:"n",ṇ:"n",ǹ:"n",ɲ:"n",ṉ:"n",ƞ:"n","ᵰ":"n","ᶇ":"n",ɳ:"n",ñ:"n",ǌ:"nj",ó:"o",ŏ:"o",ǒ:"o",ô:"o",ố:"o",ộ:"o",ồ:"o",ổ:"o",ỗ:"o",ö:"o",ȫ:"o",ȯ:"o",ȱ:"o",ọ:"o",ő:"o",ȍ:"o",ò:"o",ỏ:"o",ơ:"o",ớ:"o",ợ:"o",ờ:"o",ở:"o",ỡ:"o",ȏ:"o","ꝋ":"o","ꝍ":"o","ⱺ":"o",ō:"o",ṓ:"o",ṑ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",õ:"o",ṍ:"o",ṏ:"o",ȭ:"o",ƣ:"oi","ꝏ":"oo",ɛ:"e","ᶓ":"e",ɔ:"o","ᶗ":"o",ȣ:"ou",ṕ:"p",ṗ:"p","ꝓ":"p",ƥ:"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q",ʠ:"q","ɋ":"q","ꝗ":"q",ŕ:"r",ř:"r",ŗ:"r",ṙ:"r",ṛ:"r",ṝ:"r",ȑ:"r",ɾ:"r","ᵳ":"r",ȓ:"r",ṟ:"r",ɼ:"r","ᵲ":"r","ᶉ":"r","ɍ":"r",ɽ:"r","ↄ":"c","ꜿ":"c",ɘ:"e",ɿ:"r",ś:"s",ṥ:"s",š:"s",ṧ:"s",ş:"s",ŝ:"s",ș:"s",ṡ:"s",ṣ:"s",ṩ:"s",ʂ:"s","ᵴ":"s","ᶊ":"s","ȿ":"s",ɡ:"g",ß:"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u",ť:"t",ţ:"t",ṱ:"t",ț:"t","ȶ":"t",ẗ:"t","ⱦ":"t",ṫ:"t",ṭ:"t",ƭ:"t",ṯ:"t","ᵵ":"t",ƫ:"t",ʈ:"t",ŧ:"t","ᵺ":"th",ɐ:"a","ᴂ":"ae",ǝ:"e","ᵷ":"g",ɥ:"h","ʮ":"h","ʯ":"h","ᴉ":"i",ʞ:"k","ꞁ":"l",ɯ:"m",ɰ:"m","ᴔ":"oe",ɹ:"r",ɻ:"r",ɺ:"r","ⱹ":"r",ʇ:"t",ʌ:"v",ʍ:"w",ʎ:"y","ꜩ":"tz",ú:"u",ŭ:"u",ǔ:"u",û:"u",ṷ:"u",ü:"u",ǘ:"u",ǚ:"u",ǜ:"u",ǖ:"u",ṳ:"u",ụ:"u",ű:"u",ȕ:"u",ù:"u",ủ:"u",ư:"u",ứ:"u",ự:"u",ừ:"u",ử:"u",ữ:"u",ȗ:"u",ū:"u",ṻ:"u",ų:"u","ᶙ":"u",ů:"u",ũ:"u",ṹ:"u",ṵ:"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v",ṿ:"v",ʋ:"v","ᶌ":"v","ⱱ":"v",ṽ:"v","ꝡ":"vy",ẃ:"w",ŵ:"w",ẅ:"w",ẇ:"w",ẉ:"w",ẁ:"w","ⱳ":"w",ẘ:"w",ẍ:"x",ẋ:"x","ᶍ":"x",ý:"y",ŷ:"y",ÿ:"y",ẏ:"y",ỵ:"y",ỳ:"y",ƴ:"y",ỷ:"y","ỿ":"y",ȳ:"y",ẙ:"y","ɏ":"y",ỹ:"y",ź:"z",ž:"z",ẑ:"z",ʑ:"z","ⱬ":"z",ż:"z",ẓ:"z",ȥ:"z",ẕ:"z","ᵶ":"z","ᶎ":"z",ʐ:"z",ƶ:"z","ɀ":"z",ﬀ:"ff",ﬃ:"ffi",ﬄ:"ffl",ﬁ:"fi",ﬂ:"fl",ĳ:"ij",œ:"oe",ﬆ:"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x",Ё:"YO",Й:"I",Ц:"TS",У:"U",К:"K",Е:"E",Н:"N",Г:"G",Ш:"SH",Щ:"SCH",З:"Z",Х:"H",Ъ:"",ё:"yo",й:"i",ц:"ts",у:"u",к:"k",е:"e",н:"n",г:"g",ш:"sh",щ:"sch",з:"z",х:"h",ъ:"",Ф:"F",Ы:"I",В:"V",А:"A",П:"P",Р:"R",О:"O",Л:"L",Д:"D",Ж:"ZH",Э:"E",ф:"f",ы:"i",в:"v",а:"a",п:"p",р:"r",о:"o",л:"l",д:"d",ж:"zh",э:"e",Я:"Ya",Ч:"CH",С:"S",М:"M",И:"I",Т:"T",Ь:"",Б:"B",Ю:"YU",я:"ya",ч:"ch",с:"s",м:"m",и:"i",т:"t",ь:"",б:"b",ю:"yu"},Ei=/[`~!@#$%^&*()\-_=+\[\]\\|{}'";:\/?.>,<]+/g,Ui=/^\s+|\s$/g,Ti={й:"q",ц:"w",у:"e",к:"r",е:"t",н:"y",г:"u",ш:"i",щ:"o",з:"p",х:"[",ъ:"]",ф:"a",ы:"s",в:"d",а:"f",п:"g",р:"h",о:"j",л:"k",д:"l",ж:";",э:"'",я:"z",ч:"x",с:"c",м:"v",и:"b",т:"n",ь:"m",б:",",ю:".",".":"/"};function Ri(r){return r.replace(Ei,"").replace(Ui,"")}function Bi(r){return r.toLowerCase().replace(/[\wа-я]/g,e=>Ti[e]??e)}function xi(r){return r.replace(/[^A-Za-z0-9]/g,e=>Fi[e]??e)}function Li(r,e=!0){return $a(r,{clearBadChars:!0,latinize:e,ignoreCase:!0})}function $a(r,e={}){const t=e.includeTag&&r.charAt(0)==="%",a=r;return e.clearBadChars&&(r=Ri(r)),e.latinize&&(r=xi(r)),e.ignoreCase&&(r=r.toLowerCase()),t&&(r="%"+r),e.latinize&&(r+=""+Bi(a)),r}function Oi(r){return r.reduce((e,t)=>(e.push(...t),e),[])}class Ua{constructor(e,t=0){this.options=e,this.minChars=t,this.fullTexts=new Map}indexObject(e,t){if(this.options&&t.trim()&&(t=$a(t,this.options)),!t)return this.fullTexts.delete(e),!1;this.fullTexts.set(e,t)}_search(e){const t=[],a=this.fullTexts,s=e.split(" "),n=s.length;return a.forEach((i,o)=>{let p=!0,d=0;for(let f=0;f<n;++f){const c=s[f],g=i.indexOf(c);if(g===-1||g!==0&&i[g-1]!==" "){p=!1;break}d+=c.length}if(p){d+=n-1;const f=i.length;(this.minChars<=d||f<=d)&&t.push({fullText:i,fullTextLength:f,what:o,foundChars:d})}}),t}search(e){this.options&&(e=$a(e,this.options));const t=e.split(""),a=Oi(t.map(n=>this._search(n)));return a.sort((n,i)=>n.fullTextLength-i.fullTextLength||i.foundChars-n.foundChars),new Set(a.map(n=>n.what))}}function Vi(r,e){const t=r.length;if(t!==e.length){const s=t-e.length;return s<0?-1:s>0?1:0}const a=15;for(let s=0;s<t;s+=a){const n=+r.slice(s,s+a),i=+e.slice(s,s+a),o=n-i;if(o)return o}return 0}function ws(r,e){if(r.toExponential){const t=r-e;return t<0?-1:t>0?1:0}return Vi(r,e)}var ze=(r=>(r[r.None=0]="None",r[r.Top=1]="Top",r[r.Bottom=2]="Bottom",r[r.Both=3]="Both",r))(ze||{});class Jt{constructor(){this.sliceConstructor=Jt.getSliceConstructor(this);const e=this.constructSlice();this.slices=[e]}static getSliceConstructor(e){return class extends Array{constructor(){super(...arguments),this.end=0}isEnd(a){if((this.end&a)===a)return!0;let s=!1;if(a===1){const n=e.last;s=n.end&a?this.includes(n[n.length-1]):!1}else if(a===2){const n=e.first;s=n.end&a?this.includes(n[0]):!1}else if(a===3)return this.isEnd(1)&&this.isEnd(2);return s&&this.setEnd(a),s}getEnds(){return{top:this.isEnd(1),bottom:this.isEnd(2),both:this.isEnd(3)}}setEnd(a){this.end|=a}unsetEnd(a){this.end&=~a}splice(a,s,...n){const i=super.splice(a,s,...n);if(!this.length){const o=e.slices,p=o.indexOf(this);p!==-1&&(o.length===1?this.unsetEnd(3):o.splice(p,1))}return i}}}constructSlice(...e){const t=new this.sliceConstructor(e.length);for(let a=0,s=e.length;a<s;++a)t[a]=e[a];return t}insertSlice(e,t=!0){if(!e.length)return;const a=this.slices[0];if(!a.length)return a.push(...e),a;const s=e[e.length-1],n=e[0];let i,o=-1,p=-1,d=0;for(;d<this.slices.length&&(i=this.slices[d],o=i.indexOf(s),p=i.indexOf(n),!(p!==-1&&o!==-1));++d)if(p!==-1||o!==-1)break;if(!(p!==-1&&o!==-1))if(p!==-1){const f=e.slice(i.length-p);i.push(...f)}else if(o!==-1){const f=e.slice(0,e.length-o-1);i.unshift(...f)}else{let f=0;for(const c=this.slices.length;f<c;++f){const g=this.slices[f];if(ws(e[0],g[0])===1)break}this.slices.splice(f,0,this.constructSlice(...e)),d=f}if(t)return this.flatten(d)}flatten(e){if(this.slices.length>=2)for(let t=0,a=this.slices.length;t<a-1;++t){const s=this.slices[t],n=this.slices[t+1];s.indexOf(n[0])!==-1&&(s.setEnd(n.end),this.slices.splice(t+1,1),t<e&&--e,--a,--t,this.insertSlice(n,!1))}return this.slices[e]}get first(){return this.slices[0]}get last(){return this.slices[this.slices.length-1]}get slice(){return this.first}get length(){return this.slice.length}findSlice(e){for(let t=0,a=this.slices.length;t<a;++t){const s=this.slices[t],n=s.indexOf(e);if(n!==-1)return{slice:s,index:n}}}findSliceOffset(e){let t;for(let a=0;a<this.slices.length;++a){let s=0;if(t=this.slices[a],!(t.length<2)){for(;s<t.length;++s)if(ws(e,t[s])>=0)return{slice:t,offset:e===t[s]?s:s-1}}}if(t&&t.isEnd(1))return{slice:t,offset:t.length}}sliceMe(e,t,a){let s=this.slice,n=0,i=0;if(e){const y=this.findSliceOffset(e);if(!y)return;s=y.slice,n=i=y.offset,s.includes(e)&&(i+=1)}const o=Math.max(i+t,0),p=i+t+a,d=s.slice(o,p),f=t<0?a+t:a,c=Math.abs(t),g=s.length-i>=f||(s.isEnd(1)?(d.setEnd(1),!0):!1),h=i-c>=0||(s.isEnd(2)?(d.setEnd(2),!0):!1);return{slice:d,offsetIdOffset:n,fulfilled:0|(g&&h?3:(g?1:0)|(h?2:0))}}unshift(...e){let t=this.first;t.length?t.isEnd(2)||(t=this.constructSlice(),t.setEnd(2),this.slices.unshift(t)):t.setEnd(2),t.unshift(...e)}push(...e){let t=this.last;t.length?t.isEnd(1)||(t=this.constructSlice(),t.setEnd(1),this.slices.push(t)):t.setEnd(1),t.push(...e)}delete(e){const t=this.findSlice(e);return t?(t.slice.splice(t.index,1),!0):!1}deleteSlice(e){Ye(this.slices,e)}toJSON(){const t={slices:this.slices.map(a=>({values:a.slice(),isEnd:a.getEnds()}))};return JSON.stringify(t)}static fromJSON(e){const t=JSON.parse(e),a=new Jt;return t.slices.forEach(s=>{const n=a.insertSlice(s.values)||a.first;s.isEnd.top&&n.setEnd(1),s.isEnd.bottom&&n.setEnd(2)}),a}}be&&(be.SlicedArray=Jt);function bt(r,e){for(let t=r.length,a=t-1;a>=0;--a)e(r[a],a,r)}function nn(r,e,t,a){if(typeof t!="function"){const i=t;t=o=>o[i]}const s=t(e);if(a===void 0&&(a=r.indexOf(e),a!==-1)){const i=r[a-1],o=r[a+1];if((!i||t(i)>=s)&&(!o||t(o)<=s))return a;r.splice(a,1)}const n=r.length;if(!n||s<=t(r[n-1]))return r.push(e)-1;if(s>=t(r[0]))return r.unshift(e),0;for(let i=0;i<n;i++)if(s>t(r[i]))return r.splice(i,0,e),i;return console.error("wtf",r,e),r.indexOf(e)}function Ot(r,e){if(!r)return e;for(var t in r)e.hasOwnProperty(t)||delete r[t];for(var t in e)r[t]=e[t];return r}function Ni(r,e){if(r!==void 0)return r=+r.toFixed(0),e?r<oa?r:r%oa:r}function K(r){return Ni(r,!0)}function Xt(r=0){return`index_${r}`}function $e(r){return typeof r=="object"&&r!==null}function Qa(r,e=Xt(r.folder_id)){return r?.[e]}function lt(r){if(r!==void 0&&(r.isPeerId&&r.isPeerId()))return r;if($e(r)){const a=r.user_id;if(a!==void 0)return a.toPeerId(!1);const s=r.channel_id||r.chat_id;return s!==void 0?s.toPeerId(!0):ct}else if(!r)return ct;const e=r.charAt(0)==="u",t=r.substr(1).split("_");return e?t[0].toPeerId():(t[0]||"").toPeerId(!0)}function qi(r){const e=[r.fromId,r.viaBotId,r.fwdFromId],t=r.media;if(t){const i=t.user_id;i!==void 0&&e.push(i.toPeerId());const p=t.results?.recent_voters;p?.length&&e.push(...p.map(d=>d.toPeerId()))}const a=r.reactions?.recent_reactions;a?.length&&e.push(...a.map(i=>lt(i.peer_id)));const s=r.action;if(s){const i=[...s.users||[],s.user_id,s.inviter_id];e.push(...i.filter(Boolean).map(p=>p.toPeerId()));const o=[s.channel_id,s.chat_id];e.push(...o.filter(Boolean).map(p=>p.toPeerId(!0)))}const n=r.replies?.recent_repliers;return n?.length&&e.push(...n.map(i=>lt(i))),new Set(e.filter(Boolean))}function Lt(r,e){const t={writable:!0,configurable:!0},a={};e.forEach(s=>{r.hasOwnProperty(s)||(a[s]=t)}),Object.defineProperties(r,a)}function ks(r,e,t){return r[e]=t}const yt=void 0;class Gi extends ce{constructor(){super(...arguments),this.clear=(e=!1)=>{if(e){this.allDialogsLoaded={},this.pinnedOrders={};for(const t of Be)this.pinnedOrders[t]=[]}else{this.storage.clear(),this.allDialogsLoaded={},this.saveAllDialogsLoaded(),this.pinnedOrders=Object.assign({},this.pinnedOrders);for(const t of Be)this.resetPinnedOrder(t);this.savePinnedOrders()}this.forumTopics=new Map,this.folders={},this.dialogsOffsetDate={},this.dialogsNum=0,this.dialogsIndex=new Ua({clearBadChars:!0,ignoreCase:!0,latinize:!0,includeTag:!0}),this.cachedResults={query:"",count:0,dialogs:[],folderId:0}},this.onUpdateFolderPeers=e=>{e.folder_peers.forEach(a=>{const{folder_id:s,peer:n}=a,i=this.appPeersManager.getPeerId(n),o=this.dropDialog(i)[0];o&&(o.pFlags?.pinned&&this.handleDialogUnpinning(o,s),o.folder_id=s,this.generateIndexForDialog(o),this.pushDialog({dialog:o})),this.appMessagesManager.scheduleHandleNewDialogs(i,o)})},this.onUpdateDialogPinned=e=>{const t=e.folder_id??pt,a=this.appPeersManager.getPeerId(e.peer.peer),s=this.getDialogOnly(a);this.handleDialogTogglePinned(s,e.pFlags.pinned,t)},this.onUpdateChannelPinnedTopic=e=>{const t=e.channel_id,a=t.toPeerId(!0),s=this.appMessagesIdsManager.generateMessageId(e.topic_id,t),n=this.getForumTopic(a,s);n&&this.handleDialogTogglePinned(n,e.pFlags.pinned,this.getFilterIdForForum(n))},this.onUpdatePinnedDialogs=e=>{const t=e.folder_id??pt;e.order?this.handleDialogsPinned(t,e.order.map(a=>this.appPeersManager.getPeerId(a.peer))):this.apiManager.invokeApi("messages.getPinnedDialogs",{folder_id:t}).then(a=>{this.applyDialogs(a),this.handleDialogsPinned(t,a.dialogs.map(s=>s.peerId))})},this.onUpdateChannelPinnedTopics=async e=>{const t=e.channel_id,a=t.toPeerId(!0);if(!this.forumTopics.get(a))return;const n=a;if(e.order){const i=e.order.map(o=>this.appMessagesIdsManager.generateMessageId(o,t));this.handleDialogsPinned(n,i)}else{const i=await this.apiManager.getLimit("topicPin",!0),o=this.apiManager.invokeApi("channels.getForumTopics",{channel:this.appChatsManager.getChannelInput(t),limit:i,offset_date:0,offset_id:0,offset_topic:0}),f=(await this.processTopics(a,o)).topics.filter(c=>c.pFlags.pinned);this.handleDialogsPinned(n,f.map(c=>c.id))}}}after(){this.clear(!0);const e=t=>{const a=this.getCachedDialogs(!1);for(let s=0;s<a.length;++s)this.processDialogForFilter(a[s],t)};return this.rootScope.addEventListener("filter_order",()=>{const t=this.getCachedDialogs(!1);for(const a in this.folders)+a>1&&delete this.folders[a];for(let a=0;a<t.length;++a){const s=t[a];this.processDialogForFilters(s)}}),this.rootScope.addEventListener("filter_update",e),this.rootScope.addEventListener("filter_new",e),this.rootScope.addEventListener("filter_delete",t=>{const a=this.getCachedDialogs(!1),s=this.getDialogIndexKeyByFilterId(t.id);for(let n=0;n<a.length;++n){const i=a[n];delete i[s]}delete this.folders[t.id]}),this.rootScope.addEventListener("dialog_notify_settings",t=>{this.processChangedUnreadOrUnmuted(t.peerId)}),this.rootScope.addEventListener("chat_update",t=>{const a=this.appChatsManager.getChat(t),s=t.toPeerId(!0);a.pFlags.left&&this.getDialogOnly(s)&&this.dropDialogOnDeletion(s)}),this.rootScope.addEventListener("chat_toggle_forum",({chatId:t,enabled:a})=>{const s=t.toPeerId(!0);a||this.flushForumTopicsCache(s),this.processChangedUnreadOrUnmuted(s)}),this.apiUpdatesManager.addMultipleEventsListeners({updateFolderPeers:this.onUpdateFolderPeers,updateDialogPinned:this.onUpdateDialogPinned,updateChannelPinnedTopic:this.onUpdateChannelPinnedTopic,updatePinnedDialogs:this.onUpdatePinnedDialogs,updateChannelPinnedTopics:this.onUpdateChannelPinnedTopics}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("dialogs")]).then(([t,{results:a,storage:s}])=>{this.storage=s,this.dialogs=this.storage.getCache();for(const n of Be){const i=t.pinnedOrders[n];if(!i)continue;const o=this.getPinnedOrders(n);o.splice(0,o.length,...i)}a.length&&qt.freezeSaving(this.setDialogsFromState.bind(this,a),["chats","dialogs","messages","users"]),this.allDialogsLoaded=t.allDialogsLoaded||{},a.length&&this.appDraftsManager.addMissedDialogs()})}indexMyDialog(){const e=this.appUsersManager.getSelf().id.toPeerId(!1);if(this.getDialogOnly(e)){const a=this.appPeersManager.getPeerSearchText(e);this.dialogsIndex.indexObject(e,a)}}setDialogsFromState(e){for(let t=0,a=e.length;t<a;++t){const s=e[t];if(!s)continue;s.top_message=K(s.top_message),s.topMessage&&this.appMessagesManager.saveMessages([s.topMessage]);for(let i=0;i<=21;++i){const o=`index_${i}`;delete s[o]}this.saveDialog({dialog:s,ignoreOffsetDate:!0}),this.appMessagesManager.getMessageByPeer(s.peerId,s.top_message)||this.appMessagesManager.reloadConversation(s.peerId)}}isDialogsLoaded(e){return!!this.allDialogsLoaded[e]}setDialogsLoaded(e,t){const a=this.isFilterIdForForum(e);e===yt&&t?(this.allDialogsLoaded[pt]=t,this.allDialogsLoaded[vt]=t):(a&&Lt(this.allDialogsLoaded,[e]),this.allDialogsLoaded[e]=t),!a&&(Array.from(Be).every(s=>this.allDialogsLoaded[s])&&(this.allDialogsLoaded[yt]=!0),this.saveAllDialogsLoaded())}saveAllDialogsLoaded(){this.appStateManager.pushToState("allDialogsLoaded",this.allDialogsLoaded)}handleDialogUnpinning(e,t){delete e.pFlags.pinned,Ye(this.getPinnedOrders(t),this.isFilterIdForForum(t)?e.id:e.peerId),this.savePinnedOrders()}savePinnedOrders(){this.appStateManager.pushToState("pinnedOrders",this.pinnedOrders)}resetPinnedOrder(e){this.getPinnedOrders(e).length=0}getPinnedOrders(e){let t=this.pinnedOrders[e];return!t&&this.isFilterIdForForum(e)&&(Lt(this.pinnedOrders,[e]),t=this.pinnedOrders[e]=[]),t}isDialogPinned(e,t){const a=this.filtersStorage.getFilter(t);let s;return a?s=a.pinnedPeerIds.indexOf(e)!==-1:s=!!this.getDialogOnly(e).pFlags.pinned,s}getOffsetDate(e){const t=this.dialogsOffsetDate[e]||0;return e===yt&&!t?Math.min(...Array.from(Be).sort((a,s)=>a-s)):t}generateFolder(e){const t={dialogs:[],id:e,unreadMessagesCount:0,unreadPeerIds:new Set,unreadUnmutedPeerIds:new Set};return Lt(t,["dispatchUnreadTimeout"]),t}getFolder(e){var t;return(t=this.folders)[e]??(t[e]=this.generateFolder(e))}isFilterIdForForum(e){return e&&e<0}getFilterIdForForum(e){return e.peerId}getDialogKey(e){return this.isTopic(e)?e.id:e.peerId}getFolderDialogs(e,t=!0){if(e===yt)return this.getCachedDialogs(t);const a=this.getFolder(e);return this.isFilterIdForForum(e)?t?a.dialogs.filter(s=>!s.pFlags.hidden):a.dialogs:t?a.dialogs.filter(s=>s.migratedTo===void 0):a.dialogs}getNextDialog(e,t,a){const s=this.getFolderDialogs(a,!0);let n;if(!e)t&&(n=s[0]);else{const i=s.findIndex(o=>o.peerId===e);if(i!==-1){const o=t?i+1:i-1;n=s[o]}}return n}getDialogIndexKeyByFilterId(e){if(this.isFilterIdForForum(e))return Xt();if(Be.has(e))return Xt(e);const t=this.filtersStorage.getFilter(e);return Xt(t.localId)}isDialogUnmuted(e){return!this.appNotificationsManager.isPeerLocalMuted({peerId:e.peerId,respectType:!0,threadId:this.isTopic(e)?e.id:void 0})}getFolderUnreadCount(e){const t=this.getFolder(e);return{unreadUnmutedCount:t.unreadUnmutedPeerIds.size,unreadCount:t.unreadPeerIds.size}}getCachedDialogs(e){const t=Array.from(Be).map(a=>this.getFolderDialogs(a,e));return[].concat(...t)}setDialogIndexInFilter(e,t,a){let s;const n=this.isTopic(e),i=n||Be.has(a.id);if(this.filtersStorage.testDialogForFilter(e,a)){const o=n?this.getPinnedOrders(this.getFilterIdForForum(e)):a.pinnedPeerIds,p=this.getDialogKey(e),d=o.indexOf(p);d!==-1?s=this.generateDialogIndex(this.generateDialogPinnedDateByIndex(o.length-1-d),!0):e.pFlags?.pinned||i?s=this.generateIndexForDialog(e,!0,void 0,!i):s=Qa(e)??this.generateIndexForDialog(e,!0)}return ks(e,t,s)}getDialog(e,t,a,s=!0){const n=[];a&&(t=e),t===void 0?n.push(...Array.from(Be).map(o=>this.getFolder(o).dialogs)):n.push(this.getFolderDialogs(t,!1));const i=a?o=>o.id===a:o=>o.peerId===e;for(const o of n){let p=0,d=0;for(let f=o.length;p<f;++p){const c=o[p];if(i(c))return[c,p-d];s&&(c.pFlags.hidden||c.migratedTo!==void 0)&&++d}}return[]}getDialogOnly(e){return this.dialogs[e]}getDialogOrTopic(e,t){return t?this.getForumTopic(e,t):this.dialogs[e]}getDialogIndex(e,t,a){const s=$e(e)?e:this.getDialogOrTopic(e,a);return Qa(s,t)}generateDialogIndex(e,t){return e??(e=ve(!0)+this.timeManager.getServerTimeOffset()),e*65536+(t?0:++this.dialogsNum&65535)}isTopic(e){return"id"in e}processDialogForFilters(e,t){if(this.isTopic(e)){this.processDialogForFilter(e,void 0,t);return}const a=this.filtersStorage.getFilters();for(const s in a){const n=a[s];this.processDialogForFilter(e,n,t)}}processDialogForFilter(e,t,a){const s=this.isTopic(e),n=s?this.getFilterIdForForum(e):t.id,i=s?"index_0":this.getDialogIndexKeyByFilterId(n),p=this.getFolder(n).dialogs,d=s?y=>y.id===e.id:y=>y.peerId===e.peerId,f=p.findIndex(d),c=p[f],g=this.getDialogIndex(c,i);a&&n>vt&&(a=void 0);const h=a?void 0:this.setDialogIndexInFilter(e,i,t);return g===h?!1:(!!g!=!!h&&this.prepareFolderUnreadCountModifyingByDialog(n,e,!!h),f!==-1&&p.splice(f,1),h&&nn(p,e,y=>this.getDialogIndex(y,i),-1),!0)}prepareDialogUnreadCountModifying(e,t){const a=this.isTopic(e),s=[],n=a?this.getFilterIdForForum(e):e.folder_id;if(s.push(this.prepareFolderUnreadCountModifyingByDialog(n,e,t)),!a){const i=this.filtersStorage.getFilters();for(const o in i){const p=i[o];this.filtersStorage.testDialogForFilter(e,p)&&s.push(this.prepareFolderUnreadCountModifyingByDialog(p.id,e,t))}}return()=>!t&&s.forEach(i=>i())}prepareFolderUnreadCountModifyingByDialog(e,t,a){const s=this.appMessagesManager.getDialogUnreadCount(t),n=this.isDialogUnmuted(t);if(a!==void 0){const i=a?s:-s;this.modifyFolderUnreadCount(e,i,a&&!!s,a&&!!s&&n,t);return}return()=>{const i=this.appMessagesManager.getDialogUnreadCount(t),o=this.isDialogUnmuted(t),p=i-s;this.modifyFolderUnreadCount(e,p,!!i,i&&o,t)}}modifyFolderUnreadCount(e,t,a,s,n){const{peerId:i}=n,o=this.appPeersManager.isForum(i),p=this.isTopic(n);if(o&&!p){const c=this.getForumUnreadCount(i);if(c instanceof Promise){c.then(({count:g,hasUnmuted:h})=>{n=this.getDialogOnly(i);const y=this.getFolder(e);!n||!this.appPeersManager.isForum(i)||!y||!y.dialogs.some(P=>P.peerId===i)||this.modifyFolderUnreadCount(e,0,!1,!1,n)});return}else t=0,a=c.count>0,s=c.hasUnmuted}const d=this.getFolder(e);t&&(d.unreadMessagesCount=Math.max(0,d.unreadMessagesCount+t));const f=this.getDialogKey(n);a?d.unreadPeerIds.add(f):d.unreadPeerIds.delete(f),s?d.unreadUnmutedPeerIds.add(f):d.unreadUnmutedPeerIds.delete(f),d.dispatchUnreadTimeout??(d.dispatchUnreadTimeout=Pe.setTimeout(()=>{d.dispatchUnreadTimeout=void 0;const c={...d};delete c.dialogs,this.rootScope.dispatchEvent("folder_unread",c),p&&this.processChangedUnreadOrUnmuted(i)},0))}processChangedUnreadOrUnmuted(e){const t=this.getDialogOnly(e);t&&(this.processDialogForFilters(t),this.prepareDialogUnreadCountModifying(t)(),this.rootScope.dispatchEvent("dialog_unread",{peerId:e,dialog:t}))}generateIndexForDialog(e,t,a,s){if(!t)return;const n=this.isTopic(e);let i=0,o;if(e.pFlags.hidden)i=this.generateDialogPinnedDateByIndex(4095),o=!0;else if(e.pFlags.pinned&&!s)i=this.generateDialogPinnedDate(e),o=!0;else{if(a||(a=this.appMessagesManager.getMessageByPeer(e.peerId,e.top_message)),i=a?.date||i,!n){const f=this.appPeersManager.isChannel(e.peerId)&&e.peerId.toChatId();if(f){const c=this.appChatsManager.getChat(f);(!i||c.date&&c.date>i)&&(i=c.date)}}e.draft?._==="draftMessage"&&e.draft.date>i&&(i=e.draft.date)}i||(i=ve(!0));const p=this.generateDialogIndex(i,o);if(t)return p;const d=Xt(e.folder_id);ks(e,d,p)}generateDialogPinnedDateByIndex(e){return 2147418112+(e&65535)}generateDialogPinnedDate(e){const t=this.isTopic(e),a=this.getPinnedOrders(t?this.getFilterIdForForum(e):e.folder_id),s=this.getDialogKey(e);let n=a.indexOf(s);return n===-1&&(a.unshift(s),n=0,t||this.savePinnedOrders()),this.generateDialogPinnedDateByIndex(a.length-1-n)}setDialogToState(e){if(this.isTopic(e))return;const{peerId:t,pts:a}=e,s=this.appMessagesManager.getHistoryStorage(t),n=this.appMessagesManager.getHistoryMessagesStorage(t),i=s.history.slice;let o;for(let p=0,d=i.length;p<d;++p){const f=i[p],c=this.appMessagesManager.getMessageFromStorage(n,f);if(c&&!c.pFlags.is_outgoing){o=c;const g=qi(c);this.peersStorage.requestPeersForKey(g,`topMessage_${t}`);break}}if(e.topMessage=o,t.isAnyChat()&&a){const p=this.apiUpdatesManager.getChannelState(t.toChatId(),a).pts;e.pts=p}this.storage.set({[t]:e}),this.peersStorage.requestPeer(t,"dialog")}pushDialog({dialog:e,offsetDate:t,ignoreOffsetDate:a,saveGlobalOffset:s}){const n=this.isTopic(e),{folder_id:i,peerId:o}=e;if(n?this.getForumTopicsCache(o).topics.set(e.id,e):this.dialogs[o]=e,t??(t=this.getDialogOffsetDate(e)),this.processDialogForFilters(e),t&&!e.pFlags.pinned){if(!n&&s){const f=this.dialogsOffsetDate[yt];(!f||t<f)&&(this.dialogsOffsetDate[yt]=t)}const p=n?this.getFilterIdForForum(e):i,d=this.dialogsOffsetDate[p];if(!d||t<d){if(!a&&!this.isDialogsLoaded(p)){this.dropDialog(o,n?this.getDialogKey(e):void 0,!0);return}this.dialogsOffsetDate[p]=t}}this.setDialogToState(e)}dropDialogFromFolders(e,t){const a=this.getDialog(e,void 0,t,!1),[s,n]=a;if(s){const i=t?this.getFilterIdForForum(s):s.folder_id,o=Ye(this.getPinnedOrders(i),this.getDialogKey(s))!==void 0;this.processDialogForFilters(s,!0),this.dialogsIndex.indexObject(e,""),o&&this.savePinnedOrders()}return a}dropDialog(e,t,a){const s=this.getDialogOrTopic(e,t),n=this.dropDialogFromFolders(e,t);return s&&(a||(t?this.getForumTopicsCache(e).topics.delete(t):delete this.dialogs[e]),this.clearDialogFromState(s,a)),n}clearDialogFromState(e,t){if(e._==="forumTopic")return;const{peerId:a}=e;this.peersStorage.requestPeersForKey([],`topMessage_${a}`),this.peersStorage.releasePeer(a,"dialog"),this.storage.delete(a,t)}dropDialogWithEvent(e,t){const a=this.dropDialog(e,t);return a.length&&this.rootScope.dispatchEvent("dialog_drop",a[0]),a}dropDialogOnDeletion(e,t){this.dropDialogWithEvent(e,t),this.rootScope.dispatchEvent("peer_deleted",e)}applyDialogs(e,t){const a=e._==="messages.forumTopics",s=e.dialogs||e.topics;a?this.processTopics(t,e):bt(e.dialogs,(o,p)=>{o._==="dialogFolder"&&e.dialogs.splice(p,1)}),this.appUsersManager.saveApiUsers(e.users),this.appChatsManager.saveApiChats(e.chats),this.appMessagesManager.saveMessages(e.messages);const n=new Map,i=o=>{let p=n.get(o);return p||n.set(o,p={}),p};s.forEach(o=>{const p=this.appPeersManager.getPeerId(o.peer);let d=o.top_message;const f=this.appMessagesManager.pendingTopMsgs[p];if(f){const h=this.appMessagesManager.getMessageByPeer(p,f),y=this.appMessagesManager.getMessageByPeer(p,d);(!d||h&&(!y||h?.date>y?.date))&&(o.top_message=d=f,this.appMessagesManager.getHistoryStorage(p).maxId=f)}if(d||o.draft?._==="draftMessage"){if(this.saveDialog({dialog:o})){const h=i(p);a?(h.topics??(h.topics=new Map)).set(o.id,o):h.dialog=o}}else this.dropDialogWithEvent(p,a?this.getDialogKey(o):void 0);const c=this.appMessagesManager.getUpdateAfterReloadKey(p,a?this.getDialogKey(o):void 0),g=this.appMessagesManager.newUpdatesAfterReloadToHandle[c];if(g!==void 0){for(const h of g)g.delete(h),this.apiUpdatesManager.saveUpdate(h);g.size||delete this.appMessagesManager.newUpdatesAfterReloadToHandle[c]}}),n.size&&this.rootScope.dispatchEvent("dialogs_multiupdate",n)}getDialogOffsetDate(e){return this.appMessagesManager.getMessageByPeer(e.peerId,e.top_message)?.date||0}canSaveDialogByPeerId(e){if(e.isAnyChat()){const t=this.appChatsManager.getChat(e.toChatId());if(t._==="channelForbidden"||t.pFlags.left)return!1}return!0}saveDialog({dialog:e,folderId:t,ignoreOffsetDate:a,saveGlobalOffset:s}){const n=this.isTopic(e),i=!n,o=this.appPeersManager.getPeerId(e.peer),p=this.appPeersManager.isChannel(o)?o.toChatId():void 0,d=n?e.id=this.appMessagesIdsManager.generateMessageId(e.id,p):void 0;if(n||(t??(t=e.folder_id??pt)),!o)return console.error("saveConversation no peerId???",e,t),!1;if(!n&&e._!=="dialog"&&console.error("saveConversation not regular dialog",e,Object.assign({},e)),i&&!this.canSaveDialogByPeerId(o))return!1;if(i&&!p&&o.isAnyChat()){const P=this.appChatsManager.getChat(o.toChatId());if(P&&P.migrated_to&&P.pFlags.deactivated){const D=this.appPeersManager.getPeerId(P.migrated_to);this.appMessagesManager.migratedFromTo[o]=D,this.appMessagesManager.migratedToFrom[D]=o,e.migratedTo=D}}if(i&&!e.migratedTo){const P=this.appPeersManager.getPeerSearchText(o);this.dialogsIndex.indexObject(o,P)}const f=this.getDialogOrTopic(o,d);let c,g;if(e.top_message?(c=this.appMessagesIdsManager.generateMessageId(e.top_message,p),(f?.top_message&&this.appMessagesManager.getMessageByPeer(o,f.top_message))?.pFlags?.is_outgoing&&f.top_message>=c&&(c=f.top_message),g=this.appMessagesManager.getMessageByPeer(o,c)):(c=this.appMessagesManager.generateTempMessageId(o),g={_:"message",id:c,mid:c,from_id:this.appPeersManager.getOutputPeer(this.appUsersManager.getSelf().id.toPeerId(!1)),peer_id:this.appPeersManager.getOutputPeer(o),deleted:!0,pFlags:{out:!0},date:0,message:""},this.appMessagesManager.saveMessages([g],{isOutgoing:!0})),g?.pFlags||this.appMessagesManager.log.error("saveConversation no message:",e,g),e.top_message=c,e.read_inbox_max_id=this.appMessagesIdsManager.generateMessageId(f&&!e.read_inbox_max_id?f.read_inbox_max_id:e.read_inbox_max_id,p),e.read_outbox_max_id=this.appMessagesIdsManager.generateMessageId(f&&!e.read_outbox_max_id?f.read_outbox_max_id:e.read_outbox_max_id,p),i&&e.folder_id===void 0&&e._==="dialog"&&(e.folder_id=f?f.folder_id:t),e.draft=this.appDraftsManager.saveDraft({peerId:o,threadId:d,draft:e.draft}),e.peerId=o,g&&g.pFlags.is_outgoing){const P=g.pFlags.out;c>e[P?"read_outbox_max_id":"read_inbox_max_id"]?(g.pFlags.unread=!0,!e.unread_count&&!P&&++e.unread_count):delete g.pFlags.unread}const h=this.appMessagesManager.getHistoryStorage(o,d),y=h.history.slice;if(y.length?y.isEnd(ze.Bottom)||(h.history.insertSlice([c]).setEnd(ze.Bottom),h.count||(h.count=1),this.appMessagesManager.mergeReplyKeyboard(h,g)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:o})):(h.history.unshift(c),h.count||(h.count=1),this.appMessagesManager.mergeReplyKeyboard(h,g)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:o})),h.maxId=c,h.readMaxId=e.read_inbox_max_id,h.readOutboxMaxId=e.read_outbox_max_id,this.appNotificationsManager.savePeerSettings({peerId:o,threadId:n?e.id:void 0,settings:e.notify_settings}),i&&p&&e.pts&&this.apiUpdatesManager.addChannelState(p,e.pts),this.generateIndexForDialog(e),f){const P=this.dialogsStorage.prepareDialogUnreadCountModifying(f);Ot(f,e),P()}return this.pushDialog({dialog:e,offsetDate:g?.date,ignoreOffsetDate:a,saveGlobalOffset:s}),n&&this.processTopicUpdate(e,f),!0}processTopicUpdate(e,t){if(!t)return;const{peerId:a,id:s}=e,n=e.icon_emoji_id!==t.icon_emoji_id,i=e.title!==t.title,o=n||i;n&&this.rootScope.dispatchEvent("avatar_update",{peerId:a,threadId:s}),o&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:a,threadId:s})}getDialogs(e){const{query:t="",offsetIndex:a,limit:s=20,filterId:n=pt,skipMigrated:i=!1}=e,o=this.isFilterIdForForum(n);if(!o&&!Be.has(n)){const y=[],P=this.appUsersManager.fillContacts();P.cached||y.push(P.promise);const D=this.filtersStorage.reloadMissingPeerIds(n);if(D&&y.push(D),y.length)return Promise.all(y).then(()=>this.getDialogs(e))}const p=(!Be.has(n)||this.getOffsetDate(n))&&!o?yt:n;let d=this.getFolderDialogs(n,i);const f=this.getDialogIndexKeyByFilterId(n);if(t&&!o){if(!s||this.cachedResults.query!==t||this.cachedResults.folderId!==n){this.cachedResults.query=t,this.cachedResults.folderId=n;const y=this.dialogsIndex.search(t),P=[];for(const D in this.dialogs){const v=this.dialogs[D];y.has(v.peerId)&&v.folder_id===n&&P.push(v)}P.sort((D,v)=>this.getDialogIndex(v,f)-this.getDialogIndex(D,f)),this.cachedResults.dialogs=P,this.cachedResults.count=P.length}d=this.cachedResults.dialogs}else this.cachedResults.query="";let c=0;if(a>0)for(let y=d.length;c<y&&!(a>this.getDialogIndex(d[c],f));++c);const g=this.isDialogsLoaded(p),h=d.length>=c+s;if(t||g||h){const y=d.slice(c,c+s);return{dialogs:y,count:g?d.length:null,isTopEnd:d.length&&(y[0]&&y[0]===d[0]||this.getDialogIndex(d[0],f)<a),isEnd:(t||g)&&c+s>=d.length}}return this.appMessagesManager.getTopMessages({limit:s,folderId:p}).then(y=>{if(i&&(d=this.getFolderDialogs(n,i)),c=0,a>0)for(let D=d.length;c<D&&!(a>this.getDialogIndex(d[c],f));++c);const P=d.slice(c,c+s);return{dialogs:P,count:y.count===void 0?d.length:y.count,isTopEnd:d.length&&(P[0]&&P[0]===d[0]||this.getDialogIndex(d[0],f)<a),isEnd:y.isEnd}})}async markFolderAsRead(e){const a=[...this.getFolder(e).unreadPeerIds];for(const s of a)await this.appMessagesManager.markDialogUnread(s,!0)}flushForumTopicsCache(e){const t=this.forumTopics.get(e);if(!t)return;const a=this.folders[e];a&&(a.dispatchUnreadTimeout&&clearTimeout(a.dispatchUnreadTimeout),delete this.allDialogsLoaded[e],delete this.pinnedOrders[e],delete this.dialogsOffsetDate[e],delete this.folders[e]),t.topics.clear()}getForumTopicsCache(e){let t=this.forumTopics.get(e);return t||(t={topics:new Map,deletedTopics:new Set,getTopicPromises:new Map},this.forumTopics.set(e,t)),t}getForumTopicById(e,t){if(!this.appPeersManager.isForum(e))return Promise.reject(Ue("CHANNEL_FORUM_MISSING"));const a=this.getForumTopicsCache(e);let s;if(t){if(s=a.getTopicPromises.get(t),s)return s;if(a.deletedTopics.has(t))return Promise.resolve(void 0);a.getTopicPromises.set(t,s=Me())}return a.getTopicsPromise??(a.getTopicsPromise=ft(0).then(()=>{const n={},i=[];for(const[p,d]of a.getTopicPromises)n[p]=d,i.push(K(p));a.getTopicPromises.clear();const o=()=>{for(const p in n)n[p].resolve(void 0),a.deletedTopics.add(+p)};if(this.getForumTopicsCache(e)!==a){o();return}return this.apiManager.invokeApi("channels.getForumTopicsByID",{channel:this.appChatsManager.getChannelInput(e.toChatId()),topics:i}).then(p=>{if(this.getForumTopicsCache(e)===a)return this.applyDialogs(p,e),p.topics.forEach(d=>{d._==="forumTopic"&&(n[d.id].resolve(d),delete n[e])}),p},()=>{}).then(()=>{o(),a.getTopicsPromise=void 0,a.getTopicPromises.size&&this.getForumTopicById(e)})})),s||a.getTopicsPromise}getForumTopic(e,t){return this.forumTopics.get(e)?.topics?.get(t)}getForumTopicOrReload(e,t){const a=this.getForumTopic(e,t);return a||(this.getForumTopicsCache(e)?.deletedTopics?.has(t)?void 0:this.getForumTopicById(e,t))}processTopics(e,t){return gt(t,a=>{"pts"in a&&this.apiUpdatesManager.addChannelState(e.toChatId(),a.pts);const s=this.appPeersManager.getOutputPeer(e);return a.topics=a.topics.map(n=>{if(n._!=="forumTopicDeleted")return n.peer=s,n.id=this.appMessagesIdsManager.generateMessageId(n.id,s.channel_id),n}).filter(Boolean),a})}processTopicsPromise(e,t){return t.then(a=>(this.processTopics(e,a),a))}getForumUnreadCount(e){if(!this.appPeersManager.isForum(e))return;const t=this.getFolder(e),a=t.dialogs.length>=20||this.isDialogsLoaded(e)?t.dialogs.slice(0,20):gt(this.getDialogs({filterId:e,limit:20}),s=>s.dialogs);return gt(a,s=>({count:s.reduce((n,i)=>n+ +!!i.unread_count,0),hasUnmuted:s.some(n=>n.unread_count&&this.isDialogUnmuted(n))}))}handleDialogTogglePinned(e,t,a){e&&(t?e.pFlags.pinned=!0:this.handleDialogUnpinning(e,a),this.generateIndexForDialog(e)),this.appMessagesManager.scheduleHandleNewDialogs(e.peerId,e)}handleDialogsPinned(e,t){const a=this.isFilterIdForForum(e);this.resetPinnedOrder(e),this.getPinnedOrders(e).push(...t),this.savePinnedOrders(),t.reverse();const s={};t.forEach(i=>{s[i]=!0;const o=a?e:i,p=a?i:void 0,d=this.getDialogOrTopic(o,p);this.appMessagesManager.scheduleHandleNewDialogs(o,d),d&&(d.pFlags.pinned=!0,this.generateIndexForDialog(d))});const n=this.getFolderDialogs(e,!1);for(const i of n){if(!i.pFlags.pinned)break;s[this.getDialogKey(i)]||(delete i.pFlags.pinned,this.generateIndexForDialog(i),this.appMessagesManager.scheduleHandleNewDialogs(i.peerId,i))}}}function at(r){if(r===null||typeof r!="object")return r;if(r instanceof Date)return new Date(r.getTime());if(Array.isArray(r))return r.map(s=>at(s));if(ArrayBuffer.isView(r))return r.slice();const e=new r.constructor;for(var t in r)r.hasOwnProperty(t)&&(e[t]=at(r[t]));return e}const ji=[["pinned_peers","pinnedPeerIds"],["exclude_peers","excludePeerIds"],["include_peers","includePeerIds"]],Hi=Be.size,zi={_:"dialogFilter",pFlags:{},id:0,title:"",exclude_peers:[],include_peers:[],pinned_peers:[],excludePeerIds:[],includePeerIds:[],pinnedPeerIds:[]};class Wi extends ce{constructor(){super(...arguments),this.clear=e=>{if(!e)this.reloadedPeerIds.clear(),this.clearFilters();else{this.filters={},this.filtersArr=[],this.reloadedPeerIds=new Set,this.localFilters={};for(const t of Be)this.localFilters[t]=this.generateLocalFilter(t)}this.localId=La},this.onUpdateDialogFilter=e=>{e.filter?this.saveDialogFilter(e.filter):this.filters[e.id]&&(this.rootScope.dispatchEvent("filter_delete",this.filters[e.id]),delete this.filters[e.id],_t(this.filtersArr,t=>t.id===e.id)),this.pushToState()},this.onUpdateDialogFilters=e=>{const t=at(this.filters);this.getDialogFilters(!0).then(a=>{for(const s in t){const n=+s;a.find(i=>i.id===n)||this.onUpdateDialogFilter({_:"updateDialogFilter",id:n})}this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:a.map(s=>s.id)})})},this.onUpdateDialogFilterOrder=e=>{const t=e.order.slice();t.includes(vt)||t.splice(t[0]===pt?1:0,0,vt),this.localId=La,t.forEach(a=>{const s=this.filters[a];delete s.localId,this.setLocalId(s)}),this.rootScope.dispatchEvent("filter_order",t),this.pushToState()}}after(){return this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateDialogFilter:this.onUpdateDialogFilter,updateDialogFilters:this.onUpdateDialogFilters,updateDialogFilterOrder:this.onUpdateDialogFilterOrder}),this.rootScope.addEventListener("premium_toggle",()=>{this.onUpdateDialogFilters({_:"updateDialogFilters"})}),this.appStateManager.getState().then(e=>{this.prependFilters(e.filtersArr).map(a=>{this.saveDialogFilter(a,!1,!0)})})}prependFilters(e){e=e.slice();const t=this.localFilters[pt],a=this.localFilters[vt],s=e.findIndex(n=>n._==="dialogFilterDefault"||n.id===pt);return s!==-1?e[s]=t:e.unshift(t),_t(e,n=>n.id===vt),e.splice(e[0]===t?1:0,0,a),this.localId=La,e.forEach(n=>{delete n.localId}),e}generateLocalFilter(e){const t={...at(zi),id:e};return e===pt?t.pFlags.exclude_archived=!0:e===vt&&(t.pFlags.exclude_unarchived=!0),Be.has(e)&&(t.pinnedPeerIds=this.dialogsStorage.getPinnedOrders(e)),t}pushToState(){this.appStateManager.pushToState("filtersArr",this.filtersArr)}testDialogForFilter(e,t){if(!t)return!0;const{peerId:a}=e;if(Be.has(t.id))return e.folder_id===t.id&&this.dialogsStorage.canSaveDialogByPeerId(a);if(!this.appMessagesManager.getDialogOnly(a)||t.excludePeerIds?.includes(a))return!1;if(t.includePeerIds?.includes(a))return!0;const s=t.pFlags;if(!s)return!0;if(s.exclude_archived&&e.folder_id===vt||s.exclude_read&&!this.appMessagesManager.isDialogUnread(e)||s.exclude_muted&&this.appNotificationsManager.isPeerLocalMuted({peerId:a})&&!(e.unread_mentions_count&&e.unread_count))return!1;if(this.appPeersManager.isAnyChat(a)){if(s.broadcasts&&this.appPeersManager.isBroadcast(a)||s.groups&&this.appPeersManager.isAnyGroup(a))return!0}else{const n=a.toUserId();if(this.appUsersManager.isBot(n))return!!s.bots;if(s.non_contacts&&!this.appUsersManager.isContact(n)||s.contacts&&this.appUsersManager.isContact(n))return!0}return!1}testDialogForFilterId(e,t){return this.testDialogForFilter(e,this.filters[t])}getFilter(e){return this.filters[e]}getFilters(){return this.filters}clearFilters(){const e=this.getFilters();for(const t in e)Be.has(+t)||this.onUpdateDialogFilter({_:"updateDialogFilter",id:+t})}async toggleDialogPin(e,t){const a=this.filters[t],s=a.pinnedPeerIds.indexOf(e),n=s!==-1;if(n&&(a.pinned_peers.splice(s,1),a.pinnedPeerIds.splice(s,1)),!n){if(a.pinned_peers.length>=await this.apiManager.getLimit("folderPin"))return Promise.reject(Ue("PINNED_DIALOGS_TOO_MUCH"));a.pinned_peers.unshift(this.appPeersManager.getInputPeerById(e)),a.pinnedPeerIds.unshift(e)}return this.updateDialogFilter(a)}createDialogFilter(e,t){const a=Math.max(1,...Object.keys(this.filters).map(s=>+s));return e=at(e),e.id=a+1,this.updateDialogFilter(e,void 0,t)}updateDialogFilter(e,t=!1,a=!1){return this.apiManager.invokeApi("messages.updateDialogFilter",{id:e.id,filter:t?void 0:this.getOutputDialogFilter(e)}).then(()=>{if(this.onUpdateDialogFilter({_:"updateDialogFilter",id:e.id,filter:t?void 0:e}),a){const n=Object.values(this.filters).sort((i,o)=>i.localId-o.localId).map(i=>i.id);Ye(n,e.id),Ye(n,vt),n.splice(n[0]===pt?1:0,0,e.id),this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:n})}return e})}updateDialogFiltersOrder(e){return this.apiManager.invokeApi("messages.updateDialogFiltersOrder",{order:e}).then(()=>{this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:e})})}getOutputDialogFilter(e){const t=at(e);return this.filterIncludedPinnedPeers(e),t}filterIncludedPinnedPeers(e){bt(e.includePeerIds,(t,a)=>{e.pinnedPeerIds.includes(t)&&(e.include_peers.splice(a,1),e.includePeerIds.splice(a,1))})}reloadMissingPeerIds(e,t="pinned_peers"){const s=this.getFilter(e)?.[t];if(!s?.length)return;const n=s.filter(p=>{const d=this.appPeersManager.getPeerId(p),f=this.reloadedPeerIds.has(d),c=this.appMessagesManager.getDialogOnly(d);return!f&&!c});if(!n.length)return;const i=n.map(p=>{const d=this.appPeersManager.getPeerId(p);return this.appMessagesManager.reloadConversation(p).then(c=>(this.reloadedPeerIds.add(d),c?void 0:d))});return Promise.all(i).then(p=>{p=p.filter(Boolean),p.length})}async getDialogFilters(e=!1){const t=Object.keys(this.filters);if(t.length>Hi&&!e)return t.map(n=>this.filters[n]).sort((n,i)=>n.localId-i.localId);const a=await this.apiManager.invokeApiSingle("messages.getDialogFilters");return this.prependFilters(a).map(n=>this.saveDialogFilter(n,e)).filter(Boolean)}getSuggestedDialogsFilters(){return this.apiManager.invokeApi("messages.getSuggestedDialogFilters")}saveDialogFilter(e,t=!0,a){e._==="dialogFilterDefault"&&(e=this.localFilters[pt]),Be.has(e.id)||(ji.forEach(([n,i])=>{const o=e[n];o&&(e[i]=o.map(p=>this.appPeersManager.getPeerId(p)))}),this.filterIncludedPinnedPeers(e),e.include_peers=e.pinned_peers.concat(e.include_peers),e.includePeerIds=e.pinnedPeerIds.concat(e.includePeerIds));const s=this.filters[e.id];return s?e=Object.assign(s,e):this.filters[e.id]=e,this.setLocalId(e),a||(t?this.rootScope.dispatchEvent("filter_update",e):s||this.rootScope.dispatchEvent("filter_new",e)),e}setLocalId(e){e.localId!==void 0?e.localId>=this.localId&&(this.localId=e.localId+1):(e.localId=this.localId++,_t(this.filtersArr,t=>t.id===e.id),this.filtersArr.push(e),this.pushToState())}async isFilterIdAvailable(e){if(Be.has(e))return!0;const t=await this.apiManager.getLimit("folders");return this.filtersArr.filter(s=>!Be.has(s.id)).slice(0,t).some(s=>s.id===e)}getChatlistInput(e){return{_:"inputChatlistDialogFilter",filter_id:e}}exportChatlistInvite(e){return this.apiManager.invokeApiSingleProcess({method:"chatlists.exportChatlistInvite",params:{chatlist:this.getChatlistInput(e.id),title:e.title,peers:e.include_peers},processResult:t=>(this.saveDialogFilter(t.filter),t)})}deleteExportedInvite(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.deleteExportedInvite",params:{chatlist:this.getChatlistInput(e),slug:t},processResult:a=>a})}editExportedInvite(e,t,a,s){return this.apiManager.invokeApi("chatlists.editExportedInvite",{chatlist:this.getChatlistInput(e),slug:t,title:s,peers:a.map(n=>this.appPeersManager.getInputPeerById(n))})}getExportedInvites(e){return this.getFilter(e)?._==="dialogFilter"?Promise.reject(Ue("FILTER_NOT_SUPPORTED")):this.apiManager.invokeApiSingleProcess({method:"chatlists.getExportedInvites",params:{chatlist:this.getChatlistInput(e)},processResult:a=>(this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats),a.invites)})}checkChatlistInvite(e){return this.apiManager.invokeApiSingleProcess({method:"chatlists.checkChatlistInvite",params:{slug:e},processResult:t=>(this.appUsersManager.saveApiUsers(t.users),this.appChatsManager.saveApiChats(t.chats),t)})}joinChatlistInvite(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.joinChatlistInvite",params:{slug:e,peers:t.map(a=>this.appPeersManager.getInputPeerById(a))},processResult:a=>{this.apiUpdatesManager.processUpdateMessage(a);const n=a.updates.find(i=>i._==="updateDialogFilter").id;return this.rootScope.dispatchEvent("filter_joined",this.getFilter(n)),n}})}getChatlistUpdates(e){if(this.getFilter(e)?._!=="dialogFilterChatlist")return Promise.reject(Ue("FILTER_NOT_SUPPORTED"));const a=Date.now();return this.apiManager.invokeApiSingleProcess({method:"chatlists.getChatlistUpdates",params:{chatlist:this.getChatlistInput(e)},processResult:s=>{this.appUsersManager.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats);const n=this.getFilter(e);return n?._==="dialogFilterChatlist"&&(n.updatedTime=a,this.pushToState()),s}})}joinChatlistUpdates(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.joinChatlistUpdates",params:{chatlist:this.getChatlistInput(e),peers:t.map(a=>this.appPeersManager.getInputPeerById(a))},processResult:a=>{this.apiUpdatesManager.processUpdateMessage(a)}})}hideChatlistUpdates(e){return this.apiManager.invokeApiSingle("chatlists.hideChatlistUpdates",{chatlist:this.getChatlistInput(e)})}getLeaveChatlistSuggestions(e){return this.apiManager.invokeApiSingle("chatlists.getLeaveChatlistSuggestions",{chatlist:this.getChatlistInput(e)})}leaveChatlist(e,t){return this.apiManager.invokeApiSingleProcess({method:"chatlists.leaveChatlist",params:{chatlist:this.getChatlistInput(e),peers:t.map(a=>this.appPeersManager.getInputPeerById(a))},processResult:a=>{this.apiUpdatesManager.processUpdateMessage(a)}})}}function cs(r){return[...new Set(r)]}const Ki="((?:👨🏻‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👨🏼‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👨🏽‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👨🏾‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👨🏿‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏻‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏻‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|👩🏼‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏼‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|👩🏽‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏽‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|👩🏾‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏾‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|👩🏿‍❤️?‍💋‍👨\uD83C[\uDFFB-\uDFFF]|👩🏿‍❤️?‍💋‍👩\uD83C[\uDFFB-\uDFFF]|🧑🏻‍❤️?‍💋‍🧑\uD83C[\uDFFC-\uDFFF]|🧑🏼‍❤️?‍💋‍🧑\uD83C[\uDFFB\uDFFD-\uDFFF]|🧑🏽‍❤️?‍💋‍🧑\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|🧑🏾‍❤️?‍💋‍🧑\uD83C[\uDFFB-\uDFFD\uDFFF]|🧑🏿‍❤️?‍💋‍🧑\uD83C[\uDFFB-\uDFFE]|👨🏻‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏻‍🤝‍👨\uD83C[\uDFFC-\uDFFF]|👨🏼‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏼‍🤝‍👨\uD83C[\uDFFB\uDFFD-\uDFFF]|👨🏽‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏽‍🤝‍👨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|👨🏾‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏾‍🤝‍👨\uD83C[\uDFFB-\uDFFD\uDFFF]|👨🏿‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👨🏿‍🤝‍👨\uD83C[\uDFFB-\uDFFE]|👩🏻‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏻‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏻‍🤝‍👨\uD83C[\uDFFC-\uDFFF]|👩🏻‍🤝‍👩\uD83C[\uDFFC-\uDFFF]|👩🏼‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏼‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏼‍🤝‍👨\uD83C[\uDFFB\uDFFD-\uDFFF]|👩🏼‍🤝‍👩\uD83C[\uDFFB\uDFFD-\uDFFF]|👩🏽‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏽‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏽‍🤝‍👨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|👩🏽‍🤝‍👩\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|👩🏾‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏾‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏾‍🤝‍👨\uD83C[\uDFFB-\uDFFD\uDFFF]|👩🏾‍🤝‍👩\uD83C[\uDFFB-\uDFFD\uDFFF]|👩🏿‍❤️?‍👨\uD83C[\uDFFB-\uDFFF]|👩🏿‍❤️?‍👩\uD83C[\uDFFB-\uDFFF]|👩🏿‍🤝‍👨\uD83C[\uDFFB-\uDFFE]|👩🏿‍🤝‍👩\uD83C[\uDFFB-\uDFFE]|🧑🏻‍❤️?‍🧑\uD83C[\uDFFC-\uDFFF]|🧑🏻‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|🧑🏼‍❤️?‍🧑\uD83C[\uDFFB\uDFFD-\uDFFF]|🧑🏼‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|🧑🏽‍❤️?‍🧑\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|🧑🏽‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|🧑🏾‍❤️?‍🧑\uD83C[\uDFFB-\uDFFD\uDFFF]|🧑🏾‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|🧑🏿‍❤️?‍🧑\uD83C[\uDFFB-\uDFFE]|🧑🏿‍🤝‍🧑\uD83C[\uDFFB-\uDFFF]|👨‍❤️?‍💋‍👨|👩‍❤️?‍💋‍\uD83D[\uDC68\uDC69]|🫱🏻‍🫲\uD83C[\uDFFC-\uDFFF]|🫱🏼‍🫲\uD83C[\uDFFB\uDFFD-\uDFFF]|🫱🏽‍🫲\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|🫱🏾‍🫲\uD83C[\uDFFB-\uDFFD\uDFFF]|🫱🏿‍🫲\uD83C[\uDFFB-\uDFFE]|👨‍❤️?‍👨|👩‍❤️?‍\uD83D[\uDC68\uDC69]|🧑‍🤝‍🧑|👫\uD83C[\uDFFB-\uDFFF]|👬\uD83C[\uDFFB-\uDFFF]|👭\uD83C[\uDFFB-\uDFFF]|💏\uD83C[\uDFFB-\uDFFF]|💑\uD83C[\uDFFB-\uDFFF]|🤝\uD83C[\uDFFB-\uDFFF]|\uD83D[\uDC6B-\uDC6D\uDC8F\uDC91]|🤝)|(?:\uD83D[\uDC68\uDC69]|🧑)(?:\uD83C[\uDFFB-\uDFFF])?‍(?:⚕️?|⚖️?|✈️?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75]|⛹)(?:(?:\uD83C[\uDFFB-\uDFFF]|️?)‍[♀♂]️?)|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?‍[♀♂]️?|(?:👨‍👨‍👦‍👦|👨‍👨‍👧‍\uD83D[\uDC66\uDC67]|👨‍👩‍👦‍👦|👨‍👩‍👧‍\uD83D[\uDC66\uDC67]|👩‍👩‍👦‍👦|👩‍👩‍👧‍\uD83D[\uDC66\uDC67]|👨‍👦‍👦|👨‍👧‍\uD83D[\uDC66\uDC67]|👨‍👨‍\uD83D[\uDC66\uDC67]|👨‍👩‍\uD83D[\uDC66\uDC67]|👩‍👦‍👦|👩‍👧‍\uD83D[\uDC66\uDC67]|👩‍👩‍\uD83D[\uDC66\uDC67]|🏳️?‍⚧️?|🏳️?‍🌈|😶‍🌫️?|❤️?‍🔥|❤️?‍🩹|🏴‍☠️?|🐕‍🦺|🐻‍❄️?|👁‍🗨|👨‍\uD83D[\uDC66\uDC67]|👩‍\uD83D[\uDC66\uDC67]|👯‍♀️?|👯‍♂️?|😮‍💨|😵‍💫|🤼‍♀️?|🤼‍♂️?|🧞‍♀️?|🧞‍♂️?|🧟‍♀️?|🧟‍♂️?|🐈‍⬛)|[#*0-9]️??⃣|(?:[©®™♟]️?)|(?:\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC3F\uDC41\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]|[‼⁉ℹ↔-↙↩↪⌚⌛⌨⏏⏭-⏯⏱⏲⏸-⏺Ⓜ▪▫▶◀◻-◾☀-☄☎☑☔☕☘☠☢☣☦☪☮☯☸-☺♀♂♈-♓♠♣♥♦♨♻♿⚒-⚗⚙⚛⚜⚠⚡⚧⚪⚫⚰⚱⚽⚾⛄⛅⛈⛏⛑⛓⛔⛩⛪⛰-⛵⛸⛺⛽✂✈✉✏✒✔✖✝✡✳✴❄❇❗❣❤➡⤴⤵⬅-⬇⬛⬜⭐⭕〰〽㊗㊙])(?:️?|(?!︎))|(?:(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75\uDD90]|[☝⛷⛹✌✍])(?:️?|(?!︎))|(?:\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD\uDEC3-\uDEC5\uDEF0-\uDEF6]|[✊✋]))(?:\uD83C[\uDFFB-\uDFFF])?|(?:🏴󠁧󠁢󠁥󠁮󠁧󠁿|🏴󠁧󠁢󠁳󠁣󠁴󠁿|🏴󠁧󠁢󠁷󠁬󠁳󠁿|🇦\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|🇧\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|🇨\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|🇩\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|🇪\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|🇫\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|🇬\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|🇭\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|🇮\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|🇯\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|🇰\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|🇱\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|🇲\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|🇳\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|🇴🇲|🇵\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|🇶🇦|🇷\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|🇸\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|🇹\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|🇺\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|🇻\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|🇼\uD83C[\uDDEB\uDDF8]|🇽🇰|🇾\uD83C[\uDDEA\uDDF9]|🇿\uD83C[\uDDE6\uDDF2\uDDFC]|\uD83C[\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC6F\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3C\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDDE-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|[⏩-⏬⏰⏳♾⛎✅✨❌❎❓-❕➕-➗➰➿])|️)",ia="a-z\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0100-\\u024f\\u0253\\u0254\\u0256\\u0257\\u0259\\u025b\\u0263\\u0268\\u026f\\u0272\\u0289\\u028b\\u02bb\\u0300-\\u036f\\u1e00-\\u1eff\\u0400-\\u04ff\\u0500-\\u0527\\u2de0-\\u2dff\\ua640-\\ua69f\\u0591-\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u05d0-\\u05ea\\u05f0-\\u05f4\\ufb1d-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4f\\u0610-\\u061a\\u0620-\\u065f\\u066e-\\u06d3\\u06d5-\\u06dc\\u06de-\\u06e8\\u06ea-\\u06ef\\u06fa-\\u06fc\\u06ff\\u0750-\\u077f\\u08a0\\u08a2-\\u08ac\\u08e4-\\u08fe\\ufb50-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\u200c\\u0e01-\\u0e3a\\u0e40-\\u0e4e\\u1100-\\u11ff\\u3130-\\u3185\\uA960-\\uA97F\\uAC00-\\uD7AF\\uD7B0-\\uD7FF\\u3003\\u3005\\u303b\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uff9f\\uffa1-\\uffdc",Ji="0-9_"+ia,As="·",ba="["+ia+"0-9]",Zi="((?:https?|ftp)://|mailto:)?",rn=Zi+"(?:"+ba+"{1,64}(?::"+ba+"{0,64})?@)?(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}|"+ba+"["+ia+As+"0-9-]{0,64}(?:\\."+ba+"["+ia+As+"0-9-]{0,64}){0,10}(?:\\.(xn--[0-9a-z]{2,16}|["+ia+`]{2,24})))(?::\\d{2,5})?(?:/(?:\\S{0,255}[^\\s.;,(\\[\\]{}<>"'])?)?`,on="[a-zA-Z\\d_]{5,32}",Yi="(?:\\s|^)((?:\\d{1,2}:)?(?:[0-5]?[0-9]):(?:[0-5][0-9]))(?:\\s|$)",$i="\\/([a-zA-Z\\d_]{1,32})(?:@("+on+"))?(\\b|$)",Fs=new RegExp("(^| )(@)("+on+")|("+rn+")|(\\n)|("+Ki+")|(^|[\\s\\(\\]])(#["+Ji+"]{2,64})|(^|\\s)"+$i+"|"+Yi,"i"),Qi=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Xi=/(^|\s|\n)(````?)([\s\S]+?)(````?)([\s\n\.,:?!;]|$)|(^|\s|\x01)(`|~~|\*\*|__|_-_|\|\|)([^\n]+?)\7([\x01\s\.,:?!;]|$)|@(\d+)\s*\((.+?)\)|(\[(.+?)\]\((.+?)\))/m,wa={"`":"messageEntityCode","``":"messageEntityPre","**":"messageEntityBold",__:"messageEntityItalic","~~":"messageEntityStrike","_-_":"messageEntityUnderline","||":"messageEntitySpoiler"};new Set(Object.values(wa));const ka=new Set(["messageEntityEmoji","messageEntityLinebreak","messageEntityCaret"]),er=new Set(ka);for(const r in wa)ka.add(wa[r]);const tr=/^\+\d+$/,ar=new Set(["messageEntityBold","messageEntityItalic","messageEntityCode","messageEntityPre","messageEntityUnderline","messageEntityStrike","messageEntityBlockquote","messageEntitySpoiler"]);function sr(r){for(let e=0;e<r.length;++e){const t=r[e];let a=-1;do if(a=r.findIndex((s,n)=>ar.has(s._)&&n!==e&&s._===t._&&s.offset-t.length===t.offset),a!==-1){const s=r[a];t.length+=s.length,r.splice(a,1)}while(a!==-1)}}const nr=new Set(["messageEntityPre","messageEntityCode"]);function pn(r,e){let t=-1;return r.find(a=>(nr.has(a._)&&(t=a.offset+a.length),e.offset<t&&!er.has(e._)?!0:e._===a._||!ka.has(e._)&&!ka.has(a._)?e.offset>=a.offset&&e.length+e.offset<=a.length+a.offset:!1))}function ir(r){r.sort((e,t)=>e.offset-t.offset||t.length-e.length)}function dn(r,e){const t=e.filter(a=>!pn(r,a));r.push(...t),ir(r);for(let a=0;a<r.length;++a){const s=r[a];if(s._==="messageEntityEmoji"){const n=r[a+1];n&&n.offset<s.offset+s.length&&(s.length=n.offset-s.offset)}}return r}function jt(r,e,t){const a=[];let s=!1;const n=c=>pn(e,c)?s=!1:(a.push(c),s=!0),i=[];let o=0,p;for(;p=r.match(Xi);){const c=o+p.index;i.push(r.substr(0,p.index));const g=p[3]||p[8]||p[11]||p[13];o-=g.length,o+=g.length;let h;if(s=!1,g.match(/^`*$/))i.push(p[0]);else if(p[3])h={_:"messageEntityPre",language:"",offset:c+p[1].length,length:g.length},n(h)&&(p[5]===`
`&&(p[5]="",o-=1),i.push(p[1]+g+p[5]),o-=p[2].length+p[4].length);else if(p[7]){const y=p[6]==="";h={_:wa[p[7]],offset:c+(y?0:p[6].length),length:g.length},n(h)&&(y?i.push(g):i.push(p[6]+g+p[9]),o-=p[7].length*2+(y?2:0))}else p[11]?(h={_:"messageEntityMentionName",user_id:p[10].toUserId(),offset:c,length:g.length},n(h)&&(i.push(g),o-=p[0].length-g.length)):p[12]&&(h={_:"messageEntityTextUrl",url:p[14],offset:c,length:g.length},n(h)&&(i.push(g),o-=p[12].length-g.length));s||i.push(p[0]),r=r.substr(p.index+p[0].length),o+=p.index+p[0].length}i.push(r);let d=i.join("");d.replace(/\s+/g,"").length||(d=r,a.splice(0,a.length)),dn(e,a),sr(e);let f=d.length;if(!t){d=d.replace(/^\s*/,"");let c=f-d.length;c&&e.forEach(g=>{g.offset=Math.max(0,g.offset-c)}),d=d.replace(/\s*$/,""),c=f-d.length,f=d.length,c&&e.forEach(g=>{g.offset+g.length>f&&(g.length=f-g.offset)})}return d}function fn(r,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(a=>{const s=Object.getOwnPropertyDescriptor(t.prototype,a)||Object.create(null);a!=="constructor"&&Object.defineProperty(r.prototype,a,s)})})}const Va=6;class cn{constructor(){this.updatesState={pendingPtsUpdates:[],pendingSeqUpdates:{},syncPending:null,syncLoading:null},this.channelStates={},this.attached=!1,this.log=Le("UPDATES",De.Error|De.Warn|De.Log),this.debug=Ae,this.subscriptions={},this.processUpdateMessage=(e,t={})=>{const a={date:e.date,seq:e.seq,seqStart:e.seq_start};switch(this.debug&&this.log.debug("processUpdateMessage",e),e._){case"updatesTooLong":case"new_session_created":this.forceGetDifference();break;case"updateShort":this.processUpdate(e.update,a);break;case"updateShortMessage":case"updateShortChatMessage":{this.debug&&this.log.debug("updateShortMessage | updateShortChatMessage",{...e});const s=e.pFlags.out,n=e.from_id||(s?this.appPeersManager.peerId:e.user_id),i=e.chat_id?e.chat_id.toPeerId(!0):e.user_id.toPeerId(!1)||this.appPeersManager.peerId;this.processUpdate({_:"updateNewMessage",message:{_:"message",pFlags:e.pFlags,id:e.id,from_id:this.appPeersManager.getOutputPeer(n.toPeerId()),peer_id:this.appPeersManager.getOutputPeer(i),date:e.date,message:e.message,fwd_from:e.fwd_from,reply_to:e.reply_to,entities:e.entities},pts:e.pts,pts_count:e.pts_count},a);break}case"updatesCombined":case"updates":this.appUsersManager.saveApiUsers(e.users,t.override),this.appChatsManager.saveApiChats(e.chats,t.override),e.updates.forEach(s=>{this.processUpdate(s,a)});break;default:this.log.warn("Unknown update message",e)}},this._constructor(!1)}setProxy(){const e=this;this.updatesState=new Proxy(this.updatesState,{set:function(t,a,s){return t[a]=s,e.saveUpdatesState(),!0}})}saveUpdatesState(){const e=this.updatesState;this.appStateManager.pushToState("updates",{seq:e.seq,pts:e.pts,date:e.date})}popPendingSeqUpdate(){const e=this.updatesState,t=e.seq+1,a=e.pendingSeqUpdates[t];if(!a)return!1;const s=a.updates;for(let n=0,i=s.length;n<i;++n)this.saveUpdate(s[n]);return e.seq=a.seq,a.date&&e.date<a.date&&(e.date=a.date),delete e.pendingSeqUpdates[t],!this.popPendingSeqUpdate()&&e.syncPending?.seqAwaiting&&e.seq>=e.syncPending.seqAwaiting&&(e.syncPending.ptsAwaiting?delete e.syncPending.seqAwaiting:this.clearStatePendingSync(e)),!0}popPendingPtsUpdate(e){const t=e?this.getChannelState(e):this.updatesState;if(!t.pendingPtsUpdates.length)return!1;t.pendingPtsUpdates.sort((i,o)=>i.pts-o.pts);let a=t.pts,s=0,n=0;for(let i=0,o=t.pendingPtsUpdates.length;i<o;++i){const p=t.pendingPtsUpdates[i];a+=p.pts_count,a>=p.pts&&(s=p.pts,n=i)}if(!s)return!1;this.debug&&this.log.debug("pop pending pts updates",s,t.pendingPtsUpdates.slice(0,n+1)),t.pts=s;for(let i=0;i<=n;++i){const o=t.pendingPtsUpdates[i];this.saveUpdate(o)}return t.pendingPtsUpdates.splice(0,n+1),!t.pendingPtsUpdates.length&&t.syncPending&&(t.syncPending.seqAwaiting?delete t.syncPending.ptsAwaiting:this.clearStatePendingSync(t)),!0}forceGetDifference(){this.updatesState.syncLoading||this.getDifference()}processLocalUpdate(e){this.processUpdateMessage({_:"updateShort",update:e})}getDifference(e=!1){const t=this.updatesState,a=t.syncLoading;a||(t.pendingSeqUpdates={},t.pendingPtsUpdates=[]),this.clearStatePendingSync(t);const s=this.apiManager.invokeApi("updates.getDifference",{pts:t.pts,pts_total_limit:e?1200:void 0,date:t.date,qts:-1},{timeout:2147483647}).then(n=>{if(this.debug&&this.log.debug("Get diff result",n),n._==="updates.differenceEmpty"){this.debug&&this.log.debug("apply empty diff",n.seq),t.date=n.date,t.seq=n.seq;return}if(e&&this.rootScope.dispatchEvent("state_synchronizing"),n._!=="updates.differenceTooLong"){this.appUsersManager.saveApiUsers(n.users),this.appChatsManager.saveApiChats(n.chats),n.other_updates.forEach(o=>{switch(o._){case"updateChannelTooLong":case"updateNewChannelMessage":case"updateEditChannelMessage":this.processUpdate(o);return}this.saveUpdate(o)}),n.new_messages.forEach(o=>{this.saveUpdate({_:"updateNewMessage",message:o,pts:t.pts,pts_count:0})});const i=n._==="updates.difference"?n.state:n.intermediate_state;t.seq=i.seq,t.pts=i.pts,t.date=i.date}else t.pts=n.pts,t.date=ve(!0)+this.timeManager.getServerTimeOffset(),delete t.seq,this.channelStates={},this.log.warn("getDifference:",n._),this.onDifferenceTooLong();if(n._==="updates.differenceSlice")return this.getDifference();this.debug&&this.log.debug("finished get diff")});return a||this.justAName(t,s),s}clearStatePendingSync(e){e.syncPending&&(clearTimeout(e.syncPending.timeout),e.syncPending=null)}getChannelDifference(e){const t=this.getChannelState(e),a=t.syncLoading;a||(t.pendingPtsUpdates=[]),this.clearStatePendingSync(t);const s=this.debug?this.log.bindPrefix("getChannelDifference-"+e):void 0,n=this.apiManager.invokeApi("updates.getChannelDifference",{channel:this.appChatsManager.getChannelInput(e),filter:{_:"channelMessagesFilterEmpty"},pts:t.pts,limit:1e3},{timeout:2147483647}).then(i=>{if(s?.debug("diff result",i),t.pts="pts"in i?i.pts:void 0,t.lastDifferenceTime=Date.now(),i._!=="updates.channelDifferenceEmpty"){if(i._==="updates.channelDifferenceTooLong"){delete this.channelStates[e],this.saveUpdate({_:"updateChannelReload",channel_id:e});return}if(this.appUsersManager.saveApiUsers(i.users),this.appChatsManager.saveApiChats(i.chats),s?.debug("applying",i.other_updates.length,"channel other updates"),i.other_updates.forEach(o=>{this.saveUpdate(o)}),s?.debug("applying",i.new_messages.length,"channel new messages"),i.new_messages.forEach(o=>{this.saveUpdate({_:"updateNewChannelMessage",message:o,pts:t.pts,pts_count:0})}),s?.debug("apply channel diff",t.pts),i._==="updates.channelDifference"&&!i.pFlags.final)return this.getChannelDifference(e);s?.debug("finished channel get diff")}});return a||this.justAName(t,n,e),n}onDifferenceTooLong(){this.appUsersManager.clear(),this.appChatsManager.clear(),this.appMessagesManager.clear(),this.rootScope.dispatchEvent("state_cleared")}justAName(e,t,a){e.syncLoading=t,this.rootScope.dispatchEvent("state_synchronizing",a),t.then(()=>{e.syncLoading=null,this.rootScope.dispatchEvent("state_synchronized",a)},()=>{e.syncLoading=null})}addChannelState(e,t){var a;if(!t)throw new Error("Add channel state without pts "+e);return(a=this.channelStates)[e]??(a[e]={pts:t,pendingPtsUpdates:[],syncPending:null,syncLoading:null})}getChannelState(e,t){return this.channelStates[e]===void 0&&this.addChannelState(e,t),this.channelStates[e]}processUpdate(e,t={}){var d;let a;switch(e._){case"updateNewChannelMessage":case"updateEditChannelMessage":a=this.appPeersManager.getPeerId(e.message.peer_id).toChatId();break;case"updateChannelTooLong":if(a=e.channel_id,!(a in this.channelStates))return!1;break;default:"channel_id"in e&&"pts"in e&&(a=e.channel_id);break}const{pts:s,pts_count:n}=e,i=a?this.getChannelState(a,s):this.updatesState;if(i.syncLoading)return!1;if(e._==="updateChannelTooLong")return(!i.lastPtsUpdateTime||i.lastPtsUpdateTime<Date.now()-Va)&&this.getChannelDifference(a),!1;if(e._==="updateNewMessage"||e._==="updateEditMessage"||e._==="updateNewChannelMessage"||e._==="updateEditChannelMessage"){const f=e.message,c=this.appPeersManager.getPeerId(f.peer_id),g=f.fwd_from||{};let h;if(f.from_id&&!this.appUsersManager.hasUser(this.appPeersManager.getPeerId(f.from_id),f.pFlags.post)&&(h="author")||g.from_id&&!this.appUsersManager.hasUser(this.appPeersManager.getPeerId(g.from_id),!!g.from_id.channel_id)&&(h="fwdAuthor")||g.from_id?.channel_id&&!this.appChatsManager.hasChat(g.from_id.channel_id,!0)&&(h="fwdChannel")||c.isUser()&&!this.appUsersManager.hasUser(c)&&(h="toPeer User")||c.isAnyChat()&&!this.appChatsManager.hasChat(c.toChatId())&&(h="toPeer Chat"))return this.log.warn("Not enough data for message update",c,h,f),a&&this.appChatsManager.hasChat(a)?this.getChannelDifference(a):this.forceGetDifference(),!1}else if(a&&!this.appChatsManager.hasChat(a))return!1;let o,p;if(s){if(i.pts+(n||0)<s)return this.debug&&this.log.warn("Pts hole",i,e,a&&this.appChatsManager.getChat(a)),i.pendingPtsUpdates.push(e),!i.syncPending&&!i.syncLoading&&(i.syncPending={timeout:Pe.setTimeout(()=>{i.syncPending=null,!i.syncLoading&&(a?this.getChannelDifference(a):this.getDifference())},Va)}),i.syncPending.ptsAwaiting=!0,!1;if(s>i.pts)i.pts=s,o=!0,i.lastPtsUpdateTime=Date.now();else if(n)return!1;a&&t.date&&this.updatesState.date<t.date&&(this.updatesState.date=t.date)}else if(!a&&t.seq>0){const f=t.seq,c=t.seqStart||f;if(c!==i.seq+1&&c>i.seq)return this.debug&&this.log.warn("Seq hole",i,i.syncPending?.seqAwaiting),(d=i.pendingSeqUpdates)[c]??(d[c]={seq:f,date:t.date,updates:[]}),i.pendingSeqUpdates[c].updates.push(e),i.syncPending||(i.syncPending={timeout:Pe.setTimeout(()=>{i.syncPending=null,!i.syncLoading&&this.getDifference()},Va)}),(!i.syncPending.seqAwaiting||i.syncPending.seqAwaiting<c)&&(i.syncPending.seqAwaiting=c),!1;i.seq!==f&&(i.seq=f,t.date&&i.date<t.date&&(i.date=t.date),p=!0)}this.saveUpdate(e),o?this.popPendingPtsUpdate(a):p&&this.popPendingSeqUpdate()}saveUpdate(e){this.dispatchEvent(e._,e)}subscribeToChannelUpdates(e){var s;const t=(s=this.subscriptions)[e]??(s[e]={count:0});++t.count;const a=()=>{const n=this.getChannelState(e);!n.syncLoading&&(!n.lastDifferenceTime||Date.now()-n.lastDifferenceTime>2500)&&this.getChannelDifference(e)};t.interval??(t.interval=Pe.setInterval(a,3e3)),a()}unsubscribeFromChannelUpdates(e,t){const a=this.subscriptions[e];!a?.interval||--a.count&&!t||(clearInterval(a.interval),a.interval=void 0,delete this.subscriptions[e])}attach(e){this.attached||(this.log("attach"),this.attached=!0,this.appStateManager.getState().then(({updates:t})=>{const a=this.appStateManager.newVersion;!t||!t.pts||!t.date?(this.log("will get new state"),this.updatesState.syncLoading=new Promise(s=>{this.apiManager.invokeApi("updates.getState",{},{noErrorBox:!0}).then(n=>{this.updatesState.seq=n.seq,this.updatesState.pts=n.pts,this.updatesState.date=n.date,this.saveUpdatesState(),this.updatesState.syncLoading=null,s()})})):(Object.assign(this.updatesState,t),this.log("will get difference",Object.assign({},t)),this.getDifference(!0)),this.apiManager.setUpdatesProcessor(this.processUpdateMessage),this.setProxy(),a&&this.updatesState.syncLoading.then(async()=>{const s={en:"was updated to version",ru:"обновлён до версии"},n=o=>{fetch(`changelogs/${o}_${a.split(" ")[0]}.md`).then(p=>p.status===200&&p.ok&&p.text()||Promise.reject()).then(p=>{const d=s[o]||s.en;p=`**Telegram Web${Te.suffix} ${d} ${a}**

`+p;const c=[],g=jt(p,c),h={_:"updateServiceNotification",entities:c,message:g,type:"local",pFlags:{},inbox_date:ve(!0),media:void 0};this.processLocalUpdate(h)})},i=cs([e,"en"]);for(const o of i)try{await n(o);break}catch{}})}))}}fn(cn,[Yt,ce]);class rr extends ce{constructor(){super(...arguments),this.savedAvatarURLs={}}after(){this.rootScope.addEventListener("avatar_update",({peerId:e,threadId:t})=>{t||this.removeFromAvatarsCache(e)})}isAvatarCached(e,t){const a=this.savedAvatarURLs[e];return t===void 0?!!a:!!(a&&a[t]&&!(a[t]instanceof Promise))}removeFromAvatarsCache(e){this.savedAvatarURLs[e]&&delete this.savedAvatarURLs[e]}loadAvatar(e,t,a){var n;const s=(n=this.savedAvatarURLs)[e]??(n[e]={});if(s[a])return s[a];{const i={_:"inputPeerPhotoFileLocation",pFlags:{},peer:this.appPeersManager.getInputPeerById(e),photo_id:t.photo_id},o={dcId:t.dc_id,location:i};a==="photo_big"&&(i.pFlags.big=!0,o.limitPart=512*1024);const p=this.apiFileManager.download(o);return s[a]=p.then(d=>s[a]=URL.createObjectURL(d))}}}const or={8:new Uint8Array(1),16:new Uint16Array(1),32:new Uint32Array(1)};function Zt(r){const e=or[r];return crypto.getRandomValues(e),e[0]}function Vt(){return""+Zt(32)+Zt(32)%16777215}class pr extends ce{after(){this.calls=new Map,dt().IS_CALL_SUPPORTED&&this.apiUpdatesManager.addMultipleEventsListeners({updatePhoneCall:e=>{this.saveCall(e.phone_call)},updatePhoneCallSignalingData:e=>{this.rootScope.dispatchEvent("call_signaling",{callId:e.phone_call_id,data:e.data})}})}computeKey(e,t,a){return this.cryptoWorker.invokeCrypto("compute-dh-key",e,t,a)}saveCall(e){const t=e._==="phoneCallDiscarded",a=this.calls.get(e.id);return a?(Ot(a,e),t&&this.calls.delete(e.id),e=a):t||this.calls.set(e.id,e),this.rootScope.dispatchEvent("call_update",e),e}getCall(e){return this.calls.get(e)}getCallInput(e){const t=this.getCall(e);return{_:"inputPhoneCall",id:t.id,access_hash:t.access_hash}}savePhonePhoneCall(e){return this.appUsersManager.saveApiUsers(e.users),this.saveCall(e.phone_call)}generateDh(){return this.apiManager.invokeApi("messages.getDhConfig",{version:0,random_length:256}).then(e=>this.cryptoWorker.invokeCrypto("generate-dh",e))}async requestCall(e,t,a,s){const n=await this.apiManager.invokeApi("phone.requestCall",{user_id:this.appUsersManager.getUserInput(e),protocol:t,video:s,random_id:Zt(32),g_a_hash:a});return this.savePhonePhoneCall(n)}async discardCall(e,t,a,s){if(!this.getCall(e))return;const n=await this.apiManager.invokeApi("phone.discardCall",{video:s,peer:this.getCallInput(e),duration:t,reason:{_:a},connection_id:"0"});this.apiUpdatesManager.processUpdateMessage(n)}}function dr(r,e,t,a){if(!r||r.pFlags.deactivated&&e!=="view_messages")return!1;const s=t===void 0;if(r.pFlags.creator&&s&&e!=="anonymous")return!0;if(r._==="chatForbidden"||r._==="channelForbidden"||r.pFlags.left&&!r.pFlags.megagroup||!t&&(t=r.admin_rights||r.banned_rights||r.default_banned_rights,!t))return!1;let n={};t&&(n=t.pFlags);const i=t._==="chatAdminRights";switch(e){case"embed_links":case"send_games":case"send_gifs":case"send_inline":case"send_media":case"send_messages":case"send_polls":case"send_stickers":case"send_photos":case"send_videos":case"send_roundvideos":case"send_audios":case"send_voices":case"send_docs":case"send_plain":{if(!a&&r.pFlags.left||!i&&n[e]||r._==="channel"&&!r.pFlags.megagroup&&!n.post_messages)return!1;break}case"delete_messages":case"manage_call":return!!n[e];case"pin_messages":return i?!!(n[e]||!r.pFlags.megagroup&&n.post_messages):!n[e];case"invite_links":return r._==="chat"?!1:i&&!!n.invite_users;case"change_info":case"invite_users":return i?!!n[e]:!n[e];case"change_type":case"delete_chat":return!1;case"add_admins":case"anonymous":case"edit_messages":case"manage_topics":return i&&!!n[e];case"ban_users":case"change_permissions":return i&&!!n.ban_users;case"view_participants":return!!(r._==="chat"||!r.pFlags.broadcast||r.pFlags.creator||r.admin_rights)}return!0}function Ft(r){return typeof r!="object"?r:r.peer?lt(r.peer):r.user_id.toPeerId()}function pa(r){if(!r)return[];const e=r.usernames;return e?e.filter(t=>t.pFlags.active).map(t=>t.username):r.username?[r.username]:[]}class fr extends ce{constructor(){super(...arguments),this.clear=(e=!1)=>{if(e)this.chats={};else for(const t in this.chats)if(t&&!this.peersStorage.isPeerNeeded(t.toPeerId(!0))){const a=this.chats[t];this.appUsersManager.modifyUsernamesCache(a,!1),this.storage.delete(t),delete this.chats[t]}},this.onChatUpdated=(e,t,a)=>{this.apiUpdatesManager.processUpdateMessage(t),(a||t?.updates?.length)&&this.isChannel(e)&&this.rootScope.dispatchEvent("invalidate_participants",e)},this.onChatUpdatedForce=(e,t)=>this.onChatUpdated(e,t,!0),this.onUpdateChannelParticipant=e=>{this.appProfileManager.invalidateChannelParticipants(e.channel_id),this.rootScope.dispatchEvent("chat_participant",e)},this.onUpdateChatDefaultBannedRights=e=>{const t=this.appPeersManager.getPeerId(e.peer).toChatId(),a=this.chats[t];a&&(a.default_banned_rights=e.default_banned_rights,this.rootScope.dispatchEvent("chat_update",t))}}after(){return this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateChannelParticipant:this.onUpdateChannelParticipant,updateChatDefaultBannedRights:this.onUpdateChatDefaultBannedRights}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("chats")]).then(([e,{results:t,storage:a}])=>{this.storage=a,this.saveApiChats(t),this.peersStorage.addEventListener("peerNeeded",s=>{s.isUser()||this.storage.getFromCache(s.toChatId())||this.storage.set({[s.toChatId()]:this.getChat(s.toChatId())})}),this.peersStorage.addEventListener("peerUnneeded",s=>{s.isUser()||!this.storage.getFromCache(s.toChatId())||this.storage.delete(s.toChatId())})})}saveApiChats(e,t){!e||e.saved||(e.saved=!0,e.forEach(a=>this.saveApiChat(a,t)))}saveApiChat(e,t){if(!e||e._==="chatEmpty")return;const a=this.chats[e.id];if(e.pFlags??(e.pFlags={}),e.pFlags.min&&a!==void 0)return;e._==="channel"&&e.participants_count===void 0&&a!==void 0&&a.participants_count&&(e.participants_count=a.participants_count),e.photo?._==="chatPhotoEmpty"&&delete e.photo;const s=this.appUsersManager.setUsernameToCache(e,a),n=e.id.toPeerId(!0);if(a===void 0)this.chats[e.id]=e;else{const i=a.photo?.photo_id,o=e.photo?.photo_id,p=a.pFlags.forum!==e.pFlags.forum,d=i!==o||p,f=a.title!==e.title||s,c=a.pFlags.verified!==e.pFlags.verified||a.pFlags.scam!==e.pFlags.scam||a.pFlags.fake!==e.pFlags.fake;Ot(a,e),this.rootScope.dispatchEvent("chat_update",e.id),d&&this.rootScope.dispatchEvent("avatar_update",{peerId:n}),(f||c)&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:n}),p&&this.rootScope.dispatchEvent("chat_toggle_forum",{chatId:e.id,enabled:!!e.pFlags.forum})}this.peersStorage.isPeerNeeded(n)&&this.storage.set({[e.id]:e})}getChat(e){return this.chats[e]}hasRights(e,t,a,s){return dr(this.getChat(e),t,a,s)}editChatDefaultBannedRights(e,t){const a=this.getChat(e);return a.default_banned_rights&&a.default_banned_rights.until_date===t.until_date&&Ct(a.default_banned_rights.pFlags,t.pFlags)?Promise.resolve():this.apiManager.invokeApi("messages.editChatDefaultBannedRights",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0)),banned_rights:t}).then(this.onChatUpdated.bind(this,e))}isChannel(e){const t=this.chats[e];return!!(t&&(t._==="channel"||t._==="channelForbidden"))}isMegagroup(e){return!!this.chats[e]?.pFlags?.megagroup}isForum(e){return!!this.chats[e]?.pFlags?.forum}isBroadcast(e){return this.isChannel(e)&&!this.isMegagroup(e)}isInChat(e){let t=!0;const a=this.getChat(e);return(!a||a._==="channelForbidden"||a._==="chatForbidden"||a._==="chatEmpty"||a.pFlags.left||a.pFlags.deactivated)&&(t=!1),t}isPublic(e){const t=this.getChat(e);return!!pa(t)[0]}getChannelInput(e){const t=this.getChat(e);return!t||!t.access_hash?{_:"inputChannelEmpty"}:{_:"inputChannel",channel_id:e,access_hash:t.access_hash||"0"}}getInputPeer(e){return this.isChannel(e)?this.getChannelInputPeer(e):this.getChatInputPeer(e)}getChatInputPeer(e){return{_:"inputPeerChat",chat_id:e}}getChannelInputPeer(e){return{_:"inputPeerChannel",channel_id:e,access_hash:this.getChat(e).access_hash||0}}hasChat(e,t){const a=this.chats[e];return $e(a)&&(t||!a.pFlags.min)}getChatString(e){const t=this.getChat(e);return this.isChannel(e)?(this.isMegagroup(e)?"s":"c")+e+"_"+t.access_hash:"g"+e}createChannel(e){return this.apiManager.invokeApi("channels.createChannel",e).then(t=>(this.apiUpdatesManager.processUpdateMessage(t),t.chats[0].id))}inviteToChannel(e,t){const a=this.getChannelInput(e),s=t.map(n=>this.appUsersManager.getUserInput(n));return this.apiManager.invokeApi("channels.inviteToChannel",{channel:a,users:s}).then(n=>{const i=ve(!0);return t.map(p=>this.generateUpdateChannelParticipant({chatId:e,newParticipant:{_:"channelParticipant",date:i,user_id:p}})).forEach(p=>{this.apiUpdatesManager.processLocalUpdate(p)}),this.onChatUpdatedForce(e,n)})}createChat(e,t){return this.apiManager.invokeApi("messages.createChat",{users:t.map(a=>this.appUsersManager.getUserInput(a)),title:e}).then(a=>(this.apiUpdatesManager.processUpdateMessage(a),a.chats[0].id))}leaveChannel(e){return this.apiManager.invokeApi("channels.leaveChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}joinChannel(e){return this.apiManager.invokeApi("channels.joinChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}addToChat(e,t){return this.isChannel(e)?this.inviteToChannel(e,[t]):this.addChatUser(e,t)}addChatUser(e,t,a=100){return this.apiManager.invokeApi("messages.addChatUser",{chat_id:e,user_id:this.appUsersManager.getUserInput(t),fwd_limit:a}).then(this.onChatUpdated.bind(this,e))}deleteChatUser(e,t){return this.apiManager.invokeApi("messages.deleteChatUser",{chat_id:e,user_id:this.appUsersManager.getUserInput(t)}).then(this.onChatUpdated.bind(this,e))}leaveChat(e){return this.deleteChatUser(e,this.appUsersManager.getSelf().id)}leave(e){return this.isChannel(e)?this.leaveChannel(e):this.leaveChat(e)}delete(e){return this.isChannel(e)?this.deleteChannel(e):this.deleteChat(e)}deleteChannel(e){return this.apiManager.invokeApi("channels.deleteChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}deleteChat(e){return this.apiManager.invokeApi("messages.deleteChat",{chat_id:e})}migrateChat(e){const t=this.getChat(e);return t._==="channel"?Promise.resolve(t.id):this.apiManager.invokeApi("messages.migrateChat",{chat_id:e}).then(a=>(this.onChatUpdated(e,a),a.updates.find(n=>n._==="updateChannel").channel_id))}updateUsername(e,t,a){const s=this.apiManager.invokeApi("channels.updateUsername",{channel:this.getChannelInput(e),username:t});return this.refreshChatAfterRequest(e,s,a)}async toggleParticipantsHidden(e,t){e=await this.migrateChat(e);const a=await this.apiManager.invokeApi("channels.toggleParticipantsHidden",{channel:this.getChannelInput(e),enabled:t});return this.onChatUpdatedForce(e,a)}editAdmin(e,t,a,s=""){const n=this.isChannel(e),o=Ft(t).toUserId();return this.migrateChat(e).then(p=>this.apiManager.invokeApi("channels.editAdmin",{channel:this.getChannelInput(p),user_id:this.appUsersManager.getUserInput(o),admin_rights:a,rank:s}).then(d=>{const f=ve(!0),c=this.generateUpdateChannelParticipant({chatId:p,newParticipant:Object.keys(a.pFlags).length?{_:"channelParticipantAdmin",date:f,admin_rights:a,promoted_by:this.appUsersManager.getSelf().id,user_id:o,rank:s,pFlags:{}}:{_:"channelParticipant",date:f,user_id:o},prevParticipant:t,wasChannel:n});this.apiUpdatesManager.processLocalUpdate(c),this.onChatUpdatedForce(p,d)}))}editPhoto(e,t){const a={_:"inputChatUploadedPhoto",file:t};let s;return this.isChannel(e)?s=this.apiManager.invokeApi("channels.editPhoto",{channel:this.getChannelInput(e),photo:a}):s=this.apiManager.invokeApi("messages.editChatPhoto",{chat_id:e,photo:a}),s.then(this.onChatUpdated.bind(this,e))}editTitle(e,t){let a;return this.isChannel(e)?a=this.apiManager.invokeApi("channels.editTitle",{channel:this.getChannelInput(e),title:t}):a=this.apiManager.invokeApi("messages.editChatTitle",{chat_id:e,title:t}),a.then(this.onChatUpdated.bind(this,e))}editAbout(e,t){const a=e.toPeerId(!0);return this.apiManager.invokeApi("messages.editChatAbout",{peer:this.appPeersManager.getInputPeerById(a),about:t}).then(s=>(s&&this.rootScope.dispatchEvent("peer_bio_edit",a),s))}generateUpdateChannelParticipant({chatId:e,prevParticipant:t,newParticipant:a,wasChannel:s}){const n=ve(!0),i=Ft(t||a);return{_:"updateChannelParticipant",channel_id:e,date:n,actor_id:void 0,qts:void 0,user_id:i,prev_participant:s?t:void 0,new_participant:a,pFlags:{}}}async editBanned(e,t,a){const s=Ft(t),n=this.isChannel(e);return n||(e=await this.migrateChat(e)),this.apiManager.invokeApi("channels.editBanned",{channel:this.getChannelInput(e),participant:this.appPeersManager.getInputPeerById(s),banned_rights:a}).then(i=>{const o=ve(!0),p=this.generateUpdateChannelParticipant({chatId:e,wasChannel:n,prevParticipant:t,newParticipant:Object.keys(a.pFlags).length?{_:"channelParticipantBanned",date:o,banned_rights:a,kicked_by:this.appUsersManager.getSelf().id,peer:this.appPeersManager.getOutputPeer(s),pFlags:a.pFlags.view_messages?{left:!0}:{}}:void 0});this.apiUpdatesManager.processLocalUpdate(p),this.onChatUpdated(e,i)})}clearChannelParticipantBannedRights(e,t){return this.editBanned(e,t,{_:"chatBannedRights",until_date:0,pFlags:{}})}kickFromChannel(e,t){return this.editBanned(e,t,{_:"chatBannedRights",until_date:0,pFlags:{view_messages:!0}})}kickFromChat(e,t){return this.isChannel(e)?this.kickFromChannel(e,t):this.deleteChatUser(e,$e(t)?Ft(t):t.toUserId())}resolveChannel(e){return this.apiManager.invokeApiSingle("channels.getChannels",{id:[{_:"inputChannel",channel_id:e,access_hash:"0"}]}).then(t=>{this.saveApiChats(t.chats)})}togglePreHistoryHidden(e,t){return this.migrateChat(e).then(a=>this.apiManager.invokeApi("channels.togglePreHistoryHidden",{channel:this.getChannelInput(a),enabled:t}).then(this.onChatUpdated.bind(this,a)))}toggleSignatures(e,t){return this.apiManager.invokeApi("channels.toggleSignatures",{channel:this.getChannelInput(e),enabled:t}).then(this.onChatUpdated.bind(this,e))}toggleNoForwards(e,t){return this.apiManager.invokeApi("messages.toggleNoForwards",{peer:this.getInputPeer(e),enabled:t}).then(this.onChatUpdated.bind(this,e))}setChatAvailableReactions(e,t){const a=this.appProfileManager.getCachedFullChat(e);return a&&(a.available_reactions=t,this.rootScope.dispatchEvent("chat_full_update",e)),this.apiManager.invokeApi("messages.setChatAvailableReactions",{peer:this.getInputPeer(e),available_reactions:t}).then(this.onChatUpdated.bind(this,e))}getSendAs(e){return this.apiManager.invokeApiSingleProcess({method:"channels.getSendAs",params:{peer:this.getChannelInputPeer(e)},processResult:t=>(this.appUsersManager.saveApiUsers(t.users),this.saveApiChats(t.chats),t.peers)})}importChatInvite(e){return this.apiManager.invokeApi("messages.importChatInvite",{hash:e}).then(t=>(this.apiUpdatesManager.processUpdateMessage(t),t.chats[0].id))}checkUsername(e,t){return this.apiManager.invokeApi("channels.checkUsername",{channel:this.getChannelInput(e),username:t})}getSponsoredMessage(e){return this.apiManager.invokeApiCacheable("channels.getSponsoredMessages",{channel:this.getChannelInput(e)},{cacheSeconds:300}).then(a=>{if(a._==="messages.sponsoredMessages"){this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats);const s=a.messages.shift();a.messages.push(s),a.messages.forEach(n=>{n.channel_post&&(n.channel_post=this.appMessagesIdsManager.generateMessageId(n.channel_post,n.from_id.channel_id))})}return a})}viewSponsoredMessage(e,t){return this.apiManager.invokeApiSingle("channels.viewSponsoredMessage",{channel:this.getChannelInput(e),random_id:t})}checkChatInvite(e){return this.apiManager.invokeApi("messages.checkChatInvite",{hash:e}).then(t=>(t.chat&&this.saveApiChat(t.chat,!0),t))}deactivateAllUsernames(e,t){const a=this.apiManager.invokeApi("channels.deactivateAllUsernames",{channel:this.getChannelInput(e)});return this.refreshChatAfterRequest(e,a,t)}makeChannelPrivate(e){const t=[this.updateUsername(e,"",!0),this.deactivateAllUsernames(e,!0)],a=Promise.all(t).then(()=>!0);return this.refreshChatAfterRequest(e,a)}refreshChatAfterRequest(e,t,a){return a?t:t.then(s=>this.getChannels([e]).then(()=>s))}getChannels(e){return this.apiManager.invokeApi("channels.getChannels",{id:e.map(t=>this.getChannelInput(t))}).then(t=>{this.saveApiChats(t.chats)})}toggleForum(e,t){return this.migrateChat(e).then(a=>this.apiManager.invokeApi("channels.toggleForum",{channel:this.getChannelInput(a),enabled:t}).then(this.onChatUpdated.bind(this,a)))}editForumTopic(e){const{chatId:t,topicId:a,title:s,iconEmojiId:n,closed:i,hidden:o}=e;return this.apiManager.invokeApi("channels.editForumTopic",{channel:this.getChannelInput(t),topic_id:K(a),title:s,icon_emoji_id:n,closed:i,hidden:o}).then(this.onChatUpdated.bind(this,t))}async createForumTopic(e){const{chatId:t,title:a,iconColor:s,iconEmojiId:n}=e,i=await this.appProfileManager.getChannelFull(t),o=i.default_send_as&&this.appPeersManager.getInputPeerById(this.appPeersManager.getPeerId(i.default_send_as));return this.apiManager.invokeApi("channels.createForumTopic",{channel:this.getChannelInput(t),title:a,icon_color:s,icon_emoji_id:n,random_id:Vt(),send_as:o}).then(p=>{this.onChatUpdated(t,p);const d=p.updates.find(f=>f._==="updateNewChannelMessage");return this.appMessagesIdsManager.generateMessageId(d.message.id,t)})}updatePinnedForumTopic(e,t,a){return this.apiManager.invokeApi("channels.updatePinnedForumTopic",{channel:this.getChannelInput(e),topic_id:K(t),pinned:a}).then(this.onChatUpdated.bind(this,e))}getGroupsForDiscussion(){return this.apiManager.invokeApi("channels.getGroupsForDiscussion").then(e=>(this.saveApiChats(e.chats),e.chats))}async setDiscussionGroup(e,t){return this.getChat(t)&&!this.isChannel(t)&&(t=await this.migrateChat(t)),t&&(await this.appProfileManager.getChannelFull(t)).pFlags.hidden_prehistory&&await this.togglePreHistoryHidden(t,!1),this.apiManager.invokeApi("channels.setDiscussionGroup",{broadcast:this.getChannelInput(e),group:this.getChannelInput(t)}).then(()=>{const a=this.appProfileManager.getCachedFullChat(e),s=t||a.linked_chat_id,n=this.appProfileManager.getCachedFullChat(s);a&&(a.linked_chat_id=t),n&&(n.linked_chat_id=e),a&&this.rootScope.dispatchEvent("chat_full_update",e),n&&this.rootScope.dispatchEvent("chat_full_update",s)})}async toggleAntiSpam(e,t){return this.isChannel(e)||(e=await this.migrateChat(e)),this.apiManager.invokeApi("channels.toggleAntiSpam",{channel:this.getChannelInput(e),enabled:t}).then(this.onChatUpdated.bind(this,e))}hideChatJoinRequest(e,t,a){return this.apiManager.invokeApi("messages.hideChatJoinRequest",{peer:this.appChatsManager.getInputPeer(e),user_id:this.appUsersManager.getUserInput(t),approved:a}).then(s=>this.onChatUpdated(e,s,!0))}}function ln(r){return r.charAt(0).toUpperCase()+r.slice(1)}const cr=new Set(["javascript:"]);function gn(r){if(!r)return null;try{const e=new URL(r).protocol;return cr.has(e)?null:e}catch{return null}}function ls(r,e){gn(r)||(r="https://"+r);const t={url:r};let a,s,n;if(a=r.match(/^(?:https?:\/\/)?(?:(.+?)\.)?(?:(?:web|k|z|a)\.)?t(?:elegram)?\.me(?:\/(.+))?/)){const i=new URL(r);let o=a[1];o&&ri.has(a[1])&&(o=void 0),o&&(i.pathname=o+(i.pathname==="/"?"":i.pathname));const p=i.pathname.slice(1),d=p.split("/");if(d[0]&&d[0][0]==="$"&&d[0].length>1)n="invoice";else if(/^\+/.test(p)&&!tr.test(p))n="joinchat";else if(d[0])switch(d[0]){case"addlist":case"joinchat":case"addstickers":case"addemoji":case"voicechat":case"invoice":if(d.length!==1&&!o){n=d[0];break}default:if(d.length<=2||d[1]?.match(/^\d+(?:\?(?:comment|thread)=\d+)?$/)){n="im";break}break}}else r.match(/^(?:https?:\/\/)?telesco\.pe\/([^/?]+)\/(\d+)/)?n="im":(s=r.match(/tg:(?:\/\/)?(.+?)(?:\?|$)/))&&(n="tg_"+s[1]);return window[n]||(n=void 0),t.onclick=n,t}be&&(be.wrapUrl=ls);function lr(r){r.setAttribute("dir","auto")}var Nt;(r=>{r.strings=new Map,r.countriesList=[];let e,t;r.requestedServerLanguage=!1,r.isRTL=!1;function a(S){r.isRTL=S}r.setRTL=a;function s(S){r.lastRequestedLangCode=S,r.lastRequestedNormalizedLangCode=S.split("-")[0]}function n(){return t||(t=Promise.all([Ut.get("langPack"),r.polyfillPromise]).then(([S])=>S?(r.lastRequestedLangCode||s(S.lang_code),y(S),S):p()).finally(()=>{t=void 0}))}r.getCacheLangPack=n;function i(){if(r.timeFormat==="h12")try{const S=R({hour:"numeric",minute:"numeric",hour12:!0}),A=new Date;A.setHours(0);const O=S.format(A);r.amPmCache.am=O.split(/\s/)[1],A.setHours(12);const z=S.format(A);r.amPmCache.pm=z.split(/\s/)[1]}catch(S){console.error("cannot get am/pm",S),r.amPmCache={am:"AM",pm:"PM"}}}function o(S,A=!!r.timeFormat&&r.timeFormat!==S){r.timeFormat=S,i(),A&&(w.clear(),Array.from(document.querySelectorAll(".i18n")).forEach(z=>{const re=r.weakMap.get(z);re instanceof q&&re.update()}))}r.setTimeFormat=o;function p(){const S=Te.langPackCode;return s(S),Promise.all([import("./lang-c1c2a466.js"),import("./langSign-f5a5610c.js"),import("./countries-5301fc59.js")]).then(([A,O,z])=>{const re=[];c(A.default,re),c(O.default,re);const we={_:"langPackDifference",from_version:0,lang_code:S,strings:re,version:0,local:!0,countries:z.default};return h(we)})}r.loadLocalLangPack=p;function d(S,A){A=!0,r.requestedServerLanguage=!0;const O=kt.managers;return Promise.all([O.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:S,lang_pack:A?"web":Te.langPack}),!A&&O.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:S,lang_pack:"android"}),import("./lang-c1c2a466.js"),import("./langSign-f5a5610c.js"),O.apiManager.invokeApiCacheable("help.getCountriesList",{lang_code:S,hash:0}),r.polyfillPromise])}r.loadLangPack=d;function f(S,A){return kt.managers.apiManager.invokeApi("langpack.getStrings",{lang_pack:Te.langPack,lang_code:S,keys:A})}r.getStrings=f;function c(S,A=[]){for(const O in S){const z=S[O];typeof z=="string"?A.push({_:"langPackString",key:O,value:z}):A.push({_:"langPackStringPluralized",key:O,...z})}return A}r.formatLocalStrings=c;function g(S,A){return s(S),d(S,A).then(([O,z,re,we,Re,rt])=>{let ne=[];return[re,we].forEach(Ne=>{c(Ne.default,ne)}),ne=ne.concat(...[O.strings,z.strings].filter(Boolean)),O.strings=ne,O.countries=Re,h(O)})}r.getLangPack=g;function h(S){return S.appVersion=Te.langPackVersion,Ut.set({langPack:S}).then(()=>(y(S),S))}r.saveLangPack=h,r.polyfillPromise=function(){return typeof Intl<"u"&&typeof Intl.PluralRules<"u"?Promise.resolve():import("./pluralPolyfill-61f068d6.js").then(A=>{window.Intl=Object.assign(typeof Intl<"u"?Intl:{},A.default)})}();function y(S){const A=r.lastRequestedLangCode;if(S.lang_code!==A)return;try{e=new Intl.PluralRules(r.lastRequestedNormalizedLangCode)}catch(z){console.error("pluralRules error",z),e=new Intl.PluralRules(r.lastRequestedNormalizedLangCode.split("-",1)[0])}try{e=new Intl.PluralRules(S.lang_code)}catch(z){console.error("pluralRules error",z),e=new Intl.PluralRules(S.lang_code.split("-",1)[0])}r.strings.clear();for(const z of S.strings)r.strings.set(z.key,z);S.countries&&(r.countriesList.length=0,r.countriesList.push(...S.countries.countries),S.countries.countries.forEach(z=>{if(z.name){const re=z.default_name;r.strings.set(re,{_:"langPackString",key:re,value:z.name})}})),r.lastAppliedLangCode!==A&&(r.lastAppliedLangCode&&kt.myId&&(kt.managers.appReactionsManager.resetAvailableReactions(),kt.managers.appUsersManager.indexMyself(),kt.managers.dialogsStorage.indexMyDialog()),r.lastAppliedLangCode=A,w.clear(),i(),kt.dispatchEvent("language_change",A)),Array.from(document.querySelectorAll(".i18n")).forEach(z=>{const re=r.weakMap.get(z);re&&re.update()})}r.applyLangPack=y;function P(S,A,O){const z=A[O.i++];Array.isArray(z)?S.push(...z):S.push(z)}function D(S,A,O={i:0}){const z=[],re=/(\*\*|__)(.+?)\1|(\n)|(\[.+?\]\(.*?\))|un\d|%\d\$.|%./g;let we=0;return S.replace(re,(Re,rt,ne,Ne,Se,qe,Mt)=>{if(z.push(Mt.slice(we,qe)),rt){let ke;switch(rt){case"**":{ke=document.createElement("b");break}case"__":{ke=document.createElement("i");break}}ke.append(...D(ne,A,O)),z.push(ke)}else if(Ne)z.push(document.createElement("br"));else if(Se){const ke=Se.lastIndexOf("]"),ot=Se.slice(1,ke),Qe=Se.slice(ke+2,Se.length-1);let Fe;if(Qe&&gn(Qe)){Fe=document.createElement("a");const Xe=ls(Qe);Fe.href=Xe.url,Xe.onclick&&Fe.setAttribute("onclick",Xe.onclick+"(this)"),Fe.target="_blank"}else Fe=A[O.i++],Fe instanceof DocumentFragment&&(Fe=Fe.firstChild),typeof Fe!="string"&&(Fe.textContent="");const nt=D(ot,A,O);typeof Fe=="string"?z.push(...nt):(Fe.append(...nt),z.push(Fe))}else A&&P(z,A,O);return we=qe+Re.length,""}),we!==S.length&&z.push(S.slice(we)),z}r.superFormatter=D;function v(S,A=!1,O){const z=r.strings.get(S);let re;if(z)if(z._==="langPackStringPluralized"&&O?.length){let Re=O[0];typeof Re=="string"&&(Re=+Re.replace(/\D/g,""));const rt=e.select(Re);re=z[rt+"_value"]||z.other_value}else z._==="langPackString"?re=z.value:re=S;else re=S;const we=D(re,O);return A?we.map(Re=>Re instanceof Node?Re.textContent:Re).join(""):we}r.format=v,r.weakMap=new WeakMap;class k{constructor(A){this.element=A?.element||document.createElement("span"),this.element.classList.add("i18n"),this.property=A?.property,r.weakMap.set(this.element,this)}}class L extends k{constructor(A={}){super({...A,property:A.property??"innerHTML"}),A?.key&&this.update(A)}update(A){if(Za(this,A),this.property==="innerHTML")this.element.textContent="",this.element.append(...v(this.key,!1,this.args));else{const O=this.element[this.property],z=v(this.key,!0,this.args);O===void 0?this.element.dataset[this.property]=z:this.element[this.property]=z}}compareAndUpdate(A){if(!(this.key===A.key&&Ct(this.args,A.args)))return this.update(A)}}r.IntlElement=L;const w=new Map;function R(S={}){const A=JSON.stringify(S);let O=w.get(A);return O||(O=new Intl.DateTimeFormat(r.lastRequestedNormalizedLangCode+"-u-hc-"+r.timeFormat,S),w.set(A,O)),O}r.getDateTimeFormat=R,r.amPmCache={am:"AM",pm:"PM"};class q extends k{constructor(A){super({...A,property:A.property??"textContent"}),lr(this.element),A?.date&&this.update(A)}update(A){Za(this,A);let O;if(this.options.hour&&this.options.minute&&Object.keys(this.options).length===2){const z=this.date.getHours();O=("0"+(r.timeFormat==="h12"?z%12||12:z)).slice(-2)+":"+("0"+this.date.getMinutes()).slice(-2),r.timeFormat==="h12"&&(O+=" "+(z<12?r.amPmCache.am:r.amPmCache.pm))}else{const z=R(this.options);O=ln(z.format(this.date))}this.element[this.property]=O}}r.IntlDateElement=q;function J(S,A){return new L({key:S,args:A}).element}r.i18n=J;function Y(S){return new L(S).element}r.i18n_=Y;function pe(S,A,O,z){return new L({element:S,key:A,args:O,property:z}).element}r._i18n=pe})(Nt||(Nt={}));var ea=Nt;Nt.i18n;Nt.i18n_;Nt._i18n;be&&(be.I18n=Nt);const gs=["January","February","March","April","May","June","July","August","September","October","November","December"],gr=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ms=gs.slice(),mr=gr.slice(),Xa=86400,Es=r=>{const e=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);const a=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-a.getTime())/Xa+1)/7)};function hr(r){const e=new Date,t=e.getTime()/1e3|0,a=r.getTime()/1e3|0,s={};return t-a<Xa&&e.getDate()===r.getDate()?s.hour=s.minute="2-digit":e.getFullYear()!==r.getFullYear()?(s.year=s.day="numeric",s.month="2-digit"):t-a<Xa*7&&Es(e)===Es(r)?s.weekday="short":(s.month="short",s.day="numeric"),new ea.IntlDateElement({date:r,options:s}).element}be&&(be.formatDateAccordingToTodayNew=hr);const ur=(r,e={})=>{const t=e.monthAsNumber?".":" ",a=("0"+r.getHours()).slice(-2)+":"+("0"+r.getMinutes()).slice(-2)+(e.noSeconds?"":":"+("0"+r.getSeconds()).slice(-2));return(e.leadingZero?("0"+r.getDate()).slice(-2):r.getDate())+t+(e.monthAsNumber?("0"+(r.getMonth()+1)).slice(-2):gs[r.getMonth()])+t+r.getFullYear()+(e.noTime?"":", "+a)},Pt=2013,yr=new RegExp("20[0-9]{1,2}"),hs="\\p{L}",_r=new RegExp(`(${hs}{3,})`,"iu"),Mr=new RegExp(`(${hs}{3,}) ([0-9]{0,4})`,"iu"),Pr=new RegExp(`([0-9]{0,4}) (${hs}{2,})`,"iu"),vr=new RegExp("^([0-9]{1,4})(\\.| |/|\\-)([0-9]{1,4})$","i"),br=new RegExp("^([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,4})$","i"),Sr=[31,29,31,30,31,30,31,31,30,31,30,31];function Cr(r,e){const t=r.trim().toLowerCase();if(t.length<3)return;if(["today",ea.format("Peer.Status.Today",!0)].some(n=>n.indexOf(t)===0)){const n=new Date,i=n.getFullYear(),o=n.getMonth(),p=n.getDate();n.setFullYear(i,o,p),n.setHours(0,0,0);const d=n.getTime();n.setFullYear(i,o,p+1),n.setHours(0,0,0);const f=n.getTime()-1;e.push({title:ea.format("Date.Today",!0),minDate:d,maxDate:f});return}if(["yesterday",ea.format("Peer.Status.Yesterday",!0)].some(n=>n.indexOf(t)===0)){const n=new Date,i=n.getFullYear(),o=n.getMonth(),p=n.getDate();n.setFullYear(i,o,p),n.setHours(0,0,0);const d=n.getTime()-864e5;n.setFullYear(i,o,p+1),n.setHours(0,0,0);const f=n.getTime()-86400001;e.push({title:ln(ea.format("Yesterday",!0)),minDate:d,maxDate:f});return}const a=kr(t);if(a>=0){const n=new Date,i=n.getTime(),o=n.getDay(),p=a-o;n.setDate(n.getDate()+p),n.getTime()>i&&n.setTime(n.getTime()-6048e5);const d=n.getFullYear(),f=n.getMonth(),c=n.getDate();n.setFullYear(d,f,c),n.setHours(0,0,0);const g=n.getTime();n.setFullYear(d,f,c+1),n.setHours(0,0,0);const h=n.getTime()-1;e.push({title:hn(g),minDate:g,maxDate:h});return}let s;if((s=vr.exec(t))!==null){const n=s[1],i=s[3],o=parseInt(n),p=parseInt(i);if(o>0&&o<=31){if(p>=Pt&&o<=12){const d=p,f=o-1;Qt(e,f,d);return}else if(p<=12){const d=o-1,f=p-1;Na(e,d,f)}}else if(o>=Pt&&p<=12){const d=o,f=p-1;Qt(e,f,d)}return}if((s=br.exec(t))!==null){const n=s[1],i=s[3],o=s[5];if(!s[2]===s[4])return;const p=parseInt(n),d=parseInt(i)-1;let f=parseInt(o);f>=10&&f<=99&&(f+=2e3);const c=new Date().getFullYear();if(un(p-1,d)&&f>=Pt&&f<=c){const g=new Date;g.setFullYear(f,d,p),g.setHours(0,0,0);const h=g.getTime();g.setFullYear(f,d,p+1),g.setHours(0,0,0);const y=g.getTime()-1;e.push({title:mn(h),minDate:h,maxDate:y});return}return}if((s=Mr.exec(t))!==null){const n=s[1],i=s[2],o=qa(n);if(o>=0){const p=+i||new Date().getUTCFullYear();if(p>0&&p<=31){const d=p-1;Na(e,d,o);return}else if(p>=Pt){Qt(e,o,p);return}}}if((s=Pr.exec(t))!==null){const n=s[1],i=s[2],o=qa(i);if(o>=0){const p=+n;if(p>0&&p<=31){const d=p-1;Na(e,d,o);return}else p>=Pt&&Qt(e,o,p)}}if((s=_r.exec(t))!==null){const n=s[1],i=qa(n);if(i>=0){const o=new Date().getFullYear();for(let p=o;p>=Pt;--p)Qt(e,i,p)}}if((s=yr.exec(t))!==null){let n=+s[0];const i=new Date().getFullYear();if(n<Pt){n=Pt;for(let o=i;o>=n;o--){const p=new Date;p.setFullYear(o,0,1),p.setHours(0,0,0);const d=p.getTime();p.setFullYear(o+1,0,1),p.setHours(0,0,0);const f=p.getTime()-1;e.push({title:""+o,minDate:d,maxDate:f})}}else if(n<=i){const o=new Date;o.setFullYear(n,0,1),o.setHours(0,0,0);const p=o.getTime();o.setFullYear(n+1,0,1),o.setHours(0,0,0);const d=o.getTime()-1;e.push({title:""+n,minDate:p,maxDate:d})}return}}function Qt(r,e,t){const a=new Date().getFullYear(),s=Date.now();if(t>=Pt&&t<=a){const n=new Date;n.setFullYear(t,e,1),n.setHours(0,0,0);const i=n.getTime();if(i>s)return;n.setMonth(n.getMonth()+1);const o=n.getTime()-1;r.push({title:Dr(i),minDate:i,maxDate:o})}}function Na(r,e,t){if(un(e,t)){const a=new Date().getFullYear(),s=Date.now();for(let n=a;n>=Pt;n--){if(t===1&&e===28&&!wr(n))continue;const i=new Date;i.setFullYear(n,t,e+1),i.setHours(0,0,0);const o=i.getTime();if(o>s)continue;i.setFullYear(n,t,e+2),i.setHours(0,0,0);const p=i.getTime()-1;n===a?r.push({title:Ir(o),minDate:o,maxDate:p}):r.push({title:mn(o),minDate:o,maxDate:p})}}}function Dr(r){const e=new Date(r);return ms[e.getMonth()]+" "+e.getFullYear()}function Ir(r){const e=new Date(r);return ms[e.getMonth()]+" "+e.getDate()}function mn(r){const e=new Date(r);return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()}function hn(r){const e=new Date(r);return mr[e.getDay()]}function un(r,e){return e>=0&&e<12&&r>=0&&r<Sr[e]}function wr(r){return r%4===0&&r%100!==0||r%400===0}function qa(r){r=r.toLowerCase();for(let e=0;e<12;e++)if([gs[e],ms[e]].some(t=>t.toLowerCase().indexOf(r)===0))return e;return-1}function kr(r){const e=new Date;if(r.length<=3)return-1;for(let t=0;t<7;t++)if(e.setDate(e.getDate()+1),hn(e.getTime()).toLowerCase().indexOf(r)===0)return e.getDay();return-1}be.fillTipDates=Cr;function yn(r,e,t){"byteLength"in t[r]&&(t[r]=[...t[r]]),e&&e[r]!==t[r]&&(e[r].length=t[r].length,t[r].forEach((a,s)=>{e[r][s]=a}),t[r]=e[r])}function Ar(r){const e="⠁⠂⠄⠈⠐⠠⡀⢀⠃⠅⠆⠉⠊⠌⠑⠒⠔⠘⠡⠢⠤⠨⠰⡁⡂⡄⡈⡐⡠⢁⢂⢄⢈⢐⢠⣀⠇⠋⠍⠎⠓⠕⠖⠙⠚⠜⠣⠥⠦⠩⠪⠬⠱⠲⠴⠸⡃⡅⡆⡉⡊⡌⡑⡒⡔⡘⡡⡢⡤⡨⡰⢃⢅⢆⢉⢊⢌⢑⢒⢔⢘⢡⢢⢤⢨⢰⣁⣂⣄⣈⣐⣠⠏⠗⠛⠝⠞⠧⠫⠭⠮⠳⠵⠶⠹⠺⠼⡇⡋⡍⡎⡓⡕⡖⡙⡚⡜⡣⡥⡦⡩⡪⡬⡱⡲⡴⡸⢇⢋⢍⢎⢓⢕⢖⢙⢚⢜⢣⢥⢦⢩⢪⢬⢱⢲⢴⢸⣃⣅⣆⣉⣊⣌⣑⣒⣔⣘⣡⣢⣤⣨⣰⠟⠯⠷⠻⠽⠾⡏⡗⡛⡝⡞⡧⡫⡭⡮⡳⡵⡶⡹⡺⡼⢏⢗⢛⢝⢞⢧⢫⢭⢮⢳⢵⢶⢹⢺⢼⣇⣋⣍⣎⣓⣕⣖⣙⣚⣜⣣⣥⣦⣩⣪⣬⣱⣲⣴⣸⠿⡟⡯⡷⡻⡽⡾⢟⢯⢷⢻⢽⢾⣏⣗⣛⣝⣞⣧⣫⣭⣮⣳⣵⣶⣹⣺⣼⡿⢿⣟⣯⣷⣻⣽⣾⣿",t=e.length,a=[];for(let s=0;s<r.length;++s){const n=r.charCodeAt(s);a.push(e[n%t])}return a.join("")}function Fr(r,e){const t=r.slice(0,e.offset),a=r.slice(e.offset,e.offset+e.length),s=Ar(a),n=r.slice(e.offset+e.length);return r=t+s+n,{text:r,entityText:s}}function Er(r,e=[]){return e.forEach(t=>{t._==="messageEntitySpoiler"&&(r=Fr(r,t).text)}),r}function us(r,e){return{_:"inputDocumentFileLocation",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference,thumb_size:e}}const Bt="_";function Ta(r,e){const t="",a=t[t.length-1]||"";let s;switch(r._){case"inputPhotoFileLocation":{s=["photo",t[0],r.id,r.thumb_size].filter(Boolean).join(Bt);break}case"inputDocumentFileLocation":{s=["document",t[0],r.id,r.thumb_size].filter(Boolean).join(Bt);break}case"inputPeerPhotoFileLocation":s=["peerPhoto",r.photo_id,r.pFlags.big?"big":"small"].join(Bt);break;case"inputStickerSetThumb":{s=["stickerSetThumb",r.stickerset.id||r.stickerset.short_name||r.stickerset.emoticon||r.stickerset._,r.thumb_version].join(Bt);break}case"inputFileLocation":{s=[r.volume_id,r.local_id].join(Bt);break}case"inputWebFileLocation":{s=["webFile",r.url].join(Bt);break}case"inputWebFileGeoPointLocation":{const n=r.geo_point;s=["geoPoint",n.lat,n.long,r.w,r.h,r.zoom,r.scale].join(Bt);break}default:{console.error("Unrecognized location:",r),s="";break}}return s+(e?.downloadId?"_download":"")+(a&&"."+a)}function Ur(r,e){const t=encodeURIComponent(JSON.stringify(e));return r+"/"+t}function _n(r,e,t,a){const s=us(r,e?.type);let n;return e?._==="photoSize"?n=r.sticker?"image/webp":r.mime_type.startsWith("image/")?r.mime_type:"image/jpeg":n=r.mime_type||"application/octet-stream",{dcId:r.dc_id,location:s,size:e?e.size:r.size,mimeType:n,fileName:r.file_name,queueId:t,onlyCache:a}}function Tr(r,e=!1,t){let a;return e?a="download":t?a="thumb":r.supportsStreaming?a="stream":a="document",Ur(a,_n(r,t))}const We={pdf:"application/pdf",tgv:"application/x-tgwallpattern",tgs:"application/x-tgsticker",json:"application/json",wav:"audio/wav",mp3:"audio/mpeg",ogg:"audio/ogg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",mp4:"video/mp4",webm:"video/webm",mov:"video/quicktime",svg:"image/svg+xml"},Mn={};for(const r in We)Mn[We[r]]=r;let Rr=0;class Br extends ce{constructor(){super(...arguments),this.onServiceWorkerFail=()=>{for(const e in this.docs){const t=this.docs[e];t.supportsStreaming&&(delete t.supportsStreaming,this.thumbsStorage.deleteCacheContext(t))}}}after(){this.docs={},this.stickerCachedThumbs={},this.uploadingWallPapers={},mt.getInstance().addEventListener("serviceWorkerOnline",e=>{e||this.onServiceWorkerFail()})}saveDoc(e,t){if(!e||e._==="documentEmpty")return;const a=this.docs[e.id];e.file_reference&&(yn("file_reference",a,e),this.referenceDatabase.saveContext(e.file_reference,t)),a||(this.docs[e.id]=e);for(let s=0,n=e.attributes.length;s<n;++s){const i=e.attributes[s];switch(i._){case"documentAttributeFilename":{e.file_name=Er(i.file_name);break}case"documentAttributeAudio":{if(e.type==="round")break;e.duration=i.duration,e.type=i.pFlags.voice&&e.mime_type===We.ogg?"voice":"audio";break}case"documentAttributeVideo":{e.duration=i.duration,e.w=i.w,e.h=i.h,i.pFlags.round_message?e.type="round":e.type="video";break}case"documentAttributeCustomEmoji":case"documentAttributeSticker":{if(i.alt!==void 0&&(e.stickerEmojiRaw=i.alt),i.stickerset&&(i.stickerset._==="inputStickerSetEmpty"?delete i.stickerset:i.stickerset._==="inputStickerSetID"&&(e.stickerSetInput=i.stickerset)),e.mime_type===We.webp&&(e.thumbs||dt().IS_WEBP_SUPPORTED))e.type="sticker",e.sticker=1;else if(e.mime_type===We.webm){if(!dt().IS_WEBM_SUPPORTED)break;e.type="sticker",e.sticker=3,e.animated=!0}break}case"documentAttributeImageSize":{e.type="photo",e.w=i.w,e.h=i.h;break}case"documentAttributeAnimated":{(e.mime_type===We.gif||e.mime_type===We.mp4)&&(e.type="gif"),e.animated=!0;break}}}if(e.mime_type)e.mime_type===We.pdf?e.type="pdf":e.mime_type===We.gif?e.type="gif":e.mime_type===We.tgs&&e.file_name==="AnimatedSticker.tgs"&&(e.type="sticker",e.animated=!0,e.sticker=2);else{const s=(e.file_name||"").split(".").pop(),n=s&&We[s.toLowerCase()];if(n)e.mime_type=n;else switch(e.type){case"gif":case"video":case"round":e.mime_type=We.mp4;break;case"sticker":e.mime_type=We.webp;break;case"audio":e.mime_type=We.mp3;break;case"voice":e.mime_type=We.ogg;break;default:e.mime_type="application/octet-stream";break}}if(e.type==="voice"||e.type==="round"){const s=e.attributes.find(o=>o._==="documentAttributeFilename"),n=s&&s.file_name.split(".").pop(),i=ur(new Date(e.date*1e3),{monthAsNumber:!0,leadingZero:!0}).replace(/[:\.]/g,"-").replace(", ","_");e.file_name=`${e.type}_${i}${n?"."+n:""}`}return At.isServiceWorkerOnline&&(e.type==="gif"&&e.size>8e6||e.type==="audio"||e.type==="video")?(e.supportsStreaming=!0,this.thumbsStorage.getCacheContext(e).url||this.thumbsStorage.setCacheContextURL(e,void 0,Tr(e),0)):e.supportsStreaming=!1,e.file_name||(e.file_name=""),a?Object.assign(a,e):e}getDoc(e){return $e(e)?e:this.docs[e]}downloadDoc(e,t,a){return this.apiFileManager.downloadMedia({media:e,queueId:t,onlyCache:a})}getLottieCachedThumb(e,t){return this.stickerCachedThumbs[e]?.[t]}saveLottiePreview(e,t,a,s,n){var d,f;const i=this.getDoc(e);if(!i)return;const o=(d=this.stickerCachedThumbs)[f=i.id]??(d[f]={}),p=o[n];p&&p.w>=a&&p.h>=s||(o[n]={url:URL.createObjectURL(t),w:a,h:s})}clearColoredStickerThumbs(){for(const e in this.stickerCachedThumbs){const t=this.stickerCachedThumbs[e];for(const a in t)if(isNaN(+a)){const s=t[a];URL.revokeObjectURL(s.url),delete t[a]}}}saveWebPConvertedStrippedThumb(e,t){const a=this.getDoc(e);if(!a)return;const s=a.thumbs&&a.thumbs.find(n=>n._==="photoStrippedSize");s&&(a.pFlags.stickerThumbConverted=!0,s.bytes=t)}prepareWallPaperUpload(e){const t="wallpaper-upload-"+ ++Rr,a={_:"photoSize",h:0,w:0,location:{},size:e.size,type:sa};let s={_:"document",access_hash:"",attributes:[],dc_id:0,file_reference:[],id:t,mime_type:e.type,size:e.size,date:ve(!0),pFlags:{},thumbs:[a],file_name:e.name};s=this.saveDoc(s);const n=this.thumbsStorage.setCacheContextURL(s,void 0,URL.createObjectURL(e),e.size),i={_:"wallPaper",access_hash:"",document:s,id:t,slug:t,pFlags:{}};return this.uploadingWallPapers[t]={cacheContext:n,file:e},i}uploadWallPaper(e){const{cacheContext:t,file:a}=this.uploadingWallPapers[e];return delete this.uploadingWallPapers[e],this.apiFileManager.upload({file:a,fileName:a.name}).then(n=>this.apiManager.invokeApi("account.uploadWallPaper",{file:n,mime_type:a.type,settings:{_:"wallPaperSettings",pFlags:{}}}).then(i=>(i.document=this.saveDoc(i.document),this.thumbsStorage.setCacheContextURL(i.document,void 0,t.url,t.downloaded),i)))}getGifs(){return this.apiManager.invokeApiHashable({method:"messages.getSavedGifs",processResult:e=>e.gifs.map(t=>this.saveDoc(t))})}requestDocPart(e,t,a,s){const n=this.getDoc(e);return n?this.apiFileManager.requestFilePart(t,us(n),a,s):Promise.reject(Ue("NO_DOC"))}}function xr(r,e){return typeof r!=typeof e?!1:$e(r)?!(r._!==e._||r._==="draftMessage"&&e._===r._&&(r.reply_to_msg_id!==e.reply_to_msg_id||!Ct(r.entities,e.entities)||r.message!==e.message||r.pFlags.no_webpage!==e.pFlags.no_webpage)):!0}class Lr extends ce{constructor(){super(...arguments),this.drafts={}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateDraftMessage:e=>{const t=this.appPeersManager.getPeerId(e.peer);this.saveDraft({peerId:t,threadId:e.threadId,draft:e.draft,notify:!0})}}),Ut.get("drafts").then(e=>{this.drafts=e||{}})}getKey(e,t){return""+e+(t?"_"+t:"")}getDraft(e,t){return this.drafts[this.getKey(e,t)]}addMissedDialogs(){return this.getAllDrafts().then(()=>{for(const e in this.drafts){if(e.indexOf("_")!==-1)continue;const t=e.toPeerId();this.appMessagesManager.getDialogOnly(t)||this.appMessagesManager.reloadConversation(t)}})}getAllDrafts(){return this.getAllDraftPromise??(this.getAllDraftPromise=this.apiManager.invokeApi("messages.getAllDrafts").then(e=>{(this.apiUpdatesManager.updatesState.syncLoading||Promise.resolve()).then(()=>{this.apiUpdatesManager.processUpdateMessage(e)})}))}saveDraft({peerId:e,threadId:t,draft:a,notify:s,force:n}){const i=this.processApiDraft(a,e),o=this.getKey(e,t);return i?this.drafts[o]=i:delete this.drafts[o],Ut.set({drafts:this.drafts}),s&&this.rootScope.dispatchEvent("draft_updated",{peerId:e,threadId:t,draft:i,force:n}),i}isEmptyDraft(e){return e?._!=="draftMessage"?!0:e.reply_to_msg_id!==void 0&&e.reply_to_msg_id>0?!1:!e.message.length}processApiDraft(e,t){if(e?._==="draftMessage"){if(e.reply_to_msg_id){const a=this.appPeersManager.isChannel(t)?t.toChatId():void 0;e.reply_to_msg_id=this.appMessagesIdsManager.generateMessageId(e.reply_to_msg_id,a)}return e}}syncDraft(e,t,a,s=!0,n=!1){const i=this.getDraft(e,t);if(xr(i,a))return!0;const o={peer:this.appPeersManager.getInputPeerById(e),message:""};let p;if(this.isEmptyDraft(a))p={_:"draftMessageEmpty"};else{const f=a.message,c=a.entities;a.reply_to_msg_id&&(o.reply_to_msg_id=K(a.reply_to_msg_id)),c?.length&&(o.entities=this.appMessagesManager.getInputEntities(c)),a.pFlags.no_webpage&&(o.no_webpage=a.pFlags.no_webpage),o.message=f}t&&(o.top_msg_id=K(t));const d=p||a;return d.date=ve(!0)+this.timeManager.getServerTimeOffset(),this.saveDraft({peerId:e,threadId:t,draft:d,notify:!0,force:n}),s?this.apiManager.invokeApi("messages.saveDraft",o):!0}clearAllDrafts(){return this.apiManager.invokeApi("messages.clearAllDrafts").then(e=>{if(e)for(const t in this.drafts){const[a,s]=t.split("_");this.rootScope.dispatchEvent("draft_updated",{peerId:a.toPeerId(),threadId:s?+s:void 0,draft:void 0})}})}clearDraft(e,t){const a={_:"draftMessageEmpty"};t?this.syncDraft(e,t,a,!1,!0):this.saveDraft({peerId:e,threadId:t,draft:a,notify:!0,force:!0})}setDraft(e,t,a,s){const n={_:"draftMessage",date:ve(!0),message:a,pFlags:{},entities:s};t?this.syncDraft(e,t,n,!1,!0):this.saveDraft({peerId:e,threadId:t,draft:n,notify:!0,force:!0})}}function Pn(r,e,t,a,s,n){for(const i in r){const o=n?`${n}.${i}`:i;s?.has(o)||(typeof e[i]!=typeof r[i]?(e[i]=at(r[i]),t?.(a||i)):$e(r[i])&&Pn(r[i],e[i],t,a||i,s,o))}}function ra(r,e){return r=r.replace(/[\u2640\u2642\u2764](?!\ufe0f)/g,(t,a,s)=>{if(e){const n=t.length;a+=n,e.forEach(i=>{const o=i.offset+i.length;o===a?i.length+=n:o>a&&(i.offset+=n)})}return t+"️"}),r}const Or={keywords:{},version:0,langCode:Te.langPackCode},Ga=32,es=class extends ce{constructor(){super(...arguments),this.keywordLangPacks={},this.indexedLangPacks={},this.getKeywordsPromises={},this.recent={},this.getRecentEmojisPromises={},this.getCustomEmojiDocumentPromises=new Map}getEmojiKeywords(r=Te.langPackCode){const e=this.getKeywordsPromises[r];if(e)return e;const t="emojiKeywords_"+r;return this.getKeywordsPromises[r]=Ut.get(t).then(a=>($e(a)||(a={}),Pn(Or,a),a.langCode=r,this.keywordLangPacks[r]=a,this.apiManager.invokeApi("messages.getEmojiKeywordsDifference",{lang_code:a.langCode,from_version:a.version}).then(s=>{a.version=s.version;const n=a.keywords,i=s.keywords;for(let o=0,p=i.length;o<p;++o){const{keyword:d,emoticons:f}=i[o];n[d]=f}return Ut.set({[t]:a}),a},()=>a)))}getBothEmojiKeywords(){const r=[this.getEmojiKeywords()];return this.networkerFactory.language!==Te.langPackCode&&r.push(this.getEmojiKeywords(this.networkerFactory.language)),this.recent.native||r.push(this.getRecentEmojis("native")),Promise.all(r)}indexEmojis(){this.index||(this.index=new Ua(void 0,2));for(const r in this.keywordLangPacks){if(this.indexedLangPacks[r])continue;const t=this.keywordLangPacks[r].keywords;for(const a in t){const s=t[a];this.index.indexObject(s,a)}this.indexedLangPacks[r]=!0}}searchEmojis(r){this.indexEmojis(),r=r.toLowerCase().replace(/_/g," ");let e;if(r.trim()){const t=this.index.search(r);e=Array.from(t).reduce((a,s)=>a.concat(s),[])}else e=this.recent.native.concat(es.POPULAR_EMOJI).slice(0,Ga);return e=Array.from(new Set(e)),e}getRecentEmojis(r){const e=this.getRecentEmojisPromises;return e[r]??(e[r]=this.appStateManager.getState().then(t=>{let a=[];if(r==="native"){const{recentEmoji:s}=t;a=Array.isArray(s)&&s.length?s:es.POPULAR_EMOJI}else{const{recentCustomEmoji:s}=t;a=Array.isArray(s)&&s.length?s:[]}return this.recent[r]=a}))}pushRecentEmoji(r){const e=r.docId?"custom":"native";r.emoji=ra(r.emoji),this.getRecentEmojis(e).then(t=>{const a=r.docId||r.emoji;Ye(t,a),t.unshift(a),t.splice(Ga,t.length-Ga),this.appStateManager.pushToState(e==="custom"?"recentCustomEmoji":"recentEmoji",t),this.rootScope.dispatchEvent("emoji_recent",r)})}getCustomEmojiDocuments(r){return r.length?this.apiManager.invokeApi("messages.getCustomEmojiDocuments",{document_id:r}).then(e=>e.map(t=>this.appDocsManager.saveDoc(t,{type:"customEmoji",docId:t.id}))):Promise.resolve([])}getCachedCustomEmojiDocuments(r){return r.map(e=>this.appDocsManager.getDoc(e))}setDebouncedGetCustomEmojiDocuments(){this.getCustomEmojiDocumentsPromise||!this.getCustomEmojiDocumentPromises.size||(this.getCustomEmojiDocumentsPromise=ft(0).then(()=>{const r=[...this.getCustomEmojiDocumentPromises.keys()],e=[];do{const t=r.splice(0,100),a=this.getCustomEmojiDocuments(t).then(s=>{s.forEach((n,i)=>{const o=t[i],p=this.getCustomEmojiDocumentPromises.get(o);this.getCustomEmojiDocumentPromises.delete(o),p.resolve(n)})});e.push(a)}while(r.length);return Promise.all(e)}).finally(()=>{this.getCustomEmojiDocumentsPromise=void 0,this.setDebouncedGetCustomEmojiDocuments()}))}getCustomEmojiDocument(r){let e=this.getCustomEmojiDocumentPromises.get(r);if(e)return e;const t=this.appDocsManager.getDoc(r);return t||(e=Me(),this.getCustomEmojiDocumentPromises.set(r,e),this.setDebouncedGetCustomEmojiDocuments(),e)}getCustomEmojis(){return this.appStickersManager.getEmojiStickers()}};let vn=es;vn.POPULAR_EMOJI=["😂","😘","❤️","😍","😊","😁","👍","☺️","😔","😄","😭","💋","😒","😳","😜","🙈","😉","😃","😢","😝","😱","😡","😏","😞","😅","😚","🙊","😌","😀","😋","😆","👌","😐","😕"];const Us=100;class Vr extends ce{after(){this.log=Le("GROUP-CALLS"),this.groupCalls=new Map,this.participants=new Map,this.nextOffsets=new Map,this.apiUpdatesManager.addMultipleEventsListeners({updateGroupCall:e=>{this.saveGroupCall(e.call,e.chat_id)},updateGroupCallParticipants:e=>{this.saveGroupCall(e.call);const t=e.call.id;this.saveApiParticipants(t,e.participants)}}),this.rootScope.addEventListener("group_call_update",e=>{e._==="groupCallDiscarded"&&this.participants.delete(e.id)})}getCachedParticipants(e){let t=this.participants.get(e);return t||this.participants.set(e,t=new Map),t}prepareToSavingNextOffset(e){const t=this.nextOffsets,a=n=>{t.get(e)===s&&t.set(e,n)},s=t.get(e);return{nextOffset:s,setNextOffset:a}}saveApiParticipant(e,t,a){const s=this.getCachedParticipants(e),n=lt(t.peer),i=s.get(n),o=t.pFlags.left;if(!i&&o)return;!t.pFlags.muted&&!t.pFlags.can_self_unmute&&(t.pFlags.can_self_unmute=!0),i?(Ot(i,t),t=i):s.set(n,t);const p=this.getGroupCall(e);if(p?._==="groupCall"){let d=!1;o?(--p.participants_count,d=!0):t.pFlags.just_joined&&!i&&!t.pFlags.self&&(++p.participants_count,d=!0),d&&this.rootScope.dispatchEvent("group_call_update",p)}o&&s.delete(n),this.rootScope.dispatchEvent("group_call_participant",{groupCallId:e,participant:t})}saveApiParticipants(e,t,a){t.saved||(t.saved=!0,t.forEach(s=>this.saveApiParticipant(e,s,a)))}async editParticipant(e,t,a){this.saveApiParticipant(e,t);const s=t.pFlags.self?ct:lt(t.peer),n=await this.apiManager.invokeApiSingle("phone.editGroupCallParticipant",{call:this.getGroupCallInput(e),participant:s===ct?this.appPeersManager.getInputPeerSelf():this.appPeersManager.getInputPeerById(s),muted:a.muted,volume:a.volume,raise_hand:a.raiseHand,video_paused:a.videoPaused,video_stopped:a.videoStopped,presentation_paused:a.presentationPaused});this.apiUpdatesManager.processUpdateMessage(n)}getGroupCall(e){return this.groupCalls.get(e)}async getGroupCallFull(e,t){const a=this.getGroupCall(e);if(a&&a._!=="inputGroupCall"&&!t)return a;const s=this.getCachedParticipants(e).size?0:Us;return this.apiManager.invokeApiSingleProcess({method:"phone.getGroupCall",params:{call:this.getGroupCallInput(e),limit:s},processResult:n=>{this.appUsersManager.saveApiUsers(n.users),this.appChatsManager.saveApiChats(n.chats),this.saveApiParticipants(e,n.participants,!0);const i=this.saveGroupCall(n.call);return s&&this.nextOffsets.get(e)===void 0&&this.nextOffsets.set(e,n.participants_next_offset),i}})}saveGroupCall(e,t){const a=this.groupCalls.get(e.id),s=e._!=="inputGroupCall"&&(!a||a._!=="groupCallDiscarded");return a?(s&&Ot(a,e),e=a):this.groupCalls.set(e.id,e),s&&this.rootScope.dispatchEvent("group_call_update",e),e}async createGroupCall(e,t,a){const s=await this.apiManager.invokeApi("phone.createGroupCall",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0)),random_id:Zt(32),schedule_date:t,title:a});return this.apiUpdatesManager.processUpdateMessage(s),s.updates.find(i=>i._==="updateGroupCall").call}getGroupCallInput(e){const t=this.getGroupCall(e);return{_:"inputGroupCall",id:t.id,access_hash:t.access_hash}}async getGroupCallParticipants(e){const{nextOffset:t,setNextOffset:a}=this.prepareToSavingNextOffset(e);return t!==""&&await this.apiManager.invokeApiSingleProcess({method:"phone.getGroupParticipants",params:{call:this.getGroupCallInput(e),ids:[],sources:[],offset:t||"",limit:Us},processResult:s=>{const n=s.count===s.participants.length?"":s.next_offset;this.appChatsManager.saveApiChats(s.chats),this.appUsersManager.saveApiUsers(s.users),this.saveApiParticipants(e,s.participants),a(n)}}),{participants:this.getCachedParticipants(e),isEnd:this.nextOffsets.get(e)===""}}hangUp(e,t){const a=this.getGroupCallInput(e);let s;return typeof t=="boolean"&&t?s=this.apiManager.invokeApi("phone.discardGroupCall",{call:a}):typeof t=="number"?s=this.apiManager.invokeApi("phone.leaveGroupCall",{call:a,source:t}):s=this.apiManager.invokeApi("phone.joinGroupCall",{call:a,join_as:this.appPeersManager.getInputPeerSelf(),muted:!0,video_stopped:!0,params:{_:"dataJSON",data:""}}),s.then(n=>{this.apiUpdatesManager.processUpdateMessage(n)})}async joinGroupCall(e,t,a){const s=this.getGroupCallInput(e);let n;if(a.type==="main"){const p={call:s,join_as:this.appPeersManager.getInputPeerSelf(),params:t,muted:a.isMuted,video_stopped:!a.joinVideo};n=this.apiManager.invokeApi("phone.joinGroupCall",p),this.log(`[api] joinGroupCall id=${e}`,p)}else{const p={call:s,params:t};n=this.apiManager.invokeApi("phone.joinGroupCallPresentation",p),this.log(`[api] joinGroupCallPresentation id=${e}`,p)}const i=await n;return this.apiUpdatesManager.processUpdateMessage(i),i.updates.find(p=>p._==="updateGroupCallConnection")}leaveGroupCallPresentation(e){return this.apiManager.invokeApi("phone.leaveGroupCallPresentation",{call:this.getGroupCallInput(e)}).then(t=>{this.apiUpdatesManager.processUpdateMessage(t)})}}function bn(r){return{_:"inputPhoto",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference}}function Sn(r){return{_:"inputMediaPhoto",id:bn(r),ttl_seconds:0,pFlags:{}}}function Nr(r,e){return r+"_"+e}function Cn(r){return{_:"inputMediaDocument",id:{_:"inputDocument",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference},ttl_seconds:0,pFlags:{}}}class qr extends ce{constructor(){super(...arguments),this.inlineResults={},this.setHash={}}getGeoInput(e){return e._==="geoPoint"?{_:"inputGeoPoint",lat:e.lat,long:e.long,accuracy_radius:e.accuracy_radius}:{_:"inputGeoPointEmpty"}}getInlineResults(e,t,a="",s="",n){return this.apiManager.invokeApi("messages.getInlineBotResults",{bot:this.appUsersManager.getUserInput(t),peer:this.appPeersManager.getInputPeerById(e),query:a,geo_point:n?this.getGeoInput(n):void 0,offset:s},{stopTime:-1,noErrorBox:!0}).then(i=>{const o=i.query_id;return i.results.forEach(p=>{p._==="botInlineMediaResult"?(p.document=this.appDocsManager.saveDoc(p.document),p.photo=this.appPhotosManager.savePhoto(p.photo)):(p.content=this.appWebDocsManager.saveWebDocument(p.content),p.thumb=this.appWebDocsManager.saveWebDocument(p.thumb)),this.inlineResults[Nr(o,p.id)]=p}),i})}pushPopularBot(e){this.appUsersManager.getTopPeers("bots_inline").then(t=>{const a=e.toPeerId(),s=t.findIndex(i=>i.id===a);let n;s!==-1?n=t[s]:n={id:a,rating:0},++n.rating,nn(t,n,"rating"),this.appStateManager.setKeyValueToStorage("topPeersCache")})}switchToPM(e,t,a){return this.setHash[t]={peerId:e,time:Date.now()},this.appMessagesManager.startBot(t,void 0,a)}async checkSwitchReturn(e){const t=this.appUsersManager.getUser(e);if(!t||!t.pFlags.bot||!t.bot_inline_placeholder)return;const a=this.setHash[e];if(a&&(delete this.setHash[e],Date.now()-a.time<36e5))return a.peerId}switchInlineQuery(e,t,a,s){const n="@"+this.appPeersManager.getPeerUsername(a.toPeerId())+" "+s;this.appDraftsManager.setDraft(e,t,n)}callbackButtonClick(e,t,a){return this.apiManager.invokeApi("messages.getBotCallbackAnswer",{peer:this.appPeersManager.getInputPeerById(e),msg_id:K(t),data:a.data},{stopTime:-1,noErrorBox:!0})}sendInlineResult(e,t,a,s={}){const n=this.inlineResults[a];if(!n)return;this.pushPopularBot(t);const i=a.split("_"),o=i.shift(),p=i.join("_");if(s.viaBotId=t,s.queryId=o,s.resultId=p,n.send_message.reply_markup&&(s.replyMarkup=n.send_message.reply_markup),n.send_message._==="botInlineMessageText")this.appMessagesManager.sendText(e,n.send_message.message,{...s,entities:n.send_message.entities});else{let d,f;const c=n.send_message;switch(c._){case"botInlineMessageMediaAuto":{if(c.message,n._==="botInlineMediaResult"){const{document:g,photo:h}=n;g?d=Cn(g):d=Sn(h)}else{const g=n.content||n.thumb;g&&(n.type==="photo"?d={_:"inputMediaPhotoExternal",pFlags:{},url:g.url}:d={_:"inputMediaDocumentExternal",pFlags:{},url:g.url},s.webDocument=g)}break}case"botInlineMessageMediaGeo":{d={_:"inputMediaGeoPoint",geo_point:this.getGeoInput(c.geo)},s.geoPoint=c.geo;break}case"botInlineMessageMediaVenue":{d={_:"inputMediaVenue",geo_point:this.getGeoInput(c.geo),title:c.title,address:c.address,provider:c.provider,venue_id:c.venue_id,venue_type:c.venue_type},s.geoPoint=c.geo;break}case"botInlineMessageMediaContact":{d={_:"inputMediaContact",phone_number:c.phone_number,first_name:c.first_name,last_name:c.last_name,vcard:c.vcard};break}case"botInlineMessageMediaInvoice":{f={_:"messageMediaInvoice",title:c.title,description:c.description,photo:c.photo,currency:c.currency,total_amount:c.total_amount,pFlags:{shipping_address_requested:c.pFlags.shipping_address_requested,test:c.pFlags.test},start_param:void 0};break}}!d&&f&&(d={_:"messageMediaPending",messageMedia:f}),this.appMessagesManager.sendOther(e,d,s)}}}class Gr{generateTempMessageId(e,t){return+(this.generateMessageId(e,t)+1e-4).toFixed(4)}generateMessageId(e,t){return!t||!Number.isInteger(e)||e<=0?e:(e=K(e),oa+e)}isLegacyMessageId(e){return typeof e=="number"&&e<oa}incrementMessageId(e,t){return this.generateMessageId(K(e)+t,this.isLegacyMessageId(e)?1:0)}getMessageIdInfo(e,t){const a=K(e);return{messageId:a,channelId:e===a?void 0:t}}splitMessageIdsByChannels(e,t){const a=[];let s;for(let n=0,i=e.length;n<i;++n){const o=e[n],{messageId:p,channelId:d}=this.getMessageIdInfo(o,t);(!s||s[0]!==d)&&(s=[d,{mids:[],messageIds:[]}],a.push(s)),s[1].mids.push(o),s[1].messageIds.push(p)}return a}}const jr=8,Hr=new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE","MIDDLEWARE","NO_AUTO_DOWNLOAD"]);class zr{constructor(e=jr){this.parallelLimit=e,this.queueId=0,this.queue=[],this.inProcess=new Set,this.lockPromise=null,this.unlockResolve=null,this.log=Le("LL",De.Error),this.processQueue=Ht(()=>this._processQueue(),8,!1)}clear(){this.inProcess.clear(),this.queue.length=0}lock(){this.lockPromise||(this.lockPromise=new Promise((e,t)=>{this.unlockResolve=e}))}unlock(){this.unlockResolve&&(this.unlockResolve(),this.unlockResolve=this.lockPromise=null,this.processQueue())}async processItem(e){if(!this.lockPromise){this.inProcess.add(e);try{await this.loadItem(e)}catch(t){Hr.has(t?.type)||this.log.error("loadMediaQueue error:",t)}this.inProcess.delete(e),this.processQueue()}}loadItem(e){return e.load()}getItem(){return this.queue.shift()}addElement(e,t){this.queue[e](t),this.processQueue()}_processQueue(e){if(!(!this.queue.length||this.lockPromise||this.parallelLimit>0&&this.inProcess.size>=this.parallelLimit))do{if(e?Ye(this.queue,e):e=this.getItem(),e)this.processItem(e);else break;e=null}while(this.inProcess.size<this.parallelLimit&&this.queue.length)}push(e){this.addElement("push",e)}unshift(e){this.addElement("unshift",e)}}const Ts=()=>({cleaned:!1,inner:[],onCleanCallbacks:[]}),Wr=Ue("MIDDLEWARE");class Kr{constructor(){this.details=Ts(),this.onDestroyCallbacks=[],this.onDestroy=e=>{if(this.destroyed)return e();this.onDestroyCallbacks.push(e)}}clean(){const e=this.details;e.cleaned=!0,e.inner.splice(0,e.inner.length).forEach(t=>t.destroy()),e.onCleanCallbacks.splice(0,e.onCleanCallbacks.length).forEach(t=>t()),this.details=Ts()}destroy(){this.destroyed=!0,this.clean(),this.onDestroyCallbacks.splice(0,this.onDestroyCallbacks.length).forEach(e=>e()),this.parent&&(Ye(this.parent.details.inner,this),this.parent=void 0)}get(e){const t=this.details,a=()=>!t.cleaned&&(!e||e());return a.create=()=>{if(!a())throw Wr;const s=Dn();return s.parent=this,t.inner.push(s),s},a.onClean=s=>{if(!a())return s();t.onCleanCallbacks.push(s)},a.onDestroy=this.onDestroy,a}}function Dn(){return new Kr}function Rs(r,e="asc"){if(!r)return[];const t=r instanceof Map?[...r.keys()]:Object.keys(r).map(a=>+a);return e==="asc"?t.sort((a,s)=>a-s):t.sort((a,s)=>s-a)}function In(r,e){if(r.length<e)return[r];let t=0,a=0,s=0;const n=" ",i=[],o=d=>{let f=r.slice(a,d);const c=s++;if(f.length>e){const g=f.slice(e);In(g,e).forEach(y=>{i[s++]=y}),f=f.slice(0,e)}a=d,t=0,i[c]=(i[c]||"")+f};let p=0;do{let d=r.indexOf(n,p);if(d===-1){p!==r.length-1&&o();break}d+=n.length;const f=d-p;t+f>e&&o(t),p=d,t+=f}while(!0);return i}function Jr(r,e,t=!0,a=!0){let s,n,i,o,p=!1;const d=c=>{const g=i,h=o;try{const y=r.apply(null,c);g(y)}catch(y){console.error("debounce error",y),h(y)}},f=(...c)=>{n||(n=new Promise((h,y)=>(i=h,o=y))),s?(clearTimeout(s),p=!0,o(),n=new Promise((h,y)=>(i=h,o=y))):t&&(d(c),p=!1);const g=Pe.setTimeout(()=>{a&&(!t||p)&&d(c),s===g&&(s=n=i=o=void 0,p=!1)},e);return s=g,n.catch(xe),n};return f.clearTimeout=()=>{s&&(Pe.clearTimeout(s),o(),s=n=i=o=void 0,p=!1)},f.isDebounced=()=>!!s,f}function wn(r,e,t,a){const s=r._==="document";if(!e||e._==="photoSizeEmpty")throw new Error("photoSizeEmpty!");const n=!!((e._==="photoSize"||e._==="photoSizeProgressive")&&r.access_hash&&r.file_reference),i={_:s?"inputDocumentFileLocation":"inputPhotoFileLocation",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference,thumb_size:e.type};return{dcId:r.dc_id,location:i,size:n?e.size:void 0,mimeType:"image/jpeg",queueId:t,onlyCache:a}}const Zr=["abogado","ac","academy","accountants","active","actor","ad","adult","ae","aero","af","ag","agency","ai","airforce","al","allfinanz","alsace","am","amsterdam","an","android","ao","apartments","aq","aquarelle","ar","archi","army","arpa","as","asia","associates","at","attorney","au","auction","audio","autos","aw","ax","axa","az","ba","band","bank","bar","barclaycard","barclays","bargains","bayern","bb","bd","be","beer","berlin","best","bf","bg","bh","bi","bid","bike","bingo","bio","biz","bj","black","blackfriday","bloomberg","blue","bm","bmw","bn","bnpparibas","bo","boo","boutique","br","brussels","bs","bt","budapest","build","builders","business","buzz","bv","bw","by","bz","bzh","ca","cab","cal","camera","camp","cancerresearch","canon","capetown","capital","caravan","cards","care","career","careers","cartier","casa","cash","cat","catering","cc","cd","center","ceo","cern","cf","cg","ch","channel","chat","cheap","christmas","chrome","church","ci","citic","city","ck","cl","claims","cleaning","click","clinic","clothing","club","cm","cn","co","coach","codes","coffee","college","cologne","com","community","company","computer","condos","construction","consulting","contractors","cooking","cool","coop","country","cr","credit","creditcard","cricket","crs","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cz","dabur","dad","dance","dating","day","dclk","de","deals","degree","delivery","democrat","dental","dentist","desi","design","dev","diamonds","diet","digital","direct","directory","discount","dj","dk","dm","dnp","do","docs","domains","doosan","durban","dvag","dz","eat","ec","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","equipment","er","es","esq","estate","et","eu","eurovision","eus","events","everbank","exchange","expert","exposed","fail","farm","fashion","feedback","fi","finance","financial","firmdale","fish","fishing","fit","fitness","fj","fk","flights","florist","flowers","flsmidth","fly","fm","fo","foo","forsale","foundation","fr","frl","frogans","fund","furniture","futbol","ga","gal","gallery","garden","gb","gbiz","gd","ge","gent","gf","gg","ggee","gh","gi","gift","gifts","gives","gl","glass","gle","global","globo","gm","gmail","gmo","gmx","gn","goog","google","gop","gov","gp","gq","gr","graphics","gratis","green","gripe","gs","gt","gu","guide","guitars","guru","gw","gy","hamburg","hangout","haus","healthcare","help","here","hermes","hiphop","hiv","hk","hm","hn","holdings","holiday","homes","horse","host","hosting","house","how","hr","ht","hu","ibm","id","ie","ifm","il","im","immo","immobilien","in","industries","info","ing","ink","institute","insure","int","international","investments","io","iq","ir","irish","is","it","iwc","jcb","je","jetzt","jm","jo","jobs","joburg","jp","juegos","kaufen","kddi","ke","kg","kh","ki","kim","kitchen","kiwi","km","kn","koeln","kp","kr","krd","kred","kw","ky","kyoto","kz","la","lacaixa","land","lat","latrobe","lawyer","lb","lc","lds","lease","legal","lgbt","li","lidl","life","lighting","limited","limo","link","lk","loans","london","lotte","lotto","lr","ls","lt","ltda","lu","luxe","luxury","lv","ly","ma","madrid","maison","management","mango","market","marketing","marriott","mc","md","me","media","meet","melbourne","meme","memorial","menu","mg","mh","miami","mil","mini","mk","ml","mm","mn","mo","mobi","moda","moe","monash","money","mormon","mortgage","moscow","motorcycles","mov","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","nagoya","name","navy","nc","ne","net","network","neustar","new","nexus","nf","ng","ngo","nhk","ni","nico","ninja","nl","no","np","nr","nra","nrw","ntt","nu","nyc","nz","okinawa","om","one","ong","onl","ooo","org","organic","osaka","otsuka","ovh","pa","paris","partners","parts","party","pe","pf","pg","ph","pharmacy","photo","photography","photos","physio","pics","pictures","pink","pizza","pk","pl","place","plumbing","pm","pn","pohl","poker","porn","post","pr","praxi","press","pro","prod","productions","prof","properties","property","ps","pt","pub","pw","py","qa","qpon","quebec","re","realtor","recipes","red","rehab","reise","reisen","reit","ren","rentals","repair","report","republican","rest","restaurant","reviews","rich","rio","rip","ro","rocks","rodeo","rs","rsvp","ru","ruhr","rw","ryukyu","sa","saarland","sale","samsung","sarl","saxo","sb","sc","sca","scb","schmidt","schule","schwarz","science","scot","sd","se","services","sew","sexy","sg","sh","shiksha","shoes","shriram","si","singles","sj","sk","sky","sl","sm","sn","so","social","software","sohu","solar","solutions","soy","space","spiegel","sr","st","style","su","supplies","supply","support","surf","surgery","suzuki","sv","sx","sy","sydney","systems","sz","taipei","tatar","tattoo","tax","tc","td","technology","tel","temasek","tennis","tf","tg","th","tienda","tips","tires","tirol","tj","tk","tl","tm","tn","to","today","tokyo","tools","top","toshiba","town","toys","tp","tr","trade","training","travel","trust","tt","tui","tv","tw","tz","ua","ug","uk","university","uno","uol","us","uy","uz","va","vacations","vc","ve","vegas","ventures","versicherung","vet","vg","vi","viajes","video","villas","vision","vlaanderen","vn","vodka","vote","voting","voto","voyage","vu","wales","wang","watch","webcam","website","wed","wedding","wf","whoswho","wien","wiki","williamhill","wme","work","works","world","ws","wtc","wtf","佛山","集团","在线","한국","ভারত","八卦","موقع","公益","公司","移动","我爱你","москва","қаз","онлайн","сайт","срб","淡马锡","орг","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","中文网","中信","中国","中國","谷歌","భారత్","ලංකා","ભારત","भारत","网店","संगठन","网络","укр","香港","台湾","台灣","手机","мон","الجزائر","عمان","ایران","امارات","بازار","الاردن","بھارت","المغرب","السعودية","مليسيا","شبكة","გე","机构","组织机构","ไทย","سورية","рус","рф","تونس","みんな","グーグル","世界","ਭਾਰਤ","网址","游戏","vermögensberater","vermögensberatung","企业","مصر","قطر","广东","இலங்கை","இந்தியா","新加坡","فلسطين","政务","xxx","xyz","yachts","yandex","ye","yoga","yokohama","youtube","yt","za","zip","zm","zone","zuerich","zw"];function Yr(r){for(var e=r.length,t=r.split("(").length-1,a=r.split(")").length-1;a>t&&r.charAt(e-1)===")";)r=r.substr(0,e-1),a--,e--;return t>a&&(r=r.replace(/\)+$/,"")),r}const ts={14:{"1f6dd":4867,"1f6de":4916,"1f6df":4923,"1f7f0":62832,"1f979":183,"1f9cc":1557,"1fa7b":61332,"1fa7c":61330,"1faa9":51093,"1faaa":61364,"1faab":61189,"1faac":51085,"1fab7":2651,"1fab8":2631,"1fab9":2672,"1faba":2673,"1fac3":1520,"1fac4":1521,"1fac5":1505,"1fad7":3793,"1fad8":3707,"1fad9":3804,"1fae0":111,"1fae1":136,"1fae2":132,"1fae3":133,"1fae4":174,"1fae5":142,"1fae6":1385,"1fae7":61353,"1faf0":1341,"1faf1":1332,"1faf2":1333,"1faf3":1334,"1faf4":1335,"1faf5":1351,"1faf6":1360,"1faf1-1f3fb-200d-1faf2-1f3fc":0,"1faf1-1f3fb-200d-1faf2-1f3fd":0,"1faf1-1f3fb-200d-1faf2-1f3fe":0,"1faf1-1f3fb-200d-1faf2-1f3ff":0,"1faf1-1f3fc-200d-1faf2-1f3fb":0,"1faf1-1f3fc-200d-1faf2-1f3fd":0,"1faf1-1f3fc-200d-1faf2-1f3fe":0,"1faf1-1f3fc-200d-1faf2-1f3ff":0,"1faf1-1f3fd-200d-1faf2-1f3fb":0,"1faf1-1f3fd-200d-1faf2-1f3fc":0,"1faf1-1f3fd-200d-1faf2-1f3fe":0,"1faf1-1f3fd-200d-1faf2-1f3ff":0,"1faf1-1f3fe-200d-1faf2-1f3fb":0,"1faf1-1f3fe-200d-1faf2-1f3fc":0,"1faf1-1f3fe-200d-1faf2-1f3fd":0,"1faf1-1f3fe-200d-1faf2-1f3ff":0,"1faf1-1f3ff-200d-1faf2-1f3fb":0,"1faf1-1f3ff-200d-1faf2-1f3fc":0,"1faf1-1f3ff-200d-1faf2-1f3fd":0,"1faf1-1f3ff-200d-1faf2-1f3fe":0,"1fac3-1f3fb":0,"1fac3-1f3fc":0,"1fac3-1f3fd":0,"1fac3-1f3fe":0,"1fac3-1f3ff":0,"1fac4-1f3fb":0,"1fac4-1f3fc":0,"1fac4-1f3fd":0,"1fac4-1f3fe":0,"1fac4-1f3ff":0,"1fac5-1f3fb":0,"1fac5-1f3fc":0,"1fac5-1f3fd":0,"1fac5-1f3fe":0,"1fac5-1f3ff":0,"1faf0-1f3fb":0,"1faf0-1f3fc":0,"1faf0-1f3fd":0,"1faf0-1f3fe":0,"1faf0-1f3ff":0,"1faf1-1f3fb":0,"1faf1-1f3fc":0,"1faf1-1f3fd":0,"1faf1-1f3fe":0,"1faf1-1f3ff":0,"1faf2-1f3fb":0,"1faf2-1f3fc":0,"1faf2-1f3fd":0,"1faf2-1f3fe":0,"1faf2-1f3ff":0,"1faf3-1f3fb":0,"1faf3-1f3fc":0,"1faf3-1f3fd":0,"1faf3-1f3fe":0,"1faf3-1f3ff":0,"1faf4-1f3fb":0,"1faf4-1f3fc":0,"1faf4-1f3fd":0,"1faf4-1f3fe":0,"1faf4-1f3ff":0,"1faf5-1f3fb":0,"1faf5-1f3fc":0,"1faf5-1f3fd":0,"1faf5-1f3fe":0,"1faf5-1f3ff":0,"1faf6-1f3fb":0,"1faf6-1f3fc":0,"1faf6-1f3fd":0,"1faf6-1f3fe":0,"1faf6-1f3ff":0},"":{2049:62835,2122:62863,2139:62888,2194:62764,2195:62763,2196:62762,2197:62756,2198:62758,2199:62760,2328:61194,2600:4990,2601:4998,2602:41013,2603:41018,2604:41020,2611:62851,2614:41014,2615:3781,2618:2667,2620:1106,2622:62753,2623:62754,2626:62783,2638:62780,2639:177,2648:62788,2649:62789,2650:62796,2651:62797,2652:62798,2653:62799,2660:51095,2663:51098,2665:51096,2666:51097,2668:4865,2692:61297,2693:4922,2694:61300,2696:61311,2697:61319,2699:61309,2702:61284,2705:62850,2708:4931,2709:61245,2712:61259,2714:62852,2716:62828,2721:62779,2728:51029,2733:62858,2734:62859,2744:41017,2747:62860,2753:62836,2754:62837,2755:62838,2757:62839,2763:1137,2764:1141,2795:62829,2796:62830,2797:62831,2934:62767,2935:62768,3030:62840,3297:62912,3299:62913,"0023-20e3":62864,"002a-20e3":62865,"0030-20e3":62866,"0031-20e3":62867,"0032-20e3":62868,"0033-20e3":62869,"0034-20e3":62870,"0035-20e3":62871,"0036-20e3":62872,"0037-20e3":62873,"0038-20e3":62874,"0039-20e3":62875,"00a9":62861,"00ae":62862,"1f004":51101,"1f0cf":51100,"1f170":62882,"1f171":62884,"1f17e":62893,"1f17f":62895,"1f18e":62883,"1f191":62885,"1f192":62886,"1f193":62887,"1f194":62889,"1f195":62891,"1f196":62892,"1f197":62894,"1f198":62896,"1f199":62897,"1f19a":62898,"1f1e6-1f1e8":71594,"1f1e6-1f1e9":71595,"1f1e6-1f1ea":71596,"1f1e6-1f1eb":71597,"1f1e6-1f1ec":71598,"1f1e6-1f1ee":71599,"1f1e6-1f1f1":71600,"1f1e6-1f1f2":71601,"1f1e6-1f1f4":71602,"1f1e6-1f1f6":71603,"1f1e6-1f1f7":71604,"1f1e6-1f1f8":71605,"1f1e6-1f1f9":71606,"1f1e6-1f1fa":71607,"1f1e6-1f1fc":71608,"1f1e6-1f1fd":71609,"1f1e6-1f1ff":71610,"1f1e7-1f1e6":71611,"1f1e7-1f1e7":71612,"1f1e7-1f1e9":71613,"1f1e7-1f1ea":71614,"1f1e7-1f1eb":71615,"1f1e7-1f1ec":71616,"1f1e7-1f1ed":71617,"1f1e7-1f1ee":71618,"1f1e7-1f1ef":71619,"1f1e7-1f1f1":71620,"1f1e7-1f1f2":71621,"1f1e7-1f1f3":71622,"1f1e7-1f1f4":71623,"1f1e7-1f1f6":71624,"1f1e7-1f1f7":71625,"1f1e7-1f1f8":71626,"1f1e7-1f1f9":71627,"1f1e7-1f1fb":71628,"1f1e7-1f1fc":71629,"1f1e7-1f1fe":71630,"1f1e7-1f1ff":71631,"1f1e8-1f1e6":71632,"1f1e8-1f1e8":71633,"1f1e8-1f1e9":71634,"1f1e8-1f1eb":71635,"1f1e8-1f1ec":71636,"1f1e8-1f1ed":71637,"1f1e8-1f1ee":71638,"1f1e8-1f1f0":71639,"1f1e8-1f1f1":71640,"1f1e8-1f1f2":71641,"1f1e8-1f1f3":71642,"1f1e8-1f1f4":71643,"1f1e8-1f1f5":71644,"1f1e8-1f1f7":71645,"1f1e8-1f1fa":71646,"1f1e8-1f1fb":71647,"1f1e8-1f1fc":71648,"1f1e8-1f1fd":71649,"1f1e8-1f1fe":71650,"1f1e8-1f1ff":71651,"1f1e9-1f1ea":71652,"1f1e9-1f1ec":71653,"1f1e9-1f1ef":71654,"1f1e9-1f1f0":71655,"1f1e9-1f1f2":71656,"1f1e9-1f1f4":71657,"1f1e9-1f1ff":71658,"1f1ea-1f1e6":71659,"1f1ea-1f1e8":71660,"1f1ea-1f1ea":71661,"1f1ea-1f1ec":71662,"1f1ea-1f1ed":71663,"1f1ea-1f1f7":71664,"1f1ea-1f1f8":71665,"1f1ea-1f1f9":71666,"1f1ea-1f1fa":71667,"1f1eb-1f1ee":71668,"1f1eb-1f1ef":71669,"1f1eb-1f1f0":71670,"1f1eb-1f1f2":71671,"1f1eb-1f1f4":71672,"1f1eb-1f1f7":71673,"1f1ec-1f1e6":71674,"1f1ec-1f1e7":71675,"1f1ec-1f1e9":71676,"1f1ec-1f1ea":71677,"1f1ec-1f1eb":71678,"1f1ec-1f1ec":71679,"1f1ec-1f1ed":71680,"1f1ec-1f1ee":71681,"1f1ec-1f1f1":71682,"1f1ec-1f1f2":71683,"1f1ec-1f1f3":71684,"1f1ec-1f1f5":71685,"1f1ec-1f1f6":71686,"1f1ec-1f1f7":71687,"1f1ec-1f1f8":71688,"1f1ec-1f1f9":71689,"1f1ec-1f1fa":71690,"1f1ec-1f1fc":71691,"1f1ec-1f1fe":71692,"1f1ed-1f1f0":71693,"1f1ed-1f1f2":71694,"1f1ed-1f1f3":71695,"1f1ed-1f1f7":71696,"1f1ed-1f1f9":71697,"1f1ed-1f1fa":71698,"1f1ee-1f1e8":71699,"1f1ee-1f1e9":71700,"1f1ee-1f1ea":71701,"1f1ee-1f1f1":71702,"1f1ee-1f1f2":71703,"1f1ee-1f1f3":71704,"1f1ee-1f1f4":71705,"1f1ee-1f1f6":71706,"1f1ee-1f1f7":71707,"1f1ee-1f1f8":71708,"1f1ee-1f1f9":71709,"1f1ef-1f1ea":71710,"1f1ef-1f1f2":71711,"1f1ef-1f1f4":71712,"1f1ef-1f1f5":71713,"1f1f0-1f1ea":71714,"1f1f0-1f1ec":71715,"1f1f0-1f1ed":71716,"1f1f0-1f1ee":71717,"1f1f0-1f1f2":71718,"1f1f0-1f1f3":71719,"1f1f0-1f1f5":71720,"1f1f0-1f1f7":71721,"1f1f0-1f1fc":71722,"1f1f0-1f1fe":71723,"1f1f0-1f1ff":71724,"1f1f1-1f1e6":71725,"1f1f1-1f1e7":71726,"1f1f1-1f1e8":71727,"1f1f1-1f1ee":71728,"1f1f1-1f1f0":71729,"1f1f1-1f1f7":71730,"1f1f1-1f1f8":71731,"1f1f1-1f1f9":71732,"1f1f1-1f1fa":71733,"1f1f1-1f1fb":71734,"1f1f1-1f1fe":71735,"1f1f2-1f1e6":71736,"1f1f2-1f1e8":71737,"1f1f2-1f1e9":71738,"1f1f2-1f1ea":71739,"1f1f2-1f1eb":71740,"1f1f2-1f1ec":71741,"1f1f2-1f1ed":71742,"1f1f2-1f1f0":71743,"1f1f2-1f1f1":71744,"1f1f2-1f1f2":71745,"1f1f2-1f1f3":71746,"1f1f2-1f1f4":71747,"1f1f2-1f1f5":71748,"1f1f2-1f1f6":71749,"1f1f2-1f1f7":71750,"1f1f2-1f1f8":71751,"1f1f2-1f1f9":71752,"1f1f2-1f1fa":71753,"1f1f2-1f1fb":71754,"1f1f2-1f1fc":71755,"1f1f2-1f1fd":71756,"1f1f2-1f1fe":71757,"1f1f2-1f1ff":71758,"1f1f3-1f1e6":71759,"1f1f3-1f1e8":71760,"1f1f3-1f1ea":71761,"1f1f3-1f1eb":71762,"1f1f3-1f1ec":71763,"1f1f3-1f1ee":71764,"1f1f3-1f1f1":71765,"1f1f3-1f1f4":71766,"1f1f3-1f1f5":71767,"1f1f3-1f1f7":71768,"1f1f3-1f1fa":71769,"1f1f3-1f1ff":71770,"1f1f4-1f1f2":71771,"1f1f5-1f1e6":71772,"1f1f5-1f1ea":71773,"1f1f5-1f1eb":71774,"1f1f5-1f1ec":71775,"1f1f5-1f1ed":71776,"1f1f5-1f1f0":71777,"1f1f5-1f1f1":71778,"1f1f5-1f1f2":71779,"1f1f5-1f1f3":71780,"1f1f5-1f1f7":71781,"1f1f5-1f1f8":71782,"1f1f5-1f1f9":71783,"1f1f5-1f1fc":71784,"1f1f5-1f1fe":71785,"1f1f6-1f1e6":71786,"1f1f7-1f1ea":71787,"1f1f7-1f1f4":71788,"1f1f7-1f1f8":71789,"1f1f7-1f1fa":71790,"1f1f7-1f1fc":71791,"1f1f8-1f1e6":71792,"1f1f8-1f1e7":71793,"1f1f8-1f1e8":71794,"1f1f8-1f1e9":71795,"1f1f8-1f1ea":71796,"1f1f8-1f1ec":71797,"1f1f8-1f1ed":71798,"1f1f8-1f1ee":71799,"1f1f8-1f1ef":71800,"1f1f8-1f1f0":71801,"1f1f8-1f1f1":71802,"1f1f8-1f1f2":71803,"1f1f8-1f1f3":71804,"1f1f8-1f1f4":71805,"1f1f8-1f1f7":71806,"1f1f8-1f1f8":71807,"1f1f8-1f1f9":71808,"1f1f8-1f1fb":71809,"1f1f8-1f1fd":71810,"1f1f8-1f1fe":71811,"1f1f8-1f1ff":71812,"1f1f9-1f1e6":71813,"1f1f9-1f1e8":71814,"1f1f9-1f1e9":71815,"1f1f9-1f1eb":71816,"1f1f9-1f1ec":71817,"1f1f9-1f1ed":71818,"1f1f9-1f1ef":71819,"1f1f9-1f1f0":71820,"1f1f9-1f1f1":71821,"1f1f9-1f1f2":71822,"1f1f9-1f1f3":71823,"1f1f9-1f1f4":71824,"1f1f9-1f1f7":71825,"1f1f9-1f1f9":71826,"1f1f9-1f1fb":71827,"1f1f9-1f1fc":71828,"1f1f9-1f1ff":71829,"1f1fa-1f1e6":71830,"1f1fa-1f1ec":71831,"1f1fa-1f1f2":71832,"1f1fa-1f1f3":71833,"1f1fa-1f1f8":71834,"1f1fa-1f1fe":71835,"1f1fa-1f1ff":71836,"1f1fb-1f1e6":71837,"1f1fb-1f1e8":71838,"1f1fb-1f1ea":71839,"1f1fb-1f1ec":71840,"1f1fb-1f1ee":71841,"1f1fb-1f1f3":71842,"1f1fb-1f1fa":71843,"1f1fc-1f1eb":71844,"1f1fc-1f1f8":71845,"1f1fd-1f1f0":71846,"1f1fe-1f1ea":71847,"1f1fe-1f1f9":71848,"1f1ff-1f1e6":71849,"1f1ff-1f1f2":71850,"1f1ff-1f1fc":71851,"1f201":62899,"1f202":62900,"1f21a":62906,"1f22f":62903,"1f232":62907,"1f233":62911,"1f234":62910,"1f235":62915,"1f236":62902,"1f237":62901,"1f238":62909,"1f239":62905,"1f23a":62914,"1f250":62904,"1f251":62908,"1f300":41010,"1f301":4857,"1f302":41012,"1f303":4858,"1f304":4860,"1f305":4861,"1f306":4862,"1f307":4863,"1f308":41011,"1f309":4864,"1f30a":41023,"1f30b":4815,"1f30c":4997,"1f30d":4806,"1f30e":4807,"1f30f":4808,"1f310":4809,"1f311":4977,"1f312":4978,"1f313":4979,"1f314":4980,"1f315":4981,"1f316":4982,"1f317":4983,"1f318":4984,"1f319":4985,"1f31a":4986,"1f31b":4987,"1f31c":4988,"1f31d":4991,"1f31e":4992,"1f31f":4995,"1f320":4996,"1f321":4989,"1f324":41001,"1f325":41002,"1f326":41003,"1f327":41004,"1f328":41005,"1f329":41006,"1f32a":41007,"1f32b":41008,"1f32c":41009,"1f32d":3725,"1f32e":3727,"1f32f":3728,"1f330":3708,"1f331":2659,"1f332":2661,"1f333":2662,"1f334":2663,"1f335":2664,"1f336":3698,"1f337":2658,"1f338":2649,"1f339":2653,"1f33a":2655,"1f33b":2656,"1f33c":2657,"1f33d":3697,"1f33e":2665,"1f33f":2666,"1f340":2668,"1f341":2669,"1f342":2670,"1f343":2671,"1f344":3705,"1f345":3690,"1f346":3694,"1f347":3674,"1f348":3675,"1f349":3676,"1f34a":3677,"1f34b":3678,"1f34c":3679,"1f34d":3680,"1f34e":3682,"1f34f":3683,"1f350":3684,"1f351":3685,"1f352":3686,"1f353":3687,"1f354":3722,"1f355":3724,"1f356":3718,"1f357":3719,"1f358":3744,"1f359":3745,"1f35a":3746,"1f35b":3747,"1f35c":3748,"1f35d":3749,"1f35e":3709,"1f35f":3723,"1f360":3750,"1f361":3756,"1f362":3751,"1f363":3752,"1f364":3753,"1f365":3754,"1f366":3765,"1f367":3766,"1f368":3767,"1f369":3768,"1f36a":3769,"1f36b":3774,"1f36c":3775,"1f36d":3776,"1f36e":3777,"1f36f":3778,"1f370":3771,"1f371":3743,"1f372":3735,"1f373":3733,"1f374":3801,"1f375":3783,"1f376":3784,"1f377":3786,"1f378":3787,"1f379":3788,"1f37a":3789,"1f37b":3790,"1f37c":3779,"1f37d":3800,"1f37e":3785,"1f37f":3739,"1f380":51040,"1f381":51041,"1f382":3770,"1f383":51024,"1f384":51025,"1f385":1527,"1f386":51026,"1f387":51027,"1f388":51030,"1f389":51031,"1f38a":51032,"1f38b":51033,"1f38c":71588,"1f38d":51034,"1f38e":51035,"1f38f":51036,"1f390":51037,"1f391":51038,"1f392":61134,"1f393":61147,"1f396":51045,"1f397":51042,"1f399":61167,"1f39a":61168,"1f39b":61169,"1f39e":61203,"1f39f":51043,"1f3a0":4866,"1f3a1":4868,"1f3a2":4869,"1f3a3":51072,"1f3a4":61170,"1f3a5":61202,"1f3a6":62819,"1f3a7":61171,"1f3a8":51105,"1f3a9":61146,"1f3aa":4871,"1f3ab":51044,"1f3ac":61205,"1f3ad":51103,"1f3ae":51086,"1f3af":51078,"1f3b0":51088,"1f3b1":51081,"1f3b2":51089,"1f3b3":51060,"1f3b4":51102,"1f3b5":61165,"1f3b6":61166,"1f3b7":61173,"1f3b8":61175,"1f3b9":61176,"1f3ba":61177,"1f3bb":61178,"1f3bc":61164,"1f3bd":51074,"1f3be":51058,"1f3bf":51075,"1f3c0":51054,"1f3c1":71586,"1f3c2":1600,"1f3c3-200d-2640":1584,"1f3c3-200d-2642":1583,"1f3c3":1582,"1f3c4-200d-2640":1606,"1f3c4-200d-2642":1605,"1f3c4":1604,"1f3c5":51047,"1f3c6":51046,"1f3c7":1598,"1f3c8":51056,"1f3c9":51057,"1f3ca-200d-2640":1612,"1f3ca-200d-2642":1611,"1f3ca":1610,"1f3cb-200d-2640":1618,"1f3cb-200d-2642":1617,"1f3cb":1616,"1f3cc-200d-2640":1603,"1f3cc-200d-2642":1602,"1f3cc":1601,"1f3cd":4902,"1f3ce":4901,"1f3cf":51061,"1f3d0":51055,"1f3d1":51062,"1f3d2":51063,"1f3d3":51065,"1f3d4":4813,"1f3d5":4817,"1f3d6":4818,"1f3d7":4824,"1f3d8":4829,"1f3d9":4859,"1f3da":4830,"1f3db":4823,"1f3dc":4819,"1f3dd":4820,"1f3de":4821,"1f3df":4822,"1f3e0":4831,"1f3e1":4832,"1f3e2":4833,"1f3e3":4834,"1f3e4":4835,"1f3e5":4836,"1f3e6":4837,"1f3e7":62729,"1f3e8":4838,"1f3e9":4839,"1f3ea":4840,"1f3eb":4841,"1f3ec":4842,"1f3ed":4843,"1f3ee":61216,"1f3ef":4844,"1f3f0":4845,"1f3f3-200d-1f308":71591,"1f3f3-200d-26a7":71592,"1f3f3":71590,"1f3f4-200d-2620":71593,"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f":71852,"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f":71853,"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f":71854,"1f3f4":71589,"1f3f5":2652,"1f3f7":61234,"1f3f8":51066,"1f3f9":61303,"1f3fa":3805,"1f3fb":9525,"1f3fc":9526,"1f3fd":9527,"1f3fe":9528,"1f3ff":9529,"1f400":2576,"1f401":2575,"1f402":2556,"1f403":2557,"1f404":2558,"1f405":2547,"1f406":2548,"1f407":2579,"1f408-200d-2b1b":2544,"1f408":2543,"1f409":2618,"1f40a":2613,"1f40b":2622,"1f40c":2632,"1f40d":2616,"1f40e":2550,"1f40f":2563,"1f410":2565,"1f411":2564,"1f412":2531,"1f413":2596,"1f414":2595,"1f415-200d-1f9ba":2537,"1f415":2535,"1f416":2560,"1f417":2561,"1f418":2570,"1f419":2629,"1f41a":2630,"1f41b":2634,"1f41c":2635,"1f41d":2636,"1f41e":2638,"1f41f":2625,"1f420":2626,"1f421":2627,"1f422":2614,"1f423":2597,"1f424":2598,"1f425":2599,"1f426":2600,"1f427":2601,"1f428":2586,"1f429":2538,"1f42a":2566,"1f42b":2567,"1f42c":2623,"1f42d":2574,"1f42e":2555,"1f42f":2546,"1f430":2578,"1f431":2542,"1f432":2617,"1f433":2621,"1f434":2549,"1f435":2530,"1f436":2534,"1f437":2559,"1f438":2612,"1f439":2577,"1f43a":2539,"1f43b-200d-2744":2585,"1f43b":2584,"1f43c":2587,"1f43d":2562,"1f43e":2593,"1f43f":2580,"1f440":1381,"1f441-200d-1f5e8":1159,"1f441":1382,"1f442":1373,"1f443":1375,"1f444":1384,"1f445":1383,"1f446":1347,"1f447":1349,"1f448":1345,"1f449":1346,"1f44a":1355,"1f44b":1327,"1f44c":1336,"1f44d":1352,"1f44e":1353,"1f44f":1358,"1f450":1361,"1f451":61144,"1f452":61145,"1f453":61110,"1f454":61115,"1f455":61116,"1f456":61117,"1f457":61122,"1f458":61123,"1f459":61128,"1f45a":61129,"1f45b":61130,"1f45c":61131,"1f45d":61132,"1f45e":61136,"1f45f":61137,"1f460":61140,"1f461":61141,"1f462":61143,"1f463":1687,"1f464":1684,"1f465":1685,"1f466":1388,"1f467":1389,"1f468-200d-1f33e":1457,"1f468-200d-1f373":1460,"1f468-200d-1f37c":1524,"1f468-200d-1f393":1448,"1f468-200d-1f3a4":1478,"1f468-200d-1f3a8":1481,"1f468-200d-1f3eb":1451,"1f468-200d-1f3ed":1466,"1f468-200d-1f466-200d-1f466":1674,"1f468-200d-1f466":1673,"1f468-200d-1f467-200d-1f466":1676,"1f468-200d-1f467-200d-1f467":1677,"1f468-200d-1f467":1675,"1f468-200d-1f468-200d-1f466":1663,"1f468-200d-1f468-200d-1f466-200d-1f466":1666,"1f468-200d-1f468-200d-1f467":1664,"1f468-200d-1f468-200d-1f467-200d-1f466":1665,"1f468-200d-1f468-200d-1f467-200d-1f467":1667,"1f468-200d-1f469-200d-1f466":1658,"1f468-200d-1f469-200d-1f466-200d-1f466":1661,"1f468-200d-1f469-200d-1f467":1659,"1f468-200d-1f469-200d-1f467-200d-1f466":1660,"1f468-200d-1f469-200d-1f467-200d-1f467":1662,"1f468-200d-1f4bb":1475,"1f468-200d-1f4bc":1469,"1f468-200d-1f527":1463,"1f468-200d-1f52c":1472,"1f468-200d-1f680":1487,"1f468-200d-1f692":1490,"1f468-200d-1f9af":1574,"1f468-200d-1f9b0":1396,"1f468-200d-1f9b1":1397,"1f468-200d-1f9b2":1399,"1f468-200d-1f9b3":1398,"1f468-200d-1f9bc":1577,"1f468-200d-1f9bd":1580,"1f468-200d-2695":1445,"1f468-200d-2696":1454,"1f468-200d-2708":1484,"1f468-200d-2764-200d-1f468":1655,"1f468-200d-2764-200d-1f48b-200d-1f468":1651,"1f468":1392,"1f469-200d-1f33e":1458,"1f469-200d-1f373":1461,"1f469-200d-1f37c":1523,"1f469-200d-1f393":1449,"1f469-200d-1f3a4":1479,"1f469-200d-1f3a8":1482,"1f469-200d-1f3eb":1452,"1f469-200d-1f3ed":1467,"1f469-200d-1f466-200d-1f466":1679,"1f469-200d-1f466":1678,"1f469-200d-1f467-200d-1f466":1681,"1f469-200d-1f467-200d-1f467":1682,"1f469-200d-1f467":1680,"1f469-200d-1f469-200d-1f466":1668,"1f469-200d-1f469-200d-1f466-200d-1f466":1671,"1f469-200d-1f469-200d-1f467":1669,"1f469-200d-1f469-200d-1f467-200d-1f466":1670,"1f469-200d-1f469-200d-1f467-200d-1f467":1672,"1f469-200d-1f4bb":1476,"1f469-200d-1f4bc":1470,"1f469-200d-1f527":1464,"1f469-200d-1f52c":1473,"1f469-200d-1f680":1488,"1f469-200d-1f692":1491,"1f469-200d-1f9af":1575,"1f469-200d-1f9b0":1401,"1f469-200d-1f9b1":1403,"1f469-200d-1f9b2":1407,"1f469-200d-1f9b3":1405,"1f469-200d-1f9bc":1578,"1f469-200d-1f9bd":1581,"1f469-200d-2695":1446,"1f469-200d-2696":1455,"1f469-200d-2708":1485,"1f469-200d-2764-200d-1f468":1654,"1f469-200d-2764-200d-1f469":1656,"1f469-200d-2764-200d-1f48b-200d-1f468":1650,"1f469-200d-2764-200d-1f48b-200d-1f469":1652,"1f469":1400,"1f46a":1657,"1f46b":1647,"1f46c":1648,"1f46d":1646,"1f46e-200d-2640":1494,"1f46e-200d-2642":1493,"1f46e":1492,"1f46f-200d-2640":1590,"1f46f-200d-2642":1589,"1f46f":1588,"1f470-200d-2640":1518,"1f470-200d-2642":1517,"1f470":1516,"1f471-200d-2640":1409,"1f471-200d-2642":1410,"1f471":1391,"1f472":1511,"1f473-200d-2640":1510,"1f473-200d-2642":1509,"1f473":1508,"1f474":1412,"1f475":1413,"1f476":1386,"1f477-200d-2640":1504,"1f477-200d-2642":1503,"1f477":1502,"1f478":1507,"1f479":1109,"1f47a":1110,"1f47b":1111,"1f47c":1526,"1f47d":1112,"1f47e":1113,"1f47f":1104,"1f480":1105,"1f481-200d-2640":1428,"1f481-200d-2642":1427,"1f481":1426,"1f482-200d-2640":1500,"1f482-200d-2642":1499,"1f482":1498,"1f483":1585,"1f484":61152,"1f485":1366,"1f486-200d-2640":1560,"1f486-200d-2642":1559,"1f486":1558,"1f487-200d-2640":1563,"1f487-200d-2642":1562,"1f487":1561,"1f488":4870,"1f489":61326,"1f48a":61328,"1f48b":1127,"1f48c":1128,"1f48d":61153,"1f48e":61154,"1f48f":1649,"1f490":2648,"1f491":1653,"1f492":4846,"1f493":1133,"1f494":1138,"1f495":1135,"1f496":1131,"1f497":1132,"1f498":1129,"1f499":1145,"1f49a":1144,"1f49b":1143,"1f49c":1146,"1f49d":1130,"1f49e":1134,"1f49f":1136,"1f4a0":62946,"1f4a1":61214,"1f4a2":1151,"1f4a3":1157,"1f4a4":1163,"1f4a5":1152,"1f4a6":1154,"1f4a7":41022,"1f4a8":1155,"1f4a9":1107,"1f4aa":1368,"1f4ab":1153,"1f4ac":1158,"1f4ad":1162,"1f4ae":2650,"1f4af":1150,"1f4b0":61235,"1f4b1":62841,"1f4b2":62842,"1f4b3":61242,"1f4b4":61237,"1f4b5":61238,"1f4b6":61239,"1f4b7":61240,"1f4b8":61241,"1f4b9":61244,"1f4ba":4936,"1f4bb":61191,"1f4bc":61265,"1f4bd":61197,"1f4be":61198,"1f4bf":61199,"1f4c0":61200,"1f4c1":61266,"1f4c2":61267,"1f4c3":61227,"1f4c4":61229,"1f4c5":61269,"1f4c6":61270,"1f4c7":61273,"1f4c8":61274,"1f4c9":61275,"1f4ca":61276,"1f4cb":61277,"1f4cc":61278,"1f4cd":61279,"1f4ce":61280,"1f4cf":61282,"1f4d0":61283,"1f4d1":61232,"1f4d2":61226,"1f4d3":61225,"1f4d4":61218,"1f4d5":61219,"1f4d6":61220,"1f4d7":61221,"1f4d8":61222,"1f4d9":61223,"1f4da":61224,"1f4db":62847,"1f4dc":61228,"1f4dd":61264,"1f4de":61185,"1f4df":61186,"1f4e0":61187,"1f4e1":61325,"1f4e2":61159,"1f4e3":61160,"1f4e4":61249,"1f4e5":61250,"1f4e6":61251,"1f4e7":61246,"1f4e8":61247,"1f4e9":61248,"1f4ea":61253,"1f4eb":61252,"1f4ec":61254,"1f4ed":61255,"1f4ee":61256,"1f4ef":61161,"1f4f0":61230,"1f4f1":61182,"1f4f2":61183,"1f4f3":62823,"1f4f4":62824,"1f4f5":62751,"1f4f6":62822,"1f4f7":61207,"1f4f8":61208,"1f4f9":61209,"1f4fa":61206,"1f4fb":61172,"1f4fc":61210,"1f4fd":61204,"1f4ff":61151,"1f500":62801,"1f501":62802,"1f502":62803,"1f503":62769,"1f504":62770,"1f505":62820,"1f506":62821,"1f507":61155,"1f508":61156,"1f509":61157,"1f50a":61158,"1f50b":61188,"1f50c":61190,"1f50d":61211,"1f50e":61212,"1f50f":61290,"1f510":61291,"1f511":61292,"1f512":61288,"1f513":61289,"1f514":61162,"1f515":61163,"1f516":61233,"1f517":61313,"1f518":62947,"1f519":62771,"1f51a":62772,"1f51b":62773,"1f51c":62774,"1f51d":62775,"1f51e":62752,"1f51f":62876,"1f520":62877,"1f521":62878,"1f522":62879,"1f523":62880,"1f524":62881,"1f525":41021,"1f526":61215,"1f527":61306,"1f528":61294,"1f529":61308,"1f52a":3803,"1f52b":61301,"1f52c":61323,"1f52d":61324,"1f52e":51082,"1f52f":62787,"1f530":62848,"1f531":62846,"1f532":62949,"1f533":62948,"1f534":62916,"1f535":62920,"1f536":62940,"1f537":62941,"1f538":62942,"1f539":62943,"1f53a":62944,"1f53b":62945,"1f53c":62811,"1f53d":62813,"1f549":62778,"1f54a":2602,"1f54b":4854,"1f54c":4850,"1f54d":4852,"1f54e":62786,"1f550":4955,"1f551":4957,"1f552":4959,"1f553":4961,"1f554":4963,"1f555":4965,"1f556":4967,"1f557":4969,"1f558":4971,"1f559":4973,"1f55a":4975,"1f55b":4953,"1f55c":4956,"1f55d":4958,"1f55e":4960,"1f55f":4962,"1f560":4964,"1f561":4966,"1f562":4968,"1f563":4970,"1f564":4972,"1f565":4974,"1f566":4976,"1f567":4954,"1f56f":61213,"1f570":4952,"1f573":1156,"1f574":1587,"1f575-200d-2640":1497,"1f575-200d-2642":1496,"1f575":1495,"1f576":61111,"1f577":2641,"1f578":2642,"1f579":51087,"1f57a":1586,"1f587":61281,"1f58a":61261,"1f58b":61260,"1f58c":61262,"1f58d":61263,"1f590":1329,"1f595":1348,"1f596":1331,"1f5a4":1148,"1f5a5":61192,"1f5a8":61193,"1f5b1":61195,"1f5b2":61196,"1f5bc":51104,"1f5c2":61268,"1f5c3":61285,"1f5c4":61286,"1f5d1":61287,"1f5d2":61271,"1f5d3":61272,"1f5dc":61310,"1f5dd":61293,"1f5de":61231,"1f5e1":61299,"1f5e3":1683,"1f5e8":1160,"1f5ef":1161,"1f5f3":61257,"1f5fa":4810,"1f5fb":4816,"1f5fc":4847,"1f5fd":4848,"1f5fe":4811,"1f5ff":61362,"1f600":11,"1f601":14,"1f602":18,"1f603":12,"1f604":13,"1f605":16,"1f606":15,"1f607":114,"1f608":1103,"1f609":112,"1f60a":113,"1f60b":124,"1f60c":150,"1f60d":116,"1f60e":170,"1f60f":144,"1f610":139,"1f611":140,"1f612":145,"1f613":195,"1f614":151,"1f615":173,"1f616":192,"1f617":119,"1f618":118,"1f619":122,"1f61a":121,"1f61b":125,"1f61c":126,"1f61d":128,"1f61e":194,"1f61f":175,"1f620":1101,"1f621":1100,"1f622":189,"1f623":193,"1f624":199,"1f625":188,"1f626":184,"1f627":185,"1f628":186,"1f629":196,"1f62a":152,"1f62b":197,"1f62c":147,"1f62d":190,"1f62e-200d-1f4a8":148,"1f62e":178,"1f62f":179,"1f630":187,"1f631":191,"1f632":180,"1f633":181,"1f634":154,"1f635-200d-1f4ab":165,"1f635":164,"1f636-200d-1f32b":143,"1f636":141,"1f637":155,"1f638":1116,"1f639":1117,"1f63a":1115,"1f63b":1118,"1f63c":1119,"1f63d":1120,"1f63e":1123,"1f63f":1122,"1f640":1121,"1f641":176,"1f642":19,"1f643":110,"1f644":146,"1f645-200d-2640":1422,"1f645-200d-2642":1421,"1f645":1420,"1f646-200d-2640":1425,"1f646-200d-2642":1424,"1f646":1423,"1f647-200d-2640":1437,"1f647-200d-2642":1436,"1f647":1435,"1f648":1124,"1f649":1125,"1f64a":1126,"1f64b-200d-2640":1431,"1f64b-200d-2642":1430,"1f64b":1429,"1f64c":1359,"1f64d-200d-2640":1416,"1f64d-200d-2642":1415,"1f64d":1414,"1f64e-200d-2640":1419,"1f64e-200d-2642":1418,"1f64e":1417,"1f64f":1364,"1f680":4942,"1f681":4937,"1f682":4872,"1f683":4873,"1f684":4874,"1f685":4875,"1f686":4876,"1f687":4877,"1f688":4878,"1f689":4879,"1f68a":4880,"1f68b":4883,"1f68c":4884,"1f68d":4885,"1f68e":4886,"1f68f":4911,"1f690":4887,"1f691":4888,"1f692":4889,"1f693":4890,"1f694":4891,"1f695":4892,"1f696":4893,"1f697":4894,"1f698":4895,"1f699":4896,"1f69a":4898,"1f69b":4899,"1f69c":4900,"1f69d":4881,"1f69e":4882,"1f69f":4938,"1f6a0":4939,"1f6a1":4940,"1f6a2":4930,"1f6a3-200d-2640":1609,"1f6a3-200d-2642":1608,"1f6a3":1607,"1f6a4":4926,"1f6a5":4918,"1f6a6":4919,"1f6a7":4921,"1f6a8":4917,"1f6a9":71587,"1f6aa":61333,"1f6ab":62745,"1f6ac":61358,"1f6ad":62747,"1f6ae":62730,"1f6af":62748,"1f6b0":62731,"1f6b1":62749,"1f6b2":4907,"1f6b3":62746,"1f6b4-200d-2640":1621,"1f6b4-200d-2642":1620,"1f6b4":1619,"1f6b5-200d-2640":1624,"1f6b5-200d-2642":1623,"1f6b5":1622,"1f6b6-200d-2640":1566,"1f6b6-200d-2642":1565,"1f6b6":1564,"1f6b7":62750,"1f6b8":62743,"1f6b9":62733,"1f6ba":62734,"1f6bb":62735,"1f6bc":62736,"1f6bd":61340,"1f6be":62737,"1f6bf":61342,"1f6c0":1643,"1f6c1":61343,"1f6c2":62738,"1f6c3":62739,"1f6c4":62740,"1f6c5":62741,"1f6cb":61338,"1f6cc":1644,"1f6cd":61133,"1f6ce":4944,"1f6cf":61337,"1f6d0":62776,"1f6d1":4920,"1f6d2":61357,"1f6d5":4851,"1f6d6":4828,"1f6d7":61334,"1f6e0":61298,"1f6e1":61304,"1f6e2":4914,"1f6e3":4912,"1f6e4":4913,"1f6e5":4929,"1f6e9":4932,"1f6eb":4933,"1f6ec":4934,"1f6f0":4941,"1f6f3":4927,"1f6f4":4908,"1f6f5":4903,"1f6f6":4925,"1f6f7":51076,"1f6f8":4943,"1f6f9":4909,"1f6fa":4906,"1f6fb":4897,"1f6fc":4910,"1f7e0":62917,"1f7e1":62918,"1f7e2":62919,"1f7e3":62921,"1f7e4":62922,"1f7e5":62925,"1f7e6":62929,"1f7e7":62926,"1f7e8":62927,"1f7e9":62928,"1f7ea":62930,"1f7eb":62931,"1f90c":1337,"1f90d":1149,"1f90e":1147,"1f90f":1338,"1f910":137,"1f911":129,"1f912":156,"1f913":171,"1f914":135,"1f915":157,"1f916":1114,"1f917":130,"1f918":1343,"1f919":1344,"1f91a":1328,"1f91b":1356,"1f91c":1357,"1f91d":1363,"1f91e":1340,"1f91f":1342,"1f920":167,"1f921":1108,"1f922":158,"1f923":17,"1f924":153,"1f925":149,"1f926-200d-2640":1440,"1f926-200d-2642":1439,"1f926":1438,"1f927":160,"1f928":138,"1f929":117,"1f92a":127,"1f92b":134,"1f92c":1102,"1f92d":131,"1f92e":159,"1f92f":166,"1f930":1519,"1f931":1522,"1f932":1362,"1f933":1367,"1f934":1506,"1f935-200d-2640":1515,"1f935-200d-2642":1514,"1f935":1513,"1f936":1528,"1f937-200d-2640":1443,"1f937-200d-2642":1442,"1f937":1441,"1f938-200d-2640":1627,"1f938-200d-2642":1626,"1f938":1625,"1f939-200d-2640":1639,"1f939-200d-2642":1638,"1f939":1637,"1f93a":1597,"1f93c-200d-2640":1630,"1f93c-200d-2642":1629,"1f93c":1628,"1f93d-200d-2640":1633,"1f93d-200d-2642":1632,"1f93d":1631,"1f93e-200d-2640":1636,"1f93e-200d-2642":1635,"1f93e":1634,"1f93f":51073,"1f940":2654,"1f941":61180,"1f942":3791,"1f943":3792,"1f944":3802,"1f945":51069,"1f947":51048,"1f948":51049,"1f949":51050,"1f94a":51067,"1f94b":51068,"1f94c":51077,"1f94d":51064,"1f94e":51053,"1f94f":51059,"1f950":3710,"1f951":3693,"1f952":3700,"1f953":3721,"1f954":3695,"1f955":3696,"1f956":3711,"1f957":3738,"1f958":3734,"1f959":3730,"1f95a":3732,"1f95b":3780,"1f95c":3706,"1f95d":3689,"1f95e":3715,"1f95f":3757,"1f960":3758,"1f961":3759,"1f962":3799,"1f963":3737,"1f964":3794,"1f965":3692,"1f966":3702,"1f967":3773,"1f968":3713,"1f969":3720,"1f96a":3726,"1f96b":3742,"1f96c":3701,"1f96d":3681,"1f96e":3755,"1f96f":3714,"1f970":115,"1f971":198,"1f972":123,"1f973":168,"1f974":163,"1f975":161,"1f976":162,"1f977":1501,"1f978":169,"1f97a":182,"1f97b":61124,"1f97c":61113,"1f97d":61112,"1f97e":61138,"1f97f":61139,"1f980":3760,"1f981":2545,"1f982":2643,"1f983":2594,"1f984":2551,"1f985":2603,"1f986":2604,"1f987":2583,"1f988":2628,"1f989":2606,"1f98a":2540,"1f98b":2633,"1f98c":2553,"1f98d":2532,"1f98e":2615,"1f98f":2572,"1f990":3762,"1f991":3763,"1f992":2569,"1f993":2552,"1f994":2582,"1f995":2619,"1f996":2620,"1f997":2639,"1f998":2591,"1f999":2568,"1f99a":2610,"1f99b":2573,"1f99c":2611,"1f99d":2541,"1f99e":3761,"1f99f":2644,"1f9a0":2647,"1f9a1":2592,"1f9a2":2605,"1f9a3":2571,"1f9a4":2607,"1f9a5":2588,"1f9a6":2589,"1f9a7":2533,"1f9a8":2590,"1f9a9":2609,"1f9aa":3764,"1f9ab":2581,"1f9ac":2554,"1f9ad":2624,"1f9ae":2536,"1f9af":61312,"1f9b4":1380,"1f9b5":1371,"1f9b6":1372,"1f9b7":1379,"1f9b8-200d-2640":1532,"1f9b8-200d-2642":1531,"1f9b8":1530,"1f9b9-200d-2640":1535,"1f9b9-200d-2642":1534,"1f9b9":1533,"1f9ba":61114,"1f9bb":1374,"1f9bc":4905,"1f9bd":4904,"1f9be":1369,"1f9bf":1370,"1f9c0":3717,"1f9c1":3772,"1f9c2":3741,"1f9c3":3796,"1f9c4":3703,"1f9c5":3704,"1f9c6":3731,"1f9c7":3716,"1f9c8":3740,"1f9c9":3797,"1f9ca":3798,"1f9cb":3795,"1f9cd-200d-2640":1569,"1f9cd-200d-2642":1568,"1f9cd":1567,"1f9ce-200d-2640":1572,"1f9ce-200d-2642":1571,"1f9ce":1570,"1f9cf-200d-2640":1434,"1f9cf-200d-2642":1433,"1f9cf":1432,"1f9d0":172,"1f9d1-200d-1f33e":1456,"1f9d1-200d-1f373":1459,"1f9d1-200d-1f37c":1525,"1f9d1-200d-1f384":1529,"1f9d1-200d-1f393":1447,"1f9d1-200d-1f3a4":1477,"1f9d1-200d-1f3a8":1480,"1f9d1-200d-1f3eb":1450,"1f9d1-200d-1f3ed":1465,"1f9d1-200d-1f4bb":1474,"1f9d1-200d-1f4bc":1468,"1f9d1-200d-1f527":1462,"1f9d1-200d-1f52c":1471,"1f9d1-200d-1f680":1486,"1f9d1-200d-1f692":1489,"1f9d1-200d-1f91d-200d-1f9d1":1645,"1f9d1-200d-1f9af":1573,"1f9d1-200d-1f9b0":1402,"1f9d1-200d-1f9b1":1404,"1f9d1-200d-1f9b2":1408,"1f9d1-200d-1f9b3":1406,"1f9d1-200d-1f9bc":1576,"1f9d1-200d-1f9bd":1579,"1f9d1-200d-2695":1444,"1f9d1-200d-2696":1453,"1f9d1-200d-2708":1483,"1f9d1":1390,"1f9d2":1387,"1f9d3":1411,"1f9d4-200d-2640":1395,"1f9d4-200d-2642":1394,"1f9d4":1393,"1f9d5":1512,"1f9d6-200d-2640":1593,"1f9d6-200d-2642":1592,"1f9d6":1591,"1f9d7-200d-2640":1596,"1f9d7-200d-2642":1595,"1f9d7":1594,"1f9d8-200d-2640":1642,"1f9d8-200d-2642":1641,"1f9d8":1640,"1f9d9-200d-2640":1538,"1f9d9-200d-2642":1537,"1f9d9":1536,"1f9da-200d-2640":1541,"1f9da-200d-2642":1540,"1f9da":1539,"1f9db-200d-2640":1544,"1f9db-200d-2642":1543,"1f9db":1542,"1f9dc-200d-2640":1547,"1f9dc-200d-2642":1546,"1f9dc":1545,"1f9dd-200d-2640":1550,"1f9dd-200d-2642":1549,"1f9dd":1548,"1f9de-200d-2640":1553,"1f9de-200d-2642":1552,"1f9de":1551,"1f9df-200d-2640":1556,"1f9df-200d-2642":1555,"1f9df":1554,"1f9e0":1376,"1f9e1":1142,"1f9e2":61148,"1f9e3":61118,"1f9e4":61119,"1f9e5":61120,"1f9e6":61121,"1f9e7":51039,"1f9e8":51028,"1f9e9":51090,"1f9ea":61320,"1f9eb":61321,"1f9ec":61322,"1f9ed":4812,"1f9ee":61201,"1f9ef":61356,"1f9f0":61316,"1f9f1":4825,"1f9f2":61317,"1f9f3":4945,"1f9f4":61346,"1f9f5":51106,"1f9f6":51108,"1f9f7":61347,"1f9f8":51091,"1f9f9":61348,"1f9fa":61349,"1f9fb":61350,"1f9fc":61352,"1f9fd":61355,"1f9fe":61243,"1f9ff":51084,"1fa70":61142,"1fa71":61125,"1fa72":61126,"1fa73":61127,"1fa74":61135,"1fa78":61327,"1fa79":61329,"1fa7a":61331,"1fa80":51079,"1fa81":51080,"1fa82":4935,"1fa83":61302,"1fa84":51083,"1fa85":51092,"1fa86":51094,"1fa90":4993,"1fa91":61339,"1fa92":61345,"1fa93":61295,"1fa94":61217,"1fa95":61179,"1fa96":61149,"1fa97":61174,"1fa98":61181,"1fa99":61236,"1fa9a":61305,"1fa9b":61307,"1fa9c":61318,"1fa9d":61315,"1fa9e":61335,"1fa9f":61336,"1faa0":61341,"1faa1":51107,"1faa2":51109,"1faa3":61351,"1faa4":61344,"1faa5":61354,"1faa6":61360,"1faa7":61363,"1faa8":4826,"1fab0":2645,"1fab1":2646,"1fab2":2637,"1fab3":2640,"1fab4":2660,"1fab5":4827,"1fab6":2608,"1fac0":1377,"1fac1":1378,"1fac2":1686,"1fad0":3688,"1fad1":3699,"1fad2":3691,"1fad3":3712,"1fad4":3729,"1fad5":3736,"1fad6":3782,"203c":62834,"21a9":62765,"21aa":62766,"231a":4948,"231b":4946,"23cf":62818,"23e9":62805,"23ea":62809,"23eb":62812,"23ec":62814,"23ed":62806,"23ee":62810,"23ef":62807,"23f0":4949,"23f1":4950,"23f2":4951,"23f3":4947,"23f8":62815,"23f9":62816,"23fa":62817,"24c2":62890,"25aa":62938,"25ab":62939,"25b6":62804,"25c0":62808,"25fb":62935,"25fc":62934,"25fd":62937,"25fe":62936,"260e":61184,"261d":1350,"262a":62784,"262e":62785,"262f":62781,"263a":120,"264a":62790,"264b":62791,"264c":62792,"264d":62793,"264e":62794,"264f":62795,"265f":51099,"267b":62844,"267e":62833,"267f":62732,"269b":62777,"269c":62845,"26a0":62742,"26a1":41016,"26a7":62827,"26aa":62924,"26ab":62923,"26b0":61359,"26b1":61361,"26bd":51051,"26be":51052,"26c4":41019,"26c5":4999,"26c8":41e3,"26ce":62800,"26cf":61296,"26d1":61150,"26d3":61314,"26d4":62744,"26e9":4853,"26ea":4849,"26f0":4814,"26f1":41015,"26f2":4855,"26f3":51070,"26f4":4928,"26f5":4924,"26f7":1599,"26f8":51071,"26f9-200d-2640":1615,"26f9-200d-2642":1614,"26f9":1613,"26fa":4856,"26fd":4915,"270a":1354,"270b":1330,"270c":1339,"270d":1365,"270f":61258,"271d":62782,"274c":62853,"274e":62854,"2764-200d-1f525":1139,"2764-200d-1fa79":1140,"27a1":62757,"27b0":62855,"27bf":62856,"2b05":62761,"2b06":62755,"2b07":62759,"2b1b":62932,"2b1c":62933,"2b50":4994,"2b55":62849,"303d":62857,"1f385-1f3fb":0,"1f385-1f3fc":0,"1f385-1f3fd":0,"1f385-1f3fe":0,"1f385-1f3ff":0,"1f3c2-1f3fb":0,"1f3c2-1f3fc":0,"1f3c2-1f3fd":0,"1f3c2-1f3fe":0,"1f3c2-1f3ff":0,"1f3c3-1f3fb-200d-2640":0,"1f3c3-1f3fc-200d-2640":0,"1f3c3-1f3fd-200d-2640":0,"1f3c3-1f3fe-200d-2640":0,"1f3c3-1f3ff-200d-2640":0,"1f3c3-1f3fb-200d-2642":0,"1f3c3-1f3fc-200d-2642":0,"1f3c3-1f3fd-200d-2642":0,"1f3c3-1f3fe-200d-2642":0,"1f3c3-1f3ff-200d-2642":0,"1f3c3-1f3fb":0,"1f3c3-1f3fc":0,"1f3c3-1f3fd":0,"1f3c3-1f3fe":0,"1f3c3-1f3ff":0,"1f3c4-1f3fb-200d-2640":0,"1f3c4-1f3fc-200d-2640":0,"1f3c4-1f3fd-200d-2640":0,"1f3c4-1f3fe-200d-2640":0,"1f3c4-1f3ff-200d-2640":0,"1f3c4-1f3fb-200d-2642":0,"1f3c4-1f3fc-200d-2642":0,"1f3c4-1f3fd-200d-2642":0,"1f3c4-1f3fe-200d-2642":0,"1f3c4-1f3ff-200d-2642":0,"1f3c4-1f3fb":0,"1f3c4-1f3fc":0,"1f3c4-1f3fd":0,"1f3c4-1f3fe":0,"1f3c4-1f3ff":0,"1f3c7-1f3fb":0,"1f3c7-1f3fc":0,"1f3c7-1f3fd":0,"1f3c7-1f3fe":0,"1f3c7-1f3ff":0,"1f3ca-1f3fb-200d-2640":0,"1f3ca-1f3fc-200d-2640":0,"1f3ca-1f3fd-200d-2640":0,"1f3ca-1f3fe-200d-2640":0,"1f3ca-1f3ff-200d-2640":0,"1f3ca-1f3fb-200d-2642":0,"1f3ca-1f3fc-200d-2642":0,"1f3ca-1f3fd-200d-2642":0,"1f3ca-1f3fe-200d-2642":0,"1f3ca-1f3ff-200d-2642":0,"1f3ca-1f3fb":0,"1f3ca-1f3fc":0,"1f3ca-1f3fd":0,"1f3ca-1f3fe":0,"1f3ca-1f3ff":0,"1f3cb-1f3fb-200d-2640":0,"1f3cb-1f3fc-200d-2640":0,"1f3cb-1f3fd-200d-2640":0,"1f3cb-1f3fe-200d-2640":0,"1f3cb-1f3ff-200d-2640":0,"1f3cb-1f3fb-200d-2642":0,"1f3cb-1f3fc-200d-2642":0,"1f3cb-1f3fd-200d-2642":0,"1f3cb-1f3fe-200d-2642":0,"1f3cb-1f3ff-200d-2642":0,"1f3cb-1f3fb":0,"1f3cb-1f3fc":0,"1f3cb-1f3fd":0,"1f3cb-1f3fe":0,"1f3cb-1f3ff":0,"1f3cc-1f3fb-200d-2640":0,"1f3cc-1f3fc-200d-2640":0,"1f3cc-1f3fd-200d-2640":0,"1f3cc-1f3fe-200d-2640":0,"1f3cc-1f3ff-200d-2640":0,"1f3cc-1f3fb-200d-2642":0,"1f3cc-1f3fc-200d-2642":0,"1f3cc-1f3fd-200d-2642":0,"1f3cc-1f3fe-200d-2642":0,"1f3cc-1f3ff-200d-2642":0,"1f3cc-1f3fb":0,"1f3cc-1f3fc":0,"1f3cc-1f3fd":0,"1f3cc-1f3fe":0,"1f3cc-1f3ff":0,"1f442-1f3fb":0,"1f442-1f3fc":0,"1f442-1f3fd":0,"1f442-1f3fe":0,"1f442-1f3ff":0,"1f443-1f3fb":0,"1f443-1f3fc":0,"1f443-1f3fd":0,"1f443-1f3fe":0,"1f443-1f3ff":0,"1f446-1f3fb":0,"1f446-1f3fc":0,"1f446-1f3fd":0,"1f446-1f3fe":0,"1f446-1f3ff":0,"1f447-1f3fb":0,"1f447-1f3fc":0,"1f447-1f3fd":0,"1f447-1f3fe":0,"1f447-1f3ff":0,"1f448-1f3fb":0,"1f448-1f3fc":0,"1f448-1f3fd":0,"1f448-1f3fe":0,"1f448-1f3ff":0,"1f449-1f3fb":0,"1f449-1f3fc":0,"1f449-1f3fd":0,"1f449-1f3fe":0,"1f449-1f3ff":0,"1f44a-1f3fb":0,"1f44a-1f3fc":0,"1f44a-1f3fd":0,"1f44a-1f3fe":0,"1f44a-1f3ff":0,"1f44b-1f3fb":0,"1f44b-1f3fc":0,"1f44b-1f3fd":0,"1f44b-1f3fe":0,"1f44b-1f3ff":0,"1f44c-1f3fb":0,"1f44c-1f3fc":0,"1f44c-1f3fd":0,"1f44c-1f3fe":0,"1f44c-1f3ff":0,"1f44d-1f3fb":0,"1f44d-1f3fc":0,"1f44d-1f3fd":0,"1f44d-1f3fe":0,"1f44d-1f3ff":0,"1f44e-1f3fb":0,"1f44e-1f3fc":0,"1f44e-1f3fd":0,"1f44e-1f3fe":0,"1f44e-1f3ff":0,"1f44f-1f3fb":0,"1f44f-1f3fc":0,"1f44f-1f3fd":0,"1f44f-1f3fe":0,"1f44f-1f3ff":0,"1f450-1f3fb":0,"1f450-1f3fc":0,"1f450-1f3fd":0,"1f450-1f3fe":0,"1f450-1f3ff":0,"1f466-1f3fb":0,"1f466-1f3fc":0,"1f466-1f3fd":0,"1f466-1f3fe":0,"1f466-1f3ff":0,"1f467-1f3fb":0,"1f467-1f3fc":0,"1f467-1f3fd":0,"1f467-1f3fe":0,"1f467-1f3ff":0,"1f468-1f3fb-200d-1f33e":0,"1f468-1f3fc-200d-1f33e":0,"1f468-1f3fd-200d-1f33e":0,"1f468-1f3fe-200d-1f33e":0,"1f468-1f3ff-200d-1f33e":0,"1f468-1f3fb-200d-1f373":0,"1f468-1f3fc-200d-1f373":0,"1f468-1f3fd-200d-1f373":0,"1f468-1f3fe-200d-1f373":0,"1f468-1f3ff-200d-1f373":0,"1f468-1f3fb-200d-1f37c":0,"1f468-1f3fc-200d-1f37c":0,"1f468-1f3fd-200d-1f37c":0,"1f468-1f3fe-200d-1f37c":0,"1f468-1f3ff-200d-1f37c":0,"1f468-1f3fb-200d-1f393":0,"1f468-1f3fc-200d-1f393":0,"1f468-1f3fd-200d-1f393":0,"1f468-1f3fe-200d-1f393":0,"1f468-1f3ff-200d-1f393":0,"1f468-1f3fb-200d-1f3a4":0,"1f468-1f3fc-200d-1f3a4":0,"1f468-1f3fd-200d-1f3a4":0,"1f468-1f3fe-200d-1f3a4":0,"1f468-1f3ff-200d-1f3a4":0,"1f468-1f3fb-200d-1f3a8":0,"1f468-1f3fc-200d-1f3a8":0,"1f468-1f3fd-200d-1f3a8":0,"1f468-1f3fe-200d-1f3a8":0,"1f468-1f3ff-200d-1f3a8":0,"1f468-1f3fb-200d-1f3eb":0,"1f468-1f3fc-200d-1f3eb":0,"1f468-1f3fd-200d-1f3eb":0,"1f468-1f3fe-200d-1f3eb":0,"1f468-1f3ff-200d-1f3eb":0,"1f468-1f3fb-200d-1f3ed":0,"1f468-1f3fc-200d-1f3ed":0,"1f468-1f3fd-200d-1f3ed":0,"1f468-1f3fe-200d-1f3ed":0,"1f468-1f3ff-200d-1f3ed":0,"1f468-1f3fb-200d-1f4bb":0,"1f468-1f3fc-200d-1f4bb":0,"1f468-1f3fd-200d-1f4bb":0,"1f468-1f3fe-200d-1f4bb":0,"1f468-1f3ff-200d-1f4bb":0,"1f468-1f3fb-200d-1f4bc":0,"1f468-1f3fc-200d-1f4bc":0,"1f468-1f3fd-200d-1f4bc":0,"1f468-1f3fe-200d-1f4bc":0,"1f468-1f3ff-200d-1f4bc":0,"1f468-1f3fb-200d-1f527":0,"1f468-1f3fc-200d-1f527":0,"1f468-1f3fd-200d-1f527":0,"1f468-1f3fe-200d-1f527":0,"1f468-1f3ff-200d-1f527":0,"1f468-1f3fb-200d-1f52c":0,"1f468-1f3fc-200d-1f52c":0,"1f468-1f3fd-200d-1f52c":0,"1f468-1f3fe-200d-1f52c":0,"1f468-1f3ff-200d-1f52c":0,"1f468-1f3fb-200d-1f680":0,"1f468-1f3fc-200d-1f680":0,"1f468-1f3fd-200d-1f680":0,"1f468-1f3fe-200d-1f680":0,"1f468-1f3ff-200d-1f680":0,"1f468-1f3fb-200d-1f692":0,"1f468-1f3fc-200d-1f692":0,"1f468-1f3fd-200d-1f692":0,"1f468-1f3fe-200d-1f692":0,"1f468-1f3ff-200d-1f692":0,"1f468-1f3fb-200d-1f9af":0,"1f468-1f3fc-200d-1f9af":0,"1f468-1f3fd-200d-1f9af":0,"1f468-1f3fe-200d-1f9af":0,"1f468-1f3ff-200d-1f9af":0,"1f468-1f3fb-200d-1f9b0":0,"1f468-1f3fc-200d-1f9b0":0,"1f468-1f3fd-200d-1f9b0":0,"1f468-1f3fe-200d-1f9b0":0,"1f468-1f3ff-200d-1f9b0":0,"1f468-1f3fb-200d-1f9b1":0,"1f468-1f3fc-200d-1f9b1":0,"1f468-1f3fd-200d-1f9b1":0,"1f468-1f3fe-200d-1f9b1":0,"1f468-1f3ff-200d-1f9b1":0,"1f468-1f3fb-200d-1f9b2":0,"1f468-1f3fc-200d-1f9b2":0,"1f468-1f3fd-200d-1f9b2":0,"1f468-1f3fe-200d-1f9b2":0,"1f468-1f3ff-200d-1f9b2":0,"1f468-1f3fb-200d-1f9b3":0,"1f468-1f3fc-200d-1f9b3":0,"1f468-1f3fd-200d-1f9b3":0,"1f468-1f3fe-200d-1f9b3":0,"1f468-1f3ff-200d-1f9b3":0,"1f468-1f3fb-200d-1f9bc":0,"1f468-1f3fc-200d-1f9bc":0,"1f468-1f3fd-200d-1f9bc":0,"1f468-1f3fe-200d-1f9bc":0,"1f468-1f3ff-200d-1f9bc":0,"1f468-1f3fb-200d-1f9bd":0,"1f468-1f3fc-200d-1f9bd":0,"1f468-1f3fd-200d-1f9bd":0,"1f468-1f3fe-200d-1f9bd":0,"1f468-1f3ff-200d-1f9bd":0,"1f468-1f3fb-200d-2695":0,"1f468-1f3fc-200d-2695":0,"1f468-1f3fd-200d-2695":0,"1f468-1f3fe-200d-2695":0,"1f468-1f3ff-200d-2695":0,"1f468-1f3fb-200d-2696":0,"1f468-1f3fc-200d-2696":0,"1f468-1f3fd-200d-2696":0,"1f468-1f3fe-200d-2696":0,"1f468-1f3ff-200d-2696":0,"1f468-1f3fb-200d-2708":0,"1f468-1f3fc-200d-2708":0,"1f468-1f3fd-200d-2708":0,"1f468-1f3fe-200d-2708":0,"1f468-1f3ff-200d-2708":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3fe-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3fe":0,"1f468-1f3ff-200d-2764-200d-1f468-1f3ff":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f468-1f3fb":0,"1f468-1f3fc":0,"1f468-1f3fd":0,"1f468-1f3fe":0,"1f468-1f3ff":0,"1f469-1f3fb-200d-1f33e":0,"1f469-1f3fc-200d-1f33e":0,"1f469-1f3fd-200d-1f33e":0,"1f469-1f3fe-200d-1f33e":0,"1f469-1f3ff-200d-1f33e":0,"1f469-1f3fb-200d-1f373":0,"1f469-1f3fc-200d-1f373":0,"1f469-1f3fd-200d-1f373":0,"1f469-1f3fe-200d-1f373":0,"1f469-1f3ff-200d-1f373":0,"1f469-1f3fb-200d-1f37c":0,"1f469-1f3fc-200d-1f37c":0,"1f469-1f3fd-200d-1f37c":0,"1f469-1f3fe-200d-1f37c":0,"1f469-1f3ff-200d-1f37c":0,"1f469-1f3fb-200d-1f393":0,"1f469-1f3fc-200d-1f393":0,"1f469-1f3fd-200d-1f393":0,"1f469-1f3fe-200d-1f393":0,"1f469-1f3ff-200d-1f393":0,"1f469-1f3fb-200d-1f3a4":0,"1f469-1f3fc-200d-1f3a4":0,"1f469-1f3fd-200d-1f3a4":0,"1f469-1f3fe-200d-1f3a4":0,"1f469-1f3ff-200d-1f3a4":0,"1f469-1f3fb-200d-1f3a8":0,"1f469-1f3fc-200d-1f3a8":0,"1f469-1f3fd-200d-1f3a8":0,"1f469-1f3fe-200d-1f3a8":0,"1f469-1f3ff-200d-1f3a8":0,"1f469-1f3fb-200d-1f3eb":0,"1f469-1f3fc-200d-1f3eb":0,"1f469-1f3fd-200d-1f3eb":0,"1f469-1f3fe-200d-1f3eb":0,"1f469-1f3ff-200d-1f3eb":0,"1f469-1f3fb-200d-1f3ed":0,"1f469-1f3fc-200d-1f3ed":0,"1f469-1f3fd-200d-1f3ed":0,"1f469-1f3fe-200d-1f3ed":0,"1f469-1f3ff-200d-1f3ed":0,"1f469-1f3fb-200d-1f4bb":0,"1f469-1f3fc-200d-1f4bb":0,"1f469-1f3fd-200d-1f4bb":0,"1f469-1f3fe-200d-1f4bb":0,"1f469-1f3ff-200d-1f4bb":0,"1f469-1f3fb-200d-1f4bc":0,"1f469-1f3fc-200d-1f4bc":0,"1f469-1f3fd-200d-1f4bc":0,"1f469-1f3fe-200d-1f4bc":0,"1f469-1f3ff-200d-1f4bc":0,"1f469-1f3fb-200d-1f527":0,"1f469-1f3fc-200d-1f527":0,"1f469-1f3fd-200d-1f527":0,"1f469-1f3fe-200d-1f527":0,"1f469-1f3ff-200d-1f527":0,"1f469-1f3fb-200d-1f52c":0,"1f469-1f3fc-200d-1f52c":0,"1f469-1f3fd-200d-1f52c":0,"1f469-1f3fe-200d-1f52c":0,"1f469-1f3ff-200d-1f52c":0,"1f469-1f3fb-200d-1f680":0,"1f469-1f3fc-200d-1f680":0,"1f469-1f3fd-200d-1f680":0,"1f469-1f3fe-200d-1f680":0,"1f469-1f3ff-200d-1f680":0,"1f469-1f3fb-200d-1f692":0,"1f469-1f3fc-200d-1f692":0,"1f469-1f3fd-200d-1f692":0,"1f469-1f3fe-200d-1f692":0,"1f469-1f3ff-200d-1f692":0,"1f469-1f3fb-200d-1f9af":0,"1f469-1f3fc-200d-1f9af":0,"1f469-1f3fd-200d-1f9af":0,"1f469-1f3fe-200d-1f9af":0,"1f469-1f3ff-200d-1f9af":0,"1f469-1f3fb-200d-1f9b0":0,"1f469-1f3fc-200d-1f9b0":0,"1f469-1f3fd-200d-1f9b0":0,"1f469-1f3fe-200d-1f9b0":0,"1f469-1f3ff-200d-1f9b0":0,"1f469-1f3fb-200d-1f9b1":0,"1f469-1f3fc-200d-1f9b1":0,"1f469-1f3fd-200d-1f9b1":0,"1f469-1f3fe-200d-1f9b1":0,"1f469-1f3ff-200d-1f9b1":0,"1f469-1f3fb-200d-1f9b2":0,"1f469-1f3fc-200d-1f9b2":0,"1f469-1f3fd-200d-1f9b2":0,"1f469-1f3fe-200d-1f9b2":0,"1f469-1f3ff-200d-1f9b2":0,"1f469-1f3fb-200d-1f9b3":0,"1f469-1f3fc-200d-1f9b3":0,"1f469-1f3fd-200d-1f9b3":0,"1f469-1f3fe-200d-1f9b3":0,"1f469-1f3ff-200d-1f9b3":0,"1f469-1f3fb-200d-1f9bc":0,"1f469-1f3fc-200d-1f9bc":0,"1f469-1f3fd-200d-1f9bc":0,"1f469-1f3fe-200d-1f9bc":0,"1f469-1f3ff-200d-1f9bc":0,"1f469-1f3fb-200d-1f9bd":0,"1f469-1f3fc-200d-1f9bd":0,"1f469-1f3fd-200d-1f9bd":0,"1f469-1f3fe-200d-1f9bd":0,"1f469-1f3ff-200d-1f9bd":0,"1f469-1f3fb-200d-2695":0,"1f469-1f3fc-200d-2695":0,"1f469-1f3fd-200d-2695":0,"1f469-1f3fe-200d-2695":0,"1f469-1f3ff-200d-2695":0,"1f469-1f3fb-200d-2696":0,"1f469-1f3fc-200d-2696":0,"1f469-1f3fd-200d-2696":0,"1f469-1f3fe-200d-2696":0,"1f469-1f3ff-200d-2696":0,"1f469-1f3fb-200d-2708":0,"1f469-1f3fc-200d-2708":0,"1f469-1f3fd-200d-2708":0,"1f469-1f3fe-200d-2708":0,"1f469-1f3ff-200d-2708":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f468-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f469-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fe":0,"1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3ff":0,"1f469-1f3fb":0,"1f469-1f3fc":0,"1f469-1f3fd":0,"1f469-1f3fe":0,"1f469-1f3ff":0,"1f46b-1f3fb":0,"1f46b-1f3fc":0,"1f46b-1f3fd":0,"1f46b-1f3fe":0,"1f46b-1f3ff":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe":0,"1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd":0,"1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe":0,"1f46c-1f3fb":0,"1f46c-1f3fc":0,"1f46c-1f3fd":0,"1f46c-1f3fe":0,"1f46c-1f3ff":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe":0,"1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd":0,"1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe":0,"1f46d-1f3fb":0,"1f46d-1f3fc":0,"1f46d-1f3fd":0,"1f46d-1f3fe":0,"1f46d-1f3ff":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe":0,"1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd":0,"1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe":0,"1f46e-1f3fb-200d-2640":0,"1f46e-1f3fc-200d-2640":0,"1f46e-1f3fd-200d-2640":0,"1f46e-1f3fe-200d-2640":0,"1f46e-1f3ff-200d-2640":0,"1f46e-1f3fb-200d-2642":0,"1f46e-1f3fc-200d-2642":0,"1f46e-1f3fd-200d-2642":0,"1f46e-1f3fe-200d-2642":0,"1f46e-1f3ff-200d-2642":0,"1f46e-1f3fb":0,"1f46e-1f3fc":0,"1f46e-1f3fd":0,"1f46e-1f3fe":0,"1f46e-1f3ff":0,"1f470-1f3fb-200d-2640":0,"1f470-1f3fc-200d-2640":0,"1f470-1f3fd-200d-2640":0,"1f470-1f3fe-200d-2640":0,"1f470-1f3ff-200d-2640":0,"1f470-1f3fb-200d-2642":0,"1f470-1f3fc-200d-2642":0,"1f470-1f3fd-200d-2642":0,"1f470-1f3fe-200d-2642":0,"1f470-1f3ff-200d-2642":0,"1f470-1f3fb":0,"1f470-1f3fc":0,"1f470-1f3fd":0,"1f470-1f3fe":0,"1f470-1f3ff":0,"1f471-1f3fb-200d-2640":0,"1f471-1f3fc-200d-2640":0,"1f471-1f3fd-200d-2640":0,"1f471-1f3fe-200d-2640":0,"1f471-1f3ff-200d-2640":0,"1f471-1f3fb-200d-2642":0,"1f471-1f3fc-200d-2642":0,"1f471-1f3fd-200d-2642":0,"1f471-1f3fe-200d-2642":0,"1f471-1f3ff-200d-2642":0,"1f471-1f3fb":0,"1f471-1f3fc":0,"1f471-1f3fd":0,"1f471-1f3fe":0,"1f471-1f3ff":0,"1f472-1f3fb":0,"1f472-1f3fc":0,"1f472-1f3fd":0,"1f472-1f3fe":0,"1f472-1f3ff":0,"1f473-1f3fb-200d-2640":0,"1f473-1f3fc-200d-2640":0,"1f473-1f3fd-200d-2640":0,"1f473-1f3fe-200d-2640":0,"1f473-1f3ff-200d-2640":0,"1f473-1f3fb-200d-2642":0,"1f473-1f3fc-200d-2642":0,"1f473-1f3fd-200d-2642":0,"1f473-1f3fe-200d-2642":0,"1f473-1f3ff-200d-2642":0,"1f473-1f3fb":0,"1f473-1f3fc":0,"1f473-1f3fd":0,"1f473-1f3fe":0,"1f473-1f3ff":0,"1f474-1f3fb":0,"1f474-1f3fc":0,"1f474-1f3fd":0,"1f474-1f3fe":0,"1f474-1f3ff":0,"1f475-1f3fb":0,"1f475-1f3fc":0,"1f475-1f3fd":0,"1f475-1f3fe":0,"1f475-1f3ff":0,"1f476-1f3fb":0,"1f476-1f3fc":0,"1f476-1f3fd":0,"1f476-1f3fe":0,"1f476-1f3ff":0,"1f477-1f3fb-200d-2640":0,"1f477-1f3fc-200d-2640":0,"1f477-1f3fd-200d-2640":0,"1f477-1f3fe-200d-2640":0,"1f477-1f3ff-200d-2640":0,"1f477-1f3fb-200d-2642":0,"1f477-1f3fc-200d-2642":0,"1f477-1f3fd-200d-2642":0,"1f477-1f3fe-200d-2642":0,"1f477-1f3ff-200d-2642":0,"1f477-1f3fb":0,"1f477-1f3fc":0,"1f477-1f3fd":0,"1f477-1f3fe":0,"1f477-1f3ff":0,"1f478-1f3fb":0,"1f478-1f3fc":0,"1f478-1f3fd":0,"1f478-1f3fe":0,"1f478-1f3ff":0,"1f47c-1f3fb":0,"1f47c-1f3fc":0,"1f47c-1f3fd":0,"1f47c-1f3fe":0,"1f47c-1f3ff":0,"1f481-1f3fb-200d-2640":0,"1f481-1f3fc-200d-2640":0,"1f481-1f3fd-200d-2640":0,"1f481-1f3fe-200d-2640":0,"1f481-1f3ff-200d-2640":0,"1f481-1f3fb-200d-2642":0,"1f481-1f3fc-200d-2642":0,"1f481-1f3fd-200d-2642":0,"1f481-1f3fe-200d-2642":0,"1f481-1f3ff-200d-2642":0,"1f481-1f3fb":0,"1f481-1f3fc":0,"1f481-1f3fd":0,"1f481-1f3fe":0,"1f481-1f3ff":0,"1f482-1f3fb-200d-2640":0,"1f482-1f3fc-200d-2640":0,"1f482-1f3fd-200d-2640":0,"1f482-1f3fe-200d-2640":0,"1f482-1f3ff-200d-2640":0,"1f482-1f3fb-200d-2642":0,"1f482-1f3fc-200d-2642":0,"1f482-1f3fd-200d-2642":0,"1f482-1f3fe-200d-2642":0,"1f482-1f3ff-200d-2642":0,"1f482-1f3fb":0,"1f482-1f3fc":0,"1f482-1f3fd":0,"1f482-1f3fe":0,"1f482-1f3ff":0,"1f483-1f3fb":0,"1f483-1f3fc":0,"1f483-1f3fd":0,"1f483-1f3fe":0,"1f483-1f3ff":0,"1f485-1f3fb":0,"1f485-1f3fc":0,"1f485-1f3fd":0,"1f485-1f3fe":0,"1f485-1f3ff":0,"1f486-1f3fb-200d-2640":0,"1f486-1f3fc-200d-2640":0,"1f486-1f3fd-200d-2640":0,"1f486-1f3fe-200d-2640":0,"1f486-1f3ff-200d-2640":0,"1f486-1f3fb-200d-2642":0,"1f486-1f3fc-200d-2642":0,"1f486-1f3fd-200d-2642":0,"1f486-1f3fe-200d-2642":0,"1f486-1f3ff-200d-2642":0,"1f486-1f3fb":0,"1f486-1f3fc":0,"1f486-1f3fd":0,"1f486-1f3fe":0,"1f486-1f3ff":0,"1f487-1f3fb-200d-2640":0,"1f487-1f3fc-200d-2640":0,"1f487-1f3fd-200d-2640":0,"1f487-1f3fe-200d-2640":0,"1f487-1f3ff-200d-2640":0,"1f487-1f3fb-200d-2642":0,"1f487-1f3fc-200d-2642":0,"1f487-1f3fd-200d-2642":0,"1f487-1f3fe-200d-2642":0,"1f487-1f3ff-200d-2642":0,"1f487-1f3fb":0,"1f487-1f3fc":0,"1f487-1f3fd":0,"1f487-1f3fe":0,"1f487-1f3ff":0,"1f48f-1f3fb":0,"1f48f-1f3fc":0,"1f48f-1f3fd":0,"1f48f-1f3fe":0,"1f48f-1f3ff":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fe":0,"1f491-1f3fb":0,"1f491-1f3fc":0,"1f491-1f3fd":0,"1f491-1f3fe":0,"1f491-1f3ff":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fe":0,"1f4aa-1f3fb":0,"1f4aa-1f3fc":0,"1f4aa-1f3fd":0,"1f4aa-1f3fe":0,"1f4aa-1f3ff":0,"1f574-1f3fb":0,"1f574-1f3fc":0,"1f574-1f3fd":0,"1f574-1f3fe":0,"1f574-1f3ff":0,"1f575-1f3fb-200d-2640":0,"1f575-1f3fc-200d-2640":0,"1f575-1f3fd-200d-2640":0,"1f575-1f3fe-200d-2640":0,"1f575-1f3ff-200d-2640":0,"1f575-1f3fb-200d-2642":0,"1f575-1f3fc-200d-2642":0,"1f575-1f3fd-200d-2642":0,"1f575-1f3fe-200d-2642":0,"1f575-1f3ff-200d-2642":0,"1f575-1f3fb":0,"1f575-1f3fc":0,"1f575-1f3fd":0,"1f575-1f3fe":0,"1f575-1f3ff":0,"1f57a-1f3fb":0,"1f57a-1f3fc":0,"1f57a-1f3fd":0,"1f57a-1f3fe":0,"1f57a-1f3ff":0,"1f590-1f3fb":0,"1f590-1f3fc":0,"1f590-1f3fd":0,"1f590-1f3fe":0,"1f590-1f3ff":0,"1f595-1f3fb":0,"1f595-1f3fc":0,"1f595-1f3fd":0,"1f595-1f3fe":0,"1f595-1f3ff":0,"1f596-1f3fb":0,"1f596-1f3fc":0,"1f596-1f3fd":0,"1f596-1f3fe":0,"1f596-1f3ff":0,"1f645-1f3fb-200d-2640":0,"1f645-1f3fc-200d-2640":0,"1f645-1f3fd-200d-2640":0,"1f645-1f3fe-200d-2640":0,"1f645-1f3ff-200d-2640":0,"1f645-1f3fb-200d-2642":0,"1f645-1f3fc-200d-2642":0,"1f645-1f3fd-200d-2642":0,"1f645-1f3fe-200d-2642":0,"1f645-1f3ff-200d-2642":0,"1f645-1f3fb":0,"1f645-1f3fc":0,"1f645-1f3fd":0,"1f645-1f3fe":0,"1f645-1f3ff":0,"1f646-1f3fb-200d-2640":0,"1f646-1f3fc-200d-2640":0,"1f646-1f3fd-200d-2640":0,"1f646-1f3fe-200d-2640":0,"1f646-1f3ff-200d-2640":0,"1f646-1f3fb-200d-2642":0,"1f646-1f3fc-200d-2642":0,"1f646-1f3fd-200d-2642":0,"1f646-1f3fe-200d-2642":0,"1f646-1f3ff-200d-2642":0,"1f646-1f3fb":0,"1f646-1f3fc":0,"1f646-1f3fd":0,"1f646-1f3fe":0,"1f646-1f3ff":0,"1f647-1f3fb-200d-2640":0,"1f647-1f3fc-200d-2640":0,"1f647-1f3fd-200d-2640":0,"1f647-1f3fe-200d-2640":0,"1f647-1f3ff-200d-2640":0,"1f647-1f3fb-200d-2642":0,"1f647-1f3fc-200d-2642":0,"1f647-1f3fd-200d-2642":0,"1f647-1f3fe-200d-2642":0,"1f647-1f3ff-200d-2642":0,"1f647-1f3fb":0,"1f647-1f3fc":0,"1f647-1f3fd":0,"1f647-1f3fe":0,"1f647-1f3ff":0,"1f64b-1f3fb-200d-2640":0,"1f64b-1f3fc-200d-2640":0,"1f64b-1f3fd-200d-2640":0,"1f64b-1f3fe-200d-2640":0,"1f64b-1f3ff-200d-2640":0,"1f64b-1f3fb-200d-2642":0,"1f64b-1f3fc-200d-2642":0,"1f64b-1f3fd-200d-2642":0,"1f64b-1f3fe-200d-2642":0,"1f64b-1f3ff-200d-2642":0,"1f64b-1f3fb":0,"1f64b-1f3fc":0,"1f64b-1f3fd":0,"1f64b-1f3fe":0,"1f64b-1f3ff":0,"1f64c-1f3fb":0,"1f64c-1f3fc":0,"1f64c-1f3fd":0,"1f64c-1f3fe":0,"1f64c-1f3ff":0,"1f64d-1f3fb-200d-2640":0,"1f64d-1f3fc-200d-2640":0,"1f64d-1f3fd-200d-2640":0,"1f64d-1f3fe-200d-2640":0,"1f64d-1f3ff-200d-2640":0,"1f64d-1f3fb-200d-2642":0,"1f64d-1f3fc-200d-2642":0,"1f64d-1f3fd-200d-2642":0,"1f64d-1f3fe-200d-2642":0,"1f64d-1f3ff-200d-2642":0,"1f64d-1f3fb":0,"1f64d-1f3fc":0,"1f64d-1f3fd":0,"1f64d-1f3fe":0,"1f64d-1f3ff":0,"1f64e-1f3fb-200d-2640":0,"1f64e-1f3fc-200d-2640":0,"1f64e-1f3fd-200d-2640":0,"1f64e-1f3fe-200d-2640":0,"1f64e-1f3ff-200d-2640":0,"1f64e-1f3fb-200d-2642":0,"1f64e-1f3fc-200d-2642":0,"1f64e-1f3fd-200d-2642":0,"1f64e-1f3fe-200d-2642":0,"1f64e-1f3ff-200d-2642":0,"1f64e-1f3fb":0,"1f64e-1f3fc":0,"1f64e-1f3fd":0,"1f64e-1f3fe":0,"1f64e-1f3ff":0,"1f64f-1f3fb":0,"1f64f-1f3fc":0,"1f64f-1f3fd":0,"1f64f-1f3fe":0,"1f64f-1f3ff":0,"1f6a3-1f3fb-200d-2640":0,"1f6a3-1f3fc-200d-2640":0,"1f6a3-1f3fd-200d-2640":0,"1f6a3-1f3fe-200d-2640":0,"1f6a3-1f3ff-200d-2640":0,"1f6a3-1f3fb-200d-2642":0,"1f6a3-1f3fc-200d-2642":0,"1f6a3-1f3fd-200d-2642":0,"1f6a3-1f3fe-200d-2642":0,"1f6a3-1f3ff-200d-2642":0,"1f6a3-1f3fb":0,"1f6a3-1f3fc":0,"1f6a3-1f3fd":0,"1f6a3-1f3fe":0,"1f6a3-1f3ff":0,"1f6b4-1f3fb-200d-2640":0,"1f6b4-1f3fc-200d-2640":0,"1f6b4-1f3fd-200d-2640":0,"1f6b4-1f3fe-200d-2640":0,"1f6b4-1f3ff-200d-2640":0,"1f6b4-1f3fb-200d-2642":0,"1f6b4-1f3fc-200d-2642":0,"1f6b4-1f3fd-200d-2642":0,"1f6b4-1f3fe-200d-2642":0,"1f6b4-1f3ff-200d-2642":0,"1f6b4-1f3fb":0,"1f6b4-1f3fc":0,"1f6b4-1f3fd":0,"1f6b4-1f3fe":0,"1f6b4-1f3ff":0,"1f6b5-1f3fb-200d-2640":0,"1f6b5-1f3fc-200d-2640":0,"1f6b5-1f3fd-200d-2640":0,"1f6b5-1f3fe-200d-2640":0,"1f6b5-1f3ff-200d-2640":0,"1f6b5-1f3fb-200d-2642":0,"1f6b5-1f3fc-200d-2642":0,"1f6b5-1f3fd-200d-2642":0,"1f6b5-1f3fe-200d-2642":0,"1f6b5-1f3ff-200d-2642":0,"1f6b5-1f3fb":0,"1f6b5-1f3fc":0,"1f6b5-1f3fd":0,"1f6b5-1f3fe":0,"1f6b5-1f3ff":0,"1f6b6-1f3fb-200d-2640":0,"1f6b6-1f3fc-200d-2640":0,"1f6b6-1f3fd-200d-2640":0,"1f6b6-1f3fe-200d-2640":0,"1f6b6-1f3ff-200d-2640":0,"1f6b6-1f3fb-200d-2642":0,"1f6b6-1f3fc-200d-2642":0,"1f6b6-1f3fd-200d-2642":0,"1f6b6-1f3fe-200d-2642":0,"1f6b6-1f3ff-200d-2642":0,"1f6b6-1f3fb":0,"1f6b6-1f3fc":0,"1f6b6-1f3fd":0,"1f6b6-1f3fe":0,"1f6b6-1f3ff":0,"1f6c0-1f3fb":0,"1f6c0-1f3fc":0,"1f6c0-1f3fd":0,"1f6c0-1f3fe":0,"1f6c0-1f3ff":0,"1f6cc-1f3fb":0,"1f6cc-1f3fc":0,"1f6cc-1f3fd":0,"1f6cc-1f3fe":0,"1f6cc-1f3ff":0,"1f90c-1f3fb":0,"1f90c-1f3fc":0,"1f90c-1f3fd":0,"1f90c-1f3fe":0,"1f90c-1f3ff":0,"1f90f-1f3fb":0,"1f90f-1f3fc":0,"1f90f-1f3fd":0,"1f90f-1f3fe":0,"1f90f-1f3ff":0,"1f918-1f3fb":0,"1f918-1f3fc":0,"1f918-1f3fd":0,"1f918-1f3fe":0,"1f918-1f3ff":0,"1f919-1f3fb":0,"1f919-1f3fc":0,"1f919-1f3fd":0,"1f919-1f3fe":0,"1f919-1f3ff":0,"1f91a-1f3fb":0,"1f91a-1f3fc":0,"1f91a-1f3fd":0,"1f91a-1f3fe":0,"1f91a-1f3ff":0,"1f91b-1f3fb":0,"1f91b-1f3fc":0,"1f91b-1f3fd":0,"1f91b-1f3fe":0,"1f91b-1f3ff":0,"1f91c-1f3fb":0,"1f91c-1f3fc":0,"1f91c-1f3fd":0,"1f91c-1f3fe":0,"1f91c-1f3ff":0,"1f91d-1f3fb":0,"1f91d-1f3fc":0,"1f91d-1f3fd":0,"1f91d-1f3fe":0,"1f91d-1f3ff":0,"1f91e-1f3fb":0,"1f91e-1f3fc":0,"1f91e-1f3fd":0,"1f91e-1f3fe":0,"1f91e-1f3ff":0,"1f91f-1f3fb":0,"1f91f-1f3fc":0,"1f91f-1f3fd":0,"1f91f-1f3fe":0,"1f91f-1f3ff":0,"1f926-1f3fb-200d-2640":0,"1f926-1f3fc-200d-2640":0,"1f926-1f3fd-200d-2640":0,"1f926-1f3fe-200d-2640":0,"1f926-1f3ff-200d-2640":0,"1f926-1f3fb-200d-2642":0,"1f926-1f3fc-200d-2642":0,"1f926-1f3fd-200d-2642":0,"1f926-1f3fe-200d-2642":0,"1f926-1f3ff-200d-2642":0,"1f926-1f3fb":0,"1f926-1f3fc":0,"1f926-1f3fd":0,"1f926-1f3fe":0,"1f926-1f3ff":0,"1f930-1f3fb":0,"1f930-1f3fc":0,"1f930-1f3fd":0,"1f930-1f3fe":0,"1f930-1f3ff":0,"1f931-1f3fb":0,"1f931-1f3fc":0,"1f931-1f3fd":0,"1f931-1f3fe":0,"1f931-1f3ff":0,"1f932-1f3fb":0,"1f932-1f3fc":0,"1f932-1f3fd":0,"1f932-1f3fe":0,"1f932-1f3ff":0,"1f933-1f3fb":0,"1f933-1f3fc":0,"1f933-1f3fd":0,"1f933-1f3fe":0,"1f933-1f3ff":0,"1f934-1f3fb":0,"1f934-1f3fc":0,"1f934-1f3fd":0,"1f934-1f3fe":0,"1f934-1f3ff":0,"1f935-1f3fb-200d-2640":0,"1f935-1f3fc-200d-2640":0,"1f935-1f3fd-200d-2640":0,"1f935-1f3fe-200d-2640":0,"1f935-1f3ff-200d-2640":0,"1f935-1f3fb-200d-2642":0,"1f935-1f3fc-200d-2642":0,"1f935-1f3fd-200d-2642":0,"1f935-1f3fe-200d-2642":0,"1f935-1f3ff-200d-2642":0,"1f935-1f3fb":0,"1f935-1f3fc":0,"1f935-1f3fd":0,"1f935-1f3fe":0,"1f935-1f3ff":0,"1f936-1f3fb":0,"1f936-1f3fc":0,"1f936-1f3fd":0,"1f936-1f3fe":0,"1f936-1f3ff":0,"1f937-1f3fb-200d-2640":0,"1f937-1f3fc-200d-2640":0,"1f937-1f3fd-200d-2640":0,"1f937-1f3fe-200d-2640":0,"1f937-1f3ff-200d-2640":0,"1f937-1f3fb-200d-2642":0,"1f937-1f3fc-200d-2642":0,"1f937-1f3fd-200d-2642":0,"1f937-1f3fe-200d-2642":0,"1f937-1f3ff-200d-2642":0,"1f937-1f3fb":0,"1f937-1f3fc":0,"1f937-1f3fd":0,"1f937-1f3fe":0,"1f937-1f3ff":0,"1f938-1f3fb-200d-2640":0,"1f938-1f3fc-200d-2640":0,"1f938-1f3fd-200d-2640":0,"1f938-1f3fe-200d-2640":0,"1f938-1f3ff-200d-2640":0,"1f938-1f3fb-200d-2642":0,"1f938-1f3fc-200d-2642":0,"1f938-1f3fd-200d-2642":0,"1f938-1f3fe-200d-2642":0,"1f938-1f3ff-200d-2642":0,"1f938-1f3fb":0,"1f938-1f3fc":0,"1f938-1f3fd":0,"1f938-1f3fe":0,"1f938-1f3ff":0,"1f939-1f3fb-200d-2640":0,"1f939-1f3fc-200d-2640":0,"1f939-1f3fd-200d-2640":0,"1f939-1f3fe-200d-2640":0,"1f939-1f3ff-200d-2640":0,"1f939-1f3fb-200d-2642":0,"1f939-1f3fc-200d-2642":0,"1f939-1f3fd-200d-2642":0,"1f939-1f3fe-200d-2642":0,"1f939-1f3ff-200d-2642":0,"1f939-1f3fb":0,"1f939-1f3fc":0,"1f939-1f3fd":0,"1f939-1f3fe":0,"1f939-1f3ff":0,"1f93d-1f3fb-200d-2640":0,"1f93d-1f3fc-200d-2640":0,"1f93d-1f3fd-200d-2640":0,"1f93d-1f3fe-200d-2640":0,"1f93d-1f3ff-200d-2640":0,"1f93d-1f3fb-200d-2642":0,"1f93d-1f3fc-200d-2642":0,"1f93d-1f3fd-200d-2642":0,"1f93d-1f3fe-200d-2642":0,"1f93d-1f3ff-200d-2642":0,"1f93d-1f3fb":0,"1f93d-1f3fc":0,"1f93d-1f3fd":0,"1f93d-1f3fe":0,"1f93d-1f3ff":0,"1f93e-1f3fb-200d-2640":0,"1f93e-1f3fc-200d-2640":0,"1f93e-1f3fd-200d-2640":0,"1f93e-1f3fe-200d-2640":0,"1f93e-1f3ff-200d-2640":0,"1f93e-1f3fb-200d-2642":0,"1f93e-1f3fc-200d-2642":0,"1f93e-1f3fd-200d-2642":0,"1f93e-1f3fe-200d-2642":0,"1f93e-1f3ff-200d-2642":0,"1f93e-1f3fb":0,"1f93e-1f3fc":0,"1f93e-1f3fd":0,"1f93e-1f3fe":0,"1f93e-1f3ff":0,"1f977-1f3fb":0,"1f977-1f3fc":0,"1f977-1f3fd":0,"1f977-1f3fe":0,"1f977-1f3ff":0,"1f9b5-1f3fb":0,"1f9b5-1f3fc":0,"1f9b5-1f3fd":0,"1f9b5-1f3fe":0,"1f9b5-1f3ff":0,"1f9b6-1f3fb":0,"1f9b6-1f3fc":0,"1f9b6-1f3fd":0,"1f9b6-1f3fe":0,"1f9b6-1f3ff":0,"1f9b8-1f3fb-200d-2640":0,"1f9b8-1f3fc-200d-2640":0,"1f9b8-1f3fd-200d-2640":0,"1f9b8-1f3fe-200d-2640":0,"1f9b8-1f3ff-200d-2640":0,"1f9b8-1f3fb-200d-2642":0,"1f9b8-1f3fc-200d-2642":0,"1f9b8-1f3fd-200d-2642":0,"1f9b8-1f3fe-200d-2642":0,"1f9b8-1f3ff-200d-2642":0,"1f9b8-1f3fb":0,"1f9b8-1f3fc":0,"1f9b8-1f3fd":0,"1f9b8-1f3fe":0,"1f9b8-1f3ff":0,"1f9b9-1f3fb-200d-2640":0,"1f9b9-1f3fc-200d-2640":0,"1f9b9-1f3fd-200d-2640":0,"1f9b9-1f3fe-200d-2640":0,"1f9b9-1f3ff-200d-2640":0,"1f9b9-1f3fb-200d-2642":0,"1f9b9-1f3fc-200d-2642":0,"1f9b9-1f3fd-200d-2642":0,"1f9b9-1f3fe-200d-2642":0,"1f9b9-1f3ff-200d-2642":0,"1f9b9-1f3fb":0,"1f9b9-1f3fc":0,"1f9b9-1f3fd":0,"1f9b9-1f3fe":0,"1f9b9-1f3ff":0,"1f9bb-1f3fb":0,"1f9bb-1f3fc":0,"1f9bb-1f3fd":0,"1f9bb-1f3fe":0,"1f9bb-1f3ff":0,"1f9cd-1f3fb-200d-2640":0,"1f9cd-1f3fc-200d-2640":0,"1f9cd-1f3fd-200d-2640":0,"1f9cd-1f3fe-200d-2640":0,"1f9cd-1f3ff-200d-2640":0,"1f9cd-1f3fb-200d-2642":0,"1f9cd-1f3fc-200d-2642":0,"1f9cd-1f3fd-200d-2642":0,"1f9cd-1f3fe-200d-2642":0,"1f9cd-1f3ff-200d-2642":0,"1f9cd-1f3fb":0,"1f9cd-1f3fc":0,"1f9cd-1f3fd":0,"1f9cd-1f3fe":0,"1f9cd-1f3ff":0,"1f9ce-1f3fb-200d-2640":0,"1f9ce-1f3fc-200d-2640":0,"1f9ce-1f3fd-200d-2640":0,"1f9ce-1f3fe-200d-2640":0,"1f9ce-1f3ff-200d-2640":0,"1f9ce-1f3fb-200d-2642":0,"1f9ce-1f3fc-200d-2642":0,"1f9ce-1f3fd-200d-2642":0,"1f9ce-1f3fe-200d-2642":0,"1f9ce-1f3ff-200d-2642":0,"1f9ce-1f3fb":0,"1f9ce-1f3fc":0,"1f9ce-1f3fd":0,"1f9ce-1f3fe":0,"1f9ce-1f3ff":0,"1f9cf-1f3fb-200d-2640":0,"1f9cf-1f3fc-200d-2640":0,"1f9cf-1f3fd-200d-2640":0,"1f9cf-1f3fe-200d-2640":0,"1f9cf-1f3ff-200d-2640":0,"1f9cf-1f3fb-200d-2642":0,"1f9cf-1f3fc-200d-2642":0,"1f9cf-1f3fd-200d-2642":0,"1f9cf-1f3fe-200d-2642":0,"1f9cf-1f3ff-200d-2642":0,"1f9cf-1f3fb":0,"1f9cf-1f3fc":0,"1f9cf-1f3fd":0,"1f9cf-1f3fe":0,"1f9cf-1f3ff":0,"1f9d1-1f3fb-200d-1f33e":0,"1f9d1-1f3fc-200d-1f33e":0,"1f9d1-1f3fd-200d-1f33e":0,"1f9d1-1f3fe-200d-1f33e":0,"1f9d1-1f3ff-200d-1f33e":0,"1f9d1-1f3fb-200d-1f373":0,"1f9d1-1f3fc-200d-1f373":0,"1f9d1-1f3fd-200d-1f373":0,"1f9d1-1f3fe-200d-1f373":0,"1f9d1-1f3ff-200d-1f373":0,"1f9d1-1f3fb-200d-1f37c":0,"1f9d1-1f3fc-200d-1f37c":0,"1f9d1-1f3fd-200d-1f37c":0,"1f9d1-1f3fe-200d-1f37c":0,"1f9d1-1f3ff-200d-1f37c":0,"1f9d1-1f3fb-200d-1f384":0,"1f9d1-1f3fc-200d-1f384":0,"1f9d1-1f3fd-200d-1f384":0,"1f9d1-1f3fe-200d-1f384":0,"1f9d1-1f3ff-200d-1f384":0,"1f9d1-1f3fb-200d-1f393":0,"1f9d1-1f3fc-200d-1f393":0,"1f9d1-1f3fd-200d-1f393":0,"1f9d1-1f3fe-200d-1f393":0,"1f9d1-1f3ff-200d-1f393":0,"1f9d1-1f3fb-200d-1f3a4":0,"1f9d1-1f3fc-200d-1f3a4":0,"1f9d1-1f3fd-200d-1f3a4":0,"1f9d1-1f3fe-200d-1f3a4":0,"1f9d1-1f3ff-200d-1f3a4":0,"1f9d1-1f3fb-200d-1f3a8":0,"1f9d1-1f3fc-200d-1f3a8":0,"1f9d1-1f3fd-200d-1f3a8":0,"1f9d1-1f3fe-200d-1f3a8":0,"1f9d1-1f3ff-200d-1f3a8":0,"1f9d1-1f3fb-200d-1f3eb":0,"1f9d1-1f3fc-200d-1f3eb":0,"1f9d1-1f3fd-200d-1f3eb":0,"1f9d1-1f3fe-200d-1f3eb":0,"1f9d1-1f3ff-200d-1f3eb":0,"1f9d1-1f3fb-200d-1f3ed":0,"1f9d1-1f3fc-200d-1f3ed":0,"1f9d1-1f3fd-200d-1f3ed":0,"1f9d1-1f3fe-200d-1f3ed":0,"1f9d1-1f3ff-200d-1f3ed":0,"1f9d1-1f3fb-200d-1f4bb":0,"1f9d1-1f3fc-200d-1f4bb":0,"1f9d1-1f3fd-200d-1f4bb":0,"1f9d1-1f3fe-200d-1f4bb":0,"1f9d1-1f3ff-200d-1f4bb":0,"1f9d1-1f3fb-200d-1f4bc":0,"1f9d1-1f3fc-200d-1f4bc":0,"1f9d1-1f3fd-200d-1f4bc":0,"1f9d1-1f3fe-200d-1f4bc":0,"1f9d1-1f3ff-200d-1f4bc":0,"1f9d1-1f3fb-200d-1f527":0,"1f9d1-1f3fc-200d-1f527":0,"1f9d1-1f3fd-200d-1f527":0,"1f9d1-1f3fe-200d-1f527":0,"1f9d1-1f3ff-200d-1f527":0,"1f9d1-1f3fb-200d-1f52c":0,"1f9d1-1f3fc-200d-1f52c":0,"1f9d1-1f3fd-200d-1f52c":0,"1f9d1-1f3fe-200d-1f52c":0,"1f9d1-1f3ff-200d-1f52c":0,"1f9d1-1f3fb-200d-1f680":0,"1f9d1-1f3fc-200d-1f680":0,"1f9d1-1f3fd-200d-1f680":0,"1f9d1-1f3fe-200d-1f680":0,"1f9d1-1f3ff-200d-1f680":0,"1f9d1-1f3fb-200d-1f692":0,"1f9d1-1f3fc-200d-1f692":0,"1f9d1-1f3fd-200d-1f692":0,"1f9d1-1f3fe-200d-1f692":0,"1f9d1-1f3ff-200d-1f692":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe":0,"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff":0,"1f9d1-1f3fb-200d-1f9af":0,"1f9d1-1f3fc-200d-1f9af":0,"1f9d1-1f3fd-200d-1f9af":0,"1f9d1-1f3fe-200d-1f9af":0,"1f9d1-1f3ff-200d-1f9af":0,"1f9d1-1f3fb-200d-1f9b0":0,"1f9d1-1f3fc-200d-1f9b0":0,"1f9d1-1f3fd-200d-1f9b0":0,"1f9d1-1f3fe-200d-1f9b0":0,"1f9d1-1f3ff-200d-1f9b0":0,"1f9d1-1f3fb-200d-1f9b1":0,"1f9d1-1f3fc-200d-1f9b1":0,"1f9d1-1f3fd-200d-1f9b1":0,"1f9d1-1f3fe-200d-1f9b1":0,"1f9d1-1f3ff-200d-1f9b1":0,"1f9d1-1f3fb-200d-1f9b2":0,"1f9d1-1f3fc-200d-1f9b2":0,"1f9d1-1f3fd-200d-1f9b2":0,"1f9d1-1f3fe-200d-1f9b2":0,"1f9d1-1f3ff-200d-1f9b2":0,"1f9d1-1f3fb-200d-1f9b3":0,"1f9d1-1f3fc-200d-1f9b3":0,"1f9d1-1f3fd-200d-1f9b3":0,"1f9d1-1f3fe-200d-1f9b3":0,"1f9d1-1f3ff-200d-1f9b3":0,"1f9d1-1f3fb-200d-1f9bc":0,"1f9d1-1f3fc-200d-1f9bc":0,"1f9d1-1f3fd-200d-1f9bc":0,"1f9d1-1f3fe-200d-1f9bc":0,"1f9d1-1f3ff-200d-1f9bc":0,"1f9d1-1f3fb-200d-1f9bd":0,"1f9d1-1f3fc-200d-1f9bd":0,"1f9d1-1f3fd-200d-1f9bd":0,"1f9d1-1f3fe-200d-1f9bd":0,"1f9d1-1f3ff-200d-1f9bd":0,"1f9d1-1f3fb-200d-2695":0,"1f9d1-1f3fc-200d-2695":0,"1f9d1-1f3fd-200d-2695":0,"1f9d1-1f3fe-200d-2695":0,"1f9d1-1f3ff-200d-2695":0,"1f9d1-1f3fb-200d-2696":0,"1f9d1-1f3fc-200d-2696":0,"1f9d1-1f3fd-200d-2696":0,"1f9d1-1f3fe-200d-2696":0,"1f9d1-1f3ff-200d-2696":0,"1f9d1-1f3fb-200d-2708":0,"1f9d1-1f3fc-200d-2708":0,"1f9d1-1f3fd-200d-2708":0,"1f9d1-1f3fe-200d-2708":0,"1f9d1-1f3ff-200d-2708":0,"1f9d1-1f3fb":0,"1f9d1-1f3fc":0,"1f9d1-1f3fd":0,"1f9d1-1f3fe":0,"1f9d1-1f3ff":0,"1f9d2-1f3fb":0,"1f9d2-1f3fc":0,"1f9d2-1f3fd":0,"1f9d2-1f3fe":0,"1f9d2-1f3ff":0,"1f9d3-1f3fb":0,"1f9d3-1f3fc":0,"1f9d3-1f3fd":0,"1f9d3-1f3fe":0,"1f9d3-1f3ff":0,"1f9d4-1f3fb-200d-2640":0,"1f9d4-1f3fc-200d-2640":0,"1f9d4-1f3fd-200d-2640":0,"1f9d4-1f3fe-200d-2640":0,"1f9d4-1f3ff-200d-2640":0,"1f9d4-1f3fb-200d-2642":0,"1f9d4-1f3fc-200d-2642":0,"1f9d4-1f3fd-200d-2642":0,"1f9d4-1f3fe-200d-2642":0,"1f9d4-1f3ff-200d-2642":0,"1f9d4-1f3fb":0,"1f9d4-1f3fc":0,"1f9d4-1f3fd":0,"1f9d4-1f3fe":0,"1f9d4-1f3ff":0,"1f9d5-1f3fb":0,"1f9d5-1f3fc":0,"1f9d5-1f3fd":0,"1f9d5-1f3fe":0,"1f9d5-1f3ff":0,"1f9d6-1f3fb-200d-2640":0,"1f9d6-1f3fc-200d-2640":0,"1f9d6-1f3fd-200d-2640":0,"1f9d6-1f3fe-200d-2640":0,"1f9d6-1f3ff-200d-2640":0,"1f9d6-1f3fb-200d-2642":0,"1f9d6-1f3fc-200d-2642":0,"1f9d6-1f3fd-200d-2642":0,"1f9d6-1f3fe-200d-2642":0,"1f9d6-1f3ff-200d-2642":0,"1f9d6-1f3fb":0,"1f9d6-1f3fc":0,"1f9d6-1f3fd":0,"1f9d6-1f3fe":0,"1f9d6-1f3ff":0,"1f9d7-1f3fb-200d-2640":0,"1f9d7-1f3fc-200d-2640":0,"1f9d7-1f3fd-200d-2640":0,"1f9d7-1f3fe-200d-2640":0,"1f9d7-1f3ff-200d-2640":0,"1f9d7-1f3fb-200d-2642":0,"1f9d7-1f3fc-200d-2642":0,"1f9d7-1f3fd-200d-2642":0,"1f9d7-1f3fe-200d-2642":0,"1f9d7-1f3ff-200d-2642":0,"1f9d7-1f3fb":0,"1f9d7-1f3fc":0,"1f9d7-1f3fd":0,"1f9d7-1f3fe":0,"1f9d7-1f3ff":0,"1f9d8-1f3fb-200d-2640":0,"1f9d8-1f3fc-200d-2640":0,"1f9d8-1f3fd-200d-2640":0,"1f9d8-1f3fe-200d-2640":0,"1f9d8-1f3ff-200d-2640":0,"1f9d8-1f3fb-200d-2642":0,"1f9d8-1f3fc-200d-2642":0,"1f9d8-1f3fd-200d-2642":0,"1f9d8-1f3fe-200d-2642":0,"1f9d8-1f3ff-200d-2642":0,"1f9d8-1f3fb":0,"1f9d8-1f3fc":0,"1f9d8-1f3fd":0,"1f9d8-1f3fe":0,"1f9d8-1f3ff":0,"1f9d9-1f3fb-200d-2640":0,"1f9d9-1f3fc-200d-2640":0,"1f9d9-1f3fd-200d-2640":0,"1f9d9-1f3fe-200d-2640":0,"1f9d9-1f3ff-200d-2640":0,"1f9d9-1f3fb-200d-2642":0,"1f9d9-1f3fc-200d-2642":0,"1f9d9-1f3fd-200d-2642":0,"1f9d9-1f3fe-200d-2642":0,"1f9d9-1f3ff-200d-2642":0,"1f9d9-1f3fb":0,"1f9d9-1f3fc":0,"1f9d9-1f3fd":0,"1f9d9-1f3fe":0,"1f9d9-1f3ff":0,"1f9da-1f3fb-200d-2640":0,"1f9da-1f3fc-200d-2640":0,"1f9da-1f3fd-200d-2640":0,"1f9da-1f3fe-200d-2640":0,"1f9da-1f3ff-200d-2640":0,"1f9da-1f3fb-200d-2642":0,"1f9da-1f3fc-200d-2642":0,"1f9da-1f3fd-200d-2642":0,"1f9da-1f3fe-200d-2642":0,"1f9da-1f3ff-200d-2642":0,"1f9da-1f3fb":0,"1f9da-1f3fc":0,"1f9da-1f3fd":0,"1f9da-1f3fe":0,"1f9da-1f3ff":0,"1f9db-1f3fb-200d-2640":0,"1f9db-1f3fc-200d-2640":0,"1f9db-1f3fd-200d-2640":0,"1f9db-1f3fe-200d-2640":0,"1f9db-1f3ff-200d-2640":0,"1f9db-1f3fb-200d-2642":0,"1f9db-1f3fc-200d-2642":0,"1f9db-1f3fd-200d-2642":0,"1f9db-1f3fe-200d-2642":0,"1f9db-1f3ff-200d-2642":0,"1f9db-1f3fb":0,"1f9db-1f3fc":0,"1f9db-1f3fd":0,"1f9db-1f3fe":0,"1f9db-1f3ff":0,"1f9dc-1f3fb-200d-2640":0,"1f9dc-1f3fc-200d-2640":0,"1f9dc-1f3fd-200d-2640":0,"1f9dc-1f3fe-200d-2640":0,"1f9dc-1f3ff-200d-2640":0,"1f9dc-1f3fb-200d-2642":0,"1f9dc-1f3fc-200d-2642":0,"1f9dc-1f3fd-200d-2642":0,"1f9dc-1f3fe-200d-2642":0,"1f9dc-1f3ff-200d-2642":0,"1f9dc-1f3fb":0,"1f9dc-1f3fc":0,"1f9dc-1f3fd":0,"1f9dc-1f3fe":0,"1f9dc-1f3ff":0,"1f9dd-1f3fb-200d-2640":0,"1f9dd-1f3fc-200d-2640":0,"1f9dd-1f3fd-200d-2640":0,"1f9dd-1f3fe-200d-2640":0,"1f9dd-1f3ff-200d-2640":0,"1f9dd-1f3fb-200d-2642":0,"1f9dd-1f3fc-200d-2642":0,"1f9dd-1f3fd-200d-2642":0,"1f9dd-1f3fe-200d-2642":0,"1f9dd-1f3ff-200d-2642":0,"1f9dd-1f3fb":0,"1f9dd-1f3fc":0,"1f9dd-1f3fd":0,"1f9dd-1f3fe":0,"1f9dd-1f3ff":0,"261d-1f3fb":0,"261d-1f3fc":0,"261d-1f3fd":0,"261d-1f3fe":0,"261d-1f3ff":0,"26f9-1f3fb-200d-2640":0,"26f9-1f3fc-200d-2640":0,"26f9-1f3fd-200d-2640":0,"26f9-1f3fe-200d-2640":0,"26f9-1f3ff-200d-2640":0,"26f9-1f3fb-200d-2642":0,"26f9-1f3fc-200d-2642":0,"26f9-1f3fd-200d-2642":0,"26f9-1f3fe-200d-2642":0,"26f9-1f3ff-200d-2642":0,"26f9-1f3fb":0,"26f9-1f3fc":0,"26f9-1f3fd":0,"26f9-1f3fe":0,"26f9-1f3ff":0,"270a-1f3fb":0,"270a-1f3fc":0,"270a-1f3fd":0,"270a-1f3fe":0,"270a-1f3ff":0,"270b-1f3fb":0,"270b-1f3fc":0,"270b-1f3fd":0,"270b-1f3fe":0,"270b-1f3ff":0,"270c-1f3fb":0,"270c-1f3fc":0,"270c-1f3fd":0,"270c-1f3fe":0,"270c-1f3ff":0,"270d-1f3fb":0,"270d-1f3fc":0,"270d-1f3fd":0,"270d-1f3fe":0,"270d-1f3ff":0}},kn=ts[""];for(const r in ts)r&&Object.assign(kn,ts[r]);function $r(r){return to(eo(r)).join("-")}const Qr=/\uFE0F/g,Xr=String.fromCharCode(8205),eo=r=>r.indexOf(Xr)<0?r.replace(Qr,""):r;function to(r){const e=[];let t=0,a=0,s=0;for(;s<r.length;)t=r.charCodeAt(s++),a?(e.push((65536+(a-55296<<10)+(t-56320)).toString(16)),a=0):t>55296&&t<=56319?a=t:e.push(t.toString(16));return e.length&&e[0].length===2&&(e[0]="00"+e[0]),e}function ao(r){const e=$r(r).replace(/-?fe0f/g,"");if(kn.hasOwnProperty(e))return e}function An(r){let e,t=r;const a=[];let s,n=0;for(Fs.lastIndex=0;e=t.match(Fs);){if(s=n+e.index,e[3])a.push({_:"messageEntityMention",offset:s+e[1].length,length:e[2].length+e[3].length});else if(e[4])if(Qi.test(e[4]))a.push({_:"messageEntityEmail",offset:s,length:e[4].length});else{let i,o=e[5];const p=e[6];if(p){if(!o&&(p.substr(0,4)==="xn--"||Zr.indexOf(p.toLowerCase())!==-1)&&(o="http://"),o){const d=Yr(e[4]);d.length!==e[4].length&&(e[4]=d),i=(e[5]?"":o)+e[4]}}else i=(e[5]?"":"http://")+e[4];i&&a.push({_:"messageEntityUrl",offset:s,length:e[4].length})}else if(e[7])a.push({_:"messageEntityLinebreak",offset:s,length:1});else if(e[8]){const i=ao(e[8]);i&&a.push({_:"messageEntityEmoji",offset:s,length:e[8].length,unicode:i})}else if(e[11])a.push({_:"messageEntityHashtag",offset:s+(e[10]?e[10].length:0),length:e[11].length});else if(e[13])a.push({_:"messageEntityBotCommand",offset:s+(e[11]?e[11].length:0)+(e[12]?e[12].length:0),length:1+e[13].length+(e[14]?1+e[14].length:0),unsafe:!0});else if(e[16]){const i=e[16],o=i.split(":"),p=o.length,d=p===3?+o[0]:0,f=+o[p===3?1:0],c=+o[p-1];a.push({_:"messageEntityTimestamp",offset:s+(/\D/.test(e[0][0])?1:0),length:i.length,raw:i,time:d*3600+f*60+c})}t=t.substr(e.index+e[0].length),n+=e.index+e[0].length}return a}function so(r){return r?r.match(rn):null}function no(r,e,t){if(r==="inputMessagesFilterEmpty")return e;const a=[];if(!e.length)return a;let s=!0;const n={},i=[],o=[];switch(r){case"inputMessagesFilterPhotos":n.messageMediaPhoto=!0;break;case"inputMessagesFilterPhotoVideo":n.messageMediaPhoto=!0,n.messageMediaDocument=!0,i.push("video");break;case"inputMessagesFilterVideo":n.messageMediaDocument=!0,i.push("video");break;case"inputMessagesFilterDocument":n.messageMediaDocument=!0,i.push(void 0,"photo","pdf");break;case"inputMessagesFilterVoice":n.messageMediaDocument=!0,i.push("voice");break;case"inputMessagesFilterRoundVoice":n.messageMediaDocument=!0,i.push("round","voice");break;case"inputMessagesFilterRoundVideo":n.messageMediaDocument=!0,i.push("round");break;case"inputMessagesFilterMusic":n.messageMediaDocument=!0,i.push("audio");break;case"inputMessagesFilterUrl":n.url=!0;break;case"inputMessagesFilterChatPhotos":n.avatar=!0;break;default:s=!1;break}if(!s)return a;for(let p=0,d=e.length;p<d;++p){const f=e[p];if(!f)continue;let c=!1;if(f._==="message"){if(f.media&&n[f.media._]){const g=f.media.document;if(g&&(i.length&&!i.includes(g.type)||o.includes(g.type)))continue;c=!0}else if(n.url&&f.message){const g=["messageEntityTextUrl","messageEntityUrl"];(f.totalEntities.find(h=>g.includes(h._))||so(f.message))&&(c=!0)}}else n.avatar&&f.action&&["messageActionChannelEditPhoto","messageActionChatEditPhoto","messageActionChannelEditVideo","messageActionChatEditVideo"].includes(f.action._)&&(c=!0);if(c&&(a.push(f),a.length>=t))break}return a}function io(r,e){return Ta(us(r,e),{fileName:r.file_name})}let Bs=0;function Fn(r){let e;const t=r?.type;if(t){const a=`${Ja}_${Bs++}.${t.split("/")[1]}`;["image/jpeg","image/png","image/bmp"].indexOf(t)>=0?e="photo"+a:t.indexOf("audio/")===0||["video/ogg"].indexOf(t)>=0?e="audio"+a:t.indexOf("video/")===0?e="video"+a:e="document"+a}else e=`upload-${Ja}_${Bs++}`;return e}class ro{constructor(){this.tabs=new Map}start(){mt.getInstance().addEventListener("tabState",(t,a)=>{const s=this.tabs.get(a);s.state=t})}getTabs(){return[...this.tabs.values()].filter(e=>!!e.state)}addTab(e){const t={source:e,state:void 0};this.tabs.set(e,t)}deleteTab(e){this.tabs.delete(e)}}const da=new ro;be&&(be.appTabsManager=da);function oo(r){let e=0,t;for(const a of r)if(a.message){if(++e>1)break;t=a}return e>1&&(t=void 0),t}function En(r){return r.video_thumbs?.[0]}function as(r){return{_:"inputDocument",id:r.id,access_hash:r.access_hash,file_reference:r.file_reference}}function ta(r,e){return Ct(r,e)}function xs(r,e,t){t?r[e]=!0:delete r[e]}function ja(r,e){let t;const a=r.reply_to;return a&&(!e||a.pFlags.forum_topic)?t=a.reply_to_top_id||a.reply_to_msg_id:e&&(r._==="messageService"&&r.action?._==="messageActionTopicCreate"?t=r.mid:t=Xs),t}const po=r=>{r()};class fo extends ce{constructor(){super(...arguments),this.pendingByRandomId={},this.pendingByMessageId={},this.pendingAfterMsgs={},this.pendingTopMsgs={},this.tempFinalizeCallbacks={},this.sendSmthLazyLoadQueue=new zr(10),this.needSingleMessages=new Map,this.extendedMedia=new Map,this.maxSeenId=0,this.migratedFromTo={},this.migratedToFrom={},this.newDialogsToHandle=new Map,this.newUpdatesAfterReloadToHandle={},this.notificationsToHandle={},this.reloadConversationsPeers=new Map,this.log=Le("MESSAGES",De.Error|De.Debug|De.Log|De.Warn),this.groupedTempId=0,this.typings={},this.unreadMentions={},this.goToNextMentionPromises={},this.batchUpdates={},this.tempMids={},this.clear=e=>{this.middleware?this.middleware.clean():(this.middleware=Dn(),this.uploadFilePromises={}),this.messagesStorageByPeerId={},this.groupedMessagesStorage={},this.scheduledMessagesStorage={},this.historiesStorage={},this.threadsStorage={},this.searchesStorage={},this.pinnedMessages={},this.threadsServiceMessagesIdsStorage={},this.threadsToReplies={},this.dialogsStorage&&this.dialogsStorage.clear(e),this.filtersStorage&&this.filtersStorage.clear(e)},this.handleNewDialogs=()=>{let e=0;const t=new Map,a=s=>{const{peerId:n}=s;this.dialogsStorage.pushDialog({dialog:s}),this.appPeersManager.isChannel(n)||(e=Math.max(e,s.top_message||0));let i=t.get(n);i||t.set(n,i={}),s._==="forumTopic"?(i.topics??(i.topics=new Map)).set(s.id,s):i.dialog=s};for(const[s,n]of this.newDialogsToHandle){const i="dialog"in n,{dialog:o,topics:p}=n;i&&(o?this.dialogsStorage.getDialogOnly(s)&&a(o):this.reloadConversation(s.toPeerId())),p&&p?.forEach((d,f)=>{d?this.dialogsStorage.getForumTopic(s,f)&&a(d):this.dialogsStorage.getForumTopicById(s,f)})}e!==0&&this.incrementMaxSeenId(e),this.rootScope.dispatchEvent("dialogs_multiupdate",t),this.newDialogsToHandle.clear()},this.handleNotifications=()=>{Pe.clearTimeout(this.notificationsHandlePromise),this.notificationsHandlePromise=void 0;for(const e in this.notificationsToHandle){const[t,a]=e.split("_"),s=this.notificationsToHandle[e];this.getNotifyPeerSettings(t.toPeerId(),a?+a:void 0).then(({muted:n,peerTypeNotifySettings:i})=>{const o=s.topMessage;n&&!o.pFlags.mentioned||!o.pFlags.unread||o.pFlags.unread&&this.notifyAboutMessage(o,{fwdCount:s.fwdCount,peerTypeNotifySettings:i})})}this.notificationsToHandle={}},this.onUpdateMessageId=e=>{const t=e.random_id,a=this.pendingByRandomId[t];if(!a)return;const{peerId:s}=a,n=this.appPeersManager.isChannel(s)?s.toChatId():void 0,i=this.appMessagesIdsManager.generateMessageId(e.id,n);this.pendingByMessageId[i]=t},this.onUpdateNewMessage=e=>{var D;const t=e.message,a=this.getMessagePeer(t),s=this.getHistoryMessagesStorage(a),n=e._==="updateNewDiscussionMessage";this.saveMessages([t],{storage:this.createMessageStorage(a,"history")});const i=this.appPeersManager.isForum(a),o=this.getThreadKey(t),p=o?+o.split("_")[1]:void 0,d=this.dialogsStorage.getDialogOrTopic(a,n?p:void 0);if((!d||this.reloadConversationsPeers.has(a))&&!n){let v=!0;if(a.isAnyChat()&&(v=this.appChatsManager.isInChat(a.toChatId())),v){this.handleNewUpdateAfterReload(a,e);return}}if(p&&!n){const v=this.threadsStorage[a]?.[p],k={_:"updateNewDiscussionMessage",message:t};this.appChatsManager.isForum(a.toChatId())&&!this.dialogsStorage.getForumTopic(a,p)?this.handleNewUpdateAfterReload(a,k,p):v&&this.onUpdateNewMessage(k)}if(t._==="messageService"){const{action:v}=t;if(v._==="messageActionPaymentSent"&&t.reply_to&&this.rootScope.dispatchEvent("payment_sent",{peerId:t.reply_to.reply_to_peer_id?this.appPeersManager.getPeerId(t.reply_to.reply_to_peer_id):t.peerId,mid:t.reply_to_mid,receiptMessage:t}),v._==="messageActionTopicEdit"&&!n){const k=this.dialogsStorage.getForumTopic(a,p);if(!k)this.dialogsStorage.getForumTopicById(a,p);else{const L=at(k);v.title!==void 0&&(k.title=v.title),v.closed!==void 0&&xs(k.pFlags,"closed",v.closed),v.hidden!==void 0&&xs(k.pFlags,"hidden",v.hidden),v.icon_emoji_id!==void 0&&(k.icon_emoji_id=v.icon_emoji_id),this.scheduleHandleNewDialogs(a,k),this.dialogsStorage.processTopicUpdate(k,L)}}}this.saveMessages([t],{storage:s}),this.checkPendingMessage(t);const f=this.getHistoryStorage(a,n?p:void 0);n||this.updateMessageRepliesIfNeeded(t);const c=e.ignoreExisting;if(!!f.history.findSlice(t.mid)){if(!c)return!1}else{const v=f.history.first;if(v.isEnd(ze.Bottom)){let k=0;for(const L=v.length;k<L&&!(t.mid>v[k]);++k);v.splice(k,0,t.mid)}else f.history.unshift(t.mid);f.count!==null&&++f.count}(!f.maxId||t.mid>f.maxId)&&(f.maxId=t.mid),this.mergeReplyKeyboard(f,t)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:a});const h=t.fromId;if(h.isUser()&&!t.pFlags.out&&t.from_id){this.appUsersManager.forceUserOnline(h,t.date);const v={_:"sendMessageCancelAction"};let k;a.isUser()?k={_:"updateUserTyping",action:v,user_id:h}:this.appPeersManager.isChannel(a)?k={_:"updateChannelUserTyping",action:v,channel_id:a.toChatId(),from_id:this.appPeersManager.getOutputPeer(h),top_msg_id:p?K(p):void 0}:k={_:"updateChatUserTyping",action:v,chat_id:a.toChatId(),from_id:this.appPeersManager.getOutputPeer(h)},this.apiUpdatesManager.processLocalUpdate(k)}this.handleNewMessage(t);const y=d?._==="forumTopic";if(n&&!y||!d)return;const P=!t.pFlags.out&&t.pFlags.unread;{if(P&&t.mid>d.top_message){const v=this.dialogsStorage.prepareDialogUnreadCountModifying(d);++d.unread_count,t.pFlags.mentioned&&(++d.unread_mentions_count,this.modifyCachedMentions(a,t.mid,!0,y?p:void 0)),v()}t.mid>=d.top_message&&this.setDialogTopMessage(t,d)}if((!n&&!i||y)&&P){const v=o||a,k=(D=this.notificationsToHandle)[v]??(D[v]={fwdCount:0,fromId:ct});k.fromId!==h&&(k.fromId=h,k.fwdCount=0),t.fwd_from&&++k.fwdCount,k.topMessage=t,this.notificationsHandlePromise??(this.notificationsHandlePromise=Pe.setTimeout(this.handleNotifications,0))}},this.onUpdateMessageReactions=e=>{const{peer:t,msg_id:a,reactions:s}=e,n=t.channel_id,i=this.appMessagesIdsManager.generateMessageId(a,n),o=this.appPeersManager.getPeerId(t),p=this.getMessageByPeer(o,i);if(p?._!=="message")return;const d=s?.recent_reactions;if(d?.length&&p.pFlags.out){const c=d[d.length-1],h=p.reactions?.recent_reactions;this.appPeersManager.getPeerId(c.peer_id)!==this.appPeersManager.peerId&&(!h||h.length<=d.length)&&(!h||!Ct(c,h[h.length-1]))&&this.getNotifyPeerSettings(o).then(({muted:y,peerTypeNotifySettings:P})=>{P.show_previews&&this.notifyAboutMessage(p,{peerReaction:c,peerTypeNotifySettings:P})})}const f=p.peerId+"_"+p.mid;this.pushBatchUpdate("messages_reactions",this.batchUpdateReactions,f,()=>at(p.reactions)),p.reactions=s,e.local||this.setDialogToStateIfMessageIsTop(p)},this.onUpdateDialogUnreadMark=e=>{const t=this.appPeersManager.getPeerId(e.peer.peer),a=this.getDialogOnly(t);if(!a)this.scheduleHandleNewDialogs(t);else{const s=this.dialogsStorage.prepareDialogUnreadCountModifying(a);e.pFlags.unread?a.pFlags.unread_mark=!0:delete a.pFlags.unread_mark,s(),this.dialogsStorage.setDialogToState(a),this.rootScope.dispatchEvent("dialogs_multiupdate",new Map([[t,{dialog:a}]]))}},this.onUpdateEditMessage=e=>{var c;const t=e.message,a=this.getMessagePeer(t),s=this.appPeersManager.isChannel(a)?a.toChatId():void 0,n=this.appMessagesIdsManager.generateMessageId(t.id,s),i=this.getHistoryMessagesStorage(a);if(!i.has(n))return;const o=this.getMessageFromStorage(i,n);this.saveMessages([t],{storage:i});const p=this.getMessageFromStorage(i,n);this.handleEditedMessage(o,p,i);const d=this.getDialogOnly(a),f=d?.top_message===n;if(t.clear_history)f&&this.rootScope.dispatchEvent("dialog_flush",{peerId:a,dialog:d});else{let g=!0;if(o?._==="message"&&!Ct(o.reactions,p.reactions)){const D=p.reactions;p.reactions=o.reactions,this.apiUpdatesManager.processLocalUpdate({_:"updateMessageReactions",peer:this.appPeersManager.getOutputPeer(a),msg_id:t.id,reactions:D}),g=!1}g&&this.rootScope.dispatchEvent("message_edit",{storageKey:i.key,peerId:a,mid:n,message:t}),f&&this.dialogsStorage.setDialogToState(d);const h=new Map,y=()=>{let D=h.get(a);return D||h.set(a,D={}),D};(f||t.grouped_id)&&d&&(y().dialog=d);const P=this.getThreadKey(t);if(P){const D=+P.split("_")[1],v=this.dialogsStorage.getForumTopic(a,D);v&&((c=y()).topics??(c.topics=new Map)).set(D,v)}h.size&&this.rootScope.dispatchEvent("dialogs_multiupdate",h)}},this.onUpdateReadHistory=e=>{const t=e.channel_id,a=this.appMessagesIdsManager.generateMessageId(e.max_id||e.read_max_id,t),s=this.appMessagesIdsManager.generateMessageId(e.top_msg_id,t),n=t?t.toPeerId(!0):this.appPeersManager.getPeerId(e.peer),i=e._==="updateReadHistoryOutbox"||e._==="updateReadChannelOutbox"||e._==="updateReadChannelDiscussionOutbox"?!0:void 0,o=t?this.appChatsManager.isForum(t):!1,p=this.getHistoryMessagesStorage(n),d=Rs(p,"desc"),f=s&&o?this.dialogsStorage.getForumTopic(n,s):this.getDialogOnly(n),c=e.still_unread_count;let g=0,h=0,y=!1;const P=this.getHistoryStorage(n,s);if(n.isUser()&&i&&this.appUsersManager.forceUserOnline(n.toUserId()),s){const k=this.threadsToReplies[n+"_"+s];if(k){const[L,w]=k.split("_");this.updateMessage(L.toPeerId(),+w,"replies_updated")}}const D=f&&this.dialogsStorage.prepareDialogUnreadCountModifying(f),v=this.getReadMaxIdIfUnread(n,s);for(let k=0,L=d.length;k<L;k++){const w=d[k];if(w>a)continue;const R=p.get(w);if(R.pFlags.out!==i)continue;const q=ja(R,o);if(s&&q!==s)continue;if(!(R.pFlags.unread||v&&v<w))break;delete R.pFlags.unread,y||(y=!0),!R.pFlags.out&&f&&(c===void 0&&(g=--f.unread_count),R.pFlags.mentioned&&(h=--f.unread_mentions_count,this.modifyCachedMentions(n,R.mid,!1))),this.rootScope.dispatchEvent("notification_cancel","msg"+w)}if(i?P.readOutboxMaxId=a:P.readMaxId=a,f){if(i?f.read_outbox_max_id=a:f.read_inbox_max_id=a,!i){let k;c!==void 0?k=c:g<0||a>=f.top_message||!v?k=0:g&&f.top_message>a&&(k=g),k!==void 0&&(f.unread_count=k),(h<0||!f.unread_count)&&(f.unread_mentions_count=0)}D?.(),this.dialogsStorage.processDialogForFilters(f),this.rootScope.dispatchEvent("dialog_unread",{peerId:n,dialog:f}),this.dialogsStorage.setDialogToState(f),!y&&c===void 0&&!i&&f.unread_count&&(f._==="forumTopic"?this.dialogsStorage.getForumTopicById(n,s):this.reloadConversation(n))}if(y&&this.rootScope.dispatchEvent("messages_read"),!s&&t){const k=n+"_";for(const L in this.threadsToReplies)if(L.indexOf(k)===0){const[w,R]=this.threadsToReplies[L].split("_");this.rootScope.dispatchEvent("replies_updated",this.getMessageByPeer(w.toPeerId(),+R))}}},this.onUpdateReadMessagesContents=e=>{const t=e.channel_id,a=e.top_msg_id,s=a?this.appMessagesIdsManager.generateMessageId(a,t):void 0,n=e.messages.map(o=>this.appMessagesIdsManager.generateMessageId(o,t)),i=t?t.toPeerId(!0):this.findPeerIdByMids(n);for(let o=0,p=n.length;o<p;++o){const d=n[o],f=this.getMessageByPeer(i,d);f?f.pFlags.media_unread&&(delete f.pFlags.media_unread,this.setDialogToStateIfMessageIsTop(f),!f.pFlags.out&&f.pFlags.mentioned&&this.modifyCachedMentions(i,d,!1,s)):this.fixDialogUnreadMentionsIfNoMessage(i,s)}this.rootScope.dispatchEvent("messages_media_read",{peerId:i,mids:n})},this.onUpdateChannelAvailableMessages=e=>{const t=e.channel_id,a=t.toPeerId(!0),s=this.getHistoryStorage(a).history.slice,n=this.appMessagesIdsManager.generateMessageId(e.available_min_id,t),i=s.filter(o=>o<=n);e.messages=i,this.onUpdateDeleteMessages(e)},this.onUpdateDeleteMessages=e=>{const t=e.channel_id,a=e.messages.map(g=>this.appMessagesIdsManager.generateMessageId(g,t)),s=t?t.toPeerId(!0):this.findPeerIdByMids(a);if(!s)return;this.apiManager.clearCache("messages.getSearchCounters",g=>this.appPeersManager.getPeerId(g.peer)===s);const n=new Set,i=new Map;for(const g of a){const h=this.getMessageByPeer(s,g),y=this.getThreadKey(h);if(!y)continue;const P=+y.split("_")[1];if(this.threadsStorage[s]?.[P]&&(n.add(y),!i.has(P))){const D=this.dialogsStorage.getForumTopic(s,P);D&&i.set(P,D)}}const o=this.handleDeletedMessages(s,this.getHistoryMessagesStorage(s),a),p=Array.from(n).map(g=>{const[h,y]=g.split("_");return this.getHistoryStorage(h.toPeerId(),+y)});[this.getHistoryStorage(s),...p].forEach(g=>{for(const h of o.msgs)g.history.delete(h);o.count&&g.count&&(g.count=Math.max(0,g.count-o.count))}),this.rootScope.dispatchEvent("history_delete",{peerId:s,msgs:o.msgs});const f=[...i.values()],c=this.getDialogOnly(s);c&&f.unshift(c),f.forEach(g=>{const h=g._==="forumTopic",y=o.unreadMentions||o.unread,P=y&&this.dialogsStorage.prepareDialogUnreadCountModifying(g);if(o.unread&&(g.unread_count=Math.max(0,g.unread_count-o.unread)),o.unreadMentions&&(g.unread_mentions_count=g.unread_count?Math.max(0,g.unread_mentions_count-o.unreadMentions):0),y&&(P(),h||this.rootScope.dispatchEvent("dialog_unread",{peerId:s,dialog:g})),o.msgs.has(g.top_message)){const v=this.getHistoryStorage(g.peerId,h?g.id:void 0).history.first;if(v.isEnd(ze.Bottom)&&v.length){const k=v[0],L=this.getMessageByPeer(s,k);this.setDialogTopMessage(L,g)}else h?this.dialogsStorage.getForumTopicById(s,g.id):this.reloadConversation(s)}})},this.onUpdateChannel=e=>{const t=e.channel_id,a=t.toPeerId(!0),s=this.appChatsManager.getChat(t),n=this.appChatsManager.isInChat(t),i=!!pa(s)[0]||!s.pFlags.left,o=this.historiesStorage[a]!==void 0;i!==o&&(delete this.historiesStorage[a],this.rootScope.dispatchEvent("history_forbidden",a)),!!this.getDialogOnly(a)!==n&&(n?this.reloadConversation(a):this.dialogsStorage.dropDialogOnDeletion(a)),this.rootScope.dispatchEvent("channel_update",t)},this.onUpdateChannelReload=e=>{const t=e.channel_id.toPeerId(!0);this.flushStoragesByPeerId(t),Promise.all([this.reloadConversation(t)]).then(()=>{this.rootScope.dispatchEvent("history_reload",t)})},this.onUpdateChannelMessageViews=e=>{const t=e.views,a=e.channel_id.toPeerId(!0),s=this.appMessagesIdsManager.generateMessageId(e.id,e.channel_id),n=this.getMessageByPeer(a,s);n?.views!==void 0&&n.views<t&&(n.views=t,this.pushBatchUpdate("messages_views",this.batchUpdateViews,n.peerId+"_"+n.mid),this.setDialogToStateIfMessageIsTop(n))},this.onUpdateServiceNotification=e=>{if(e.pFlags?.popup){this.rootScope.dispatchEvent("service_notification",e);return}const t=ni,a=t,s=this.generateTempMessageId(a),n={_:"message",id:s,from_id:this.appPeersManager.getOutputPeer(t),peer_id:this.appPeersManager.getOutputPeer(a),pFlags:{unread:!0},date:(e.inbox_date||ve(!0))+this.timeManager.getServerTimeOffset(),message:e.message,media:e.media,entities:e.entities};this.appUsersManager.hasUser(t)||this.appUsersManager.saveApiUsers([{_:"user",id:t,pFlags:{verified:!0},access_hash:"0",first_name:"Telegram",phone:"42777"}]),this.saveMessages([n],{isOutgoing:!0}),e.inbox_date&&(this.pendingTopMsgs[a]=s,this.onUpdateNewMessage({_:"updateNewMessage",message:n,pts:void 0,pts_count:void 0}))},this.onUpdatePinnedMessages=e=>{const t=e._==="updatePinnedChannelMessages"?e.channel_id:void 0,a=t?t.toPeerId(!0):this.appPeersManager.getPeerId(e.peer),s=e.messages.map(p=>this.appMessagesIdsManager.generateMessageId(p,t)),n=this.getHistoryMessagesStorage(a),i=s.filter(p=>!n.has(p));(i.length?Promise.all(i.map(p=>this.reloadMessages(a,p))):Promise.resolve()).finally(()=>{const p=e.pFlags?.pinned;if(p)for(const d of s){const f=n.get(d);f.pFlags.pinned=!0}else for(const d of s){const f=n.get(d);delete f.pFlags.pinned}delete this.pinnedMessages[this.getPinnedMessagesKey(a)],this.appStateManager.getState().then(d=>{delete d.hiddenPinnedMessages[a],this.rootScope.dispatchEvent("peer_pinned_messages",{peerId:a,mids:s,pinned:p})})})},this.onUpdateNotifySettings=e=>{const{peer:t,notify_settings:a}=e,s=t._==="notifyForumTopic";if(!(t._==="notifyPeer"||s))return;const i=this.appPeersManager.getPeerId(t.peer),o=this.dialogsStorage.getDialogOrTopic(i,s?this.appMessagesIdsManager.generateMessageId(t.top_msg_id,t.peer.channel_id):void 0);o&&(o.notify_settings=a,this.rootScope.dispatchEvent("dialog_notify_settings",o),this.dialogsStorage.setDialogToState(o))},this.onUpdateNewScheduledMessage=e=>{const t=e.message,a=this.getMessagePeer(t),s=this.scheduledMessagesStorage[a];if(!s)return;const n=this.appPeersManager.isChannel(a)?a.toChatId():void 0,i=this.appMessagesIdsManager.generateMessageId(t.id,n),o=this.getMessageFromStorage(s,i);this.saveMessages([t],{storage:s,isScheduled:!0});const p=this.getMessageFromStorage(s,i);o?(this.handleEditedMessage(o,p,s),this.rootScope.dispatchEvent("message_edit",{storageKey:s.key,peerId:a,mid:t.mid,message:t})):this.checkPendingMessage(t)||this.rootScope.dispatchEvent("scheduled_new",t)},this.onUpdateDeleteScheduledMessages=e=>{const t=e.peer.channel_id,a=this.appPeersManager.getPeerId(e.peer),s=this.scheduledMessagesStorage[a];if(s){const n=e.messages.map(i=>this.appMessagesIdsManager.generateMessageId(i,t));this.handleDeletedMessages(a,s,n),this.rootScope.dispatchEvent("scheduled_delete",{peerId:a,mids:n})}},this.onUpdateMessageExtendedMedia=e=>{const t=e.peer.channel_id,a=this.appPeersManager.getPeerId(e.peer),s=this.appMessagesIdsManager.generateMessageId(e.msg_id,t),n=this.getHistoryMessagesStorage(a);if(!n.has(s))return;const i=this.getMessageFromStorage(n,s),o=i.media;o.extended_media?._!=="messageExtendedMedia"&&(o.extended_media=e.extended_media,this.onUpdateEditMessage({_:"updateEditMessage",message:i,pts:0,pts_count:0}))},this.onUpdateTranscribedAudio=e=>{const t=e.peer.channel_id,a=this.appPeersManager.getPeerId(e.peer),s=e.text,n=this.appMessagesIdsManager.generateMessageId(e.msg_id,t);this.rootScope.dispatchEvent("message_transcribed",{peerId:a,mid:n,text:s,pending:e.pFlags.pending})},this.batchUpdateViews=e=>{const t=[],a=this.getMessagesFromMap(e);for(const[s]of a)t.push({peerId:s.peerId,mid:s.mid,views:s.views});return t},this.batchUpdateReactions=e=>{const t=[],a=this.getMessagesFromMap(e);for(const[s,n]of a){const i=s.reactions?.results??[],o=n?.results??[],p=i.filter(d=>{const f=o.find(c=>ta(c.reaction,d.reaction));return s.pFlags.out&&(!f||d.count>f.count)||d.chosen_order!==void 0&&(!f||f.chosen_order===void 0)});t.push({message:s,changedResults:p})}return t}}after(){return this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateMessageID:this.onUpdateMessageId,updateNewDiscussionMessage:this.onUpdateNewMessage,updateNewMessage:this.onUpdateNewMessage,updateNewChannelMessage:this.onUpdateNewMessage,updateDialogUnreadMark:this.onUpdateDialogUnreadMark,updateEditMessage:this.onUpdateEditMessage,updateEditChannelMessage:this.onUpdateEditMessage,updateMessageReactions:this.onUpdateMessageReactions,updateReadChannelDiscussionInbox:this.onUpdateReadHistory,updateReadChannelDiscussionOutbox:this.onUpdateReadHistory,updateReadHistoryInbox:this.onUpdateReadHistory,updateReadHistoryOutbox:this.onUpdateReadHistory,updateReadChannelInbox:this.onUpdateReadHistory,updateReadChannelOutbox:this.onUpdateReadHistory,updateChannelReadMessagesContents:this.onUpdateReadMessagesContents,updateReadMessagesContents:this.onUpdateReadMessagesContents,updateChannelAvailableMessages:this.onUpdateChannelAvailableMessages,updateDeleteMessages:this.onUpdateDeleteMessages,updateDeleteChannelMessages:this.onUpdateDeleteMessages,updateChannel:this.onUpdateChannel,updateChannelReload:this.onUpdateChannelReload,updateChannelMessageViews:this.onUpdateChannelMessageViews,updateServiceNotification:this.onUpdateServiceNotification,updatePinnedMessages:this.onUpdatePinnedMessages,updatePinnedChannelMessages:this.onUpdatePinnedMessages,updateNotifySettings:this.onUpdateNotifySettings,updateNewScheduledMessage:this.onUpdateNewScheduledMessage,updateDeleteScheduledMessages:this.onUpdateDeleteScheduledMessages,updateMessageExtendedMedia:this.onUpdateMessageExtendedMedia,updateTranscribedAudio:this.onUpdateTranscribedAudio}),this.rootScope.addEventListener("notify_peer_type_settings",({key:e,settings:t})=>{const a=this.dialogsStorage.getFolderDialogs(0).concat(this.dialogsStorage.getFolderDialogs(1));let s;e==="notifyUsers"?s=n=>n.peerId.isUser():e==="notifyBroadcasts"?s=n=>this.appPeersManager.isBroadcast(n.peerId):s=n=>this.appPeersManager.isAnyGroup(n.peerId),a.filter(s).forEach(n=>{this.rootScope.dispatchEvent("dialog_notify_settings",n)})}),this.rootScope.addEventListener("webpage_updated",({id:e,msgs:t})=>{t.forEach(({peerId:a,mid:s,isScheduled:n})=>{const i=n?this.getScheduledMessagesStorage(a):this.getHistoryMessagesStorage(a),o=this.getMessageFromStorage(i,s);o&&(o.media={_:"messageMediaWebPage",webpage:this.appWebPagesManager.getCachedWebPage(e)},this.rootScope.dispatchEvent("message_edit",{storageKey:i.key,peerId:a,mid:s,message:o}))})}),this.rootScope.addEventListener("draft_updated",({peerId:e,threadId:t,draft:a})=>{const s=this.dialogsStorage.getDialogOrTopic(e,t);if(s){s.draft=a;let n=!1;!a&&!K(s.top_message)?(this.dialogsStorage.dropDialog(e),n=!0):(this.dialogsStorage.generateIndexForDialog(s),this.dialogsStorage.pushDialog({dialog:s})),this.rootScope.dispatchEvent("dialog_draft",{peerId:e,dialog:s,drop:n,draft:a})}else if(t){const n=this.appChatsManager.getChat(e.toChatId());n?n.pFlags.forum&&this.dialogsStorage.getForumTopicById(e,t):this.reloadConversation(e)}else this.reloadConversation(e)}),this.rootScope.addEventListener("poll_update",({poll:e})=>{const t=this.appPollsManager.pollToMessages[e.id];if(t)for(const a of t){const[s,n]=a.split("_"),i=this.getMessageByPeer(s.toPeerId(),+n);i&&this.setDialogToStateIfMessageIsTop(i)}}),this.rootScope.addEventListener("chat_toggle_forum",({chatId:e,enabled:t})=>{const a=e.toPeerId(!0);if(!t){delete this.threadsStorage[a];for(const s in this.pinnedMessages)+s===a&&s.startsWith(a+"_")&&delete this.pinnedMessages[s]}}),this.batchUpdatesDebounced=Jr(()=>{for(const e in this.batchUpdates){const t=this.batchUpdates[e];delete this.batchUpdates[e];const a=t.callback(t.batch);a&&(!(a instanceof Array)||a.length)&&rootScope.dispatchEvent(e,a)}},33,!1,!0),this.appStateManager.getState().then(e=>{e.maxSeenMsgId&&(this.maxSeenId=e.maxSeenMsgId)})}getInputEntities(e){const t=at(e);return t.forEach(a=>{a._==="messageEntityMentionName"&&(a._="inputMessageEntityMentionName",a.user_id=this.appUsersManager.getUserInput(a.user_id))}),t}invokeAfterMessageIsSent(e,t,a){var i;const s=(i=this.tempFinalizeCallbacks)[e]??(i[e]={}),n=s[t]??(s[t]={deferred:Me()});return n.callback=a,n.deferred}editMessage(e,t,a={}){const{mid:s,peerId:n}=e;if(e.pFlags.is_outgoing)return this.invokeAfterMessageIsSent(s,"edit",p=>this.editMessage(p,t,a));const i=a.entities||[];t&&(t=jt(t,i));const o=a.scheduleDate||(e.pFlags.is_scheduled?e.date:void 0);return this.apiManager.invokeApi("messages.editMessage",{peer:this.appPeersManager.getInputPeerById(n),id:e.id,message:t,media:a.newMedia,entities:i.length?this.getInputEntities(i):void 0,no_webpage:a.noWebPage,schedule_date:o}).then(p=>{this.apiUpdatesManager.processUpdateMessage(p)},p=>{if(this.log.error("editMessage error:",p),p&&p.type==="MESSAGE_NOT_MODIFIED"){p.handled=!0;return}return p&&p.type==="MESSAGE_EMPTY"&&(p.handled=!0),Promise.reject(p)})}async transcribeAudio(e){const{id:t,peerId:a}=e,s=n=>{this.apiUpdatesManager.processLocalUpdate({_:"updateTranscribedAudio",msg_id:e.id,peer:this.appPeersManager.getOutputPeer(a),pFlags:n.pFlags,text:n.text,transcription_id:n.transcription_id})};return this.apiManager.invokeApiSingleProcess({method:"messages.transcribeAudio",params:{peer:this.appPeersManager.getInputPeerById(a),msg_id:t},processResult:n=>(s(n),n),processError:n=>{throw(n.type==="TRANSCRIPTION_FAILED"||n.type==="MSG_VOICE_MISSING")&&s({_:"messages.transcribedAudio",transcription_id:0,text:"",pFlags:{}}),n}})}async sendText(e,t,a={}){if(!t.trim())return;a.entities??(a.entities=[]),a.threadId&&!a.replyToMsgId&&(a.replyToMsgId=a.threadId);const n=(await this.apiManager.getConfig()).message_length_max,i=In(t,n);t=i[0],i.length>1&&a.webPage?._==="webPage"&&!t.includes(a.webPage.url)&&delete a.webPage,e=this.appPeersManager.getPeerMigratedTo(e)||e;const o=a.entities;a.viaBotId||(t=jt(t,o));let p=this.getInputEntities(o);p.length||(p=void 0);const d=this.generateOutgoingMessage(e,a);d.entities=o,d.message=t;const f=a.replyToMsgId?K(a.replyToMsgId):void 0,c=this.appPeersManager.isChannel(e);a.webPage&&(d.media={_:"messageMediaWebPage",webpage:a.webPage});const g=y=>{this.onMessagesSendError([d],y),this.rootScope.dispatchEvent("messages_pending")};d.send=()=>{g();const y={};this.pendingAfterMsgs[e]&&(y.afterMessageId=this.pendingAfterMsgs[e].messageId);const P=a.sendAsPeerId?this.appPeersManager.getInputPeerById(a.sendAsPeerId):void 0;let D;return a.viaBotId?D=this.apiManager.invokeApiAfter("messages.sendInlineBotResult",{peer:this.appPeersManager.getInputPeerById(e),random_id:d.random_id,reply_to_msg_id:f||void 0,query_id:a.queryId,id:a.resultId,clear_draft:a.clearDraft,send_as:P},y):D=this.apiManager.invokeApiAfter("messages.sendMessage",{no_webpage:a.noWebPage,peer:this.appPeersManager.getInputPeerById(e),message:t,random_id:d.random_id,reply_to_msg_id:f||void 0,entities:p,clear_draft:a.clearDraft,schedule_date:a.scheduleDate||void 0,silent:a.silent,send_as:P,update_stickersets_order:a.updateStickersetOrder},y),this.pendingAfterMsgs[e]=y,D.then(v=>{if(v._==="updateShortSentMessage"){const k=d.promise;delete d.promise;const L=at(d);Lt(d,["promise"]),d.promise=k,L.date=v.date,L.id=v.id,L.media=v.media,L.entities=v.entities,this.wrapMessageEntities(L),v.pFlags.out&&(L.pFlags.out=!0),v={_:"updates",users:[],chats:[],seq:0,date:void 0,updates:[{_:"updateMessageID",random_id:d.random_id,id:L.id},{_:a.scheduleDate?"updateNewScheduledMessage":c?"updateNewChannelMessage":"updateNewMessage",message:L,pts:v.pts,pts_count:v.pts_count}]}}else v.updates&&v.updates.forEach(k=>{k._==="updateDraftMessage"&&(k.local=!0)});this.apiUpdatesManager.processUpdateMessage(v),d.promise.resolve()},v=>{throw g(v),d.promise.reject(v),v}).finally(()=>{this.pendingAfterMsgs[e]===y&&delete this.pendingAfterMsgs[e]})},this.beforeMessageSending(d,{isScheduled:!!a.scheduleDate||void 0,threadId:a.threadId,clearDraft:a.clearDraft,sequential:!0});const h=[d.promise];for(let y=1;y<i.length;++y)h.push(this.sendText(e,i[y],a));return Promise.all(h).then(xe)}sendFile(e,t){const a=t.file;e=this.appPeersManager.getPeerMigratedTo(e)||e;const s=this.generateOutgoingMessage(e,t),n=t.replyToMsgId?K(t.replyToMsgId):void 0;let i,o;const p="mime_type"in a?a.mime_type:a.type,d=a instanceof File?a.name:"",f=!(a instanceof File)&&!(a instanceof Blob);let c=t.caption||"";this.log("sendFile",a,p);const g=t.entities||[];c&&(c=jt(c,g));const h=[],y=dt().IMAGE_MIME_TYPES_SUPPORTED.has(p),P=t.strippedBytes&&{_:"photoStrippedSize",bytes:t.strippedBytes,type:"i"};let D,v,k;if(f)i="document",o="";else if(p.indexOf("audio/")===0||["video/ogg"].indexOf(p)>=0){i="audio",o="audio."+(p.split("/")[1]==="ogg"?"ogg":"mp3"),k="sendMessageUploadAudioAction",t.isVoiceMessage&&(i="voice",s.pFlags.media_unread=!0);const S={_:"documentAttributeAudio",pFlags:{voice:t.isVoiceMessage||void 0},waveform:t.waveform,duration:t.duration||void 0};h.push(S)}else if(!t.isMedia)i="document",o="document."+p.split("/")[1],k="sendMessageUploadDocumentAction";else if(y){i="photo",o="photo."+p.split("/")[1],k="sendMessageUploadPhotoAction";const S={_:"photoSize",w:t.width,h:t.height,type:sa,location:null,size:a.size};D={_:"photo",id:""+s.id,sizes:[S],w:t.width,h:t.height},P&&D.sizes.unshift(P);const A=this.thumbsStorage.getCacheContext(D,S.type);A.downloaded=a.size,A.url=t.objectURL||"",D=this.appPhotosManager.savePhoto(D)}else if(dt().VIDEO_MIME_TYPES_SUPPORTED.has(p)){i="video",o="video.mp4",k="sendMessageUploadVideoAction";const S={_:"documentAttributeVideo",pFlags:{round_message:t.isRoundMessage||void 0,supports_streaming:!0},duration:t.duration,w:t.width,h:t.height};h.push(S),t.noSound&&a.size>10*1024&&a.size<10*1024*1024&&h.push({_:"documentAttributeAnimated"})}else i="document",o="document."+p.split("/")[1],k="sendMessageUploadDocumentAction";if(h.push({_:"documentAttributeFilename",file_name:d||o}),["document","video","audio","voice"].indexOf(i)!==-1&&!f){const S=[];if(v={_:"document",id:""+s.id,duration:t.duration,attributes:h,w:t.width,h:t.height,thumbs:S,mime_type:p,size:a.size},t.objectURL){const O=this.thumbsStorage.getCacheContext(v);O.downloaded=a.size,O.url=t.objectURL}let A;if(y)h.push({_:"documentAttributeImageSize",w:t.width,h:t.height}),A={_:"photoSize",w:t.width,h:t.height,type:sa,size:a.size};else if(i==="video"&&t.thumb){A={_:"photoSize",w:t.thumb.size.width,h:t.thumb.size.height,type:"local-thumb",size:t.thumb.blob.size};const O=this.thumbsStorage.getCacheContext(v,A.type);O.downloaded=A.size,O.url=t.thumb.url}A&&S.push(A),P&&S.unshift(P),v=this.appDocsManager.saveDoc(v)}this.log("sendFile",i,o,a.type,t);const L=Me(),w=f?void 0:{_:D?"messageMediaPhoto":"messageMediaDocument",pFlags:{},photo:D,document:v};w&&(Lt(w,["promise"]),w.promise=L,t.spoiler&&(w.pFlags.spoiler=!0)),s.entities=g,s.message=c,s.media=f?{_:"messageMediaDocument",pFlags:{},document:a}:w;const R=f?void 0:Fn(a);s.uploadingFileName=R,R&&(this.uploadFilePromises[R]=L);const q=S=>{this.onMessagesSendError([s],S),this.rootScope.dispatchEvent("messages_pending")};let J=!1,Y=null;s.send=()=>{if(f){const S={_:"inputMediaDocument",id:as(a),pFlags:{}};L.resolve(S)}else if(a instanceof File||a instanceof Blob){const S=()=>{(!J||s.error)&&(J=!1,Y=this.apiFileManager.upload({file:a,fileName:R}),Y.catch(O=>{J||(this.log("cancelling upload",w),this.cancelPendingMessage(s.random_id),this.setTyping(e,{_:"sendMessageCancelAction"},void 0,t.threadId),L.reject(O))}),Y.addNotifyListener(O=>{const z=Math.max(1,Math.floor(100*O.done/O.total));k&&this.setTyping(e,{_:k,progress:z|0},void 0,t.threadId),L.notifyAll(O)}),L.notifyAll({done:0,total:a.size}));let A;return i==="video"&&t.objectURL&&t.thumb?.blob&&(A=this.apiFileManager.upload({file:t.thumb.blob})),Y&&Y.then(async O=>{O.name=o,J=!0;let z;switch(i){case"photo":z={_:"inputMediaUploadedPhoto",file:O,pFlags:{spoiler:t.spoiler||void 0}};break;default:z={_:"inputMediaUploadedDocument",file:O,mime_type:p,pFlags:{force_file:k==="sendMessageUploadDocumentAction"||void 0,spoiler:t.spoiler||void 0},attributes:h}}if(A)try{const re=await A;z.thumb=re}catch(re){this.log.error("sendFile thumb upload error:",re)}L.resolve(z)},O=>{throw q(O),O}),L};t.isGroupedItem?S():this.sendSmthLazyLoadQueue.push({load:S})}return L},this.beforeMessageSending(s,{isGroupedItem:t.isGroupedItem,isScheduled:!!t.scheduleDate||void 0,threadId:t.threadId,clearDraft:t.clearDraft,processAfter:t.processAfter}),t.isGroupedItem||(L.then(S=>(this.setTyping(e,{_:"sendMessageCancelAction"},void 0,t.threadId),this.apiManager.invokeApi("messages.sendMedia",{background:t.background,peer:this.appPeersManager.getInputPeerById(e),media:S,message:c,random_id:s.random_id,reply_to_msg_id:n,schedule_date:t.scheduleDate,silent:t.silent,entities:g,clear_draft:t.clearDraft,send_as:t.sendAsPeerId?this.appPeersManager.getInputPeerById(t.sendAsPeerId):void 0,update_stickersets_order:t.updateStickersetOrder}).then(A=>{this.apiUpdatesManager.processUpdateMessage(A)},A=>{if(i==="photo"&&A.code===400&&(A.type==="PHOTO_INVALID_DIMENSIONS"||A.type==="PHOTO_SAVE_FILE_INVALID")){A.handled=!0,i="document",s.send();return}throw q(A),A}))),L.then(s.promise.resolve,s.promise.reject));const pe={message:s};return Lt(pe,["promise"]),pe.promise=L,pe}async sendAlbum(e,t){if(t.threadId&&!t.replyToMsgId&&(t.replyToMsgId=t.threadId),t.sendFileDetails.length===1)return this.sendFile(e,{...t,...t.sendFileDetails[0]});e=this.appPeersManager.getPeerMigratedTo(e)||e;const a=t.replyToMsgId?K(t.replyToMsgId):void 0;let s=t.caption||"",n=t.entities||[];s&&(s=jt(s,n));const i=this.log.bindPrefix("sendAlbum");i(t);const o=""+ ++this.groupedTempId,p=[],d=P=>{p.push(P)},f=t.sendFileDetails.map((P,D)=>{const v={isGroupedItem:!0,isMedia:t.isMedia,scheduleDate:t.scheduleDate,silent:t.silent,replyToMsgId:a,threadId:t.threadId,sendAsPeerId:t.sendAsPeerId,groupId:o,processAfter:d,...P};return D===0&&(v.caption=s,v.entities=n),this.sendFile(e,v).message});t.clearDraft&&p.push(()=>{this.appDraftsManager.clearDraft(e,t.threadId)}),p.forEach(P=>{P()});const c=(P,D)=>{this.onMessagesSendError([P],D),this.rootScope.dispatchEvent("messages_pending")},g=this.appPeersManager.getInputPeerById(e),h=P=>{this.setTyping(e,{_:"sendMessageCancelAction"},void 0,t.threadId);const D=Me();return this.sendSmthLazyLoadQueue.push({load:()=>this.apiManager.invokeApi("messages.sendMultiMedia",{peer:g,multi_media:P,reply_to_msg_id:a,schedule_date:t.scheduleDate,silent:t.silent,clear_draft:t.clearDraft,send_as:t.sendAsPeerId?this.appPeersManager.getInputPeerById(t.sendAsPeerId):void 0,update_stickersets_order:t.updateStickersetOrder}).then(v=>{this.apiUpdatesManager.processUpdateMessage(v),D.resolve()},v=>{f.forEach(k=>c(k,v)),D.reject(v)})}),D},y=f.map(async P=>{let D;try{D=await P.send()}catch(R){if(R.type==="UPLOAD_CANCELED")return;throw i.error("upload item error:",R,P),c(P,R),R}let v;try{v=await this.apiManager.invokeApi("messages.uploadMedia",{peer:g,media:D})}catch(R){throw i.error("uploadMedia error:",R,P),c(P,R),R}const k=D;if(v._==="messageMediaPhoto"){const R=this.appPhotosManager.savePhoto(v.photo);D=Sn(R)}else if(v._==="messageMediaDocument"){const R=this.appDocsManager.saveDoc(v.document);D=Cn(R)}["pFlags","ttl_seconds"].forEach(R=>{D[R]=k[R]??D[R]});const w={_:"inputSingleMedia",media:D,random_id:P.random_id,message:s,entities:n};return s&&(s="",n=[]),w});return Promise.all(y).then(P=>h(P.filter(Boolean)))}sendContact(e,t){return this.sendOther(e,this.appUsersManager.getContactMediaInput(t))}sendOther(e,t,a={}){e=this.appPeersManager.getPeerMigratedTo(e)||e;const s=t?._==="inputMediaDocumentExternal",n=this.generateOutgoingMessage(e,a),i=a.replyToMsgId?K(a.replyToMsgId):void 0;let o;switch(t._){case"inputMediaPoll":{const d=""+n.id;t.poll.id=d,this.appPollsManager.savePoll(t.poll,{_:"pollResults",total_voters:0,pFlags:{},recent_voters:[]});const{poll:f,results:c}=this.appPollsManager.getPoll(d);o={_:"messageMediaPoll",poll:f,results:c};break}case"inputMediaPhoto":{o={_:"messageMediaPhoto",photo:this.appPhotosManager.getPhoto(t.id.id),pFlags:{}};break}case"inputMediaDocument":{o={_:"messageMediaDocument",document:this.appDocsManager.getDoc(t.id.id),pFlags:{}};break}case"inputMediaContact":{o={_:"messageMediaContact",phone_number:t.phone_number,first_name:t.first_name,last_name:t.last_name,user_id:t.user_id??"0",vcard:t.vcard};break}case"inputMediaGeoPoint":{o={_:"messageMediaGeo",geo:a.geoPoint};break}case"inputMediaVenue":{o={_:"messageMediaVenue",geo:a.geoPoint,title:t.title,address:t.address,provider:t.provider,venue_id:t.venue_id,venue_type:t.venue_type};break}case"inputMediaPhotoExternal":{if(s)break;o={_:"messageMediaPhotoExternal",photo:a.webDocument};break}case"inputMediaDocumentExternal":{if(s)break;o={_:"messageMediaDocumentExternal",document:a.webDocument};break}case"messageMediaPending":{o=t.messageMedia;break}}n.media=o;const p=d=>{this.onMessagesSendError([n],d),this.rootScope.dispatchEvent("messages_pending")};return n.send=()=>{const d={};this.pendingAfterMsgs[e]&&(d.afterMessageId=this.pendingAfterMsgs[e].messageId);const f=a.sendAsPeerId?this.appPeersManager.getInputPeerById(a.sendAsPeerId):void 0;let c;return a.viaBotId?c=this.apiManager.invokeApiAfter("messages.sendInlineBotResult",{peer:this.appPeersManager.getInputPeerById(e),random_id:n.random_id,reply_to_msg_id:i||void 0,query_id:a.queryId,id:a.resultId,clear_draft:a.clearDraft,schedule_date:a.scheduleDate,silent:a.silent,send_as:f},d):c=this.apiManager.invokeApiAfter("messages.sendMedia",{peer:this.appPeersManager.getInputPeerById(e),media:t,random_id:n.random_id,reply_to_msg_id:i||void 0,message:"",clear_draft:a.clearDraft,schedule_date:a.scheduleDate,silent:a.silent,send_as:f,update_stickersets_order:a.updateStickersetOrder},d),this.pendingAfterMsgs[e]=d,c.then(g=>{g.updates&&g.updates.forEach(h=>{h._==="updateDraftMessage"&&(h.local=!0)}),this.apiUpdatesManager.processUpdateMessage(g)},g=>{throw p(g),g}).finally(()=>{this.pendingAfterMsgs[e]===d&&delete this.pendingAfterMsgs[e]})},this.beforeMessageSending(n,{isScheduled:!!a.scheduleDate||void 0,threadId:a.threadId,clearDraft:a.clearDraft,sequential:!0,noOutgoingMessage:s}),n.promise}beforeMessageSending(e,t={}){const a=e.id,s=this.getMessagePeer(e),n=t.isScheduled?this.getScheduledMessagesStorage(s):this.getHistoryMessagesStorage(s);e.storageKey=n.key;const i=[];if(t.isScheduled&&!t.noOutgoingMessage)this.saveMessages([e],{storage:n,isScheduled:!0,isOutgoing:!0}),i.push(()=>{this.rootScope.dispatchEvent("scheduled_new",e)});else if(!t.noOutgoingMessage){const p=[this.getHistoryStorage(s),t.threadId?this.getHistoryStorage(s,t.threadId):void 0];for(const d of p)d&&d.history.unshift(a);if(this.saveMessages([e],{storage:n,isOutgoing:!0}),this.setDialogTopMessage(e),t.threadId){const d=this.dialogsStorage.getForumTopic(s,t.threadId);d&&this.setDialogTopMessage(e,d)}i.push(()=>{this.rootScope.dispatchEvent("history_append",{storageKey:n.key,message:e})})}let o;return t.noOutgoingMessage||(o=this.pendingByRandomId[e.random_id]={peerId:s,tempId:a,threadId:t.threadId,storage:n,sequential:t.sequential},this.pendingTopMsgs[s]=a),!t.isGroupedItem&&e.send&&i.push(()=>{t.clearDraft&&this.appDraftsManager.clearDraft(s,t.threadId),e.send()}),i.length&&(t.processAfter||po)(()=>{for(const p of i)p()}),o}generateOutgoingMessage(e,t){t.threadId&&!t.replyToMsgId&&(t.replyToMsgId=t.threadId);let a;const s=this.appPeersManager.isBroadcast(e);if(s&&this.appPeersManager.getPeer(e).pFlags.signatures){const o=this.appUsersManager.getSelf();a=o.first_name+(o.last_name?" "+o.last_name:"")}const n={_:"message",id:this.generateTempMessageId(e),from_id:t.sendAsPeerId?this.appPeersManager.getOutputPeer(t.sendAsPeerId):this.generateFromId(e),peer_id:this.appPeersManager.getOutputPeer(e),post_author:a,pFlags:this.generateFlags(e),date:t.scheduleDate||ve(!0)+this.timeManager.getServerTimeOffset(),message:"",grouped_id:t.groupId,random_id:Vt(),reply_to:this.generateReplyHeader(e,t.replyToMsgId,t.threadId),via_bot_id:t.viaBotId,reply_markup:t.replyMarkup,replies:this.generateReplies(e),views:s&&1,pending:!0};return Lt(n,["send","promise"]),t.groupId===void 0&&(n.promise=Me()),n}generateReplyHeader(e,t,a){const s=this.appPeersManager.isForum(e);if(s&&!a){const i=this.getMessageByPeer(e,t);i&&(a=ja(i,!0))}const n={_:"messageReplyHeader",reply_to_msg_id:t||a,pFlags:{}};return a&&s&&Xs!==a&&(n.pFlags.forum_topic=!0),a&&n.reply_to_msg_id!==a&&(n.reply_to_top_id=a),n}generateReplies(e){let t;if(this.appPeersManager.isBroadcast(e)){const a=this.appProfileManager.getCachedFullChat(e.toChatId());a?.linked_chat_id&&(t={_:"messageReplies",pFlags:{comments:!0},channel_id:a.linked_chat_id,replies:0,replies_pts:0})}return t}generateFromId(e){if(!(this.appPeersManager.isAnyChat(e)&&(this.appPeersManager.isBroadcast(e)||this.isAnonymousSending(e))))return this.appPeersManager.getOutputPeer(this.appUsersManager.getSelf().id.toPeerId())}generateFlags(e){const t={},a=this.appUsersManager.getSelf().id;return e!==a&&(t.out=!0,!this.appPeersManager.isChannel(e)&&!this.appUsersManager.isBot(e)&&(t.unread=!0)),this.appPeersManager.isBroadcast(e)&&(t.post=!0),t}generateForwardHeader(e,t){const a=this.appUsersManager.getSelf().id.toPeerId(),s=t.fromId;if(s===a&&t.peerId===a&&!t.fwd_from)return;const n={_:"messageFwdHeader",date:t.date,pFlags:{}};let i=!1;if(t.fwd_from)n.from_id=t.fwd_from.from_id,n.from_name=t.fwd_from.from_name,n.post_author=t.fwd_from.post_author;else{if(n.post_author=t.post_author,s.isUser()){const o=this.appProfileManager.getCachedFullUser(s.toUserId());o?.private_forward_name&&(n.from_name=o.private_forward_name,i=!0)}i||(n.from_id=this.appPeersManager.getOutputPeer(s))}return this.appPeersManager.isBroadcast(t.peerId)&&(t.post_author&&(n.post_author=t.post_author),n.channel_post=t.id),e===a&&!i&&(n.saved_from_msg_id=t.id,n.saved_from_peer=this.appPeersManager.getOutputPeer(t.peerId)),n}generateFakeAvatarMessage(e,t){const a=Number.MAX_SAFE_INTEGER,s={_:"messageService",pFlags:{},action:{_:"messageActionChannelEditPhoto",photo:t},id:a,peer_id:this.appPeersManager.getOutputPeer(e),mid:a,peerId:e,date:t.date,fromId:e};return this.getHistoryMessagesStorage(e).set(a,s),s}getUploadPromise(e){return this.uploadFilePromises[e]}isAnonymousSending(e){return e.isAnyChat()?this.appPeersManager.getPeer(e).admin_rights?.pFlags?.anonymous:!1}setDialogTopMessage(e,t=this.getDialogOnly(e.peerId)){if(!t)return;t.top_message=e.mid;const a=this.getHistoryStorage(e.peerId,t._==="forumTopic"?t.id:void 0);a.maxId=e.mid,this.dialogsStorage.generateIndexForDialog(t,!1,e),this.scheduleHandleNewDialogs(e.peerId,t)}cancelPendingMessage(e){const t=this.pendingByRandomId[e];if(t){const{peerId:a,tempId:s,storage:n}=t,i=this.getHistoryStorage(a);return this.appPeersManager.isChannel(a)?this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:a.toChatId(),messages:[s],pts:void 0,pts_count:void 0}):this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteMessages",messages:[s],pts:void 0,pts_count:void 0}),i.history.delete(s),delete this.pendingByRandomId[e],this.deleteMessageFromStorage(n,s),!0}return!1}async fillConversations(e=yt){const t=this.middleware.get();for(;!this.dialogsStorage.isDialogsLoaded(e);){const a=await this.getTopMessages({limit:100,folderId:e});if(!t()||a.isEnd)break}}getReadMaxIdIfUnread(e,t){const a=this.getHistoryStorage(e,t);if(t&&!this.appChatsManager.isForum(e.toChatId())){const s=this.getHistoryStorage(e),n=Math.max(s.readMaxId??0,a.readMaxId);return!this.getMessageByPeer(e,a.maxId)?.pFlags?.out&&n<a.maxId?n:0}else{const s=this.getMessageByPeer(e,a.maxId),n=e.isUser()?Math.max(a.readMaxId,a.readOutboxMaxId):a.readMaxId;return!s?.pFlags?.out&&n<a.maxId&&K(n)?n:0}}getTopMessages({limit:e,folderId:t}){let s,n=0,i=this.dialogsStorage.getOffsetDate(t);i&&(n=i*65536,i+=this.timeManager.getServerTimeOffset());const o=100,p=this.middleware.get(),d=this.dialogsStorage.isFilterIdForForum(t)?t:void 0,f=h=>{if(!p()||h._==="messages.dialogsNotModified")return null;Ae&&this.log("messages.getDialogs result:",h),!d&&!i&&!s&&t!==yt&&this.dialogsStorage.resetPinnedOrder(t),!d&&!i&&this.appDraftsManager.addMissedDialogs(),this.appUsersManager.saveApiUsers(h.users),this.appChatsManager.saveApiChats(h.chats),this.saveMessages(h.messages);let y=!!i,P=!1;const D=new Map,v=t===yt?pt:t,k=!!d||t===yt,L=h.dialogs||h.topics;if(bt(L,S=>{if(S){if(d||(S.folder_id??(S.folder_id=v)),this.dialogsStorage.saveDialog({dialog:S,ignoreOffsetDate:!0,saveGlobalOffset:k}),S.peerId===void 0){this.log.error("bugged dialog?",S);debugger;return}if(!y&&!this.appPeersManager.isChannel(S.peerId||this.appPeersManager.getPeerId(S.peer))&&(this.incrementMaxSeenId(S.top_message),y=!0),n&&Qa(S)>n&&(this.scheduleHandleNewDialogs(S.peerId,S),P=!0),!d&&!K(S.read_inbox_max_id)&&!K(S.read_outbox_max_id))D.set(S.peerId,{dialog:S}),this.log.error("noIdsDialogs",S,g);else if(S.top_message){const A=this.getMessageByPeer(S.peerId,S.top_message);A&&(this.setMessageUnreadByDialog(A,S),this.dialogsStorage.setDialogToState(S))}}}),D.size){const S=[...D.keys()],A=S.map(O=>this.reloadConversation(O));Promise.all(A).then(()=>{this.rootScope.dispatchEvent("dialogs_multiupdate",D);for(let O=0;O<S.length;++O){const z=S[O];this.rootScope.dispatchEvent("dialog_unread",{peerId:z,dialog:this.getDialogOnly(z)})}})}const w=h.count,R=this.dialogsStorage.getFolderDialogs(t,!1);let q=0;for(let S=0,A=R.length;S<A;++S){const O=R[S];K(O.top_message)?++q:this.log.error("something strange with dialog",O)}const J=!w||q>=w||!L.length;J&&this.dialogsStorage.setDialogsLoaded(t,!0),P?this.scheduleHandleNewDialogs():this.rootScope.dispatchEvent("dialogs_multiupdate",new Map);const Y=L,pe=e===o?Y:Y.slice(0,e);return{isEnd:J&&pe[pe.length-1]===Y[Y.length-1],count:w,dialogs:pe}};let c,g;return d?c=this.apiManager.invokeApiSingleProcess({method:"channels.getForumTopics",params:g={channel:this.appChatsManager.getChannelInput(d.toChatId()),limit:o,offset_date:i,offset_id:0,offset_topic:0},options:{noErrorBox:!0},processResult:h=>(h=this.dialogsStorage.processTopics(d,h),f(h))}):c=this.apiManager.invokeApiSingleProcess({method:"messages.getDialogs",params:g={folder_id:t,offset_date:i,offset_id:0,offset_peer:this.appPeersManager.getInputPeerById(s),limit:o,hash:"0"},options:{noErrorBox:!0},processResult:f}),c}async forwardMessages(e,t,a,s={}){delete s.replyToMsgId,delete s.threadId,e=this.appPeersManager.getPeerMigratedTo(e)||e,a=a.slice().sort((h,y)=>h-y);for(let h=0,y=a.length;h<y;++h){const P=a[h],D=this.getMessageByPeer(t,P);D.pFlags.is_outgoing&&(this.sendText(e,D.message,{entities:D.entities,scheduleDate:s.scheduleDate,silent:s.silent}),a.splice(h--,1),--y)}if(!a.length)return Promise.resolve();const n=await this.apiManager.getConfig(),i=a.splice(n.forwarded_count_max,a.length-n.forwarded_count_max);s.dropCaptions&&(s.dropAuthor=!0);const o={},p=[],d=a.map(h=>{var w;const y=this.getMessageByPeer(t,h),P=this.generateOutgoingMessage(e,s);p.push(P.id);const D=["entities","media"];s.dropAuthor||(P.fwd_from=this.generateForwardHeader(e,y),D.push("views","forwards"),P.fwd_from?.from_name&&e===this.appPeersManager.peerId&&delete P.from_id),(!s.dropCaptions||!y.media)&&D.push("message");const v=y.reply_to?.reply_to_msg_id,k=a.indexOf(v);if(v&&k!==-1){const R=p[k];P.reply_to={_:"messageReplyHeader",reply_to_msg_id:R,pFlags:{}}}D.forEach(R=>{P[R]=at(y[R])});const L=P.media?.document;return L&&(["round","voice"].includes(L.type)&&(P.pFlags.media_unread=!0),L.sticker&&!this.rootScope.premium&&En(L)&&(P.media.pFlags.nopremium=!0)),y.grouped_id&&(o[w=y.grouped_id]??(o[w]={tempId:""+ ++this.groupedTempId,messages:[]})).messages.push(P),P});for(const h in o){const y=o[h];y.messages.length>1&&y.messages.forEach(P=>{P.grouped_id=y.tempId})}d.forEach(h=>{this.beforeMessageSending(h,{isScheduled:!!s.scheduleDate||void 0,sequential:!0})});const f={};this.pendingAfterMsgs[e]&&(f.afterMessageId=this.pendingAfterMsgs[e].messageId);const c=this.apiManager.invokeApiAfter("messages.forwardMessages",{from_peer:this.appPeersManager.getInputPeerById(t),id:a.map(h=>K(h)),random_id:d.map(h=>h.random_id),to_peer:this.appPeersManager.getInputPeerById(e),with_my_score:s.withMyScore,silent:s.silent,schedule_date:s.scheduleDate,drop_author:s.dropAuthor,drop_media_captions:s.dropCaptions,send_as:s.sendAsPeerId?this.appPeersManager.getInputPeerById(s.sendAsPeerId):void 0},f).then(h=>{this.log("forwardMessages updates:",h),this.apiUpdatesManager.processUpdateMessage(h)},h=>{throw this.onMessagesSendError(d,h),h}).finally(()=>{this.pendingAfterMsgs[e]===f&&delete this.pendingAfterMsgs[e]});this.pendingAfterMsgs[e]=f;const g=[c];return i.length&&g.push(this.forwardMessages(e,t,i,s)),Promise.all(g).then(xe)}generateEmptyMessage(e){}onMessagesSendError(e,t){e.forEach(a=>{if(a.error!==t)if(t){a.error=t,this.rootScope.dispatchEvent("message_error",{storageKey:a.storageKey,tempId:a.mid,error:t});const s=this.getDialogOnly(a.peerId);s&&this.rootScope.dispatchEvent("dialog_unread",{peerId:a.peerId,dialog:s})}else delete a.error})}getMessagesStorageByKey(e){const t=e.split("_"),a=+t[0];return t[1]==="scheduled"?this.getScheduledMessagesStorage(a):this.getHistoryMessagesStorage(a)}getMessageFromStorage(e,t){return e=this.getMessagesStorage(e),e?.type==="history"&&this.appMessagesIdsManager.isLegacyMessageId(t)&&(e=this.getGlobalHistoryMessagesStorage()),e?.get(t)}setMessageToStorage(e,t){e=this.getMessagesStorage(e);const{mid:a}=t;return e?.type==="history"&&this.appMessagesIdsManager.isLegacyMessageId(a)&&this.getGlobalHistoryMessagesStorage().set(a,t),e?.set(a,t)}deleteMessageFromStorage(e,t){return e?.peerId&&this.appMessagesIdsManager.isLegacyMessageId(t)&&this.getGlobalHistoryMessagesStorage().delete(t),e?.delete(t)}createMessageStorage(e,t){const a=new Map;return a.peerId=e,a.type=t,a.key=`${e}_${t}`,a}getHistoryMessagesStorage(e){var t;return(t=this.messagesStorageByPeerId)[e]??(t[e]=this.createMessageStorage(e,"history"))}getGlobalHistoryMessagesStorage(){return this.getHistoryMessagesStorage(ct)}getMessagesStorage(e){return typeof e=="object"?e:this.getMessagesStorageByKey(e)}getMessageById(e){return this.appMessagesIdsManager.isLegacyMessageId(e)?this.getMessageFromStorage(this.getGlobalHistoryMessagesStorage(),e):this.generateEmptyMessage(e)}getMessageByPeer(e,t){return e?this.getMessageFromStorage(this.getHistoryMessagesStorage(e),t):this.getMessageById(t)}getMessagePeer(e){return e?.peer_id&&this.appPeersManager.getPeerId(e.peer_id)||ct}getDialogOnly(e){return this.dialogsStorage.getDialogOnly(e)}cantForwardDeleteMids(e,t){const a=this.getMessagesStorage(e);let s=!t.length,n=!t.length;for(const i of t){const o=this.getMessageFromStorage(a,i);if(s||(s=!this.canForward(o)),n||(n=!this.canDeleteMessage(o)),s&&n)break}return{cantForward:s,cantDelete:n}}reloadConversationOrTopic(e,t){t?this.dialogsStorage.getForumTopicById(e,t):this.reloadConversation(e)}reloadConversation(e){let t;if(e!==void 0){const a=this.appPeersManager.getPeerId(e);this.log.warn("reloadConversation",a);let s=this.reloadConversationsPeers.get(a);if(s&&(t=s.promise),t)return t;t=Me(),this.reloadConversationsPeers.set(a,s={inputDialogPeer:this.appPeersManager.getInputDialogPeerById(e),promise:t})}return this.reloadConversationsPromise?t||this.reloadConversationsPromise:(this.reloadConversationsPromise=ft(0).then(()=>{const a=[],s={};for(const[o,{inputDialogPeer:p,promise:d}]of this.reloadConversationsPeers)a.push(p),s[o]=d;const n=()=>{for(const o in s)this.reloadConversationsPeers.delete(+o),s[o].resolve(void 0)};return(async()=>{for(;;){const o=await this.apiManager.invokeApi("messages.getPeerDialogs",{peers:a}),p=this.apiUpdatesManager.updatesState,{state:d}=o;if(p.pts&&p.pts!==d.pts){await ft(500);continue}return o}})().then(o=>{for(const p in s)this.reloadConversationsPeers.delete(+p);this.dialogsStorage.applyDialogs(o),o.dialogs.forEach(p=>{const d=p.peerId;d&&(s[d].resolve(p),delete s[d])})},xe).then(()=>{n(),this.reloadConversationsPromise=null,this.reloadConversationsPeers.size&&this.reloadConversation()})}),t||this.reloadConversationsPromise)}doFlushHistory(e,t,a,s,n){let i;const o=p=>{if(this.apiUpdatesManager.processUpdateMessage({_:"updateShort",update:{_:"updatePts",pts:p.pts,pts_count:p.pts_count}}),!p.offset){if(n){const d=this.getHistoryMessagesStorage(e),f=[];for(const[c,g]of d)g.fromId===n&&f.push(c);this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:e.toChatId(),messages:f,pts:void 0,pts_count:void 0})}return!0}return this.doFlushHistory(e,t,a,s)};return n?i=this.apiManager.invokeApiSingleProcess({method:"channels.deleteParticipantHistory",params:{channel:this.appChatsManager.getChannelInput(e.toChatId()),participant:this.appPeersManager.getInputPeerById(n)},processResult:o}):s?i=this.apiManager.invokeApiSingleProcess({method:"channels.deleteTopicHistory",params:{channel:this.appChatsManager.getChannelInput(e.toChatId()),top_msg_id:K(s)},processResult:o}):i=this.apiManager.invokeApiSingleProcess({method:"messages.deleteHistory",params:{just_clear:t,revoke:a,peer:this.appPeersManager.getInputPeerById(e),max_id:0},processResult:o}),i}async flushHistory(e,t,a,s){if(this.appPeersManager.isChannel(e)&&!s){const i=await this.getHistory({peerId:e,offsetId:0,limit:1}),o=e.toChatId(),p=i.history[0]||0;return this.apiManager.invokeApiSingle("channels.deleteHistory",{channel:this.appChatsManager.getChannelInput(o),max_id:K(p)}).then(d=>(d&&this.apiUpdatesManager.processLocalUpdate({_:"updateChannelAvailableMessages",channel_id:o,available_min_id:p}),d))}return this.doFlushHistory(e,t,a,s).then(()=>{if(s||this.flushStoragesByPeerId(e),t)this.rootScope.dispatchEvent("dialog_flush",{peerId:e,dialog:this.getDialogOnly(e)});else{const n=this.getTypingKey(e,s);if(delete this.notificationsToHandle[n],delete this.typings[n],!s){const i=this.reloadConversationsPeers.get(e);i&&(this.reloadConversationsPeers.delete(e),i.promise.resolve(void 0))}this.dialogsStorage.dropDialogOnDeletion(e,s)}})}flushStoragesByPeerId(e){[this.historiesStorage,this.threadsStorage,this.searchesStorage,this.pendingAfterMsgs,this.pendingTopMsgs].forEach(a=>{delete a[e]});for(const a in this.pinnedMessages)(+a===e||a.startsWith(e+"_"))&&delete this.pinnedMessages[a];const t=this.needSingleMessages.get(e);if(t){for(const[a,s]of t)s.resolve(this.generateEmptyMessage(a));t.clear()}[this.messagesStorageByPeerId,this.scheduledMessagesStorage].forEach(a=>{const s=a[e];if(s){if(s.type==="history"&&!this.appPeersManager.isChannel(e)){const n=this.getGlobalHistoryMessagesStorage();s.forEach((i,o)=>{this.deleteMessageFromStorage(n,o)})}s.clear(),delete a[e]}}),this.dialogsStorage.flushForumTopicsCache(e)}hidePinnedMessages(e){return Promise.all([this.appStateManager.getState(),this.getPinnedMessage(e)]).then(([t,a])=>{t.hiddenPinnedMessages[e]=a.maxId,this.rootScope.dispatchEvent("peer_pinned_hidden",{peerId:e,maxId:a.maxId})})}getPinnedMessagesKey(e,t){return e+(t?"_"+t:"")}getPinnedMessage(e,t){var s,n;const a=(s=this.pinnedMessages)[n=this.getPinnedMessagesKey(e,t)]??(s[n]={});return a.promise?a.promise:a.maxId?Promise.resolve(a):a.promise=Promise.resolve(this.getHistory({peerId:e,inputFilter:{_:"inputMessagesFilterPinned"},offsetId:0,limit:1,threadId:t})).then(i=>(a.count=i.count,a.maxId=i.history[0],a)).finally(()=>{delete a.promise})}getPinnedMessagesCount(e,t){return this.pinnedMessages[this.getPinnedMessagesKey(e,t)]?.count}getPinnedMessagesMaxId(e,t){return this.pinnedMessages[this.getPinnedMessagesKey(e,t)]?.maxId}updatePinnedMessage(e,t,a,s,n){return this.apiManager.invokeApi("messages.updatePinnedMessage",{peer:this.appPeersManager.getInputPeerById(e),unpin:a,silent:s,pm_oneside:n,id:K(t)}).then(i=>{this.apiUpdatesManager.processUpdateMessage(i)})}unpinAllMessages(e){return this.apiManager.invokeApiSingle("messages.unpinAllMessages",{peer:this.appPeersManager.getInputPeerById(e)}).then(t=>(this.apiUpdatesManager.processUpdateMessage({_:"updateShort",update:{_:"updatePts",pts:t.pts,pts_count:t.pts_count}}),t.offset?this.unpinAllMessages(e):(this.getHistoryMessagesStorage(e).forEach(s=>{s.pFlags.pinned&&delete s.pFlags.pinned}),this.rootScope.dispatchEvent("peer_pinned_messages",{peerId:e,unpinAll:!0}),delete this.pinnedMessages[this.getPinnedMessagesKey(e)],!0)))}getAlbumText(e){const t=this.groupedMessagesStorage[e];return oo(Array.from(t.values()))}getGroupsFirstMessage(e){if(!e?.grouped_id)return e;const t=this.groupedMessagesStorage[e.grouped_id];let a=Number.MAX_SAFE_INTEGER;for(const[s,n]of t)n.mid<a&&(a=n.mid);return this.getMessageFromStorage(t,a)}getMidsByAlbum(e,t="asc"){return Rs(this.groupedMessagesStorage[e],t)}getMessagesByAlbum(e){const t=this.getMidsByAlbum(e,"asc"),a=this.groupedMessagesStorage[e];return t.map(s=>this.getMessageFromStorage(a,s))}getMidsByMessage(e){return e?e.grouped_id?this.getMidsByAlbum(e.grouped_id):[e.mid]:[]}filterMessages(e,t){const a=[];if(e.grouped_id){const s=this.groupedMessagesStorage[e.grouped_id];for(const[n,i]of s)t(i)&&a.push(i)}else t(e)&&a.push(e);return a}generateTempMessageId(e){const t=this.getDialogOnly(e),a=this.appPeersManager.isChannel(e)?e.toChatId():void 0;let s=t?.top_message||0,n=this.tempMids[e];return n&&n>s&&(s=n),n=this.appMessagesIdsManager.generateTempMessageId(s,a),this.tempMids[e]=n}setMessageUnreadByDialog(e,t=this.getDialogOnly(e.peerId)){t&&e.mid&&e.mid>t[e.pFlags.out?"read_outbox_max_id":"read_inbox_max_id"]&&(e.pFlags.unread=!0)}saveMessage(e,t={}){var k,L;if(!e||e._==="messageEmpty")return;e.pFlags??(e.pFlags={});const a=this.getMessagePeer(e),s=t.storage||this.getHistoryMessagesStorage(a),n=e.peer_id._==="peerChannel",i=n&&this.appChatsManager.isBroadcast(a.toChatId()),o=e._==="message",p=n?a.toChatId():void 0;t.isOutgoing&&(e.pFlags.is_outgoing=!0);const d=this.appMessagesIdsManager.generateMessageId(e.id,p);if(e.mid=d,o){if(t.isScheduled&&(e.pFlags.is_scheduled=!0),e.grouped_id){const w=(k=this.groupedMessagesStorage)[L=e.grouped_id]??(k[L]=this.createMessageStorage(a,"grouped"));this.setMessageToStorage(w,e)}e.via_bot_id&&(e.viaBotId=e.via_bot_id)}const f=e.reply_to;if(f){const w=f.reply_to_peer_id?.channel_id||p;f.reply_to_msg_id&&(f.reply_to_msg_id=e.reply_to_mid=this.appMessagesIdsManager.generateMessageId(f.reply_to_msg_id,w)),f.reply_to_top_id&&(f.reply_to_top_id=this.appMessagesIdsManager.generateMessageId(f.reply_to_top_id,w))}const c=o&&e.replies;c&&(c.max_id&&(c.max_id=this.appMessagesIdsManager.generateMessageId(c.max_id,c.channel_id)),c.read_max_id&&(c.read_max_id=this.appMessagesIdsManager.generateMessageId(c.read_max_id,c.channel_id)));const g=!!a;g||(e.date-=this.timeManager.getServerTimeOffset());const h=this.appPeersManager.peerId,y=o&&e.fwd_from;if(e.peerId=a,a===h?e.fromId=y?y.from_id?this.appPeersManager.getPeerId(y.from_id):ct:h:e.fromId=e.pFlags.post||!e.from_id?a:this.appPeersManager.getPeerId(e.from_id),this.setMessageUnreadByDialog(e),y){y.saved_from_msg_id&&(y.saved_from_msg_id=this.appMessagesIdsManager.generateMessageId(y.saved_from_msg_id,y.saved_from_peer.channel_id)),y.channel_post&&(y.channel_post=this.appMessagesIdsManager.generateMessageId(y.channel_post,y.from_id.channel_id));const w=y.saved_from_peer||y.from_id,R=y.saved_from_msg_id||y.channel_post;if(w&&R){const q=this.appPeersManager.getPeerId(w),J=this.appMessagesIdsManager.generateMessageId(R,w.channel_id);e.savedFrom=q+"_"+J}e.fwdFromId=this.appPeersManager.getPeerId(y.from_id),g||(y.date-=this.timeManager.getServerTimeOffset())}const P={type:"message",peerId:a,messageId:d};let D=!1;const v=o&&e.media;if(v)switch(v._){case"messageMediaEmpty":{delete e.media;break}case"messageMediaPhoto":{v.ttl_seconds?D=!0:v.photo=this.appPhotosManager.savePhoto(v.photo,P),v.photo||delete e.media;break}case"messageMediaPoll":{const w=this.appPollsManager.savePoll(v.poll,v.results,e);v.poll=w.poll,v.results=w.results;break}case"messageMediaDocument":{if(v.ttl_seconds)D=!0;else{const w=v.document;v.document=this.appDocsManager.saveDoc(w,P),!v.document&&w._!=="documentEmpty"&&(D=!0)}break}case"messageMediaWebPage":{const w=this.appWebPagesManager.getMessageKeyForPendingWebPage(a,d,t.isScheduled);v.webpage=this.appWebPagesManager.saveWebPage(v.webpage,w,P),v.webpage||delete e.media;break}case"messageMediaInvoice":{v.photo=this.appWebDocsManager.saveWebDocument(v.photo);const w=v.extended_media;if(w?._==="messageExtendedMedia"){const R=w.media;R.photo=this.appPhotosManager.savePhoto(R.photo,P),R.document=this.appDocsManager.saveDoc(R.document,P)}break}case"messageMediaUnsupported":{D=!0;break}}if(o&&D&&(e.media={_:"messageMediaUnsupported"},e.message="",delete e.entities,delete e.totalEntities),!o&&e.action){const w=e.action,R=e.fromId===this.appUsersManager.getSelf().id?"You":"";let q,J;switch(w.photo&&(w.photo=this.appPhotosManager.savePhoto(w.photo,P)),w.document&&(w.document=this.appDocsManager.saveDoc(w.photo,P)),w._){case"messageActionChatEditPhoto":w.photo?.video_sizes?w._=i?"messageActionChannelEditVideo":"messageActionChatEditVideo":i&&(w._="messageActionChannelEditPhoto");break;case"messageActionGroupCall":{this.appGroupCallsManager.saveGroupCall(w.call);let Y;w.duration===void 0?Y="started":Y="ended",i||(Y+="_by"+R),w.type=Y;break}case"messageActionChatEditTitle":i&&(w._="messageActionChannelEditTitle");break;case"messageActionChatDeletePhoto":i&&(w._="messageActionChannelDeletePhoto");break;case"messageActionChatAddUser":w.users.length===1?(w.user_id=w.users[0],e.fromId===w.user_id&&(n?w._="messageActionChatJoined"+R:w._="messageActionChatReturn"+R)):w.users.length>1&&(w._="messageActionChatAddUsers");break;case"messageActionChatDeleteUser":e.fromId===w.user_id&&(w._="messageActionChatLeave"+R);break;case"messageActionChannelMigrateFrom":q=w.chat_id.toPeerId(!0),J=a;break;case"messageActionChatMigrateTo":q=a,J=w.channel_id.toPeerId(!0);break;case"messageActionHistoryClear":e.clear_history=!0,delete e.pFlags.out,delete e.pFlags.unread;break;case"messageActionPhoneCall":w.type=(w.pFlags.video?"video_":"")+(w.duration!==void 0?e.pFlags.out?"out_":"in_":"")+(w.duration!==void 0?"ok":w.reason._==="phoneCallDiscardReasonMissed"?"missed":"cancelled");break}q&&J&&!this.getMigration(q)&&this.migrateChecks(q,J)}return o&&e.message.length&&!e.totalEntities&&this.wrapMessageEntities(e),this.setMessageToStorage(s,e),e}saveMessages(e,t={}){return e.saved||(e.saved=!0,e.forEach((a,s,n)=>{n[s]=this.saveMessage(a,t)})),e}async getFirstMessageToEdit(e,t){const s=this.getHistoryStorage(e,t).history.slice;if(s.isEnd(ze.Bottom)&&s.length){let n;const i=this.appPeersManager.peerId;for(const o of s){const p=this.getMessageByPeer(e,o);if((i===e?p.fromId===i:p.pFlags.out)&&await this.canEditMessage(p,"text")){n=p;break}}return n}}wrapMessageEntities(e){const t=e.entities?e.entities.slice():[];e.message=ra(e.message,t);const a=An(e.message);e.totalEntities=dn(t,a)}reportMessages(e,t,a,s){return this.apiManager.invokeApiSingle("messages.report",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(n=>K(n)),reason:{_:a},message:s})}startBot(e,t,a){const s=t?t.toPeerId(!0):e.toPeerId();if(a){const i=Vt();return this.apiManager.invokeApi("messages.startBot",{bot:this.appUsersManager.getUserInput(e),peer:this.appPeersManager.getInputPeerById(s),random_id:i,start_param:a}).then(o=>{this.apiUpdatesManager.processUpdateMessage(o)})}const n="/start";if(t){let i;return this.appChatsManager.isChannel(t)?i=this.appChatsManager.inviteToChannel(t,[e]):i=this.appChatsManager.addChatUser(t,e,0),i.catch(o=>{if(o?.type=="USER_ALREADY_PARTICIPANT"){o.handled=!0;return}throw o}).then(()=>this.sendText(s,n+"@"+this.appPeersManager.getPeerUsername(e.toPeerId())))}return this.sendText(s,n)}editPeerFolders(e,t){this.apiManager.invokeApi("folders.editPeerFolders",{folder_peers:e.map(a=>({_:"inputFolderPeer",peer:this.appPeersManager.getInputPeerById(a),folder_id:t}))}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}getFilter(e){return this.filtersStorage.getFilter(e)}async toggleDialogPin(e){const{peerId:t,topicId:a,filterId:s=a?t:void 0}=e;if(s===void 0)throw new Error("No filterId");if(s>1)return this.filtersStorage.toggleDialogPin(t,s);const n=this.dialogsStorage.getDialogOrTopic(t,a);if(!n)throw void 0;const i=n.pFlags?.pinned?void 0:!0;if(i){const o=await this.apiManager.getLimit(a?"topicPin":s===1?"folderPin":"pin");if(this.dialogsStorage.getPinnedOrders(s).length>=o)throw Ue(a?"PINNED_TOO_MUCH":"PINNED_DIALOGS_TOO_MUCH")}return a?this.appChatsManager.updatePinnedForumTopic(t.toChatId(),a,i):this.apiManager.invokeApi("messages.toggleDialogPin",{peer:this.appPeersManager.getInputDialogPeerById(t),pinned:i}).then(o=>{const p=i?{pinned:i}:{};this.apiUpdatesManager.saveUpdate({_:"updateDialogPinned",peer:this.appPeersManager.getDialogPeer(t),folder_id:s,pFlags:p})})}markDialogUnread(e,t){const a=this.getDialogOnly(e);if(!a)return Promise.reject();const s=t||a.pFlags?.unread_mark?void 0:!0;if(!s&&a.unread_count){const n=this.readHistory(e,a.top_message);if(!a.pFlags.unread_mark)return n}return this.apiManager.invokeApi("messages.markDialogUnread",{peer:this.appPeersManager.getInputDialogPeerById(e),unread:s}).then(()=>{const n=s?{unread:s}:{};this.onUpdateDialogUnreadMark({_:"updateDialogUnreadMark",peer:this.appPeersManager.getDialogPeer(e),pFlags:n})})}migrateChecks(e,t){if(!this.getMigration(e)&&this.appChatsManager.hasChat(t.toChatId())){const a=this.appChatsManager.getChat(e.toChatId());a?.migrated_to&&a.migrated_to.channel_id===t.toChatId()&&(this.migratedFromTo[e]=t,this.migratedToFrom[t]=e,this.rootScope.dispatchEvent("dialog_migrate",{migrateFrom:e,migrateTo:t}),this.dialogsStorage.dropDialogWithEvent(e))}}canMessageBeEdited(e,t){if(e?.pFlags?.is_outgoing)return!1;const a=["messageMediaPhoto","messageMediaDocument","messageMediaWebPage"];return t==="poll"&&a.push("messageMediaPoll"),!(!e||e._!=="message"||e.deleted||e.fwd_from||e.via_bot_id||e.media&&a.indexOf(e.media._)===-1||e.fromId&&this.appUsersManager.isBot(e.fromId)||e.media?._==="messageMediaDocument"&&(e.media.document.sticker||e.media.document.type==="round"))}async canEditMessage(e,t="text"){if(!e||!this.canMessageBeEdited(e,t))return!1;if(this.getMessagePeer(e)===this.appUsersManager.getSelf().id)return!0;const{peerId:a}=e;return!(!(this.appPeersManager.isBroadcast(a)?this.appChatsManager.hasRights(a.toChatId(),"edit_messages"):(a.isAnyChat()&&t==="text"?!this.getMigration(e.peerId)?.next&&(this.appChatsManager.hasRights(a.toChatId(),"send_plain")||this.appChatsManager.hasRights(a.toChatId(),"send_media")):!0)&&e.pFlags.out)||e.peer_id._!=="peerChannel"&&e.date<ve(!0)-(await this.apiManager.getConfig()).edit_time_limit&&e.media?._!=="messageMediaPoll")}canDeleteMessage(e){return e&&(e.peerId.isUser()||e.pFlags.out||this.appChatsManager.getChat(e.peerId.toChatId())._==="chat"||this.appChatsManager.hasRights(e.peerId.toChatId(),"delete_messages"))&&(!e.pFlags.is_outgoing||!!e.error)}getReplyKeyboard(e){return this.getHistoryStorage(e).replyMarkup}mergeReplyKeyboard(e,t){if(!t)return!1;const a=t.reply_markup;if(!a&&!t.pFlags?.out&&!t.action||a?._==="replyInlineMarkup")return!1;const s=e.replyMarkup;if(a)return s&&s.mid>=t.mid||a.pFlags.selective?!1:(e.maxOutId&&t.mid<e.maxOutId&&a.pFlags.single_use&&(a.pFlags.hidden=!0),a.mid=t.mid,a._!=="replyKeyboardHide"&&(a.fromId=this.appPeersManager.getPeerId(t.from_id||t.peer_id)),e.replyMarkup=a,!0);if(t.pFlags.out)if(s){if(s.pFlags.single_use&&!s.pFlags.hidden&&(t.mid>s.mid||t.pFlags.is_outgoing)&&t.message)return s.pFlags.hidden=!0,!0}else(!e.maxOutId||t.mid>e.maxOutId)&&(e.maxOutId=t.mid);return t.action?._==="messageActionChatDeleteUser"&&(s?t.action.user_id===s.fromId:this.appUsersManager.isBot(t.action.user_id))?(e.replyMarkup={_:"replyKeyboardHide",mid:t.mid,pFlags:{}},!0):!1}getSearchStorage(e,t){var a,s;return(s=(a=this.searchesStorage)[e]??(a[e]={}))[t]??(s[t]=this.createHistoryStorage("search"))}getSearchCounters(e,t,a=!0,s){if(e=this.appPeersManager.getPeerMigratedTo(e)||e,this.appPeersManager.isPeerRestricted(e))return Promise.resolve(t.map(d=>({_:"messages.searchCounter",pFlags:{},filter:d,count:0})));const n=this.getMigration(e),i="messages.getSearchCounters",o=(a?this.apiManager.invokeApiCacheable:this.apiManager.invokeApi).bind(this.apiManager),p=o(i,{peer:this.appPeersManager.getInputPeerById(e),filters:t,top_msg_id:s?K(s):void 0});if(n){const d=o(i,{peer:this.appPeersManager.getInputPeerById(n.prev),filters:t});return Promise.all([p,d]).then(([f,c])=>f.map((h,y)=>({...h,count:h.count+c[y].count})))}return p}filterMessagesByInputFilterFromStorage(e,t,a,s){const n=this.getMessagesStorage(a);return no(e,t.map(i=>n.get(i)),s)}subscribeRepliesThread(e,t){const a=e+"_"+t;for(const s in this.threadsToReplies)if(this.threadsToReplies[s]===a)return;this.getDiscussionMessage(e,t)}generateThreadServiceStartMessage(e){const t=e.peerId+"_"+e.mid;if(this.threadsServiceMessagesIdsStorage[t])return;const a=this.appPeersManager.isChannel(e.peerId)?e.peerId.toChatId():void 0,s=K(Math.max(...this.getMidsByMessage(e))),n={_:"messageService",pFlags:{is_single:!0},id:this.appMessagesIdsManager.generateTempMessageId(s,a),date:e.date,from_id:{_:"peerUser",user_id:ct},peer_id:e.peer_id,action:{_:"messageActionDiscussionStarted"},reply_to:this.generateReplyHeader(e.peerId,e.id)};this.saveMessages([n],{isOutgoing:!0}),this.threadsServiceMessagesIdsStorage[t]=n.mid}getThreadServiceMessageId(e,t){return this.threadsServiceMessagesIdsStorage[e+"_"+t]}getDiscussionMessage(e,t){return this.apiManager.invokeApiSingle("messages.getDiscussionMessage",{peer:this.appPeersManager.getInputPeerById(e),msg_id:K(t)}).then(a=>{this.appChatsManager.saveApiChats(a.chats),this.appUsersManager.saveApiUsers(a.users),this.saveMessages(a.messages);const s=this.getMessageWithReplies(a.messages[0]),n=s.peerId+"_"+s.mid,i=s.peerId.toChatId();this.generateThreadServiceStartMessage(s);const o=this.getHistoryStorage(s.peerId,s.mid),p=a.max_id=this.appMessagesIdsManager.generateMessageId(a.max_id,i)||0;a.read_inbox_max_id=o.readMaxId=this.appMessagesIdsManager.generateMessageId(a.read_inbox_max_id??s.mid,i),a.read_outbox_max_id=o.readOutboxMaxId=this.appMessagesIdsManager.generateMessageId(a.read_outbox_max_id,i)||0;const d=o.history.first;return o.maxId&&o.maxId<p&&d.isEnd(ze.Bottom)&&d.unsetEnd(ze.Bottom),o.maxId=p,this.threadsToReplies[n]=e+"_"+t,s})}handleNewMessage(e){this.rootScope.dispatchEvent("history_multiappend",e)}scheduleHandleNewDialogs(e,t){if(e!==void 0){let a=this.newDialogsToHandle.get(e);a||this.newDialogsToHandle.set(e,a={});const s=typeof t=="object";!t||s&&t._==="dialog"?a.dialog=t:(a.topics??(a.topics=new Map),s?a.topics.set(t.id,t):a.topics.set(t,void 0))}return this.newDialogsHandlePromise??(this.newDialogsHandlePromise=ft(0).then(()=>{this.newDialogsHandlePromise=void 0,this.handleNewDialogs()}))}async deleteMessagesInner(e,t,a,s){let n;if(e&&!s){const f=this.appChatsManager.getChat(e);if(!f.pFlags.creator&&!f.admin_rights?.pFlags?.delete_messages&&(t=t.filter(c=>!!this.getMessageByPeer(e.toPeerId(!0),c).pFlags.out),!t.length))return}const i=await this.apiManager.getConfig(),o=t.splice(i.forwarded_count_max,t.length-i.forwarded_count_max),p=t.map(f=>{const c=K(f);return this.appMessagesIdsManager.generateMessageId(c,e)===f&&c}).filter(Boolean);e?n=this.apiManager.invokeApi("channels.deleteMessages",{channel:this.appChatsManager.getChannelInput(e),id:p}).then(f=>{this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:e,messages:t,pts:f.pts,pts_count:f.pts_count})}):n=this.apiManager.invokeApi("messages.deleteMessages",{revoke:a,id:p}).then(f=>{this.apiUpdatesManager.processLocalUpdate({_:"updateDeleteMessages",messages:t,pts:f.pts,pts_count:f.pts_count})});const d=[n];return o.length&&d.push(this.deleteMessagesInner(e,o,a,!0)),Promise.all(d).then(xe)}deleteMessages(e,t,a){const s=this.appPeersManager.isChannel(e)?e.toChatId():void 0,i=this.appMessagesIdsManager.splitMessageIdsByChannels(t,s).map(([o,{mids:p}])=>this.deleteMessagesInner(o,p,a));return Promise.all(i)}readHistory(e,t=0,a,s=!1){if(this.log("readHistory:",e,t,a),!this.getReadMaxIdIfUnread(e,a)){if(a&&!s){const p=this.dialogsStorage.getForumTopic(e,a);K(p.read_inbox_max_id)||(s=!0)}if(!s){const p=this.appChatsManager.isForum(e.toChatId())&&a?this.dialogsStorage.getForumTopic(e,a):this.getDialogOnly(e);p&&this.isDialogUnread(p)&&(s=!0)}if(!s)return this.log("readHistory: isn't unread"),Promise.resolve()}const i=this.getHistoryStorage(e,a);if(i.triedToReadMaxId>=t)return Promise.resolve();let o;return a?(i.readPromise||(o=this.apiManager.invokeApi("messages.readDiscussion",{peer:this.appPeersManager.getInputPeerById(e),msg_id:K(a),read_max_id:K(t)})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadChannelDiscussionInbox",channel_id:e.toChatId(),top_msg_id:a,read_max_id:t})):this.appPeersManager.isChannel(e)?(i.readPromise||(o=this.apiManager.invokeApi("channels.readHistory",{channel:this.appChatsManager.getChannelInput(e.toChatId()),max_id:K(t)})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadChannelInbox",max_id:t,channel_id:e.toChatId(),still_unread_count:void 0,pts:void 0})):(i.readPromise||(o=this.apiManager.invokeApi("messages.readHistory",{peer:this.appPeersManager.getInputPeerById(e),max_id:K(t)}).then(p=>{this.apiUpdatesManager.processUpdateMessage({_:"updateShort",update:{_:"updatePts",pts:p.pts,pts_count:p.pts_count}})})),this.apiUpdatesManager.processLocalUpdate({_:"updateReadHistoryInbox",max_id:t,peer:this.appPeersManager.getOutputPeer(e),still_unread_count:void 0,pts:void 0,pts_count:void 0})),this.rootScope.dispatchEvent("notification_reset",this.appPeersManager.getPeerString(e)),i.readPromise?i.readPromise:(i.triedToReadMaxId=t,o.finally(()=>{delete i.readPromise;const{readMaxId:p}=i;this.log("readHistory: promise finally",t,p),p>t&&this.readHistory(e,p,a,!0)}),i.readPromise=o)}readAllHistory(e,t,a=!1){const s=this.getHistoryStorage(e,t);s.maxId&&this.readHistory(e,s.maxId,t,a)}getUnreadMentionsKey(e,t){return e+(t?`_${t}`:"")}fixDialogUnreadMentionsIfNoMessage(e,t){this.dialogsStorage.getDialogOrTopic(e,t)?.unread_mentions_count&&this.reloadConversationOrTopic(e)}modifyCachedMentions(e,t,a,s){const n=this.unreadMentions[this.getUnreadMentionsKey(e,s)];n&&(a?n.first.isEnd(ze.Top)&&n.insertSlice([t]):n.delete(t))}fixUnreadMentionsCountIfNeeded(e,t,a){const s=this.dialogsStorage.getDialogOrTopic(e,a);!t.length&&s?.unread_mentions_count&&this.reloadConversationOrTopic(e)}goToNextMention(e,t){var d;const a=this.getUnreadMentionsKey(e,t),s=this.goToNextMentionPromises[a];if(s)return s;const n=(d=this.unreadMentions)[e]??(d[e]=new Jt),i=n.length,o=n.first.isEnd(ze.Top);if(!i&&o)return this.fixUnreadMentionsCountIfNeeded(e,n,t),Promise.resolve();let p=Promise.resolve();return!o&&i<25&&(p=this.loadNextMentions(e,t)),this.goToNextMentionPromises[a]=p.then(()=>{const f=n.last,c=f&&f[f.length-1];if(c)return n.delete(c),c;this.fixUnreadMentionsCountIfNeeded(e,n,t)}).finally(()=>{delete this.goToNextMentionPromises[a]})}loadNextMentions(e,t){const a=this.unreadMentions[e],s=a.first[0]||1,n=50,i=-n,o=n;return this.getUnreadMentions(e,s,i,o,void 0,void 0,t).then(p=>{this.mergeHistoryResult({slicedArray:a,historyResult:p,offsetId:s===1?0:s,limit:o,addOffset:i,peerId:e})})}getUnreadMentions(e,t,a,s,n=0,i=0,o){return this.apiManager.invokeApiSingleProcess({method:"messages.getUnreadMentions",params:{peer:this.appPeersManager.getInputPeerById(e),offset_id:K(t),add_offset:a,limit:s,max_id:K(n),min_id:K(i),top_msg_id:o?K(o):void 0},processResult:p=>(this.appUsersManager.saveApiUsers(p.users),this.appChatsManager.saveApiChats(p.chats),this.saveMessages(p.messages),p)})}readMessages(e,t){if(!t.length)return Promise.resolve();t=t.map(n=>K(n));let a,s;if(e.isAnyChat()&&this.appPeersManager.isChannel(e)){const n=e.toChatId();s={_:"updateChannelReadMessagesContents",channel_id:n,messages:t},a=this.apiManager.invokeApi("channels.readMessageContents",{channel:this.appChatsManager.getChannelInput(n),id:t})}else s={_:"updateReadMessagesContents",messages:t,pts:void 0,pts_count:void 0},a=this.apiManager.invokeApi("messages.readMessageContents",{id:t}).then(n=>{s.pts=n.pts,s.pts_count=n.pts_count,this.apiUpdatesManager.processLocalUpdate(s)});return this.apiUpdatesManager.processLocalUpdate(s),a}createHistoryStorage(e){return{count:null,history:new Jt,type:e}}getHistoryStorage(e,t){var a,s,n;return t?(s=(a=this.threadsStorage)[e]??(a[e]={}))[t]??(s[t]=this.createHistoryStorage("replies")):(n=this.historiesStorage)[e]??(n[e]=this.createHistoryStorage("history"))}getHistoryStorageTransferable(e,t){const a=this.getHistoryStorage(e,t),{count:s,history:n,maxId:i,readMaxId:o,readOutboxMaxId:p,maxOutId:d,replyMarkup:f}=a;return{count:s,history:void 0,historySerialized:n.toJSON(),maxId:i,readMaxId:o,readOutboxMaxId:p,maxOutId:d,replyMarkup:f}}getNotifyPeerSettings(e,t){const a=this.appPeersManager.getInputNotifyPeerById({peerId:e,ignorePeerId:!0,threadId:t});return Promise.all([this.appNotificationsManager.getNotifyPeerTypeSettings(),this.appNotificationsManager.getNotifySettings(a)]).then(([s,n])=>({muted:this.appNotificationsManager.isPeerLocalMuted({peerId:e,respectType:!0,threadId:t}),peerTypeNotifySettings:n}))}getUpdateAfterReloadKey(e,t){return e+(t?"_"+t:"")}handleNewUpdateAfterReload(e,t,a){var n,i;const s=(n=this.newUpdatesAfterReloadToHandle)[i=this.getUpdateAfterReloadKey(e,a)]??(n[i]=new Set);if(s.has(t)){this.log.error("here we go again",e);return}t.ignoreExisting=!0,s.add(t),this.scheduleHandleNewDialogs(e,a)}setDialogToStateIfMessageIsTop(e){this.isMessageIsTopMessage(e)&&this.dialogsStorage.setDialogToState(this.getDialogOnly(e.peerId))}isMessageIsTopMessage(e){const t=this.getDialogOnly(e.peerId);return t&&t.top_message===e.mid}updateMessageRepliesIfNeeded(e){try{const t=this.getThreadKey(e);if(t){const a=this.threadsToReplies[t];if(a){const[s,n]=a.split("_");this.updateMessage(s.toPeerId(),+n,"replies_updated")}}}catch(t){this.log.error("incrementMessageReplies err",t,e)}}getThreadKey(e){let t="";if(e?.peerId?.isAnyChat()){const a=ja(e,this.appChatsManager.isForum(e.peerId.toChatId()));a&&(t=e.peerId+"_"+a)}return t}updateMessage(e,t,a){return this.reloadMessages(e,t,!0).then(()=>{const n=this.getMessageByPeer(e,t);if(n)return a&&this.rootScope.dispatchEvent(a,n),n})}checkPendingMessage(e){const t=this.pendingByMessageId[e.mid];let a;if(t){const s=this.pendingByRandomId[t];(a=this.finalizePendingMessage(t,e))&&this.rootScope.dispatchEvent("history_update",{storageKey:s.storage.key,message:e,sequential:s.sequential}),delete this.pendingByMessageId[e.mid]}return a}mutePeer(e){if(!(e=this.appNotificationsManager.validatePeerSettings(e)))return;const{peerId:t,muteUntil:a,threadId:s}=e,n={_:"inputPeerNotifySettings"};n.mute_until=a;const i=this.appPeersManager.getInputPeerById(t);return this.appNotificationsManager.updateNotifySettings(s?{_:"inputNotifyForumTopic",peer:i,top_msg_id:K(s)}:{_:"inputNotifyPeer",peer:i},n)}togglePeerMute({peerId:e,mute:t,threadId:a}){return t===void 0&&(t=!this.appNotificationsManager.isPeerLocalMuted({peerId:e,respectType:!1,threadId:a})),this.mutePeer({peerId:e,muteUntil:t?Qs:0,threadId:a})}findPeerIdByMids(e){for(let t=e.length,a=t-1;a>=0;--a){const s=e[a],n=this.getMessageById(s);if(n)return n.peerId}}canSendToPeer(e,t,a="send_messages"){if(this.appPeersManager.isPeerRestricted(e))return!1;if(e.isAnyChat()){const s=e.toChatId();if(t&&this.dialogsStorage.getForumTopic(e,t)?.pFlags?.closed&&!this.appChatsManager.hasRights(s,"manage_topics"))return!1;const n=this.appChatsManager.getChat(s);return this.appChatsManager.hasRights(s,a,void 0,!!t)&&(!n.pFlags.left||!!t)}else return this.appUsersManager.canSendToUser(e)}finalizePendingMessage(e,t){const a=this.pendingByRandomId[e];if(!a)return;const{peerId:s,tempId:n,threadId:i,storage:o}=a;[this.getHistoryStorage(s),i?this.getHistoryStorage(s,i):void 0].filter(Boolean).forEach(d=>{d.history.delete(n)});const p=this.getMessageFromStorage(o,n);return p&&(delete t.pFlags.is_outgoing,delete t.pending,delete t.error,delete t.random_id,delete t.send),this.rootScope.dispatchEvent("messages_pending"),delete this.pendingByRandomId[e],this.finalizePendingMessageCallbacks(o,n,t),p}finalizePendingMessageCallbacks(e,t,a){const s=this.tempFinalizeCallbacks[t];if(s!==void 0){for(const i in s){const{deferred:o,callback:p}=s[i];p(a).then(o.resolve,o.reject)}delete this.tempFinalizeCallbacks[t]}if(a.media){const{photo:i,document:o}=a.media;if(i){const p=this.appPhotosManager.getPhoto(""+t);if(p){const d=i.sizes[i.sizes.length-1],f=this.thumbsStorage.getCacheContext(i,d.type),c=this.thumbsStorage.getCacheContext(p,sa);Object.assign(f,c);const g=i.sizes[i.sizes.length-1],h=wn(i,g);Ta(h.location)}}else if(o){const p=this.appDocsManager.getDoc(""+t);if(p){const d=this.thumbsStorage.getCacheContext(p);if(p.type&&p.type!=="sticker"&&p.mime_type!=="image/gif"&&d.url){const f=this.thumbsStorage.getCacheContext(o);Object.assign(f,d),io(o)}}}else a.media.poll&&(delete this.appPollsManager.polls[t],delete this.appPollsManager.results[t])}const n=this.getMessageFromStorage(e,t);this.deleteMessageFromStorage(e,t),!n.reply_markup&&a.reply_markup&&setTimeout(()=>{this.getMessageFromStorage(e,a.mid)&&this.rootScope.dispatchEvent("message_edit",{storageKey:e.key,peerId:a.peerId,mid:a.mid,message:a})},0),this.handleReleasingMessage(n,e),this.rootScope.dispatchEvent("message_sent",{storageKey:e.key,tempId:t,tempMessage:n,mid:a.mid,message:a})}incrementMaxSeenId(e){if(!e||!(!this.maxSeenId||e>this.maxSeenId))return!1;this.maxSeenId=e,this.appStateManager.pushToState("maxSeenMsgId",e),this.apiManager.invokeApi("messages.receivedMessages",{max_id:K(e)})}async getMessageReactionsListAndReadParticipants(e,t,a,s,n,i){const o={reactions:[],count:0,next_offset:void 0},p=await this.canViewMessageReadParticipants(e);return t??(t=p?100:50),Promise.all([p&&!a&&!n?this.getMessageReadParticipants(e.peerId,e.mid).catch(()=>[]):[],e.reactions?.recent_reactions?.length&&!i?this.appReactionsManager.getMessageReactionsList(e.peerId,e.mid,t,a,s).catch(d=>o):o]).then(([d,f])=>{const c=d.slice();bt(c,({user_id:h},y,P)=>{f.reactions.some(D=>this.appPeersManager.getPeerId(D.peer_id)===h.toPeerId())&&P.splice(y,1)});let g=f.reactions.map(h=>({peerId:this.appPeersManager.getPeerId(h.peer_id),reaction:h.reaction,date:h.date}));return g=g.concat(c.map(({user_id:h,date:y})=>({date:y,peerId:h.toPeerId()}))),{reactions:f.reactions,reactionsCount:f.count,readParticipantDates:d,combined:g,nextOffset:f.next_offset}})}getMessageReadParticipants(e,t){return this.apiManager.invokeApiSingle("messages.getMessageReadParticipants",{peer:this.appPeersManager.getInputPeerById(e),msg_id:K(t)}).then(a=>(a.forEach(s=>s.user_id=s.user_id.toUserId()),a))}async canViewMessageReadParticipants(e){if(e?._!=="message"||e.pFlags.is_outgoing||!e.pFlags.out||!this.appPeersManager.isAnyGroup(e.peerId))return!1;const t=this.appChatsManager.getChat(e.peerId.toChatId()),a=await this.apiManager.getAppConfig();return t.participants_count<=a.chat_read_mark_size_threshold&&ve(!0)-e.date<a.chat_read_mark_expire_period}incrementMessageViews(e,t){if(t.length)return this.apiManager.invokeApiSingle("messages.getMessagesViews",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(a=>K(a)),increment:!0}).then(a=>{const s=new Array(t.length);for(let n=0,i=t.length;n<i;++n)s[n]={_:"updateChannelMessageViews",channel_id:e.toChatId(),id:t[n],views:a.views[n].views};this.apiUpdatesManager.processUpdateMessage({_:"updates",updates:s,chats:a.chats,users:a.users})})}notifyAboutMessage(e,t={}){const a=this.getMessagePeer(e);if(this.appPeersManager.isPeerRestricted(a))return;const s=da.getTabs();let n=s.find(o=>{const{chatPeerIds:p}=o.state;return p[p.length-1]===a});!n&&s.length&&(s.sort((o,p)=>o.state.idleStartTime-p.state.idleStartTime),n=s[0].state.idleStartTime?s[s.length-1]:s[0]),mt.getInstance().invokeVoid("notificationBuild",{message:e,...t},n?.source)}getScheduledMessagesStorage(e){var t;return(t=this.scheduledMessagesStorage)[e]??(t[e]=this.createMessageStorage(e,"scheduled"))}getScheduledMessageByPeer(e,t){return this.getMessageFromStorage(this.getScheduledMessagesStorage(e),t)}getScheduledMessages(e){if(!this.canSendToPeer(e))return;const t=this.getScheduledMessagesStorage(e);return t.size?[...t.keys()]:this.apiManager.invokeApiSingle("messages.getScheduledHistory",{peer:this.appPeersManager.getInputPeerById(e),hash:""}).then(a=>{if(a._!=="messages.messagesNotModified"){this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats);const s=this.getScheduledMessagesStorage(e);return this.saveMessages(a.messages,{storage:s,isScheduled:!0}),[...s.keys()]}return[]})}sendScheduledMessages(e,t){return this.apiManager.invokeApi("messages.sendScheduledMessages",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(a=>K(a))}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}deleteScheduledMessages(e,t){return this.apiManager.invokeApi("messages.deleteScheduledMessages",{peer:this.appPeersManager.getInputPeerById(e),id:t.map(a=>K(a))}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a)})}getMessageWithReplies(e){return this.filterMessages(e,t=>!!t.replies)[0]}getMessageWithCommentReplies(e){if(e.peerId!==$s){e=this.getMessageWithReplies(e);const t=e?.replies;if(!(t&&t.pFlags.comments&&t.channel_id.toChatId()!==si))return}return e}isFetchIntervalNeeded(e){return e.isAnyChat()&&(!this.appChatsManager.isInChat(e.toChatId())||this.appChatsManager.isForum(e.toChatId()))}getMigration(e){const t=this.migratedFromTo[e],a=this.migratedToFrom[e];return t||a?{next:t,prev:a}:void 0}getHistory(e){e.offsetId??(e.offsetId=0),e.addOffset===void 0&&(e.addOffset=0,e.backLimit&&(e.addOffset=-e.backLimit,e.limit+=e.backLimit)),e.historyStorage??(e.historyStorage=e.inputFilter?this.createHistoryStorage("search"):this.getHistoryStorage(e.peerId,e.threadId));const{historyStorage:t,limit:a,addOffset:s,offsetId:n}=e;if(this.appPeersManager.isPeerRestricted(e.peerId)){const o=t.history.first;o.setEnd(ze.Both);const p=o.slice(0,0);return p.setEnd(ze.Both),{count:0,history:Array.from(p),isEnd:p.getEnds(),offsetIdOffset:0}}const i=t.history.sliceMe(n,s,a);return i&&(i.slice.length===a||(i.fulfilled&ze.Both)===ze.Both)?{count:t.count,history:Array.from(i.slice),isEnd:i.slice.getEnds(),offsetIdOffset:i.offsetIdOffset}:this.fillHistoryStorage(e).then(o=>{if(e.inputFilter){const f=o.messages.map(c=>c.mid);return{count:o.count??t.count,history:f,isEnd:t.history.slice.getEnds(),offsetIdOffset:o?.offset_id_offset||0,nextRate:o?.next_rate,messages:o.messages}}const p=t.history.sliceMe(n,s,a),d=p?.slice||t.history.constructSlice();return{count:t.count,history:Array.from(d),isEnd:d.getEnds(),offsetIdOffset:p?.offsetIdOffset||t.count}})}isHistoryResultEnd({historyResult:e,limit:t,addOffset:a,offsetId:s,offsetPeerId:n,inputFilter:i,peerId:o}){const{offset_id_offset:p,messages:d}=e,f=d.map(({mid:R})=>R),c=e.count||d.length,g=a<0?t+a:t,h=Math.abs(a);!o&&i&&(s=0);let y=p,P=!1,D=!s,v=d.length,k=0,L=!1;const w=s&&K(s);if(w){let R=0;for(const q=f.length;R<q&&!(s>f[R]);++R);L=f.includes(s),v=d.length-R,k=R}return y!==void 0?(P=y>=c-g||c<g,D=!y||a<0&&y+a<=0):w?(g&&(P=v<g),h&&(D=k<h),(P||D)&&(y=P?c-v:k-+L)):d.length>=c&&(P=!0,D=!0),y??(y=0),{count:c,offsetIdOffset:y,isTopEnd:P,isBottomEnd:D,mids:f,topWasMeantToLoad:g,bottomWasMeantToLoad:h,topLoaded:v,bottomLoaded:k}}mergeHistoryResult(e){const{slicedArray:t,historyResult:a,offsetId:s,peerId:n,historyStorage:i}=e,{messages:o}=a,p=this.isHistoryResultEnd(e),{count:d,offsetIdOffset:f,mids:c}=p,g=this.getMigration(n);if(g&&i&&i.type!=="replies"&&(g.prev?p.isTopEnd=!1:g.next&&p.isBottomEnd&&(c.unshift(this.appMessagesIdsManager.generateMessageId(1,g.next.toChatId())),p.isBottomEnd=!1)),s&&K(s)&&!c.includes(s)&&f<d){let y=0;for(const P=c.length;y<P&&!(s>c[y]);++y);c.splice(y,0,s)}const h=t.insertSlice(c)||t.slice;return p.isTopEnd&&h.setEnd(ze.Top),p.isBottomEnd&&h.setEnd(ze.Bottom),{slice:h,mids:c,messages:o,...p}}async fillHistoryStorage(e){const{offsetId:t,historyStorage:a,inputFilter:s,recursion:n}=e;e.recursion=!0;let{peerId:i}=e;const o=a.maxId,p=this.middleware.get();let d=this.getMigration(i),f=i;t&&d?.prev&&K(t)===t&&(f=d.prev),i=e.peerId=this.appPeersManager.getPeerMigratedTo(i)||i;const c=f!==i,g=await this.requestHistory({...e,peerId:f});if(!p())return;const h=this.mergeHistoryResult({...e,slicedArray:a.history,historyResult:g,peerId:f}),{count:y,isBottomEnd:P,isTopEnd:D,slice:v,messages:k,topWasMeantToLoad:L,bottomWasMeantToLoad:w,topLoaded:R,bottomLoaded:q}=h;if(c||(a.count=y),!s)for(let pe=0,S=k.length;pe<S;++pe){const A=k[pe];this.mergeReplyKeyboard(a,A)&&this.rootScope.dispatchEvent("history_reply_markup",{peerId:i})}if(!s&&P){const pe=v[0];if(a.maxId===o){const S=a.history.first;S!==v&&a.history.deleteSlice(S),a.maxId!==pe&&(a.maxId=v[0],this.reloadConversation(i))}}const J=k[0],Y=k[k.length-1];if(!(!s&&!P&&J?.grouped_id&&(await this.getHistory({...e,offsetId:J.mid,limit:20,addOffset:-10}),!p()))&&!(!s&&!D&&Y?.grouped_id&&Y.grouped_id!==J?.grouped_id&&(await this.getHistory({...e,offsetId:Y.mid,limit:20,addOffset:-10}),!p()))){if(e.threadId)return g;if(d??(d=this.getMigration(i)),d?.prev&&L!==R&&!D){const pe=L-R,S=await this.fillHistoryStorage({...e,peerId:d.prev,offsetId:0,limit:pe,addOffset:0});g.messages.push(...S.messages);const A=S.count??S.messages.length;g.count=(g.count||0)+A}else if((d?.next||c)&&w!==q&&!P){const pe=w-q,S=await this.fillHistoryStorage({...e,offsetId:this.appMessagesIdsManager.generateMessageId(1,i.toChatId()),limit:pe,addOffset:-pe});g.messages.unshift(...S.messages);const A=S.count??S.messages.length;g.count=(g.count||0)+A;const O=g.offset_id_offset||0;g.offset_id_offset=O+A}else if(d&&s&&!n){const pe=await this.requestHistory({...e,peerId:c?i:d.prev,offsetId:0,limit:1}),S=pe.count??pe.messages.length;g.count=(g.count||0)+S;const A=g.offset_id_offset||0;g.offset_id_offset=A+S}if(p())return g}}requestHistory({peerId:e,offsetId:t=0,limit:a=50,addOffset:s=0,offsetDate:n=0,threadId:i=0,offsetPeerId:o,nextRate:p,folderId:d,query:f,inputFilter:c,minDate:g,maxDate:h}){const y=t&&this.getMessageByPeer(o||e,t);o??(o=y?.peerId),t=K(t)||0,i=K(i)||0,g=g?g/1e3|0:0,h=h?h/1e3|0:0;let P,D;const v={peer:this.appPeersManager.getInputPeerById(e),offset_id:t,offset_date:n,add_offset:s,limit:a,max_id:0,min_id:0,hash:0};if(c&&e&&!p&&d===void 0){const L={...v,q:f||"",filter:c,min_date:g,max_date:h,top_msg_id:i};D="messages.search",P=L}else if(c){const L={...v,q:f||"",filter:c,min_date:g,max_date:h,offset_rate:p,offset_peer:this.appPeersManager.getInputPeerById(o),folder_id:d};D="messages.searchGlobal",P=L}else if(i){const L={...v,msg_id:i};D="messages.getReplies",P=L}else{const L={...v};D="messages.getHistory",P=L}return this.apiManager.invokeApiSingle(D,P,{noErrorBox:!0}).then(L=>{Ae&&this.log("requestHistory result:",e,L,t,a,s);const{messages:w}=L;this.appUsersManager.saveApiUsers(L.users),this.appChatsManager.saveApiChats(L.chats),this.saveMessages(w),"pts"in L&&this.apiUpdatesManager.addChannelState(e.toChatId(),L.pts);let R=w.length;return L.count,R&&!w[R-1]&&(w.splice(R-1,1),R--),L},L=>{switch(L.type){case"CHANNEL_PRIVATE":let w=this.appChatsManager.getChat(e.toChatId());w._==="channel"&&(w={_:"channelForbidden",id:w.id,access_hash:w.access_hash,title:w.title,pFlags:w.pFlags}),this.apiUpdatesManager.processUpdateMessage({_:"updates",updates:[{_:"updateChannel",channel_id:w.id}],chats:[w],users:[]});break}throw L})}fetchSingleMessages(){return this.fetchSingleMessagesPromise?this.fetchSingleMessagesPromise:this.fetchSingleMessagesPromise=ft(0).then(()=>{const e=[];for(const[t,a]of this.needSingleMessages){const s=[...a.keys()],n=s.map(d=>({_:"inputMessageID",id:K(d)}));let i;const o=this.appPeersManager.isChannel(t)?t.toChatId():void 0;o?i=this.apiManager.invokeApiSingle("channels.getMessages",{channel:this.appChatsManager.getChannelInput(o),id:n}):i=this.apiManager.invokeApiSingle("messages.getMessages",{id:n});const p=i.then(d=>{this.appUsersManager.saveApiUsers(d.users),this.appChatsManager.saveApiChats(d.chats);const f=this.saveMessages(d.messages);for(let c=0;c<f.length;++c){const g=f[c];if(!g)continue;const h=this.appMessagesIdsManager.generateMessageId(g.id,o);a.get(h).resolve(g),a.delete(h)}if(a.size)for(const[c,g]of a)g.resolve(this.generateEmptyMessage(c))}).finally(()=>{this.rootScope.dispatchEvent("messages_downloaded",{peerId:t,mids:s})});e.push(p)}return this.needSingleMessages.clear(),Promise.all(e).then(xe,xe).then(()=>{this.fetchSingleMessagesPromise=void 0,this.needSingleMessages.size&&this.fetchSingleMessages()})})}reloadMessages(e,t,a){if(Array.isArray(t))return Promise.all(t.map(n=>this.reloadMessages(e,n,a)));e.isAnyChat()&&this.appMessagesIdsManager.isLegacyMessageId(t)&&(e=ct);const s=this.getMessageByPeer(e,t);if(s&&!a)return this.rootScope.dispatchEvent("messages_downloaded",{peerId:e,mids:[t]}),Promise.resolve(s);{let n=this.needSingleMessages.get(e);n||this.needSingleMessages.set(e,n=new Map);let i=n.get(t);return i||(i=Me(),n.set(t,i),this.fetchSingleMessages(),i)}}getExtendedMedia(e,t){let a=this.extendedMedia.get(e);a||this.extendedMedia.set(e,a=new Map);const s=Me(),n=[],i=t.map(o=>{let p=a.get(o);return p||(a.set(o,p=s),n.push(o),p.then(()=>{a.delete(o),!a.size&&this.extendedMedia.get(e)===a&&this.extendedMedia.delete(e)})),p});return n.length?this.apiManager.invokeApi("messages.getExtendedMedia",{peer:this.appPeersManager.getInputPeerById(e),id:n.map(o=>K(o))}).then(o=>{this.apiUpdatesManager.processUpdateMessage(o),s.resolve()}):s.resolve(),Promise.all(i)}fetchMessageReplyTo(e){if(!e.reply_to_mid)return Promise.resolve(this.generateEmptyMessage(0));const t=e.reply_to.reply_to_peer_id?this.appPeersManager.getPeerId(e.reply_to.reply_to_peer_id):e.peerId;return this.reloadMessages(t,e.reply_to_mid).then(a=>{if(a||(e=this.getMessageByPeer(e.peerId,e.mid),delete e.reply_to_mid),e._==="messageService"){const s=e.peerId;this.rootScope.dispatchEvent("message_edit",{storageKey:`${s}_history`,peerId:s,mid:e.mid,message:e}),this.isMessageIsTopMessage(e)&&this.rootScope.dispatchEvent("dialogs_multiupdate",new Map([[s,{dialog:this.getDialogOnly(s)}]]))}return a})}getTypingKey(e,t){return t?`${e}_${t}`:e}setTyping(e,t,a,s){s&&!this.appPeersManager.isForum(e)&&(s=void 0);const n=this.getTypingKey(e,s);let i=this.typings[n];return!e||!this.canSendToPeer(e)||e===this.appPeersManager.peerId||!a&&i?.action?._===t._?Promise.resolve(!1):(i?.timeout&&clearTimeout(i.timeout),i=this.typings[n]={action:t},this.apiManager.invokeApi("messages.setTyping",{peer:this.appPeersManager.getInputPeerById(e),action:t,top_msg_id:s?K(s):void 0}).finally(()=>{i===this.typings[n]&&(i.timeout=Pe.setTimeout(()=>{delete this.typings[n]},6e3))}))}handleReleasingMessage(e,t){const a=e.media;if(a){const s=a.webpage||a,n=s.photo||s.document;if(n?.file_reference&&this.referenceDatabase.deleteContext(n.file_reference,{type:"message",peerId:e.peerId,messageId:e.mid}),"webpage"in a&&a.webpage){const i=this.getScheduledMessagesStorage(e.peerId)===t,o=this.appWebPagesManager.getMessageKeyForPendingWebPage(e.peerId,e.mid,i);this.appWebPagesManager.deleteWebPageFromPending(a.webpage,o)}a.poll&&this.appPollsManager.updatePollToMessage(e,!1)}}handleDeletedMessages(e,t,a){const s={count:0,unread:0,unreadMentions:0,msgs:new Set};for(const n of a){const i=this.getMessageFromStorage(t,n);if(!i){this.fixDialogUnreadMentionsIfNoMessage(e);continue}this.handleReleasingMessage(i,t),this.updateMessageRepliesIfNeeded(i),!i.pFlags.out&&!i.pFlags.is_outgoing&&i.pFlags.unread&&(++s.unread,this.rootScope.dispatchEvent("notification_cancel","msg"+n),i.pFlags.mentioned&&(++s.unreadMentions,this.modifyCachedMentions(e,n,!1))),++s.count,s.msgs.add(n),i.deleted=!0;const o=i.grouped_id;if(o){const p=this.groupedMessagesStorage[o];p&&(this.deleteMessageFromStorage(p,n),s.albums||(s.albums={}),(s.albums[o]||(s.albums[o]=new Set)).add(n),p.size||(delete s.albums,delete this.groupedMessagesStorage[o]))}this.deleteMessageFromStorage(t,n)}if(s.albums)for(const n in s.albums)this.dispatchAlbumEdit(n,t,[...s.albums[n]]);return s}handleEditedMessage(e,t,a){if(e._==="message"){if(e.media?.webpage){const n=this.appWebPagesManager.getMessageKeyForPendingWebPage(e.peerId,e.mid,!!e.pFlags.is_scheduled);this.appWebPagesManager.deleteWebPageFromPending(e.media.webpage,n)}const s=e.grouped_id;s&&this.dispatchAlbumEdit(s,a,[])}}dispatchAlbumEdit(e,t,a){const n=this.getMidsByAlbum(e).map(i=>this.getMessageFromStorage(t,i));this.rootScope.dispatchEvent("album_edit",{peerId:n[0].peerId,groupId:e,deletedMids:a||[],messages:n})}getDialogUnreadCount(e){let t=e.unread_count;if(!this.dialogsStorage.isTopic(e)&&this.appPeersManager.isForum(e.peerId)){const a=this.dialogsStorage.getForumUnreadCount(e.peerId);a instanceof Promise?t=0:t=a.count}return t||+!!e.pFlags?.unread_mark}isDialogUnread(e){return!!this.getDialogUnreadCount(e)}canForward(e){return e?._==="message"&&!e.pFlags.noforwards&&!this.appPeersManager.noForwards(e.peerId)}pushBatchUpdate(e,t,a,s){let n=this.batchUpdates[e];n||(n=this.batchUpdates[e]={callback:t,batch:new Map}),n.batch.has(a)||(n.batch.set(a,s?s():void 0),this.batchUpdatesDebounced())}getMessagesFromMap(e){const t=new Map;for(const[a,s]of e){const[n,i]=a.split("_"),o=this.getMessageByPeer(n.toPeerId(),+i);o&&t.set(o,s)}return t}saveDefaultSendAs(e,t){const a=this.appProfileManager.getCachedFullChat(e.toChatId());return a.default_send_as=this.appPeersManager.getOutputPeer(t),this.apiManager.invokeApi("messages.saveDefaultSendAs",{peer:this.appPeersManager.getInputPeerById(e),send_as:this.appPeersManager.getInputPeerById(t)})}sendBotRequestedPeer(e,t,a,s){return this.apiManager.invokeApi("messages.sendBotRequestedPeer",{peer:this.appPeersManager.getInputPeerById(e),msg_id:K(t),button_id:a,requested_peer:this.appPeersManager.getInputPeerById(s)}).then(n=>{this.apiUpdatesManager.processUpdateMessage(n)})}}function zt(r){const e=r.replace("input","");return e[0].toLowerCase()+e.slice(1)}class co extends ce{constructor(){super(...arguments),this.peerSettings={notifyPeer:{},notifyUsers:null,notifyChats:null,notifyBroadcasts:null,notifyForumTopic:{}},this.checkMuteUntil=()=>{this.checkMuteUntilTimeout!==void 0&&(clearTimeout(this.checkMuteUntilTimeout),this.checkMuteUntilTimeout=void 0);const e=ve(!0);let t=Qs;const a=n=>{if(n instanceof Promise)return!1;const i=n.mute_until;return i?i<=e?(n.mute_until=0,!0):(i<t&&(t=i),!1):!1};["notifyPeer","notifyForumTopic"].forEach(n=>{for(const i in this.peerSettings[n]){const o=this.peerSettings[n][i];if(a(o)){const[p,d]=i.split("_"),f=this.appPeersManager.getOutputPeer(p.toPeerId());this.apiUpdatesManager.saveUpdate({_:"updateNotifySettings",peer:d?{_:"notifyForumTopic",peer:f,top_msg_id:+d}:{_:"notifyPeer",peer:f},notify_settings:o})}}});const s=Math.min(18e5,(t-e)*1e3);this.checkMuteUntilTimeout=Pe.setTimeout(this.checkMuteUntil,s)}}after(){return this.checkMuteUntilThrottled=Ht(this.checkMuteUntil,1e3,!1),this.apiUpdatesManager.addMultipleEventsListeners({updateNotifySettings:e=>{const{peer:t}=e,a=t._==="notifyForumTopic",s=t._==="notifyPeer"||a,n=s&&this.appPeersManager.getPeerId(t.peer),i=s?void 0:t._;this.savePeerSettings({key:i,peerId:n,threadId:a?this.appMessagesIdsManager.generateMessageId(t.top_msg_id,t.peer.channel_id):void 0,settings:e.notify_settings}),this.rootScope.dispatchEvent("notify_settings",e)}}),this.appStateManager.getState().then(e=>{if(e.notifySettings)for(const t in e.notifySettings)this.savePeerSettings({key:t,settings:e.notifySettings[t]})})}getNotifySettings(e){let t=zt(e._),a=this.peerSettings[t],s;return e._==="inputNotifyPeer"&&(s=t=this.appPeersManager.getPeerId(e.peer),a=a[t]),a||((a||this.peerSettings)[t]=this.apiManager.invokeApi("account.getNotifySettings",{peer:e}).then(n=>(this.savePeerSettings({key:t,peerId:s,settings:n}),n)))}getNotifyPeerTypeSettings(){if(this.getNotifyPeerTypePromise)return this.getNotifyPeerTypePromise;const e=["inputNotifyBroadcasts","inputNotifyUsers","inputNotifyChats"].map(t=>this.getNotifySettings({_:t}));return this.getNotifyPeerTypePromise=Promise.all(e)}updateNotifySettings(e,t){return this.apiManager.invokeApi("account.updateNotifySettings",{peer:e,settings:t}).then(a=>{a&&this.apiUpdatesManager.processLocalUpdate({_:"updateNotifySettings",peer:{...e,_:zt(e._)},notify_settings:{...t,_:"peerNotifySettings"}})})}getContactSignUpNotification(){return this.notifyContactsSignUp?this.notifyContactsSignUp:this.notifyContactsSignUp=this.apiManager.invokeApi("account.getContactSignUpNotification")}setContactSignUpNotification(e){this.apiManager.invokeApi("account.setContactSignUpNotification",{silent:e}).then(t=>{this.notifyContactsSignUp=Promise.resolve(!e)})}getPeerKey(e,t){return e+(t?"_"+t:"")}savePeerSettings({key:e,peerId:t,threadId:a,settings:s}){let n;t&&(e=this.getPeerKey(t,a),n=this.peerSettings[a?"notifyForumTopic":"notifyPeer"]),(n||this.peerSettings)[e]=s,t?this.checkMuteUntilThrottled():(this.rootScope.dispatchEvent("notify_peer_type_settings",{key:e,settings:s}),this.appStateManager.getState().then(i=>{const o=i.notifySettings;o[e]=s,this.appStateManager.pushToState("notifySettings",o)}))}isMuted(e){return e._==="peerNotifySettings"&&(e.silent||e.mute_until!==void 0&&e.mute_until*1e3>ve())}getPeerMuted(e){const t=this.getNotifySettings({_:"inputNotifyPeer",peer:this.appPeersManager.getInputPeerById(e)});return(t instanceof Promise?t:Promise.resolve(t)).then(a=>this.isMuted(a))}getPeerLocalSettings({peerId:e,respectType:t=!0,threadId:a}){const s={_:"peerNotifySettings"},n=this.getPeerKey(e,a),i=this.peerSettings[a?"notifyForumTopic":"notifyPeer"][n];if(i&&!(i instanceof Promise)&&Object.assign(s,i),t){const o=this.appPeersManager.getInputNotifyPeerById({peerId:e,ignorePeerId:!0,threadId:a}),p=zt(o._),d=this.peerSettings[p];if(d&&!(d instanceof Promise))for(const f in d)s[f]===void 0&&(s[f]=d[f])}return s}validatePeerSettings(e){if(e.peerId!==this.appPeersManager.peerId)return e.threadId&&!this.appPeersManager.isForum(e.peerId)&&(e.threadId=void 0),e}isPeerLocalMuted(e){if(!(e=this.validatePeerSettings(e)))return!1;if(e.threadId){const s=this.getPeerLocalSettings({...e,respectType:!1});return s.silent!==void 0||s.mute_until!==void 0?this.isMuted(s):this.isPeerLocalMuted({...e,threadId:void 0})}const t=this.getPeerLocalSettings(e);return this.isMuted(t)}}const lo=new Set(["all","web","webk"]),ss=new Set;function Un(r){return r.find(e=>lo.has(e.platform)&&!ss.has(e.reason))}function go(r){return!!Un(r)}function mo(r){ss.clear(),r.forEach(e=>{ss.add(e)})}function Tn(r){const e=r?.restriction_reason;return!!(e&&r.pFlags.restricted&&go(e))}function ho(r){if(!(!r||Tn(r)))return r?.photo}class uo extends ce{get peerId(){return this.appUsersManager.userId.toPeerId()}canPinMessage(e){return e.isUser()||this.appChatsManager.hasRights(e.toChatId(),"pin_messages")}getPeerPhoto(e){const t=this.getPeer(e);return ho(t)}getPeerMigratedTo(e){if(e.isUser())return;const t=this.appChatsManager.getChat(e.toChatId()),a=t?.migrated_to;if(a&&t.pFlags.deactivated)return lt(a)}getOutputPeer(e){if(e.isUser())return{_:"peerUser",user_id:e.toUserId()};const t=e.toChatId();return this.appChatsManager.isChannel(t)?{_:"peerChannel",channel_id:t}:{_:"peerChat",chat_id:t}}getPeerString(e){return e.isUser()?this.appUsersManager.getUserString(e.toUserId()):this.appChatsManager.getChatString(e.toChatId())}getPeerUsername(e){return this.getPeerActiveUsernames(e)[0]||""}getPeerActiveUsernames(e){const t=this.getPeer(e);return pa(t)}getPeer(e){return e.isUser()?this.appUsersManager.getUser(e.toUserId()):this.appChatsManager.getChat(e.toChatId())}getPeerId(e){return lt(e)||$e(e)&&e._==="inputPeerSelf"&&this.peerId||ct}getDialogPeer(e){return{_:"dialogPeer",peer:this.getOutputPeer(e)}}isChannel(e){return!e.isUser()&&this.appChatsManager.isChannel(e.toChatId())}isMegagroup(e){return!e.isUser()&&this.appChatsManager.isMegagroup(e.toChatId())}isForum(e){return!e.isUser()&&this.appChatsManager.isForum(e.toChatId())}isAnyGroup(e){return!e.isUser()&&!this.appChatsManager.isBroadcast(e.toChatId())}isBroadcast(e){return this.isChannel(e)&&!this.isMegagroup(e)}isBot(e){return e.isUser()&&this.appUsersManager.isBot(e.toUserId())}isContact(e){return e.isUser()&&this.appUsersManager.isContact(e.toUserId())}isUser(e){return zs(e)}isRegularUser(e){return this.isUser(e)&&this.appUsersManager.isRegularUser(e)}isAnyChat(e){return Hs(e)}isPeerRestricted(e){return Tn(this.getPeer(e))}getRestrictionReasonText(e){const t=this.getPeer(e),a=t.restriction_reason?Un(t.restriction_reason):void 0;return a?a.text:e.isUser()?"This user is restricted":"This chat is restricted"}getInputNotifyPeerById({peerId:e,ignorePeerId:t,threadId:a}){return t?e.isUser()?{_:"inputNotifyUsers"}:this.isBroadcast(e)?{_:"inputNotifyBroadcasts"}:{_:"inputNotifyChats"}:a?{_:"inputNotifyForumTopic",peer:this.getInputPeerById(e),top_msg_id:K(a)}:{_:"inputNotifyPeer",peer:this.getInputPeerById(e)}}getInputPeerById(e){if(!e)return{_:"inputPeerEmpty"};if(!e.isUser()){const a=e.toChatId();return this.appChatsManager.getInputPeer(a)}const t=e.toUserId();return this.appUsersManager.getUserInputPeer(t)}getInputPeerSelf(){return{_:"inputPeerSelf"}}getInputDialogPeerById(e){return{_:"inputDialogPeer",peer:$e(e)?e:this.getInputPeerById(e)}}getPeerSearchText(e){let t;return this.isUser(e)?t="%pu "+this.appUsersManager.getUserSearchText(e.toUserId()):t="%pg "+(this.appChatsManager.getChat(e.toChatId()).title||""),t}getDialogType(e){return this.isMegagroup(e)?"megagroup":this.isChannel(e)?"channel":this.isUser(e)?e===this.peerId?"saved":"chat":"group"}getDeleteButtonText(e){switch(this.getDialogType(e)){case"channel":return this.appChatsManager.hasRights(e.toChatId(),"delete_chat")?"ChannelDelete":"ChatList.Context.LeaveChannel";case"megagroup":case"group":return this.appChatsManager.hasRights(e.toChatId(),"delete_chat")?"DeleteMega":"ChatList.Context.LeaveGroup";default:return"ChatList.Context.DeleteChat"}}noForwards(e){return e.isUser()?!1:!!this.appChatsManager.getChat(e.toChatId()).pFlags?.noforwards}}class yo extends ce{constructor(){super(...arguments),this.photos={}}savePhoto(e,t){if(!e||e._==="photoEmpty")return;const a=this.photos[e.id];if(e.file_reference&&(yn("file_reference",a,e),this.referenceDatabase.saveContext(e.file_reference,t)),e.sizes?.length){e.sizes.sort((n,i)=>(n.size||(n.sizes?1/0:0))-(i.size||(i.sizes?1/0:0)));const s=e.sizes[e.sizes.length-1];s._==="photoSizeProgressive"&&(s.size=s.sizes[s.sizes.length-1])}return a?Object.assign(a,e):this.photos[e.id]=e}getUserPhotos(e,t="0",a=20){const s=this.appUsersManager.getUserInput(e);return this.apiManager.invokeApiCacheable("photos.getUserPhotos",{user_id:s,offset:0,limit:a,max_id:t},{cacheSeconds:60}).then(n=>{this.appUsersManager.saveApiUsers(n.users);const i=n.photos.map((o,p)=>(n.photos[p]=this.savePhoto(o,{type:"profilePhoto",peerId:e.toPeerId()}),o.id));if(t!=="0"&&t){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}return{count:n.count||i.length,photos:i}})}getPhoto(e){return $e(e)?e:this.photos[e]}}class _o extends ce{constructor(){super(...arguments),this.polls={},this.results={},this.pollToMessages={},this.log=Le("POLLS",De.Error)}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateMessagePoll:e=>{this.log("updateMessagePoll:",e);let t=e.poll||this.polls[e.poll_id];if(!t)return;let a=e.results;const s=this.savePoll(t,a);t=s.poll,a=s.results,this.rootScope.dispatchEvent("poll_update",{poll:t,results:a})}})}savePoll(e,t,a){a&&this.updatePollToMessage(a,!0);const s=e.id;return this.polls[s]?(e=Object.assign(this.polls[s],e),t=this.saveResults(e,t)):(this.polls[s]=e,e.chosenIndexes=[],t=this.saveResults(e,t)),{poll:e,results:t}}saveResults(e,t){return this.results[e.id]?t=Object.assign(this.results[e.id],t):this.results[e.id]=t,t.pFlags.min||(e.chosenIndexes.length=0,t?.results?.length&&t.results.forEach((a,s)=>{a.pFlags?.chosen&&e.chosenIndexes.push(s)})),t}getPoll(e){return{poll:this.polls[e],results:this.results[e]}}getInputMediaPoll(e,t,a,s){return a?(s||(s=[]),a=jt(a,s)):a=void 0,{_:"inputMediaPoll",poll:e,correct_answers:t,solution:a,solution_entities:a?s:void 0}}updatePollToMessage(e,t){const{id:a}=e.media.poll;let s=this.pollToMessages[a];if(!t&&!s)return;s||(s=this.pollToMessages[a]=new Set);const n=e.peerId+"_"+e.mid;t?s.add(n):s.delete(n),!t&&!s.size&&(delete this.polls[a],delete this.results[a],delete this.pollToMessages[a])}sendVote(e,t){const a=e.media.poll,s=t.map(p=>a.answers[p].option),n=e.mid,i=e.peerId,o=this.appPeersManager.getInputPeerById(i);return e.pFlags.is_outgoing?this.appMessagesManager.invokeAfterMessageIsSent(n,"sendVote",p=>(this.log("invoke sendVote callback"),this.sendVote(p,t))):this.apiManager.invokeApi("messages.sendVote",{peer:o,msg_id:K(e.mid),options:s}).then(p=>{this.log("sendVote updates:",p),this.apiUpdatesManager.processUpdateMessage(p)})}getResults(e){const t=this.appPeersManager.getInputPeerById(e.peerId);return this.apiManager.invokeApi("messages.getPollResults",{peer:t,msg_id:K(e.mid)}).then(a=>{this.apiUpdatesManager.processUpdateMessage(a),this.log("getResults updates:",a)})}getVotes(e,t,a,s=20){return this.apiManager.invokeApi("messages.getPollVotes",{peer:this.appPeersManager.getInputPeerById(e.peerId),id:K(e.mid),option:t,offset:a,limit:s}).then(n=>(this.log("getPollVotes messages:",n),this.appUsersManager.saveApiUsers(n.users),n))}stopPoll(e){const t=e.media.poll;if(t.pFlags.closed)return Promise.resolve();const a=at(t);return a.pFlags.closed=!0,this.appMessagesManager.editMessage(e,void 0,{newMedia:this.getInputMediaPoll(a)}).then(()=>{},s=>{this.log.error("stopPoll error:",s)})}}class Mo extends ce{constructor(){super(...arguments),this.privacy={}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updatePrivacy:e=>{const t=e.key._;this.privacy[t]=e.rules,this.rootScope.dispatchEvent("privacy_update",e)}})}setPrivacy(e,t){return this.apiManager.invokeApi("account.setPrivacy",{key:{_:e},rules:t}).then(a=>(this.appUsersManager.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats),this.apiUpdatesManager.processLocalUpdate({_:"updatePrivacy",key:{_:zt(e)},rules:t.map(s=>{const n={};return Object.assign(n,s),n._=zt(n._),n})}),a.rules))}getPrivacy(e){const t=zt(e),a=this.privacy[t];return a?Promise.resolve(a):this.privacy[t]=this.apiManager.invokeApi("account.getPrivacy",{key:{_:e}}).then(s=>(this.appUsersManager.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),this.privacy[t]=s.rules))}getGlobalPrivacySettings(){return this.apiManager.invokeApi("account.getGlobalPrivacySettings")}setGlobalPrivacySettings(e){return this.apiManager.invokeApi("account.setGlobalPrivacySettings",{settings:e})}}const Ha=3*6e4;class Po extends ce{constructor(){super(...arguments),this.usersFull={},this.chatsFull={},this.fullExpiration={},this.onUpdateChatParticipants=e=>{const t=e.participants;if(t._!=="chatParticipants")return;const a=t.chat_id,s=this.chatsFull[a];s!==void 0&&(s.participants=t,this.rootScope.dispatchEvent("chat_full_update",a))},this.onUpdateChatParticipantAdd=e=>{const t=this.chatsFull[e.chat_id];if(t===void 0)return;const a=t.participants,s=a.participants||[];for(let n=0,i=s.length;n<i;n++)if(s[n].user_id===e.user_id)return;s.push({_:"chatParticipant",user_id:e.user_id,inviter_id:e.inviter_id,date:ve(!0)}),a.version=e.version,this.rootScope.dispatchEvent("chat_full_update",e.chat_id)},this.onUpdateChatParticipantDelete=e=>{const t=this.chatsFull[e.chat_id];if(t===void 0)return;const a=t.participants,s=a.participants||[];for(let n=0,i=s.length;n<i;n++)if(s[n].user_id===e.user_id){s.splice(n,1),a.version=e.version,this.rootScope.dispatchEvent("chat_full_update",e.chat_id);return}},this.onUpdateUserTyping=e=>{var g;const t=e.user_id?e.user_id.toPeerId():this.appPeersManager.getPeerId(e.from_id);if(this.appPeersManager.peerId===t||e.action._==="speakingInGroupCallAction")return;const a=e.top_msg_id,s=a?this.appMessagesIdsManager.generateMessageId(a,e.channel_id):void 0,n=this.appPeersManager.getPeerId(e),i=this.getTypingsKey(n,s),o=(g=this.typingsInPeer)[i]??(g[i]=[]),p=e.action;let d=o.find(h=>h.userId===t);p.msg_id&&(p.msg_id=this.appMessagesIdsManager.generateMessageId(p.msg_id,e.channel_id));const f=()=>{delete d.timeout;const h=o.indexOf(d);h!==-1&&o.splice(h,1),this.rootScope.dispatchEvent("peer_typings",{peerId:n,threadId:s,typings:o}),o.length||delete this.typingsInPeer[i]};if(d?.timeout!==void 0&&clearTimeout(d.timeout),p._==="sendMessageCancelAction"){if(!d)return;f();return}d||(d={userId:t},o.push(d)),d.action=p;const c=this.appUsersManager.hasUser(t);c?this.appUsersManager.forceUserOnline(t):e._==="updateChatUserTyping"&&e.chat_id&&this.appChatsManager.hasChat(e.chat_id)&&!this.appChatsManager.isChannel(e.chat_id)&&Promise.resolve(this.getChatFull(e.chat_id)).then(()=>{d.timeout!==void 0&&this.appUsersManager.hasUser(t)&&this.rootScope.dispatchEvent("peer_typings",{peerId:n,threadId:s,typings:o})}),d.timeout=Pe.setTimeout(f,6e3),c&&this.rootScope.dispatchEvent("peer_typings",{peerId:n,threadId:s,typings:o})},this.onUpdatePeerBlocked=e=>{const t=this.appPeersManager.getPeerId(e.peer_id);if(this.appPeersManager.isUser(t)){const a=t.toUserId(),s=this.usersFull[a];s&&(e.blocked?s.pFlags.blocked=!0:delete s.pFlags.blocked),this.rootScope.dispatchEvent("user_full_update",a)}this.rootScope.dispatchEvent("peer_block",{peerId:t,blocked:e.blocked})}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateChatParticipants:this.onUpdateChatParticipants,updateChatParticipantAdd:this.onUpdateChatParticipantAdd,updateChatParticipantDelete:this.onUpdateChatParticipantDelete,updateUserTyping:this.onUpdateUserTyping,updateChatUserTyping:this.onUpdateUserTyping,updateChannelUserTyping:this.onUpdateUserTyping,updatePeerBlocked:this.onUpdatePeerBlocked}),this.rootScope.addEventListener("chat_update",e=>{const t=this.chatsFull[e],a=this.appChatsManager.getChat(e);if(!t||!a)return;let s=!1;!!t.call!=!!a.pFlags?.call_active&&(s=!0);const{photo:n}=a;if(n){const i=n._!=="chatPhotoEmpty",o=!!(t.chat_photo&&t.chat_photo._!=="photoEmpty");(i!==o||i&&n.photo_id!==t.chat_photo?.id)&&(s=!0)}s&&this.refreshFullPeer(e.toPeerId(!0))}),this.rootScope.addEventListener("channel_update",e=>{this.refreshFullPeer(e.toPeerId(!0))}),this.rootScope.addEventListener("chat_full_update",e=>{this.rootScope.dispatchEvent("peer_full_update",e.toPeerId(!0))}),this.rootScope.addEventListener("user_full_update",e=>{this.rootScope.dispatchEvent("peer_full_update",e.toPeerId(!1))}),this.rootScope.addEventListener("invalidate_participants",e=>{this.invalidateChannelParticipants(e)}),this.typingsInPeer={}}getProfile(e,t){return this.usersFull[e]&&!t&&Date.now()<this.fullExpiration[e.toPeerId()]?this.usersFull[e]:this.apiManager.invokeApiSingleProcess({method:"users.getFullUser",params:{id:this.appUsersManager.getUserInput(e)},processResult:a=>{this.appChatsManager.saveApiChats(a.chats,!0),this.appUsersManager.saveApiUsers(a.users);const s=a.full_user,n=e.toPeerId(!1);s.profile_photo&&(s.profile_photo=this.appPhotosManager.savePhoto(s.profile_photo,{type:"profilePhoto",peerId:n}));const i=s.bot_info;if(i){const o={type:"userFull",userId:e};i.description_document=this.appDocsManager.saveDoc(i.description_document,o),i.description_photo=this.appPhotosManager.savePhoto(i.description_photo,o)}return this.appNotificationsManager.savePeerSettings({peerId:n,settings:s.notify_settings}),this.usersFull[e]=s,this.fullExpiration[n]=Date.now()+Ha,this.rootScope.dispatchEvent("user_full_update",e),s}})}getProfileByPeerId(e,t){return this.appPeersManager.isAnyChat(e)?this.getChatFull(e.toChatId(),t):this.getProfile(e.toUserId(),t)}getCachedFullChat(e){return this.chatsFull[e]}getCachedFullUser(e){return this.usersFull[e]}getCachedProfileByPeerId(e){return e.isUser()?this.getCachedFullUser(e.toUserId()):this.getCachedFullChat(e.toChatId())}async getFullPhoto(e){const t=await this.getProfileByPeerId(e);switch(t._){case"userFull":return t.profile_photo;case"channelFull":case"chatFull":return t.chat_photo}}getChatFull(e,t){if(this.appChatsManager.isChannel(e))return this.getChannelFull(e,t);const a=e.toPeerId(!0),s=this.chatsFull[e];if(s&&!t&&Date.now()<this.fullExpiration[a]){const n=this.appChatsManager.getChat(e);if(n.pFlags.left||n.pFlags.deactivated||n.version===s.participants.version)return s}return this.apiManager.invokeApiSingleProcess({method:"messages.getFullChat",params:{chat_id:e},processResult:n=>{this.appChatsManager.saveApiChats(n.chats,!0),this.appUsersManager.saveApiUsers(n.users);const i=n.full_chat;return i&&i.chat_photo&&i.chat_photo.id&&(i.chat_photo=this.appPhotosManager.savePhoto(i.chat_photo,{type:"profilePhoto",peerId:a})),i.call&&this.appGroupCallsManager.saveGroupCall(i.call,e),this.appNotificationsManager.savePeerSettings({peerId:a,settings:i.notify_settings}),this.chatsFull[e]=i,this.fullExpiration[a]=Date.now()+Ha,this.rootScope.dispatchEvent("chat_full_update",e),i}})}async getChatInviteLink(e,t){const a=await this.getChatFull(e);return!t&&a.exported_invite&&a.exported_invite._=="chatInviteExported"?a.exported_invite.link:this.apiManager.invokeApi("messages.exportChatInvite",{peer:this.appPeersManager.getInputPeerById(e.toPeerId(!0))}).then(s=>(this.chatsFull[e]!==void 0&&(this.chatsFull[e].exported_invite=s),s.link))}filterParticipantsByQuery(e,t){const a=this.appUsersManager.createSearchIndex();e.forEach(i=>{const o=Ft(i);a.indexObject(o,this.appUsersManager.getUserSearchText(o))});const s=a.search(t);return e.filter(i=>{const o=Ft(i);return s.has(o)})}getParticipants(e,t={_:"channelParticipantsRecent"},a=200,s=0){return this.appChatsManager.isChannel(e)?this.getChannelParticipants(e,t,a,s):gt(this.getChatFull(e),n=>{const i=n.participants;if(i._!=="chatParticipants")throw Ue("CHAT_PRIVATE");return t._==="channelParticipantsSearch"&&t.q.trim()?{...i,participants:this.filterParticipantsByQuery(i.participants,t.q)}:i})}getParticipant(e,t){return this.appChatsManager.isChannel(e)?this.getChannelParticipant(e,t):Promise.resolve(this.getParticipants(e)).then(a=>{const s=a.participants.find(n=>{if(Ft(n)===t)return n});if(!s)throw Ue("USER_NOT_PARTICIPANT");return s})}getChannelParticipants(e,t={_:"channelParticipantsRecent"},a=200,s=0){if(!this.appChatsManager.hasRights(e,"view_participants"))throw Ue("CHAT_ADMIN_REQUIRED");const n=new Set(["channelParticipantsAdmins"]),i=this.apiManager.invokeApiCacheable("channels.getParticipants",{channel:this.appChatsManager.getChannelInput(e),filter:t,offset:s,limit:a,hash:"0"},{cacheSeconds:60,syncIfHasResult:!0});return gt(i,o=>{this.appUsersManager.saveApiUsers(o.users),this.appChatsManager.saveApiChats(o.chats);const p=t.q;return n.has(t._)&&p?.trim()?{...o,participants:this.filterParticipantsByQuery(o.participants,p)}:o})}getChannelParticipant(e,t){return this.apiManager.invokeApiSingle("channels.getParticipant",{channel:this.appChatsManager.getChannelInput(e),participant:this.appPeersManager.getInputPeerById(t)}).then(a=>(this.appUsersManager.saveApiUsers(a.users),a.participant))}getChannelFull(e,t){const a=e.toPeerId(!0);return this.chatsFull[e]!==void 0&&!t&&Date.now()<this.fullExpiration[a]?this.chatsFull[e]:this.apiManager.invokeApiSingleProcess({method:"channels.getFullChannel",params:{channel:this.appChatsManager.getChannelInput(e)},processResult:s=>{this.appChatsManager.saveApiChats(s.chats,!0),this.appUsersManager.saveApiUsers(s.users);const n=s.full_chat;return n&&n.chat_photo.id&&(n.chat_photo=this.appPhotosManager.savePhoto(n.chat_photo,{type:"profilePhoto",peerId:a})),n.call&&this.appGroupCallsManager.saveGroupCall(n.call,e),this.appNotificationsManager.savePeerSettings({peerId:a,settings:n.notify_settings}),this.chatsFull[e]=n,this.fullExpiration[a]=Date.now()+Ha,this.rootScope.dispatchEvent("chat_full_update",e),n},processError:s=>{switch(s.type){case"CHANNEL_PRIVATE":const n=this.appChatsManager.getChat(e);this.apiUpdatesManager.processUpdateMessage({_:"updates",updates:[{_:"updateChannel",channel_id:e}],chats:[n._==="channelForbidden"?n:{_:"channelForbidden",id:e,access_hash:n.access_hash,title:n.title,pFlags:n.pFlags}],users:[]});break}throw s}})}getMentions(e,t,a){const s=i=>{t.charAt(0)==="@"&&(t=t.slice(1));const p=new Ua({ignoreCase:!0}),d=new Map;i.forEach(c=>{p.indexObject(c.id,this.appUsersManager.getUserSearchText(c.id)),d.set(c.id,c.rating)});const f=Array.from(p.search(t));return f.sort((c,g)=>d.get(g)-d.get(c)),f};let n;return this.appChatsManager.isChannel(e)?n=Promise.resolve(this.getChannelParticipants(e,{_:"channelParticipantsMentions",q:t,top_msg_id:K(a)},50,0)).then(i=>i.participants.map(o=>Ft(o))):e?n=Promise.resolve(this.getChatFull(e)).then(i=>i.participants.participants.map(o=>o.user_id.toPeerId())):n=Promise.resolve([]),Promise.all([this.appUsersManager.getTopPeers("bots_inline").catch(()=>[]),n]).then(i=>{const o=i[0].concat(i[1].map(p=>({id:p,rating:0})));return s(o)})}invalidateChannelParticipants(e){this.apiManager.clearCache("channels.getParticipants",t=>t.channel.channel_id===e),this.getCachedFullChat(e)&&this.refreshFullPeer(e.toPeerId(!0))}refreshFullPeer(e){if(e.isUser()){const t=e.toUserId();delete this.usersFull[t],this.rootScope.dispatchEvent("user_full_update",t)}else{const t=e.toChatId();delete this.chatsFull[t],this.rootScope.dispatchEvent("chat_full_update",t)}}updateProfile(e,t,a){return this.apiManager.invokeApi("account.updateProfile",{first_name:e,last_name:t,about:a}).then(s=>{if(this.appUsersManager.saveApiUser(s),a!==void 0){const n=s.id.toPeerId(),i=this.usersFull[s.id];i&&(i.about=a),this.rootScope.dispatchEvent("peer_bio_edit",n)}return this.getProfile(s.id,!0)})}setBotInfo(e,t,a){return this.apiManager.invokeApi("bots.setBotInfo",{lang_code:"",bot:this.appUsersManager.getUserInput(e),name:t,about:a}).then(()=>{const s=this.appUsersManager.getUser(e);t!==void 0&&this.appUsersManager.saveApiUser({...s,first_name:t});const n=this.getCachedFullUser(e);return a!==void 0&&(n&&(n.about=a),this.rootScope.dispatchEvent("peer_bio_edit",e.toPeerId())),this.getProfile(e,!0)})}getBotInfo(e){return this.apiManager.invokeApiSingle("bots.getBotInfo",{bot:this.appUsersManager.getUserInput(e),lang_code:""})}uploadProfilePhoto(e,t){return this.apiManager.invokeApi("photos.uploadProfilePhoto",{file:e,bot:t?this.appUsersManager.getUserInput(t):void 0}).then(a=>{const s=a.photo;if(!a.users.length){const o=s.sizes.find(p=>p._==="photoStrippedSize");a.users.push({...t?this.appUsersManager.getUser(t):this.appUsersManager.getSelf(),photo:{_:"userProfilePhoto",dc_id:s.dc_id,photo_id:s.id,stripped_thumb:o?.bytes,pFlags:{}}})}this.appUsersManager.saveApiUsers(a.users);const n=t?t.toPeerId():this.appPeersManager.peerId;this.appPhotosManager.savePhoto(a.photo,{type:"profilePhoto",peerId:n});const i=n.toUserId();this.apiUpdatesManager.processLocalUpdate({_:"updateUser",user_id:i})})}deletePhotos(e){return this.apiManager.invokeApiSingle("photos.deletePhotos",{id:e.map(t=>{const a=this.appPhotosManager.getPhoto(t);return bn(a)})}).then(t=>{})}verifyParticipantForOnlineCount(e){const t=this.appUsersManager.getUser(e.user_id);return!!(t&&t.status&&t.status._==="userStatusOnline")}reduceParticipantsForOnlineCount(e){return e.reduce((t,a)=>t+ +this.verifyParticipantForOnlineCount(a),0)}async getOnlines(e){if(this.appChatsManager.isBroadcast(e))return 1;const a=await this.getChatFull(e);if(this.appChatsManager.isMegagroup(e)){if(a.participants_count<=100){const o=await this.getChannelParticipants(e,{_:"channelParticipantsRecent"},100);return this.reduceParticipantsForOnlineCount(o.participants)}return(await this.apiManager.invokeApiCacheable("messages.getOnlines",{peer:this.appChatsManager.getChannelInputPeer(e)},{cacheSeconds:60})).onlines??1}const s=a.participants;return s?.participants?this.reduceParticipantsForOnlineCount(s.participants):1}getTypingsKey(e,t){return e+(t?`_${t}`:"")}getPeerTypings(e,t){return this.typingsInPeer[this.getTypingsKey(e,t)]}canGiftPremium(e){return this.appUsersManager.getUser(e)?.pFlags?.premium?!1:gt(this.getProfile(e),a=>{const s=this.appUsersManager.getUser(e);return!!a.premium_gifts&&!s?.pFlags?.premium})}}function za(r,e){return r.some(t=>t instanceof Promise)?Promise.all(r).then(e):e(r)}const vo=["static_icon","appear_animation","select_animation","activate_animation","effect_animation","around_animation","center_icon"],bo={type:"reactions"};class So extends ce{after(){this.sendReactionPromises=new Map,this.lastSendingTimes=new Map,this.rootScope.addEventListener("user_auth",()=>{setTimeout(()=>{Promise.resolve(this.getAvailableReactions()).then(async e=>{for(let t=0,a=e.length;t<a;++t){const s=e[t];if(await Promise.all([s.around_animation&&this.apiFileManager.downloadMedia({media:s.around_animation}),s.static_icon&&this.apiFileManager.downloadMedia({media:s.static_icon}),s.appear_animation&&this.apiFileManager.downloadMedia({media:s.appear_animation}),s.center_icon&&this.apiFileManager.downloadMedia({media:s.center_icon})]),t>15)break;await ft(1e3)}})},7500)})}resetAvailableReactions(){this.availableReactions=void 0,this.getAvailableReactions()}getAvailableReactions(){return this.availableReactions?this.availableReactions:this.apiManager.invokeApiSingleProcess({method:"messages.getAvailableReactions",processResult:e=>{const t=this.availableReactions=e.reactions;for(const a of t)for(const s of vo)a[s]&&(a[s]=this.appDocsManager.saveDoc(a[s],bo));return t},params:{hash:0}})}getActiveAvailableReactions(){return gt(this.getAvailableReactions(),e=>e.filter(t=>!t.pFlags.inactive))}getAvailableReactionsForPeer(e){const t=this.getActiveAvailableReactions();if(e.isUser())return this.unshiftQuickReaction(t);const a=this.appProfileManager.getChatFull(e.toChatId());return za([t,a,this.getQuickReaction()],([s,n,i])=>{const o=n.available_reactions??{_:"chatReactionsNone"};let p=[];return o._==="chatReactionsAll"?p=s:o._==="chatReactionsSome"&&(p=o.reactions.map(d=>s.find(f=>f.reaction===d.emoticon)).filter(Boolean)),this.unshiftQuickReactionInner(p,i)})}unshiftQuickReactionInner(e,t){if(t&&t._!=="reactionEmoji"&&t._!=="availableReaction")return e;const a=t.emoticon||t.reaction,s=_t(e,n=>n.reaction===a);return s&&e.unshift(s),e}unshiftQuickReaction(e,t=this.getQuickReaction()){return za([e,t],([a,s])=>this.unshiftQuickReactionInner(a,s))}getAvailableReactionsByMessage(e){if(!e)return[];const t=e.fwd_from?.channel_post&&this.appPeersManager.isMegagroup(e.peerId)&&e.fromId===e.fwdFromId&&e.fromId||e.peerId;return this.getAvailableReactionsForPeer(t)}isReactionActive(e){return this.availableReactions?!!this.availableReactions.find(t=>t.reaction===e):!1}getQuickReaction(){return za([this.apiManager.getConfig(),this.getAvailableReactions()],([e,t])=>{const a=e.reactions_default;return a?._==="reactionEmoji"?t.find(s=>s.reaction===a.emoticon):a})}getReactionCached(e){return this.availableReactions.find(t=>t.reaction===e)}getReaction(e){return gt(this.getAvailableReactions(),()=>this.getReactionCached(e))}getMessagesReactions(e,t){return this.apiManager.invokeApiSingleProcess({method:"messages.getMessagesReactions",params:{id:t.map(a=>K(a)),peer:this.appPeersManager.getInputPeerById(e)},processResult:a=>{this.apiUpdatesManager.processUpdateMessage(a)}})}getMessageReactionsList(e,t,a,s,n){return this.apiManager.invokeApiSingleProcess({method:"messages.getMessageReactionsList",params:{peer:this.appPeersManager.getInputPeerById(e),id:K(t),limit:a,reaction:s,offset:n},processResult:i=>(this.appUsersManager.saveApiUsers(i.users),i)})}setDefaultReaction(e){return this.apiManager.invokeApi("messages.setDefaultReaction",{reaction:e}).then(async t=>{if(t){const a=await this.apiManager.getConfig();a&&(a.reactions_default=e),this.rootScope.dispatchEvent("quick_reaction",e)}return t})}async sendReaction(e,t,a){t._==="availableReaction"&&(t={_:"reactionEmoji",emoticon:t.reaction});const s=await this.apiManager.getLimit("reactions"),n=e.peerId+"_"+e.mid;if(this.lastSendingTimes.get(n))return;this.lastSendingTimes.set(n,Date.now()),setTimeout(()=>{this.lastSendingTimes.delete(n)},333);const{peerId:o,mid:p}=e,d=this.appMessagesManager.generateFromId(o)??this.appPeersManager.getOutputPeer(o),f=this.appPeersManager.getPeerId(d),c=q=>{--q.count,delete q.chosen_order,ta(t,q.reaction)&&(t=void 0),q.count||Ye(h.results,q),h.recent_reactions&&_t(h.recent_reactions,J=>ta(J.reaction,q.reaction)&&this.appPeersManager.getPeerId(J.peer_id)===f),h.results.length||(h=void 0)},g=e.reactions?.pFlags?.can_see_list||!this.appPeersManager.isBroadcast(e.peerId)||e.peerId.isUser();e.reactions||(e.reactions={_:"messageReactions",results:[],recent_reactions:g?[]:void 0,pFlags:{can_see_list:g||void 0}});let h=a?e.reactions:at(e.reactions);const y=h.results.filter(q=>q.chosen_order!==void 0);y.sort((q,J)=>J.chosen_order-q.chosen_order);const P=[],D=y.findIndex(q=>ta(q.reaction,t));D!==-1&&P.push(...y.splice(D,1)),P.push(...y.splice(s-+(D===-1))),P.forEach(q=>{y.forEach(J=>{J.chosen_order>q.chosen_order&&--J.chosen_order}),c(q)});const v=y.length;if(y.forEach((q,J)=>{q.chosen_order=v-1-J}),t){h||(h={_:"messageReactions",results:[],pFlags:{}},g&&(h.pFlags.can_see_list=!0));let q=h.results.findIndex(Y=>ta(Y.reaction,t)),J=q!==-1&&h.results[q];if(J||(J={_:"reactionCount",count:0,reaction:t},q=h.results.push(J)-1),++J.count,J.chosen_order=y.length?y[0].chosen_order+1:0,y.unshift(J),!h.recent_reactions&&g&&(h.recent_reactions=[]),h.recent_reactions){const Y={_:"messagePeerReaction",reaction:t,peer_id:d,pFlags:{},date:ve(!0)};this.appPeersManager.isMegagroup(o),h.recent_reactions.unshift(Y),h.recent_reactions=h.recent_reactions.slice(0,3)}}const k=this.availableReactions;if(h&&k?.length){const q=new Map;k.forEach((J,Y)=>{q.set(J.reaction,Y)}),h.results.sort((J,Y)=>{const pe=J.reaction.document_id||J.reaction.emoticon,S=Y.reaction.document_id||Y.reaction.emoticon;return Y.count-J.count||(q.get(pe)??0)-(q.get(S)??0)})}if(a)return e.reactions=h,this.rootScope.dispatchEvent("messages_reactions",[{message:e,changedResults:[]}]),Promise.resolve();this.apiUpdatesManager.processLocalUpdate({_:"updateMessageReactions",peer:e.peer_id,msg_id:e.id,reactions:h,local:!0});const L=[o,p].join("-"),w=K(p),R=this.apiManager.invokeApi("messages.sendReaction",{peer:this.appPeersManager.getInputPeerById(o),msg_id:w,reaction:y.map(q=>q.reaction).reverse()}).then(q=>{const J=q.updates.findIndex(Y=>Y._==="updateEditMessage"||Y._==="updateEditChannelMessage");if(J!==-1){const Y=q.updates[J];q.updates[J]={_:"updateMessageReactions",msg_id:w,peer:this.appPeersManager.getOutputPeer(o),reactions:Y.message.reactions,pts:Y.pts,pts_count:Y.pts_count}}this.apiUpdatesManager.processUpdateMessage(q)}).catch(q=>{q.type==="REACTION_INVALID"&&this.sendReactionPromises.get(L)===R&&this.sendReaction(e,y[0]?.reaction,!0)}).finally(()=>{this.sendReactionPromises.get(L)===R&&this.sendReactionPromises.delete(L)});return this.sendReactionPromises.set(L,R),R}}function Co(r,e){return e?r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""):r.replace(/-/g,"+").replace(/_/g,"/")}const Do=36e5,aa={EMOJI:"inputStickerSetAnimatedEmoji",EMOJI_ANIMATIONS:"inputStickerSetAnimatedEmojiAnimations",PREMIUM_GIFTS:"inputStickerSetPremiumGifts",GENERIC_ANIMATIONS:"inputStickerSetEmojiGenericAnimations",DEFAULT_STATUSES:"inputStickerSetEmojiDefaultStatuses",DEFAULT_TOPIC_ICONS:"inputStickerSetEmojiDefaultTopicIcons"},Ls=new Set(Object.values(aa));class Io extends ce{constructor(){super(...arguments),this.storage=new qt(fs,"stickerSets"),this.clear=e=>{this.getStickerSetPromises={},this.getStickersByEmoticonsPromises={},this.sounds={},this.names={}},this.processAllStickersResult=e=>(bt(e.sets,(t,a,s)=>{t.pFlags.videos&&!dt().IS_WEBM_SUPPORTED&&s.splice(a,1)}),e)}after(){this.clear(!0),this.rootScope.addEventListener("user_auth",()=>{setTimeout(()=>{this.getAnimatedEmojiStickerSet()},1e3),this.getGreetingStickersPromise||(this.getGreetingStickersTimeout??(this.getGreetingStickersTimeout=Pe.setTimeout(()=>{this.getGreetingStickersTimeout=void 0,this.getGreetingSticker(!0)},5e3)))}),this.rootScope.addEventListener("app_config",()=>this.onStickersUpdated("faved",!0)),this.apiUpdatesManager.addMultipleEventsListeners({updateNewStickerSet:e=>{const t=e.stickerset;this.saveStickerSet(t,t.set.id),this.rootScope.dispatchEvent("stickers_installed",t.set)},updateRecentStickers:()=>this.onStickersUpdated("recent",!0),updateFavedStickers:()=>this.onStickersUpdated("faved",!0),updateMoveStickerSetToTop:e=>{this.rootScope.dispatchEvent("stickers_top",e.stickerset)},updateStickerSetsOrder:e=>{this.rootScope.dispatchEvent("stickers_order",{type:e.pFlags.emojis?"emojis":e.pFlags.masks?"masks":"stickers",order:e.order})}})}async onStickersUpdated(e,t){const a=await(e==="faved"?this.getFavedStickersStickers(t):this.getRecentStickersStickers(t));this.rootScope.dispatchEvent("stickers_updated",{type:e,stickers:a})}getGreetingSticker(e=!1){return this.getGreetingStickersTimeout&&(clearTimeout(this.getGreetingStickersTimeout),this.getGreetingStickersTimeout=void 0),this.getGreetingStickersPromise||(this.getGreetingStickersPromise=this.getStickersByEmoticon("👋⭐️",!1).then(t=>{if(!t.length)throw"NO_STICKERS";this.greetingStickers=t.slice(),this.greetingStickers.sort((a,s)=>Math.random()-Math.random())})),this.getGreetingStickersPromise.then(()=>{let t;return e||(t=this.greetingStickers.shift(),this.greetingStickers.push(t)),this.apiFileManager.downloadMedia({media:this.greetingStickers[0]}),t})}saveStickers(e){bt(e,(t,a)=>{t=this.appDocsManager.saveDoc(t),t?e[a]=t:e.splice(a,1)})}canUseStickerSetCache(e,t){return e&&e.documents?.length&&(Date.now()-e.refreshTime<Do||t)}getStickerSet(e,t={}){let{id:a}=e;if(e.access_hash||(e=this.names[a]||e,a=e.id),this.getStickerSetPromises[a])return this.getStickerSetPromises[a];if(!t.overwrite){const n=this.storage.getFromCache(a);if(this.canUseStickerSetCache(n,t.useCache))return n}const s=this.getStickerSetPromises[a]=new Promise(async n=>{if(!t.overwrite){const i=await this.storage.get(a);if(this.canUseStickerSetCache(i,t.useCache)){this.saveStickers(i.documents),n(i),this.getStickerSetPromises[a]===s&&delete this.getStickerSetPromises[a];return}}try{const i=await this.apiManager.invokeApi("messages.getStickerSet",{stickerset:this.getStickerSetInput(e),hash:0}),o=t.saveById?a:i.set.id;this.saveStickerSet(i,o),n(i)}catch{n(null)}this.getStickerSetPromises[a]===s&&delete this.getStickerSetPromises[a]});return s}getLocalStickerSet(e){return this.getStickerSet({id:e},{saveById:!0})}getAnimatedEmojiStickerSet(){return Promise.all([this.getLocalStickerSet(aa.EMOJI),this.getLocalStickerSet(aa.EMOJI_ANIMATIONS),this.getAnimatedEmojiSounds()]).then(([e,t])=>({emoji:e,animations:t}))}getAnimatedEmojiSounds(e){if(this.getAnimatedEmojiSoundsPromise&&!e)return this.getAnimatedEmojiSoundsPromise;const t=this.getAnimatedEmojiSoundsPromise=Promise.all([this.apiManager.getAppConfig(e),this.apiManager.getConfig()]).then(([a,s])=>{if(this.getAnimatedEmojiSoundsPromise===t)for(const n in a.emojies_sounds){const i=a.emojies_sounds[n],o=atob(Co(i.file_reference_base64,!1)),p=new Uint8Array(o.length);for(let f=0,c=p.length;f<c;++f)p[f]=o[f].charCodeAt(0);const d=this.appDocsManager.saveDoc({_:"document",pFlags:{},id:i.id,access_hash:i.access_hash,attributes:[{_:"documentAttributeAudio",duration:1,pFlags:{voice:!0}}],date:0,dc_id:s.this_dc,file_reference:p,mime_type:"audio/ogg"},{type:"emojiesSounds"});this.sounds[n]=d}});return t}async getRecentStickers(e){return await this.apiManager.invokeApiHashable({method:"messages.getRecentStickers",processResult:a=>(this.recentStickers=a.stickers,this.saveStickers(a.stickers),a),overwrite:e})}getRecentStickersStickers(e){if(e)this.recentStickers=void 0;else if(this.recentStickers)return this.recentStickers;return this.getRecentStickers(e).then(()=>this.recentStickers)}saveRecentSticker(e,t,a){const s=this.appDocsManager.getDoc(e);if(_t(this.recentStickers,n=>n.id===e),!t){this.recentStickers.unshift(s);const n=ra(s.stickerEmojiRaw);for(const i in this.getStickersByEmoticonsPromises)this.getStickersByEmoticonsPromises[i].then(p=>{const d=_t(p,f=>f.id===s.id);d?p.unshift(d):i.includes(n)&&p.unshift(s)})}return this.rootScope.dispatchEvent("sticker_updated",{type:"recent",faved:!t,document:s}),t&&this.onStickersUpdated("recent",!1),this.apiManager.invokeApi("messages.saveRecentSticker",{id:as(s),unsave:t,attached:a})}cleanEmoji(e){return e.replace(/\ufe0f/g,"").replace(/🏻|🏼|🏽|🏾|🏿/g,"")}getAnimatedEmojiSticker(e,t){const a=t?aa.EMOJI_ANIMATIONS:aa.EMOJI,s=this.storage.getFromCache(a);if(!s?.documents)return;t&&["🧡","💛","💚","💙","💜","🖤","🤍","🤎"].includes(e)&&(e="❤️"),e=this.cleanEmoji(e);const n=s.packs.find(i=>i.emoticon===e);return n?this.appDocsManager.getDoc(n.documents[0]):void 0}getAnimatedEmojiSoundDocument(e){return this.sounds[this.cleanEmoji(e)]}preloadAnimatedEmojiSticker(e){const t=this.getAnimatedEmojiStickerSet().then(()=>this.getAnimatedEmojiSticker(e));return Promise.all([t,this.preloadAnimatedEmojiStickerAnimation(e)]).then(([a,s])=>({doc:a,animation:s?.doc,sound:s?.sound}))}preloadAnimatedEmojiStickerAnimation(e){return this.getAnimatedEmojiStickerSet().then(()=>this.getAnimatedEmojiSticker(e,!0)).then(t=>{if(!t)return;const a=this.getAnimatedEmojiSoundDocument(e);return Promise.all([this.preloadSticker(t.id),a?this.preloadSticker(a.id):void 0]).then(()=>({doc:t,sound:a}))})}preloadSticker(e,t){const a=this.appDocsManager.getDoc(e);return this.apiFileManager.downloadMedia({media:a,thumb:t?a.video_thumbs?.[0]:void 0})}saveStickerSet(e,t){const a={_:"messages.stickerSet",set:e.set,packs:e.packs,documents:e.documents,keywords:e.keywords};let s=this.storage.getFromCache(t);s?Object.assign(s,a):s=this.storage.setToCache(t,a),s.set.short_name&&(this.names[s.set.short_name]=this.getStickerSetInput(a.set)),this.saveStickers(e.documents);const n=s.set.installed_date||Ls.has(t);s.refreshTime=Date.now(),this.storage.set({[t]:s},!n)}getStickerSetThumbDownloadOptions(e){const t=e.thumbs.find(i=>i._==="photoSize"),a=e.thumb_dc_id,s=e.pFlags?.animated,n={_:"inputStickerSetThumb",stickerset:this.getStickerSetInput(e),thumb_version:e.thumb_version};return{dcId:a,location:n,size:t.size,mimeType:s?"application/x-tgsticker":"image/webp"}}getStickerSetInput(e){return Ls.has(e.id)?{_:e.id}:e.access_hash?{_:"inputStickerSetID",id:e.id,access_hash:e.access_hash}:{_:"inputStickerSetShortName",short_name:""+e.id}}async getFeaturedStickers(){return(await this.apiManager.invokeApiHashable({method:"messages.getFeaturedStickers",processResult:t=>(bt(t.sets,(a,s,n)=>{a.set.pFlags.videos&&!dt().IS_WEBM_SUPPORTED&&n.splice(s,1)}),t.sets.forEach(a=>{this.saveStickerSet({set:a.set,documents:[],packs:[],keywords:[]},a.set.id)}),t)})).sets}getPromoPremiumStickers(){return this.getStickersByEmoticon("⭐️⭐️",!1)}getPremiumStickers(){return this.getStickersByEmoticon("📂⭐️",!1)}getFavedStickers(e){return this.apiManager.invokeApiHashable({method:"messages.getFavedStickers",processResult:t=>(this.saveStickers(t.stickers),this.favedStickers=t.stickers,t),overwrite:e})}getFavedStickersStickers(e){if(e)this.favedStickers=void 0;else if(this.favedStickers)return this.favedStickers;return this.getFavedStickers(e).then(()=>this.favedStickers)}getFavedStickersLimit(){return this.apiManager.getLimit("favedStickers")}async faveSticker(e,t){this.favedStickers||await this.getFavedStickersStickers();const a=await this.getFavedStickersLimit(),s=this.appDocsManager.getDoc(e);return _t(this.favedStickers,n=>n.id===s.id),t||(this.favedStickers.unshift(s),this.favedStickers.splice(a,this.favedStickers.length-a)),this.rootScope.dispatchEvent("sticker_updated",{type:"faved",faved:!t,document:s}),this.apiManager.invokeApi("messages.faveSticker",{id:as(s),unfave:t}).then(()=>{t&&this.onStickersUpdated("faved",!0)})}async toggleStickerSet(e){if(e=this.storage.getFromCache(e.id).set,e.installed_date){if(await this.apiManager.invokeApi("messages.uninstallStickerSet",{stickerset:this.getStickerSetInput(e)}))return delete e.installed_date,this.rootScope.dispatchEvent("stickers_deleted",e),this.storage.delete(e.id,!0),!0}else if(await this.apiManager.invokeApi("messages.installStickerSet",{stickerset:this.getStickerSetInput(e),archived:!1}))return e.installed_date=ve(!0),this.rootScope.dispatchEvent("stickers_installed",e),!0;return!1}toggleStickerSets(e){return Promise.all(e.map(t=>this.toggleStickerSet(t)))}async searchStickerSets(e,t=!0){const a=t?1:0,s=await this.apiManager.invokeApiHashable({method:"messages.searchStickerSets",params:{flags:a,exclude_featured:t||void 0,q:e},processResult:o=>(bt(o.sets,(p,d,f)=>{p.set.pFlags.videos&&!dt().IS_WEBM_SUPPORTED&&f.splice(d,1)}),o.sets.forEach(p=>{this.saveStickerSet({set:p.set,documents:[],packs:[],keywords:[]},p.set.id)}),o)}),n=[],i=this.storage.getCache();for(const o in i){const{set:p}=i[o];p.title.toLowerCase().includes(e.toLowerCase())&&!s.sets.find(d=>d.set.id===p.id)&&n.push({_:"stickerSetCovered",set:p,cover:null})}return s.sets.concat(n)}getAllStickers(){return this.apiManager.invokeApiHashable({method:"messages.getAllStickers",processResult:this.processAllStickersResult})}getEmojiStickers(){return this.apiManager.invokeApiHashable({method:"messages.getEmojiStickers",processResult:this.processAllStickersResult})}preloadStickerSets(){return this.getAllStickers().then(e=>{const t=e.sets;return Promise.all(t.map(a=>this.getStickerSet(a,{useCache:!0})))})}getStickersByEmoticon(e,t=!0,a=!0){e=ra(e);const s=e+(t?"1":"0")+(a?"1":"0");return this.getStickersByEmoticonsPromises[s]?this.getStickersByEmoticonsPromises[s]:this.getStickersByEmoticonsPromises[s]=Promise.all([a?this.apiManager.invokeApiHashable({method:"messages.getStickers",params:{emoticon:e},processResult:n=>n}):void 0,t?this.preloadStickerSets():[],t?this.getRecentStickers():void 0]).then(([n,i,o])=>{const p=n?n.stickers.map(h=>this.appDocsManager.saveDoc(h)):[],d=[],f=[],c=h=>{for(const y of h)if(ra(y.emoticon).includes(e))for(const D of y.documents){const v=this.appDocsManager.getDoc(D);(v.animated?d:f).push(v)}};if(o){c(o.packs);const h=o.stickers;[d,f].forEach(y=>{y.sort((P,D)=>h.indexOf(P)-h.indexOf(D))})}for(const h of i)c(h.packs);const g=[...new Set(d.concat(f,p))];return bt(g,(h,y,P)=>{(h.sticker===3&&!dt().IS_WEBM_SUPPORTED||!this.rootScope.premium&&En(h))&&P.splice(y,1)}),g})}clearRecentStickers(){return this.recentStickers&&(this.recentStickers.length=0,this.onStickersUpdated("recent",!1)),this.apiManager.invokeApi("messages.clearRecentStickers")}reorderStickerSets(e,t,a){return this.apiManager.invokeApi("messages.reorderStickerSets",{emojis:t,masks:a,order:e}).then(()=>{this.apiUpdatesManager.processLocalUpdate({_:"updateStickerSetsOrder",order:e,pFlags:{emojis:t||void 0,masks:a||void 0}})})}}function wo(r){return r&&r.toLowerCase()||""}function ko(r){return!!(r&&!r.pFlags.deleted&&r.id.toPeerId()!==$s)}class Ao extends ce{constructor(){super(...arguments),this.clear=(e=!1)=>{if(e)this.users={},this.usernames={};else for(const t in this.users){if(!t)continue;const a=t.toPeerId();if(!this.peersStorage.isPeerNeeded(a)){const s=this.users[t];this.modifyUsernamesCache(s,!1),this.storage.delete(t),delete this.users[t]}}this.getTopPeersPromises={},this.contactsIndex=this.createSearchIndex(),this.contactsFillPromise=void 0,this.contactsList=new Set,this.updatedContactsList=!1},this.updateUsersStatuses=()=>{const e=ve(!0);for(const t in this.users){const a=this.users[t];this.updateUserStatus(a,e)}}}after(){return this.clear(!0),setInterval(this.updateUsersStatuses,6e4),this.rootScope.addEventListener("state_synchronized",this.updateUsersStatuses),this.apiUpdatesManager.addMultipleEventsListeners({updateUserStatus:e=>{const t=e.user_id,a=this.users[t];a&&(a.status=e.status,a.status&&("expires"in a.status&&(a.status.expires-=this.timeManager.getServerTimeOffset()),"was_online"in a.status&&(a.status.was_online-=this.timeManager.getServerTimeOffset())),this.rootScope.dispatchEvent("user_update",t),this.setUserToStateIfNeeded(a))},updateUserName:e=>{const t=e.user_id,a=this.users[t];a&&(this.forceUserOnline(t),this.saveApiUser({...a,first_name:e.first_name,last_name:e.last_name,username:void 0,usernames:e.usernames},!0))}}),Promise.all([this.appStateManager.getState(),this.appStoragesManager.loadStorage("users")]).then(([e,{results:t,storage:a}])=>{this.storage=a,this.saveApiUsers(t);for(let n=0,i=t.length;n<i;++n){const o=t[n];o&&e.contactsListCachedTime&&(o.pFlags.contact||o.pFlags.mutual_contact)&&(this.pushContact(o.id),this.contactsFillPromise||(this.contactsFillPromise=Me(),this.contactsFillPromise.resolve(this.contactsList)))}const s=e.recentSearch||[];for(let n=0,i=s.length;n<i;++n)this.peersStorage.requestPeer(s[n],"recentSearch");this.peersStorage.addEventListener("peerNeeded",n=>{if(!this.appPeersManager.isUser(n))return;const i=n.toUserId();this.storage.getFromCache(i)||this.storage.set({[i]:this.getUser(i)})}),this.peersStorage.addEventListener("peerUnneeded",n=>{if(!this.appPeersManager.isUser(n))return;const i=n.toUserId();this.storage.getFromCache(i)&&this.storage.delete(i)})})}indexMyself(){const e=this.getSelf().id;this.contactsIndex.indexObject(e,this.getUserSearchText(e))}get userId(){return this.rootScope.myId.toUserId()}onContactsModified(e){e&&this.appStateManager.pushToState("contactsListCachedTime",ve(!0))}pushRecentSearch(e){return this.appStateManager.getState().then(t=>{const a=t.recentSearch||[];if(a[0]!==e){Ye(a,e),a.unshift(e),a.length>20&&(a.length=20),this.appStateManager.pushToState("recentSearch",a);for(const s of a)this.peersStorage.requestPeer(s,"recentSearch")}})}clearRecentSearch(){return this.appStateManager.getState().then(e=>{const t=e.recentSearch||[];for(const a of t)this.peersStorage.releasePeer(a,"recentSearch");t.length=0,this.appStateManager.pushToState("recentSearch",t)})}fillContacts(){if(this.contactsFillPromise&&this.updatedContactsList)return{cached:this.contactsFillPromise.isFulfilled,promise:this.contactsFillPromise};this.updatedContactsList=!0;const e=Me();return this.apiManager.invokeApi("contacts.getContacts").then(t=>{t._==="contacts.contacts"&&(this.contactsList.clear(),this.saveApiUsers(t.users),t.contacts.forEach(a=>{this.pushContact(a.user_id)}),this.onContactsModified(!0),this.contactsFillPromise=e),e.resolve(this.contactsList)},()=>{this.updatedContactsList=!1}),{cached:this.contactsFillPromise?.isFulfilled,promise:this.contactsFillPromise||(this.contactsFillPromise=e)}}resolveUsername(e){e[0]==="@"&&(e=e.slice(1)),e=e.toLowerCase();const t=this.usernames[e];return t?this.appPeersManager.getPeer(t):this.apiManager.invokeApiSingleProcess({method:"contacts.resolveUsername",params:{username:e},processResult:a=>this.processResolvedPeer(a)})}resolveUserByUsername(e){return gt(this.resolveUsername(e),t=>t?._==="user"?t:void 0)}processResolvedPeer(e){return this.saveApiUsers(e.users),this.appChatsManager.saveApiChats(e.chats),this.appPeersManager.getPeer(lt(e.peer))}resolvePhone(e){return this.apiManager.invokeApi("contacts.resolvePhone",{phone:e}).then(t=>this.processResolvedPeer(t))}pushContact(e){this.contactsList.add(e),this.contactsIndex.indexObject(e,this.getUserSearchText(e)),this.peersStorage.requestPeer(e.toPeerId(),"contact")}popContact(e){this.contactsList.delete(e),this.contactsIndex.indexObject(e,""),this.peersStorage.releasePeer(e.toPeerId(),"contact")}getUserSearchText(e){const t=this.users[e];return t?[t.first_name,t.last_name,t.phone,...pa(t),t.pFlags.self?"Saved Messages":""].filter(Boolean).join(" "):""}getContacts(e,t=!1,a="name"){return this.fillContacts().promise.then(s=>{let n=[...s];if(e){const o=this.contactsIndex.search(e);n=[...n].filter(d=>o.has(d))}a==="name"?n.sort((o,p)=>{const d=(this.users[o]||{}).sortName||"",f=(this.users[p]||{}).sortName||"";return d.localeCompare(f)}):a==="online"&&n.sort((o,p)=>{const d=this.getUserStatusForSort(this.getUser(o).status);return this.getUserStatusForSort(this.getUser(p).status)-d});const i=this.userId;return Ye(n,i),t&&this.testSelfSearch(e)&&n.unshift(i),n})}getContactsPeerIds(e,t,a,s){return this.getContacts(e,t,a).then(n=>{const i=n.map(o=>o.toPeerId(!1));return s?i.slice(0,s):i})}toggleBlock(e,t){return this.apiManager.invokeApiSingle(t?"contacts.block":"contacts.unblock",{id:this.appPeersManager.getInputPeerById(e)}).then(a=>(a&&this.apiUpdatesManager.processLocalUpdate({_:"updatePeerBlocked",peer_id:this.appPeersManager.getOutputPeer(e),blocked:t}),a))}testSelfSearch(e){const t=this.getSelf(),a=this.createSearchIndex();return a.indexObject(t.id,this.getUserSearchText(t.id)),a.search(e).has(t.id)}createSearchIndex(){return new Ua({clearBadChars:!0,ignoreCase:!0,latinize:!0,includeTag:!0})}saveApiUsers(e,t){!e||e.saved||(e.saved=!0,e.forEach(a=>this.saveApiUser(a,t)))}modifyUsernamesCache(e,t){const a=pa(e);if(!a.length)return;const s=a.map(n=>wo(n));t?s.forEach(n=>{this.usernames[n]=e.id.toPeerId(e._!=="user")}):s.forEach(n=>{delete this.usernames[n]})}setUsernameToCache(e,t){return!t||t.username!==e.username||!Ct(t.usernames,e.usernames)?(this.modifyUsernamesCache(t,!1),this.modifyUsernamesCache(e,!0),!0):!1}saveApiUser(e,t){if(!e||e._==="userEmpty")return;const a=e.id,s=this.users[a];if(e.pFlags??(e.pFlags={}),e.pFlags.min&&s!==void 0)return;const n=this.setUsernameToCache(e,s);if(!s||s.sortName===void 0||s.first_name!==e.first_name||s.last_name!==e.last_name){const i=e.first_name+(e.last_name?" "+e.last_name:"");e.sortName=e.pFlags.deleted?"":Li(i,!1)}else e.sortName=s.sortName;if(e.status&&(e.status.expires&&(e.status.expires-=this.timeManager.getServerTimeOffset()),e.status.was_online&&(e.status.was_online-=this.timeManager.getServerTimeOffset())),e.photo?._==="userProfilePhotoEmpty"&&delete e.photo,s===void 0)this.users[a]=e;else{const i=e.first_name!==s.first_name||e.last_name!==s.last_name||n,o=s.photo?.photo_id,p=e.photo?.photo_id,d=o!==p,f=s.pFlags.premium!==e.pFlags.premium,c=f||s.pFlags.verified!==e.pFlags.verified||s.pFlags.scam!==e.pFlags.scam||s.pFlags.fake!==e.pFlags.fake,g=!!s.pFlags.contact,h=!!e.pFlags.contact;Ot(s,e),this.rootScope.dispatchEvent("user_update",a),g!==h&&this.onContactUpdated(a,h,g),d&&this.rootScope.dispatchEvent("avatar_update",{peerId:e.id.toPeerId()}),(i||c)&&this.rootScope.dispatchEvent("peer_title_edit",{peerId:e.id.toPeerId()}),f&&this.rootScope.dispatchEvent("peer_bio_edit",e.id.toPeerId())}this.checkPremium(e,s),this.setUserToStateIfNeeded(e)}checkPremium(e,t){if(e.pFlags.self){const a=!!e.pFlags.premium;this.rootScope.premium!==a&&this.rootScope.dispatchEvent("premium_toggle_private",{isNew:!t,isPremium:a})}}setUserToStateIfNeeded(e){this.peersStorage.isPeerNeeded(e.id.toPeerId())&&this.storage.set({[e.id]:e})}isUserOnlineVisible(e){return this.getUserStatusForSort(e)>3}getUserStatusForSort(e){if(typeof e!="object"&&(e=this.getUser(e)?.status),e){const t=e._==="userStatusOnline"?e.expires:e._==="userStatusOffline"?e.was_online:0;if(t)return t;switch(e._){case"userStatusRecently":return 3;case"userStatusLastWeek":return 2;case"userStatusLastMonth":return 1}}return 0}getUser(e){return $e(e)?e:this.users[e]}getUserStatus(e){return this.isRegularUser(e)&&!this.users[e].pFlags.self&&this.users[e].status}async getUserPhone(e){const t=this.getUser(e);if(!t?.phone)return;const a=await this.apiManager.getAppConfig();return{phone:t.phone,isAnonymous:a.fragment_prefixes.some(s=>t.phone.startsWith(s))}}getSelf(){return this.getUser(this.userId)}isBot(e){return this.users[e]&&!!this.users[e].pFlags.bot}isAttachMenuBot(e){return this.isBot(e)&&!!this.users[e].pFlags.bot_attach_menu}isContact(e){return this.contactsList.has(e)||!!(this.users[e]&&this.users[e].pFlags.contact)}isRegularUser(e){const t=this.users[e];return t&&!this.isBot(e)&&!t.pFlags.deleted&&!t.pFlags.support}isNonContactUser(e){return this.isRegularUser(e)&&!this.isContact(e)&&e!==this.userId}isPremium(e){return!!this.users[e]?.pFlags?.premium}hasUser(e,t){const a=this.users[e];return $e(a)&&(t||!a.pFlags.min)}canEdit(e){return this.userId===e||this.isContact(e)||!!this.users[e]?.pFlags?.bot_can_edit}getUserString(e){const t=this.getUser(e);return"u"+e+(t.access_hash?"_"+t.access_hash:"")}getUserInput(e){const t=this.getUser(e);return!e||t.pFlags&&t.pFlags.self?{_:"inputUserSelf"}:{_:"inputUser",user_id:e,access_hash:t.access_hash}}getUserInputPeer(e){const t=this.getUser(e);return{_:"inputPeerUser",user_id:e,access_hash:t.access_hash}}getContactMediaInput(e){const t=this.getUser(e);return{_:"inputMediaContact",first_name:t.first_name,last_name:t.last_name,phone_number:t.phone,vcard:"",user_id:e}}updateUserStatus(e,t=ve(!0)){e.status&&e.status._==="userStatusOnline"&&e.status.expires<t&&(e.status={_:"userStatusOffline",was_online:e.status.expires},this.rootScope.dispatchEvent("user_update",e.id),this.setUserToStateIfNeeded(e))}forceUserOnline(e,t){if(this.isBot(e))return;const a=ve(!0),s=60;if(t){if(a-t>=s)return}else if(this.apiUpdatesManager.updatesState.syncLoading)return;const n=this.getUser(e);n?.status&&n.status._!=="userStatusOnline"&&n.status._!=="userStatusEmpty"&&!n.pFlags.support&&!n.pFlags.deleted&&(n.status={_:"userStatusOnline",expires:a+s},this.rootScope.dispatchEvent("user_update",e),this.setUserToStateIfNeeded(n))}importContact(e,t,a){return this.importContacts([{first_name:e,last_name:t,phones:[a]}]).then(s=>{if(!s.length){const n=new Error;throw n.type="NO_USER",n}return s[0]})}importContacts(e){const t=[];for(let a=0;a<e.length;++a)for(let s=0;s<e[a].phones.length;++s)t.push({_:"inputPhoneContact",client_id:(a<<16|s).toString(10),phone:e[a].phones[s],first_name:e[a].first_name,last_name:e[a].last_name});return this.apiManager.invokeApi("contacts.importContacts",{contacts:t}).then(a=>(this.saveApiUsers(a.users),a.imported.map(n=>(this.onContactUpdated(n.user_id,!0),n.user_id))))}getTopPeers(e){return this.getTopPeersPromises[e]?this.getTopPeersPromises[e]:this.getTopPeersPromises[e]=this.appStateManager.getState().then(t=>{const a=t.topPeersCache[e];return a&&a.cachedTime+864e5>Date.now()&&a.peers?a.peers:this.apiManager.invokeApi("contacts.getTopPeers",{[e]:!0,offset:0,limit:15,hash:"0"}).then(s=>{let n=[];return s._==="contacts.topPeers"&&(this.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),s.categories.length&&(n=s.categories[0].peers.map(i=>{const o=lt(i.peer);return this.peersStorage.requestPeer(o,"topPeer"),{id:o,rating:i.rating}}))),t.topPeersCache[e]={peers:n,cachedTime:Date.now()},this.appStateManager.pushToState("topPeersCache",t.topPeersCache),n})})}getBlocked(e=0,t=0){return this.apiManager.invokeApiSingle("contacts.getBlocked",{offset:e,limit:t}).then(a=>{this.saveApiUsers(a.users),this.appChatsManager.saveApiChats(a.chats);const s=a._==="contacts.blocked"?a.users.length+a.chats.length:a.count,n=a.users.map(i=>i.id.toPeerId()).concat(a.chats.map(i=>i.id.toPeerId(!0)));return{count:s,peerIds:n}})}getLocated(e,t,a,s=!1,n=0){const i={_:"inputGeoPoint",lat:e,long:t,accuracy_radius:a};return this.apiManager.invokeApi("contacts.getLocated",{geo_point:i,background:s}).then(o=>(this.apiUpdatesManager.processUpdateMessage(o),o))}searchContacts(e,t=20){const a=An(e);if(a.length&&a[0].length===e.trim().length&&a[0]._==="messageEntityUrl")try{const n=new URL(ls(e).url).pathname.slice(1);n&&(e=n)}catch{}return this.apiManager.invokeApiCacheable("contacts.search",{q:e,limit:t},{cacheSeconds:60}).then(s=>(this.saveApiUsers(s.users),this.appChatsManager.saveApiChats(s.chats),{my_results:cs(s.my_results.map(i=>lt(i))),results:s.results.map(i=>lt(i))}))}onContactUpdated(e,t,a=this.isContact(e)){t!==a&&(t?this.pushContact(e):this.popContact(e),this.onContactsModified(),this.rootScope.dispatchEvent("contacts_update",e))}updateUsername(e){return this.apiManager.invokeApi("account.updateUsername",{username:e}).then(t=>{this.saveApiUser(t)})}setUserStatus(e,t){if(this.isBot(e))return;const a=this.users[e];if(a){const s=t?{_:"userStatusOffline",was_online:ve(!0)}:{_:"userStatusOnline",expires:ve(!0)+50};a.status=s,this.rootScope.dispatchEvent("user_update",e),this.setUserToStateIfNeeded(a)}}updateMyOnlineStatus(e){return this.setUserStatus(this.getSelf().id,e),this.apiManager.invokeApiSingle("account.updateStatus",{offline:e})}addContact(e,t,a,s,n){return this.apiManager.invokeApi("contacts.addContact",{id:this.getUserInput(e),first_name:t,last_name:a,phone:s,add_phone_privacy_exception:n}).then(i=>{this.apiUpdatesManager.processUpdateMessage(i,{override:!0}),this.onContactUpdated(e,!0)})}deleteContacts(e){return this.apiManager.invokeApi("contacts.deleteContacts",{id:e.map(t=>this.getUserInput(t))}).then(t=>{this.apiUpdatesManager.processUpdateMessage(t,{override:!0}),e.forEach(a=>{this.onContactUpdated(a,!1)})})}checkUsername(e){return this.apiManager.invokeApi("account.checkUsername",{username:e})}canSendToUser(e){return ko(this.getUser(e))}getCommonChats(e,t=100,a){return this.apiManager.invokeApiSingleProcess({method:"messages.getCommonChats",params:{user_id:this.getUserInput(e),limit:t,max_id:a??0},processResult:s=>(this.appChatsManager.saveApiChats(s.chats),s)})}}const Fo=new Set(["photo","video","gif","document"]);class Eo extends ce{constructor(){super(...arguments),this.webpages={},this.pendingWebPages={}}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateWebPage:e=>{this.saveWebPage(e.webpage)}})}saveWebPage(e,t,a){if(e._==="webPageNotModified"||e._==="webPageEmpty")return;const{id:s}=e,n=this.webpages[s],i=n&&n._===e._&&n.hash===n.hash;if(e._==="webPage"){e.photo?._==="photo"?e.photo=this.appPhotosManager.savePhoto(e.photo,a):delete e.photo,e.document?._==="document"?e.document=this.appDocsManager.saveDoc(e.document,a):(e.type==="document"&&delete e.type,delete e.document);const p=e.site_name,d=e.title||e.author||p||"";p&&d===p&&delete e.site_name,!Fo.has(e.type)&&!e.description&&e.photo&&(e.type="photo")}let o=this.pendingWebPages[s];if(t&&(o||(o=this.pendingWebPages[s]=new Set),o.add(t)),n===void 0?this.webpages[s]=e:Ot(n,e),!t&&o!==void 0&&i){const p=[];o.forEach(d=>{const[f,c,g]=d.split("_");p.push({peerId:f.toPeerId(),mid:+c,isScheduled:!!g})}),this.rootScope.dispatchEvent("webpage_updated",{id:s,msgs:p})}return e}getMessageKeyForPendingWebPage(e,t,a){return e+"_"+t+(a?"_s":"")}deleteWebPageFromPending(e,t){const a=e.id;if(!a)return;const s=this.pendingWebPages[a];s&&s.has(t)&&(s.delete(t),s.size||delete this.pendingWebPages[a])}getCachedWebPage(e){return this.webpages[e]}getWebPage(e){return this.apiManager.invokeApiHashable({method:"messages.getWebPage",processResult:t=>this.saveWebPage(t),params:{url:e}})}}function Uo(r){return["image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/bmp","video/mp4","video/webm","video/quicktime","audio/ogg","audio/mpeg","audio/mp4","audio/wav","application/json","application/pdf"].indexOf(r)===-1?"application/octet-stream":r}function Rn(r,e=""){Array.isArray(r)||(r=[r]);const t=Uo(e);return new Blob(r,{type:t})}class To{constructor(e,t,a){this.mimeType=e,this.size=t,this.saveFileCallback=a,this.bytes=new Uint8Array(t)}async write(e,t){const a=t+e.byteLength;if(a>this.bytes.byteLength){const s=new Uint8Array(a);s.set(this.bytes,0),this.bytes=s}this.bytes.set(e,t)}truncate(){this.bytes=new Uint8Array}trim(e){this.bytes=this.bytes.slice(0,e)}finalize(e=!0){const t=Rn(this.bytes,this.mimeType);return e&&this.saveFileCallback&&this.saveFileCallback(t),t}getParts(){return this.bytes}replaceParts(e){this.bytes=e}}const Da=class{constructor(r){this.dbName=r,this.useStorage=!0,Ee.test&&(this.dbName+="_test"),Da.STORAGES.length&&(this.useStorage=Da.STORAGES[0].useStorage),this.openDatabase(),Da.STORAGES.push(this)}openDatabase(){return this.openDbPromise??(this.openDbPromise=caches.open(this.dbName))}delete(r){return this.timeoutOperation(e=>e.delete("/"+r))}deleteAll(){return caches.delete(this.dbName)}get(r){return this.timeoutOperation(e=>e.match("/"+r))}save(r,e){return this.timeoutOperation(t=>t.put("/"+r,e))}getFile(r,e="blob"){return this.get(r).then(t=>{if(!t)throw Ue("NO_ENTRY_FOUND");return t[e]()})}saveFile(r,e){e instanceof Blob||(e=Rn(e));const t=new Response(e,{headers:{"Content-Length":""+e.size}});return this.save(r,t).then(()=>e)}timeoutOperation(r){return this.useStorage?new Promise(async(e,t)=>{let a=!1;const s=setTimeout(()=>{t(),a=!0},15e3);try{const n=await this.openDatabase();if(!n)throw this.useStorage=!1,this.openDbPromise=void 0,"no cache?";const i=await r(n);if(a)return;e(i)}catch(n){t(n)}clearTimeout(s)}):Promise.reject(Ue("STORAGE_OFFLINE"))}prepareWriting(r,e,t){return{deferred:Me(),getWriter:()=>new To(t,e,s=>this.saveFile(r,s).catch(()=>s))}}static toggleStorage(r,e){return Promise.all(this.STORAGES.map(t=>{if(t.useStorage=r,!!e&&!r)return t.deleteAll()}))}};let ys=Da;ys.STORAGES=[];function Ro(r,e){return new Promise(t=>{const a=new FileReader;a.addEventListener("loadend",s=>{t(s.target.result)}),a[e](r)})}function Bn(r){return Ro(r,"readAsArrayBuffer")}function Bo(r){const e=r.indexOf("<svg");e!==0&&(r=r.slice(e));const[t,a,s,n]=r.match(/viewBox="(.+?)"/)[1].split(" ");return r=r.replace(/>/,` width="${s}" height="${n}">`).replace(/[^\x00-\x7F]/g,""),r}function xn(r){return{dcId:0,location:r,size:0,mimeType:"image/jpeg"}}function xo(r){const e=xn({_:"inputWebFileLocation",access_hash:r.access_hash,url:r.url});return e.size=r.size,e.mimeType=r.mime_type,e}function Lo(r){return!!(r&&(r._==="webDocument"||r._==="webDocumentNoProxy"))}function _s(r){return r?._.includes("inputWebFile")}function ns(r){return Ta(r.location,r)}function Oo(r){const{media:e,thumb:t,queueId:a,onlyCache:s}=r;let n;return e._==="document"?n=_n(e,t,a,s):e._==="photo"?n=wn(e,t,a,s):Lo(e)?n=xo(e):_s(e)&&(n=xn(e)),n.downloadId=r.downloadId,{fileName:ns(n),downloadOptions:n}}function Vo(r){return Bn(r).then(e=>new Uint8Array(e))}function No(r){return encodeURIComponent(r).replace(/['()]/g,escape).replace(/\*/g,"%2A")}class qo{constructor(e,t){this.serviceMessagePort=e,this.downloadId=t,this.serviceMessagePort=At.getServiceMessagePort()}async write(e,t){return this.serviceMessagePort.invoke("downloadChunk",{id:this.downloadId,chunk:e})}finalize(e){return this.serviceMessagePort.invoke("downloadFinalize",this.downloadId).then(()=>{})}}class Go{getFile(e){return Promise.reject(Ue("NO_ENTRY_FOUND"))}prepareWriting({fileName:e,downloadId:t,size:a}){const s={"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+No(e),...a?{"Content-Length":a}:{}},n=At.getServiceMessagePort(),i=n.invoke("download",{headers:s,id:t}),o=Me();return o.cancel=()=>{o.reject(Ue("DOWNLOAD_CANCELED"))},o.catch(()=>{At.getServiceMessagePort().invoke("downloadCancel",t)}),i.then(o.resolve,o.reject),{deferred:o,getWriter:()=>new qo(n,t)}}}const jo=1*1024*1024,Ho=512*1024,Aa=128*1024,zo=512*1024,Wo=9*512*1024/Aa,Ko=56*512*1024/Aa,Jo=new Set(["DOWNLOAD_CANCELED","UPLOAD_CANCELED","UNKNOWN","NO_NEW_CONTEXT"]);class Zo extends ce{constructor(){super(...arguments),this.cacheStorage=new ys("cachedFiles"),this.downloadStorage=new Go,this.downloadPromises={},this.uploadPromises={},this.downloadPulls={},this.downloadActives={},this.refreshReferencePromises={},this.log=Le("AFM",De.Error|De.Log),this.tempId=0,this.queueId=0,this.debug=Ee.debug,this.maxUploadParts=4e3,this.maxDownloadParts=8e3,this.uncompressTGS=(e,t)=>this.cryptoWorker.invokeCrypto("gzipUncompress",e.slice().buffer,!1),this.uncompressTGV=(e,t)=>{const a=e.slice().buffer;return dt().IS_FIREFOX?this.cryptoWorker.invokeCrypto("gzipUncompress",a,!0).then(s=>Bo(s)).then(s=>new TextEncoder().encode(s)):this.cryptoWorker.invokeCrypto("gzipUncompress",a,!1)},this.convertWebp=(e,t)=>mt.getInstance().invoke("convertWebp",{fileName:t,bytes:e}),this.convertOpus=(e,t)=>mt.getInstance().invoke("convertOpus",{fileName:t,bytes:e})}after(){setInterval(()=>{for(const e in this.refreshReferencePromises){const{deferred:t}=this.refreshReferencePromises[e];(t.isFulfilled||t.isRejected)&&delete this.refreshReferencePromises[e]}},18e5),this.rootScope.addEventListener("config",e=>{this.webFileDcId=e.webfile_dc_id}),this.rootScope.addEventListener("app_config",e=>{this.maxUploadParts=this.rootScope.premium?e.upload_max_fileparts_premium:e.upload_max_fileparts_default,this.maxDownloadParts=e.upload_max_fileparts_premium})}downloadRequest(e,t,a,s,n=0){this.downloadPulls[e]===void 0&&(this.downloadPulls[e]=[],this.downloadActives[e]=0);const i=this.downloadPulls[e],o=new Promise((p,d)=>{i.push({id:t,queueId:n,cb:a,deferred:{resolve:p,reject:d},activeDelta:s})});return setTimeout(()=>{this.downloadCheck(e)},0),o}downloadCheck(e){const t=this.downloadPulls[e],a=this.rootScope.premium?Ko:Wo;if(this.downloadActives[e]>=a||!t?.length)return!1;const s=_t(t,o=>o.queueId===0)||_t(t,o=>o.queueId===this.queueId)||t.shift(),n=s.activeDelta||1;this.downloadActives[e]+=n;const i=s.cb();i.then(()=>{this.downloadActives[e]-=n,this.downloadCheck(e)},o=>{(!o?.type||!Jo.has(o.type))&&this.log.error("downloadCheck error:",o),this.downloadActives[e]-=n,this.downloadCheck(e)}).finally(()=>{i.then(s.deferred.resolve,s.deferred.reject)})}setQueueId(e){this.queueId=e}getFileStorage(){return this.cacheStorage}cancelDownload(e){const t=[this.downloadPromises[e],this.uploadPromises[e]].filter(Boolean);let a=!1;for(let s=0,n=t.length;s<n;++s){const i=t[s];i&&!i.isRejected&&!i.isFulfilled&&(i.cancel(),a=!0)}return a}requestWebFilePart(e,t,a,s,n=0,i=0,o){return this.downloadRequest(this.webFileDcId,n,async()=>{if(o?.(),"url"in t){const p=t.url;if(this.isLocalWebFile(p))return fetch(p).then(d=>d.arrayBuffer()).then(d=>{const f=p.split(".").pop(),c=We[f]||"application/octet-stream";return{_:"upload.webFile",size:d.byteLength,mime_type:c,file_type:{_:"storage.fileUnknown"},mtime:0,bytes:new Uint8Array(d)}})}return this.apiManager.invokeApi("upload.getWebFile",{location:t,offset:a,limit:s},{dcId:this.webFileDcId,fileDownload:!0})},this.getDelta(s),i)}requestFilePart(e,t,a,s,n=0,i=0,o){return this.downloadRequest(e,n,async()=>{o?.();const p=async()=>{o?.();const f=t.file_reference?.slice();return this.apiManager.invokeApi("upload.getFile",{location:t,offset:a,limit:s},{dcId:e,fileDownload:!0}).catch(g=>{if(o?.(),g.type==="FILE_REFERENCE_EXPIRED")return this.refreshReference(t,f).then(p);throw g})},d=t.file_reference;if(d&&!t.checkedReference){t.checkedReference=!0;const f=Ce(d);if(this.refreshReferencePromises[f])return this.refreshReference(t,d).then(p)}return p()},this.getDelta(s),i)}getDelta(e){return e/Aa}getLimitPart(e,t){if(!e)return zo;let a=Aa;const s=t?this.maxUploadParts:this.maxDownloadParts,n=t?Ho:jo;for(;e/a>s&&a<n;)a*=2;return a}refreshReference(e,t,a=Ce(t)){let s=this.refreshReferencePromises[a];if(!s){const n=Me();s=this.refreshReferencePromises[a]={deferred:n},this.referenceDatabase.refreshReference(t).then(i=>{a===Ce(i)&&n.reject(Ue("REFERENCE_IS_NOT_REFRESHED")),n.resolve(i)},n.reject)}return s.deferred.then(n=>{e.file_reference=n})}isDownloading(e){return!!this.downloadPromises[e]}getDownload(e){return this.downloadPromises[e]}getUpload(e){return this.uploadPromises[e]}getConvertMethod(e){let t;return e==="application/x-tgwallpattern"?(t=this.uncompressTGV,e="image/svg+xml"):e==="image/webp"&&!dt().IS_WEBP_SUPPORTED?(t=this.convertWebp,e="image/png"):e==="application/x-tgsticker"?(t=this.uncompressTGS,e="application/json"):e==="audio/ogg"&&!dt().IS_OPUS_SUPPORTED&&(t=this.convertOpus,e="audio/wav"),{mimeType:e,process:t}}allocateDeferredPromises(e,t,a){const s=[];let n=e,i=Promise.resolve(),o;do o=Me(),s.push({offset:n,writePromise:i,writeDeferred:o}),i=o,n+=a;while(n<t);return s}isLocalWebFile(e){return e?.startsWith("assets/")}download(e){const t=e.size??0,{dcId:a,location:s}=e;let{downloadId:n}=e;n&&!At.getServiceMessagePort()&&(this.log.error("download fallback to blob",e),n=void 0);const i=e.mimeType,o=this.getConvertMethod(i),{process:p}=o;e.mimeType=o.mimeType||"image/jpeg";const d=ns(e),f=n?ns({...at(e),downloadId:void 0}):d,c=this.getFileStorage(),g=n?this.downloadStorage:void 0;let h=n?void 0:this.downloadPromises[d];if(this.debug&&this.log("downloadFile",d,e),h)return h;const y=(A,O)=>{if(!A?.error)for(const z of q)A&&A!==z||(z.error=O,z.deferred.reject(O))},P=_s(s),D=P&&this.isLocalWebFile(s.url),v=this.tempId++,k=D?t:e.limitPart||this.getLimitPart(t,!1);let L=c.getFile.bind(c),w,R;const q=[],J=t||k,Y=()=>q.reduce((A,O)=>A+ +!!O.error,0),pe=(A,O)=>{const{deferred:z}=A,re=y.bind(null,A);z.cancel=()=>z.reject(Ue("DOWNLOAD_CANCELED")),z.catch(we=>{re(we),A.writer?.truncate?.()}).finally(()=>{this.downloadPromises[O]===z&&delete this.downloadPromises[O],delete A.writer}),this.downloadPromises[O]=z,q.push(A)};if(c&&(!g||J<=bs)&&(w=c.prepareWriting(f,J,e.mimeType),pe(w,f)),g){let A=e.fileName;if(!A){A=f;const O=Mn[e.mimeType];O&&(A+="."+O)}R=g.prepareWriting({fileName:A,downloadId:n,size:J}),pe(R,d),w&&R.deferred.catch(O=>w.deferred.reject(O))}h=R?.deferred??w.deferred,g&&p&&(L=g.getFile.bind(g)),L(f).then(async A=>{if(S(),R){const O=R.writer=R.getWriter();S();const z=await Vo(A);S(),await O.write(z),S(),R.deferred.resolve(await O.finalize())}w&&w.deferred.resolve(A)}).catch(async A=>{if(e.onlyCache){y(null,A);return}q.forEach(Se=>{Se.writer=Se.getWriter()});const O=1/0,z=(P?this.requestWebFilePart:this.requestFilePart).bind(this);P&&this.webFileDcId===void 0&&!D&&(await this.apiManager.getConfig(),S());const re=this.allocateDeferredPromises(0,t,k),we={done:0,offset:0,total:t,fileName:d},Re=()=>{try{S(),we.done=ne,this.rootScope.dispatchEvent("download_progress",we)}catch{}},rt=Ht(Re,50,!0);let ne=0;const Ne=async()=>{const{offset:Se,writePromise:qe,writeDeferred:Mt}=re.shift();try{S();const ke=performance.now(),ot=await z(a,s,Se,k,v,e.queueId,S),Qe=performance.now()-ke,Fe=ot.bytes;re.length&&Ne();const nt=Fe.byteLength;this.debug&&this.log("downloadFile requestFilePart result:",d,ot);const Xe=Se+k>=t||!nt;if(nt){ne+=nt,Xe?Re():rt();const ht=performance.now();await qe,S();const Ge=performance.now()-ht,Oe=performance.now();await Promise.all(q.map(({writer:ut})=>ut?.write(Fe,Se))),S()}if(Xe&&(!t||ne<t)&&q.forEach(({writer:ht})=>ht?.trim?.(ne)),Xe&&p){const ht=q.filter(({writer:Ge})=>Ge?.getParts&&Ge.replaceParts).map(async({writer:Ge})=>{const Oe=Ge.getParts(),ut=await p(Oe,f);Ge.replaceParts(ut)});await Promise.all(ht),S()}if(Mt.resolve(),Xe){const ht=ne<=bs;q.forEach(Ge=>{const{deferred:Oe,writer:ut}=Ge;if(Oe.isFulfilled||Oe.isRejected||!ut)return;const Tt=ut.finalize(ht);Oe.resolve(Tt)})}}catch(ke){y(null,ke)}};for(let Se=0,qe=Math.min(O,re.length);Se<qe;++Se)Ne()}).catch(xe);const S=()=>{if(Y()===q.length)throw q[0].error};return h}downloadMedia(e){let{media:t,thumb:a}=e;const s=t._==="photo";if(s&&!a)return Promise.reject("preloadPhoto photoEmpty!");const n=t._==="document";n?t=this.appDocsManager.getDoc(t.id):s&&(t=this.appPhotosManager.getPhoto(t.id)),e.media=t||e.media;const{fileName:i,downloadOptions:o}=Oo(e);let p=this.getDownload(i);return p||(p=this.download(o),n&&!a&&(this.rootScope.dispatchEvent("document_downloading",t.id),p.then(()=>{this.rootScope.dispatchEvent("document_downloaded",t.id)}).catch(xe))),p}downloadMediaURL(e){const{media:t,thumb:a}=e;let s=this.thumbsStorage.getCacheContext(t,a?.type);return(!a||s.downloaded>=("size"in a?a.size:0))&&s.url?Promise.resolve(s.url):this.downloadMedia(e).then(n=>{if(!s.downloaded||s.downloaded<n.size){const i=URL.createObjectURL(n);s=this.thumbsStorage.setCacheContextURL(t,s.type,i,n.size)}return s.url})}downloadMediaVoid(e){return this.downloadMedia(e).then(xe)}delete(e){return delete this.downloadPromises[e],this.getFileStorage().delete(e)}upload({file:e,fileName:t}){t||(t=Fn(e));const a=e.size,s=a>=10485760,n=this.getLimitPart(a,!0),i=this.getDelta(n),o=Math.ceil(a/n),p=Vt(),d={_:s?"inputFileBig":"inputFile",id:p,parts:o,name:t,md5_checksum:""},f=Me();if(o>this.maxUploadParts)return f.reject(Ue("FILE_TOO_BIG")),f;let c=!1,g=!1,h=q=>{q?.type!=="UPLOAD_CANCELED"&&this.log.error("Up Error",q),f.reject(q),c=!0,h=xe};const y=s?"upload.saveBigFilePart":"upload.saveFilePart",P=this.tempId++,D=this;function*v(){let q=0,J=0;for(let Y=0;Y<a;Y+=n){const pe=q++;yield D.downloadRequest("upload",P,async()=>{R();const S=e.slice(Y,Y+n),A=await Bn(S);return R(),D.debug&&D.log("Upload file part, isBig:",s,pe,A.byteLength,new Uint8Array(A).length,new Uint8Array(A).slice().length),D.apiManager.invokeApi(y,{file_id:p,file_part:pe,file_total_parts:o,bytes:A},{fileUpload:!0}).then(()=>{if(c)return;++J;const O={done:J*n,offset:Y,total:a,fileName:t};f.notify(O),J>=o&&(f.resolve(d),g=!0)},h)},i).catch(h)}}const k=v(),L=()=>{if(c)return;const q=k.next();q.done||c||q.value.then(L)},w=1/0;for(let q=0,J=Math.min(w,o);q<J;++q)L();const R=()=>{if(c)throw Ue("UPLOAD_CANCELED")};return f.cancel=()=>{!c&&!g&&(c=!0,h(Ue("UPLOAD_CANCELED")))},f.notify=q=>{this.rootScope.dispatchEvent("download_progress",q)},f.finally(()=>{this.uploadPromises[t]===f&&delete this.uploadPromises[t]}),this.uploadPromises[t]=f}}class Yo{constructor(){this.prefix="",this.cache={},this.useStorage=!0,Ee.test&&(this.prefix="t_")}get(e,t=!0){if(this.cache.hasOwnProperty(e)&&t)return this.cache[e];if(this.useStorage){let a;try{a=localStorage.getItem(this.prefix+e)}catch{this.useStorage=!1}if(a!==null)try{a=JSON.parse(a)}catch{}else a=void 0;return a}}set(e,t=!1){for(const a in e)if(e.hasOwnProperty(a)){const s=e[a];if(this.cache[a]=s,this.useStorage&&!t)try{const n=JSON.stringify(s);localStorage.setItem(this.prefix+a,n)}catch{this.useStorage=!1}}}delete(e,t=!1){e=""+e,t||delete this.cache[e];try{localStorage.removeItem(this.prefix+e)}catch{}}clear(){const e=["dc","server_time_offset","xt_instance","user_auth","state_id","k_build"];for(let t=1;t<=5;++t)e.push(`dc${t}_server_salt`),e.push(`dc${t}_auth_key`);for(const t of e)this.delete(t,!0)}toggleStorage(e,t){if(this.useStorage=e,!!t)if(!e)this.clear();else return this.set(this.cache)}}const Ln=class{constructor(){Ln.STORAGES.push(this),Wt||(this.storage=new Yo)}async proxy(r,...e){return Wt?mt.getInstance().invoke("localStorageProxy",{type:r,args:e}):(e=Array.prototype.slice.call(e),this.storage[r].apply(this.storage,e))}get(r,e){return this.proxy("get",r,e)}set(r,e){return this.proxy("set",r,e)}delete(r,e){return this.proxy("delete",r,e)}clear(){return this.proxy("clear")}toggleStorage(r,e){return this.proxy("toggleStorage",r,e)}};let On=Ln;On.STORAGES=[];const Je=new On;be.appStorage=Je;function fa(r){const e=r.length,t=new Uint8Array(Math.ceil(e/2));let a=0;e%2&&(t[a++]=parseInt(r.charAt(0),16));for(let s=a;s<e;s+=2)t[a++]=parseInt(r.substr(s,2),16);return t}class $o extends ce{constructor(){super(),this.hashes={},this.apiPromisesSingleProcess={},this.apiPromisesSingle={},this.apiPromisesCacheable={},this.afterMessageIdTemp=0}setUser(e){return this.setUserAuth(e.id)}invokeApiAfter(e,t={},a={}){let s=a;return s.prepareTempMessageId=""+ ++this.afterMessageIdTemp,s={...a},a.messageId=s.prepareTempMessageId,this.invokeApi(e,t,s)}invokeApiHashable(e){e.params??(e.params={}),e.options??(e.options={});const{params:t,options:a,method:s,overwrite:n}=e,i=JSON.stringify(t);let o;return this.hashes[s]&&(o=this.hashes[s][i],o&&(n?(delete this.hashes[s][i],o=void 0):t.hash=o.hash)),this.invokeApiSingleProcess({method:s,processResult:p=>{if(p._.includes("NotModified"))return o.result;if(p.hash){const d=p.hash;this.hashes[s]||(this.hashes[s]={}),o=this.hashes[s][i]={hash:d,result:p}}if(e.processResult){const d=e.processResult(p);return o?o.result=d:d}return p},params:t,options:a})}invokeApiSingle(e,t={},a={}){const s=e+"-"+JSON.stringify(t),n=this.apiPromisesSingle;return n[s]?n[s]:n[s]=this.invokeApi(e,t,a).finally(()=>{delete n[s]})}invokeApiSingleProcess(e){e.params??(e.params={}),e.options??(e.options={});const{method:t,processResult:a,processError:s,params:n,options:i}=e,o=this.apiPromisesSingleProcess,p=i.cacheKey||JSON.stringify(n),d=o[t]??(o[t]=new Map),f=d.get(p);if(f)return f;const c=()=>{const P=d.get(p);return P===y?void 0:P},y=this.invokeApi(t,n,i).then(P=>c()||(a?a(P):P),P=>{const D=c();if(D)return D;if(!s)throw P;return s(P)}).finally(()=>{d.get(p)===y&&(d.delete(p),d.size||delete o[t])});return d.set(p,y),y}invokeApiCacheable(e,t={},a={}){var d;const s=(d=this.apiPromisesCacheable)[e]??(d[e]={}),n=JSON.stringify(t);let i=s[n];if(i&&(!a.override||!i.fulfilled)){if(a.syncIfHasResult){if(i.hasOwnProperty("result"))return i.result;if(i.hasOwnProperty("error"))throw i.error}return i.promise}a.override&&(i?.timeout&&(clearTimeout(i.timeout),delete i.timeout),delete a.override);let o;a.cacheSeconds&&(o=Pe.setTimeout(()=>{s[n]===i&&delete s[n]},a.cacheSeconds*1e3),delete a.cacheSeconds);const p=this.invokeApi(e,t,a);return p.then(f=>{i.result=f},f=>{i.error=f}),i=s[n]={timestamp:Date.now(),fulfilled:!1,timeout:o,promise:p,params:t},p}clearCache(e,t){const a=this.apiPromisesCacheable[e];if(a)for(const s in a){const n=a[s];try{t(n.params)&&(n.timeout&&clearTimeout(n.timeout),delete a[s])}catch{}}}getConfig(e){return this.config&&!e?this.config:this.invokeApiSingleProcess({method:"help.getConfig",params:{},processResult:t=>(this.config=t,this.rootScope.dispatchEvent("config",t),t),options:{overwrite:e}})}getAppConfig(e){return this.appConfig&&!e?this.appConfig:this.invokeApiSingleProcess({method:"help.getAppConfig",params:{hash:0},processResult:t=>{const a=t.config;return this.appConfig=a,mo(a.ignore_restriction_reasons??[]),this.rootScope.dispatchEvent("app_config",a),a},options:{overwrite:e}})}getLimit(e,t){return gt(this.getAppConfig(),a=>{const s={pin:["dialogs_pinned_limit_default","dialogs_pinned_limit_premium"],folderPin:["dialogs_folder_pinned_limit_default","dialogs_folder_pinned_limit_premium"],folders:["dialog_filters_limit_default","dialog_filters_limit_premium"],favedStickers:["stickers_faved_limit_default","stickers_faved_limit_premium"],reactions:["reactions_user_max_default","reactions_user_max_premium"],bio:["about_length_limit_default","about_length_limit_premium"],topicPin:"topics_pinned_limit",caption:["caption_length_limit_default","caption_length_limit_premium"],chatlistInvites:["chatlist_invites_limit_default","chatlist_invites_limit_premium"],chatlistsJoined:["chatlists_joined_limit_default","chatlists_joined_limit_premium"]};t??(t=this.rootScope.premium);const n=s[e],i=Array.isArray(n)?n[t?1:0]:n;return a[i]})}}function Vn(r,e){return Promise.all([qt.toggleStorage(r,e),ys.toggleStorage(r,e),Je.toggleStorage(r,e)]).then(xe,xe)}const Qo=6,Xo=3;class ep extends $o{constructor(){super(),this.log=Le("API"),this.cachedNetworkers={},this.cachedExportPromise={},this.gettingNetworkers={},this.baseDcId=0,this.afterMessageTempIds={},this.transportType=Ee.transport,Kt.addEventListener("transport",t=>{this.changeTransportType(t)});const e=(1e4-30)*1e3;setInterval(()=>{this.getConfig(!0)},e)}after(){this.apiUpdatesManager.addMultipleEventsListeners({updateConfig:()=>{this.getConfig(!0),this.getAppConfig(!0)}}),this.rootScope.addEventListener("user_auth",()=>{this.config&&this.apiUpdatesManager.processLocalUpdate({_:"updateConfig"})}),this.rootScope.addEventListener("premium_toggle",e=>{this.iterateNetworkers(({networker:t,connectionType:a,dcId:s,transportType:n})=>{if(a==="client"||n!=="websocket")return;const i=t.transport;if(!i){this.log.error("wow what, no transport?",t);return}if(i.connection){const o=an(s,a,e);i.changeUrl(o)}})})}getTransportType(e){let t;return t=this.transportType,t}iterateNetworkers(e){for(const t in this.cachedNetworkers){const a=this.cachedNetworkers[t];for(const s in a){const n=a[s];for(const i in n)n[i].forEach((p,d,f)=>{e({networker:p,dcId:+i,connectionType:s,transportType:t,index:d,array:f})})}}}chooseServer(e,t,a){return this.dcConfigurator.chooseServer(e,t,a,t==="client",this.rootScope.premium)}changeTransportType(e){const t=this.transportType;if(t===e)return;this.log("changing transport from",t,"to",e);const a=this.cachedNetworkers[t],s=this.cachedNetworkers[e];this.cachedNetworkers[e]=a,this.cachedNetworkers[t]=s,this.transportType=e;for(const n in this.gettingNetworkers){const i=this.gettingNetworkers[n];delete this.gettingNetworkers[n];const o=n.replace(t,e);this.gettingNetworkers[o]=i,this.log("changed networker getKey from",n,"to",o)}this.iterateNetworkers(n=>{const i=this.getTransportType(n.connectionType),o=this.chooseServer(n.dcId,n.connectionType,i);this.changeNetworkerTransport(n.networker,o)})}async getBaseDcId(){if(this.baseDcId)return this.baseDcId;const e=await Je.get("dc");return this.baseDcId||(e?this.baseDcId=e:this.setBaseDcId(Te.baseDcId)),this.baseDcId}async setUserAuth(e){if((typeof e=="string"||typeof e=="number")&&(e={dcID:0,date:ve(!0),id:e.toPeerId(!1)}),this.rootScope.dispatchEvent("user_auth",e),!e.dcID){const t=await this.getBaseDcId();e.dcID=t}Je.set({user_auth:e})}setBaseDcId(e){const t=this.baseDcId;t&&this.getNetworker(t).then(a=>{this.setOnDrainIfNeeded(a)}),this.baseDcId=e,Je.set({dc:this.baseDcId})}async logOut(){if(this.loggingOut)return;this.loggingOut=!0;const e=[],t="dc";for(let i=1;i<=5;i++)e.push(t+i+"_auth_key");const a=await Promise.all(e.map(i=>Je.get(i))),s=[];for(let i=0;i<a.length;i++)a[i]&&s.push(this.invokeApi("auth.logOut",{},{dcId:i+1,ignoreErrors:!0}));const n=async()=>{this.baseDcId=void 0,await Vn(!1,!0),ds.closeDatabases(),this.rootScope.dispatchEvent("logging_out")};return setTimeout(n,1e3),Promise.all(s).catch(i=>{i.handled=!0}).finally(n)}generateNetworkerGetKey(e,t,a){return[e,t,a].join("-")}getNetworker(e,t={}){const a=t.fileDownload?"download":t.fileUpload?"upload":"client",s=this.getTransportType(a);this.cachedNetworkers[s]||(this.cachedNetworkers[s]={client:{},download:{},upload:{}});const n=this.cachedNetworkers[s][a];e in n||(n[e]=[]);const i=n[e],o=a==="client"||s==="https"?1:this.rootScope.premium?Qo:Xo;if(i.length>=o){let g=o-1,h=!1;for(;g>=0;--g)if(i[g].isOnline){h=!0;break}const y=i.splice(h?g:o-1,1)[0];return i.unshift(y),Promise.resolve(y)}let p=this.generateNetworkerGetKey(e,s,a);if(this.gettingNetworkers[p])return this.gettingNetworkers[p];const d=`dc${e}_auth_key`,f=`dc${e}_server_salt`;let c=this.chooseServer(e,a,s);return this.gettingNetworkers[p]=Promise.all([d,f].map(g=>Je.get(g))).then(async([g,h])=>{let y,P;if(g?.length===512){h?.length!==16&&(h="AAAAAAAAAAAAAAAA");const v=fa(g),k=(await ge.invokeCrypto("sha1",v)).slice(-8),L=fa(h);y=this.networkerFactory.getNetworker(e,v,k,L,t)}else try{const v=await this.authorizer.auth(e);g=Ce(v.authKey),h=Ce(v.serverSalt),e===Te.baseDcId&&Je.set({auth_key_fingerprint:g.slice(0,8)}),Je.set({[d]:g,[f]:h}),y=this.networkerFactory.getNetworker(e,v.authKey,v.authKeyId,v.serverSalt,t)}catch(v){P=v}const D=this.getTransportType(a);if(D!==s&&(p=this.generateNetworkerGetKey(e,D,a),c.destroy(),na.removeTransport(this.dcConfigurator.chosenServers,c),y&&(c=this.chooseServer(e,a,D)),this.log("transport has been changed during authorization from",s,"to",D)),delete this.gettingNetworkers[p],P)throw this.log("get networker error",P,P.stack),P;return this.changeNetworkerTransport(y,c),i.unshift(y),this.setOnDrainIfNeeded(y),y})}getNetworkerVoid(e){return this.getNetworker(e).then(xe,xe)}changeNetworkerTransport(e,t){const a=e.transport;a&&na.removeTransport(this.dcConfigurator.chosenServers,a),e.changeTransport(t)}onNetworkerDrain(e){this.log("networker drain",e.dcId),e.onDrain=void 0,this.changeNetworkerTransport(e),e.destroy(),this.networkerFactory.removeNetworker(e),na.removeTransport(this.cachedNetworkers,e)}setOnDrainIfNeeded(e){if(e.onDrain)return;(e.isFileNetworker?Promise.resolve(!0):this.getBaseDcId().then(a=>e.dcId!==a)).then(a=>{e.onDrain||a&&(e.onDrain=()=>this.onNetworkerDrain(e),e.setDrainTimeout())})}setUpdatesProcessor(e){this.updatesProcessor=e,this.networkerFactory.setUpdatesProcessor(e)}invokeApi(e,t={},a={}){const s=Me();let{afterMessageId:n,prepareTempMessageId:i}=a;if(i&&s.then(()=>{delete this.afterMessageTempIds[i]}),be){const h=Date.now(),y=Pe.setInterval(()=>{(!d||!d.isStopped())&&this.log.error("Request is still processing:",e,t,a,"time:",(Date.now()-h)/1e3)},5e3);s.catch(xe).finally(()=>{clearInterval(y)})}const o=async h=>{throw h?$e(h)||(h={message:h}):h={type:"ERROR_EMPTY"},(h.code===401&&h.type==="SESSION_REVOKED"||h.code===406&&h.type==="AUTH_KEY_DUPLICATED")&&this.logOut(),a.ignoreErrors||(h.code===406&&(h.handled=!0),a.noErrorBox||(h.input=e,h.stack=f||h.originalError&&h.originalError.stack||h.stack||new Error().stack,setTimeout(()=>{h.handled||(h.code===401&&this.logOut(),h.handled=!0)},100))),h};let p,d;const f=new Error().stack||"empty stack",c=()=>{if(n){const y=this.afterMessageTempIds[n];y&&(a.afterMessageId=y.messageId)}const h=d.wrapApiCall(e,t,a);return i&&(this.afterMessageTempIds[i]={messageId:a.messageId,promise:s}),h.catch(y=>{if(y.type!=="FILE_REFERENCE_EXPIRED"&&this.log.error("Error",y.code,y.type,this.baseDcId,p,e,t),y.code===401&&this.baseDcId===p)throw y.type!=="SESSION_PASSWORD_NEEDED"&&(Je.delete("dc"),Je.delete("user_auth")),y;if(y.code===401&&this.baseDcId&&p!==this.baseDcId){if(this.cachedExportPromise[p]===void 0){const P=new Promise((D,v)=>{this.invokeApi("auth.exportAuthorization",{dc_id:p},{noErrorBox:!0}).then(k=>{this.invokeApi("auth.importAuthorization",{id:k.id,bytes:k.bytes},{dcId:p,noErrorBox:!0}).then(D,v)},v)});this.cachedExportPromise[p]=P}return this.cachedExportPromise[p].then(()=>c())}else if(y.code===303){const P=+y.type.match(/^(PHONE_MIGRATE_|NETWORK_MIGRATE_|USER_MIGRATE_)(\d+)/)[2];if(P!==p)return a.dcId?a.dcId=P:this.setBaseDcId(P),this.invokeApi(e,t,a)}else if(y.code===400&&y.type.indexOf("FILE_MIGRATE")===0){const P=+y.type.match(/^(FILE_MIGRATE_)(\d+)/)[2];if(P!==p)return a.dcId=P,this.invokeApi(e,t,a);throw y}else{if(y.code===400&&y.type==="CONNECTION_NOT_INITED")return this.networkerFactory.unsetConnectionInited(),c();if(!a.rawError&&y.code===420){const P=+y.type.match(/^FLOOD_WAIT_(\d+)/)[1]||1;if(P>(a.floodMaxTimeout??60)&&!a.prepareTempMessageId)throw y;return ft(P*1e3).then(()=>c())}else if(!a.rawError&&["MSG_WAIT_FAILED","MSG_WAIT_TIMEOUT"].includes(y.type)){const P=this.afterMessageTempIds[n];return n=void 0,delete a.afterMessageId,P?P.promise.then(()=>c()):c()}else if(!a.rawError&&y.code===500){const P=Date.now();if(a.stopTime&&P>=a.stopTime)throw y;return a.waitTime=a.waitTime?Math.min(60,a.waitTime*1.5):1,ft(a.waitTime*1e3).then(()=>c())}else{if(y.type==="UNKNOWN"||y.type==="MTPROTO_CLUSTER_INVALID")return ft(1e3).then(()=>c());throw y}}})};let g;return(p=a.dcId||this.baseDcId)?g=this.getNetworker(p,a):g=this.getBaseDcId().then(h=>this.getNetworker(p=h,a)),g.then(h=>{d=h;const y=c();return d.attachPromise(s,a),y}).then(s.resolve).catch(o).catch(s.reject),s}}class Nn{constructor(){this.neededPeers=new Map,this.singlePeerMap=new Map,this._constructor(!1)}after(){this.rootScope.addEventListener("user_auth",()=>{this.requestPeer(this.appPeersManager.peerId,"self")})}requestPeer(e,t){let a=this.neededPeers.get(e);a&&a.has(t)||(a||(a=new Set,this.neededPeers.set(e,a)),a.add(t),this.dispatchEvent("peerNeeded",e))}releasePeer(e,t){const a=this.neededPeers.get(e);a&&(a.delete(t),a.size||(this.neededPeers.delete(e),this.dispatchEvent("peerUnneeded",e)))}requestPeersForKey(e,t){Array.isArray(e)&&(e=new Set(e));let a=this.singlePeerMap.get(t);if(a){for(const s of a)e.has(s)||(this.releasePeer(s,t),a.delete(s));if(!a.size&&!e.size){this.singlePeerMap.delete(t);return}}if(e.size){a||(a=new Set,this.singlePeerMap.set(t,a));for(const s of e)a.has(s)||(this.requestPeer(s,t),a.add(s))}}isPeerNeeded(e){return this.neededPeers.has(e)}}fn(Nn,[Yt,ce]);const Wa=sa;class tp{constructor(){this.thumbsCache={}}getKey(e){return _s(e)?Ta(e):e._+(e.id??e.url)}getCacheContext(e,t=Wa){var s,n;const a=(s=this.thumbsCache)[n=this.getKey(e)]??(s[n]={});return a[t]??(a[t]={downloaded:0,url:"",type:t})}setCacheContextURL(e,t=Wa,a,s=0){const n=this.getCacheContext(e,t);return n.url=a,n.downloaded=s,n}deleteCacheContext(e,t=Wa){const a=this.thumbsCache[this.getKey(e)];a&&delete a[t]}}var st={MTProto:{constructors:[{id:481674261,predicate:"vector",params:[],type:"Vector t"},{id:85337187,predicate:"resPQ",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"pq",type:"bytes"},{name:"server_public_key_fingerprints",type:"Vector<long>"}],type:"ResPQ"},{id:-1443537003,predicate:"p_q_inner_data_dc",params:[{name:"pq",type:"bytes"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce",type:"int256"},{name:"dc",type:"int"}],type:"P_Q_inner_data"},{id:1459478408,predicate:"p_q_inner_data_temp_dc",params:[{name:"pq",type:"bytes"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce",type:"int256"},{name:"dc",type:"int"},{name:"expires_in",type:"int"}],type:"P_Q_inner_data"},{id:-790100132,predicate:"server_DH_params_ok",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"encrypted_answer",type:"bytes"}],type:"Server_DH_Params"},{id:-1249309254,predicate:"server_DH_inner_data",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"g",type:"int"},{name:"dh_prime",type:"bytes"},{name:"g_a",type:"bytes"},{name:"server_time",type:"int"}],type:"Server_DH_inner_data"},{id:1715713620,predicate:"client_DH_inner_data",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"retry_id",type:"long"},{name:"g_b",type:"bytes"}],type:"Client_DH_Inner_Data"},{id:1003222836,predicate:"dh_gen_ok",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash1",type:"int128"}],type:"Set_client_DH_params_answer"},{id:1188831161,predicate:"dh_gen_retry",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash2",type:"int128"}],type:"Set_client_DH_params_answer"},{id:-1499615742,predicate:"dh_gen_fail",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash3",type:"int128"}],type:"Set_client_DH_params_answer"},{id:1973679973,predicate:"bind_auth_key_inner",params:[{name:"nonce",type:"long"},{name:"temp_auth_key_id",type:"long"},{name:"perm_auth_key_id",type:"long"},{name:"temp_session_id",type:"long"},{name:"expires_at",type:"int"}],type:"BindAuthKeyInner"},{id:-212046591,predicate:"rpc_result",params:[{name:"req_msg_id",type:"long"},{name:"result",type:"Object"}],type:"RpcResult"},{id:558156313,predicate:"rpc_error",params:[{name:"error_code",type:"int"},{name:"error_message",type:"string"}],type:"RpcError"},{id:1579864942,predicate:"rpc_answer_unknown",params:[],type:"RpcDropAnswer"},{id:-847714938,predicate:"rpc_answer_dropped_running",params:[],type:"RpcDropAnswer"},{id:-1539647305,predicate:"rpc_answer_dropped",params:[{name:"msg_id",type:"long"},{name:"seq_no",type:"int"},{name:"bytes",type:"int"}],type:"RpcDropAnswer"},{id:155834844,predicate:"future_salt",params:[{name:"valid_since",type:"int"},{name:"valid_until",type:"int"},{name:"salt",type:"long"}],type:"FutureSalt"},{id:-1370486635,predicate:"future_salts",params:[{name:"req_msg_id",type:"long"},{name:"now",type:"int"},{name:"salts",type:"vector<future_salt>"}],type:"FutureSalts"},{id:880243653,predicate:"pong",params:[{name:"msg_id",type:"long"},{name:"ping_id",type:"long"}],type:"Pong"},{id:-501201412,predicate:"destroy_session_ok",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:1658015945,predicate:"destroy_session_none",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:-1631450872,predicate:"new_session_created",params:[{name:"first_msg_id",type:"long"},{name:"unique_id",type:"long"},{name:"server_salt",type:"long"}],type:"NewSession"},{id:1945237724,predicate:"msg_container",params:[{name:"messages",type:"vector<%Message>"}],type:"MessageContainer"},{id:1538843921,predicate:"message",params:[{name:"msg_id",type:"long"},{name:"seqno",type:"int"},{name:"bytes",type:"int"},{name:"body",type:"Object"}],type:"Message"},{id:-530561358,predicate:"msg_copy",params:[{name:"orig_message",type:"Message"}],type:"MessageCopy"},{id:812830625,predicate:"gzip_packed",params:[{name:"packed_data",type:"bytes"}],type:"Object"},{id:1658238041,predicate:"msgs_ack",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgsAck"},{id:-1477445615,predicate:"bad_msg_notification",params:[{name:"bad_msg_id",type:"long"},{name:"bad_msg_seqno",type:"int"},{name:"error_code",type:"int"}],type:"BadMsgNotification"},{id:-307542917,predicate:"bad_server_salt",params:[{name:"bad_msg_id",type:"long"},{name:"bad_msg_seqno",type:"int"},{name:"error_code",type:"int"},{name:"new_server_salt",type:"long"}],type:"BadMsgNotification"},{id:2105940488,predicate:"msg_resend_req",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgResendReq"},{id:-630588590,predicate:"msgs_state_req",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgsStateReq"},{id:81704317,predicate:"msgs_state_info",params:[{name:"req_msg_id",type:"long"},{name:"info",type:"bytes"}],type:"MsgsStateInfo"},{id:-1933520591,predicate:"msgs_all_info",params:[{name:"msg_ids",type:"Vector<long>"},{name:"info",type:"bytes"}],type:"MsgsAllInfo"},{id:661470918,predicate:"msg_detailed_info",params:[{name:"msg_id",type:"long"},{name:"answer_msg_id",type:"long"},{name:"bytes",type:"int"},{name:"status",type:"int"}],type:"MsgDetailedInfo"},{id:-2137147681,predicate:"msg_new_detailed_info",params:[{name:"answer_msg_id",type:"long"},{name:"bytes",type:"int"},{name:"status",type:"int"}],type:"MsgDetailedInfo"},{id:-161422892,predicate:"destroy_auth_key_ok",params:[],type:"DestroyAuthKeyRes"},{id:178201177,predicate:"destroy_auth_key_none",params:[],type:"DestroyAuthKeyRes"},{id:-368010477,predicate:"destroy_auth_key_fail",params:[],type:"DestroyAuthKeyRes"}],methods:[{id:-1099002127,method:"req_pq_multi",params:[{name:"nonce",type:"int128"}],type:"ResPQ"},{id:-686627650,method:"req_DH_params",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"public_key_fingerprint",type:"long"},{name:"encrypted_data",type:"bytes"}],type:"Server_DH_Params"},{id:-184262881,method:"set_client_DH_params",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"encrypted_data",type:"bytes"}],type:"Set_client_DH_params_answer"},{id:1491380032,method:"rpc_drop_answer",params:[{name:"req_msg_id",type:"long"}],type:"RpcDropAnswer"},{id:-1188971260,method:"get_future_salts",params:[{name:"num",type:"int"}],type:"FutureSalts"},{id:2059302892,method:"ping",params:[{name:"ping_id",type:"long"}],type:"Pong"},{id:-213746804,method:"ping_delay_disconnect",params:[{name:"ping_id",type:"long"},{name:"disconnect_delay",type:"int"}],type:"Pong"},{id:-414113498,method:"destroy_session",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:-1835453025,method:"http_wait",params:[{name:"max_delay",type:"int"},{name:"wait_after",type:"int"},{name:"max_wait",type:"int"}],type:"HttpWait"},{id:-784117408,method:"destroy_auth_key",params:[],type:"DestroyAuthKeyRes"}]},API:{constructors:[{id:-1132882121,predicate:"boolFalse",params:[],type:"Bool"},{id:-1720552011,predicate:"boolTrue",params:[],type:"Bool"},{id:1072550713,predicate:"true",params:[],type:"True"},{id:481674261,predicate:"vector",params:[],type:"Vector t"},{id:-994444869,predicate:"error",params:[{name:"code",type:"int"},{name:"text",type:"string"}],type:"Error"},{id:1450380236,predicate:"null",params:[],type:"Null"},{id:2134579434,predicate:"inputPeerEmpty",params:[],type:"InputPeer"},{id:2107670217,predicate:"inputPeerSelf",params:[],type:"InputPeer"},{id:900291769,predicate:"inputPeerChat",params:[{name:"chat_id",type:"long"}],type:"InputPeer"},{id:-1182234929,predicate:"inputUserEmpty",params:[],type:"InputUser"},{id:-138301121,predicate:"inputUserSelf",params:[],type:"InputUser"},{id:-208488460,predicate:"inputPhoneContact",params:[{name:"client_id",type:"long"},{name:"phone",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"}],type:"InputContact"},{id:-181407105,predicate:"inputFile",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"name",type:"string"},{name:"md5_checksum",type:"string"}],type:"InputFile"},{id:-1771768449,predicate:"inputMediaEmpty",params:[],type:"InputMedia"},{id:505969924,predicate:"inputMediaUploadedPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.2?true"},{name:"file",type:"InputFile"},{name:"stickers",type:"flags.0?Vector<InputDocument>"},{name:"ttl_seconds",type:"flags.1?int"}],type:"InputMedia"},{id:-1279654347,predicate:"inputMediaPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"id",type:"InputPhoto"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:-104578748,predicate:"inputMediaGeoPoint",params:[{name:"geo_point",type:"InputGeoPoint"}],type:"InputMedia"},{id:-122978821,predicate:"inputMediaContact",params:[{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"}],type:"InputMedia"},{id:480546647,predicate:"inputChatPhotoEmpty",params:[],type:"InputChatPhoto"},{id:-1110593856,predicate:"inputChatUploadedPhoto",params:[{name:"flags",type:"#"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.3?VideoSize"}],type:"InputChatPhoto"},{id:-1991004873,predicate:"inputChatPhoto",params:[{name:"id",type:"InputPhoto"}],type:"InputChatPhoto"},{id:-457104426,predicate:"inputGeoPointEmpty",params:[],type:"InputGeoPoint"},{id:1210199983,predicate:"inputGeoPoint",params:[{name:"flags",type:"#"},{name:"lat",type:"double"},{name:"long",type:"double"},{name:"accuracy_radius",type:"flags.0?int"}],type:"InputGeoPoint"},{id:483901197,predicate:"inputPhotoEmpty",params:[],type:"InputPhoto"},{id:1001634122,predicate:"inputPhoto",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputPhoto"},{id:-539317279,predicate:"inputFileLocation",params:[{name:"volume_id",type:"long"},{name:"local_id",type:"int"},{name:"secret",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputFileLocation"},{id:1498486562,predicate:"peerUser",params:[{name:"user_id",type:"long"}],type:"Peer"},{id:918946202,predicate:"peerChat",params:[{name:"chat_id",type:"long"}],type:"Peer"},{id:-1432995067,predicate:"storage.fileUnknown",params:[],type:"storage.FileType"},{id:1086091090,predicate:"storage.filePartial",params:[],type:"storage.FileType"},{id:8322574,predicate:"storage.fileJpeg",params:[],type:"storage.FileType"},{id:-891180321,predicate:"storage.fileGif",params:[],type:"storage.FileType"},{id:172975040,predicate:"storage.filePng",params:[],type:"storage.FileType"},{id:-1373745011,predicate:"storage.filePdf",params:[],type:"storage.FileType"},{id:1384777335,predicate:"storage.fileMp3",params:[],type:"storage.FileType"},{id:1258941372,predicate:"storage.fileMov",params:[],type:"storage.FileType"},{id:-1278304028,predicate:"storage.fileMp4",params:[],type:"storage.FileType"},{id:276907596,predicate:"storage.fileWebp",params:[],type:"storage.FileType"},{id:-742634630,predicate:"userEmpty",params:[{name:"id",type:"long"}],type:"User"},{id:1326562017,predicate:"userProfilePhotoEmpty",params:[],type:"UserProfilePhoto"},{id:-2100168954,predicate:"userProfilePhoto",params:[{name:"flags",type:"#"},{name:"has_video",type:"flags.0?true"},{name:"personal",type:"flags.2?true"},{name:"photo_id",type:"long"},{name:"stripped_thumb",type:"flags.1?bytes"},{name:"dc_id",type:"int"}],type:"UserProfilePhoto"},{id:164646985,predicate:"userStatusEmpty",params:[],type:"UserStatus"},{id:-306628279,predicate:"userStatusOnline",params:[{name:"expires",type:"int"}],type:"UserStatus"},{id:9203775,predicate:"userStatusOffline",params:[{name:"was_online",type:"int"}],type:"UserStatus"},{id:693512293,predicate:"chatEmpty",params:[{name:"id",type:"long"}],type:"Chat"},{id:1103884886,predicate:"chat",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"left",type:"flags.2?true"},{name:"deactivated",type:"flags.5?true"},{name:"call_active",type:"flags.23?true"},{name:"call_not_empty",type:"flags.24?true"},{name:"noforwards",type:"flags.25?true"},{name:"id",type:"long"},{name:"title",type:"string"},{name:"photo",type:"ChatPhoto"},{name:"participants_count",type:"int"},{name:"date",type:"int"},{name:"version",type:"int"},{name:"migrated_to",type:"flags.6?InputChannel"},{name:"admin_rights",type:"flags.14?ChatAdminRights"},{name:"default_banned_rights",type:"flags.18?ChatBannedRights"}],type:"Chat"},{id:1704108455,predicate:"chatForbidden",params:[{name:"id",type:"long"},{name:"title",type:"string"}],type:"Chat"},{id:-908914376,predicate:"chatFull",params:[{name:"flags",type:"#"},{name:"can_set_username",type:"flags.7?true"},{name:"has_scheduled",type:"flags.8?true"},{name:"translations_disabled",type:"flags.19?true"},{name:"id",type:"long"},{name:"about",type:"string"},{name:"participants",type:"ChatParticipants"},{name:"chat_photo",type:"flags.2?Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"exported_invite",type:"flags.13?ExportedChatInvite"},{name:"bot_info",type:"flags.3?Vector<BotInfo>"},{name:"pinned_msg_id",type:"flags.6?int"},{name:"folder_id",type:"flags.11?int"},{name:"call",type:"flags.12?InputGroupCall"},{name:"ttl_period",type:"flags.14?int"},{name:"groupcall_default_join_as",type:"flags.15?Peer"},{name:"theme_emoticon",type:"flags.16?string"},{name:"requests_pending",type:"flags.17?int"},{name:"recent_requesters",type:"flags.17?Vector<long>"},{name:"available_reactions",type:"flags.18?ChatReactions"}],type:"ChatFull"},{id:-1070776313,predicate:"chatParticipant",params:[{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChatParticipant"},{id:-2023500831,predicate:"chatParticipantsForbidden",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"self_participant",type:"flags.0?ChatParticipant"}],type:"ChatParticipants"},{id:1018991608,predicate:"chatParticipants",params:[{name:"chat_id",type:"long"},{name:"participants",type:"Vector<ChatParticipant>"},{name:"version",type:"int"}],type:"ChatParticipants"},{id:935395612,predicate:"chatPhotoEmpty",params:[],type:"ChatPhoto"},{id:476978193,predicate:"chatPhoto",params:[{name:"flags",type:"#"},{name:"has_video",type:"flags.0?true"},{name:"photo_id",type:"long"},{name:"stripped_thumb",type:"flags.1?bytes"},{name:"dc_id",type:"int"}],type:"ChatPhoto"},{id:-1868117372,predicate:"messageEmpty",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"peer_id",type:"flags.0?Peer"}],type:"Message"},{id:940666592,predicate:"message",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"post",type:"flags.14?true"},{name:"from_scheduled",type:"flags.18?true"},{name:"legacy",type:"flags.19?true"},{name:"edit_hide",type:"flags.21?true"},{name:"pinned",type:"flags.24?true"},{name:"noforwards",type:"flags.26?true"},{name:"id",type:"int"},{name:"from_id",type:"flags.8?Peer"},{name:"peer_id",type:"Peer"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"date",type:"int"},{name:"message",type:"string"},{name:"media",type:"flags.9?MessageMedia"},{name:"reply_markup",type:"flags.6?ReplyMarkup"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"views",type:"flags.10?int"},{name:"forwards",type:"flags.10?int"},{name:"replies",type:"flags.23?MessageReplies"},{name:"edit_date",type:"flags.15?int"},{name:"post_author",type:"flags.16?string"},{name:"grouped_id",type:"flags.17?long"},{name:"reactions",type:"flags.20?MessageReactions"},{name:"restriction_reason",type:"flags.22?Vector<RestrictionReason>"},{name:"ttl_period",type:"flags.25?int"}],type:"Message"},{id:721967202,predicate:"messageService",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"post",type:"flags.14?true"},{name:"legacy",type:"flags.19?true"},{name:"id",type:"int"},{name:"from_id",type:"flags.8?Peer"},{name:"peer_id",type:"Peer"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"date",type:"int"},{name:"action",type:"MessageAction"},{name:"ttl_period",type:"flags.25?int"}],type:"Message"},{id:1038967584,predicate:"messageMediaEmpty",params:[],type:"MessageMedia"},{id:1766936791,predicate:"messageMediaPhoto",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.3?true"},{name:"photo",type:"flags.0?Photo"},{name:"ttl_seconds",type:"flags.2?int"}],type:"MessageMedia"},{id:1457575028,predicate:"messageMediaGeo",params:[{name:"geo",type:"GeoPoint"}],type:"MessageMedia"},{id:1882335561,predicate:"messageMediaContact",params:[{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"user_id",type:"long"}],type:"MessageMedia"},{id:-1618676578,predicate:"messageMediaUnsupported",params:[],type:"MessageMedia"},{id:-1230047312,predicate:"messageActionEmpty",params:[],type:"MessageAction"},{id:-1119368275,predicate:"messageActionChatCreate",params:[{name:"title",type:"string"},{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1247687078,predicate:"messageActionChatEditTitle",params:[{name:"title",type:"string"}],type:"MessageAction"},{id:2144015272,predicate:"messageActionChatEditPhoto",params:[{name:"photo",type:"Photo"}],type:"MessageAction"},{id:-1780220945,predicate:"messageActionChatDeletePhoto",params:[],type:"MessageAction"},{id:365886720,predicate:"messageActionChatAddUser",params:[{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1539362612,predicate:"messageActionChatDeleteUser",params:[{name:"user_id",type:"long"}],type:"MessageAction"},{id:-712374074,predicate:"dialog",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"unread_mark",type:"flags.3?true"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"unread_mentions_count",type:"int"},{name:"unread_reactions_count",type:"int"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"pts",type:"flags.0?int"},{name:"draft",type:"flags.1?DraftMessage"},{name:"folder_id",type:"flags.4?int"},{name:"ttl_period",type:"flags.5?int"}],type:"Dialog"},{id:590459437,predicate:"photoEmpty",params:[{name:"id",type:"long"}],type:"Photo"},{id:-82216347,predicate:"photo",params:[{name:"flags",type:"#"},{name:"has_stickers",type:"flags.0?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"date",type:"int"},{name:"sizes",type:"Vector<PhotoSize>"},{name:"video_sizes",type:"flags.1?Vector<VideoSize>"},{name:"dc_id",type:"int"}],type:"Photo"},{id:236446268,predicate:"photoSizeEmpty",params:[{name:"type",type:"string"}],type:"PhotoSize"},{id:1976012384,predicate:"photoSize",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"size",type:"int"}],type:"PhotoSize"},{id:35527382,predicate:"photoCachedSize",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:286776671,predicate:"geoPointEmpty",params:[],type:"GeoPoint"},{id:-1297942941,predicate:"geoPoint",params:[{name:"flags",type:"#"},{name:"long",type:"double"},{name:"lat",type:"double"},{name:"access_hash",type:"long"},{name:"accuracy_radius",type:"flags.0?int"}],type:"GeoPoint"},{id:1577067778,predicate:"auth.sentCode",params:[{name:"flags",type:"#"},{name:"type",type:"auth.SentCodeType"},{name:"phone_code_hash",type:"string"},{name:"next_type",type:"flags.1?auth.CodeType"},{name:"timeout",type:"flags.2?int"}],type:"auth.SentCode"},{id:782418132,predicate:"auth.authorization",params:[{name:"flags",type:"#"},{name:"setup_password_required",type:"flags.1?true"},{name:"otherwise_relogin_days",type:"flags.1?int"},{name:"tmp_sessions",type:"flags.0?int"},{name:"future_auth_token",type:"flags.2?bytes"},{name:"user",type:"User"}],type:"auth.Authorization"},{id:-1271602504,predicate:"auth.exportedAuthorization",params:[{name:"id",type:"long"},{name:"bytes",type:"bytes"}],type:"auth.ExportedAuthorization"},{id:-1195615476,predicate:"inputNotifyPeer",params:[{name:"peer",type:"InputPeer"}],type:"InputNotifyPeer"},{id:423314455,predicate:"inputNotifyUsers",params:[],type:"InputNotifyPeer"},{id:1251338318,predicate:"inputNotifyChats",params:[],type:"InputNotifyPeer"},{id:-551616469,predicate:"inputPeerNotifySettings",params:[{name:"flags",type:"#"},{name:"show_previews",type:"flags.0?Bool"},{name:"silent",type:"flags.1?Bool"},{name:"mute_until",type:"flags.2?int"},{name:"sound",type:"flags.3?NotificationSound"}],type:"InputPeerNotifySettings"},{id:-1472527322,predicate:"peerNotifySettings",params:[{name:"flags",type:"#"},{name:"show_previews",type:"flags.0?Bool"},{name:"silent",type:"flags.1?Bool"},{name:"mute_until",type:"flags.2?int"},{name:"ios_sound",type:"flags.3?NotificationSound"},{name:"android_sound",type:"flags.4?NotificationSound"},{name:"other_sound",type:"flags.5?NotificationSound"}],type:"PeerNotifySettings"},{id:-1525149427,predicate:"peerSettings",params:[{name:"flags",type:"#"},{name:"report_spam",type:"flags.0?true"},{name:"add_contact",type:"flags.1?true"},{name:"block_contact",type:"flags.2?true"},{name:"share_contact",type:"flags.3?true"},{name:"need_contacts_exception",type:"flags.4?true"},{name:"report_geo",type:"flags.5?true"},{name:"autoarchived",type:"flags.7?true"},{name:"invite_members",type:"flags.8?true"},{name:"request_chat_broadcast",type:"flags.10?true"},{name:"geo_distance",type:"flags.6?int"},{name:"request_chat_title",type:"flags.9?string"},{name:"request_chat_date",type:"flags.9?int"}],type:"PeerSettings"},{id:-1539849235,predicate:"wallPaper",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"pattern",type:"flags.3?true"},{name:"dark",type:"flags.4?true"},{name:"access_hash",type:"long"},{name:"slug",type:"string"},{name:"document",type:"Document"},{name:"settings",type:"flags.2?WallPaperSettings"}],type:"WallPaper"},{id:1490799288,predicate:"inputReportReasonSpam",params:[],type:"ReportReason"},{id:505595789,predicate:"inputReportReasonViolence",params:[],type:"ReportReason"},{id:777640226,predicate:"inputReportReasonPornography",params:[],type:"ReportReason"},{id:-1376497949,predicate:"inputReportReasonChildAbuse",params:[],type:"ReportReason"},{id:-1041980751,predicate:"inputReportReasonOther",params:[],type:"ReportReason"},{id:-1813324973,predicate:"userFull",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"phone_calls_available",type:"flags.4?true"},{name:"phone_calls_private",type:"flags.5?true"},{name:"can_pin_message",type:"flags.7?true"},{name:"has_scheduled",type:"flags.12?true"},{name:"video_calls_available",type:"flags.13?true"},{name:"voice_messages_forbidden",type:"flags.20?true"},{name:"translations_disabled",type:"flags.23?true"},{name:"id",type:"long"},{name:"about",type:"flags.1?string"},{name:"settings",type:"PeerSettings"},{name:"personal_photo",type:"flags.21?Photo"},{name:"profile_photo",type:"flags.2?Photo"},{name:"fallback_photo",type:"flags.22?Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"bot_info",type:"flags.3?BotInfo"},{name:"pinned_msg_id",type:"flags.6?int"},{name:"common_chats_count",type:"int"},{name:"folder_id",type:"flags.11?int"},{name:"ttl_period",type:"flags.14?int"},{name:"theme_emoticon",type:"flags.15?string"},{name:"private_forward_name",type:"flags.16?string"},{name:"bot_group_admin_rights",type:"flags.17?ChatAdminRights"},{name:"bot_broadcast_admin_rights",type:"flags.18?ChatAdminRights"},{name:"premium_gifts",type:"flags.19?Vector<PremiumGiftOption>"},{name:"wallpaper",type:"flags.24?WallPaper"}],type:"UserFull"},{id:341499403,predicate:"contact",params:[{name:"user_id",type:"long"},{name:"mutual",type:"Bool"}],type:"Contact"},{id:-1052885936,predicate:"importedContact",params:[{name:"user_id",type:"long"},{name:"client_id",type:"long"}],type:"ImportedContact"},{id:383348795,predicate:"contactStatus",params:[{name:"user_id",type:"long"},{name:"status",type:"UserStatus"}],type:"ContactStatus"},{id:-1219778094,predicate:"contacts.contactsNotModified",params:[],type:"contacts.Contacts"},{id:-353862078,predicate:"contacts.contacts",params:[{name:"contacts",type:"Vector<Contact>"},{name:"saved_count",type:"int"},{name:"users",type:"Vector<User>"}],type:"contacts.Contacts"},{id:2010127419,predicate:"contacts.importedContacts",params:[{name:"imported",type:"Vector<ImportedContact>"},{name:"popular_invites",type:"Vector<PopularContact>"},{name:"retry_contacts",type:"Vector<long>"},{name:"users",type:"Vector<User>"}],type:"contacts.ImportedContacts"},{id:182326673,predicate:"contacts.blocked",params:[{name:"blocked",type:"Vector<PeerBlocked>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Blocked"},{id:-513392236,predicate:"contacts.blockedSlice",params:[{name:"count",type:"int"},{name:"blocked",type:"Vector<PeerBlocked>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Blocked"},{id:364538944,predicate:"messages.dialogs",params:[{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Dialogs"},{id:1910543603,predicate:"messages.dialogsSlice",params:[{name:"count",type:"int"},{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Dialogs"},{id:-1938715001,predicate:"messages.messages",params:[{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:978610270,predicate:"messages.messagesSlice",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"count",type:"int"},{name:"next_rate",type:"flags.0?int"},{name:"offset_id_offset",type:"flags.2?int"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:1694474197,predicate:"messages.chats",params:[{name:"chats",type:"Vector<Chat>"}],type:"messages.Chats"},{id:-438840932,predicate:"messages.chatFull",params:[{name:"full_chat",type:"ChatFull"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatFull"},{id:-1269012015,predicate:"messages.affectedHistory",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"offset",type:"int"}],type:"messages.AffectedHistory"},{id:1474492012,predicate:"inputMessagesFilterEmpty",params:[],type:"MessagesFilter"},{id:-1777752804,predicate:"inputMessagesFilterPhotos",params:[],type:"MessagesFilter"},{id:-1614803355,predicate:"inputMessagesFilterVideo",params:[],type:"MessagesFilter"},{id:1458172132,predicate:"inputMessagesFilterPhotoVideo",params:[],type:"MessagesFilter"},{id:-1629621880,predicate:"inputMessagesFilterDocument",params:[],type:"MessagesFilter"},{id:2129714567,predicate:"inputMessagesFilterUrl",params:[],type:"MessagesFilter"},{id:-3644025,predicate:"inputMessagesFilterGif",params:[],type:"MessagesFilter"},{id:522914557,predicate:"updateNewMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1318109142,predicate:"updateMessageID",params:[{name:"id",type:"int"},{name:"random_id",type:"long"}],type:"Update"},{id:-1576161051,predicate:"updateDeleteMessages",params:[{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1071741569,predicate:"updateUserTyping",params:[{name:"user_id",type:"long"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:-2092401936,predicate:"updateChatUserTyping",params:[{name:"chat_id",type:"long"},{name:"from_id",type:"Peer"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:125178264,predicate:"updateChatParticipants",params:[{name:"participants",type:"ChatParticipants"}],type:"Update"},{id:-440534818,predicate:"updateUserStatus",params:[{name:"user_id",type:"long"},{name:"status",type:"UserStatus"}],type:"Update"},{id:-1484486364,predicate:"updateUserName",params:[{name:"user_id",type:"long"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"usernames",type:"Vector<Username>"}],type:"Update"},{id:-1519637954,predicate:"updates.state",params:[{name:"pts",type:"int"},{name:"qts",type:"int"},{name:"date",type:"int"},{name:"seq",type:"int"},{name:"unread_count",type:"int"}],type:"updates.State"},{id:1567990072,predicate:"updates.differenceEmpty",params:[{name:"date",type:"int"},{name:"seq",type:"int"}],type:"updates.Difference"},{id:16030880,predicate:"updates.difference",params:[{name:"new_messages",type:"Vector<Message>"},{name:"new_encrypted_messages",type:"Vector<EncryptedMessage>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"state",type:"updates.State"}],type:"updates.Difference"},{id:-1459938943,predicate:"updates.differenceSlice",params:[{name:"new_messages",type:"Vector<Message>"},{name:"new_encrypted_messages",type:"Vector<EncryptedMessage>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"intermediate_state",type:"updates.State"}],type:"updates.Difference"},{id:-484987010,predicate:"updatesTooLong",params:[],type:"Updates"},{id:826001400,predicate:"updateShortMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"id",type:"int"},{name:"user_id",type:"long"},{name:"message",type:"string"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:1299050149,predicate:"updateShortChatMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"id",type:"int"},{name:"from_id",type:"long"},{name:"chat_id",type:"long"},{name:"message",type:"string"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:2027216577,predicate:"updateShort",params:[{name:"update",type:"Update"},{name:"date",type:"int"}],type:"Updates"},{id:1918567619,predicate:"updatesCombined",params:[{name:"updates",type:"Vector<Update>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"},{name:"date",type:"int"},{name:"seq_start",type:"int"},{name:"seq",type:"int"}],type:"Updates"},{id:1957577280,predicate:"updates",params:[{name:"updates",type:"Vector<Update>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"},{name:"date",type:"int"},{name:"seq",type:"int"}],type:"Updates"},{id:-1916114267,predicate:"photos.photos",params:[{name:"photos",type:"Vector<Photo>"},{name:"users",type:"Vector<User>"}],type:"photos.Photos"},{id:352657236,predicate:"photos.photosSlice",params:[{name:"count",type:"int"},{name:"photos",type:"Vector<Photo>"},{name:"users",type:"Vector<User>"}],type:"photos.Photos"},{id:539045032,predicate:"photos.photo",params:[{name:"photo",type:"Photo"},{name:"users",type:"Vector<User>"}],type:"photos.Photo"},{id:157948117,predicate:"upload.file",params:[{name:"type",type:"storage.FileType"},{name:"mtime",type:"int"},{name:"bytes",type:"bytes"}],type:"upload.File"},{id:414687501,predicate:"dcOption",params:[{name:"flags",type:"#"},{name:"ipv6",type:"flags.0?true"},{name:"media_only",type:"flags.1?true"},{name:"tcpo_only",type:"flags.2?true"},{name:"cdn",type:"flags.3?true"},{name:"static",type:"flags.4?true"},{name:"this_port_only",type:"flags.5?true"},{name:"id",type:"int"},{name:"ip_address",type:"string"},{name:"port",type:"int"},{name:"secret",type:"flags.10?bytes"}],type:"DcOption"},{id:-870702050,predicate:"config",params:[{name:"flags",type:"#"},{name:"default_p2p_contacts",type:"flags.3?true"},{name:"preload_featured_stickers",type:"flags.4?true"},{name:"revoke_pm_inbox",type:"flags.6?true"},{name:"blocked_mode",type:"flags.8?true"},{name:"force_try_ipv6",type:"flags.14?true"},{name:"date",type:"int"},{name:"expires",type:"int"},{name:"test_mode",type:"Bool"},{name:"this_dc",type:"int"},{name:"dc_options",type:"Vector<DcOption>"},{name:"dc_txt_domain_name",type:"string"},{name:"chat_size_max",type:"int"},{name:"megagroup_size_max",type:"int"},{name:"forwarded_count_max",type:"int"},{name:"online_update_period_ms",type:"int"},{name:"offline_blur_timeout_ms",type:"int"},{name:"offline_idle_timeout_ms",type:"int"},{name:"online_cloud_timeout_ms",type:"int"},{name:"notify_cloud_delay_ms",type:"int"},{name:"notify_default_delay_ms",type:"int"},{name:"push_chat_period_ms",type:"int"},{name:"push_chat_limit",type:"int"},{name:"edit_time_limit",type:"int"},{name:"revoke_time_limit",type:"int"},{name:"revoke_pm_time_limit",type:"int"},{name:"rating_e_decay",type:"int"},{name:"stickers_recent_limit",type:"int"},{name:"channels_read_media_period",type:"int"},{name:"tmp_sessions",type:"flags.0?int"},{name:"call_receive_timeout_ms",type:"int"},{name:"call_ring_timeout_ms",type:"int"},{name:"call_connect_timeout_ms",type:"int"},{name:"call_packet_timeout_ms",type:"int"},{name:"me_url_prefix",type:"string"},{name:"autoupdate_url_prefix",type:"flags.7?string"},{name:"gif_search_username",type:"flags.9?string"},{name:"venue_search_username",type:"flags.10?string"},{name:"img_search_username",type:"flags.11?string"},{name:"static_maps_provider",type:"flags.12?string"},{name:"caption_length_max",type:"int"},{name:"message_length_max",type:"int"},{name:"webfile_dc_id",type:"int"},{name:"suggested_lang_code",type:"flags.2?string"},{name:"lang_pack_version",type:"flags.2?int"},{name:"base_lang_pack_version",type:"flags.2?int"},{name:"reactions_default",type:"flags.15?Reaction"},{name:"autologin_token",type:"flags.16?string"}],type:"Config"},{id:-1910892683,predicate:"nearestDc",params:[{name:"country",type:"string"},{name:"this_dc",type:"int"},{name:"nearest_dc",type:"int"}],type:"NearestDc"},{id:-860107216,predicate:"help.appUpdate",params:[{name:"flags",type:"#"},{name:"can_not_skip",type:"flags.0?true"},{name:"id",type:"int"},{name:"version",type:"string"},{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"document",type:"flags.1?Document"},{name:"url",type:"flags.2?string"},{name:"sticker",type:"flags.3?Document"}],type:"help.AppUpdate"},{id:-1000708810,predicate:"help.noAppUpdate",params:[],type:"help.AppUpdate"},{id:415997816,predicate:"help.inviteText",params:[{name:"message",type:"string"}],type:"help.InviteText"},{id:314359194,predicate:"updateNewEncryptedMessage",params:[{name:"message",type:"EncryptedMessage"},{name:"qts",type:"int"}],type:"Update"},{id:386986326,predicate:"updateEncryptedChatTyping",params:[{name:"chat_id",type:"int"}],type:"Update"},{id:-1264392051,predicate:"updateEncryption",params:[{name:"chat",type:"EncryptedChat"},{name:"date",type:"int"}],type:"Update"},{id:956179895,predicate:"updateEncryptedMessagesRead",params:[{name:"chat_id",type:"int"},{name:"max_date",type:"int"},{name:"date",type:"int"}],type:"Update"},{id:-1417756512,predicate:"encryptedChatEmpty",params:[{name:"id",type:"int"}],type:"EncryptedChat"},{id:1722964307,predicate:"encryptedChatWaiting",params:[{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"}],type:"EncryptedChat"},{id:1223809356,predicate:"encryptedChatRequested",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a",type:"bytes"}],type:"EncryptedChat"},{id:1643173063,predicate:"encryptedChat",params:[{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_or_b",type:"bytes"},{name:"key_fingerprint",type:"long"}],type:"EncryptedChat"},{id:505183301,predicate:"encryptedChatDiscarded",params:[{name:"flags",type:"#"},{name:"history_deleted",type:"flags.0?true"},{name:"id",type:"int"}],type:"EncryptedChat"},{id:-247351839,predicate:"inputEncryptedChat",params:[{name:"chat_id",type:"int"},{name:"access_hash",type:"long"}],type:"InputEncryptedChat"},{id:-1038136962,predicate:"encryptedFileEmpty",params:[],type:"EncryptedFile"},{id:-1476358952,predicate:"encryptedFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"size",type:"long"},{name:"dc_id",type:"int"},{name:"key_fingerprint",type:"int"}],type:"EncryptedFile"},{id:406307684,predicate:"inputEncryptedFileEmpty",params:[],type:"InputEncryptedFile"},{id:1690108678,predicate:"inputEncryptedFileUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"md5_checksum",type:"string"},{name:"key_fingerprint",type:"int"}],type:"InputEncryptedFile"},{id:1511503333,predicate:"inputEncryptedFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputEncryptedFile"},{id:-182231723,predicate:"inputEncryptedFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputFileLocation"},{id:-317144808,predicate:"encryptedMessage",params:[{name:"random_id",type:"long"},{name:"chat_id",type:"int"},{name:"date",type:"int"},{name:"bytes",type:"bytes"},{name:"file",type:"EncryptedFile"}],type:"EncryptedMessage"},{id:594758406,predicate:"encryptedMessageService",params:[{name:"random_id",type:"long"},{name:"chat_id",type:"int"},{name:"date",type:"int"},{name:"bytes",type:"bytes"}],type:"EncryptedMessage"},{id:-1058912715,predicate:"messages.dhConfigNotModified",params:[{name:"random",type:"bytes"}],type:"messages.DhConfig"},{id:740433629,predicate:"messages.dhConfig",params:[{name:"g",type:"int"},{name:"p",type:"bytes"},{name:"version",type:"int"},{name:"random",type:"bytes"}],type:"messages.DhConfig"},{id:1443858741,predicate:"messages.sentEncryptedMessage",params:[{name:"date",type:"int"}],type:"messages.SentEncryptedMessage"},{id:-1802240206,predicate:"messages.sentEncryptedFile",params:[{name:"date",type:"int"},{name:"file",type:"EncryptedFile"}],type:"messages.SentEncryptedMessage"},{id:-95482955,predicate:"inputFileBig",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"name",type:"string"}],type:"InputFile"},{id:767652808,predicate:"inputEncryptedFileBigUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"key_fingerprint",type:"int"}],type:"InputEncryptedFile"},{id:1037718609,predicate:"updateChatParticipantAdd",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"},{name:"version",type:"int"}],type:"Update"},{id:-483443337,predicate:"updateChatParticipantDelete",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"version",type:"int"}],type:"Update"},{id:-1906403213,predicate:"updateDcOptions",params:[{name:"dc_options",type:"Vector<DcOption>"}],type:"Update"},{id:1530447553,predicate:"inputMediaUploadedDocument",params:[{name:"flags",type:"#"},{name:"nosound_video",type:"flags.3?true"},{name:"force_file",type:"flags.4?true"},{name:"spoiler",type:"flags.5?true"},{name:"file",type:"InputFile"},{name:"thumb",type:"flags.2?InputFile"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"},{name:"stickers",type:"flags.0?Vector<InputDocument>"},{name:"ttl_seconds",type:"flags.1?int"}],type:"InputMedia"},{id:860303448,predicate:"inputMediaDocument",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.2?true"},{name:"id",type:"InputDocument"},{name:"ttl_seconds",type:"flags.0?int"},{name:"query",type:"flags.1?string"}],type:"InputMedia"},{id:-1666158377,predicate:"messageMediaDocument",params:[{name:"flags",type:"#"},{name:"nopremium",type:"flags.3?true"},{name:"spoiler",type:"flags.4?true"},{name:"document",type:"flags.0?Document"},{name:"ttl_seconds",type:"flags.2?int"}],type:"MessageMedia"},{id:1928391342,predicate:"inputDocumentEmpty",params:[],type:"InputDocument"},{id:448771445,predicate:"inputDocument",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputDocument"},{id:-1160743548,predicate:"inputDocumentFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"thumb_size",type:"string"}],type:"InputFileLocation"},{id:922273905,predicate:"documentEmpty",params:[{name:"id",type:"long"}],type:"Document"},{id:-1881881384,predicate:"document",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"date",type:"int"},{name:"mime_type",type:"string"},{name:"size",type:"long"},{name:"thumbs",type:"flags.0?Vector<PhotoSize>"},{name:"video_thumbs",type:"flags.1?Vector<VideoSize>"},{name:"dc_id",type:"int"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"Document"},{id:398898678,predicate:"help.support",params:[{name:"phone_number",type:"string"},{name:"user",type:"User"}],type:"help.Support"},{id:-1613493288,predicate:"notifyPeer",params:[{name:"peer",type:"Peer"}],type:"NotifyPeer"},{id:-1261946036,predicate:"notifyUsers",params:[],type:"NotifyPeer"},{id:-1073230141,predicate:"notifyChats",params:[],type:"NotifyPeer"},{id:-1094555409,predicate:"updateNotifySettings",params:[{name:"peer",type:"NotifyPeer"},{name:"notify_settings",type:"PeerNotifySettings"}],type:"Update"},{id:381645902,predicate:"sendMessageTypingAction",params:[],type:"SendMessageAction"},{id:-44119819,predicate:"sendMessageCancelAction",params:[],type:"SendMessageAction"},{id:-1584933265,predicate:"sendMessageRecordVideoAction",params:[],type:"SendMessageAction"},{id:-378127636,predicate:"sendMessageUploadVideoAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-718310409,predicate:"sendMessageRecordAudioAction",params:[],type:"SendMessageAction"},{id:-212740181,predicate:"sendMessageUploadAudioAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-774682074,predicate:"sendMessageUploadPhotoAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-1441998364,predicate:"sendMessageUploadDocumentAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:393186209,predicate:"sendMessageGeoLocationAction",params:[],type:"SendMessageAction"},{id:1653390447,predicate:"sendMessageChooseContactAction",params:[],type:"SendMessageAction"},{id:-1290580579,predicate:"contacts.found",params:[{name:"my_results",type:"Vector<Peer>"},{name:"results",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Found"},{id:-337352679,predicate:"updateServiceNotification",params:[{name:"flags",type:"#"},{name:"popup",type:"flags.0?true"},{name:"inbox_date",type:"flags.1?int"},{name:"type",type:"string"},{name:"message",type:"string"},{name:"media",type:"MessageMedia"},{name:"entities",type:"Vector<MessageEntity>"}],type:"Update"},{id:-496024847,predicate:"userStatusRecently",params:[],type:"UserStatus"},{id:129960444,predicate:"userStatusLastWeek",params:[],type:"UserStatus"},{id:2011940674,predicate:"userStatusLastMonth",params:[],type:"UserStatus"},{id:-298113238,predicate:"updatePrivacy",params:[{name:"key",type:"PrivacyKey"},{name:"rules",type:"Vector<PrivacyRule>"}],type:"Update"},{id:1335282456,predicate:"inputPrivacyKeyStatusTimestamp",params:[],type:"InputPrivacyKey"},{id:-1137792208,predicate:"privacyKeyStatusTimestamp",params:[],type:"PrivacyKey"},{id:218751099,predicate:"inputPrivacyValueAllowContacts",params:[],type:"InputPrivacyRule"},{id:407582158,predicate:"inputPrivacyValueAllowAll",params:[],type:"InputPrivacyRule"},{id:320652927,predicate:"inputPrivacyValueAllowUsers",params:[{name:"users",type:"Vector<InputUser>"}],type:"InputPrivacyRule"},{id:195371015,predicate:"inputPrivacyValueDisallowContacts",params:[],type:"InputPrivacyRule"},{id:-697604407,predicate:"inputPrivacyValueDisallowAll",params:[],type:"InputPrivacyRule"},{id:-1877932953,predicate:"inputPrivacyValueDisallowUsers",params:[{name:"users",type:"Vector<InputUser>"}],type:"InputPrivacyRule"},{id:-123988,predicate:"privacyValueAllowContacts",params:[],type:"PrivacyRule"},{id:1698855810,predicate:"privacyValueAllowAll",params:[],type:"PrivacyRule"},{id:-1198497870,predicate:"privacyValueAllowUsers",params:[{name:"users",type:"Vector<long>"}],type:"PrivacyRule"},{id:-125240806,predicate:"privacyValueDisallowContacts",params:[],type:"PrivacyRule"},{id:-1955338397,predicate:"privacyValueDisallowAll",params:[],type:"PrivacyRule"},{id:-463335103,predicate:"privacyValueDisallowUsers",params:[{name:"users",type:"Vector<long>"}],type:"PrivacyRule"},{id:1352683077,predicate:"account.privacyRules",params:[{name:"rules",type:"Vector<PrivacyRule>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.PrivacyRules"},{id:-1194283041,predicate:"accountDaysTTL",params:[{name:"days",type:"int"}],type:"AccountDaysTTL"},{id:88680979,predicate:"updateUserPhone",params:[{name:"user_id",type:"long"},{name:"phone",type:"string"}],type:"Update"},{id:1815593308,predicate:"documentAttributeImageSize",params:[{name:"w",type:"int"},{name:"h",type:"int"}],type:"DocumentAttribute"},{id:297109817,predicate:"documentAttributeAnimated",params:[],type:"DocumentAttribute"},{id:1662637586,predicate:"documentAttributeSticker",params:[{name:"flags",type:"#"},{name:"mask",type:"flags.1?true"},{name:"alt",type:"string"},{name:"stickerset",type:"InputStickerSet"},{name:"mask_coords",type:"flags.0?MaskCoords"}],type:"DocumentAttribute"},{id:250621158,predicate:"documentAttributeVideo",params:[{name:"flags",type:"#"},{name:"round_message",type:"flags.0?true"},{name:"supports_streaming",type:"flags.1?true"},{name:"duration",type:"int"},{name:"w",type:"int"},{name:"h",type:"int"}],type:"DocumentAttribute"},{id:-1739392570,predicate:"documentAttributeAudio",params:[{name:"flags",type:"#"},{name:"voice",type:"flags.10?true"},{name:"duration",type:"int"},{name:"title",type:"flags.0?string"},{name:"performer",type:"flags.1?string"},{name:"waveform",type:"flags.2?bytes"}],type:"DocumentAttribute"},{id:358154344,predicate:"documentAttributeFilename",params:[{name:"file_name",type:"string"}],type:"DocumentAttribute"},{id:-244016606,predicate:"messages.stickersNotModified",params:[],type:"messages.Stickers"},{id:816245886,predicate:"messages.stickers",params:[{name:"hash",type:"long"},{name:"stickers",type:"Vector<Document>"}],type:"messages.Stickers"},{id:313694676,predicate:"stickerPack",params:[{name:"emoticon",type:"string"},{name:"documents",type:"Vector<long>"}],type:"StickerPack"},{id:-395967805,predicate:"messages.allStickersNotModified",params:[],type:"messages.AllStickers"},{id:-843329861,predicate:"messages.allStickers",params:[{name:"hash",type:"long"},{name:"sets",type:"Vector<StickerSet>"}],type:"messages.AllStickers"},{id:-1667805217,predicate:"updateReadHistoryInbox",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"peer",type:"Peer"},{name:"max_id",type:"int"},{name:"still_unread_count",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:791617983,predicate:"updateReadHistoryOutbox",params:[{name:"peer",type:"Peer"},{name:"max_id",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-2066640507,predicate:"messages.affectedMessages",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"messages.AffectedMessages"},{id:2139689491,predicate:"updateWebPage",params:[{name:"webpage",type:"WebPage"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-350980120,predicate:"webPageEmpty",params:[{name:"id",type:"long"}],type:"WebPage"},{id:-981018084,predicate:"webPagePending",params:[{name:"id",type:"long"},{name:"date",type:"int"}],type:"WebPage"},{id:-392411726,predicate:"webPage",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"url",type:"string"},{name:"display_url",type:"string"},{name:"hash",type:"int"},{name:"type",type:"flags.0?string"},{name:"site_name",type:"flags.1?string"},{name:"title",type:"flags.2?string"},{name:"description",type:"flags.3?string"},{name:"photo",type:"flags.4?Photo"},{name:"embed_url",type:"flags.5?string"},{name:"embed_type",type:"flags.5?string"},{name:"embed_width",type:"flags.6?int"},{name:"embed_height",type:"flags.6?int"},{name:"duration",type:"flags.7?int"},{name:"author",type:"flags.8?string"},{name:"document",type:"flags.9?Document"},{name:"cached_page",type:"flags.10?Page"},{name:"attributes",type:"flags.12?Vector<WebPageAttribute>"}],type:"WebPage"},{id:-1557277184,predicate:"messageMediaWebPage",params:[{name:"webpage",type:"WebPage"}],type:"MessageMedia"},{id:-1392388579,predicate:"authorization",params:[{name:"flags",type:"#"},{name:"current",type:"flags.0?true"},{name:"official_app",type:"flags.1?true"},{name:"password_pending",type:"flags.2?true"},{name:"encrypted_requests_disabled",type:"flags.3?true"},{name:"call_requests_disabled",type:"flags.4?true"},{name:"hash",type:"long"},{name:"device_model",type:"string"},{name:"platform",type:"string"},{name:"system_version",type:"string"},{name:"api_id",type:"int"},{name:"app_name",type:"string"},{name:"app_version",type:"string"},{name:"date_created",type:"int"},{name:"date_active",type:"int"},{name:"ip",type:"string"},{name:"country",type:"string"},{name:"region",type:"string"}],type:"Authorization"},{id:1275039392,predicate:"account.authorizations",params:[{name:"authorization_ttl_days",type:"int"},{name:"authorizations",type:"Vector<Authorization>"}],type:"account.Authorizations"},{id:-1787080453,predicate:"account.password",params:[{name:"flags",type:"#"},{name:"has_recovery",type:"flags.0?true"},{name:"has_secure_values",type:"flags.1?true"},{name:"has_password",type:"flags.2?true"},{name:"current_algo",type:"flags.2?PasswordKdfAlgo"},{name:"srp_B",type:"flags.2?bytes"},{name:"srp_id",type:"flags.2?long"},{name:"hint",type:"flags.3?string"},{name:"email_unconfirmed_pattern",type:"flags.4?string"},{name:"new_algo",type:"PasswordKdfAlgo"},{name:"new_secure_algo",type:"SecurePasswordKdfAlgo"},{name:"secure_random",type:"bytes"},{name:"pending_reset_date",type:"flags.5?int"},{name:"login_email_pattern",type:"flags.6?string"}],type:"account.Password"},{id:-1705233435,predicate:"account.passwordSettings",params:[{name:"flags",type:"#"},{name:"email",type:"flags.0?string"},{name:"secure_settings",type:"flags.1?SecureSecretSettings"}],type:"account.PasswordSettings"},{id:-1036572727,predicate:"account.passwordInputSettings",params:[{name:"flags",type:"#"},{name:"new_algo",type:"flags.0?PasswordKdfAlgo"},{name:"new_password_hash",type:"flags.0?bytes"},{name:"hint",type:"flags.0?string"},{name:"email",type:"flags.1?string"},{name:"new_secure_settings",type:"flags.2?SecureSecretSettings"}],type:"account.PasswordInputSettings"},{id:326715557,predicate:"auth.passwordRecovery",params:[{name:"email_pattern",type:"string"}],type:"auth.PasswordRecovery"},{id:-1052959727,predicate:"inputMediaVenue",params:[{name:"geo_point",type:"InputGeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"InputMedia"},{id:784356159,predicate:"messageMediaVenue",params:[{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"MessageMedia"},{id:-1551583367,predicate:"receivedNotifyMessage",params:[{name:"id",type:"int"},{name:"flags",type:"int"}],type:"ReceivedNotifyMessage"},{id:179611673,predicate:"chatInviteExported",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.0?true"},{name:"permanent",type:"flags.5?true"},{name:"request_needed",type:"flags.6?true"},{name:"link",type:"string"},{name:"admin_id",type:"long"},{name:"date",type:"int"},{name:"start_date",type:"flags.4?int"},{name:"expire_date",type:"flags.1?int"},{name:"usage_limit",type:"flags.2?int"},{name:"usage",type:"flags.3?int"},{name:"requested",type:"flags.7?int"},{name:"title",type:"flags.8?string"}],type:"ExportedChatInvite"},{id:1516793212,predicate:"chatInviteAlready",params:[{name:"chat",type:"Chat"}],type:"ChatInvite"},{id:806110401,predicate:"chatInvite",params:[{name:"flags",type:"#"},{name:"channel",type:"flags.0?true"},{name:"broadcast",type:"flags.1?true"},{name:"public",type:"flags.2?true"},{name:"megagroup",type:"flags.3?true"},{name:"request_needed",type:"flags.6?true"},{name:"title",type:"string"},{name:"about",type:"flags.5?string"},{name:"photo",type:"Photo"},{name:"participants_count",type:"int"},{name:"participants",type:"flags.4?Vector<User>"}],type:"ChatInvite"},{id:51520707,predicate:"messageActionChatJoinedByLink",params:[{name:"inviter_id",type:"long"}],type:"MessageAction"},{id:1757493555,predicate:"updateReadMessagesContents",params:[{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-4838507,predicate:"inputStickerSetEmpty",params:[],type:"InputStickerSet"},{id:-1645763991,predicate:"inputStickerSetID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputStickerSet"},{id:-2044933984,predicate:"inputStickerSetShortName",params:[{name:"short_name",type:"string"}],type:"InputStickerSet"},{id:768691932,predicate:"stickerSet",params:[{name:"flags",type:"#"},{name:"archived",type:"flags.1?true"},{name:"official",type:"flags.2?true"},{name:"masks",type:"flags.3?true"},{name:"animated",type:"flags.5?true"},{name:"videos",type:"flags.6?true"},{name:"emojis",type:"flags.7?true"},{name:"installed_date",type:"flags.0?int"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"title",type:"string"},{name:"short_name",type:"string"},{name:"thumbs",type:"flags.4?Vector<PhotoSize>"},{name:"thumb_dc_id",type:"flags.4?int"},{name:"thumb_version",type:"flags.4?int"},{name:"thumb_document_id",type:"flags.8?long"},{name:"count",type:"int"},{name:"hash",type:"int"}],type:"StickerSet"},{id:1846886166,predicate:"messages.stickerSet",params:[{name:"set",type:"StickerSet"},{name:"packs",type:"Vector<StickerPack>"},{name:"keywords",type:"Vector<StickerKeyword>"},{name:"documents",type:"Vector<Document>"}],type:"messages.StickerSet"},{id:-1885878744,predicate:"user",params:[{name:"flags",type:"#"},{name:"self",type:"flags.10?true"},{name:"contact",type:"flags.11?true"},{name:"mutual_contact",type:"flags.12?true"},{name:"deleted",type:"flags.13?true"},{name:"bot",type:"flags.14?true"},{name:"bot_chat_history",type:"flags.15?true"},{name:"bot_nochats",type:"flags.16?true"},{name:"verified",type:"flags.17?true"},{name:"restricted",type:"flags.18?true"},{name:"min",type:"flags.20?true"},{name:"bot_inline_geo",type:"flags.21?true"},{name:"support",type:"flags.23?true"},{name:"scam",type:"flags.24?true"},{name:"apply_min_photo",type:"flags.25?true"},{name:"fake",type:"flags.26?true"},{name:"bot_attach_menu",type:"flags.27?true"},{name:"premium",type:"flags.28?true"},{name:"attach_menu_enabled",type:"flags.29?true"},{name:"flags2",type:"#"},{name:"bot_can_edit",type:"flags2.1?true"},{name:"id",type:"long"},{name:"access_hash",type:"flags.0?long"},{name:"first_name",type:"flags.1?string"},{name:"last_name",type:"flags.2?string"},{name:"username",type:"flags.3?string"},{name:"phone",type:"flags.4?string"},{name:"photo",type:"flags.5?UserProfilePhoto"},{name:"status",type:"flags.6?UserStatus"},{name:"bot_info_version",type:"flags.14?int"},{name:"restriction_reason",type:"flags.18?Vector<RestrictionReason>"},{name:"bot_inline_placeholder",type:"flags.19?string"},{name:"lang_code",type:"flags.22?string"},{name:"emoji_status",type:"flags.30?EmojiStatus"},{name:"usernames",type:"flags2.0?Vector<Username>"}],type:"User"},{id:-1032140601,predicate:"botCommand",params:[{name:"command",type:"string"},{name:"description",type:"string"}],type:"BotCommand"},{id:-1892676777,predicate:"botInfo",params:[{name:"flags",type:"#"},{name:"user_id",type:"flags.0?long"},{name:"description",type:"flags.1?string"},{name:"description_photo",type:"flags.4?Photo"},{name:"description_document",type:"flags.5?Document"},{name:"commands",type:"flags.2?Vector<BotCommand>"},{name:"menu_button",type:"flags.3?BotMenuButton"}],type:"BotInfo"},{id:-1560655744,predicate:"keyboardButton",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:2002815875,predicate:"keyboardButtonRow",params:[{name:"buttons",type:"Vector<KeyboardButton>"}],type:"KeyboardButtonRow"},{id:-1606526075,predicate:"replyKeyboardHide",params:[{name:"flags",type:"#"},{name:"selective",type:"flags.2?true"}],type:"ReplyMarkup"},{id:-2035021048,predicate:"replyKeyboardForceReply",params:[{name:"flags",type:"#"},{name:"single_use",type:"flags.1?true"},{name:"selective",type:"flags.2?true"},{name:"placeholder",type:"flags.3?string"}],type:"ReplyMarkup"},{id:-2049074735,predicate:"replyKeyboardMarkup",params:[{name:"flags",type:"#"},{name:"resize",type:"flags.0?true"},{name:"single_use",type:"flags.1?true"},{name:"selective",type:"flags.2?true"},{name:"persistent",type:"flags.4?true"},{name:"rows",type:"Vector<KeyboardButtonRow>"},{name:"placeholder",type:"flags.3?string"}],type:"ReplyMarkup"},{id:-571955892,predicate:"inputPeerUser",params:[{name:"user_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPeer"},{id:-233744186,predicate:"inputUser",params:[{name:"user_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputUser"},{id:-1148011883,predicate:"messageEntityUnknown",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-100378723,predicate:"messageEntityMention",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1868782349,predicate:"messageEntityHashtag",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1827637959,predicate:"messageEntityBotCommand",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1859134776,predicate:"messageEntityUrl",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1692693954,predicate:"messageEntityEmail",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1117713463,predicate:"messageEntityBold",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-2106619040,predicate:"messageEntityItalic",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:681706865,predicate:"messageEntityCode",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1938967520,predicate:"messageEntityPre",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"language",type:"string"}],type:"MessageEntity"},{id:1990644519,predicate:"messageEntityTextUrl",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"url",type:"string"}],type:"MessageEntity"},{id:-1877614335,predicate:"updateShortSentMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"id",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"media",type:"flags.9?MessageMedia"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:-292807034,predicate:"inputChannelEmpty",params:[],type:"InputChannel"},{id:-212145112,predicate:"inputChannel",params:[{name:"channel_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputChannel"},{id:-1566230754,predicate:"peerChannel",params:[{name:"channel_id",type:"long"}],type:"Peer"},{id:666680316,predicate:"inputPeerChannel",params:[{name:"channel_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPeer"},{id:-2094689180,predicate:"channel",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"left",type:"flags.2?true"},{name:"broadcast",type:"flags.5?true"},{name:"verified",type:"flags.7?true"},{name:"megagroup",type:"flags.8?true"},{name:"restricted",type:"flags.9?true"},{name:"signatures",type:"flags.11?true"},{name:"min",type:"flags.12?true"},{name:"scam",type:"flags.19?true"},{name:"has_link",type:"flags.20?true"},{name:"has_geo",type:"flags.21?true"},{name:"slowmode_enabled",type:"flags.22?true"},{name:"call_active",type:"flags.23?true"},{name:"call_not_empty",type:"flags.24?true"},{name:"fake",type:"flags.25?true"},{name:"gigagroup",type:"flags.26?true"},{name:"noforwards",type:"flags.27?true"},{name:"join_to_send",type:"flags.28?true"},{name:"join_request",type:"flags.29?true"},{name:"forum",type:"flags.30?true"},{name:"flags2",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"flags.13?long"},{name:"title",type:"string"},{name:"username",type:"flags.6?string"},{name:"photo",type:"ChatPhoto"},{name:"date",type:"int"},{name:"restriction_reason",type:"flags.9?Vector<RestrictionReason>"},{name:"admin_rights",type:"flags.14?ChatAdminRights"},{name:"banned_rights",type:"flags.15?ChatBannedRights"},{name:"default_banned_rights",type:"flags.18?ChatBannedRights"},{name:"participants_count",type:"flags.17?int"},{name:"usernames",type:"flags2.0?Vector<Username>"}],type:"Chat"},{id:399807445,predicate:"channelForbidden",params:[{name:"flags",type:"#"},{name:"broadcast",type:"flags.5?true"},{name:"megagroup",type:"flags.8?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"title",type:"string"},{name:"until_date",type:"flags.16?int"}],type:"Chat"},{id:2131196633,predicate:"contacts.resolvedPeer",params:[{name:"peer",type:"Peer"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.ResolvedPeer"},{id:-231385849,predicate:"channelFull",params:[{name:"flags",type:"#"},{name:"can_view_participants",type:"flags.3?true"},{name:"can_set_username",type:"flags.6?true"},{name:"can_set_stickers",type:"flags.7?true"},{name:"hidden_prehistory",type:"flags.10?true"},{name:"can_set_location",type:"flags.16?true"},{name:"has_scheduled",type:"flags.19?true"},{name:"can_view_stats",type:"flags.20?true"},{name:"blocked",type:"flags.22?true"},{name:"flags2",type:"#"},{name:"can_delete_channel",type:"flags2.0?true"},{name:"antispam",type:"flags2.1?true"},{name:"participants_hidden",type:"flags2.2?true"},{name:"translations_disabled",type:"flags2.3?true"},{name:"id",type:"long"},{name:"about",type:"string"},{name:"participants_count",type:"flags.0?int"},{name:"admins_count",type:"flags.1?int"},{name:"kicked_count",type:"flags.2?int"},{name:"banned_count",type:"flags.2?int"},{name:"online_count",type:"flags.13?int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"chat_photo",type:"Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"exported_invite",type:"flags.23?ExportedChatInvite"},{name:"bot_info",type:"Vector<BotInfo>"},{name:"migrated_from_chat_id",type:"flags.4?long"},{name:"migrated_from_max_id",type:"flags.4?int"},{name:"pinned_msg_id",type:"flags.5?int"},{name:"stickerset",type:"flags.8?StickerSet"},{name:"available_min_id",type:"flags.9?int"},{name:"folder_id",type:"flags.11?int"},{name:"linked_chat_id",type:"flags.14?long"},{name:"location",type:"flags.15?ChannelLocation"},{name:"slowmode_seconds",type:"flags.17?int"},{name:"slowmode_next_send_date",type:"flags.18?int"},{name:"stats_dc",type:"flags.12?int"},{name:"pts",type:"int"},{name:"call",type:"flags.21?InputGroupCall"},{name:"ttl_period",type:"flags.24?int"},{name:"pending_suggestions",type:"flags.25?Vector<string>"},{name:"groupcall_default_join_as",type:"flags.26?Peer"},{name:"theme_emoticon",type:"flags.27?string"},{name:"requests_pending",type:"flags.28?int"},{name:"recent_requesters",type:"flags.28?Vector<long>"},{name:"default_send_as",type:"flags.29?Peer"},{name:"available_reactions",type:"flags.30?ChatReactions"}],type:"ChatFull"},{id:182649427,predicate:"messageRange",params:[{name:"min_id",type:"int"},{name:"max_id",type:"int"}],type:"MessageRange"},{id:-948520370,predicate:"messages.channelMessages",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"pts",type:"int"},{name:"count",type:"int"},{name:"offset_id_offset",type:"flags.2?int"},{name:"messages",type:"Vector<Message>"},{name:"topics",type:"Vector<ForumTopic>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:-1781355374,predicate:"messageActionChannelCreate",params:[{name:"title",type:"string"}],type:"MessageAction"},{id:277713951,predicate:"updateChannelTooLong",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"pts",type:"flags.0?int"}],type:"Update"},{id:1666927625,predicate:"updateChannel",params:[{name:"channel_id",type:"long"}],type:"Update"},{id:1656358105,predicate:"updateNewChannelMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1842450928,predicate:"updateReadChannelInbox",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"channel_id",type:"long"},{name:"max_id",type:"int"},{name:"still_unread_count",type:"int"},{name:"pts",type:"int"}],type:"Update"},{id:-1020437742,predicate:"updateDeleteChannelMessages",params:[{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-232346616,predicate:"updateChannelMessageViews",params:[{name:"channel_id",type:"long"},{name:"id",type:"int"},{name:"views",type:"int"}],type:"Update"},{id:1041346555,predicate:"updates.channelDifferenceEmpty",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"pts",type:"int"},{name:"timeout",type:"flags.1?int"}],type:"updates.ChannelDifference"},{id:-1531132162,predicate:"updates.channelDifferenceTooLong",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"timeout",type:"flags.1?int"},{name:"dialog",type:"Dialog"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"updates.ChannelDifference"},{id:543450958,predicate:"updates.channelDifference",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"pts",type:"int"},{name:"timeout",type:"flags.1?int"},{name:"new_messages",type:"Vector<Message>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"updates.ChannelDifference"},{id:-1798033689,predicate:"channelMessagesFilterEmpty",params:[],type:"ChannelMessagesFilter"},{id:-847783593,predicate:"channelMessagesFilter",params:[{name:"flags",type:"#"},{name:"exclude_new_messages",type:"flags.1?true"},{name:"ranges",type:"Vector<MessageRange>"}],type:"ChannelMessagesFilter"},{id:-1072953408,predicate:"channelParticipant",params:[{name:"user_id",type:"long"},{name:"date",type:"int"}],type:"ChannelParticipant"},{id:900251559,predicate:"channelParticipantSelf",params:[{name:"flags",type:"#"},{name:"via_request",type:"flags.0?true"},{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChannelParticipant"},{id:803602899,predicate:"channelParticipantCreator",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"flags.0?string"}],type:"ChannelParticipant"},{id:-566281095,predicate:"channelParticipantsRecent",params:[],type:"ChannelParticipantsFilter"},{id:-1268741783,predicate:"channelParticipantsAdmins",params:[],type:"ChannelParticipantsFilter"},{id:-1548400251,predicate:"channelParticipantsKicked",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-1699676497,predicate:"channels.channelParticipants",params:[{name:"count",type:"int"},{name:"participants",type:"Vector<ChannelParticipant>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.ChannelParticipants"},{id:-541588713,predicate:"channels.channelParticipant",params:[{name:"participant",type:"ChannelParticipant"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.ChannelParticipant"},{id:-462696732,predicate:"chatParticipantCreator",params:[{name:"user_id",type:"long"}],type:"ChatParticipant"},{id:-1600962725,predicate:"chatParticipantAdmin",params:[{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChatParticipant"},{id:-674602590,predicate:"updateChatParticipantAdmin",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"is_admin",type:"Bool"},{name:"version",type:"int"}],type:"Update"},{id:-519864430,predicate:"messageActionChatMigrateTo",params:[{name:"channel_id",type:"long"}],type:"MessageAction"},{id:-365344535,predicate:"messageActionChannelMigrateFrom",params:[{name:"title",type:"string"},{name:"chat_id",type:"long"}],type:"MessageAction"},{id:-1328445861,predicate:"channelParticipantsBots",params:[],type:"ChannelParticipantsFilter"},{id:2013922064,predicate:"help.termsOfService",params:[{name:"flags",type:"#"},{name:"popup",type:"flags.0?true"},{name:"id",type:"DataJSON"},{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"min_age_confirm",type:"flags.1?int"}],type:"help.TermsOfService"},{id:1753886890,predicate:"updateNewStickerSet",params:[{name:"stickerset",type:"messages.StickerSet"}],type:"Update"},{id:196268545,predicate:"updateStickerSetsOrder",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"order",type:"Vector<long>"}],type:"Update"},{id:834816008,predicate:"updateStickerSets",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"}],type:"Update"},{id:-402498398,predicate:"messages.savedGifsNotModified",params:[],type:"messages.SavedGifs"},{id:-2069878259,predicate:"messages.savedGifs",params:[{name:"hash",type:"long"},{name:"gifs",type:"Vector<Document>"}],type:"messages.SavedGifs"},{id:-1821035490,predicate:"updateSavedGifs",params:[],type:"Update"},{id:864077702,predicate:"inputBotInlineMessageMediaAuto",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1036876423,predicate:"inputBotInlineMessageText",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.0?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-2000710887,predicate:"inputBotInlineResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"url",type:"flags.3?string"},{name:"thumb",type:"flags.4?InputWebDocument"},{name:"content",type:"flags.5?InputWebDocument"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:1984755728,predicate:"botInlineMessageMediaAuto",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1937807902,predicate:"botInlineMessageText",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.0?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:295067450,predicate:"botInlineResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"url",type:"flags.3?string"},{name:"thumb",type:"flags.4?WebDocument"},{name:"content",type:"flags.5?WebDocument"},{name:"send_message",type:"BotInlineMessage"}],type:"BotInlineResult"},{id:-534646026,predicate:"messages.botResults",params:[{name:"flags",type:"#"},{name:"gallery",type:"flags.0?true"},{name:"query_id",type:"long"},{name:"next_offset",type:"flags.1?string"},{name:"switch_pm",type:"flags.2?InlineBotSwitchPM"},{name:"switch_webview",type:"flags.3?InlineBotWebView"},{name:"results",type:"Vector<BotInlineResult>"},{name:"cache_time",type:"int"},{name:"users",type:"Vector<User>"}],type:"messages.BotResults"},{id:1232025500,predicate:"updateBotInlineQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"query",type:"string"},{name:"geo",type:"flags.0?GeoPoint"},{name:"peer_type",type:"flags.1?InlineQueryPeerType"},{name:"offset",type:"string"}],type:"Update"},{id:317794823,predicate:"updateBotInlineSend",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"query",type:"string"},{name:"geo",type:"flags.0?GeoPoint"},{name:"id",type:"string"},{name:"msg_id",type:"flags.1?InputBotInlineMessageID"}],type:"Update"},{id:1358283666,predicate:"inputMessagesFilterVoice",params:[],type:"MessagesFilter"},{id:928101534,predicate:"inputMessagesFilterMusic",params:[],type:"MessagesFilter"},{id:-1107622874,predicate:"inputPrivacyKeyChatInvite",params:[],type:"InputPrivacyKey"},{id:1343122938,predicate:"privacyKeyChatInvite",params:[],type:"PrivacyKey"},{id:1571494644,predicate:"exportedMessageLink",params:[{name:"link",type:"string"},{name:"html",type:"string"}],type:"ExportedMessageLink"},{id:1601666510,predicate:"messageFwdHeader",params:[{name:"flags",type:"#"},{name:"imported",type:"flags.7?true"},{name:"from_id",type:"flags.0?Peer"},{name:"from_name",type:"flags.5?string"},{name:"date",type:"int"},{name:"channel_post",type:"flags.2?int"},{name:"post_author",type:"flags.3?string"},{name:"saved_from_peer",type:"flags.4?Peer"},{name:"saved_from_msg_id",type:"flags.4?int"},{name:"psa_type",type:"flags.6?string"}],type:"MessageFwdHeader"},{id:457133559,predicate:"updateEditChannelMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1799538451,predicate:"messageActionPinMessage",params:[],type:"MessageAction"},{id:1923290508,predicate:"auth.codeTypeSms",params:[],type:"auth.CodeType"},{id:1948046307,predicate:"auth.codeTypeCall",params:[],type:"auth.CodeType"},{id:577556219,predicate:"auth.codeTypeFlashCall",params:[],type:"auth.CodeType"},{id:1035688326,predicate:"auth.sentCodeTypeApp",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1073693790,predicate:"auth.sentCodeTypeSms",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:1398007207,predicate:"auth.sentCodeTypeCall",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1425815847,predicate:"auth.sentCodeTypeFlashCall",params:[{name:"pattern",type:"string"}],type:"auth.SentCodeType"},{id:629866245,predicate:"keyboardButtonUrl",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:901503851,predicate:"keyboardButtonCallback",params:[{name:"flags",type:"#"},{name:"requires_password",type:"flags.0?true"},{name:"text",type:"string"},{name:"data",type:"bytes"}],type:"KeyboardButton"},{id:-1318425559,predicate:"keyboardButtonRequestPhone",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-59151553,predicate:"keyboardButtonRequestGeoLocation",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1816527947,predicate:"keyboardButtonSwitchInline",params:[{name:"flags",type:"#"},{name:"same_peer",type:"flags.0?true"},{name:"text",type:"string"},{name:"query",type:"string"},{name:"peer_types",type:"flags.1?Vector<InlineQueryPeerType>"}],type:"KeyboardButton"},{id:1218642516,predicate:"replyInlineMarkup",params:[{name:"rows",type:"Vector<KeyboardButtonRow>"}],type:"ReplyMarkup"},{id:911761060,predicate:"messages.botCallbackAnswer",params:[{name:"flags",type:"#"},{name:"alert",type:"flags.1?true"},{name:"has_url",type:"flags.3?true"},{name:"native_ui",type:"flags.4?true"},{name:"message",type:"flags.0?string"},{name:"url",type:"flags.2?string"},{name:"cache_time",type:"int"}],type:"messages.BotCallbackAnswer"},{id:-1177566067,predicate:"updateBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"},{name:"game_short_name",type:"flags.1?string"}],type:"Update"},{id:649453030,predicate:"messages.messageEditData",params:[{name:"flags",type:"#"},{name:"caption",type:"flags.0?true"}],type:"messages.MessageEditData"},{id:-469536605,predicate:"updateEditMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1768777083,predicate:"inputBotInlineMessageMediaGeo",params:[{name:"flags",type:"#"},{name:"geo_point",type:"InputGeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1098628881,predicate:"inputBotInlineMessageMediaVenue",params:[{name:"flags",type:"#"},{name:"geo_point",type:"InputGeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-1494368259,predicate:"inputBotInlineMessageMediaContact",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:85477117,predicate:"botInlineMessageMediaGeo",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1970903652,predicate:"botInlineMessageMediaVenue",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:416402882,predicate:"botInlineMessageMediaContact",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1462213465,predicate:"inputBotInlineResultPhoto",params:[{name:"id",type:"string"},{name:"type",type:"string"},{name:"photo",type:"InputPhoto"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:-459324,predicate:"inputBotInlineResultDocument",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"document",type:"InputDocument"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:400266251,predicate:"botInlineMediaResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"photo",type:"flags.0?Photo"},{name:"document",type:"flags.1?Document"},{name:"title",type:"flags.2?string"},{name:"description",type:"flags.3?string"},{name:"send_message",type:"BotInlineMessage"}],type:"BotInlineResult"},{id:-1995686519,predicate:"inputBotInlineMessageID",params:[{name:"dc_id",type:"int"},{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputBotInlineMessageID"},{id:1763610706,predicate:"updateInlineBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"msg_id",type:"InputBotInlineMessageID"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"},{name:"game_short_name",type:"flags.1?string"}],type:"Update"},{id:1008755359,predicate:"inlineBotSwitchPM",params:[{name:"text",type:"string"},{name:"start_param",type:"string"}],type:"InlineBotSwitchPM"},{id:863093588,predicate:"messages.peerDialogs",params:[{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"state",type:"updates.State"}],type:"messages.PeerDialogs"},{id:-305282981,predicate:"topPeer",params:[{name:"peer",type:"Peer"},{name:"rating",type:"double"}],type:"TopPeer"},{id:-1419371685,predicate:"topPeerCategoryBotsPM",params:[],type:"TopPeerCategory"},{id:344356834,predicate:"topPeerCategoryBotsInline",params:[],type:"TopPeerCategory"},{id:104314861,predicate:"topPeerCategoryCorrespondents",params:[],type:"TopPeerCategory"},{id:-1122524854,predicate:"topPeerCategoryGroups",params:[],type:"TopPeerCategory"},{id:371037736,predicate:"topPeerCategoryChannels",params:[],type:"TopPeerCategory"},{id:-75283823,predicate:"topPeerCategoryPeers",params:[{name:"category",type:"TopPeerCategory"},{name:"count",type:"int"},{name:"peers",type:"Vector<TopPeer>"}],type:"TopPeerCategoryPeers"},{id:-567906571,predicate:"contacts.topPeersNotModified",params:[],type:"contacts.TopPeers"},{id:1891070632,predicate:"contacts.topPeers",params:[{name:"categories",type:"Vector<TopPeerCategoryPeers>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.TopPeers"},{id:-595914432,predicate:"messageEntityMentionName",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"user_id",type:"long"}],type:"MessageEntity"},{id:546203849,predicate:"inputMessageEntityMentionName",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"user_id",type:"InputUser"}],type:"MessageEntity"},{id:975236280,predicate:"inputMessagesFilterChatPhotos",params:[],type:"MessagesFilter"},{id:-1218471511,predicate:"updateReadChannelOutbox",params:[{name:"channel_id",type:"long"},{name:"max_id",type:"int"}],type:"Update"},{id:457829485,predicate:"updateDraftMessage",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"top_msg_id",type:"flags.0?int"},{name:"draft",type:"DraftMessage"}],type:"Update"},{id:453805082,predicate:"draftMessageEmpty",params:[{name:"flags",type:"#"},{name:"date",type:"flags.0?int"}],type:"DraftMessage"},{id:-40996577,predicate:"draftMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"date",type:"int"}],type:"DraftMessage"},{id:-1615153660,predicate:"messageActionHistoryClear",params:[],type:"MessageAction"},{id:-958657434,predicate:"messages.featuredStickersNotModified",params:[{name:"count",type:"int"}],type:"messages.FeaturedStickers"},{id:-1103615738,predicate:"messages.featuredStickers",params:[{name:"flags",type:"#"},{name:"premium",type:"flags.0?true"},{name:"hash",type:"long"},{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"},{name:"unread",type:"Vector<long>"}],type:"messages.FeaturedStickers"},{id:1461528386,predicate:"updateReadFeaturedStickers",params:[],type:"Update"},{id:186120336,predicate:"messages.recentStickersNotModified",params:[],type:"messages.RecentStickers"},{id:-1999405994,predicate:"messages.recentStickers",params:[{name:"hash",type:"long"},{name:"packs",type:"Vector<StickerPack>"},{name:"stickers",type:"Vector<Document>"},{name:"dates",type:"Vector<int>"}],type:"messages.RecentStickers"},{id:-1706939360,predicate:"updateRecentStickers",params:[],type:"Update"},{id:1338747336,predicate:"messages.archivedStickers",params:[{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.ArchivedStickers"},{id:946083368,predicate:"messages.stickerSetInstallResultSuccess",params:[],type:"messages.StickerSetInstallResult"},{id:904138920,predicate:"messages.stickerSetInstallResultArchive",params:[{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.StickerSetInstallResult"},{id:1678812626,predicate:"stickerSetCovered",params:[{name:"set",type:"StickerSet"},{name:"cover",type:"Document"}],type:"StickerSetCovered"},{id:-1574314746,predicate:"updateConfig",params:[],type:"Update"},{id:861169551,predicate:"updatePtsChanged",params:[],type:"Update"},{id:-440664550,predicate:"inputMediaPhotoExternal",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"url",type:"string"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:-78455655,predicate:"inputMediaDocumentExternal",params:[{name:"flags",type:"#"},{name:"spoiler",type:"flags.1?true"},{name:"url",type:"string"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:872932635,predicate:"stickerSetMultiCovered",params:[{name:"set",type:"StickerSet"},{name:"covers",type:"Vector<Document>"}],type:"StickerSetCovered"},{id:-1361650766,predicate:"maskCoords",params:[{name:"n",type:"int"},{name:"x",type:"double"},{name:"y",type:"double"},{name:"zoom",type:"double"}],type:"MaskCoords"},{id:-1744710921,predicate:"documentAttributeHasStickers",params:[],type:"DocumentAttribute"},{id:1251549527,predicate:"inputStickeredMediaPhoto",params:[{name:"id",type:"InputPhoto"}],type:"InputStickeredMedia"},{id:70813275,predicate:"inputStickeredMediaDocument",params:[{name:"id",type:"InputDocument"}],type:"InputStickeredMedia"},{id:-1107729093,predicate:"game",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"short_name",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"Photo"},{name:"document",type:"flags.0?Document"}],type:"Game"},{id:1336154098,predicate:"inputBotInlineResultGame",params:[{name:"id",type:"string"},{name:"short_name",type:"string"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:1262639204,predicate:"inputBotInlineMessageGame",params:[{name:"flags",type:"#"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-38694904,predicate:"messageMediaGame",params:[{name:"game",type:"Game"}],type:"MessageMedia"},{id:-750828557,predicate:"inputMediaGame",params:[{name:"id",type:"InputGame"}],type:"InputMedia"},{id:53231223,predicate:"inputGameID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputGame"},{id:-1020139510,predicate:"inputGameShortName",params:[{name:"bot_id",type:"InputUser"},{name:"short_name",type:"string"}],type:"InputGame"},{id:1358175439,predicate:"keyboardButtonGame",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1834538890,predicate:"messageActionGameScore",params:[{name:"game_id",type:"long"},{name:"score",type:"int"}],type:"MessageAction"},{id:1940093419,predicate:"highScore",params:[{name:"pos",type:"int"},{name:"user_id",type:"long"},{name:"score",type:"int"}],type:"HighScore"},{id:-1707344487,predicate:"messages.highScores",params:[{name:"scores",type:"Vector<HighScore>"},{name:"users",type:"Vector<User>"}],type:"messages.HighScores"},{id:1258196845,predicate:"updates.differenceTooLong",params:[{name:"pts",type:"int"}],type:"updates.Difference"},{id:791390623,predicate:"updateChannelWebPage",params:[{name:"channel_id",type:"long"},{name:"webpage",type:"WebPage"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1663561404,predicate:"messages.chatsSlice",params:[{name:"count",type:"int"},{name:"chats",type:"Vector<Chat>"}],type:"messages.Chats"},{id:-599948721,predicate:"textEmpty",params:[],type:"RichText"},{id:1950782688,predicate:"textPlain",params:[{name:"text",type:"string"}],type:"RichText"},{id:1730456516,predicate:"textBold",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-653089380,predicate:"textItalic",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-1054465340,predicate:"textUnderline",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-1678197867,predicate:"textStrike",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:1816074681,predicate:"textFixed",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:1009288385,predicate:"textUrl",params:[{name:"text",type:"RichText"},{name:"url",type:"string"},{name:"webpage_id",type:"long"}],type:"RichText"},{id:-564523562,predicate:"textEmail",params:[{name:"text",type:"RichText"},{name:"email",type:"string"}],type:"RichText"},{id:2120376535,predicate:"textConcat",params:[{name:"texts",type:"Vector<RichText>"}],type:"RichText"},{id:324435594,predicate:"pageBlockUnsupported",params:[],type:"PageBlock"},{id:1890305021,predicate:"pageBlockTitle",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1879401953,predicate:"pageBlockSubtitle",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1162877472,predicate:"pageBlockAuthorDate",params:[{name:"author",type:"RichText"},{name:"published_date",type:"int"}],type:"PageBlock"},{id:-1076861716,predicate:"pageBlockHeader",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-248793375,predicate:"pageBlockSubheader",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:1182402406,predicate:"pageBlockParagraph",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1066346178,predicate:"pageBlockPreformatted",params:[{name:"text",type:"RichText"},{name:"language",type:"string"}],type:"PageBlock"},{id:1216809369,predicate:"pageBlockFooter",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-618614392,predicate:"pageBlockDivider",params:[],type:"PageBlock"},{id:-837994576,predicate:"pageBlockAnchor",params:[{name:"name",type:"string"}],type:"PageBlock"},{id:-454524911,predicate:"pageBlockList",params:[{name:"items",type:"Vector<PageListItem>"}],type:"PageBlock"},{id:641563686,predicate:"pageBlockBlockquote",params:[{name:"text",type:"RichText"},{name:"caption",type:"RichText"}],type:"PageBlock"},{id:1329878739,predicate:"pageBlockPullquote",params:[{name:"text",type:"RichText"},{name:"caption",type:"RichText"}],type:"PageBlock"},{id:391759200,predicate:"pageBlockPhoto",params:[{name:"flags",type:"#"},{name:"photo_id",type:"long"},{name:"caption",type:"PageCaption"},{name:"url",type:"flags.0?string"},{name:"webpage_id",type:"flags.0?long"}],type:"PageBlock"},{id:2089805750,predicate:"pageBlockVideo",params:[{name:"flags",type:"#"},{name:"autoplay",type:"flags.0?true"},{name:"loop",type:"flags.1?true"},{name:"video_id",type:"long"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:972174080,predicate:"pageBlockCover",params:[{name:"cover",type:"PageBlock"}],type:"PageBlock"},{id:-1468953147,predicate:"pageBlockEmbed",params:[{name:"flags",type:"#"},{name:"full_width",type:"flags.0?true"},{name:"allow_scrolling",type:"flags.3?true"},{name:"url",type:"flags.1?string"},{name:"html",type:"flags.2?string"},{name:"poster_photo_id",type:"flags.4?long"},{name:"w",type:"flags.5?int"},{name:"h",type:"flags.5?int"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-229005301,predicate:"pageBlockEmbedPost",params:[{name:"url",type:"string"},{name:"webpage_id",type:"long"},{name:"author_photo_id",type:"long"},{name:"author",type:"string"},{name:"date",type:"int"},{name:"blocks",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1705048653,predicate:"pageBlockCollage",params:[{name:"items",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:52401552,predicate:"pageBlockSlideshow",params:[{name:"items",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1930545681,predicate:"webPageNotModified",params:[{name:"flags",type:"#"},{name:"cached_page_views",type:"flags.0?int"}],type:"WebPage"},{id:-88417185,predicate:"inputPrivacyKeyPhoneCall",params:[],type:"InputPrivacyKey"},{id:1030105979,predicate:"privacyKeyPhoneCall",params:[],type:"PrivacyKey"},{id:-580219064,predicate:"sendMessageGamePlayAction",params:[],type:"SendMessageAction"},{id:-2048646399,predicate:"phoneCallDiscardReasonMissed",params:[],type:"PhoneCallDiscardReason"},{id:-527056480,predicate:"phoneCallDiscardReasonDisconnect",params:[],type:"PhoneCallDiscardReason"},{id:1471006352,predicate:"phoneCallDiscardReasonHangup",params:[],type:"PhoneCallDiscardReason"},{id:-84416311,predicate:"phoneCallDiscardReasonBusy",params:[],type:"PhoneCallDiscardReason"},{id:1852826908,predicate:"updateDialogPinned",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"folder_id",type:"flags.1?int"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:-99664734,predicate:"updatePinnedDialogs",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.1?int"},{name:"order",type:"flags.0?Vector<DialogPeer>"}],type:"Update"},{id:2104790276,predicate:"dataJSON",params:[{name:"data",type:"string"}],type:"DataJSON"},{id:-2095595325,predicate:"updateBotWebhookJSON",params:[{name:"data",type:"DataJSON"}],type:"Update"},{id:-1684914010,predicate:"updateBotWebhookJSONQuery",params:[{name:"query_id",type:"long"},{name:"data",type:"DataJSON"},{name:"timeout",type:"int"}],type:"Update"},{id:-886477832,predicate:"labeledPrice",params:[{name:"label",type:"string"},{name:"amount",type:"long"}],type:"LabeledPrice"},{id:1048946971,predicate:"invoice",params:[{name:"flags",type:"#"},{name:"test",type:"flags.0?true"},{name:"name_requested",type:"flags.1?true"},{name:"phone_requested",type:"flags.2?true"},{name:"email_requested",type:"flags.3?true"},{name:"shipping_address_requested",type:"flags.4?true"},{name:"flexible",type:"flags.5?true"},{name:"phone_to_provider",type:"flags.6?true"},{name:"email_to_provider",type:"flags.7?true"},{name:"recurring",type:"flags.9?true"},{name:"currency",type:"string"},{name:"prices",type:"Vector<LabeledPrice>"},{name:"max_tip_amount",type:"flags.8?long"},{name:"suggested_tip_amounts",type:"flags.8?Vector<long>"},{name:"recurring_terms_url",type:"flags.9?string"}],type:"Invoice"},{id:-1900697899,predicate:"inputMediaInvoice",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?InputWebDocument"},{name:"invoice",type:"Invoice"},{name:"payload",type:"bytes"},{name:"provider",type:"string"},{name:"provider_data",type:"DataJSON"},{name:"start_param",type:"flags.1?string"},{name:"extended_media",type:"flags.2?InputMedia"}],type:"InputMedia"},{id:-368917890,predicate:"paymentCharge",params:[{name:"id",type:"string"},{name:"provider_charge_id",type:"string"}],type:"PaymentCharge"},{id:-1892568281,predicate:"messageActionPaymentSentMe",params:[{name:"flags",type:"#"},{name:"recurring_init",type:"flags.2?true"},{name:"recurring_used",type:"flags.3?true"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"payload",type:"bytes"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping_option_id",type:"flags.1?string"},{name:"charge",type:"PaymentCharge"}],type:"MessageAction"},{id:-156940077,predicate:"messageMediaInvoice",params:[{name:"flags",type:"#"},{name:"shipping_address_requested",type:"flags.1?true"},{name:"test",type:"flags.3?true"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?WebDocument"},{name:"receipt_msg_id",type:"flags.2?int"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"start_param",type:"string"},{name:"extended_media",type:"flags.4?MessageExtendedMedia"}],type:"MessageMedia"},{id:512535275,predicate:"postAddress",params:[{name:"street_line1",type:"string"},{name:"street_line2",type:"string"},{name:"city",type:"string"},{name:"state",type:"string"},{name:"country_iso2",type:"string"},{name:"post_code",type:"string"}],type:"PostAddress"},{id:-1868808300,predicate:"paymentRequestedInfo",params:[{name:"flags",type:"#"},{name:"name",type:"flags.0?string"},{name:"phone",type:"flags.1?string"},{name:"email",type:"flags.2?string"},{name:"shipping_address",type:"flags.3?PostAddress"}],type:"PaymentRequestedInfo"},{id:-1344716869,predicate:"keyboardButtonBuy",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1776926890,predicate:"messageActionPaymentSent",params:[{name:"flags",type:"#"},{name:"recurring_init",type:"flags.2?true"},{name:"recurring_used",type:"flags.3?true"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"invoice_slug",type:"flags.0?string"}],type:"MessageAction"},{id:-842892769,predicate:"paymentSavedCredentialsCard",params:[{name:"id",type:"string"},{name:"title",type:"string"}],type:"PaymentSavedCredentials"},{id:475467473,predicate:"webDocument",params:[{name:"url",type:"string"},{name:"access_hash",type:"long"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"WebDocument"},{id:-1678949555,predicate:"inputWebDocument",params:[{name:"url",type:"string"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"InputWebDocument"},{id:-1036396922,predicate:"inputWebFileLocation",params:[{name:"url",type:"string"},{name:"access_hash",type:"long"}],type:"InputWebFileLocation"},{id:568808380,predicate:"upload.webFile",params:[{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"file_type",type:"storage.FileType"},{name:"mtime",type:"int"},{name:"bytes",type:"bytes"}],type:"upload.WebFile"},{id:-1610250415,predicate:"payments.paymentForm",params:[{name:"flags",type:"#"},{name:"can_save_credentials",type:"flags.2?true"},{name:"password_missing",type:"flags.3?true"},{name:"form_id",type:"long"},{name:"bot_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.5?WebDocument"},{name:"invoice",type:"Invoice"},{name:"provider_id",type:"long"},{name:"url",type:"string"},{name:"native_provider",type:"flags.4?string"},{name:"native_params",type:"flags.4?DataJSON"},{name:"additional_methods",type:"flags.6?Vector<PaymentFormMethod>"},{name:"saved_info",type:"flags.0?PaymentRequestedInfo"},{name:"saved_credentials",type:"flags.1?Vector<PaymentSavedCredentials>"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentForm"},{id:-784000893,predicate:"payments.validatedRequestedInfo",params:[{name:"flags",type:"#"},{name:"id",type:"flags.0?string"},{name:"shipping_options",type:"flags.1?Vector<ShippingOption>"}],type:"payments.ValidatedRequestedInfo"},{id:1314881805,predicate:"payments.paymentResult",params:[{name:"updates",type:"Updates"}],type:"payments.PaymentResult"},{id:1891958275,predicate:"payments.paymentReceipt",params:[{name:"flags",type:"#"},{name:"date",type:"int"},{name:"bot_id",type:"long"},{name:"provider_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.2?WebDocument"},{name:"invoice",type:"Invoice"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping",type:"flags.1?ShippingOption"},{name:"tip_amount",type:"flags.3?long"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"credentials_title",type:"string"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentReceipt"},{id:-74456004,predicate:"payments.savedInfo",params:[{name:"flags",type:"#"},{name:"has_saved_credentials",type:"flags.1?true"},{name:"saved_info",type:"flags.0?PaymentRequestedInfo"}],type:"payments.SavedInfo"},{id:-1056001329,predicate:"inputPaymentCredentialsSaved",params:[{name:"id",type:"string"},{name:"tmp_password",type:"bytes"}],type:"InputPaymentCredentials"},{id:873977640,predicate:"inputPaymentCredentials",params:[{name:"flags",type:"#"},{name:"save",type:"flags.0?true"},{name:"data",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:-614138572,predicate:"account.tmpPassword",params:[{name:"tmp_password",type:"bytes"},{name:"valid_until",type:"int"}],type:"account.TmpPassword"},{id:-1239335713,predicate:"shippingOption",params:[{name:"id",type:"string"},{name:"title",type:"string"},{name:"prices",type:"Vector<LabeledPrice>"}],type:"ShippingOption"},{id:-1246823043,predicate:"updateBotShippingQuery",params:[{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"payload",type:"bytes"},{name:"shipping_address",type:"PostAddress"}],type:"Update"},{id:-1934976362,predicate:"updateBotPrecheckoutQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"payload",type:"bytes"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping_option_id",type:"flags.1?string"},{name:"currency",type:"string"},{name:"total_amount",type:"long"}],type:"Update"},{id:853188252,predicate:"inputStickerSetItem",params:[{name:"flags",type:"#"},{name:"document",type:"InputDocument"},{name:"emoji",type:"string"},{name:"mask_coords",type:"flags.0?MaskCoords"},{name:"keywords",type:"flags.1?string"}],type:"InputStickerSetItem"},{id:-1425052898,predicate:"updatePhoneCall",params:[{name:"phone_call",type:"PhoneCall"}],type:"Update"},{id:506920429,predicate:"inputPhoneCall",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPhoneCall"},{id:1399245077,predicate:"phoneCallEmpty",params:[{name:"id",type:"long"}],type:"PhoneCall"},{id:-987599081,predicate:"phoneCallWaiting",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"protocol",type:"PhoneCallProtocol"},{name:"receive_date",type:"flags.0?int"}],type:"PhoneCall"},{id:347139340,predicate:"phoneCallRequested",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_hash",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"PhoneCall"},{id:912311057,predicate:"phoneCallAccepted",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_b",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"PhoneCall"},{id:-1770029977,predicate:"phoneCall",params:[{name:"flags",type:"#"},{name:"p2p_allowed",type:"flags.5?true"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_or_b",type:"bytes"},{name:"key_fingerprint",type:"long"},{name:"protocol",type:"PhoneCallProtocol"},{name:"connections",type:"Vector<PhoneConnection>"},{name:"start_date",type:"int"}],type:"PhoneCall"},{id:1355435489,predicate:"phoneCallDiscarded",params:[{name:"flags",type:"#"},{name:"need_rating",type:"flags.2?true"},{name:"need_debug",type:"flags.3?true"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"reason",type:"flags.0?PhoneCallDiscardReason"},{name:"duration",type:"flags.1?int"}],type:"PhoneCall"},{id:-1665063993,predicate:"phoneConnection",params:[{name:"flags",type:"#"},{name:"tcp",type:"flags.0?true"},{name:"id",type:"long"},{name:"ip",type:"string"},{name:"ipv6",type:"string"},{name:"port",type:"int"},{name:"peer_tag",type:"bytes"}],type:"PhoneConnection"},{id:-58224696,predicate:"phoneCallProtocol",params:[{name:"flags",type:"#"},{name:"udp_p2p",type:"flags.0?true"},{name:"udp_reflector",type:"flags.1?true"},{name:"min_layer",type:"int"},{name:"max_layer",type:"int"},{name:"library_versions",type:"Vector<string>"}],type:"PhoneCallProtocol"},{id:-326966976,predicate:"phone.phoneCall",params:[{name:"phone_call",type:"PhoneCall"},{name:"users",type:"Vector<User>"}],type:"phone.PhoneCall"},{id:-2134272152,predicate:"inputMessagesFilterPhoneCalls",params:[{name:"flags",type:"#"},{name:"missed",type:"flags.0?true"}],type:"MessagesFilter"},{id:-2132731265,predicate:"messageActionPhoneCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.2?true"},{name:"call_id",type:"long"},{name:"reason",type:"flags.0?PhoneCallDiscardReason"},{name:"duration",type:"flags.1?int"}],type:"MessageAction"},{id:2054952868,predicate:"inputMessagesFilterRoundVoice",params:[],type:"MessagesFilter"},{id:-1253451181,predicate:"inputMessagesFilterRoundVideo",params:[],type:"MessagesFilter"},{id:-1997373508,predicate:"sendMessageRecordRoundAction",params:[],type:"SendMessageAction"},{id:608050278,predicate:"sendMessageUploadRoundAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-242427324,predicate:"upload.fileCdnRedirect",params:[{name:"dc_id",type:"int"},{name:"file_token",type:"bytes"},{name:"encryption_key",type:"bytes"},{name:"encryption_iv",type:"bytes"},{name:"file_hashes",type:"Vector<FileHash>"}],type:"upload.File"},{id:-290921362,predicate:"upload.cdnFileReuploadNeeded",params:[{name:"request_token",type:"bytes"}],type:"upload.CdnFile"},{id:-1449145777,predicate:"upload.cdnFile",params:[{name:"bytes",type:"bytes"}],type:"upload.CdnFile"},{id:-914167110,predicate:"cdnPublicKey",params:[{name:"dc_id",type:"int"},{name:"public_key",type:"string"}],type:"CdnPublicKey"},{id:1462101002,predicate:"cdnConfig",params:[{name:"public_keys",type:"Vector<CdnPublicKey>"}],type:"CdnConfig"},{id:-283684427,predicate:"pageBlockChannel",params:[{name:"channel",type:"Chat"}],type:"PageBlock"},{id:-892239370,predicate:"langPackString",params:[{name:"key",type:"string"},{name:"value",type:"string"}],type:"LangPackString"},{id:1816636575,predicate:"langPackStringPluralized",params:[{name:"flags",type:"#"},{name:"key",type:"string"},{name:"zero_value",type:"flags.0?string"},{name:"one_value",type:"flags.1?string"},{name:"two_value",type:"flags.2?string"},{name:"few_value",type:"flags.3?string"},{name:"many_value",type:"flags.4?string"},{name:"other_value",type:"string"}],type:"LangPackString"},{id:695856818,predicate:"langPackStringDeleted",params:[{name:"key",type:"string"}],type:"LangPackString"},{id:-209337866,predicate:"langPackDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"},{name:"version",type:"int"},{name:"strings",type:"Vector<LangPackString>"}],type:"LangPackDifference"},{id:-288727837,predicate:"langPackLanguage",params:[{name:"flags",type:"#"},{name:"official",type:"flags.0?true"},{name:"rtl",type:"flags.2?true"},{name:"beta",type:"flags.3?true"},{name:"name",type:"string"},{name:"native_name",type:"string"},{name:"lang_code",type:"string"},{name:"base_lang_code",type:"flags.1?string"},{name:"plural_code",type:"string"},{name:"strings_count",type:"int"},{name:"translated_count",type:"int"},{name:"translations_url",type:"string"}],type:"LangPackLanguage"},{id:1180041828,predicate:"updateLangPackTooLong",params:[{name:"lang_code",type:"string"}],type:"Update"},{id:1442983757,predicate:"updateLangPack",params:[{name:"difference",type:"LangPackDifference"}],type:"Update"},{id:885242707,predicate:"channelParticipantAdmin",params:[{name:"flags",type:"#"},{name:"can_edit",type:"flags.0?true"},{name:"self",type:"flags.1?true"},{name:"user_id",type:"long"},{name:"inviter_id",type:"flags.1?long"},{name:"promoted_by",type:"long"},{name:"date",type:"int"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"flags.2?string"}],type:"ChannelParticipant"},{id:1844969806,predicate:"channelParticipantBanned",params:[{name:"flags",type:"#"},{name:"left",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"kicked_by",type:"long"},{name:"date",type:"int"},{name:"banned_rights",type:"ChatBannedRights"}],type:"ChannelParticipant"},{id:338142689,predicate:"channelParticipantsBanned",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:106343499,predicate:"channelParticipantsSearch",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-421545947,predicate:"channelAdminLogEventActionChangeTitle",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1427671598,predicate:"channelAdminLogEventActionChangeAbout",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1783299128,predicate:"channelAdminLogEventActionChangeUsername",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1129042607,predicate:"channelAdminLogEventActionChangePhoto",params:[{name:"prev_photo",type:"Photo"},{name:"new_photo",type:"Photo"}],type:"ChannelAdminLogEventAction"},{id:460916654,predicate:"channelAdminLogEventActionToggleInvites",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:648939889,predicate:"channelAdminLogEventActionToggleSignatures",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-370660328,predicate:"channelAdminLogEventActionUpdatePinned",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:1889215493,predicate:"channelAdminLogEventActionEditMessage",params:[{name:"prev_message",type:"Message"},{name:"new_message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:1121994683,predicate:"channelAdminLogEventActionDeleteMessage",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:405815507,predicate:"channelAdminLogEventActionParticipantJoin",params:[],type:"ChannelAdminLogEventAction"},{id:-124291086,predicate:"channelAdminLogEventActionParticipantLeave",params:[],type:"ChannelAdminLogEventAction"},{id:-484690728,predicate:"channelAdminLogEventActionParticipantInvite",params:[{name:"participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-422036098,predicate:"channelAdminLogEventActionParticipantToggleBan",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-714643696,predicate:"channelAdminLogEventActionParticipantToggleAdmin",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:531458253,predicate:"channelAdminLogEvent",params:[{name:"id",type:"long"},{name:"date",type:"int"},{name:"user_id",type:"long"},{name:"action",type:"ChannelAdminLogEventAction"}],type:"ChannelAdminLogEvent"},{id:-309659827,predicate:"channels.adminLogResults",params:[{name:"events",type:"Vector<ChannelAdminLogEvent>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.AdminLogResults"},{id:-368018716,predicate:"channelAdminLogEventsFilter",params:[{name:"flags",type:"#"},{name:"join",type:"flags.0?true"},{name:"leave",type:"flags.1?true"},{name:"invite",type:"flags.2?true"},{name:"ban",type:"flags.3?true"},{name:"unban",type:"flags.4?true"},{name:"kick",type:"flags.5?true"},{name:"unkick",type:"flags.6?true"},{name:"promote",type:"flags.7?true"},{name:"demote",type:"flags.8?true"},{name:"info",type:"flags.9?true"},{name:"settings",type:"flags.10?true"},{name:"pinned",type:"flags.11?true"},{name:"edit",type:"flags.12?true"},{name:"delete",type:"flags.13?true"},{name:"group_call",type:"flags.14?true"},{name:"invites",type:"flags.15?true"},{name:"send",type:"flags.16?true"},{name:"forums",type:"flags.17?true"}],type:"ChannelAdminLogEventsFilter"},{id:511092620,predicate:"topPeerCategoryPhoneCalls",params:[],type:"TopPeerCategory"},{id:-2143067670,predicate:"pageBlockAudio",params:[{name:"audio_id",type:"long"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1558266229,predicate:"popularContact",params:[{name:"client_id",type:"long"},{name:"importers",type:"int"}],type:"PopularContact"},{id:1200788123,predicate:"messageActionScreenshotTaken",params:[],type:"MessageAction"},{id:-1634752813,predicate:"messages.favedStickersNotModified",params:[],type:"messages.FavedStickers"},{id:750063767,predicate:"messages.favedStickers",params:[{name:"hash",type:"long"},{name:"packs",type:"Vector<StickerPack>"},{name:"stickers",type:"Vector<Document>"}],type:"messages.FavedStickers"},{id:-451831443,predicate:"updateFavedStickers",params:[],type:"Update"},{id:-366410403,predicate:"updateChannelReadMessagesContents",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"flags.0?int"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:-1040652646,predicate:"inputMessagesFilterMyMentions",params:[],type:"MessagesFilter"},{id:1887741886,predicate:"updateContactsReset",params:[],type:"Update"},{id:-1312568665,predicate:"channelAdminLogEventActionChangeStickerSet",params:[{name:"prev_stickerset",type:"InputStickerSet"},{name:"new_stickerset",type:"InputStickerSet"}],type:"ChannelAdminLogEventAction"},{id:-85549226,predicate:"messageActionCustomAction",params:[{name:"message",type:"string"}],type:"MessageAction"},{id:178373535,predicate:"inputPaymentCredentialsApplePay",params:[{name:"payment_data",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:-419271411,predicate:"inputMessagesFilterGeo",params:[],type:"MessagesFilter"},{id:-530392189,predicate:"inputMessagesFilterContacts",params:[],type:"MessagesFilter"},{id:-1304443240,predicate:"updateChannelAvailableMessages",params:[{name:"channel_id",type:"long"},{name:"available_min_id",type:"int"}],type:"Update"},{id:1599903217,predicate:"channelAdminLogEventActionTogglePreHistoryHidden",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-1759532989,predicate:"inputMediaGeoLive",params:[{name:"flags",type:"#"},{name:"stopped",type:"flags.0?true"},{name:"geo_point",type:"InputGeoPoint"},{name:"heading",type:"flags.2?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"}],type:"InputMedia"},{id:-1186937242,predicate:"messageMediaGeoLive",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"int"},{name:"proximity_notification_radius",type:"flags.1?int"}],type:"MessageMedia"},{id:1189204285,predicate:"recentMeUrlUnknown",params:[{name:"url",type:"string"}],type:"RecentMeUrl"},{id:-1188296222,predicate:"recentMeUrlUser",params:[{name:"url",type:"string"},{name:"user_id",type:"long"}],type:"RecentMeUrl"},{id:-1294306862,predicate:"recentMeUrlChat",params:[{name:"url",type:"string"},{name:"chat_id",type:"long"}],type:"RecentMeUrl"},{id:-347535331,predicate:"recentMeUrlChatInvite",params:[{name:"url",type:"string"},{name:"chat_invite",type:"ChatInvite"}],type:"RecentMeUrl"},{id:-1140172836,predicate:"recentMeUrlStickerSet",params:[{name:"url",type:"string"},{name:"set",type:"StickerSetCovered"}],type:"RecentMeUrl"},{id:235081943,predicate:"help.recentMeUrls",params:[{name:"urls",type:"Vector<RecentMeUrl>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"help.RecentMeUrls"},{id:-266911767,predicate:"channels.channelParticipantsNotModified",params:[],type:"channels.ChannelParticipants"},{id:1951620897,predicate:"messages.messagesNotModified",params:[{name:"count",type:"int"}],type:"messages.Messages"},{id:482797855,predicate:"inputSingleMedia",params:[{name:"flags",type:"#"},{name:"media",type:"InputMedia"},{name:"random_id",type:"long"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"}],type:"InputSingleMedia"},{id:-1493633966,predicate:"webAuthorization",params:[{name:"hash",type:"long"},{name:"bot_id",type:"long"},{name:"domain",type:"string"},{name:"browser",type:"string"},{name:"platform",type:"string"},{name:"date_created",type:"int"},{name:"date_active",type:"int"},{name:"ip",type:"string"},{name:"region",type:"string"}],type:"WebAuthorization"},{id:-313079300,predicate:"account.webAuthorizations",params:[{name:"authorizations",type:"Vector<WebAuthorization>"},{name:"users",type:"Vector<User>"}],type:"account.WebAuthorizations"},{id:-1502174430,predicate:"inputMessageID",params:[{name:"id",type:"int"}],type:"InputMessage"},{id:-1160215659,predicate:"inputMessageReplyTo",params:[{name:"id",type:"int"}],type:"InputMessage"},{id:-2037963464,predicate:"inputMessagePinned",params:[],type:"InputMessage"},{id:-1687559349,predicate:"messageEntityPhone",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1280209983,predicate:"messageEntityCashtag",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-988359047,predicate:"messageActionBotAllowed",params:[{name:"flags",type:"#"},{name:"attach_menu",type:"flags.1?true"},{name:"domain",type:"flags.0?string"},{name:"app",type:"flags.2?BotApp"}],type:"MessageAction"},{id:-55902537,predicate:"inputDialogPeer",params:[{name:"peer",type:"InputPeer"}],type:"InputDialogPeer"},{id:-445792507,predicate:"dialogPeer",params:[{name:"peer",type:"Peer"}],type:"DialogPeer"},{id:223655517,predicate:"messages.foundStickerSetsNotModified",params:[],type:"messages.FoundStickerSets"},{id:-1963942446,predicate:"messages.foundStickerSets",params:[{name:"hash",type:"long"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.FoundStickerSets"},{id:-207944868,predicate:"fileHash",params:[{name:"offset",type:"long"},{name:"limit",type:"int"},{name:"hash",type:"bytes"}],type:"FileHash"},{id:-104284986,predicate:"webDocumentNoProxy",params:[{name:"url",type:"string"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"WebDocument"},{id:1968737087,predicate:"inputClientProxy",params:[{name:"address",type:"string"},{name:"port",type:"int"}],type:"InputClientProxy"},{id:-483352705,predicate:"help.termsOfServiceUpdateEmpty",params:[{name:"expires",type:"int"}],type:"help.TermsOfServiceUpdate"},{id:686618977,predicate:"help.termsOfServiceUpdate",params:[{name:"expires",type:"int"},{name:"terms_of_service",type:"help.TermsOfService"}],type:"help.TermsOfServiceUpdate"},{id:859091184,predicate:"inputSecureFileUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"md5_checksum",type:"string"},{name:"file_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"InputSecureFile"},{id:1399317950,predicate:"inputSecureFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputSecureFile"},{id:-876089816,predicate:"inputSecureFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputFileLocation"},{id:1679398724,predicate:"secureFileEmpty",params:[],type:"SecureFile"},{id:2097791614,predicate:"secureFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"size",type:"long"},{name:"dc_id",type:"int"},{name:"date",type:"int"},{name:"file_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureFile"},{id:-1964327229,predicate:"secureData",params:[{name:"data",type:"bytes"},{name:"data_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureData"},{id:2103482845,predicate:"securePlainPhone",params:[{name:"phone",type:"string"}],type:"SecurePlainData"},{id:569137759,predicate:"securePlainEmail",params:[{name:"email",type:"string"}],type:"SecurePlainData"},{id:-1658158621,predicate:"secureValueTypePersonalDetails",params:[],type:"SecureValueType"},{id:1034709504,predicate:"secureValueTypePassport",params:[],type:"SecureValueType"},{id:115615172,predicate:"secureValueTypeDriverLicense",params:[],type:"SecureValueType"},{id:-1596951477,predicate:"secureValueTypeIdentityCard",params:[],type:"SecureValueType"},{id:-1717268701,predicate:"secureValueTypeInternalPassport",params:[],type:"SecureValueType"},{id:-874308058,predicate:"secureValueTypeAddress",params:[],type:"SecureValueType"},{id:-63531698,predicate:"secureValueTypeUtilityBill",params:[],type:"SecureValueType"},{id:-1995211763,predicate:"secureValueTypeBankStatement",params:[],type:"SecureValueType"},{id:-1954007928,predicate:"secureValueTypeRentalAgreement",params:[],type:"SecureValueType"},{id:-1713143702,predicate:"secureValueTypePassportRegistration",params:[],type:"SecureValueType"},{id:-368907213,predicate:"secureValueTypeTemporaryRegistration",params:[],type:"SecureValueType"},{id:-1289704741,predicate:"secureValueTypePhone",params:[],type:"SecureValueType"},{id:-1908627474,predicate:"secureValueTypeEmail",params:[],type:"SecureValueType"},{id:411017418,predicate:"secureValue",params:[{name:"flags",type:"#"},{name:"type",type:"SecureValueType"},{name:"data",type:"flags.0?SecureData"},{name:"front_side",type:"flags.1?SecureFile"},{name:"reverse_side",type:"flags.2?SecureFile"},{name:"selfie",type:"flags.3?SecureFile"},{name:"translation",type:"flags.6?Vector<SecureFile>"},{name:"files",type:"flags.4?Vector<SecureFile>"},{name:"plain_data",type:"flags.5?SecurePlainData"},{name:"hash",type:"bytes"}],type:"SecureValue"},{id:-618540889,predicate:"inputSecureValue",params:[{name:"flags",type:"#"},{name:"type",type:"SecureValueType"},{name:"data",type:"flags.0?SecureData"},{name:"front_side",type:"flags.1?InputSecureFile"},{name:"reverse_side",type:"flags.2?InputSecureFile"},{name:"selfie",type:"flags.3?InputSecureFile"},{name:"translation",type:"flags.6?Vector<InputSecureFile>"},{name:"files",type:"flags.4?Vector<InputSecureFile>"},{name:"plain_data",type:"flags.5?SecurePlainData"}],type:"InputSecureValue"},{id:-316748368,predicate:"secureValueHash",params:[{name:"type",type:"SecureValueType"},{name:"hash",type:"bytes"}],type:"SecureValueHash"},{id:-391902247,predicate:"secureValueErrorData",params:[{name:"type",type:"SecureValueType"},{name:"data_hash",type:"bytes"},{name:"field",type:"string"},{name:"text",type:"string"}],type:"SecureValueError"},{id:12467706,predicate:"secureValueErrorFrontSide",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-2037765467,predicate:"secureValueErrorReverseSide",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-449327402,predicate:"secureValueErrorSelfie",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:2054162547,predicate:"secureValueErrorFile",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:1717706985,predicate:"secureValueErrorFiles",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"Vector<bytes>"},{name:"text",type:"string"}],type:"SecureValueError"},{id:871426631,predicate:"secureCredentialsEncrypted",params:[{name:"data",type:"bytes"},{name:"hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureCredentialsEncrypted"},{id:-1389486888,predicate:"account.authorizationForm",params:[{name:"flags",type:"#"},{name:"required_types",type:"Vector<SecureRequiredType>"},{name:"values",type:"Vector<SecureValue>"},{name:"errors",type:"Vector<SecureValueError>"},{name:"users",type:"Vector<User>"},{name:"privacy_policy_url",type:"flags.0?string"}],type:"account.AuthorizationForm"},{id:-2128640689,predicate:"account.sentEmailCode",params:[{name:"email_pattern",type:"string"},{name:"length",type:"int"}],type:"account.SentEmailCode"},{id:455635795,predicate:"messageActionSecureValuesSentMe",params:[{name:"values",type:"Vector<SecureValue>"},{name:"credentials",type:"SecureCredentialsEncrypted"}],type:"MessageAction"},{id:-648257196,predicate:"messageActionSecureValuesSent",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"MessageAction"},{id:1722786150,predicate:"help.deepLinkInfoEmpty",params:[],type:"help.DeepLinkInfo"},{id:1783556146,predicate:"help.deepLinkInfo",params:[{name:"flags",type:"#"},{name:"update_app",type:"flags.0?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"}],type:"help.DeepLinkInfo"},{id:289586518,predicate:"savedPhoneContact",params:[{name:"phone",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"date",type:"int"}],type:"SavedContact"},{id:1304052993,predicate:"account.takeout",params:[{name:"id",type:"long"}],type:"account.Takeout"},{id:700340377,predicate:"inputTakeoutFileLocation",params:[],type:"InputFileLocation"},{id:-513517117,predicate:"updateDialogUnreadMark",params:[{name:"flags",type:"#"},{name:"unread",type:"flags.0?true"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:-253500010,predicate:"messages.dialogsNotModified",params:[{name:"count",type:"int"}],type:"messages.Dialogs"},{id:-1625153079,predicate:"inputWebFileGeoPointLocation",params:[{name:"geo_point",type:"InputGeoPoint"},{name:"access_hash",type:"long"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"zoom",type:"int"},{name:"scale",type:"int"}],type:"InputWebFileLocation"},{id:-1255369827,predicate:"contacts.topPeersDisabled",params:[],type:"contacts.TopPeers"},{id:-1685456582,predicate:"inputReportReasonCopyright",params:[],type:"ReportReason"},{id:-732254058,predicate:"passwordKdfAlgoUnknown",params:[],type:"PasswordKdfAlgo"},{id:4883767,predicate:"securePasswordKdfAlgoUnknown",params:[],type:"SecurePasswordKdfAlgo"},{id:-1141711456,predicate:"securePasswordKdfAlgoPBKDF2HMACSHA512iter100000",params:[{name:"salt",type:"bytes"}],type:"SecurePasswordKdfAlgo"},{id:-2042159726,predicate:"securePasswordKdfAlgoSHA512",params:[{name:"salt",type:"bytes"}],type:"SecurePasswordKdfAlgo"},{id:354925740,predicate:"secureSecretSettings",params:[{name:"secure_algo",type:"SecurePasswordKdfAlgo"},{name:"secure_secret",type:"bytes"},{name:"secure_secret_id",type:"long"}],type:"SecureSecretSettings"},{id:982592842,predicate:"passwordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow",params:[{name:"salt1",type:"bytes"},{name:"salt2",type:"bytes"},{name:"g",type:"int"},{name:"p",type:"bytes"}],type:"PasswordKdfAlgo"},{id:-1736378792,predicate:"inputCheckPasswordEmpty",params:[],type:"InputCheckPasswordSRP"},{id:-763367294,predicate:"inputCheckPasswordSRP",params:[{name:"srp_id",type:"long"},{name:"A",type:"bytes"},{name:"M1",type:"bytes"}],type:"InputCheckPasswordSRP"},{id:-2036501105,predicate:"secureValueError",params:[{name:"type",type:"SecureValueType"},{name:"hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-1592506512,predicate:"secureValueErrorTranslationFile",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:878931416,predicate:"secureValueErrorTranslationFiles",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"Vector<bytes>"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-2103600678,predicate:"secureRequiredType",params:[{name:"flags",type:"#"},{name:"native_names",type:"flags.0?true"},{name:"selfie_required",type:"flags.1?true"},{name:"translation_required",type:"flags.2?true"},{name:"type",type:"SecureValueType"}],type:"SecureRequiredType"},{id:41187252,predicate:"secureRequiredTypeOneOf",params:[{name:"types",type:"Vector<SecureRequiredType>"}],type:"SecureRequiredType"},{id:-1078332329,predicate:"help.passportConfigNotModified",params:[],type:"help.PassportConfig"},{id:-1600596305,predicate:"help.passportConfig",params:[{name:"hash",type:"int"},{name:"countries_langs",type:"DataJSON"}],type:"help.PassportConfig"},{id:488313413,predicate:"inputAppEvent",params:[{name:"time",type:"double"},{name:"type",type:"string"},{name:"peer",type:"long"},{name:"data",type:"JSONValue"}],type:"InputAppEvent"},{id:-1059185703,predicate:"jsonObjectValue",params:[{name:"key",type:"string"},{name:"value",type:"JSONValue"}],type:"JSONObjectValue"},{id:1064139624,predicate:"jsonNull",params:[],type:"JSONValue"},{id:-952869270,predicate:"jsonBool",params:[{name:"value",type:"Bool"}],type:"JSONValue"},{id:736157604,predicate:"jsonNumber",params:[{name:"value",type:"double"}],type:"JSONValue"},{id:-1222740358,predicate:"jsonString",params:[{name:"value",type:"string"}],type:"JSONValue"},{id:-146520221,predicate:"jsonArray",params:[{name:"value",type:"Vector<JSONValue>"}],type:"JSONValue"},{id:-1715350371,predicate:"jsonObject",params:[{name:"value",type:"Vector<JSONObjectValue>"}],type:"JSONValue"},{id:-1311015810,predicate:"inputNotifyBroadcasts",params:[],type:"InputNotifyPeer"},{id:-703403793,predicate:"notifyBroadcasts",params:[],type:"NotifyPeer"},{id:-311786236,predicate:"textSubscript",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-939827711,predicate:"textSuperscript",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:55281185,predicate:"textMarked",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:483104362,predicate:"textPhone",params:[{name:"text",type:"RichText"},{name:"phone",type:"string"}],type:"RichText"},{id:136105807,predicate:"textImage",params:[{name:"document_id",type:"long"},{name:"w",type:"int"},{name:"h",type:"int"}],type:"RichText"},{id:504660880,predicate:"pageBlockKicker",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:878078826,predicate:"pageTableCell",params:[{name:"flags",type:"#"},{name:"header",type:"flags.0?true"},{name:"align_center",type:"flags.3?true"},{name:"align_right",type:"flags.4?true"},{name:"valign_middle",type:"flags.5?true"},{name:"valign_bottom",type:"flags.6?true"},{name:"text",type:"flags.7?RichText"},{name:"colspan",type:"flags.1?int"},{name:"rowspan",type:"flags.2?int"}],type:"PageTableCell"},{id:-524237339,predicate:"pageTableRow",params:[{name:"cells",type:"Vector<PageTableCell>"}],type:"PageTableRow"},{id:-1085412734,predicate:"pageBlockTable",params:[{name:"flags",type:"#"},{name:"bordered",type:"flags.0?true"},{name:"striped",type:"flags.1?true"},{name:"title",type:"RichText"},{name:"rows",type:"Vector<PageTableRow>"}],type:"PageBlock"},{id:1869903447,predicate:"pageCaption",params:[{name:"text",type:"RichText"},{name:"credit",type:"RichText"}],type:"PageCaption"},{id:-1188055347,predicate:"pageListItemText",params:[{name:"text",type:"RichText"}],type:"PageListItem"},{id:635466748,predicate:"pageListItemBlocks",params:[{name:"blocks",type:"Vector<PageBlock>"}],type:"PageListItem"},{id:1577484359,predicate:"pageListOrderedItemText",params:[{name:"num",type:"string"},{name:"text",type:"RichText"}],type:"PageListOrderedItem"},{id:-1730311882,predicate:"pageListOrderedItemBlocks",params:[{name:"num",type:"string"},{name:"blocks",type:"Vector<PageBlock>"}],type:"PageListOrderedItem"},{id:-1702174239,predicate:"pageBlockOrderedList",params:[{name:"items",type:"Vector<PageListOrderedItem>"}],type:"PageBlock"},{id:1987480557,predicate:"pageBlockDetails",params:[{name:"flags",type:"#"},{name:"open",type:"flags.0?true"},{name:"blocks",type:"Vector<PageBlock>"},{name:"title",type:"RichText"}],type:"PageBlock"},{id:-1282352120,predicate:"pageRelatedArticle",params:[{name:"flags",type:"#"},{name:"url",type:"string"},{name:"webpage_id",type:"long"},{name:"title",type:"flags.0?string"},{name:"description",type:"flags.1?string"},{name:"photo_id",type:"flags.2?long"},{name:"author",type:"flags.3?string"},{name:"published_date",type:"flags.4?int"}],type:"PageRelatedArticle"},{id:370236054,predicate:"pageBlockRelatedArticles",params:[{name:"title",type:"RichText"},{name:"articles",type:"Vector<PageRelatedArticle>"}],type:"PageBlock"},{id:-1538310410,predicate:"pageBlockMap",params:[{name:"geo",type:"GeoPoint"},{name:"zoom",type:"int"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-1738178803,predicate:"page",params:[{name:"flags",type:"#"},{name:"part",type:"flags.0?true"},{name:"rtl",type:"flags.1?true"},{name:"v2",type:"flags.2?true"},{name:"url",type:"string"},{name:"blocks",type:"Vector<PageBlock>"},{name:"photos",type:"Vector<Photo>"},{name:"documents",type:"Vector<Document>"},{name:"views",type:"flags.3?int"}],type:"Page"},{id:-610373422,predicate:"inputPrivacyKeyPhoneP2P",params:[],type:"InputPrivacyKey"},{id:961092808,predicate:"privacyKeyPhoneP2P",params:[],type:"PrivacyKey"},{id:894777186,predicate:"textAnchor",params:[{name:"text",type:"RichText"},{name:"name",type:"string"}],type:"RichText"},{id:-1945767479,predicate:"help.supportName",params:[{name:"name",type:"string"}],type:"help.SupportName"},{id:-206688531,predicate:"help.userInfoEmpty",params:[],type:"help.UserInfo"},{id:32192344,predicate:"help.userInfo",params:[{name:"message",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"author",type:"string"},{name:"date",type:"int"}],type:"help.UserInfo"},{id:-202219658,predicate:"messageActionContactSignUp",params:[],type:"MessageAction"},{id:-1398708869,predicate:"updateMessagePoll",params:[{name:"flags",type:"#"},{name:"poll_id",type:"long"},{name:"poll",type:"flags.0?Poll"},{name:"results",type:"PollResults"}],type:"Update"},{id:1823064809,predicate:"pollAnswer",params:[{name:"text",type:"string"},{name:"option",type:"bytes"}],type:"PollAnswer"},{id:-2032041631,predicate:"poll",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"closed",type:"flags.0?true"},{name:"public_voters",type:"flags.1?true"},{name:"multiple_choice",type:"flags.2?true"},{name:"quiz",type:"flags.3?true"},{name:"question",type:"string"},{name:"answers",type:"Vector<PollAnswer>"},{name:"close_period",type:"flags.4?int"},{name:"close_date",type:"flags.5?int"}],type:"Poll"},{id:997055186,predicate:"pollAnswerVoters",params:[{name:"flags",type:"#"},{name:"chosen",type:"flags.0?true"},{name:"correct",type:"flags.1?true"},{name:"option",type:"bytes"},{name:"voters",type:"int"}],type:"PollAnswerVoters"},{id:-591909213,predicate:"pollResults",params:[{name:"flags",type:"#"},{name:"min",type:"flags.0?true"},{name:"results",type:"flags.1?Vector<PollAnswerVoters>"},{name:"total_voters",type:"flags.2?int"},{name:"recent_voters",type:"flags.3?Vector<long>"},{name:"solution",type:"flags.4?string"},{name:"solution_entities",type:"flags.4?Vector<MessageEntity>"}],type:"PollResults"},{id:261416433,predicate:"inputMediaPoll",params:[{name:"flags",type:"#"},{name:"poll",type:"Poll"},{name:"correct_answers",type:"flags.0?Vector<bytes>"},{name:"solution",type:"flags.1?string"},{name:"solution_entities",type:"flags.1?Vector<MessageEntity>"}],type:"InputMedia"},{id:1272375192,predicate:"messageMediaPoll",params:[{name:"poll",type:"Poll"},{name:"results",type:"PollResults"}],type:"MessageMedia"},{id:-264117680,predicate:"chatOnlines",params:[{name:"onlines",type:"int"}],type:"ChatOnlines"},{id:1202287072,predicate:"statsURL",params:[{name:"url",type:"string"}],type:"StatsURL"},{id:-525288402,predicate:"photoStrippedSize",params:[{name:"type",type:"string"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:1605510357,predicate:"chatAdminRights",params:[{name:"flags",type:"#"},{name:"change_info",type:"flags.0?true"},{name:"post_messages",type:"flags.1?true"},{name:"edit_messages",type:"flags.2?true"},{name:"delete_messages",type:"flags.3?true"},{name:"ban_users",type:"flags.4?true"},{name:"invite_users",type:"flags.5?true"},{name:"pin_messages",type:"flags.7?true"},{name:"add_admins",type:"flags.9?true"},{name:"anonymous",type:"flags.10?true"},{name:"manage_call",type:"flags.11?true"},{name:"other",type:"flags.12?true"},{name:"manage_topics",type:"flags.13?true"}],type:"ChatAdminRights"},{id:-1626209256,predicate:"chatBannedRights",params:[{name:"flags",type:"#"},{name:"view_messages",type:"flags.0?true"},{name:"send_messages",type:"flags.1?true"},{name:"send_media",type:"flags.2?true"},{name:"send_stickers",type:"flags.3?true"},{name:"send_gifs",type:"flags.4?true"},{name:"send_games",type:"flags.5?true"},{name:"send_inline",type:"flags.6?true"},{name:"embed_links",type:"flags.7?true"},{name:"send_polls",type:"flags.8?true"},{name:"change_info",type:"flags.10?true"},{name:"invite_users",type:"flags.15?true"},{name:"pin_messages",type:"flags.17?true"},{name:"manage_topics",type:"flags.18?true"},{name:"send_photos",type:"flags.19?true"},{name:"send_videos",type:"flags.20?true"},{name:"send_roundvideos",type:"flags.21?true"},{name:"send_audios",type:"flags.22?true"},{name:"send_voices",type:"flags.23?true"},{name:"send_docs",type:"flags.24?true"},{name:"send_plain",type:"flags.25?true"},{name:"until_date",type:"int"}],type:"ChatBannedRights"},{id:1421875280,predicate:"updateChatDefaultBannedRights",params:[{name:"peer",type:"Peer"},{name:"default_banned_rights",type:"ChatBannedRights"},{name:"version",type:"int"}],type:"Update"},{id:-433014407,predicate:"inputWallPaper",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputWallPaper"},{id:1913199744,predicate:"inputWallPaperSlug",params:[{name:"slug",type:"string"}],type:"InputWallPaper"},{id:-1150621555,predicate:"channelParticipantsContacts",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:771095562,predicate:"channelAdminLogEventActionDefaultBannedRights",params:[{name:"prev_banned_rights",type:"ChatBannedRights"},{name:"new_banned_rights",type:"ChatBannedRights"}],type:"ChannelAdminLogEventAction"},{id:-1895328189,predicate:"channelAdminLogEventActionStopPoll",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:471437699,predicate:"account.wallPapersNotModified",params:[],type:"account.WallPapers"},{id:-842824308,predicate:"account.wallPapers",params:[{name:"hash",type:"long"},{name:"wallpapers",type:"Vector<WallPaper>"}],type:"account.WallPapers"},{id:-1390068360,predicate:"codeSettings",params:[{name:"flags",type:"#"},{name:"allow_flashcall",type:"flags.0?true"},{name:"current_number",type:"flags.1?true"},{name:"allow_app_hash",type:"flags.4?true"},{name:"allow_missed_call",type:"flags.5?true"},{name:"allow_firebase",type:"flags.7?true"},{name:"logout_tokens",type:"flags.6?Vector<bytes>"},{name:"token",type:"flags.8?string"},{name:"app_sandbox",type:"flags.8?Bool"}],type:"CodeSettings"},{id:499236004,predicate:"wallPaperSettings",params:[{name:"flags",type:"#"},{name:"blur",type:"flags.1?true"},{name:"motion",type:"flags.2?true"},{name:"background_color",type:"flags.0?int"},{name:"second_background_color",type:"flags.4?int"},{name:"third_background_color",type:"flags.5?int"},{name:"fourth_background_color",type:"flags.6?int"},{name:"intensity",type:"flags.3?int"},{name:"rotation",type:"flags.4?int"}],type:"WallPaperSettings"},{id:-1896171181,predicate:"autoDownloadSettings",params:[{name:"flags",type:"#"},{name:"disabled",type:"flags.0?true"},{name:"video_preload_large",type:"flags.1?true"},{name:"audio_preload_next",type:"flags.2?true"},{name:"phonecalls_less_data",type:"flags.3?true"},{name:"photo_size_max",type:"int"},{name:"video_size_max",type:"long"},{name:"file_size_max",type:"long"},{name:"video_upload_maxbitrate",type:"int"}],type:"AutoDownloadSettings"},{id:1674235686,predicate:"account.autoDownloadSettings",params:[{name:"low",type:"AutoDownloadSettings"},{name:"medium",type:"AutoDownloadSettings"},{name:"high",type:"AutoDownloadSettings"}],type:"account.AutoDownloadSettings"},{id:-709641735,predicate:"emojiKeyword",params:[{name:"keyword",type:"string"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiKeyword"},{id:594408994,predicate:"emojiKeywordDeleted",params:[{name:"keyword",type:"string"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiKeyword"},{id:1556570557,predicate:"emojiKeywordsDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"},{name:"version",type:"int"},{name:"keywords",type:"Vector<EmojiKeyword>"}],type:"EmojiKeywordsDifference"},{id:-1519029347,predicate:"emojiURL",params:[{name:"url",type:"string"}],type:"EmojiURL"},{id:-1275374751,predicate:"emojiLanguage",params:[{name:"lang_code",type:"string"}],type:"EmojiLanguage"},{id:-1529000952,predicate:"inputPrivacyKeyForwards",params:[],type:"InputPrivacyKey"},{id:1777096355,predicate:"privacyKeyForwards",params:[],type:"PrivacyKey"},{id:1461304012,predicate:"inputPrivacyKeyProfilePhoto",params:[],type:"InputPrivacyKey"},{id:-1777000467,predicate:"privacyKeyProfilePhoto",params:[],type:"PrivacyKey"},{id:1075322878,predicate:"inputPhotoFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"thumb_size",type:"string"}],type:"InputFileLocation"},{id:-667654413,predicate:"inputPhotoLegacyFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"volume_id",type:"long"},{name:"local_id",type:"int"},{name:"secret",type:"long"}],type:"InputFileLocation"},{id:925204121,predicate:"inputPeerPhotoFileLocation",params:[{name:"flags",type:"#"},{name:"big",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"photo_id",type:"long"}],type:"InputFileLocation"},{id:-1652231205,predicate:"inputStickerSetThumb",params:[{name:"stickerset",type:"InputStickerSet"},{name:"thumb_version",type:"int"}],type:"InputFileLocation"},{id:-11252123,predicate:"folder",params:[{name:"flags",type:"#"},{name:"autofill_new_broadcasts",type:"flags.0?true"},{name:"autofill_public_groups",type:"flags.1?true"},{name:"autofill_new_correspondents",type:"flags.2?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"photo",type:"flags.3?ChatPhoto"}],type:"Folder"},{id:1908216652,predicate:"dialogFolder",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"folder",type:"Folder"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"unread_muted_peers_count",type:"int"},{name:"unread_unmuted_peers_count",type:"int"},{name:"unread_muted_messages_count",type:"int"},{name:"unread_unmuted_messages_count",type:"int"}],type:"Dialog"},{id:1684014375,predicate:"inputDialogPeerFolder",params:[{name:"folder_id",type:"int"}],type:"InputDialogPeer"},{id:1363483106,predicate:"dialogPeerFolder",params:[{name:"folder_id",type:"int"}],type:"DialogPeer"},{id:-70073706,predicate:"inputFolderPeer",params:[{name:"peer",type:"InputPeer"},{name:"folder_id",type:"int"}],type:"InputFolderPeer"},{id:-373643672,predicate:"folderPeer",params:[{name:"peer",type:"Peer"},{name:"folder_id",type:"int"}],type:"FolderPeer"},{id:422972864,predicate:"updateFolderPeers",params:[{name:"folder_peers",type:"Vector<FolderPeer>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:497305826,predicate:"inputUserFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"user_id",type:"long"}],type:"InputUser"},{id:1536380829,predicate:"inputChannelFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"channel_id",type:"long"}],type:"InputChannel"},{id:-1468331492,predicate:"inputPeerUserFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"user_id",type:"long"}],type:"InputPeer"},{id:-1121318848,predicate:"inputPeerChannelFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"channel_id",type:"long"}],type:"InputPeer"},{id:55761658,predicate:"inputPrivacyKeyPhoneNumber",params:[],type:"InputPrivacyKey"},{id:-778378131,predicate:"privacyKeyPhoneNumber",params:[],type:"PrivacyKey"},{id:-1472172887,predicate:"topPeerCategoryForwardUsers",params:[],type:"TopPeerCategory"},{id:-68239120,predicate:"topPeerCategoryForwardChats",params:[],type:"TopPeerCategory"},{id:84703944,predicate:"channelAdminLogEventActionChangeLinkedChat",params:[{name:"prev_value",type:"long"},{name:"new_value",type:"long"}],type:"ChannelAdminLogEventAction"},{id:-398136321,predicate:"messages.searchCounter",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"filter",type:"MessagesFilter"},{name:"count",type:"int"}],type:"messages.SearchCounter"},{id:280464681,predicate:"keyboardButtonUrlAuth",params:[{name:"flags",type:"#"},{name:"text",type:"string"},{name:"fwd_text",type:"flags.0?string"},{name:"url",type:"string"},{name:"button_id",type:"int"}],type:"KeyboardButton"},{id:-802258988,predicate:"inputKeyboardButtonUrlAuth",params:[{name:"flags",type:"#"},{name:"request_write_access",type:"flags.0?true"},{name:"text",type:"string"},{name:"fwd_text",type:"flags.1?string"},{name:"url",type:"string"},{name:"bot",type:"InputUser"}],type:"KeyboardButton"},{id:-1831650802,predicate:"urlAuthResultRequest",params:[{name:"flags",type:"#"},{name:"request_write_access",type:"flags.0?true"},{name:"bot",type:"User"},{name:"domain",type:"string"}],type:"UrlAuthResult"},{id:-1886646706,predicate:"urlAuthResultAccepted",params:[{name:"url",type:"string"}],type:"UrlAuthResult"},{id:-1445536993,predicate:"urlAuthResultDefault",params:[],type:"UrlAuthResult"},{id:-2079962673,predicate:"inputPrivacyValueAllowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"InputPrivacyRule"},{id:-380694650,predicate:"inputPrivacyValueDisallowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"InputPrivacyRule"},{id:1796427406,predicate:"privacyValueAllowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"PrivacyRule"},{id:1103656293,predicate:"privacyValueDisallowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"PrivacyRule"},{id:-1672577397,predicate:"messageEntityUnderline",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1090087980,predicate:"messageEntityStrike",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:34469328,predicate:"messageEntityBlockquote",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1786671974,predicate:"updatePeerSettings",params:[{name:"peer",type:"Peer"},{name:"settings",type:"PeerSettings"}],type:"Update"},{id:-1078612597,predicate:"channelLocationEmpty",params:[],type:"ChannelLocation"},{id:547062491,predicate:"channelLocation",params:[{name:"geo_point",type:"GeoPoint"},{name:"address",type:"string"}],type:"ChannelLocation"},{id:-901375139,predicate:"peerLocated",params:[{name:"peer",type:"Peer"},{name:"expires",type:"int"},{name:"distance",type:"int"}],type:"PeerLocated"},{id:-1263546448,predicate:"updatePeerLocated",params:[{name:"peers",type:"Vector<PeerLocated>"}],type:"Update"},{id:241923758,predicate:"channelAdminLogEventActionChangeLocation",params:[{name:"prev_value",type:"ChannelLocation"},{name:"new_value",type:"ChannelLocation"}],type:"ChannelAdminLogEventAction"},{id:-606798099,predicate:"inputReportReasonGeoIrrelevant",params:[],type:"ReportReason"},{id:1401984889,predicate:"channelAdminLogEventActionToggleSlowMode",params:[{name:"prev_value",type:"int"},{name:"new_value",type:"int"}],type:"ChannelAdminLogEventAction"},{id:1148485274,predicate:"auth.authorizationSignUpRequired",params:[{name:"flags",type:"#"},{name:"terms_of_service",type:"flags.0?help.TermsOfService"}],type:"auth.Authorization"},{id:-666824391,predicate:"payments.paymentVerificationNeeded",params:[{name:"url",type:"string"}],type:"payments.PaymentResult"},{id:42402760,predicate:"inputStickerSetAnimatedEmoji",params:[],type:"InputStickerSet"},{id:967122427,predicate:"updateNewScheduledMessage",params:[{name:"message",type:"Message"}],type:"Update"},{id:-1870238482,predicate:"updateDeleteScheduledMessages",params:[{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:-797791052,predicate:"restrictionReason",params:[{name:"platform",type:"string"},{name:"reason",type:"string"},{name:"text",type:"string"}],type:"RestrictionReason"},{id:1012306921,predicate:"inputTheme",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputTheme"},{id:-175567375,predicate:"inputThemeSlug",params:[{name:"slug",type:"string"}],type:"InputTheme"},{id:-1609668650,predicate:"theme",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"for_chat",type:"flags.5?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"slug",type:"string"},{name:"title",type:"string"},{name:"document",type:"flags.2?Document"},{name:"settings",type:"flags.3?Vector<ThemeSettings>"},{name:"emoticon",type:"flags.6?string"},{name:"installs_count",type:"flags.4?int"}],type:"Theme"},{id:-199313886,predicate:"account.themesNotModified",params:[],type:"account.Themes"},{id:-1707242387,predicate:"account.themes",params:[{name:"hash",type:"long"},{name:"themes",type:"Vector<Theme>"}],type:"account.Themes"},{id:-2112423005,predicate:"updateTheme",params:[{name:"theme",type:"Theme"}],type:"Update"},{id:-786326563,predicate:"inputPrivacyKeyAddedByPhone",params:[],type:"InputPrivacyKey"},{id:1124062251,predicate:"privacyKeyAddedByPhone",params:[],type:"PrivacyKey"},{id:-2027964103,predicate:"updateGeoLiveViewed",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"}],type:"Update"},{id:1448076945,predicate:"updateLoginToken",params:[],type:"Update"},{id:1654593920,predicate:"auth.loginToken",params:[{name:"expires",type:"int"},{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:110008598,predicate:"auth.loginTokenMigrateTo",params:[{name:"dc_id",type:"int"},{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:957176926,predicate:"auth.loginTokenSuccess",params:[{name:"authorization",type:"auth.Authorization"}],type:"auth.LoginToken"},{id:1474462241,predicate:"account.contentSettings",params:[{name:"flags",type:"#"},{name:"sensitive_enabled",type:"flags.0?true"},{name:"sensitive_can_change",type:"flags.1?true"}],type:"account.ContentSettings"},{id:-1456996667,predicate:"messages.inactiveChats",params:[{name:"dates",type:"Vector<int>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.InactiveChats"},{id:-1012849566,predicate:"baseThemeClassic",params:[],type:"BaseTheme"},{id:-69724536,predicate:"baseThemeDay",params:[],type:"BaseTheme"},{id:-1212997976,predicate:"baseThemeNight",params:[],type:"BaseTheme"},{id:1834973166,predicate:"baseThemeTinted",params:[],type:"BaseTheme"},{id:1527845466,predicate:"baseThemeArctic",params:[],type:"BaseTheme"},{id:-1770371538,predicate:"inputWallPaperNoFile",params:[{name:"id",type:"long"}],type:"InputWallPaper"},{id:-528465642,predicate:"wallPaperNoFile",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"default",type:"flags.1?true"},{name:"dark",type:"flags.4?true"},{name:"settings",type:"flags.2?WallPaperSettings"}],type:"WallPaper"},{id:-1881255857,predicate:"inputThemeSettings",params:[{name:"flags",type:"#"},{name:"message_colors_animated",type:"flags.2?true"},{name:"base_theme",type:"BaseTheme"},{name:"accent_color",type:"int"},{name:"outbox_accent_color",type:"flags.3?int"},{name:"message_colors",type:"flags.0?Vector<int>"},{name:"wallpaper",type:"flags.1?InputWallPaper"},{name:"wallpaper_settings",type:"flags.1?WallPaperSettings"}],type:"InputThemeSettings"},{id:-94849324,predicate:"themeSettings",params:[{name:"flags",type:"#"},{name:"message_colors_animated",type:"flags.2?true"},{name:"base_theme",type:"BaseTheme"},{name:"accent_color",type:"int"},{name:"outbox_accent_color",type:"flags.3?int"},{name:"message_colors",type:"flags.0?Vector<int>"},{name:"wallpaper",type:"flags.1?WallPaper"}],type:"ThemeSettings"},{id:1421174295,predicate:"webPageAttributeTheme",params:[{name:"flags",type:"#"},{name:"documents",type:"flags.0?Vector<Document>"},{name:"settings",type:"flags.1?ThemeSettings"}],type:"WebPageAttribute"},{id:274961865,predicate:"updateMessagePollVote",params:[{name:"poll_id",type:"long"},{name:"user_id",type:"long"},{name:"options",type:"Vector<bytes>"},{name:"qts",type:"int"}],type:"Update"},{id:886196148,predicate:"messageUserVote",params:[{name:"user_id",type:"long"},{name:"option",type:"bytes"},{name:"date",type:"int"}],type:"MessageUserVote"},{id:1017491692,predicate:"messageUserVoteInputOption",params:[{name:"user_id",type:"long"},{name:"date",type:"int"}],type:"MessageUserVote"},{id:-1973033641,predicate:"messageUserVoteMultiple",params:[{name:"user_id",type:"long"},{name:"options",type:"Vector<bytes>"},{name:"date",type:"int"}],type:"MessageUserVote"},{id:136574537,predicate:"messages.votesList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"votes",type:"Vector<MessageUserVote>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"messages.VotesList"},{id:-1144565411,predicate:"keyboardButtonRequestPoll",params:[{name:"flags",type:"#"},{name:"quiz",type:"flags.0?Bool"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:1981704948,predicate:"messageEntityBankCard",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-177732982,predicate:"bankCardOpenUrl",params:[{name:"url",type:"string"},{name:"name",type:"string"}],type:"BankCardOpenUrl"},{id:1042605427,predicate:"payments.bankCardData",params:[{name:"title",type:"string"},{name:"open_urls",type:"Vector<BankCardOpenUrl>"}],type:"payments.BankCardData"},{id:-118740917,predicate:"peerSelfLocated",params:[{name:"expires",type:"int"}],type:"PeerLocated"},{id:1949890536,predicate:"dialogFilter",params:[{name:"flags",type:"#"},{name:"contacts",type:"flags.0?true"},{name:"non_contacts",type:"flags.1?true"},{name:"groups",type:"flags.2?true"},{name:"broadcasts",type:"flags.3?true"},{name:"bots",type:"flags.4?true"},{name:"exclude_muted",type:"flags.11?true"},{name:"exclude_read",type:"flags.12?true"},{name:"exclude_archived",type:"flags.13?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"emoticon",type:"flags.25?string"},{name:"pinned_peers",type:"Vector<InputPeer>"},{name:"include_peers",type:"Vector<InputPeer>"},{name:"exclude_peers",type:"Vector<InputPeer>"}],type:"DialogFilter"},{id:2004110666,predicate:"dialogFilterSuggested",params:[{name:"filter",type:"DialogFilter"},{name:"description",type:"string"}],type:"DialogFilterSuggested"},{id:654302845,predicate:"updateDialogFilter",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"filter",type:"flags.0?DialogFilter"}],type:"Update"},{id:-1512627963,predicate:"updateDialogFilterOrder",params:[{name:"order",type:"Vector<int>"}],type:"Update"},{id:889491791,predicate:"updateDialogFilters",params:[],type:"Update"},{id:-1237848657,predicate:"statsDateRangeDays",params:[{name:"min_date",type:"int"},{name:"max_date",type:"int"}],type:"StatsDateRangeDays"},{id:-884757282,predicate:"statsAbsValueAndPrev",params:[{name:"current",type:"double"},{name:"previous",type:"double"}],type:"StatsAbsValueAndPrev"},{id:-875679776,predicate:"statsPercentValue",params:[{name:"part",type:"double"},{name:"total",type:"double"}],type:"StatsPercentValue"},{id:1244130093,predicate:"statsGraphAsync",params:[{name:"token",type:"string"}],type:"StatsGraph"},{id:-1092839390,predicate:"statsGraphError",params:[{name:"error",type:"string"}],type:"StatsGraph"},{id:-1901828938,predicate:"statsGraph",params:[{name:"flags",type:"#"},{name:"json",type:"DataJSON"},{name:"zoom_token",type:"flags.0?string"}],type:"StatsGraph"},{id:-1387279939,predicate:"messageInteractionCounters",params:[{name:"msg_id",type:"int"},{name:"views",type:"int"},{name:"forwards",type:"int"}],type:"MessageInteractionCounters"},{id:-1107852396,predicate:"stats.broadcastStats",params:[{name:"period",type:"StatsDateRangeDays"},{name:"followers",type:"StatsAbsValueAndPrev"},{name:"views_per_post",type:"StatsAbsValueAndPrev"},{name:"shares_per_post",type:"StatsAbsValueAndPrev"},{name:"enabled_notifications",type:"StatsPercentValue"},{name:"growth_graph",type:"StatsGraph"},{name:"followers_graph",type:"StatsGraph"},{name:"mute_graph",type:"StatsGraph"},{name:"top_hours_graph",type:"StatsGraph"},{name:"interactions_graph",type:"StatsGraph"},{name:"iv_interactions_graph",type:"StatsGraph"},{name:"views_by_source_graph",type:"StatsGraph"},{name:"new_followers_by_source_graph",type:"StatsGraph"},{name:"languages_graph",type:"StatsGraph"},{name:"recent_message_interactions",type:"Vector<MessageInteractionCounters>"}],type:"stats.BroadcastStats"},{id:-428884101,predicate:"inputMediaDice",params:[{name:"emoticon",type:"string"}],type:"InputMedia"},{id:1065280907,predicate:"messageMediaDice",params:[{name:"value",type:"int"},{name:"emoticon",type:"string"}],type:"MessageMedia"},{id:-427863538,predicate:"inputStickerSetDice",params:[{name:"emoticon",type:"string"}],type:"InputStickerSet"},{id:-1728664459,predicate:"help.promoDataEmpty",params:[{name:"expires",type:"int"}],type:"help.PromoData"},{id:-1942390465,predicate:"help.promoData",params:[{name:"flags",type:"#"},{name:"proxy",type:"flags.0?true"},{name:"expires",type:"int"},{name:"peer",type:"Peer"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"psa_type",type:"flags.1?string"},{name:"psa_message",type:"flags.2?string"}],type:"help.PromoData"},{id:-567037804,predicate:"videoSize",params:[{name:"flags",type:"#"},{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"size",type:"int"},{name:"video_start_ts",type:"flags.0?double"}],type:"VideoSize"},{id:643940105,predicate:"updatePhoneCallSignalingData",params:[{name:"phone_call_id",type:"long"},{name:"data",type:"bytes"}],type:"Update"},{id:1634294960,predicate:"chatInvitePeek",params:[{name:"chat",type:"Chat"},{name:"expires",type:"int"}],type:"ChatInvite"},{id:-1660637285,predicate:"statsGroupTopPoster",params:[{name:"user_id",type:"long"},{name:"messages",type:"int"},{name:"avg_chars",type:"int"}],type:"StatsGroupTopPoster"},{id:-682079097,predicate:"statsGroupTopAdmin",params:[{name:"user_id",type:"long"},{name:"deleted",type:"int"},{name:"kicked",type:"int"},{name:"banned",type:"int"}],type:"StatsGroupTopAdmin"},{id:1398765469,predicate:"statsGroupTopInviter",params:[{name:"user_id",type:"long"},{name:"invitations",type:"int"}],type:"StatsGroupTopInviter"},{id:-276825834,predicate:"stats.megagroupStats",params:[{name:"period",type:"StatsDateRangeDays"},{name:"members",type:"StatsAbsValueAndPrev"},{name:"messages",type:"StatsAbsValueAndPrev"},{name:"viewers",type:"StatsAbsValueAndPrev"},{name:"posters",type:"StatsAbsValueAndPrev"},{name:"growth_graph",type:"StatsGraph"},{name:"members_graph",type:"StatsGraph"},{name:"new_members_by_source_graph",type:"StatsGraph"},{name:"languages_graph",type:"StatsGraph"},{name:"messages_graph",type:"StatsGraph"},{name:"actions_graph",type:"StatsGraph"},{name:"top_hours_graph",type:"StatsGraph"},{name:"weekdays_graph",type:"StatsGraph"},{name:"top_posters",type:"Vector<StatsGroupTopPoster>"},{name:"top_admins",type:"Vector<StatsGroupTopAdmin>"},{name:"top_inviters",type:"Vector<StatsGroupTopInviter>"},{name:"users",type:"Vector<User>"}],type:"stats.MegagroupStats"},{id:-1096616924,predicate:"globalPrivacySettings",params:[{name:"flags",type:"#"},{name:"archive_and_mute_new_noncontact_peers",type:"flags.0?Bool"}],type:"GlobalPrivacySettings"},{id:1667228533,predicate:"phoneConnectionWebrtc",params:[{name:"flags",type:"#"},{name:"turn",type:"flags.0?true"},{name:"stun",type:"flags.1?true"},{name:"id",type:"long"},{name:"ip",type:"string"},{name:"ipv6",type:"string"},{name:"port",type:"int"},{name:"username",type:"string"},{name:"password",type:"string"}],type:"PhoneConnection"},{id:1107543535,predicate:"help.countryCode",params:[{name:"flags",type:"#"},{name:"country_code",type:"string"},{name:"prefixes",type:"flags.0?Vector<string>"},{name:"patterns",type:"flags.1?Vector<string>"}],type:"help.CountryCode"},{id:-1014526429,predicate:"help.country",params:[{name:"flags",type:"#"},{name:"hidden",type:"flags.0?true"},{name:"iso2",type:"string"},{name:"default_name",type:"string"},{name:"name",type:"flags.1?string"},{name:"country_codes",type:"Vector<help.CountryCode>"}],type:"help.Country"},{id:-1815339214,predicate:"help.countriesListNotModified",params:[],type:"help.CountriesList"},{id:-2016381538,predicate:"help.countriesList",params:[{name:"countries",type:"Vector<help.Country>"},{name:"hash",type:"int"}],type:"help.CountriesList"},{id:1163625789,predicate:"messageViews",params:[{name:"flags",type:"#"},{name:"views",type:"flags.0?int"},{name:"forwards",type:"flags.1?int"},{name:"replies",type:"flags.2?MessageReplies"}],type:"MessageViews"},{id:-761649164,predicate:"updateChannelMessageForwards",params:[{name:"channel_id",type:"long"},{name:"id",type:"int"},{name:"forwards",type:"int"}],type:"Update"},{id:-96535659,predicate:"photoSizeProgressive",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"sizes",type:"Vector<int>"}],type:"PhotoSize"},{id:-1228606141,predicate:"messages.messageViews",params:[{name:"views",type:"Vector<MessageViews>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.MessageViews"},{id:-693004986,predicate:"updateReadChannelDiscussionInbox",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"int"},{name:"read_max_id",type:"int"},{name:"broadcast_id",type:"flags.0?long"},{name:"broadcast_post",type:"flags.0?int"}],type:"Update"},{id:1767677564,predicate:"updateReadChannelDiscussionOutbox",params:[{name:"channel_id",type:"long"},{name:"top_msg_id",type:"int"},{name:"read_max_id",type:"int"}],type:"Update"},{id:-1506535550,predicate:"messages.discussionMessage",params:[{name:"flags",type:"#"},{name:"messages",type:"Vector<Message>"},{name:"max_id",type:"flags.0?int"},{name:"read_inbox_max_id",type:"flags.1?int"},{name:"read_outbox_max_id",type:"flags.2?int"},{name:"unread_count",type:"int"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.DiscussionMessage"},{id:-1495959709,predicate:"messageReplyHeader",params:[{name:"flags",type:"#"},{name:"reply_to_scheduled",type:"flags.2?true"},{name:"forum_topic",type:"flags.3?true"},{name:"reply_to_msg_id",type:"int"},{name:"reply_to_peer_id",type:"flags.0?Peer"},{name:"reply_to_top_id",type:"flags.1?int"}],type:"MessageReplyHeader"},{id:-2083123262,predicate:"messageReplies",params:[{name:"flags",type:"#"},{name:"comments",type:"flags.0?true"},{name:"replies",type:"int"},{name:"replies_pts",type:"int"},{name:"recent_repliers",type:"flags.1?Vector<Peer>"},{name:"channel_id",type:"flags.0?long"},{name:"max_id",type:"flags.2?int"},{name:"read_max_id",type:"flags.3?int"}],type:"MessageReplies"},{id:610945826,predicate:"updatePeerBlocked",params:[{name:"peer_id",type:"Peer"},{name:"blocked",type:"Bool"}],type:"Update"},{id:-386039788,predicate:"peerBlocked",params:[{name:"peer_id",type:"Peer"},{name:"date",type:"int"}],type:"PeerBlocked"},{id:-1937192669,predicate:"updateChannelUserTyping",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"flags.0?int"},{name:"from_id",type:"Peer"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:-1392895362,predicate:"inputMessageCallbackQuery",params:[{name:"id",type:"int"},{name:"query_id",type:"long"}],type:"InputMessage"},{id:453242886,predicate:"channelParticipantLeft",params:[{name:"peer",type:"Peer"}],type:"ChannelParticipant"},{id:-531931925,predicate:"channelParticipantsMentions",params:[{name:"flags",type:"#"},{name:"q",type:"flags.0?string"},{name:"top_msg_id",type:"flags.1?int"}],type:"ChannelParticipantsFilter"},{id:-309990731,predicate:"updatePinnedMessages",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1538885128,predicate:"updatePinnedChannelMessages",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:464520273,predicate:"inputMessagesFilterPinned",params:[],type:"MessagesFilter"},{id:-1986399595,predicate:"stats.messageStats",params:[{name:"views_graph",type:"StatsGraph"}],type:"stats.MessageStats"},{id:-1730095465,predicate:"messageActionGeoProximityReached",params:[{name:"from_id",type:"Peer"},{name:"to_id",type:"Peer"},{name:"distance",type:"int"}],type:"MessageAction"},{id:-668906175,predicate:"photoPathSize",params:[{name:"type",type:"string"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:-651419003,predicate:"speakingInGroupCallAction",params:[],type:"SendMessageAction"},{id:2004925620,predicate:"groupCallDiscarded",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"duration",type:"int"}],type:"GroupCall"},{id:-711498484,predicate:"groupCall",params:[{name:"flags",type:"#"},{name:"join_muted",type:"flags.1?true"},{name:"can_change_join_muted",type:"flags.2?true"},{name:"join_date_asc",type:"flags.6?true"},{name:"schedule_start_subscribed",type:"flags.8?true"},{name:"can_start_video",type:"flags.9?true"},{name:"record_video_active",type:"flags.11?true"},{name:"rtmp_stream",type:"flags.12?true"},{name:"listeners_hidden",type:"flags.13?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"participants_count",type:"int"},{name:"title",type:"flags.3?string"},{name:"stream_dc_id",type:"flags.4?int"},{name:"record_start_date",type:"flags.5?int"},{name:"schedule_date",type:"flags.7?int"},{name:"unmuted_video_count",type:"flags.10?int"},{name:"unmuted_video_limit",type:"int"},{name:"version",type:"int"}],type:"GroupCall"},{id:-659913713,predicate:"inputGroupCall",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputGroupCall"},{id:2047704898,predicate:"messageActionGroupCall",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"duration",type:"flags.0?int"}],type:"MessageAction"},{id:1345295095,predicate:"messageActionInviteToGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-341428482,predicate:"groupCallParticipant",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"left",type:"flags.1?true"},{name:"can_self_unmute",type:"flags.2?true"},{name:"just_joined",type:"flags.4?true"},{name:"versioned",type:"flags.5?true"},{name:"min",type:"flags.8?true"},{name:"muted_by_you",type:"flags.9?true"},{name:"volume_by_admin",type:"flags.10?true"},{name:"self",type:"flags.12?true"},{name:"video_joined",type:"flags.15?true"},{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"active_date",type:"flags.3?int"},{name:"source",type:"int"},{name:"volume",type:"flags.7?int"},{name:"about",type:"flags.11?string"},{name:"raise_hand_rating",type:"flags.13?long"},{name:"video",type:"flags.6?GroupCallParticipantVideo"},{name:"presentation",type:"flags.14?GroupCallParticipantVideo"}],type:"GroupCallParticipant"},{id:-124097970,predicate:"updateChat",params:[{name:"chat_id",type:"long"}],type:"Update"},{id:-219423922,predicate:"updateGroupCallParticipants",params:[{name:"call",type:"InputGroupCall"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"version",type:"int"}],type:"Update"},{id:347227392,predicate:"updateGroupCall",params:[{name:"chat_id",type:"long"},{name:"call",type:"GroupCall"}],type:"Update"},{id:-1636664659,predicate:"phone.groupCall",params:[{name:"call",type:"GroupCall"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"participants_next_offset",type:"string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.GroupCall"},{id:-193506890,predicate:"phone.groupParticipants",params:[{name:"count",type:"int"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"next_offset",type:"string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"version",type:"int"}],type:"phone.GroupParticipants"},{id:813821341,predicate:"inlineQueryPeerTypeSameBotPM",params:[],type:"InlineQueryPeerType"},{id:-2093215828,predicate:"inlineQueryPeerTypePM",params:[],type:"InlineQueryPeerType"},{id:-681130742,predicate:"inlineQueryPeerTypeChat",params:[],type:"InlineQueryPeerType"},{id:1589952067,predicate:"inlineQueryPeerTypeMegagroup",params:[],type:"InlineQueryPeerType"},{id:1664413338,predicate:"inlineQueryPeerTypeBroadcast",params:[],type:"InlineQueryPeerType"},{id:589338437,predicate:"channelAdminLogEventActionStartGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"ChannelAdminLogEventAction"},{id:-610299584,predicate:"channelAdminLogEventActionDiscardGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"ChannelAdminLogEventAction"},{id:-115071790,predicate:"channelAdminLogEventActionParticipantMute",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:-431740480,predicate:"channelAdminLogEventActionParticipantUnmute",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:1456906823,predicate:"channelAdminLogEventActionToggleGroupCallSetting",params:[{name:"join_muted",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-1966921727,predicate:"inputPaymentCredentialsGooglePay",params:[{name:"payment_token",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:375566091,predicate:"messages.historyImport",params:[{name:"id",type:"long"}],type:"messages.HistoryImport"},{id:-606432698,predicate:"sendMessageHistoryImportAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:1578088377,predicate:"messages.historyImportParsed",params:[{name:"flags",type:"#"},{name:"pm",type:"flags.0?true"},{name:"group",type:"flags.1?true"},{name:"title",type:"flags.2?string"}],type:"messages.HistoryImportParsed"},{id:-170010905,predicate:"inputReportReasonFake",params:[],type:"ReportReason"},{id:-275956116,predicate:"messages.affectedFoundMessages",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"offset",type:"int"},{name:"messages",type:"Vector<int>"}],type:"messages.AffectedFoundMessages"},{id:1007897979,predicate:"messageActionSetMessagesTTL",params:[{name:"flags",type:"#"},{name:"period",type:"int"},{name:"auto_setting_from",type:"flags.0?long"}],type:"MessageAction"},{id:-1147422299,predicate:"updatePeerHistoryTTL",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"ttl_period",type:"flags.0?int"}],type:"Update"},{id:-796432838,predicate:"updateChatParticipant",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"date",type:"int"},{name:"actor_id",type:"long"},{name:"user_id",type:"long"},{name:"prev_participant",type:"flags.0?ChatParticipant"},{name:"new_participant",type:"flags.1?ChatParticipant"},{name:"invite",type:"flags.2?ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-1738720581,predicate:"updateChannelParticipant",params:[{name:"flags",type:"#"},{name:"via_chatlist",type:"flags.3?true"},{name:"channel_id",type:"long"},{name:"date",type:"int"},{name:"actor_id",type:"long"},{name:"user_id",type:"long"},{name:"prev_participant",type:"flags.0?ChannelParticipant"},{name:"new_participant",type:"flags.1?ChannelParticipant"},{name:"invite",type:"flags.2?ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-997782967,predicate:"updateBotStopped",params:[{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"stopped",type:"Bool"},{name:"qts",type:"int"}],type:"Update"},{id:-1940201511,predicate:"chatInviteImporter",params:[{name:"flags",type:"#"},{name:"requested",type:"flags.0?true"},{name:"via_chatlist",type:"flags.3?true"},{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"about",type:"flags.2?string"},{name:"approved_by",type:"flags.1?long"}],type:"ChatInviteImporter"},{id:-1111085620,predicate:"messages.exportedChatInvites",params:[{name:"count",type:"int"},{name:"invites",type:"Vector<ExportedChatInvite>"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvites"},{id:410107472,predicate:"messages.exportedChatInvite",params:[{name:"invite",type:"ExportedChatInvite"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvite"},{id:572915951,predicate:"messages.exportedChatInviteReplaced",params:[{name:"invite",type:"ExportedChatInvite"},{name:"new_invite",type:"ExportedChatInvite"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvite"},{id:-2118733814,predicate:"messages.chatInviteImporters",params:[{name:"count",type:"int"},{name:"importers",type:"Vector<ChatInviteImporter>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatInviteImporters"},{id:-219353309,predicate:"chatAdminWithInvites",params:[{name:"admin_id",type:"long"},{name:"invites_count",type:"int"},{name:"revoked_invites_count",type:"int"}],type:"ChatAdminWithInvites"},{id:-1231326505,predicate:"messages.chatAdminsWithInvites",params:[{name:"admins",type:"Vector<ChatAdminWithInvites>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatAdminsWithInvites"},{id:-23084712,predicate:"channelAdminLogEventActionParticipantJoinByInvite",params:[{name:"flags",type:"#"},{name:"via_chatlist",type:"flags.0?true"},{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1515256996,predicate:"channelAdminLogEventActionExportedInviteDelete",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1091179342,predicate:"channelAdminLogEventActionExportedInviteRevoke",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:-384910503,predicate:"channelAdminLogEventActionExportedInviteEdit",params:[{name:"prev_invite",type:"ExportedChatInvite"},{name:"new_invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1048537159,predicate:"channelAdminLogEventActionParticipantVolume",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:1855199800,predicate:"channelAdminLogEventActionChangeHistoryTTL",params:[{name:"prev_value",type:"int"},{name:"new_value",type:"int"}],type:"ChannelAdminLogEventAction"},{id:-1571952873,predicate:"messages.checkedHistoryImportPeer",params:[{name:"confirm_text",type:"string"}],type:"messages.CheckedHistoryImportPeer"},{id:93890858,predicate:"inputGroupCallStream",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"time_ms",type:"long"},{name:"scale",type:"int"},{name:"video_channel",type:"flags.0?int"},{name:"video_quality",type:"flags.0?int"}],type:"InputFileLocation"},{id:-1343921601,predicate:"phone.joinAsPeers",params:[{name:"peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.JoinAsPeers"},{id:541839704,predicate:"phone.exportedGroupCallInvite",params:[{name:"link",type:"string"}],type:"phone.ExportedGroupCallInvite"},{id:-672693723,predicate:"inputBotInlineMessageMediaInvoice",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?InputWebDocument"},{name:"invoice",type:"Invoice"},{name:"payload",type:"bytes"},{name:"provider",type:"string"},{name:"provider_data",type:"DataJSON"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:894081801,predicate:"botInlineMessageMediaInvoice",params:[{name:"flags",type:"#"},{name:"shipping_address_requested",type:"flags.1?true"},{name:"test",type:"flags.3?true"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?WebDocument"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1281329567,predicate:"messageActionGroupCallScheduled",params:[{name:"call",type:"InputGroupCall"},{name:"schedule_date",type:"int"}],type:"MessageAction"},{id:-592373577,predicate:"groupCallParticipantVideoSourceGroup",params:[{name:"semantics",type:"string"},{name:"sources",type:"Vector<int>"}],type:"GroupCallParticipantVideoSourceGroup"},{id:1735736008,predicate:"groupCallParticipantVideo",params:[{name:"flags",type:"#"},{name:"paused",type:"flags.0?true"},{name:"endpoint",type:"string"},{name:"source_groups",type:"Vector<GroupCallParticipantVideoSourceGroup>"},{name:"audio_source",type:"flags.1?int"}],type:"GroupCallParticipantVideo"},{id:192428418,predicate:"updateGroupCallConnection",params:[{name:"flags",type:"#"},{name:"presentation",type:"flags.0?true"},{name:"params",type:"DataJSON"}],type:"Update"},{id:-2046910401,predicate:"stickers.suggestedShortName",params:[{name:"short_name",type:"string"}],type:"stickers.SuggestedShortName"},{id:795652779,predicate:"botCommandScopeDefault",params:[],type:"BotCommandScope"},{id:1011811544,predicate:"botCommandScopeUsers",params:[],type:"BotCommandScope"},{id:1877059713,predicate:"botCommandScopeChats",params:[],type:"BotCommandScope"},{id:-1180016534,predicate:"botCommandScopeChatAdmins",params:[],type:"BotCommandScope"},{id:-610432643,predicate:"botCommandScopePeer",params:[{name:"peer",type:"InputPeer"}],type:"BotCommandScope"},{id:1071145937,predicate:"botCommandScopePeerAdmins",params:[{name:"peer",type:"InputPeer"}],type:"BotCommandScope"},{id:169026035,predicate:"botCommandScopePeerUser",params:[{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"BotCommandScope"},{id:-478701471,predicate:"account.resetPasswordFailedWait",params:[{name:"retry_date",type:"int"}],type:"account.ResetPasswordResult"},{id:-370148227,predicate:"account.resetPasswordRequestedWait",params:[{name:"until_date",type:"int"}],type:"account.ResetPasswordResult"},{id:-383330754,predicate:"account.resetPasswordOk",params:[],type:"account.ResetPasswordResult"},{id:1299263278,predicate:"updateBotCommands",params:[{name:"peer",type:"Peer"},{name:"bot_id",type:"long"},{name:"commands",type:"Vector<BotCommand>"}],type:"Update"},{id:-1434950843,predicate:"messageActionSetChatTheme",params:[{name:"emoticon",type:"string"}],type:"MessageAction"},{id:-1336228175,predicate:"sendMessageChooseStickerAction",params:[],type:"SendMessageAction"},{id:-64636888,predicate:"sponsoredMessage",params:[{name:"flags",type:"#"},{name:"recommended",type:"flags.5?true"},{name:"show_peer_photo",type:"flags.6?true"},{name:"random_id",type:"bytes"},{name:"from_id",type:"flags.3?Peer"},{name:"chat_invite",type:"flags.4?ChatInvite"},{name:"chat_invite_hash",type:"flags.4?string"},{name:"channel_post",type:"flags.2?int"},{name:"start_param",type:"flags.0?string"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"sponsor_info",type:"flags.7?string"},{name:"additional_info",type:"flags.8?string"}],type:"SponsoredMessage"},{id:-907141753,predicate:"messages.sponsoredMessages",params:[{name:"flags",type:"#"},{name:"posts_between",type:"flags.0?int"},{name:"messages",type:"Vector<SponsoredMessage>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SponsoredMessages"},{id:215889721,predicate:"inputStickerSetAnimatedEmojiAnimations",params:[],type:"InputStickerSet"},{id:630664139,predicate:"sendMessageEmojiInteraction",params:[{name:"emoticon",type:"string"},{name:"msg_id",type:"int"},{name:"interaction",type:"DataJSON"}],type:"SendMessageAction"},{id:-1234857938,predicate:"sendMessageEmojiInteractionSeen",params:[{name:"emoticon",type:"string"}],type:"SendMessageAction"},{id:-1227287081,predicate:"inputBotInlineMessageID64",params:[{name:"dc_id",type:"int"},{name:"owner_id",type:"long"},{name:"id",type:"int"},{name:"access_hash",type:"long"}],type:"InputBotInlineMessageID"},{id:-911191137,predicate:"searchResultsCalendarPeriod",params:[{name:"date",type:"int"},{name:"min_msg_id",type:"int"},{name:"max_msg_id",type:"int"},{name:"count",type:"int"}],type:"SearchResultsCalendarPeriod"},{id:343859772,predicate:"messages.searchResultsCalendar",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.0?true"},{name:"count",type:"int"},{name:"min_date",type:"int"},{name:"min_msg_id",type:"int"},{name:"offset_id_offset",type:"flags.1?int"},{name:"periods",type:"Vector<SearchResultsCalendarPeriod>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SearchResultsCalendar"},{id:2137295719,predicate:"searchResultPosition",params:[{name:"msg_id",type:"int"},{name:"date",type:"int"},{name:"offset",type:"int"}],type:"SearchResultsPosition"},{id:1404185519,predicate:"messages.searchResultsPositions",params:[{name:"count",type:"int"},{name:"positions",type:"Vector<SearchResultsPosition>"}],type:"messages.SearchResultsPositions"},{id:-339958837,predicate:"messageActionChatJoinedByRequest",params:[],type:"MessageAction"},{id:1885586395,predicate:"updatePendingJoinRequests",params:[{name:"peer",type:"Peer"},{name:"requests_pending",type:"int"},{name:"recent_requesters",type:"Vector<long>"}],type:"Update"},{id:299870598,predicate:"updateBotChatInviteRequester",params:[{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"user_id",type:"long"},{name:"about",type:"string"},{name:"invite",type:"ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-1347021750,predicate:"channelAdminLogEventActionParticipantJoinByRequest",params:[{name:"invite",type:"ExportedChatInvite"},{name:"approved_by",type:"long"}],type:"ChannelAdminLogEventAction"},{id:-376962181,predicate:"inputKeyboardButtonUserProfile",params:[{name:"text",type:"string"},{name:"user_id",type:"InputUser"}],type:"KeyboardButton"},{id:814112961,predicate:"keyboardButtonUserProfile",params:[{name:"text",type:"string"},{name:"user_id",type:"long"}],type:"KeyboardButton"},{id:-191450938,predicate:"channels.sendAsPeers",params:[{name:"peers",type:"Vector<SendAsPeer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.SendAsPeers"},{id:-886388890,predicate:"channelAdminLogEventActionToggleNoForwards",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-738646805,predicate:"messages.stickerSetNotModified",params:[],type:"messages.StickerSet"},{id:997004590,predicate:"users.userFull",params:[{name:"full_user",type:"UserFull"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"users.UserFull"},{id:1753266509,predicate:"messages.peerSettings",params:[{name:"settings",type:"PeerSettings"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.PeerSettings"},{id:663693416,predicate:"channelAdminLogEventActionSendMessage",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:-702884114,predicate:"auth.codeTypeMissedCall",params:[],type:"auth.CodeType"},{id:-2113903484,predicate:"auth.sentCodeTypeMissedCall",params:[{name:"prefix",type:"string"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1012759713,predicate:"auth.loggedOut",params:[{name:"flags",type:"#"},{name:"future_auth_token",type:"flags.0?bytes"}],type:"auth.LoggedOut"},{id:1578843320,predicate:"updateMessageReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"top_msg_id",type:"flags.0?int"},{name:"reactions",type:"MessageReactions"}],type:"Update"},{id:-1546531968,predicate:"reactionCount",params:[{name:"flags",type:"#"},{name:"chosen_order",type:"flags.0?int"},{name:"reaction",type:"Reaction"},{name:"count",type:"int"}],type:"ReactionCount"},{id:1328256121,predicate:"messageReactions",params:[{name:"flags",type:"#"},{name:"min",type:"flags.0?true"},{name:"can_see_list",type:"flags.2?true"},{name:"results",type:"Vector<ReactionCount>"},{name:"recent_reactions",type:"flags.1?Vector<MessagePeerReaction>"}],type:"MessageReactions"},{id:834488621,predicate:"messages.messageReactionsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"reactions",type:"Vector<MessagePeerReaction>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"messages.MessageReactionsList"},{id:-1065882623,predicate:"availableReaction",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"premium",type:"flags.2?true"},{name:"reaction",type:"string"},{name:"title",type:"string"},{name:"static_icon",type:"Document"},{name:"appear_animation",type:"Document"},{name:"select_animation",type:"Document"},{name:"activate_animation",type:"Document"},{name:"effect_animation",type:"Document"},{name:"around_animation",type:"flags.1?Document"},{name:"center_icon",type:"flags.1?Document"}],type:"AvailableReaction"},{id:-1626924713,predicate:"messages.availableReactionsNotModified",params:[],type:"messages.AvailableReactions"},{id:1989032621,predicate:"messages.availableReactions",params:[{name:"hash",type:"int"},{name:"reactions",type:"Vector<AvailableReaction>"}],type:"messages.AvailableReactions"},{id:852137487,predicate:"messageEntitySpoiler",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1102180616,predicate:"channelAdminLogEventActionChangeAvailableReactions",params:[{name:"prev_value",type:"ChatReactions"},{name:"new_value",type:"ChatReactions"}],type:"ChannelAdminLogEventAction"},{id:-1938180548,predicate:"messagePeerReaction",params:[{name:"flags",type:"#"},{name:"big",type:"flags.0?true"},{name:"unread",type:"flags.1?true"},{name:"peer_id",type:"Peer"},{name:"date",type:"int"},{name:"reaction",type:"Reaction"}],type:"MessagePeerReaction"},{id:-2132064081,predicate:"groupCallStreamChannel",params:[{name:"channel",type:"int"},{name:"scale",type:"int"},{name:"last_timestamp_ms",type:"long"}],type:"GroupCallStreamChannel"},{id:-790330702,predicate:"phone.groupCallStreamChannels",params:[{name:"channels",type:"Vector<GroupCallStreamChannel>"}],type:"phone.GroupCallStreamChannels"},{id:177124030,predicate:"inputReportReasonIllegalDrugs",params:[],type:"ReportReason"},{id:-1631091139,predicate:"inputReportReasonPersonalDetails",params:[],type:"ReportReason"},{id:767505458,predicate:"phone.groupCallStreamRtmpUrl",params:[{name:"url",type:"string"},{name:"key",type:"string"}],type:"phone.GroupCallStreamRtmpUrl"},{id:1165423600,predicate:"attachMenuBotIconColor",params:[{name:"name",type:"string"},{name:"color",type:"int"}],type:"AttachMenuBotIconColor"},{id:-1297663893,predicate:"attachMenuBotIcon",params:[{name:"flags",type:"#"},{name:"name",type:"string"},{name:"icon",type:"Document"},{name:"colors",type:"flags.0?Vector<AttachMenuBotIconColor>"}],type:"AttachMenuBotIcon"},{id:-928371502,predicate:"attachMenuBot",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"has_settings",type:"flags.1?true"},{name:"request_write_access",type:"flags.2?true"},{name:"bot_id",type:"long"},{name:"short_name",type:"string"},{name:"peer_types",type:"Vector<AttachMenuPeerType>"},{name:"icons",type:"Vector<AttachMenuBotIcon>"}],type:"AttachMenuBot"},{id:-237467044,predicate:"attachMenuBotsNotModified",params:[],type:"AttachMenuBots"},{id:1011024320,predicate:"attachMenuBots",params:[{name:"hash",type:"long"},{name:"bots",type:"Vector<AttachMenuBot>"},{name:"users",type:"Vector<User>"}],type:"AttachMenuBots"},{id:-1816172929,predicate:"attachMenuBotsBot",params:[{name:"bot",type:"AttachMenuBot"},{name:"users",type:"Vector<User>"}],type:"AttachMenuBotsBot"},{id:397910539,predicate:"updateAttachMenuBots",params:[],type:"Update"},{id:202659196,predicate:"webViewResultUrl",params:[{name:"query_id",type:"long"},{name:"url",type:"string"}],type:"WebViewResult"},{id:-2010155333,predicate:"simpleWebViewResultUrl",params:[{name:"url",type:"string"}],type:"SimpleWebViewResult"},{id:211046684,predicate:"webViewMessageSent",params:[{name:"flags",type:"#"},{name:"msg_id",type:"flags.0?InputBotInlineMessageID"}],type:"WebViewMessageSent"},{id:361936797,predicate:"updateWebViewResultSent",params:[{name:"query_id",type:"long"}],type:"Update"},{id:326529584,predicate:"keyboardButtonWebView",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:-1598009252,predicate:"keyboardButtonSimpleWebView",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:1205698681,predicate:"messageActionWebViewDataSentMe",params:[{name:"text",type:"string"},{name:"data",type:"string"}],type:"MessageAction"},{id:-1262252875,predicate:"messageActionWebViewDataSent",params:[{name:"text",type:"string"}],type:"MessageAction"},{id:347625491,predicate:"updateBotMenuButton",params:[{name:"bot_id",type:"long"},{name:"button",type:"BotMenuButton"}],type:"Update"},{id:1966318984,predicate:"botMenuButtonDefault",params:[],type:"BotMenuButton"},{id:1113113093,predicate:"botMenuButtonCommands",params:[],type:"BotMenuButton"},{id:-944407322,predicate:"botMenuButton",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"BotMenuButton"},{id:-67704655,predicate:"account.savedRingtonesNotModified",params:[],type:"account.SavedRingtones"},{id:-1041683259,predicate:"account.savedRingtones",params:[{name:"hash",type:"long"},{name:"ringtones",type:"Vector<Document>"}],type:"account.SavedRingtones"},{id:1960361625,predicate:"updateSavedRingtones",params:[],type:"Update"},{id:-1746354498,predicate:"notificationSoundDefault",params:[],type:"NotificationSound"},{id:1863070943,predicate:"notificationSoundNone",params:[],type:"NotificationSound"},{id:-2096391452,predicate:"notificationSoundLocal",params:[{name:"title",type:"string"},{name:"data",type:"string"}],type:"NotificationSound"},{id:-9666487,predicate:"notificationSoundRingtone",params:[{name:"id",type:"long"}],type:"NotificationSound"},{id:-1222230163,predicate:"account.savedRingtone",params:[],type:"account.SavedRingtone"},{id:523271863,predicate:"account.savedRingtoneConverted",params:[{name:"document",type:"Document"}],type:"account.SavedRingtone"},{id:2104224014,predicate:"attachMenuPeerTypeSameBotPM",params:[],type:"AttachMenuPeerType"},{id:-1020528102,predicate:"attachMenuPeerTypeBotPM",params:[],type:"AttachMenuPeerType"},{id:-247016673,predicate:"attachMenuPeerTypePM",params:[],type:"AttachMenuPeerType"},{id:84480319,predicate:"attachMenuPeerTypeChat",params:[],type:"AttachMenuPeerType"},{id:2080104188,predicate:"attachMenuPeerTypeBroadcast",params:[],type:"AttachMenuPeerType"},{id:-317687113,predicate:"chatInvitePublicJoinRequests",params:[],type:"ExportedChatInvite"},{id:-977967015,predicate:"inputInvoiceMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"InputInvoice"},{id:-1020867857,predicate:"inputInvoiceSlug",params:[{name:"slug",type:"string"}],type:"InputInvoice"},{id:-1362048039,predicate:"payments.exportedInvoice",params:[{name:"url",type:"string"}],type:"payments.ExportedInvoice"},{id:8703322,predicate:"updateTranscribedAudio",params:[{name:"flags",type:"#"},{name:"pending",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"transcription_id",type:"long"},{name:"text",type:"string"}],type:"Update"},{id:-1821037486,predicate:"messages.transcribedAudio",params:[{name:"flags",type:"#"},{name:"pending",type:"flags.0?true"},{name:"transcription_id",type:"long"},{name:"text",type:"string"}],type:"messages.TranscribedAudio"},{id:909284270,predicate:"dialogFilterDefault",params:[],type:"DialogFilter"},{id:1395946908,predicate:"help.premiumPromo",params:[{name:"status_text",type:"string"},{name:"status_entities",type:"Vector<MessageEntity>"},{name:"video_sections",type:"Vector<string>"},{name:"videos",type:"Vector<Document>"},{name:"period_options",type:"Vector<PremiumSubscriptionOption>"},{name:"users",type:"Vector<User>"}],type:"help.PremiumPromo"},{id:-925956616,predicate:"messageEntityCustomEmoji",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"document_id",type:"long"}],type:"MessageEntity"},{id:-48981863,predicate:"documentAttributeCustomEmoji",params:[{name:"flags",type:"#"},{name:"free",type:"flags.0?true"},{name:"text_color",type:"flags.1?true"},{name:"alt",type:"string"},{name:"stickerset",type:"InputStickerSet"}],type:"DocumentAttribute"},{id:1087454222,predicate:"stickerSetFullCovered",params:[{name:"set",type:"StickerSet"},{name:"packs",type:"Vector<StickerPack>"},{name:"keywords",type:"Vector<StickerKeyword>"},{name:"documents",type:"Vector<Document>"}],type:"StickerSetCovered"},{id:-1502273946,predicate:"inputStorePaymentPremiumSubscription",params:[{name:"flags",type:"#"},{name:"restore",type:"flags.0?true"},{name:"upgrade",type:"flags.1?true"}],type:"InputStorePaymentPurpose"},{id:1634697192,predicate:"inputStorePaymentGiftPremium",params:[{name:"user_id",type:"InputUser"},{name:"currency",type:"string"},{name:"amount",type:"long"}],type:"InputStorePaymentPurpose"},{id:-935499028,predicate:"messageActionGiftPremium",params:[{name:"flags",type:"#"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"months",type:"int"},{name:"crypto_currency",type:"flags.0?string"},{name:"crypto_amount",type:"flags.0?long"}],type:"MessageAction"},{id:1958953753,predicate:"premiumGiftOption",params:[{name:"flags",type:"#"},{name:"months",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"bot_url",type:"string"},{name:"store_product",type:"flags.0?string"}],type:"PremiumGiftOption"},{id:-930399486,predicate:"inputStickerSetPremiumGifts",params:[],type:"InputStickerSet"},{id:-78886548,predicate:"updateReadFeaturedEmojiStickers",params:[],type:"Update"},{id:-1360618136,predicate:"inputPrivacyKeyVoiceMessages",params:[],type:"InputPrivacyKey"},{id:110621716,predicate:"privacyKeyVoiceMessages",params:[],type:"PrivacyKey"},{id:-1996951013,predicate:"paymentFormMethod",params:[{name:"url",type:"string"},{name:"title",type:"string"}],type:"PaymentFormMethod"},{id:-193992412,predicate:"inputWebFileAudioAlbumThumbLocation",params:[{name:"flags",type:"#"},{name:"small",type:"flags.2?true"},{name:"document",type:"flags.0?InputDocument"},{name:"title",type:"flags.1?string"},{name:"performer",type:"flags.1?string"}],type:"InputWebFileLocation"},{id:769727150,predicate:"emojiStatusEmpty",params:[],type:"EmojiStatus"},{id:-1835310691,predicate:"emojiStatus",params:[{name:"document_id",type:"long"}],type:"EmojiStatus"},{id:-97474361,predicate:"emojiStatusUntil",params:[{name:"document_id",type:"long"},{name:"until",type:"int"}],type:"EmojiStatus"},{id:674706841,predicate:"updateUserEmojiStatus",params:[{name:"user_id",type:"long"},{name:"emoji_status",type:"EmojiStatus"}],type:"Update"},{id:821314523,predicate:"updateRecentEmojiStatuses",params:[],type:"Update"},{id:-796072379,predicate:"account.emojiStatusesNotModified",params:[],type:"account.EmojiStatuses"},{id:-1866176559,predicate:"account.emojiStatuses",params:[{name:"hash",type:"long"},{name:"statuses",type:"Vector<EmojiStatus>"}],type:"account.EmojiStatuses"},{id:2046153753,predicate:"reactionEmpty",params:[],type:"Reaction"},{id:455247544,predicate:"reactionEmoji",params:[{name:"emoticon",type:"string"}],type:"Reaction"},{id:-1992950669,predicate:"reactionCustomEmoji",params:[{name:"document_id",type:"long"}],type:"Reaction"},{id:-352570692,predicate:"chatReactionsNone",params:[],type:"ChatReactions"},{id:1385335754,predicate:"chatReactionsAll",params:[{name:"flags",type:"#"},{name:"allow_custom",type:"flags.0?true"}],type:"ChatReactions"},{id:1713193015,predicate:"chatReactionsSome",params:[{name:"reactions",type:"Vector<Reaction>"}],type:"ChatReactions"},{id:-1334846497,predicate:"messages.reactionsNotModified",params:[],type:"messages.Reactions"},{id:-352454890,predicate:"messages.reactions",params:[{name:"hash",type:"long"},{name:"reactions",type:"Vector<Reaction>"}],type:"messages.Reactions"},{id:1870160884,predicate:"updateRecentReactions",params:[],type:"Update"},{id:-2030252155,predicate:"updateMoveStickerSetToTop",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"stickerset",type:"long"}],type:"Update"},{id:-196020837,predicate:"auth.sentCodeTypeEmailCode",params:[{name:"flags",type:"#"},{name:"apple_signin_allowed",type:"flags.0?true"},{name:"google_signin_allowed",type:"flags.1?true"},{name:"email_pattern",type:"string"},{name:"length",type:"int"},{name:"reset_available_period",type:"flags.3?int"},{name:"reset_pending_date",type:"flags.4?int"}],type:"auth.SentCodeType"},{id:-1521934870,predicate:"auth.sentCodeTypeSetUpEmailRequired",params:[{name:"flags",type:"#"},{name:"apple_signin_allowed",type:"flags.0?true"},{name:"google_signin_allowed",type:"flags.1?true"}],type:"auth.SentCodeType"},{id:1128644211,predicate:"emailVerifyPurposeLoginSetup",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"EmailVerifyPurpose"},{id:1383932651,predicate:"emailVerifyPurposeLoginChange",params:[],type:"EmailVerifyPurpose"},{id:-1141565819,predicate:"emailVerifyPurposePassport",params:[],type:"EmailVerifyPurpose"},{id:-1842457175,predicate:"emailVerificationCode",params:[{name:"code",type:"string"}],type:"EmailVerification"},{id:-611279166,predicate:"emailVerificationGoogle",params:[{name:"token",type:"string"}],type:"EmailVerification"},{id:-1764723459,predicate:"emailVerificationApple",params:[{name:"token",type:"string"}],type:"EmailVerification"},{id:731303195,predicate:"account.emailVerified",params:[{name:"email",type:"string"}],type:"account.EmailVerified"},{id:-507835039,predicate:"account.emailVerifiedLogin",params:[{name:"email",type:"string"},{name:"sent_code",type:"auth.SentCode"}],type:"account.EmailVerified"},{id:1596792306,predicate:"premiumSubscriptionOption",params:[{name:"flags",type:"#"},{name:"current",type:"flags.1?true"},{name:"can_purchase_upgrade",type:"flags.2?true"},{name:"transaction",type:"flags.3?string"},{name:"months",type:"int"},{name:"currency",type:"string"},{name:"amount",type:"long"},{name:"bot_url",type:"string"},{name:"store_product",type:"flags.0?string"}],type:"PremiumSubscriptionOption"},{id:80008398,predicate:"inputStickerSetEmojiGenericAnimations",params:[],type:"InputStickerSet"},{id:701560302,predicate:"inputStickerSetEmojiDefaultStatuses",params:[],type:"InputStickerSet"},{id:-1206095820,predicate:"sendAsPeer",params:[{name:"flags",type:"#"},{name:"premium_required",type:"flags.0?true"},{name:"peer",type:"Peer"}],type:"SendAsPeer"},{id:-1386050360,predicate:"messageExtendedMediaPreview",params:[{name:"flags",type:"#"},{name:"w",type:"flags.0?int"},{name:"h",type:"flags.0?int"},{name:"thumb",type:"flags.1?PhotoSize"},{name:"video_duration",type:"flags.2?int"}],type:"MessageExtendedMedia"},{id:-297296796,predicate:"messageExtendedMedia",params:[{name:"media",type:"MessageMedia"}],type:"MessageExtendedMedia"},{id:1517529484,predicate:"updateMessageExtendedMedia",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"extended_media",type:"MessageExtendedMedia"}],type:"Update"},{id:-50416996,predicate:"stickerKeyword",params:[{name:"document_id",type:"long"},{name:"keyword",type:"Vector<string>"}],type:"StickerKeyword"},{id:-1274595769,predicate:"username",params:[{name:"flags",type:"#"},{name:"editable",type:"flags.0?true"},{name:"active",type:"flags.1?true"},{name:"username",type:"string"}],type:"Username"},{id:-263212119,predicate:"channelAdminLogEventActionChangeUsernames",params:[{name:"prev_value",type:"Vector<string>"},{name:"new_value",type:"Vector<string>"}],type:"ChannelAdminLogEventAction"},{id:46949251,predicate:"channelAdminLogEventActionToggleForum",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:1483767080,predicate:"channelAdminLogEventActionCreateTopic",params:[{name:"topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:-261103096,predicate:"channelAdminLogEventActionEditTopic",params:[{name:"prev_topic",type:"ForumTopic"},{name:"new_topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:-1374254839,predicate:"channelAdminLogEventActionDeleteTopic",params:[{name:"topic",type:"ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:1569535291,predicate:"channelAdminLogEventActionPinTopic",params:[{name:"flags",type:"#"},{name:"prev_topic",type:"flags.0?ForumTopic"},{name:"new_topic",type:"flags.1?ForumTopic"}],type:"ChannelAdminLogEventAction"},{id:37687451,predicate:"forumTopicDeleted",params:[{name:"id",type:"int"}],type:"ForumTopic"},{id:1903173033,predicate:"forumTopic",params:[{name:"flags",type:"#"},{name:"my",type:"flags.1?true"},{name:"closed",type:"flags.2?true"},{name:"pinned",type:"flags.3?true"},{name:"short",type:"flags.5?true"},{name:"hidden",type:"flags.6?true"},{name:"id",type:"int"},{name:"date",type:"int"},{name:"title",type:"string"},{name:"icon_color",type:"int"},{name:"icon_emoji_id",type:"flags.0?long"},{name:"top_message",type:"int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"unread_mentions_count",type:"int"},{name:"unread_reactions_count",type:"int"},{name:"from_id",type:"Peer"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"draft",type:"flags.4?DraftMessage"}],type:"ForumTopic"},{id:913709011,predicate:"messages.forumTopics",params:[{name:"flags",type:"#"},{name:"order_by_create_date",type:"flags.0?true"},{name:"count",type:"int"},{name:"topics",type:"Vector<ForumTopic>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"pts",type:"int"}],type:"messages.ForumTopics"},{id:228168278,predicate:"messageActionTopicCreate",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"icon_color",type:"int"},{name:"icon_emoji_id",type:"flags.0?long"}],type:"MessageAction"},{id:-1064024032,predicate:"messageActionTopicEdit",params:[{name:"flags",type:"#"},{name:"title",type:"flags.0?string"},{name:"icon_emoji_id",type:"flags.1?long"},{name:"closed",type:"flags.2?Bool"},{name:"hidden",type:"flags.3?Bool"}],type:"MessageAction"},{id:422509539,predicate:"updateChannelPinnedTopic",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"channel_id",type:"long"},{name:"topic_id",type:"int"}],type:"Update"},{id:1548122514,predicate:"inputNotifyForumTopic",params:[{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"int"}],type:"InputNotifyPeer"},{id:577659656,predicate:"notifyForumTopic",params:[{name:"peer",type:"Peer"},{name:"top_msg_id",type:"int"}],type:"NotifyPeer"},{id:1153562857,predicate:"inputStickerSetEmojiDefaultTopicIcons",params:[],type:"InputStickerSet"},{id:406407439,predicate:"messages.sponsoredMessagesEmpty",params:[],type:"messages.SponsoredMessages"},{id:-31881726,predicate:"updateChannelPinnedTopics",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"order",type:"flags.0?Vector<int>"}],type:"Update"},{id:1135897376,predicate:"defaultHistoryTTL",params:[{name:"period",type:"int"}],type:"DefaultHistoryTTL"},{id:116234636,predicate:"auth.codeTypeFragmentSms",params:[],type:"auth.CodeType"},{id:-648651719,predicate:"auth.sentCodeTypeFragmentSms",params:[{name:"url",type:"string"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:1103040667,predicate:"exportedContactToken",params:[{name:"url",type:"string"},{name:"expires",type:"int"}],type:"ExportedContactToken"},{id:1693675004,predicate:"channelAdminLogEventActionToggleAntiSpam",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:1474192222,predicate:"messageActionSuggestProfilePhoto",params:[{name:"photo",type:"Photo"}],type:"MessageAction"},{id:2008112412,predicate:"stickerSetNoCovered",params:[{name:"set",type:"StickerSet"}],type:"StickerSetCovered"},{id:542282808,predicate:"updateUser",params:[{name:"user_id",type:"long"}],type:"Update"},{id:596704836,predicate:"auth.sentCodeSuccess",params:[{name:"authorization",type:"auth.Authorization"}],type:"auth.SentCode"},{id:-25742243,predicate:"messageActionRequestedPeer",params:[{name:"button_id",type:"int"},{name:"peer",type:"Peer"}],type:"MessageAction"},{id:1597737472,predicate:"requestPeerTypeUser",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.0?Bool"},{name:"premium",type:"flags.1?Bool"}],type:"RequestPeerType"},{id:-906990053,predicate:"requestPeerTypeChat",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"bot_participant",type:"flags.5?true"},{name:"has_username",type:"flags.3?Bool"},{name:"forum",type:"flags.4?Bool"},{name:"user_admin_rights",type:"flags.1?ChatAdminRights"},{name:"bot_admin_rights",type:"flags.2?ChatAdminRights"}],type:"RequestPeerType"},{id:865857388,predicate:"requestPeerTypeBroadcast",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"has_username",type:"flags.3?Bool"},{name:"user_admin_rights",type:"flags.1?ChatAdminRights"},{name:"bot_admin_rights",type:"flags.2?ChatAdminRights"}],type:"RequestPeerType"},{id:218842764,predicate:"keyboardButtonRequestPeer",params:[{name:"text",type:"string"},{name:"button_id",type:"int"},{name:"peer_type",type:"RequestPeerType"}],type:"KeyboardButton"},{id:1209970170,predicate:"emojiListNotModified",params:[],type:"EmojiList"},{id:2048790993,predicate:"emojiList",params:[{name:"hash",type:"long"},{name:"document_id",type:"Vector<long>"}],type:"EmojiList"},{id:-444918734,predicate:"auth.sentCodeTypeFirebaseSms",params:[{name:"flags",type:"#"},{name:"nonce",type:"flags.0?bytes"},{name:"receipt",type:"flags.1?string"},{name:"push_timeout",type:"flags.1?int"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:2056961449,predicate:"emojiGroup",params:[{name:"title",type:"string"},{name:"icon_emoji_id",type:"long"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiGroup"},{id:1874111879,predicate:"messages.emojiGroupsNotModified",params:[],type:"messages.EmojiGroups"},{id:-2011186869,predicate:"messages.emojiGroups",params:[{name:"hash",type:"int"},{name:"groups",type:"Vector<EmojiGroup>"}],type:"messages.EmojiGroups"},{id:-128171716,predicate:"videoSizeEmojiMarkup",params:[{name:"emoji_id",type:"long"},{name:"background_colors",type:"Vector<int>"}],type:"VideoSize"},{id:228623102,predicate:"videoSizeStickerMarkup",params:[{name:"stickerset",type:"InputStickerSet"},{name:"sticker_id",type:"long"},{name:"background_colors",type:"Vector<int>"}],type:"VideoSize"},{id:1964978502,predicate:"textWithEntities",params:[{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"}],type:"TextWithEntities"},{id:870003448,predicate:"messages.translateResult",params:[{name:"result",type:"Vector<TextWithEntities>"}],type:"messages.TranslatedText"},{id:-934791986,predicate:"autoSaveSettings",params:[{name:"flags",type:"#"},{name:"photos",type:"flags.0?true"},{name:"videos",type:"flags.1?true"},{name:"video_max_size",type:"flags.2?long"}],type:"AutoSaveSettings"},{id:-2124403385,predicate:"autoSaveException",params:[{name:"peer",type:"Peer"},{name:"settings",type:"AutoSaveSettings"}],type:"AutoSaveException"},{id:1279133341,predicate:"account.autoSaveSettings",params:[{name:"users_settings",type:"AutoSaveSettings"},{name:"chats_settings",type:"AutoSaveSettings"},{name:"broadcasts_settings",type:"AutoSaveSettings"},{name:"exceptions",type:"Vector<AutoSaveException>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.AutoSaveSettings"},{id:-335171433,predicate:"updateAutoSaveSettings",params:[],type:"Update"},{id:2094949405,predicate:"help.appConfigNotModified",params:[],type:"help.AppConfig"},{id:-585598930,predicate:"help.appConfig",params:[{name:"hash",type:"int"},{name:"config",type:"JSONValue"}],type:"help.AppConfig"},{id:-1457472134,predicate:"inputBotAppID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputBotApp"},{id:-1869872121,predicate:"inputBotAppShortName",params:[{name:"bot_id",type:"InputUser"},{name:"short_name",type:"string"}],type:"InputBotApp"},{id:1571189943,predicate:"botAppNotModified",params:[],type:"BotApp"},{id:-1778593322,predicate:"botApp",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"short_name",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"Photo"},{name:"document",type:"flags.0?Document"},{name:"hash",type:"long"}],type:"BotApp"},{id:-347034123,predicate:"messages.botApp",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"request_write_access",type:"flags.1?true"},{name:"app",type:"BotApp"}],type:"messages.BotApp"},{id:1008422669,predicate:"appWebViewResultUrl",params:[{name:"url",type:"string"}],type:"AppWebViewResult"},{id:-1250781739,predicate:"inlineBotWebView",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"InlineBotWebView"},{id:1246753138,predicate:"readParticipantDate",params:[{name:"user_id",type:"long"},{name:"date",type:"int"}],type:"ReadParticipantDate"},{id:-856651050,predicate:"updateGroupInvitePrivacyForbidden",params:[{name:"user_id",type:"long"}],type:"Update"},{id:-699792216,predicate:"dialogFilterChatlist",params:[{name:"flags",type:"#"},{name:"has_my_invites",type:"flags.26?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"emoticon",type:"flags.25?string"},{name:"pinned_peers",type:"Vector<InputPeer>"},{name:"include_peers",type:"Vector<InputPeer>"}],type:"DialogFilter"},{id:-203367885,predicate:"inputChatlistDialogFilter",params:[{name:"filter_id",type:"int"}],type:"InputChatlist"},{id:206668204,predicate:"exportedChatlistInvite",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"url",type:"string"},{name:"peers",type:"Vector<Peer>"}],type:"ExportedChatlistInvite"},{id:283567014,predicate:"chatlists.exportedChatlistInvite",params:[{name:"filter",type:"DialogFilter"},{name:"invite",type:"ExportedChatlistInvite"}],type:"chatlists.ExportedChatlistInvite"},{id:279670215,predicate:"chatlists.exportedInvites",params:[{name:"invites",type:"Vector<ExportedChatlistInvite>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ExportedInvites"},{id:-91752871,predicate:"chatlists.chatlistInviteAlready",params:[{name:"filter_id",type:"int"},{name:"missing_peers",type:"Vector<Peer>"},{name:"already_peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistInvite"},{id:500007837,predicate:"chatlists.chatlistInvite",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"emoticon",type:"flags.0?string"},{name:"peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistInvite"},{id:-1816295539,predicate:"chatlists.chatlistUpdates",params:[{name:"missing_peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"chatlists.ChatlistUpdates"},{id:-1136350937,predicate:"messageActionSetChatWallPaper",params:[{name:"wallpaper",type:"WallPaper"}],type:"MessageAction"},{id:-632006598,predicate:"messageActionSetSameChatWallPaper",params:[],type:"MessageAction"},{id:-391678544,predicate:"bots.botInfo",params:[{name:"name",type:"string"},{name:"about",type:"string"},{name:"description",type:"string"}],type:"bots.BotInfo"},{id:238759180,predicate:"inlineQueryPeerTypeBotPM",params:[],type:"InlineQueryPeerType"}],methods:[{id:-878758099,method:"invokeAfterMsg",params:[{name:"msg_id",type:"long"},{name:"query",type:"!X"}],type:"X"},{id:1036301552,method:"invokeAfterMsgs",params:[{name:"msg_ids",type:"Vector<long>"},{name:"query",type:"!X"}],type:"X"},{id:-1502141361,method:"auth.sendCode",params:[{name:"phone_number",type:"string"},{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:-2131827673,method:"auth.signUp",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"}],type:"auth.Authorization"},{id:-1923962543,method:"auth.signIn",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"flags.0?string"},{name:"email_verification",type:"flags.1?EmailVerification"}],type:"auth.Authorization"},{id:1047706137,method:"auth.logOut",params:[],type:"auth.LoggedOut"},{id:-1616179942,method:"auth.resetAuthorizations",params:[],type:"Bool"},{id:-440401971,method:"auth.exportAuthorization",params:[{name:"dc_id",type:"int"}],type:"auth.ExportedAuthorization"},{id:-1518699091,method:"auth.importAuthorization",params:[{name:"id",type:"long"},{name:"bytes",type:"bytes"}],type:"auth.Authorization"},{id:-841733627,method:"auth.bindTempAuthKey",params:[{name:"perm_auth_key_id",type:"long"},{name:"nonce",type:"long"},{name:"expires_at",type:"int"},{name:"encrypted_message",type:"bytes"}],type:"Bool"},{id:-326762118,method:"account.registerDevice",params:[{name:"flags",type:"#"},{name:"no_muted",type:"flags.0?true"},{name:"token_type",type:"int"},{name:"token",type:"string"},{name:"app_sandbox",type:"Bool"},{name:"secret",type:"bytes"},{name:"other_uids",type:"Vector<long>"}],type:"Bool"},{id:1779249670,method:"account.unregisterDevice",params:[{name:"token_type",type:"int"},{name:"token",type:"string"},{name:"other_uids",type:"Vector<long>"}],type:"Bool"},{id:-2067899501,method:"account.updateNotifySettings",params:[{name:"peer",type:"InputNotifyPeer"},{name:"settings",type:"InputPeerNotifySettings"}],type:"Bool"},{id:313765169,method:"account.getNotifySettings",params:[{name:"peer",type:"InputNotifyPeer"}],type:"PeerNotifySettings"},{id:-612493497,method:"account.resetNotifySettings",params:[],type:"Bool"},{id:2018596725,method:"account.updateProfile",params:[{name:"flags",type:"#"},{name:"first_name",type:"flags.0?string"},{name:"last_name",type:"flags.1?string"},{name:"about",type:"flags.2?string"}],type:"User"},{id:1713919532,method:"account.updateStatus",params:[{name:"offline",type:"Bool"}],type:"Bool"},{id:127302966,method:"account.getWallPapers",params:[{name:"hash",type:"long"}],type:"account.WallPapers"},{id:-977650298,method:"account.reportPeer",params:[{name:"peer",type:"InputPeer"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:227648840,method:"users.getUsers",params:[{name:"id",type:"Vector<InputUser>"}],type:"Vector<User>"},{id:-1240508136,method:"users.getFullUser",params:[{name:"id",type:"InputUser"}],type:"users.UserFull"},{id:2061264541,method:"contacts.getContactIDs",params:[{name:"hash",type:"long"}],type:"Vector<int>"},{id:-995929106,method:"contacts.getStatuses",params:[],type:"Vector<ContactStatus>"},{id:1574346258,method:"contacts.getContacts",params:[{name:"hash",type:"long"}],type:"contacts.Contacts"},{id:746589157,method:"contacts.importContacts",params:[{name:"contacts",type:"Vector<InputContact>"}],type:"contacts.ImportedContacts"},{id:157945344,method:"contacts.deleteContacts",params:[{name:"id",type:"Vector<InputUser>"}],type:"Updates"},{id:269745566,method:"contacts.deleteByPhones",params:[{name:"phones",type:"Vector<string>"}],type:"Bool"},{id:1758204945,method:"contacts.block",params:[{name:"id",type:"InputPeer"}],type:"Bool"},{id:-1096393392,method:"contacts.unblock",params:[{name:"id",type:"InputPeer"}],type:"Bool"},{id:-176409329,method:"contacts.getBlocked",params:[{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"contacts.Blocked"},{id:1673946374,method:"messages.getMessages",params:[{name:"id",type:"Vector<InputMessage>"}],type:"messages.Messages"},{id:-1594569905,method:"messages.getDialogs",params:[{name:"flags",type:"#"},{name:"exclude_pinned",type:"flags.0?true"},{name:"folder_id",type:"flags.1?int"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Dialogs"},{id:1143203525,method:"messages.getHistory",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:-1593989278,method:"messages.search",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"q",type:"string"},{name:"from_id",type:"flags.0?InputPeer"},{name:"top_msg_id",type:"flags.1?int"},{name:"filter",type:"MessagesFilter"},{name:"min_date",type:"int"},{name:"max_date",type:"int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:238054714,method:"messages.readHistory",params:[{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"}],type:"messages.AffectedMessages"},{id:-1332768214,method:"messages.deleteHistory",params:[{name:"flags",type:"#"},{name:"just_clear",type:"flags.0?true"},{name:"revoke",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"},{name:"min_date",type:"flags.2?int"},{name:"max_date",type:"flags.3?int"}],type:"messages.AffectedHistory"},{id:-443640366,method:"messages.deleteMessages",params:[{name:"flags",type:"#"},{name:"revoke",type:"flags.0?true"},{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:94983360,method:"messages.receivedMessages",params:[{name:"max_id",type:"int"}],type:"Vector<ReceivedNotifyMessage>"},{id:1486110434,method:"messages.setTyping",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"action",type:"SendMessageAction"}],type:"Bool"},{id:482476935,method:"messages.sendMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"top_msg_id",type:"flags.9?int"},{name:"message",type:"string"},{name:"random_id",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:1967638886,method:"messages.sendMedia",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"top_msg_id",type:"flags.9?int"},{name:"media",type:"InputMedia"},{name:"message",type:"string"},{name:"random_id",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:-966673468,method:"messages.forwardMessages",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"with_my_score",type:"flags.8?true"},{name:"drop_author",type:"flags.11?true"},{name:"drop_media_captions",type:"flags.12?true"},{name:"noforwards",type:"flags.14?true"},{name:"from_peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"random_id",type:"Vector<long>"},{name:"to_peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.9?int"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:-820669733,method:"messages.reportSpam",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-270948702,method:"messages.getPeerSettings",params:[{name:"peer",type:"InputPeer"}],type:"messages.PeerSettings"},{id:-1991005362,method:"messages.report",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:1240027791,method:"messages.getChats",params:[{name:"id",type:"Vector<long>"}],type:"messages.Chats"},{id:-1364194508,method:"messages.getFullChat",params:[{name:"chat_id",type:"long"}],type:"messages.ChatFull"},{id:1937260541,method:"messages.editChatTitle",params:[{name:"chat_id",type:"long"},{name:"title",type:"string"}],type:"Updates"},{id:903730804,method:"messages.editChatPhoto",params:[{name:"chat_id",type:"long"},{name:"photo",type:"InputChatPhoto"}],type:"Updates"},{id:-230206493,method:"messages.addChatUser",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"},{name:"fwd_limit",type:"int"}],type:"Updates"},{id:-1575461717,method:"messages.deleteChatUser",params:[{name:"flags",type:"#"},{name:"revoke_history",type:"flags.0?true"},{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:3450904,method:"messages.createChat",params:[{name:"flags",type:"#"},{name:"users",type:"Vector<InputUser>"},{name:"title",type:"string"},{name:"ttl_period",type:"flags.0?int"}],type:"Updates"},{id:-304838614,method:"updates.getState",params:[],type:"updates.State"},{id:630429265,method:"updates.getDifference",params:[{name:"flags",type:"#"},{name:"pts",type:"int"},{name:"pts_total_limit",type:"flags.0?int"},{name:"date",type:"int"},{name:"qts",type:"int"}],type:"updates.Difference"},{id:166207545,method:"photos.updateProfilePhoto",params:[{name:"flags",type:"#"},{name:"fallback",type:"flags.0?true"},{name:"bot",type:"flags.1?InputUser"},{name:"id",type:"InputPhoto"}],type:"photos.Photo"},{id:59286453,method:"photos.uploadProfilePhoto",params:[{name:"flags",type:"#"},{name:"fallback",type:"flags.3?true"},{name:"bot",type:"flags.5?InputUser"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.4?VideoSize"}],type:"photos.Photo"},{id:-2016444625,method:"photos.deletePhotos",params:[{name:"id",type:"Vector<InputPhoto>"}],type:"Vector<long>"},{id:-1291540959,method:"upload.saveFilePart",params:[{name:"file_id",type:"long"},{name:"file_part",type:"int"},{name:"bytes",type:"bytes"}],type:"Bool"},{id:-1101843010,method:"upload.getFile",params:[{name:"flags",type:"#"},{name:"precise",type:"flags.0?true"},{name:"cdn_supported",type:"flags.1?true"},{name:"location",type:"InputFileLocation"},{name:"offset",type:"long"},{name:"limit",type:"int"}],type:"upload.File"},{id:-990308245,method:"help.getConfig",params:[],type:"Config"},{id:531836966,method:"help.getNearestDc",params:[],type:"NearestDc"},{id:1378703997,method:"help.getAppUpdate",params:[{name:"source",type:"string"}],type:"help.AppUpdate"},{id:1295590211,method:"help.getInviteText",params:[],type:"help.InviteText"},{id:-1848823128,method:"photos.getUserPhotos",params:[{name:"user_id",type:"InputUser"},{name:"offset",type:"int"},{name:"max_id",type:"long"},{name:"limit",type:"int"}],type:"photos.Photos"},{id:651135312,method:"messages.getDhConfig",params:[{name:"version",type:"int"},{name:"random_length",type:"int"}],type:"messages.DhConfig"},{id:-162681021,method:"messages.requestEncryption",params:[{name:"user_id",type:"InputUser"},{name:"random_id",type:"int"},{name:"g_a",type:"bytes"}],type:"EncryptedChat"},{id:1035731989,method:"messages.acceptEncryption",params:[{name:"peer",type:"InputEncryptedChat"},{name:"g_b",type:"bytes"},{name:"key_fingerprint",type:"long"}],type:"EncryptedChat"},{id:-208425312,method:"messages.discardEncryption",params:[{name:"flags",type:"#"},{name:"delete_history",type:"flags.0?true"},{name:"chat_id",type:"int"}],type:"Bool"},{id:2031374829,method:"messages.setEncryptedTyping",params:[{name:"peer",type:"InputEncryptedChat"},{name:"typing",type:"Bool"}],type:"Bool"},{id:2135648522,method:"messages.readEncryptedHistory",params:[{name:"peer",type:"InputEncryptedChat"},{name:"max_date",type:"int"}],type:"Bool"},{id:1157265941,method:"messages.sendEncrypted",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"}],type:"messages.SentEncryptedMessage"},{id:1431914525,method:"messages.sendEncryptedFile",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"},{name:"file",type:"InputEncryptedFile"}],type:"messages.SentEncryptedMessage"},{id:852769188,method:"messages.sendEncryptedService",params:[{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"}],type:"messages.SentEncryptedMessage"},{id:1436924774,method:"messages.receivedQueue",params:[{name:"max_qts",type:"int"}],type:"Vector<long>"},{id:1259113487,method:"messages.reportEncryptedSpam",params:[{name:"peer",type:"InputEncryptedChat"}],type:"Bool"},{id:-562337987,method:"upload.saveBigFilePart",params:[{name:"file_id",type:"long"},{name:"file_part",type:"int"},{name:"file_total_parts",type:"int"},{name:"bytes",type:"bytes"}],type:"Bool"},{id:-1043505495,method:"initConnection",params:[{name:"flags",type:"#"},{name:"api_id",type:"int"},{name:"device_model",type:"string"},{name:"system_version",type:"string"},{name:"app_version",type:"string"},{name:"system_lang_code",type:"string"},{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"proxy",type:"flags.0?InputClientProxy"},{name:"params",type:"flags.1?JSONValue"},{name:"query",type:"!X"}],type:"X"},{id:-1663104819,method:"help.getSupport",params:[],type:"help.Support"},{id:916930423,method:"messages.readMessageContents",params:[{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:655677548,method:"account.checkUsername",params:[{name:"username",type:"string"}],type:"Bool"},{id:1040964988,method:"account.updateUsername",params:[{name:"username",type:"string"}],type:"User"},{id:301470424,method:"contacts.search",params:[{name:"q",type:"string"},{name:"limit",type:"int"}],type:"contacts.Found"},{id:-623130288,method:"account.getPrivacy",params:[{name:"key",type:"InputPrivacyKey"}],type:"account.PrivacyRules"},{id:-906486552,method:"account.setPrivacy",params:[{name:"key",type:"InputPrivacyKey"},{name:"rules",type:"Vector<InputPrivacyRule>"}],type:"account.PrivacyRules"},{id:-1564422284,method:"account.deleteAccount",params:[{name:"flags",type:"#"},{name:"reason",type:"string"},{name:"password",type:"flags.0?InputCheckPasswordSRP"}],type:"Bool"},{id:150761757,method:"account.getAccountTTL",params:[],type:"AccountDaysTTL"},{id:608323678,method:"account.setAccountTTL",params:[{name:"ttl",type:"AccountDaysTTL"}],type:"Bool"},{id:-627372787,method:"invokeWithLayer",params:[{name:"layer",type:"int"},{name:"query",type:"!X"}],type:"X"},{id:-113456221,method:"contacts.resolveUsername",params:[{name:"username",type:"string"}],type:"contacts.ResolvedPeer"},{id:-2108208411,method:"account.sendChangePhoneCode",params:[{name:"phone_number",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1891839707,method:"account.changePhone",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"User"},{id:-710552671,method:"messages.getStickers",params:[{name:"emoticon",type:"string"},{name:"hash",type:"long"}],type:"messages.Stickers"},{id:-1197432408,method:"messages.getAllStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:954152242,method:"account.updateDeviceLocked",params:[{name:"period",type:"int"}],type:"Bool"},{id:1738800940,method:"auth.importBotAuthorization",params:[{name:"flags",type:"int"},{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"bot_auth_token",type:"string"}],type:"auth.Authorization"},{id:-1956073268,method:"messages.getWebPagePreview",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"MessageMedia"},{id:-484392616,method:"account.getAuthorizations",params:[],type:"account.Authorizations"},{id:-545786948,method:"account.resetAuthorization",params:[{name:"hash",type:"long"}],type:"Bool"},{id:1418342645,method:"account.getPassword",params:[],type:"account.Password"},{id:-1663767815,method:"account.getPasswordSettings",params:[{name:"password",type:"InputCheckPasswordSRP"}],type:"account.PasswordSettings"},{id:-1516564433,method:"account.updatePasswordSettings",params:[{name:"password",type:"InputCheckPasswordSRP"},{name:"new_settings",type:"account.PasswordInputSettings"}],type:"Bool"},{id:-779399914,method:"auth.checkPassword",params:[{name:"password",type:"InputCheckPasswordSRP"}],type:"auth.Authorization"},{id:-661144474,method:"auth.requestPasswordRecovery",params:[],type:"auth.PasswordRecovery"},{id:923364464,method:"auth.recoverPassword",params:[{name:"flags",type:"#"},{name:"code",type:"string"},{name:"new_settings",type:"flags.0?account.PasswordInputSettings"}],type:"auth.Authorization"},{id:-1080796745,method:"invokeWithoutUpdates",params:[{name:"query",type:"!X"}],type:"X"},{id:-1607670315,method:"messages.exportChatInvite",params:[{name:"flags",type:"#"},{name:"legacy_revoke_permanent",type:"flags.2?true"},{name:"request_needed",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"expire_date",type:"flags.0?int"},{name:"usage_limit",type:"flags.1?int"},{name:"title",type:"flags.4?string"}],type:"ExportedChatInvite"},{id:1051570619,method:"messages.checkChatInvite",params:[{name:"hash",type:"string"}],type:"ChatInvite"},{id:1817183516,method:"messages.importChatInvite",params:[{name:"hash",type:"string"}],type:"Updates"},{id:-928977804,method:"messages.getStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"hash",type:"int"}],type:"messages.StickerSet"},{id:-946871200,method:"messages.installStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"archived",type:"Bool"}],type:"messages.StickerSetInstallResult"},{id:-110209570,method:"messages.uninstallStickerSet",params:[{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:-421563528,method:"messages.startBot",params:[{name:"bot",type:"InputUser"},{name:"peer",type:"InputPeer"},{name:"random_id",type:"long"},{name:"start_param",type:"string"}],type:"Updates"},{id:-1877938321,method:"help.getAppChangelog",params:[{name:"prev_app_version",type:"string"}],type:"Updates"},{id:1468322785,method:"messages.getMessagesViews",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"increment",type:"Bool"}],type:"messages.MessageViews"},{id:-871347913,method:"channels.readHistory",params:[{name:"channel",type:"InputChannel"},{name:"max_id",type:"int"}],type:"Bool"},{id:-2067661490,method:"channels.deleteMessages",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:-196443371,method:"channels.reportSpam",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-1383294429,method:"channels.getMessages",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<InputMessage>"}],type:"messages.Messages"},{id:2010044880,method:"channels.getParticipants",params:[{name:"channel",type:"InputChannel"},{name:"filter",type:"ChannelParticipantsFilter"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"channels.ChannelParticipants"},{id:-1599378234,method:"channels.getParticipant",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"}],type:"channels.ChannelParticipant"},{id:176122811,method:"channels.getChannels",params:[{name:"id",type:"Vector<InputChannel>"}],type:"messages.Chats"},{id:141781513,method:"channels.getFullChannel",params:[{name:"channel",type:"InputChannel"}],type:"messages.ChatFull"},{id:-1862244601,method:"channels.createChannel",params:[{name:"flags",type:"#"},{name:"broadcast",type:"flags.0?true"},{name:"megagroup",type:"flags.1?true"},{name:"for_import",type:"flags.3?true"},{name:"forum",type:"flags.5?true"},{name:"title",type:"string"},{name:"about",type:"string"},{name:"geo_point",type:"flags.2?InputGeoPoint"},{name:"address",type:"flags.2?string"},{name:"ttl_period",type:"flags.4?int"}],type:"Updates"},{id:-751007486,method:"channels.editAdmin",params:[{name:"channel",type:"InputChannel"},{name:"user_id",type:"InputUser"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"string"}],type:"Updates"},{id:1450044624,method:"channels.editTitle",params:[{name:"channel",type:"InputChannel"},{name:"title",type:"string"}],type:"Updates"},{id:-248621111,method:"channels.editPhoto",params:[{name:"channel",type:"InputChannel"},{name:"photo",type:"InputChatPhoto"}],type:"Updates"},{id:283557164,method:"channels.checkUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"}],type:"Bool"},{id:890549214,method:"channels.updateUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"}],type:"Bool"},{id:615851205,method:"channels.joinChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-130635115,method:"channels.leaveChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:429865580,method:"channels.inviteToChannel",params:[{name:"channel",type:"InputChannel"},{name:"users",type:"Vector<InputUser>"}],type:"Updates"},{id:-1072619549,method:"channels.deleteChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:51854712,method:"updates.getChannelDifference",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"filter",type:"ChannelMessagesFilter"},{name:"pts",type:"int"},{name:"limit",type:"int"}],type:"updates.ChannelDifference"},{id:-1470377534,method:"messages.editChatAdmin",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"},{name:"is_admin",type:"Bool"}],type:"Bool"},{id:-1568189671,method:"messages.migrateChat",params:[{name:"chat_id",type:"long"}],type:"Updates"},{id:1271290010,method:"messages.searchGlobal",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"q",type:"string"},{name:"filter",type:"MessagesFilter"},{name:"min_date",type:"int"},{name:"max_date",type:"int"},{name:"offset_rate",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:2016638777,method:"messages.reorderStickerSets",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"order",type:"Vector<long>"}],type:"Bool"},{id:-1309538785,method:"messages.getDocumentByHash",params:[{name:"sha256",type:"bytes"},{name:"size",type:"long"},{name:"mime_type",type:"string"}],type:"Document"},{id:1559270965,method:"messages.getSavedGifs",params:[{name:"hash",type:"long"}],type:"messages.SavedGifs"},{id:846868683,method:"messages.saveGif",params:[{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:1364105629,method:"messages.getInlineBotResults",params:[{name:"flags",type:"#"},{name:"bot",type:"InputUser"},{name:"peer",type:"InputPeer"},{name:"geo_point",type:"flags.0?InputGeoPoint"},{name:"query",type:"string"},{name:"offset",type:"string"}],type:"messages.BotResults"},{id:-1156406247,method:"messages.setInlineBotResults",params:[{name:"flags",type:"#"},{name:"gallery",type:"flags.0?true"},{name:"private",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"results",type:"Vector<InputBotInlineResult>"},{name:"cache_time",type:"int"},{name:"next_offset",type:"flags.2?string"},{name:"switch_pm",type:"flags.3?InlineBotSwitchPM"},{name:"switch_webview",type:"flags.4?InlineBotWebView"}],type:"Bool"},{id:-738468661,method:"messages.sendInlineBotResult",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"hide_via",type:"flags.11?true"},{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"top_msg_id",type:"flags.9?int"},{name:"random_id",type:"long"},{name:"query_id",type:"long"},{name:"id",type:"string"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:-432034325,method:"channels.exportMessageLink",params:[{name:"flags",type:"#"},{name:"grouped",type:"flags.0?true"},{name:"thread",type:"flags.1?true"},{name:"channel",type:"InputChannel"},{name:"id",type:"int"}],type:"ExportedMessageLink"},{id:527021574,method:"channels.toggleSignatures",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:1056025023,method:"auth.resendCode",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"auth.SentCode"},{id:520357240,method:"auth.cancelCode",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"Bool"},{id:-39416522,method:"messages.getMessageEditData",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"messages.MessageEditData"},{id:1224152952,method:"messages.editMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"message",type:"flags.11?string"},{name:"media",type:"flags.14?InputMedia"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.15?int"}],type:"Updates"},{id:-2091549254,method:"messages.editInlineBotMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"id",type:"InputBotInlineMessageID"},{name:"message",type:"flags.11?string"},{name:"media",type:"flags.14?InputMedia"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"Bool"},{id:-1824339449,method:"messages.getBotCallbackAnswer",params:[{name:"flags",type:"#"},{name:"game",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"data",type:"flags.0?bytes"},{name:"password",type:"flags.2?InputCheckPasswordSRP"}],type:"messages.BotCallbackAnswer"},{id:-712043766,method:"messages.setBotCallbackAnswer",params:[{name:"flags",type:"#"},{name:"alert",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"message",type:"flags.0?string"},{name:"url",type:"flags.2?string"},{name:"cache_time",type:"int"}],type:"Bool"},{id:-1758168906,method:"contacts.getTopPeers",params:[{name:"flags",type:"#"},{name:"correspondents",type:"flags.0?true"},{name:"bots_pm",type:"flags.1?true"},{name:"bots_inline",type:"flags.2?true"},{name:"phone_calls",type:"flags.3?true"},{name:"forward_users",type:"flags.4?true"},{name:"forward_chats",type:"flags.5?true"},{name:"groups",type:"flags.10?true"},{name:"channels",type:"flags.15?true"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"contacts.TopPeers"},{id:451113900,method:"contacts.resetTopPeerRating",params:[{name:"category",type:"TopPeerCategory"},{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-462373635,method:"messages.getPeerDialogs",params:[{name:"peers",type:"Vector<InputDialogPeer>"}],type:"messages.PeerDialogs"},{id:-1271718337,method:"messages.saveDraft",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"top_msg_id",type:"flags.2?int"},{name:"peer",type:"InputPeer"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"Bool"},{id:1782549861,method:"messages.getAllDrafts",params:[],type:"Updates"},{id:1685588756,method:"messages.getFeaturedStickers",params:[{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:1527873830,method:"messages.readFeaturedStickers",params:[{name:"id",type:"Vector<long>"}],type:"Bool"},{id:-1649852357,method:"messages.getRecentStickers",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"},{name:"hash",type:"long"}],type:"messages.RecentStickers"},{id:958863608,method:"messages.saveRecentSticker",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"},{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:-1986437075,method:"messages.clearRecentStickers",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"}],type:"Bool"},{id:1475442322,method:"messages.getArchivedStickers",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"emojis",type:"flags.1?true"},{name:"offset_id",type:"long"},{name:"limit",type:"int"}],type:"messages.ArchivedStickers"},{id:457157256,method:"account.sendConfirmPhoneCode",params:[{name:"hash",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1596029123,method:"account.confirmPhone",params:[{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"Bool"},{id:-122669393,method:"channels.getAdminedPublicChannels",params:[{name:"flags",type:"#"},{name:"by_location",type:"flags.0?true"},{name:"check_limit",type:"flags.1?true"}],type:"messages.Chats"},{id:1678738104,method:"messages.getMaskStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:-866424884,method:"messages.getAttachedStickers",params:[{name:"media",type:"InputStickeredMedia"}],type:"Vector<StickerSetCovered>"},{id:-1907842680,method:"auth.dropTempAuthKeys",params:[{name:"except_auth_keys",type:"Vector<long>"}],type:"Bool"},{id:-1896289088,method:"messages.setGameScore",params:[{name:"flags",type:"#"},{name:"edit_message",type:"flags.0?true"},{name:"force",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"user_id",type:"InputUser"},{name:"score",type:"int"}],type:"Updates"},{id:363700068,method:"messages.setInlineGameScore",params:[{name:"flags",type:"#"},{name:"edit_message",type:"flags.0?true"},{name:"force",type:"flags.1?true"},{name:"id",type:"InputBotInlineMessageID"},{name:"user_id",type:"InputUser"},{name:"score",type:"int"}],type:"Bool"},{id:-400399203,method:"messages.getGameHighScores",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"user_id",type:"InputUser"}],type:"messages.HighScores"},{id:258170395,method:"messages.getInlineGameHighScores",params:[{name:"id",type:"InputBotInlineMessageID"},{name:"user_id",type:"InputUser"}],type:"messages.HighScores"},{id:-468934396,method:"messages.getCommonChats",params:[{name:"user_id",type:"InputUser"},{name:"max_id",type:"long"},{name:"limit",type:"int"}],type:"messages.Chats"},{id:-2023787330,method:"messages.getAllChats",params:[{name:"except_ids",type:"Vector<long>"}],type:"messages.Chats"},{id:-333262899,method:"help.setBotUpdatesStatus",params:[{name:"pending_updates_count",type:"int"},{name:"message",type:"string"}],type:"Bool"},{id:852135825,method:"messages.getWebPage",params:[{name:"url",type:"string"},{name:"hash",type:"int"}],type:"WebPage"},{id:-1489903017,method:"messages.toggleDialogPin",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:991616823,method:"messages.reorderPinnedDialogs",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"folder_id",type:"int"},{name:"order",type:"Vector<InputDialogPeer>"}],type:"Bool"},{id:-692498958,method:"messages.getPinnedDialogs",params:[{name:"folder_id",type:"int"}],type:"messages.PeerDialogs"},{id:-1440257555,method:"bots.sendCustomRequest",params:[{name:"custom_method",type:"string"},{name:"params",type:"DataJSON"}],type:"DataJSON"},{id:-434028723,method:"bots.answerWebhookJSONQuery",params:[{name:"query_id",type:"long"},{name:"data",type:"DataJSON"}],type:"Bool"},{id:619086221,method:"upload.getWebFile",params:[{name:"location",type:"InputWebFileLocation"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"upload.WebFile"},{id:924093883,method:"payments.getPaymentForm",params:[{name:"flags",type:"#"},{name:"invoice",type:"InputInvoice"},{name:"theme_params",type:"flags.0?DataJSON"}],type:"payments.PaymentForm"},{id:611897804,method:"payments.getPaymentReceipt",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"payments.PaymentReceipt"},{id:-1228345045,method:"payments.validateRequestedInfo",params:[{name:"flags",type:"#"},{name:"save",type:"flags.0?true"},{name:"invoice",type:"InputInvoice"},{name:"info",type:"PaymentRequestedInfo"}],type:"payments.ValidatedRequestedInfo"},{id:755192367,method:"payments.sendPaymentForm",params:[{name:"flags",type:"#"},{name:"form_id",type:"long"},{name:"invoice",type:"InputInvoice"},{name:"requested_info_id",type:"flags.0?string"},{name:"shipping_option_id",type:"flags.1?string"},{name:"credentials",type:"InputPaymentCredentials"},{name:"tip_amount",type:"flags.2?long"}],type:"payments.PaymentResult"},{id:1151208273,method:"account.getTmpPassword",params:[{name:"password",type:"InputCheckPasswordSRP"},{name:"period",type:"int"}],type:"account.TmpPassword"},{id:578650699,method:"payments.getSavedInfo",params:[],type:"payments.SavedInfo"},{id:-667062079,method:"payments.clearSavedInfo",params:[{name:"flags",type:"#"},{name:"credentials",type:"flags.0?true"},{name:"info",type:"flags.1?true"}],type:"Bool"},{id:-436833542,method:"messages.setBotShippingResults",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"error",type:"flags.0?string"},{name:"shipping_options",type:"flags.1?Vector<ShippingOption>"}],type:"Bool"},{id:163765653,method:"messages.setBotPrecheckoutResults",params:[{name:"flags",type:"#"},{name:"success",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"error",type:"flags.0?string"}],type:"Bool"},{id:-1876841625,method:"stickers.createStickerSet",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"animated",type:"flags.1?true"},{name:"videos",type:"flags.4?true"},{name:"emojis",type:"flags.5?true"},{name:"text_color",type:"flags.6?true"},{name:"user_id",type:"InputUser"},{name:"title",type:"string"},{name:"short_name",type:"string"},{name:"thumb",type:"flags.2?InputDocument"},{name:"stickers",type:"Vector<InputStickerSetItem>"},{name:"software",type:"flags.3?string"}],type:"messages.StickerSet"},{id:-143257775,method:"stickers.removeStickerFromSet",params:[{name:"sticker",type:"InputDocument"}],type:"messages.StickerSet"},{id:-4795190,method:"stickers.changeStickerPosition",params:[{name:"sticker",type:"InputDocument"},{name:"position",type:"int"}],type:"messages.StickerSet"},{id:-2041315650,method:"stickers.addStickerToSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"sticker",type:"InputStickerSetItem"}],type:"messages.StickerSet"},{id:1369162417,method:"messages.uploadMedia",params:[{name:"peer",type:"InputPeer"},{name:"media",type:"InputMedia"}],type:"MessageMedia"},{id:1430593449,method:"phone.getCallConfig",params:[],type:"DataJSON"},{id:1124046573,method:"phone.requestCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"user_id",type:"InputUser"},{name:"random_id",type:"int"},{name:"g_a_hash",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:1003664544,method:"phone.acceptCall",params:[{name:"peer",type:"InputPhoneCall"},{name:"g_b",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:788404002,method:"phone.confirmCall",params:[{name:"peer",type:"InputPhoneCall"},{name:"g_a",type:"bytes"},{name:"key_fingerprint",type:"long"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:399855457,method:"phone.receivedCall",params:[{name:"peer",type:"InputPhoneCall"}],type:"Bool"},{id:-1295269440,method:"phone.discardCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"peer",type:"InputPhoneCall"},{name:"duration",type:"int"},{name:"reason",type:"PhoneCallDiscardReason"},{name:"connection_id",type:"long"}],type:"Updates"},{id:1508562471,method:"phone.setCallRating",params:[{name:"flags",type:"#"},{name:"user_initiative",type:"flags.0?true"},{name:"peer",type:"InputPhoneCall"},{name:"rating",type:"int"},{name:"comment",type:"string"}],type:"Updates"},{id:662363518,method:"phone.saveCallDebug",params:[{name:"peer",type:"InputPhoneCall"},{name:"debug",type:"DataJSON"}],type:"Bool"},{id:962554330,method:"upload.getCdnFile",params:[{name:"file_token",type:"bytes"},{name:"offset",type:"long"},{name:"limit",type:"int"}],type:"upload.CdnFile"},{id:-1691921240,method:"upload.reuploadCdnFile",params:[{name:"file_token",type:"bytes"},{name:"request_token",type:"bytes"}],type:"Vector<FileHash>"},{id:1375900482,method:"help.getCdnConfig",params:[],type:"CdnConfig"},{id:-219008246,method:"langpack.getLangPack",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"}],type:"LangPackDifference"},{id:-269862909,method:"langpack.getStrings",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"keys",type:"Vector<string>"}],type:"Vector<LangPackString>"},{id:-845657435,method:"langpack.getDifference",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"from_version",type:"int"}],type:"LangPackDifference"},{id:1120311183,method:"langpack.getLanguages",params:[{name:"lang_pack",type:"string"}],type:"Vector<LangPackLanguage>"},{id:-1763259007,method:"channels.editBanned",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"},{name:"banned_rights",type:"ChatBannedRights"}],type:"Updates"},{id:870184064,method:"channels.getAdminLog",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"q",type:"string"},{name:"events_filter",type:"flags.0?ChannelAdminLogEventsFilter"},{name:"admins",type:"flags.1?Vector<InputUser>"},{name:"max_id",type:"long"},{name:"min_id",type:"long"},{name:"limit",type:"int"}],type:"channels.AdminLogResults"},{id:-1847836879,method:"upload.getCdnFileHashes",params:[{name:"file_token",type:"bytes"},{name:"offset",type:"long"}],type:"Vector<FileHash>"},{id:-914493408,method:"messages.sendScreenshotNotification",params:[{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"int"},{name:"random_id",type:"long"}],type:"Updates"},{id:-359881479,method:"channels.setStickers",params:[{name:"channel",type:"InputChannel"},{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:82946729,method:"messages.getFavedStickers",params:[{name:"hash",type:"long"}],type:"messages.FavedStickers"},{id:-1174420133,method:"messages.faveSticker",params:[{name:"id",type:"InputDocument"},{name:"unfave",type:"Bool"}],type:"Bool"},{id:-357180360,method:"channels.readMessageContents",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-2020263951,method:"contacts.resetSaved",params:[],type:"Bool"},{id:-251140208,method:"messages.getUnreadMentions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"}],type:"messages.Messages"},{id:-1683319225,method:"channels.deleteHistory",params:[{name:"flags",type:"#"},{name:"for_everyone",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"max_id",type:"int"}],type:"Updates"},{id:1036054804,method:"help.getRecentMeUrls",params:[{name:"referer",type:"string"}],type:"help.RecentMeUrls"},{id:-356796084,method:"channels.togglePreHistoryHidden",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:921026381,method:"messages.readMentions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"}],type:"messages.AffectedHistory"},{id:1881817312,method:"messages.getRecentLocations",params:[{name:"peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:-1225713124,method:"messages.sendMultiMedia",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"update_stickersets_order",type:"flags.15?true"},{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"top_msg_id",type:"flags.9?int"},{name:"multi_media",type:"Vector<InputSingleMedia>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:1347929239,method:"messages.uploadEncryptedFile",params:[{name:"peer",type:"InputEncryptedChat"},{name:"file",type:"InputEncryptedFile"}],type:"EncryptedFile"},{id:405695855,method:"account.getWebAuthorizations",params:[],type:"account.WebAuthorizations"},{id:755087855,method:"account.resetWebAuthorization",params:[{name:"hash",type:"long"}],type:"Bool"},{id:1747789204,method:"account.resetWebAuthorizations",params:[],type:"Bool"},{id:896555914,method:"messages.searchStickerSets",params:[{name:"flags",type:"#"},{name:"exclude_featured",type:"flags.0?true"},{name:"q",type:"string"},{name:"hash",type:"long"}],type:"messages.FoundStickerSets"},{id:-1856595926,method:"upload.getFileHashes",params:[{name:"location",type:"InputFileLocation"},{name:"offset",type:"long"}],type:"Vector<FileHash>"},{id:749019089,method:"help.getTermsOfServiceUpdate",params:[],type:"help.TermsOfServiceUpdate"},{id:-294455398,method:"help.acceptTermsOfService",params:[{name:"id",type:"DataJSON"}],type:"Bool"},{id:-1299661699,method:"account.getAllSecureValues",params:[],type:"Vector<SecureValue>"},{id:1936088002,method:"account.getSecureValue",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"Vector<SecureValue>"},{id:-1986010339,method:"account.saveSecureValue",params:[{name:"value",type:"InputSecureValue"},{name:"secure_secret_id",type:"long"}],type:"SecureValue"},{id:-1199522741,method:"account.deleteSecureValue",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"Bool"},{id:-1865902923,method:"users.setSecureValueErrors",params:[{name:"id",type:"InputUser"},{name:"errors",type:"Vector<SecureValueError>"}],type:"Bool"},{id:-1456907910,method:"account.getAuthorizationForm",params:[{name:"bot_id",type:"long"},{name:"scope",type:"string"},{name:"public_key",type:"string"}],type:"account.AuthorizationForm"},{id:-202552205,method:"account.acceptAuthorization",params:[{name:"bot_id",type:"long"},{name:"scope",type:"string"},{name:"public_key",type:"string"},{name:"value_hashes",type:"Vector<SecureValueHash>"},{name:"credentials",type:"SecureCredentialsEncrypted"}],type:"Bool"},{id:-1516022023,method:"account.sendVerifyPhoneCode",params:[{name:"phone_number",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1305716726,method:"account.verifyPhone",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"Bool"},{id:-1730136133,method:"account.sendVerifyEmailCode",params:[{name:"purpose",type:"EmailVerifyPurpose"},{name:"email",type:"string"}],type:"account.SentEmailCode"},{id:53322959,method:"account.verifyEmail",params:[{name:"purpose",type:"EmailVerifyPurpose"},{name:"verification",type:"EmailVerification"}],type:"account.EmailVerified"},{id:1072547679,method:"help.getDeepLinkInfo",params:[{name:"path",type:"string"}],type:"help.DeepLinkInfo"},{id:-2098076769,method:"contacts.getSaved",params:[],type:"Vector<SavedContact>"},{id:-2092831552,method:"channels.getLeftChannels",params:[{name:"offset",type:"int"}],type:"messages.Chats"},{id:-1896617296,method:"account.initTakeoutSession",params:[{name:"flags",type:"#"},{name:"contacts",type:"flags.0?true"},{name:"message_users",type:"flags.1?true"},{name:"message_chats",type:"flags.2?true"},{name:"message_megagroups",type:"flags.3?true"},{name:"message_channels",type:"flags.4?true"},{name:"files",type:"flags.5?true"},{name:"file_max_size",type:"flags.5?long"}],type:"account.Takeout"},{id:489050862,method:"account.finishTakeoutSession",params:[{name:"flags",type:"#"},{name:"success",type:"flags.0?true"}],type:"Bool"},{id:486505992,method:"messages.getSplitRanges",params:[],type:"Vector<MessageRange>"},{id:911373810,method:"invokeWithMessagesRange",params:[{name:"range",type:"MessageRange"},{name:"query",type:"!X"}],type:"X"},{id:-1398145746,method:"invokeWithTakeout",params:[{name:"takeout_id",type:"long"},{name:"query",type:"!X"}],type:"X"},{id:-1031349873,method:"messages.markDialogUnread",params:[{name:"flags",type:"#"},{name:"unread",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:585256482,method:"messages.getDialogUnreadMarks",params:[],type:"Vector<DialogPeer>"},{id:-2062238246,method:"contacts.toggleTopPeers",params:[{name:"enabled",type:"Bool"}],type:"Bool"},{id:2119757468,method:"messages.clearAllDrafts",params:[],type:"Bool"},{id:1642330196,method:"help.getAppConfig",params:[{name:"hash",type:"int"}],type:"help.AppConfig"},{id:1862465352,method:"help.saveAppLog",params:[{name:"events",type:"Vector<InputAppEvent>"}],type:"Bool"},{id:-966677240,method:"help.getPassportConfig",params:[{name:"hash",type:"int"}],type:"help.PassportConfig"},{id:1784243458,method:"langpack.getLanguage",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"}],type:"LangPackLanguage"},{id:-760547348,method:"messages.updatePinnedMessage",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"unpin",type:"flags.1?true"},{name:"pm_oneside",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"Updates"},{id:-1881204448,method:"account.confirmPasswordEmail",params:[{name:"code",type:"string"}],type:"Bool"},{id:2055154197,method:"account.resendPasswordEmail",params:[],type:"Bool"},{id:-1043606090,method:"account.cancelPasswordEmail",params:[],type:"Bool"},{id:-748624084,method:"help.getSupportName",params:[],type:"help.SupportName"},{id:59377875,method:"help.getUserInfo",params:[{name:"user_id",type:"InputUser"}],type:"help.UserInfo"},{id:1723407216,method:"help.editUserInfo",params:[{name:"user_id",type:"InputUser"},{name:"message",type:"string"},{name:"entities",type:"Vector<MessageEntity>"}],type:"help.UserInfo"},{id:-1626880216,method:"account.getContactSignUpNotification",params:[],type:"Bool"},{id:-806076575,method:"account.setContactSignUpNotification",params:[{name:"silent",type:"Bool"}],type:"Bool"},{id:1398240377,method:"account.getNotifyExceptions",params:[{name:"flags",type:"#"},{name:"compare_sound",type:"flags.1?true"},{name:"peer",type:"flags.0?InputNotifyPeer"}],type:"Updates"},{id:283795844,method:"messages.sendVote",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"options",type:"Vector<bytes>"}],type:"Updates"},{id:1941660731,method:"messages.getPollResults",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Updates"},{id:1848369232,method:"messages.getOnlines",params:[{name:"peer",type:"InputPeer"}],type:"ChatOnlines"},{id:-554301545,method:"messages.editChatAbout",params:[{name:"peer",type:"InputPeer"},{name:"about",type:"string"}],type:"Bool"},{id:-1517917375,method:"messages.editChatDefaultBannedRights",params:[{name:"peer",type:"InputPeer"},{name:"banned_rights",type:"ChatBannedRights"}],type:"Updates"},{id:-57811990,method:"account.getWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"}],type:"WallPaper"},{id:-476410109,method:"account.uploadWallPaper",params:[{name:"flags",type:"#"},{name:"for_chat",type:"flags.0?true"},{name:"file",type:"InputFile"},{name:"mime_type",type:"string"},{name:"settings",type:"WallPaperSettings"}],type:"WallPaper"},{id:1817860919,method:"account.saveWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"},{name:"unsave",type:"Bool"},{name:"settings",type:"WallPaperSettings"}],type:"Bool"},{id:-18000023,method:"account.installWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"},{name:"settings",type:"WallPaperSettings"}],type:"Bool"},{id:-1153722364,method:"account.resetWallPapers",params:[],type:"Bool"},{id:1457130303,method:"account.getAutoDownloadSettings",params:[],type:"account.AutoDownloadSettings"},{id:1995661875,method:"account.saveAutoDownloadSettings",params:[{name:"flags",type:"#"},{name:"low",type:"flags.0?true"},{name:"high",type:"flags.1?true"},{name:"settings",type:"AutoDownloadSettings"}],type:"Bool"},{id:899735650,method:"messages.getEmojiKeywords",params:[{name:"lang_code",type:"string"}],type:"EmojiKeywordsDifference"},{id:352892591,method:"messages.getEmojiKeywordsDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"}],type:"EmojiKeywordsDifference"},{id:1318675378,method:"messages.getEmojiKeywordsLanguages",params:[{name:"lang_codes",type:"Vector<string>"}],type:"Vector<EmojiLanguage>"},{id:-709817306,method:"messages.getEmojiURL",params:[{name:"lang_code",type:"string"}],type:"EmojiURL"},{id:1749536939,method:"folders.editPeerFolders",params:[{name:"folder_peers",type:"Vector<InputFolderPeer>"}],type:"Updates"},{id:11435201,method:"messages.getSearchCounters",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"filters",type:"Vector<MessagesFilter>"}],type:"Vector<messages.SearchCounter>"},{id:-170208392,method:"channels.getGroupsForDiscussion",params:[],type:"messages.Chats"},{id:1079520178,method:"channels.setDiscussionGroup",params:[{name:"broadcast",type:"InputChannel"},{name:"group",type:"InputChannel"}],type:"Bool"},{id:428848198,method:"messages.requestUrlAuth",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.1?InputPeer"},{name:"msg_id",type:"flags.1?int"},{name:"button_id",type:"flags.1?int"},{name:"url",type:"flags.2?string"}],type:"UrlAuthResult"},{id:-1322487515,method:"messages.acceptUrlAuth",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"peer",type:"flags.1?InputPeer"},{name:"msg_id",type:"flags.1?int"},{name:"button_id",type:"flags.1?int"},{name:"url",type:"flags.2?string"}],type:"UrlAuthResult"},{id:1336717624,method:"messages.hidePeerSettingsBar",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-386636848,method:"contacts.addContact",params:[{name:"flags",type:"#"},{name:"add_phone_privacy_exception",type:"flags.0?true"},{name:"id",type:"InputUser"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"phone",type:"string"}],type:"Updates"},{id:-130964977,method:"contacts.acceptContact",params:[{name:"id",type:"InputUser"}],type:"Updates"},{id:-1892102881,method:"channels.editCreator",params:[{name:"channel",type:"InputChannel"},{name:"user_id",type:"InputUser"},{name:"password",type:"InputCheckPasswordSRP"}],type:"Updates"},{id:-750207932,method:"contacts.getLocated",params:[{name:"flags",type:"#"},{name:"background",type:"flags.1?true"},{name:"geo_point",type:"InputGeoPoint"},{name:"self_expires",type:"flags.0?int"}],type:"Updates"},{id:1491484525,method:"channels.editLocation",params:[{name:"channel",type:"InputChannel"},{name:"geo_point",type:"InputGeoPoint"},{name:"address",type:"string"}],type:"Bool"},{id:-304832784,method:"channels.toggleSlowMode",params:[{name:"channel",type:"InputChannel"},{name:"seconds",type:"int"}],type:"Updates"},{id:-183077365,method:"messages.getScheduledHistory",params:[{name:"peer",type:"InputPeer"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:-1111817116,method:"messages.getScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"messages.Messages"},{id:-1120369398,method:"messages.sendScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1504586518,method:"messages.deleteScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:473805619,method:"account.uploadTheme",params:[{name:"flags",type:"#"},{name:"file",type:"InputFile"},{name:"thumb",type:"flags.0?InputFile"},{name:"file_name",type:"string"},{name:"mime_type",type:"string"}],type:"Document"},{id:1697530880,method:"account.createTheme",params:[{name:"flags",type:"#"},{name:"slug",type:"string"},{name:"title",type:"string"},{name:"document",type:"flags.2?InputDocument"},{name:"settings",type:"flags.3?Vector<InputThemeSettings>"}],type:"Theme"},{id:737414348,method:"account.updateTheme",params:[{name:"flags",type:"#"},{name:"format",type:"string"},{name:"theme",type:"InputTheme"},{name:"slug",type:"flags.0?string"},{name:"title",type:"flags.1?string"},{name:"document",type:"flags.2?InputDocument"},{name:"settings",type:"flags.3?Vector<InputThemeSettings>"}],type:"Theme"},{id:-229175188,method:"account.saveTheme",params:[{name:"theme",type:"InputTheme"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:-953697477,method:"account.installTheme",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"theme",type:"flags.1?InputTheme"},{name:"format",type:"flags.2?string"},{name:"base_theme",type:"flags.3?BaseTheme"}],type:"Bool"},{id:978872812,method:"account.getTheme",params:[{name:"format",type:"string"},{name:"theme",type:"InputTheme"}],type:"Theme"},{id:1913054296,method:"account.getThemes",params:[{name:"format",type:"string"},{name:"hash",type:"long"}],type:"account.Themes"},{id:-1210022402,method:"auth.exportLoginToken",params:[{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"except_ids",type:"Vector<long>"}],type:"auth.LoginToken"},{id:-1783866140,method:"auth.importLoginToken",params:[{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:-392909491,method:"auth.acceptLoginToken",params:[{name:"token",type:"bytes"}],type:"Authorization"},{id:-1250643605,method:"account.setContentSettings",params:[{name:"flags",type:"#"},{name:"sensitive_enabled",type:"flags.0?true"}],type:"Bool"},{id:-1952756306,method:"account.getContentSettings",params:[],type:"account.ContentSettings"},{id:300429806,method:"channels.getInactiveChannels",params:[],type:"messages.InactiveChats"},{id:1705865692,method:"account.getMultiWallPapers",params:[{name:"wallpapers",type:"Vector<InputWallPaper>"}],type:"Vector<WallPaper>"},{id:-1200736242,method:"messages.getPollVotes",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"option",type:"flags.0?bytes"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"messages.VotesList"},{id:-1257951254,method:"messages.toggleStickerSets",params:[{name:"flags",type:"#"},{name:"uninstall",type:"flags.0?true"},{name:"archive",type:"flags.1?true"},{name:"unarchive",type:"flags.2?true"},{name:"stickersets",type:"Vector<InputStickerSet>"}],type:"Bool"},{id:779736953,method:"payments.getBankCardData",params:[{name:"number",type:"string"}],type:"payments.BankCardData"},{id:-241247891,method:"messages.getDialogFilters",params:[],type:"Vector<DialogFilter>"},{id:-1566780372,method:"messages.getSuggestedDialogFilters",params:[],type:"Vector<DialogFilterSuggested>"},{id:450142282,method:"messages.updateDialogFilter",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"filter",type:"flags.0?DialogFilter"}],type:"Bool"},{id:-983318044,method:"messages.updateDialogFiltersOrder",params:[{name:"order",type:"Vector<int>"}],type:"Bool"},{id:-1421720550,method:"stats.getBroadcastStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.BroadcastStats"},{id:1646092192,method:"stats.loadAsyncGraph",params:[{name:"flags",type:"#"},{name:"token",type:"string"},{name:"x",type:"flags.0?long"}],type:"StatsGraph"},{id:-1486204014,method:"stickers.setStickerSetThumb",params:[{name:"flags",type:"#"},{name:"stickerset",type:"InputStickerSet"},{name:"thumb",type:"flags.0?InputDocument"},{name:"thumb_document_id",type:"flags.1?long"}],type:"messages.StickerSet"},{id:85399130,method:"bots.setBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"},{name:"commands",type:"Vector<BotCommand>"}],type:"Bool"},{id:2127598753,method:"messages.getOldFeaturedStickers",params:[{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:-1063816159,method:"help.getPromoData",params:[],type:"help.PromoData"},{id:505748629,method:"help.hidePromoData",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-8744061,method:"phone.sendSignalingData",params:[{name:"peer",type:"InputPhoneCall"},{name:"data",type:"bytes"}],type:"Bool"},{id:-589330937,method:"stats.getMegagroupStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.MegagroupStats"},{id:-349483786,method:"account.getGlobalPrivacySettings",params:[],type:"GlobalPrivacySettings"},{id:517647042,method:"account.setGlobalPrivacySettings",params:[{name:"settings",type:"GlobalPrivacySettings"}],type:"GlobalPrivacySettings"},{id:-183649631,method:"help.dismissSuggestion",params:[{name:"peer",type:"InputPeer"},{name:"suggestion",type:"string"}],type:"Bool"},{id:1935116200,method:"help.getCountriesList",params:[{name:"lang_code",type:"string"},{name:"hash",type:"int"}],type:"help.CountriesList"},{id:584962828,method:"messages.getReplies",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:1147761405,method:"messages.getDiscussionMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"messages.DiscussionMessage"},{id:-147740172,method:"messages.readDiscussion",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"read_max_id",type:"int"}],type:"Bool"},{id:698914348,method:"contacts.blockFromReplies",params:[{name:"flags",type:"#"},{name:"delete_message",type:"flags.0?true"},{name:"delete_history",type:"flags.1?true"},{name:"report_spam",type:"flags.2?true"},{name:"msg_id",type:"int"}],type:"Updates"},{id:1445996571,method:"stats.getMessagePublicForwards",params:[{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"},{name:"offset_rate",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:-1226791947,method:"stats.getMessageStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"stats.MessageStats"},{id:-299714136,method:"messages.unpinAllMessages",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"}],type:"messages.AffectedHistory"},{id:1221445336,method:"phone.createGroupCall",params:[{name:"flags",type:"#"},{name:"rtmp_stream",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"random_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"schedule_date",type:"flags.1?int"}],type:"Updates"},{id:-1322057861,method:"phone.joinGroupCall",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"video_stopped",type:"flags.2?true"},{name:"call",type:"InputGroupCall"},{name:"join_as",type:"InputPeer"},{name:"invite_hash",type:"flags.1?string"},{name:"params",type:"DataJSON"}],type:"Updates"},{id:1342404601,method:"phone.leaveGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"source",type:"int"}],type:"Updates"},{id:2067345760,method:"phone.inviteToGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"users",type:"Vector<InputUser>"}],type:"Updates"},{id:2054648117,method:"phone.discardGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:1958458429,method:"phone.toggleGroupCallSettings",params:[{name:"flags",type:"#"},{name:"reset_invite_hash",type:"flags.1?true"},{name:"call",type:"InputGroupCall"},{name:"join_muted",type:"flags.0?Bool"}],type:"Updates"},{id:68699611,method:"phone.getGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"limit",type:"int"}],type:"phone.GroupCall"},{id:-984033109,method:"phone.getGroupParticipants",params:[{name:"call",type:"InputGroupCall"},{name:"ids",type:"Vector<InputPeer>"},{name:"sources",type:"Vector<int>"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"phone.GroupParticipants"},{id:-1248003721,method:"phone.checkGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"sources",type:"Vector<int>"}],type:"Vector<int>"},{id:1540419152,method:"messages.deleteChat",params:[{name:"chat_id",type:"long"}],type:"Bool"},{id:-104078327,method:"messages.deletePhoneCallHistory",params:[{name:"flags",type:"#"},{name:"revoke",type:"flags.0?true"}],type:"messages.AffectedFoundMessages"},{id:1140726259,method:"messages.checkHistoryImport",params:[{name:"import_head",type:"string"}],type:"messages.HistoryImportParsed"},{id:873008187,method:"messages.initHistoryImport",params:[{name:"peer",type:"InputPeer"},{name:"file",type:"InputFile"},{name:"media_count",type:"int"}],type:"messages.HistoryImport"},{id:713433234,method:"messages.uploadImportedMedia",params:[{name:"peer",type:"InputPeer"},{name:"import_id",type:"long"},{name:"file_name",type:"string"},{name:"media",type:"InputMedia"}],type:"MessageMedia"},{id:-1271008444,method:"messages.startHistoryImport",params:[{name:"peer",type:"InputPeer"},{name:"import_id",type:"long"}],type:"Bool"},{id:-1565154314,method:"messages.getExportedChatInvites",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"admin_id",type:"InputUser"},{name:"offset_date",type:"flags.2?int"},{name:"offset_link",type:"flags.2?string"},{name:"limit",type:"int"}],type:"messages.ExportedChatInvites"},{id:1937010524,method:"messages.getExportedChatInvite",params:[{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"messages.ExportedChatInvite"},{id:-1110823051,method:"messages.editExportedChatInvite",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"string"},{name:"expire_date",type:"flags.0?int"},{name:"usage_limit",type:"flags.1?int"},{name:"request_needed",type:"flags.3?Bool"},{name:"title",type:"flags.4?string"}],type:"messages.ExportedChatInvite"},{id:1452833749,method:"messages.deleteRevokedExportedChatInvites",params:[{name:"peer",type:"InputPeer"},{name:"admin_id",type:"InputUser"}],type:"Bool"},{id:-731601877,method:"messages.deleteExportedChatInvite",params:[{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"Bool"},{id:958457583,method:"messages.getAdminsWithInvites",params:[{name:"peer",type:"InputPeer"}],type:"messages.ChatAdminsWithInvites"},{id:-553329330,method:"messages.getChatInviteImporters",params:[{name:"flags",type:"#"},{name:"requested",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"flags.1?string"},{name:"q",type:"flags.2?string"},{name:"offset_date",type:"int"},{name:"offset_user",type:"InputUser"},{name:"limit",type:"int"}],type:"messages.ChatInviteImporters"},{id:-1207017500,method:"messages.setHistoryTTL",params:[{name:"peer",type:"InputPeer"},{name:"period",type:"int"}],type:"Updates"},{id:-91437323,method:"account.reportProfilePhoto",params:[{name:"peer",type:"InputPeer"},{name:"photo_id",type:"InputPhoto"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:187239529,method:"channels.convertToGigagroup",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:1573261059,method:"messages.checkHistoryImportPeer",params:[{name:"peer",type:"InputPeer"}],type:"messages.CheckedHistoryImportPeer"},{id:-248985848,method:"phone.toggleGroupCallRecord",params:[{name:"flags",type:"#"},{name:"start",type:"flags.0?true"},{name:"video",type:"flags.2?true"},{name:"call",type:"InputGroupCall"},{name:"title",type:"flags.1?string"},{name:"video_portrait",type:"flags.2?Bool"}],type:"Updates"},{id:-1524155713,method:"phone.editGroupCallParticipant",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"participant",type:"InputPeer"},{name:"muted",type:"flags.0?Bool"},{name:"volume",type:"flags.1?int"},{name:"raise_hand",type:"flags.2?Bool"},{name:"video_stopped",type:"flags.3?Bool"},{name:"video_paused",type:"flags.4?Bool"},{name:"presentation_paused",type:"flags.5?Bool"}],type:"Updates"},{id:480685066,method:"phone.editGroupCallTitle",params:[{name:"call",type:"InputGroupCall"},{name:"title",type:"string"}],type:"Updates"},{id:-277077702,method:"phone.getGroupCallJoinAs",params:[{name:"peer",type:"InputPeer"}],type:"phone.JoinAsPeers"},{id:-425040769,method:"phone.exportGroupCallInvite",params:[{name:"flags",type:"#"},{name:"can_self_unmute",type:"flags.0?true"},{name:"call",type:"InputGroupCall"}],type:"phone.ExportedGroupCallInvite"},{id:563885286,method:"phone.toggleGroupCallStartSubscription",params:[{name:"call",type:"InputGroupCall"},{name:"subscribed",type:"Bool"}],type:"Updates"},{id:1451287362,method:"phone.startScheduledGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:1465786252,method:"phone.saveDefaultGroupCallJoinAs",params:[{name:"peer",type:"InputPeer"},{name:"join_as",type:"InputPeer"}],type:"Bool"},{id:-873829436,method:"phone.joinGroupCallPresentation",params:[{name:"call",type:"InputGroupCall"},{name:"params",type:"DataJSON"}],type:"Updates"},{id:475058500,method:"phone.leaveGroupCallPresentation",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:676017721,method:"stickers.checkShortName",params:[{name:"short_name",type:"string"}],type:"Bool"},{id:1303364867,method:"stickers.suggestShortName",params:[{name:"title",type:"string"}],type:"stickers.SuggestedShortName"},{id:1032708345,method:"bots.resetBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"}],type:"Bool"},{id:-481554986,method:"bots.getBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"}],type:"Vector<BotCommand>"},{id:-1828139493,method:"account.resetPassword",params:[],type:"account.ResetPasswordResult"},{id:1284770294,method:"account.declinePasswordReset",params:[],type:"Bool"},{id:221691769,method:"auth.checkRecoveryPassword",params:[{name:"code",type:"string"}],type:"Bool"},{id:-700916087,method:"account.getChatThemes",params:[{name:"hash",type:"long"}],type:"account.Themes"},{id:-432283329,method:"messages.setChatTheme",params:[{name:"peer",type:"InputPeer"},{name:"emoticon",type:"string"}],type:"Updates"},{id:-1095836780,method:"channels.viewSponsoredMessage",params:[{name:"channel",type:"InputChannel"},{name:"random_id",type:"bytes"}],type:"Bool"},{id:-333377601,method:"channels.getSponsoredMessages",params:[{name:"channel",type:"InputChannel"}],type:"messages.SponsoredMessages"},{id:834782287,method:"messages.getMessageReadParticipants",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Vector<ReadParticipantDate>"},{id:1240514025,method:"messages.getSearchResultsCalendar",params:[{name:"peer",type:"InputPeer"},{name:"filter",type:"MessagesFilter"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"}],type:"messages.SearchResultsCalendar"},{id:1855292323,method:"messages.getSearchResultsPositions",params:[{name:"peer",type:"InputPeer"},{name:"filter",type:"MessagesFilter"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.SearchResultsPositions"},{id:2145904661,method:"messages.hideChatJoinRequest",params:[{name:"flags",type:"#"},{name:"approved",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:-528091926,method:"messages.hideAllChatJoinRequests",params:[{name:"flags",type:"#"},{name:"approved",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"flags.1?string"}],type:"Updates"},{id:-1323389022,method:"messages.toggleNoForwards",params:[{name:"peer",type:"InputPeer"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-855777386,method:"messages.saveDefaultSendAs",params:[{name:"peer",type:"InputPeer"},{name:"send_as",type:"InputPeer"}],type:"Bool"},{id:231174382,method:"channels.getSendAs",params:[{name:"peer",type:"InputPeer"}],type:"channels.SendAsPeers"},{id:-1081501024,method:"account.setAuthorizationTTL",params:[{name:"authorization_ttl_days",type:"int"}],type:"Bool"},{id:1089766498,method:"account.changeAuthorizationSettings",params:[{name:"flags",type:"#"},{name:"hash",type:"long"},{name:"encrypted_requests_disabled",type:"flags.0?Bool"},{name:"call_requests_disabled",type:"flags.1?Bool"}],type:"Bool"},{id:913655003,method:"channels.deleteParticipantHistory",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"}],type:"messages.AffectedHistory"},{id:-754091820,method:"messages.sendReaction",params:[{name:"flags",type:"#"},{name:"big",type:"flags.1?true"},{name:"add_to_recent",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"reaction",type:"flags.0?Vector<Reaction>"}],type:"Updates"},{id:-1950707482,method:"messages.getMessagesReactions",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1176190792,method:"messages.getMessageReactionsList",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction",type:"flags.0?Reaction"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"messages.MessageReactionsList"},{id:-21928079,method:"messages.setChatAvailableReactions",params:[{name:"peer",type:"InputPeer"},{name:"available_reactions",type:"ChatReactions"}],type:"Updates"},{id:417243308,method:"messages.getAvailableReactions",params:[{name:"hash",type:"int"}],type:"messages.AvailableReactions"},{id:1330094102,method:"messages.setDefaultReaction",params:[{name:"reaction",type:"Reaction"}],type:"Bool"},{id:1662529584,method:"messages.translateText",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.0?InputPeer"},{name:"id",type:"flags.0?Vector<int>"},{name:"text",type:"flags.1?Vector<TextWithEntities>"},{name:"to_lang",type:"string"}],type:"messages.TranslatedText"},{id:841173339,method:"messages.getUnreadReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"}],type:"messages.Messages"},{id:1420459918,method:"messages.readReactions",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"}],type:"messages.AffectedHistory"},{id:-1963375804,method:"contacts.resolvePhone",params:[{name:"phone",type:"string"}],type:"contacts.ResolvedPeer"},{id:447879488,method:"phone.getGroupCallStreamChannels",params:[{name:"call",type:"InputGroupCall"}],type:"phone.GroupCallStreamChannels"},{id:-558650433,method:"phone.getGroupCallStreamRtmpUrl",params:[{name:"peer",type:"InputPeer"},{name:"revoke",type:"Bool"}],type:"phone.GroupCallStreamRtmpUrl"},{id:276705696,method:"messages.searchSentMedia",params:[{name:"q",type:"string"},{name:"filter",type:"MessagesFilter"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:385663691,method:"messages.getAttachMenuBots",params:[{name:"hash",type:"long"}],type:"AttachMenuBots"},{id:1998676370,method:"messages.getAttachMenuBot",params:[{name:"bot",type:"InputUser"}],type:"AttachMenuBotsBot"},{id:1777704297,method:"messages.toggleBotInAttachMenu",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"bot",type:"InputUser"},{name:"enabled",type:"Bool"}],type:"Bool"},{id:395003915,method:"messages.requestWebView",params:[{name:"flags",type:"#"},{name:"from_bot_menu",type:"flags.4?true"},{name:"silent",type:"flags.5?true"},{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"},{name:"url",type:"flags.1?string"},{name:"start_param",type:"flags.3?string"},{name:"theme_params",type:"flags.2?DataJSON"},{name:"platform",type:"string"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"top_msg_id",type:"flags.9?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"WebViewResult"},{id:2146648841,method:"messages.prolongWebView",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"peer",type:"InputPeer"},{name:"bot",type:"InputUser"},{name:"query_id",type:"long"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"top_msg_id",type:"flags.9?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Bool"},{id:698084494,method:"messages.requestSimpleWebView",params:[{name:"flags",type:"#"},{name:"from_switch_webview",type:"flags.1?true"},{name:"bot",type:"InputUser"},{name:"url",type:"string"},{name:"theme_params",type:"flags.0?DataJSON"},{name:"platform",type:"string"}],type:"SimpleWebViewResult"},{id:172168437,method:"messages.sendWebViewResultMessage",params:[{name:"bot_query_id",type:"string"},{name:"result",type:"InputBotInlineResult"}],type:"WebViewMessageSent"},{id:-603831608,method:"messages.sendWebViewData",params:[{name:"bot",type:"InputUser"},{name:"random_id",type:"long"},{name:"button_text",type:"string"},{name:"data",type:"string"}],type:"Updates"},{id:1157944655,method:"bots.setBotMenuButton",params:[{name:"user_id",type:"InputUser"},{name:"button",type:"BotMenuButton"}],type:"Bool"},{id:-1671369944,method:"bots.getBotMenuButton",params:[{name:"user_id",type:"InputUser"}],type:"BotMenuButton"},{id:-510647672,method:"account.getSavedRingtones",params:[{name:"hash",type:"long"}],type:"account.SavedRingtones"},{id:1038768899,method:"account.saveRingtone",params:[{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"account.SavedRingtone"},{id:-2095414366,method:"account.uploadRingtone",params:[{name:"file",type:"InputFile"},{name:"file_name",type:"string"},{name:"mime_type",type:"string"}],type:"Document"},{id:2021942497,method:"bots.setBotBroadcastDefaultAdminRights",params:[{name:"admin_rights",type:"ChatAdminRights"}],type:"Bool"},{id:-1839281686,method:"bots.setBotGroupDefaultAdminRights",params:[{name:"admin_rights",type:"ChatAdminRights"}],type:"Bool"},{id:1092913030,method:"phone.saveCallLog",params:[{name:"peer",type:"InputPhoneCall"},{name:"file",type:"InputFile"}],type:"Bool"},{id:-456419968,method:"channels.toggleJoinToSend",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:1277789622,method:"channels.toggleJoinRequest",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:261206117,method:"payments.exportInvoice",params:[{name:"invoice_media",type:"InputMedia"}],type:"payments.ExportedInvoice"},{id:647928393,method:"messages.transcribeAudio",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"messages.TranscribedAudio"},{id:2132608815,method:"messages.rateTranscribedAudio",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"transcription_id",type:"long"},{name:"good",type:"Bool"}],type:"Bool"},{id:-2131921795,method:"payments.assignAppStoreTransaction",params:[{name:"receipt",type:"bytes"},{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Updates"},{id:-537046829,method:"payments.assignPlayMarketTransaction",params:[{name:"receipt",type:"DataJSON"},{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Updates"},{id:-1614700874,method:"payments.canPurchasePremium",params:[{name:"purpose",type:"InputStorePaymentPurpose"}],type:"Bool"},{id:-1206152236,method:"help.getPremiumPromo",params:[],type:"help.PremiumPromo"},{id:-643100844,method:"messages.getCustomEmojiDocuments",params:[{name:"document_id",type:"Vector<long>"}],type:"Vector<Document>"},{id:-67329649,method:"messages.getEmojiStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:248473398,method:"messages.getFeaturedEmojiStickers",params:[{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:-70001045,method:"account.updateEmojiStatus",params:[{name:"emoji_status",type:"EmojiStatus"}],type:"Bool"},{id:-696962170,method:"account.getDefaultEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:257392901,method:"account.getRecentEmojiStatuses",params:[{name:"hash",type:"long"}],type:"account.EmojiStatuses"},{id:404757166,method:"account.clearRecentEmojiStatuses",params:[],type:"Bool"},{id:1063567478,method:"messages.reportReaction",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction_peer",type:"InputPeer"}],type:"Bool"},{id:-1149164102,method:"messages.getTopReactions",params:[{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Reactions"},{id:960896434,method:"messages.getRecentReactions",params:[{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Reactions"},{id:-1644236876,method:"messages.clearRecentReactions",params:[],type:"Bool"},{id:-2064119788,method:"messages.getExtendedMedia",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:767062953,method:"auth.importWebTokenAuthorization",params:[{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"web_auth_token",type:"string"}],type:"auth.Authorization"},{id:-279966037,method:"account.reorderUsernames",params:[{name:"order",type:"Vector<string>"}],type:"Bool"},{id:1490465654,method:"account.toggleUsername",params:[{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:-1268978403,method:"channels.reorderUsernames",params:[{name:"channel",type:"InputChannel"},{name:"order",type:"Vector<string>"}],type:"Bool"},{id:1358053637,method:"channels.toggleUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:170155475,method:"channels.deactivateAllUsernames",params:[{name:"channel",type:"InputChannel"}],type:"Bool"},{id:-1540781271,method:"channels.toggleForum",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-200539612,method:"channels.createForumTopic",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"title",type:"string"},{name:"icon_color",type:"flags.0?int"},{name:"icon_emoji_id",type:"flags.3?long"},{name:"random_id",type:"long"},{name:"send_as",type:"flags.2?InputPeer"}],type:"Updates"},{id:233136337,method:"channels.getForumTopics",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"q",type:"flags.0?string"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_topic",type:"int"},{name:"limit",type:"int"}],type:"messages.ForumTopics"},{id:-1333584199,method:"channels.getForumTopicsByID",params:[{name:"channel",type:"InputChannel"},{name:"topics",type:"Vector<int>"}],type:"messages.ForumTopics"},{id:-186670715,method:"channels.editForumTopic",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"topic_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"icon_emoji_id",type:"flags.1?long"},{name:"closed",type:"flags.2?Bool"},{name:"hidden",type:"flags.3?Bool"}],type:"Updates"},{id:1814925350,method:"channels.updatePinnedForumTopic",params:[{name:"channel",type:"InputChannel"},{name:"topic_id",type:"int"},{name:"pinned",type:"Bool"}],type:"Updates"},{id:876830509,method:"channels.deleteTopicHistory",params:[{name:"channel",type:"InputChannel"},{name:"top_msg_id",type:"int"}],type:"messages.AffectedHistory"},{id:693150095,method:"channels.reorderPinnedForumTopics",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"order",type:"Vector<int>"}],type:"Updates"},{id:1760814315,method:"channels.toggleAntiSpam",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-1471109485,method:"channels.reportAntiSpamFalsePositive",params:[{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"Bool"},{id:-1632299963,method:"messages.setDefaultHistoryTTL",params:[{name:"period",type:"int"}],type:"Bool"},{id:1703637384,method:"messages.getDefaultHistoryTTL",params:[],type:"DefaultHistoryTTL"},{id:-127582169,method:"contacts.exportContactToken",params:[],type:"ExportedContactToken"},{id:318789512,method:"contacts.importContactToken",params:[{name:"token",type:"string"}],type:"User"},{id:-515093903,method:"photos.uploadContactProfilePhoto",params:[{name:"flags",type:"#"},{name:"suggest",type:"flags.3?true"},{name:"save",type:"flags.4?true"},{name:"user_id",type:"InputUser"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"},{name:"video_emoji_markup",type:"flags.5?VideoSize"}],type:"photos.Photo"},{id:1785624660,method:"channels.toggleParticipantsHidden",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-29831141,method:"messages.sendBotRequestedPeer",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"button_id",type:"int"},{name:"requested_peer",type:"InputPeer"}],type:"Updates"},{id:-495647960,method:"account.getDefaultProfilePhotoEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:-1856479058,method:"account.getDefaultGroupPhotoEmojis",params:[{name:"hash",type:"long"}],type:"EmojiList"},{id:-1991881904,method:"auth.requestFirebaseSms",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"safety_net_token",type:"flags.0?string"},{name:"ios_push_secret",type:"flags.1?string"}],type:"Bool"},{id:1955122779,method:"messages.getEmojiGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:785209037,method:"messages.getEmojiStatusGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:564480243,method:"messages.getEmojiProfilePhotoGroups",params:[{name:"hash",type:"int"}],type:"messages.EmojiGroups"},{id:739360983,method:"messages.searchCustomEmoji",params:[{name:"emoticon",type:"string"},{name:"hash",type:"long"}],type:"EmojiList"},{id:-461589127,method:"messages.togglePeerTranslations",params:[{name:"flags",type:"#"},{name:"disabled",type:"flags.0?true"},{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-1379156774,method:"account.getAutoSaveSettings",params:[],type:"account.AutoSaveSettings"},{id:-694451359,method:"account.saveAutoSaveSettings",params:[{name:"flags",type:"#"},{name:"users",type:"flags.0?true"},{name:"chats",type:"flags.1?true"},{name:"broadcasts",type:"flags.2?true"},{name:"peer",type:"flags.3?InputPeer"},{name:"settings",type:"AutoSaveSettings"}],type:"Bool"},{id:1404829728,method:"account.deleteAutoSaveExceptions",params:[],type:"Bool"},{id:-179077444,method:"stickers.changeSticker",params:[{name:"flags",type:"#"},{name:"sticker",type:"InputDocument"},{name:"emoji",type:"flags.0?string"},{name:"mask_coords",type:"flags.1?MaskCoords"},{name:"keywords",type:"flags.2?string"}],type:"messages.StickerSet"},{id:306912256,method:"stickers.renameStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"title",type:"string"}],type:"messages.StickerSet"},{id:-2022685804,method:"stickers.deleteStickerSet",params:[{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:889046467,method:"messages.getBotApp",params:[{name:"app",type:"InputBotApp"},{name:"hash",type:"long"}],type:"messages.BotApp"},{id:-1940243652,method:"messages.requestAppWebView",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"app",type:"InputBotApp"},{name:"start_param",type:"flags.1?string"},{name:"theme_params",type:"flags.2?DataJSON"},{name:"platform",type:"string"}],type:"AppWebViewResult"},{id:282013987,method:"bots.setBotInfo",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.2?InputUser"},{name:"lang_code",type:"string"},{name:"name",type:"flags.3?string"},{name:"about",type:"flags.0?string"},{name:"description",type:"flags.1?string"}],type:"Bool"},{id:-589753091,method:"bots.getBotInfo",params:[{name:"flags",type:"#"},{name:"bot",type:"flags.0?InputUser"},{name:"lang_code",type:"string"}],type:"bots.BotInfo"},{id:2123760019,method:"auth.resetLoginEmail",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"auth.SentCode"},{id:-2072885362,method:"chatlists.exportChatlistInvite",params:[{name:"chatlist",type:"InputChatlist"},{name:"title",type:"string"},{name:"peers",type:"Vector<InputPeer>"}],type:"chatlists.ExportedChatlistInvite"},{id:1906072670,method:"chatlists.deleteExportedInvite",params:[{name:"chatlist",type:"InputChatlist"},{name:"slug",type:"string"}],type:"Bool"},{id:1698543165,method:"chatlists.editExportedInvite",params:[{name:"flags",type:"#"},{name:"chatlist",type:"InputChatlist"},{name:"slug",type:"string"},{name:"title",type:"flags.1?string"},{name:"peers",type:"flags.2?Vector<InputPeer>"}],type:"ExportedChatlistInvite"},{id:-838608253,method:"chatlists.getExportedInvites",params:[{name:"chatlist",type:"InputChatlist"}],type:"chatlists.ExportedInvites"},{id:1103171583,method:"chatlists.checkChatlistInvite",params:[{name:"slug",type:"string"}],type:"chatlists.ChatlistInvite"},{id:-1498291302,method:"chatlists.joinChatlistInvite",params:[{name:"slug",type:"string"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:-1992190687,method:"chatlists.getChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"}],type:"chatlists.ChatlistUpdates"},{id:-527828747,method:"chatlists.joinChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:1726252795,method:"chatlists.hideChatlistUpdates",params:[{name:"chatlist",type:"InputChatlist"}],type:"Bool"},{id:-37955820,method:"chatlists.getLeaveChatlistSuggestions",params:[{name:"chatlist",type:"InputChatlist"}],type:"Vector<Peer>"},{id:1962598714,method:"chatlists.leaveChatlist",params:[{name:"chatlist",type:"InputChatlist"},{name:"peers",type:"Vector<InputPeer>"}],type:"Updates"},{id:-1760972350,method:"bots.reorderUsernames",params:[{name:"bot",type:"InputUser"},{name:"order",type:"Vector<string>"}],type:"Bool"},{id:87861619,method:"bots.toggleUsername",params:[{name:"bot",type:"InputUser"},{name:"username",type:"string"},{name:"active",type:"Bool"}],type:"Bool"},{id:-609568219,method:"messages.setChatWallPaper",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"wallpaper",type:"flags.0?InputWallPaper"},{name:"settings",type:"flags.0?WallPaperSettings"},{name:"id",type:"flags.1?int"}],type:"Updates"}]},layer:158},ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fa={},np={get exports(){return Fa},set exports(r){Fa=r}};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */(function(r,e){(function(t,a){a(e)})(ap,function(t){var a=(_,C,l,V)=>{let N=65535&_|0,T=_>>>16&65535|0,Z=0;for(;l!==0;){Z=l>2e3?2e3:l,l-=Z;do N=N+C[V++]|0,T=T+N|0;while(--Z);N%=65521,T%=65521}return N|T<<16|0};const s=new Uint32Array((()=>{let _,C=[];for(var l=0;l<256;l++){_=l;for(var V=0;V<8;V++)_=1&_?3988292384^_>>>1:_>>>1;C[l]=_}return C})());var n=(_,C,l,V)=>{const N=s,T=V+l;_^=-1;for(let Z=V;Z<T;Z++)_=_>>>8^N[255&(_^C[Z])];return-1^_};const i=16209;var o=function(_,C){let l,V,N,T,Z,j,he,E,U,je,te,H,He,ue,Q,_e,oe,W,le,Ie,$,ye,ie,ae;const fe=_.state;l=_.next_in,ie=_.input,V=l+(_.avail_in-5),N=_.next_out,ae=_.output,T=N-(C-_.avail_out),Z=N+(_.avail_out-257),j=fe.dmax,he=fe.wsize,E=fe.whave,U=fe.wnext,je=fe.window,te=fe.hold,H=fe.bits,He=fe.lencode,ue=fe.distcode,Q=(1<<fe.lenbits)-1,_e=(1<<fe.distbits)-1;e:do{H<15&&(te+=ie[l++]<<H,H+=8,te+=ie[l++]<<H,H+=8),oe=He[te&Q];t:for(;;){if(W=oe>>>24,te>>>=W,H-=W,W=oe>>>16&255,W===0)ae[N++]=65535&oe;else{if(!(16&W)){if(!(64&W)){oe=He[(65535&oe)+(te&(1<<W)-1)];continue t}if(32&W){fe.mode=16191;break e}_.msg="invalid literal/length code",fe.mode=i;break e}le=65535&oe,W&=15,W&&(H<W&&(te+=ie[l++]<<H,H+=8),le+=te&(1<<W)-1,te>>>=W,H-=W),H<15&&(te+=ie[l++]<<H,H+=8,te+=ie[l++]<<H,H+=8),oe=ue[te&_e];a:for(;;){if(W=oe>>>24,te>>>=W,H-=W,W=oe>>>16&255,!(16&W)){if(!(64&W)){oe=ue[(65535&oe)+(te&(1<<W)-1)];continue a}_.msg="invalid distance code",fe.mode=i;break e}if(Ie=65535&oe,W&=15,H<W&&(te+=ie[l++]<<H,H+=8,H<W&&(te+=ie[l++]<<H,H+=8)),Ie+=te&(1<<W)-1,Ie>j){_.msg="invalid distance too far back",fe.mode=i;break e}if(te>>>=W,H-=W,W=N-T,Ie>W){if(W=Ie-W,W>E&&fe.sane){_.msg="invalid distance too far back",fe.mode=i;break e}if($=0,ye=je,U===0){if($+=he-W,W<le){le-=W;do ae[N++]=je[$++];while(--W);$=N-Ie,ye=ae}}else if(U<W){if($+=he+U-W,W-=U,W<le){le-=W;do ae[N++]=je[$++];while(--W);if($=0,U<le){W=U,le-=W;do ae[N++]=je[$++];while(--W);$=N-Ie,ye=ae}}}else if($+=U-W,W<le){le-=W;do ae[N++]=je[$++];while(--W);$=N-Ie,ye=ae}for(;le>2;)ae[N++]=ye[$++],ae[N++]=ye[$++],ae[N++]=ye[$++],le-=3;le&&(ae[N++]=ye[$++],le>1&&(ae[N++]=ye[$++]))}else{$=N-Ie;do ae[N++]=ae[$++],ae[N++]=ae[$++],ae[N++]=ae[$++],le-=3;while(le>2);le&&(ae[N++]=ae[$++],le>1&&(ae[N++]=ae[$++]))}break}}break}}while(l<V&&N<Z);le=H>>3,l-=le,H-=le<<3,te&=(1<<H)-1,_.next_in=l,_.next_out=N,_.avail_in=l<V?V-l+5:5-(l-V),_.avail_out=N<Z?Z-N+257:257-(N-Z),fe.hold=te,fe.bits=H};const p=15,d=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),f=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),c=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),g=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var h=(_,C,l,V,N,T,Z,j)=>{const he=j.bits;let E,U,je,te,H,He,ue=0,Q=0,_e=0,oe=0,W=0,le=0,Ie=0,$=0,ye=0,ie=0,ae=null;const fe=new Uint16Array(16),tt=new Uint16Array(16);let $t,_a,Ma,Pa=null;for(ue=0;ue<=p;ue++)fe[ue]=0;for(Q=0;Q<V;Q++)fe[C[l+Q]]++;for(W=he,oe=p;oe>=1&&fe[oe]===0;oe--);if(W>oe&&(W=oe),oe===0)return N[T++]=20971520,N[T++]=20971520,j.bits=1,0;for(_e=1;_e<oe&&fe[_e]===0;_e++);for(W<_e&&(W=_e),$=1,ue=1;ue<=p;ue++)if($<<=1,$-=fe[ue],$<0)return-1;if($>0&&(_===0||oe!==1))return-1;for(tt[1]=0,ue=1;ue<p;ue++)tt[ue+1]=tt[ue]+fe[ue];for(Q=0;Q<V;Q++)C[l+Q]!==0&&(Z[tt[C[l+Q]]++]=Q);if(_===0?(ae=Pa=Z,He=20):_===1?(ae=d,Pa=f,He=257):(ae=c,Pa=g,He=0),ie=0,Q=0,ue=_e,H=T,le=W,Ie=0,je=-1,ye=1<<W,te=ye-1,_===1&&ye>852||_===2&&ye>592)return 1;for(;;){$t=ue-Ie,Z[Q]+1<He?(_a=0,Ma=Z[Q]):Z[Q]>=He?(_a=Pa[Z[Q]-He],Ma=ae[Z[Q]-He]):(_a=96,Ma=0),E=1<<ue-Ie,U=1<<le,_e=U;do U-=E,N[H+(ie>>Ie)+U]=$t<<24|_a<<16|Ma|0;while(U!==0);for(E=1<<ue-1;ie&E;)E>>=1;if(E!==0?(ie&=E-1,ie+=E):ie=0,Q++,--fe[ue]==0){if(ue===oe)break;ue=C[l+Z[Q]]}if(ue>W&&(ie&te)!==je){for(Ie===0&&(Ie=W),H+=_e,le=ue-Ie,$=1<<le;le+Ie<oe&&($-=fe[le+Ie],!($<=0));)le++,$<<=1;if(ye+=1<<le,_===1&&ye>852||_===2&&ye>592)return 1;je=ie&te,N[je]=W<<24|le<<16|H-T|0}}return ie!==0&&(N[H+ie]=ue-Ie<<24|64<<16|0),j.bits=W,0},y={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{Z_FINISH:P,Z_BLOCK:D,Z_TREES:v,Z_OK:k,Z_STREAM_END:L,Z_NEED_DICT:w,Z_STREAM_ERROR:R,Z_DATA_ERROR:q,Z_MEM_ERROR:J,Z_BUF_ERROR:Y,Z_DEFLATED:pe}=y,S=16180,A=16190,O=16191,z=16192,re=16194,we=16199,Re=16200,rt=16206,ne=16209,Ne=_=>(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24);function Se(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qe=_=>{if(!_)return 1;const C=_.state;return!C||C.strm!==_||C.mode<S||C.mode>16211?1:0},Mt=_=>{if(qe(_))return R;const C=_.state;return _.total_in=_.total_out=C.total=0,_.msg="",C.wrap&&(_.adler=1&C.wrap),C.mode=S,C.last=0,C.havedict=0,C.flags=-1,C.dmax=32768,C.head=null,C.hold=0,C.bits=0,C.lencode=C.lendyn=new Int32Array(852),C.distcode=C.distdyn=new Int32Array(592),C.sane=1,C.back=-1,k},ke=_=>{if(qe(_))return R;const C=_.state;return C.wsize=0,C.whave=0,C.wnext=0,Mt(_)},ot=(_,C)=>{let l;if(qe(_))return R;const V=_.state;return C<0?(l=0,C=-C):(l=5+(C>>4),C<48&&(C&=15)),C&&(C<8||C>15)?R:(V.window!==null&&V.wbits!==C&&(V.window=null),V.wrap=l,V.wbits=C,ke(_))},Qe=(_,C)=>{if(!_)return R;const l=new Se;_.state=l,l.strm=_,l.window=null,l.mode=S;const V=ot(_,C);return V!==k&&(_.state=null),V};let Fe,nt,Xe=!0;const ht=_=>{if(Xe){Fe=new Int32Array(512),nt=new Int32Array(32);let C=0;for(;C<144;)_.lens[C++]=8;for(;C<256;)_.lens[C++]=9;for(;C<280;)_.lens[C++]=7;for(;C<288;)_.lens[C++]=8;for(h(1,_.lens,0,288,Fe,0,_.work,{bits:9}),C=0;C<32;)_.lens[C++]=5;h(2,_.lens,0,32,nt,0,_.work,{bits:5}),Xe=!1}_.lencode=Fe,_.lenbits=9,_.distcode=nt,_.distbits=5},Ge=(_,C,l,V)=>{let N;const T=_.state;return T.window===null&&(T.wsize=1<<T.wbits,T.wnext=0,T.whave=0,T.window=new Uint8Array(T.wsize)),V>=T.wsize?(T.window.set(C.subarray(l-T.wsize,l),0),T.wnext=0,T.whave=T.wsize):(N=T.wsize-T.wnext,N>V&&(N=V),T.window.set(C.subarray(l-V,l-V+N),T.wnext),(V-=N)?(T.window.set(C.subarray(l-V,l),0),T.wnext=V,T.whave=T.wsize):(T.wnext+=N,T.wnext===T.wsize&&(T.wnext=0),T.whave<T.wsize&&(T.whave+=N))),0};var Oe={inflateReset:ke,inflateReset2:ot,inflateResetKeep:Mt,inflateInit:_=>Qe(_,15),inflateInit2:Qe,inflate:(_,C)=>{let l,V,N,T,Z,j,he,E,U,je,te,H,He,ue,Q,_e,oe,W,le,Ie,$,ye,ie=0;const ae=new Uint8Array(4);let fe,tt;const $t=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qe(_)||!_.output||!_.input&&_.avail_in!==0)return R;l=_.state,l.mode===O&&(l.mode=z),Z=_.next_out,N=_.output,he=_.avail_out,T=_.next_in,V=_.input,j=_.avail_in,E=l.hold,U=l.bits,je=j,te=he,ye=k;e:for(;;)switch(l.mode){case S:if(l.wrap===0){l.mode=z;break}for(;U<16;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(2&l.wrap&&E===35615){l.wbits===0&&(l.wbits=15),l.check=0,ae[0]=255&E,ae[1]=E>>>8&255,l.check=n(l.check,ae,2,0),E=0,U=0,l.mode=16181;break}if(l.head&&(l.head.done=!1),!(1&l.wrap)||(((255&E)<<8)+(E>>8))%31){_.msg="incorrect header check",l.mode=ne;break}if((15&E)!==pe){_.msg="unknown compression method",l.mode=ne;break}if(E>>>=4,U-=4,$=8+(15&E),l.wbits===0&&(l.wbits=$),$>15||$>l.wbits){_.msg="invalid window size",l.mode=ne;break}l.dmax=1<<l.wbits,l.flags=0,_.adler=l.check=1,l.mode=512&E?16189:O,E=0,U=0;break;case 16181:for(;U<16;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(l.flags=E,(255&l.flags)!==pe){_.msg="unknown compression method",l.mode=ne;break}if(57344&l.flags){_.msg="unknown header flags set",l.mode=ne;break}l.head&&(l.head.text=E>>8&1),512&l.flags&&4&l.wrap&&(ae[0]=255&E,ae[1]=E>>>8&255,l.check=n(l.check,ae,2,0)),E=0,U=0,l.mode=16182;case 16182:for(;U<32;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}l.head&&(l.head.time=E),512&l.flags&&4&l.wrap&&(ae[0]=255&E,ae[1]=E>>>8&255,ae[2]=E>>>16&255,ae[3]=E>>>24&255,l.check=n(l.check,ae,4,0)),E=0,U=0,l.mode=16183;case 16183:for(;U<16;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}l.head&&(l.head.xflags=255&E,l.head.os=E>>8),512&l.flags&&4&l.wrap&&(ae[0]=255&E,ae[1]=E>>>8&255,l.check=n(l.check,ae,2,0)),E=0,U=0,l.mode=16184;case 16184:if(1024&l.flags){for(;U<16;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}l.length=E,l.head&&(l.head.extra_len=E),512&l.flags&&4&l.wrap&&(ae[0]=255&E,ae[1]=E>>>8&255,l.check=n(l.check,ae,2,0)),E=0,U=0}else l.head&&(l.head.extra=null);l.mode=16185;case 16185:if(1024&l.flags&&(H=l.length,H>j&&(H=j),H&&(l.head&&($=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Uint8Array(l.head.extra_len)),l.head.extra.set(V.subarray(T,T+H),$)),512&l.flags&&4&l.wrap&&(l.check=n(l.check,V,H,T)),j-=H,T+=H,l.length-=H),l.length))break e;l.length=0,l.mode=16186;case 16186:if(2048&l.flags){if(j===0)break e;H=0;do $=V[T+H++],l.head&&$&&l.length<65536&&(l.head.name+=String.fromCharCode($));while($&&H<j);if(512&l.flags&&4&l.wrap&&(l.check=n(l.check,V,H,T)),j-=H,T+=H,$)break e}else l.head&&(l.head.name=null);l.length=0,l.mode=16187;case 16187:if(4096&l.flags){if(j===0)break e;H=0;do $=V[T+H++],l.head&&$&&l.length<65536&&(l.head.comment+=String.fromCharCode($));while($&&H<j);if(512&l.flags&&4&l.wrap&&(l.check=n(l.check,V,H,T)),j-=H,T+=H,$)break e}else l.head&&(l.head.comment=null);l.mode=16188;case 16188:if(512&l.flags){for(;U<16;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(4&l.wrap&&E!==(65535&l.check)){_.msg="header crc mismatch",l.mode=ne;break}E=0,U=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),_.adler=l.check=0,l.mode=O;break;case 16189:for(;U<32;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}_.adler=l.check=Ne(E),E=0,U=0,l.mode=A;case A:if(l.havedict===0)return _.next_out=Z,_.avail_out=he,_.next_in=T,_.avail_in=j,l.hold=E,l.bits=U,w;_.adler=l.check=1,l.mode=O;case O:if(C===D||C===v)break e;case z:if(l.last){E>>>=7&U,U-=7&U,l.mode=rt;break}for(;U<3;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}switch(l.last=1&E,E>>>=1,U-=1,3&E){case 0:l.mode=16193;break;case 1:if(ht(l),l.mode=we,C===v){E>>>=2,U-=2;break e}break;case 2:l.mode=16196;break;case 3:_.msg="invalid block type",l.mode=ne}E>>>=2,U-=2;break;case 16193:for(E>>>=7&U,U-=7&U;U<32;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if((65535&E)!=(E>>>16^65535)){_.msg="invalid stored block lengths",l.mode=ne;break}if(l.length=65535&E,E=0,U=0,l.mode=re,C===v)break e;case re:l.mode=16195;case 16195:if(H=l.length,H){if(H>j&&(H=j),H>he&&(H=he),H===0)break e;N.set(V.subarray(T,T+H),Z),j-=H,T+=H,he-=H,Z+=H,l.length-=H;break}l.mode=O;break;case 16196:for(;U<14;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(l.nlen=257+(31&E),E>>>=5,U-=5,l.ndist=1+(31&E),E>>>=5,U-=5,l.ncode=4+(15&E),E>>>=4,U-=4,l.nlen>286||l.ndist>30){_.msg="too many length or distance symbols",l.mode=ne;break}l.have=0,l.mode=16197;case 16197:for(;l.have<l.ncode;){for(;U<3;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}l.lens[$t[l.have++]]=7&E,E>>>=3,U-=3}for(;l.have<19;)l.lens[$t[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,fe={bits:l.lenbits},ye=h(0,l.lens,0,19,l.lencode,0,l.work,fe),l.lenbits=fe.bits,ye){_.msg="invalid code lengths set",l.mode=ne;break}l.have=0,l.mode=16198;case 16198:for(;l.have<l.nlen+l.ndist;){for(;ie=l.lencode[E&(1<<l.lenbits)-1],Q=ie>>>24,_e=ie>>>16&255,oe=65535&ie,!(Q<=U);){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(oe<16)E>>>=Q,U-=Q,l.lens[l.have++]=oe;else{if(oe===16){for(tt=Q+2;U<tt;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(E>>>=Q,U-=Q,l.have===0){_.msg="invalid bit length repeat",l.mode=ne;break}$=l.lens[l.have-1],H=3+(3&E),E>>>=2,U-=2}else if(oe===17){for(tt=Q+3;U<tt;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}E>>>=Q,U-=Q,$=0,H=3+(7&E),E>>>=3,U-=3}else{for(tt=Q+7;U<tt;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}E>>>=Q,U-=Q,$=0,H=11+(127&E),E>>>=7,U-=7}if(l.have+H>l.nlen+l.ndist){_.msg="invalid bit length repeat",l.mode=ne;break}for(;H--;)l.lens[l.have++]=$}}if(l.mode===ne)break;if(l.lens[256]===0){_.msg="invalid code -- missing end-of-block",l.mode=ne;break}if(l.lenbits=9,fe={bits:l.lenbits},ye=h(1,l.lens,0,l.nlen,l.lencode,0,l.work,fe),l.lenbits=fe.bits,ye){_.msg="invalid literal/lengths set",l.mode=ne;break}if(l.distbits=6,l.distcode=l.distdyn,fe={bits:l.distbits},ye=h(2,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,fe),l.distbits=fe.bits,ye){_.msg="invalid distances set",l.mode=ne;break}if(l.mode=we,C===v)break e;case we:l.mode=Re;case Re:if(j>=6&&he>=258){_.next_out=Z,_.avail_out=he,_.next_in=T,_.avail_in=j,l.hold=E,l.bits=U,o(_,te),Z=_.next_out,N=_.output,he=_.avail_out,T=_.next_in,V=_.input,j=_.avail_in,E=l.hold,U=l.bits,l.mode===O&&(l.back=-1);break}for(l.back=0;ie=l.lencode[E&(1<<l.lenbits)-1],Q=ie>>>24,_e=ie>>>16&255,oe=65535&ie,!(Q<=U);){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(_e&&!(240&_e)){for(W=Q,le=_e,Ie=oe;ie=l.lencode[Ie+((E&(1<<W+le)-1)>>W)],Q=ie>>>24,_e=ie>>>16&255,oe=65535&ie,!(W+Q<=U);){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}E>>>=W,U-=W,l.back+=W}if(E>>>=Q,U-=Q,l.back+=Q,l.length=oe,_e===0){l.mode=16205;break}if(32&_e){l.back=-1,l.mode=O;break}if(64&_e){_.msg="invalid literal/length code",l.mode=ne;break}l.extra=15&_e,l.mode=16201;case 16201:if(l.extra){for(tt=l.extra;U<tt;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}l.length+=E&(1<<l.extra)-1,E>>>=l.extra,U-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=16202;case 16202:for(;ie=l.distcode[E&(1<<l.distbits)-1],Q=ie>>>24,_e=ie>>>16&255,oe=65535&ie,!(Q<=U);){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(!(240&_e)){for(W=Q,le=_e,Ie=oe;ie=l.distcode[Ie+((E&(1<<W+le)-1)>>W)],Q=ie>>>24,_e=ie>>>16&255,oe=65535&ie,!(W+Q<=U);){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}E>>>=W,U-=W,l.back+=W}if(E>>>=Q,U-=Q,l.back+=Q,64&_e){_.msg="invalid distance code",l.mode=ne;break}l.offset=oe,l.extra=15&_e,l.mode=16203;case 16203:if(l.extra){for(tt=l.extra;U<tt;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}l.offset+=E&(1<<l.extra)-1,E>>>=l.extra,U-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){_.msg="invalid distance too far back",l.mode=ne;break}l.mode=16204;case 16204:if(he===0)break e;if(H=te-he,l.offset>H){if(H=l.offset-H,H>l.whave&&l.sane){_.msg="invalid distance too far back",l.mode=ne;break}H>l.wnext?(H-=l.wnext,He=l.wsize-H):He=l.wnext-H,H>l.length&&(H=l.length),ue=l.window}else ue=N,He=Z-l.offset,H=l.length;H>he&&(H=he),he-=H,l.length-=H;do N[Z++]=ue[He++];while(--H);l.length===0&&(l.mode=Re);break;case 16205:if(he===0)break e;N[Z++]=l.length,he--,l.mode=Re;break;case rt:if(l.wrap){for(;U<32;){if(j===0)break e;j--,E|=V[T++]<<U,U+=8}if(te-=he,_.total_out+=te,l.total+=te,4&l.wrap&&te&&(_.adler=l.check=l.flags?n(l.check,N,te,Z-te):a(l.check,N,te,Z-te)),te=he,4&l.wrap&&(l.flags?E:Ne(E))!==l.check){_.msg="incorrect data check",l.mode=ne;break}E=0,U=0}l.mode=16207;case 16207:if(l.wrap&&l.flags){for(;U<32;){if(j===0)break e;j--,E+=V[T++]<<U,U+=8}if(4&l.wrap&&E!==(4294967295&l.total)){_.msg="incorrect length check",l.mode=ne;break}E=0,U=0}l.mode=16208;case 16208:ye=L;break e;case ne:ye=q;break e;case 16210:return J;default:return R}return _.next_out=Z,_.avail_out=he,_.next_in=T,_.avail_in=j,l.hold=E,l.bits=U,(l.wsize||te!==_.avail_out&&l.mode<ne&&(l.mode<rt||C!==P))&&Ge(_,_.output,_.next_out,te-_.avail_out),je-=_.avail_in,te-=_.avail_out,_.total_in+=je,_.total_out+=te,l.total+=te,4&l.wrap&&te&&(_.adler=l.check=l.flags?n(l.check,N,te,_.next_out-te):a(l.check,N,te,_.next_out-te)),_.data_type=l.bits+(l.last?64:0)+(l.mode===O?128:0)+(l.mode===we||l.mode===re?256:0),(je===0&&te===0||C===P)&&ye===k&&(ye=Y),ye},inflateEnd:_=>{if(qe(_))return R;let C=_.state;return C.window&&(C.window=null),_.state=null,k},inflateGetHeader:(_,C)=>{if(qe(_))return R;const l=_.state;return 2&l.wrap?(l.head=C,C.done=!1,k):R},inflateSetDictionary:(_,C)=>{const l=C.length;let V,N,T;return qe(_)?R:(V=_.state,V.wrap!==0&&V.mode!==A?R:V.mode===A&&(N=1,N=a(N,C,l,0),N!==V.check)?q:(T=Ge(_,C,l,l),T?(V.mode=16210,J):(V.havedict=1,k)))},inflateInfo:"pako inflate (from Nodeca project)"};const ut=(_,C)=>Object.prototype.hasOwnProperty.call(_,C);var Tt=function(_){const C=Array.prototype.slice.call(arguments,1);for(;C.length;){const l=C.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(const V in l)ut(l,V)&&(_[V]=l[V])}}return _},la=_=>{let C=0;for(let V=0,N=_.length;V<N;V++)C+=_[V].length;const l=new Uint8Array(C);for(let V=0,N=0,T=_.length;V<T;V++){let Z=_[V];l.set(Z,N),N+=Z.length}return l};let ga=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ga=!1}const Rt=new Uint8Array(256);for(let _=0;_<256;_++)Rt[_]=_>=252?6:_>=248?5:_>=240?4:_>=224?3:_>=192?2:1;Rt[254]=Rt[254]=1;var Ra=_=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(_);let C,l,V,N,T,Z=_.length,j=0;for(N=0;N<Z;N++)l=_.charCodeAt(N),(64512&l)==55296&&N+1<Z&&(V=_.charCodeAt(N+1),(64512&V)==56320&&(l=65536+(l-55296<<10)+(V-56320),N++)),j+=l<128?1:l<2048?2:l<65536?3:4;for(C=new Uint8Array(j),T=0,N=0;T<j;N++)l=_.charCodeAt(N),(64512&l)==55296&&N+1<Z&&(V=_.charCodeAt(N+1),(64512&V)==56320&&(l=65536+(l-55296<<10)+(V-56320),N++)),l<128?C[T++]=l:l<2048?(C[T++]=192|l>>>6,C[T++]=128|63&l):l<65536?(C[T++]=224|l>>>12,C[T++]=128|l>>>6&63,C[T++]=128|63&l):(C[T++]=240|l>>>18,C[T++]=128|l>>>12&63,C[T++]=128|l>>>6&63,C[T++]=128|63&l);return C},ma=(_,C)=>{const l=C||_.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(_.subarray(0,C));let V,N;const T=new Array(2*l);for(N=0,V=0;V<l;){let Z=_[V++];if(Z<128){T[N++]=Z;continue}let j=Rt[Z];if(j>4)T[N++]=65533,V+=j-1;else{for(Z&=j===2?31:j===3?15:7;j>1&&V<l;)Z=Z<<6|63&_[V++],j--;j>1?T[N++]=65533:Z<65536?T[N++]=Z:(Z-=65536,T[N++]=55296|Z>>10&1023,T[N++]=56320|1023&Z)}}return((Z,j)=>{if(j<65534&&Z.subarray&&ga)return String.fromCharCode.apply(null,Z.length===j?Z:Z.subarray(0,j));let he="";for(let E=0;E<j;E++)he+=String.fromCharCode(Z[E]);return he})(T,N)},Ba=(_,C)=>{(C=C||_.length)>_.length&&(C=_.length);let l=C-1;for(;l>=0&&(192&_[l])==128;)l--;return l<0||l===0?C:l+Rt[_[l]]>C?l:C},Dt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ha=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ua=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const ya=Object.prototype.toString,{Z_NO_FLUSH:X,Z_FINISH:It,Z_OK:m,Z_STREAM_END:u,Z_NEED_DICT:M,Z_STREAM_ERROR:b,Z_DATA_ERROR:F,Z_MEM_ERROR:I}=y;function B(_){this.options=Tt({chunkSize:65536,windowBits:15,to:""},_||{});const C=this.options;C.raw&&C.windowBits>=0&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(C.windowBits>=0&&C.windowBits<16)||_&&_.windowBits||(C.windowBits+=32),C.windowBits>15&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ha,this.strm.avail_out=0;let l=Oe.inflateInit2(this.strm,C.windowBits);if(l!==m)throw new Error(Dt[l]);if(this.header=new ua,Oe.inflateGetHeader(this.strm,this.header),C.dictionary&&(typeof C.dictionary=="string"?C.dictionary=Ra(C.dictionary):ya.call(C.dictionary)==="[object ArrayBuffer]"&&(C.dictionary=new Uint8Array(C.dictionary)),C.raw&&(l=Oe.inflateSetDictionary(this.strm,C.dictionary),l!==m)))throw new Error(Dt[l])}function x(_,C){const l=new B(C);if(l.push(_),l.err)throw l.msg||Dt[l.err];return l.result}B.prototype.push=function(_,C){const l=this.strm,V=this.options.chunkSize,N=this.options.dictionary;let T,Z,j;if(this.ended)return!1;for(Z=C===~~C?C:C===!0?It:X,ya.call(_)==="[object ArrayBuffer]"?l.input=new Uint8Array(_):l.input=_,l.next_in=0,l.avail_in=l.input.length;;){for(l.avail_out===0&&(l.output=new Uint8Array(V),l.next_out=0,l.avail_out=V),T=Oe.inflate(l,Z),T===M&&N&&(T=Oe.inflateSetDictionary(l,N),T===m?T=Oe.inflate(l,Z):T===F&&(T=M));l.avail_in>0&&T===u&&l.state.wrap>0&&_[l.next_in]!==0;)Oe.inflateReset(l),T=Oe.inflate(l,Z);switch(T){case b:case F:case M:case I:return this.onEnd(T),this.ended=!0,!1}if(j=l.avail_out,l.next_out&&(l.avail_out===0||T===u))if(this.options.to==="string"){let he=Ba(l.output,l.next_out),E=l.next_out-he,U=ma(l.output,he);l.next_out=E,l.avail_out=V-E,E&&l.output.set(l.output.subarray(he,he+E),0),this.onData(U)}else this.onData(l.output.length===l.next_out?l.output:l.output.subarray(0,l.next_out));if(T!==m||j!==0){if(T===u)return T=Oe.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,!0;if(l.avail_in===0)break}}return!0},B.prototype.onData=function(_){this.chunks.push(_)},B.prototype.onEnd=function(_){_===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=la(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};var G=B,ee=x,de=function(_,C){return(C=C||{}).raw=!0,x(_,C)},se=x,me=y,et={Inflate:G,inflate:ee,inflateRaw:de,ungzip:se,constants:me};t.Inflate=G,t.constants=me,t.default=et,t.inflate=ee,t.inflateRaw=de,t.ungzip=se,Object.defineProperty(t,"__esModule",{value:!0})})})(np,Fa);var ip=sp(Fa);function rp(r,e){return ip.inflate(r,e?{to:"string"}:void 0)}var Ve={},op={get exports(){return Ve},set exports(r){Ve=r}};(function(r){var e=function(t){var a=1e7,s=7,n=9007199254740992,i=y(n),o="0123456789abcdefghijklmnopqrstuvwxyz",p=typeof BigInt=="function";function d(m,u,M,b){return typeof m>"u"?d[0]:typeof u<"u"?+u==10&&!M?X(m):Ra(m,u,M,b):X(m)}function f(m,u){this.value=m,this.sign=u,this.isSmall=!1}f.prototype=Object.create(d.prototype);function c(m){this.value=m,this.sign=m<0,this.isSmall=!0}c.prototype=Object.create(d.prototype);function g(m){this.value=m}g.prototype=Object.create(d.prototype);function h(m){return-n<m&&m<n}function y(m){return m<1e7?[m]:m<1e14?[m%1e7,Math.floor(m/1e7)]:[m%1e7,Math.floor(m/1e7)%1e7,Math.floor(m/1e14)]}function P(m){D(m);var u=m.length;if(u<4&&Se(m,i)<0)switch(u){case 0:return 0;case 1:return m[0];case 2:return m[0]+m[1]*a;default:return m[0]+(m[1]+m[2]*a)*a}return m}function D(m){for(var u=m.length;m[--u]===0;);m.length=u+1}function v(m){for(var u=new Array(m),M=-1;++M<m;)u[M]=0;return u}function k(m){return m>0?Math.floor(m):Math.ceil(m)}function L(m,u){var M=m.length,b=u.length,F=new Array(M),I=0,B=a,x,G;for(G=0;G<b;G++)x=m[G]+u[G]+I,I=x>=B?1:0,F[G]=x-I*B;for(;G<M;)x=m[G]+I,I=x===B?1:0,F[G++]=x-I*B;return I>0&&F.push(I),F}function w(m,u){return m.length>=u.length?L(m,u):L(u,m)}function R(m,u){var M=m.length,b=new Array(M),F=a,I,B;for(B=0;B<M;B++)I=m[B]-F+u,u=Math.floor(I/F),b[B]=I-u*F,u+=1;for(;u>0;)b[B++]=u%F,u=Math.floor(u/F);return b}f.prototype.add=function(m){var u=X(m);if(this.sign!==u.sign)return this.subtract(u.negate());var M=this.value,b=u.value;return u.isSmall?new f(R(M,Math.abs(b)),this.sign):new f(w(M,b),this.sign)},f.prototype.plus=f.prototype.add,c.prototype.add=function(m){var u=X(m),M=this.value;if(M<0!==u.sign)return this.subtract(u.negate());var b=u.value;if(u.isSmall){if(h(M+b))return new c(M+b);b=y(Math.abs(b))}return new f(R(b,Math.abs(M)),M<0)},c.prototype.plus=c.prototype.add,g.prototype.add=function(m){return new g(this.value+X(m).value)},g.prototype.plus=g.prototype.add;function q(m,u){var M=m.length,b=u.length,F=new Array(M),I=0,B=a,x,G;for(x=0;x<b;x++)G=m[x]-I-u[x],G<0?(G+=B,I=1):I=0,F[x]=G;for(x=b;x<M;x++){if(G=m[x]-I,G<0)G+=B;else{F[x++]=G;break}F[x]=G}for(;x<M;x++)F[x]=m[x];return D(F),F}function J(m,u,M){var b;return Se(m,u)>=0?b=q(m,u):(b=q(u,m),M=!M),b=P(b),typeof b=="number"?(M&&(b=-b),new c(b)):new f(b,M)}function Y(m,u,M){var b=m.length,F=new Array(b),I=-u,B=a,x,G;for(x=0;x<b;x++)G=m[x]+I,I=Math.floor(G/B),G%=B,F[x]=G<0?G+B:G;return F=P(F),typeof F=="number"?(M&&(F=-F),new c(F)):new f(F,M)}f.prototype.subtract=function(m){var u=X(m);if(this.sign!==u.sign)return this.add(u.negate());var M=this.value,b=u.value;return u.isSmall?Y(M,Math.abs(b),this.sign):J(M,b,this.sign)},f.prototype.minus=f.prototype.subtract,c.prototype.subtract=function(m){var u=X(m),M=this.value;if(M<0!==u.sign)return this.add(u.negate());var b=u.value;return u.isSmall?new c(M-b):Y(b,Math.abs(M),M>=0)},c.prototype.minus=c.prototype.subtract,g.prototype.subtract=function(m){return new g(this.value-X(m).value)},g.prototype.minus=g.prototype.subtract,f.prototype.negate=function(){return new f(this.value,!this.sign)},c.prototype.negate=function(){var m=this.sign,u=new c(-this.value);return u.sign=!m,u},g.prototype.negate=function(){return new g(-this.value)},f.prototype.abs=function(){return new f(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},g.prototype.abs=function(){return new g(this.value>=0?this.value:-this.value)};function pe(m,u){var M=m.length,b=u.length,F=M+b,I=v(F),B=a,x,G,ee,de,se;for(ee=0;ee<M;++ee){de=m[ee];for(var me=0;me<b;++me)se=u[me],x=de*se+I[ee+me],G=Math.floor(x/B),I[ee+me]=x-G*B,I[ee+me+1]+=G}return D(I),I}function S(m,u){var M=m.length,b=new Array(M),F=a,I=0,B,x;for(x=0;x<M;x++)B=m[x]*u+I,I=Math.floor(B/F),b[x]=B-I*F;for(;I>0;)b[x++]=I%F,I=Math.floor(I/F);return b}function A(m,u){for(var M=[];u-- >0;)M.push(0);return M.concat(m)}function O(m,u){var M=Math.max(m.length,u.length);if(M<=30)return pe(m,u);M=Math.ceil(M/2);var b=m.slice(M),F=m.slice(0,M),I=u.slice(M),B=u.slice(0,M),x=O(F,B),G=O(b,I),ee=O(w(F,b),w(B,I)),de=w(w(x,A(q(q(ee,x),G),M)),A(G,2*M));return D(de),de}function z(m,u){return-.012*m-.012*u+15e-6*m*u>0}f.prototype.multiply=function(m){var u=X(m),M=this.value,b=u.value,F=this.sign!==u.sign,I;if(u.isSmall){if(b===0)return d[0];if(b===1)return this;if(b===-1)return this.negate();if(I=Math.abs(b),I<a)return new f(S(M,I),F);b=y(I)}return z(M.length,b.length)?new f(O(M,b),F):new f(pe(M,b),F)},f.prototype.times=f.prototype.multiply;function re(m,u,M){return m<a?new f(S(u,m),M):new f(pe(u,y(m)),M)}c.prototype._multiplyBySmall=function(m){return h(m.value*this.value)?new c(m.value*this.value):re(Math.abs(m.value),y(Math.abs(this.value)),this.sign!==m.sign)},f.prototype._multiplyBySmall=function(m){return m.value===0?d[0]:m.value===1?this:m.value===-1?this.negate():re(Math.abs(m.value),this.value,this.sign!==m.sign)},c.prototype.multiply=function(m){return X(m)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,g.prototype.multiply=function(m){return new g(this.value*X(m).value)},g.prototype.times=g.prototype.multiply;function we(m){var u=m.length,M=v(u+u),b=a,F,I,B,x,G;for(B=0;B<u;B++){x=m[B],I=0-x*x;for(var ee=B;ee<u;ee++)G=m[ee],F=2*(x*G)+M[B+ee]+I,I=Math.floor(F/b),M[B+ee]=F-I*b;M[B+u]=I}return D(M),M}f.prototype.square=function(){return new f(we(this.value),!1)},c.prototype.square=function(){var m=this.value*this.value;return h(m)?new c(m):new f(we(y(Math.abs(this.value))),!1)},g.prototype.square=function(m){return new g(this.value*this.value)};function Re(m,u){var M=m.length,b=u.length,F=a,I=v(u.length),B=u[b-1],x=Math.ceil(F/(2*B)),G=S(m,x),ee=S(u,x),de,se,me,et,_,C,l;for(G.length<=M&&G.push(0),ee.push(0),B=ee[b-1],se=M-b;se>=0;se--){for(de=F-1,G[se+b]!==B&&(de=Math.floor((G[se+b]*F+G[se+b-1])/B)),me=0,et=0,C=ee.length,_=0;_<C;_++)me+=de*ee[_],l=Math.floor(me/F),et+=G[se+_]-(me-l*F),me=l,et<0?(G[se+_]=et+F,et=-1):(G[se+_]=et,et=0);for(;et!==0;){for(de-=1,me=0,_=0;_<C;_++)me+=G[se+_]-F+ee[_],me<0?(G[se+_]=me+F,me=0):(G[se+_]=me,me=1);et+=me}I[se]=de}return G=ne(G,x)[0],[P(I),P(G)]}function rt(m,u){for(var M=m.length,b=u.length,F=[],I=[],B=a,x,G,ee,de,se;M;){if(I.unshift(m[--M]),D(I),Se(I,u)<0){F.push(0);continue}G=I.length,ee=I[G-1]*B+I[G-2],de=u[b-1]*B+u[b-2],G>b&&(ee=(ee+1)*B),x=Math.ceil(ee/de);do{if(se=S(u,x),Se(se,I)<=0)break;x--}while(x);F.push(x),I=q(I,se)}return F.reverse(),[P(F),P(I)]}function ne(m,u){var M=m.length,b=v(M),F=a,I,B,x,G;for(x=0,I=M-1;I>=0;--I)G=x*F+m[I],B=k(G/u),x=G-B*u,b[I]=B|0;return[b,x|0]}function Ne(m,u){var M,b=X(u);if(p)return[new g(m.value/b.value),new g(m.value%b.value)];var F=m.value,I=b.value,B;if(I===0)throw new Error("Cannot divide by zero");if(m.isSmall)return b.isSmall?[new c(k(F/I)),new c(F%I)]:[d[0],m];if(b.isSmall){if(I===1)return[m,d[0]];if(I==-1)return[m.negate(),d[0]];var x=Math.abs(I);if(x<a){M=ne(F,x),B=P(M[0]);var G=M[1];return m.sign&&(G=-G),typeof B=="number"?(m.sign!==b.sign&&(B=-B),[new c(B),new c(G)]):[new f(B,m.sign!==b.sign),new c(G)]}I=y(x)}var ee=Se(F,I);if(ee===-1)return[d[0],m];if(ee===0)return[d[m.sign===b.sign?1:-1],d[0]];F.length+I.length<=200?M=Re(F,I):M=rt(F,I),B=M[0];var de=m.sign!==b.sign,se=M[1],me=m.sign;return typeof B=="number"?(de&&(B=-B),B=new c(B)):B=new f(B,de),typeof se=="number"?(me&&(se=-se),se=new c(se)):se=new f(se,me),[B,se]}f.prototype.divmod=function(m){var u=Ne(this,m);return{quotient:u[0],remainder:u[1]}},g.prototype.divmod=c.prototype.divmod=f.prototype.divmod,f.prototype.divide=function(m){return Ne(this,m)[0]},g.prototype.over=g.prototype.divide=function(m){return new g(this.value/X(m).value)},c.prototype.over=c.prototype.divide=f.prototype.over=f.prototype.divide,f.prototype.mod=function(m){return Ne(this,m)[1]},g.prototype.mod=g.prototype.remainder=function(m){return new g(this.value%X(m).value)},c.prototype.remainder=c.prototype.mod=f.prototype.remainder=f.prototype.mod,f.prototype.pow=function(m){var u=X(m),M=this.value,b=u.value,F,I,B;if(b===0)return d[1];if(M===0)return d[0];if(M===1)return d[1];if(M===-1)return u.isEven()?d[1]:d[-1];if(u.sign)return d[0];if(!u.isSmall)throw new Error("The exponent "+u.toString()+" is too large.");if(this.isSmall&&h(F=Math.pow(M,b)))return new c(k(F));for(I=this,B=d[1];b&!0&&(B=B.times(I),--b),b!==0;)b/=2,I=I.square();return B},c.prototype.pow=f.prototype.pow,g.prototype.pow=function(m){var u=X(m),M=this.value,b=u.value,F=BigInt(0),I=BigInt(1),B=BigInt(2);if(b===F)return d[1];if(M===F)return d[0];if(M===I)return d[1];if(M===BigInt(-1))return u.isEven()?d[1]:d[-1];if(u.isNegative())return new g(F);for(var x=this,G=d[1];(b&I)===I&&(G=G.times(x),--b),b!==F;)b/=B,x=x.square();return G},f.prototype.modPow=function(m,u){if(m=X(m),u=X(u),u.isZero())throw new Error("Cannot take modPow with modulus 0");var M=d[1],b=this.mod(u);for(m.isNegative()&&(m=m.multiply(d[-1]),b=b.modInv(u));m.isPositive();){if(b.isZero())return d[0];m.isOdd()&&(M=M.multiply(b).mod(u)),m=m.divide(2),b=b.square().mod(u)}return M},g.prototype.modPow=c.prototype.modPow=f.prototype.modPow;function Se(m,u){if(m.length!==u.length)return m.length>u.length?1:-1;for(var M=m.length-1;M>=0;M--)if(m[M]!==u[M])return m[M]>u[M]?1:-1;return 0}f.prototype.compareAbs=function(m){var u=X(m),M=this.value,b=u.value;return u.isSmall?1:Se(M,b)},c.prototype.compareAbs=function(m){var u=X(m),M=Math.abs(this.value),b=u.value;return u.isSmall?(b=Math.abs(b),M===b?0:M>b?1:-1):-1},g.prototype.compareAbs=function(m){var u=this.value,M=X(m).value;return u=u>=0?u:-u,M=M>=0?M:-M,u===M?0:u>M?1:-1},f.prototype.compare=function(m){if(m===1/0)return-1;if(m===-1/0)return 1;var u=X(m),M=this.value,b=u.value;return this.sign!==u.sign?u.sign?1:-1:u.isSmall?this.sign?-1:1:Se(M,b)*(this.sign?-1:1)},f.prototype.compareTo=f.prototype.compare,c.prototype.compare=function(m){if(m===1/0)return-1;if(m===-1/0)return 1;var u=X(m),M=this.value,b=u.value;return u.isSmall?M==b?0:M>b?1:-1:M<0!==u.sign?M<0?-1:1:M<0?1:-1},c.prototype.compareTo=c.prototype.compare,g.prototype.compare=function(m){if(m===1/0)return-1;if(m===-1/0)return 1;var u=this.value,M=X(m).value;return u===M?0:u>M?1:-1},g.prototype.compareTo=g.prototype.compare,f.prototype.equals=function(m){return this.compare(m)===0},g.prototype.eq=g.prototype.equals=c.prototype.eq=c.prototype.equals=f.prototype.eq=f.prototype.equals,f.prototype.notEquals=function(m){return this.compare(m)!==0},g.prototype.neq=g.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=f.prototype.neq=f.prototype.notEquals,f.prototype.greater=function(m){return this.compare(m)>0},g.prototype.gt=g.prototype.greater=c.prototype.gt=c.prototype.greater=f.prototype.gt=f.prototype.greater,f.prototype.lesser=function(m){return this.compare(m)<0},g.prototype.lt=g.prototype.lesser=c.prototype.lt=c.prototype.lesser=f.prototype.lt=f.prototype.lesser,f.prototype.greaterOrEquals=function(m){return this.compare(m)>=0},g.prototype.geq=g.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=f.prototype.geq=f.prototype.greaterOrEquals,f.prototype.lesserOrEquals=function(m){return this.compare(m)<=0},g.prototype.leq=g.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=f.prototype.leq=f.prototype.lesserOrEquals,f.prototype.isEven=function(){return(this.value[0]&1)===0},c.prototype.isEven=function(){return(this.value&1)===0},g.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},f.prototype.isOdd=function(){return(this.value[0]&1)===1},c.prototype.isOdd=function(){return(this.value&1)===1},g.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},f.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},g.prototype.isPositive=c.prototype.isPositive,f.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},g.prototype.isNegative=c.prototype.isNegative,f.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return Math.abs(this.value)===1},g.prototype.isUnit=function(){return this.abs().value===BigInt(1)},f.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return this.value===0},g.prototype.isZero=function(){return this.value===BigInt(0)},f.prototype.isDivisibleBy=function(m){var u=X(m);return u.isZero()?!1:u.isUnit()?!0:u.compareAbs(2)===0?this.isEven():this.mod(u).isZero()},g.prototype.isDivisibleBy=c.prototype.isDivisibleBy=f.prototype.isDivisibleBy;function qe(m){var u=m.abs();if(u.isUnit())return!1;if(u.equals(2)||u.equals(3)||u.equals(5))return!0;if(u.isEven()||u.isDivisibleBy(3)||u.isDivisibleBy(5))return!1;if(u.lesser(49))return!0}function Mt(m,u){for(var M=m.prev(),b=M,F=0,I,B,x;b.isEven();)b=b.divide(2),F++;e:for(B=0;B<u.length;B++)if(!m.lesser(u[B])&&(x=e(u[B]).modPow(b,m),!(x.isUnit()||x.equals(M)))){for(I=F-1;I!=0;I--){if(x=x.square().mod(m),x.isUnit())return!1;if(x.equals(M))continue e}return!1}return!0}f.prototype.isPrime=function(m){var u=qe(this);if(u!==t)return u;var M=this.abs(),b=M.bitLength();if(b<=64)return Mt(M,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var F=Math.log(2)*b.toJSNumber(),I=Math.ceil(m===!0?2*Math.pow(F,2):F),B=[],x=0;x<I;x++)B.push(e(x+2));return Mt(M,B)},g.prototype.isPrime=c.prototype.isPrime=f.prototype.isPrime,f.prototype.isProbablePrime=function(m,u){var M=qe(this);if(M!==t)return M;for(var b=this.abs(),F=m===t?5:m,I=[],B=0;B<F;B++)I.push(e.randBetween(2,b.minus(2),u));return Mt(b,I)},g.prototype.isProbablePrime=c.prototype.isProbablePrime=f.prototype.isProbablePrime,f.prototype.modInv=function(m){for(var u=e.zero,M=e.one,b=X(m),F=this.abs(),I,B,x;!F.isZero();)I=b.divide(F),B=u,x=b,u=M,b=F,M=B.subtract(I.multiply(M)),F=x.subtract(I.multiply(F));if(!b.isUnit())throw new Error(this.toString()+" and "+m.toString()+" are not co-prime");return u.compare(0)===-1&&(u=u.add(m)),this.isNegative()?u.negate():u},g.prototype.modInv=c.prototype.modInv=f.prototype.modInv,f.prototype.next=function(){var m=this.value;return this.sign?Y(m,1,this.sign):new f(R(m,1),this.sign)},c.prototype.next=function(){var m=this.value;return m+1<n?new c(m+1):new f(i,!1)},g.prototype.next=function(){return new g(this.value+BigInt(1))},f.prototype.prev=function(){var m=this.value;return this.sign?new f(R(m,1),!0):Y(m,1,this.sign)},c.prototype.prev=function(){var m=this.value;return m-1>-n?new c(m-1):new f(i,!0)},g.prototype.prev=function(){return new g(this.value-BigInt(1))};for(var ke=[1];2*ke[ke.length-1]<=a;)ke.push(2*ke[ke.length-1]);var ot=ke.length,Qe=ke[ot-1];function Fe(m){return Math.abs(m)<=a}f.prototype.shiftLeft=function(m){var u=X(m).toJSNumber();if(!Fe(u))throw new Error(String(u)+" is too large for shifting.");if(u<0)return this.shiftRight(-u);var M=this;if(M.isZero())return M;for(;u>=ot;)M=M.multiply(Qe),u-=ot-1;return M.multiply(ke[u])},g.prototype.shiftLeft=c.prototype.shiftLeft=f.prototype.shiftLeft,f.prototype.shiftRight=function(m){var u,M=X(m).toJSNumber();if(!Fe(M))throw new Error(String(M)+" is too large for shifting.");if(M<0)return this.shiftLeft(-M);for(var b=this;M>=ot;){if(b.isZero()||b.isNegative()&&b.isUnit())return b;u=Ne(b,Qe),b=u[1].isNegative()?u[0].prev():u[0],M-=ot-1}return u=Ne(b,ke[M]),u[1].isNegative()?u[0].prev():u[0]},g.prototype.shiftRight=c.prototype.shiftRight=f.prototype.shiftRight;function nt(m,u,M){u=X(u);for(var b=m.isNegative(),F=u.isNegative(),I=b?m.not():m,B=F?u.not():u,x=0,G=0,ee=null,de=null,se=[];!I.isZero()||!B.isZero();)ee=Ne(I,Qe),x=ee[1].toJSNumber(),b&&(x=Qe-1-x),de=Ne(B,Qe),G=de[1].toJSNumber(),F&&(G=Qe-1-G),I=ee[0],B=de[0],se.push(M(x,G));for(var me=M(b?1:0,F?1:0)!==0?e(-1):e(0),et=se.length-1;et>=0;et-=1)me=me.multiply(Qe).add(e(se[et]));return me}f.prototype.not=function(){return this.negate().prev()},g.prototype.not=c.prototype.not=f.prototype.not,f.prototype.and=function(m){return nt(this,m,function(u,M){return u&M})},g.prototype.and=c.prototype.and=f.prototype.and,f.prototype.or=function(m){return nt(this,m,function(u,M){return u|M})},g.prototype.or=c.prototype.or=f.prototype.or,f.prototype.xor=function(m){return nt(this,m,function(u,M){return u^M})},g.prototype.xor=c.prototype.xor=f.prototype.xor;var Xe=1<<30,ht=(a&-a)*(a&-a)|Xe;function Ge(m){var u=m.value,M=typeof u=="number"?u|Xe:typeof u=="bigint"?u|BigInt(Xe):u[0]+u[1]*a|ht;return M&-M}function Oe(m,u){if(u.compareTo(m)<=0){var M=Oe(m,u.square(u)),b=M.p,F=M.e,I=b.multiply(u);return I.compareTo(m)<=0?{p:I,e:F*2+1}:{p:b,e:F*2}}return{p:e(1),e:0}}f.prototype.bitLength=function(){var m=this;return m.compareTo(e(0))<0&&(m=m.negate().subtract(e(1))),m.compareTo(e(0))===0?e(0):e(Oe(m,e(2)).e).add(e(1))},g.prototype.bitLength=c.prototype.bitLength=f.prototype.bitLength;function ut(m,u){return m=X(m),u=X(u),m.greater(u)?m:u}function Tt(m,u){return m=X(m),u=X(u),m.lesser(u)?m:u}function la(m,u){if(m=X(m).abs(),u=X(u).abs(),m.equals(u))return m;if(m.isZero())return u;if(u.isZero())return m;for(var M=d[1],b,F;m.isEven()&&u.isEven();)b=Tt(Ge(m),Ge(u)),m=m.divide(b),u=u.divide(b),M=M.multiply(b);for(;m.isEven();)m=m.divide(Ge(m));do{for(;u.isEven();)u=u.divide(Ge(u));m.greater(u)&&(F=u,u=m,m=F),u=u.subtract(m)}while(!u.isZero());return M.isUnit()?m:m.multiply(M)}function ga(m,u){return m=X(m).abs(),u=X(u).abs(),m.divide(la(m,u)).multiply(u)}function Rt(m,u,M){m=X(m),u=X(u);var b=M||Math.random,F=Tt(m,u),I=ut(m,u),B=I.subtract(F).add(1);if(B.isSmall)return F.add(Math.floor(b()*B));for(var x=Dt(B,a).value,G=[],ee=!0,de=0;de<x.length;de++){var se=ee?x[de]+(de+1<x.length?x[de+1]/a:0):a,me=k(b()*se);G.push(me),me<x[de]&&(ee=!1)}return F.add(d.fromArray(G,a,!1))}var Ra=function(m,u,M,b){M=M||o,m=String(m),b||(m=m.toLowerCase(),M=M.toLowerCase());var F=m.length,I,B=Math.abs(u),x={};for(I=0;I<M.length;I++)x[M[I]]=I;for(I=0;I<F;I++){var G=m[I];if(G!=="-"&&G in x&&x[G]>=B){if(G==="1"&&B===1)continue;throw new Error(G+" is not a valid digit in base "+u+".")}}u=X(u);var ee=[],de=m[0]==="-";for(I=de?1:0;I<m.length;I++){var G=m[I];if(G in x)ee.push(X(x[G]));else if(G==="<"){var se=I;do I++;while(m[I]!==">"&&I<m.length);ee.push(X(m.slice(se+1,I)))}else throw new Error(G+" is not a valid character")}return ma(ee,u,de)};function ma(m,u,M){var b=d[0],F=d[1],I;for(I=m.length-1;I>=0;I--)b=b.add(m[I].times(F)),F=F.times(u);return M?b.negate():b}function Ba(m,u){return u=u||o,m<u.length?u[m]:"<"+m+">"}function Dt(m,u){if(u=e(u),u.isZero()){if(m.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(u.equals(-1)){if(m.isZero())return{value:[0],isNegative:!1};if(m.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-m.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var M=Array.apply(null,Array(m.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return M.unshift([1]),{value:[].concat.apply([],M),isNegative:!1}}var b=!1;if(m.isNegative()&&u.isPositive()&&(b=!0,m=m.abs()),u.isUnit())return m.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(m.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:b};for(var F=[],I=m,B;I.isNegative()||I.compareAbs(u)>=0;){B=I.divmod(u),I=B.quotient;var x=B.remainder;x.isNegative()&&(x=u.minus(x).abs(),I=I.next()),F.push(x.toJSNumber())}return F.push(I.toJSNumber()),{value:F.reverse(),isNegative:b}}function ha(m,u,M){var b=Dt(m,u);return(b.isNegative?"-":"")+b.value.map(function(F){return Ba(F,M)}).join("")}f.prototype.toArray=function(m){return Dt(this,m)},c.prototype.toArray=function(m){return Dt(this,m)},g.prototype.toArray=function(m){return Dt(this,m)},f.prototype.toString=function(m,u){if(m===t&&(m=10),m!==10)return ha(this,m,u);for(var M=this.value,b=M.length,F=String(M[--b]),I="0000000",B;--b>=0;)B=String(M[b]),F+=I.slice(B.length)+B;var x=this.sign?"-":"";return x+F},c.prototype.toString=function(m,u){return m===t&&(m=10),m!=10?ha(this,m,u):String(this.value)},g.prototype.toString=c.prototype.toString,g.prototype.toJSON=f.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},f.prototype.valueOf=function(){return parseInt(this.toString(),10)},f.prototype.toJSNumber=f.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,g.prototype.valueOf=g.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function ua(m){if(h(+m)){var u=+m;if(u===k(u))return p?new g(BigInt(u)):new c(u);throw new Error("Invalid integer: "+m)}var M=m[0]==="-";M&&(m=m.slice(1));var b=m.split(/e/i);if(b.length>2)throw new Error("Invalid integer: "+b.join("e"));if(b.length===2){var F=b[1];if(F[0]==="+"&&(F=F.slice(1)),F=+F,F!==k(F)||!h(F))throw new Error("Invalid integer: "+F+" is not a valid exponent.");var I=b[0],B=I.indexOf(".");if(B>=0&&(F-=I.length-B-1,I=I.slice(0,B)+I.slice(B+1)),F<0)throw new Error("Cannot include negative exponent part for integers");I+=new Array(F+1).join("0"),m=I}var x=/^([0-9][0-9]*)$/.test(m);if(!x)throw new Error("Invalid integer: "+m);if(p)return new g(BigInt(M?"-"+m:m));for(var G=[],ee=m.length,de=s,se=ee-de;ee>0;)G.push(+m.slice(se,ee)),se-=de,se<0&&(se=0),ee-=de;return D(G),new f(G,M)}function ya(m){if(p)return new g(BigInt(m));if(h(m)){if(m!==k(m))throw new Error(m+" is not an integer.");return new c(m)}return ua(m.toString())}function X(m){return typeof m=="number"?ya(m):typeof m=="string"?ua(m):typeof m=="bigint"?new g(m):m}for(var It=0;It<1e3;It++)d[It]=X(It),It>0&&(d[-It]=X(-It));return d.one=d[1],d.zero=d[0],d.minusOne=d[-1],d.max=ut,d.min=Tt,d.gcd=la,d.lcm=ga,d.isInstance=function(m){return m instanceof f||m instanceof c||m instanceof g},d.randBetween=Rt,d.fromArray=function(m,u,M){return ma(m.map(X),X(u||10),M)},d}();r.hasOwnProperty("exports")&&(r.exports=e)})(op);function Os(r){return r>>>0}function qn(r,e){return r=Os(r),e=Os(e),Ve(r).shiftLeft(32).add(Ve(e))}const pp=Ve(Number.MAX_SAFE_INTEGER),Ms=Ve(Ve[2]).pow(64),dp=Ms.divide(Ve[2]);function Vs(r,e=256){return Ve.fromArray(r instanceof Uint8Array?[...r]:r,e)}function fp(r){return new Uint8Array(r.toArray(256).value)}function cp(r){return r.greater(dp)?r.minus(Ms):r}function lp(r){return r.isNegative()?Ms.add(r):r}const Gn=+st.API.constructors.find(r=>r.predicate==="boolFalse").id,jn=+st.API.constructors.find(r=>r.predicate==="boolTrue").id,Hn=+st.API.constructors.find(r=>r.predicate==="vector").id,gp=+st.MTProto.constructors.find(r=>r.predicate==="gzip_packed").id,Ka="slice";class Ze{constructor(e={}){this.maxLength=2048,this.offset=0,this.mtproto=!1,this.debug=!1,this.maxLength=e.startMaxLength||2048,this.mtproto=e.mtproto||!1,this.createBuffer()}createBuffer(){this.buffer=new ArrayBuffer(this.maxLength),this.intView=new Int32Array(this.buffer),this.byteView=new Uint8Array(this.buffer)}getArray(){const e=new ArrayBuffer(this.offset),t=new Int32Array(e);return t.set(this.intView.subarray(0,this.offset/4)),t}getBuffer(){return this.getArray().buffer}getBytes(e=!0){if(e){const a=new ArrayBuffer(this.offset),s=new Uint8Array(a);return s.set(this.byteView.subarray(0,this.offset)),s}const t=new Array(this.offset);for(let a=0;a<this.offset;++a)t[a]=this.byteView[a];return t}getOffset(){return this.offset}checkLength(e){if(this.offset+e<this.maxLength)return;this.maxLength=Math.ceil(Math.max(this.maxLength*2,this.offset+e+16)/4)*4;const t=this.buffer,a=new Int32Array(t);this.createBuffer(),new Int32Array(this.buffer).set(a)}writeInt(e,t){this.debug&&console.log(">>>",e.toString(16),e,t);const a=this.offset/4;return this.checkLength(4),this.intView[a]=e,this.offset+=4,a}storeInt(e,t){return this.writeInt(e,(t||"")+":int")}storeBool(e,t){e?this.writeInt(jn,(t||"")+":bool"):this.writeInt(Gn,(t||"")+":bool")}storeLongP(e,t,a){this.writeInt(t,(a||"")+":long[low]"),this.writeInt(e,(a||"")+":long[high]")}storeLong(e,t){if(Array.isArray(e))return e.length===2?this.storeLongP(e[0],e[1],t):this.storeIntBytes(e,64,t);const a=lp(Ve(e)),{quotient:s,remainder:n}=a.divmod(4294967296),i=s.toJSNumber(),o=n.toJSNumber();this.writeInt(o,(t||"")+":long[low]"),this.writeInt(i,(t||"")+":long[high]")}storeDouble(e,t){const a=new ArrayBuffer(8),s=new Int32Array(a),n=new Float64Array(a);n[0]=e,this.writeInt(s[0],(t||"")+":double[low]"),this.writeInt(s[1],(t||"")+":double[high]")}storeString(e,t){this.debug&&console.log(">>>",e,(t||"")+":string"),e===void 0&&(e="");const a=unescape(encodeURIComponent(e));this.checkLength(a.length+8);const s=a.length;s<=253?this.byteView[this.offset++]=s:(this.byteView[this.offset++]=254,this.byteView[this.offset++]=s&255,this.byteView[this.offset++]=(s&65280)>>8,this.byteView[this.offset++]=(s&16711680)>>16);for(let n=0;n<s;++n)this.byteView[this.offset++]=a.charCodeAt(n);for(;this.offset%4;)this.byteView[this.offset++]=0}storeBytes(e,t){e instanceof ArrayBuffer?e=new Uint8Array(e):e===void 0&&(e=[]),this.debug&&console.log(">>>",Ce(e),(t||"")+":bytes");const a=e.length;for(this.checkLength(a+8),a<=253?this.byteView[this.offset++]=a:(this.byteView[this.offset++]=254,this.byteView[this.offset++]=a&255,this.byteView[this.offset++]=(a&65280)>>8,this.byteView[this.offset++]=(a&16711680)>>16),this.byteView.set(e,this.offset),this.offset+=a;this.offset%4;)this.byteView[this.offset++]=0}storeIntBytes(e,t,a){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const s=e.length;if(t%32||s*8!==t){const n=new Error("Invalid bits: "+t+", "+s);throw console.error(n,e,a),n}this.debug&&console.log(">>>",Ce(e),(a||"")+":int"+t),this.checkLength(s),this.byteView.set(e,this.offset),this.offset+=s}storeRawBytes(e,t){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const a=e.length;this.debug&&console.log(">>>",Ce(e),t||""),this.checkLength(a),this.byteView.set(e,this.offset),this.offset+=a}storeMethod(e,t){const s=(this.mtproto?st.MTProto:st.API).methods.find(n=>n.method===e);if(!s)throw new Error("No method "+e+" found");return this.storeInt(s.id,e+"[id]"),this.storeBody(t,s,e),s.type}storeObject(e,t,a){switch(t){case"#":e||(e=0);case"int":return this.storeInt(e,a);case"long":return this.storeLong(e,a);case"int128":return this.storeIntBytes(e,128,a);case"int256":return this.storeIntBytes(e,256,a);case"int512":return this.storeIntBytes(e,512,a);case"string":return this.storeString(e,a);case"bytes":return this.storeBytes(e,a);case"double":return this.storeDouble(e,a);case"Bool":return this.storeBool(e,a);case"true":return}if(Array.isArray(e)){if(t.substr(0,6)==="Vector")this.writeInt(Hn,a+"[id]");else if(t.substr(0,6)!=="vector")throw new Error("Invalid vector type "+t);const p=t.substr(7,t.length-8);this.writeInt(e.length,a+"[count]");for(let d=0;d<e.length;++d)this.storeObject(e[d],p,a+"["+d+"]");return!0}else if(t.substr(0,6).toLowerCase()==="vector")throw new Error("Invalid vector object");if(!$e(e))throw new Error("Invalid object for type "+t);const s=this.mtproto?st.MTProto:st.API,n=e._;let i=!1;const o=s.constructors.find(p=>p.predicate===n);if((i=t.charAt(0)==="%")&&(t=t.substr(1)),!o)throw new Error("No predicate "+n+" found");return n===t&&(i=!0),i||this.writeInt(o.id,a+"["+n+"][id]"),this.storeBody(e,o,a+"["+n+"]"),o.type}storeBody(e,t,a){const s=e.pFlags||e;let n;for(const i of t.params){let o=i.type;if(o.indexOf("?")!==-1){const f=o.split("?"),c=f[0].split(".");if(f[1]==="true"?s?.[i.name]:e[i.name]!==void 0)n[c[0]].flags|=1<<+c[1];else continue;o=f[1]}const p=o==="#";p&&((n??(n={}))[i.name]={flags:0});const d=this.storeObject(p?n[i.name].flags:e[i.name],o,a+"["+i.name+"]");p&&(n[i.name].offset=d)}for(const i in n){const{flags:o,offset:p}=n[i];this.intView[p]=o}}}class Et{constructor(e,t={}){this.offset=0,this.mtproto=!1,e instanceof ArrayBuffer?(this.buffer=e,this.intView=new Int32Array(e),this.byteView=new Uint8Array(this.buffer)):(this.buffer=e.buffer,this.intView=new Int32Array(e.buffer),this.byteView=e),this.override=t.override||{},this.mtproto=!!t.mtproto,this.debug=t.debug!==void 0?t.debug:!1}readInt(e){if(this.byteView.length-this.offset<4)throw console.error(this.byteView,this.offset),new Error("Nothing to fetch: "+e);const t=this.intView[this.offset/4];return this.debug&&console.log("<<<",t.toString(16),t,e,this.byteView.slice(this.offset-16,this.offset+16),Ce(this.byteView.slice(this.offset-16,this.offset+16))),this.offset+=4,t}fetchInt(e){return this.readInt((e||"")+":int")}fetchDouble(e){const t=new ArrayBuffer(8),a=new Int32Array(t),s=new Float64Array(t);return a[0]=this.readInt((e||"")+":double[low]"),a[1]=this.readInt((e||"")+":double[high]"),s[0]}fetchLong(e){const t=this.readInt((e||"")+":long[low]"),a=this.readInt((e||"")+":long[high]");let s=qn(a,t);return this.mtproto||(s=cp(s)),!this.mtproto&&pp.greaterOrEquals(s.abs())?s.toJSNumber():s.toString(10)}fetchBool(e){const t=this.readInt((e||"")+":bool");return t===jn?!0:t===Gn?!1:(this.offset-=4,this.fetchObject("Object",e))}fetchString(e){let t=this.byteView[this.offset++];t===254&&(t=this.byteView[this.offset++]|this.byteView[this.offset++]<<8|this.byteView[this.offset++]<<16);let a="";for(let n=0;n<t;++n)a+=String.fromCharCode(this.byteView[this.offset++]);for(;this.offset%4;)++this.offset;let s;try{s=decodeURIComponent(escape(a))}catch{s=a}return this.debug&&console.log("<<<",s,(e||"")+":string"),s}fetchBytes(e){let t=this.byteView[this.offset++];t===254&&(t=this.byteView[this.offset++]|this.byteView[this.offset++]<<8|this.byteView[this.offset++]<<16);const a=this.byteView[Ka](this.offset,this.offset+t);for(this.offset+=t;this.offset%4;)++this.offset;return this.debug&&console.log("<<<",Ce(a),(e||"")+":bytes"),a}fetchIntBytes(e,t=!0,a){if(e%32)throw new Error("Invalid bits: "+e);const s=e/8;if(t){const i=this.byteView[Ka](this.offset,this.offset+s);return this.offset+=s,i}const n=new Array(s);for(let i=0;i<s;++i)n[i]=this.byteView[this.offset++];return this.debug&&console.log("<<<",Ce(n),(a||"")+":int"+e),n}fetchRawBytes(e,t=!0,a){if(e===!1&&(e=this.readInt((a||"")+"_length"),e>this.byteView.byteLength))throw new Error("Invalid raw bytes length: "+e+", buffer len: "+this.byteView.byteLength);if(t){const n=new Uint8Array(e);return n.set(this.byteView[Ka](this.offset,this.offset+e)),this.offset+=e,n}const s=new Array(e);for(let n=0;n<e;++n)s[n]=this.byteView[this.offset++];return this.debug&&console.log("<<<",Ce(s),a||""),s}fetchVector(e,t){const a=this.readInt(t+"[count]"),s=new Array(a);if(a>0){const n=e.substr(7,e.length-8);for(let i=0;i<a;++i)s[i]=this.fetchObject(n,t+"["+i+"]")}return s}fetchObject(e,t){switch(e){case"#":case"int":return this.fetchInt(t);case"long":return this.fetchLong(t);case"int128":return this.fetchIntBytes(128,!0,t);case"int256":return this.fetchIntBytes(256,!0,t);case"int512":return this.fetchIntBytes(512,!0,t);case"string":return this.fetchString(t);case"bytes":return this.fetchBytes(t);case"double":return this.fetchDouble(t);case"Bool":return this.fetchBool(t);case"true":return!0}if(t=t||e||"Object",e.charAt(0)==="v"&&e.substr(1,5)==="ector")return this.fetchVector(e,t);const a=this.mtproto?st.MTProto:st.API;let s=null,n=!1;if(e.charAt(0)==="%"){const d=e.substr(1);if(s=a.constructors.find(f=>f.type===d),!s)throw new Error("Constructor not found for type: "+e)}else{const d=this.readInt(t+"[id]");if(d===gp){const g=this.fetchBytes(t+"[packed_string]"),h=rp(g);return new Et(h).fetchObject(e,t)}if(d===Hn)return this.fetchVector(e,t);let f=a.constructorsIndex;if(!f){a.constructorsIndex=f={};for(let g=0,h=a.constructors.length;g<h;++g)f[a.constructors[g].id]=g}const c=f[d];if(c!==void 0&&(s=a.constructors[c]),!s&&this.mtproto){const g=st.API;for(let h=0,y=g.constructors.length;h<y;++h)if(+g.constructors[h].id===d){s=g.constructors[h],delete this.mtproto,n=!0;break}}if(!s){console.error("Constructor not found:",d);let g,h;try{g=this.fetchInt(t),h=this.fetchInt(t)}catch{}throw new Error("Constructor not found: "+d+" "+g+" "+h+" "+t)}}const i=s.predicate,o={_:i},p=(this.mtproto?"mt_":"")+i;if(this.override[p])this.override[p](o,t+"["+i+"]");else{let d={};for(let f=0,c=s.params.length;f<c;++f){const g=s.params[f];let h=g.type;const y=h==="#";y&&(o.pFlags??(o.pFlags={}),(d??(d={}))[g.name]=0);const P=h.indexOf("?")!==-1;if(P){const v=h.split("?"),k=v[0].split(".");if(!(d[k[0]]&1<<+k[1]))continue;h=v[1]}const D=this.fetchObject(h,t+"["+i+"]["+g.name+"]");P&&h==="true"?o.pFlags[g.name]=D:(y?d:o)[g.name]=D}}return n&&(this.mtproto=!0),e==="JSONValue"?this.formatJSONValue(o):o}formatJSONValue(e){if(!e._)return e;switch(e._){case"jsonNull":return null;case"jsonObject":{const t={},a=e.value;for(let s=0,n=a.length;s<n;++s){const i=a[s];t[i.key]=this.formatJSONValue(i.value)}return t}default:return e.value}}getOffset(){return this.offset}setOffset(e){this.offset=e}}be.TLDeserialization=Et;be.TLSerialization=Ze;function is(r,e=16,t,a=!1,s=!1){const n=r.byteLength||r.length,i=a?e-n:e-n%e;if(i>0&&i<e){const o=new Uint8Array(i);if(t)for(let p=0;p<i;++p)o[p]=0;else St(o);return r instanceof ArrayBuffer?(s?xt(o,r):xt(r,o)).buffer:r instanceof Uint8Array?s?xt(o,r):xt(r,o):s?[...o].concat(r):r.concat([...o])}return r}function mp(r){const e=fp(Ve(r)).reverse();return is(e,8,!0,!1,!1)}function Ke(r,e){const t=r.length;if(t!==e.length)return!1;for(let a=0;a<t;++a)if(r[a]!==e[a])return!1;return!0}function Ns(r){return r instanceof Uint8Array?r:typeof r=="string"?new TextEncoder().encode(r):new Uint8Array(r)}function hp(r){return r.map(e=>Ve(e)).sort((e,t)=>e.compare(t)).map(e=>e.toString(10))}const up=1e4,qs={client:{disconnectDelayMin:7,disconnectDelayMax:20,pingInterval:2e3,pingMaxTime:5,connectionTimeout:5e3},file:{disconnectDelayMin:10,disconnectDelayMax:24,pingInterval:3e3,pingMaxTime:7,connectionTimeout:7500}},yp={noSchedule:!0,notContentRelated:!0};let Sa,_p=0;class Mp{constructor(e,t,a,s,n,i,o={}){this.networkerFactory=e,this.timeManager=t,this.dcId=a,this.authKey=s,this.authKeyId=n,this.lastServerMessages=[],this.sentMessages={},this.pendingMessages={},this.pendingAcks=[],this.pendingResendReq=[],this.nextReq=0,this.checkConnectionPeriod=0,this.offline=!1,this.isOnline=!1,this.status=it.Closed,this.lastResponseTime=0,this.debug=Ae||Ee.debug,this.activeRequests=0,this.sendPingDelayDisconnect=()=>{if(this.pingDelayDisconnectDeferred||!this.transport||!this.transport.connected)return;const d=this.pingDelayDisconnectDeferred=Me(),f=this.delays,c=this.delays.pingMaxTime,g=Math.min(this.lastPingTime??0,c),h=Math.round(f.disconnectDelayMin+g/c*(f.disconnectDelayMax-f.disconnectDelayMin)),y=h*1e3,P=this.lastPingStartTime=Date.now(),D=this.lastPingDelayDisconnectId=Vt(),v={notContentRelated:!0};this.wrapMtpCall("ping_delay_disconnect",{ping_id:D,disconnect_delay:h},v);const k=this.log.bindPrefix("sendPingDelayDisconnect");this.debug&&k.debug(`ping, timeout=${y}, lastPingTime=${this.lastPingTime}, msgId=${v.messageId}, pingId=${D}`);const L=Pe.setTimeout(d.reject,y),w=J=>{clearTimeout(L);const Y=Date.now()-P;if(this.lastPingTime=Y/1e3,this.debug&&k.debug(`pong, reason='${J}', time=${g}, msgId=${v.messageId}`),Y>y)throw void 0;return ft(Math.max(0,this.delays.pingInterval-Y))},R=()=>{clearTimeout(L);const J=this.transport;this.pingDelayDisconnectDeferred!==d||!J?.connection||(k.error("catch, closing connection",this.lastPingTime,v.messageId),J.connection.close())},q=()=>{this.pingDelayDisconnectDeferred===d&&(this.pingDelayDisconnectDeferred=void 0,this.sendPingDelayDisconnect())};d.then(w).catch(R).finally(q)},this.checkLongPoll=()=>{const d=this.cleanupSent();if(this.longPollPending&&Date.now()<this.longPollPending||this.offline||this.isStopped()||this.isFileNetworker)return!1;Je.get("dc").then(f=>{d&&(f!==this.dcId||this.sleepAfter&&Date.now()>this.sleepAfter)||this.sendLongPoll()})},this.checkConnection=d=>{if(this.debug&&this.log("Check connection",d),this.clearCheckConnectionTimeout(),!this.transport){this.log.warn("No transport for checkConnection");return}const f=new Ze({mtproto:!0}),c=Vt();f.storeMethod("ping",{ping_id:c});const g={msg_id:this.timeManager.generateId(),seq_no:this.generateSeqNo(!0),body:f.getBytes(!0)};this.offline&&this.setConnectionStatus(it.Connecting),this.sendEncryptedRequest(g).then(()=>{this.toggleOffline(!1)},()=>{this.debug&&this.log("Delay",this.checkConnectionPeriod*1e3),this.checkConnectionTimeout=Pe.setTimeout(()=>this.checkConnection("from failed checkConnection request"),this.checkConnectionPeriod*1e3|0),this.checkConnectionPeriod=Math.min(60,this.checkConnectionPeriod*1.5)})},this.authKeyUint8=Ns(this.authKey),this.serverSalt=Ns(i),this.isFileUpload=!!o.fileUpload,this.isFileDownload=!!o.fileDownload,this.isFileNetworker=this.isFileUpload||this.isFileDownload,this.delays=this.isFileNetworker?qs.file:qs.client;const p=this.isFileUpload?"-U":this.isFileDownload?"-D":"";this.name="NET-"+a+p,this.log=Le(this.name+(p?"":"-C")+"-"+_p++,De.Log|De.Error|De.Warn),this.log("constructor"),this.updateSession()}updateSession(){this.seqNo=0,this.prevSessionId=this.sessionId,this.sessionId=St(new Uint8Array(8))}updateSentMessage(e){const t=this.sentMessages[e];return t?(t.container&&bt(t.inner,(a,s)=>{const n=this.updateSentMessage(a);n?t.inner[s]=n.msg_id:t.inner.splice(s,1)}),t.msg_id=this.timeManager.generateId(),t.seq_no=this.generateSeqNo(t.notContentRelated||t.container),this.debug&&this.log(`updateSentMessage, old=${e}, new=${t.msg_id}`),this.sentMessages[t.msg_id]=t,delete this.sentMessages[e],t):!1}generateSeqNo(e){let t=this.seqNo*2;return e||(t++,this.seqNo++),t}wrapMtpCall(e,t,a){const s=new Ze({mtproto:!0});s.storeMethod(e,t);const n=this.timeManager.generateId(),i=this.generateSeqNo(),o={msg_id:n,seq_no:i,body:s.getBytes(!0)};return Ee.debug&&this.log("MT call",e,t,n,i),this.pushMessage(o,a)}wrapMtpMessage(e,t){const a=new Ze({mtproto:!0});a.storeObject(e,"Object");const s=this.timeManager.generateId(),n=this.generateSeqNo(t.notContentRelated),i={msg_id:s,seq_no:n,body:a.getBytes(!0)};return Ee.debug&&this.log("MT message",e,s,n),this.pushMessage(i,t)}wrapApiCall(e,t={},a={}){const s=new Ze(a);if(!this.connectionInited){const p=st.API.methods.find(f=>f.method==="invokeWithLayer");if(!p)throw new Error("no invokeWithLayer!");s.storeInt(+p.id,"invokeWithLayer"),s.storeInt(st.layer,"layer");const d=st.API.methods.find(f=>f.method==="initConnection");if(!d)throw new Error("no initConnection!");s.storeInt(+d.id,"initConnection"),s.storeInt(0,"flags"),s.storeInt(Te.id,"api_id"),s.storeString(dt().USER_AGENT||"Unknown UserAgent","device_model"),s.storeString(navigator.platform||"Unknown Platform","system_version"),s.storeString(Te.version+(Te.isMainDomain?" "+Te.suffix:""),"app_version"),s.storeString(navigator.language||"en","system_lang_code"),s.storeString(Te.langPack,"lang_pack"),s.storeString(this.networkerFactory.language,"lang_code")}if(a.afterMessageId){if(Sa===void 0){const p=st.API.methods.find(d=>d.method==="invokeAfterMsg");Sa=p?+p.id:0}Sa?(s.storeInt(Sa,"invokeAfterMsg"),s.storeLong(a.afterMessageId,"msg_id")):this.log.error("no invokeAfterMsg!")}a.resultType=s.storeMethod(e,t);const n=this.timeManager.generateId(),i=this.generateSeqNo(),o={msg_id:n,seq_no:i,body:s.getBytes(!0),isAPI:!0};return Ee.debug?this.log("Api call",e,o,t,a):this.debug&&this.log("Api call",e,t,a),this.pushMessage(o,a)}changeTransport(e){const t=this.transport;t&&(t.destroy(),this.nextReqTimeout&&(clearTimeout(this.nextReqTimeout),this.nextReqTimeout=0,this.nextReq=0),this.connectionInited=!1,this.longPollInterval!==void 0&&(clearInterval(this.longPollInterval),this.longPollInterval=void 0),this.clearCheckConnectionTimeout()),this.log("change transport",e,t),this.clearPingDelayDisconnect(),this.transport=e,e&&(e.networker=this,e instanceof wt&&(this.longPollInterval=Pe.setInterval(this.checkLongPoll,1e4),this.checkLongPoll(),this.checkConnection("changed transport")),e.connection&&e.connected&&this.setConnectionStatus(it.Connected),this.resend())}destroy(){this.log("destroy")}forceReconnectTimeout(){this.transport.reconnect?this.transport.reconnect():this.resend()}forceReconnect(){this.transport.forceReconnect?this.transport.forceReconnect():this.checkConnection("force reconnect")}clearPingDelayDisconnect(){const e=this.pingDelayDisconnectDeferred;this.pingDelayDisconnectDeferred=void 0,this.lastPingDelayDisconnectId=void 0,e&&e.reject()}sendLongPoll(){if(this.sendingLongPoll)return;this.sendingLongPoll=!0;const e=25e3;this.longPollPending=Date.now()+e,this.debug&&this.log.debug("sendLongPoll",this.longPollPending),this.wrapMtpCall("http_wait",{max_delay:500,wait_after:150,max_wait:e},{noResponse:!0,longPoll:!0}).then(()=>{this.longPollPending=void 0,setTimeout(this.checkLongPoll,0)},t=>{this.log("Long-poll failed",t)}).finally(()=>{this.sendingLongPoll=void 0})}clearCheckConnectionTimeout(){this.checkConnectionTimeout!==void 0&&(clearTimeout(this.checkConnectionTimeout),this.checkConnectionTimeout=void 0)}toggleOffline(e){if(this.offline!==e)if(this.offline=e,this.clearCheckConnectionTimeout(),e){clearTimeout(this.nextReqTimeout),this.nextReqTimeout=0,this.nextReq=0,this.checkConnectionPeriod<1.5&&(this.checkConnectionPeriod=0);const t=this.checkConnectionPeriod*1e3|0;this.checkConnectionRetryAt=Date.now()+t,this.setConnectionStatus(it.Closed,this.checkConnectionRetryAt),this.checkConnectionTimeout=Pe.setTimeout(()=>this.checkConnection("from toggleOfline"),t),this.checkConnectionPeriod=Math.min(30,(1+this.checkConnectionPeriod)*1.5)}else this.setConnectionStatus(it.Connected),this.checkLongPoll(),this.scheduleRequest();this.setConnectionStatus(e?it.Closed:it.Connected,e?this.checkConnectionRetryAt:void 0)}handleSentEncryptedRequestHTTP(e,t,a){e.then(s=>(this.toggleOffline(!1),this.parseResponse(s).then(n=>(this.debug&&this.log.debug("Server response",n),this.processMessage(n.response,n.messageId,n.sessionId),this.checkLongPoll(),this.checkConnectionPeriod=Math.max(1.1,Math.sqrt(this.checkConnectionPeriod)),!0))),s=>(this.log.error("Encrypted request failed",s,t),this.pushResend(t.msg_id),this.toggleOffline(!0),!1)).then(s=>{const n=this.sentMessages;a.forEach(i=>{const o=n[i];if(o){const p=o.deferred;delete n[i],delete this.pendingMessages[i],s?p.resolve():p.reject()}})})}pushMessage(e,t){let a;return(!t.notContentRelated||t.noResponse)&&(a=Me()),this.sentMessages[e.msg_id]=Object.assign(e,t,a?{deferred:a}:void 0),this.pendingMessages[e.msg_id]=0,t.noSchedule||this.scheduleRequest(),$e(t)&&(t.messageId=e.msg_id),a}attachPromise(e,t){const a=setTimeout(()=>{this.lastResponseTime&&Date.now()-this.lastResponseTime<this.delays.connectionTimeout||(this.log.error("timeout",t),this.isOnline&&this.setConnectionStatus(it.TimedOut))},this.delays.connectionTimeout);e.catch(xe).finally(()=>{clearTimeout(a),this.setConnectionStatus(it.Connected),--this.activeRequests,this.setDrainTimeout()}),++this.activeRequests,this.onDrainTimeout!==void 0&&(clearTimeout(this.onDrainTimeout),this.onDrainTimeout=void 0)}setDrainTimeout(){!this.activeRequests&&this.onDrain&&this.onDrainTimeout===void 0&&(this.onDrainTimeout=Pe.setTimeout(()=>{this.onDrainTimeout=void 0,this.log("drain"),this.onDrain()},up))}setConnectionStatus(e,t){const a=e===it.Connected,s=this.status!==e;this.isOnline=a,this.status=e,s&&(this.networkerFactory.onConnectionStatusChange&&this.networkerFactory.onConnectionStatusChange({_:"networkerStatus",status:e,dcId:this.dcId,name:this.name,isFileNetworker:this.isFileNetworker,isFileDownload:this.isFileDownload,isFileUpload:this.isFileUpload,retryAt:t}),this.isOnline&&this.scheduleRequest(),this.transport?.connection&&(this.clearPingDelayDisconnect(),this.sendPingDelayDisconnect()))}pushResend(e,t=100){const a=t?Date.now()+t:0,s=this.sentMessages[e];if(s.container)for(const n of s.inner)this.pendingMessages[n]=a;else this.pendingMessages[e]=a;s.acked&&this.log.error("pushResend: acked message?",s),this.debug&&this.log.debug("pushResend:",e,s,this.pendingMessages,t),this.scheduleRequest(t)}async getMsgKey(e,t){const a=t?0:8,s=xt(this.authKeyUint8.subarray(88+a,88+a+32),e),n=await ge.invokeCrypto("sha256",s);return new Uint8Array(n).subarray(8,24)}getAesKeyIv(e,t){const a=t?0:8,s=new Uint8Array(52),n=new Uint8Array(52),i=[];return s.set(e,0),s.set(this.authKeyUint8.subarray(a,a+36),16),i.push(ge.invokeCrypto("sha256",s)),n.set(this.authKeyUint8.subarray(40+a,40+a+36),0),n.set(e,36),i.push(ge.invokeCrypto("sha256",n)),Promise.all(i).then(o=>{const p=new Uint8Array(32),d=new Uint8Array(32),f=new Uint8Array(o[0]),c=new Uint8Array(o[1]);return p.set(f.subarray(0,8)),p.set(c.subarray(8,24),8),p.set(f.subarray(24,32),24),d.set(c.subarray(0,8)),d.set(f.subarray(8,24),8),d.set(c.subarray(24,32),24),[p,d]})}isStopped(){return this.networkerFactory.akStopped&&!this.isFileNetworker}performScheduledRequest(){if(this.isStopped())return!1;if(this.pendingAcks.length){const c=this.pendingAcks.slice();this.wrapMtpMessage({_:"msgs_ack",msg_ids:c},{notContentRelated:!0,noSchedule:!0})}const e=this.pendingResendReq.length;if(e){const c={...yp},g=this.pendingResendReq.splice(0,e);this.wrapMtpMessage({_:"msg_resend_req",msg_ids:g},c),this.log("resend: resending requests",c.messageId,g)}let t;const a=[];let s=0,n,i;n=!1,i=!1;let o=!1;const p=hp(Object.keys(this.pendingMessages));for(const c of p){const g=this.sentMessages[c];if(g&&g.body){const h=g.body.length+32;if(s+h>655360&&(this.log.warn("lengthOverflow",g,a),o=!0,t))break;a.push(g),s+=h,g.isAPI?n=!0:g.longPoll&&(i=!0),t=g}delete this.pendingMessages[c]}if(this.transport instanceof wt&&n&&!i){const c=new Ze({mtproto:!0});c.storeMethod("http_wait",{max_delay:500,wait_after:150,max_wait:3e3}),a.push({msg_id:this.timeManager.generateId(),seq_no:this.generateSeqNo(),body:c.getBytes(!0)})}if(!a.length)return;let d;if(d=a.filter(c=>c.noResponse).map(c=>c.msg_id),a.length>1){const c=this.generateContainerMessage(s,a);t=c.messageWithBody,this.sentMessages[t.msg_id]=c.message}else this.sentMessages[t.msg_id]=t;this.pendingAcks=[];const f=this.sendEncryptedRequest(t);this.transport instanceof wt&&this.handleSentEncryptedRequestHTTP(f,t,d),this.transport instanceof wt||this.cleanupSent(),o&&this.scheduleRequest()}generateContainerMessage(e,t){const a=new Ze({mtproto:!0,startMaxLength:e+64});a.storeInt(1945237724,"CONTAINER[id]"),a.storeInt(t.length,"CONTAINER[count]");const s=[];t.forEach((i,o)=>{s.push(i.msg_id),a.storeLong(i.msg_id,"CONTAINER["+o+"][msg_id]"),a.storeInt(i.seq_no,"CONTAINER["+o+"][seq_no]"),a.storeInt(i.body.length,"CONTAINER["+o+"][bytes]"),a.storeRawBytes(i.body,"CONTAINER["+o+"][body]")});const n={msg_id:this.timeManager.generateId(),seq_no:this.generateSeqNo(!0),container:!0,inner:s};return Ee.debug&&this.log.warn("Container",s,n.msg_id,n.seq_no),{message:n,messageWithBody:Object.assign({body:a.getBytes(!0)},n)}}async getEncryptedMessage(e){const t=await this.getMsgKey(e,!0),a=await this.getAesKeyIv(t,!0);return{bytes:await ge.invokeCrypto("aes-encrypt",e,a[0],a[1]),msgKey:t}}getDecryptedMessage(e,t){return this.getAesKeyIv(e,!1).then(a=>ge.invokeCrypto("aes-decrypt",t,a[0],a[1]))}getEncryptedOutput(e){const t=new Ze({startMaxLength:e.body.length+2048});t.storeIntBytes(this.serverSalt,64,"salt"),t.storeIntBytes(this.sessionId,64,"session_id"),t.storeLong(e.msg_id,"message_id"),t.storeInt(e.seq_no,"seq_no"),t.storeInt(e.body.length,"message_data_length"),t.storeRawBytes(e.body,"message_data");const a=t.getBuffer(),s=16-t.getOffset()%16+16*(1+Zt(8)%5),n=St(new Uint8Array(s)),i=xt(a,n);return this.getEncryptedMessage(i).then(o=>{const p=new Ze({startMaxLength:o.bytes.length+256});return p.storeIntBytes(this.authKeyId,64,"auth_key_id"),p.storeIntBytes(o.msgKey,128,"msg_key"),p.storeRawBytes(o.bytes,"encrypted_data"),p.getBytes(!0)})}async sendEncryptedRequest(e){const t=await this.getEncryptedOutput(e);this.transport||this.log.error("trying to send something when offline",this.transport,this),this.debug&&this.log.debug("sending:",e,[e.msg_id].concat(e.inner||[]),t.length);const a=this.transport?this.transport.send(t):Promise.reject({});if(!(this.transport instanceof wt))return a;const s={code:406,type:"NETWORK_BAD_RESPONSE",transport:this.transport};return a.then(n=>{if(!n?.byteLength)throw s;return n},n=>{throw!n.message&&!n.type&&(n=Object.assign(s,{type:"NETWORK_BAD_REQUEST",originalError:n})),n})}parseResponse(e){this.lastResponseTime=Date.now();const t=new Et(e),a=t.fetchIntBytes(64,!0,"auth_key_id");if(!Ke(a,this.authKeyId))throw new Error("[MT] Invalid server auth_key_id: "+Ce(a));const s=t.fetchIntBytes(128,!0,"msg_key"),n=t.fetchRawBytes(e.byteLength-t.getOffset(),!0,"encrypted_data");return this.getDecryptedMessage(s,n).then(i=>this.getMsgKey(i,!1).then(o=>{if(!Ke(s,o))throw this.log.warn("[MT] msg_keys",s,o),this.updateSession(),new Error("[MT] server msgKey mismatch, updating session");let p=new Et(i,{mtproto:!0});p.fetchIntBytes(64,!0,"salt");const d=p.fetchIntBytes(64,!0,"session_id"),f=p.fetchLong("message_id");if(!Ke(d,this.sessionId)&&(!this.prevSessionId||!Ke(d,this.prevSessionId)))throw this.log.warn("Sessions",d,this.sessionId,this.prevSessionId,i),new Error("[MT] Invalid server session_id: "+Ce(d));const c=p.fetchInt("seq_no"),g=i.byteLength,h=p.fetchInt("message_data[length]");let y=p.getOffset();if(h%4||h>g-y)throw new Error("[MT] Invalid body length: "+h);const P=p.fetchRawBytes(h,!0,"message_data");y=p.getOffset();const D=g-y;if(D<12||D>1024)throw new Error("[MT] Invalid padding length: "+D);return p=new Et(P,{mtproto:!0,override:{mt_message:(k,L)=>{k.msg_id=p.fetchLong(L+"[msg_id]"),k.seqno=p.fetchInt(L+"[seqno]"),k.bytes=p.fetchInt(L+"[bytes]");const w=p.getOffset();try{k.body=p.fetchObject("Object",L+"[body]")}catch(R){this.log.error("parse error",R.message,R.stack),k.body={_:"parse_error",error:R}}p.getOffset()!==w+k.bytes&&p.setOffset(w+k.bytes)},mt_rpc_result:(k,L)=>{k.req_msg_id=p.fetchLong(L+"[req_msg_id]");const w=this.sentMessages[k.req_msg_id],R=w&&w.resultType||"Object";k.req_msg_id&&!w||(k.result=p.fetchObject(R,L+"[result]"))}}}),{response:p.fetchObject("","INPUT"),messageId:f,sessionId:d,seqNo:c}}))}applyServerSalt(e){const t=mp(e);Je.set({["dc"+this.dcId+"_server_salt"]:Ce(t)}),this.serverSalt=new Uint8Array(t)}scheduleRequest(e){this.transport instanceof wt&&(this.offline&&this.checkConnection("forced schedule"),e||(e=0));const t=Date.now()+(e||0);if(this.nextReq&&(e===void 0||this.nextReq<=t))return;this.nextReqTimeout&&clearTimeout(this.nextReqTimeout);const a=()=>{this.nextReqTimeout=0,this.nextReq=0,!(this.transport instanceof wt&&this.offline)&&this.performScheduledRequest()};this.nextReq=t,e!==void 0?this.nextReqTimeout=Pe.setTimeout(a,e):a()}ackMessage(e){this.pendingAcks.push(e);let t;this.transport instanceof wt&&(t=3e4),this.scheduleRequest(t)}reqResend(e){this.debug&&this.log.debug("Req resend",e),this.pendingResendReq.push(e),this.scheduleRequest(100)}cleanupSent(){let e=!1;const t=this.sentMessages;return Object.keys(t).forEach(a=>{const s=t[a];if(s.notContentRelated&&this.pendingMessages[a]===void 0)delete t[a];else if(s.container){for(const n of s.inner)if(t[n]!==void 0){e=!0;return}delete t[a]}else e=!0}),!e}processMessageAck(e){const t=this.sentMessages[e];t&&!t.acked&&(t.acked=!0)}processError(e){const t=(e.error_message||"").match(/^([A-Z_0-9]+\b)(: (.+))?/)||[];return e.error_code=e.error_code,{code:!e.error_code||e.error_code<=0?500:e.error_code,type:t[1]||"UNKNOWN",description:t[3]||"CODE#"+e.error_code+" "+e.error_message,originalError:e}}resend(){const e=this.sentMessages;for(const t in e){const a=e[t];(a.body||a.container)&&this.pushResend(t)}this.transport.connection&&(this.clearPingDelayDisconnect(),this.sendPingDelayDisconnect())}applyServerTime(e){const t=Ve(e).shiftRight(32).toJSNumber();return this.log("applying server time",t),this.timeManager.applyServerTime(t)}processMessage(e,t,a){if(e._==="messageEmpty"){this.log.warn("processMessage: messageEmpty",e,t);return}if(parseInt(t.substr(0,-10),10)%2){this.log.warn("Server even message id: ",t,e);return}switch(this.debug&&this.log.debug("process message",e,t),this.pingDelayDisconnectDeferred&&this.pingDelayDisconnectDeferred.resolve("any message"),e._){case"msg_container":{for(const n of e.messages)this.processMessage(n,n.msg_id,a);break}case"bad_server_salt":{this.log("Bad server salt",e),this.applyServerSalt(e.new_server_salt),this.sentMessages[e.bad_msg_id]&&this.pushResend(e.bad_msg_id),this.ackMessage(t);break}case"bad_msg_notification":{switch(this.log.error("Bad msg notification",e),e.error_code){case 16:case 17:case 32:case 33:case 64:{const n=this.applyServerTime(t);(e.error_code===17||n)&&(this.log("Update session"),this.updateSession());const i=this.updateSentMessage(e.bad_msg_id);i&&this.pushResend(i.msg_id)}}break}case"message":{if(this.lastServerMessages.indexOf(t)!==-1){this.ackMessage(t);return}this.lastServerMessages.push(t),this.lastServerMessages.length>100&&this.lastServerMessages.shift(),this.processMessage(e.body,e.msg_id,a);break}case"new_session_created":{this.ackMessage(t),this.debug&&this.log.debug("new_session_created",e),this.processMessageAck(e.first_msg_id),this.applyServerSalt(e.server_salt),Je.get("dc").then(n=>{n===this.dcId&&!this.isFileNetworker&&this.networkerFactory.updatesProcessor&&this.networkerFactory.updatesProcessor(e)});break}case"msgs_ack":{this.debug&&this.log("got acks",e.msg_ids);for(const n of e.msg_ids)this.processMessageAck(n);break}case"msg_detailed_info":if(!this.sentMessages[e.msg_id]){this.ackMessage(e.answer_msg_id);break}case"msg_new_detailed_info":{if(this.pendingAcks.indexOf(e.answer_msg_id)!==-1)break;this.reqResend(e.answer_msg_id);break}case"msgs_state_info":{this.ackMessage(e.answer_msg_id);const n=[[this.lastResendReq,this.pendingResendReq]];for(const[i,o]of n)if(i?.reqMsgId===e.req_msg_id&&o.length)for(const p of i.msgIds){const d=o.indexOf(p);d!==-1&&o.splice(d,1)}break}case"rpc_result":{this.ackMessage(t);const n=e.req_msg_id,i=this.sentMessages[n];if(this.debug&&this.log("Rpc response",e.result,i),this.processMessageAck(n),i){const o=i.deferred;if(e.result._==="rpc_error"){const p=this.processError(e.result);this.log("Rpc error",p),o&&o.reject(p)}else o&&o.resolve(e.result),i.isAPI&&!this.connectionInited&&(this.connectionInited=!0);delete this.sentMessages[n]}else this.debug&&this.log("Rpc result for unknown message:",n,e);break}case"pong":{const n=e.ping_id;if(this.lastPingDelayDisconnectId===n){const i=this.pingDelayDisconnectDeferred;i?i.resolve("pong"):this.log("ping deferred deleted",n)}break}default:this.ackMessage(t),this.networkerFactory.updatesProcessor!==null&&this.networkerFactory.updatesProcessor(e);break}}}class Pp extends ce{constructor(){super(...arguments),this.networkers=[],this.language=navigator.language||Te.langPackCode,this.updatesProcessor=null,this.akStopped=!1}onConnectionStatusChange(e){this.rootScope.dispatchEvent("connection_status_change",e)}removeNetworker(e){Ye(this.networkers,e)}setUpdatesProcessor(e){this.updatesProcessor=e}getNetworker(e,t,a,s,n){const i=new Mp(this,this.timeManager,e,t,a,s,n);return this.networkers.push(i),i}startAll(){if(this.akStopped){const e=this.networkers.filter(t=>t.isStopped());this.akStopped=!1,this.updatesProcessor&&this.updatesProcessor({_:"new_session_created"});for(const t of e)t.scheduleRequest()}}stopAll(){this.akStopped=!0}setLanguage(e){this.language=e;for(const t of this.networkers)t.isFileNetworker||(t.connectionInited=!1)}unsetConnectionInited(){for(const e of this.networkers)e.connectionInited=!1}forceReconnectTimeout(){for(const e of this.networkers)e.forceReconnectTimeout()}forceReconnect(){for(const e of this.networkers)if(!e.isFileNetworker){e.forceReconnect();break}}}class vp{constructor(){this.testPublicKeysHex=[{modulus:"c8c11d635691fac091dd9489aedced2932aa8a0bcefef05fa800892d9b52ed03200865c9e97211cb2ee6c7ae96d3fb0e15aeffd66019b44a08a240cfdd2868a85e1f54d6fa5deaa041f6941ddf302690d61dc476385c2fa655142353cb4e4b59f6e5b6584db76fe8b1370263246c010c93d011014113ebdf987d093f9d37c2be48352d69a1683f8f6e6c2167983c761e3ab169fde5daaa12123fa1beab621e4da5935e9c198f82f35eae583a99386d8110ea6bd1abb0f568759f62694419ea5f69847c43462abef858b4cb5edc84e7b9226cd7bd7e183aa974a712c079dde85b9dc063b8a5c08e8f859c0ee5dcd824c7807f20153361a7f63cfd2a433a1be7f5",exponent:"010001"}],this.publisKeysHex=[{modulus:"e8bb3305c0b52c6cf2afdf7637313489e63e05268e5badb601af417786472e5f93b85438968e20e6729a301c0afc121bf7151f834436f7fda680847a66bf64accec78ee21c0b316f0edafe2f41908da7bd1f4a5107638eeb67040ace472a14f90d9f7c2b7def99688ba3073adb5750bb02964902a359fe745d8170e36876d4fd8a5d41b2a76cbff9a13267eb9580b2d06d10357448d20d9da2191cb5d8c93982961cdfdeda629e37f1fb09a0722027696032fe61ed663db7a37f6f263d370f69db53a0dc0a1748bdaaff6209d5645485e6e001d1953255757e4b8e42813347b11da6ab500fd0ace7e6dfa3736199ccaf9397ed0745a427dcfa6cd67bcb1acff3",exponent:"010001"}],this.publicKeysParsed={},this.prepared=!1,this.preparePromise=null,Ee.test&&(this.publisKeysHex=this.testPublicKeysHex)}prepare(){return this.preparePromise?this.preparePromise:this.prepared?Promise.resolve():this.preparePromise=Promise.all(this.publisKeysHex.map(e=>{const t=new Ze;t.storeBytes(fa(e.modulus),"n"),t.storeBytes(fa(e.exponent),"e");const a=t.getBuffer();return ge.invokeCrypto("sha1",a).then(s=>{const n=s.slice(-8);n.reverse(),this.publicKeysParsed[Ce(n).toLowerCase()]={modulus:e.modulus,exponent:e.exponent}})})).then(()=>{this.prepared=!0,this.preparePromise=null})}async select(e){await this.prepare();for(let t=0;t<e.length;++t){let a=Ve(e[t]).toString(16).toLowerCase();a.length<16&&(a=new Array(16-a.length).fill("0").join("")+a);const s=this.publicKeysParsed[a];if(s)return Object.assign({fingerprint:e[t]},s)}}}var Gs=new vp;function js(r,e){const t=r.length,a=new Uint8Array(t);for(let s=0;s<t;++s)a[s]=r[s]^e[s];return a}class bp extends ce{constructor(){super(...arguments),this.getTransportType=()=>this.getTransportTypePromise?this.getTransportTypePromise:this.getTransportTypePromise=Kt.pingTransports().then(({websocket:e})=>{this.transportType=e?"websocket":"https",this.log("will use transport:",this.transportType)})}after(){this.cached={},this.log=Le("AUTHORIZER",De.Error|De.Log)}sendPlainRequest(e,t){const a=t.byteLength,s=new Ze;s.storeLongP(0,0,"auth_key_id"),s.storeLong(this.timeManager.generateId(),"msg_id"),s.storeInt(a,"request_length");const n=s.getBytes(!0),i=new Uint8Array(n.byteLength+a);i.set(n),i.set(t,n.length);const o=this.dcConfigurator.chooseServer(e,"client",this.transportType),p={code:406,type:"NETWORK_BAD_RESPONSE"};return Ae&&this.log("mtpSendPlainRequest: creating requestPromise"),o.send(i).then(f=>{if(Ae&&this.log("mtpSendPlainRequest: in good sector",f),!f||!f.byteLength)throw p;try{const c=new Et(f,{mtproto:!0});if(f.length===4){const P=c.fetchInt();throw this.log.error("mtpSendPlainRequest: wrong response, error code:",P),P}const g=c.fetchLong("auth_key_id");g!=="0"&&this.log.error("auth_key_id !== 0",g);const h=c.fetchLong("msg_id");h==="0"&&this.log.error("msg_id === 0",h);const y=c.fetchInt("msg_len");return y||this.log.error("no msg_len",y),c}catch(c){throw this.log.error("mtpSendPlainRequest: deserialization went bad",c),Object.assign(p,{originalError:c})}},f=>{throw!f.message&&!f.type&&(f=Object.assign(p,{originalError:f})),f})}async sendReqPQ(e){const t=new Ze({mtproto:!0});t.storeMethod("req_pq_multi",{nonce:e.nonce}),Ae&&this.log("Send req_pq",Ce(e.nonce));let a;try{const o=this.sendPlainRequest(e.dcId,t.getBytes(!0));Gs.prepare(),a=await o}catch(o){throw this.log.error("req_pq error",o.message),o}const s=a.fetchObject("ResPQ");if(s._!=="resPQ")throw new Error("[MT] resPQ response invalid: "+s._);if(!Ke(e.nonce,s.nonce))throw this.log.error(e.nonce,s.nonce),new Error("[MT] resPQ nonce mismatch");e.serverNonce=s.server_nonce,e.pq=s.pq,e.fingerprints=s.server_public_key_fingerprints,Ae&&this.log("Got ResPQ",Ce(e.serverNonce),Ce(e.pq),e.fingerprints);const n=await Gs.select(e.fingerprints);if(!n)throw new Error("[MT] No public key found");e.publicKey=n,Ae&&this.log("PQ factorization start",e.pq);try{var i=await ge.invokeCrypto("factorize",e.pq)}catch(o){throw this.log.error("worker error factorize",o),o}return e.p=i[0],e.q=i[1],Ae&&this.log("PQ factorization done",i),this.sendReqDhParams(e)}async sendReqDhParams(e){e.newNonce=St(new Uint8Array(32));const t={_:"p_q_inner_data_dc",pq:e.pq,p:e.p,q:e.q,nonce:e.nonce,server_nonce:e.serverNonce,new_nonce:e.newNonce,dc:0},a=new Ze({mtproto:!0});a.storeObject(t,"P_Q_inner_data","DECRYPTED_DATA");const s=a.getBytes(!0);if(s.length>144)throw"DH_params: data is more than 144 bytes!";const n=is(s,192,!1,!0,!1),i=n.slice().reverse(),p=await(async()=>{for(;;){const P=St(new Uint8Array(32)),D=i.concat(await ge.invokeCrypto("sha256",P.concat(n)));if(D.length!==224)throw"DH_params: dataWithHash !== 224 bytes!";const v=await ge.invokeCrypto("aes-encrypt",D,P,new Uint8Array([0])),L=js(P,await ge.invokeCrypto("sha256",v)).concat(v),w=Vs(L),R=Ve(e.publicKey.modulus,16);if(w.compare(R)===-1)return L}})(),d=is(await ge.invokeCrypto("rsa-encrypt",p,e.publicKey),256,!0,!0,!0),f={nonce:e.nonce,server_nonce:e.serverNonce,p:e.p,q:e.q,public_key_fingerprint:e.publicKey.fingerprint,encrypted_data:d},c=new Ze({mtproto:!0});c.storeMethod("req_DH_params",f);const g=c.getBytes(!0);Ae&&this.log("Send req_DH_params",f);let h;try{h=await this.sendPlainRequest(e.dcId,g)}catch(P){throw this.log.error("Send req_DH_params FAIL!",P),P}const y=h.fetchObject("Server_DH_Params","RESPONSE");if(Ae&&this.log("Sent req_DH_params, response:",y),y._!=="server_DH_params_fail"&&y._!=="server_DH_params_ok")throw new Error("[MT] Server_DH_Params response invalid: "+y._);if(!Ke(e.nonce,y.nonce))throw new Error("[MT] Server_DH_Params nonce mismatch");if(!Ke(e.serverNonce,y.server_nonce))throw new Error("[MT] Server_DH_Params server_nonce mismatch");if(y._==="server_DH_params_fail"){const P=(await ge.invokeCrypto("sha1",e.newNonce)).slice(-16);throw Ke(P,y.new_nonce_hash)?new Error("[MT] server_DH_params_fail"):new Error("[MT] server_DH_params_fail new_nonce_hash mismatch")}try{await this.decryptServerDhDataAnswer(e,y.encrypted_answer)}catch(P){throw this.log.error("mtpDecryptServerDhDataAnswer FAILED!",P),P}return this.sendSetClientDhParams(e)}async decryptServerDhDataAnswer(e,t){e.localTime=Date.now(),e.tmpAesKey=(await ge.invokeCrypto("sha1",e.newNonce.concat(e.serverNonce))).concat((await ge.invokeCrypto("sha1",e.serverNonce.concat(e.newNonce))).slice(0,12)),e.tmpAesIv=(await ge.invokeCrypto("sha1",e.serverNonce.concat(e.newNonce))).slice(12).concat(await ge.invokeCrypto("sha1",e.newNonce.concat(e.newNonce)),e.newNonce.slice(0,4));const a=new Uint8Array(await ge.invokeCrypto("aes-decrypt",t,e.tmpAesKey,e.tmpAesIv)),s=a.slice(0,20),n=a.slice(20),i=new Et(n,{mtproto:!0}),o=i.fetchObject("Server_DH_inner_data");if(o._!=="server_DH_inner_data")throw new Error("[MT] server_DH_inner_data response invalid: "+o);if(!Ke(e.nonce,o.nonce))throw new Error("[MT] server_DH_inner_data nonce mismatch");if(!Ke(e.serverNonce,o.server_nonce))throw new Error("[MT] server_DH_inner_data serverNonce mismatch");Ae&&this.log("Done decrypting answer"),e.g=o.g,e.dhPrime=o.dh_prime,e.gA=o.g_a,e.serverTime=o.server_time,e.retry=0,this.verifyDhParams(e.g,e.dhPrime,e.gA);const p=i.getOffset();if(!Ke(s,await ge.invokeCrypto("sha1",n.slice(0,p))))throw new Error("[MT] server_DH_inner_data SHA1 mismatch");this.timeManager.applyServerTime(e.serverTime,e.localTime)}verifyDhParams(e,t,a){Ae&&this.log("Verifying DH params",e,t,a);const s=Ce(t);if(e!==3||s!=="c71caeb9c6b1c9048e6c522f70f13f73980d40238e3e21c14934d037563d930f48198a0aa7c14058229493d22530f4dbfa336f6e0ac925139543aed44cce7c3720fd51f69458705ac68cd4fe6b6b13abdc9746512969328454f18faf8c595f642477fe96bb2a941d5bcd1d4ac8cc49880708fa9b378e3c4f3a9060bee67cf9a4a4a695811051907e162753b56b0f6b410dba74d8a84b2a14b3144e0ef1284754fd17ed950d5965b4b9dd46582db1178d169c6bc465b0d6ff9ca3928fef5b9ae4e418fc15e83ebea0f87fa9ff5eed70050ded2849f47bf959d956850ce929851f0d8115f635b105ee2e4e15d04b2454bf6f4fadf034b10403119cd8e3b92fcc5b")throw new Error("[MT] DH params are not verified: unknown dhPrime");Ae&&this.log("dhPrime cmp OK");const n=Vs(a),i=Ve(s,16);if(n.compare(Ve.one)<=0)throw new Error("[MT] DH params are not verified: gA <= 1");if(n.compare(i.subtract(Ve.one))>=0)throw new Error("[MT] DH params are not verified: gA >= dhPrime - 1");Ae&&this.log("1 < gA < dhPrime-1 OK");const o=Ve(2).pow(2048-64);if(n.compare(o)<0)throw new Error("[MT] DH params are not verified: gA < 2^{2048-64}");if(n.compare(i.subtract(o))>=0)throw new Error("[MT] DH params are not verified: gA > dhPrime - 2^{2048-64}");return Ae&&this.log("2^{2048-64} < gA < dhPrime-2^{2048-64} OK"),!0}async sendSetClientDhParams(e){const t=fa(e.g.toString(16));e.b=St(new Uint8Array(256));try{var a=await ge.invokeCrypto("mod-pow",t,e.b,e.dhPrime)}catch(y){throw y}const s=new Ze({mtproto:!0});s.storeObject({_:"client_DH_inner_data",nonce:e.nonce,server_nonce:e.serverNonce,retry_id:[0,e.retry++],g_b:a},"Client_DH_Inner_Data");const n=(await ge.invokeCrypto("sha1",s.getBuffer())).concat(s.getBytes(!0)),i=await ge.invokeCrypto("aes-encrypt",n,e.tmpAesKey,e.tmpAesIv),o=new Ze({mtproto:!0});o.storeMethod("set_client_DH_params",{nonce:e.nonce,server_nonce:e.serverNonce,encrypted_data:i}),Ae&&this.log("Send set_client_DH_params");let p;try{p=await this.sendPlainRequest(e.dcId,o.getBytes(!0))}catch(y){throw y}const d=p.fetchObject("Set_client_DH_params_answer");if(d._!=="dh_gen_ok"&&d._!=="dh_gen_retry"&&d._!=="dh_gen_fail")throw new Error("[MT] Set_client_DH_params_answer response invalid: "+d._);if(!Ke(e.nonce,d.nonce))throw new Error("[MT] Set_client_DH_params_answer nonce mismatch");if(!Ke(e.serverNonce,d.server_nonce))throw new Error("[MT] Set_client_DH_params_answer server_nonce mismatch");try{var f=await ge.invokeCrypto("mod-pow",e.gA,e.b,e.dhPrime)}catch{throw f}const c=await ge.invokeCrypto("sha1",f),g=c.slice(0,8),h=c.slice(-8);switch(Ae&&this.log("Got Set_client_DH_params_answer",d._,f),d._){case"dh_gen_ok":{const y=(await ge.invokeCrypto("sha1",e.newNonce.concat([1],g))).slice(-16);if(!Ke(y,d.new_nonce_hash1))throw this.log.error("Set_client_DH_params_answer new_nonce_hash1 mismatch",y,d),new Error("new_nonce_hash1 mismatch");const P=js(e.newNonce.slice(0,8),e.serverNonce.slice(0,8));return Ae&&this.log("Auth successfull!",h,f,P),e.authKeyId=h,e.authKey=f,e.serverSalt=P,e}case"dh_gen_retry":{const y=(await ge.invokeCrypto("sha1",e.newNonce.concat([2],g))).slice(-16);if(!Ke(y,d.new_nonce_hash2))throw new Error("[MT] Set_client_DH_params_answer new_nonce_hash2 mismatch");return this.sendSetClientDhParams(e)}case"dh_gen_fail":{const y=(await ge.invokeCrypto("sha1",e.newNonce.concat([3],g))).slice(-16);throw Ke(y,d.new_nonce_hash3)?new Error("[MT] Set_client_DH_params_answer fail"):new Error("[MT] Set_client_DH_params_answer new_nonce_hash3 mismatch")}}}auth(e){let t=this.cached[e];return t||(t=new Promise(async(a,s)=>{await this.getTransportType();let n,i=1;for(;i++<=3;)try{const o={dcId:e,nonce:St(new Uint8Array(16))},p=this.sendReqPQ(o);a(await p);return}catch(o){n=o}s(n)}),this.cached[e]=t)}}class Sp extends ce{after(){this.lastMessageId=[0,0],this.timeOffset=0,Je.get("server_time_offset").then(e=>{e&&(this.timeOffset=e)})}getServerTimeOffset(){return this.timeOffset}generateId(){const e=Date.now(),t=Math.floor(e/1e3)+this.timeOffset,a=e%1e3,s=Zt(16);let n=[t,a<<21|s<<3|4];return(this.lastMessageId[0]>n[0]||this.lastMessageId[0]===n[0]&&this.lastMessageId[1]>=n[1])&&(n=[this.lastMessageId[0],this.lastMessageId[1]+4]),this.lastMessageId=n,qn(n[0],n[1]).toString(10)}applyServerTime(e,t){t=(t||Date.now())/1e3|0;const a=e-t,s=Math.abs(this.timeOffset-a)>10;return this.lastMessageId=[0,0],this.timeOffset!==a&&(Je.set({server_time_offset:a}),this.timeOffset=a),s}}class Cp{saveWebDocument(e){if(!e)return;const t=e.attributes.find(a=>a._==="documentAttributeImageSize");return t&&(e.w=t.w,e.h=t.h),e}}class Dp extends ce{getInputInvoiceBySlug(e){return{_:"inputInvoiceSlug",slug:e}}getInputInvoiceByPeerId(e,t){return{_:"inputInvoiceMessage",peer:this.appPeersManager.getInputPeerById(e),msg_id:K(t)}}getPaymentForm(e){return this.apiManager.invokeApi("payments.getPaymentForm",{invoice:e}).then(t=>(this.appUsersManager.saveApiUsers(t.users),t.photo=this.appWebDocsManager.saveWebDocument(t.photo),t))}getPaymentReceipt(e,t){return this.apiManager.invokeApi("payments.getPaymentReceipt",{peer:this.appPeersManager.getInputPeerById(e),msg_id:K(t)}).then(a=>(this.appUsersManager.saveApiUsers(a.users),a.photo=this.appWebDocsManager.saveWebDocument(a.photo),a))}validateRequestedInfo(e,t,a){return this.apiManager.invokeApi("payments.validateRequestedInfo",{save:a,invoice:e,info:t})}sendPaymentForm(e,t,a,s,n,i){return this.apiManager.invokeApi("payments.sendPaymentForm",{form_id:t,invoice:e,requested_info_id:a,shipping_option_id:s,credentials:n,tip_amount:i||void 0}).then(o=>(o._==="payments.paymentResult"&&this.apiUpdatesManager.processUpdateMessage(o.updates),o))}clearSavedInfo(e,t){return this.apiManager.invokeApi("payments.clearSavedInfo",{info:e,credentials:t})}}function Ip(r){return r.icons.find(e=>e.name===ii)}const wp=!0;class kp extends ce{constructor(){super(...arguments),this.clear=(e=!1)=>{e?this.attachMenuBots=new Map:(this.attachMenuBots.clear(),this.attachMenuBotsArr=void 0)},this.onUpdateAttachMenuBots=e=>{this.clear(),this.getAttachMenuBots()},this.onUpdateWebViewResultSent=e=>{this.rootScope.dispatchEvent("web_view_result_sent",e.query_id)}}after(){this.clear(!0),this.apiUpdatesManager.addMultipleEventsListeners({updateAttachMenuBots:this.onUpdateAttachMenuBots,updateWebViewResultSent:this.onUpdateWebViewResultSent})}saveAttachMenuBot(e){this.attachMenuBots.set(e.bot_id,e);const t=Ip(e);return t.icon=this.appDocsManager.saveDoc(t.icon,{type:"attachMenuBotIcon",botId:e.bot_id}),this.rootScope.dispatchEvent("attach_menu_bot",e),e}saveAttachMenuBots(e){e.saved||(e.saved=!0,e.forEach(t=>this.saveAttachMenuBot(t)))}getAttachMenuBots(){return this.attachMenuBotsArr??this.apiManager.invokeApiSingleProcess({method:"messages.getAttachMenuBots",processResult:e=>(this.appUsersManager.saveApiUsers(e.users),this.saveAttachMenuBots(e.bots),this.attachMenuBotsArr=e.bots.slice(0,void 0))})}getAttachMenuBotCached(e){return this.attachMenuBots.get(e)}getAttachMenuBot(e,t){if(!this.appUsersManager.isAttachMenuBot(e)||!wp)throw Ue("BOT_INVALID");return(!t&&this.getAttachMenuBotCached(e))??this.apiManager.invokeApiSingleProcess({method:"messages.getAttachMenuBot",params:{bot:this.appUsersManager.getUserInput(e)},processResult:a=>(this.appUsersManager.saveApiUsers(a.users),this.saveAttachMenuBot(a.bot))})}requestWebView(e){const{botId:t,peerId:a,url:s,fromBotMenu:n,fromSwitchWebView:i,themeParams:o,replyToMsgId:p,silent:d,sendAsPeerId:f,startParam:c,threadId:g,isSimpleWebView:h,app:y,writeAllowed:P}=e,D="web";return y?this.apiManager.invokeApiSingleProcess({method:"messages.requestAppWebView",params:{peer:this.appPeersManager.getInputPeerById(a),start_param:c,theme_params:o,platform:D,write_allowed:P,app:{_:"inputBotAppID",access_hash:y.access_hash,id:y.id}},processResult:v=>v}):h?this.apiManager.invokeApiSingleProcess({method:"messages.requestSimpleWebView",params:{bot:this.appUsersManager.getUserInput(t),url:s,platform:D,from_switch_webview:i,theme_params:o},processResult:v=>v}):this.apiManager.invokeApiSingleProcess({method:"messages.requestWebView",params:{peer:this.appPeersManager.getInputPeerById(a),bot:this.appUsersManager.getUserInput(t),silent:d,platform:D,url:s,reply_to_msg_id:p?K(p):void 0,from_bot_menu:n,theme_params:o,send_as:f?this.appPeersManager.getInputPeerById(f):void 0,start_param:c,top_msg_id:g?K(g):void 0},processResult:v=>v})}prolongWebView(e){return this.apiManager.invokeApiSingleProcess({method:"messages.prolongWebView",params:{peer:this.appPeersManager.getInputPeerById(e.peerId),bot:this.appUsersManager.getUserInput(e.botId),query_id:e.queryId,silent:e.silent,reply_to_msg_id:e.replyToMsgId?K(e.replyToMsgId):void 0,send_as:e.sendAsPeerId?this.appPeersManager.getInputPeerById(e.sendAsPeerId):void 0,top_msg_id:e.threadId?K(e.threadId):void 0},processResult:t=>t})}toggleBotInAttachMenu(e,t,a){return this.apiManager.invokeApiSingleProcess({method:"messages.toggleBotInAttachMenu",params:{bot:this.appUsersManager.getUserInput(e),enabled:t,write_allowed:a},processResult:s=>s})}sendWebViewData(e,t,a){return this.apiManager.invokeApi("messages.sendWebViewData",{bot:this.appUsersManager.getUserInput(e),button_text:t,data:a,random_id:Vt()}).then(s=>{this.apiUpdatesManager.processUpdateMessage(s)})}getBotApp(e,t){return this.apiManager.invokeApiSingleProcess({method:"messages.getBotApp",params:{app:{_:"inputBotAppShortName",bot_id:this.appUsersManager.getUserInput(e),short_name:t},hash:0},processResult:a=>a})}}class Ap extends ce{requestUrlAuth(e,t,a,s){return this.apiManager.invokeApi("messages.requestUrlAuth",{button_id:s,msg_id:a?K(a):void 0,peer:t?this.appPeersManager.getInputPeerById(t):void 0,url:e}).then(n=>(n._==="urlAuthResultRequest"&&this.appUsersManager.saveApiUser(n.bot),n))}acceptUrlAuth(e,t,a,s,n){return this.apiManager.invokeApi("messages.acceptUrlAuth",{button_id:s,msg_id:a?K(a):void 0,peer:t?this.appPeersManager.getInputPeerById(t):void 0,url:e,write_allowed:n}).then(i=>i)}getWebAuthorizations(){return this.apiManager.invokeApi("account.getWebAuthorizations").then(e=>(this.appUsersManager.saveApiUsers(e.users),e.authorizations))}resetWebAuthorization(e){return this.apiManager.invokeApi("account.resetWebAuthorization",{hash:e})}resetWebAuthorizations(){return this.apiManager.invokeApi("account.resetWebAuthorizations")}}class Fp extends ce{after(){this.wallPapers={}}saveWallPaper(e){return e&&(e._!=="wallPaperNoFile"&&(e.document=this.appDocsManager.saveDoc(e.document,{type:"wallPaper",wallPaperId:e.id})),this.wallPapers[e.id]=e,e)}getWallPaper(e){return this.apiManager.invokeApiSingleProcess({method:"account.getWallPaper",params:{wallpaper:e},processResult:t=>this.saveWallPaper(t)})}getInputWallPaper(e){return typeof e=="string"?{_:"inputWallPaperSlug",slug:e}:e._==="wallPaperNoFile"?{_:"inputWallPaperNoFile",id:e.id}:{_:"inputWallPaper",id:e.id,access_hash:e.access_hash}}getWallPaperById(e){const t=this.wallPapers[e];return this.getWallPaper(this.getInputWallPaper(t))}getThemes(){return this.apiManager.invokeApiSingleProcess({method:"account.getThemes",params:{format:"macos",hash:0},processResult:e=>(e.themes.forEach(t=>{t.settings&&t.settings.forEach(a=>{a.wallpaper=this.saveWallPaper(a.wallpaper)})}),e.themes)})}getWallPapers(){return this.apiManager.invokeApiHashable({method:"account.getWallPapers"}).then(e=>{const t=e.wallpapers;return t.forEach((a,s,n)=>{n[s]=this.saveWallPaper(a)}),t})}}class Ep extends ce{toggleUsername({username:e,active:t,peerId:a}){if(!a||a===this.appUsersManager.userId)return this.apiManager.invokeApi("account.toggleUsername",{username:e,active:t});if(a.isAnyChat()){const s=a.toChatId(),n=this.apiManager.invokeApi("channels.toggleUsername",{channel:this.appChatsManager.getChannelInput(s),username:e,active:t});return this.appChatsManager.refreshChatAfterRequest(s,n)}else return this.apiManager.invokeApi("bots.toggleUsername",{bot:this.appUsersManager.getUserInput(a),username:e,active:t})}reorderUsernames({peerId:e,order:t}){if(e)if(e.isAnyChat()){const a=e.toChatId(),s=this.apiManager.invokeApi("channels.reorderUsernames",{channel:this.appChatsManager.getChannelInput(a),order:t});return this.appChatsManager.refreshChatAfterRequest(a,s)}else return this.apiManager.invokeApi("bots.reorderUsernames",{bot:this.appUsersManager.getUserInput(e),order:t});else return this.apiManager.invokeApi("account.reorderUsernames",{order:t})}}class Up extends ce{after(){this.apiUpdatesManager.addMultipleEventsListeners({updatePendingJoinRequests:async e=>{const t=lt(e.peer),a=await this.appStateManager.getState();delete a.hideChatJoinRequests[t],this.appStateManager.pushToState("hideChatJoinRequests",a.hideChatJoinRequests),this.rootScope.dispatchEvent("chat_requests",{chatId:t.toChatId(),recentRequesters:e.recent_requesters,requestsPending:e.requests_pending})}})}exportChatInvite({chatId:e,expireDate:t,usageLimit:a,requestNeeded:s,title:n}){return this.apiManager.invokeApi("messages.exportChatInvite",{peer:this.appChatsManager.getInputPeer(e),expire_date:t,usage_limit:a,request_needed:s,title:n})}getExportedChatInvites({chatId:e,revoked:t,adminId:a}){return this.apiManager.invokeApi("messages.getExportedChatInvites",{peer:this.appChatsManager.getInputPeer(e),admin_id:a?this.appUsersManager.getUserInput(a):{_:"inputUserSelf"},limit:50,revoked:t}).then(s=>(this.appUsersManager.saveApiUsers(s.users),s))}editExportedChatInvite({chatId:e,link:t,expireDate:a,usageLimit:s,requestNeeded:n,title:i,revoked:o}){return this.apiManager.invokeApi("messages.editExportedChatInvite",{peer:this.appChatsManager.getInputPeer(e),revoked:o,link:t,expire_date:a,usage_limit:s,request_needed:n,title:i}).then(p=>(this.appUsersManager.saveApiUsers(p.users),p))}deleteRevokedExportedChatInvites(e,t){return this.apiManager.invokeApi("messages.deleteRevokedExportedChatInvites",{peer:this.appChatsManager.getInputPeer(e),admin_id:this.appUsersManager.getUserInput(t)})}deleteExportedChatInvite(e,t){return this.apiManager.invokeApi("messages.deleteExportedChatInvite",{peer:this.appChatsManager.getInputPeer(e),link:t})}getAdminsWithInvites(e){return this.apiManager.invokeApi("messages.getAdminsWithInvites",{peer:this.appChatsManager.getInputPeer(e)}).then(t=>(this.appUsersManager.saveApiUsers(t.users),t))}getChatInviteImporters({chatId:e,limit:t=50,offsetDate:a=0,offsetUserId:s,link:n,q:i,requested:o}){const p=s?this.appUsersManager.getUserInput(s):{_:"inputUserEmpty"};return this.apiManager.invokeApi("messages.getChatInviteImporters",{peer:this.appChatsManager.getInputPeer(e),limit:t,offset_date:a,offset_user:p,link:n,q:i,requested:o}).then(d=>(this.appUsersManager.saveApiUsers(d.users),d))}}function Tp(r,e){const t={appPeersManager:new uo,appChatsManager:new fr,appDocsManager:new Br,appPhotosManager:new yo,appPollsManager:new _o,appUsersManager:new Ao,appWebPagesManager:new Eo,appDraftsManager:new Lr,appProfileManager:new Po,appNotificationsManager:new co,apiUpdatesManager:new cn,appAvatarsManager:new rr,appGroupCallsManager:new Vr,appCallsManager:new pr,appReactionsManager:new So,appMessagesManager:new fo,appMessagesIdsManager:new Gr,appPrivacyManager:new Mo,appInlineBotsManager:new qr,appStickersManager:new Io,referenceDatabase:new Ai,appEmojiManager:new vn,filtersStorage:new Wi,dialogsStorage:new Gi,apiManager:new ep,cryptoWorker:ge,passwordManager:new ki,apiFileManager:new Zo,peersStorage:new Nn,thumbsStorage:new tp,networkerFactory:new Pp,rootScope:new en,authorizer:new bp,dcConfigurator:new na,timeManager:new Sp,appStoragesManager:r,appStateManager:Gt,appWebDocsManager:new Cp,appPaymentsManager:new Dp,appAttachMenuBotsManager:new kp,appSeamlessLoginManager:new Ap,appThemesManager:new Fp,appUsernamesManager:new Ep,appChatInvitesManager:new Up};for(const n in t){const i=t[n];i&&(i.setManagers&&(i.setManagers(t),delete i.setManagers),Pe[n]=i)}const a=[];let s=Object.keys(t);s.unshift("appUsersManager","appChatsManager","appNotificationsManager","appMessagesManager","dialogsStorage"),s=cs(s);for(const n of s){const i=t[n];if(i?.after){const o=i.after();a.push(o)}}return e&&t.apiManager.setUserAuth(e),Promise.all(a).then(()=>t)}class Rp{constructor(){this._isServiceWorkerOnline=!0,this.cryptoWorkersURLs=[],this.cryptoPortsAttached=0,this.cryptoPortPromise=Me(),this.cryptoPortPromise.then(()=>{this.cryptoPortPromise=void 0})}start(){const e=mt.getInstance();e.addEventListener("manager",({name:t,method:a,args:s})=>gt(this.getManagers(),n=>n[t][a](...s))),e.addEventListener("cryptoPort",(t,a,s)=>{const n=s.ports[0];if(this.cryptoPortsAttached>=this.cryptoWorkersURLs.length){n.close();return}++this.cryptoPortsAttached,ge.attachPort(n),this.cryptoPortPromise?.resolve()}),e.addEventListener("createProxyWorkerURLs",({originalUrl:t,blob:a})=>{let s=this.cryptoWorkersURLs.length;s||(this.cryptoWorkersURLs.push(t),++s);const n=Te.cryptoWorkers;if(s===n)return this.cryptoWorkersURLs;const i=new Array(n-s).fill(void 0).map(()=>URL.createObjectURL(a));return this.cryptoWorkersURLs.push(...i),this.cryptoWorkersURLs})}async createManagers(){const e=new wi;await Promise.all([e.loadStorages(),this.cryptoPortPromise]);const t=await Tp(e,Gt.userId);return this.managers=t}getManagers(){return this.managers??(this.managers=this.createManagers())}get isServiceWorkerOnline(){return this._isServiceWorkerOnline}set isServiceWorkerOnline(e){this._isServiceWorkerOnline=e}getServiceMessagePort(){return this._isServiceWorkerOnline?this.serviceMessagePort:void 0}onServiceWorkerPort(e){this.serviceMessagePort?(this.serviceMessagePort.detachPort(this._serviceMessagePort),this._serviceMessagePort=void 0):(this.serviceMessagePort=new Pi,this.serviceMessagePort.addMultipleEventsListeners({requestFilePart:t=>gt(Ps.getManagers(),a=>{const{docId:s,dcId:n,offset:i,limit:o}=t;return a.appDocsManager.requestDocPart(s,n,i,o)})})),(this._serviceMessagePort=e.ports[0])&&this.serviceMessagePort.attachPort(this._serviceMessagePort)}}const Ps=new Rp;be&&(be.appManagersManager=Ps);var At=Ps;function Bp(r,e,t){const a=(s,n)=>{r.attachListenPort(s),n&&r.attachSendPort(n),e?.(s)};r.setOnPortDisconnect(t),typeof SharedWorkerGlobalScope<"u"?Pe.addEventListener("connect",s=>a(s.source,s.source)):typeof ServiceWorkerGlobalScope<"u"?a(Pe,null):a(Pe,Pe)}const rs=Le("MTPROTO"),os=new mt;os.addMultipleEventsListeners({environment:r=>{ai(r),Kt.waitForWebSocket()},crypto:({method:r,args:e})=>ge.invokeCrypto(r,...e),state:({state:r,resetStorages:e,pushedKeys:t,newVersion:a,oldVersion:s,userId:n})=>{rs("got state",r,t),Gt.userId=n,Gt.newVersion=a,Gt.oldVersion=s,sn.resolve({storages:e,callback:()=>{Object.keys(r).forEach(i=>{Gt.pushToState(i,r[i],!0,!t.includes(i))})}})},toggleStorages:({enabled:r,clearWrite:e})=>Vn(r,e),event:(r,e)=>{rs("will redirect event",r,e),os.invokeExceptSource("event",r,e)},serviceWorkerOnline:r=>{At.isServiceWorkerOnline=r},serviceWorkerPort:(r,e,t)=>{At.onServiceWorkerPort(t)},createObjectURL:r=>URL.createObjectURL(r)});rs("MTProto start");At.start();At.getManagers();da.start();Bp(os,r=>{da.addTab(r)},r=>{da.deleteTab(r)});
//# sourceMappingURL=mtproto.worker-b1496cf3.js.map
