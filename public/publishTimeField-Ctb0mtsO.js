import{a5 as O,cH as L,cZ as I,a2 as B,aD as F,bh as D,Z as P,i as f,a0 as v,c as C,a6 as M,t as h,b as a,a as _,a4 as x,c_ as N,h as H,aS as R,a7 as w,ch as V}from"./index-dQ3Bklqg.js";import{E as U,I as S,B as A}from"./appDialogsManager-DhwE4n5i.js";import{I as Z}from"./iconTsx-BDCrzY8m.js";const K="_Container_rwgu4_36",Y="_clickable_rwgu4_49",j="_withEndButtonIcon_rwgu4_52",q="_BorderThin_rwgu4_55",z="_BorderThick_rwgu4_58",G="_Label_rwgu4_61",J="_active_rwgu4_61",Q="_error_rwgu4_76",W="_Input_rwgu4_104",X="_InputStub_rwgu4_130",tt="_SideContent_rwgu4_150",et="_first_rwgu4_154",nt="_last_rwgu4_157",r={Container:K,clickable:Y,withEndButtonIcon:j,BorderThin:q,BorderThick:z,Label:G,active:J,error:Q,Input:W,InputStub:X,SideContent:tt,first:et,last:nt},st=h("<div><div></div><div>"),it=h("<input>"),$=h("<div>"),m=N(),l=s=>{const[t,n]=L(s,["value","onChange","isError","children","onClick","class","classList","clickable","withEndButtonIcon"]),[e,i]=C(),[o,d]=C(),g={input:e,setInput:i,offsetElement:o,setOffsetElement:d,value:()=>t.value,get onChange(){return t.onChange}};return a(m.Provider,{value:g,get children(){const c=st(),p=c.firstChild,y=p.nextSibling;return c.$$click=(...u)=>{g.input()?.focus(),t.onClick?.(...u)},D(c,P({get class(){return r.Container},get classList(){return{[r.error]:t.isError,[r.clickable]:t.clickable,[t.class]:!!t.class,[r.withEndButtonIcon]:t.withEndButtonIcon,...t.classList}}},n),!1,!0),f(c,()=>t.children,null),v(u=>{const b=r.BorderThin,T=r.BorderThick;return b!==u._v$&&_(p,u._v$=b),T!==u._v$2&&_(y,u._v$2=T),u},{_v$:void 0,_v$2:void 0}),c}})};l.Input=s=>{const[t,n]=L(s,["class","classList","forceFieldValue"]),e=I(m);return(()=>{const i=it();return i.$$input=o=>{e.onChange(o.currentTarget.value),t.forceFieldValue&&(e.input().value=e.value())},B(o=>F(()=>{e.setInput(o),e.setOffsetElement(o)}),i),D(i,P({get class(){return r.Input},get classList(){return{[t.class]:!!t.class,...t.classList}},get value(){return e.value()}},n),!1,!1),i})()};l.InputStub=s=>{const t=I(m);return(()=>{const n=$(),e=t.setOffsetElement;return typeof e=="function"?B(e,n):t.setOffsetElement=n,f(n,()=>s.children),v(()=>_(n,r.InputStub)),n})()};l.Label=s=>{const t=I(m),[n,e]=C(0);return M(()=>{if(s.forceOffset||!t.offsetElement())return;const i=t.offsetElement().parentElement;if(!i)return;const o=i.getBoundingClientRect(),d=t.offsetElement().getBoundingClientRect();e(d.left-o.left)}),(()=>{const i=$();return f(i,()=>s.children),v(o=>{const d=r.Label,g={[r.active]:s.active||!!t.value()},c=`${s.forceOffset||n()}px`;return d!==o._v$3&&_(i,o._v$3=d),o._v$4=x(i,g,o._v$4),c!==o._v$5&&((o._v$5=c)!=null?i.style.setProperty("--offset",c):i.style.removeProperty("--offset")),o},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),i})()};l.SideContent=s=>(()=>{const t=$();return f(t,()=>s.children),v(n=>{const e=r.SideContent,i={[r.first]:s.first,[r.last]:s.last};return e!==n._v$6&&_(t,n._v$6=e),n._v$7=x(t,i,n._v$7),n},{_v$6:void 0,_v$7:void 0}),t})();O(["click","input"]);const ot="_Icon_17ee9_1",rt={Icon:ot},ct="_Container_66c8g_1",at="_Caption_66c8g_5",lt="_center_66c8g_10",E={Container:ct,Caption:at,center:lt},k=60*1e3;class ut extends U{constructor(t){const{minTimeDate:n,...e}=t;super(e),this.minTimeDate=n,this.caption=document.createElement("div"),this.caption.classList.add(E.Caption,E.center),this.caption.append(H("SuggestedPosts.PublishingTime.MinSendTime",[R(n)])),this.timeDiv.after(this.caption)}setTimeTitle(){if(super.setTimeTitle(),!this.caption||!this.minTimeDate)return;const t=new Date(this.selectedDate.getTime());t.setHours(+this.hoursInputField.value,+this.minutesInputField.value);const n=t<new Date||(t.valueOf()/k|0)<(this.minTimeDate.valueOf()/k|0);this.btnConfirm.toggleAttribute("disabled",n);const e=t.getDate()===this.minTimeDate.getDate();this.caption.classList.toggle("hide",!e)}}const dt=h("<span>"),_t=10,ht=s=>{const t=()=>{const e=new Date;e.setMinutes(e.getMinutes()+_t);const i=new Date(e);i.setHours(0,0,0,0),new ut({initDate:new Date(e),minDate:i,minTimeDate:e,onPick:o=>{console.log(o),s.onChange(o)}}).show()},n=e=>{e.stopPropagation(),s.onChange(void 0)};return a(l,{clickable:!0,get withEndButtonIcon(){return!!s.value},onClick:t,get children(){return[a(l.InputStub,{get children(){return w(()=>!!s.value)()?(()=>{const e=dt();return f(e,()=>V(s.value)),e})():a(S,{get key(){return s.noTimeLangKey}})}}),a(l.Label,{active:!0,get children(){return a(S,{key:"SuggestedPosts.PublishingTime.Label"})}}),a(l.SideContent,{last:!0,get children(){return w(()=>!!s.value)()?a(A,{icon:"cross",tabIndex:-1,onClick:n}):a(Z,{get class(){return rt.Icon},icon:"down"})}})]}})};export{ht as P,l as S,rt as c,E as s};
//# sourceMappingURL=publishTimeField-Ctb0mtsO.js.map
