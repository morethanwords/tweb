(this.webpackJsonp=this.webpackJsonp||[]).push([[5],Array(41).concat([function(e,t,a){"use strict";var s=a(29),n=a(39),i=a(45),r=a(132);function o(e){return e&&e.toLowerCase()||""}var p=a(59),d=a(84),c=a(31),l=a(16),m=a(33),g=a(47),h=a(77),u=a(32),y=a(15),f=a(121),_=a(73),v=a(51),P=a(43),b=a(17);const I=new class{constructor(){this.storage=b.default.storages.users,this.updateUsersStatuses=()=>{const e=Object(p.h)(!0);for(const t in this.users){const a=this.users[t];this.updateUserStatus(a,e)}},this.clear(!0),setInterval(this.updateUsersStatuses,6e4),y.default.addEventListener("state_synchronized",this.updateUsersStatuses),y.default.addMultipleEventsListeners({updateUserStatus:e=>{const t=e.user_id,a=this.users[t];a&&(a.status=e.status,a.status&&("expires"in a.status&&(a.status.expires-=h.a.serverTimeOffset),"was_online"in a.status&&(a.status.was_online-=h.a.serverTimeOffset)),y.default.dispatchEvent("user_update",t),this.setUserToStateIfNeeded(a))},updateUserPhoto:e=>{var t;const a=e.user_id,s=this.users[a];if(s){if((null===(t=s.photo)||void 0===t?void 0:t.photo_id)===e.photo.photo_id)return;this.forceUserOnline(a,e.date),"userProfilePhotoEmpty"===e.photo._?delete s.photo:s.photo=Object(c.i)(s.photo,e.photo),this.setUserToStateIfNeeded(s),y.default.dispatchEvent("user_update",a),y.default.dispatchEvent("avatar_update",a.toPeerId())}else console.warn("No user by id:",a)},updateUserName:e=>{const t=e.user_id,a=this.users[t];a&&(this.forceUserOnline(t),this.saveApiUser(Object.assign({},a,{first_name:e.first_name,last_name:e.last_name,username:e.username}),!0))}}),y.default.addEventListener("language_change",e=>{const t=this.getSelf().id;this.contactsIndex.indexObject(t,this.getUserSearchText(t))}),b.default.getState().then(e=>{const t=b.default.storagesResults.users;if(t.length)for(let e=0,a=t.length;e<a;++e){const a=t[e];a&&(this.users[a.id]=a,this.setUserNameToCache(a))}const a=e.contactsList;a&&Array.isArray(a)&&(a.forEach(e=>{this.pushContact(e)}),a.length&&(this.contactsFillPromise=Object(i.a)(),this.contactsFillPromise.resolve(this.contactsList))),b.default.addEventListener("peerNeeded",e=>{if(!P.a.isUser(e))return;const t=e.toUserId();this.storage.getFromCache(t)||this.storage.set({[t]:this.getUser(t)})}),b.default.addEventListener("peerUnneeded",e=>{if(!P.a.isUser(e))return;const t=e.toUserId();this.storage.getFromCache(t)&&this.storage.delete(t)})})}clear(e=!1){if(e)this.users={},this.usernames={};else{const e=b.default.storagesResults.users;for(const t in this.users){if(!t)continue;const a=t.toPeerId();if(!b.default.isPeerNeeded(a)){const a=this.users[t];a.username&&delete this.usernames[o(a.username)],e.findAndSplice(e=>e.id===t),this.storage.delete(t),delete this.users[t]}}}this.getTopPeersPromises={},this.contactsIndex=this.createSearchIndex(),this.contactsFillPromise=void 0,this.contactsList=new Set,this.updatedContactsList=!1}onContactsModified(){const e=[...this.contactsList];b.default.pushToState("contactsList",e)}fillContacts(){var e;if(this.contactsFillPromise&&this.updatedContactsList)return{cached:this.contactsFillPromise.isFulfilled,promise:this.contactsFillPromise};this.updatedContactsList=!0;const t=Object(i.a)();return m.a.invokeApi("contacts.getContacts").then(e=>{"contacts.contacts"===e._&&(this.contactsList.clear(),this.saveApiUsers(e.users),e.contacts.forEach(e=>{this.pushContact(e.user_id)}),this.onContactsModified(),this.contactsFillPromise=t),t.resolve(this.contactsList)},()=>{this.updatedContactsList=!1}),{cached:null===(e=this.contactsFillPromise)||void 0===e?void 0:e.isFulfilled,promise:this.contactsFillPromise||(this.contactsFillPromise=t)}}resolveUsername(e){return"@"===e[0]&&(e=e.slice(1)),e=e.toLowerCase(),this.usernames[e]?Promise.resolve(this.users[this.usernames[e]]):m.a.invokeApi("contacts.resolveUsername",{username:e}).then(e=>(this.saveApiUsers(e.users),v.a.saveApiChats(e.chats),P.a.getPeer(P.a.getPeerId(e.peer))))}pushContact(e){this.contactsList.add(e),this.contactsIndex.indexObject(e,this.getUserSearchText(e)),b.default.requestPeerSingle(e.toPeerId(),"contact")}popContact(e){this.contactsList.delete(e),this.contactsIndex.indexObject(e,""),b.default.releaseSinglePeer(e.toPeerId(),"contact")}getUserSearchText(e){const t=this.users[e];if(!t)return"";return[t.first_name,t.last_name,t.phone,t.username,t.pFlags.self?l.default.format("SavedMessages",!0):"",t.pFlags.self?"Saved Messages":""].filter(Boolean).join(" ")}getContacts(e,t=!1,a="name"){return this.fillContacts().promise.then(s=>{let i=[...s];if(e){const t=this.contactsIndex.search(e);i=[...i].filter(e=>t.has(e))}"name"===a?i.sort((e,t)=>{const a=(this.users[e]||{}).sortName||"",s=(this.users[t]||{}).sortName||"";return a.localeCompare(s)}):"online"===a&&i.sort((e,t)=>{const a=I.getUserStatusForSort(I.getUser(e).status);return I.getUserStatusForSort(I.getUser(t).status)-a});const r=y.default.myId.toUserId();return Object(n.e)(i,r),t&&this.testSelfSearch(e)&&i.unshift(r),i})}getContactsPeerIds(e,t,a){return this.getContacts(e,t,a).then(e=>e.map(e=>e.toPeerId(!1)))}toggleBlock(e,t){return m.a.invokeApiSingle(t?"contacts.block":"contacts.unblock",{id:P.a.getInputPeerById(e)}).then(a=>(a&&_.a.processLocalUpdate({_:"updatePeerBlocked",peer_id:P.a.getOutputPeer(e),blocked:t}),a))}testSelfSearch(e){const t=this.getSelf(),a=this.createSearchIndex();return a.indexObject(t.id,this.getUserSearchText(t.id)),a.search(e).has(t.id)}createSearchIndex(){return new f.a({clearBadChars:!0,ignoreCase:!0,latinize:!0,includeTag:!0})}saveApiUsers(e,t){e.saved||(e.saved=!0,e.forEach(e=>this.saveApiUser(e,t)))}setUserNameToCache(e,t){if(!t||t.username!==e.username){if(null==t?void 0:t.username){const e=o(t.username);delete this.usernames[e]}if(e.username){const t=o(e.username);this.usernames[t]=e.id}}}saveApiUser(e,t){var a,s;if("userEmpty"===e._)return;const n=e.id,i=this.users[n];if(void 0===e.pFlags&&(e.pFlags={}),e.pFlags.min&&void 0!==i)return;if(this.setUserNameToCache(e,i),i&&void 0!==i.initials&&void 0!==i.sortName&&i.first_name===e.first_name&&i.last_name===e.last_name)e.sortName=i.sortName,e.initials=i.initials;else{const t=e.first_name+(e.last_name?" "+e.last_name:"");e.sortName=e.pFlags.deleted?"":Object(r.b)(t,!1),e.initials=u.a.getAbbreviation(t)}e.status&&(e.status.expires&&(e.status.expires-=h.a.serverTimeOffset),e.status.was_online&&(e.status.was_online-=h.a.serverTimeOffset));let o=!1,p=!1;if(void 0===i)this.users[n]=e;else{e.first_name===i.first_name&&e.last_name===i.last_name&&e.username===i.username||(p=!0);(null===(a=i.photo)||void 0===a?void 0:a.photo_id)!==(null===(s=e.photo)||void 0===s?void 0:s.photo_id)&&(o=!0);const t=!!i.pFlags.contact,r=!!e.pFlags.contact;Object(c.i)(i,e),y.default.dispatchEvent("user_update",n),t!==r&&this.onContactUpdated(n,r,t)}o&&y.default.dispatchEvent("avatar_update",e.id.toPeerId()),p&&y.default.dispatchEvent("peer_title_edit",e.id.toPeerId()),this.setUserToStateIfNeeded(e)}setUserToStateIfNeeded(e){b.default.isPeerNeeded(e.id.toPeerId())&&this.storage.set({[e.id]:e})}formatUserPhone(e){return"+"+Object(d.a)(e).formatted}isUserOnlineVisible(e){return this.getUserStatusForSort(e)>3}getUserStatusForSort(e){if("object"!=typeof e&&(e=this.getUser(e).status),e){const t="userStatusOnline"===e._?e.expires:"userStatusOffline"===e._?e.was_online:0;if(t)return t;switch(e._){case"userStatusRecently":return 3;case"userStatusLastWeek":return 2;case"userStatusLastMonth":return 1}}return 0}getUser(e){return Object(c.f)(e)?e:this.users[e]||{id:e,pFlags:{deleted:!0},access_hash:""}}getSelf(){return this.getUser(y.default.myId)}getUserStatusString(e){var t;let a,s;switch(e){case g.d:a="Peer.RepliesNotifications";break;case g.e:a="Peer.ServiceNotifications";break;default:{if(this.isBot(e)){a="Bot";break}const n=this.getUser(e);if(!n){a="";break}if(n.pFlags.support){a="SupportStatus";break}switch(null===(t=n.status)||void 0===t?void 0:t._){case"userStatusRecently":a="Lately";break;case"userStatusLastWeek":a="WithinAWeek";break;case"userStatusLastMonth":a="WithinAMonth";break;case"userStatusOffline":{const e=n.status.was_online,t=new Date,i=(t.getTime()/1e3|0)-e;if(i<60)a="Peer.Status.justNow";else if(i<3600){a="Peer.Status.minAgo";s=[i/60|0]}else if(i<86400&&t.getDate()===new Date(1e3*e).getDate()){a="LastSeen.HoursAgo";s=[i/3600|0]}else{a="Peer.Status.LastSeenAt";const{dateEl:t,timeEl:n}=Object(p.e)(e);s=[t,n]}break}case"userStatusOnline":a="Online";break;default:a="ALongTimeAgo"}break}}return Object(l.i18n)(a,s)}isBot(e){return this.users[e]&&!!this.users[e].pFlags.bot}isContact(e){return this.contactsList.has(e)||!(!this.users[e]||!this.users[e].pFlags.contact)}isRegularUser(e){const t=this.users[e];return t&&!this.isBot(e)&&!t.pFlags.deleted&&!t.pFlags.support}isNonContactUser(e){return this.isRegularUser(e)&&!this.isContact(e)&&e.toPeerId()!==y.default.myId}hasUser(e,t){const a=this.users[e];return Object(c.f)(a)&&(t||!a.pFlags.min)}canSendToUser(e){const t=this.getUser(e);return!t.pFlags.deleted&&t.id.toPeerId()!==g.d}getUserPhoto(e){const t=this.getUser(e);return t&&t.photo||{_:"userProfilePhotoEmpty"}}getUserString(e){const t=this.getUser(e);return"u"+e+(t.access_hash?"_"+t.access_hash:"")}getUserInput(e){const t=this.getUser(e);return t.pFlags&&t.pFlags.self?{_:"inputUserSelf"}:{_:"inputUser",user_id:e,access_hash:t.access_hash}}getUserInputPeer(e){const t=this.getUser(e);return t.pFlags&&t.pFlags.self?{_:"inputPeerSelf"}:{_:"inputPeerUser",user_id:e,access_hash:t.access_hash}}getContactMediaInput(e){const t=this.getUser(e);return{_:"inputMediaContact",first_name:t.first_name,last_name:t.last_name,phone_number:t.phone,vcard:"",user_id:e}}updateUserStatus(e,t=Object(p.h)(!0)){e.status&&"userStatusOnline"===e.status._&&e.status.expires<t&&(e.status={_:"userStatusOffline",was_online:e.status.expires},y.default.dispatchEvent("user_update",e.id),this.setUserToStateIfNeeded(e))}forceUserOnline(e,t){if(this.isBot(e))return;const a=Object(p.h)(!0);if(t){if(a-t>=60)return}else if(_.a.updatesState.syncLoading)return;const s=this.getUser(e);s&&s.status&&"userStatusOnline"!==s.status._&&"userStatusEmpty"!==s.status._&&!s.pFlags.support&&!s.pFlags.deleted&&(s.status={_:"userStatusOnline",expires:a+60},y.default.dispatchEvent("user_update",e),this.setUserToStateIfNeeded(s))}importContact(e,t,a){return this.importContacts([{first_name:e,last_name:t,phones:[a]}]).then(e=>{if(!e.length){const e=new Error;throw e.type="NO_USER",e}return e[0]})}importContacts(e){const t=[];for(let a=0;a<e.length;++a)for(let s=0;s<e[a].phones.length;++s)t.push({_:"inputPhoneContact",client_id:(a<<16|s).toString(10),phone:e[a].phones[s],first_name:e[a].first_name,last_name:e[a].last_name});return m.a.invokeApi("contacts.importContacts",{contacts:t}).then(e=>{this.saveApiUsers(e.users);return e.imported.map(e=>(this.onContactUpdated(e.user_id,!0),e.user_id))})}getTopPeers(e){return this.getTopPeersPromises[e]?this.getTopPeersPromises[e]:this.getTopPeersPromises[e]=b.default.getState().then(t=>{const a=t.topPeersCache[e];return a&&a.cachedTime+864e5>Date.now()&&a.peers?a.peers:m.a.invokeApi("contacts.getTopPeers",{[e]:!0,offset:0,limit:15,hash:"0"}).then(a=>{let s=[];return"contacts.topPeers"===a._&&(this.saveApiUsers(a.users),v.a.saveApiChats(a.chats),a.categories.length&&(s=a.categories[0].peers.map(e=>{const t=P.a.getPeerId(e.peer);return b.default.requestPeer(t,"topPeer"),{id:t,rating:e.rating}}))),t.topPeersCache[e]={peers:s,cachedTime:Date.now()},b.default.pushToState("topPeersCache",t.topPeersCache),s})})}getBlocked(e=0,t=0){return m.a.invokeApiSingle("contacts.getBlocked",{offset:e,limit:t}).then(e=>{this.saveApiUsers(e.users),v.a.saveApiChats(e.chats);return{count:"contacts.blocked"===e._?e.users.length+e.chats.length:e.count,peerIds:e.users.map(e=>e.id.toPeerId()).concat(e.chats.map(e=>e.id.toPeerId(!0)))}})}getLocated(e,t,a,s=!1,n=0){const i={_:"inputGeoPoint",lat:e,long:t,accuracy_radius:a};return m.a.invokeApi("contacts.getLocated",{geo_point:i,background:s}).then(e=>(_.a.processUpdateMessage(e),e))}searchContacts(e,t=20){return m.a.invokeApiCacheable("contacts.search",{q:e,limit:t},{cacheSeconds:60}).then(e=>{this.saveApiUsers(e.users),v.a.saveApiChats(e.chats);return{my_results:Object(n.b)(e.my_results.map(e=>P.a.getPeerId(e))),results:e.results.map(e=>P.a.getPeerId(e))}})}onContactUpdated(e,t,a=this.isContact(e)){t!==a&&(t?this.pushContact(e):this.popContact(e),this.onContactsModified(),y.default.dispatchEvent("contacts_update",e))}updateUsername(e){return m.a.invokeApi("account.updateUsername",{username:e}).then(e=>{this.saveApiUser(e)})}setUserStatus(e,t){if(this.isBot(e))return;const a=this.users[e];if(a){const s=t?{_:"userStatusOffline",was_online:Object(p.h)(!0)}:{_:"userStatusOnline",expires:Object(p.h)(!0)+50};a.status=s,y.default.dispatchEvent("user_update",e),this.setUserToStateIfNeeded(a)}}addContact(e,t,a,s,n){return m.a.invokeApi("contacts.addContact",{id:this.getUserInput(e),first_name:t,last_name:a,phone:s,add_phone_privacy_exception:n}).then(t=>{_.a.processUpdateMessage(t,{override:!0}),this.onContactUpdated(e,!0)})}deleteContacts(e){return m.a.invokeApi("contacts.deleteContacts",{id:e.map(e=>this.getUserInput(e))}).then(t=>{_.a.processUpdateMessage(t,{override:!0}),e.forEach(e=>{this.onContactUpdated(e,!1)})})}};s.a.appUsersManager=I;t.a=I},function(e,t,a){"use strict";var s=a(83),n=a(110),i=a(45),r=a(59),o=a(111),p=a(31),d=a(61),c=a(87),l=a(16),m=a(37),g=a(33),h=a(143),u=a(77),y=a(32),f=a(15),_=a(121),v=a(39),P=a(133),b=a(47),I=a(2);class S{constructor(e,t,a,s,n,i,r,o,p,d){this.appMessagesManager=e,this.appChatsManager=t,this.appPeersManager=a,this.appUsersManager=s,this.appDraftsManager=n,this.appNotificationsManager=i,this.appStateManager=r,this.apiUpdatesManager=o,this.serverTimeManager=p,this.appMessagesIdsManager=d,this.folders={},this.onUpdateFolderPeers=e=>{e.folder_peers.forEach(e=>{var t;const{folder_id:a,peer:s}=e,n=this.appPeersManager.getPeerId(s),i=this.dropDialog(n)[0];i&&((null===(t=i.pFlags)||void 0===t?void 0:t.pinned)&&this.handleDialogUnpinning(i,a),i.folder_id=a,this.generateIndexForDialog(i),this.pushDialog(i)),this.appMessagesManager.scheduleHandleNewDialogs(n,i)})},this.onUpdateDialogPinned=e=>{var t;const a=null!==(t=e.folder_id)&&void 0!==t?t:0,s=this.appPeersManager.getPeerId(e.peer.peer),n=this.getDialogOnly(s);n&&(e.pFlags.pinned?n.pFlags.pinned=!0:this.handleDialogUnpinning(n,a),this.generateIndexForDialog(n)),this.appMessagesManager.scheduleHandleNewDialogs(s,n)},this.onUpdatePinnedDialogs=e=>{var t;const a=null!==(t=e.folder_id)&&void 0!==t?t:0,s=e=>{this.pinnedOrders[a].length=0,e.reverse(),e.forEach(e=>{n[e]=!0;const t=this.getDialogOnly(e);this.appMessagesManager.scheduleHandleNewDialogs(e,t),t&&(t.pFlags.pinned=!0,this.generateIndexForDialog(t))});const t=this.getFolderDialogs(a,!1);for(const e of t){if(!e.pFlags.pinned)break;const t=e.peerId;n[t]||this.appMessagesManager.scheduleHandleNewDialogs(t)}},n={};e.order?s(e.order.map(e=>this.appPeersManager.getPeerId(e.peer))):g.a.invokeApi("messages.getPinnedDialogs",{folder_id:a}).then(e=>{this.applyDialogs(e),s(e.dialogs.map(e=>e.peerId))})},this.storage=this.appStateManager.storages.dialogs,this.dialogs=this.storage.getCache(),this.clear(!0),f.default.addEventListener("language_change",()=>{const e=s.getSelf().id.toPeerId(!1);if(this.getDialogOnly(e)){const t=a.getPeerSearchText(e);this.dialogsIndex.indexObject(e,t)}});const c=e=>{const t=this.getCachedDialogs(!1);for(let a=0;a<t.length;++a)this.processDialogForFilter(t[a],e)};f.default.addEventListener("filter_order",()=>{const e=this.getCachedDialogs(!1);for(const e in this.folders)+e>1&&delete this.folders[e];for(let t=0;t<e.length;++t){const a=e[t];for(let e=0;e<=10;++e){a["index_"+e]=void 0}this.processDialogForFilters(a)}}),f.default.addEventListener("filter_update",c),f.default.addEventListener("filter_new",c),f.default.addEventListener("filter_delete",e=>{const t=this.getCachedDialogs(!1),a="index_"+e.orderIndex;for(let e=0;e<t.length;++e){delete t[e][a]}delete this.folders[e.id]}),f.default.addEventListener("chat_update",e=>{const t=this.appChatsManager.getChat(e),a=e.toPeerId(!0);t.pFlags.left&&this.getDialogOnly(a)&&this.dropDialogOnDeletion(a)}),f.default.addMultipleEventsListeners({updateFolderPeers:this.onUpdateFolderPeers,updateDialogPinned:this.onUpdateDialogPinned,updatePinnedDialogs:this.onUpdatePinnedDialogs}),r.getState().then(e=>{this.pinnedOrders=e.pinnedOrders||{},this.pinnedOrders[0]||(this.pinnedOrders[0]=[]),this.pinnedOrders[1]||(this.pinnedOrders[1]=[]);const t=r.storagesResults.dialogs;if(t.length)for(let e=0,a=t.length;e<a;++e){const a=t[e];if(a){a.top_message=this.appMessagesIdsManager.getServerMessageId(a.top_message),a.topMessage&&this.appMessagesManager.saveMessages([a.topMessage]);for(let e=0;e<=10;++e)delete a["index_"+e];this.saveDialog(a,void 0,!0);this.appMessagesManager.getMessageByPeer(a.peerId,a.top_message).deleted&&this.appMessagesManager.reloadConversation(a.peerId)}}this.allDialogsLoaded=e.allDialogsLoaded||{}})}isDialogsLoaded(e){return!!this.allDialogsLoaded[e]}setDialogsLoaded(e,t){void 0===e&&t?(this.allDialogsLoaded[0]=t,this.allDialogsLoaded[1]=t):this.allDialogsLoaded[e]=t,this.allDialogsLoaded[0]&&this.allDialogsLoaded[1]&&(this.allDialogsLoaded[void 0]=!0),this.appStateManager.pushToState("allDialogsLoaded",this.allDialogsLoaded)}clear(e=!1){if(this.pinnedOrders={0:[],1:[]},e)this.allDialogsLoaded={};else{this.appStateManager.storagesResults.dialogs.length=0,this.storage.clear(),this.setDialogsLoaded(0,!1),this.setDialogsLoaded(1,!1),this.setDialogsLoaded(void 0,!1),this.savePinnedOrders()}this.folders={},this.dialogsOffsetDate={},this.dialogsNum=0,this.dialogsIndex=new _.a({clearBadChars:!0,ignoreCase:!0,latinize:!0,includeTag:!0}),this.cachedResults={query:"",count:0,dialogs:[],folderId:0}}handleDialogUnpinning(e,t){delete e.pFlags.pinned,Object(v.e)(this.pinnedOrders[t],e.peerId),this.savePinnedOrders()}savePinnedOrders(){this.appStateManager.pushToState("pinnedOrders",this.pinnedOrders)}resetPinnedOrder(e){this.pinnedOrders[e]=[]}getPinnedOrders(e){return this.pinnedOrders[e]}getOffsetDate(e){const t=this.dialogsOffsetDate[e]||0;return void 0!==e||t?t:Math.min(this.getOffsetDate(0),this.getOffsetDate(1))}getFolder(e){var t;return null!==(t=this.folders[e])&&void 0!==t?t:this.folders[e]={dialogs:[],id:e,unreadMessagesCount:0,unreadDialogsCount:0}}getFolderDialogs(e,t=!0){if(void 0===e)return this.getCachedDialogs(t);const a=this.getFolder(e);return t?a.dialogs.filter(e=>void 0===e.migratedTo):a.dialogs}getCachedDialogs(e){return this.getFolderDialogs(0,e).concat(this.getFolderDialogs(1,e))}setDialogIndexInFilter(e,t,a){var s;let n;if(this.appMessagesManager.filtersStorage.testDialogForFilter(e,a)){const t=a.pinnedPeerIds.indexOf(e.peerId);n=-1!==t?this.generateDialogIndex(this.generateDialogPinnedDateByIndex(a.pinned_peers.length-1-t),!0):(null===(s=e.pFlags)||void 0===s?void 0:s.pinned)?this.generateIndexForDialog(e,!0):e.index}return e[t]=n}getDialog(e,t,a=!0){const s=[];void 0===t?s.push(this.getFolder(0).dialogs,this.getFolder(1).dialogs):s.push(this.getFolderDialogs(t,!1));for(let t of s){let s=0,n=0;for(let i=t.length;s<i;++s){const i=t[s];if(i.peerId===e)return[i,s-n];a&&void 0!==i.migratedTo&&++n}}return[]}getDialogOnly(e){return this.dialogs[e]}generateDialogIndex(e,t){return void 0===e&&(e=Object(r.h)(!0)+this.serverTimeManager.serverTimeOffset),65536*e+(t?0:65535&++this.dialogsNum)}processDialogForFilters(e){const t=this.appMessagesManager.filtersStorage.filters;for(const a in t){const s=t[a];this.processDialogForFilter(e,s)}}processDialogForFilter(e,t){const a=this.getDialogIndexKey(t.id),s=this.getFolder(t.id).dialogs,n=s.findIndex(t=>t.peerId===e.peerId),i=s[n],r=i&&i[a],o=this.setDialogIndexInFilter(e,a,t);r!==o&&((!r&&o||n&&!o)&&this.prepareFolderUnreadCountModifyingByDialog(t.id,e,!!o),-1!==n&&s.splice(n,1),o&&Object(v.f)(s,e,a,n))}prepareDialogUnreadCountModifying(e){const t=[this.prepareFolderUnreadCountModifyingByDialog(e.folder_id,e)],a=this.appMessagesManager.filtersStorage.filters;for(const s in a){const n=a[s];this.appMessagesManager.filtersStorage.testDialogForFilter(e,n)&&t.push(this.prepareFolderUnreadCountModifyingByDialog(n.id,e))}return()=>t.forEach(e=>e())}prepareFolderUnreadCountModifyingByDialog(e,t,a){const s=this.appMessagesManager.getDialogUnreadCount(t);if(void 0===a)return()=>{const a=this.appMessagesManager.getDialogUnreadCount(t),n=a-s,i=a&&!s||!a&&s?s?-1:1:0;this.modifyFolderUnreadCount(e,n,i)};this.modifyFolderUnreadCount(e,a?s:-s,s?a?1:-1:0)}modifyFolderUnreadCount(e,t,a){if(!t&&!a)return;const s=this.getFolder(e);t&&(s.unreadMessagesCount=Math.max(0,s.unreadMessagesCount+t)),a&&(s.unreadDialogsCount=Math.max(0,s.unreadDialogsCount+a)),void 0===s.dispatchUnreadTimeout&&(s.dispatchUnreadTimeout=I.a.setTimeout(()=>{s.dispatchUnreadTimeout=void 0,f.default.dispatchEvent("folder_unread",s)},0))}generateIndexForDialog(e,t=!1,a){var s;let n,i=0;if(e.pFlags.pinned&&!t)i=this.generateDialogPinnedDate(e),n=!0;else{a||(a=this.appMessagesManager.getMessageByPeer(e.peerId,e.top_message)),i=a.date||i;const t=this.appPeersManager.isChannel(e.peerId)&&e.peerId.toChatId();if(t){const e=this.appChatsManager.getChat(t);(!i||e.date&&e.date>i)&&(i=e.date)}"draftMessage"===(null===(s=e.draft)||void 0===s?void 0:s._)&&e.draft.date>i&&(i=e.draft.date)}i||(i=Object(r.h)(!0));const o=this.generateDialogIndex(i,n);if(t)return o;e.index=o}generateDialogPinnedDateByIndex(e){return 2147418112+(65535&e)}generateDialogPinnedDate(e){const t=this.pinnedOrders[e.folder_id],a=t.indexOf(e.peerId);let s=a;return-1===a&&(s=t.push(e.peerId)-1,this.savePinnedOrders()),this.generateDialogPinnedDateByIndex(s)}setDialogToState(e){const{peerId:t,pts:a}=e,s=this.appMessagesManager.getHistoryStorage(t),n=this.appMessagesManager.getMessagesStorage(t),i=s.history.slice;let r;for(let e=0,a=i.length;e<a;++e){const a=i[e],s=this.appMessagesManager.getMessageFromStorage(n,a);if(!s.pFlags.is_outgoing&&!s.deleted){r=s;const e=s.viaBotId||s.fromId;e!==t&&this.appStateManager.requestPeerSingle(e,"topMessage",t);break}}if(e.topMessage=r,t.isAnyChat()&&a){const s=this.apiUpdatesManager.getChannelState(t.toChatId(),a).pts;e.pts=s}this.storage.set({[t]:e}),this.appStateManager.requestPeerSingle(t,"dialog")}pushDialog(e,t,a,s){const{folder_id:n,peerId:i}=e,r=this.getFolderDialogs(n,!1),o=r.findIndex(e=>e.peerId===i);if(-1!==o&&r.splice(o,1),this.dialogs[i]=e,this.setDialogToState(e),void 0===t&&(t=this.getDialogOffsetDate(e)),this.processDialogForFilters(e),t&&!e.pFlags.pinned){if(s){const e=this.dialogsOffsetDate[void 0];(!e||t<e)&&(this.dialogsOffsetDate[void 0]=t)}const i=this.dialogsOffsetDate[n];if(!i||t<i){if(!a&&!this.isDialogsLoaded(n))return void this.clearDialogFromState(e,!0);this.dialogsOffsetDate[n]=t}}-1===o&&this.prepareFolderUnreadCountModifyingByDialog(n,e,!0),Object(v.f)(r,e,"index",o)}dropDialog(e){const t=this.getDialog(e,void 0,!1),[a,s]=t;if(a){delete this.dialogs[e];this.getFolder(a.folder_id).dialogs.splice(s,1);const t=void 0!==Object(v.e)(this.pinnedOrders[a.folder_id],e);this.processDialogForFilters(a),this.dialogsIndex.indexObject(e,""),t&&this.savePinnedOrders(),this.clearDialogFromState(a,!1)}return t}clearDialogFromState(e,t){const a=e.peerId;this.appStateManager.releaseSinglePeer(a,"topMessage"),this.appStateManager.releaseSinglePeer(a,"dialog"),this.storage.delete(a,t)}dropDialogWithEvent(e){const t=this.dropDialog(e);return t.length&&f.default.dispatchEvent("dialog_drop",{peerId:e,dialog:t[0]}),t}dropDialogOnDeletion(e){this.dropDialogWithEvent(e),f.default.dispatchEvent("peer_deleted",e)}applyDialogs(e){Object(v.d)(e.dialogs,(t,a)=>{"dialogFolder"===t._&&e.dialogs.splice(a,1)}),this.appUsersManager.saveApiUsers(e.users),this.appChatsManager.saveApiChats(e.chats),this.appMessagesManager.saveMessages(e.messages);const t={};e.dialogs.forEach(e=>{const a=this.appPeersManager.getPeerId(e.peer);let s=e.top_message;const n=this.appMessagesManager.pendingTopMsgs[a];n&&(!s||this.appMessagesManager.getMessageByPeer(a,n).date>this.appMessagesManager.getMessageByPeer(a,s).date)&&(e.top_message=s=n,this.appMessagesManager.getHistoryStorage(a).maxId=n),s||e.draft&&"draftMessage"===e.draft._?(this.saveDialog(e),t[a]=e):this.dropDialogWithEvent(a);const i=this.appMessagesManager.newUpdatesAfterReloadToHandle[a];if(void 0!==i){for(const e of i)i.delete(e),this.apiUpdatesManager.saveUpdate(e);i.size||delete this.appMessagesManager.newUpdatesAfterReloadToHandle[a]}}),Object.keys(t).length&&f.default.dispatchEvent("dialogs_multiupdate",t)}getDialogOffsetDate(e){return this.appMessagesManager.getMessageByPeer(e.peerId,e.top_message).date||0}saveDialog(e,t,a,s){var n,i;void 0===t&&(t=null!==(n=e.folder_id)&&void 0!==n?n:0);const r=this.appPeersManager.getPeerId(e.peer);if(!r)return void console.error("saveConversation no peerId???",e,t);"dialog"!==e._&&console.error("saveConversation not regular dialog",e,Object.assign({},e));const o=this.appPeersManager.isChannel(r)?r.toChatId():b.c;if(r.isAnyChat()){const e=this.appChatsManager.getChat(r.toChatId());if("channelForbidden"===e._||e.pFlags.left||e.pFlags.kicked)return}const d=this.appPeersManager.getPeerSearchText(r);this.dialogsIndex.indexObject(r,d);const c=this.getDialogOnly(r);let l,m;if(e.top_message){l=this.appMessagesIdsManager.generateMessageId(e.top_message);const t=(null==c?void 0:c.top_message)&&this.appMessagesManager.getMessageByPeer(r,c.top_message);(null===(i=null==t?void 0:t.pFlags)||void 0===i?void 0:i.is_outgoing)&&c.top_message>=l&&(l=c.top_message),m=this.appMessagesManager.getMessageByPeer(r,l)}else l=this.appMessagesManager.generateTempMessageId(r),m={_:"message",id:l,mid:l,from_id:this.appPeersManager.getOutputPeer(this.appUsersManager.getSelf().id.toPeerId(!1)),peer_id:this.appPeersManager.getOutputPeer(r),deleted:!0,pFlags:{out:!0},date:0,message:""},this.appMessagesManager.saveMessages([m],{isOutgoing:!0});if((null==m?void 0:m.pFlags)||this.appMessagesManager.log.error("saveConversation no message:",e,m),!o&&r.isAnyChat()){const t=this.appChatsManager.getChat(r.toChatId());if(t&&t.migrated_to&&t.pFlags.deactivated){const a=this.appPeersManager.getPeerId(t.migrated_to);this.appMessagesManager.migratedFromTo[r]=a,this.appMessagesManager.migratedToFrom[a]=r,e.migratedTo=a}}if(e.top_message=l,e.read_inbox_max_id=this.appMessagesIdsManager.generateMessageId(c&&!e.read_inbox_max_id?c.read_inbox_max_id:e.read_inbox_max_id),e.read_outbox_max_id=this.appMessagesIdsManager.generateMessageId(c&&!e.read_outbox_max_id?c.read_outbox_max_id:e.read_outbox_max_id),void 0===e.folder_id&&"dialog"===e._&&(e.folder_id=c?c.folder_id:t),e.draft=this.appDraftsManager.saveDraft(r,0,e.draft),e.peerId=r,m.pFlags.is_outgoing){const t=m.pFlags.out;l>e[t?"read_outbox_max_id":"read_inbox_max_id"]?(m.pFlags.unread=!0,e.unread_count||t||++e.unread_count):delete m.pFlags.unread}const g=this.appMessagesManager.getHistoryStorage(r),h=g.history.slice;if(h.length){if(!h.isEnd(P.a.Bottom)){g.history.insertSlice([l]).setEnd(P.a.Bottom),g.count||(g.count=1),this.appMessagesManager.mergeReplyKeyboard(g,m)&&f.default.dispatchEvent("history_reply_markup",{peerId:r})}}else g.history.unshift(l),g.count||(g.count=1),this.appMessagesManager.mergeReplyKeyboard(g,m)&&f.default.dispatchEvent("history_reply_markup",{peerId:r});g.maxId=l,g.readMaxId=e.read_inbox_max_id,g.readOutboxMaxId=e.read_outbox_max_id,this.appNotificationsManager.savePeerSettings({peerId:r,settings:e.notify_settings}),o&&e.pts&&this.apiUpdatesManager.addChannelState(o,e.pts),this.generateIndexForDialog(e),Object(p.c)(e,["index_0","index_1","index_2","index_3","index_4","index_5","index_6","index_7","index_8","index_9","index_10"]),c&&Object(p.i)(c,e),this.pushDialog(e,m.date,a,s)}getDialogIndexKey(e){return e>1?"index_"+this.appMessagesManager.filtersStorage.getFilter(e).orderIndex:"index"}getDialogs(e="",t,a=20,s=0,n=!1){const i={};if(s>1){const r=[],o=this.appUsersManager.fillContacts();o.cached||r.push(o.promise);const p=this.appMessagesManager.filtersStorage.reloadMissingPeerIds(s);if(p&&r.push(p),r.length)return i.cached=!1,i.promise=Promise.all(r).then(()=>this.getDialogs(e,t,a,s,n).promise),i}const r=s>1||this.getOffsetDate(s)?void 0:s;let o=this.getFolderDialogs(s,n);const p=this.getDialogIndexKey(s);if(e){if(!a||this.cachedResults.query!==e||this.cachedResults.folderId!==s){this.cachedResults.query=e,this.cachedResults.folderId=s;const t=this.dialogsIndex.search(e),a=[];for(const e in this.dialogs){const n=this.dialogs[e];t.has(n.peerId)&&n.folder_id===s&&a.push(n)}a.sort((e,t)=>t[p]-e[p]),this.cachedResults.dialogs=a,this.cachedResults.count=a.length}o=this.cachedResults.dialogs}else this.cachedResults.query="";let d=0;if(t>0)for(let e=o.length;d<e&&!(t>o[d][p]);++d);const c=this.isDialogsLoaded(r),l=o.length>=d+a;if(e||c||l){const s=o.slice(d,d+a);return i.cached=!0,i.promise=Promise.resolve({dialogs:s,count:c?o.length:null,isTopEnd:o.length&&(s[0]&&s[0]===o[0]||o[0][p]<t),isEnd:(e||c)&&d+a>=o.length}),i}return i.cached=!1,i.promise=this.appMessagesManager.getTopMessages(a,r).then(e=>{if(n&&(o=this.getFolderDialogs(s,n)),d=0,t>0)for(let e=o.length;d<e&&!(t>o[d][p]);++d);const i=o.slice(d,d+a);return{dialogs:i,count:void 0===e.count?o.length:e.count,isTopEnd:o.length&&(i[0]&&i[0]===o[0]||o[0][p]<t),isEnd:e.isEnd}}),i}}var C=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const M=[["pinned_peers","pinnedPeerIds"],["exclude_peers","excludePeerIds"],["include_peers","includePeerIds"]];class w{constructor(e,t,a,s,n,i,r){this.appMessagesManager=e,this.appPeersManager=t,this.appUsersManager=a,this.appNotificationsManager=s,this.appStateManager=n,this.apiUpdatesManager=i,this.rootScope=r,this.onUpdateDialogFilter=e=>{e.filter?this.saveDialogFilter(e.filter):this.filters[e.id]&&(this.rootScope.dispatchEvent("filter_delete",this.filters[e.id]),delete this.filters[e.id]),this.appStateManager.pushToState("filters",this.filters)},this.onUpdateDialogFilterOrder=e=>{this.orderIndex=1,e.order.forEach((e,t)=>{const a=this.filters[e];delete a.orderIndex,this.setOrderIndex(a)}),this.rootScope.dispatchEvent("filter_order",e.order),this.appStateManager.pushToState("filters",this.filters)},this.clear(!0),this.filters={},this.appStateManager.getState().then(e=>{Object(p.i)(this.filters,e.filters);for(const e in this.filters){const t=this.filters[e];t.hasOwnProperty("orderIndex")&&t.orderIndex>=this.orderIndex&&(this.orderIndex=t.orderIndex+1)}}),r.addMultipleEventsListeners({updateDialogFilter:this.onUpdateDialogFilter,updateDialogFilters:e=>{const t=Object(p.a)(this.filters);this.getDialogFilters(!0).then(e=>{for(const a in t){const t=+a;e.find(e=>e.id===t)||this.onUpdateDialogFilter({_:"updateDialogFilter",id:t})}this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:e.map(e=>e.id)})})},updateDialogFilterOrder:this.onUpdateDialogFilterOrder})}clear(e=!1){e?(this.filters={},this.reloadedPeerIds=new Set):(Object(p.i)(this.filters,{}),this.reloadedPeerIds.clear()),this.orderIndex=1}testDialogForFilter(e,t){const a=e.peerId;if(!this.appMessagesManager.getDialogOnly(a))return!1;if(t.excludePeerIds.includes(a))return!1;if(t.includePeerIds.includes(a))return!0;const s=t.pFlags;if(s.exclude_archived&&1===e.folder_id)return!1;if(s.exclude_read&&!this.appMessagesManager.isDialogUnread(e))return!1;if(s.exclude_muted&&this.appNotificationsManager.isPeerLocalMuted(a)&&(!e.unread_mentions_count||!e.unread_count))return!1;if(this.appPeersManager.isAnyChat(a)){if(s.broadcasts&&this.appPeersManager.isBroadcast(a))return!0;if(s.groups&&this.appPeersManager.isAnyGroup(a))return!0}else{const e=a.toUserId();if(this.appUsersManager.isBot(e))return!!s.bots;if(s.non_contacts&&!this.appUsersManager.isContact(e))return!0;if(s.contacts&&this.appUsersManager.isContact(e))return!0}return!1}testDialogForFilterId(e,t){return this.testDialogForFilter(e,this.filters[t])}getFilter(e){return this.filters[e]}toggleDialogPin(e,t){const a=this.filters[t],s=a.pinnedPeerIds.indexOf(e),n=-1!==s;if(n&&(a.pinned_peers.splice(s,1),a.pinnedPeerIds.splice(s,1)),!n){if(a.pinned_peers.length>=this.rootScope.config.pinned_infolder_count_max)return Promise.reject({type:"PINNED_DIALOGS_TOO_MUCH"});a.pinned_peers.unshift(this.appPeersManager.getInputPeerById(e)),a.pinnedPeerIds.unshift(e)}return this.updateDialogFilter(a)}createDialogFilter(e,t){const a=Math.max(1,...Object.keys(this.filters).map(e=>+e));return(e=Object(p.a)(e)).id=a+1,this.updateDialogFilter(e,void 0,t)}updateDialogFilter(e,t=!1,a=!1){const s=t?0:1;return g.a.invokeApi("messages.updateDialogFilter",{flags:s,id:e.id,filter:t?void 0:this.getOutputDialogFilter(e)}).then(s=>{if(s&&(this.onUpdateDialogFilter({_:"updateDialogFilter",id:e.id,filter:t?void 0:e}),a)){const t=[];for(const e in this.filters){const a=this.filters[e];++a.orderIndex,t.push(a)}e.orderIndex=1;const a=t.sort((e,t)=>e.orderIndex-t.orderIndex).map(e=>e.id);this.onUpdateDialogFilterOrder({_:"updateDialogFilterOrder",order:a})}return s})}getOutputDialogFilter(e){const t=Object(p.a)(e);return this.filterIncludedPinnedPeers(e),t}filterIncludedPinnedPeers(e){Object(v.d)(e.includePeerIds,(t,a)=>{e.pinnedPeerIds.includes(t)&&(e.include_peers.splice(a,1),e.includePeerIds.splice(a,1))})}reloadMissingPeerIds(e,t="pinned_peers"){const a=[],s=this.getFilter(e),n=s&&s[t];if(null==n?void 0:n.length){const e=n.filter((e,t)=>{const a=this.appPeersManager.getPeerId(e);return!this.reloadedPeerIds.has(a)&&!this.appMessagesManager.getDialogOnly(a)});if(e.length){const t=e.map(e=>{const t=this.appPeersManager.getPeerId(e),a=this.appMessagesManager.reloadConversation(e);return a.then(()=>{this.reloadedPeerIds.add(t)}),a}),s=Promise.all(t);a.push(s)}}return a.length?Promise.all(a):void 0}getDialogFilters(e=!1){return C(this,void 0,void 0,(function*(){const t=Object.keys(this.filters);if(t.length&&!e)return t.map(e=>this.filters[e]).sort((e,t)=>e.orderIndex-t.orderIndex);const a=yield g.a.invokeApiSingle("messages.getDialogFilters");for(const t of a)this.saveDialogFilter(t,e);return a}))}saveDialogFilter(e,t=!0){M.forEach(([t,a])=>{e[a]=e[t].map(e=>this.appPeersManager.getPeerId(e))}),this.filterIncludedPinnedPeers(e),e.include_peers=e.pinned_peers.concat(e.include_peers),e.includePeerIds=e.pinnedPeerIds.concat(e.includePeerIds);const a=this.filters[e.id];a?Object.assign(a,e):this.filters[e.id]=e,this.setOrderIndex(e),t?this.rootScope.dispatchEvent("filter_update",e):a||this.rootScope.dispatchEvent("filter_new",e)}setOrderIndex(e){e.hasOwnProperty("orderIndex")?e.orderIndex>=this.orderIndex&&(this.orderIndex=e.orderIndex+1):e.orderIndex=this.orderIndex++,this.appStateManager.pushToState("filters",this.filters)}}var k=a(73),A=a(51),E=a(74),T=a(71),D=a(43),U=a(55),x=a(134),O=a(17),F=a(41),R=a(157),B=a(123),V=a(113),L=a(72),j=a(29),N=a(102),q=a(52),G=a(144),H=a(100),z=a(165),W=a(114),K=a(24),$=a(115),J=a(101),Q=a(109),X=a(158),Y=a(166),Z=a(124),ee=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const te=new class{constructor(){this.pendingByRandomId={},this.pendingByMessageId={},this.pendingAfterMsgs={},this.pendingTopMsgs={},this.tempFinalizeCallbacks={},this.sendSmthLazyLoadQueue=new s.a(10),this.needSingleMessages=new Map,this.fetchSingleMessagesPromise=null,this.maxSeenId=0,this.migratedFromTo={},this.migratedToFrom={},this.newMessagesHandleTimeout=0,this.newMessagesToHandle={},this.newDialogsToHandle={},this.newUpdatesAfterReloadToHandle={},this.notificationsHandlePromise=0,this.notificationsToHandle={},this.reloadConversationsPeers=new Map,this.log=Object(m.b)("MESSAGES",m.a.Error|m.a.Debug|m.a.Log|m.a.Warn),this.groupedTempId=0,this.typings={},this.unreadMentions={},this.goToNextMentionPromises={},this.handleNewMessages=()=>{clearTimeout(this.newMessagesHandleTimeout),this.newMessagesHandleTimeout=0,f.default.dispatchEvent("history_multiappend",this.newMessagesToHandle),this.newMessagesToHandle={}},this.handleNewDialogs=()=>{let e=0;const t=this.newDialogsToHandle;for(const a in t){const s=t[a];s?(this.dialogsStorage.pushDialog(s),D.a.isChannel(a.toPeerId())||(e=Math.max(e,s.top_message||0))):(this.reloadConversation(a.toPeerId()),delete t[a])}0!==e&&this.incrementMaxSeenId(e),f.default.dispatchEvent("dialogs_multiupdate",t),this.newDialogsToHandle={}},this.handleNotifications=()=>{window.clearTimeout(this.notificationsHandlePromise),this.notificationsHandlePromise=0;for(const e in this.notificationsToHandle){const t=e.toPeerId();if(f.default.peerId===t&&!f.default.idle.isIDLE)continue;const a=this.notificationsToHandle[t];Promise.all([N.a.getNotifyPeerTypeSettings(),N.a.getNotifySettings(D.a.getInputNotifyPeerById(t,!0))]).then(([e,s])=>{const n=a.topMessage;!N.a.isPeerLocalMuted(t,!0)&&n.pFlags.unread&&n.pFlags.unread&&this.notifyAboutMessage(n,{fwdCount:a.fwdCount,peerTypeNotifySettings:s})})}this.notificationsToHandle={}},this.onUpdateMessageId=e=>{const t=e.random_id,a=this.pendingByRandomId[t];if(a){const{peerId:s,tempId:n,threadId:i,storage:r}=a,o=Q.a.generateMessageId(e.id),p=this.getMessageFromStorage(r,o);p.deleted?this.pendingByMessageId[o]=t:([this.getHistoryStorage(s),i?this.getHistoryStorage(s,i):void 0].filter(Boolean).forEach(e=>{e.history.delete(n)}),this.finalizePendingMessageCallbacks(r,n,p))}},this.onUpdateNewMessage=e=>{var t;const a=e.message,s=this.getMessagePeer(a),n=this.getMessagesStorage(s),i=this.getDialogOnly(s),r="updateNewDiscussionMessage"===e._;this.saveMessages([a],{storage:new Map});const o=this.getThreadKey(a),p=o?+o.split("_")[1]:void 0;if(p&&!r&&this.threadsStorage[s]&&this.threadsStorage[s][p]){const e={_:"updateNewDiscussionMessage",message:a};this.onUpdateNewMessage(e)}if(!i&&!r){let a=!0;if(s.isAnyChat()&&(a=A.a.isInChat(s.toChatId())),a){const a=null!==(t=this.newUpdatesAfterReloadToHandle[s])&&void 0!==t?t:this.newUpdatesAfterReloadToHandle[s]=new Set;if(a.has(e))return void this.log.error("here we go again",s);e.ignoreExisting=!0,a.add(e),this.scheduleHandleNewDialogs(s)}return}this.saveMessages([a],{storage:n});const d=this.checkPendingMessage(a),c=this.getHistoryStorage(s,r?p:void 0);r||this.updateMessageRepliesIfNeeded(a);const l=e.ignoreExisting;if(!!c.history.findSlice(a.mid)){if(!l)return!1}else{const e=c.history.first;if(e.isEnd(P.a.Bottom)){let t=0;for(const s=e.length;t<s&&!(a.mid>e[t]);++t);e.splice(t,0,a.mid)}else c.history.unshift(a.mid);null!==c.count&&c.count++}this.mergeReplyKeyboard(c,a)&&f.default.dispatchEvent("history_reply_markup",{peerId:s});const m=a.fromId;if(m.isUser()&&!a.pFlags.out&&a.from_id){F.a.forceUserOnline(m,a.date);const e={_:"sendMessageCancelAction"};let t;t=s.isUser()?{_:"updateUserTyping",action:e,user_id:m}:D.a.isChannel(s)?{_:"updateChannelUserTyping",action:e,channel_id:s.toChatId(),from_id:D.a.getOutputPeer(m),top_msg_id:p?Q.a.getServerMessageId(p):void 0}:{_:"updateChatUserTyping",action:e,chat_id:s.toChatId(),from_id:D.a.getOutputPeer(m)},k.a.processLocalUpdate(t)}if(d||this.handleNewMessage(s,a.mid),r)return;const g=!a.pFlags.out&&a.pFlags.unread;if(i){if(g&&a.mid>i.top_message){const e=this.dialogsStorage.prepareDialogUnreadCountModifying(i);++i.unread_count,a.pFlags.mentioned&&(++i.unread_mentions_count,this.modifyCachedMentions(s,a.mid,!0)),e()}a.mid>=i.top_message&&this.setDialogTopMessage(a,i)}if(g){const e=s;let t=this.notificationsToHandle[e];void 0===t&&(t=this.notificationsToHandle[e]={fwdCount:0,fromId:b.c}),t.fromId!==m&&(t.fromId=m,t.fwdCount=0),a.fwd_from&&++t.fwdCount,t.topMessage=a,this.notificationsHandlePromise||(this.notificationsHandlePromise=window.setTimeout(this.handleNotifications,0))}},this.onUpdateDialogUnreadMark=e=>{const t=D.a.getPeerId(e.peer.peer),a=this.getDialogOnly(t);if(a){const s=this.dialogsStorage.prepareDialogUnreadCountModifying(a);e.pFlags.unread?a.pFlags.unread_mark=!0:delete a.pFlags.unread_mark,s(),f.default.dispatchEvent("dialogs_multiupdate",{[t]:a}),this.dialogsStorage.setDialogToState(a)}else this.scheduleHandleNewDialogs(t)},this.onUpdateEditMessage=e=>{const t=e.message,a=this.getMessagePeer(t),s=Q.a.generateMessageId(t.id),n=this.getMessagesStorage(a);if(!n.has(s))return;const i=this.getMessageFromStorage(n,s);this.saveMessages([t],{storage:n});const r=this.getMessageFromStorage(n,s);this.handleEditedMessage(i,r);const o=this.getDialogOnly(a),p=o&&o.top_message===s;if(t.clear_history)p&&f.default.dispatchEvent("dialog_flush",{peerId:a});else if(f.default.dispatchEvent("message_edit",{storage:n,peerId:a,mid:s}),p||t.grouped_id){const e={};e[a]=o,f.default.dispatchEvent("dialogs_multiupdate",e),this.dialogsStorage.setDialogToState(o)}},this.onUpdateReadHistory=e=>{const t=e.channel_id,a=Q.a.generateMessageId(e.max_id||e.read_max_id),s=Q.a.generateMessageId(e.top_msg_id),n=t?t.toPeerId(!0):D.a.getPeerId(e.peer),i="updateReadHistoryOutbox"===e._||"updateReadChannelOutbox"===e._||"updateReadChannelDiscussionOutbox"===e._||void 0,r=this.getMessagesStorage(n),o=Object(p.e)(r,"desc"),d=this.getDialogOnly(n),c=e.still_unread_count;let l=0,m=0,g=!1;const h=this.getHistoryStorage(n,s);if(n.isUser()&&i&&F.a.forceUserOnline(n),s){const e=this.threadsToReplies[n+"_"+s];if(e){const[t,a]=e.split("_");this.updateMessage(t.toPeerId(),+a,"replies_updated")}}const u=!s&&d&&this.dialogsStorage.prepareDialogUnreadCountModifying(d);for(let e=0,t=o.length;e<t;e++){const t=o[e];if(t>a)continue;const p=r.get(t);if(p.pFlags.out===i){if(!p.pFlags.unread)break;if(s){const e=p.reply_to;if(!e||(e.reply_to_top_id||e.reply_to_msg_id)!==s)continue}p.pFlags.unread&&(delete p.pFlags.unread,g||(g=!0),p.pFlags.out||s||!d||(void 0===c&&(l=--d.unread_count),p.pFlags.mentioned&&(m=--d.unread_mentions_count,this.modifyCachedMentions(n,p.mid,!1))),N.a.cancel("msg"+t))}}if(i?h.readOutboxMaxId=a:h.readMaxId=a,!s&&d){if(i?d.read_outbox_max_id=a:d.read_inbox_max_id=a,!i){let e;void 0!==c?e=c:l<0||!this.getReadMaxIdIfUnread(n)?e=0:l&&d.top_message>a&&(e=l),void 0!==e&&(d.unread_count=e),(m<0||!d.unread_count)&&(d.unread_mentions_count=0)}u&&u(),this.dialogsStorage.processDialogForFilters(d),f.default.dispatchEvent("dialog_unread",{peerId:n}),this.dialogsStorage.setDialogToState(d)}if(g&&f.default.dispatchEvent("messages_read"),!s&&t){const e=n+"_";for(const t in this.threadsToReplies)if(0===t.indexOf(e)){const[e,a]=this.threadsToReplies[t].split("_");f.default.dispatchEvent("replies_updated",this.getMessageByPeer(e.toPeerId(),+a))}}},this.onUpdateReadMessagesContents=e=>{const t=e.channel_id,a=e.messages.map(e=>Q.a.generateMessageId(e)),s=t?t.toPeerId(!0):this.getMessageById(a[0]).peerId;for(let e=0,t=a.length;e<t;++e){const t=a[e],n=this.getMessageByPeer(s,t);n.deleted?this.fixDialogUnreadMentionsIfNoMessage(s):n.pFlags.media_unread&&(delete n.pFlags.media_unread,this.setDialogToStateIfMessageIsTop(n),!n.pFlags.out&&n.pFlags.mentioned&&this.modifyCachedMentions(s,t,!1))}f.default.dispatchEvent("messages_media_read",{peerId:s,mids:a})},this.onUpdateChannelAvailableMessages=e=>{const t=e.channel_id.toPeerId(!0),a=this.getHistoryStorage(t).history.slice,s=Q.a.generateMessageId(e.available_min_id),n=a.filter(e=>e<=s);e.messages=n,this.onUpdateDeleteMessages(e)},this.onUpdateDeleteMessages=e=>{const t=e.channel_id,a=e.messages.map(e=>Q.a.generateMessageId(e)),s=t?t.toPeerId(!0):this.getMessageById(a[0]).peerId;if(!s)return;g.a.clearCache("messages.getSearchCounters",e=>D.a.getPeerId(e.peer)===s);const n=new Set;for(const e of a){const t=this.getMessageByPeer(s,e),a=this.getThreadKey(t);a&&this.threadsStorage[s]&&this.threadsStorage[s][+a.split("_")[1]]&&n.add(a)}const i=this.handleDeletedMessages(s,this.getMessagesStorage(s),a),r=Array.from(n).map(e=>{const[t,a]=e.split("_");return this.getHistoryStorage(t.toPeerId(),+a)}),o=this.getHistoryStorage(s);[o].concat(r).forEach(e=>{for(const t of i.msgs)e.history.delete(t);i.count&&e.count&&(e.count=Math.max(0,e.count-i.count))}),f.default.dispatchEvent("history_delete",{peerId:s,msgs:i.msgs});const p=this.getDialogOnly(s);if(p){const e=i.unreadMentions||i.unread,t=e&&this.dialogsStorage.prepareDialogUnreadCountModifying(p);if(i.unread&&(p.unread_count=Math.max(0,p.unread_count-i.unread)),i.unreadMentions&&(p.unread_mentions_count=p.unread_count?Math.max(0,p.unread_mentions_count-i.unreadMentions):0),e&&(t(),f.default.dispatchEvent("dialog_unread",{peerId:s})),i.msgs.has(p.top_message)){const e=o.history.first;if(e.isEnd(P.a.Bottom)&&e.length){const t=e[0],a=this.getMessageByPeer(s,t);this.setDialogTopMessage(a,p)}else this.reloadConversation(s)}}},this.onUpdateChannel=e=>{const t=e.channel_id,a=t.toPeerId(!0),s=A.a.getChat(t),n=A.a.isInChat(t);(!!s.username||!s.pFlags.left)!==(void 0!==this.historiesStorage[a])&&(delete this.historiesStorage[a],f.default.dispatchEvent("history_forbidden",a));!!this.getDialogOnly(a)!==n&&(n?this.reloadConversation(a):this.dialogsStorage.dropDialogOnDeletion(a))},this.onUpdateChannelReload=e=>{const t=e.channel_id.toPeerId(!0);this.dialogsStorage.dropDialog(t),delete this.historiesStorage[t],this.reloadConversation(t).then(()=>{f.default.dispatchEvent("history_reload",t)})},this.onUpdateChannelMessageViews=e=>{const t=e.views,a=e.channel_id.toPeerId(!0),s=Q.a.generateMessageId(e.id),n=this.getMessageByPeer(a,s);!n.deleted&&void 0!==n.views&&n.views<t&&(n.views=t,f.default.dispatchEvent("message_views",{peerId:a,mid:s,views:t}),this.setDialogToStateIfMessageIsTop(n))},this.onUpdateServiceNotification=e=>{const t=b.e,a=t,s=this.generateTempMessageId(a),n={_:"message",id:s,from_id:D.a.getOutputPeer(t),peer_id:D.a.getOutputPeer(a),pFlags:{unread:!0},date:(e.inbox_date||Object(r.h)(!0))+u.a.serverTimeOffset,message:e.message,media:e.media,entities:e.entities};F.a.hasUser(t)||F.a.saveApiUsers([{_:"user",id:t,pFlags:{verified:!0},access_hash:"0",first_name:"Telegram",phone:"42777"}]),this.saveMessages([n],{isOutgoing:!0}),e.inbox_date&&(this.pendingTopMsgs[a]=s,this.onUpdateNewMessage({_:"updateNewMessage",message:n,pts:void 0,pts_count:void 0}))},this.onUpdatePinnedMessages=e=>{const t="updatePinnedChannelMessages"===e._?e.channel_id:void 0,a=t?t.toPeerId(!0):D.a.getPeerId(e.peer),s=e.messages.map(e=>Q.a.generateMessageId(e)),n=this.getMessagesStorage(a),i=s.filter(e=>!n.has(e));(i.length?Promise.all(i.map(e=>this.wrapSingleMessage(a,e))):Promise.resolve()).finally(()=>{var t;const i=null===(t=e.pFlags)||void 0===t?void 0:t.pinned;if(i)for(const e of s){n.get(e).pFlags.pinned=!0}else for(const e of s){delete n.get(e).pFlags.pinned}delete this.pinnedMessages[a],O.default.getState().then(e=>{delete e.hiddenPinnedMessages[a],f.default.dispatchEvent("peer_pinned_messages",{peerId:a,mids:s,pinned:i})})})},this.onUpdateNotifySettings=e=>{const{peer:t,notify_settings:a}=e;if("notifyPeer"===t._){const e=D.a.getPeerId(t.peer),s=this.getDialogOnly(e);s&&(s.notify_settings=a,f.default.dispatchEvent("dialog_notify_settings",s),this.dialogsStorage.setDialogToState(s))}},this.onUpdateNewScheduledMessage=e=>{const t=e.message,a=this.getMessagePeer(t),s=this.scheduledMessagesStorage[a];if(s){const e=Q.a.generateMessageId(t.id),n=this.getMessageFromStorage(s,e);this.saveMessages([t],{storage:s,isScheduled:!0});const i=this.getMessageFromStorage(s,e);if(n.deleted){this.checkPendingMessage(t)||f.default.dispatchEvent("scheduled_new",{peerId:a,mid:t.mid})}else this.handleEditedMessage(n,i),f.default.dispatchEvent("message_edit",{storage:s,peerId:a,mid:t.mid})}},this.onUpdateDeleteScheduledMessages=e=>{const t=D.a.getPeerId(e.peer),a=this.scheduledMessagesStorage[t];if(a){const s=e.messages.map(e=>Q.a.generateMessageId(e));this.handleDeletedMessages(t,a,s),f.default.dispatchEvent("scheduled_delete",{peerId:t,mids:s})}},this.clear(),f.default.addMultipleEventsListeners({updateMessageID:this.onUpdateMessageId,updateNewDiscussionMessage:this.onUpdateNewMessage,updateNewMessage:this.onUpdateNewMessage,updateNewChannelMessage:this.onUpdateNewMessage,updateDialogUnreadMark:this.onUpdateDialogUnreadMark,updateEditMessage:this.onUpdateEditMessage,updateEditChannelMessage:this.onUpdateEditMessage,updateReadChannelDiscussionInbox:this.onUpdateReadHistory,updateReadChannelDiscussionOutbox:this.onUpdateReadHistory,updateReadHistoryInbox:this.onUpdateReadHistory,updateReadHistoryOutbox:this.onUpdateReadHistory,updateReadChannelInbox:this.onUpdateReadHistory,updateReadChannelOutbox:this.onUpdateReadHistory,updateChannelReadMessagesContents:this.onUpdateReadMessagesContents,updateReadMessagesContents:this.onUpdateReadMessagesContents,updateChannelAvailableMessages:this.onUpdateChannelAvailableMessages,updateDeleteMessages:this.onUpdateDeleteMessages,updateDeleteChannelMessages:this.onUpdateDeleteMessages,updateChannel:this.onUpdateChannel,updateChannelReload:this.onUpdateChannelReload,updateChannelMessageViews:this.onUpdateChannelMessageViews,updateServiceNotification:this.onUpdateServiceNotification,updatePinnedMessages:this.onUpdatePinnedMessages,updatePinnedChannelMessages:this.onUpdatePinnedMessages,updateNotifySettings:this.onUpdateNotifySettings,updateNewScheduledMessage:this.onUpdateNewScheduledMessage,updateDeleteScheduledMessages:this.onUpdateDeleteScheduledMessages}),f.default.addEventListener("notify_peer_type_settings",({key:e,settings:t})=>{let a;a="notifyUsers"===e?e=>e.peerId.isUser():"notifyBroadcasts"===e?e=>e.peerId.isBroadcast():e=>D.a.isAnyGroup(e.peerId),this.dialogsStorage.getFolderDialogs(0).concat(this.dialogsStorage.getFolderDialogs(1)).filter(a).forEach(e=>{f.default.dispatchEvent("dialog_notify_settings",e)})}),f.default.addEventListener("webpage_updated",({id:e,msgs:t})=>{t.forEach(({peerId:t,mid:a,isScheduled:s})=>{const n=s?this.getScheduledMessagesStorage(t):this.getMessagesStorage(t),i=this.getMessageFromStorage(n,a);i&&(i.media={_:"messageMediaWebPage",webpage:R.a.getWebPage(e)},f.default.dispatchEvent("message_edit",{storage:n,peerId:t,mid:a}))})}),f.default.addEventListener("draft_updated",({peerId:e,threadId:t,draft:a})=>{if(t)return;const s=this.getDialogOnly(e);if(s){if(!t){s.draft=a;let t=!1;a||Q.a.getServerMessageId(s.top_message)?(this.dialogsStorage.generateIndexForDialog(s),this.dialogsStorage.pushDialog(s)):(this.dialogsStorage.dropDialog(e),t=!0),f.default.dispatchEvent("dialog_draft",{peerId:e,dialog:s,drop:t,draft:a,index:s.index})}}else this.reloadConversation(e)}),f.default.addEventListener("poll_update",({poll:e})=>{const t=x.a.pollToMessages[e.id];if(t)for(const e of t){const[t,a]=e.split("_"),s=this.getMessageByPeer(t.toPeerId(),+a);this.setDialogToStateIfMessageIsTop(s)}}),O.default.getState().then(e=>{e.maxSeenMsgId&&(this.maxSeenId=e.maxSeenMsgId)})}clear(){this.middleware?this.middleware.clean():this.middleware=Object($.a)(),this.messagesStorageByPeerId={},this.groupedMessagesStorage={},this.scheduledMessagesStorage={},this.historiesStorage={},this.threadsStorage={},this.searchesStorage={},this.pinnedMessages={},this.threadsServiceMessagesIdsStorage={},this.threadsToReplies={},this.dialogsStorage&&this.dialogsStorage.clear(),this.filtersStorage&&this.filtersStorage.clear()}construct(){this.filtersStorage=new w(this,D.a,F.a,N.a,O.default,k.a,f.default),this.dialogsStorage=new S(this,A.a,D.a,F.a,B.a,N.a,O.default,k.a,u.a,Q.a)}getInputEntities(e){const t=Object(p.a)(e);return t.forEach(e=>{"messageEntityMentionName"===e._&&(e._="inputMessageEntityMentionName",e.user_id=F.a.getUserInput(e.user_id))}),t}invokeAfterMessageIsSent(e,t,a){var s,n;const r=null!==(s=this.tempFinalizeCallbacks[e])&&void 0!==s?s:this.tempFinalizeCallbacks[e]={},o=null!==(n=r[t])&&void 0!==n?n:r[t]={deferred:Object(i.a)()};return o.callback=a,o.deferred}editMessage(e,t,a={}){const{mid:s,peerId:n}=e;if(e.pFlags.is_outgoing)return this.invokeAfterMessageIsSent(s,"edit",e=>this.editMessage(e,t,a));let i=a.entities||[];t&&(t=y.a.parseMarkdown(t,i));const r=a.scheduleDate||(e.pFlags.is_scheduled?e.date:void 0);return g.a.invokeApi("messages.editMessage",{peer:D.a.getInputPeerById(n),id:e.id,message:t,media:a.newMedia,entities:i.length?this.getInputEntities(i):void 0,no_webpage:a.noWebPage,schedule_date:r}).then(e=>{k.a.processUpdateMessage(e)},e=>{if(this.log.error("editMessage error:",e),!e||"MESSAGE_NOT_MODIFIED"!==e.type)return e&&"MESSAGE_EMPTY"===e.type&&(e.handled=!0),Promise.reject(e);e.handled=!0})}sendText(e,t,a={}){if(!t.trim())return Promise.resolve();a.threadId&&!a.replyToMsgId&&(a.replyToMsgId=a.threadId);const s=f.default.config.message_length_max;if(t.length>s){const n=Object(c.g)(t,s);t=n[0],n.length>1&&delete a.webPage;for(let t=1;t<n.length;++t)setTimeout(()=>{this.sendText(e,n[t],a)},t)}e=D.a.getPeerMigratedTo(e)||e;let n=a.entities||[];a.viaBotId||(t=y.a.parseMarkdown(t,n));let i=this.getInputEntities(n);i.length||(i=void 0);const r=this.generateOutgoingMessage(e,a);r.entities=n,r.message=t;const o=a.replyToMsgId?Q.a.getServerMessageId(a.replyToMsgId):void 0,d=D.a.isChannel(e);a.webPage&&(r.media={_:"messageMediaWebPage",webpage:a.webPage});const l=e=>{e?r.error=!0:delete r.error,f.default.dispatchEvent("messages_pending")};return r.send=()=>{l(!1);const s={};let n;return this.pendingAfterMsgs[e]&&(s.afterMessageId=this.pendingAfterMsgs[e].messageId),n=a.viaBotId?g.a.invokeApiAfter("messages.sendInlineBotResult",{peer:D.a.getInputPeerById(e),random_id:r.random_id,reply_to_msg_id:o||void 0,query_id:a.queryId,id:a.resultId,clear_draft:a.clearDraft},s):g.a.invokeApiAfter("messages.sendMessage",{no_webpage:a.noWebPage,peer:D.a.getInputPeerById(e),message:t,random_id:r.random_id,reply_to_msg_id:o||void 0,entities:i,clear_draft:a.clearDraft,schedule_date:a.scheduleDate||void 0,silent:a.silent},s),this.pendingAfterMsgs[e]=s,n.then(e=>{if("updateShortSentMessage"===e._){const t=r.promise;delete r.promise;const s=Object(p.a)(r);r.promise=t,s.date=e.date,s.id=e.id,s.media=e.media,s.entities=e.entities,this.wrapMessageEntities(s),e.pFlags.out&&(s.pFlags.out=!0),e={_:"updates",users:[],chats:[],seq:0,date:void 0,updates:[{_:"updateMessageID",random_id:r.random_id,id:s.id},{_:a.scheduleDate?"updateNewScheduledMessage":d?"updateNewChannelMessage":"updateNewMessage",message:s,pts:e.pts,pts_count:e.pts_count}]}}else e.updates&&e.updates.forEach(e=>{"updateDraftMessage"===e._&&(e.local=!0)});k.a.processUpdateMessage(e),r.promise.resolve()},e=>{l(!0),r.promise.reject(e)}).finally(()=>{this.pendingAfterMsgs[e]===s&&delete this.pendingAfterMsgs[e]})},this.beforeMessageSending(r,{isScheduled:!!a.scheduleDate||void 0,threadId:a.threadId,clearDraft:a.clearDraft}),r.promise}sendFile(e,t,a={}){e=D.a.getPeerMigratedTo(e)||e;const s=this.generateOutgoingMessage(e,a),r=a.replyToMsgId?Q.a.getServerMessageId(a.replyToMsgId):void 0;let p,d;const c="mime_type"in t?t.mime_type:t.type,l=t instanceof File?t.name:"",m=!(t instanceof File||t instanceof Blob);let h=a.caption||"";this.log("sendFile",t,c);const u=a.entities||[];h&&(h=y.a.parseMarkdown(h,u));const _=[],v=X.a.has(c);let P,b,I;if(m)p="document",d="";else if(0===c.indexOf("audio/")||["video/ogg"].indexOf(c)>=0){p="audio",d="audio."+("ogg"===c.split("/")[1]?"ogg":"mp3"),I="sendMessageUploadAudioAction",a.isVoiceMessage&&(p="voice",s.pFlags.media_unread=!0);let e={_:"documentAttributeAudio",pFlags:{voice:a.isVoiceMessage},waveform:a.waveform,duration:a.duration||0};_.push(e)}else if(a.isMedia)if(v){p="photo",d="photo."+c.split("/")[1],I="sendMessageUploadPhotoAction";const e={_:"photoSize",w:a.width,h:a.height,type:"full",location:null,size:t.size};P={_:"photo",id:""+s.id,sizes:[e],w:a.width,h:a.height};const n=T.a.getCacheContext(P,e.type);n.downloaded=t.size,n.url=a.objectURL||"",P=U.a.savePhoto(P)}else if(Y.a.has(c)){p="video",d="video.mp4",I="sendMessageUploadVideoAction";const e={_:"documentAttributeVideo",pFlags:{round_message:a.isRoundMessage,supports_streaming:!0},duration:a.duration,w:a.width,h:a.height};_.push(e),a.noSound&&t.size>10240&&t.size<10485760&&_.push({_:"documentAttributeAnimated"})}else p="document",d="document."+c.split("/")[1],I="sendMessageUploadDocumentAction";else p="document",d="document."+c.split("/")[1],I="sendMessageUploadDocumentAction";if(_.push({_:"documentAttributeFilename",file_name:l||d}),-1!==["document","video","audio","voice"].indexOf(p)&&!m){const e=[];b={_:"document",id:""+s.id,duration:a.duration,attributes:_,w:a.width,h:a.height,thumbs:e,mime_type:c,size:t.size};const n=T.a.getCacheContext(b);let i;if(n.downloaded=t.size,n.url=a.objectURL||"",v)_.push({_:"documentAttributeImageSize",w:a.width,h:a.height}),i={_:"photoSize",w:a.width,h:a.height,type:"full",size:t.size};else if("video"===p&&a.thumb){i={_:"photoSize",w:a.thumb.size.width,h:a.thumb.size.height,type:"local-thumb",size:a.thumb.blob.size};const e=T.a.getCacheContext(b,i.type);e.downloaded=i.size,e.url=a.thumb.url}i&&e.push(i),b=E.a.saveDoc(b)}this.log("sendFile",p,d,t.type,a);const S=m?void 0:new n.a({attachMethod:"prepend",tryAgainOnFail:!1,isUpload:!0}),C=Object(i.a)();S&&(S.attachPromise(C),C.cancel=()=>{const e=new Error("Download canceled");e.name="AbortError",C.reject(e)},C.catch(t=>{"AbortError"!==t.name||A||(this.log("cancelling upload",M),this.cancelPendingMessage(s.random_id),this.setTyping(e,{_:"sendMessageCancelAction"}),(null==x?void 0:x.cancel)&&x.cancel())}));const M=m?void 0:{_:P?"messageMediaPhoto":"messageMediaDocument",pFlags:{},preloader:S,photo:P,document:b,promise:C};s.entities=u,s.message=h,s.media=m?{_:"messageMediaDocument",pFlags:{},document:t}:M;const w=e=>{e?s.error=!0:delete s.error,f.default.dispatchEvent("messages_pending")};let A=!1,x=null;return s.send=()=>{if(m){const{id:e,access_hash:a,file_reference:s}=t,n={_:"inputMediaDocument",id:{_:"inputDocument",id:e,access_hash:a,file_reference:s}};C.resolve(n)}else if(t instanceof File||t instanceof Blob){const n=()=>{let n;return A&&!s.error||(A=!1,x=T.a.upload(t),C.notifyAll({done:0,total:t.size})),"video"===p&&a.objectURL&&(n=new Promise((e,t)=>{(a.thumb&&a.thumb.blob?Promise.resolve(a.thumb):Object(o.a)(a.objectURL)).then(a=>{a?T.a.upload(a.blob).then(e,t):e(null)},t)})),x&&x.then(e=>ee(this,void 0,void 0,(function*(){let t;switch(delete s.media.preloader,e.name=d,A=!0,p){case"photo":t={_:"inputMediaUploadedPhoto",file:e};break;default:t={_:"inputMediaUploadedDocument",file:e,mime_type:c,pFlags:{force_file:"sendMessageUploadDocumentAction"===I||void 0},attributes:_}}if(n)try{const e=yield n;t.thumb=e}catch(e){this.log.error("sendFile thumb upload error:",e)}C.resolve(t)})),()=>{w(!0)}),x.addNotifyListener(t=>{const a=Math.max(1,Math.floor(100*t.done/t.total));I&&this.setTyping(e,{_:I,progress:0|a}),C.notifyAll(t)}),C};a.isGroupedItem?n():this.sendSmthLazyLoadQueue.push({load:n})}return C},this.beforeMessageSending(s,{isGroupedItem:a.isGroupedItem,isScheduled:!!a.scheduleDate||void 0,threadId:a.threadId,clearDraft:a.clearDraft}),a.isGroupedItem||(C.then(t=>(this.setTyping(e,{_:"sendMessageCancelAction"}),g.a.invokeApi("messages.sendMedia",{background:a.background,peer:D.a.getInputPeerById(e),media:t,message:h,random_id:s.random_id,reply_to_msg_id:r,schedule_date:a.scheduleDate,silent:a.silent,entities:u,clear_draft:a.clearDraft}).then(e=>{k.a.processUpdateMessage(e)},e=>{if("photo"===p&&400===e.code&&("PHOTO_INVALID_DIMENSIONS"===e.type||"PHOTO_SAVE_FILE_INVALID"===e.type))return e.handled=!0,p="document",void s.send();throw w(!0),e}))),C.then(s.promise.resolve,s.promise.reject)),{message:s,promise:C}}sendAlbum(e,t,a={}){return ee(this,void 0,void 0,(function*(){if(a.threadId&&!a.replyToMsgId&&(a.replyToMsgId=a.threadId),1===t.length)return this.sendFile(e,t[0],Object.assign(Object.assign({},a),a.sendFileDetails[0]));e=D.a.getPeerMigratedTo(e)||e;const s=a.replyToMsgId?Q.a.getServerMessageId(a.replyToMsgId):void 0;let n=a.caption||"",r=a.entities||[];n&&(n=y.a.parseMarkdown(n,r)),this.log("sendAlbum",t,a);const o=""+ ++this.groupedTempId,p=t.map((t,i)=>{const p=a.sendFileDetails[i],d=Object.assign({isGroupedItem:!0,isMedia:a.isMedia,scheduleDate:a.scheduleDate,silent:a.silent,replyToMsgId:s,threadId:a.threadId,groupId:o},p);return 0===i&&(d.caption=n,d.entities=r),this.sendFile(e,t,d).message});a.clearDraft&&setTimeout(()=>{B.a.clearDraft(e,a.threadId)},0);const d=(e,t)=>{t?e.error=!0:delete e.error,f.default.dispatchEvent("messages_pending")},c=D.a.getInputPeerById(e),l=t=>{this.setTyping(e,{_:"sendMessageCancelAction"});const n=Object(i.a)();return this.sendSmthLazyLoadQueue.push({load:()=>g.a.invokeApi("messages.sendMultiMedia",{peer:c,multi_media:t,reply_to_msg_id:s,schedule_date:a.scheduleDate,silent:a.silent,clear_draft:a.clearDraft}).then(e=>{k.a.processUpdateMessage(e),n.resolve()},e=>{p.forEach(e=>d(e,!0)),n.reject(e)})}),n},m=p.map(e=>e.send().then(e=>g.a.invokeApi("messages.uploadMedia",{peer:c,media:e})).then(t=>{let a;if("messageMediaPhoto"===t._){const e=U.a.savePhoto(t.photo);a=U.a.getMediaInput(e)}else if("messageMediaDocument"===t._){const e=E.a.saveDoc(t.document);a=E.a.getMediaInput(e)}const s={_:"inputSingleMedia",media:a,random_id:e.random_id,message:n,entities:r};return n&&(n="",r=[]),s}).catch(t=>{if("AbortError"===t.name)return null;throw this.log.error("sendAlbum upload item error:",t,e),d(e,!0),t}));return Promise.all(m).then(e=>l(e.filter(Boolean)))}))}sendContact(e,t){return this.sendOther(e,F.a.getContactMediaInput(t))}sendOther(e,t,a={}){var s;e=D.a.getPeerMigratedTo(e)||e;const n=this.generateOutgoingMessage(e,a),i=a.replyToMsgId?Q.a.getServerMessageId(a.replyToMsgId):void 0;let r;switch(t._){case"inputMediaPoll":{const e=""+n.id;t.poll.id=e,x.a.savePoll(t.poll,{_:"pollResults",flags:4,total_voters:0,pFlags:{},recent_voters:[]});const{poll:a,results:s}=x.a.getPoll(e);r={_:"messageMediaPoll",poll:a,results:s};break}case"inputMediaPhoto":r={_:"messageMediaPhoto",photo:U.a.getPhoto(t.id.id)};break;case"inputMediaDocument":r={_:"messageMediaDocument",document:E.a.getDoc(t.id.id)};break;case"inputMediaContact":r={_:"messageMediaContact",phone_number:t.phone_number,first_name:t.first_name,last_name:t.last_name,user_id:null!==(s=t.user_id)&&void 0!==s?s:"0",vcard:t.vcard};break;case"inputMediaGeoPoint":r={_:"messageMediaGeo",geo:a.geoPoint};break;case"inputMediaVenue":r={_:"messageMediaVenue",geo:a.geoPoint,title:t.title,address:t.address,provider:t.provider,venue_id:t.venue_id,venue_type:t.venue_type};break;case"messageMediaPending":r=t}n.media=r;return n.send=()=>{const s={};let r;return this.pendingAfterMsgs[e]&&(s.afterMessageId=this.pendingAfterMsgs[e].messageId),r=a.viaBotId?g.a.invokeApiAfter("messages.sendInlineBotResult",{peer:D.a.getInputPeerById(e),random_id:n.random_id,reply_to_msg_id:i||void 0,query_id:a.queryId,id:a.resultId,clear_draft:a.clearDraft,schedule_date:a.scheduleDate,silent:a.silent},s):g.a.invokeApiAfter("messages.sendMedia",{peer:D.a.getInputPeerById(e),media:t,random_id:n.random_id,reply_to_msg_id:i||void 0,message:"",clear_draft:a.clearDraft,schedule_date:a.scheduleDate,silent:a.silent},s),this.pendingAfterMsgs[e]=s,r.then(e=>{e.updates&&e.updates.forEach(e=>{"updateDraftMessage"===e._&&(e.local=!0)}),k.a.processUpdateMessage(e)},e=>{f.default.dispatchEvent("messages_pending")}).finally(()=>{this.pendingAfterMsgs[e]===s&&delete this.pendingAfterMsgs[e]})},this.beforeMessageSending(n,{isScheduled:!!a.scheduleDate||void 0,threadId:a.threadId,clearDraft:a.clearDraft}),n.promise}beforeMessageSending(e,t={}){const a=e.id,s=this.getMessagePeer(e),n=t.isScheduled?this.getScheduledMessagesStorage(s):this.getMessagesStorage(s);if(t.isScheduled)this.saveMessages([e],{storage:n,isScheduled:!0,isOutgoing:!0}),setTimeout(()=>{f.default.dispatchEvent("scheduled_new",{peerId:s,mid:a})},0);else{const i=[this.getHistoryStorage(s),t.threadId?this.getHistoryStorage(s,t.threadId):void 0];for(const e of i)e&&e.history.unshift(a);this.saveMessages([e],{storage:n,isOutgoing:!0}),this.setDialogTopMessage(e),setTimeout(()=>{f.default.dispatchEvent("history_append",{storage:n,peerId:s,mid:a})},0)}this.pendingByRandomId[e.random_id]={peerId:s,tempId:a,threadId:t.threadId,storage:n},!t.isGroupedItem&&e.send&&setTimeout(()=>{t.clearDraft&&B.a.clearDraft(s,t.threadId),e.send()},0)}generateOutgoingMessage(e,t){let a;t.threadId&&!t.replyToMsgId&&(t.replyToMsgId=t.threadId);const s=D.a.isBroadcast(e);if(s){if(D.a.getPeer(e).pFlags.signatures){const e=F.a.getSelf();a=e.first_name+(e.last_name?" "+e.last_name:"")}}return{_:"message",id:this.generateTempMessageId(e),from_id:this.generateFromId(e),peer_id:D.a.getOutputPeer(e),post_author:a,pFlags:this.generateFlags(e),date:t.scheduleDate||Object(r.h)(!0)+u.a.serverTimeOffset,message:"",grouped_id:t.groupId,random_id:Object(d.b)(),reply_to:this.generateReplyHeader(t.replyToMsgId,t.threadId),via_bot_id:t.viaBotId,reply_markup:t.replyMarkup,replies:this.generateReplies(e),views:s&&1,pending:!0,promise:void 0===t.groupId?Object(i.a)():void 0}}generateReplyHeader(e,t){const a={_:"messageReplyHeader",reply_to_msg_id:e||t};return t&&a.reply_to_msg_id!==t&&(a.reply_to_top_id=t),a}generateReplies(e){let t;if(D.a.isBroadcast(e)){const a=L.default.chatsFull[e.toChatId()];(null==a?void 0:a.linked_chat_id)&&(t={_:"messageReplies",flags:1,pFlags:{comments:!0},channel_id:a.linked_chat_id,replies:0,replies_pts:0})}return t}generateFromId(e){return e.isAnyChat()&&(e.isBroadcast()||this.isAnonymousSending(e))?void 0:D.a.getOutputPeer(F.a.getSelf().id.toPeerId())}generateFlags(e){const t={};return e!==F.a.getSelf().id&&(t.out=!0,D.a.isChannel(e)||F.a.isBot(e)||(t.unread=!0)),D.a.isBroadcast(e)&&(t.post=!0),t}generateForwardHeader(e,t){const a=F.a.getSelf().id.toPeerId();if(t.fromId===a&&t.peerId===a&&!t.fwd_from)return;const s={_:"messageFwdHeader",flags:0,date:t.date};return t.fwd_from?(s.from_id=t.fwd_from.from_id,s.from_name=t.fwd_from.from_name,s.post_author=t.fwd_from.post_author):(s.from_id=D.a.getOutputPeer(t.fromId),s.post_author=t.post_author),D.a.isBroadcast(t.peerId)&&(t.post_author&&(s.post_author=t.post_author),s.channel_post=t.id),e===a&&(s.saved_from_msg_id=t.id,s.saved_from_peer=D.a.getOutputPeer(t.peerId)),s}generateFakeAvatarMessage(e,t){const a=Number.MAX_SAFE_INTEGER,s={_:"messageService",action:{_:"messageActionChannelEditPhoto",photo:t},mid:a,peerId:e,date:t.date,fromId:e};return this.getMessagesStorage(e).set(a,s),s}isAnonymousSending(e){var t,a;return e.isAnyChat()&&(null===(a=null===(t=D.a.getPeer(e).admin_rights)||void 0===t?void 0:t.pFlags)||void 0===a?void 0:a.anonymous)}setDialogTopMessage(e,t=this.getDialogOnly(e.peerId)){if(t){t.top_message=e.mid;this.getHistoryStorage(e.peerId).maxId=e.mid,this.dialogsStorage.generateIndexForDialog(t,!1,e),this.scheduleHandleNewDialogs(e.peerId,t)}}cancelPendingMessage(e){const t=this.pendingByRandomId[e];if(t){const{peerId:a,tempId:s,storage:n}=t,i=this.getHistoryStorage(a);return k.a.processLocalUpdate({_:"updateDeleteMessages",messages:[s],pts:void 0,pts_count:void 0}),i.history.delete(s),delete this.pendingByRandomId[e],n.delete(s),!0}return!1}fillConversations(){return ee(this,void 0,void 0,(function*(){const e=this.middleware.get();for(;!this.dialogsStorage.isDialogsLoaded(void 0);){const t=yield this.getTopMessages(100,void 0);if(!e()||t.isEnd)break}}))}getConversations(e="",t,a,s=0,n){return this.dialogsStorage.getDialogs(e,t,a,s,n)}getReadMaxIdIfUnread(e,t){var a;const s=this.getHistoryStorage(e,t);if(t){const t=this.getHistoryStorage(e),n=Math.max(null!==(a=t.readMaxId)&&void 0!==a?a:0,s.readMaxId);return!this.getMessageByPeer(e,s.maxId).pFlags.out&&n<s.maxId?n:0}{const t=this.getMessageByPeer(e,s.maxId),a=e.isUser()?Math.max(s.readMaxId,s.readOutboxMaxId):s.readMaxId;return!t.pFlags.out&&a<s.maxId?a:0}}getTopMessages(e,t,a){let s=0;void 0===a&&(a=this.dialogsStorage.getOffsetDate(t)),a&&(s=65536*a,a+=u.a.serverTimeOffset);const n=this.middleware.get(),i={folder_id:t,offset_date:a,offset_id:0,offset_peer:D.a.getInputPeerById(void 0),limit:100,hash:"0"};return g.a.invokeApiSingle("messages.getDialogs",i,{noErrorBox:!0}).then(r=>{if(!n()||"messages.dialogsNotModified"===r._)return null;j.b&&this.log("messages.getDialogs result:",r.dialogs,Object.assign({},r.dialogs[0])),a||void 0===t||this.dialogsStorage.resetPinnedOrder(t),a||K.default.setAuthorized(!0),F.a.saveApiUsers(r.users),A.a.saveApiChats(r.chats),this.saveMessages(r.messages);let o=!!a,p=!1;const d={},c=void 0===t?0:t,l=void 0===t;Object(v.d)(r.dialogs,e=>{void 0===e.folder_id&&(e.folder_id=c),this.dialogsStorage.saveDialog(e,void 0,!0,l),o||D.a.isChannel(e.peerId||D.a.getPeerId(e.peer))||(this.incrementMaxSeenId(e.top_message),o=!0),void 0!==e.peerId&&(s&&e.index>s&&(this.scheduleHandleNewDialogs(e.peerId,e),p=!0),Q.a.getServerMessageId(e.read_inbox_max_id)||Q.a.getServerMessageId(e.read_outbox_max_id)||(d[e.peerId]=e,this.log.error("noIdsDialogs",e,i)))});const m=Object.keys(d);if(m.length){const e=m.map(e=>e.toPeerId()),t=e.map(e=>this.reloadConversation(e));Promise.all(t).then(()=>{f.default.dispatchEvent("dialogs_multiupdate",d);for(let t=0;t<e.length;++t)f.default.dispatchEvent("dialog_unread",{peerId:e[t]})})}const g=r.count,h=this.dialogsStorage.getFolderDialogs(t,!1);let u=0;for(let e=0,t=h.length;e<t;++e)Q.a.getServerMessageId(h[e].top_message)&&++u;const y=!g||u>=g||!r.dialogs.length;y&&this.dialogsStorage.setDialogsLoaded(t,!0),p?this.scheduleHandleNewDialogs():f.default.dispatchEvent("dialogs_multiupdate",{});const _=r.dialogs,P=100===e?_:_.slice(0,e);return{isEnd:y&&P[P.length-1]===_[_.length-1],count:g,dialogs:P}})}forwardMessages(e,t,a,s={}){e=D.a.getPeerMigratedTo(e)||e;for(let n=0,i=(a=a.slice().sort((e,t)=>e-t)).length;n<i;++n){const i=a[n],r=this.getMessageByPeer(t,i);r.pFlags.is_outgoing&&(this.sendText(e,r.message,{entities:r.entities,scheduleDate:s.scheduleDate,silent:s.silent}),a.splice(n--,1))}if(!a.length)return Promise.resolve();s.dropCaptions&&(s.dropAuthor=!0);const n={},i=a.map(a=>{var i,r;const o=this.getMessageByPeer(t,a),p=this.generateOutgoingMessage(e,s),d=["entities","media"];s.dropAuthor||(p.fwd_from=this.generateForwardHeader(e,o),d.push("views","forwards")),s.dropCaptions&&o.media||d.push("message"),d.forEach(e=>{p[e]=o[e]});const c=null===(i=p.media)||void 0===i?void 0:i.document;if(c){["round","voice"].includes(c.type)&&(p.pFlags.media_unread=!0)}if(o.grouped_id){(null!==(r=n[o.grouped_id])&&void 0!==r?r:n[o.grouped_id]={tempId:""+ ++this.groupedTempId,messages:[]}).messages.push(p)}return p});for(const e in n){const t=n[e];t.messages.length>1&&t.messages.forEach(e=>{e.grouped_id=t.tempId})}i.forEach(e=>{this.beforeMessageSending(e,{isScheduled:!!s.scheduleDate||void 0})});const r={};this.pendingAfterMsgs[e]&&(r.afterMessageId=this.pendingAfterMsgs[e].messageId);const o=g.a.invokeApiAfter("messages.forwardMessages",{from_peer:D.a.getInputPeerById(t),id:a.map(e=>Q.a.getServerMessageId(e)),random_id:i.map(e=>e.random_id),to_peer:D.a.getInputPeerById(e),with_my_score:s.withMyScore,silent:s.silent,schedule_date:s.scheduleDate,drop_author:s.dropAuthor,drop_media_captions:s.dropCaptions},r).then(e=>{this.log("forwardMessages updates:",e),k.a.processUpdateMessage(e)}).finally(()=>{this.pendingAfterMsgs[e]===r&&delete this.pendingAfterMsgs[e]});return this.pendingAfterMsgs[e]=r,o}generateEmptyMessage(e){return{_:"messageEmpty",id:Q.a.getServerMessageId(e),mid:e,deleted:!0,pFlags:{}}}getMessageFromStorage(e,t){return e&&e.get(t)||this.generateEmptyMessage(t)}createMessageStorage(){return new Map}getMessagesStorage(e){var t;return null!==(t=this.messagesStorageByPeerId[e])&&void 0!==t?t:this.messagesStorageByPeerId[e]=this.createMessageStorage()}getMessageById(e){for(const t in this.messagesStorageByPeerId){if(D.a.isChannel(t.toPeerId()))continue;const a=this.messagesStorageByPeerId[t].get(e);if(a)return a}return this.getMessageFromStorage(null,e)}getMessageByPeer(e,t){return e?this.getMessageFromStorage(this.getMessagesStorage(e),t):this.getMessageById(t)}getMessagePeer(e){return e.peer_id&&D.a.getPeerId(e.peer_id)||b.c}getDialogByPeerId(e){return this.dialogsStorage.getDialog(e)}getDialogOnly(e){return this.dialogsStorage.getDialogOnly(e)}reloadConversation(e){let t;if(void 0!==e){const a=D.a.getPeerId(e);let s=this.reloadConversationsPeers.get(a);if(s&&(t=s.promise),t)return t;t=Object(i.a)(),this.reloadConversationsPeers.set(a,s={inputDialogPeer:D.a.getInputDialogPeerById(e),promise:t})}return this.reloadConversationsPromise||(this.reloadConversationsPromise=new Promise((e,t)=>{setTimeout(()=>{const a=[],s={};for(const[e,{inputDialogPeer:t,promise:n}]of this.reloadConversationsPeers)a.push(t),s[e]=n;this.reloadConversationsPeers.clear();const n=()=>{for(const e in s)s[e].resolve(void 0)};g.a.invokeApi("messages.getPeerDialogs",{peers:a}).then(t=>{this.dialogsStorage.applyDialogs(t),t.dialogs.forEach(e=>{const t=e.peerId;t&&(s[t].resolve(e),delete s[t])}),n(),e()},e=>{n(),t(e)}).finally(()=>{this.reloadConversationsPromise=null,this.reloadConversationsPeers.size&&this.reloadConversation()})},0)})),t||this.reloadConversationsPromise}doFlushHistory(e,t,a){return g.a.invokeApiSingle("messages.deleteHistory",{just_clear:t,revoke:a,peer:e,max_id:0}).then(s=>(k.a.processUpdateMessage({_:"updateShort",update:{_:"updatePts",pts:s.pts,pts_count:s.pts_count}}),!s.offset||this.doFlushHistory(e,t,a)))}flushHistory(e,t,a){return ee(this,void 0,void 0,(function*(){if(D.a.isChannel(e)){const t=this.getHistory(e,0,1),a=t instanceof Promise?yield t:t,s=e.toChatId(),n=a.history[0]||0;return g.a.invokeApiSingle("channels.deleteHistory",{channel:A.a.getChannelInput(s),max_id:Q.a.getServerMessageId(n)}).then(e=>(e&&k.a.processLocalUpdate({_:"updateChannelAvailableMessages",channel_id:s,available_min_id:n}),e))}return this.doFlushHistory(D.a.getInputPeerById(e),t,a).then(()=>{[this.historiesStorage,this.threadsStorage,this.searchesStorage,this.pinnedMessages,this.pendingAfterMsgs,this.pendingTopMsgs].forEach(t=>{delete t[e]});const a=this.needSingleMessages.get(e);if(a&&a.clear(),[this.messagesStorageByPeerId,this.scheduledMessagesStorage].forEach(t=>{const a=t[e];a&&a.clear()}),t)f.default.dispatchEvent("dialog_flush",{peerId:e});else{delete this.notificationsToHandle[e],delete this.typings[e];const t=this.reloadConversationsPeers.get(e);t&&(this.reloadConversationsPeers.delete(e),t.promise.resolve(void 0)),this.dialogsStorage.dropDialogOnDeletion(e)}})}))}onPeerDeleted(e){}hidePinnedMessages(e){return Promise.all([O.default.getState(),this.getPinnedMessage(e)]).then(([t,a])=>{t.hiddenPinnedMessages[e]=a.maxId,f.default.dispatchEvent("peer_pinned_hidden",{peerId:e,maxId:a.maxId})})}getPinnedMessage(e){var t;const a=null!==(t=this.pinnedMessages[e])&&void 0!==t?t:this.pinnedMessages[e]={};return a.promise?a.promise:a.maxId?Promise.resolve(a):a.promise=this.getSearch({peerId:e,inputFilter:{_:"inputMessagesFilterPinned"},maxId:0,limit:1}).then(e=>{var t;return a.count=e.count,a.maxId=null===(t=e.history[0])||void 0===t?void 0:t.mid,a}).finally(()=>{delete a.promise})}updatePinnedMessage(e,t,a,s,n){return g.a.invokeApi("messages.updatePinnedMessage",{peer:D.a.getInputPeerById(e),unpin:a,silent:s,pm_oneside:n,id:Q.a.getServerMessageId(t)}).then(e=>{k.a.processUpdateMessage(e)})}unpinAllMessages(e){return g.a.invokeApiSingle("messages.unpinAllMessages",{peer:D.a.getInputPeerById(e)}).then(t=>{if(k.a.processUpdateMessage({_:"updateShort",update:{_:"updatePts",pts:t.pts,pts_count:t.pts_count}}),!t.offset){return this.getMessagesStorage(e).forEach(e=>{e.pFlags.pinned&&delete e.pFlags.pinned}),f.default.dispatchEvent("peer_pinned_messages",{peerId:e,unpinAll:!0}),delete this.pinnedMessages[e],!0}return this.unpinAllMessages(e)})}getAlbumText(e){const t=this.groupedMessagesStorage[e];let a,s,n,i=0;for(const[e,r]of t)if(r.message){if(++i>1)break;a=r.message,s=r.totalEntities,n=r.entities}return i>1&&(a=void 0,s=void 0,n=void 0),{message:a,entities:n,totalEntities:s}}getMidsByAlbum(e){return Object(p.e)(this.groupedMessagesStorage[e],"asc")}getMidsByMessage(e){var t;return(null===(t=e)||void 0===t?void 0:t.grouped_id)?this.getMidsByAlbum(e.grouped_id):[e.mid]}filterMessages(e,t){const a=[];if(e.grouped_id){const s=this.groupedMessagesStorage[e.grouped_id];for(const[e,n]of s)t(n)&&a.push(n)}else t(e)&&a.push(e);return a}generateTempMessageId(e){const t=this.getDialogOnly(e);return Q.a.generateMessageId((null==t?void 0:t.top_message)||0,!0)}saveMessage(e,t={}){var a,s;if(void 0===e.pFlags&&(e.pFlags={}),"messageEmpty"===e._)return void(e.deleted=!0);const n=this.getMessagePeer(e),i=t.storage||this.getMessagesStorage(n),r="peerChannel"===e.peer_id._,o=r&&A.a.isBroadcast(n.toChatId()),p="message"===e._;t.isOutgoing&&(e.pFlags.is_outgoing=!0);const d=Q.a.generateMessageId(e.id);if(e.mid=d,p){if(t.isScheduled&&(e.pFlags.is_scheduled=!0),e.grouped_id){(null!==(a=this.groupedMessagesStorage[e.grouped_id])&&void 0!==a?a:this.groupedMessagesStorage[e.grouped_id]=new Map).set(d,e)}e.via_bot_id&&(e.viaBotId=e.via_bot_id)}const c=this.getDialogOnly(n);c&&d&&d>c[e.pFlags.out?"read_outbox_max_id":"read_inbox_max_id"]&&(e.pFlags.unread=!0),e.reply_to&&(e.reply_to.reply_to_msg_id&&(e.reply_to.reply_to_msg_id=e.reply_to_mid=Q.a.generateMessageId(e.reply_to.reply_to_msg_id)),e.reply_to.reply_to_top_id&&(e.reply_to.reply_to_top_id=Q.a.generateMessageId(e.reply_to.reply_to_top_id))),p&&e.replies&&(e.replies.max_id&&(e.replies.max_id=Q.a.generateMessageId(e.replies.max_id)),e.replies.read_max_id&&(e.replies.read_max_id=Q.a.generateMessageId(e.replies.read_max_id)));const l=!!n;l||(e.date-=u.a.serverTimeOffset);const m=F.a.getSelf().id.toPeerId(),g=p&&e.fwd_from;if(e.peerId=n,e.fromId=n===m?g?g.from_id?D.a.getPeerId(g.from_id):b.c:m:e.pFlags.post||!e.from_id?n:D.a.getPeerId(e.from_id),g){g.saved_from_msg_id&&(g.saved_from_msg_id=Q.a.generateMessageId(g.saved_from_msg_id)),g.channel_post&&(g.channel_post=Q.a.generateMessageId(g.channel_post));const t=g.saved_from_peer||g.from_id,a=g.saved_from_msg_id||g.channel_post;if(t&&a){const s=D.a.getPeerId(t),n=Q.a.generateMessageId(a);e.savedFrom=s+"_"+n}e.fwdFromId=D.a.getPeerId(g.from_id),l||(g.date-=u.a.serverTimeOffset)}const h={type:"message",peerId:n,messageId:d};if(p&&e.media)switch(e.media._){case"messageMediaEmpty":delete e.media;break;case"messageMediaPhoto":e.media.ttl_seconds?e.media={_:"messageMediaUnsupported"}:e.media.photo=U.a.savePhoto(e.media.photo,h),e.media.photo||delete e.media;break;case"messageMediaPoll":{const t=x.a.savePoll(e.media.poll,e.media.results,e);e.media.poll=t.poll,e.media.results=t.results;break}case"messageMediaDocument":e.media.ttl_seconds?e.media={_:"messageMediaUnsupported"}:e.media.document=E.a.saveDoc(e.media.document,h);break;case"messageMediaWebPage":{const a=R.a.getMessageKeyForPendingWebPage(n,d,t.isScheduled);e.media.webpage=R.a.saveWebPage(e.media.webpage,a,h);break}case"messageMediaInvoice":e.media={_:"messageMediaUnsupported"};break;case"messageMediaUnsupported":e.message="",delete e.entities,delete e.totalEntities}if(!p&&e.action){const t=e.action;let a,i;const p=e.fromId===F.a.getSelf().id?"You":"";switch(t.photo&&(t.photo=U.a.savePhoto(t.photo,h)),t.document&&(t.document=E.a.saveDoc(t.photo,h)),t._){case"messageActionChatEditPhoto":(null===(s=t.photo)||void 0===s?void 0:s.video_sizes)?t._=o?"messageActionChannelEditVideo":"messageActionChatEditVideo":o&&(t._="messageActionChannelEditPhoto");break;case"messageActionGroupCall":{let e;Z.a.saveGroupCall(t.call),e=void 0===t.duration?"started":"ended",o||(e+="_by"+p),t.type=e;break}case"messageActionChatEditTitle":o&&(t._="messageActionChannelEditTitle");break;case"messageActionChatDeletePhoto":o&&(t._="messageActionChannelDeletePhoto");break;case"messageActionChatAddUser":1===t.users.length?(t.user_id=t.users[0],e.fromId===t.user_id&&(t._=r?"messageActionChatJoined"+p:"messageActionChatReturn"+p)):t.users.length>1&&(t._="messageActionChatAddUsers");break;case"messageActionChatDeleteUser":e.fromId===t.user_id&&(t._="messageActionChatLeave"+p);break;case"messageActionChannelMigrateFrom":a=t.chat_id.toPeerId(!0),i=n;break;case"messageActionChatMigrateTo":a=n,i=t.channel_id.toPeerId(!0);break;case"messageActionHistoryClear":e.clear_history=!0,delete e.pFlags.out,delete e.pFlags.unread;break;case"messageActionPhoneCall":t.type=(t.pFlags.video?"video_":"")+(void 0!==t.duration?e.pFlags.out?"out_":"in_":"")+(void 0!==t.duration?"ok":"phoneCallDiscardReasonMissed"===t.reason._?"missed":"cancelled")}a&&i&&!this.migratedFromTo[a]&&!this.migratedToFrom[i]&&this.migrateChecks(a,i)}p&&e.message.length&&!e.totalEntities&&this.wrapMessageEntities(e),i.set(d,e)}saveMessages(e,t={}){e.saved||(e.saved=!0,e.forEach(e=>{this.saveMessage(e,t)}))}wrapMessageEntities(e){const t=e.entities?e.entities.slice():[];e.message=y.a.fixEmoji(e.message,t);const a=y.a.parseEntities(e.message);e.totalEntities=y.a.mergeEntities(t,a)}wrapMessageForReply(e,t=e.message,a,s,n,i){const r=[];let o=!1;const p=(e,t)=>{if(e){if(void 0===t&&o)return;t=s?l.default.format(e,!0):Object(l.i18n)(e)}if(s)r.push(t);else{const e=document.createElement("i");"string"==typeof t?e.innerHTML=t:e.append(t),r.push(e)}};let d=e.totalEntities;if(e.media){Object(J.a)(e);let n=!0;if(e.grouped_id){if(a){const t=this.getMidsByMessage(e);if(a.length===t.length){for(const e of t)if(!a.includes(e)){n=!1;break}}else n=!1}if(n){const a=this.getAlbumText(e.grouped_id);t=a.message,d=a.totalEntities,i||(p("AttachAlbum"),o=!0)}}else n=!1;if(!n&&!i||!t){const a=e.media;switch(a._){case"messageMediaPhoto":p("AttachPhoto");break;case"messageMediaDice":p(void 0,s?a.emoticon:y.a.wrapEmojiText(a.emoticon));break;case"messageMediaVenue":t=a.title,p("AttachLocation");break;case"messageMediaGeo":p("AttachLocation");break;case"messageMediaGeoLive":p("AttachLiveLocation");break;case"messageMediaPoll":p(void 0,s?" "+(a.poll.question||"poll"):a.poll.rReply);break;case"messageMediaContact":p("AttachContact");break;case"messageMediaGame":{const e=" "+a.game.title;p(void 0,s?e:y.a.wrapEmojiText(e));break}case"messageMediaDocument":{const e=a.document;if("video"===e.type)p("AttachVideo");else if("voice"===e.type)p("AttachAudio");else if("gif"===e.type)p("AttachGif");else if("round"===e.type)p("AttachRound");else if("sticker"===e.type)e.stickerEmojiRaw&&p(void 0,(s?e.stickerEmojiRaw:e.stickerEmoji)+" "),p("AttachSticker"),t="";else if("audio"===e.type){const t=e.attributes.find(e=>"documentAttributeAudio"===e._&&(e.title||e.performer)),a=" "+(t?[t.title,t.performer].filter(Boolean).join(" - "):e.file_name);p(void 0,s?a:y.a.wrapEmojiText(a))}else p(void 0,s?e.file_name:y.a.wrapEmojiText(e.file_name));break}case"messageMediaUnsupported":p(l.UNSUPPORTED_LANG_PACK_KEY)}}const c=r.length;t&&c&&r.push(", ")}if(e.action){const t=this.wrapMessageActionTextNew(e,s);t&&p(void 0,t)}if(t)if(t=Object(c.f)(t,100),d||(d=[]),s)r.push(y.a.wrapPlainText(t,d));else{if(n){n=n.trim();let e,a=!1,s=new RegExp(Object(c.e)(n),"gi");for(;null!==(e=s.exec(t));)d.push({_:"messageEntityHighlight",length:n.length,offset:e.index}),a=!0;a&&y.a.sortEntities(d)}const e=y.a.wrapRichText(t,{noLinebreaks:!0,entities:d,noLinks:!0,noTextFormat:!0});r.push(Object(G.a)(e))}if(s)return r.join("");{const e=document.createDocumentFragment();return e.append(...r),e}}wrapSenderToPeer(e){const t=document.createElement("span");t.classList.add("sender-title");const a=e.fromId===f.default.myId&&e.peerId!==f.default.myId;if(t.append(a?Object(l.i18n)("FromYou"):new q.a(Object.assign(Object.assign({},this.getMessageSenderPeerIdOrName(e)),{dialog:e.peerId===f.default.myId})).element),D.a.isAnyGroup(e.peerId)||a){const a=new q.a({peerId:e.peerId}).element;t.append("  ",a)}return t}getMessageSenderPeerIdOrName(e){var t;return e.fromId?{peerId:e.fromId}:{fromName:null===(t=e.fwd_from)||void 0===t?void 0:t.from_name}}wrapSentTime(e){const t=document.createElement("span");return t.classList.add("sent-time"),t.append(Object(r.c)(new Date(1e3*e.date))),t}wrapJoinVoiceChatAnchor(e){const t=e.action,{onclick:a,url:s}=y.a.wrapUrl(`tg://voicechat?chat_id=${e.peerId.toChatId()}&id=${t.call.id}&access_hash=${t.call.access_hash}`);if(!a)return document.createElement("span");const n=document.createElement("a");return n.href=s,n.setAttribute("onclick",a+"(this)"),n}wrapMessageActionTextNewUnsafe(e,t){const a=t?void 0:document.createElement("span"),s="action"in e&&e.action;if(s.message){const e=s.message;return t?y.a.wrapPlainText(e):(a.innerHTML=y.a.wrapRichText(e,{noLinebreaks:!0}),a)}{let n,i,o=s._;const p=(e,t)=>t?D.a.getPeerTitle(e,t):new q.a({peerId:e}).element;switch(s._){case"messageActionPhoneCall":o+="."+s.type,i=[Object(z.a)(s.duration,t)];break;case"messageActionGroupCall":o+="."+s.type,i=[],o.endsWith("You")||e.pFlags.post||i.push(p(e.fromId,t)),void 0!==s.duration?i.push(Object(z.a)(s.duration,t)):i.push(this.wrapJoinVoiceChatAnchor(e));break;case"messageActionInviteToGroupCall":{const a=[e.fromId,s.users[0].toPeerId()];let r="Chat.Service.VoiceChatInvitation";const o=F.a.getSelf().id;a[0]===o?r+="ByYou":a[1]===o&&(r+="ForYou"),Object(v.e)(a,o),n=r,i=a.map(e=>p(e,t)),i.push(this.wrapJoinVoiceChatAnchor(e));break}case"messageActionGroupCallScheduled":{const a=new Date,o=new Date(1e3*s.schedule_date),d=(o.getTime()-a.getTime())/864e5,c=new Date(a);c.setDate(c.getDate()+1);const m=D.a.isBroadcast(e.peerId);n=m?"ChatList.Service.VoiceChatScheduled.Channel":"ChatList.Service.VoiceChatScheduled",i=[];const g=F.a.getSelf().id;e.fromId===g?n+="You":m||i.push(p(e.fromId,t));let h,u=[];d<1&&o.getDate()===a.getDate()?h="TodayAtFormattedWithToday":d<2&&o.getDate()===c.getDate()?h="Time.TomorrowAt":(h="formatDateAtTime",u.push(new l.default.IntlDateElement({date:o,options:{day:"2-digit",month:"2-digit",year:"2-digit"}}).element)),u.push(Object(r.f)(o));const y=Object(l.i18n)(h,u);i.push(y);break}case"messageActionChatCreate":{const a=F.a.getSelf().id;e.fromId===a?o+="You":i=[p(e.fromId,t)];break}case"messageActionPinMessage":{const a=e.peerId,s=this.getMessageByPeer(a,e.reply_to_mid);if(i=[p(e.fromId,t)],s.deleted)n="ActionPinnedNoText",e.reply_to_mid&&this.fetchMessageReplyTo(e).then(t=>{t.deleted||e.deleted||(f.default.dispatchEvent("message_edit",{storage:this.getMessagesStorage(a),peerId:a,mid:e.mid}),this.isMessageIsTopMessage(e)&&f.default.dispatchEvent("dialogs_multiupdate",{[a]:this.getDialogOnly(a)}))});else{const e=document.createElement("i");e.dataset.savedFrom=s.peerId+"_"+s.mid,e.dir="auto",e.append(this.wrapMessageForReply(s,void 0,void 0,t)),i.push(e)}break}case"messageActionChatJoinedByRequest":{const a=D.a.isBroadcast(e.peerId);e.pFlags.out?n=a?"RequestToJoinChannelApproved":"RequestToJoinGroupApproved":(n=a?"ChatService.UserJoinedChannelByRequest":"ChatService.UserJoinedGroupByRequest",i=[p(e.fromId,t)]);break}case"messageActionContactSignUp":case"messageActionChatReturn":case"messageActionChatLeave":case"messageActionChatJoined":case"messageActionChatEditPhoto":case"messageActionChatDeletePhoto":case"messageActionChatEditVideo":case"messageActionChatJoinedByLink":case"messageActionChannelEditVideo":case"messageActionChannelDeletePhoto":i=[p(e.fromId,t)];break;case"messageActionChannelEditTitle":case"messageActionChatEditTitle":i=[],"messageActionChatEditTitle"===s._&&i.push(p(e.fromId,t)),i.push(t?s.title:Object(H.a)(y.a.wrapEmojiText(s.title)));break;case"messageActionChatDeleteUser":case"messageActionChatAddUsers":case"messageActionChatAddUser":{const a=s.users||[s.user_id];if(i=[p(e.fromId,t)],a.length>1){const e=Object(l.join)(a.map(e=>p(e.toPeerId(),t)),!1,t);if(t)i.push(...e);else{const t=document.createElement("span");t.append(...e),i.push(t)}}else i.push(p(a[0].toPeerId(),t));break}case"messageActionBotAllowed":{const e=y.a.wrapRichText(s.domain,{entities:[{_:"messageEntityUrl",length:s.domain.length,offset:0}]});i=[Object(H.a)(e)];break}default:n=l.langPack[o]||`[${s._}]`}return n||(n=l.langPack[o],void 0===n&&(n="["+o+"]")),t?l.default.format(n,!0,i):Object(l._i18n)(a,n,i)}}wrapMessageActionTextNew(e,t){try{return this.wrapMessageActionTextNewUnsafe(e,t)}catch(e){return this.log.error("wrapMessageActionTextNewUnsafe error:",e),t?"":document.createElement("span")}}reportMessages(e,t,a,s){return g.a.invokeApiSingle("messages.report",{peer:D.a.getInputPeerById(e),id:t.map(e=>Q.a.getServerMessageId(e)),reason:{_:a},message:s})}startBot(e,t,a){const s=t?t.toPeerId(!0):e.toPeerId();if(a){const t=Object(d.b)();return g.a.invokeApi("messages.startBot",{bot:F.a.getUserInput(e),peer:D.a.getInputPeerById(s),random_id:t,start_param:a}).then(e=>{k.a.processUpdateMessage(e)})}if(t){let a;return a=A.a.isChannel(t)?A.a.inviteToChannel(t,[e]):A.a.addChatUser(t,e,0),a.catch(e=>{if(!e||"USER_ALREADY_PARTICIPANT"!=e.type)throw e;e.handled=!0}).then(()=>{const t=F.a.getUser(e);return this.sendText(s,"/start@"+t.username)})}return this.sendText(s,"/start")}editPeerFolders(e,t){g.a.invokeApi("folders.editPeerFolders",{folder_peers:e.map(e=>({_:"inputFolderPeer",peer:D.a.getInputPeerById(e),folder_id:t}))}).then(e=>{k.a.processUpdateMessage(e)})}toggleDialogPin(e,t){var a;if(t>1)return this.filtersStorage.toggleDialogPin(e,t);const s=this.getDialogOnly(e);if(!s)return Promise.reject();const n=!(null===(a=s.pFlags)||void 0===a?void 0:a.pinned)||void 0;if(n){const e=1===t?f.default.config.pinned_infolder_count_max:f.default.config.pinned_dialogs_count_max;if(this.dialogsStorage.getPinnedOrders(t).length>=e)return Promise.reject({type:"PINNED_DIALOGS_TOO_MUCH"})}return g.a.invokeApi("messages.toggleDialogPin",{peer:D.a.getInputDialogPeerById(e),pinned:n}).then(a=>{if(a){const a=n?{pinned:n}:{};k.a.saveUpdate({_:"updateDialogPinned",peer:D.a.getDialogPeer(e),folder_id:t,pFlags:a})}})}markDialogUnread(e,t){var a;const s=this.getDialogOnly(e);if(!s)return Promise.reject();const n=!t&&!(null===(a=s.pFlags)||void 0===a?void 0:a.unread_mark)||void 0;return g.a.invokeApi("messages.markDialogUnread",{peer:D.a.getInputDialogPeerById(e),unread:n}).then(t=>{if(t){const t=n?{unread:n}:{};this.onUpdateDialogUnreadMark({_:"updateDialogUnreadMark",peer:D.a.getDialogPeer(e),pFlags:t})}})}migrateChecks(e,t){if(!this.migratedFromTo[e]&&!this.migratedToFrom[t]&&A.a.hasChat(t.toChatId())){const a=A.a.getChat(e.toChatId());a&&a.migrated_to&&a.migrated_to.channel_id===t.toChatId()&&(this.migratedFromTo[e]=t,this.migratedToFrom[t]=e,f.default.dispatchEvent("dialog_migrate",{migrateFrom:e,migrateTo:t}),this.dialogsStorage.dropDialogWithEvent(e))}}canMessageBeEdited(e,t){if(e.pFlags.is_outgoing)return!1;const a=["messageMediaPhoto","messageMediaDocument","messageMediaWebPage"];return"poll"===t&&a.push("messageMediaPoll"),!("message"!==e._||e.deleted||e.fwd_from||e.via_bot_id||e.media&&-1===a.indexOf(e.media._)||e.fromId&&F.a.isBot(e.fromId))&&(!e.media||"messageMediaDocument"!==e.media._||!e.media.document.sticker&&"round"!==e.media.document.type)}canEditMessage(e,t="text"){var a;return!(!e||!this.canMessageBeEdited(e,t))&&(this.getMessagePeer(e)===F.a.getSelf().id||!(!e.pFlags.out||e.peerId.isUser()&&e.date<Object(r.h)(!0)-f.default.config.edit_time_limit&&"messageMediaPoll"!==(null===(a=e.media)||void 0===a?void 0:a._)))}canDeleteMessage(e){return e&&(e.peerId.isUser()||e.fromId===f.default.myId||"chat"===A.a.getChat(e.peerId.toChatId())._||A.a.hasRights(e.peerId.toChatId(),"delete_messages"))&&!e.pFlags.is_outgoing}getReplyKeyboard(e){return this.getHistoryStorage(e).replyMarkup}mergeReplyKeyboard(e,t){var a,s;let n=t.reply_markup;if(!n&&!(null===(a=t.pFlags)||void 0===a?void 0:a.out)&&!t.action)return!1;if("replyInlineMarkup"===(null==n?void 0:n._))return!1;const i=e.replyMarkup;if(n)return!(i&&i.mid>=t.mid)&&(!n.pFlags.selective&&(e.maxOutId&&t.mid<e.maxOutId&&n.pFlags.single_use&&(n.pFlags.hidden=!0),n.mid=t.mid,"replyKeyboardHide"!==n._&&(n.fromId=D.a.getPeerId(t.from_id)),e.replyMarkup=n,!0));if(t.pFlags.out)if(i){if(Object(J.a)(i),i.pFlags.single_use&&!i.pFlags.hidden&&(t.mid>i.mid||t.pFlags.is_outgoing)&&t.message)return i.pFlags.hidden=!0,!0}else(!e.maxOutId||t.mid>e.maxOutId)&&(e.maxOutId=t.mid);return Object(J.a)(t),!("messageActionChatDeleteUser"!==(null===(s=t.action)||void 0===s?void 0:s._)||!(i?t.action.user_id===i.fromId:F.a.isBot(t.action.user_id)))&&(e.replyMarkup={_:"replyKeyboardHide",mid:t.mid,pFlags:{}},!0)}getSearchStorage(e,t){return this.searchesStorage[e]||(this.searchesStorage[e]={}),this.searchesStorage[e][t]||(this.searchesStorage[e][t]={history:[]}),this.searchesStorage[e][t]}getSearchCounters(e,t,a=!0){return(a?g.a.invokeApiCacheable:g.a.invokeApi).bind(g.a)("messages.getSearchCounters",{peer:D.a.getInputPeerById(e),filters:t})}filterMessagesByInputFilter(e,t,a,s){const n=[];if(!t.length)return n;let i=!0;const r={},o=[],p=[];switch(e){case"inputMessagesFilterPhotos":r.messageMediaPhoto=!0;break;case"inputMessagesFilterPhotoVideo":r.messageMediaPhoto=!0,r.messageMediaDocument=!0,o.push("video");break;case"inputMessagesFilterVideo":r.messageMediaDocument=!0,o.push("video");break;case"inputMessagesFilterDocument":r.messageMediaDocument=!0,p.push("video");break;case"inputMessagesFilterVoice":r.messageMediaDocument=!0,o.push("voice");break;case"inputMessagesFilterRoundVoice":r.messageMediaDocument=!0,o.push("round","voice");break;case"inputMessagesFilterRoundVideo":r.messageMediaDocument=!0,o.push("round");break;case"inputMessagesFilterMusic":r.messageMediaDocument=!0,o.push("audio");break;case"inputMessagesFilterUrl":r.url=!0;break;case"inputMessagesFilterChatPhotos":r.avatar=!0;break;default:i=!1}if(!i)return n;for(let e=0,i=t.length;e<i;++e){const i=a.get(t[e]);if(!i)continue;let d=!1;if("message"===i._){if(i.media&&r[i.media._]){const e=i.media.document;if(e&&(o.length&&!o.includes(e.type)||p.includes(e.type)))continue;d=!0}else if(r.url&&i.message){const e=["messageEntityTextUrl","messageEntityUrl"];(i.totalEntities.find(t=>e.includes(t._))||y.a.matchUrl(i.message))&&(d=!0)}}else r.avatar&&i.action&&["messageActionChannelEditPhoto","messageActionChatEditPhoto","messageActionChannelEditVideo","messageActionChatEditVideo"].includes(i.action._)&&(d=!0);if(d&&(n.push(i),n.length>=s))break}return n}getSearch({peerId:e,query:t,inputFilter:a,maxId:s,limit:n,nextRate:i,backLimit:r,threadId:o,folderId:p,minDate:d,maxDate:c}){t||(t=""),a||(a={_:"inputMessagesFilterEmpty"}),void 0===n&&(n=20),i||(i=0),r||(r=0),d=d?d/1e3|0:0,c=c?c/1e3|0:0;let l=[];r&&(n+=r);let m;if(!e||r||s||t||1===n||o||(m=this.getHistoryStorage(e),l=this.filterMessagesByInputFilter(a._,m.history.slice,this.getMessagesStorage(e),n)),l.length){if(!(l.length<n))return Promise.resolve({count:0,next_rate:0,offset_id_offset:0,history:l});s=l[l.length-1].mid,n-=l.length}else 0;const h=g.a.invokeApi.bind(g.a);let u;if(e&&!i&&void 0===p)u=h("messages.search",{peer:D.a.getInputPeerById(e),q:t||"",filter:a,min_date:d,max_date:c,limit:n,offset_id:Q.a.getServerMessageId(s)||0,add_offset:r?-r:0,max_id:0,min_id:0,hash:"",top_msg_id:Q.a.getServerMessageId(o)||0},{noErrorBox:!0});else{let r,o=0,l=s&&this.getMessageByPeer(e,s);l&&l.date&&(o=l.id,r=this.getMessagePeer(l)),u=h("messages.searchGlobal",{q:t,filter:a,min_date:d,max_date:c,offset_rate:i,offset_peer:D.a.getInputPeerById(r),offset_id:o,limit:n,folder_id:p},{noErrorBox:!0})}return u.then(e=>{F.a.saveApiUsers(e.users),A.a.saveApiChats(e.chats),this.saveMessages(e.messages),j.b&&this.log("getSearch result:",a,e);const t=e.count||l.length+e.messages.length;return e.messages.forEach(e=>{const t=this.getMessagePeer(e);if(t.isAnyChat()){const e=A.a.getChat(t.toChatId());e.migrated_to&&this.migrateChecks(t,e.migrated_to.channel_id.toPeerId(!0))}l.push(e)}),{count:t,offset_id_offset:e.offset_id_offset||0,next_rate:e.next_rate,history:l}})}subscribeRepliesThread(e,t){const a=e+"_"+t;for(const e in this.threadsToReplies)if(this.threadsToReplies[e]===a)return;this.getDiscussionMessage(e,t)}generateThreadServiceStartMessage(e){const t=e.peerId+"_"+e.mid;if(this.threadsServiceMessagesIdsStorage[t])return;const a=Q.a.getServerMessageId(Math.max(...this.getMidsByMessage(e))),s={_:"messageService",pFlags:{is_single:!0},id:Q.a.generateMessageId(a,!0),date:e.date,from_id:{_:"peerUser",user_id:b.c},peer_id:e.peer_id,action:{_:"messageActionDiscussionStarted"},reply_to:this.generateReplyHeader(e.id)};this.saveMessages([s],{isOutgoing:!0}),this.threadsServiceMessagesIdsStorage[t]=s.mid}getDiscussionMessage(e,t){return g.a.invokeApiSingle("messages.getDiscussionMessage",{peer:D.a.getInputPeerById(e),msg_id:Q.a.getServerMessageId(t)}).then(a=>{var s;A.a.saveApiChats(a.chats),F.a.saveApiUsers(a.users),this.saveMessages(a.messages);const n=this.filterMessages(a.messages[0],e=>!!e.replies)[0],i=n.peerId+"_"+n.mid;this.generateThreadServiceStartMessage(n);const r=this.getHistoryStorage(n.peerId,n.mid);return a.max_id=r.maxId=Q.a.generateMessageId(a.max_id)||0,a.read_inbox_max_id=r.readMaxId=Q.a.generateMessageId(null!==(s=a.read_inbox_max_id)&&void 0!==s?s:n.mid),a.read_outbox_max_id=r.readOutboxMaxId=Q.a.generateMessageId(a.read_outbox_max_id)||0,this.threadsToReplies[i]=e+"_"+t,n})}handleNewMessage(e,t){void 0===this.newMessagesToHandle[e]&&(this.newMessagesToHandle[e]=new Set),this.newMessagesToHandle[e].add(t),this.newMessagesHandleTimeout||(this.newMessagesHandleTimeout=window.setTimeout(this.handleNewMessages,0))}scheduleHandleNewDialogs(e,t){return void 0!==e&&(this.newDialogsToHandle[e]=t),this.newDialogsHandlePromise?this.newDialogsHandlePromise:this.newDialogsHandlePromise=new Promise(e=>{setTimeout(()=>{e(),this.newDialogsHandlePromise=void 0,this.handleNewDialogs()},0)})}deleteMessages(e,t,a){var s,n;let i;const r=t.map(e=>Q.a.getServerMessageId(e));if(e.isAnyChat()&&D.a.isChannel(e)){const a=e.toChatId(),o=A.a.getChat(a);if(!o.pFlags.creator&&!(null===(n=null===(s=o.admin_rights)||void 0===s?void 0:s.pFlags)||void 0===n?void 0:n.delete_messages)&&!(t=t.filter(t=>!!this.getMessageByPeer(e,t).pFlags.out)).length)return;i=g.a.invokeApi("channels.deleteMessages",{channel:A.a.getChannelInput(a),id:r}).then(e=>{k.a.processLocalUpdate({_:"updateDeleteChannelMessages",channel_id:a,messages:t,pts:e.pts,pts_count:e.pts_count})})}else i=g.a.invokeApi("messages.deleteMessages",{revoke:a,id:r}).then(e=>{k.a.processLocalUpdate({_:"updateDeleteMessages",messages:t,pts:e.pts,pts_count:e.pts_count})});return i}readHistory(e,t=0,a,s=!1){if(this.log("readHistory:",e,t,a),!this.getReadMaxIdIfUnread(e,a)&&!s)return this.log("readHistory: isn't unread"),Promise.resolve();const n=this.getHistoryStorage(e,a);if(n.triedToReadMaxId>=t)return Promise.resolve();let i;return a?(n.readPromise||(i=g.a.invokeApi("messages.readDiscussion",{peer:D.a.getInputPeerById(e),msg_id:Q.a.getServerMessageId(a),read_max_id:Q.a.getServerMessageId(t)})),k.a.processLocalUpdate({_:"updateReadChannelDiscussionInbox",channel_id:e.toChatId(),top_msg_id:a,read_max_id:t})):D.a.isChannel(e)?(n.readPromise||(i=g.a.invokeApi("channels.readHistory",{channel:A.a.getChannelInput(e.toChatId()),max_id:Q.a.getServerMessageId(t)})),k.a.processLocalUpdate({_:"updateReadChannelInbox",max_id:t,channel_id:e.toChatId(),still_unread_count:void 0,pts:void 0})):(n.readPromise||(i=g.a.invokeApi("messages.readHistory",{peer:D.a.getInputPeerById(e),max_id:Q.a.getServerMessageId(t)}).then(e=>{k.a.processUpdateMessage({_:"updateShort",update:{_:"updatePts",pts:e.pts,pts_count:e.pts_count}})})),k.a.processLocalUpdate({_:"updateReadHistoryInbox",max_id:t,peer:D.a.getOutputPeer(e),still_unread_count:void 0,pts:void 0,pts_count:void 0})),N.a.soundReset(D.a.getPeerString(e)),n.readPromise?n.readPromise:(n.triedToReadMaxId=t,i.finally(()=>{delete n.readPromise;const{readMaxId:s}=n;this.log("readHistory: promise finally",t,s),s>t&&this.readHistory(e,s,a,!0)}),n.readPromise=i)}readAllHistory(e,t,a=!1){const s=this.getHistoryStorage(e,t);s.maxId&&this.readHistory(e,s.maxId,t,a)}fixDialogUnreadMentionsIfNoMessage(e){const t=this.getDialogOnly(e);(null==t?void 0:t.unread_mentions_count)&&this.reloadConversation(e)}modifyCachedMentions(e,t,a){const s=this.unreadMentions[e];s&&(a?s.first.isEnd(P.a.Top)&&s.insertSlice([t]):s.delete(t))}fixUnreadMentionsCountIfNeeded(e,t){const a=this.getDialogOnly(e);!t.length&&(null==a?void 0:a.unread_mentions_count)&&this.reloadConversation(e)}goToNextMention(e){var t;const a=this.goToNextMentionPromises[e];if(a)return a;const s=null!==(t=this.unreadMentions[e])&&void 0!==t?t:this.unreadMentions[e]=new P.b,n=s.length,i=s.first.isEnd(P.a.Top);if(!n&&i)return this.fixUnreadMentionsCountIfNeeded(e,s),Promise.resolve();let r=Promise.resolve();return!i&&n<25&&(r=this.loadNextMentions(e)),this.goToNextMentionPromises[e]=r.then(()=>{const t=s.last,a=t&&t[t.length-1];a?(s.delete(a),f.default.dispatchEvent("history_focus",{peerId:e,mid:a})):this.fixUnreadMentionsCountIfNeeded(e,s)}).finally(()=>{delete this.goToNextMentionPromises[e]})}loadNextMentions(e){const t=this.unreadMentions[e],a=t.first[0]||1;return this.getUnreadMentions(e,a,-50,50).then(e=>{this.mergeHistoryResult(t,e,1===a?0:a,50,-50)})}getUnreadMentions(e,t,a,s,n=0,i=0){return g.a.invokeApiSingle("messages.getUnreadMentions",{peer:D.a.getInputPeerById(e),offset_id:Q.a.getServerMessageId(t),add_offset:a,limit:s,max_id:Q.a.getServerMessageId(n),min_id:Q.a.getServerMessageId(i)}).then(e=>(Object(J.a)(e),F.a.saveApiUsers(e.users),A.a.saveApiChats(e.chats),this.saveMessages(e.messages),e))}readMessages(e,t){if(!t.length)return Promise.resolve();let a,s;if(t=t.map(e=>Q.a.getServerMessageId(e)),e.isAnyChat()&&D.a.isChannel(e)){const n=e.toChatId();s={_:"updateChannelReadMessagesContents",channel_id:n,messages:t},a=g.a.invokeApi("channels.readMessageContents",{channel:A.a.getChannelInput(n),id:t})}else s={_:"updateReadMessagesContents",messages:t,pts:void 0,pts_count:void 0},a=g.a.invokeApi("messages.readMessageContents",{id:t}).then(e=>{s.pts=e.pts,s.pts_count=e.pts_count,k.a.processLocalUpdate(s)});return k.a.processLocalUpdate(s),a}getHistoryStorage(e,t){var a,s;return t?(this.threadsStorage[e]||(this.threadsStorage[e]={}),null!==(a=this.threadsStorage[e][t])&&void 0!==a?a:this.threadsStorage[e][t]={count:null,history:new P.b}):null!==(s=this.historiesStorage[e])&&void 0!==s?s:this.historiesStorage[e]={count:null,history:new P.b}}setDialogToStateIfMessageIsTop(e){this.isMessageIsTopMessage(e)&&this.dialogsStorage.setDialogToState(this.getDialogOnly(e.peerId))}isMessageIsTopMessage(e){const t=this.getDialogOnly(e.peerId);return t&&t.top_message===e.mid}updateMessageRepliesIfNeeded(e){try{const t=this.getThreadKey(e);if(t){const e=this.threadsToReplies[t];if(e){const[t,a]=e.split("_");this.updateMessage(t.toPeerId(),+a,"replies_updated")}}}catch(t){this.log.error("incrementMessageReplies err",t,e)}}getThreadKey(e){var t;let a="";if((null===(t=e.peerId)||void 0===t?void 0:t.isAnyChat())&&e.reply_to){const t=e.reply_to.reply_to_top_id||e.reply_to.reply_to_msg_id;a=e.peerId+"_"+t}return a}updateMessage(e,t,a){return this.wrapSingleMessage(e,t,!0).then(()=>{const s=this.getMessageByPeer(e,t);return a&&f.default.dispatchEvent(a,s),s})}checkPendingMessage(e){const t=this.pendingByMessageId[e.mid];let a;if(t){const s=this.pendingByRandomId[t];(a=this.finalizePendingMessage(t,e))&&f.default.dispatchEvent("history_update",{storage:s.storage,peerId:e.peerId,mid:e.mid}),delete this.pendingByMessageId[e.mid]}return a}mutePeer(e,t){const a={_:"inputPeerNotifySettings"};return void 0===t&&(t=!N.a.isPeerLocalMuted(e,!1)),a.mute_until=t?b.b:0,N.a.updateNotifySettings({_:"inputNotifyPeer",peer:D.a.getInputPeerById(e)},a)}canSendToPeer(e,t,a="send_messages"){if(e.isAnyChat()){const s=A.a.getChat(e.toChatId());return A.a.hasRights(e.toChatId(),a,void 0,!!t)&&(!s.pFlags.left||!!t)}return F.a.canSendToUser(e)}finalizePendingMessage(e,t){const a=this.pendingByRandomId[e];if(a){const{peerId:s,tempId:n,threadId:i,storage:r}=a;[this.getHistoryStorage(s),i?this.getHistoryStorage(s,i):void 0].filter(Boolean).forEach(e=>{e.history.delete(n)});const o=this.getMessageFromStorage(r,n);return o.deleted||(delete t.pFlags.is_outgoing,delete t.pending,delete t.error,delete t.random_id,delete t.send),f.default.dispatchEvent("messages_pending"),delete this.pendingByRandomId[e],this.finalizePendingMessageCallbacks(r,n,t),o}}finalizePendingMessageCallbacks(e,t,a){const s=this.tempFinalizeCallbacks[t];if(void 0!==s){for(const e in s){const{deferred:t,callback:n}=s[e];n(a).then(t.resolve,t.reject)}delete this.tempFinalizeCallbacks[t]}if(a.media){Object(J.a)(a);const{photo:e,document:s}=a.media;if(e){const a=U.a.getPhoto(""+t);if(a){const t=e.sizes[e.sizes.length-1],s=T.a.getCacheContext(e,t.type),n=T.a.getCacheContext(a,"full");Object.assign(s,n);const i=e.sizes[e.sizes.length-1],r=U.a.getPhotoDownloadOptions(e,i),o=Object(V.a)(r.location);T.a.fakeDownload(o,n.url)}}else if(s){const e=E.a.getDoc(""+t);if(e&&e.type&&"sticker"!==e.type&&"image/gif"!==e.mime_type){const t=T.a.getCacheContext(s),a=T.a.getCacheContext(e);Object.assign(t,a);const n=E.a.getInputFileName(s);T.a.fakeDownload(n,a.url)}}else a.media.poll&&(delete x.a.polls[t],delete x.a.results[t])}const n=this.getMessageFromStorage(e,t);e.delete(t),this.handleReleasingMessage(n,e),f.default.dispatchEvent("message_sent",{storage:e,tempId:t,tempMessage:n,mid:a.mid,message:a})}incrementMaxSeenId(e){if(!e||this.maxSeenId&&!(e>this.maxSeenId))return!1;this.maxSeenId=e,O.default.pushToState("maxSeenMsgId",e),g.a.invokeApi("messages.receivedMessages",{max_id:Q.a.getServerMessageId(e)})}incrementMessageViews(e,t){if(t.length)return g.a.invokeApiSingle("messages.getMessagesViews",{peer:D.a.getInputPeerById(e),id:t.map(e=>Q.a.getServerMessageId(e)),increment:!0}).then(a=>{const s=new Array(t.length),n=e.toChatId();for(let e=0,i=t.length;e<i;++e)s[e]={_:"updateChannelMessageViews",channel_id:n,id:t[e],views:a.views[e].views};k.a.processUpdateMessage({_:"updates",updates:s,chats:a.chats,users:a.users})})}notifyAboutMessage(e,t={}){const a=this.getMessagePeer(e),s={},n=D.a.getPeerString(a);let i;i=t.peerTypeNotifySettings.show_previews?"message"===e._&&e.fwd_from&&t.fwdCount?l.default.format("Notifications.Forwarded",!0,[t.fwdCount]):this.wrapMessageForReply(e,void 0,void 0,!0):l.default.format("Notifications.New",!0),s.title=D.a.getPeerTitle(a,!0),a.isAnyChat()&&e.fromId!==e.peerId&&(s.title=D.a.getPeerTitle(e.fromId,!0)+" @ "+s.title),s.title=y.a.wrapPlainText(s.title),s.onclick=()=>{f.default.dispatchEvent("history_focus",{peerId:a,mid:e.mid})},s.message=i,s.key="msg"+e.mid,s.tag=n,s.silent=!0;const r=D.a.getPeerPhoto(a);r?W.a.loadAvatar(a,r,"photo_small").loadPromise.then(t=>{e.pFlags.unread&&(s.image=t,N.a.notify(s))}):N.a.notify(s)}getScheduledMessagesStorage(e){var t;return null!==(t=this.scheduledMessagesStorage[e])&&void 0!==t?t:this.scheduledMessagesStorage[e]=this.createMessageStorage()}getScheduledMessageByPeer(e,t){return this.getMessageFromStorage(this.getScheduledMessagesStorage(e),t)}getScheduledMessages(e){if(!this.canSendToPeer(e))return Promise.resolve([]);const t=this.getScheduledMessagesStorage(e);return t.size?Promise.resolve([...t.keys()]):g.a.invokeApiSingle("messages.getScheduledHistory",{peer:D.a.getInputPeerById(e),hash:""}).then(t=>{if("messages.messagesNotModified"!==t._){F.a.saveApiUsers(t.users),A.a.saveApiChats(t.chats);const a=this.getScheduledMessagesStorage(e);return this.saveMessages(t.messages,{storage:a,isScheduled:!0}),[...a.keys()]}return[]})}sendScheduledMessages(e,t){return g.a.invokeApi("messages.sendScheduledMessages",{peer:D.a.getInputPeerById(e),id:t.map(e=>Q.a.getServerMessageId(e))}).then(e=>{k.a.processUpdateMessage(e)})}deleteScheduledMessages(e,t){return g.a.invokeApi("messages.deleteScheduledMessages",{peer:D.a.getInputPeerById(e),id:t.map(e=>Q.a.getServerMessageId(e))}).then(e=>{k.a.processUpdateMessage(e)})}getMessageWithReplies(e){if(e.peerId===b.d||(e=this.filterMessages(e,e=>!!e.replies)[0])&&e.replies&&e.replies.pFlags.comments&&"777"!==e.replies.channel_id)return e}isFetchIntervalNeeded(e){return e.isAnyChat()&&!A.a.isInChat(e.toChatId())}getNewHistory(e,t){var a;return ee(this,void 0,void 0,(function*(){if(!this.isFetchIntervalNeeded(e))return;const s=this.getHistoryStorage(e,t),n=s.history.slice;if(!n.isEnd(P.a.Bottom))return;delete s.maxId,n.unsetEnd(P.a.Bottom);let i=this.getHistory(e,null!==(a=n[0])&&void 0!==a?a:1,0,50,t);i instanceof Promise&&(i=yield i);for(let t=0,a=i.history.length;t<a;++t)this.handleNewMessage(e,i.history[t]);return s}))}getHistory(e,t=0,a,s,n){const i=this.getHistoryStorage(e,n);let r=0;s&&(r=-s,a+=s);const o=i.history.sliceMe(t,r,a);return!o||o.slice.length!==a&&(o.fulfilled&P.a.Both)!==P.a.Both?this.fillHistoryStorage(e,t,a,r,i,n).then(()=>{const e=i.history.sliceMe(t,r,a);return{count:i.count,history:(null==e?void 0:e.slice)||i.history.constructSlice(),offsetIdOffset:(null==e?void 0:e.offsetIdOffset)||i.count}}):{count:i.count,history:o.slice,offsetIdOffset:o.offsetIdOffset}}isHistoryResultEnd(e,t,a){const{offset_id_offset:s,messages:n}=e,i=e.count||n.length,r=s||0,o=a<0?t+a:t;return{count:i,offsetIdOffset:r,isTopEnd:r>=i-o||i<o,isBottomEnd:!r||a<0&&r+a<=0}}mergeHistoryResult(e,t,a,s,n){const{messages:i}=t,r=this.isHistoryResultEnd(t,s,n),{count:o,offsetIdOffset:p,isTopEnd:d,isBottomEnd:c}=r,l=i.map(e=>e.mid);if(a&&Q.a.getServerMessageId(a)&&!l.includes(a)&&p<o){let e=0;for(const t=l.length;e<t&&!(a>l[e]);++e);l.splice(e,0,a)}const m=e.insertSlice(l)||e.slice;return d&&m.setEnd(P.a.Top),c&&m.setEnd(P.a.Bottom),Object.assign({slice:m,mids:l,messages:i},r)}fillHistoryStorage(e,t,a,s,n,i){return this.requestHistory(e,t,a,s,void 0,i).then(i=>{const{count:r,isBottomEnd:o,slice:p,messages:d}=this.mergeHistoryResult(n.history,i,t,a,s);n.count=r;for(let t=0,a=d.length;t<a;++t){const a=d[t];this.mergeReplyKeyboard(n,a)&&f.default.dispatchEvent("history_reply_markup",{peerId:e})}o&&(n.maxId=p[0])})}requestHistory(e,t,a=0,s=0,n=0,i=0){const r={peer:D.a.getInputPeerById(e),offset_id:Q.a.getServerMessageId(t)||0,offset_date:n,add_offset:s,limit:a,max_id:0,min_id:0,hash:0};i&&(r.msg_id=Q.a.getServerMessageId(i)||0);return g.a.invokeApiSingle(i?"messages.getReplies":"messages.getHistory",r,{noErrorBox:!0}).then(r=>{j.b&&this.log("requestHistory result:",e,r,t,a,s),F.a.saveApiUsers(r.users),A.a.saveApiChats(r.chats),this.saveMessages(r.messages),D.a.isChannel(e)&&k.a.addChannelState(e.toChatId(),r.pts);let o=r.messages.length,p=r.count;o&&r.messages[o-1].deleted&&(r.messages.splice(o-1,1),o--,p--);const d=this.getHistoryStorage(e,i),c=r.messages[o-1];if(o&&c.grouped_id){const t=d.history.findSlice(c.mid);if(t&&t.slice.length+r.messages.length<p)return this.requestHistory(e,c.mid,10,0,n,i).then(e=>r)}return r},t=>{switch(t.type){case"CHANNEL_PRIVATE":let t=A.a.getChat(e.toChatId());t={_:"channelForbidden",access_hash:t.access_hash,title:t.title},k.a.processUpdateMessage({_:"updates",updates:[{_:"updateChannel",channel_id:e.toChatId()}],chats:[t],users:[]})}throw t})}fetchSingleMessages(){return this.fetchSingleMessagesPromise?this.fetchSingleMessagesPromise:this.fetchSingleMessagesPromise=new Promise(e=>{setTimeout(()=>{const t=[];for(const[e,a]of this.needSingleMessages){const s=[...a.keys()],n=s.map(e=>({_:"inputMessageID",id:Q.a.getServerMessageId(e)}));let i;i=e.isAnyChat()&&D.a.isChannel(e)?g.a.invokeApiSingle("channels.getMessages",{channel:A.a.getChannelInput(e.toChatId()),id:n}):g.a.invokeApiSingle("messages.getMessages",{id:n});const r=i.then(e=>{Object(J.a)(e),F.a.saveApiUsers(e.users),A.a.saveApiChats(e.chats),this.saveMessages(e.messages);for(let t=0;t<e.messages.length;++t){const s=e.messages[t],n=Q.a.generateMessageId(s.id);a.get(n).resolve(e.messages[t]),a.delete(n)}if(a.size)for(const[e,t]of a)t.resolve(this.generateEmptyMessage(e))}).finally(()=>{f.default.dispatchEvent("messages_downloaded",{peerId:e,mids:s})});t.push(r)}this.needSingleMessages.clear(),Promise.all(t).finally(()=>{this.fetchSingleMessagesPromise=null,this.needSingleMessages.size&&this.fetchSingleMessages(),e()})},0)})}wrapSingleMessage(e,t,a=!1){const s=this.getMessageByPeer(e,t);if(s.deleted||a){let a=this.needSingleMessages.get(e);a||this.needSingleMessages.set(e,a=new Map);let s=a.get(t);return s||(s=Object(i.a)(),a.set(t,s),this.fetchSingleMessages(),s)}return f.default.dispatchEvent("messages_downloaded",{peerId:e,mids:[t]}),Promise.resolve(s)}fetchMessageReplyTo(e){if(!e.reply_to_mid)return Promise.resolve(this.generateEmptyMessage(0));const t=e.reply_to.reply_to_peer_id?D.a.getPeerId(e.reply_to.reply_to_peer_id):e.peerId;return this.wrapSingleMessage(t,e.reply_to_mid).then(t=>(t.deleted&&delete e.reply_to_mid,t))}setTyping(e,t){let a=this.typings[e];return f.default.myId&&e&&this.canSendToPeer(e)&&e!==f.default.myId&&(null==a?void 0:a.type)!==t._?((null==a?void 0:a.timeout)&&clearTimeout(a.timeout),a=this.typings[e]={type:t._},g.a.invokeApi("messages.setTyping",{peer:D.a.getInputPeerById(e),action:t}).finally(()=>{a===this.typings[e]&&(a.timeout=window.setTimeout(()=>{delete this.typings[e]},6e3))})):Promise.resolve(!1)}handleReleasingMessage(e,t){const a=e.media;if(a){const s=a.webpage||a,n=s.photo||s.document;if((null==n?void 0:n.file_reference)&&h.a.deleteContext(n.file_reference,{type:"message",peerId:e.peerId,messageId:e.mid}),"webpage"in a&&a.webpage){const s=this.getScheduledMessagesStorage(e.peerId)===t,n=R.a.getMessageKeyForPendingWebPage(e.peerId,e.mid,s);R.a.deleteWebPageFromPending(a.webpage,n)}a.poll&&x.a.updatePollToMessage(e,!1)}}handleDeletedMessages(e,t,a){const s={count:0,unread:0,unreadMentions:0,msgs:new Set};for(const n of a){const a=this.getMessageFromStorage(t,n);if(a.deleted){this.fixDialogUnreadMentionsIfNoMessage(e);continue}this.handleReleasingMessage(a,t),this.updateMessageRepliesIfNeeded(a),a.pFlags.out||a.pFlags.is_outgoing||!a.pFlags.unread||(++s.unread,N.a.cancel("msg"+n),a.pFlags.mentioned&&(++s.unreadMentions,this.modifyCachedMentions(e,n,!1))),++s.count,s.msgs.add(n),a.deleted=!0;const i=a.grouped_id;if(i){const e=this.groupedMessagesStorage[i];e&&(e.delete(n),s.albums||(s.albums={}),(s.albums[i]||(s.albums[i]=new Set)).add(n),e.size||(delete s.albums,delete this.groupedMessagesStorage[i]))}t.delete(n);const r=this.newMessagesToHandle[e];r&&r.has(n)&&r.delete(n)}if(s.albums)for(const t in s.albums)f.default.dispatchEvent("album_edit",{peerId:e,groupId:t,deletedMids:[...s.albums[t]]});return s}handleEditedMessage(e,t){var a;if("message"===e._&&(null===(a=e.media)||void 0===a?void 0:a.webpage)){const t=R.a.getMessageKeyForPendingWebPage(e.peerId,e.mid,!!e.pFlags.is_scheduled);R.a.deleteWebPageFromPending(e.media.webpage,t)}}getMediaFromMessage(e){return e.action?e.action.photo:e.media&&(e.media.photo||e.media.document||e.media.webpage&&(e.media.webpage.document||e.media.webpage.photo))}isMentionUnread(e){var t;const a=null===(t=e.media)||void 0===t?void 0:t.document;return e.pFlags.media_unread&&e.pFlags.mentioned&&(!a||!["voice","round"].includes(a.type))}getDialogUnreadCount(e){return e.unread_count||+!!e.pFlags.unread_mark}isDialogUnread(e){return!!this.getDialogUnreadCount(e)}canForward(e){return!e.pFlags.noforwards&&!D.a.noForwards(e.peerId)}};j.a.appMessagesManager=te;t.a=te},function(e,t,a){"use strict";var s=a(29),n=a(31),i=a(32),r=a(15),o=a(51),p=a(41),d=a(16),c=a(47);const l=["#fc5c51","#0fb297","#d09306","#3d72ed","#895dd5","#cd4073","#00c1a6","#fa790f"],m=["red","green","yellow","blue","violet","pink","cyan","orange"],g=[0,7,4,1,6,3,5];["isChannel","isMegagroup","isAnyGroup","isBroadcast","isBot","isContact","isUser","isAnyChat"].forEach(e=>{const t=Array.isArray(e)?e[0]:e,a=Array.isArray(e)?e[1]:e;String.prototype[t]=function(){return h[a](this.toString())},Number.prototype[t]=function(){return h[a](this)}});const h=new class{canPinMessage(e){return e.isUser()||o.a.hasRights(e.toChatId(),"pin_messages")}getPeerPhoto(e){const t=e.isUser()?p.a.getUserPhoto(e.toUserId()):o.a.getChatPhoto(e.toChatId());return"chatPhotoEmpty"!==t._&&"userProfilePhotoEmpty"!==t._?t:null}getPeerMigratedTo(e){if(e.isUser())return!1;const t=o.a.getChat(e.toChatId());return!!(t&&t.migrated_to&&t.pFlags.deactivated)&&this.getPeerId(t.migrated_to)}getPeerTitle(e,t=!1,a=!1){e||(e=r.default.myId);let s="";if(e.isUser()){const t=p.a.getUser(e.toUserId());t.first_name&&(s+=t.first_name),!t.last_name||a&&s||(s+=" "+t.last_name),s=s?s.trim():t.pFlags.deleted?d.default.format("HiddenName",!0):t.username}else{s=o.a.getChat(e.toChatId()).title,a&&(s=s.split(" ")[0])}return t?s:i.a.wrapEmojiText(s)}getOutputPeer(e){if(e.isUser())return{_:"peerUser",user_id:e.toUserId()};const t=e.toChatId();return o.a.isChannel(t)?{_:"peerChannel",channel_id:t}:{_:"peerChat",chat_id:t}}getPeerString(e){return e.isUser()?p.a.getUserString(e.toUserId()):o.a.getChatString(e.toChatId())}getPeerUsername(e){return this.getPeer(e).username||""}getPeer(e){return e.isUser()?p.a.getUser(e.toUserId()):o.a.getChat(e.toChatId())}getPeerId(e){if(void 0!==e&&e.isPeerId&&e.isPeerId())return e;if(Object(n.f)(e)){const t=e.user_id;if(void 0!==t)return t.toPeerId(!1);const a=e.channel_id||e.chat_id;return void 0!==a?a.toPeerId(!0):r.default.myId}if(!e)return c.c;const t="u"===e.charAt(0),a=e.substr(1).split("_");return t?a[0].toPeerId():(a[0]||"").toPeerId(!0)}getDialogPeer(e){return{_:"dialogPeer",peer:this.getOutputPeer(e)}}isChannel(e){return!e.isUser()&&o.a.isChannel(e.toChatId())}isMegagroup(e){return!e.isUser()&&o.a.isMegagroup(e.toChatId())}isAnyGroup(e){return!e.isUser()&&!o.a.isBroadcast(e.toChatId())}isBroadcast(e){return this.isChannel(e)&&!this.isMegagroup(e)}isBot(e){return e.isUser()&&p.a.isBot(e.toUserId())}isContact(e){return e.isUser()&&p.a.isContact(e.toUserId())}isUser(e){return+e>=0}isAnyChat(e){return!this.isUser(e)}getInputNotifyPeerById(e,t){return t?e.isUser()?{_:"inputNotifyUsers"}:this.isBroadcast(e)?{_:"inputNotifyBroadcasts"}:{_:"inputNotifyChats"}:{_:"inputNotifyPeer",peer:this.getInputPeerById(e)}}getInputPeerById(e){if(!e)return{_:"inputPeerEmpty"};if(!e.isUser()){const t=e.toChatId();return o.a.getInputPeer(t)}const t=e.toUserId();return p.a.getUserInputPeer(t)}getInputPeerSelf(){return{_:"inputPeerSelf"}}getInputDialogPeerById(e){return{_:"inputDialogPeer",peer:Object(n.f)(e)?e:this.getInputPeerById(e)}}getPeerColorById(e,t=!0){if(!e)return"";const a=g[Math.abs(+e)%7];return(t?m:l)[a]}getPeerSearchText(e){let t;if(this.isUser(e))t="%pu "+p.a.getUserSearchText(e.toUserId());else{t="%pg "+(o.a.getChat(e.toChatId()).title||"")}return t}getDialogType(e){return this.isMegagroup(e)?"megagroup":this.isChannel(e)?"channel":this.isUser(e)?e===r.default.myId?"saved":"chat":"group"}getDeleteButtonText(e){switch(this.getDialogType(e)){case"channel":return o.a.hasRights(e.toChatId(),"delete_chat")?"ChannelDelete":"ChatList.Context.LeaveChannel";case"megagroup":case"group":return o.a.hasRights(e.toChatId(),"delete_chat")?"DeleteMega":"ChatList.Context.LeaveGroup";default:return"ChatList.Context.DeleteChat"}}noForwards(e){var t;if(e.isUser())return!1;return!!(null===(t=o.a.getChatTyped(e.toChatId()).pFlags)||void 0===t?void 0:t.noforwards)}};s.a.appPeersManager=h,t.a=h},,,,,,,,function(e,t,a){"use strict";var s=a(29),n=a(31),i=a(33),r=a(32),o=a(15),p=a(73),d=a(43),c=a(17),l=a(41);const m=new class{constructor(){this.storage=c.default.storages.chats,this.onChatUpdated=(e,t)=>{var a;p.a.processUpdateMessage(t),(null===(a=null==t?void 0:t.updates)||void 0===a?void 0:a.length)&&this.isChannel(e)&&o.default.dispatchEvent("invalidate_participants",e)},this.clear(!0),o.default.addMultipleEventsListeners({updateChannelParticipant:e=>{i.a.clearCache("channels.getParticipants",t=>t.channel.channel_id===e.channel_id)},updateChatDefaultBannedRights:e=>{const t=d.a.getPeerId(e.peer).toChatId(),a=this.chats[t];a&&(a.default_banned_rights=e.default_banned_rights,o.default.dispatchEvent("chat_update",t))}}),c.default.getState().then(e=>{const t=c.default.storagesResults.chats;if(t.length)for(let e=0,a=t.length;e<a;++e){const a=t[e];a&&(this.chats[a.id]=a)}c.default.addEventListener("peerNeeded",e=>{e.isUser()||this.storage.getFromCache(e.toChatId())||this.storage.set({[e.toChatId()]:this.getChat(e.toChatId())})}),c.default.addEventListener("peerUnneeded",e=>{!e.isUser()&&this.storage.getFromCache(e.toChatId())&&this.storage.delete(e.toChatId())})})}clear(e=!1){if(e)this.chats={};else{const e=c.default.storagesResults.chats;for(const t in this.chats)t&&(c.default.isPeerNeeded(t.toPeerId(!0))||(e.findAndSplice(e=>e.id===t),this.storage.delete(t),delete this.chats[t]))}}saveApiChats(e,t){e.saved||(e.saved=!0,e.forEach(e=>this.saveApiChat(e,t)))}saveApiChat(e,t){var a,s;if("chatEmpty"===e._)return;const i=this.chats[e.id];if(void 0===e.pFlags&&(e.pFlags={}),e.pFlags.min&&void 0!==i)return;e.initials=r.a.getAbbreviation(e.title),"channel"===e._&&void 0===e.participants_count&&void 0!==i&&i.participants_count&&(e.participants_count=i.participants_count);let p=!1,d=!1;if(void 0===i)this.chats[e.id]=e;else{(null===(a=i.photo)||void 0===a?void 0:a.photo_id)!==(null===(s=e.photo)||void 0===s?void 0:s.photo_id)&&(p=!0),i.title!==e.title&&(d=!0),Object(n.i)(i,e),o.default.dispatchEvent("chat_update",e.id)}const l=e.id.toPeerId(!0);p&&o.default.dispatchEvent("avatar_update",l),d&&o.default.dispatchEvent("peer_title_edit",l),c.default.isPeerNeeded(l)&&this.storage.set({[e.id]:e})}getChat(e){return this.chats[e]||{_:"chatEmpty",id:e,deleted:!0,access_hash:"",pFlags:{}}}getChatTyped(e){return this.getChat(e)}combineParticipantBannedRights(e,t){const a=this.getChat(e);if(a.default_banned_rights){t=Object(n.a)(t);const e=a.default_banned_rights.pFlags;for(let a in e)t.pFlags[a]=e[a]}return t}hasRights(e,t,a,s){const n=this.getChat(e);if("chatEmpty"===n._)return!1;if(n.pFlags.deactivated&&"view_messages"!==t)return!1;const i=void 0===a;if(n.pFlags.creator&&i)return!0;if("chatForbidden"===n._||"channelForbidden"===n._||n.pFlags.kicked||n.pFlags.left&&!n.pFlags.megagroup)return!1;if(!a&&!(a=n.admin_rights||n.banned_rights||n.default_banned_rights))return!1;let r={};switch(a&&(r=a.pFlags),t){case"embed_links":case"send_games":case"send_gifs":case"send_inline":case"send_media":case"send_messages":case"send_polls":case"send_stickers":if(!s&&n.pFlags.left)return!1;if("chatBannedRights"===a._&&r[t])return!1;if("channel"===n._&&!n.pFlags.megagroup&&!r.post_messages)return!1;break;case"delete_messages":case"manage_call":return!!r[t];case"pin_messages":return"chatAdminRights"===a._?r[t]||!!r.post_messages:!r[t];case"change_info":case"invite_users":return"chatAdminRights"===a._?r[t]:!r[t];case"change_type":case"delete_chat":return!1;case"ban_users":case"change_permissions":return"chatAdminRights"===a._&&!!r.ban_users;case"view_participants":return!("chat"!==n._&&n.pFlags.broadcast&&!n.pFlags.creator&&!n.admin_rights)}return!0}editChatDefaultBannedRights(e,t){const a=this.getChat(e);return a.default_banned_rights&&a.default_banned_rights.until_date===t.until_date&&Object(n.b)(a.default_banned_rights.pFlags,t.pFlags)?Promise.resolve():i.a.invokeApi("messages.editChatDefaultBannedRights",{peer:d.a.getInputPeerById(e.toPeerId(!0)),banned_rights:t}).then(this.onChatUpdated.bind(this,e))}isChannel(e){const t=this.chats[e];return!(!t||"channel"!==t._&&"channelForbidden"!==t._)}isMegagroup(e){const t=this.chats[e];return!(!t||"channel"!==t._||!t.pFlags.megagroup)}isBroadcast(e){return this.isChannel(e)&&!this.isMegagroup(e)}isInChat(e){let t=!0;const a=this.getChat(e);return("channelForbidden"===a._||"chatForbidden"===a._||"chatEmpty"===a._||a.pFlags.left||a.pFlags.kicked||a.pFlags.deactivated)&&(t=!1),t}getChannelInput(e){const t=this.getChat(e);return"chatEmpty"!==t._&&t.access_hash?{_:"inputChannel",channel_id:e,access_hash:t.access_hash||"0"}:{_:"inputChannelEmpty"}}getInputPeer(e){return this.isChannel(e)?this.getChannelInputPeer(e):this.getChatInputPeer(e)}getChatInputPeer(e){return{_:"inputPeerChat",chat_id:e}}getChannelInputPeer(e){return{_:"inputPeerChannel",channel_id:e,access_hash:this.getChat(e).access_hash||0}}hasChat(e,t){const a=this.chats[e];return Object(n.f)(a)&&(t||!a.pFlags.min)}getChatPhoto(e){const t=this.getChat(e);return t&&t.photo||{_:"chatPhotoEmpty"}}getChatString(e){const t=this.getChat(e);return this.isChannel(e)?(this.isMegagroup(e)?"s":"c")+e+"_"+t.access_hash:"g"+e}createChannel(e){return i.a.invokeApi("channels.createChannel",e).then(e=>{p.a.processUpdateMessage(e);const t=e.chats[0].id;return o.default.dispatchEvent("history_focus",{peerId:t.toPeerId(!0)}),t})}inviteToChannel(e,t){const a=this.getChannelInput(e),s=t.map(e=>l.a.getUserInput(e));return i.a.invokeApi("channels.inviteToChannel",{channel:a,users:s}).then(this.onChatUpdated.bind(this,e))}createChat(e,t){return i.a.invokeApi("messages.createChat",{users:t.map(e=>l.a.getUserInput(e)),title:e}).then(e=>{p.a.processUpdateMessage(e);const t=e.chats[0].id;return o.default.dispatchEvent("history_focus",{peerId:t.toPeerId(!0)}),t})}leaveChannel(e){return i.a.invokeApi("channels.leaveChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}joinChannel(e){return i.a.invokeApi("channels.joinChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}addChatUser(e,t,a=100){return i.a.invokeApi("messages.addChatUser",{chat_id:e,user_id:l.a.getUserInput(t),fwd_limit:a}).then(this.onChatUpdated.bind(this,e))}deleteChatUser(e,t){return i.a.invokeApi("messages.deleteChatUser",{chat_id:e,user_id:l.a.getUserInput(t)}).then(this.onChatUpdated.bind(this,e))}leaveChat(e){return this.deleteChatUser(e,l.a.getSelf().id)}leave(e){return this.isChannel(e)?this.leaveChannel(e):this.leaveChat(e)}delete(e){return this.isChannel(e)?this.deleteChannel(e):this.deleteChat(e)}deleteChannel(e){return i.a.invokeApi("channels.deleteChannel",{channel:this.getChannelInput(e)}).then(this.onChatUpdated.bind(this,e))}deleteChat(e){return i.a.invokeApi("messages.deleteChat",{chat_id:e})}migrateChat(e){const t=this.getChat(e);return"channel"===t._?Promise.resolve(t.id):i.a.invokeApi("messages.migrateChat",{chat_id:e}).then(t=>{this.onChatUpdated(e,t);return t.updates.find(e=>"updateChannel"===e._).channel_id})}updateUsername(e,t){return i.a.invokeApi("channels.updateUsername",{channel:this.getChannelInput(e),username:t}).then(a=>{if(a){this.getChat(e).username=t}return a})}editPhoto(e,t){const a={_:"inputChatUploadedPhoto",file:t};let s;return s=this.isChannel(e)?i.a.invokeApi("channels.editPhoto",{channel:this.getChannelInput(e),photo:a}):i.a.invokeApi("messages.editChatPhoto",{chat_id:e,photo:a}),s.then(e=>{p.a.processUpdateMessage(e)})}editTitle(e,t){let a;return a=this.isChannel(e)?i.a.invokeApi("channels.editTitle",{channel:this.getChannelInput(e),title:t}):i.a.invokeApi("messages.editChatTitle",{chat_id:e,title:t}),a.then(e=>{p.a.processUpdateMessage(e)})}editAbout(e,t){const a=e.toPeerId(!0);return i.a.invokeApi("messages.editChatAbout",{peer:d.a.getInputPeerById(a),about:t}).then(e=>(e&&o.default.dispatchEvent("peer_bio_edit",a),e))}getParticipantPeerId(e){return e.peer?d.a.getPeerId(e.peer):e.user_id.toPeerId()}editBanned(e,t,a){const s="object"!=typeof t?t:this.getParticipantPeerId(t);return i.a.invokeApi("channels.editBanned",{channel:this.getChannelInput(e),participant:d.a.getInputPeerById(s),banned_rights:a}).then(n=>{if(this.onChatUpdated(e,n),"object"==typeof t){const n=Date.now()/1e3|0;p.a.processLocalUpdate({_:"updateChannelParticipant",channel_id:e,date:n,actor_id:void 0,qts:void 0,user_id:s,prev_participant:t,new_participant:Object.keys(a.pFlags).length?{_:"channelParticipantBanned",date:n,banned_rights:a,kicked_by:l.a.getSelf().id,peer:d.a.getOutputPeer(s),pFlags:{}}:void 0})}})}clearChannelParticipantBannedRights(e,t){return this.editBanned(e,t,{_:"chatBannedRights",until_date:0,pFlags:{}})}kickFromChannel(e,t){return this.editBanned(e,t,{_:"chatBannedRights",until_date:0,pFlags:{view_messages:!0}})}kickFromChat(e,t){return this.isChannel(e)?this.kickFromChannel(e,t):this.deleteChatUser(e,t.toUserId())}resolveChannel(e){return i.a.invokeApiSingle("channels.getChannels",{id:[{_:"inputChannel",channel_id:e,access_hash:"0"}]}).then(e=>{this.saveApiChats(e.chats)})}togglePreHistoryHidden(e,t){return this.migrateChat(e).then(e=>i.a.invokeApi("channels.togglePreHistoryHidden",{channel:this.getChannelInput(e),enabled:t})).then(e=>{p.a.processUpdateMessage(e)})}toggleSignatures(e,t){return i.a.invokeApi("channels.toggleSignatures",{channel:this.getChannelInput(e),enabled:t}).then(e=>{p.a.processUpdateMessage(e)})}toggleNoForwards(e,t){return i.a.invokeApi("messages.toggleNoForwards",{peer:this.getInputPeer(e),enabled:t}).then(e=>{p.a.processUpdateMessage(e)})}};s.a.appChatsManager=m,t.a=m},function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var s=a(29),n=a(43),i=a(15),r=a(16),o=a(36),p=a(41),d=a(32),c=a(47);const l=new WeakMap;s.a.peerTitleWeakMap=l,i.default.addEventListener("peer_title_edit",e=>{Array.from(document.querySelectorAll(`.peer-title[data-peer-id="${e}"]`)).forEach(e=>{const t=l.get(e);t&&t.update()})});class m{constructor(e){this.plainText=!1,this.onlyFirstName=!1,this.dialog=!1,this.element=document.createElement("span"),this.element.classList.add("peer-title"),this.element.setAttribute("dir","auto"),this.update(e),l.set(this.element,this)}update(e){if(e)for(let t in e)this.element.dataset[t]=e[t]?""+("boolean"==typeof e[t]?+e[t]:e[t]):"0",this[t]=e[t];void 0===this.fromName?(void 0===this.peerId&&(this.peerId=c.c),this.peerId===i.default.myId&&this.dialog?Object(o.a)(this.element,Object(r.i18n)(this.onlyFirstName?"Saved":"SavedMessages")):this.peerId.isUser()&&p.a.getUser(this.peerId).pFlags.deleted?Object(o.a)(this.element,Object(r.i18n)(this.onlyFirstName?"Deleted":"HiddenName")):this.element.innerHTML=n.a.getPeerTitle(this.peerId,this.plainText,this.onlyFirstName)):this.element.innerHTML=d.b.wrapEmojiText(this.fromName)}}},,,function(e,t,a){"use strict";var s=a(56),n=a(113),i=a(31),r=a(0),o=a(33),p=a(143),d=a(71),c=a(41),l=a(138),m=a(29),g=a(103),h=a(128),u=a(38),y=a(92);class f{constructor(){this.photos={}}savePhoto(e,t){var a;if("photoEmpty"===e._)return;const s=this.photos[e.id];if(e.file_reference&&(Object(i.h)("file_reference",s,e),p.a.saveContext(e.file_reference,t)),null===(a=e.sizes)||void 0===a?void 0:a.length){const t=e.sizes[e.sizes.length-1];"photoSizeProgressive"===t._&&(t.size=t.sizes[t.sizes.length-1])}return s?Object.assign(s,e):this.photos[e.id]=e}choosePhotoSize(e,t=0,a=0,s=!1,n=!1){window.devicePixelRatio>1&&(t*=2,a*=2);let i={_:"photoSizeEmpty",type:""},r=e.sizes||e.thumbs;if(n&&r&&"document"===e._&&(r=r.concat({_:"photoSize",w:e.w,h:e.h,size:e.size,type:void 0})),null==r?void 0:r.length){for(let e=0,s=r.length;e<s;++e){const s=r[e];if(!("w"in s)&&!("h"in s))continue;i=s;const n=Object(h.a)(s.w,s.h,t,a);if(n.width>=t||n.height>=a)break}s&&"photoSizeEmpty"===i._&&"photoStrippedSize"===r[0]._&&(i=r[0])}return i}getUserPhotos(e,t="0",a=20){const s=c.a.getUserInput(e);return o.a.invokeApiCacheable("photos.getUserPhotos",{user_id:s,offset:0,limit:a,max_id:t},{cacheSeconds:60}).then(a=>{c.a.saveApiUsers(a.users);const s=a.photos.map((t,s)=>(a.photos[s]=this.savePhoto(t,{type:"profilePhoto",peerId:e.toPeerId()}),t.id));if("0"!==t&&t){const e=s.indexOf(t);-1!==e&&s.splice(e,1)}return{count:a.count||s.length,photos:s}})}getPreviewURLFromBytes(e,t=!1){let a,s;t?a=e instanceof Uint8Array?e:new Uint8Array(e):(a=new Uint8Array(f.jpegHeader.concat(Array.from(e.slice(3)),f.jpegTail)),a[164]=e[1],a[166]=e[2]),s=t?r.IS_SAFARI?"image/png":"image/webp":"image/jpeg";const n=new Blob([a],{type:s});return URL.createObjectURL(n)}getPathFromPhotoPathSize(e){const t=e.bytes;let a="M";for(let e=0,s=t.length;e<s;++e){const s=t[e];s>=192?a+="AACAAAAHAAALMAAAQASTAVAAAZaacaaaahaaalmaaaqastava.az0123456789-,"[s-128-64]:(s>=128?a+=",":s>=64&&(a+="-"),a+=""+(63&s))}return a+="z",a}getPreviewURLFromThumb(e,t,a=!1){const s=d.a.getCacheContext(e,t.type);return s.url||(s.url=this.getPreviewURLFromBytes(t.bytes,a))}getImageFromStrippedThumb(e,t,a){const s=this.getPreviewURLFromThumb(e,t,!1),n=new Image;n.classList.add("thumbnail");const i=(a?Object(l.a)(s):Promise.resolve(s)).then(e=>Object(g.b)(n,e));return{image:n,loadPromise:i}}setAttachmentSize(e,t,a,s,n=!0,i,r,o){let p;o||(o=this.choosePhotoSize(e,a,s,void 0,r));const d="document"===e._;p=d?Object(u.c)(e.w||o.w||512,e.h||o.h||512):Object(u.c)(o.w||100,o.h||100);let c=Object(u.c)(a,s);c=p=p.aspect(c,n);let l=!0;return d&&!["video","gif"].includes(e.type)||(c.width<200&&c.height<200&&(c=p=p.aspectCovered(Object(u.c)(200,200))),i&&(i.message||i.reply_to_mid||i.media.webpage||i.replies&&i.replies.pFlags.comments&&777!==i.replies.channel_id)&&c.width<320&&(c=Object(u.c)(320,c.height),l=!1),l&&c.width<120&&i&&(c=Object(u.c)(120,c.height),l=!1)),t.style.width=c.width+"px",t.style.height=c.height+"px",{photoSize:o,size:p,isFit:l}}getStrippedThumbIfNeeded(e,t,a,s=!1){if(!t.downloaded||["video","gif"].includes(e.type)||s){if("document"===e._&&t.downloaded&&!s)return null;const n=e.sizes||e.thumbs,i=(null==n?void 0:n.length)?n.find(e=>"photoStrippedSize"===e._):null;if(i&&"bytes"in i)return this.getImageFromStrippedThumb(e,i,a)}return null}getPhotoDownloadOptions(e,t,a,s){const n="document"===e._;if(!t||"photoSizeEmpty"===t._)throw new Error("photoSizeEmpty!");const i=("photoSize"===t._||"photoSizeProgressive"===t._)&&e.access_hash&&e.file_reference,r={_:n?"inputDocumentFileLocation":"inputPhotoFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t.type};return{dcId:e.dc_id,location:r,size:i?t.size:void 0,queueId:a,onlyCache:s}}preloadPhoto(e,t,a,s){const i=this.getPhoto(e);if(!i||"photoEmpty"===i._)throw new Error("preloadPhoto photoEmpty!");if(!t){const e=y.a.width,a=y.a.height;t=this.choosePhotoSize(i,e,a)}const r=d.a.getCacheContext(i,t.type);if(r.downloaded>=("size"in t?t.size:0)&&r.url)return Promise.resolve();const o=this.getPhotoDownloadOptions(i,t,a,s),p=Object(n.a)(o.location);let c=d.a.getDownload(p);return c||(c=d.a.download(o),c.then(e=>{if(!r.downloaded||r.downloaded<e.size){const t=URL.createObjectURL(e);r.downloaded=e.size,r.url=t}return e}).catch(()=>{}),c)}getPhoto(e){return Object(i.f)(e)?e:this.photos[e]}getInput(e){return{_:"inputPhoto",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference}}getMediaInput(e){return{_:"inputMediaPhoto",id:this.getInput(e),ttl_seconds:0}}savePhotoFile(e,t){const a=this.choosePhotoSize(e,65535,65535);if("photoSize"!==a._&&"photoSizeProgressive"!==a._)return;const s=this.getPhotoDownloadOptions(e,a,t);s.fileName="photo"+e.id+".jpg",d.a.downloadToDisc(s,s.fileName)}}f.jpegHeader=Object(s.c)("ffd8ffe000104a46494600010100000100010000ffdb004300281c1e231e19282321232d2b28303c64413c37373c7b585d4964918099968f808c8aa0b4e6c3a0aadaad8a8cc8ffcbdaeef5ffffff9bc1fffffffaffe6fdfff8ffdb0043012b2d2d3c353c76414176f8a58ca5f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8ffc00011080000000003012200021101031101ffc4001f0000010501010101010100000000000000000102030405060708090a0bffc400b5100002010303020403050504040000017d01020300041105122131410613516107227114328191a1082342b1c11552d1f02433627282090a161718191a25262728292a3435363738393a434445464748494a535455565758595a636465666768696a737475767778797a838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae1e2e3e4e5e6e7e8e9eaf1f2f3f4f5f6f7f8f9faffc4001f0100030101010101010101010000000000000102030405060708090a0bffc400b51100020102040403040705040400010277000102031104052131061241510761711322328108144291a1b1c109233352f0156272d10a162434e125f11718191a262728292a35363738393a434445464748494a535455565758595a636465666768696a737475767778797a82838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae2e3e4e5e6e7e8e9eaf2f3f4f5f6f7f8f9faffda000c03010002110311003f00"),f.jpegTail=Object(s.c)("ffd9");const _=new f;m.a&&(m.a.appPhotosManager=_),t.a=_},function(e,t,a){"use strict";function s(e){const t=e.length,a=new Array(t);for(let s=0;s<t;++s)a[s]=(e[s]<16?"0":"")+(e[s]||0).toString(16);return a.join("")}function n(e){const t=e.length,a=new Uint8Array(Math.ceil(t/2));let s=0;t%2&&(a[s++]=parseInt(e.charAt(0),16));for(let n=s;n<t;n+=2)a[s++]=parseInt(e.substr(n,2),16);return a}function i(e){let t,a="";for(let s=e.length,n=0,i=0;i<s;++i)t=i%3,n|=e[i]<<(16>>>t&24),2!==t&&s-i!=1||(a+=String.fromCharCode(r(n>>>18&63),r(n>>>12&63),r(n>>>6&63),r(63&n)),n=0);return a.replace(/A(?=A$|$)/g,"=")}function r(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function o(e,t){const a=e.length;if(a!==t.length)return!1;for(let s=0;s<a;++s)if(e[s]!==t[s])return!1;return!0}function p(e,t){const a=e.length,s=new Uint8Array(a);for(let n=0;n<a;++n)s[n]=e[n]^t[n];return s}function d(e){return e instanceof Uint8Array?e:"string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}function c(...e){const t=e.reduce((e,t)=>e+(t.byteLength||t.length),0),a=new Uint8Array(t);let s=0;return e.forEach(e=>{a.set(e instanceof ArrayBuffer?new Uint8Array(e):e,s),s+=e.byteLength||e.length}),a}function l(e){const t=new Uint8Array(e.byteLength);for(let a=0,s=4*e.length;a<s;++a)t[a]=e[a>>>2]>>>24-a%4*8&255;return t}function m(e){const t=d(e),a=[];for(let e=0,s=t.length;e<s;++e)a[e>>>2]|=t[e]<<24-e%4*8;return new Uint32Array(a)}a.d(t,"f",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"h",(function(){return p})),a.d(t,"i",(function(){return d})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"g",(function(){return m}))},,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"AppProfileManager",(function(){return v}));var s=a(29),n=a(59),i=a(64),r=a(16),o=a(33),p=a(32),d=a(15),c=a(121),l=a(73),m=a(51),g=a(109),h=a(102),u=a(43),y=a(55),f=a(41),_=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};class v{constructor(){this.usersFull={},this.chatsFull={},this.onUpdateUserTyping=e=>{var t;const a=e.user_id?e.user_id.toPeerId():u.a.getPeerId(e.from_id);if(d.default.myId===a||"speakingInGroupCallAction"===e.action._)return;const s=u.a.getPeerId(e),n=null!==(t=this.typingsInPeer[s])&&void 0!==t?t:this.typingsInPeer[s]=[];let i=n.find(e=>e.userId===a);const r=()=>{delete i.timeout;const e=n.indexOf(i);-1!==e&&n.splice(e,1),d.default.dispatchEvent("peer_typings",{peerId:s,typings:n}),n.length||delete this.typingsInPeer[s]};if(i&&void 0!==i.timeout&&clearTimeout(i.timeout),"sendMessageCancelAction"===e.action._){if(!i)return;return void r()}i||(i={userId:a},n.push(i)),i.action=e.action;const o=f.a.hasUser(a);o?f.a.forceUserOnline(a):"updateChatUserTyping"===e._&&e.chat_id&&m.a.hasChat(e.chat_id)&&!m.a.isChannel(e.chat_id)&&P.getChatFull(e.chat_id).then(()=>{void 0!==i.timeout&&f.a.hasUser(a)&&d.default.dispatchEvent("peer_typings",{peerId:s,typings:n})}),i.timeout=window.setTimeout(r,6e3),o&&d.default.dispatchEvent("peer_typings",{peerId:s,typings:n})},this.onUpdatePeerBlocked=e=>{const t=u.a.getPeerId(e.peer_id);if(u.a.isUser(t)){const a=t.toUserId(),s=this.usersFull[a];s&&(e.blocked?s.pFlags.blocked=!0:delete s.pFlags.blocked),d.default.dispatchEvent("user_full_update",a)}d.default.dispatchEvent("peer_block",{peerId:t,blocked:e.blocked})},d.default.addMultipleEventsListeners({updateChatParticipants:e=>{const t=e.participants;if("chatParticipants"===t._){const e=t.chat_id,a=this.chatsFull[e];void 0!==a&&(a.participants=t,d.default.dispatchEvent("chat_full_update",e))}},updateChatParticipantAdd:e=>{const t=this.chatsFull[e.chat_id];if(void 0!==t){const a=t.participants,s=a.participants||[];for(let t=0,a=s.length;t<a;t++)if(s[t].user_id===e.user_id)return;s.push({_:"chatParticipant",user_id:e.user_id,inviter_id:e.inviter_id,date:Object(n.h)(!0)}),a.version=e.version,d.default.dispatchEvent("chat_full_update",e.chat_id)}},updateChatParticipantDelete:e=>{const t=this.chatsFull[e.chat_id];if(void 0!==t){const a=t.participants,s=a.participants||[];for(let t=0,n=s.length;t<n;t++)if(s[t].user_id===e.user_id)return s.splice(t,1),a.version=e.version,void d.default.dispatchEvent("chat_full_update",e.chat_id)}},updateUserTyping:this.onUpdateUserTyping,updateChatUserTyping:this.onUpdateUserTyping,updateChannelUserTyping:this.onUpdateUserTyping,updatePeerBlocked:this.onUpdatePeerBlocked}),d.default.addEventListener("chat_update",e=>{var t,a,s;const n=this.chatsFull[e],i=m.a.getChat(e);if(!n||!i)return;let r=!1;!!n.call!=!!(null===(t=i.pFlags)||void 0===t?void 0:t.call_active)&&(r=!0);const{photo:o}=i;if(o){"chatPhotoEmpty"!==o._===("photoEmpty"!==(null===(a=n.chat_photo)||void 0===a?void 0:a._))&&o.photo_id===(null===(s=n.chat_photo)||void 0===s?void 0:s.id)||(r=!0)}r&&this.refreshFullPeer(e.toPeerId(!0))}),d.default.addEventListener("chat_full_update",e=>{d.default.dispatchEvent("peer_full_update",e.toPeerId(!0))}),d.default.addEventListener("user_full_update",e=>{d.default.dispatchEvent("peer_full_update",e.toPeerId(!1))}),d.default.addEventListener("invalidate_participants",e=>{this.invalidateChannelParticipants(e)}),this.typingsInPeer={}}getProfile(e,t){return this.usersFull[e]&&!t?Promise.resolve(this.usersFull[e]):o.a.invokeApiSingleProcess({method:"users.getFullUser",params:{id:f.a.getUserInput(e)},processResult:t=>{m.a.saveApiChats(t.chats,!0),f.a.saveApiUsers(t.users);const a=t.full_user,s=e.toPeerId(!1);return a.profile_photo&&(a.profile_photo=y.a.savePhoto(a.profile_photo,{type:"profilePhoto",peerId:s})),void 0!==a.about&&(a.rAbout=p.a.wrapRichText(a.about,{noLinebreaks:!0})),h.a.savePeerSettings({peerId:s,settings:a.notify_settings}),this.usersFull[e]=a,d.default.dispatchEvent("user_full_update",e),a}})}getProfileByPeerId(e,t){return u.a.isAnyChat(e)?this.getChatFull(e.toChatId(),t):this.getProfile(e.toUserId(),t)}getCachedFullChat(e){return this.chatsFull[e]}getCachedFullUser(e){return this.usersFull[e]}getCachedProfileByPeerId(e){return e.isUser()?this.getCachedFullUser(e.toUserId()):this.getCachedFullChat(e.toChatId())}getFullPhoto(e){return this.getProfileByPeerId(e).then(e=>{switch(e._){case"userFull":return e.profile_photo;case"channelFull":case"chatFull":return e.chat_photo}})}getChatFull(e,t){if(m.a.isChannel(e))return this.getChannelFull(e,t);const a=this.chatsFull[e];if(a&&!t){const t=m.a.getChat(e);if(t.version===a.participants.version||t.pFlags.left)return Promise.resolve(a)}return o.a.invokeApiSingleProcess({method:"messages.getFullChat",params:{chat_id:e},processResult:t=>{m.a.saveApiChats(t.chats,!0),f.a.saveApiUsers(t.users);const a=t.full_chat,s=e.toPeerId(!0);return a&&a.chat_photo&&a.chat_photo.id&&(a.chat_photo=y.a.savePhoto(a.chat_photo,{type:"profilePhoto",peerId:s})),h.a.savePeerSettings({peerId:s,settings:a.notify_settings}),this.chatsFull[e]=a,d.default.dispatchEvent("chat_full_update",e),a}})}getChatInviteLink(e,t){return this.getChatFull(e).then(a=>!t&&a.exported_invite&&"chatInviteExported"==a.exported_invite._?a.exported_invite.link:o.a.invokeApi("messages.exportChatInvite",{peer:u.a.getInputPeerById(e.toPeerId(!0))}).then(t=>(void 0!==this.chatsFull[e]&&(this.chatsFull[e].exported_invite=t),t.link)))}getChannelParticipants(e,t={_:"channelParticipantsRecent"},a=200,s=0){if("channelParticipantsRecent"===t._){const t=m.a.getChat(e);if(t&&t.pFlags&&(t.pFlags.kicked||t.pFlags.broadcast&&!t.pFlags.creator&&!t.admin_rights))return Promise.reject()}return o.a.invokeApiCacheable("channels.getParticipants",{channel:m.a.getChannelInput(e),filter:t,offset:s,limit:a,hash:"0"},{cacheSeconds:60}).then(e=>(f.a.saveApiUsers(e.users),e))}getChannelParticipant(e,t){return o.a.invokeApiSingle("channels.getParticipant",{channel:m.a.getChannelInput(e),participant:u.a.getInputPeerById(t)}).then(e=>(f.a.saveApiUsers(e.users),e.participant))}getChannelFull(e,t){return void 0===this.chatsFull[e]||t?o.a.invokeApiSingleProcess({method:"channels.getFullChannel",params:{channel:m.a.getChannelInput(e)},processResult:t=>{const a=e.toPeerId(!0);m.a.saveApiChats(t.chats,!0),f.a.saveApiUsers(t.users);const s=t.full_chat;return s&&s.chat_photo.id&&(s.chat_photo=y.a.savePhoto(s.chat_photo,{type:"profilePhoto",peerId:a})),h.a.savePeerSettings({peerId:a,settings:s.notify_settings}),this.chatsFull[e]=s,d.default.dispatchEvent("chat_full_update",e),s},processError:t=>{switch(t.type){case"CHANNEL_PRIVATE":let t=m.a.getChat(e);t={_:"channelForbidden",access_hash:t.access_hash,title:t.title},l.a.processUpdateMessage({_:"updates",updates:[{_:"updateChannel",channel_id:e}],chats:[t],users:[]})}throw t}}):Promise.resolve(this.chatsFull[e])}getMentions(e,t,a){let s;return s=m.a.isChannel(e)?this.getChannelParticipants(e,{_:"channelParticipantsMentions",q:t,top_msg_id:g.a.getServerMessageId(a)},50,0).then(e=>e.participants.map(e=>m.a.getParticipantPeerId(e))):e?this.getChatFull(e).then(e=>e.participants.participants.map(e=>e.user_id.toPeerId())):Promise.resolve([]),Promise.all([f.a.getTopPeers("bots_inline").catch(()=>[]),s]).then(e=>(e=>{"@"===t.charAt(0)&&(t=t.slice(1));const a=new c.a({ignoreCase:!0}),s=new Map;e.forEach(e=>{a.indexObject(e.id,f.a.getUserSearchText(e.id)),s.set(e.id,e.rating)});const n=Array.from(a.search(t));return n.sort((e,t)=>s.get(t)-s.get(e)),n})(e[0].concat(e[1].map(e=>({id:e,rating:0})))))}invalidateChannelParticipants(e){o.a.clearCache("channels.getParticipants",t=>t.channel.channel_id===e),this.refreshFullPeer(e.toPeerId(!0))}refreshFullPeer(e){e.isUser()?delete this.usersFull[e.toUserId()]:delete this.chatsFull[e.toChatId()],d.default.dispatchEvent("peer_full_update",e)}updateProfile(e,t,a){return o.a.invokeApi("account.updateProfile",{first_name:e,last_name:t,about:a}).then(e=>(f.a.saveApiUser(e),this.getProfile(d.default.myId,!0)))}uploadProfilePhoto(e){return o.a.invokeApi("photos.uploadProfilePhoto",{file:e}).then(e=>{f.a.saveApiUsers(e.users);const t=d.default.myId;y.a.savePhoto(e.photo,{type:"profilePhoto",peerId:t});const a=t.toUserId();l.a.processLocalUpdate({_:"updateUserPhoto",user_id:a,date:Object(n.h)(!0),photo:f.a.getUser(a).photo,previous:!0})})}deletePhotos(e){return o.a.invokeApiSingle("photos.deletePhotos",{id:e.map(e=>{const t=y.a.getPhoto(e);return y.a.getInput(t)})}).then(e=>{})}getChatMembersString(e){var t,a;const s=m.a.getChat(e);if("chatForbidden"===s._)return Object(r.i18n)("YouWereKicked");const n=this.chatsFull[e];let o;o=n?"channelFull"===n._?n.participants_count:null===(t=n.participants.participants)||void 0===t?void 0:t.length:s.participants_count||(null===(a=s.participants)||void 0===a?void 0:a.participants.length);o=o||1;let p=m.a.isBroadcast(e)?"Peer.Status.Subscribers":"Peer.Status.Member";return Object(r.i18n)(p,[Object(i.d)(o)])}verifyParticipantForOnlineCount(e){const t=f.a.getUser(e.user_id);return!(!t||!t.status||"userStatusOnline"!==t.status._)}reduceParticipantsForOnlineCount(e){return e.reduce((e,t)=>e+ +this.verifyParticipantForOnlineCount(t),0)}getOnlines(e){var t;return _(this,void 0,void 0,(function*(){if(m.a.isBroadcast(e))return 1;const a=yield this.getChatFull(e);if(m.a.isMegagroup(e)){if(a.participants_count<=100){const t=yield this.getChannelParticipants(e,{_:"channelParticipantsRecent"},100);return this.reduceParticipantsForOnlineCount(t.participants)}const s=yield o.a.invokeApiCacheable("messages.getOnlines",{peer:m.a.getChannelInputPeer(e)},{cacheSeconds:60});return null!==(t=s.onlines)&&void 0!==t?t:1}const s=a.participants;return(null==s?void 0:s.participants)?this.reduceParticipantsForOnlineCount(s.participants):1}))}getPeerTypings(e){return this.typingsInPeer[e]}}const P=new v;s.a.appProfileManager=P,t.default=P},function(e,t,a){"use strict";var s=a(29),n=a(37),i=a(33),r=a(15),o=a(41),p=a(51),d=a(43),c=a(17),l=a(77),m=a(101),g=a(75),h=a(32),u=a(7);const y=new class{constructor(){this.updatesState={pendingPtsUpdates:[],pendingSeqUpdates:{},syncPending:null,syncLoading:null},this.channelStates={},this.attached=!1,this.log=Object(n.b)("UPDATES",n.a.Error|n.a.Warn|n.a.Log),this.debug=s.b,this.processUpdateMessage=(e,t={})=>{const a={date:e.date,seq:e.seq,seqStart:e.seq_start};switch(this.debug&&this.log.debug("processUpdateMessage",e),e._){case"updatesTooLong":case"new_session_created":this.forceGetDifference();break;case"updateShort":this.processUpdate(e.update,a);break;case"updateShortMessage":case"updateShortChatMessage":{Object(m.a)(e),this.debug&&this.log.debug("updateShortMessage | updateShortChatMessage",Object.assign({},e));const t=e.pFlags.out,s=e.from_id||(t?r.default.myId:e.user_id),n=e.chat_id?e.chat_id.toPeerId(!0):e.user_id.toPeerId(!1)||r.default.myId;this.processUpdate({_:"updateNewMessage",message:{_:"message",pFlags:e.pFlags,id:e.id,from_id:d.a.getOutputPeer(s.toPeerId()),peer_id:d.a.getOutputPeer(n),date:e.date,message:e.message,fwd_from:e.fwd_from,reply_to:e.reply_to,entities:e.entities},pts:e.pts,pts_count:e.pts_count},a);break}case"updatesCombined":case"updates":o.a.saveApiUsers(e.users,t.override),p.a.saveApiChats(e.chats,t.override),e.updates.forEach(e=>{this.processUpdate(e,a)});break;default:this.log.warn("Unknown update message",e)}}}setProxy(){const e=this;this.updatesState=new Proxy(this.updatesState,{set:function(t,a,s){return t[a]=s,e.saveUpdatesState(),!0}})}saveUpdatesState(){const e=this.updatesState;c.default.pushToState("updates",{seq:e.seq,pts:e.pts,date:e.date})}popPendingSeqUpdate(){const e=this.updatesState,t=e.seq+1,a=e.pendingSeqUpdates[t];if(!a)return!1;const s=a.updates;for(let e=0,t=s.length;e<t;++e)this.saveUpdate(s[e]);return e.seq=a.seq,a.date&&e.date<a.date&&(e.date=a.date),delete e.pendingSeqUpdates[t],!this.popPendingSeqUpdate()&&e.syncPending&&e.syncPending.seqAwaiting&&e.seq>=e.syncPending.seqAwaiting&&(e.syncPending.ptsAwaiting?delete e.syncPending.seqAwaiting:(clearTimeout(e.syncPending.timeout),e.syncPending=null)),!0}popPendingPtsUpdate(e){const t=e?this.getChannelState(e):this.updatesState;if(!t.pendingPtsUpdates.length)return!1;t.pendingPtsUpdates.sort((e,t)=>e.pts-t.pts);let a=t.pts,s=0,n=0;for(let e=0,i=t.pendingPtsUpdates.length;e<i;++e){const i=t.pendingPtsUpdates[e];a+=i.pts_count,a>=i.pts&&(s=i.pts,n=e)}if(!s)return!1;this.debug&&this.log.debug("pop pending pts updates",s,t.pendingPtsUpdates.slice(0,n+1)),t.pts=s;for(let e=0;e<=n;++e){const a=t.pendingPtsUpdates[e];this.saveUpdate(a)}return t.pendingPtsUpdates.splice(0,n+1),!t.pendingPtsUpdates.length&&t.syncPending&&(t.syncPending.seqAwaiting?delete t.syncPending.ptsAwaiting:(clearTimeout(t.syncPending.timeout),t.syncPending=null)),!0}forceGetDifference(){this.updatesState.syncLoading||this.getDifference()}processLocalUpdate(e){this.processUpdateMessage({_:"updateShort",update:e})}getDifference(e=!1){const t=this.updatesState;let a=t.syncLoading;a||(t.pendingSeqUpdates={},t.pendingPtsUpdates=[]),t.syncPending&&(clearTimeout(t.syncPending.timeout),t.syncPending=null);const s=i.a.invokeApi("updates.getDifference",{pts:t.pts,pts_total_limit:e?1200:void 0,date:t.date,qts:-1},{timeout:2147483647}).then(a=>{if(this.debug&&this.log.debug("Get diff result",a),"updates.differenceEmpty"===a._)return this.debug&&this.log.debug("apply empty diff",a.seq),t.date=a.date,void(t.seq=a.seq);if(e&&r.default.dispatchEvent("state_synchronizing"),"updates.differenceTooLong"!==a._){o.a.saveApiUsers(a.users),p.a.saveApiChats(a.chats),a.other_updates.forEach(e=>{switch(e._){case"updateChannelTooLong":case"updateNewChannelMessage":case"updateEditChannelMessage":return void this.processUpdate(e)}this.saveUpdate(e)}),a.new_messages.forEach(e=>{this.saveUpdate({_:"updateNewMessage",message:e,pts:t.pts,pts_count:0})});const e="updates.difference"===a._?a.state:a.intermediate_state;t.seq=e.seq,t.pts=e.pts,t.date=e.date}else t.pts=a.pts,t.date=(Date.now()/1e3|0)+l.a.serverTimeOffset,delete t.seq,this.channelStates={},this.log.warn("getDifference:",a._),r.default.dispatchEvent("state_cleared");if("updates.differenceSlice"===a._)return this.getDifference();this.debug&&this.log.debug("finished get diff")});return a||this.justAName(t,s),s}getChannelDifference(e){const t=this.getChannelState(e),a=t.syncLoading;a||(t.pendingPtsUpdates=[]),t.syncPending&&(clearTimeout(t.syncPending.timeout),t.syncPending=null);const s=i.a.invokeApi("updates.getChannelDifference",{channel:p.a.getChannelInput(e),filter:{_:"channelMessagesFilterEmpty"},pts:t.pts,limit:30},{timeout:2147483647}).then(a=>{if(this.debug&&this.log.debug("Get channel diff result",a),t.pts="pts"in a?a.pts:void 0,"updates.channelDifferenceEmpty"!==a._){if("updates.channelDifferenceTooLong"===a._)return this.debug&&this.log.debug("channel diff too long",a),delete this.channelStates[e],void this.saveUpdate({_:"updateChannelReload",channel_id:e});if(o.a.saveApiUsers(a.users),p.a.saveApiChats(a.chats),this.debug&&this.log.debug("applying",a.other_updates.length,"channel other updates"),a.other_updates.forEach(e=>{this.saveUpdate(e)}),this.debug&&this.log.debug("applying",a.new_messages.length,"channel new messages"),a.new_messages.forEach(e=>{this.saveUpdate({_:"updateNewChannelMessage",message:e,pts:t.pts,pts_count:0})}),this.debug&&this.log.debug("apply channel diff",t.pts),"updates.channelDifference"===a._&&!a.pFlags.final)return this.getChannelDifference(e);this.debug&&this.log.debug("finished channel get diff")}else this.debug&&this.log.debug("apply channel empty diff",a)});return a||this.justAName(t,s,e),s}justAName(e,t,a){e.syncLoading=t,r.default.dispatchEvent("state_synchronizing",a),t.then(()=>{e.syncLoading=null,r.default.dispatchEvent("state_synchronized",a)},()=>{e.syncLoading=null})}addChannelState(e,t){if(!t)throw new Error("Add channel state without pts "+e);return!(e in this.channelStates)&&(this.channelStates[e]={pts:t,pendingPtsUpdates:[],syncPending:null,syncLoading:null},!0)}getChannelState(e,t){return void 0===this.channelStates[e]&&this.addChannelState(e,t),this.channelStates[e]}processUpdate(e,t={}){var a;let s;switch(e._){case"updateNewChannelMessage":case"updateEditChannelMessage":s=d.a.getPeerId(e.message.peer_id).toChatId();break;case"updateChannelTooLong":if(s=e.channel_id,!(s in this.channelStates))return!1;break;default:"channel_id"in e&&"pts"in e&&(s=e.channel_id)}const{pts:n,pts_count:i}=e,r=s?this.getChannelState(s,n):this.updatesState;if(r.syncLoading)return!1;if("updateChannelTooLong"===e._)return(!r.lastPtsUpdateTime||r.lastPtsUpdateTime<Date.now()-6)&&this.getChannelDifference(s),!1;if("updateNewMessage"===e._||"updateEditMessage"===e._||"updateNewChannelMessage"===e._||"updateEditChannelMessage"===e._){const t=e.message,n=d.a.getPeerId(t.peer_id),i=t.fwd_from||{};let r;if(t.from_id&&!o.a.hasUser(d.a.getPeerId(t.from_id),t.pFlags.post)&&(r="author")||i.from_id&&!o.a.hasUser(d.a.getPeerId(i.from_id),!!i.from_id.channel_id)&&(r="fwdAuthor")||(null===(a=i.from_id)||void 0===a?void 0:a.channel_id)&&!p.a.hasChat(i.from_id.channel_id,!0)&&(r="fwdChannel")||n.isUser()&&!o.a.hasUser(n)&&(r="toPeer User")||n.isAnyChat()&&!p.a.hasChat(n.toChatId())&&(r="toPeer Chat"))return this.log.warn("Not enough data for message update",n,r,t),s&&p.a.hasChat(s)?this.getChannelDifference(s):this.forceGetDifference(),!1}else if(s&&!p.a.hasChat(s))return!1;let c,l;if(n){if(r.pts+(i||0)<n)return this.debug&&this.log.warn("Pts hole",r,e,s&&p.a.getChat(s)),r.pendingPtsUpdates.push(e),r.syncPending||r.syncLoading||(r.syncPending={timeout:window.setTimeout(()=>{r.syncPending=null,r.syncLoading||(s?this.getChannelDifference(s):this.getDifference())},6)}),r.syncPending.ptsAwaiting=!0,!1;if(n>r.pts)r.pts=n,c=!0,r.lastPtsUpdateTime=Date.now();else if(i)return!1;s&&t.date&&this.updatesState.date<t.date&&(this.updatesState.date=t.date)}else if(!s&&t.seq>0){const a=t.seq,s=t.seqStart||a;if(s!==r.seq+1&&s>r.seq)return this.debug&&this.log.warn("Seq hole",r,r.syncPending&&r.syncPending.seqAwaiting),void 0===r.pendingSeqUpdates[s]&&(r.pendingSeqUpdates[s]={seq:a,date:t.date,updates:[]}),r.pendingSeqUpdates[s].updates.push(e),r.syncPending||(r.syncPending={timeout:window.setTimeout(()=>{r.syncPending=null,r.syncLoading||this.getDifference()},6)}),(!r.syncPending.seqAwaiting||r.syncPending.seqAwaiting<s)&&(r.syncPending.seqAwaiting=s),!1;r.seq!==a&&(r.seq=a,t.date&&r.date<t.date&&(r.date=t.date),l=!0)}this.saveUpdate(e),c?this.popPendingPtsUpdate(s):l&&this.popPendingSeqUpdate()}saveUpdate(e){r.default.dispatchEvent(e._,e)}attach(){this.attached||(this.log("attach"),this.attached=!0,c.default.getState().then(({updates:e})=>{const t=c.default.newVersion;e&&e.pts&&e.date?(Object.assign(this.updatesState,e),this.log("will get difference",Object.assign({},e)),this.getDifference(!0)):(this.log("will get new state"),this.updatesState.syncLoading=new Promise(e=>{i.a.invokeApi("updates.getState",{},{noErrorBox:!0}).then(t=>{this.updatesState.seq=t.seq,this.updatesState.pts=t.pts,this.updatesState.date=t.date,this.saveUpdatesState(),this.updatesState.syncLoading=null,e()})})),i.a.setUpdatesProcessor(this.processUpdateMessage),this.setProxy(),t&&this.updatesState.syncLoading.then(()=>{fetch("changelogs/"+t.split(" ")[0]+".md").then(e=>200===e.status&&e.ok&&e.text()||Promise.reject()).then(e=>{e=`**Telegram Web${u.a.suffix} was updated to version alpha ${t}**\n\n`+e;const a=[],s={_:"updateServiceNotification",entities:a,message:h.b.parseMarkdown(e,a),type:"local",pFlags:{},inbox_date:Date.now()/1e3|0,media:void 0};this.processLocalUpdate(s)}).catch(g.a)})}))}};s.a.apiUpdatesManager=y,t.a=y},function(e,t,a){"use strict";var s=a(113),n=a(31),i=a(143),r=a(156),o=a(32),p=a(71),d=a(55),c=a(138),l=a(33),m=a(29),g=a(59),h=a(15),u=a(127),y=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const f={mov:"video/quicktime",gif:"image/gif",pdf:"application/pdf"};const _=new class{constructor(){this.docs={},this.savingLottiePreview={},this.downloading=new Map,this.onServiceWorkerFail=()=>{for(const e in this.docs){const t=this.docs[e];if(t.supportsStreaming){delete t.supportsStreaming;delete p.a.getCacheContext(t).url}}},l.a.onServiceWorkerFail=this.onServiceWorkerFail}saveDoc(e,t){if("documentEmpty"===e._)return;const a=this.docs[e.id];if(e.file_reference&&(Object(n.h)("file_reference",a,e),i.a.saveContext(e.file_reference,t)),a||(this.docs[e.id]=e),e.attributes.forEach(t=>{switch(t._){case"documentAttributeFilename":e.file_name=o.a.wrapPlainText(t.file_name),e.fileName=o.a.wrapEmojiText(t.file_name);break;case"documentAttributeAudio":e.duration=t.duration,e.audioTitle=o.a.wrapEmojiText(t.title),e.audioPerformer=o.a.wrapEmojiText(t.performer),e.type=t.pFlags.voice&&"audio/ogg"===e.mime_type?"voice":"audio";break;case"documentAttributeVideo":e.duration=t.duration,e.w=t.w,e.h=t.h,t.pFlags.round_message?e.type="round":e.type="video";break;case"documentAttributeSticker":void 0!==t.alt&&(e.stickerEmojiRaw=t.alt,e.stickerEmoji=o.a.wrapRichText(e.stickerEmojiRaw,{noLinks:!0,noLinebreaks:!0})),t.stickerset&&("inputStickerSetEmpty"===t.stickerset._?delete t.stickerset:"inputStickerSetID"===t.stickerset._&&(e.stickerSetInput=t.stickerset)),"image/webp"===e.mime_type&&(e.thumbs||u.a)&&(e.type="sticker",e.sticker=1);break;case"documentAttributeImageSize":e.type="photo",e.w=t.w,e.h=t.h;break;case"documentAttributeAnimated":"image/gif"!==e.mime_type&&"video/mp4"!==e.mime_type||(e.type="gif"),e.animated=!0}}),e.mime_type)e.mime_type===f.pdf?e.type="pdf":e.mime_type===f.gif&&(e.type="gif");else{const t=(e.file_name||"").split(".").pop(),a=t&&f[t.toLowerCase()];if(a)e.mime_type=a;else switch(e.type){case"gif":case"video":case"round":e.mime_type="video/mp4";break;case"sticker":e.mime_type="image/webp";break;case"audio":e.mime_type="audio/mpeg";break;case"voice":e.mime_type="audio/ogg";break;default:e.mime_type="application/octet-stream"}}if("voice"!==e.type&&"round"!==e.type||(e.file_name=e.fileName=e.type+"_"+Object(g.g)(new Date(1e3*e.date),{monthAsNumber:!0,leadingZero:!0}).replace(/[:\.]/g,"-").replace(", ","_")),l.a.isServiceWorkerOnline()&&("gif"===e.type&&e.size>8e6||"audio"===e.type||"video"===e.type)){e.supportsStreaming=!0;const t=p.a.getCacheContext(e);t.url||(t.url=this.getFileURL(e))}return e.file_name||(e.file_name=e.fileName=""),"application/x-tgsticker"===e.mime_type&&"AnimatedSticker.tgs"===e.file_name&&(e.type="sticker",e.animated=!0,e.sticker=2),a?Object.assign(a,e):e}getDoc(e){return Object(n.f)(e)?e:this.docs[e]}getMediaInput(e){return{_:"inputMediaDocument",id:{_:"inputDocument",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference},ttl_seconds:0}}getInput(e,t){return{_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t}}getFileDownloadOptions(e,t,a,s){const n=this.getInput(e,null==t?void 0:t.type);let i;return i=t?e.sticker?"image/webp":"image/jpeg":e.mime_type||"application/octet-stream",{dcId:e.dc_id,location:n,size:t?t.size:e.size,mimeType:i,fileName:e.file_name,queueId:a,onlyCache:s}}getFileURL(e,t=!1,a){let n;return n=t?"download":a?"thumb":e.supportsStreaming?"stream":"document",Object(s.b)(n,this.getFileDownloadOptions(e,a))}getThumbURL(e,t){let a=Promise.resolve();const s=p.a.getCacheContext(e,t.type);return s.url||(a="bytes"in t?Object(c.a)(d.a.getPreviewURLFromBytes(t.bytes,!!e.sticker)).then(e=>{s.url=e}):d.a.preloadPhoto(e,t)),{thumb:t,cacheContext:s,promise:a}}getThumb(e,t=!0){const a=d.a.choosePhotoSize(e,0,0,!t);return"photoSizeEmpty"===a._?null:this.getThumbURL(e,a)}getInputFileName(e,t){return Object(s.a)(this.getInput(e,t),{fileName:e.file_name})}downloadDoc(e,t,a){const s=this.getInputFileName(e);let n=p.a.getDownload(s);if(n)return n;const i=this.getFileDownloadOptions(e,void 0,t,a);n=p.a.download(i),this.downloading.set(e.id,n),h.default.dispatchEvent("download_start",e.id);const o=p.a.getCacheContext(e),d=n;return d.then(e=>{o.url=URL.createObjectURL(e),o.downloaded=e.size},()=>{}).finally(()=>{this.downloading.delete(e.id)}),"voice"!==e.type||r.a.isPlaySupported()||(n=d.then(e=>y(this,void 0,void 0,(function*(){const t=new FileReader;return yield new Promise((a,s)=>{t.onloadend=e=>{const t=new Uint8Array(e.target.result);r.a.decode(t).then(e=>{o.url=e.url,a()},e=>{delete o.downloaded,s(e)})},t.readAsArrayBuffer(e)}),e})))),n.then(()=>{h.default.dispatchEvent("document_downloaded",e)}),n}saveLottiePreview(e,t,a){const s=e.id+"-"+a;if(this.savingLottiePreview[s])return;e.stickerCachedThumbs||(Object(n.c)(e,["stickerCachedThumbs"]),e.stickerCachedThumbs={});const i=e.stickerCachedThumbs[a];i&&i.w>=t.width&&i.h>=t.height||(this.savingLottiePreview[s]=!0,t.toBlob(n=>{const i={url:URL.createObjectURL(n),w:t.width,h:t.height};e.stickerCachedThumbs[a]=i,delete this.savingLottiePreview[s]}))}saveDocFile(e,t){const a=this.downloadDoc(e,t);return a.then(()=>{const t=p.a.getCacheContext(e);p.a.createDownloadAnchor(t.url,e.file_name)}),a}};m.a.appDocsManager=_,t.a=_},,,function(e,t,a){"use strict";var s=a(29),n=a(62),i=a(33);const r=new class{constructor(){this.serverTimeOffset=0,n.a.get("server_time_offset").then(e=>{e&&(this.serverTimeOffset=e)}),i.a.addTaskListener("applyServerTimeOffset",e=>{this.serverTimeOffset=e.payload})}};s.a&&(s.a.serverTimeManager=r),t.a=r},,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return m}));var s=a(37);class n{constructor(e){this.items=new Map,this.locked=!1,this.observer=new IntersectionObserver(t=>{if(this.locked)return;const a=[];t.forEach(e=>{const t=e.target;this.items.get(t)!==e.isIntersecting&&(this.items.set(t,e.isIntersecting),a[e.isIntersecting?"unshift":"push"]({target:t,visible:e.isIntersecting}))}),a.forEach(t=>{e(t.target,t.visible)})})}getVisible(){const e=[];return this.items.forEach((t,a)=>{t&&e.push(a)}),e}clearVisible(){const e=this.getVisible();for(const t of e)this.items.set(t,!1)}isVisible(e){return this.items.get(e)}disconnect(){this.observer.disconnect(),this.items.clear()}refresh(){this.observer.disconnect();const e=[...this.items.keys()];for(const t of e)this.observer.observe(t)}refreshVisible(){const e=this.getVisible();for(const t of e)this.observer.unobserve(t);for(const t of e)this.observer.observe(t)}observe(e){this.items.set(e,!1),this.observer.observe(e)}unobserve(e){this.observer.unobserve(e),this.items.delete(e)}unlock(){this.locked=!1}unlockAndRefresh(){this.unlock(),this.refresh()}lock(){this.locked=!0}}var i=a(39),r=a(104),o=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};class p{constructor(e=8){this.parallelLimit=e,this.queueId=0,this.queue=[],this.inProcess=new Set,this.lockPromise=null,this.unlockResolve=null,this.log=Object(s.b)("LL",s.a.Error),this.processQueue=Object(r.a)(()=>this._processQueue(),20,!1)}clear(){this.inProcess.clear(),this.queue.length=0}lock(){this.lockPromise||(this.lockPromise=new Promise((e,t)=>{this.unlockResolve=e}))}unlock(){this.unlockResolve&&(this.unlockResolve(),this.unlockResolve=this.lockPromise=null,this.processQueue())}processItem(e){return o(this,void 0,void 0,(function*(){if(!this.lockPromise){this.inProcess.add(e);try{yield this.loadItem(e)}catch(e){["NO_ENTRY_FOUND","STORAGE_OFFLINE"].includes(e)||this.log.error("loadMediaQueue error:",e)}this.inProcess.delete(e),this.processQueue()}}))}loadItem(e){return e.load()}getItem(){return this.queue.shift()}addElement(e,t){this.queue[e](t),this.processQueue()}_processQueue(e){if(!this.queue.length||this.lockPromise||this.parallelLimit>0&&this.inProcess.size>=this.parallelLimit)return;do{if(e?Object(i.e)(this.queue,e):e=this.getItem(),!e)break;this.processItem(e),e=null}while(this.inProcess.size<this.parallelLimit&&this.queue.length)}push(e){this.addElement("push",e)}unshift(e){this.addElement("unshift",e)}}class d extends p{constructor(e=8){super(e),this.parallelLimit=e,this.queue=[],this.inProcess=new Set}lock(){super.lock(),this.intersector.lock()}unlock(){super.unlock(),this.intersector.unlock()}unlockAndRefresh(){super.unlock(),this.intersector.unlockAndRefresh()}clear(){super.clear(),this.intersector.disconnect()}refresh(){this.intersector.refresh()}loadItem(e){return e.load(e.div)}addElement(e,t){if(this.queue.find(e=>e.div===t.div&&e.load===t.load))return!1;for(const e of this.inProcess)if(e.div===t.div&&e.load===t.load)return!1;return this.queue[e](t),!0}setProcessQueueTimeout(){this.intersectorTimeout||(this.intersectorTimeout=window.setTimeout(()=>{this.intersectorTimeout=0,this.processQueue()},0))}push(e){super.push(e)}unshift(e){super.unshift(e)}unobserve(e){Object(i.c)(this.queue,t=>t.div===e),this.intersector.unobserve(e)}}class c extends d{constructor(e=8){super(e),this.parallelLimit=e,this.onVisibilityChange=(e,t)=>{t&&(Object(i.c)(this.queue,t=>t.div===e).forEach(e=>{e.wasSeen=!0,this.queue.unshift(e)}),this.setProcessQueueTimeout())},this.intersector=new n(this.onVisibilityChange)}getItem(){return this.queue.findAndSplice(e=>e.wasSeen)}processItem(e){const t=Object.create(null,{processItem:{get:()=>super.processItem}});return o(this,void 0,void 0,(function*(){yield t.processItem.call(this,e),this.intersector.unobserve(e.div)}))}addElement(e,t){return!!super.addElement(e,t)&&(this.intersector.observe(t.div),t.hasOwnProperty("wasSeen")||(t.wasSeen=!1),!0)}}class l extends d{constructor(e=8,t){super(e),this.parallelLimit=e,this.onVisibilityChange=t,this._queue=new Map,this.intersector=new n((e,t)=>{const a=Object(i.c)(this.queue,t=>t.div===e);if(t){(a.length?a:[this._queue.get(e)]).forEach(t=>{this.queue.unshift(t||this._queue.get(e))})}this.onVisibilityChange&&this.onVisibilityChange(e,t),this.setProcessQueueTimeout()})}clear(){super.clear(),this._queue.clear()}observe(e){this._queue.set(e.div,e),this.intersector.observe(e.div)}}class m extends d{constructor(e=8,t){super(e),this.parallelLimit=e,this.onVisibilityChange=t,this.intersector=new n((e,t)=>{const a=Object(i.c)(this.queue,t=>t.div===e);t&&a.length&&a.forEach(e=>{this.queue.unshift(e)}),this.onVisibilityChange&&this.onVisibilityChange(e,t),this.setProcessQueueTimeout()})}observe(e){this.intersector.observe(e)}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(16);const n=new Map;let i=0;const r=(e,t,a="")=>{a=t.country_code+a,i=Math.max(i,a.length),n.set(a,{country:e,code:t})};function o(e){e=e||"",n.size||s.default.countriesList.forEach(e=>{e.country_codes.forEach(t=>{t.prefixes?t.prefixes.forEach(a=>{r(e,t,a)}):r(e,t)})});let t,a=e.replace(/\D/g,""),o=a.slice(0,i);for(let e=o.length-1;e>=0&&(t=n.get(o.slice(0,e+1)),!t);--e);if(!t)return{formatted:a,country:void 0,code:void 0,leftPattern:""};const p=t.country,d=t.code.patterns||[],c=a.slice(t.code.country_code.length);let l="",m=0,g="";for(let e=d.length-1;e>=0;--e){l=d[e];const t=l.replace(/ /g,"");let a=0;for(let e=0,s=Math.min(c.length,t.length);e<s;++e){if(c[e]!==t[e]&&"X"!==t[e]){a=0;break}++a}a>m&&(m=a,g=l)}l=g||l,l=l.replace(/\d/g,"X"),l=t.code.country_code+" "+l,l.split("").forEach((e,t)=>{" "===e&&" "!==a[t]&&a.length>t&&(a=a.slice(0,t)+" "+a.slice(t))});let h=l&&l.length>a.length?l.slice(a.length):"";return h&&(h=h.replace(/X/g,"")),{formatted:a,country:p,code:t.code,leftPattern:h}}},,,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return d}));var s=a(56),n=a(112);function i(e){return"object"==typeof e&&null!==e}function r(e){return e>>>0}function o(e,t){e=r(e),t=r(t);const a=Object(n.y)(e.toString(16),16,32);Object(n.q)(a,32),Object(n.b)(a,Object(n.y)(t.toString(16),16,32));return Object(n.d)(a,10)}function p(e){return e.map(e=>Object(n.y)(e,10)).sort((e,t)=>Object(n.g)(e,t)).map(e=>Object(n.d)(e,10))}function d(e,t=16,a,n=!1,i=!1){const r=e.byteLength||e.length,o=n?t-r:t-r%t;if(o>0&&o<t){const t=new Uint8Array(o);if(a)for(let e=0;e<o;++e)t[e]=0;else t.randomize();return e instanceof ArrayBuffer?(i?Object(s.a)(t,e):Object(s.a)(e,t)).buffer:e instanceof Uint8Array?i?Object(s.a)(t,e):Object(s.a)(e,t):i?[...t].concat(e):e.concat([...t])}return e}},function(e,t,a){"use strict";const s=new class{constructor(){this.width=0,this.height=0;const e="visualViewport"in window?window.visualViewport:window,t=()=>{this.width=e.width||e.innerWidth,this.height=e.height||e.innerHeight};e.addEventListener("resize",t),t()}};t.a=s},,,,,,,,function(e,t,a){"use strict";function s(e){const t=document.createElement("span");return t.innerHTML=e,t}a.d(t,"a",(function(){return s}))},function(e,t,a){"use strict";function s(e){}a.d(t,"a",(function(){return s}))},function(e,t,a){"use strict";var s=a(122),n=a(29),i=a(45),r=a(59),o=a(31),p=a(87),d=a(0),c=a(16),l=a(33),m=a(26),g=a(15),h=a(86),u=a(73),y=a(51),f=a(43),_=a(139),v=a(17),P=a(41);const b=new class{constructor(){this.notificationsShown={},this.notificationIndex=0,this.notificationsCount=0,this.soundsPlayed={},this.vibrateSupport=!!navigator.vibrate,this.peerSettings={notifyPeer:{},notifyUsers:null,notifyChats:null,notifyBroadcasts:null},this.faviconEl=document.head.querySelector('link[rel="icon"]'),this.titleBackup=document.title,this.titleChanged=!1,this.stopped=!1,this.settings={},this.pushInited=!1,this.updateLocalSettings=()=>{Promise.all(["notify_nodesktop","notify_volume","notify_novibrate","notify_nopreview","notify_nopush"].map(e=>h.a.get(e))).then(e=>{if(this.settings.nodesktop=e[0],this.settings.volume=void 0===e[1]?.5:e[1],this.settings.novibrate=e[2],this.settings.nopreview=e[3],this.settings.nopush=e[4],this.pushInited){const e=!this.settings.nopush&&!this.settings.nodesktop&&m.default.isAvailable||!1;e!==(!1!==this.registeredDevice)&&(e?m.default.subscribe():m.default.unsubscribe())}m.default.setSettings(this.settings)}),v.default.getState().then(e=>{this.settings.nosound=!e.settings.notifications.sound})},this.requestPermission=()=>{Notification.requestPermission(),window.removeEventListener("click",this.requestPermission)},navigator.vibrate=navigator.vibrate||navigator.mozVibrate||navigator.webkitVibrate,this.notificationsUiSupport="Notification"in window||"mozNotification"in navigator,this.topMessagesDeferred=Object(i.a)(),this.notifySoundEl=document.createElement("div"),this.notifySoundEl.id="notify-sound",document.body.append(this.notifySoundEl),g.default.addEventListener("instance_deactivated",()=>{this.stop()}),g.default.addEventListener("instance_activated",()=>{this.stopped&&this.start()}),g.default.addEventListener("idle",e=>{this.stopped||(e||this.clear(),this.toggleToggler())}),g.default.addMultipleEventsListeners({updateNotifySettings:e=>{const t="notifyPeer"===e.peer._&&f.a.getPeerId(e.peer.peer),a="notifyPeer"!==e.peer._?e.peer._:void 0;this.savePeerSettings({key:a,peerId:t,settings:e.notify_settings}),g.default.dispatchEvent("notify_settings",e)}}),g.default.addEventListener("push_init",e=>{this.pushInited=!0,this.settings.nodesktop||this.settings.nopush?this.unregisterDevice(e):e?this.registerDevice(e):m.default.subscribe()}),g.default.addEventListener("push_subscribe",e=>{this.registerDevice(e)}),g.default.addEventListener("push_unsubscribe",e=>{this.unregisterDevice(e)}),g.default.addEventListener("dialogs_multiupdate",()=>{this.topMessagesDeferred.resolve()},{once:!0}),g.default.addEventListener("push_notification_click",e=>{if("push_settings"===e.action)return;if("mute1d"===e.action)return void l.a.invokeApi("account.updateDeviceLocked",{period:86400}).then(()=>{});const t=e.custom&&e.custom.peerId.toPeerId();console.log("click",e,t),t&&this.topMessagesDeferred.then(()=>{e.custom.channel_id&&!y.a.hasChat(e.custom.channel_id)||t.isUser()&&!P.a.hasUser(t)||g.default.dispatchEvent("history_focus",{peerId:t,mid:+e.custom.msg_id})})})}toggleToggler(e=g.default.idle.isIDLE){if(d.IS_MOBILE)return;const t=()=>{this.titleChanged=!1,document.title=this.titleBackup,this.setFavicon()};window.clearInterval(this.titleInterval),this.titleInterval=0,e?this.titleInterval=window.setInterval(()=>{const e=this.notificationsCount;if(e)if(this.titleChanged)t();else{this.titleChanged=!0,document.title=c.default.format("Notifications.Count",!0,[e]);const t=document.createElement("canvas");t.width=32*window.devicePixelRatio,t.height=t.width;const a=t.getContext("2d");a.beginPath(),a.arc(t.width/2,t.height/2,t.width/2,0,2*Math.PI,!1),a.fillStyle="#3390ec",a.fill();let n=24,i=""+e;e<10?n=22:e<100?n=20:(i="99+",n=16),n*=window.devicePixelRatio,a.font=`700 ${n}px ${s.b}`,a.textBaseline="middle",a.textAlign="center",a.fillStyle="white",a.fillText(i,t.width/2,.5625*t.height),this.setFavicon(t.toDataURL())}else this.toggleToggler(!1)},1e3):t()}getLocalSettings(){return this.settings}getNotifySettings(e){let t,a=Object(p.b)(e._),s=this.peerSettings[a];return"inputNotifyPeer"===e._&&(t=a=f.a.getPeerId(e.peer),s=s[a]),s||((s||this.peerSettings)[a]=l.a.invokeApi("account.getNotifySettings",{peer:e}).then(e=>(this.savePeerSettings({key:a,peerId:t,settings:e}),e)))}getNotifyPeerTypeSettings(){if(this.getNotifyPeerTypePromise)return this.getNotifyPeerTypePromise;const e=["inputNotifyBroadcasts","inputNotifyUsers","inputNotifyChats"].map(e=>this.getNotifySettings({_:e}));return this.getNotifyPeerTypePromise=Promise.all(e)}updateNotifySettings(e,t){return l.a.invokeApi("account.updateNotifySettings",{peer:e,settings:t}).then(a=>{a&&u.a.processLocalUpdate({_:"updateNotifySettings",peer:Object.assign(Object.assign({},e),{_:Object(p.b)(e._)}),notify_settings:Object.assign(Object.assign({},t),{_:"peerNotifySettings"})})})}getNotifyExceptions(){l.a.invokeApi("account.getNotifyExceptions",{compare_sound:!0}).then(e=>{u.a.processUpdateMessage(e)})}getContactSignUpNotification(){return this.notifyContactsSignUp?this.notifyContactsSignUp:this.notifyContactsSignUp=l.a.invokeApi("account.getContactSignUpNotification")}setContactSignUpNotification(e){l.a.invokeApi("account.setContactSignUpNotification",{silent:e}).then(t=>{this.notifyContactsSignUp=Promise.resolve(!e)})}setFavicon(e="assets/img/favicon.ico"){if(this.prevFavicon===e)return;const t=this.faviconEl.cloneNode();t.href=e,this.faviconEl.parentNode.replaceChild(t,this.faviconEl),this.faviconEl=t,this.prevFavicon=e}savePeerSettings({key:e,peerId:t,settings:a}){let s;t&&(e=t,s=this.peerSettings.notifyPeer),(s||this.peerSettings)[e]=a,t||g.default.dispatchEvent("notify_peer_type_settings",{key:e,settings:a})}isMuted(e){return"peerNotifySettings"===e._&&(1e3*e.mute_until>Object(r.h)()||e.silent)}getPeerMuted(e){const t=this.getNotifySettings({_:"inputNotifyPeer",peer:f.a.getInputPeerById(e)});return(t instanceof Promise?t:Promise.resolve(t)).then(e=>this.isMuted(e))}getPeerLocalSettings(e,t=!0){const a={_:"peerNotifySettings"},s=this.peerSettings.notifyPeer[e];if(!s||s instanceof Promise||Object.assign(a,s),t){const t=f.a.getInputNotifyPeerById(e,!0),s=Object(p.b)(t._),n=this.peerSettings[s];if(n&&!(n instanceof Promise))for(let e in n)void 0===a[e]&&(a[e]=n[e])}return a}isPeerLocalMuted(e,t=!0){if(e===g.default.myId)return!1;const a=this.getPeerLocalSettings(e,t);return this.isMuted(a)}start(){if(this.updateLocalSettings(),g.default.addEventListener("settings_updated",this.updateLocalSettings),m.default.start(),!this.notificationsUiSupport)return!1;"Notification"in window&&"granted"!==Notification.permission&&"denied"!==Notification.permission&&window.addEventListener("click",this.requestPermission);try{"onbeforeunload"in window&&window.addEventListener("beforeunload",this.clear)}catch(e){}}stop(){this.clear(),window.clearInterval(this.titleInterval),this.titleInterval=0,this.setFavicon(),this.stopped=!0}notify(e){if(this.stopped)return;e.image||(e.image="assets/img/logo_filled_rounded.png"),this.notificationsCount++,this.titleInterval||this.toggleToggler();const t=++this.notificationIndex,a=e.key||"k"+t;this.notificationsShown[a]=!0;const s=Object(r.h)();if(this.settings.volume>0&&!this.settings.nosound&&(this.testSound(this.settings.volume),this.soundsPlayed[e.tag]=s),!this.notificationsUiSupport||"Notification"in window&&"granted"!==Notification.permission)return!1;if(this.settings.nodesktop)return this.vibrateSupport&&!this.settings.novibrate?void navigator.vibrate([200,100,200]):void 0;let n;if("Notification"in window){try{if(e.tag)for(let t in this.notificationsShown){const a=this.notificationsShown[t];"boolean"!=typeof a&&a.tag===e.tag&&(a.hidden=!0)}n=new Notification(e.title,{icon:e.image||"",body:e.message||"",tag:e.tag||"",silent:e.silent||!1})}catch(e){return this.notificationsUiSupport=!1,void m.default.setLocalNotificationsDisabled()}n.onclick=()=>{n.close(),_.a.focus(),this.clear(),e.onclick&&e.onclick()},n.onclose=()=>{n.hidden||(delete this.notificationsShown[a],this.clear())},n.show&&n.show(),this.notificationsShown[a]=n,d.IS_MOBILE||setTimeout(()=>{this.hide(a)},8e3)}}testSound(e){const t=Object(r.h)();if(this.nextSoundAt&&t<this.nextSoundAt&&this.prevSoundVolume===e)return;this.nextSoundAt=t+1e3,this.prevSoundVolume=e;const a="assets/audio/notification.mp3",s=document.createElement("audio");s.autoplay=!0,s.setAttribute("mozaudiochannel","notification"),s.volume=e,s.innerHTML=`\n      <source src="${a}" type="audio/mpeg" />\n      <embed hidden="true" autostart="true" loop="false" volume="${100*e}" src="${a}" />\n    `,this.notifySoundEl.append(s),s.addEventListener("ended",()=>{s.remove()},{once:!0})}cancel(e){const t=this.notificationsShown[e];if(t){this.notificationsCount>0&&--this.notificationsCount;try{"boolean"!=typeof t&&t.close&&(t.hidden=!0,t.close())}catch(e){}delete this.notificationsShown[e]}}hide(e){const t=this.notificationsShown[e];if(t&&"boolean"!=typeof t)try{t.close&&(t.hidden=!0,t.close())}catch(e){}}soundReset(e){delete this.soundsPlayed[e]}clear(){for(const e in this.notificationsShown){const t=this.notificationsShown[e];try{"boolean"!=typeof t&&t.close&&t.close()}catch(e){}}this.notificationsShown={},this.notificationsCount=0,m.default.hidePushNotifications()}registerDevice(e){if(this.registeredDevice&&Object(o.b)(this.registeredDevice,e))return!1;l.a.invokeApi("account.registerDevice",{token_type:e.tokenType,token:e.tokenValue,other_uids:[],app_sandbox:!1,secret:new Uint8Array}).then(()=>{this.registeredDevice=e},e=>{e.handled=!0})}unregisterDevice(e){if(!this.registeredDevice)return!1;l.a.invokeApi("account.unregisterDevice",{token_type:e.tokenType,token:e.tokenValue,other_uids:[]}).then(()=>{this.registeredDevice=!1},e=>{e.handled=!0})}getVibrateSupport(){return this.vibrateSupport}};n.a.appNotificationsManager=b,t.a=b},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));const s={},n=(e,t)=>{e instanceof HTMLImageElement||e instanceof HTMLVideoElement?e.src=t:e instanceof SVGImageElement?e.setAttributeNS(null,"href",t):e.style.backgroundImage="url("+t+")"};function i(e,t,a,i=!0){if(!t)return console.error("renderImageFromUrl: no url?",e,t),void(a&&a());if(s[t]&&i||e instanceof HTMLVideoElement)e&&n(e,t),a&&a();else{const i=e instanceof HTMLImageElement,r=i?e:new Image;r.src=t,r.addEventListener("load",()=>{!i&&e&&n(e,t),s[t]=!0,a&&a()},{once:!0}),a&&r.addEventListener("error",a)}}function r(e,t,a){return new Promise(s=>{i(e,t,s,a)})}},,,,,,function(e,t,a){"use strict";var s=a(29);class n{constructor(){this.tempNum=0}generateMessageId(e,t=!1){const a=n.MESSAGE_ID_OFFSET,s=t?++this.tempNum:0;return e>=a?t?e+(s&n.MESSAGE_ID_INCREMENT-1):e:a+(e*n.MESSAGE_ID_INCREMENT+(s&n.MESSAGE_ID_INCREMENT-1))}getServerMessageId(e){return this.clearMessageId(e,!0)}clearMessageId(e,t){const a=n.MESSAGE_ID_OFFSET;if(e<a)return e;const s=n.MESSAGE_ID_INCREMENT-1,i=e&s;return i!==s&&(e-=i+1),t?(e-a)/n.MESSAGE_ID_INCREMENT:e}incrementMessageId(e,t){return this.generateMessageId(this.getServerMessageId(e)+t)}}n.MESSAGE_ID_INCREMENT=65536,n.MESSAGE_ID_OFFSET=4294967295;const i=new n;s.a&&(s.a.appMessagesIdsManager=i),t.a=i},function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s=a(65),n=a(44),i=a(31),r=a(5),o=a(30),p=a(67);class d{constructor(e){this.tempId=0,this.detached=!0,this.promise=null,this.isUpload=!1,this.cancelable=!0,this.streamable=!1,this.tryAgainOnFail=!0,this.attachMethod="append",this.onClick=e=>{e&&Object(r.a)(e),this.preloader.classList.contains("manual")?this.loadFunc&&this.loadFunc(e):this.promise&&this.promise.cancel&&this.promise.cancel()},e&&Object(i.g)(this,e)}constructContainer(e={}){this.preloader||(this.preloader=document.createElement("div"),this.preloader.classList.add("preloader-container"),e.color&&this.preloader.classList.add("preloader-"+e.color),e.bold&&this.preloader.classList.add("preloader-bold"),this.streamable&&this.preloader.classList.add("preloader-streamable"))}constructDownloadIcon(){this.constructContainer()}construct(){this.construct=null,this.constructContainer(),this.preloader.innerHTML=`\n    <div class="you-spin-me-round">\n    <svg xmlns="http://www.w3.org/2000/svg" class="preloader-circular" viewBox="${this.streamable?"25 25 50 50":"27 27 54 54"}">\n    <circle class="preloader-path-new" cx="${this.streamable?"50":"54"}" cy="${this.streamable?"50":"54"}" r="${this.streamable?19:24}" fill="none" stroke-miterlimit="10"/>\n    </svg>\n    </div>`,this.streamable?this.totalLength=118.61124420166016:this.totalLength=149.82473754882812,this.cancelable?(this.preloader.innerHTML+='\n      <svg xmlns="http://www.w3.org/2000/svg" class="preloader-close" viewBox="0 0 24 24">\n        <g fill="none" fill-rule="evenodd">\n          <polygon points="0 0 24 0 24 24 0 24"/>\n          <path fill="#000" fill-rule="nonzero" d="M5.20970461,5.38710056 L5.29289322,5.29289322 C5.65337718,4.93240926 6.22060824,4.90467972 6.61289944,5.20970461 L6.70710678,5.29289322 L12,10.585 L17.2928932,5.29289322 C17.6834175,4.90236893 18.3165825,4.90236893 18.7071068,5.29289322 C19.0976311,5.68341751 19.0976311,6.31658249 18.7071068,6.70710678 L13.415,12 L18.7071068,17.2928932 C19.0675907,17.6533772 19.0953203,18.2206082 18.7902954,18.6128994 L18.7071068,18.7071068 C18.3466228,19.0675907 17.7793918,19.0953203 17.3871006,18.7902954 L17.2928932,18.7071068 L12,13.415 L6.70710678,18.7071068 C6.31658249,19.0976311 5.68341751,19.0976311 5.29289322,18.7071068 C4.90236893,18.3165825 4.90236893,17.6834175 5.29289322,17.2928932 L10.585,12 L5.29289322,6.70710678 C4.93240926,6.34662282 4.90467972,5.77939176 5.20970461,5.38710056 L5.29289322,5.29289322 L5.20970461,5.38710056 Z"/>\n        </g>\n      </svg>\n      <svg xmlns="http://www.w3.org/2000/svg" class="preloader-download" viewBox="0 0 24 24">\n        <g fill="none" fill-rule="evenodd">\n          <polygon points="0 0 24 0 24 24 0 24"/>\n          <path fill="#000" fill-rule="nonzero" d="M5,19 L19,19 C19.5522847,19 20,19.4477153 20,20 C20,20.5128358 19.6139598,20.9355072 19.1166211,20.9932723 L19,21 L5,21 C4.44771525,21 4,20.5522847 4,20 C4,19.4871642 4.38604019,19.0644928 4.88337887,19.0067277 L5,19 L19,19 L5,19 Z M11.8833789,3.00672773 L12,3 C12.5128358,3 12.9355072,3.38604019 12.9932723,3.88337887 L13,4 L13,13.585 L16.2928932,10.2928932 C16.6533772,9.93240926 17.2206082,9.90467972 17.6128994,10.2097046 L17.7071068,10.2928932 C18.0675907,10.6533772 18.0953203,11.2206082 17.7902954,11.6128994 L17.7071068,11.7071068 L12.7071068,16.7071068 C12.3466228,17.0675907 11.7793918,17.0953203 11.3871006,16.7902954 L11.2928932,16.7071068 L6.29289322,11.7071068 C5.90236893,11.3165825 5.90236893,10.6834175 6.29289322,10.2928932 C6.65337718,9.93240926 7.22060824,9.90467972 7.61289944,10.2097046 L7.70710678,10.2928932 L11,13.585 L11,4 C11,3.48716416 11.3860402,3.06449284 11.8833789,3.00672773 L12,3 L11.8833789,3.00672773 Z"/>\n        </g>\n      </svg>',this.downloadSvg=this.preloader.lastElementChild,this.cancelSvg=this.downloadSvg.previousElementSibling):this.preloader.classList.add("preloader-swing"),this.circle=this.preloader.firstElementChild.firstElementChild.firstElementChild,this.cancelable&&Object(o.b)(this.preloader,this.onClick)}setDownloadFunction(e){this.loadFunc=e}setManual(){this.preloader.classList.add("manual"),this.setProgress(0)}attachPromise(e){if(this.isUpload&&this.promise)return;this.promise=e;const t=--this.tempId,a=Date.now(),s=s=>{if(e.notify=e.notifyAll=null,t!==this.tempId)return;const i=Date.now()-a;if(!s&&this.cancelable){this.setProgress(100);const e=150;i<e?this.detach():setTimeout(()=>{t===this.tempId&&this.detach()},e)}else this.tryAgainOnFail?(this.attach(this.preloader.parentElement),Object(n.b)(()=>{this.setManual()})):this.detach();this.promise=e=null};e.then(()=>s(null)).catch(e=>s(e)),e.addNotifyListener&&e.addNotifyListener(e=>{if(t!==this.tempId)return;const a=e.done/e.total*100;this.setProgress(a)})}attach(e,t=!1,a){if(this.construct&&this.construct(),this.preloader.parentElement&&this.preloader.classList.remove("manual"),this.detached=!1,a&&this.attachPromise(a),this.detached||this.preloader.parentElement!==e){const t=Object(p.a)(this.preloader)?1:2;this.preloader.parentElement!==e&&e[this.attachMethod](this.preloader),Object(s.a)(this.preloader,"is-visible",!0,200,void 0,t)}this.cancelable&&t&&this.setProgress(0)}detach(){this.detached||(this.detached=!0,this.preloader&&this.preloader.parentElement&&Object(s.a)(this.preloader,"is-visible",!1,200,()=>{this.preloader.remove()},1))}setProgress(e){if(this.totalLength||Object(p.a)(this.circle))if(0!==e)try{this.totalLength||(this.totalLength=this.circle.getTotalLength()),this.circle.style.strokeDasharray=Math.max(5,e/100*this.totalLength)+", "+this.totalLength}catch(e){}else this.circle.style.strokeDasharray=""}}},function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return d})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return m}));var s=a(38),n=a(80),i=a(0),r=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};function o(e){let t,a;return e instanceof HTMLVideoElement?(t=e.videoWidth,a=e.videoHeight):(t=e.naturalWidth,a=e.naturalHeight),n={media:e,mediaSize:Object(s.c)(t,a),boxSize:Object(s.c)(320,240),quality:.9},new Promise(e=>{var t,a;const s=document.createElement("canvas"),i=n.mediaSize.aspectFitted(n.boxSize);s.width=i.width*window.devicePixelRatio,s.height=i.height*window.devicePixelRatio,s.getContext("2d").drawImage(n.media,0,0,s.width,s.height),s.toBlob(t=>{e({blob:t,size:i})},null!==(t=n.mimeType)&&void 0!==t?t:"image/jpeg",null!==(a=n.quality)&&void 0!==a?a:1)});var n}function p(e){return new Promise((t,a)=>{e.onseeked=()=>{e.onseeked=()=>{o(e).then(t),e.onseeked=void 0},e.currentTime=0},e.onerror=a,e.currentTime=Math.min(e.duration,1)})}function d(e){return r(this,void 0,void 0,(function*(){const t=yield function(e){return new Promise((t,a)=>{const s=document.createElement("video");s.volume=0,s.addEventListener("loadedmetadata",()=>t(s),{once:!0}),s.addEventListener("error",a,{once:!0}),s.src=e})}(e);return Promise.race([Object(n.a)(2e3),p(t)])}))}function c(e,t=e.HAVE_METADATA,a){return new Promise(s=>{e.readyState>=t?s():e.addEventListener(i.IS_APPLE_MOBILE&&!a?"loadeddata":"canplay",()=>s(),{once:!0})})}function l(e,t=!1){return r(this,void 0,void 0,(function*(){const a=[],s=(e,n)=>r(this,void 0,void 0,(function*(){if(e.isDirectory){const t=e.createReader();yield new Promise((e,a)=>{t.readEntries(t=>r(this,void 0,void 0,(function*(){for(const e of t)yield s(e,n);e()})))})}else if(e)if(t)a.push(e.type);else{const t=n.getAsFile(),s=e instanceof File?e:e instanceof DataTransferItem?e.getAsFile():yield new Promise((a,s)=>e.file(a,e=>a(t)));if(!s)return;a.push(s)}}));if(e instanceof DragEvent&&e.dataTransfer.files&&!e.dataTransfer.items)for(let s=0;s<e.dataTransfer.files.length;s++){const n=e.dataTransfer.files[s];a.push(t?n.type:n)}else{const a=(e.dataTransfer||e.clipboardData||e.originalEvent.clipboardData).items,n=[];for(let e=0;e<a.length;++e){const i=a[e];if("file"===i.kind){const e=(t?i:i.webkitGetAsEntry())||i.getAsFile();n.push(s(e,i))}}yield Promise.all(n)}return a}))}function m(e){const t=document.createElement("input");t.type="file",t.style.display="none",e&&(t.accept=e),document.body.append(t);const a=new Promise((e,a)=>{t.addEventListener("change",t=>{const s=t.target.files[0];s?e(s):a("NO_FILE_SELECTED")},{once:!0})}).finally(()=>{t.remove()});return t.click(),a}},function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"u",(function(){return d})),a.d(t,"e",(function(){return C})),a.d(t,"r",(function(){return w})),a.d(t,"s",(function(){return k})),a.d(t,"w",(function(){return A})),a.d(t,"v",(function(){return E})),a.d(t,"z",(function(){return T})),a.d(t,"a",(function(){return D})),a.d(t,"l",(function(){return U})),a.d(t,"t",(function(){return x})),a.d(t,"n",(function(){return F})),a.d(t,"j",(function(){return R})),a.d(t,"o",(function(){return V})),a.d(t,"y",(function(){return L})),a.d(t,"m",(function(){return j})),a.d(t,"p",(function(){return q})),a.d(t,"d",(function(){return G})),a.d(t,"c",(function(){return H})),a.d(t,"g",(function(){return z})),a.d(t,"k",(function(){return W})),a.d(t,"i",(function(){return K})),a.d(t,"h",(function(){return $})),a.d(t,"x",(function(){return Q})),a.d(t,"q",(function(){return Y})),a.d(t,"A",(function(){return ne})),a.d(t,"b",(function(){return ie}));var s,n=0,i=0,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_=!@#$%^&*()[]{}|;:,.<>/?`~ \\'\"+-";for(n=0;1<<n+1>1<<n;n++);s=(i=(1<<(n>>=1))-1)+1;var o,p,d=V(1,1,1),c=(V(0,1,1),new Array(0)),l=c,m=c,g=c,h=c,u=c,y=c,f=c,_=c,v=c,P=c,b=c,I=c,S=c;function C(e){var t,a,s;for(t=e.length-1;0==e[t]&&t>0;t--);for(a=0,s=e[t];s;s>>=1,a++);return a+=n*t}function M(e,t){var a=V(0,(e.length>t?e.length:t)*n,0);return K(a,e),a}function w(e,t){var a=W(e);return re(a,t),de(a,1)}function k(e,t){var a=M(e,e.length+t.length);return function(e,t){var a;l.length!=2*e.length&&(l=new Array(2*e.length));for($(l,0),a=0;a<t.length;a++)t[a]&&te(l,e,t[a],a);K(e,l)}(a,t),de(a,1)}function A(e,t,a){var s=M(e,a.length);return ce(s,de(t,2),de(a,2)),de(s,1)}function E(e,t){let a=W(e);t-=1;for(let s=0;s<t;++s)a=k(a,e);return de(a,1)}function T(e,t){var a=M(e,e.length>t.length?e.length+1:t.length+1);return ne(a,t),de(a,1)}function D(e,t){var a=M(e,e.length>t.length?e.length+1:t.length+1);return ie(a,t),de(a,1)}function U(e,t,a,s,n){var i=0,r=Math.max(e.length,t.length);for(v.length!=r&&(v=new Array(r),P=new Array(r),b=new Array(r),I=new Array(r),S=new Array(r));!(1&e[0]||1&t[0]);)X(e),X(t),i++;for(K(v,e),K(a,t),$(P,1),$(b,0),$(I,0),$(S,1);;){for(;!(1&v[0]);)X(v),1&P[0]||1&b[0]?(ie(P,t),X(P),ne(b,e),X(b)):(X(P),X(b));for(;!(1&a[0]);)X(a),1&I[0]||1&S[0]?(ie(I,t),X(I),ne(S,e),X(S)):(X(I),X(S));if(F(a,v)?(ne(a,v),ne(I,P),ne(S,b)):(ne(v,a),ne(P,I),ne(b,S)),j(v,0)){for(;x(I);)ie(I,t),ne(S,e);return Z(S,-1),K(s,I),K(n,S),void Y(a,i)}}}function x(e){return e[e.length-1]>>n-1&1}function O(e,t,a){var s,n=e.length,i=t.length;for(o=n+a<i?n+a:i,s=i-1-a;s<n&&s>=0;s++)if(e[s]>0)return 1;for(s=n-1+a;s<i;s++)if(t[s]>0)return 0;for(s=o-1;s>=a;s--){if(e[s-a]>t[s])return 1;if(e[s-a]<t[s])return 0}return 0}function F(e,t){var a,s=e.length<t.length?e.length:t.length;for(a=e.length;a<t.length;a++)if(t[a])return 0;for(a=t.length;a<e.length;a++)if(e[a])return 1;for(a=s-1;a>=0;a--){if(e[a]>t[a])return 1;if(e[a]<t[a])return 0}return 0}function R(e,t,a,r){var o,p,d,c,l,m,g,h;for(K(r,e),p=t.length;0===t[p-1];p--);for(h=t[p-1],g=0;h;g++)h>>=1;for(Y(t,g=n-g),Y(r,g),o=r.length;0===r[o-1]&&o>p;o--);for($(a,0);!O(t,r,o-p);)se(r,t,o-p),a[o-p]++;for(d=o-1;d>=p;d--){for(r[d]==t[p-1]?a[d-p]=i:a[d-p]=Math.floor((r[d]*s+r[d-1])/t[p-1]);m=(l=(p>1?t[p-2]:0)*a[d-p])>>n,l&=i,m=(c=m+a[d-p]*t[p-1])>>n,c&=i,m==r[d]?c==r[d-1]?l>(d>1?r[d-2]:0):c>r[d-1]:m>r[d];)a[d-p]--;te(r,t,-a[d-p],d-p),x(r)&&(ae(r,t,d-p),a[d-p]--)}Q(t,g),Q(r,g)}function B(e,t){var a,n=0;for(a=e.length-1;a>=0;a--)n=(n*s+e[a])%t;return n}function V(e,t,a){var s;s=a>(s=Math.ceil(t/n)+1)?a:s;var i=new Array(s);return $(i,e),i}function L(e,t,a){var s,n,i,o,p,d=e.length;if(-1===t){for(i=new Array(0);;){for(o=new Array(i.length+1),n=0;n<i.length;n++)o[n+1]=i[n];if(o[0]=parseInt(e,10),i=o,(s=e.indexOf(",",0))<1)break;if(0==(e=e.substring(s+1)).length)break}return i.length<a?(K(o=new Array(a),i),o):i}for(i=V(0,t*d,0),n=0;n<d&&(s=r.indexOf(e.substring(n,n+1),0),t<=36&&s>=36&&(s-=26),!(s>=t||s<0));n++)Z(i,t),J(i,s);for(d=i.length;d>0&&!i[d-1];d--);for(d=a>d+1?a:d+1,o=new Array(d),p=d<i.length?d:i.length,n=0;n<p;n++)o[n]=i[n];for(;n<d;n++)o[n]=0;return o}function j(e,t){var a;if(e[0]!=t)return 0;for(a=1;a<e.length;a++)if(e[a])return 0;return 1}function N(e,t){var a,s=e.length<t.length?e.length:t.length;for(a=0;a<s;a++)if(e[a]!==t[a])return 0;if(e.length>t.length){for(;a<e.length;a++)if(e[a])return 0}else for(;a<t.length;a++)if(t[a])return 0;return 1}function q(e){var t;for(t=0;t<e.length;t++)if(e[t])return 0;return 1}function G(e,t){var a,s,n="";if(y.length!==e.length?y=W(e):K(y,e),-1===t){for(a=e.length-1;a>0;a--)n+=e[a]+",";n+=e[0]}else for(;!q(y);)s=ee(y,t),n=r.substring(s,s+1)+n;return 0===n.length&&(n="0"),n}function H(e,t=!0){y.length!==e.length?y=W(e):K(y,e);const a=[];for(;!q(y);)c=ee(y,256),a.push(c);return t&&a.reverse(),a}function z(e,t){return F(e,t)?1:N(e,t)?0:-1}function W(e){return K(p=Array(e.length),e),p}function K(e,t){var a,s=e.length<t.length?e.length:t.length;for(a=0;a<s;a++)e[a]=t[a];for(a=s;a<e.length;a++)e[a]=0}function $(e,t){var a,s,r=e.length;for(s=t,a=0;a<r;a++)e[a]=s&i,s>>=n}function J(e,t){var a,r,o,p;for(e[0]+=t,r=e.length,o=0,a=0;a<r;a++)if(p=0,(o+=e[a])<0&&(o+=(p=-(o>>n))*s),e[a]=o&i,!(o=(o>>n)-p))return}function Q(e,t){var a,s=Math.floor(t/n);if(s){for(a=0;a<e.length-s;a++)e[a]=e[a+s];for(;a<e.length;a++)e[a]=0;t%=n}for(a=0;a<e.length-1;a++)e[a]=i&(e[a+1]<<n-t|e[a]>>t);e[a]>>=t}function X(e){var t;for(t=0;t<e.length-1;t++)e[t]=i&(e[t+1]<<n-1|e[t]>>1);e[t]=e[t]>>1|e[t]&s>>1}function Y(e,t){var a,s=Math.floor(t/n);if(s){for(a=e.length;a>=s;a--)e[a]=e[a-s];for(;a>=0;a--)e[a]=0;t%=n}if(t){for(a=e.length-1;a>0;a--)e[a]=i&(e[a]<<t|e[a-1]>>n-t);e[a]=i&e[a]<<t}}function Z(e,t){var a,r,o,p;if(t)for(r=e.length,o=0,a=0;a<r;a++)p=0,(o+=e[a]*t)<0&&(o+=(p=-(o>>n))*s),e[a]=o&i,o=(o>>n)-p}function ee(e,t){var a,n,i=0;for(a=e.length-1;a>=0;a--)n=i*s+e[a],e[a]=Math.floor(n/t),i=n%t;return i}function te(e,t,a,s){var r,o,p,d;for(p=e.length<s+t.length?e.length:s+t.length,d=e.length,o=0,r=s;r<p;r++)o+=e[r]+a*t[r-s],e[r]=o&i,o>>=n;for(r=p;o&&r<d;r++)o+=e[r],e[r]=o&i,o>>=n}function ae(e,t,a){var s,r,o,p;for(o=e.length<a+t.length?e.length:a+t.length,p=e.length,r=0,s=a;s<o;s++)r+=e[s]+t[s-a],e[s]=r&i,r>>=n;for(s=o;r&&s<p;s++)r+=e[s],e[s]=r&i,r>>=n}function se(e,t,a){var s,r,o,p;for(o=e.length<a+t.length?e.length:a+t.length,p=e.length,r=0,s=a;s<o;s++)r+=e[s]-t[s-a],e[s]=r&i,r>>=n;for(s=o;r&&s<p;s++)r+=e[s],e[s]=r&i,r>>=n}function ne(e,t){var a,s,r;for(r=e.length<t.length?e.length:t.length,s=0,a=0;a<r;a++)s+=e[a]-t[a],e[a]=s&i,s>>=n;for(a=r;s&&a<e.length;a++)s+=e[a],e[a]=s&i,s>>=n}function ie(e,t){var a,s,r;for(r=e.length<t.length?e.length:t.length,s=0,a=0;a<r;a++)s+=e[a]+t[a],e[a]=s&i,s>>=n;for(a=r;s&&a<e.length;a++)s+=e[a],e[a]=s&i,s>>=n}function re(e,t){h.length!==e.length?h=W(e):K(h,e),u.length!==e.length&&(u=W(e)),R(h,t,u,e)}function oe(e,t,a){var s;for(m.length!=2*e.length&&(m=new Array(2*e.length)),$(m,0),s=0;s<t.length;s++)t[s]&&te(m,e,t[s],s);re(m,a),K(e,m)}function pe(e,t){var a,s,r,o,p;for(o=e.length;o>0&&!e[o-1];o--);for(p=o>t.length?2*o:2*t.length,m.length!=p&&(m=new Array(p)),$(m,0),a=0;a<o;a++){for(r=m[2*a]+e[a]*e[a],m[2*a]=r&i,r>>=n,s=a+1;s<o;s++)r=m[a+s]+2*e[a]*e[s]+r,m[a+s]=r&i,r>>=n;m[a+o]=r}re(m,t),K(e,m)}function de(e,t){var a,s;for(a=e.length;a>0&&!e[a-1];a--);return K(s=new Array(a+t),e),s}function ce(e,t,a){var i,r,o,p;if(f.length!=a.length&&(f=W(a)),0!=(1&a[0])){for($(f,0),o=a.length;o>0&&!a[o-1];o--);for(p=s-function(e,t){for(var a=1,s=0;;){if(1===e)return a;if(0===e)return 0;if(s-=a*Math.floor(t/e),1===(t%=e))return s;if(0===t)return 0;a-=s*Math.floor(e/t),e%=t}}(B(a,s),s),f[o]=1,oe(e,f,a),g.length!=e.length?g=W(e):K(g,e),i=t.length-1;i>0&!t[i];i--);if(0!=t[i]){for(r=1<<n-1;r&&!(t[i]&r);r>>=1);for(;;){if(!(r>>=1)){if(--i<0)return void le(e,d,a,p);r=1<<n-1}le(e,e,a,p),r&t[i]&&le(e,g,a,p)}}else $(e,1)}else for(K(f,e),$(e,1);!j(t,0);)1&t[0]&&oe(e,f,a),ee(t,2),pe(f,a)}function le(e,t,a,s){var r,o,p,d,c,l,m=a.length,g=t.length;for(_.length!=m&&(_=new Array(m)),$(_,0);m>0&&0==a[m-1];m--);for(;g>0&&0==t[g-1];g--);for(l=_.length-1,r=0;r<m;r++){for(p=(c=_[0]+e[r]*t[0])+(d=(c&i)*s&i)*a[0]>>n,c=e[r],o=1;o<g-4;)p+=_[o]+d*a[o]+c*t[o],_[o-1]=p&i,p>>=n,o++,p+=_[o]+d*a[o]+c*t[o],_[o-1]=p&i,p>>=n,o++,p+=_[o]+d*a[o]+c*t[o],_[o-1]=p&i,p>>=n,o++,p+=_[o]+d*a[o]+c*t[o],_[o-1]=p&i,p>>=n,o++,p+=_[o]+d*a[o]+c*t[o],_[o-1]=p&i,p>>=n,o++;for(;o<g;)p+=_[o]+d*a[o]+c*t[o],_[o-1]=p&i,p>>=n,o++;for(;o<m-4;)p+=_[o]+d*a[o],_[o-1]=p&i,p>>=n,o++,p+=_[o]+d*a[o],_[o-1]=p&i,p>>=n,o++,p+=_[o]+d*a[o],_[o-1]=p&i,p>>=n,o++,p+=_[o]+d*a[o],_[o-1]=p&i,p>>=n,o++,p+=_[o]+d*a[o],_[o-1]=p&i,p>>=n,o++;for(;o<m;)p+=_[o]+d*a[o],_[o-1]=p&i,p>>=n,o++;for(;o<l;)p+=_[o],_[o-1]=p&i,p>>=n,o++;_[o-1]=p&i}F(a,_)||ne(_,a),K(e,_)}},,function(e,t,a){"use strict";var s=a(103),n=a(36),i=a(66),r=a(47),o=a(32),p=a(15),d=a(71),c=a(43),l=a(55),m=a(41);const g=new class{constructor(){this.savedAvatarURLs={}}isAvatarCached(e){return!!this.savedAvatarURLs[e]}removeFromAvatarsCache(e){this.savedAvatarURLs[e]&&delete this.savedAvatarURLs[e]}loadAvatar(e,t,a){const s=c.a.getInputPeerById(e);let n,i=!1,r=this.savedAvatarURLs[e];if(r&&r[a])"string"!=typeof r[a]?n=r[a]:(n=Promise.resolve(r[a]),i=!0);else{r||(r=this.savedAvatarURLs[e]={});const i={_:"inputPeerPhotoFileLocation",pFlags:{},peer:s,photo_id:t.photo_id};"photo_big"===a&&(i.pFlags.big=!0);const o={dcId:t.dc_id,location:i},p=d.a.download(o);n=r[a]=p.then(e=>r[a]=URL.createObjectURL(e))}return{cached:i,loadPromise:n}}putAvatar(e,t,a,r,o=new Image,d=!1){let c,m,g,{cached:h,loadPromise:u}=this.loadAvatar(t,a,r);if(o.classList.add("avatar-photo"),h)m=()=>{Object(n.a)(e,o),e.dataset.color=""};else{const d=p.default.settings.animationsEnabled;if(d&&o.classList.add("fade-in"),"photo_big"===r){const s=this.putAvatar(e,t,a,"photo_small");c=s.loadPromise,g=s.thumbImage}else if(a.stripped_thumb){g=new Image,e.classList.add("avatar-relative"),g.classList.add("avatar-photo","avatar-photo-thumbnail");const t=l.a.getPreviewURLFromBytes(a.stripped_thumb);c=Object(s.b)(g,t).then(()=>{Object(n.a)(e,g)})}m=()=>{g?e.append(o):Object(n.a)(e,o),setTimeout(()=>{e.childElementCount&&i.a.mutateElement(o,()=>{e.dataset.color="",d&&o.classList.remove("fade-in"),g&&g.remove()})},d?200:0)}}const y=u.then(e=>Object(s.b)(o,e)).then(m);return{cached:h,loadPromise:c||y,thumbImage:g}}s(e,t,a,s){e.innerHTML=t,e.dataset.color=a,e.classList.remove("tgico-saved","tgico-deletedaccount","tgico-reply_filled"),s&&e.classList.add(s)}putPhoto(e,t,a=!1,s="",n=!1){var i;const d=p.default.myId;if(t===d&&a)return void this.s(e,"","","tgico-saved");if(t!==r.c&&t.isUser()){const a=m.a.getUser(t);if(a&&a.pFlags&&a.pFlags.deleted)return void this.s(e,"",c.a.getPeerColorById(t),"tgico-deletedaccount")}const l=c.a.getPeerPhoto(t),g=!!l,h=!!e.firstElementChild&&!e.firstElementChild.classList.contains("emoji");if(!g||!h||!this.savedAvatarURLs[t]){let n,p="";if(!t||t===d&&a||(p=c.a.getPeerColorById(t)),t===r.d)return void this.s(e,"",p,"tgico-reply_filled");if(s)n=o.b.getAbbreviation(s);else{n=null!==(i=c.a.getPeer(t).initials)&&void 0!==i?i:""}this.s(e,n,p,"")}if(g){const a="photo_small";return this.putAvatar(e,t,l,a,void 0,n)}}};t.a=g},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=()=>{let e={cleaned:!1};return{clean:()=>{e.cleaned=!0,e={cleaned:!1}},get:t=>{const a=e;return()=>!a.cleaned&&(!t||t())}}}},function(e,t,a){"use strict";var s;!function(e){e[e.UNMUTED=0]="UNMUTED",e[e.MUTED=1]="MUTED",e[e.MUTED_BY_ADMIN=2]="MUTED_BY_ADMIN",e[e.CONNECTING=3]="CONNECTING",e[e.CLOSED=4]="CLOSED"}(s||(s={})),t.a=s},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(132);class n{constructor(e,t=0){this.options=e,this.minChars=t,this.fullTexts=new Map}indexObject(e,t){if(this.options&&t.trim()&&(t=Object(s.c)(t,this.options)),!t)return this.fullTexts.delete(e),!1;this.fullTexts.set(e,t)}search(e){const t=this.fullTexts;this.options&&(e=Object(s.c)(e,this.options));const a=[],n=e.split(" "),i=n.length;t.forEach((e,t)=>{let s=!0,r=0;for(let t=0;t<i;++t){const a=n[t],i=e.indexOf(a);if(-1===i||0!==i&&" "!==e[i-1]){s=!1;break}r+=a.length}if(s){r+=i-1;const s=e.length;(this.minChars<=r||s<=r)&&a.push({fullText:e,fullTextLength:s,what:t,foundChars:r})}}),a.sort((e,t)=>e.fullTextLength-t.fullTextLength||t.foundChars-e.foundChars);return new Set(a.map(e=>e.what))}}},function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return g}));var s=a(64);const n=new Map,i=new Set,r='Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif';let o;const p=()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(d)},d=()=>{i.forEach(c),i.clear()};window.addEventListener("resize",()=>{for(const[e]of n)i.add(e);p()},{capture:!0,passive:!0});const c=e=>{let t=n.get(e);const a=!t;let{text:i,textLength:o,from:p,multiplier:d,font:c,textWidth:l,elementWidth:g}=t||{};a&&(i=e.textContent,o=i.length,p=50,d=p>0&&p/100,c=`${e.dataset.fontWeight||400} 16px ${r}`,l=m(i,c),g=e.getBoundingClientRect().width,t={text:i,textLength:o,from:p,multiplier:d,font:c,textWidth:l,elementWidth:g},n.set(e,t));const h=e.getBoundingClientRect().width,u=a||g!==h;if(!a&&u&&(t.elementWidth=g=h),u)if(l>g){e.setAttribute("title",i);let a=i,n=g;for(;a.length>3;){let t=a.length;const i=d&&Object(s.a)(d*t<<0,1,t-2)||Math.max(t+p-1,1),r=a.substr(0,i).replace(/\s*$/,""),o=a.substr(i+1).replace(/^\s*/,"");if(a=r+o,n=m(a+"",c),n<g){e.textContent=r+""+o;break}}t.elementWidth=e.getBoundingClientRect().width}else e.removeAttribute("title")};let l;function m(e,t){if(!l){const e=document.createElement("canvas");l=e.getContext("2d"),l.font=t}return l.measureText(e).width}class g extends HTMLElement{constructor(){super()}connectedCallback(){n.set(this,null),i.add(this),p()}disconnectedCallback(){n.delete(this)}}customElements.define("middle-ellipsis-element",g)},function(e,t,a){"use strict";var s=a(15),n=a(43),i=a(42),r=a(73),o=a(32),p=a(77),d=a(33),c=a(59),l=a(31),m=a(91),g=a(29),h=a(86),u=a(109),y=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const f=new class{constructor(){this.drafts={},this.getAllDraftPromise=null,h.a.get("drafts").then(e=>{this.drafts=e||{}}),s.default.addMultipleEventsListeners({updateDraftMessage:e=>{const t=n.a.getPeerId(e.peer);this.saveDraft(t,e.threadId,e.draft,{notify:!0})}})}getKey(e,t){return e+(t?"_"+t:"")}getDraft(e,t){return this.drafts[this.getKey(e,t)]}addMissedDialogs(){return this.getAllDrafts().then(()=>{for(const e in this.drafts){if(-1!==e.indexOf("_"))continue;const t=e.toPeerId();i.a.getDialogOnly(t)||i.a.reloadConversation(t)}})}getAllDrafts(){return this.getAllDraftPromise||(this.getAllDraftPromise=d.a.invokeApi("messages.getAllDrafts").then(e=>{(r.a.updatesState.syncLoading||Promise.resolve()).then(()=>{r.a.processUpdateMessage(e)})}))}saveDraft(e,t,a,n={}){const i=this.processApiDraft(a),r=this.getKey(e,t);return i?this.drafts[r]=i:delete this.drafts[r],h.a.set({drafts:this.drafts}),n.notify&&s.default.dispatchEvent("draft_updated",{peerId:e,threadId:t,draft:i,force:n.force}),i}draftsAreEqual(e,t){if(typeof e!=typeof t)return!1;if(!Object(m.b)(e))return!0;if(e._!==t._)return!1;if("draftMessage"===e._&&t._===e._){if(e.reply_to_msg_id!==t.reply_to_msg_id)return!1;if(!Object(l.b)(e.entities,t.entities))return!1;if(e.message!==t.message)return!1;if(e.pFlags.no_webpage!==t.pFlags.no_webpage)return!1}return!0}isEmptyDraft(e){return!e||"draftMessageEmpty"===e._||!(e.reply_to_msg_id>0)&&!e.message.length}processApiDraft(e){if(!e||"draftMessage"!==e._)return;const t=o.b.parseEntities(e.message),a=e.entities||[],s=o.b.mergeEntities(a.slice(),t);return e.rMessage=o.b.wrapDraftText(e.message,{entities:s}),e.reply_to_msg_id&&(e.reply_to_msg_id=u.a.generateMessageId(e.reply_to_msg_id)),e}syncDraft(e,t,a,s=!0,r=!1){return y(this,void 0,void 0,(function*(){const o=this.getDraft(e,t);if(this.draftsAreEqual(o,a))return!0;let l,m={peer:n.a.getInputPeerById(e),message:""};if(this.isEmptyDraft(a))l={_:"draftMessageEmpty"};else{let e=a.message,t=a.entities;a.reply_to_msg_id&&(m.reply_to_msg_id=u.a.getServerMessageId(a.reply_to_msg_id)),(null==t?void 0:t.length)&&(m.entities=i.a.getInputEntities(t)),a.pFlags.no_webpage&&(m.no_webpage=a.pFlags.no_webpage),m.message=e}const g=l||a;return g.date=Object(c.h)(!0)+p.a.serverTimeOffset,this.saveDraft(e,t,g,{notify:!0,force:r}),!(s&&!t)||d.a.invokeApi("messages.saveDraft",m)}))}clearAllDrafts(){return d.a.invokeApi("messages.clearAllDrafts").then(e=>{if(e)for(const e in this.drafts){const[t,a]=e.split("_");s.default.dispatchEvent("draft_updated",{peerId:t.toPeerId(),threadId:a?+a:void 0,draft:void 0})}})}clearDraft(e,t){t?this.syncDraft(e,t):this.saveDraft(e,t,null,{notify:!0,force:!0})}setDraft(e,t,a,s){const n={_:"draftMessage",date:Date.now()/1e3|0,message:a,pFlags:{},entities:s};t?this.syncDraft(e,t,n,!1,!0):this.saveDraft(e,t,n,{notify:!0,force:!0})}};g.a.appDraftsManager=f,t.a=f},function(e,t,a){"use strict";var s=a(29);class n{constructor(e){this.assets=e,this.tempId=0}playSound(e,t=!1){++this.tempId;try{const a=this.createAudio();a.autoplay=!0,a.src="assets/audio/"+e,a.loop=t,a.play()}catch(t){console.error("playSound",e,t)}}createAudio(){let{audio:e}=this;return e||(e=this.audio=new Audio,e.play(),e)}stopSound(){var e;null===(e=this.audio)||void 0===e||e.pause()}cancelDelayedPlay(){++this.tempId}playSoundWithTimeout(e,t,a){const s=++this.tempId;setTimeout(()=>{this.tempId===s&&this.playSound(e,t)},a)}}var i=a(31),r=a(61),o=a(140),p=a(163),d=a(116),c=a(160),l=a(148),m=a(167),g=a(146),h=a(147),u=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};var y=a(136),f=a(37),_=a(33),v=a(47),P=a(15),b=a(73),I=a(51),S=a(43),C=a(41),M=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const w=new class{constructor(){this.makeSsrcsFromParticipant=e=>{var t,a;return[this.makeSsrcFromParticipant(e,"audio",e.source),(null===(t=e.video)||void 0===t?void 0:t.audio_source)&&this.makeSsrcFromParticipant(e,"audio",e.video.audio_source),e.video&&this.makeSsrcFromParticipant(e,"video",e.video.source_groups,e.video.endpoint),(null===(a=e.presentation)||void 0===a?void 0:a.audio_source)&&this.makeSsrcFromParticipant(e,"audio",e.presentation.audio_source),e.presentation&&this.makeSsrcFromParticipant(e,"video",e.presentation.source_groups,e.presentation.endpoint)].filter(Boolean)},this.log=Object(f.b)("GROUP-CALLS"),this.groupCalls=new Map,this.participants=new Map,this.nextOffsets=new Map,P.default.addMultipleEventsListeners({updateGroupCall:e=>{this.saveGroupCall(e.call,e.chat_id)},updateGroupCallParticipants:e=>{this.saveGroupCall(e.call);const t=e.call.id;this.saveApiParticipants(t,e.participants)}}),P.default.addEventListener("group_call_update",e=>{if("groupCallDiscarded"===e._){const{currentGroupCall:t}=this;(null==t?void 0:t.id)===e.id&&t.hangUp(!1,!1,!0),this.participants.delete(e.id)}}),this.audioAsset=new n(["group_call_connect.mp3","group_call_end.mp3","group_call_start.mp3","voip_onallowtalk.mp3"])}get groupCall(){return this.currentGroupCall}getCachedParticipants(e){let t=this.participants.get(e);return t||this.participants.set(e,t=new Map),t}prepareToSavingNextOffset(e){const t=this.nextOffsets,a=t.get(e);return{nextOffset:a,setNextOffset:s=>{t.get(e)===a&&t.set(e,s)}}}saveApiParticipant(e,t,a){const{currentGroupCall:s}=this,n=this.getCachedParticipants(e),r=S.a.getPeerId(t.peer),o=n.get(r),p=t.pFlags.left;if(!o&&p)return;t.pFlags.muted||t.pFlags.can_self_unmute||(t.pFlags.can_self_unmute=!0);const d=(null==s?void 0:s.id)===e;o?(Object(i.i)(o,t),t=o):n.set(r,t),d&&s.onParticipantUpdate(t,this.doNotDispatchParticipantUpdate);const c=this.getGroupCall(e);if("groupCall"===(null==c?void 0:c._)){let e=!1;p?(--c.participants_count,e=!0):!t.pFlags.just_joined||o||t.pFlags.self||(++c.participants_count,e=!0),e&&P.default.dispatchEvent("group_call_update",c)}p&&n.delete(r),o&&this.doNotDispatchParticipantUpdate!==r&&P.default.dispatchEvent("group_call_participant",{groupCallId:e,participant:t})}saveApiParticipants(e,t,a){t.saved||(t.saved=!0,t.forEach(t=>this.saveApiParticipant(e,t,a)))}editParticipant(e,t,a){return M(this,void 0,void 0,(function*(){if(!Object.keys(a).length)return;if(t){const{currentGroupCall:s}=this,n=(null==s?void 0:s.id)===e&&t.pFlags.self;if(n&&void 0!==a.muted&&!s.isSharingAudio&&(delete a.muted,!Object.keys(a).length))return;const i=a.muted;void 0!==i&&t.pFlags.self&&(i?t.pFlags.muted=!0:t.pFlags.can_self_unmute&&delete t.pFlags.muted),void 0!==a.raiseHand&&(a.raiseHand?t.raise_hand_rating="1":delete t.raise_hand_rating),n&&(void 0!==a.videoStopped&&(a.videoStopped?delete t.video:t.video=this.generateSelfVideo(s.connections.main.sources.video)),!t.pFlags.muted&&t.pFlags.can_self_unmute&&s.setMuted(!1),s.dispatchEvent("state",s.state)),P.default.dispatchEvent("group_call_participant",{groupCallId:e,participant:t})}const s=t.pFlags.self?v.c:S.a.getPeerId(t.peer),n=yield _.a.invokeApiSingle("phone.editGroupCallParticipant",{call:w.getGroupCallInput(e),participant:s===v.c?S.a.getInputPeerSelf():S.a.getInputPeerById(s),muted:a.muted,volume:a.volume,raise_hand:a.raiseHand,video_paused:a.videoPaused,video_stopped:a.videoStopped,presentation_paused:a.presentationPaused});b.a.processUpdateMessage(n)}))}getGroupCall(e){return this.groupCalls.get(e)}getGroupCallFull(e,t){return M(this,void 0,void 0,(function*(){const a=this.getGroupCall(e);if(a&&"inputGroupCall"!==a._&&!t)return a;const s=this.getCachedParticipants(e).size?0:100;return _.a.invokeApiSingleProcess({method:"phone.getGroupCall",params:{call:this.getGroupCallInput(e),limit:s},processResult:t=>{C.a.saveApiUsers(t.users),I.a.saveApiChats(t.chats),this.saveApiParticipants(e,t.participants,!0);const a=this.saveGroupCall(t.call);return s&&void 0===this.nextOffsets.get(e)&&this.nextOffsets.set(e,t.participants_next_offset),a}})}))}saveGroupCall(e,t){const a=this.groupCalls.get(e.id),s="inputGroupCall"!==e._&&(!a||"groupCallDiscarded"!==a._);return a?(s&&Object(i.i)(a,e),e=a):this.groupCalls.set(e.id,e),s&&P.default.dispatchEvent("group_call_update",e),e}startConnectingSound(){this.stopConnectingSound(),this.audioAsset.playSoundWithTimeout("group_call_connect.mp3",!0,2500)}stopConnectingSound(){this.audioAsset.stopSound(),this.audioAsset.cancelDelayedPlay()}setCurrentGroupCall(e){this.currentGroupCall=e,e&&P.default.dispatchEvent("group_call_instance",e)}createGroupCall(e,t,a){return M(this,void 0,void 0,(function*(){const s=yield _.a.invokeApi("phone.createGroupCall",{peer:S.a.getInputPeerById(e.toPeerId(!0)),random_id:Object(r.a)(32),schedule_date:t,title:a});b.a.processUpdateMessage(s);return s.updates.find(e=>"updateGroupCall"===e._).call}))}joinGroupCall(e,t,a=!0,s,n){return M(this,void 0,void 0,(function*(){let i;return this.audioAsset.createAudio(),this.log(`joinGroupCall chatId=${e} id=${t} muted=${a} rejoin=${s}`),i=s?this.currentGroupCall.connections.main.streamManager:yield function(e,t){return u(this,void 0,void 0,(function*(){const a={audio:Object(m.a)(),video:t&&Object(h.a)()},s=new l.a(c.b);try{const t=yield Object(g.a)(a,e);s.addStream(t,"input")}catch(e){console.error("joinGroupCall getStream error",e,a),s.inputStream=new MediaStream}return s}))}(a,n),this.joinGroupCallInternal(e,t,i,a,s,n)}))}joinGroupCallInternal(e,t,a,s,n=!1,i){return M(this,void 0,void 0,(function*(){const r=this.log.bindPrefix("joinGroupCallInternal");r("start",t);let{currentGroupCall:o}=this;if(!o||!n){o=new p.a({chatId:e,id:t}),o.fixSafariAudio(),o.addEventListener("state",e=>{this.currentGroupCall===o&&e===d.a.CLOSED&&(this.setCurrentGroupCall(null),this.stopConnectingSound(),this.audioAsset.playSound("group_call_end.mp3"),P.default.dispatchEvent("chat_update",o.chatId))}),o.groupCall=yield this.getGroupCallFull(t);const c=o.createConnectionInstance({streamManager:a,type:"main",options:{type:"main",isMuted:s,joinVideo:i,rejoin:n}}),l=c.createPeerConnection();return l.addEventListener("negotiationneeded",()=>{c.negotiate()}),l.addEventListener("track",e=>{r("ontrack",e),o.onTrack(e)}),l.addEventListener("iceconnectionstatechange",()=>{o.dispatchEvent("state",o.state);const{iceConnectionState:e}=l;switch("disconnected"===e||"checking"===e||"new"===e?this.startConnectingSound():this.stopConnectingSound(),e){case"checking":break;case"closed":o.hangUp();break;case"completed":break;case"connected":o.joined||(o.joined=!0,this.audioAsset.playSound("group_call_start.mp3"),this.getGroupCallParticipants(t).then(({participants:e})=>{this.saveApiParticipants(t,[...e.values()])}));break;case"disconnected":break;case"failed":o.hangUp()}}),c.createDescription(),c.createDataChannel(),c.appendStreamToConference(),this.setCurrentGroupCall(o),r("set currentGroupCall",t,o),this.startConnectingSound(),c.negotiate()}o.handleUpdateGroupCallParticipants=!1,o.updatingSdp=!1,r("update currentGroupCall",t,o)}))}getGroupCallInput(e){const t=this.getGroupCall(e);return{_:"inputGroupCall",id:t.id,access_hash:t.access_hash}}generateSelfVideo(e,t){return e&&{_:"groupCallParticipantVideo",pFlags:{},endpoint:"",source_groups:e.sourceGroups,audio_source:t}}generateSelfParticipant(){var e,t;const a=this.currentGroupCall.connections.main.sources,s=null===(e=this.currentGroupCall.connections.presentation)||void 0===e?void 0:e.sources;return{_:"groupCallParticipant",pFlags:{can_self_unmute:!0,self:!0},source:a.audio.source,video:this.generateSelfVideo(a.video),presentation:s&&this.generateSelfVideo(s.video,null===(t=s.audio)||void 0===t?void 0:t.source),date:Object(o.a)(!0),peer:S.a.getOutputPeer(P.default.myId)}}makeSsrcFromParticipant(e,t,a,s){return Object(y.c)(t,a,s)}getGroupCallParticipants(e){return M(this,void 0,void 0,(function*(){const{nextOffset:t,setNextOffset:a}=this.prepareToSavingNextOffset(e);return""!==t&&(yield _.a.invokeApiSingleProcess({method:"phone.getGroupParticipants",params:{call:this.getGroupCallInput(e),ids:[],sources:[],offset:t||"",limit:100},processResult:t=>{const s=t.count===t.participants.length?"":t.next_offset;I.a.saveApiChats(t.chats),C.a.saveApiUsers(t.users),this.saveApiParticipants(e,t.participants),a(s)}})),{participants:this.getCachedParticipants(e),isEnd:""===this.nextOffsets.get(e)}}))}hangUp(e,t=!1,a=!1){return M(this,void 0,void 0,(function*(){this.log(`hangUp start id=${e} discard=${t} rejoin=${a}`);const{currentGroupCall:s}=this;(null==s?void 0:s.id)===e&&s.hangUp(t,a)}))}toggleMuted(e){return this.changeUserMuted(v.c,e)}changeUserMuted(e,t){const{currentGroupCall:a}=this;if(!a)return;const s=a.getParticipantByPeerId(e);return v.c===e&&s.pFlags.can_self_unmute&&(t=void 0===t?!s.pFlags.muted:t),this.editParticipant(a.id,s,{muted:t})}};s.a&&(s.a.appGroupCallsManager=w);t.a=w},,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return d}));var s=a(141);const n=/[`~!@#$%^&*()\-_=+\[\]\\|{}'";:\/?.>,<]+/g,i=/^\s+|\s$/g;function r(e){return e.replace(n,"").replace(i,"")}function o(e){return e.replace(/[^A-Za-z0-9]/g,e=>{const t=s.a.LatinizeMap[e];return void 0!==t?t:e})}function p(e,t=!0){const a="%"===e.charAt(0);return e=r(e),t&&(e=o(e)),e=e.toLowerCase(),a&&(e="%"+e),e}function d(e,t={}){const a=t.includeTag&&"%"===e.charAt(0);return t.clearBadChars&&(e=r(e)),t.latinize&&(e=o(e)),t.ignoreCase&&(e=e.toLowerCase()),a&&(e="%"+e),e}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var s,n=a(29);!function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom",e[e.Both=3]="Both"}(s||(s={}));class i{constructor(){this.sliceConstructor=i.getSliceConstructor(this);const e=this.constructSlice();this.slices=[e]}static getSliceConstructor(e){return class extends Array{constructor(){super(...arguments),this.end=s.None}isEnd(t){if((this.end&t)===t)return!0;let a=!1;if(t===s.Top){const s=e.last;a=!!(s.end&t)&&this.includes(s[s.length-1])}else if(t===s.Bottom){const s=e.first;a=!!(s.end&t)&&this.includes(s[0])}else if(t===s.Both)return this.isEnd(s.Top)&&this.isEnd(s.Bottom);return a&&this.setEnd(t),a}setEnd(e){this.end|=e}unsetEnd(e){this.end^=e}splice(t,a,...n){const i=super.splice(t,a,...n);if(!this.length){const t=e.slices,a=t.indexOf(this);-1!==a&&(1===t.length?this.unsetEnd(s.Both):t.splice(a,1))}return i}}}constructSlice(...e){const t=new this.sliceConstructor(e.length);for(let a=0,s=e.length;a<s;++a)t[a]=e[a];return t}insertSlice(e,t=!0){if(!e.length)return;const a=this.slices[0];if(!a.length)return a.push(...e),a;const s=e[e.length-1],n=e[0];let i,r=-1,o=-1,p=0;for(;p<this.slices.length&&(i=this.slices[p],r=i.indexOf(s),o=i.indexOf(n),-1===o||-1===r)&&(-1===o&&-1===r);++p);if(-1!==o&&-1!==r);else if(-1!==o){const t=e.slice(i.length-o);i.push(...t)}else if(-1!==r){const t=e.slice(0,e.length-r-1);i.unshift(...t)}else{let t=0;for(const a=this.slices.length;t<a;++t){const a=this.slices[t];if(e[0]>a[0])break}this.slices.splice(t,0,this.constructSlice(...e)),p=t}return t?this.flatten(p):void 0}flatten(e){if(this.slices.length>=2)for(let t=0,a=this.slices.length;t<a-1;++t){const s=this.slices[t],n=this.slices[t+1];-1!==s.indexOf(n[0])&&(s.setEnd(n.end),this.slices.splice(t+1,1),t<e&&--e,--a,--t,this.insertSlice(n,!1))}return this.slices[e]}get first(){return this.slices[0]}get last(){return this.slices[this.slices.length-1]}get slice(){return this.first}get length(){return this.slice.length}findSlice(e){for(let t=0,a=this.slices.length;t<a;++t){const a=this.slices[t],s=a.indexOf(e);if(-1!==s)return{slice:a,index:s}}}findSliceOffset(e){let t;for(let a=0;a<this.slices.length;++a){let s=0;if(t=this.slices[a],!(t.length<2))for(;s<t.length;s++)if(e>=t[s])return{slice:t,offset:e===t[s]?s:s-1}}if(t&&t.isEnd(s.Top))return{slice:t,offset:t.length}}sliceMe(e,t,a){let n=this.slice,i=0,r=0;if(e){const t=this.findSliceOffset(e);if(!t)return;n=t.slice,i=r=t.offset,n.includes(e)&&(r+=1)}let o=Math.max(r+t,0),p=r+t+a;const d=n.slice(o,p),c=t<0?a+t:a,l=Math.abs(t),m=n.length-r>=c||!!n.isEnd(s.Top)&&(d.setEnd(s.Top),!0),g=r-l>=0||!!n.isEnd(s.Bottom)&&(d.setEnd(s.Bottom),!0);return{slice:d,offsetIdOffset:i,fulfilled:s.None|(m&&g?s.Both:(m?s.Top:s.None)|(g?s.Bottom:s.None))}}unshift(...e){let t=this.first;t.length?t.isEnd(s.Bottom)||(t=this.constructSlice(),t.setEnd(s.Bottom),this.slices.unshift(t)):t.setEnd(s.Bottom),t.unshift(...e)}push(...e){let t=this.last;t.length?t.isEnd(s.Top)||(t=this.constructSlice(),t.setEnd(s.Top),this.slices.push(t)):t.setEnd(s.Top),t.push(...e)}delete(e){const t=this.findSlice(e);return!!t&&(t.slice.splice(t.index,1),!0)}}n.a&&(n.a.SlicedArray=i)},function(e,t,a){"use strict";var s=a(29),n=a(31),i=a(37),r=a(33),o=a(32),p=a(15),d=a(73),c=a(109),l=a(42),m=a(43),g=a(41);const h=new class{constructor(){this.polls={},this.results={},this.pollToMessages={},this.log=Object(i.b)("POLLS",i.a.Error),p.default.addMultipleEventsListeners({updateMessagePoll:e=>{this.log("updateMessagePoll:",e);let t=e.poll||this.polls[e.poll_id];if(!t)return;let a=e.results;const s=this.savePoll(t,a);t=s.poll,a=s.results,p.default.dispatchEvent("poll_update",{poll:t,results:a})}})}savePoll(e,t,a){a&&this.updatePollToMessage(a,!0);const s=e.id;return this.polls[s]?(e=Object.assign(this.polls[s],e),t=this.saveResults(e,t)):(this.polls[s]=e,e.rQuestion=o.a.wrapEmojiText(e.question),e.rReply=o.a.wrapEmojiText("")+" "+(e.rQuestion||"poll"),e.chosenIndexes=[],t=this.saveResults(e,t)),{poll:e,results:t}}saveResults(e,t){var a;return this.results[e.id]?t=Object.assign(this.results[e.id],t):this.results[e.id]=t,t.pFlags.min||(e.chosenIndexes.length=0,(null===(a=null==t?void 0:t.results)||void 0===a?void 0:a.length)&&t.results.forEach((t,a)=>{var s;(null===(s=t.pFlags)||void 0===s?void 0:s.chosen)&&e.chosenIndexes.push(a)})),t}getPoll(e){return{poll:this.polls[e],results:this.results[e]}}getInputMediaPoll(e,t,a,s){return a?(s||(s=[]),a=o.a.parseMarkdown(a,s)):a=void 0,{_:"inputMediaPoll",poll:e,correct_answers:t,solution:a,solution_entities:a?s:void 0}}updatePollToMessage(e,t){const{id:a}=e.media.poll;let s=this.pollToMessages[a];if(!t&&!s)return;s||(s=this.pollToMessages[a]=new Set);const n=e.peerId+"_"+e.mid;t?s.add(n):s.delete(n),t||s.size||(delete this.polls[a],delete this.results[a],delete this.pollToMessages[a])}sendVote(e,t){const a=e.media.poll,s=t.map(e=>a.answers[e].option),n=e.mid,i=e.peerId,o=m.a.getInputPeerById(i);return e.pFlags.is_outgoing?l.a.invokeAfterMessageIsSent(n,"sendVote",e=>(this.log("invoke sendVote callback"),this.sendVote(e,t))):r.a.invokeApi("messages.sendVote",{peer:o,msg_id:c.a.getServerMessageId(e.mid),options:s}).then(e=>{this.log("sendVote updates:",e),d.a.processUpdateMessage(e)})}getResults(e){const t=m.a.getInputPeerById(e.peerId);return r.a.invokeApi("messages.getPollResults",{peer:t,msg_id:c.a.getServerMessageId(e.mid)}).then(e=>{d.a.processUpdateMessage(e),this.log("getResults updates:",e)})}getVotes(e,t,a,s=20){return r.a.invokeApi("messages.getPollVotes",{peer:m.a.getInputPeerById(e.peerId),id:c.a.getServerMessageId(e.mid),option:t,offset:a,limit:s}).then(e=>(this.log("getPollVotes messages:",e),g.a.saveApiUsers(e.users),e))}stopPoll(e){const t=e.media.poll;if(t.pFlags.closed)return Promise.resolve();const a=Object(n.a)(t);return a.pFlags.closed=!0,l.a.editMessage(e,void 0,{newMedia:this.getInputMediaPoll(a)}).then(()=>{},e=>{this.log.error("stopPoll error:",e)})}};s.a.appPollsManager=h,t.a=h},function(e,t,a){"use strict";function s(e){return e<<0}function n(e){return e>>>0}function i(e,t=3){if(!e)return 0;const{length:a}=e;let s=0;for(let t=0;t<a;++t)s+=e[t]*e[t];const n=Math.sqrt(s/a)/255;return Math.min(1,n*t)}a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return p}));var s=a(39),n=a(31),i=a(168);class r{constructor(e,t){this.mid=e,this.type=t,this.port=i.b}setDirection(e){return this.originalDirection||(this.originalDirection=e),this.direction=e}setPort(e){return this.port=e}setEndpoint(e){return this.endpoint=e}setPeerId(e){return this.peerId=e}createTransceiver(e,t){return(null==t?void 0:t.direction)&&this.setDirection(t.direction),this.transceiver=e.addTransceiver(this.type,t)}setSource(e){let t;if(Array.isArray(e)){if(!e[0])return;t=e,e=t[0].sources[0]}return this.sourceGroups=t,this.source=e}shouldBeSkipped(e){return e&&"inactive"===this.direction}}function o(e,t,a){let s;if(Array.isArray(t)){if(!t[0])return;s=t,t=s[0].sources[0]}return{endpoint:a,type:e,source:t,sourceGroups:s}}class p{constructor(e){this.connection=e,this.sessionId=""+Date.now(),this.maxSeenId=-1,this.entries=[],this.entriesByMid=new Map,this.entriesBySource=new Map,this.entriesByPeerId=new Map}setData(e){return Object(n.g)(this,e)}createEntry(e){const t=""+ ++this.maxSeenId,a=new r(t,e);return this.entries.push(a),this.entriesByMid.set(t,a),a}deleteEntry(e){Object(s.e)(this.entries,e),this.entriesByMid.delete(e.mid),this.entriesBySource.delete(e.source);const t=this.entriesByPeerId.get(e.peerId);t&&(t.delete(e),t.size||this.entriesByPeerId.delete(e.peerId))}setEntrySource(e,t){e.setSource(t),this.entriesBySource.set(e.source,e)}setEntryPeerId(e,t){e.setPeerId(t);let a=this.entriesByPeerId.get(t);a||this.entriesByPeerId.set(t,a=new Set),a.add(e)}findEntry(e){return this.entries.find(e)}findFreeSendRecvEntry(e,t){let a=this.entries.find(a=>"sendrecv"===a.direction&&a.type===e&&!(t?a.sendEntry:a.recvEntry));return a||(a=this.createEntry(e),a.setDirection("sendrecv")),a}getEntryByMid(e){return this.entriesByMid.get(e)}getEntryBySource(e){return this.entriesBySource.get(e)}getEntriesByPeerId(e){return this.entriesByPeerId.get(e)}generateSdp(e){return i.a.fromConference(Object.assign({conference:this},e))}}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(45),n=a(76),i=a(44),r=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const o=[];let p=!1;function d(e,t="push"){return e.items.length?(e.promise=Object(s.a)(),o[t](e),function e(){if(!p){(function(e){if(!e.items.length)return e.promise.resolve([]),Promise.resolve([]);const t=e.items.slice(),a=[];return new Promise((s,o)=>{const p=()=>r(this,void 0,void 0,(function*(){const r=performance.now();do{yield Object(n.c)();const s=e.process.apply(e.context,t.shift());let i;if(s instanceof Promise)try{i=yield s}catch(e){return void o(e)}else i=s;a.push(i)}while(t.length>0&&performance.now()-r<6);t.length>0?Object(i.b)(p):s(a)}));Object(i.b)(p)}).then(e.promise.resolve,e.promise.reject)})(o.shift()).finally(()=>{p=!1,o.length&&e()})}}(),e.promise):Promise.resolve([])}const c="filter"in(document.createElement("canvas").getContext("2d")||{});let l,m;function g(e,t,a){return new Promise(s=>{const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d",{alpha:!1});c?(i.filter=`blur(${t}px)`,i.drawImage(e,2*-t,2*-t,n.width+4*t,n.height+4*t)):(i.drawImage(e,0,0),m(i,0,0,n.width,n.height,t,a)),s(n.toDataURL())})}l=c?Promise.resolve():a.e(31).then(a.bind(null,173)).then(e=>{m=e.default});const h=new Map;function u(e,t=2,a=2){if(!e)return console.error("no dataUri for blur",e),Promise.resolve(e);if(h.size>1e3&&h.clear(),h.has(e))return h.get(e);const s=new Promise(s=>{l.then(()=>{const n=new Image;n.onload=()=>{c?g(n,t,a).then(s):d({items:[[n,t,a]],context:null,process:g},"unshift").then(e=>{s(e[0])})},n.src=e})});return h.set(e,s),s}},,,,,function(e,t,a){"use strict";var s=a(42),n=a(56),i=a(31),r=a(29),o=a(33),p=a(101),d=a(37);const c=new class{constructor(){this.contexts=new Map,this.links={},this.log=Object(d.b)("RD",void 0,!0),o.a.addTaskListener("refreshReference",e=>{const t=e.payload;Object(p.a)(e),e.originalPayload=t,this.refreshReference(t).then(t=>{e.payload=t},t=>{e.error=t}).then(()=>o.a.postMessage(e))})}saveContext(e,t,a){[a,e]=this.getContexts(e),a||(a=new Set,this.contexts.set(e,a)),this.links[Object(n.f)(e)]=e;for(const e of a)if(Object(i.b)(e,t))return;a.add(t)}getReferenceByLink(e){return this.links[Object(n.f)(e)]}getContexts(e){return[this.contexts.get(e)||(e=this.getReferenceByLink(e)||e,this.contexts.get(e)),e]}getContext(e){const t=this.getContexts(e);return t[0]?[t[0].values().next().value,t[1]]:void 0}deleteContext(e,t,a){if([a,e]=this.getContexts(e),a)for(const s of a)if(Object(i.b)(s,t))return a.delete(s),a.size||(this.contexts.delete(e),delete this.links[Object(n.f)(e)]),!0;return!1}refreshReference(e,t){if(this.log("refreshReference: start",e.slice(),t),!t){const a=this.getContext(e);if(!a)return this.log("refreshReference: got no context for reference:",e.slice()),Promise.reject("NO_CONTEXT");[t,e]=a}let a;switch(null==t?void 0:t.type){case"message":a=s.a.wrapSingleMessage(t.peerId,t.messageId,!0);break;default:return this.log.warn("refreshReference: not implemented context",t),Promise.reject()}const i=Object(n.f)(e);return this.log("refreshReference: refreshing reference:",i),a.then(()=>{const a=Object(n.f)(e);if(this.log("refreshReference: refreshed, reference before:",i,"after:",a),i!==a)return e;this.deleteContext(e,t);const s=this.getContext(e);if(s)return this.refreshReference(e,s[0]);throw this.log.error("refreshReference: no new context, reference before:",i,"after:",a,t),"NO_NEW_CONTEXT"})}};r.a.referenceDatabase=c,t.a=c},function(e,t,a){"use strict";function s(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content}a.d(t,"a",(function(){return s}))},function(e,t,a){"use strict";var s;a.d(t,"a",(function(){return s})),function(e){e[e.Connected=0]="Connected",e[e.Connecting=1]="Connecting",e[e.Closed=2]="Closed",e[e.TimedOut=3]="TimedOut"}(s||(s={}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};function n(e,t){return s(this,void 0,void 0,(function*(){const a=yield navigator.mediaDevices.getUserMedia(e);return a.getTracks().forEach(e=>{e.enabled=!t}),a}))}window.getStream=n},function(e,t,a){"use strict";function s(){return{width:{min:1280,max:1920},height:{min:720,max:1080},frameRate:{min:24,max:30}}}a.d(t,"a",(function(){return s}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s=a(37),n=a(15),i=a(160),r=a(161),o=a(135);class p{constructor(e,t){const a=this.streamSource=e.createMediaStreamSource(t),s=this.analyser=e.createAnalyser();this.gain=e.createGain();s.minDecibels=-100,s.maxDecibels=-30,s.smoothingTimeConstant=.05,s.fftSize=1024,a.connect(s)}}class d{constructor(e){this.interval=e,this.getAmplitude=e=>{const{streamAnalyser:t,stream:a,track:s,source:n,type:i}=e,r=t.analyser;if(!r)return;const p=new Uint8Array(r.frequencyBinCount);r.getByteFrequencyData(p);return{type:i,source:n,stream:a,track:s,value:Object(o.b)(p)}},this.analyse=()=>{const e=this.counter%3==0,t=(e?this.items:this.items.filter(e=>"input"===e.type)).filter(e=>"audio"===e.kind).slice(0,i.a).map(this.getAmplitude);++this.counter>=1e3&&(this.counter=0),n.default.dispatchEvent("group_call_amplitude",{amplitudes:t,type:e?"all":"input"})},this.context=new(window.AudioContext||window.webkitAudioContext),this.items=[],this.outputStream=new MediaStream,this.inputStream=new MediaStream,this.counter=0,this.log=Object(s.b)("SM"),this.direction="sendonly",this.canCreateConferenceEntry=!0}addStream(e,t){e.getTracks().forEach(a=>{this.addTrack(e,a,t)})}addTrack(e,t,a){this.log("addTrack",a,t,e);const{context:s,items:n,inputStream:i,outputStream:r}=this,o=t.kind,c=d.getSource(e,a);switch(a){case"input":i?i.addTrack(t):this.inputStream=e;break;case"output":for(let e=0;e<n.length;++e){const{track:t,type:a,source:s}=n[e];if(s===c&&"input"===a){n.splice(e,1),r.removeTrack(t);break}}"video"!==o&&r.addTrack(t)}this.finalizeAddingTrack({type:a,source:c,stream:e,track:t,kind:o,streamAnalyser:"audio"===o?new p(s,e):void 0}),"audio"===o&&this.interval&&this.changeTimer()}finalizeAddingTrack(e){const{track:t}=e;t.addEventListener("ended",()=>{this.removeTrack(t)},{once:!0}),this.items.push(e)}hasInputTrackKind(e){return this.items.find(t=>"input"===t.type&&t.kind===e)}static getSource(e,t){return"input"===t?e.source||e.id:""+Object(o.c)(+e.id.substring(6))}removeTrack(e){this.log("removeTrack",e);const{items:t}=this;let a=!1;for(let s=0,n=t.length;!a&&s<n;++s){const{track:n,type:i}=t[s];switch(i){case"output":n===e&&(t.splice(s,1),this.outputStream.removeTrack(e),a=!0);break;case"input":n===e&&(t.splice(s,1),this.inputStream.removeTrack(e),a=!0)}}"audio"===e.kind&&this.interval&&this.changeTimer()}replaceInputAudio(e,t){this.removeTrack(t),this.addStream(e,"input")}changeTimer(){void 0!==this.timer&&clearInterval(this.timer),this.items.length&&(this.timer=window.setInterval(this.analyse,this.interval))}appendToConference(e){if(this.lol)return;const{inputStream:t,direction:a,canCreateConferenceEntry:s}=this,n={direction:a,streams:[t]},i=[["audio",n],["video",n]],r=t.getTracks();for(const[t,n]of i){let i=e.findEntry(e=>e.direction===a&&e.type===t);if(!i){if(!s)continue;i=e.createEntry(t)}let{transceiver:o}=i;o||(o=i.createTransceiver(e.connection,n)),i.direction!==o.direction&&(o.direction=i.direction);const p=r.find(e=>e.kind===t),d=o.sender;d.track!==p&&d.replaceTrack(p).catch(e=>{this.log.error(e)})}}stop(){try{this.inputStream.getTracks().concat(this.outputStream.getTracks()).forEach(e=>{Object(r.a)(e)})}catch(e){this.log.error(e)}}}},,,,,,,,function(e,t,a){"use strict";var s=a(29),n=a(0),i=a(37),r=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const o=new class{constructor(){this.sampleRate=48e3,this.tasks=[],this.keepAlive=!1,this.log=Object(i.b)("OPUS",i.a.Error)}isPlaySupported(){if(void 0!==this.isPlaySupportedResult)return this.isPlaySupportedResult;const e=document.createElement("audio");return this.isPlaySupportedResult=!(!e.canPlayType||!e.canPlayType("audio/ogg;").replace(/no/,""))}loadWavWorker(){this.wavWorker||(this.wavWorker=new Worker("waveWorker.min.js"),this.wavWorker.addEventListener("message",e=>{const t=e.data;if(this.log("[WAV] got message:",t),t&&t.page){const e=t.page;this.onTaskEnd(this.tasks.shift(),e)}}))}loadWorker(){this.worker||(this.worker=new Worker("decoderWorker.min.js"),this.worker.addEventListener("message",e=>{const t=e.data;this.log("[DECODER] got message",t),"done"===t.type?(this.wavWorker.postMessage({command:"done"}),t.waveform&&(this.tasks[0].waveform=t.waveform)):this.wavWorker.postMessage({command:"encode",buffers:e.data},n.IS_SAFARI?void 0:t.map(e=>e.buffer))}))}setKeepAlive(e){this.keepAlive=e,this.keepAlive?(this.loadWorker(),this.loadWavWorker()):this.tasks.length||this.terminateWorkers()}onTaskEnd(e,t){t?(clearTimeout(e.timeout),e.callback.resolve({bytes:t,waveform:e.waveform})):e.callback.reject("timeout"),this.tasks.length&&this.executeNewTask(this.tasks[0]),this.terminateWorkers()}terminateWorkers(e=!1){(!this.keepAlive&&!this.tasks.length||e)&&(this.worker&&(this.worker.terminate(),this.worker=null),this.wavWorker&&(this.wavWorker.terminate(),this.wavWorker=null))}executeNewTask(e){this.worker.postMessage({command:"init",decoderSampleRate:this.sampleRate,outputBufferSampleRate:this.sampleRate}),this.wavWorker.postMessage({command:"init",wavBitDepth:16,wavSampleRate:this.sampleRate}),this.log("[DECODER] send decode"),this.worker.postMessage({command:"decode",pages:e.pages,waveform:e.withWaveform},n.IS_SAFARI?void 0:[e.pages.buffer]),e.timeout=window.setTimeout(()=>{this.log.error("decode timeout"),this.terminateWorkers(!0),this.tasks.length&&(this.loadWorker(),this.loadWavWorker()),this.onTaskEnd(this.tasks.shift())},1e4)}pushDecodeTask(e,t){return new Promise((a,s)=>{const n={pages:e,withWaveform:t,callback:{resolve:a,reject:s},timeout:0};this.loadWorker(),this.loadWavWorker(),1===this.tasks.push(n)&&this.executeNewTask(n)})}decode(e,t=!1){return r(this,void 0,void 0,(function*(){return this.pushDecodeTask(e,t).then(e=>{const t=new Blob([e.bytes],{type:"audio/wav"});return{url:URL.createObjectURL(t),waveform:e.waveform}})}))}};s.a.opusDecodeController=o,t.a=o},function(e,t,a){"use strict";var s=a(55),n=a(74),i=a(32),r=a(15),o=a(31),p=a(87),d=a(29);const c=new Set(["photo","video","gif","document"]);const l=new class{constructor(){this.webpages={},this.pendingWebPages={},r.default.addMultipleEventsListeners({updateWebPage:e=>{this.saveWebPage(e.webpage)}})}saveWebPage(e,t,a){var d,l;if("webPageNotModified"===e._)return;const{id:m}=e,g=this.webpages[m],h=g&&g._===e._&&g.hash==g.hash;if("webPage"===e._){"photo"===(null===(d=e.photo)||void 0===d?void 0:d._)?e.photo=s.a.savePhoto(e.photo,a):delete e.photo,"document"===(null===(l=e.document)||void 0===l?void 0:l._)?e.document=n.a.saveDoc(e.document,a):("document"===e.type&&delete e.type,delete e.document);const t=e.site_name;let r=e.title||e.author||t||"";t&&r===t&&delete e.site_name,r=Object(p.f)(r,80,100),e.rTitle=i.a.wrapRichText(r,{noLinks:!0,noLinebreaks:!0});let o="";if("GitHub"===t){const t=e.url.match(/(https?:\/\/github\.com\/[^\/]+\/[^\/]+)/);t&&(o=t[0]+"/issues/{1}")}const m=Object(p.f)(e.description||"",150,180);e.rDescription=i.a.wrapRichText(m,{contextSite:t||"external",contextHashtag:o}),c.has(e.type)||e.description||!e.photo||(e.type="photo")}let u=this.pendingWebPages[m];if(t&&(u||(u=this.pendingWebPages[m]=new Set),u.add(t)),void 0===g?this.webpages[m]=e:Object(o.i)(g,e),!t&&void 0!==u&&h){const e=[];u.forEach(t=>{const[a,s,n]=t.split("_");e.push({peerId:a.toPeerId(),mid:+s,isScheduled:!!n})}),r.default.dispatchEvent("webpage_updated",{id:m,msgs:e})}return e}getMessageKeyForPendingWebPage(e,t,a){return e+"_"+t+(a?"_s":"")}deleteWebPageFromPending(e,t){const a=e.id;if(!a)return;const s=this.pendingWebPages[a];s&&s.has(t)&&(s.delete(t),s.size||delete this.pendingWebPages[a])}getWebPage(e){return this.webpages[e]}};d.a&&(d.a.appWebPagesManager=l),t.a=l},function(e,t,a){"use strict";var s=a(127);const n=new Set(["image/jpeg","image/png","image/bmp"]);s.a&&n.add("image/webp"),t.a=n},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n}));const s=50,n=100},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(57);function n(e){e.stop(),Object(s.a)(e,"ended")}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return aa}));var s=a(0),n=a(39),i=a(31),r=a(104),o=a(73),p=a(124),d=a(43),c=a(37),l=a(62),m=a(91),g=a(56),h=a(29),u=a(112),y={MTProto:{constructors:[{id:481674261,predicate:"vector",params:[],type:"Vector t"},{id:85337187,predicate:"resPQ",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"pq",type:"bytes"},{name:"server_public_key_fingerprints",type:"Vector<long>"}],type:"ResPQ"},{id:-1443537003,predicate:"p_q_inner_data_dc",params:[{name:"pq",type:"bytes"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce",type:"int256"},{name:"dc",type:"int"}],type:"P_Q_inner_data"},{id:1459478408,predicate:"p_q_inner_data_temp_dc",params:[{name:"pq",type:"bytes"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce",type:"int256"},{name:"dc",type:"int"},{name:"expires_in",type:"int"}],type:"P_Q_inner_data"},{id:-790100132,predicate:"server_DH_params_ok",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"encrypted_answer",type:"bytes"}],type:"Server_DH_Params"},{id:-1249309254,predicate:"server_DH_inner_data",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"g",type:"int"},{name:"dh_prime",type:"bytes"},{name:"g_a",type:"bytes"},{name:"server_time",type:"int"}],type:"Server_DH_inner_data"},{id:1715713620,predicate:"client_DH_inner_data",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"retry_id",type:"long"},{name:"g_b",type:"bytes"}],type:"Client_DH_Inner_Data"},{id:1003222836,predicate:"dh_gen_ok",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash1",type:"int128"}],type:"Set_client_DH_params_answer"},{id:1188831161,predicate:"dh_gen_retry",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash2",type:"int128"}],type:"Set_client_DH_params_answer"},{id:-1499615742,predicate:"dh_gen_fail",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"new_nonce_hash3",type:"int128"}],type:"Set_client_DH_params_answer"},{id:1973679973,predicate:"bind_auth_key_inner",params:[{name:"nonce",type:"long"},{name:"temp_auth_key_id",type:"long"},{name:"perm_auth_key_id",type:"long"},{name:"temp_session_id",type:"long"},{name:"expires_at",type:"int"}],type:"BindAuthKeyInner"},{id:-212046591,predicate:"rpc_result",params:[{name:"req_msg_id",type:"long"},{name:"result",type:"Object"}],type:"RpcResult"},{id:558156313,predicate:"rpc_error",params:[{name:"error_code",type:"int"},{name:"error_message",type:"string"}],type:"RpcError"},{id:1579864942,predicate:"rpc_answer_unknown",params:[],type:"RpcDropAnswer"},{id:-847714938,predicate:"rpc_answer_dropped_running",params:[],type:"RpcDropAnswer"},{id:-1539647305,predicate:"rpc_answer_dropped",params:[{name:"msg_id",type:"long"},{name:"seq_no",type:"int"},{name:"bytes",type:"int"}],type:"RpcDropAnswer"},{id:155834844,predicate:"future_salt",params:[{name:"valid_since",type:"int"},{name:"valid_until",type:"int"},{name:"salt",type:"long"}],type:"FutureSalt"},{id:-1370486635,predicate:"future_salts",params:[{name:"req_msg_id",type:"long"},{name:"now",type:"int"},{name:"salts",type:"vector<future_salt>"}],type:"FutureSalts"},{id:880243653,predicate:"pong",params:[{name:"msg_id",type:"long"},{name:"ping_id",type:"long"}],type:"Pong"},{id:-501201412,predicate:"destroy_session_ok",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:1658015945,predicate:"destroy_session_none",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:-1631450872,predicate:"new_session_created",params:[{name:"first_msg_id",type:"long"},{name:"unique_id",type:"long"},{name:"server_salt",type:"long"}],type:"NewSession"},{id:1945237724,predicate:"msg_container",params:[{name:"messages",type:"vector<%Message>"}],type:"MessageContainer"},{id:1538843921,predicate:"message",params:[{name:"msg_id",type:"long"},{name:"seqno",type:"int"},{name:"bytes",type:"int"},{name:"body",type:"Object"}],type:"Message"},{id:-530561358,predicate:"msg_copy",params:[{name:"orig_message",type:"Message"}],type:"MessageCopy"},{id:812830625,predicate:"gzip_packed",params:[{name:"packed_data",type:"bytes"}],type:"Object"},{id:1658238041,predicate:"msgs_ack",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgsAck"},{id:-1477445615,predicate:"bad_msg_notification",params:[{name:"bad_msg_id",type:"long"},{name:"bad_msg_seqno",type:"int"},{name:"error_code",type:"int"}],type:"BadMsgNotification"},{id:-307542917,predicate:"bad_server_salt",params:[{name:"bad_msg_id",type:"long"},{name:"bad_msg_seqno",type:"int"},{name:"error_code",type:"int"},{name:"new_server_salt",type:"long"}],type:"BadMsgNotification"},{id:2105940488,predicate:"msg_resend_req",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgResendReq"},{id:-630588590,predicate:"msgs_state_req",params:[{name:"msg_ids",type:"Vector<long>"}],type:"MsgsStateReq"},{id:81704317,predicate:"msgs_state_info",params:[{name:"req_msg_id",type:"long"},{name:"info",type:"bytes"}],type:"MsgsStateInfo"},{id:-1933520591,predicate:"msgs_all_info",params:[{name:"msg_ids",type:"Vector<long>"},{name:"info",type:"bytes"}],type:"MsgsAllInfo"},{id:661470918,predicate:"msg_detailed_info",params:[{name:"msg_id",type:"long"},{name:"answer_msg_id",type:"long"},{name:"bytes",type:"int"},{name:"status",type:"int"}],type:"MsgDetailedInfo"},{id:-2137147681,predicate:"msg_new_detailed_info",params:[{name:"answer_msg_id",type:"long"},{name:"bytes",type:"int"},{name:"status",type:"int"}],type:"MsgDetailedInfo"},{id:-161422892,predicate:"destroy_auth_key_ok",params:[],type:"DestroyAuthKeyRes"},{id:178201177,predicate:"destroy_auth_key_none",params:[],type:"DestroyAuthKeyRes"},{id:-368010477,predicate:"destroy_auth_key_fail",params:[],type:"DestroyAuthKeyRes"}],methods:[{id:-1099002127,method:"req_pq_multi",params:[{name:"nonce",type:"int128"}],type:"ResPQ"},{id:-686627650,method:"req_DH_params",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"p",type:"bytes"},{name:"q",type:"bytes"},{name:"public_key_fingerprint",type:"long"},{name:"encrypted_data",type:"bytes"}],type:"Server_DH_Params"},{id:-184262881,method:"set_client_DH_params",params:[{name:"nonce",type:"int128"},{name:"server_nonce",type:"int128"},{name:"encrypted_data",type:"bytes"}],type:"Set_client_DH_params_answer"},{id:1491380032,method:"rpc_drop_answer",params:[{name:"req_msg_id",type:"long"}],type:"RpcDropAnswer"},{id:-1188971260,method:"get_future_salts",params:[{name:"num",type:"int"}],type:"FutureSalts"},{id:2059302892,method:"ping",params:[{name:"ping_id",type:"long"}],type:"Pong"},{id:-213746804,method:"ping_delay_disconnect",params:[{name:"ping_id",type:"long"},{name:"disconnect_delay",type:"int"}],type:"Pong"},{id:-414113498,method:"destroy_session",params:[{name:"session_id",type:"long"}],type:"DestroySessionRes"},{id:-1835453025,method:"http_wait",params:[{name:"max_delay",type:"int"},{name:"wait_after",type:"int"},{name:"max_wait",type:"int"}],type:"HttpWait"},{id:-784117408,method:"destroy_auth_key",params:[],type:"DestroyAuthKeyRes"}]},API:{constructors:[{id:-1132882121,predicate:"boolFalse",params:[],type:"Bool"},{id:-1720552011,predicate:"boolTrue",params:[],type:"Bool"},{id:1072550713,predicate:"true",params:[],type:"True"},{id:481674261,predicate:"vector",params:[],type:"Vector t"},{id:-994444869,predicate:"error",params:[{name:"code",type:"int"},{name:"text",type:"string"}],type:"Error"},{id:1450380236,predicate:"null",params:[],type:"Null"},{id:2134579434,predicate:"inputPeerEmpty",params:[],type:"InputPeer"},{id:2107670217,predicate:"inputPeerSelf",params:[],type:"InputPeer"},{id:900291769,predicate:"inputPeerChat",params:[{name:"chat_id",type:"long"}],type:"InputPeer"},{id:-571955892,predicate:"inputPeerUser",params:[{name:"user_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPeer"},{id:666680316,predicate:"inputPeerChannel",params:[{name:"channel_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPeer"},{id:-1468331492,predicate:"inputPeerUserFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"user_id",type:"long"}],type:"InputPeer"},{id:-1121318848,predicate:"inputPeerChannelFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"channel_id",type:"long"}],type:"InputPeer"},{id:-1182234929,predicate:"inputUserEmpty",params:[],type:"InputUser"},{id:-138301121,predicate:"inputUserSelf",params:[],type:"InputUser"},{id:-233744186,predicate:"inputUser",params:[{name:"user_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputUser"},{id:497305826,predicate:"inputUserFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"user_id",type:"long"}],type:"InputUser"},{id:-208488460,predicate:"inputPhoneContact",params:[{name:"client_id",type:"long"},{name:"phone",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"}],type:"InputContact"},{id:-181407105,predicate:"inputFile",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"name",type:"string"},{name:"md5_checksum",type:"string"}],type:"InputFile"},{id:-95482955,predicate:"inputFileBig",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"name",type:"string"}],type:"InputFile"},{id:-1771768449,predicate:"inputMediaEmpty",params:[],type:"InputMedia"},{id:505969924,predicate:"inputMediaUploadedPhoto",params:[{name:"flags",type:"#"},{name:"file",type:"InputFile"},{name:"stickers",type:"flags.0?Vector<InputDocument>"},{name:"ttl_seconds",type:"flags.1?int"}],type:"InputMedia"},{id:-1279654347,predicate:"inputMediaPhoto",params:[{name:"flags",type:"#"},{name:"id",type:"InputPhoto"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:-104578748,predicate:"inputMediaGeoPoint",params:[{name:"geo_point",type:"InputGeoPoint"}],type:"InputMedia"},{id:-122978821,predicate:"inputMediaContact",params:[{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"}],type:"InputMedia"},{id:1530447553,predicate:"inputMediaUploadedDocument",params:[{name:"flags",type:"#"},{name:"nosound_video",type:"flags.3?true"},{name:"force_file",type:"flags.4?true"},{name:"file",type:"InputFile"},{name:"thumb",type:"flags.2?InputFile"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"},{name:"stickers",type:"flags.0?Vector<InputDocument>"},{name:"ttl_seconds",type:"flags.1?int"}],type:"InputMedia"},{id:860303448,predicate:"inputMediaDocument",params:[{name:"flags",type:"#"},{name:"id",type:"InputDocument"},{name:"ttl_seconds",type:"flags.0?int"},{name:"query",type:"flags.1?string"}],type:"InputMedia"},{id:-1052959727,predicate:"inputMediaVenue",params:[{name:"geo_point",type:"InputGeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"InputMedia"},{id:-440664550,predicate:"inputMediaPhotoExternal",params:[{name:"flags",type:"#"},{name:"url",type:"string"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:-78455655,predicate:"inputMediaDocumentExternal",params:[{name:"flags",type:"#"},{name:"url",type:"string"},{name:"ttl_seconds",type:"flags.0?int"}],type:"InputMedia"},{id:-750828557,predicate:"inputMediaGame",params:[{name:"id",type:"InputGame"}],type:"InputMedia"},{id:-646342540,predicate:"inputMediaInvoice",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?InputWebDocument"},{name:"invoice",type:"Invoice"},{name:"payload",type:"bytes"},{name:"provider",type:"string"},{name:"provider_data",type:"DataJSON"},{name:"start_param",type:"flags.1?string"}],type:"InputMedia"},{id:-1759532989,predicate:"inputMediaGeoLive",params:[{name:"flags",type:"#"},{name:"stopped",type:"flags.0?true"},{name:"geo_point",type:"InputGeoPoint"},{name:"heading",type:"flags.2?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"}],type:"InputMedia"},{id:261416433,predicate:"inputMediaPoll",params:[{name:"flags",type:"#"},{name:"poll",type:"Poll"},{name:"correct_answers",type:"flags.0?Vector<bytes>"},{name:"solution",type:"flags.1?string"},{name:"solution_entities",type:"flags.1?Vector<MessageEntity>"}],type:"InputMedia"},{id:-428884101,predicate:"inputMediaDice",params:[{name:"emoticon",type:"string"}],type:"InputMedia"},{id:480546647,predicate:"inputChatPhotoEmpty",params:[],type:"InputChatPhoto"},{id:-968723890,predicate:"inputChatUploadedPhoto",params:[{name:"flags",type:"#"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"}],type:"InputChatPhoto"},{id:-1991004873,predicate:"inputChatPhoto",params:[{name:"id",type:"InputPhoto"}],type:"InputChatPhoto"},{id:-457104426,predicate:"inputGeoPointEmpty",params:[],type:"InputGeoPoint"},{id:1210199983,predicate:"inputGeoPoint",params:[{name:"flags",type:"#"},{name:"lat",type:"double"},{name:"long",type:"double"},{name:"accuracy_radius",type:"flags.0?int"}],type:"InputGeoPoint"},{id:483901197,predicate:"inputPhotoEmpty",params:[],type:"InputPhoto"},{id:1001634122,predicate:"inputPhoto",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputPhoto"},{id:-539317279,predicate:"inputFileLocation",params:[{name:"volume_id",type:"long"},{name:"local_id",type:"int"},{name:"secret",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputFileLocation"},{id:-182231723,predicate:"inputEncryptedFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputFileLocation"},{id:-1160743548,predicate:"inputDocumentFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"thumb_size",type:"string"}],type:"InputFileLocation"},{id:-876089816,predicate:"inputSecureFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputFileLocation"},{id:700340377,predicate:"inputTakeoutFileLocation",params:[],type:"InputFileLocation"},{id:1075322878,predicate:"inputPhotoFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"thumb_size",type:"string"}],type:"InputFileLocation"},{id:-667654413,predicate:"inputPhotoLegacyFileLocation",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"volume_id",type:"long"},{name:"local_id",type:"int"},{name:"secret",type:"long"}],type:"InputFileLocation"},{id:925204121,predicate:"inputPeerPhotoFileLocation",params:[{name:"flags",type:"#"},{name:"big",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"photo_id",type:"long"}],type:"InputFileLocation"},{id:-1652231205,predicate:"inputStickerSetThumb",params:[{name:"stickerset",type:"InputStickerSet"},{name:"thumb_version",type:"int"}],type:"InputFileLocation"},{id:93890858,predicate:"inputGroupCallStream",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"time_ms",type:"long"},{name:"scale",type:"int"},{name:"video_channel",type:"flags.0?int"},{name:"video_quality",type:"flags.0?int"}],type:"InputFileLocation"},{id:1498486562,predicate:"peerUser",params:[{name:"user_id",type:"long"}],type:"Peer"},{id:918946202,predicate:"peerChat",params:[{name:"chat_id",type:"long"}],type:"Peer"},{id:-1566230754,predicate:"peerChannel",params:[{name:"channel_id",type:"long"}],type:"Peer"},{id:-1432995067,predicate:"storage.fileUnknown",params:[],type:"storage.FileType"},{id:1086091090,predicate:"storage.filePartial",params:[],type:"storage.FileType"},{id:8322574,predicate:"storage.fileJpeg",params:[],type:"storage.FileType"},{id:-891180321,predicate:"storage.fileGif",params:[],type:"storage.FileType"},{id:172975040,predicate:"storage.filePng",params:[],type:"storage.FileType"},{id:-1373745011,predicate:"storage.filePdf",params:[],type:"storage.FileType"},{id:1384777335,predicate:"storage.fileMp3",params:[],type:"storage.FileType"},{id:1258941372,predicate:"storage.fileMov",params:[],type:"storage.FileType"},{id:-1278304028,predicate:"storage.fileMp4",params:[],type:"storage.FileType"},{id:276907596,predicate:"storage.fileWebp",params:[],type:"storage.FileType"},{id:-742634630,predicate:"userEmpty",params:[{name:"id",type:"long"}],type:"User"},{id:1073147056,predicate:"user",params:[{name:"flags",type:"#"},{name:"self",type:"flags.10?true"},{name:"contact",type:"flags.11?true"},{name:"mutual_contact",type:"flags.12?true"},{name:"deleted",type:"flags.13?true"},{name:"bot",type:"flags.14?true"},{name:"bot_chat_history",type:"flags.15?true"},{name:"bot_nochats",type:"flags.16?true"},{name:"verified",type:"flags.17?true"},{name:"restricted",type:"flags.18?true"},{name:"min",type:"flags.20?true"},{name:"bot_inline_geo",type:"flags.21?true"},{name:"support",type:"flags.23?true"},{name:"scam",type:"flags.24?true"},{name:"apply_min_photo",type:"flags.25?true"},{name:"fake",type:"flags.26?true"},{name:"id",type:"long"},{name:"access_hash",type:"flags.0?long"},{name:"first_name",type:"flags.1?string"},{name:"last_name",type:"flags.2?string"},{name:"username",type:"flags.3?string"},{name:"phone",type:"flags.4?string"},{name:"photo",type:"flags.5?UserProfilePhoto"},{name:"status",type:"flags.6?UserStatus"},{name:"bot_info_version",type:"flags.14?int"},{name:"restriction_reason",type:"flags.18?Vector<RestrictionReason>"},{name:"bot_inline_placeholder",type:"flags.19?string"},{name:"lang_code",type:"flags.22?string"}],type:"User"},{id:1326562017,predicate:"userProfilePhotoEmpty",params:[],type:"UserProfilePhoto"},{id:-2100168954,predicate:"userProfilePhoto",params:[{name:"flags",type:"#"},{name:"has_video",type:"flags.0?true"},{name:"photo_id",type:"long"},{name:"stripped_thumb",type:"flags.1?bytes"},{name:"dc_id",type:"int"}],type:"UserProfilePhoto"},{id:164646985,predicate:"userStatusEmpty",params:[],type:"UserStatus"},{id:-306628279,predicate:"userStatusOnline",params:[{name:"expires",type:"int"}],type:"UserStatus"},{id:9203775,predicate:"userStatusOffline",params:[{name:"was_online",type:"int"}],type:"UserStatus"},{id:-496024847,predicate:"userStatusRecently",params:[],type:"UserStatus"},{id:129960444,predicate:"userStatusLastWeek",params:[],type:"UserStatus"},{id:2011940674,predicate:"userStatusLastMonth",params:[],type:"UserStatus"},{id:693512293,predicate:"chatEmpty",params:[{name:"id",type:"long"}],type:"Chat"},{id:1103884886,predicate:"chat",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"kicked",type:"flags.1?true"},{name:"left",type:"flags.2?true"},{name:"deactivated",type:"flags.5?true"},{name:"call_active",type:"flags.23?true"},{name:"call_not_empty",type:"flags.24?true"},{name:"noforwards",type:"flags.25?true"},{name:"id",type:"long"},{name:"title",type:"string"},{name:"photo",type:"ChatPhoto"},{name:"participants_count",type:"int"},{name:"date",type:"int"},{name:"version",type:"int"},{name:"migrated_to",type:"flags.6?InputChannel"},{name:"admin_rights",type:"flags.14?ChatAdminRights"},{name:"default_banned_rights",type:"flags.18?ChatBannedRights"}],type:"Chat"},{id:1704108455,predicate:"chatForbidden",params:[{name:"id",type:"long"},{name:"title",type:"string"}],type:"Chat"},{id:-2107528095,predicate:"channel",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"left",type:"flags.2?true"},{name:"broadcast",type:"flags.5?true"},{name:"verified",type:"flags.7?true"},{name:"megagroup",type:"flags.8?true"},{name:"restricted",type:"flags.9?true"},{name:"signatures",type:"flags.11?true"},{name:"min",type:"flags.12?true"},{name:"scam",type:"flags.19?true"},{name:"has_link",type:"flags.20?true"},{name:"has_geo",type:"flags.21?true"},{name:"slowmode_enabled",type:"flags.22?true"},{name:"call_active",type:"flags.23?true"},{name:"call_not_empty",type:"flags.24?true"},{name:"fake",type:"flags.25?true"},{name:"gigagroup",type:"flags.26?true"},{name:"noforwards",type:"flags.27?true"},{name:"id",type:"long"},{name:"access_hash",type:"flags.13?long"},{name:"title",type:"string"},{name:"username",type:"flags.6?string"},{name:"photo",type:"ChatPhoto"},{name:"date",type:"int"},{name:"restriction_reason",type:"flags.9?Vector<RestrictionReason>"},{name:"admin_rights",type:"flags.14?ChatAdminRights"},{name:"banned_rights",type:"flags.15?ChatBannedRights"},{name:"default_banned_rights",type:"flags.18?ChatBannedRights"},{name:"participants_count",type:"flags.17?int"}],type:"Chat"},{id:399807445,predicate:"channelForbidden",params:[{name:"flags",type:"#"},{name:"broadcast",type:"flags.5?true"},{name:"megagroup",type:"flags.8?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"title",type:"string"},{name:"until_date",type:"flags.16?int"}],type:"Chat"},{id:-779165146,predicate:"chatFull",params:[{name:"flags",type:"#"},{name:"can_set_username",type:"flags.7?true"},{name:"has_scheduled",type:"flags.8?true"},{name:"id",type:"long"},{name:"about",type:"string"},{name:"participants",type:"ChatParticipants"},{name:"chat_photo",type:"flags.2?Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"exported_invite",type:"flags.13?ExportedChatInvite"},{name:"bot_info",type:"flags.3?Vector<BotInfo>"},{name:"pinned_msg_id",type:"flags.6?int"},{name:"folder_id",type:"flags.11?int"},{name:"call",type:"flags.12?InputGroupCall"},{name:"ttl_period",type:"flags.14?int"},{name:"groupcall_default_join_as",type:"flags.15?Peer"},{name:"theme_emoticon",type:"flags.16?string"},{name:"requests_pending",type:"flags.17?int"},{name:"recent_requesters",type:"flags.17?Vector<long>"},{name:"available_reactions",type:"flags.18?Vector<string>"}],type:"ChatFull"},{id:-516145888,predicate:"channelFull",params:[{name:"flags",type:"#"},{name:"can_view_participants",type:"flags.3?true"},{name:"can_set_username",type:"flags.6?true"},{name:"can_set_stickers",type:"flags.7?true"},{name:"hidden_prehistory",type:"flags.10?true"},{name:"can_set_location",type:"flags.16?true"},{name:"has_scheduled",type:"flags.19?true"},{name:"can_view_stats",type:"flags.20?true"},{name:"blocked",type:"flags.22?true"},{name:"id",type:"long"},{name:"about",type:"string"},{name:"participants_count",type:"flags.0?int"},{name:"admins_count",type:"flags.1?int"},{name:"kicked_count",type:"flags.2?int"},{name:"banned_count",type:"flags.2?int"},{name:"online_count",type:"flags.13?int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"chat_photo",type:"Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"exported_invite",type:"flags.23?ExportedChatInvite"},{name:"bot_info",type:"Vector<BotInfo>"},{name:"migrated_from_chat_id",type:"flags.4?long"},{name:"migrated_from_max_id",type:"flags.4?int"},{name:"pinned_msg_id",type:"flags.5?int"},{name:"stickerset",type:"flags.8?StickerSet"},{name:"available_min_id",type:"flags.9?int"},{name:"folder_id",type:"flags.11?int"},{name:"linked_chat_id",type:"flags.14?long"},{name:"location",type:"flags.15?ChannelLocation"},{name:"slowmode_seconds",type:"flags.17?int"},{name:"slowmode_next_send_date",type:"flags.18?int"},{name:"stats_dc",type:"flags.12?int"},{name:"pts",type:"int"},{name:"call",type:"flags.21?InputGroupCall"},{name:"ttl_period",type:"flags.24?int"},{name:"pending_suggestions",type:"flags.25?Vector<string>"},{name:"groupcall_default_join_as",type:"flags.26?Peer"},{name:"theme_emoticon",type:"flags.27?string"},{name:"requests_pending",type:"flags.28?int"},{name:"recent_requesters",type:"flags.28?Vector<long>"},{name:"default_send_as",type:"flags.29?Peer"},{name:"available_reactions",type:"flags.30?Vector<string>"}],type:"ChatFull"},{id:-1070776313,predicate:"chatParticipant",params:[{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChatParticipant"},{id:-462696732,predicate:"chatParticipantCreator",params:[{name:"user_id",type:"long"}],type:"ChatParticipant"},{id:-1600962725,predicate:"chatParticipantAdmin",params:[{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChatParticipant"},{id:-2023500831,predicate:"chatParticipantsForbidden",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"self_participant",type:"flags.0?ChatParticipant"}],type:"ChatParticipants"},{id:1018991608,predicate:"chatParticipants",params:[{name:"chat_id",type:"long"},{name:"participants",type:"Vector<ChatParticipant>"},{name:"version",type:"int"}],type:"ChatParticipants"},{id:935395612,predicate:"chatPhotoEmpty",params:[],type:"ChatPhoto"},{id:476978193,predicate:"chatPhoto",params:[{name:"flags",type:"#"},{name:"has_video",type:"flags.0?true"},{name:"photo_id",type:"long"},{name:"stripped_thumb",type:"flags.1?bytes"},{name:"dc_id",type:"int"}],type:"ChatPhoto"},{id:-1868117372,predicate:"messageEmpty",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"peer_id",type:"flags.0?Peer"}],type:"Message"},{id:940666592,predicate:"message",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"post",type:"flags.14?true"},{name:"from_scheduled",type:"flags.18?true"},{name:"legacy",type:"flags.19?true"},{name:"edit_hide",type:"flags.21?true"},{name:"pinned",type:"flags.24?true"},{name:"noforwards",type:"flags.26?true"},{name:"id",type:"int"},{name:"from_id",type:"flags.8?Peer"},{name:"peer_id",type:"Peer"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"date",type:"int"},{name:"message",type:"string"},{name:"media",type:"flags.9?MessageMedia"},{name:"reply_markup",type:"flags.6?ReplyMarkup"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"views",type:"flags.10?int"},{name:"forwards",type:"flags.10?int"},{name:"replies",type:"flags.23?MessageReplies"},{name:"edit_date",type:"flags.15?int"},{name:"post_author",type:"flags.16?string"},{name:"grouped_id",type:"flags.17?long"},{name:"reactions",type:"flags.20?MessageReactions"},{name:"restriction_reason",type:"flags.22?Vector<RestrictionReason>"},{name:"ttl_period",type:"flags.25?int"}],type:"Message"},{id:721967202,predicate:"messageService",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"post",type:"flags.14?true"},{name:"legacy",type:"flags.19?true"},{name:"id",type:"int"},{name:"from_id",type:"flags.8?Peer"},{name:"peer_id",type:"Peer"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"date",type:"int"},{name:"action",type:"MessageAction"},{name:"ttl_period",type:"flags.25?int"}],type:"Message"},{id:1038967584,predicate:"messageMediaEmpty",params:[],type:"MessageMedia"},{id:1766936791,predicate:"messageMediaPhoto",params:[{name:"flags",type:"#"},{name:"photo",type:"flags.0?Photo"},{name:"ttl_seconds",type:"flags.2?int"}],type:"MessageMedia"},{id:1457575028,predicate:"messageMediaGeo",params:[{name:"geo",type:"GeoPoint"}],type:"MessageMedia"},{id:1882335561,predicate:"messageMediaContact",params:[{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"user_id",type:"long"}],type:"MessageMedia"},{id:-1618676578,predicate:"messageMediaUnsupported",params:[],type:"MessageMedia"},{id:-1666158377,predicate:"messageMediaDocument",params:[{name:"flags",type:"#"},{name:"document",type:"flags.0?Document"},{name:"ttl_seconds",type:"flags.2?int"}],type:"MessageMedia"},{id:-1557277184,predicate:"messageMediaWebPage",params:[{name:"webpage",type:"WebPage"}],type:"MessageMedia"},{id:784356159,predicate:"messageMediaVenue",params:[{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"}],type:"MessageMedia"},{id:-38694904,predicate:"messageMediaGame",params:[{name:"game",type:"Game"}],type:"MessageMedia"},{id:-2074799289,predicate:"messageMediaInvoice",params:[{name:"flags",type:"#"},{name:"shipping_address_requested",type:"flags.1?true"},{name:"test",type:"flags.3?true"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?WebDocument"},{name:"receipt_msg_id",type:"flags.2?int"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"start_param",type:"string"}],type:"MessageMedia"},{id:-1186937242,predicate:"messageMediaGeoLive",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"int"},{name:"proximity_notification_radius",type:"flags.1?int"}],type:"MessageMedia"},{id:1272375192,predicate:"messageMediaPoll",params:[{name:"poll",type:"Poll"},{name:"results",type:"PollResults"}],type:"MessageMedia"},{id:1065280907,predicate:"messageMediaDice",params:[{name:"value",type:"int"},{name:"emoticon",type:"string"}],type:"MessageMedia"},{id:-1230047312,predicate:"messageActionEmpty",params:[],type:"MessageAction"},{id:-1119368275,predicate:"messageActionChatCreate",params:[{name:"title",type:"string"},{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1247687078,predicate:"messageActionChatEditTitle",params:[{name:"title",type:"string"}],type:"MessageAction"},{id:2144015272,predicate:"messageActionChatEditPhoto",params:[{name:"photo",type:"Photo"}],type:"MessageAction"},{id:-1780220945,predicate:"messageActionChatDeletePhoto",params:[],type:"MessageAction"},{id:365886720,predicate:"messageActionChatAddUser",params:[{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1539362612,predicate:"messageActionChatDeleteUser",params:[{name:"user_id",type:"long"}],type:"MessageAction"},{id:51520707,predicate:"messageActionChatJoinedByLink",params:[{name:"inviter_id",type:"long"}],type:"MessageAction"},{id:-1781355374,predicate:"messageActionChannelCreate",params:[{name:"title",type:"string"}],type:"MessageAction"},{id:-519864430,predicate:"messageActionChatMigrateTo",params:[{name:"channel_id",type:"long"}],type:"MessageAction"},{id:-365344535,predicate:"messageActionChannelMigrateFrom",params:[{name:"title",type:"string"},{name:"chat_id",type:"long"}],type:"MessageAction"},{id:-1799538451,predicate:"messageActionPinMessage",params:[],type:"MessageAction"},{id:-1615153660,predicate:"messageActionHistoryClear",params:[],type:"MessageAction"},{id:-1834538890,predicate:"messageActionGameScore",params:[{name:"game_id",type:"long"},{name:"score",type:"int"}],type:"MessageAction"},{id:-1892568281,predicate:"messageActionPaymentSentMe",params:[{name:"flags",type:"#"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"payload",type:"bytes"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping_option_id",type:"flags.1?string"},{name:"charge",type:"PaymentCharge"}],type:"MessageAction"},{id:1080663248,predicate:"messageActionPaymentSent",params:[{name:"currency",type:"string"},{name:"total_amount",type:"long"}],type:"MessageAction"},{id:-2132731265,predicate:"messageActionPhoneCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.2?true"},{name:"call_id",type:"long"},{name:"reason",type:"flags.0?PhoneCallDiscardReason"},{name:"duration",type:"flags.1?int"}],type:"MessageAction"},{id:1200788123,predicate:"messageActionScreenshotTaken",params:[],type:"MessageAction"},{id:-85549226,predicate:"messageActionCustomAction",params:[{name:"message",type:"string"}],type:"MessageAction"},{id:-1410748418,predicate:"messageActionBotAllowed",params:[{name:"domain",type:"string"}],type:"MessageAction"},{id:455635795,predicate:"messageActionSecureValuesSentMe",params:[{name:"values",type:"Vector<SecureValue>"},{name:"credentials",type:"SecureCredentialsEncrypted"}],type:"MessageAction"},{id:-648257196,predicate:"messageActionSecureValuesSent",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"MessageAction"},{id:-202219658,predicate:"messageActionContactSignUp",params:[],type:"MessageAction"},{id:-1730095465,predicate:"messageActionGeoProximityReached",params:[{name:"from_id",type:"Peer"},{name:"to_id",type:"Peer"},{name:"distance",type:"int"}],type:"MessageAction"},{id:2047704898,predicate:"messageActionGroupCall",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"duration",type:"flags.0?int"}],type:"MessageAction"},{id:1345295095,predicate:"messageActionInviteToGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"users",type:"Vector<long>"}],type:"MessageAction"},{id:-1441072131,predicate:"messageActionSetMessagesTTL",params:[{name:"period",type:"int"}],type:"MessageAction"},{id:-1281329567,predicate:"messageActionGroupCallScheduled",params:[{name:"call",type:"InputGroupCall"},{name:"schedule_date",type:"int"}],type:"MessageAction"},{id:-1434950843,predicate:"messageActionSetChatTheme",params:[{name:"emoticon",type:"string"}],type:"MessageAction"},{id:-339958837,predicate:"messageActionChatJoinedByRequest",params:[],type:"MessageAction"},{id:739712882,predicate:"dialog",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"unread_mark",type:"flags.3?true"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"read_inbox_max_id",type:"int"},{name:"read_outbox_max_id",type:"int"},{name:"unread_count",type:"int"},{name:"unread_mentions_count",type:"int"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"pts",type:"flags.0?int"},{name:"draft",type:"flags.1?DraftMessage"},{name:"folder_id",type:"flags.4?int"}],type:"Dialog"},{id:1908216652,predicate:"dialogFolder",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.2?true"},{name:"folder",type:"Folder"},{name:"peer",type:"Peer"},{name:"top_message",type:"int"},{name:"unread_muted_peers_count",type:"int"},{name:"unread_unmuted_peers_count",type:"int"},{name:"unread_muted_messages_count",type:"int"},{name:"unread_unmuted_messages_count",type:"int"}],type:"Dialog"},{id:590459437,predicate:"photoEmpty",params:[{name:"id",type:"long"}],type:"Photo"},{id:-82216347,predicate:"photo",params:[{name:"flags",type:"#"},{name:"has_stickers",type:"flags.0?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"date",type:"int"},{name:"sizes",type:"Vector<PhotoSize>"},{name:"video_sizes",type:"flags.1?Vector<VideoSize>"},{name:"dc_id",type:"int"}],type:"Photo"},{id:236446268,predicate:"photoSizeEmpty",params:[{name:"type",type:"string"}],type:"PhotoSize"},{id:1976012384,predicate:"photoSize",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"size",type:"int"}],type:"PhotoSize"},{id:35527382,predicate:"photoCachedSize",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:-525288402,predicate:"photoStrippedSize",params:[{name:"type",type:"string"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:-96535659,predicate:"photoSizeProgressive",params:[{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"sizes",type:"Vector<int>"}],type:"PhotoSize"},{id:-668906175,predicate:"photoPathSize",params:[{name:"type",type:"string"},{name:"bytes",type:"bytes"}],type:"PhotoSize"},{id:286776671,predicate:"geoPointEmpty",params:[],type:"GeoPoint"},{id:-1297942941,predicate:"geoPoint",params:[{name:"flags",type:"#"},{name:"long",type:"double"},{name:"lat",type:"double"},{name:"access_hash",type:"long"},{name:"accuracy_radius",type:"flags.0?int"}],type:"GeoPoint"},{id:1577067778,predicate:"auth.sentCode",params:[{name:"flags",type:"#"},{name:"type",type:"auth.SentCodeType"},{name:"phone_code_hash",type:"string"},{name:"next_type",type:"flags.1?auth.CodeType"},{name:"timeout",type:"flags.2?int"}],type:"auth.SentCode"},{id:872119224,predicate:"auth.authorization",params:[{name:"flags",type:"#"},{name:"setup_password_required",type:"flags.1?true"},{name:"otherwise_relogin_days",type:"flags.1?int"},{name:"tmp_sessions",type:"flags.0?int"},{name:"user",type:"User"}],type:"auth.Authorization"},{id:1148485274,predicate:"auth.authorizationSignUpRequired",params:[{name:"flags",type:"#"},{name:"terms_of_service",type:"flags.0?help.TermsOfService"}],type:"auth.Authorization"},{id:-1271602504,predicate:"auth.exportedAuthorization",params:[{name:"id",type:"long"},{name:"bytes",type:"bytes"}],type:"auth.ExportedAuthorization"},{id:-1195615476,predicate:"inputNotifyPeer",params:[{name:"peer",type:"InputPeer"}],type:"InputNotifyPeer"},{id:423314455,predicate:"inputNotifyUsers",params:[],type:"InputNotifyPeer"},{id:1251338318,predicate:"inputNotifyChats",params:[],type:"InputNotifyPeer"},{id:-1311015810,predicate:"inputNotifyBroadcasts",params:[],type:"InputNotifyPeer"},{id:-1673717362,predicate:"inputPeerNotifySettings",params:[{name:"flags",type:"#"},{name:"show_previews",type:"flags.0?Bool"},{name:"silent",type:"flags.1?Bool"},{name:"mute_until",type:"flags.2?int"},{name:"sound",type:"flags.3?string"}],type:"InputPeerNotifySettings"},{id:-1353671392,predicate:"peerNotifySettings",params:[{name:"flags",type:"#"},{name:"show_previews",type:"flags.0?Bool"},{name:"silent",type:"flags.1?Bool"},{name:"mute_until",type:"flags.2?int"},{name:"sound",type:"flags.3?string"}],type:"PeerNotifySettings"},{id:-1525149427,predicate:"peerSettings",params:[{name:"flags",type:"#"},{name:"report_spam",type:"flags.0?true"},{name:"add_contact",type:"flags.1?true"},{name:"block_contact",type:"flags.2?true"},{name:"share_contact",type:"flags.3?true"},{name:"need_contacts_exception",type:"flags.4?true"},{name:"report_geo",type:"flags.5?true"},{name:"autoarchived",type:"flags.7?true"},{name:"invite_members",type:"flags.8?true"},{name:"request_chat_broadcast",type:"flags.10?true"},{name:"geo_distance",type:"flags.6?int"},{name:"request_chat_title",type:"flags.9?string"},{name:"request_chat_date",type:"flags.9?int"}],type:"PeerSettings"},{id:-1539849235,predicate:"wallPaper",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"pattern",type:"flags.3?true"},{name:"dark",type:"flags.4?true"},{name:"access_hash",type:"long"},{name:"slug",type:"string"},{name:"document",type:"Document"},{name:"settings",type:"flags.2?WallPaperSettings"}],type:"WallPaper"},{id:-528465642,predicate:"wallPaperNoFile",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"default",type:"flags.1?true"},{name:"dark",type:"flags.4?true"},{name:"settings",type:"flags.2?WallPaperSettings"}],type:"WallPaper"},{id:1490799288,predicate:"inputReportReasonSpam",params:[],type:"ReportReason"},{id:505595789,predicate:"inputReportReasonViolence",params:[],type:"ReportReason"},{id:777640226,predicate:"inputReportReasonPornography",params:[],type:"ReportReason"},{id:-1376497949,predicate:"inputReportReasonChildAbuse",params:[],type:"ReportReason"},{id:-1041980751,predicate:"inputReportReasonOther",params:[],type:"ReportReason"},{id:-1685456582,predicate:"inputReportReasonCopyright",params:[],type:"ReportReason"},{id:-606798099,predicate:"inputReportReasonGeoIrrelevant",params:[],type:"ReportReason"},{id:-170010905,predicate:"inputReportReasonFake",params:[],type:"ReportReason"},{id:-818518751,predicate:"userFull",params:[{name:"flags",type:"#"},{name:"blocked",type:"flags.0?true"},{name:"phone_calls_available",type:"flags.4?true"},{name:"phone_calls_private",type:"flags.5?true"},{name:"can_pin_message",type:"flags.7?true"},{name:"has_scheduled",type:"flags.12?true"},{name:"video_calls_available",type:"flags.13?true"},{name:"id",type:"long"},{name:"about",type:"flags.1?string"},{name:"settings",type:"PeerSettings"},{name:"profile_photo",type:"flags.2?Photo"},{name:"notify_settings",type:"PeerNotifySettings"},{name:"bot_info",type:"flags.3?BotInfo"},{name:"pinned_msg_id",type:"flags.6?int"},{name:"common_chats_count",type:"int"},{name:"folder_id",type:"flags.11?int"},{name:"ttl_period",type:"flags.14?int"},{name:"theme_emoticon",type:"flags.15?string"},{name:"private_forward_name",type:"flags.16?string"}],type:"UserFull"},{id:341499403,predicate:"contact",params:[{name:"user_id",type:"long"},{name:"mutual",type:"Bool"}],type:"Contact"},{id:-1052885936,predicate:"importedContact",params:[{name:"user_id",type:"long"},{name:"client_id",type:"long"}],type:"ImportedContact"},{id:383348795,predicate:"contactStatus",params:[{name:"user_id",type:"long"},{name:"status",type:"UserStatus"}],type:"ContactStatus"},{id:-1219778094,predicate:"contacts.contactsNotModified",params:[],type:"contacts.Contacts"},{id:-353862078,predicate:"contacts.contacts",params:[{name:"contacts",type:"Vector<Contact>"},{name:"saved_count",type:"int"},{name:"users",type:"Vector<User>"}],type:"contacts.Contacts"},{id:2010127419,predicate:"contacts.importedContacts",params:[{name:"imported",type:"Vector<ImportedContact>"},{name:"popular_invites",type:"Vector<PopularContact>"},{name:"retry_contacts",type:"Vector<long>"},{name:"users",type:"Vector<User>"}],type:"contacts.ImportedContacts"},{id:182326673,predicate:"contacts.blocked",params:[{name:"blocked",type:"Vector<PeerBlocked>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Blocked"},{id:-513392236,predicate:"contacts.blockedSlice",params:[{name:"count",type:"int"},{name:"blocked",type:"Vector<PeerBlocked>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Blocked"},{id:364538944,predicate:"messages.dialogs",params:[{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Dialogs"},{id:1910543603,predicate:"messages.dialogsSlice",params:[{name:"count",type:"int"},{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Dialogs"},{id:-253500010,predicate:"messages.dialogsNotModified",params:[{name:"count",type:"int"}],type:"messages.Dialogs"},{id:-1938715001,predicate:"messages.messages",params:[{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:978610270,predicate:"messages.messagesSlice",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"count",type:"int"},{name:"next_rate",type:"flags.0?int"},{name:"offset_id_offset",type:"flags.2?int"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:1682413576,predicate:"messages.channelMessages",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"pts",type:"int"},{name:"count",type:"int"},{name:"offset_id_offset",type:"flags.2?int"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.Messages"},{id:1951620897,predicate:"messages.messagesNotModified",params:[{name:"count",type:"int"}],type:"messages.Messages"},{id:1694474197,predicate:"messages.chats",params:[{name:"chats",type:"Vector<Chat>"}],type:"messages.Chats"},{id:-1663561404,predicate:"messages.chatsSlice",params:[{name:"count",type:"int"},{name:"chats",type:"Vector<Chat>"}],type:"messages.Chats"},{id:-438840932,predicate:"messages.chatFull",params:[{name:"full_chat",type:"ChatFull"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatFull"},{id:-1269012015,predicate:"messages.affectedHistory",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"offset",type:"int"}],type:"messages.AffectedHistory"},{id:1474492012,predicate:"inputMessagesFilterEmpty",params:[],type:"MessagesFilter"},{id:-1777752804,predicate:"inputMessagesFilterPhotos",params:[],type:"MessagesFilter"},{id:-1614803355,predicate:"inputMessagesFilterVideo",params:[],type:"MessagesFilter"},{id:1458172132,predicate:"inputMessagesFilterPhotoVideo",params:[],type:"MessagesFilter"},{id:-1629621880,predicate:"inputMessagesFilterDocument",params:[],type:"MessagesFilter"},{id:2129714567,predicate:"inputMessagesFilterUrl",params:[],type:"MessagesFilter"},{id:-3644025,predicate:"inputMessagesFilterGif",params:[],type:"MessagesFilter"},{id:1358283666,predicate:"inputMessagesFilterVoice",params:[],type:"MessagesFilter"},{id:928101534,predicate:"inputMessagesFilterMusic",params:[],type:"MessagesFilter"},{id:975236280,predicate:"inputMessagesFilterChatPhotos",params:[],type:"MessagesFilter"},{id:-2134272152,predicate:"inputMessagesFilterPhoneCalls",params:[{name:"flags",type:"#"},{name:"missed",type:"flags.0?true"}],type:"MessagesFilter"},{id:2054952868,predicate:"inputMessagesFilterRoundVoice",params:[],type:"MessagesFilter"},{id:-1253451181,predicate:"inputMessagesFilterRoundVideo",params:[],type:"MessagesFilter"},{id:-1040652646,predicate:"inputMessagesFilterMyMentions",params:[],type:"MessagesFilter"},{id:-419271411,predicate:"inputMessagesFilterGeo",params:[],type:"MessagesFilter"},{id:-530392189,predicate:"inputMessagesFilterContacts",params:[],type:"MessagesFilter"},{id:464520273,predicate:"inputMessagesFilterPinned",params:[],type:"MessagesFilter"},{id:522914557,predicate:"updateNewMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1318109142,predicate:"updateMessageID",params:[{name:"id",type:"int"},{name:"random_id",type:"long"}],type:"Update"},{id:-1576161051,predicate:"updateDeleteMessages",params:[{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1071741569,predicate:"updateUserTyping",params:[{name:"user_id",type:"long"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:-2092401936,predicate:"updateChatUserTyping",params:[{name:"chat_id",type:"long"},{name:"from_id",type:"Peer"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:125178264,predicate:"updateChatParticipants",params:[{name:"participants",type:"ChatParticipants"}],type:"Update"},{id:-440534818,predicate:"updateUserStatus",params:[{name:"user_id",type:"long"},{name:"status",type:"UserStatus"}],type:"Update"},{id:-1007549728,predicate:"updateUserName",params:[{name:"user_id",type:"long"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"username",type:"string"}],type:"Update"},{id:-232290676,predicate:"updateUserPhoto",params:[{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"photo",type:"UserProfilePhoto"},{name:"previous",type:"Bool"}],type:"Update"},{id:314359194,predicate:"updateNewEncryptedMessage",params:[{name:"message",type:"EncryptedMessage"},{name:"qts",type:"int"}],type:"Update"},{id:386986326,predicate:"updateEncryptedChatTyping",params:[{name:"chat_id",type:"int"}],type:"Update"},{id:-1264392051,predicate:"updateEncryption",params:[{name:"chat",type:"EncryptedChat"},{name:"date",type:"int"}],type:"Update"},{id:956179895,predicate:"updateEncryptedMessagesRead",params:[{name:"chat_id",type:"int"},{name:"max_date",type:"int"},{name:"date",type:"int"}],type:"Update"},{id:1037718609,predicate:"updateChatParticipantAdd",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"},{name:"version",type:"int"}],type:"Update"},{id:-483443337,predicate:"updateChatParticipantDelete",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"version",type:"int"}],type:"Update"},{id:-1906403213,predicate:"updateDcOptions",params:[{name:"dc_options",type:"Vector<DcOption>"}],type:"Update"},{id:-1094555409,predicate:"updateNotifySettings",params:[{name:"peer",type:"NotifyPeer"},{name:"notify_settings",type:"PeerNotifySettings"}],type:"Update"},{id:-337352679,predicate:"updateServiceNotification",params:[{name:"flags",type:"#"},{name:"popup",type:"flags.0?true"},{name:"inbox_date",type:"flags.1?int"},{name:"type",type:"string"},{name:"message",type:"string"},{name:"media",type:"MessageMedia"},{name:"entities",type:"Vector<MessageEntity>"}],type:"Update"},{id:-298113238,predicate:"updatePrivacy",params:[{name:"key",type:"PrivacyKey"},{name:"rules",type:"Vector<PrivacyRule>"}],type:"Update"},{id:88680979,predicate:"updateUserPhone",params:[{name:"user_id",type:"long"},{name:"phone",type:"string"}],type:"Update"},{id:-1667805217,predicate:"updateReadHistoryInbox",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"peer",type:"Peer"},{name:"max_id",type:"int"},{name:"still_unread_count",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:791617983,predicate:"updateReadHistoryOutbox",params:[{name:"peer",type:"Peer"},{name:"max_id",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:2139689491,predicate:"updateWebPage",params:[{name:"webpage",type:"WebPage"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1757493555,predicate:"updateReadMessagesContents",params:[{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:277713951,predicate:"updateChannelTooLong",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"pts",type:"flags.0?int"}],type:"Update"},{id:1666927625,predicate:"updateChannel",params:[{name:"channel_id",type:"long"}],type:"Update"},{id:1656358105,predicate:"updateNewChannelMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1842450928,predicate:"updateReadChannelInbox",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"channel_id",type:"long"},{name:"max_id",type:"int"},{name:"still_unread_count",type:"int"},{name:"pts",type:"int"}],type:"Update"},{id:-1020437742,predicate:"updateDeleteChannelMessages",params:[{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-232346616,predicate:"updateChannelMessageViews",params:[{name:"channel_id",type:"long"},{name:"id",type:"int"},{name:"views",type:"int"}],type:"Update"},{id:-674602590,predicate:"updateChatParticipantAdmin",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"long"},{name:"is_admin",type:"Bool"},{name:"version",type:"int"}],type:"Update"},{id:1753886890,predicate:"updateNewStickerSet",params:[{name:"stickerset",type:"messages.StickerSet"}],type:"Update"},{id:196268545,predicate:"updateStickerSetsOrder",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"order",type:"Vector<long>"}],type:"Update"},{id:1135492588,predicate:"updateStickerSets",params:[],type:"Update"},{id:-1821035490,predicate:"updateSavedGifs",params:[],type:"Update"},{id:1232025500,predicate:"updateBotInlineQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"query",type:"string"},{name:"geo",type:"flags.0?GeoPoint"},{name:"peer_type",type:"flags.1?InlineQueryPeerType"},{name:"offset",type:"string"}],type:"Update"},{id:317794823,predicate:"updateBotInlineSend",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"query",type:"string"},{name:"geo",type:"flags.0?GeoPoint"},{name:"id",type:"string"},{name:"msg_id",type:"flags.1?InputBotInlineMessageID"}],type:"Update"},{id:457133559,predicate:"updateEditChannelMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-1177566067,predicate:"updateBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"},{name:"game_short_name",type:"flags.1?string"}],type:"Update"},{id:-469536605,predicate:"updateEditMessage",params:[{name:"message",type:"Message"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1763610706,predicate:"updateInlineBotCallbackQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"msg_id",type:"InputBotInlineMessageID"},{name:"chat_instance",type:"long"},{name:"data",type:"flags.0?bytes"},{name:"game_short_name",type:"flags.1?string"}],type:"Update"},{id:-1218471511,predicate:"updateReadChannelOutbox",params:[{name:"channel_id",type:"long"},{name:"max_id",type:"int"}],type:"Update"},{id:-299124375,predicate:"updateDraftMessage",params:[{name:"peer",type:"Peer"},{name:"draft",type:"DraftMessage"}],type:"Update"},{id:1461528386,predicate:"updateReadFeaturedStickers",params:[],type:"Update"},{id:-1706939360,predicate:"updateRecentStickers",params:[],type:"Update"},{id:-1574314746,predicate:"updateConfig",params:[],type:"Update"},{id:861169551,predicate:"updatePtsChanged",params:[],type:"Update"},{id:791390623,predicate:"updateChannelWebPage",params:[{name:"channel_id",type:"long"},{name:"webpage",type:"WebPage"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1852826908,predicate:"updateDialogPinned",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"folder_id",type:"flags.1?int"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:-99664734,predicate:"updatePinnedDialogs",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.1?int"},{name:"order",type:"flags.0?Vector<DialogPeer>"}],type:"Update"},{id:-2095595325,predicate:"updateBotWebhookJSON",params:[{name:"data",type:"DataJSON"}],type:"Update"},{id:-1684914010,predicate:"updateBotWebhookJSONQuery",params:[{name:"query_id",type:"long"},{name:"data",type:"DataJSON"},{name:"timeout",type:"int"}],type:"Update"},{id:-1246823043,predicate:"updateBotShippingQuery",params:[{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"payload",type:"bytes"},{name:"shipping_address",type:"PostAddress"}],type:"Update"},{id:-1934976362,predicate:"updateBotPrecheckoutQuery",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"user_id",type:"long"},{name:"payload",type:"bytes"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping_option_id",type:"flags.1?string"},{name:"currency",type:"string"},{name:"total_amount",type:"long"}],type:"Update"},{id:-1425052898,predicate:"updatePhoneCall",params:[{name:"phone_call",type:"PhoneCall"}],type:"Update"},{id:1180041828,predicate:"updateLangPackTooLong",params:[{name:"lang_code",type:"string"}],type:"Update"},{id:1442983757,predicate:"updateLangPack",params:[{name:"difference",type:"LangPackDifference"}],type:"Update"},{id:-451831443,predicate:"updateFavedStickers",params:[],type:"Update"},{id:1153291573,predicate:"updateChannelReadMessagesContents",params:[{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:1887741886,predicate:"updateContactsReset",params:[],type:"Update"},{id:-1304443240,predicate:"updateChannelAvailableMessages",params:[{name:"channel_id",type:"long"},{name:"available_min_id",type:"int"}],type:"Update"},{id:-513517117,predicate:"updateDialogUnreadMark",params:[{name:"flags",type:"#"},{name:"unread",type:"flags.0?true"},{name:"peer",type:"DialogPeer"}],type:"Update"},{id:-1398708869,predicate:"updateMessagePoll",params:[{name:"flags",type:"#"},{name:"poll_id",type:"long"},{name:"poll",type:"flags.0?Poll"},{name:"results",type:"PollResults"}],type:"Update"},{id:1421875280,predicate:"updateChatDefaultBannedRights",params:[{name:"peer",type:"Peer"},{name:"default_banned_rights",type:"ChatBannedRights"},{name:"version",type:"int"}],type:"Update"},{id:422972864,predicate:"updateFolderPeers",params:[{name:"folder_peers",type:"Vector<FolderPeer>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1786671974,predicate:"updatePeerSettings",params:[{name:"peer",type:"Peer"},{name:"settings",type:"PeerSettings"}],type:"Update"},{id:-1263546448,predicate:"updatePeerLocated",params:[{name:"peers",type:"Vector<PeerLocated>"}],type:"Update"},{id:967122427,predicate:"updateNewScheduledMessage",params:[{name:"message",type:"Message"}],type:"Update"},{id:-1870238482,predicate:"updateDeleteScheduledMessages",params:[{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"}],type:"Update"},{id:-2112423005,predicate:"updateTheme",params:[{name:"theme",type:"Theme"}],type:"Update"},{id:-2027964103,predicate:"updateGeoLiveViewed",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"}],type:"Update"},{id:1448076945,predicate:"updateLoginToken",params:[],type:"Update"},{id:274961865,predicate:"updateMessagePollVote",params:[{name:"poll_id",type:"long"},{name:"user_id",type:"long"},{name:"options",type:"Vector<bytes>"},{name:"qts",type:"int"}],type:"Update"},{id:654302845,predicate:"updateDialogFilter",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"filter",type:"flags.0?DialogFilter"}],type:"Update"},{id:-1512627963,predicate:"updateDialogFilterOrder",params:[{name:"order",type:"Vector<int>"}],type:"Update"},{id:889491791,predicate:"updateDialogFilters",params:[],type:"Update"},{id:643940105,predicate:"updatePhoneCallSignalingData",params:[{name:"phone_call_id",type:"long"},{name:"data",type:"bytes"}],type:"Update"},{id:-761649164,predicate:"updateChannelMessageForwards",params:[{name:"channel_id",type:"long"},{name:"id",type:"int"},{name:"forwards",type:"int"}],type:"Update"},{id:-693004986,predicate:"updateReadChannelDiscussionInbox",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"int"},{name:"read_max_id",type:"int"},{name:"broadcast_id",type:"flags.0?long"},{name:"broadcast_post",type:"flags.0?int"}],type:"Update"},{id:1767677564,predicate:"updateReadChannelDiscussionOutbox",params:[{name:"channel_id",type:"long"},{name:"top_msg_id",type:"int"},{name:"read_max_id",type:"int"}],type:"Update"},{id:610945826,predicate:"updatePeerBlocked",params:[{name:"peer_id",type:"Peer"},{name:"blocked",type:"Bool"}],type:"Update"},{id:-1937192669,predicate:"updateChannelUserTyping",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"top_msg_id",type:"flags.0?int"},{name:"from_id",type:"Peer"},{name:"action",type:"SendMessageAction"}],type:"Update"},{id:-309990731,predicate:"updatePinnedMessages",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:1538885128,predicate:"updatePinnedChannelMessages",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"channel_id",type:"long"},{name:"messages",type:"Vector<int>"},{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"Update"},{id:-124097970,predicate:"updateChat",params:[{name:"chat_id",type:"long"}],type:"Update"},{id:-219423922,predicate:"updateGroupCallParticipants",params:[{name:"call",type:"InputGroupCall"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"version",type:"int"}],type:"Update"},{id:347227392,predicate:"updateGroupCall",params:[{name:"chat_id",type:"long"},{name:"call",type:"GroupCall"}],type:"Update"},{id:-1147422299,predicate:"updatePeerHistoryTTL",params:[{name:"flags",type:"#"},{name:"peer",type:"Peer"},{name:"ttl_period",type:"flags.0?int"}],type:"Update"},{id:-796432838,predicate:"updateChatParticipant",params:[{name:"flags",type:"#"},{name:"chat_id",type:"long"},{name:"date",type:"int"},{name:"actor_id",type:"long"},{name:"user_id",type:"long"},{name:"prev_participant",type:"flags.0?ChatParticipant"},{name:"new_participant",type:"flags.1?ChatParticipant"},{name:"invite",type:"flags.2?ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-1738720581,predicate:"updateChannelParticipant",params:[{name:"flags",type:"#"},{name:"channel_id",type:"long"},{name:"date",type:"int"},{name:"actor_id",type:"long"},{name:"user_id",type:"long"},{name:"prev_participant",type:"flags.0?ChannelParticipant"},{name:"new_participant",type:"flags.1?ChannelParticipant"},{name:"invite",type:"flags.2?ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:-997782967,predicate:"updateBotStopped",params:[{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"stopped",type:"Bool"},{name:"qts",type:"int"}],type:"Update"},{id:192428418,predicate:"updateGroupCallConnection",params:[{name:"flags",type:"#"},{name:"presentation",type:"flags.0?true"},{name:"params",type:"DataJSON"}],type:"Update"},{id:1299263278,predicate:"updateBotCommands",params:[{name:"peer",type:"Peer"},{name:"bot_id",type:"long"},{name:"commands",type:"Vector<BotCommand>"}],type:"Update"},{id:1885586395,predicate:"updatePendingJoinRequests",params:[{name:"peer",type:"Peer"},{name:"requests_pending",type:"int"},{name:"recent_requesters",type:"Vector<long>"}],type:"Update"},{id:299870598,predicate:"updateBotChatInviteRequester",params:[{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"user_id",type:"long"},{name:"about",type:"string"},{name:"invite",type:"ExportedChatInvite"},{name:"qts",type:"int"}],type:"Update"},{id:357013699,predicate:"updateMessageReactions",params:[{name:"peer",type:"Peer"},{name:"msg_id",type:"int"},{name:"reactions",type:"MessageReactions"}],type:"Update"},{id:-1519637954,predicate:"updates.state",params:[{name:"pts",type:"int"},{name:"qts",type:"int"},{name:"date",type:"int"},{name:"seq",type:"int"},{name:"unread_count",type:"int"}],type:"updates.State"},{id:1567990072,predicate:"updates.differenceEmpty",params:[{name:"date",type:"int"},{name:"seq",type:"int"}],type:"updates.Difference"},{id:16030880,predicate:"updates.difference",params:[{name:"new_messages",type:"Vector<Message>"},{name:"new_encrypted_messages",type:"Vector<EncryptedMessage>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"state",type:"updates.State"}],type:"updates.Difference"},{id:-1459938943,predicate:"updates.differenceSlice",params:[{name:"new_messages",type:"Vector<Message>"},{name:"new_encrypted_messages",type:"Vector<EncryptedMessage>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"intermediate_state",type:"updates.State"}],type:"updates.Difference"},{id:1258196845,predicate:"updates.differenceTooLong",params:[{name:"pts",type:"int"}],type:"updates.Difference"},{id:-484987010,predicate:"updatesTooLong",params:[],type:"Updates"},{id:826001400,predicate:"updateShortMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"id",type:"int"},{name:"user_id",type:"long"},{name:"message",type:"string"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:1299050149,predicate:"updateShortChatMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"mentioned",type:"flags.4?true"},{name:"media_unread",type:"flags.5?true"},{name:"silent",type:"flags.13?true"},{name:"id",type:"int"},{name:"from_id",type:"long"},{name:"chat_id",type:"long"},{name:"message",type:"string"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"fwd_from",type:"flags.2?MessageFwdHeader"},{name:"via_bot_id",type:"flags.11?long"},{name:"reply_to",type:"flags.3?MessageReplyHeader"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:2027216577,predicate:"updateShort",params:[{name:"update",type:"Update"},{name:"date",type:"int"}],type:"Updates"},{id:1918567619,predicate:"updatesCombined",params:[{name:"updates",type:"Vector<Update>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"},{name:"date",type:"int"},{name:"seq_start",type:"int"},{name:"seq",type:"int"}],type:"Updates"},{id:1957577280,predicate:"updates",params:[{name:"updates",type:"Vector<Update>"},{name:"users",type:"Vector<User>"},{name:"chats",type:"Vector<Chat>"},{name:"date",type:"int"},{name:"seq",type:"int"}],type:"Updates"},{id:-1877614335,predicate:"updateShortSentMessage",params:[{name:"flags",type:"#"},{name:"out",type:"flags.1?true"},{name:"id",type:"int"},{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"date",type:"int"},{name:"media",type:"flags.9?MessageMedia"},{name:"entities",type:"flags.7?Vector<MessageEntity>"},{name:"ttl_period",type:"flags.25?int"}],type:"Updates"},{id:-1916114267,predicate:"photos.photos",params:[{name:"photos",type:"Vector<Photo>"},{name:"users",type:"Vector<User>"}],type:"photos.Photos"},{id:352657236,predicate:"photos.photosSlice",params:[{name:"count",type:"int"},{name:"photos",type:"Vector<Photo>"},{name:"users",type:"Vector<User>"}],type:"photos.Photos"},{id:539045032,predicate:"photos.photo",params:[{name:"photo",type:"Photo"},{name:"users",type:"Vector<User>"}],type:"photos.Photo"},{id:157948117,predicate:"upload.file",params:[{name:"type",type:"storage.FileType"},{name:"mtime",type:"int"},{name:"bytes",type:"bytes"}],type:"upload.File"},{id:-242427324,predicate:"upload.fileCdnRedirect",params:[{name:"dc_id",type:"int"},{name:"file_token",type:"bytes"},{name:"encryption_key",type:"bytes"},{name:"encryption_iv",type:"bytes"},{name:"file_hashes",type:"Vector<FileHash>"}],type:"upload.File"},{id:414687501,predicate:"dcOption",params:[{name:"flags",type:"#"},{name:"ipv6",type:"flags.0?true"},{name:"media_only",type:"flags.1?true"},{name:"tcpo_only",type:"flags.2?true"},{name:"cdn",type:"flags.3?true"},{name:"static",type:"flags.4?true"},{name:"id",type:"int"},{name:"ip_address",type:"string"},{name:"port",type:"int"},{name:"secret",type:"flags.10?bytes"}],type:"DcOption"},{id:856375399,predicate:"config",params:[{name:"flags",type:"#"},{name:"phonecalls_enabled",type:"flags.1?true"},{name:"default_p2p_contacts",type:"flags.3?true"},{name:"preload_featured_stickers",type:"flags.4?true"},{name:"ignore_phone_entities",type:"flags.5?true"},{name:"revoke_pm_inbox",type:"flags.6?true"},{name:"blocked_mode",type:"flags.8?true"},{name:"pfs_enabled",type:"flags.13?true"},{name:"date",type:"int"},{name:"expires",type:"int"},{name:"test_mode",type:"Bool"},{name:"this_dc",type:"int"},{name:"dc_options",type:"Vector<DcOption>"},{name:"dc_txt_domain_name",type:"string"},{name:"chat_size_max",type:"int"},{name:"megagroup_size_max",type:"int"},{name:"forwarded_count_max",type:"int"},{name:"online_update_period_ms",type:"int"},{name:"offline_blur_timeout_ms",type:"int"},{name:"offline_idle_timeout_ms",type:"int"},{name:"online_cloud_timeout_ms",type:"int"},{name:"notify_cloud_delay_ms",type:"int"},{name:"notify_default_delay_ms",type:"int"},{name:"push_chat_period_ms",type:"int"},{name:"push_chat_limit",type:"int"},{name:"saved_gifs_limit",type:"int"},{name:"edit_time_limit",type:"int"},{name:"revoke_time_limit",type:"int"},{name:"revoke_pm_time_limit",type:"int"},{name:"rating_e_decay",type:"int"},{name:"stickers_recent_limit",type:"int"},{name:"stickers_faved_limit",type:"int"},{name:"channels_read_media_period",type:"int"},{name:"tmp_sessions",type:"flags.0?int"},{name:"pinned_dialogs_count_max",type:"int"},{name:"pinned_infolder_count_max",type:"int"},{name:"call_receive_timeout_ms",type:"int"},{name:"call_ring_timeout_ms",type:"int"},{name:"call_connect_timeout_ms",type:"int"},{name:"call_packet_timeout_ms",type:"int"},{name:"me_url_prefix",type:"string"},{name:"autoupdate_url_prefix",type:"flags.7?string"},{name:"gif_search_username",type:"flags.9?string"},{name:"venue_search_username",type:"flags.10?string"},{name:"img_search_username",type:"flags.11?string"},{name:"static_maps_provider",type:"flags.12?string"},{name:"caption_length_max",type:"int"},{name:"message_length_max",type:"int"},{name:"webfile_dc_id",type:"int"},{name:"suggested_lang_code",type:"flags.2?string"},{name:"lang_pack_version",type:"flags.2?int"},{name:"base_lang_pack_version",type:"flags.2?int"}],type:"Config"},{id:-1910892683,predicate:"nearestDc",params:[{name:"country",type:"string"},{name:"this_dc",type:"int"},{name:"nearest_dc",type:"int"}],type:"NearestDc"},{id:-860107216,predicate:"help.appUpdate",params:[{name:"flags",type:"#"},{name:"can_not_skip",type:"flags.0?true"},{name:"id",type:"int"},{name:"version",type:"string"},{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"document",type:"flags.1?Document"},{name:"url",type:"flags.2?string"},{name:"sticker",type:"flags.3?Document"}],type:"help.AppUpdate"},{id:-1000708810,predicate:"help.noAppUpdate",params:[],type:"help.AppUpdate"},{id:415997816,predicate:"help.inviteText",params:[{name:"message",type:"string"}],type:"help.InviteText"},{id:-1417756512,predicate:"encryptedChatEmpty",params:[{name:"id",type:"int"}],type:"EncryptedChat"},{id:1722964307,predicate:"encryptedChatWaiting",params:[{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"}],type:"EncryptedChat"},{id:1223809356,predicate:"encryptedChatRequested",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a",type:"bytes"}],type:"EncryptedChat"},{id:1643173063,predicate:"encryptedChat",params:[{name:"id",type:"int"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_or_b",type:"bytes"},{name:"key_fingerprint",type:"long"}],type:"EncryptedChat"},{id:505183301,predicate:"encryptedChatDiscarded",params:[{name:"flags",type:"#"},{name:"history_deleted",type:"flags.0?true"},{name:"id",type:"int"}],type:"EncryptedChat"},{id:-247351839,predicate:"inputEncryptedChat",params:[{name:"chat_id",type:"int"},{name:"access_hash",type:"long"}],type:"InputEncryptedChat"},{id:-1038136962,predicate:"encryptedFileEmpty",params:[],type:"EncryptedFile"},{id:1248893260,predicate:"encryptedFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"size",type:"int"},{name:"dc_id",type:"int"},{name:"key_fingerprint",type:"int"}],type:"EncryptedFile"},{id:406307684,predicate:"inputEncryptedFileEmpty",params:[],type:"InputEncryptedFile"},{id:1690108678,predicate:"inputEncryptedFileUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"md5_checksum",type:"string"},{name:"key_fingerprint",type:"int"}],type:"InputEncryptedFile"},{id:1511503333,predicate:"inputEncryptedFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputEncryptedFile"},{id:767652808,predicate:"inputEncryptedFileBigUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"key_fingerprint",type:"int"}],type:"InputEncryptedFile"},{id:-317144808,predicate:"encryptedMessage",params:[{name:"random_id",type:"long"},{name:"chat_id",type:"int"},{name:"date",type:"int"},{name:"bytes",type:"bytes"},{name:"file",type:"EncryptedFile"}],type:"EncryptedMessage"},{id:594758406,predicate:"encryptedMessageService",params:[{name:"random_id",type:"long"},{name:"chat_id",type:"int"},{name:"date",type:"int"},{name:"bytes",type:"bytes"}],type:"EncryptedMessage"},{id:-1058912715,predicate:"messages.dhConfigNotModified",params:[{name:"random",type:"bytes"}],type:"messages.DhConfig"},{id:740433629,predicate:"messages.dhConfig",params:[{name:"g",type:"int"},{name:"p",type:"bytes"},{name:"version",type:"int"},{name:"random",type:"bytes"}],type:"messages.DhConfig"},{id:1443858741,predicate:"messages.sentEncryptedMessage",params:[{name:"date",type:"int"}],type:"messages.SentEncryptedMessage"},{id:-1802240206,predicate:"messages.sentEncryptedFile",params:[{name:"date",type:"int"},{name:"file",type:"EncryptedFile"}],type:"messages.SentEncryptedMessage"},{id:1928391342,predicate:"inputDocumentEmpty",params:[],type:"InputDocument"},{id:448771445,predicate:"inputDocument",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"}],type:"InputDocument"},{id:922273905,predicate:"documentEmpty",params:[{name:"id",type:"long"}],type:"Document"},{id:512177195,predicate:"document",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"file_reference",type:"bytes"},{name:"date",type:"int"},{name:"mime_type",type:"string"},{name:"size",type:"int"},{name:"thumbs",type:"flags.0?Vector<PhotoSize>"},{name:"video_thumbs",type:"flags.1?Vector<VideoSize>"},{name:"dc_id",type:"int"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"Document"},{id:398898678,predicate:"help.support",params:[{name:"phone_number",type:"string"},{name:"user",type:"User"}],type:"help.Support"},{id:-1613493288,predicate:"notifyPeer",params:[{name:"peer",type:"Peer"}],type:"NotifyPeer"},{id:-1261946036,predicate:"notifyUsers",params:[],type:"NotifyPeer"},{id:-1073230141,predicate:"notifyChats",params:[],type:"NotifyPeer"},{id:-703403793,predicate:"notifyBroadcasts",params:[],type:"NotifyPeer"},{id:381645902,predicate:"sendMessageTypingAction",params:[],type:"SendMessageAction"},{id:-44119819,predicate:"sendMessageCancelAction",params:[],type:"SendMessageAction"},{id:-1584933265,predicate:"sendMessageRecordVideoAction",params:[],type:"SendMessageAction"},{id:-378127636,predicate:"sendMessageUploadVideoAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-718310409,predicate:"sendMessageRecordAudioAction",params:[],type:"SendMessageAction"},{id:-212740181,predicate:"sendMessageUploadAudioAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-774682074,predicate:"sendMessageUploadPhotoAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-1441998364,predicate:"sendMessageUploadDocumentAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:393186209,predicate:"sendMessageGeoLocationAction",params:[],type:"SendMessageAction"},{id:1653390447,predicate:"sendMessageChooseContactAction",params:[],type:"SendMessageAction"},{id:-580219064,predicate:"sendMessageGamePlayAction",params:[],type:"SendMessageAction"},{id:-1997373508,predicate:"sendMessageRecordRoundAction",params:[],type:"SendMessageAction"},{id:608050278,predicate:"sendMessageUploadRoundAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-651419003,predicate:"speakingInGroupCallAction",params:[],type:"SendMessageAction"},{id:-606432698,predicate:"sendMessageHistoryImportAction",params:[{name:"progress",type:"int"}],type:"SendMessageAction"},{id:-1336228175,predicate:"sendMessageChooseStickerAction",params:[],type:"SendMessageAction"},{id:630664139,predicate:"sendMessageEmojiInteraction",params:[{name:"emoticon",type:"string"},{name:"msg_id",type:"int"},{name:"interaction",type:"DataJSON"}],type:"SendMessageAction"},{id:-1234857938,predicate:"sendMessageEmojiInteractionSeen",params:[{name:"emoticon",type:"string"}],type:"SendMessageAction"},{id:-1290580579,predicate:"contacts.found",params:[{name:"my_results",type:"Vector<Peer>"},{name:"results",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.Found"},{id:1335282456,predicate:"inputPrivacyKeyStatusTimestamp",params:[],type:"InputPrivacyKey"},{id:-1107622874,predicate:"inputPrivacyKeyChatInvite",params:[],type:"InputPrivacyKey"},{id:-88417185,predicate:"inputPrivacyKeyPhoneCall",params:[],type:"InputPrivacyKey"},{id:-610373422,predicate:"inputPrivacyKeyPhoneP2P",params:[],type:"InputPrivacyKey"},{id:-1529000952,predicate:"inputPrivacyKeyForwards",params:[],type:"InputPrivacyKey"},{id:1461304012,predicate:"inputPrivacyKeyProfilePhoto",params:[],type:"InputPrivacyKey"},{id:55761658,predicate:"inputPrivacyKeyPhoneNumber",params:[],type:"InputPrivacyKey"},{id:-786326563,predicate:"inputPrivacyKeyAddedByPhone",params:[],type:"InputPrivacyKey"},{id:-1137792208,predicate:"privacyKeyStatusTimestamp",params:[],type:"PrivacyKey"},{id:1343122938,predicate:"privacyKeyChatInvite",params:[],type:"PrivacyKey"},{id:1030105979,predicate:"privacyKeyPhoneCall",params:[],type:"PrivacyKey"},{id:961092808,predicate:"privacyKeyPhoneP2P",params:[],type:"PrivacyKey"},{id:1777096355,predicate:"privacyKeyForwards",params:[],type:"PrivacyKey"},{id:-1777000467,predicate:"privacyKeyProfilePhoto",params:[],type:"PrivacyKey"},{id:-778378131,predicate:"privacyKeyPhoneNumber",params:[],type:"PrivacyKey"},{id:1124062251,predicate:"privacyKeyAddedByPhone",params:[],type:"PrivacyKey"},{id:218751099,predicate:"inputPrivacyValueAllowContacts",params:[],type:"InputPrivacyRule"},{id:407582158,predicate:"inputPrivacyValueAllowAll",params:[],type:"InputPrivacyRule"},{id:320652927,predicate:"inputPrivacyValueAllowUsers",params:[{name:"users",type:"Vector<InputUser>"}],type:"InputPrivacyRule"},{id:195371015,predicate:"inputPrivacyValueDisallowContacts",params:[],type:"InputPrivacyRule"},{id:-697604407,predicate:"inputPrivacyValueDisallowAll",params:[],type:"InputPrivacyRule"},{id:-1877932953,predicate:"inputPrivacyValueDisallowUsers",params:[{name:"users",type:"Vector<InputUser>"}],type:"InputPrivacyRule"},{id:-2079962673,predicate:"inputPrivacyValueAllowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"InputPrivacyRule"},{id:-380694650,predicate:"inputPrivacyValueDisallowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"InputPrivacyRule"},{id:-123988,predicate:"privacyValueAllowContacts",params:[],type:"PrivacyRule"},{id:1698855810,predicate:"privacyValueAllowAll",params:[],type:"PrivacyRule"},{id:-1198497870,predicate:"privacyValueAllowUsers",params:[{name:"users",type:"Vector<long>"}],type:"PrivacyRule"},{id:-125240806,predicate:"privacyValueDisallowContacts",params:[],type:"PrivacyRule"},{id:-1955338397,predicate:"privacyValueDisallowAll",params:[],type:"PrivacyRule"},{id:-463335103,predicate:"privacyValueDisallowUsers",params:[{name:"users",type:"Vector<long>"}],type:"PrivacyRule"},{id:1796427406,predicate:"privacyValueAllowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"PrivacyRule"},{id:1103656293,predicate:"privacyValueDisallowChatParticipants",params:[{name:"chats",type:"Vector<long>"}],type:"PrivacyRule"},{id:1352683077,predicate:"account.privacyRules",params:[{name:"rules",type:"Vector<PrivacyRule>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"account.PrivacyRules"},{id:-1194283041,predicate:"accountDaysTTL",params:[{name:"days",type:"int"}],type:"AccountDaysTTL"},{id:1815593308,predicate:"documentAttributeImageSize",params:[{name:"w",type:"int"},{name:"h",type:"int"}],type:"DocumentAttribute"},{id:297109817,predicate:"documentAttributeAnimated",params:[],type:"DocumentAttribute"},{id:1662637586,predicate:"documentAttributeSticker",params:[{name:"flags",type:"#"},{name:"mask",type:"flags.1?true"},{name:"alt",type:"string"},{name:"stickerset",type:"InputStickerSet"},{name:"mask_coords",type:"flags.0?MaskCoords"}],type:"DocumentAttribute"},{id:250621158,predicate:"documentAttributeVideo",params:[{name:"flags",type:"#"},{name:"round_message",type:"flags.0?true"},{name:"supports_streaming",type:"flags.1?true"},{name:"duration",type:"int"},{name:"w",type:"int"},{name:"h",type:"int"}],type:"DocumentAttribute"},{id:-1739392570,predicate:"documentAttributeAudio",params:[{name:"flags",type:"#"},{name:"voice",type:"flags.10?true"},{name:"duration",type:"int"},{name:"title",type:"flags.0?string"},{name:"performer",type:"flags.1?string"},{name:"waveform",type:"flags.2?bytes"}],type:"DocumentAttribute"},{id:358154344,predicate:"documentAttributeFilename",params:[{name:"file_name",type:"string"}],type:"DocumentAttribute"},{id:-1744710921,predicate:"documentAttributeHasStickers",params:[],type:"DocumentAttribute"},{id:-244016606,predicate:"messages.stickersNotModified",params:[],type:"messages.Stickers"},{id:816245886,predicate:"messages.stickers",params:[{name:"hash",type:"long"},{name:"stickers",type:"Vector<Document>"}],type:"messages.Stickers"},{id:313694676,predicate:"stickerPack",params:[{name:"emoticon",type:"string"},{name:"documents",type:"Vector<long>"}],type:"StickerPack"},{id:-395967805,predicate:"messages.allStickersNotModified",params:[],type:"messages.AllStickers"},{id:-843329861,predicate:"messages.allStickers",params:[{name:"hash",type:"long"},{name:"sets",type:"Vector<StickerSet>"}],type:"messages.AllStickers"},{id:-2066640507,predicate:"messages.affectedMessages",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"}],type:"messages.AffectedMessages"},{id:-350980120,predicate:"webPageEmpty",params:[{name:"id",type:"long"}],type:"WebPage"},{id:-981018084,predicate:"webPagePending",params:[{name:"id",type:"long"},{name:"date",type:"int"}],type:"WebPage"},{id:-392411726,predicate:"webPage",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"url",type:"string"},{name:"display_url",type:"string"},{name:"hash",type:"int"},{name:"type",type:"flags.0?string"},{name:"site_name",type:"flags.1?string"},{name:"title",type:"flags.2?string"},{name:"description",type:"flags.3?string"},{name:"photo",type:"flags.4?Photo"},{name:"embed_url",type:"flags.5?string"},{name:"embed_type",type:"flags.5?string"},{name:"embed_width",type:"flags.6?int"},{name:"embed_height",type:"flags.6?int"},{name:"duration",type:"flags.7?int"},{name:"author",type:"flags.8?string"},{name:"document",type:"flags.9?Document"},{name:"cached_page",type:"flags.10?Page"},{name:"attributes",type:"flags.12?Vector<WebPageAttribute>"}],type:"WebPage"},{id:1930545681,predicate:"webPageNotModified",params:[{name:"flags",type:"#"},{name:"cached_page_views",type:"flags.0?int"}],type:"WebPage"},{id:-1392388579,predicate:"authorization",params:[{name:"flags",type:"#"},{name:"current",type:"flags.0?true"},{name:"official_app",type:"flags.1?true"},{name:"password_pending",type:"flags.2?true"},{name:"encrypted_requests_disabled",type:"flags.3?true"},{name:"call_requests_disabled",type:"flags.4?true"},{name:"hash",type:"long"},{name:"device_model",type:"string"},{name:"platform",type:"string"},{name:"system_version",type:"string"},{name:"api_id",type:"int"},{name:"app_name",type:"string"},{name:"app_version",type:"string"},{name:"date_created",type:"int"},{name:"date_active",type:"int"},{name:"ip",type:"string"},{name:"country",type:"string"},{name:"region",type:"string"}],type:"Authorization"},{id:1275039392,predicate:"account.authorizations",params:[{name:"authorization_ttl_days",type:"int"},{name:"authorizations",type:"Vector<Authorization>"}],type:"account.Authorizations"},{id:408623183,predicate:"account.password",params:[{name:"flags",type:"#"},{name:"has_recovery",type:"flags.0?true"},{name:"has_secure_values",type:"flags.1?true"},{name:"has_password",type:"flags.2?true"},{name:"current_algo",type:"flags.2?PasswordKdfAlgo"},{name:"srp_B",type:"flags.2?bytes"},{name:"srp_id",type:"flags.2?long"},{name:"hint",type:"flags.3?string"},{name:"email_unconfirmed_pattern",type:"flags.4?string"},{name:"new_algo",type:"PasswordKdfAlgo"},{name:"new_secure_algo",type:"SecurePasswordKdfAlgo"},{name:"secure_random",type:"bytes"},{name:"pending_reset_date",type:"flags.5?int"}],type:"account.Password"},{id:-1705233435,predicate:"account.passwordSettings",params:[{name:"flags",type:"#"},{name:"email",type:"flags.0?string"},{name:"secure_settings",type:"flags.1?SecureSecretSettings"}],type:"account.PasswordSettings"},{id:-1036572727,predicate:"account.passwordInputSettings",params:[{name:"flags",type:"#"},{name:"new_algo",type:"flags.0?PasswordKdfAlgo"},{name:"new_password_hash",type:"flags.0?bytes"},{name:"hint",type:"flags.0?string"},{name:"email",type:"flags.1?string"},{name:"new_secure_settings",type:"flags.2?SecureSecretSettings"}],type:"account.PasswordInputSettings"},{id:326715557,predicate:"auth.passwordRecovery",params:[{name:"email_pattern",type:"string"}],type:"auth.PasswordRecovery"},{id:-1551583367,predicate:"receivedNotifyMessage",params:[{name:"id",type:"int"},{name:"flags",type:"int"}],type:"ReceivedNotifyMessage"},{id:179611673,predicate:"chatInviteExported",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.0?true"},{name:"permanent",type:"flags.5?true"},{name:"request_needed",type:"flags.6?true"},{name:"link",type:"string"},{name:"admin_id",type:"long"},{name:"date",type:"int"},{name:"start_date",type:"flags.4?int"},{name:"expire_date",type:"flags.1?int"},{name:"usage_limit",type:"flags.2?int"},{name:"usage",type:"flags.3?int"},{name:"requested",type:"flags.7?int"},{name:"title",type:"flags.8?string"}],type:"ExportedChatInvite"},{id:1516793212,predicate:"chatInviteAlready",params:[{name:"chat",type:"Chat"}],type:"ChatInvite"},{id:806110401,predicate:"chatInvite",params:[{name:"flags",type:"#"},{name:"channel",type:"flags.0?true"},{name:"broadcast",type:"flags.1?true"},{name:"public",type:"flags.2?true"},{name:"megagroup",type:"flags.3?true"},{name:"request_needed",type:"flags.6?true"},{name:"title",type:"string"},{name:"about",type:"flags.5?string"},{name:"photo",type:"Photo"},{name:"participants_count",type:"int"},{name:"participants",type:"flags.4?Vector<User>"}],type:"ChatInvite"},{id:1634294960,predicate:"chatInvitePeek",params:[{name:"chat",type:"Chat"},{name:"expires",type:"int"}],type:"ChatInvite"},{id:-4838507,predicate:"inputStickerSetEmpty",params:[],type:"InputStickerSet"},{id:-1645763991,predicate:"inputStickerSetID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputStickerSet"},{id:-2044933984,predicate:"inputStickerSetShortName",params:[{name:"short_name",type:"string"}],type:"InputStickerSet"},{id:42402760,predicate:"inputStickerSetAnimatedEmoji",params:[],type:"InputStickerSet"},{id:-427863538,predicate:"inputStickerSetDice",params:[{name:"emoticon",type:"string"}],type:"InputStickerSet"},{id:215889721,predicate:"inputStickerSetAnimatedEmojiAnimations",params:[],type:"InputStickerSet"},{id:-673242758,predicate:"stickerSet",params:[{name:"flags",type:"#"},{name:"archived",type:"flags.1?true"},{name:"official",type:"flags.2?true"},{name:"masks",type:"flags.3?true"},{name:"animated",type:"flags.5?true"},{name:"installed_date",type:"flags.0?int"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"title",type:"string"},{name:"short_name",type:"string"},{name:"thumbs",type:"flags.4?Vector<PhotoSize>"},{name:"thumb_dc_id",type:"flags.4?int"},{name:"thumb_version",type:"flags.4?int"},{name:"count",type:"int"},{name:"hash",type:"int"}],type:"StickerSet"},{id:-1240849242,predicate:"messages.stickerSet",params:[{name:"set",type:"StickerSet"},{name:"packs",type:"Vector<StickerPack>"},{name:"documents",type:"Vector<Document>"}],type:"messages.StickerSet"},{id:-738646805,predicate:"messages.stickerSetNotModified",params:[],type:"messages.StickerSet"},{id:-1032140601,predicate:"botCommand",params:[{name:"command",type:"string"},{name:"description",type:"string"}],type:"BotCommand"},{id:460632885,predicate:"botInfo",params:[{name:"user_id",type:"long"},{name:"description",type:"string"},{name:"commands",type:"Vector<BotCommand>"}],type:"BotInfo"},{id:-1560655744,predicate:"keyboardButton",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:629866245,predicate:"keyboardButtonUrl",params:[{name:"text",type:"string"},{name:"url",type:"string"}],type:"KeyboardButton"},{id:901503851,predicate:"keyboardButtonCallback",params:[{name:"flags",type:"#"},{name:"requires_password",type:"flags.0?true"},{name:"text",type:"string"},{name:"data",type:"bytes"}],type:"KeyboardButton"},{id:-1318425559,predicate:"keyboardButtonRequestPhone",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-59151553,predicate:"keyboardButtonRequestGeoLocation",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:90744648,predicate:"keyboardButtonSwitchInline",params:[{name:"flags",type:"#"},{name:"same_peer",type:"flags.0?true"},{name:"text",type:"string"},{name:"query",type:"string"}],type:"KeyboardButton"},{id:1358175439,predicate:"keyboardButtonGame",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:-1344716869,predicate:"keyboardButtonBuy",params:[{name:"text",type:"string"}],type:"KeyboardButton"},{id:280464681,predicate:"keyboardButtonUrlAuth",params:[{name:"flags",type:"#"},{name:"text",type:"string"},{name:"fwd_text",type:"flags.0?string"},{name:"url",type:"string"},{name:"button_id",type:"int"}],type:"KeyboardButton"},{id:-802258988,predicate:"inputKeyboardButtonUrlAuth",params:[{name:"flags",type:"#"},{name:"request_write_access",type:"flags.0?true"},{name:"text",type:"string"},{name:"fwd_text",type:"flags.1?string"},{name:"url",type:"string"},{name:"bot",type:"InputUser"}],type:"KeyboardButton"},{id:-1144565411,predicate:"keyboardButtonRequestPoll",params:[{name:"flags",type:"#"},{name:"quiz",type:"flags.0?Bool"},{name:"text",type:"string"}],type:"KeyboardButton"},{id:-376962181,predicate:"inputKeyboardButtonUserProfile",params:[{name:"text",type:"string"},{name:"user_id",type:"InputUser"}],type:"KeyboardButton"},{id:814112961,predicate:"keyboardButtonUserProfile",params:[{name:"text",type:"string"},{name:"user_id",type:"long"}],type:"KeyboardButton"},{id:2002815875,predicate:"keyboardButtonRow",params:[{name:"buttons",type:"Vector<KeyboardButton>"}],type:"KeyboardButtonRow"},{id:-1606526075,predicate:"replyKeyboardHide",params:[{name:"flags",type:"#"},{name:"selective",type:"flags.2?true"}],type:"ReplyMarkup"},{id:-2035021048,predicate:"replyKeyboardForceReply",params:[{name:"flags",type:"#"},{name:"single_use",type:"flags.1?true"},{name:"selective",type:"flags.2?true"},{name:"placeholder",type:"flags.3?string"}],type:"ReplyMarkup"},{id:-2049074735,predicate:"replyKeyboardMarkup",params:[{name:"flags",type:"#"},{name:"resize",type:"flags.0?true"},{name:"single_use",type:"flags.1?true"},{name:"selective",type:"flags.2?true"},{name:"rows",type:"Vector<KeyboardButtonRow>"},{name:"placeholder",type:"flags.3?string"}],type:"ReplyMarkup"},{id:1218642516,predicate:"replyInlineMarkup",params:[{name:"rows",type:"Vector<KeyboardButtonRow>"}],type:"ReplyMarkup"},{id:-1148011883,predicate:"messageEntityUnknown",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-100378723,predicate:"messageEntityMention",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1868782349,predicate:"messageEntityHashtag",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1827637959,predicate:"messageEntityBotCommand",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1859134776,predicate:"messageEntityUrl",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1692693954,predicate:"messageEntityEmail",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1117713463,predicate:"messageEntityBold",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-2106619040,predicate:"messageEntityItalic",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:681706865,predicate:"messageEntityCode",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1938967520,predicate:"messageEntityPre",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"language",type:"string"}],type:"MessageEntity"},{id:1990644519,predicate:"messageEntityTextUrl",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"url",type:"string"}],type:"MessageEntity"},{id:-595914432,predicate:"messageEntityMentionName",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"user_id",type:"long"}],type:"MessageEntity"},{id:546203849,predicate:"inputMessageEntityMentionName",params:[{name:"offset",type:"int"},{name:"length",type:"int"},{name:"user_id",type:"InputUser"}],type:"MessageEntity"},{id:-1687559349,predicate:"messageEntityPhone",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1280209983,predicate:"messageEntityCashtag",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1672577397,predicate:"messageEntityUnderline",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-1090087980,predicate:"messageEntityStrike",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:34469328,predicate:"messageEntityBlockquote",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:1981704948,predicate:"messageEntityBankCard",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:852137487,predicate:"messageEntitySpoiler",params:[{name:"offset",type:"int"},{name:"length",type:"int"}],type:"MessageEntity"},{id:-292807034,predicate:"inputChannelEmpty",params:[],type:"InputChannel"},{id:-212145112,predicate:"inputChannel",params:[{name:"channel_id",type:"long"},{name:"access_hash",type:"long"}],type:"InputChannel"},{id:1536380829,predicate:"inputChannelFromMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"channel_id",type:"long"}],type:"InputChannel"},{id:2131196633,predicate:"contacts.resolvedPeer",params:[{name:"peer",type:"Peer"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.ResolvedPeer"},{id:182649427,predicate:"messageRange",params:[{name:"min_id",type:"int"},{name:"max_id",type:"int"}],type:"MessageRange"},{id:1041346555,predicate:"updates.channelDifferenceEmpty",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"pts",type:"int"},{name:"timeout",type:"flags.1?int"}],type:"updates.ChannelDifference"},{id:-1531132162,predicate:"updates.channelDifferenceTooLong",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"timeout",type:"flags.1?int"},{name:"dialog",type:"Dialog"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"updates.ChannelDifference"},{id:543450958,predicate:"updates.channelDifference",params:[{name:"flags",type:"#"},{name:"final",type:"flags.0?true"},{name:"pts",type:"int"},{name:"timeout",type:"flags.1?int"},{name:"new_messages",type:"Vector<Message>"},{name:"other_updates",type:"Vector<Update>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"updates.ChannelDifference"},{id:-1798033689,predicate:"channelMessagesFilterEmpty",params:[],type:"ChannelMessagesFilter"},{id:-847783593,predicate:"channelMessagesFilter",params:[{name:"flags",type:"#"},{name:"exclude_new_messages",type:"flags.1?true"},{name:"ranges",type:"Vector<MessageRange>"}],type:"ChannelMessagesFilter"},{id:-1072953408,predicate:"channelParticipant",params:[{name:"user_id",type:"long"},{name:"date",type:"int"}],type:"ChannelParticipant"},{id:900251559,predicate:"channelParticipantSelf",params:[{name:"flags",type:"#"},{name:"via_request",type:"flags.0?true"},{name:"user_id",type:"long"},{name:"inviter_id",type:"long"},{name:"date",type:"int"}],type:"ChannelParticipant"},{id:803602899,predicate:"channelParticipantCreator",params:[{name:"flags",type:"#"},{name:"user_id",type:"long"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"flags.0?string"}],type:"ChannelParticipant"},{id:885242707,predicate:"channelParticipantAdmin",params:[{name:"flags",type:"#"},{name:"can_edit",type:"flags.0?true"},{name:"self",type:"flags.1?true"},{name:"user_id",type:"long"},{name:"inviter_id",type:"flags.1?long"},{name:"promoted_by",type:"long"},{name:"date",type:"int"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"flags.2?string"}],type:"ChannelParticipant"},{id:1844969806,predicate:"channelParticipantBanned",params:[{name:"flags",type:"#"},{name:"left",type:"flags.0?true"},{name:"peer",type:"Peer"},{name:"kicked_by",type:"long"},{name:"date",type:"int"},{name:"banned_rights",type:"ChatBannedRights"}],type:"ChannelParticipant"},{id:453242886,predicate:"channelParticipantLeft",params:[{name:"peer",type:"Peer"}],type:"ChannelParticipant"},{id:-566281095,predicate:"channelParticipantsRecent",params:[],type:"ChannelParticipantsFilter"},{id:-1268741783,predicate:"channelParticipantsAdmins",params:[],type:"ChannelParticipantsFilter"},{id:-1548400251,predicate:"channelParticipantsKicked",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-1328445861,predicate:"channelParticipantsBots",params:[],type:"ChannelParticipantsFilter"},{id:338142689,predicate:"channelParticipantsBanned",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:106343499,predicate:"channelParticipantsSearch",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-1150621555,predicate:"channelParticipantsContacts",params:[{name:"q",type:"string"}],type:"ChannelParticipantsFilter"},{id:-531931925,predicate:"channelParticipantsMentions",params:[{name:"flags",type:"#"},{name:"q",type:"flags.0?string"},{name:"top_msg_id",type:"flags.1?int"}],type:"ChannelParticipantsFilter"},{id:-1699676497,predicate:"channels.channelParticipants",params:[{name:"count",type:"int"},{name:"participants",type:"Vector<ChannelParticipant>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.ChannelParticipants"},{id:-266911767,predicate:"channels.channelParticipantsNotModified",params:[],type:"channels.ChannelParticipants"},{id:-541588713,predicate:"channels.channelParticipant",params:[{name:"participant",type:"ChannelParticipant"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.ChannelParticipant"},{id:2013922064,predicate:"help.termsOfService",params:[{name:"flags",type:"#"},{name:"popup",type:"flags.0?true"},{name:"id",type:"DataJSON"},{name:"text",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"min_age_confirm",type:"flags.1?int"}],type:"help.TermsOfService"},{id:-402498398,predicate:"messages.savedGifsNotModified",params:[],type:"messages.SavedGifs"},{id:-2069878259,predicate:"messages.savedGifs",params:[{name:"hash",type:"long"},{name:"gifs",type:"Vector<Document>"}],type:"messages.SavedGifs"},{id:864077702,predicate:"inputBotInlineMessageMediaAuto",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1036876423,predicate:"inputBotInlineMessageText",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.0?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-1768777083,predicate:"inputBotInlineMessageMediaGeo",params:[{name:"flags",type:"#"},{name:"geo_point",type:"InputGeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1098628881,predicate:"inputBotInlineMessageMediaVenue",params:[{name:"flags",type:"#"},{name:"geo_point",type:"InputGeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-1494368259,predicate:"inputBotInlineMessageMediaContact",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:1262639204,predicate:"inputBotInlineMessageGame",params:[{name:"flags",type:"#"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-672693723,predicate:"inputBotInlineMessageMediaInvoice",params:[{name:"flags",type:"#"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?InputWebDocument"},{name:"invoice",type:"Invoice"},{name:"payload",type:"bytes"},{name:"provider",type:"string"},{name:"provider_data",type:"DataJSON"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"InputBotInlineMessage"},{id:-2000710887,predicate:"inputBotInlineResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"url",type:"flags.3?string"},{name:"thumb",type:"flags.4?InputWebDocument"},{name:"content",type:"flags.5?InputWebDocument"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:-1462213465,predicate:"inputBotInlineResultPhoto",params:[{name:"id",type:"string"},{name:"type",type:"string"},{name:"photo",type:"InputPhoto"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:-459324,predicate:"inputBotInlineResultDocument",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"document",type:"InputDocument"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:1336154098,predicate:"inputBotInlineResultGame",params:[{name:"id",type:"string"},{name:"short_name",type:"string"},{name:"send_message",type:"InputBotInlineMessage"}],type:"InputBotInlineResult"},{id:1984755728,predicate:"botInlineMessageMediaAuto",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1937807902,predicate:"botInlineMessageText",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.0?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:85477117,predicate:"botInlineMessageMediaGeo",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"heading",type:"flags.0?int"},{name:"period",type:"flags.1?int"},{name:"proximity_notification_radius",type:"flags.3?int"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:-1970903652,predicate:"botInlineMessageMediaVenue",params:[{name:"flags",type:"#"},{name:"geo",type:"GeoPoint"},{name:"title",type:"string"},{name:"address",type:"string"},{name:"provider",type:"string"},{name:"venue_id",type:"string"},{name:"venue_type",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:416402882,predicate:"botInlineMessageMediaContact",params:[{name:"flags",type:"#"},{name:"phone_number",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"vcard",type:"string"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:894081801,predicate:"botInlineMessageMediaInvoice",params:[{name:"flags",type:"#"},{name:"shipping_address_requested",type:"flags.1?true"},{name:"test",type:"flags.3?true"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.0?WebDocument"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"}],type:"BotInlineMessage"},{id:295067450,predicate:"botInlineResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"title",type:"flags.1?string"},{name:"description",type:"flags.2?string"},{name:"url",type:"flags.3?string"},{name:"thumb",type:"flags.4?WebDocument"},{name:"content",type:"flags.5?WebDocument"},{name:"send_message",type:"BotInlineMessage"}],type:"BotInlineResult"},{id:400266251,predicate:"botInlineMediaResult",params:[{name:"flags",type:"#"},{name:"id",type:"string"},{name:"type",type:"string"},{name:"photo",type:"flags.0?Photo"},{name:"document",type:"flags.1?Document"},{name:"title",type:"flags.2?string"},{name:"description",type:"flags.3?string"},{name:"send_message",type:"BotInlineMessage"}],type:"BotInlineResult"},{id:-1803769784,predicate:"messages.botResults",params:[{name:"flags",type:"#"},{name:"gallery",type:"flags.0?true"},{name:"query_id",type:"long"},{name:"next_offset",type:"flags.1?string"},{name:"switch_pm",type:"flags.2?InlineBotSwitchPM"},{name:"results",type:"Vector<BotInlineResult>"},{name:"cache_time",type:"int"},{name:"users",type:"Vector<User>"}],type:"messages.BotResults"},{id:1571494644,predicate:"exportedMessageLink",params:[{name:"link",type:"string"},{name:"html",type:"string"}],type:"ExportedMessageLink"},{id:1601666510,predicate:"messageFwdHeader",params:[{name:"flags",type:"#"},{name:"imported",type:"flags.7?true"},{name:"from_id",type:"flags.0?Peer"},{name:"from_name",type:"flags.5?string"},{name:"date",type:"int"},{name:"channel_post",type:"flags.2?int"},{name:"post_author",type:"flags.3?string"},{name:"saved_from_peer",type:"flags.4?Peer"},{name:"saved_from_msg_id",type:"flags.4?int"},{name:"psa_type",type:"flags.6?string"}],type:"MessageFwdHeader"},{id:1923290508,predicate:"auth.codeTypeSms",params:[],type:"auth.CodeType"},{id:1948046307,predicate:"auth.codeTypeCall",params:[],type:"auth.CodeType"},{id:577556219,predicate:"auth.codeTypeFlashCall",params:[],type:"auth.CodeType"},{id:-702884114,predicate:"auth.codeTypeMissedCall",params:[],type:"auth.CodeType"},{id:1035688326,predicate:"auth.sentCodeTypeApp",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1073693790,predicate:"auth.sentCodeTypeSms",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:1398007207,predicate:"auth.sentCodeTypeCall",params:[{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:-1425815847,predicate:"auth.sentCodeTypeFlashCall",params:[{name:"pattern",type:"string"}],type:"auth.SentCodeType"},{id:-2113903484,predicate:"auth.sentCodeTypeMissedCall",params:[{name:"prefix",type:"string"},{name:"length",type:"int"}],type:"auth.SentCodeType"},{id:911761060,predicate:"messages.botCallbackAnswer",params:[{name:"flags",type:"#"},{name:"alert",type:"flags.1?true"},{name:"has_url",type:"flags.3?true"},{name:"native_ui",type:"flags.4?true"},{name:"message",type:"flags.0?string"},{name:"url",type:"flags.2?string"},{name:"cache_time",type:"int"}],type:"messages.BotCallbackAnswer"},{id:649453030,predicate:"messages.messageEditData",params:[{name:"flags",type:"#"},{name:"caption",type:"flags.0?true"}],type:"messages.MessageEditData"},{id:-1995686519,predicate:"inputBotInlineMessageID",params:[{name:"dc_id",type:"int"},{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputBotInlineMessageID"},{id:-1227287081,predicate:"inputBotInlineMessageID64",params:[{name:"dc_id",type:"int"},{name:"owner_id",type:"long"},{name:"id",type:"int"},{name:"access_hash",type:"long"}],type:"InputBotInlineMessageID"},{id:1008755359,predicate:"inlineBotSwitchPM",params:[{name:"text",type:"string"},{name:"start_param",type:"string"}],type:"InlineBotSwitchPM"},{id:863093588,predicate:"messages.peerDialogs",params:[{name:"dialogs",type:"Vector<Dialog>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"state",type:"updates.State"}],type:"messages.PeerDialogs"},{id:-305282981,predicate:"topPeer",params:[{name:"peer",type:"Peer"},{name:"rating",type:"double"}],type:"TopPeer"},{id:-1419371685,predicate:"topPeerCategoryBotsPM",params:[],type:"TopPeerCategory"},{id:344356834,predicate:"topPeerCategoryBotsInline",params:[],type:"TopPeerCategory"},{id:104314861,predicate:"topPeerCategoryCorrespondents",params:[],type:"TopPeerCategory"},{id:-1122524854,predicate:"topPeerCategoryGroups",params:[],type:"TopPeerCategory"},{id:371037736,predicate:"topPeerCategoryChannels",params:[],type:"TopPeerCategory"},{id:511092620,predicate:"topPeerCategoryPhoneCalls",params:[],type:"TopPeerCategory"},{id:-1472172887,predicate:"topPeerCategoryForwardUsers",params:[],type:"TopPeerCategory"},{id:-68239120,predicate:"topPeerCategoryForwardChats",params:[],type:"TopPeerCategory"},{id:-75283823,predicate:"topPeerCategoryPeers",params:[{name:"category",type:"TopPeerCategory"},{name:"count",type:"int"},{name:"peers",type:"Vector<TopPeer>"}],type:"TopPeerCategoryPeers"},{id:-567906571,predicate:"contacts.topPeersNotModified",params:[],type:"contacts.TopPeers"},{id:1891070632,predicate:"contacts.topPeers",params:[{name:"categories",type:"Vector<TopPeerCategoryPeers>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"contacts.TopPeers"},{id:-1255369827,predicate:"contacts.topPeersDisabled",params:[],type:"contacts.TopPeers"},{id:453805082,predicate:"draftMessageEmpty",params:[{name:"flags",type:"#"},{name:"date",type:"flags.0?int"}],type:"DraftMessage"},{id:-40996577,predicate:"draftMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"date",type:"int"}],type:"DraftMessage"},{id:-958657434,predicate:"messages.featuredStickersNotModified",params:[{name:"count",type:"int"}],type:"messages.FeaturedStickers"},{id:-2067782896,predicate:"messages.featuredStickers",params:[{name:"hash",type:"long"},{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"},{name:"unread",type:"Vector<long>"}],type:"messages.FeaturedStickers"},{id:186120336,predicate:"messages.recentStickersNotModified",params:[],type:"messages.RecentStickers"},{id:-1999405994,predicate:"messages.recentStickers",params:[{name:"hash",type:"long"},{name:"packs",type:"Vector<StickerPack>"},{name:"stickers",type:"Vector<Document>"},{name:"dates",type:"Vector<int>"}],type:"messages.RecentStickers"},{id:1338747336,predicate:"messages.archivedStickers",params:[{name:"count",type:"int"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.ArchivedStickers"},{id:946083368,predicate:"messages.stickerSetInstallResultSuccess",params:[],type:"messages.StickerSetInstallResult"},{id:904138920,predicate:"messages.stickerSetInstallResultArchive",params:[{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.StickerSetInstallResult"},{id:1678812626,predicate:"stickerSetCovered",params:[{name:"set",type:"StickerSet"},{name:"cover",type:"Document"}],type:"StickerSetCovered"},{id:872932635,predicate:"stickerSetMultiCovered",params:[{name:"set",type:"StickerSet"},{name:"covers",type:"Vector<Document>"}],type:"StickerSetCovered"},{id:-1361650766,predicate:"maskCoords",params:[{name:"n",type:"int"},{name:"x",type:"double"},{name:"y",type:"double"},{name:"zoom",type:"double"}],type:"MaskCoords"},{id:1251549527,predicate:"inputStickeredMediaPhoto",params:[{name:"id",type:"InputPhoto"}],type:"InputStickeredMedia"},{id:70813275,predicate:"inputStickeredMediaDocument",params:[{name:"id",type:"InputDocument"}],type:"InputStickeredMedia"},{id:-1107729093,predicate:"game",params:[{name:"flags",type:"#"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"short_name",type:"string"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"Photo"},{name:"document",type:"flags.0?Document"}],type:"Game"},{id:53231223,predicate:"inputGameID",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputGame"},{id:-1020139510,predicate:"inputGameShortName",params:[{name:"bot_id",type:"InputUser"},{name:"short_name",type:"string"}],type:"InputGame"},{id:1940093419,predicate:"highScore",params:[{name:"pos",type:"int"},{name:"user_id",type:"long"},{name:"score",type:"int"}],type:"HighScore"},{id:-1707344487,predicate:"messages.highScores",params:[{name:"scores",type:"Vector<HighScore>"},{name:"users",type:"Vector<User>"}],type:"messages.HighScores"},{id:-599948721,predicate:"textEmpty",params:[],type:"RichText"},{id:1950782688,predicate:"textPlain",params:[{name:"text",type:"string"}],type:"RichText"},{id:1730456516,predicate:"textBold",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-653089380,predicate:"textItalic",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-1054465340,predicate:"textUnderline",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-1678197867,predicate:"textStrike",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:1816074681,predicate:"textFixed",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:1009288385,predicate:"textUrl",params:[{name:"text",type:"RichText"},{name:"url",type:"string"},{name:"webpage_id",type:"long"}],type:"RichText"},{id:-564523562,predicate:"textEmail",params:[{name:"text",type:"RichText"},{name:"email",type:"string"}],type:"RichText"},{id:2120376535,predicate:"textConcat",params:[{name:"texts",type:"Vector<RichText>"}],type:"RichText"},{id:-311786236,predicate:"textSubscript",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:-939827711,predicate:"textSuperscript",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:55281185,predicate:"textMarked",params:[{name:"text",type:"RichText"}],type:"RichText"},{id:483104362,predicate:"textPhone",params:[{name:"text",type:"RichText"},{name:"phone",type:"string"}],type:"RichText"},{id:136105807,predicate:"textImage",params:[{name:"document_id",type:"long"},{name:"w",type:"int"},{name:"h",type:"int"}],type:"RichText"},{id:894777186,predicate:"textAnchor",params:[{name:"text",type:"RichText"},{name:"name",type:"string"}],type:"RichText"},{id:324435594,predicate:"pageBlockUnsupported",params:[],type:"PageBlock"},{id:1890305021,predicate:"pageBlockTitle",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1879401953,predicate:"pageBlockSubtitle",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1162877472,predicate:"pageBlockAuthorDate",params:[{name:"author",type:"RichText"},{name:"published_date",type:"int"}],type:"PageBlock"},{id:-1076861716,predicate:"pageBlockHeader",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-248793375,predicate:"pageBlockSubheader",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:1182402406,predicate:"pageBlockParagraph",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1066346178,predicate:"pageBlockPreformatted",params:[{name:"text",type:"RichText"},{name:"language",type:"string"}],type:"PageBlock"},{id:1216809369,predicate:"pageBlockFooter",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-618614392,predicate:"pageBlockDivider",params:[],type:"PageBlock"},{id:-837994576,predicate:"pageBlockAnchor",params:[{name:"name",type:"string"}],type:"PageBlock"},{id:-454524911,predicate:"pageBlockList",params:[{name:"items",type:"Vector<PageListItem>"}],type:"PageBlock"},{id:641563686,predicate:"pageBlockBlockquote",params:[{name:"text",type:"RichText"},{name:"caption",type:"RichText"}],type:"PageBlock"},{id:1329878739,predicate:"pageBlockPullquote",params:[{name:"text",type:"RichText"},{name:"caption",type:"RichText"}],type:"PageBlock"},{id:391759200,predicate:"pageBlockPhoto",params:[{name:"flags",type:"#"},{name:"photo_id",type:"long"},{name:"caption",type:"PageCaption"},{name:"url",type:"flags.0?string"},{name:"webpage_id",type:"flags.0?long"}],type:"PageBlock"},{id:2089805750,predicate:"pageBlockVideo",params:[{name:"flags",type:"#"},{name:"autoplay",type:"flags.0?true"},{name:"loop",type:"flags.1?true"},{name:"video_id",type:"long"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:972174080,predicate:"pageBlockCover",params:[{name:"cover",type:"PageBlock"}],type:"PageBlock"},{id:-1468953147,predicate:"pageBlockEmbed",params:[{name:"flags",type:"#"},{name:"full_width",type:"flags.0?true"},{name:"allow_scrolling",type:"flags.3?true"},{name:"url",type:"flags.1?string"},{name:"html",type:"flags.2?string"},{name:"poster_photo_id",type:"flags.4?long"},{name:"w",type:"flags.5?int"},{name:"h",type:"flags.5?int"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-229005301,predicate:"pageBlockEmbedPost",params:[{name:"url",type:"string"},{name:"webpage_id",type:"long"},{name:"author_photo_id",type:"long"},{name:"author",type:"string"},{name:"date",type:"int"},{name:"blocks",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:1705048653,predicate:"pageBlockCollage",params:[{name:"items",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:52401552,predicate:"pageBlockSlideshow",params:[{name:"items",type:"Vector<PageBlock>"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-283684427,predicate:"pageBlockChannel",params:[{name:"channel",type:"Chat"}],type:"PageBlock"},{id:-2143067670,predicate:"pageBlockAudio",params:[{name:"audio_id",type:"long"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:504660880,predicate:"pageBlockKicker",params:[{name:"text",type:"RichText"}],type:"PageBlock"},{id:-1085412734,predicate:"pageBlockTable",params:[{name:"flags",type:"#"},{name:"bordered",type:"flags.0?true"},{name:"striped",type:"flags.1?true"},{name:"title",type:"RichText"},{name:"rows",type:"Vector<PageTableRow>"}],type:"PageBlock"},{id:-1702174239,predicate:"pageBlockOrderedList",params:[{name:"items",type:"Vector<PageListOrderedItem>"}],type:"PageBlock"},{id:1987480557,predicate:"pageBlockDetails",params:[{name:"flags",type:"#"},{name:"open",type:"flags.0?true"},{name:"blocks",type:"Vector<PageBlock>"},{name:"title",type:"RichText"}],type:"PageBlock"},{id:370236054,predicate:"pageBlockRelatedArticles",params:[{name:"title",type:"RichText"},{name:"articles",type:"Vector<PageRelatedArticle>"}],type:"PageBlock"},{id:-1538310410,predicate:"pageBlockMap",params:[{name:"geo",type:"GeoPoint"},{name:"zoom",type:"int"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"caption",type:"PageCaption"}],type:"PageBlock"},{id:-2048646399,predicate:"phoneCallDiscardReasonMissed",params:[],type:"PhoneCallDiscardReason"},{id:-527056480,predicate:"phoneCallDiscardReasonDisconnect",params:[],type:"PhoneCallDiscardReason"},{id:1471006352,predicate:"phoneCallDiscardReasonHangup",params:[],type:"PhoneCallDiscardReason"},{id:-84416311,predicate:"phoneCallDiscardReasonBusy",params:[],type:"PhoneCallDiscardReason"},{id:2104790276,predicate:"dataJSON",params:[{name:"data",type:"string"}],type:"DataJSON"},{id:-886477832,predicate:"labeledPrice",params:[{name:"label",type:"string"},{name:"amount",type:"long"}],type:"LabeledPrice"},{id:215516896,predicate:"invoice",params:[{name:"flags",type:"#"},{name:"test",type:"flags.0?true"},{name:"name_requested",type:"flags.1?true"},{name:"phone_requested",type:"flags.2?true"},{name:"email_requested",type:"flags.3?true"},{name:"shipping_address_requested",type:"flags.4?true"},{name:"flexible",type:"flags.5?true"},{name:"phone_to_provider",type:"flags.6?true"},{name:"email_to_provider",type:"flags.7?true"},{name:"currency",type:"string"},{name:"prices",type:"Vector<LabeledPrice>"},{name:"max_tip_amount",type:"flags.8?long"},{name:"suggested_tip_amounts",type:"flags.8?Vector<long>"}],type:"Invoice"},{id:-368917890,predicate:"paymentCharge",params:[{name:"id",type:"string"},{name:"provider_charge_id",type:"string"}],type:"PaymentCharge"},{id:512535275,predicate:"postAddress",params:[{name:"street_line1",type:"string"},{name:"street_line2",type:"string"},{name:"city",type:"string"},{name:"state",type:"string"},{name:"country_iso2",type:"string"},{name:"post_code",type:"string"}],type:"PostAddress"},{id:-1868808300,predicate:"paymentRequestedInfo",params:[{name:"flags",type:"#"},{name:"name",type:"flags.0?string"},{name:"phone",type:"flags.1?string"},{name:"email",type:"flags.2?string"},{name:"shipping_address",type:"flags.3?PostAddress"}],type:"PaymentRequestedInfo"},{id:-842892769,predicate:"paymentSavedCredentialsCard",params:[{name:"id",type:"string"},{name:"title",type:"string"}],type:"PaymentSavedCredentials"},{id:475467473,predicate:"webDocument",params:[{name:"url",type:"string"},{name:"access_hash",type:"long"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"WebDocument"},{id:-104284986,predicate:"webDocumentNoProxy",params:[{name:"url",type:"string"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"WebDocument"},{id:-1678949555,predicate:"inputWebDocument",params:[{name:"url",type:"string"},{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"attributes",type:"Vector<DocumentAttribute>"}],type:"InputWebDocument"},{id:-1036396922,predicate:"inputWebFileLocation",params:[{name:"url",type:"string"},{name:"access_hash",type:"long"}],type:"InputWebFileLocation"},{id:-1625153079,predicate:"inputWebFileGeoPointLocation",params:[{name:"geo_point",type:"InputGeoPoint"},{name:"access_hash",type:"long"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"zoom",type:"int"},{name:"scale",type:"int"}],type:"InputWebFileLocation"},{id:568808380,predicate:"upload.webFile",params:[{name:"size",type:"int"},{name:"mime_type",type:"string"},{name:"file_type",type:"storage.FileType"},{name:"mtime",type:"int"},{name:"bytes",type:"bytes"}],type:"upload.WebFile"},{id:378828315,predicate:"payments.paymentForm",params:[{name:"flags",type:"#"},{name:"can_save_credentials",type:"flags.2?true"},{name:"password_missing",type:"flags.3?true"},{name:"form_id",type:"long"},{name:"bot_id",type:"long"},{name:"invoice",type:"Invoice"},{name:"provider_id",type:"long"},{name:"url",type:"string"},{name:"native_provider",type:"flags.4?string"},{name:"native_params",type:"flags.4?DataJSON"},{name:"saved_info",type:"flags.0?PaymentRequestedInfo"},{name:"saved_credentials",type:"flags.1?PaymentSavedCredentials"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentForm"},{id:-784000893,predicate:"payments.validatedRequestedInfo",params:[{name:"flags",type:"#"},{name:"id",type:"flags.0?string"},{name:"shipping_options",type:"flags.1?Vector<ShippingOption>"}],type:"payments.ValidatedRequestedInfo"},{id:1314881805,predicate:"payments.paymentResult",params:[{name:"updates",type:"Updates"}],type:"payments.PaymentResult"},{id:-666824391,predicate:"payments.paymentVerificationNeeded",params:[{name:"url",type:"string"}],type:"payments.PaymentResult"},{id:1891958275,predicate:"payments.paymentReceipt",params:[{name:"flags",type:"#"},{name:"date",type:"int"},{name:"bot_id",type:"long"},{name:"provider_id",type:"long"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"photo",type:"flags.2?WebDocument"},{name:"invoice",type:"Invoice"},{name:"info",type:"flags.0?PaymentRequestedInfo"},{name:"shipping",type:"flags.1?ShippingOption"},{name:"tip_amount",type:"flags.3?long"},{name:"currency",type:"string"},{name:"total_amount",type:"long"},{name:"credentials_title",type:"string"},{name:"users",type:"Vector<User>"}],type:"payments.PaymentReceipt"},{id:-74456004,predicate:"payments.savedInfo",params:[{name:"flags",type:"#"},{name:"has_saved_credentials",type:"flags.1?true"},{name:"saved_info",type:"flags.0?PaymentRequestedInfo"}],type:"payments.SavedInfo"},{id:-1056001329,predicate:"inputPaymentCredentialsSaved",params:[{name:"id",type:"string"},{name:"tmp_password",type:"bytes"}],type:"InputPaymentCredentials"},{id:873977640,predicate:"inputPaymentCredentials",params:[{name:"flags",type:"#"},{name:"save",type:"flags.0?true"},{name:"data",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:178373535,predicate:"inputPaymentCredentialsApplePay",params:[{name:"payment_data",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:-1966921727,predicate:"inputPaymentCredentialsGooglePay",params:[{name:"payment_token",type:"DataJSON"}],type:"InputPaymentCredentials"},{id:-614138572,predicate:"account.tmpPassword",params:[{name:"tmp_password",type:"bytes"},{name:"valid_until",type:"int"}],type:"account.TmpPassword"},{id:-1239335713,predicate:"shippingOption",params:[{name:"id",type:"string"},{name:"title",type:"string"},{name:"prices",type:"Vector<LabeledPrice>"}],type:"ShippingOption"},{id:-6249322,predicate:"inputStickerSetItem",params:[{name:"flags",type:"#"},{name:"document",type:"InputDocument"},{name:"emoji",type:"string"},{name:"mask_coords",type:"flags.0?MaskCoords"}],type:"InputStickerSetItem"},{id:506920429,predicate:"inputPhoneCall",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputPhoneCall"},{id:1399245077,predicate:"phoneCallEmpty",params:[{name:"id",type:"long"}],type:"PhoneCall"},{id:-987599081,predicate:"phoneCallWaiting",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"protocol",type:"PhoneCallProtocol"},{name:"receive_date",type:"flags.0?int"}],type:"PhoneCall"},{id:347139340,predicate:"phoneCallRequested",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_hash",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"PhoneCall"},{id:912311057,predicate:"phoneCallAccepted",params:[{name:"flags",type:"#"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_b",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"PhoneCall"},{id:-1770029977,predicate:"phoneCall",params:[{name:"flags",type:"#"},{name:"p2p_allowed",type:"flags.5?true"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"date",type:"int"},{name:"admin_id",type:"long"},{name:"participant_id",type:"long"},{name:"g_a_or_b",type:"bytes"},{name:"key_fingerprint",type:"long"},{name:"protocol",type:"PhoneCallProtocol"},{name:"connections",type:"Vector<PhoneConnection>"},{name:"start_date",type:"int"}],type:"PhoneCall"},{id:1355435489,predicate:"phoneCallDiscarded",params:[{name:"flags",type:"#"},{name:"need_rating",type:"flags.2?true"},{name:"need_debug",type:"flags.3?true"},{name:"video",type:"flags.6?true"},{name:"id",type:"long"},{name:"reason",type:"flags.0?PhoneCallDiscardReason"},{name:"duration",type:"flags.1?int"}],type:"PhoneCall"},{id:-1655957568,predicate:"phoneConnection",params:[{name:"id",type:"long"},{name:"ip",type:"string"},{name:"ipv6",type:"string"},{name:"port",type:"int"},{name:"peer_tag",type:"bytes"}],type:"PhoneConnection"},{id:1667228533,predicate:"phoneConnectionWebrtc",params:[{name:"flags",type:"#"},{name:"turn",type:"flags.0?true"},{name:"stun",type:"flags.1?true"},{name:"id",type:"long"},{name:"ip",type:"string"},{name:"ipv6",type:"string"},{name:"port",type:"int"},{name:"username",type:"string"},{name:"password",type:"string"}],type:"PhoneConnection"},{id:-58224696,predicate:"phoneCallProtocol",params:[{name:"flags",type:"#"},{name:"udp_p2p",type:"flags.0?true"},{name:"udp_reflector",type:"flags.1?true"},{name:"min_layer",type:"int"},{name:"max_layer",type:"int"},{name:"library_versions",type:"Vector<string>"}],type:"PhoneCallProtocol"},{id:-326966976,predicate:"phone.phoneCall",params:[{name:"phone_call",type:"PhoneCall"},{name:"users",type:"Vector<User>"}],type:"phone.PhoneCall"},{id:-290921362,predicate:"upload.cdnFileReuploadNeeded",params:[{name:"request_token",type:"bytes"}],type:"upload.CdnFile"},{id:-1449145777,predicate:"upload.cdnFile",params:[{name:"bytes",type:"bytes"}],type:"upload.CdnFile"},{id:-914167110,predicate:"cdnPublicKey",params:[{name:"dc_id",type:"int"},{name:"public_key",type:"string"}],type:"CdnPublicKey"},{id:1462101002,predicate:"cdnConfig",params:[{name:"public_keys",type:"Vector<CdnPublicKey>"}],type:"CdnConfig"},{id:-892239370,predicate:"langPackString",params:[{name:"key",type:"string"},{name:"value",type:"string"}],type:"LangPackString"},{id:1816636575,predicate:"langPackStringPluralized",params:[{name:"flags",type:"#"},{name:"key",type:"string"},{name:"zero_value",type:"flags.0?string"},{name:"one_value",type:"flags.1?string"},{name:"two_value",type:"flags.2?string"},{name:"few_value",type:"flags.3?string"},{name:"many_value",type:"flags.4?string"},{name:"other_value",type:"string"}],type:"LangPackString"},{id:695856818,predicate:"langPackStringDeleted",params:[{name:"key",type:"string"}],type:"LangPackString"},{id:-209337866,predicate:"langPackDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"},{name:"version",type:"int"},{name:"strings",type:"Vector<LangPackString>"}],type:"LangPackDifference"},{id:-288727837,predicate:"langPackLanguage",params:[{name:"flags",type:"#"},{name:"official",type:"flags.0?true"},{name:"rtl",type:"flags.2?true"},{name:"beta",type:"flags.3?true"},{name:"name",type:"string"},{name:"native_name",type:"string"},{name:"lang_code",type:"string"},{name:"base_lang_code",type:"flags.1?string"},{name:"plural_code",type:"string"},{name:"strings_count",type:"int"},{name:"translated_count",type:"int"},{name:"translations_url",type:"string"}],type:"LangPackLanguage"},{id:-421545947,predicate:"channelAdminLogEventActionChangeTitle",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1427671598,predicate:"channelAdminLogEventActionChangeAbout",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1783299128,predicate:"channelAdminLogEventActionChangeUsername",params:[{name:"prev_value",type:"string"},{name:"new_value",type:"string"}],type:"ChannelAdminLogEventAction"},{id:1129042607,predicate:"channelAdminLogEventActionChangePhoto",params:[{name:"prev_photo",type:"Photo"},{name:"new_photo",type:"Photo"}],type:"ChannelAdminLogEventAction"},{id:460916654,predicate:"channelAdminLogEventActionToggleInvites",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:648939889,predicate:"channelAdminLogEventActionToggleSignatures",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:-370660328,predicate:"channelAdminLogEventActionUpdatePinned",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:1889215493,predicate:"channelAdminLogEventActionEditMessage",params:[{name:"prev_message",type:"Message"},{name:"new_message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:1121994683,predicate:"channelAdminLogEventActionDeleteMessage",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:405815507,predicate:"channelAdminLogEventActionParticipantJoin",params:[],type:"ChannelAdminLogEventAction"},{id:-124291086,predicate:"channelAdminLogEventActionParticipantLeave",params:[],type:"ChannelAdminLogEventAction"},{id:-484690728,predicate:"channelAdminLogEventActionParticipantInvite",params:[{name:"participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-422036098,predicate:"channelAdminLogEventActionParticipantToggleBan",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-714643696,predicate:"channelAdminLogEventActionParticipantToggleAdmin",params:[{name:"prev_participant",type:"ChannelParticipant"},{name:"new_participant",type:"ChannelParticipant"}],type:"ChannelAdminLogEventAction"},{id:-1312568665,predicate:"channelAdminLogEventActionChangeStickerSet",params:[{name:"prev_stickerset",type:"InputStickerSet"},{name:"new_stickerset",type:"InputStickerSet"}],type:"ChannelAdminLogEventAction"},{id:1599903217,predicate:"channelAdminLogEventActionTogglePreHistoryHidden",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:771095562,predicate:"channelAdminLogEventActionDefaultBannedRights",params:[{name:"prev_banned_rights",type:"ChatBannedRights"},{name:"new_banned_rights",type:"ChatBannedRights"}],type:"ChannelAdminLogEventAction"},{id:-1895328189,predicate:"channelAdminLogEventActionStopPoll",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:84703944,predicate:"channelAdminLogEventActionChangeLinkedChat",params:[{name:"prev_value",type:"long"},{name:"new_value",type:"long"}],type:"ChannelAdminLogEventAction"},{id:241923758,predicate:"channelAdminLogEventActionChangeLocation",params:[{name:"prev_value",type:"ChannelLocation"},{name:"new_value",type:"ChannelLocation"}],type:"ChannelAdminLogEventAction"},{id:1401984889,predicate:"channelAdminLogEventActionToggleSlowMode",params:[{name:"prev_value",type:"int"},{name:"new_value",type:"int"}],type:"ChannelAdminLogEventAction"},{id:589338437,predicate:"channelAdminLogEventActionStartGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"ChannelAdminLogEventAction"},{id:-610299584,predicate:"channelAdminLogEventActionDiscardGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"ChannelAdminLogEventAction"},{id:-115071790,predicate:"channelAdminLogEventActionParticipantMute",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:-431740480,predicate:"channelAdminLogEventActionParticipantUnmute",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:1456906823,predicate:"channelAdminLogEventActionToggleGroupCallSetting",params:[{name:"join_muted",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:1557846647,predicate:"channelAdminLogEventActionParticipantJoinByInvite",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1515256996,predicate:"channelAdminLogEventActionExportedInviteDelete",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1091179342,predicate:"channelAdminLogEventActionExportedInviteRevoke",params:[{name:"invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:-384910503,predicate:"channelAdminLogEventActionExportedInviteEdit",params:[{name:"prev_invite",type:"ExportedChatInvite"},{name:"new_invite",type:"ExportedChatInvite"}],type:"ChannelAdminLogEventAction"},{id:1048537159,predicate:"channelAdminLogEventActionParticipantVolume",params:[{name:"participant",type:"GroupCallParticipant"}],type:"ChannelAdminLogEventAction"},{id:1855199800,predicate:"channelAdminLogEventActionChangeHistoryTTL",params:[{name:"prev_value",type:"int"},{name:"new_value",type:"int"}],type:"ChannelAdminLogEventAction"},{id:-1347021750,predicate:"channelAdminLogEventActionParticipantJoinByRequest",params:[{name:"invite",type:"ExportedChatInvite"},{name:"approved_by",type:"long"}],type:"ChannelAdminLogEventAction"},{id:-886388890,predicate:"channelAdminLogEventActionToggleNoForwards",params:[{name:"new_value",type:"Bool"}],type:"ChannelAdminLogEventAction"},{id:663693416,predicate:"channelAdminLogEventActionSendMessage",params:[{name:"message",type:"Message"}],type:"ChannelAdminLogEventAction"},{id:-1661470870,predicate:"channelAdminLogEventActionChangeAvailableReactions",params:[{name:"prev_value",type:"Vector<string>"},{name:"new_value",type:"Vector<string>"}],type:"ChannelAdminLogEventAction"},{id:531458253,predicate:"channelAdminLogEvent",params:[{name:"id",type:"long"},{name:"date",type:"int"},{name:"user_id",type:"long"},{name:"action",type:"ChannelAdminLogEventAction"}],type:"ChannelAdminLogEvent"},{id:-309659827,predicate:"channels.adminLogResults",params:[{name:"events",type:"Vector<ChannelAdminLogEvent>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.AdminLogResults"},{id:-368018716,predicate:"channelAdminLogEventsFilter",params:[{name:"flags",type:"#"},{name:"join",type:"flags.0?true"},{name:"leave",type:"flags.1?true"},{name:"invite",type:"flags.2?true"},{name:"ban",type:"flags.3?true"},{name:"unban",type:"flags.4?true"},{name:"kick",type:"flags.5?true"},{name:"unkick",type:"flags.6?true"},{name:"promote",type:"flags.7?true"},{name:"demote",type:"flags.8?true"},{name:"info",type:"flags.9?true"},{name:"settings",type:"flags.10?true"},{name:"pinned",type:"flags.11?true"},{name:"edit",type:"flags.12?true"},{name:"delete",type:"flags.13?true"},{name:"group_call",type:"flags.14?true"},{name:"invites",type:"flags.15?true"},{name:"send",type:"flags.16?true"}],type:"ChannelAdminLogEventsFilter"},{id:1558266229,predicate:"popularContact",params:[{name:"client_id",type:"long"},{name:"importers",type:"int"}],type:"PopularContact"},{id:-1634752813,predicate:"messages.favedStickersNotModified",params:[],type:"messages.FavedStickers"},{id:750063767,predicate:"messages.favedStickers",params:[{name:"hash",type:"long"},{name:"packs",type:"Vector<StickerPack>"},{name:"stickers",type:"Vector<Document>"}],type:"messages.FavedStickers"},{id:1189204285,predicate:"recentMeUrlUnknown",params:[{name:"url",type:"string"}],type:"RecentMeUrl"},{id:-1188296222,predicate:"recentMeUrlUser",params:[{name:"url",type:"string"},{name:"user_id",type:"long"}],type:"RecentMeUrl"},{id:-1294306862,predicate:"recentMeUrlChat",params:[{name:"url",type:"string"},{name:"chat_id",type:"long"}],type:"RecentMeUrl"},{id:-347535331,predicate:"recentMeUrlChatInvite",params:[{name:"url",type:"string"},{name:"chat_invite",type:"ChatInvite"}],type:"RecentMeUrl"},{id:-1140172836,predicate:"recentMeUrlStickerSet",params:[{name:"url",type:"string"},{name:"set",type:"StickerSetCovered"}],type:"RecentMeUrl"},{id:235081943,predicate:"help.recentMeUrls",params:[{name:"urls",type:"Vector<RecentMeUrl>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"help.RecentMeUrls"},{id:482797855,predicate:"inputSingleMedia",params:[{name:"flags",type:"#"},{name:"media",type:"InputMedia"},{name:"random_id",type:"long"},{name:"message",type:"string"},{name:"entities",type:"flags.0?Vector<MessageEntity>"}],type:"InputSingleMedia"},{id:-1493633966,predicate:"webAuthorization",params:[{name:"hash",type:"long"},{name:"bot_id",type:"long"},{name:"domain",type:"string"},{name:"browser",type:"string"},{name:"platform",type:"string"},{name:"date_created",type:"int"},{name:"date_active",type:"int"},{name:"ip",type:"string"},{name:"region",type:"string"}],type:"WebAuthorization"},{id:-313079300,predicate:"account.webAuthorizations",params:[{name:"authorizations",type:"Vector<WebAuthorization>"},{name:"users",type:"Vector<User>"}],type:"account.WebAuthorizations"},{id:-1502174430,predicate:"inputMessageID",params:[{name:"id",type:"int"}],type:"InputMessage"},{id:-1160215659,predicate:"inputMessageReplyTo",params:[{name:"id",type:"int"}],type:"InputMessage"},{id:-2037963464,predicate:"inputMessagePinned",params:[],type:"InputMessage"},{id:-1392895362,predicate:"inputMessageCallbackQuery",params:[{name:"id",type:"int"},{name:"query_id",type:"long"}],type:"InputMessage"},{id:-55902537,predicate:"inputDialogPeer",params:[{name:"peer",type:"InputPeer"}],type:"InputDialogPeer"},{id:1684014375,predicate:"inputDialogPeerFolder",params:[{name:"folder_id",type:"int"}],type:"InputDialogPeer"},{id:-445792507,predicate:"dialogPeer",params:[{name:"peer",type:"Peer"}],type:"DialogPeer"},{id:1363483106,predicate:"dialogPeerFolder",params:[{name:"folder_id",type:"int"}],type:"DialogPeer"},{id:223655517,predicate:"messages.foundStickerSetsNotModified",params:[],type:"messages.FoundStickerSets"},{id:-1963942446,predicate:"messages.foundStickerSets",params:[{name:"hash",type:"long"},{name:"sets",type:"Vector<StickerSetCovered>"}],type:"messages.FoundStickerSets"},{id:1648543603,predicate:"fileHash",params:[{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"bytes"}],type:"FileHash"},{id:1968737087,predicate:"inputClientProxy",params:[{name:"address",type:"string"},{name:"port",type:"int"}],type:"InputClientProxy"},{id:-483352705,predicate:"help.termsOfServiceUpdateEmpty",params:[{name:"expires",type:"int"}],type:"help.TermsOfServiceUpdate"},{id:686618977,predicate:"help.termsOfServiceUpdate",params:[{name:"expires",type:"int"},{name:"terms_of_service",type:"help.TermsOfService"}],type:"help.TermsOfServiceUpdate"},{id:859091184,predicate:"inputSecureFileUploaded",params:[{name:"id",type:"long"},{name:"parts",type:"int"},{name:"md5_checksum",type:"string"},{name:"file_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"InputSecureFile"},{id:1399317950,predicate:"inputSecureFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputSecureFile"},{id:1679398724,predicate:"secureFileEmpty",params:[],type:"SecureFile"},{id:-534283678,predicate:"secureFile",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"size",type:"int"},{name:"dc_id",type:"int"},{name:"date",type:"int"},{name:"file_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureFile"},{id:-1964327229,predicate:"secureData",params:[{name:"data",type:"bytes"},{name:"data_hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureData"},{id:2103482845,predicate:"securePlainPhone",params:[{name:"phone",type:"string"}],type:"SecurePlainData"},{id:569137759,predicate:"securePlainEmail",params:[{name:"email",type:"string"}],type:"SecurePlainData"},{id:-1658158621,predicate:"secureValueTypePersonalDetails",params:[],type:"SecureValueType"},{id:1034709504,predicate:"secureValueTypePassport",params:[],type:"SecureValueType"},{id:115615172,predicate:"secureValueTypeDriverLicense",params:[],type:"SecureValueType"},{id:-1596951477,predicate:"secureValueTypeIdentityCard",params:[],type:"SecureValueType"},{id:-1717268701,predicate:"secureValueTypeInternalPassport",params:[],type:"SecureValueType"},{id:-874308058,predicate:"secureValueTypeAddress",params:[],type:"SecureValueType"},{id:-63531698,predicate:"secureValueTypeUtilityBill",params:[],type:"SecureValueType"},{id:-1995211763,predicate:"secureValueTypeBankStatement",params:[],type:"SecureValueType"},{id:-1954007928,predicate:"secureValueTypeRentalAgreement",params:[],type:"SecureValueType"},{id:-1713143702,predicate:"secureValueTypePassportRegistration",params:[],type:"SecureValueType"},{id:-368907213,predicate:"secureValueTypeTemporaryRegistration",params:[],type:"SecureValueType"},{id:-1289704741,predicate:"secureValueTypePhone",params:[],type:"SecureValueType"},{id:-1908627474,predicate:"secureValueTypeEmail",params:[],type:"SecureValueType"},{id:411017418,predicate:"secureValue",params:[{name:"flags",type:"#"},{name:"type",type:"SecureValueType"},{name:"data",type:"flags.0?SecureData"},{name:"front_side",type:"flags.1?SecureFile"},{name:"reverse_side",type:"flags.2?SecureFile"},{name:"selfie",type:"flags.3?SecureFile"},{name:"translation",type:"flags.6?Vector<SecureFile>"},{name:"files",type:"flags.4?Vector<SecureFile>"},{name:"plain_data",type:"flags.5?SecurePlainData"},{name:"hash",type:"bytes"}],type:"SecureValue"},{id:-618540889,predicate:"inputSecureValue",params:[{name:"flags",type:"#"},{name:"type",type:"SecureValueType"},{name:"data",type:"flags.0?SecureData"},{name:"front_side",type:"flags.1?InputSecureFile"},{name:"reverse_side",type:"flags.2?InputSecureFile"},{name:"selfie",type:"flags.3?InputSecureFile"},{name:"translation",type:"flags.6?Vector<InputSecureFile>"},{name:"files",type:"flags.4?Vector<InputSecureFile>"},{name:"plain_data",type:"flags.5?SecurePlainData"}],type:"InputSecureValue"},{id:-316748368,predicate:"secureValueHash",params:[{name:"type",type:"SecureValueType"},{name:"hash",type:"bytes"}],type:"SecureValueHash"},{id:-391902247,predicate:"secureValueErrorData",params:[{name:"type",type:"SecureValueType"},{name:"data_hash",type:"bytes"},{name:"field",type:"string"},{name:"text",type:"string"}],type:"SecureValueError"},{id:12467706,predicate:"secureValueErrorFrontSide",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-2037765467,predicate:"secureValueErrorReverseSide",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-449327402,predicate:"secureValueErrorSelfie",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:2054162547,predicate:"secureValueErrorFile",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:1717706985,predicate:"secureValueErrorFiles",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"Vector<bytes>"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-2036501105,predicate:"secureValueError",params:[{name:"type",type:"SecureValueType"},{name:"hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:-1592506512,predicate:"secureValueErrorTranslationFile",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"bytes"},{name:"text",type:"string"}],type:"SecureValueError"},{id:878931416,predicate:"secureValueErrorTranslationFiles",params:[{name:"type",type:"SecureValueType"},{name:"file_hash",type:"Vector<bytes>"},{name:"text",type:"string"}],type:"SecureValueError"},{id:871426631,predicate:"secureCredentialsEncrypted",params:[{name:"data",type:"bytes"},{name:"hash",type:"bytes"},{name:"secret",type:"bytes"}],type:"SecureCredentialsEncrypted"},{id:-1389486888,predicate:"account.authorizationForm",params:[{name:"flags",type:"#"},{name:"required_types",type:"Vector<SecureRequiredType>"},{name:"values",type:"Vector<SecureValue>"},{name:"errors",type:"Vector<SecureValueError>"},{name:"users",type:"Vector<User>"},{name:"privacy_policy_url",type:"flags.0?string"}],type:"account.AuthorizationForm"},{id:-2128640689,predicate:"account.sentEmailCode",params:[{name:"email_pattern",type:"string"},{name:"length",type:"int"}],type:"account.SentEmailCode"},{id:1722786150,predicate:"help.deepLinkInfoEmpty",params:[],type:"help.DeepLinkInfo"},{id:1783556146,predicate:"help.deepLinkInfo",params:[{name:"flags",type:"#"},{name:"update_app",type:"flags.0?true"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"}],type:"help.DeepLinkInfo"},{id:289586518,predicate:"savedPhoneContact",params:[{name:"phone",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"date",type:"int"}],type:"SavedContact"},{id:1304052993,predicate:"account.takeout",params:[{name:"id",type:"long"}],type:"account.Takeout"},{id:-732254058,predicate:"passwordKdfAlgoUnknown",params:[],type:"PasswordKdfAlgo"},{id:982592842,predicate:"passwordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow",params:[{name:"salt1",type:"bytes"},{name:"salt2",type:"bytes"},{name:"g",type:"int"},{name:"p",type:"bytes"}],type:"PasswordKdfAlgo"},{id:4883767,predicate:"securePasswordKdfAlgoUnknown",params:[],type:"SecurePasswordKdfAlgo"},{id:-1141711456,predicate:"securePasswordKdfAlgoPBKDF2HMACSHA512iter100000",params:[{name:"salt",type:"bytes"}],type:"SecurePasswordKdfAlgo"},{id:-2042159726,predicate:"securePasswordKdfAlgoSHA512",params:[{name:"salt",type:"bytes"}],type:"SecurePasswordKdfAlgo"},{id:354925740,predicate:"secureSecretSettings",params:[{name:"secure_algo",type:"SecurePasswordKdfAlgo"},{name:"secure_secret",type:"bytes"},{name:"secure_secret_id",type:"long"}],type:"SecureSecretSettings"},{id:-1736378792,predicate:"inputCheckPasswordEmpty",params:[],type:"InputCheckPasswordSRP"},{id:-763367294,predicate:"inputCheckPasswordSRP",params:[{name:"srp_id",type:"long"},{name:"A",type:"bytes"},{name:"M1",type:"bytes"}],type:"InputCheckPasswordSRP"},{id:-2103600678,predicate:"secureRequiredType",params:[{name:"flags",type:"#"},{name:"native_names",type:"flags.0?true"},{name:"selfie_required",type:"flags.1?true"},{name:"translation_required",type:"flags.2?true"},{name:"type",type:"SecureValueType"}],type:"SecureRequiredType"},{id:41187252,predicate:"secureRequiredTypeOneOf",params:[{name:"types",type:"Vector<SecureRequiredType>"}],type:"SecureRequiredType"},{id:-1078332329,predicate:"help.passportConfigNotModified",params:[],type:"help.PassportConfig"},{id:-1600596305,predicate:"help.passportConfig",params:[{name:"hash",type:"int"},{name:"countries_langs",type:"DataJSON"}],type:"help.PassportConfig"},{id:488313413,predicate:"inputAppEvent",params:[{name:"time",type:"double"},{name:"type",type:"string"},{name:"peer",type:"long"},{name:"data",type:"JSONValue"}],type:"InputAppEvent"},{id:-1059185703,predicate:"jsonObjectValue",params:[{name:"key",type:"string"},{name:"value",type:"JSONValue"}],type:"JSONObjectValue"},{id:1064139624,predicate:"jsonNull",params:[],type:"JSONValue"},{id:-952869270,predicate:"jsonBool",params:[{name:"value",type:"Bool"}],type:"JSONValue"},{id:736157604,predicate:"jsonNumber",params:[{name:"value",type:"double"}],type:"JSONValue"},{id:-1222740358,predicate:"jsonString",params:[{name:"value",type:"string"}],type:"JSONValue"},{id:-146520221,predicate:"jsonArray",params:[{name:"value",type:"Vector<JSONValue>"}],type:"JSONValue"},{id:-1715350371,predicate:"jsonObject",params:[{name:"value",type:"Vector<JSONObjectValue>"}],type:"JSONValue"},{id:878078826,predicate:"pageTableCell",params:[{name:"flags",type:"#"},{name:"header",type:"flags.0?true"},{name:"align_center",type:"flags.3?true"},{name:"align_right",type:"flags.4?true"},{name:"valign_middle",type:"flags.5?true"},{name:"valign_bottom",type:"flags.6?true"},{name:"text",type:"flags.7?RichText"},{name:"colspan",type:"flags.1?int"},{name:"rowspan",type:"flags.2?int"}],type:"PageTableCell"},{id:-524237339,predicate:"pageTableRow",params:[{name:"cells",type:"Vector<PageTableCell>"}],type:"PageTableRow"},{id:1869903447,predicate:"pageCaption",params:[{name:"text",type:"RichText"},{name:"credit",type:"RichText"}],type:"PageCaption"},{id:-1188055347,predicate:"pageListItemText",params:[{name:"text",type:"RichText"}],type:"PageListItem"},{id:635466748,predicate:"pageListItemBlocks",params:[{name:"blocks",type:"Vector<PageBlock>"}],type:"PageListItem"},{id:1577484359,predicate:"pageListOrderedItemText",params:[{name:"num",type:"string"},{name:"text",type:"RichText"}],type:"PageListOrderedItem"},{id:-1730311882,predicate:"pageListOrderedItemBlocks",params:[{name:"num",type:"string"},{name:"blocks",type:"Vector<PageBlock>"}],type:"PageListOrderedItem"},{id:-1282352120,predicate:"pageRelatedArticle",params:[{name:"flags",type:"#"},{name:"url",type:"string"},{name:"webpage_id",type:"long"},{name:"title",type:"flags.0?string"},{name:"description",type:"flags.1?string"},{name:"photo_id",type:"flags.2?long"},{name:"author",type:"flags.3?string"},{name:"published_date",type:"flags.4?int"}],type:"PageRelatedArticle"},{id:-1738178803,predicate:"page",params:[{name:"flags",type:"#"},{name:"part",type:"flags.0?true"},{name:"rtl",type:"flags.1?true"},{name:"v2",type:"flags.2?true"},{name:"url",type:"string"},{name:"blocks",type:"Vector<PageBlock>"},{name:"photos",type:"Vector<Photo>"},{name:"documents",type:"Vector<Document>"},{name:"views",type:"flags.3?int"}],type:"Page"},{id:-1945767479,predicate:"help.supportName",params:[{name:"name",type:"string"}],type:"help.SupportName"},{id:-206688531,predicate:"help.userInfoEmpty",params:[],type:"help.UserInfo"},{id:32192344,predicate:"help.userInfo",params:[{name:"message",type:"string"},{name:"entities",type:"Vector<MessageEntity>"},{name:"author",type:"string"},{name:"date",type:"int"}],type:"help.UserInfo"},{id:1823064809,predicate:"pollAnswer",params:[{name:"text",type:"string"},{name:"option",type:"bytes"}],type:"PollAnswer"},{id:-2032041631,predicate:"poll",params:[{name:"id",type:"long"},{name:"flags",type:"#"},{name:"closed",type:"flags.0?true"},{name:"public_voters",type:"flags.1?true"},{name:"multiple_choice",type:"flags.2?true"},{name:"quiz",type:"flags.3?true"},{name:"question",type:"string"},{name:"answers",type:"Vector<PollAnswer>"},{name:"close_period",type:"flags.4?int"},{name:"close_date",type:"flags.5?int"}],type:"Poll"},{id:997055186,predicate:"pollAnswerVoters",params:[{name:"flags",type:"#"},{name:"chosen",type:"flags.0?true"},{name:"correct",type:"flags.1?true"},{name:"option",type:"bytes"},{name:"voters",type:"int"}],type:"PollAnswerVoters"},{id:-591909213,predicate:"pollResults",params:[{name:"flags",type:"#"},{name:"min",type:"flags.0?true"},{name:"results",type:"flags.1?Vector<PollAnswerVoters>"},{name:"total_voters",type:"flags.2?int"},{name:"recent_voters",type:"flags.3?Vector<long>"},{name:"solution",type:"flags.4?string"},{name:"solution_entities",type:"flags.4?Vector<MessageEntity>"}],type:"PollResults"},{id:-264117680,predicate:"chatOnlines",params:[{name:"onlines",type:"int"}],type:"ChatOnlines"},{id:1202287072,predicate:"statsURL",params:[{name:"url",type:"string"}],type:"StatsURL"},{id:1605510357,predicate:"chatAdminRights",params:[{name:"flags",type:"#"},{name:"change_info",type:"flags.0?true"},{name:"post_messages",type:"flags.1?true"},{name:"edit_messages",type:"flags.2?true"},{name:"delete_messages",type:"flags.3?true"},{name:"ban_users",type:"flags.4?true"},{name:"invite_users",type:"flags.5?true"},{name:"pin_messages",type:"flags.7?true"},{name:"add_admins",type:"flags.9?true"},{name:"anonymous",type:"flags.10?true"},{name:"manage_call",type:"flags.11?true"},{name:"other",type:"flags.12?true"}],type:"ChatAdminRights"},{id:-1626209256,predicate:"chatBannedRights",params:[{name:"flags",type:"#"},{name:"view_messages",type:"flags.0?true"},{name:"send_messages",type:"flags.1?true"},{name:"send_media",type:"flags.2?true"},{name:"send_stickers",type:"flags.3?true"},{name:"send_gifs",type:"flags.4?true"},{name:"send_games",type:"flags.5?true"},{name:"send_inline",type:"flags.6?true"},{name:"embed_links",type:"flags.7?true"},{name:"send_polls",type:"flags.8?true"},{name:"change_info",type:"flags.10?true"},{name:"invite_users",type:"flags.15?true"},{name:"pin_messages",type:"flags.17?true"},{name:"until_date",type:"int"}],type:"ChatBannedRights"},{id:-433014407,predicate:"inputWallPaper",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputWallPaper"},{id:1913199744,predicate:"inputWallPaperSlug",params:[{name:"slug",type:"string"}],type:"InputWallPaper"},{id:-1770371538,predicate:"inputWallPaperNoFile",params:[{name:"id",type:"long"}],type:"InputWallPaper"},{id:471437699,predicate:"account.wallPapersNotModified",params:[],type:"account.WallPapers"},{id:-842824308,predicate:"account.wallPapers",params:[{name:"hash",type:"long"},{name:"wallpapers",type:"Vector<WallPaper>"}],type:"account.WallPapers"},{id:-1973130814,predicate:"codeSettings",params:[{name:"flags",type:"#"},{name:"allow_flashcall",type:"flags.0?true"},{name:"current_number",type:"flags.1?true"},{name:"allow_app_hash",type:"flags.4?true"},{name:"allow_missed_call",type:"flags.5?true"},{name:"logout_tokens",type:"flags.6?Vector<bytes>"}],type:"CodeSettings"},{id:499236004,predicate:"wallPaperSettings",params:[{name:"flags",type:"#"},{name:"blur",type:"flags.1?true"},{name:"motion",type:"flags.2?true"},{name:"background_color",type:"flags.0?int"},{name:"second_background_color",type:"flags.4?int"},{name:"third_background_color",type:"flags.5?int"},{name:"fourth_background_color",type:"flags.6?int"},{name:"intensity",type:"flags.3?int"},{name:"rotation",type:"flags.4?int"}],type:"WallPaperSettings"},{id:-532532493,predicate:"autoDownloadSettings",params:[{name:"flags",type:"#"},{name:"disabled",type:"flags.0?true"},{name:"video_preload_large",type:"flags.1?true"},{name:"audio_preload_next",type:"flags.2?true"},{name:"phonecalls_less_data",type:"flags.3?true"},{name:"photo_size_max",type:"int"},{name:"video_size_max",type:"int"},{name:"file_size_max",type:"int"},{name:"video_upload_maxbitrate",type:"int"}],type:"AutoDownloadSettings"},{id:1674235686,predicate:"account.autoDownloadSettings",params:[{name:"low",type:"AutoDownloadSettings"},{name:"medium",type:"AutoDownloadSettings"},{name:"high",type:"AutoDownloadSettings"}],type:"account.AutoDownloadSettings"},{id:-709641735,predicate:"emojiKeyword",params:[{name:"keyword",type:"string"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiKeyword"},{id:594408994,predicate:"emojiKeywordDeleted",params:[{name:"keyword",type:"string"},{name:"emoticons",type:"Vector<string>"}],type:"EmojiKeyword"},{id:1556570557,predicate:"emojiKeywordsDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"},{name:"version",type:"int"},{name:"keywords",type:"Vector<EmojiKeyword>"}],type:"EmojiKeywordsDifference"},{id:-1519029347,predicate:"emojiURL",params:[{name:"url",type:"string"}],type:"EmojiURL"},{id:-1275374751,predicate:"emojiLanguage",params:[{name:"lang_code",type:"string"}],type:"EmojiLanguage"},{id:-11252123,predicate:"folder",params:[{name:"flags",type:"#"},{name:"autofill_new_broadcasts",type:"flags.0?true"},{name:"autofill_public_groups",type:"flags.1?true"},{name:"autofill_new_correspondents",type:"flags.2?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"photo",type:"flags.3?ChatPhoto"}],type:"Folder"},{id:-70073706,predicate:"inputFolderPeer",params:[{name:"peer",type:"InputPeer"},{name:"folder_id",type:"int"}],type:"InputFolderPeer"},{id:-373643672,predicate:"folderPeer",params:[{name:"peer",type:"Peer"},{name:"folder_id",type:"int"}],type:"FolderPeer"},{id:-398136321,predicate:"messages.searchCounter",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.1?true"},{name:"filter",type:"MessagesFilter"},{name:"count",type:"int"}],type:"messages.SearchCounter"},{id:-1831650802,predicate:"urlAuthResultRequest",params:[{name:"flags",type:"#"},{name:"request_write_access",type:"flags.0?true"},{name:"bot",type:"User"},{name:"domain",type:"string"}],type:"UrlAuthResult"},{id:-1886646706,predicate:"urlAuthResultAccepted",params:[{name:"url",type:"string"}],type:"UrlAuthResult"},{id:-1445536993,predicate:"urlAuthResultDefault",params:[],type:"UrlAuthResult"},{id:-1078612597,predicate:"channelLocationEmpty",params:[],type:"ChannelLocation"},{id:547062491,predicate:"channelLocation",params:[{name:"geo_point",type:"GeoPoint"},{name:"address",type:"string"}],type:"ChannelLocation"},{id:-901375139,predicate:"peerLocated",params:[{name:"peer",type:"Peer"},{name:"expires",type:"int"},{name:"distance",type:"int"}],type:"PeerLocated"},{id:-118740917,predicate:"peerSelfLocated",params:[{name:"expires",type:"int"}],type:"PeerLocated"},{id:-797791052,predicate:"restrictionReason",params:[{name:"platform",type:"string"},{name:"reason",type:"string"},{name:"text",type:"string"}],type:"RestrictionReason"},{id:1012306921,predicate:"inputTheme",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputTheme"},{id:-175567375,predicate:"inputThemeSlug",params:[{name:"slug",type:"string"}],type:"InputTheme"},{id:-1609668650,predicate:"theme",params:[{name:"flags",type:"#"},{name:"creator",type:"flags.0?true"},{name:"default",type:"flags.1?true"},{name:"for_chat",type:"flags.5?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"slug",type:"string"},{name:"title",type:"string"},{name:"document",type:"flags.2?Document"},{name:"settings",type:"flags.3?Vector<ThemeSettings>"},{name:"emoticon",type:"flags.6?string"},{name:"installs_count",type:"flags.4?int"}],type:"Theme"},{id:-199313886,predicate:"account.themesNotModified",params:[],type:"account.Themes"},{id:-1707242387,predicate:"account.themes",params:[{name:"hash",type:"long"},{name:"themes",type:"Vector<Theme>"}],type:"account.Themes"},{id:1654593920,predicate:"auth.loginToken",params:[{name:"expires",type:"int"},{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:110008598,predicate:"auth.loginTokenMigrateTo",params:[{name:"dc_id",type:"int"},{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:957176926,predicate:"auth.loginTokenSuccess",params:[{name:"authorization",type:"auth.Authorization"}],type:"auth.LoginToken"},{id:1474462241,predicate:"account.contentSettings",params:[{name:"flags",type:"#"},{name:"sensitive_enabled",type:"flags.0?true"},{name:"sensitive_can_change",type:"flags.1?true"}],type:"account.ContentSettings"},{id:-1456996667,predicate:"messages.inactiveChats",params:[{name:"dates",type:"Vector<int>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.InactiveChats"},{id:-1012849566,predicate:"baseThemeClassic",params:[],type:"BaseTheme"},{id:-69724536,predicate:"baseThemeDay",params:[],type:"BaseTheme"},{id:-1212997976,predicate:"baseThemeNight",params:[],type:"BaseTheme"},{id:1834973166,predicate:"baseThemeTinted",params:[],type:"BaseTheme"},{id:1527845466,predicate:"baseThemeArctic",params:[],type:"BaseTheme"},{id:-1881255857,predicate:"inputThemeSettings",params:[{name:"flags",type:"#"},{name:"message_colors_animated",type:"flags.2?true"},{name:"base_theme",type:"BaseTheme"},{name:"accent_color",type:"int"},{name:"outbox_accent_color",type:"flags.3?int"},{name:"message_colors",type:"flags.0?Vector<int>"},{name:"wallpaper",type:"flags.1?InputWallPaper"},{name:"wallpaper_settings",type:"flags.1?WallPaperSettings"}],type:"InputThemeSettings"},{id:-94849324,predicate:"themeSettings",params:[{name:"flags",type:"#"},{name:"message_colors_animated",type:"flags.2?true"},{name:"base_theme",type:"BaseTheme"},{name:"accent_color",type:"int"},{name:"outbox_accent_color",type:"flags.3?int"},{name:"message_colors",type:"flags.0?Vector<int>"},{name:"wallpaper",type:"flags.1?WallPaper"}],type:"ThemeSettings"},{id:1421174295,predicate:"webPageAttributeTheme",params:[{name:"flags",type:"#"},{name:"documents",type:"flags.0?Vector<Document>"},{name:"settings",type:"flags.1?ThemeSettings"}],type:"WebPageAttribute"},{id:886196148,predicate:"messageUserVote",params:[{name:"user_id",type:"long"},{name:"option",type:"bytes"},{name:"date",type:"int"}],type:"MessageUserVote"},{id:1017491692,predicate:"messageUserVoteInputOption",params:[{name:"user_id",type:"long"},{name:"date",type:"int"}],type:"MessageUserVote"},{id:-1973033641,predicate:"messageUserVoteMultiple",params:[{name:"user_id",type:"long"},{name:"options",type:"Vector<bytes>"},{name:"date",type:"int"}],type:"MessageUserVote"},{id:136574537,predicate:"messages.votesList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"votes",type:"Vector<MessageUserVote>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"messages.VotesList"},{id:-177732982,predicate:"bankCardOpenUrl",params:[{name:"url",type:"string"},{name:"name",type:"string"}],type:"BankCardOpenUrl"},{id:1042605427,predicate:"payments.bankCardData",params:[{name:"title",type:"string"},{name:"open_urls",type:"Vector<BankCardOpenUrl>"}],type:"payments.BankCardData"},{id:1949890536,predicate:"dialogFilter",params:[{name:"flags",type:"#"},{name:"contacts",type:"flags.0?true"},{name:"non_contacts",type:"flags.1?true"},{name:"groups",type:"flags.2?true"},{name:"broadcasts",type:"flags.3?true"},{name:"bots",type:"flags.4?true"},{name:"exclude_muted",type:"flags.11?true"},{name:"exclude_read",type:"flags.12?true"},{name:"exclude_archived",type:"flags.13?true"},{name:"id",type:"int"},{name:"title",type:"string"},{name:"emoticon",type:"flags.25?string"},{name:"pinned_peers",type:"Vector<InputPeer>"},{name:"include_peers",type:"Vector<InputPeer>"},{name:"exclude_peers",type:"Vector<InputPeer>"}],type:"DialogFilter"},{id:2004110666,predicate:"dialogFilterSuggested",params:[{name:"filter",type:"DialogFilter"},{name:"description",type:"string"}],type:"DialogFilterSuggested"},{id:-1237848657,predicate:"statsDateRangeDays",params:[{name:"min_date",type:"int"},{name:"max_date",type:"int"}],type:"StatsDateRangeDays"},{id:-884757282,predicate:"statsAbsValueAndPrev",params:[{name:"current",type:"double"},{name:"previous",type:"double"}],type:"StatsAbsValueAndPrev"},{id:-875679776,predicate:"statsPercentValue",params:[{name:"part",type:"double"},{name:"total",type:"double"}],type:"StatsPercentValue"},{id:1244130093,predicate:"statsGraphAsync",params:[{name:"token",type:"string"}],type:"StatsGraph"},{id:-1092839390,predicate:"statsGraphError",params:[{name:"error",type:"string"}],type:"StatsGraph"},{id:-1901828938,predicate:"statsGraph",params:[{name:"flags",type:"#"},{name:"json",type:"DataJSON"},{name:"zoom_token",type:"flags.0?string"}],type:"StatsGraph"},{id:-1387279939,predicate:"messageInteractionCounters",params:[{name:"msg_id",type:"int"},{name:"views",type:"int"},{name:"forwards",type:"int"}],type:"MessageInteractionCounters"},{id:-1107852396,predicate:"stats.broadcastStats",params:[{name:"period",type:"StatsDateRangeDays"},{name:"followers",type:"StatsAbsValueAndPrev"},{name:"views_per_post",type:"StatsAbsValueAndPrev"},{name:"shares_per_post",type:"StatsAbsValueAndPrev"},{name:"enabled_notifications",type:"StatsPercentValue"},{name:"growth_graph",type:"StatsGraph"},{name:"followers_graph",type:"StatsGraph"},{name:"mute_graph",type:"StatsGraph"},{name:"top_hours_graph",type:"StatsGraph"},{name:"interactions_graph",type:"StatsGraph"},{name:"iv_interactions_graph",type:"StatsGraph"},{name:"views_by_source_graph",type:"StatsGraph"},{name:"new_followers_by_source_graph",type:"StatsGraph"},{name:"languages_graph",type:"StatsGraph"},{name:"recent_message_interactions",type:"Vector<MessageInteractionCounters>"}],type:"stats.BroadcastStats"},{id:-1728664459,predicate:"help.promoDataEmpty",params:[{name:"expires",type:"int"}],type:"help.PromoData"},{id:-1942390465,predicate:"help.promoData",params:[{name:"flags",type:"#"},{name:"proxy",type:"flags.0?true"},{name:"expires",type:"int"},{name:"peer",type:"Peer"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"psa_type",type:"flags.1?string"},{name:"psa_message",type:"flags.2?string"}],type:"help.PromoData"},{id:-567037804,predicate:"videoSize",params:[{name:"flags",type:"#"},{name:"type",type:"string"},{name:"w",type:"int"},{name:"h",type:"int"},{name:"size",type:"int"},{name:"video_start_ts",type:"flags.0?double"}],type:"VideoSize"},{id:-1660637285,predicate:"statsGroupTopPoster",params:[{name:"user_id",type:"long"},{name:"messages",type:"int"},{name:"avg_chars",type:"int"}],type:"StatsGroupTopPoster"},{id:-682079097,predicate:"statsGroupTopAdmin",params:[{name:"user_id",type:"long"},{name:"deleted",type:"int"},{name:"kicked",type:"int"},{name:"banned",type:"int"}],type:"StatsGroupTopAdmin"},{id:1398765469,predicate:"statsGroupTopInviter",params:[{name:"user_id",type:"long"},{name:"invitations",type:"int"}],type:"StatsGroupTopInviter"},{id:-276825834,predicate:"stats.megagroupStats",params:[{name:"period",type:"StatsDateRangeDays"},{name:"members",type:"StatsAbsValueAndPrev"},{name:"messages",type:"StatsAbsValueAndPrev"},{name:"viewers",type:"StatsAbsValueAndPrev"},{name:"posters",type:"StatsAbsValueAndPrev"},{name:"growth_graph",type:"StatsGraph"},{name:"members_graph",type:"StatsGraph"},{name:"new_members_by_source_graph",type:"StatsGraph"},{name:"languages_graph",type:"StatsGraph"},{name:"messages_graph",type:"StatsGraph"},{name:"actions_graph",type:"StatsGraph"},{name:"top_hours_graph",type:"StatsGraph"},{name:"weekdays_graph",type:"StatsGraph"},{name:"top_posters",type:"Vector<StatsGroupTopPoster>"},{name:"top_admins",type:"Vector<StatsGroupTopAdmin>"},{name:"top_inviters",type:"Vector<StatsGroupTopInviter>"},{name:"users",type:"Vector<User>"}],type:"stats.MegagroupStats"},{id:-1096616924,predicate:"globalPrivacySettings",params:[{name:"flags",type:"#"},{name:"archive_and_mute_new_noncontact_peers",type:"flags.0?Bool"}],type:"GlobalPrivacySettings"},{id:1107543535,predicate:"help.countryCode",params:[{name:"flags",type:"#"},{name:"country_code",type:"string"},{name:"prefixes",type:"flags.0?Vector<string>"},{name:"patterns",type:"flags.1?Vector<string>"}],type:"help.CountryCode"},{id:-1014526429,predicate:"help.country",params:[{name:"flags",type:"#"},{name:"hidden",type:"flags.0?true"},{name:"iso2",type:"string"},{name:"default_name",type:"string"},{name:"name",type:"flags.1?string"},{name:"country_codes",type:"Vector<help.CountryCode>"}],type:"help.Country"},{id:-1815339214,predicate:"help.countriesListNotModified",params:[],type:"help.CountriesList"},{id:-2016381538,predicate:"help.countriesList",params:[{name:"countries",type:"Vector<help.Country>"},{name:"hash",type:"int"}],type:"help.CountriesList"},{id:1163625789,predicate:"messageViews",params:[{name:"flags",type:"#"},{name:"views",type:"flags.0?int"},{name:"forwards",type:"flags.1?int"},{name:"replies",type:"flags.2?MessageReplies"}],type:"MessageViews"},{id:-1228606141,predicate:"messages.messageViews",params:[{name:"views",type:"Vector<MessageViews>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.MessageViews"},{id:-1506535550,predicate:"messages.discussionMessage",params:[{name:"flags",type:"#"},{name:"messages",type:"Vector<Message>"},{name:"max_id",type:"flags.0?int"},{name:"read_inbox_max_id",type:"flags.1?int"},{name:"read_outbox_max_id",type:"flags.2?int"},{name:"unread_count",type:"int"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.DiscussionMessage"},{id:-1495959709,predicate:"messageReplyHeader",params:[{name:"flags",type:"#"},{name:"reply_to_msg_id",type:"int"},{name:"reply_to_peer_id",type:"flags.0?Peer"},{name:"reply_to_top_id",type:"flags.1?int"}],type:"MessageReplyHeader"},{id:-2083123262,predicate:"messageReplies",params:[{name:"flags",type:"#"},{name:"comments",type:"flags.0?true"},{name:"replies",type:"int"},{name:"replies_pts",type:"int"},{name:"recent_repliers",type:"flags.1?Vector<Peer>"},{name:"channel_id",type:"flags.0?long"},{name:"max_id",type:"flags.2?int"},{name:"read_max_id",type:"flags.3?int"}],type:"MessageReplies"},{id:-386039788,predicate:"peerBlocked",params:[{name:"peer_id",type:"Peer"},{name:"date",type:"int"}],type:"PeerBlocked"},{id:-1986399595,predicate:"stats.messageStats",params:[{name:"views_graph",type:"StatsGraph"}],type:"stats.MessageStats"},{id:2004925620,predicate:"groupCallDiscarded",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"duration",type:"int"}],type:"GroupCall"},{id:-711498484,predicate:"groupCall",params:[{name:"flags",type:"#"},{name:"join_muted",type:"flags.1?true"},{name:"can_change_join_muted",type:"flags.2?true"},{name:"join_date_asc",type:"flags.6?true"},{name:"schedule_start_subscribed",type:"flags.8?true"},{name:"can_start_video",type:"flags.9?true"},{name:"record_video_active",type:"flags.11?true"},{name:"id",type:"long"},{name:"access_hash",type:"long"},{name:"participants_count",type:"int"},{name:"title",type:"flags.3?string"},{name:"stream_dc_id",type:"flags.4?int"},{name:"record_start_date",type:"flags.5?int"},{name:"schedule_date",type:"flags.7?int"},{name:"unmuted_video_count",type:"flags.10?int"},{name:"unmuted_video_limit",type:"int"},{name:"version",type:"int"}],type:"GroupCall"},{id:-659913713,predicate:"inputGroupCall",params:[{name:"id",type:"long"},{name:"access_hash",type:"long"}],type:"InputGroupCall"},{id:-341428482,predicate:"groupCallParticipant",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"left",type:"flags.1?true"},{name:"can_self_unmute",type:"flags.2?true"},{name:"just_joined",type:"flags.4?true"},{name:"versioned",type:"flags.5?true"},{name:"min",type:"flags.8?true"},{name:"muted_by_you",type:"flags.9?true"},{name:"volume_by_admin",type:"flags.10?true"},{name:"self",type:"flags.12?true"},{name:"video_joined",type:"flags.15?true"},{name:"peer",type:"Peer"},{name:"date",type:"int"},{name:"active_date",type:"flags.3?int"},{name:"source",type:"int"},{name:"volume",type:"flags.7?int"},{name:"about",type:"flags.11?string"},{name:"raise_hand_rating",type:"flags.13?long"},{name:"video",type:"flags.6?GroupCallParticipantVideo"},{name:"presentation",type:"flags.14?GroupCallParticipantVideo"}],type:"GroupCallParticipant"},{id:-1636664659,predicate:"phone.groupCall",params:[{name:"call",type:"GroupCall"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"participants_next_offset",type:"string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.GroupCall"},{id:-193506890,predicate:"phone.groupParticipants",params:[{name:"count",type:"int"},{name:"participants",type:"Vector<GroupCallParticipant>"},{name:"next_offset",type:"string"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"},{name:"version",type:"int"}],type:"phone.GroupParticipants"},{id:813821341,predicate:"inlineQueryPeerTypeSameBotPM",params:[],type:"InlineQueryPeerType"},{id:-2093215828,predicate:"inlineQueryPeerTypePM",params:[],type:"InlineQueryPeerType"},{id:-681130742,predicate:"inlineQueryPeerTypeChat",params:[],type:"InlineQueryPeerType"},{id:1589952067,predicate:"inlineQueryPeerTypeMegagroup",params:[],type:"InlineQueryPeerType"},{id:1664413338,predicate:"inlineQueryPeerTypeBroadcast",params:[],type:"InlineQueryPeerType"},{id:375566091,predicate:"messages.historyImport",params:[{name:"id",type:"long"}],type:"messages.HistoryImport"},{id:1578088377,predicate:"messages.historyImportParsed",params:[{name:"flags",type:"#"},{name:"pm",type:"flags.0?true"},{name:"group",type:"flags.1?true"},{name:"title",type:"flags.2?string"}],type:"messages.HistoryImportParsed"},{id:-275956116,predicate:"messages.affectedFoundMessages",params:[{name:"pts",type:"int"},{name:"pts_count",type:"int"},{name:"offset",type:"int"},{name:"messages",type:"Vector<int>"}],type:"messages.AffectedFoundMessages"},{id:-1940201511,predicate:"chatInviteImporter",params:[{name:"flags",type:"#"},{name:"requested",type:"flags.0?true"},{name:"user_id",type:"long"},{name:"date",type:"int"},{name:"about",type:"flags.2?string"},{name:"approved_by",type:"flags.1?long"}],type:"ChatInviteImporter"},{id:-1111085620,predicate:"messages.exportedChatInvites",params:[{name:"count",type:"int"},{name:"invites",type:"Vector<ExportedChatInvite>"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvites"},{id:410107472,predicate:"messages.exportedChatInvite",params:[{name:"invite",type:"ExportedChatInvite"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvite"},{id:572915951,predicate:"messages.exportedChatInviteReplaced",params:[{name:"invite",type:"ExportedChatInvite"},{name:"new_invite",type:"ExportedChatInvite"},{name:"users",type:"Vector<User>"}],type:"messages.ExportedChatInvite"},{id:-2118733814,predicate:"messages.chatInviteImporters",params:[{name:"count",type:"int"},{name:"importers",type:"Vector<ChatInviteImporter>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatInviteImporters"},{id:-219353309,predicate:"chatAdminWithInvites",params:[{name:"admin_id",type:"long"},{name:"invites_count",type:"int"},{name:"revoked_invites_count",type:"int"}],type:"ChatAdminWithInvites"},{id:-1231326505,predicate:"messages.chatAdminsWithInvites",params:[{name:"admins",type:"Vector<ChatAdminWithInvites>"},{name:"users",type:"Vector<User>"}],type:"messages.ChatAdminsWithInvites"},{id:-1571952873,predicate:"messages.checkedHistoryImportPeer",params:[{name:"confirm_text",type:"string"}],type:"messages.CheckedHistoryImportPeer"},{id:-1343921601,predicate:"phone.joinAsPeers",params:[{name:"peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"phone.JoinAsPeers"},{id:541839704,predicate:"phone.exportedGroupCallInvite",params:[{name:"link",type:"string"}],type:"phone.ExportedGroupCallInvite"},{id:-592373577,predicate:"groupCallParticipantVideoSourceGroup",params:[{name:"semantics",type:"string"},{name:"sources",type:"Vector<int>"}],type:"GroupCallParticipantVideoSourceGroup"},{id:1735736008,predicate:"groupCallParticipantVideo",params:[{name:"flags",type:"#"},{name:"paused",type:"flags.0?true"},{name:"endpoint",type:"string"},{name:"source_groups",type:"Vector<GroupCallParticipantVideoSourceGroup>"},{name:"audio_source",type:"flags.1?int"}],type:"GroupCallParticipantVideo"},{id:-2046910401,predicate:"stickers.suggestedShortName",params:[{name:"short_name",type:"string"}],type:"stickers.SuggestedShortName"},{id:795652779,predicate:"botCommandScopeDefault",params:[],type:"BotCommandScope"},{id:1011811544,predicate:"botCommandScopeUsers",params:[],type:"BotCommandScope"},{id:1877059713,predicate:"botCommandScopeChats",params:[],type:"BotCommandScope"},{id:-1180016534,predicate:"botCommandScopeChatAdmins",params:[],type:"BotCommandScope"},{id:-610432643,predicate:"botCommandScopePeer",params:[{name:"peer",type:"InputPeer"}],type:"BotCommandScope"},{id:1071145937,predicate:"botCommandScopePeerAdmins",params:[{name:"peer",type:"InputPeer"}],type:"BotCommandScope"},{id:169026035,predicate:"botCommandScopePeerUser",params:[{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"BotCommandScope"},{id:-478701471,predicate:"account.resetPasswordFailedWait",params:[{name:"retry_date",type:"int"}],type:"account.ResetPasswordResult"},{id:-370148227,predicate:"account.resetPasswordRequestedWait",params:[{name:"until_date",type:"int"}],type:"account.ResetPasswordResult"},{id:-383330754,predicate:"account.resetPasswordOk",params:[],type:"account.ResetPasswordResult"},{id:981691896,predicate:"sponsoredMessage",params:[{name:"flags",type:"#"},{name:"random_id",type:"bytes"},{name:"from_id",type:"flags.3?Peer"},{name:"chat_invite",type:"flags.4?ChatInvite"},{name:"chat_invite_hash",type:"flags.4?string"},{name:"channel_post",type:"flags.2?int"},{name:"start_param",type:"flags.0?string"},{name:"message",type:"string"},{name:"entities",type:"flags.1?Vector<MessageEntity>"}],type:"SponsoredMessage"},{id:1705297877,predicate:"messages.sponsoredMessages",params:[{name:"messages",type:"Vector<SponsoredMessage>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SponsoredMessages"},{id:-911191137,predicate:"searchResultsCalendarPeriod",params:[{name:"date",type:"int"},{name:"min_msg_id",type:"int"},{name:"max_msg_id",type:"int"},{name:"count",type:"int"}],type:"SearchResultsCalendarPeriod"},{id:343859772,predicate:"messages.searchResultsCalendar",params:[{name:"flags",type:"#"},{name:"inexact",type:"flags.0?true"},{name:"count",type:"int"},{name:"min_date",type:"int"},{name:"min_msg_id",type:"int"},{name:"offset_id_offset",type:"flags.1?int"},{name:"periods",type:"Vector<SearchResultsCalendarPeriod>"},{name:"messages",type:"Vector<Message>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.SearchResultsCalendar"},{id:2137295719,predicate:"searchResultPosition",params:[{name:"msg_id",type:"int"},{name:"date",type:"int"},{name:"offset",type:"int"}],type:"SearchResultsPosition"},{id:1404185519,predicate:"messages.searchResultsPositions",params:[{name:"count",type:"int"},{name:"positions",type:"Vector<SearchResultsPosition>"}],type:"messages.SearchResultsPositions"},{id:-2091463255,predicate:"channels.sendAsPeers",params:[{name:"peers",type:"Vector<Peer>"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"channels.SendAsPeers"},{id:997004590,predicate:"users.userFull",params:[{name:"full_user",type:"UserFull"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"users.UserFull"},{id:1753266509,predicate:"messages.peerSettings",params:[{name:"settings",type:"PeerSettings"},{name:"chats",type:"Vector<Chat>"},{name:"users",type:"Vector<User>"}],type:"messages.PeerSettings"},{id:-1012759713,predicate:"auth.loggedOut",params:[{name:"flags",type:"#"},{name:"future_auth_token",type:"flags.0?bytes"}],type:"auth.LoggedOut"},{id:1873957073,predicate:"reactionCount",params:[{name:"flags",type:"#"},{name:"chosen",type:"flags.0?true"},{name:"reaction",type:"string"},{name:"count",type:"int"}],type:"ReactionCount"},{id:142306870,predicate:"messageReactions",params:[{name:"flags",type:"#"},{name:"min",type:"flags.0?true"},{name:"can_see_list",type:"flags.2?true"},{name:"results",type:"Vector<ReactionCount>"},{name:"recent_reactons",type:"flags.1?Vector<MessageUserReaction>"}],type:"MessageReactions"},{id:-1826077446,predicate:"messageUserReaction",params:[{name:"user_id",type:"long"},{name:"reaction",type:"string"}],type:"MessageUserReaction"},{id:-1553558980,predicate:"messages.messageReactionsList",params:[{name:"flags",type:"#"},{name:"count",type:"int"},{name:"reactions",type:"Vector<MessageUserReaction>"},{name:"users",type:"Vector<User>"},{name:"next_offset",type:"flags.0?string"}],type:"messages.MessageReactionsList"},{id:-1065882623,predicate:"availableReaction",params:[{name:"flags",type:"#"},{name:"inactive",type:"flags.0?true"},{name:"reaction",type:"string"},{name:"title",type:"string"},{name:"static_icon",type:"Document"},{name:"appear_animation",type:"Document"},{name:"select_animation",type:"Document"},{name:"activate_animation",type:"Document"},{name:"effect_animation",type:"Document"},{name:"around_animation",type:"flags.1?Document"},{name:"center_icon",type:"flags.1?Document"}],type:"AvailableReaction"},{id:-1626924713,predicate:"messages.availableReactionsNotModified",params:[],type:"messages.AvailableReactions"},{id:1989032621,predicate:"messages.availableReactions",params:[{name:"hash",type:"int"},{name:"reactions",type:"Vector<AvailableReaction>"}],type:"messages.AvailableReactions"}],methods:[{id:-878758099,method:"invokeAfterMsg",params:[{name:"msg_id",type:"long"},{name:"query",type:"!X"}],type:"X"},{id:1036301552,method:"invokeAfterMsgs",params:[{name:"msg_ids",type:"Vector<long>"},{name:"query",type:"!X"}],type:"X"},{id:-1043505495,method:"initConnection",params:[{name:"flags",type:"#"},{name:"api_id",type:"int"},{name:"device_model",type:"string"},{name:"system_version",type:"string"},{name:"app_version",type:"string"},{name:"system_lang_code",type:"string"},{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"proxy",type:"flags.0?InputClientProxy"},{name:"params",type:"flags.1?JSONValue"},{name:"query",type:"!X"}],type:"X"},{id:-627372787,method:"invokeWithLayer",params:[{name:"layer",type:"int"},{name:"query",type:"!X"}],type:"X"},{id:-1080796745,method:"invokeWithoutUpdates",params:[{name:"query",type:"!X"}],type:"X"},{id:911373810,method:"invokeWithMessagesRange",params:[{name:"range",type:"MessageRange"},{name:"query",type:"!X"}],type:"X"},{id:-1398145746,method:"invokeWithTakeout",params:[{name:"takeout_id",type:"long"},{name:"query",type:"!X"}],type:"X"},{id:-1502141361,method:"auth.sendCode",params:[{name:"phone_number",type:"string"},{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:-2131827673,method:"auth.signUp",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"first_name",type:"string"},{name:"last_name",type:"string"}],type:"auth.Authorization"},{id:-1126886015,method:"auth.signIn",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"auth.Authorization"},{id:1047706137,method:"auth.logOut",params:[],type:"auth.LoggedOut"},{id:-1616179942,method:"auth.resetAuthorizations",params:[],type:"Bool"},{id:-440401971,method:"auth.exportAuthorization",params:[{name:"dc_id",type:"int"}],type:"auth.ExportedAuthorization"},{id:-1518699091,method:"auth.importAuthorization",params:[{name:"id",type:"long"},{name:"bytes",type:"bytes"}],type:"auth.Authorization"},{id:-841733627,method:"auth.bindTempAuthKey",params:[{name:"perm_auth_key_id",type:"long"},{name:"nonce",type:"long"},{name:"expires_at",type:"int"},{name:"encrypted_message",type:"bytes"}],type:"Bool"},{id:1738800940,method:"auth.importBotAuthorization",params:[{name:"flags",type:"int"},{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"bot_auth_token",type:"string"}],type:"auth.Authorization"},{id:-779399914,method:"auth.checkPassword",params:[{name:"password",type:"InputCheckPasswordSRP"}],type:"auth.Authorization"},{id:-661144474,method:"auth.requestPasswordRecovery",params:[],type:"auth.PasswordRecovery"},{id:923364464,method:"auth.recoverPassword",params:[{name:"flags",type:"#"},{name:"code",type:"string"},{name:"new_settings",type:"flags.0?account.PasswordInputSettings"}],type:"auth.Authorization"},{id:1056025023,method:"auth.resendCode",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"auth.SentCode"},{id:520357240,method:"auth.cancelCode",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"}],type:"Bool"},{id:-1907842680,method:"auth.dropTempAuthKeys",params:[{name:"except_auth_keys",type:"Vector<long>"}],type:"Bool"},{id:-1210022402,method:"auth.exportLoginToken",params:[{name:"api_id",type:"int"},{name:"api_hash",type:"string"},{name:"except_ids",type:"Vector<long>"}],type:"auth.LoginToken"},{id:-1783866140,method:"auth.importLoginToken",params:[{name:"token",type:"bytes"}],type:"auth.LoginToken"},{id:-392909491,method:"auth.acceptLoginToken",params:[{name:"token",type:"bytes"}],type:"Authorization"},{id:221691769,method:"auth.checkRecoveryPassword",params:[{name:"code",type:"string"}],type:"Bool"},{id:-326762118,method:"account.registerDevice",params:[{name:"flags",type:"#"},{name:"no_muted",type:"flags.0?true"},{name:"token_type",type:"int"},{name:"token",type:"string"},{name:"app_sandbox",type:"Bool"},{name:"secret",type:"bytes"},{name:"other_uids",type:"Vector<long>"}],type:"Bool"},{id:1779249670,method:"account.unregisterDevice",params:[{name:"token_type",type:"int"},{name:"token",type:"string"},{name:"other_uids",type:"Vector<long>"}],type:"Bool"},{id:-2067899501,method:"account.updateNotifySettings",params:[{name:"peer",type:"InputNotifyPeer"},{name:"settings",type:"InputPeerNotifySettings"}],type:"Bool"},{id:313765169,method:"account.getNotifySettings",params:[{name:"peer",type:"InputNotifyPeer"}],type:"PeerNotifySettings"},{id:-612493497,method:"account.resetNotifySettings",params:[],type:"Bool"},{id:2018596725,method:"account.updateProfile",params:[{name:"flags",type:"#"},{name:"first_name",type:"flags.0?string"},{name:"last_name",type:"flags.1?string"},{name:"about",type:"flags.2?string"}],type:"User"},{id:1713919532,method:"account.updateStatus",params:[{name:"offline",type:"Bool"}],type:"Bool"},{id:127302966,method:"account.getWallPapers",params:[{name:"hash",type:"long"}],type:"account.WallPapers"},{id:-977650298,method:"account.reportPeer",params:[{name:"peer",type:"InputPeer"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:655677548,method:"account.checkUsername",params:[{name:"username",type:"string"}],type:"Bool"},{id:1040964988,method:"account.updateUsername",params:[{name:"username",type:"string"}],type:"User"},{id:-623130288,method:"account.getPrivacy",params:[{name:"key",type:"InputPrivacyKey"}],type:"account.PrivacyRules"},{id:-906486552,method:"account.setPrivacy",params:[{name:"key",type:"InputPrivacyKey"},{name:"rules",type:"Vector<InputPrivacyRule>"}],type:"account.PrivacyRules"},{id:1099779595,method:"account.deleteAccount",params:[{name:"reason",type:"string"}],type:"Bool"},{id:150761757,method:"account.getAccountTTL",params:[],type:"AccountDaysTTL"},{id:608323678,method:"account.setAccountTTL",params:[{name:"ttl",type:"AccountDaysTTL"}],type:"Bool"},{id:-2108208411,method:"account.sendChangePhoneCode",params:[{name:"phone_number",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1891839707,method:"account.changePhone",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"User"},{id:954152242,method:"account.updateDeviceLocked",params:[{name:"period",type:"int"}],type:"Bool"},{id:-484392616,method:"account.getAuthorizations",params:[],type:"account.Authorizations"},{id:-545786948,method:"account.resetAuthorization",params:[{name:"hash",type:"long"}],type:"Bool"},{id:1418342645,method:"account.getPassword",params:[],type:"account.Password"},{id:-1663767815,method:"account.getPasswordSettings",params:[{name:"password",type:"InputCheckPasswordSRP"}],type:"account.PasswordSettings"},{id:-1516564433,method:"account.updatePasswordSettings",params:[{name:"password",type:"InputCheckPasswordSRP"},{name:"new_settings",type:"account.PasswordInputSettings"}],type:"Bool"},{id:457157256,method:"account.sendConfirmPhoneCode",params:[{name:"hash",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1596029123,method:"account.confirmPhone",params:[{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"Bool"},{id:1151208273,method:"account.getTmpPassword",params:[{name:"password",type:"InputCheckPasswordSRP"},{name:"period",type:"int"}],type:"account.TmpPassword"},{id:405695855,method:"account.getWebAuthorizations",params:[],type:"account.WebAuthorizations"},{id:755087855,method:"account.resetWebAuthorization",params:[{name:"hash",type:"long"}],type:"Bool"},{id:1747789204,method:"account.resetWebAuthorizations",params:[],type:"Bool"},{id:-1299661699,method:"account.getAllSecureValues",params:[],type:"Vector<SecureValue>"},{id:1936088002,method:"account.getSecureValue",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"Vector<SecureValue>"},{id:-1986010339,method:"account.saveSecureValue",params:[{name:"value",type:"InputSecureValue"},{name:"secure_secret_id",type:"long"}],type:"SecureValue"},{id:-1199522741,method:"account.deleteSecureValue",params:[{name:"types",type:"Vector<SecureValueType>"}],type:"Bool"},{id:-1456907910,method:"account.getAuthorizationForm",params:[{name:"bot_id",type:"long"},{name:"scope",type:"string"},{name:"public_key",type:"string"}],type:"account.AuthorizationForm"},{id:-202552205,method:"account.acceptAuthorization",params:[{name:"bot_id",type:"long"},{name:"scope",type:"string"},{name:"public_key",type:"string"},{name:"value_hashes",type:"Vector<SecureValueHash>"},{name:"credentials",type:"SecureCredentialsEncrypted"}],type:"Bool"},{id:-1516022023,method:"account.sendVerifyPhoneCode",params:[{name:"phone_number",type:"string"},{name:"settings",type:"CodeSettings"}],type:"auth.SentCode"},{id:1305716726,method:"account.verifyPhone",params:[{name:"phone_number",type:"string"},{name:"phone_code_hash",type:"string"},{name:"phone_code",type:"string"}],type:"Bool"},{id:1880182943,method:"account.sendVerifyEmailCode",params:[{name:"email",type:"string"}],type:"account.SentEmailCode"},{id:-323339813,method:"account.verifyEmail",params:[{name:"email",type:"string"},{name:"code",type:"string"}],type:"Bool"},{id:-262453244,method:"account.initTakeoutSession",params:[{name:"flags",type:"#"},{name:"contacts",type:"flags.0?true"},{name:"message_users",type:"flags.1?true"},{name:"message_chats",type:"flags.2?true"},{name:"message_megagroups",type:"flags.3?true"},{name:"message_channels",type:"flags.4?true"},{name:"files",type:"flags.5?true"},{name:"file_max_size",type:"flags.5?int"}],type:"account.Takeout"},{id:489050862,method:"account.finishTakeoutSession",params:[{name:"flags",type:"#"},{name:"success",type:"flags.0?true"}],type:"Bool"},{id:-1881204448,method:"account.confirmPasswordEmail",params:[{name:"code",type:"string"}],type:"Bool"},{id:2055154197,method:"account.resendPasswordEmail",params:[],type:"Bool"},{id:-1043606090,method:"account.cancelPasswordEmail",params:[],type:"Bool"},{id:-1626880216,method:"account.getContactSignUpNotification",params:[],type:"Bool"},{id:-806076575,method:"account.setContactSignUpNotification",params:[{name:"silent",type:"Bool"}],type:"Bool"},{id:1398240377,method:"account.getNotifyExceptions",params:[{name:"flags",type:"#"},{name:"compare_sound",type:"flags.1?true"},{name:"peer",type:"flags.0?InputNotifyPeer"}],type:"Updates"},{id:-57811990,method:"account.getWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"}],type:"WallPaper"},{id:-578472351,method:"account.uploadWallPaper",params:[{name:"file",type:"InputFile"},{name:"mime_type",type:"string"},{name:"settings",type:"WallPaperSettings"}],type:"WallPaper"},{id:1817860919,method:"account.saveWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"},{name:"unsave",type:"Bool"},{name:"settings",type:"WallPaperSettings"}],type:"Bool"},{id:-18000023,method:"account.installWallPaper",params:[{name:"wallpaper",type:"InputWallPaper"},{name:"settings",type:"WallPaperSettings"}],type:"Bool"},{id:-1153722364,method:"account.resetWallPapers",params:[],type:"Bool"},{id:1457130303,method:"account.getAutoDownloadSettings",params:[],type:"account.AutoDownloadSettings"},{id:1995661875,method:"account.saveAutoDownloadSettings",params:[{name:"flags",type:"#"},{name:"low",type:"flags.0?true"},{name:"high",type:"flags.1?true"},{name:"settings",type:"AutoDownloadSettings"}],type:"Bool"},{id:473805619,method:"account.uploadTheme",params:[{name:"flags",type:"#"},{name:"file",type:"InputFile"},{name:"thumb",type:"flags.0?InputFile"},{name:"file_name",type:"string"},{name:"mime_type",type:"string"}],type:"Document"},{id:1697530880,method:"account.createTheme",params:[{name:"flags",type:"#"},{name:"slug",type:"string"},{name:"title",type:"string"},{name:"document",type:"flags.2?InputDocument"},{name:"settings",type:"flags.3?Vector<InputThemeSettings>"}],type:"Theme"},{id:737414348,method:"account.updateTheme",params:[{name:"flags",type:"#"},{name:"format",type:"string"},{name:"theme",type:"InputTheme"},{name:"slug",type:"flags.0?string"},{name:"title",type:"flags.1?string"},{name:"document",type:"flags.2?InputDocument"},{name:"settings",type:"flags.3?Vector<InputThemeSettings>"}],type:"Theme"},{id:-229175188,method:"account.saveTheme",params:[{name:"theme",type:"InputTheme"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:-953697477,method:"account.installTheme",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"theme",type:"flags.1?InputTheme"},{name:"format",type:"flags.2?string"},{name:"base_theme",type:"flags.3?BaseTheme"}],type:"Bool"},{id:-1919060949,method:"account.getTheme",params:[{name:"format",type:"string"},{name:"theme",type:"InputTheme"},{name:"document_id",type:"long"}],type:"Theme"},{id:1913054296,method:"account.getThemes",params:[{name:"format",type:"string"},{name:"hash",type:"long"}],type:"account.Themes"},{id:-1250643605,method:"account.setContentSettings",params:[{name:"flags",type:"#"},{name:"sensitive_enabled",type:"flags.0?true"}],type:"Bool"},{id:-1952756306,method:"account.getContentSettings",params:[],type:"account.ContentSettings"},{id:1705865692,method:"account.getMultiWallPapers",params:[{name:"wallpapers",type:"Vector<InputWallPaper>"}],type:"Vector<WallPaper>"},{id:-349483786,method:"account.getGlobalPrivacySettings",params:[],type:"GlobalPrivacySettings"},{id:517647042,method:"account.setGlobalPrivacySettings",params:[{name:"settings",type:"GlobalPrivacySettings"}],type:"GlobalPrivacySettings"},{id:-91437323,method:"account.reportProfilePhoto",params:[{name:"peer",type:"InputPeer"},{name:"photo_id",type:"InputPhoto"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:-1828139493,method:"account.resetPassword",params:[],type:"account.ResetPasswordResult"},{id:1284770294,method:"account.declinePasswordReset",params:[],type:"Bool"},{id:-700916087,method:"account.getChatThemes",params:[{name:"hash",type:"long"}],type:"account.Themes"},{id:-1081501024,method:"account.setAuthorizationTTL",params:[{name:"authorization_ttl_days",type:"int"}],type:"Bool"},{id:1089766498,method:"account.changeAuthorizationSettings",params:[{name:"flags",type:"#"},{name:"hash",type:"long"},{name:"encrypted_requests_disabled",type:"flags.0?Bool"},{name:"call_requests_disabled",type:"flags.1?Bool"}],type:"Bool"},{id:227648840,method:"users.getUsers",params:[{name:"id",type:"Vector<InputUser>"}],type:"Vector<User>"},{id:-1240508136,method:"users.getFullUser",params:[{name:"id",type:"InputUser"}],type:"users.UserFull"},{id:-1865902923,method:"users.setSecureValueErrors",params:[{name:"id",type:"InputUser"},{name:"errors",type:"Vector<SecureValueError>"}],type:"Bool"},{id:2061264541,method:"contacts.getContactIDs",params:[{name:"hash",type:"long"}],type:"Vector<int>"},{id:-995929106,method:"contacts.getStatuses",params:[],type:"Vector<ContactStatus>"},{id:1574346258,method:"contacts.getContacts",params:[{name:"hash",type:"long"}],type:"contacts.Contacts"},{id:746589157,method:"contacts.importContacts",params:[{name:"contacts",type:"Vector<InputContact>"}],type:"contacts.ImportedContacts"},{id:157945344,method:"contacts.deleteContacts",params:[{name:"id",type:"Vector<InputUser>"}],type:"Updates"},{id:269745566,method:"contacts.deleteByPhones",params:[{name:"phones",type:"Vector<string>"}],type:"Bool"},{id:1758204945,method:"contacts.block",params:[{name:"id",type:"InputPeer"}],type:"Bool"},{id:-1096393392,method:"contacts.unblock",params:[{name:"id",type:"InputPeer"}],type:"Bool"},{id:-176409329,method:"contacts.getBlocked",params:[{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"contacts.Blocked"},{id:301470424,method:"contacts.search",params:[{name:"q",type:"string"},{name:"limit",type:"int"}],type:"contacts.Found"},{id:-113456221,method:"contacts.resolveUsername",params:[{name:"username",type:"string"}],type:"contacts.ResolvedPeer"},{id:-1758168906,method:"contacts.getTopPeers",params:[{name:"flags",type:"#"},{name:"correspondents",type:"flags.0?true"},{name:"bots_pm",type:"flags.1?true"},{name:"bots_inline",type:"flags.2?true"},{name:"phone_calls",type:"flags.3?true"},{name:"forward_users",type:"flags.4?true"},{name:"forward_chats",type:"flags.5?true"},{name:"groups",type:"flags.10?true"},{name:"channels",type:"flags.15?true"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"contacts.TopPeers"},{id:451113900,method:"contacts.resetTopPeerRating",params:[{name:"category",type:"TopPeerCategory"},{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-2020263951,method:"contacts.resetSaved",params:[],type:"Bool"},{id:-2098076769,method:"contacts.getSaved",params:[],type:"Vector<SavedContact>"},{id:-2062238246,method:"contacts.toggleTopPeers",params:[{name:"enabled",type:"Bool"}],type:"Bool"},{id:-386636848,method:"contacts.addContact",params:[{name:"flags",type:"#"},{name:"add_phone_privacy_exception",type:"flags.0?true"},{name:"id",type:"InputUser"},{name:"first_name",type:"string"},{name:"last_name",type:"string"},{name:"phone",type:"string"}],type:"Updates"},{id:-130964977,method:"contacts.acceptContact",params:[{name:"id",type:"InputUser"}],type:"Updates"},{id:-750207932,method:"contacts.getLocated",params:[{name:"flags",type:"#"},{name:"background",type:"flags.1?true"},{name:"geo_point",type:"InputGeoPoint"},{name:"self_expires",type:"flags.0?int"}],type:"Updates"},{id:698914348,method:"contacts.blockFromReplies",params:[{name:"flags",type:"#"},{name:"delete_message",type:"flags.0?true"},{name:"delete_history",type:"flags.1?true"},{name:"report_spam",type:"flags.2?true"},{name:"msg_id",type:"int"}],type:"Updates"},{id:1673946374,method:"messages.getMessages",params:[{name:"id",type:"Vector<InputMessage>"}],type:"messages.Messages"},{id:-1594569905,method:"messages.getDialogs",params:[{name:"flags",type:"#"},{name:"exclude_pinned",type:"flags.0?true"},{name:"folder_id",type:"flags.1?int"},{name:"offset_date",type:"int"},{name:"offset_id",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Dialogs"},{id:1143203525,method:"messages.getHistory",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:-1593989278,method:"messages.search",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"q",type:"string"},{name:"from_id",type:"flags.0?InputPeer"},{name:"top_msg_id",type:"flags.1?int"},{name:"filter",type:"MessagesFilter"},{name:"min_date",type:"int"},{name:"max_date",type:"int"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:238054714,method:"messages.readHistory",params:[{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"}],type:"messages.AffectedMessages"},{id:-1332768214,method:"messages.deleteHistory",params:[{name:"flags",type:"#"},{name:"just_clear",type:"flags.0?true"},{name:"revoke",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"max_id",type:"int"},{name:"min_date",type:"flags.2?int"},{name:"max_date",type:"flags.3?int"}],type:"messages.AffectedHistory"},{id:-443640366,method:"messages.deleteMessages",params:[{name:"flags",type:"#"},{name:"revoke",type:"flags.0?true"},{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:94983360,method:"messages.receivedMessages",params:[{name:"max_id",type:"int"}],type:"Vector<ReceivedNotifyMessage>"},{id:1486110434,method:"messages.setTyping",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"top_msg_id",type:"flags.0?int"},{name:"action",type:"SendMessageAction"}],type:"Bool"},{id:228423076,method:"messages.sendMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"message",type:"string"},{name:"random_id",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:-497026848,method:"messages.sendMedia",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"media",type:"InputMedia"},{name:"message",type:"string"},{name:"random_id",type:"long"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:-869258997,method:"messages.forwardMessages",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"with_my_score",type:"flags.8?true"},{name:"drop_author",type:"flags.11?true"},{name:"drop_media_captions",type:"flags.12?true"},{name:"noforwards",type:"flags.14?true"},{name:"from_peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"random_id",type:"Vector<long>"},{name:"to_peer",type:"InputPeer"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:-820669733,method:"messages.reportSpam",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-270948702,method:"messages.getPeerSettings",params:[{name:"peer",type:"InputPeer"}],type:"messages.PeerSettings"},{id:-1991005362,method:"messages.report",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"reason",type:"ReportReason"},{name:"message",type:"string"}],type:"Bool"},{id:1240027791,method:"messages.getChats",params:[{name:"id",type:"Vector<long>"}],type:"messages.Chats"},{id:-1364194508,method:"messages.getFullChat",params:[{name:"chat_id",type:"long"}],type:"messages.ChatFull"},{id:1937260541,method:"messages.editChatTitle",params:[{name:"chat_id",type:"long"},{name:"title",type:"string"}],type:"Updates"},{id:903730804,method:"messages.editChatPhoto",params:[{name:"chat_id",type:"long"},{name:"photo",type:"InputChatPhoto"}],type:"Updates"},{id:-230206493,method:"messages.addChatUser",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"},{name:"fwd_limit",type:"int"}],type:"Updates"},{id:-1575461717,method:"messages.deleteChatUser",params:[{name:"flags",type:"#"},{name:"revoke_history",type:"flags.0?true"},{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:164303470,method:"messages.createChat",params:[{name:"users",type:"Vector<InputUser>"},{name:"title",type:"string"}],type:"Updates"},{id:651135312,method:"messages.getDhConfig",params:[{name:"version",type:"int"},{name:"random_length",type:"int"}],type:"messages.DhConfig"},{id:-162681021,method:"messages.requestEncryption",params:[{name:"user_id",type:"InputUser"},{name:"random_id",type:"int"},{name:"g_a",type:"bytes"}],type:"EncryptedChat"},{id:1035731989,method:"messages.acceptEncryption",params:[{name:"peer",type:"InputEncryptedChat"},{name:"g_b",type:"bytes"},{name:"key_fingerprint",type:"long"}],type:"EncryptedChat"},{id:-208425312,method:"messages.discardEncryption",params:[{name:"flags",type:"#"},{name:"delete_history",type:"flags.0?true"},{name:"chat_id",type:"int"}],type:"Bool"},{id:2031374829,method:"messages.setEncryptedTyping",params:[{name:"peer",type:"InputEncryptedChat"},{name:"typing",type:"Bool"}],type:"Bool"},{id:2135648522,method:"messages.readEncryptedHistory",params:[{name:"peer",type:"InputEncryptedChat"},{name:"max_date",type:"int"}],type:"Bool"},{id:1157265941,method:"messages.sendEncrypted",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"}],type:"messages.SentEncryptedMessage"},{id:1431914525,method:"messages.sendEncryptedFile",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"},{name:"file",type:"InputEncryptedFile"}],type:"messages.SentEncryptedMessage"},{id:852769188,method:"messages.sendEncryptedService",params:[{name:"peer",type:"InputEncryptedChat"},{name:"random_id",type:"long"},{name:"data",type:"bytes"}],type:"messages.SentEncryptedMessage"},{id:1436924774,method:"messages.receivedQueue",params:[{name:"max_qts",type:"int"}],type:"Vector<long>"},{id:1259113487,method:"messages.reportEncryptedSpam",params:[{name:"peer",type:"InputEncryptedChat"}],type:"Bool"},{id:916930423,method:"messages.readMessageContents",params:[{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:-710552671,method:"messages.getStickers",params:[{name:"emoticon",type:"string"},{name:"hash",type:"long"}],type:"messages.Stickers"},{id:-1197432408,method:"messages.getAllStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:-1956073268,method:"messages.getWebPagePreview",params:[{name:"flags",type:"#"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"MessageMedia"},{id:-1607670315,method:"messages.exportChatInvite",params:[{name:"flags",type:"#"},{name:"legacy_revoke_permanent",type:"flags.2?true"},{name:"request_needed",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"expire_date",type:"flags.0?int"},{name:"usage_limit",type:"flags.1?int"},{name:"title",type:"flags.4?string"}],type:"ExportedChatInvite"},{id:1051570619,method:"messages.checkChatInvite",params:[{name:"hash",type:"string"}],type:"ChatInvite"},{id:1817183516,method:"messages.importChatInvite",params:[{name:"hash",type:"string"}],type:"Updates"},{id:-928977804,method:"messages.getStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"hash",type:"int"}],type:"messages.StickerSet"},{id:-946871200,method:"messages.installStickerSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"archived",type:"Bool"}],type:"messages.StickerSetInstallResult"},{id:-110209570,method:"messages.uninstallStickerSet",params:[{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:-421563528,method:"messages.startBot",params:[{name:"bot",type:"InputUser"},{name:"peer",type:"InputPeer"},{name:"random_id",type:"long"},{name:"start_param",type:"string"}],type:"Updates"},{id:1468322785,method:"messages.getMessagesViews",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"},{name:"increment",type:"Bool"}],type:"messages.MessageViews"},{id:-1470377534,method:"messages.editChatAdmin",params:[{name:"chat_id",type:"long"},{name:"user_id",type:"InputUser"},{name:"is_admin",type:"Bool"}],type:"Bool"},{id:-1568189671,method:"messages.migrateChat",params:[{name:"chat_id",type:"long"}],type:"Updates"},{id:1271290010,method:"messages.searchGlobal",params:[{name:"flags",type:"#"},{name:"folder_id",type:"flags.0?int"},{name:"q",type:"string"},{name:"filter",type:"MessagesFilter"},{name:"min_date",type:"int"},{name:"max_date",type:"int"},{name:"offset_rate",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:2016638777,method:"messages.reorderStickerSets",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"order",type:"Vector<long>"}],type:"Bool"},{id:864953444,method:"messages.getDocumentByHash",params:[{name:"sha256",type:"bytes"},{name:"size",type:"int"},{name:"mime_type",type:"string"}],type:"Document"},{id:1559270965,method:"messages.getSavedGifs",params:[{name:"hash",type:"long"}],type:"messages.SavedGifs"},{id:846868683,method:"messages.saveGif",params:[{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:1364105629,method:"messages.getInlineBotResults",params:[{name:"flags",type:"#"},{name:"bot",type:"InputUser"},{name:"peer",type:"InputPeer"},{name:"geo_point",type:"flags.0?InputGeoPoint"},{name:"query",type:"string"},{name:"offset",type:"string"}],type:"messages.BotResults"},{id:-346119674,method:"messages.setInlineBotResults",params:[{name:"flags",type:"#"},{name:"gallery",type:"flags.0?true"},{name:"private",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"results",type:"Vector<InputBotInlineResult>"},{name:"cache_time",type:"int"},{name:"next_offset",type:"flags.2?string"},{name:"switch_pm",type:"flags.3?InlineBotSwitchPM"}],type:"Bool"},{id:2057376407,method:"messages.sendInlineBotResult",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"hide_via",type:"flags.11?true"},{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"random_id",type:"long"},{name:"query_id",type:"long"},{name:"id",type:"string"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:-39416522,method:"messages.getMessageEditData",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"messages.MessageEditData"},{id:1224152952,method:"messages.editMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"message",type:"flags.11?string"},{name:"media",type:"flags.14?InputMedia"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"},{name:"schedule_date",type:"flags.15?int"}],type:"Updates"},{id:-2091549254,method:"messages.editInlineBotMessage",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"id",type:"InputBotInlineMessageID"},{name:"message",type:"flags.11?string"},{name:"media",type:"flags.14?InputMedia"},{name:"reply_markup",type:"flags.2?ReplyMarkup"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"Bool"},{id:-1824339449,method:"messages.getBotCallbackAnswer",params:[{name:"flags",type:"#"},{name:"game",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"data",type:"flags.0?bytes"},{name:"password",type:"flags.2?InputCheckPasswordSRP"}],type:"messages.BotCallbackAnswer"},{id:-712043766,method:"messages.setBotCallbackAnswer",params:[{name:"flags",type:"#"},{name:"alert",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"message",type:"flags.0?string"},{name:"url",type:"flags.2?string"},{name:"cache_time",type:"int"}],type:"Bool"},{id:-462373635,method:"messages.getPeerDialogs",params:[{name:"peers",type:"Vector<InputDialogPeer>"}],type:"messages.PeerDialogs"},{id:-1137057461,method:"messages.saveDraft",params:[{name:"flags",type:"#"},{name:"no_webpage",type:"flags.1?true"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"peer",type:"InputPeer"},{name:"message",type:"string"},{name:"entities",type:"flags.3?Vector<MessageEntity>"}],type:"Bool"},{id:1782549861,method:"messages.getAllDrafts",params:[],type:"Updates"},{id:1685588756,method:"messages.getFeaturedStickers",params:[{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:1527873830,method:"messages.readFeaturedStickers",params:[{name:"id",type:"Vector<long>"}],type:"Bool"},{id:-1649852357,method:"messages.getRecentStickers",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"},{name:"hash",type:"long"}],type:"messages.RecentStickers"},{id:958863608,method:"messages.saveRecentSticker",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"},{name:"id",type:"InputDocument"},{name:"unsave",type:"Bool"}],type:"Bool"},{id:-1986437075,method:"messages.clearRecentStickers",params:[{name:"flags",type:"#"},{name:"attached",type:"flags.0?true"}],type:"Bool"},{id:1475442322,method:"messages.getArchivedStickers",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"offset_id",type:"long"},{name:"limit",type:"int"}],type:"messages.ArchivedStickers"},{id:1678738104,method:"messages.getMaskStickers",params:[{name:"hash",type:"long"}],type:"messages.AllStickers"},{id:-866424884,method:"messages.getAttachedStickers",params:[{name:"media",type:"InputStickeredMedia"}],type:"Vector<StickerSetCovered>"},{id:-1896289088,method:"messages.setGameScore",params:[{name:"flags",type:"#"},{name:"edit_message",type:"flags.0?true"},{name:"force",type:"flags.1?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"user_id",type:"InputUser"},{name:"score",type:"int"}],type:"Updates"},{id:363700068,method:"messages.setInlineGameScore",params:[{name:"flags",type:"#"},{name:"edit_message",type:"flags.0?true"},{name:"force",type:"flags.1?true"},{name:"id",type:"InputBotInlineMessageID"},{name:"user_id",type:"InputUser"},{name:"score",type:"int"}],type:"Bool"},{id:-400399203,method:"messages.getGameHighScores",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"user_id",type:"InputUser"}],type:"messages.HighScores"},{id:258170395,method:"messages.getInlineGameHighScores",params:[{name:"id",type:"InputBotInlineMessageID"},{name:"user_id",type:"InputUser"}],type:"messages.HighScores"},{id:-468934396,method:"messages.getCommonChats",params:[{name:"user_id",type:"InputUser"},{name:"max_id",type:"long"},{name:"limit",type:"int"}],type:"messages.Chats"},{id:-2023787330,method:"messages.getAllChats",params:[{name:"except_ids",type:"Vector<long>"}],type:"messages.Chats"},{id:852135825,method:"messages.getWebPage",params:[{name:"url",type:"string"},{name:"hash",type:"int"}],type:"WebPage"},{id:-1489903017,method:"messages.toggleDialogPin",params:[{name:"flags",type:"#"},{name:"pinned",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:991616823,method:"messages.reorderPinnedDialogs",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"folder_id",type:"int"},{name:"order",type:"Vector<InputDialogPeer>"}],type:"Bool"},{id:-692498958,method:"messages.getPinnedDialogs",params:[{name:"folder_id",type:"int"}],type:"messages.PeerDialogs"},{id:-436833542,method:"messages.setBotShippingResults",params:[{name:"flags",type:"#"},{name:"query_id",type:"long"},{name:"error",type:"flags.0?string"},{name:"shipping_options",type:"flags.1?Vector<ShippingOption>"}],type:"Bool"},{id:163765653,method:"messages.setBotPrecheckoutResults",params:[{name:"flags",type:"#"},{name:"success",type:"flags.1?true"},{name:"query_id",type:"long"},{name:"error",type:"flags.0?string"}],type:"Bool"},{id:1369162417,method:"messages.uploadMedia",params:[{name:"peer",type:"InputPeer"},{name:"media",type:"InputMedia"}],type:"MessageMedia"},{id:-914493408,method:"messages.sendScreenshotNotification",params:[{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"int"},{name:"random_id",type:"long"}],type:"Updates"},{id:82946729,method:"messages.getFavedStickers",params:[{name:"hash",type:"long"}],type:"messages.FavedStickers"},{id:-1174420133,method:"messages.faveSticker",params:[{name:"id",type:"InputDocument"},{name:"unfave",type:"Bool"}],type:"Bool"},{id:1180140658,method:"messages.getUnreadMentions",params:[{name:"peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"}],type:"messages.Messages"},{id:251759059,method:"messages.readMentions",params:[{name:"peer",type:"InputPeer"}],type:"messages.AffectedHistory"},{id:1881817312,method:"messages.getRecentLocations",params:[{name:"peer",type:"InputPeer"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:-134016113,method:"messages.sendMultiMedia",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.5?true"},{name:"background",type:"flags.6?true"},{name:"clear_draft",type:"flags.7?true"},{name:"noforwards",type:"flags.14?true"},{name:"peer",type:"InputPeer"},{name:"reply_to_msg_id",type:"flags.0?int"},{name:"multi_media",type:"Vector<InputSingleMedia>"},{name:"schedule_date",type:"flags.10?int"},{name:"send_as",type:"flags.13?InputPeer"}],type:"Updates"},{id:1347929239,method:"messages.uploadEncryptedFile",params:[{name:"peer",type:"InputEncryptedChat"},{name:"file",type:"InputEncryptedFile"}],type:"EncryptedFile"},{id:896555914,method:"messages.searchStickerSets",params:[{name:"flags",type:"#"},{name:"exclude_featured",type:"flags.0?true"},{name:"q",type:"string"},{name:"hash",type:"long"}],type:"messages.FoundStickerSets"},{id:486505992,method:"messages.getSplitRanges",params:[],type:"Vector<MessageRange>"},{id:-1031349873,method:"messages.markDialogUnread",params:[{name:"flags",type:"#"},{name:"unread",type:"flags.0?true"},{name:"peer",type:"InputDialogPeer"}],type:"Bool"},{id:585256482,method:"messages.getDialogUnreadMarks",params:[],type:"Vector<DialogPeer>"},{id:2119757468,method:"messages.clearAllDrafts",params:[],type:"Bool"},{id:-760547348,method:"messages.updatePinnedMessage",params:[{name:"flags",type:"#"},{name:"silent",type:"flags.0?true"},{name:"unpin",type:"flags.1?true"},{name:"pm_oneside",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"}],type:"Updates"},{id:283795844,method:"messages.sendVote",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"options",type:"Vector<bytes>"}],type:"Updates"},{id:1941660731,method:"messages.getPollResults",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Updates"},{id:1848369232,method:"messages.getOnlines",params:[{name:"peer",type:"InputPeer"}],type:"ChatOnlines"},{id:-554301545,method:"messages.editChatAbout",params:[{name:"peer",type:"InputPeer"},{name:"about",type:"string"}],type:"Bool"},{id:-1517917375,method:"messages.editChatDefaultBannedRights",params:[{name:"peer",type:"InputPeer"},{name:"banned_rights",type:"ChatBannedRights"}],type:"Updates"},{id:899735650,method:"messages.getEmojiKeywords",params:[{name:"lang_code",type:"string"}],type:"EmojiKeywordsDifference"},{id:352892591,method:"messages.getEmojiKeywordsDifference",params:[{name:"lang_code",type:"string"},{name:"from_version",type:"int"}],type:"EmojiKeywordsDifference"},{id:1318675378,method:"messages.getEmojiKeywordsLanguages",params:[{name:"lang_codes",type:"Vector<string>"}],type:"Vector<EmojiLanguage>"},{id:-709817306,method:"messages.getEmojiURL",params:[{name:"lang_code",type:"string"}],type:"EmojiURL"},{id:1932455680,method:"messages.getSearchCounters",params:[{name:"peer",type:"InputPeer"},{name:"filters",type:"Vector<MessagesFilter>"}],type:"Vector<messages.SearchCounter>"},{id:428848198,method:"messages.requestUrlAuth",params:[{name:"flags",type:"#"},{name:"peer",type:"flags.1?InputPeer"},{name:"msg_id",type:"flags.1?int"},{name:"button_id",type:"flags.1?int"},{name:"url",type:"flags.2?string"}],type:"UrlAuthResult"},{id:-1322487515,method:"messages.acceptUrlAuth",params:[{name:"flags",type:"#"},{name:"write_allowed",type:"flags.0?true"},{name:"peer",type:"flags.1?InputPeer"},{name:"msg_id",type:"flags.1?int"},{name:"button_id",type:"flags.1?int"},{name:"url",type:"flags.2?string"}],type:"UrlAuthResult"},{id:1336717624,method:"messages.hidePeerSettingsBar",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-183077365,method:"messages.getScheduledHistory",params:[{name:"peer",type:"InputPeer"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:-1111817116,method:"messages.getScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"messages.Messages"},{id:-1120369398,method:"messages.sendScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:1504586518,method:"messages.deleteScheduledMessages",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:-1200736242,method:"messages.getPollVotes",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"option",type:"flags.0?bytes"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"messages.VotesList"},{id:-1257951254,method:"messages.toggleStickerSets",params:[{name:"flags",type:"#"},{name:"uninstall",type:"flags.0?true"},{name:"archive",type:"flags.1?true"},{name:"unarchive",type:"flags.2?true"},{name:"stickersets",type:"Vector<InputStickerSet>"}],type:"Bool"},{id:-241247891,method:"messages.getDialogFilters",params:[],type:"Vector<DialogFilter>"},{id:-1566780372,method:"messages.getSuggestedDialogFilters",params:[],type:"Vector<DialogFilterSuggested>"},{id:450142282,method:"messages.updateDialogFilter",params:[{name:"flags",type:"#"},{name:"id",type:"int"},{name:"filter",type:"flags.0?DialogFilter"}],type:"Bool"},{id:-983318044,method:"messages.updateDialogFiltersOrder",params:[{name:"order",type:"Vector<int>"}],type:"Bool"},{id:2127598753,method:"messages.getOldFeaturedStickers",params:[{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"messages.FeaturedStickers"},{id:584962828,method:"messages.getReplies",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"},{name:"add_offset",type:"int"},{name:"limit",type:"int"},{name:"max_id",type:"int"},{name:"min_id",type:"int"},{name:"hash",type:"long"}],type:"messages.Messages"},{id:1147761405,method:"messages.getDiscussionMessage",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"messages.DiscussionMessage"},{id:-147740172,method:"messages.readDiscussion",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"read_max_id",type:"int"}],type:"Bool"},{id:-265962357,method:"messages.unpinAllMessages",params:[{name:"peer",type:"InputPeer"}],type:"messages.AffectedHistory"},{id:1540419152,method:"messages.deleteChat",params:[{name:"chat_id",type:"long"}],type:"Bool"},{id:-104078327,method:"messages.deletePhoneCallHistory",params:[{name:"flags",type:"#"},{name:"revoke",type:"flags.0?true"}],type:"messages.AffectedFoundMessages"},{id:1140726259,method:"messages.checkHistoryImport",params:[{name:"import_head",type:"string"}],type:"messages.HistoryImportParsed"},{id:873008187,method:"messages.initHistoryImport",params:[{name:"peer",type:"InputPeer"},{name:"file",type:"InputFile"},{name:"media_count",type:"int"}],type:"messages.HistoryImport"},{id:713433234,method:"messages.uploadImportedMedia",params:[{name:"peer",type:"InputPeer"},{name:"import_id",type:"long"},{name:"file_name",type:"string"},{name:"media",type:"InputMedia"}],type:"MessageMedia"},{id:-1271008444,method:"messages.startHistoryImport",params:[{name:"peer",type:"InputPeer"},{name:"import_id",type:"long"}],type:"Bool"},{id:-1565154314,method:"messages.getExportedChatInvites",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.3?true"},{name:"peer",type:"InputPeer"},{name:"admin_id",type:"InputUser"},{name:"offset_date",type:"flags.2?int"},{name:"offset_link",type:"flags.2?string"},{name:"limit",type:"int"}],type:"messages.ExportedChatInvites"},{id:1937010524,method:"messages.getExportedChatInvite",params:[{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"messages.ExportedChatInvite"},{id:-1110823051,method:"messages.editExportedChatInvite",params:[{name:"flags",type:"#"},{name:"revoked",type:"flags.2?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"string"},{name:"expire_date",type:"flags.0?int"},{name:"usage_limit",type:"flags.1?int"},{name:"request_needed",type:"flags.3?Bool"},{name:"title",type:"flags.4?string"}],type:"messages.ExportedChatInvite"},{id:1452833749,method:"messages.deleteRevokedExportedChatInvites",params:[{name:"peer",type:"InputPeer"},{name:"admin_id",type:"InputUser"}],type:"Bool"},{id:-731601877,method:"messages.deleteExportedChatInvite",params:[{name:"peer",type:"InputPeer"},{name:"link",type:"string"}],type:"Bool"},{id:958457583,method:"messages.getAdminsWithInvites",params:[{name:"peer",type:"InputPeer"}],type:"messages.ChatAdminsWithInvites"},{id:-553329330,method:"messages.getChatInviteImporters",params:[{name:"flags",type:"#"},{name:"requested",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"flags.1?string"},{name:"q",type:"flags.2?string"},{name:"offset_date",type:"int"},{name:"offset_user",type:"InputUser"},{name:"limit",type:"int"}],type:"messages.ChatInviteImporters"},{id:-1207017500,method:"messages.setHistoryTTL",params:[{name:"peer",type:"InputPeer"},{name:"period",type:"int"}],type:"Updates"},{id:1573261059,method:"messages.checkHistoryImportPeer",params:[{name:"peer",type:"InputPeer"}],type:"messages.CheckedHistoryImportPeer"},{id:-432283329,method:"messages.setChatTheme",params:[{name:"peer",type:"InputPeer"},{name:"emoticon",type:"string"}],type:"Updates"},{id:745510839,method:"messages.getMessageReadParticipants",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"Vector<long>"},{id:1240514025,method:"messages.getSearchResultsCalendar",params:[{name:"peer",type:"InputPeer"},{name:"filter",type:"MessagesFilter"},{name:"offset_id",type:"int"},{name:"offset_date",type:"int"}],type:"messages.SearchResultsCalendar"},{id:1855292323,method:"messages.getSearchResultsPositions",params:[{name:"peer",type:"InputPeer"},{name:"filter",type:"MessagesFilter"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.SearchResultsPositions"},{id:2145904661,method:"messages.hideChatJoinRequest",params:[{name:"flags",type:"#"},{name:"approved",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"user_id",type:"InputUser"}],type:"Updates"},{id:-528091926,method:"messages.hideAllChatJoinRequests",params:[{name:"flags",type:"#"},{name:"approved",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"link",type:"flags.1?string"}],type:"Updates"},{id:-1323389022,method:"messages.toggleNoForwards",params:[{name:"peer",type:"InputPeer"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-855777386,method:"messages.saveDefaultSendAs",params:[{name:"peer",type:"InputPeer"},{name:"send_as",type:"InputPeer"}],type:"Bool"},{id:627641572,method:"messages.sendReaction",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"reaction",type:"flags.0?string"}],type:"Updates"},{id:-1950707482,method:"messages.getMessagesReactions",params:[{name:"peer",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Updates"},{id:-521245833,method:"messages.getMessageReactionsList",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"id",type:"int"},{name:"reaction",type:"flags.0?string"},{name:"offset",type:"flags.1?string"},{name:"limit",type:"int"}],type:"messages.MessageReactionsList"},{id:335875750,method:"messages.setChatAvailableReactions",params:[{name:"peer",type:"InputPeer"},{name:"available_reactions",type:"Vector<string>"}],type:"Updates"},{id:417243308,method:"messages.getAvailableReactions",params:[{name:"hash",type:"int"}],type:"messages.AvailableReactions"},{id:-647969580,method:"messages.setDefaultReaction",params:[{name:"reaction",type:"string"}],type:"Bool"},{id:-304838614,method:"updates.getState",params:[],type:"updates.State"},{id:630429265,method:"updates.getDifference",params:[{name:"flags",type:"#"},{name:"pts",type:"int"},{name:"pts_total_limit",type:"flags.0?int"},{name:"date",type:"int"},{name:"qts",type:"int"}],type:"updates.Difference"},{id:51854712,method:"updates.getChannelDifference",params:[{name:"flags",type:"#"},{name:"force",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"filter",type:"ChannelMessagesFilter"},{name:"pts",type:"int"},{name:"limit",type:"int"}],type:"updates.ChannelDifference"},{id:1926525996,method:"photos.updateProfilePhoto",params:[{name:"id",type:"InputPhoto"}],type:"photos.Photo"},{id:-1980559511,method:"photos.uploadProfilePhoto",params:[{name:"flags",type:"#"},{name:"file",type:"flags.0?InputFile"},{name:"video",type:"flags.1?InputFile"},{name:"video_start_ts",type:"flags.2?double"}],type:"photos.Photo"},{id:-2016444625,method:"photos.deletePhotos",params:[{name:"id",type:"Vector<InputPhoto>"}],type:"Vector<long>"},{id:-1848823128,method:"photos.getUserPhotos",params:[{name:"user_id",type:"InputUser"},{name:"offset",type:"int"},{name:"max_id",type:"long"},{name:"limit",type:"int"}],type:"photos.Photos"},{id:-1291540959,method:"upload.saveFilePart",params:[{name:"file_id",type:"long"},{name:"file_part",type:"int"},{name:"bytes",type:"bytes"}],type:"Bool"},{id:-1319462148,method:"upload.getFile",params:[{name:"flags",type:"#"},{name:"precise",type:"flags.0?true"},{name:"cdn_supported",type:"flags.1?true"},{name:"location",type:"InputFileLocation"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"upload.File"},{id:-562337987,method:"upload.saveBigFilePart",params:[{name:"file_id",type:"long"},{name:"file_part",type:"int"},{name:"file_total_parts",type:"int"},{name:"bytes",type:"bytes"}],type:"Bool"},{id:619086221,method:"upload.getWebFile",params:[{name:"location",type:"InputWebFileLocation"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"upload.WebFile"},{id:536919235,method:"upload.getCdnFile",params:[{name:"file_token",type:"bytes"},{name:"offset",type:"int"},{name:"limit",type:"int"}],type:"upload.CdnFile"},{id:-1691921240,method:"upload.reuploadCdnFile",params:[{name:"file_token",type:"bytes"},{name:"request_token",type:"bytes"}],type:"Vector<FileHash>"},{id:1302676017,method:"upload.getCdnFileHashes",params:[{name:"file_token",type:"bytes"},{name:"offset",type:"int"}],type:"Vector<FileHash>"},{id:-956147407,method:"upload.getFileHashes",params:[{name:"location",type:"InputFileLocation"},{name:"offset",type:"int"}],type:"Vector<FileHash>"},{id:-990308245,method:"help.getConfig",params:[],type:"Config"},{id:531836966,method:"help.getNearestDc",params:[],type:"NearestDc"},{id:1378703997,method:"help.getAppUpdate",params:[{name:"source",type:"string"}],type:"help.AppUpdate"},{id:1295590211,method:"help.getInviteText",params:[],type:"help.InviteText"},{id:-1663104819,method:"help.getSupport",params:[],type:"help.Support"},{id:-1877938321,method:"help.getAppChangelog",params:[{name:"prev_app_version",type:"string"}],type:"Updates"},{id:-333262899,method:"help.setBotUpdatesStatus",params:[{name:"pending_updates_count",type:"int"},{name:"message",type:"string"}],type:"Bool"},{id:1375900482,method:"help.getCdnConfig",params:[],type:"CdnConfig"},{id:1036054804,method:"help.getRecentMeUrls",params:[{name:"referer",type:"string"}],type:"help.RecentMeUrls"},{id:749019089,method:"help.getTermsOfServiceUpdate",params:[],type:"help.TermsOfServiceUpdate"},{id:-294455398,method:"help.acceptTermsOfService",params:[{name:"id",type:"DataJSON"}],type:"Bool"},{id:1072547679,method:"help.getDeepLinkInfo",params:[{name:"path",type:"string"}],type:"help.DeepLinkInfo"},{id:-1735311088,method:"help.getAppConfig",params:[],type:"JSONValue"},{id:1862465352,method:"help.saveAppLog",params:[{name:"events",type:"Vector<InputAppEvent>"}],type:"Bool"},{id:-966677240,method:"help.getPassportConfig",params:[{name:"hash",type:"int"}],type:"help.PassportConfig"},{id:-748624084,method:"help.getSupportName",params:[],type:"help.SupportName"},{id:59377875,method:"help.getUserInfo",params:[{name:"user_id",type:"InputUser"}],type:"help.UserInfo"},{id:1723407216,method:"help.editUserInfo",params:[{name:"user_id",type:"InputUser"},{name:"message",type:"string"},{name:"entities",type:"Vector<MessageEntity>"}],type:"help.UserInfo"},{id:-1063816159,method:"help.getPromoData",params:[],type:"help.PromoData"},{id:505748629,method:"help.hidePromoData",params:[{name:"peer",type:"InputPeer"}],type:"Bool"},{id:-183649631,method:"help.dismissSuggestion",params:[{name:"peer",type:"InputPeer"},{name:"suggestion",type:"string"}],type:"Bool"},{id:1935116200,method:"help.getCountriesList",params:[{name:"lang_code",type:"string"},{name:"hash",type:"int"}],type:"help.CountriesList"},{id:-871347913,method:"channels.readHistory",params:[{name:"channel",type:"InputChannel"},{name:"max_id",type:"int"}],type:"Bool"},{id:-2067661490,method:"channels.deleteMessages",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<int>"}],type:"messages.AffectedMessages"},{id:-196443371,method:"channels.reportSpam",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-1383294429,method:"channels.getMessages",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<InputMessage>"}],type:"messages.Messages"},{id:2010044880,method:"channels.getParticipants",params:[{name:"channel",type:"InputChannel"},{name:"filter",type:"ChannelParticipantsFilter"},{name:"offset",type:"int"},{name:"limit",type:"int"},{name:"hash",type:"long"}],type:"channels.ChannelParticipants"},{id:-1599378234,method:"channels.getParticipant",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"}],type:"channels.ChannelParticipant"},{id:176122811,method:"channels.getChannels",params:[{name:"id",type:"Vector<InputChannel>"}],type:"messages.Chats"},{id:141781513,method:"channels.getFullChannel",params:[{name:"channel",type:"InputChannel"}],type:"messages.ChatFull"},{id:1029681423,method:"channels.createChannel",params:[{name:"flags",type:"#"},{name:"broadcast",type:"flags.0?true"},{name:"megagroup",type:"flags.1?true"},{name:"for_import",type:"flags.3?true"},{name:"title",type:"string"},{name:"about",type:"string"},{name:"geo_point",type:"flags.2?InputGeoPoint"},{name:"address",type:"flags.2?string"}],type:"Updates"},{id:-751007486,method:"channels.editAdmin",params:[{name:"channel",type:"InputChannel"},{name:"user_id",type:"InputUser"},{name:"admin_rights",type:"ChatAdminRights"},{name:"rank",type:"string"}],type:"Updates"},{id:1450044624,method:"channels.editTitle",params:[{name:"channel",type:"InputChannel"},{name:"title",type:"string"}],type:"Updates"},{id:-248621111,method:"channels.editPhoto",params:[{name:"channel",type:"InputChannel"},{name:"photo",type:"InputChatPhoto"}],type:"Updates"},{id:283557164,method:"channels.checkUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"}],type:"Bool"},{id:890549214,method:"channels.updateUsername",params:[{name:"channel",type:"InputChannel"},{name:"username",type:"string"}],type:"Bool"},{id:615851205,method:"channels.joinChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-130635115,method:"channels.leaveChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:429865580,method:"channels.inviteToChannel",params:[{name:"channel",type:"InputChannel"},{name:"users",type:"Vector<InputUser>"}],type:"Updates"},{id:-1072619549,method:"channels.deleteChannel",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-432034325,method:"channels.exportMessageLink",params:[{name:"flags",type:"#"},{name:"grouped",type:"flags.0?true"},{name:"thread",type:"flags.1?true"},{name:"channel",type:"InputChannel"},{name:"id",type:"int"}],type:"ExportedMessageLink"},{id:527021574,method:"channels.toggleSignatures",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-122669393,method:"channels.getAdminedPublicChannels",params:[{name:"flags",type:"#"},{name:"by_location",type:"flags.0?true"},{name:"check_limit",type:"flags.1?true"}],type:"messages.Chats"},{id:-1763259007,method:"channels.editBanned",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"},{name:"banned_rights",type:"ChatBannedRights"}],type:"Updates"},{id:870184064,method:"channels.getAdminLog",params:[{name:"flags",type:"#"},{name:"channel",type:"InputChannel"},{name:"q",type:"string"},{name:"events_filter",type:"flags.0?ChannelAdminLogEventsFilter"},{name:"admins",type:"flags.1?Vector<InputUser>"},{name:"max_id",type:"long"},{name:"min_id",type:"long"},{name:"limit",type:"int"}],type:"channels.AdminLogResults"},{id:-359881479,method:"channels.setStickers",params:[{name:"channel",type:"InputChannel"},{name:"stickerset",type:"InputStickerSet"}],type:"Bool"},{id:-357180360,method:"channels.readMessageContents",params:[{name:"channel",type:"InputChannel"},{name:"id",type:"Vector<int>"}],type:"Bool"},{id:-1355375294,method:"channels.deleteHistory",params:[{name:"channel",type:"InputChannel"},{name:"max_id",type:"int"}],type:"Bool"},{id:-356796084,method:"channels.togglePreHistoryHidden",params:[{name:"channel",type:"InputChannel"},{name:"enabled",type:"Bool"}],type:"Updates"},{id:-2092831552,method:"channels.getLeftChannels",params:[{name:"offset",type:"int"}],type:"messages.Chats"},{id:-170208392,method:"channels.getGroupsForDiscussion",params:[],type:"messages.Chats"},{id:1079520178,method:"channels.setDiscussionGroup",params:[{name:"broadcast",type:"InputChannel"},{name:"group",type:"InputChannel"}],type:"Bool"},{id:-1892102881,method:"channels.editCreator",params:[{name:"channel",type:"InputChannel"},{name:"user_id",type:"InputUser"},{name:"password",type:"InputCheckPasswordSRP"}],type:"Updates"},{id:1491484525,method:"channels.editLocation",params:[{name:"channel",type:"InputChannel"},{name:"geo_point",type:"InputGeoPoint"},{name:"address",type:"string"}],type:"Bool"},{id:-304832784,method:"channels.toggleSlowMode",params:[{name:"channel",type:"InputChannel"},{name:"seconds",type:"int"}],type:"Updates"},{id:300429806,method:"channels.getInactiveChannels",params:[],type:"messages.InactiveChats"},{id:187239529,method:"channels.convertToGigagroup",params:[{name:"channel",type:"InputChannel"}],type:"Updates"},{id:-1095836780,method:"channels.viewSponsoredMessage",params:[{name:"channel",type:"InputChannel"},{name:"random_id",type:"bytes"}],type:"Bool"},{id:-333377601,method:"channels.getSponsoredMessages",params:[{name:"channel",type:"InputChannel"}],type:"messages.SponsoredMessages"},{id:231174382,method:"channels.getSendAs",params:[{name:"peer",type:"InputPeer"}],type:"channels.SendAsPeers"},{id:913655003,method:"channels.deleteParticipantHistory",params:[{name:"channel",type:"InputChannel"},{name:"participant",type:"InputPeer"}],type:"messages.AffectedHistory"},{id:-1440257555,method:"bots.sendCustomRequest",params:[{name:"custom_method",type:"string"},{name:"params",type:"DataJSON"}],type:"DataJSON"},{id:-434028723,method:"bots.answerWebhookJSONQuery",params:[{name:"query_id",type:"long"},{name:"data",type:"DataJSON"}],type:"Bool"},{id:85399130,method:"bots.setBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"},{name:"commands",type:"Vector<BotCommand>"}],type:"Bool"},{id:1032708345,method:"bots.resetBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"}],type:"Bool"},{id:-481554986,method:"bots.getBotCommands",params:[{name:"scope",type:"BotCommandScope"},{name:"lang_code",type:"string"}],type:"Vector<BotCommand>"},{id:-1976353651,method:"payments.getPaymentForm",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"theme_params",type:"flags.0?DataJSON"}],type:"payments.PaymentForm"},{id:611897804,method:"payments.getPaymentReceipt",params:[{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"}],type:"payments.PaymentReceipt"},{id:-619695760,method:"payments.validateRequestedInfo",params:[{name:"flags",type:"#"},{name:"save",type:"flags.0?true"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"info",type:"PaymentRequestedInfo"}],type:"payments.ValidatedRequestedInfo"},{id:818134173,method:"payments.sendPaymentForm",params:[{name:"flags",type:"#"},{name:"form_id",type:"long"},{name:"peer",type:"InputPeer"},{name:"msg_id",type:"int"},{name:"requested_info_id",type:"flags.0?string"},{name:"shipping_option_id",type:"flags.1?string"},{name:"credentials",type:"InputPaymentCredentials"},{name:"tip_amount",type:"flags.2?long"}],type:"payments.PaymentResult"},{id:578650699,method:"payments.getSavedInfo",params:[],type:"payments.SavedInfo"},{id:-667062079,method:"payments.clearSavedInfo",params:[{name:"flags",type:"#"},{name:"credentials",type:"flags.0?true"},{name:"info",type:"flags.1?true"}],type:"Bool"},{id:779736953,method:"payments.getBankCardData",params:[{name:"number",type:"string"}],type:"payments.BankCardData"},{id:-1876841625,method:"stickers.createStickerSet",params:[{name:"flags",type:"#"},{name:"masks",type:"flags.0?true"},{name:"animated",type:"flags.1?true"},{name:"user_id",type:"InputUser"},{name:"title",type:"string"},{name:"short_name",type:"string"},{name:"thumb",type:"flags.2?InputDocument"},{name:"stickers",type:"Vector<InputStickerSetItem>"},{name:"software",type:"flags.3?string"}],type:"messages.StickerSet"},{id:-143257775,method:"stickers.removeStickerFromSet",params:[{name:"sticker",type:"InputDocument"}],type:"messages.StickerSet"},{id:-4795190,method:"stickers.changeStickerPosition",params:[{name:"sticker",type:"InputDocument"},{name:"position",type:"int"}],type:"messages.StickerSet"},{id:-2041315650,method:"stickers.addStickerToSet",params:[{name:"stickerset",type:"InputStickerSet"},{name:"sticker",type:"InputStickerSetItem"}],type:"messages.StickerSet"},{id:-1707717072,method:"stickers.setStickerSetThumb",params:[{name:"stickerset",type:"InputStickerSet"},{name:"thumb",type:"InputDocument"}],type:"messages.StickerSet"},{id:676017721,method:"stickers.checkShortName",params:[{name:"short_name",type:"string"}],type:"Bool"},{id:1303364867,method:"stickers.suggestShortName",params:[{name:"title",type:"string"}],type:"stickers.SuggestedShortName"},{id:1430593449,method:"phone.getCallConfig",params:[],type:"DataJSON"},{id:1124046573,method:"phone.requestCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"user_id",type:"InputUser"},{name:"random_id",type:"int"},{name:"g_a_hash",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:1003664544,method:"phone.acceptCall",params:[{name:"peer",type:"InputPhoneCall"},{name:"g_b",type:"bytes"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:788404002,method:"phone.confirmCall",params:[{name:"peer",type:"InputPhoneCall"},{name:"g_a",type:"bytes"},{name:"key_fingerprint",type:"long"},{name:"protocol",type:"PhoneCallProtocol"}],type:"phone.PhoneCall"},{id:399855457,method:"phone.receivedCall",params:[{name:"peer",type:"InputPhoneCall"}],type:"Bool"},{id:-1295269440,method:"phone.discardCall",params:[{name:"flags",type:"#"},{name:"video",type:"flags.0?true"},{name:"peer",type:"InputPhoneCall"},{name:"duration",type:"int"},{name:"reason",type:"PhoneCallDiscardReason"},{name:"connection_id",type:"long"}],type:"Updates"},{id:1508562471,method:"phone.setCallRating",params:[{name:"flags",type:"#"},{name:"user_initiative",type:"flags.0?true"},{name:"peer",type:"InputPhoneCall"},{name:"rating",type:"int"},{name:"comment",type:"string"}],type:"Updates"},{id:662363518,method:"phone.saveCallDebug",params:[{name:"peer",type:"InputPhoneCall"},{name:"debug",type:"DataJSON"}],type:"Bool"},{id:-8744061,method:"phone.sendSignalingData",params:[{name:"peer",type:"InputPhoneCall"},{name:"data",type:"bytes"}],type:"Bool"},{id:1221445336,method:"phone.createGroupCall",params:[{name:"flags",type:"#"},{name:"peer",type:"InputPeer"},{name:"random_id",type:"int"},{name:"title",type:"flags.0?string"},{name:"schedule_date",type:"flags.1?int"}],type:"Updates"},{id:-1322057861,method:"phone.joinGroupCall",params:[{name:"flags",type:"#"},{name:"muted",type:"flags.0?true"},{name:"video_stopped",type:"flags.2?true"},{name:"call",type:"InputGroupCall"},{name:"join_as",type:"InputPeer"},{name:"invite_hash",type:"flags.1?string"},{name:"params",type:"DataJSON"}],type:"Updates"},{id:1342404601,method:"phone.leaveGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"source",type:"int"}],type:"Updates"},{id:2067345760,method:"phone.inviteToGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"users",type:"Vector<InputUser>"}],type:"Updates"},{id:2054648117,method:"phone.discardGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:1958458429,method:"phone.toggleGroupCallSettings",params:[{name:"flags",type:"#"},{name:"reset_invite_hash",type:"flags.1?true"},{name:"call",type:"InputGroupCall"},{name:"join_muted",type:"flags.0?Bool"}],type:"Updates"},{id:68699611,method:"phone.getGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"limit",type:"int"}],type:"phone.GroupCall"},{id:-984033109,method:"phone.getGroupParticipants",params:[{name:"call",type:"InputGroupCall"},{name:"ids",type:"Vector<InputPeer>"},{name:"sources",type:"Vector<int>"},{name:"offset",type:"string"},{name:"limit",type:"int"}],type:"phone.GroupParticipants"},{id:-1248003721,method:"phone.checkGroupCall",params:[{name:"call",type:"InputGroupCall"},{name:"sources",type:"Vector<int>"}],type:"Vector<int>"},{id:-248985848,method:"phone.toggleGroupCallRecord",params:[{name:"flags",type:"#"},{name:"start",type:"flags.0?true"},{name:"video",type:"flags.2?true"},{name:"call",type:"InputGroupCall"},{name:"title",type:"flags.1?string"},{name:"video_portrait",type:"flags.2?Bool"}],type:"Updates"},{id:-1524155713,method:"phone.editGroupCallParticipant",params:[{name:"flags",type:"#"},{name:"call",type:"InputGroupCall"},{name:"participant",type:"InputPeer"},{name:"muted",type:"flags.0?Bool"},{name:"volume",type:"flags.1?int"},{name:"raise_hand",type:"flags.2?Bool"},{name:"video_stopped",type:"flags.3?Bool"},{name:"video_paused",type:"flags.4?Bool"},{name:"presentation_paused",type:"flags.5?Bool"}],type:"Updates"},{id:480685066,method:"phone.editGroupCallTitle",params:[{name:"call",type:"InputGroupCall"},{name:"title",type:"string"}],type:"Updates"},{id:-277077702,method:"phone.getGroupCallJoinAs",params:[{name:"peer",type:"InputPeer"}],type:"phone.JoinAsPeers"},{id:-425040769,method:"phone.exportGroupCallInvite",params:[{name:"flags",type:"#"},{name:"can_self_unmute",type:"flags.0?true"},{name:"call",type:"InputGroupCall"}],type:"phone.ExportedGroupCallInvite"},{id:563885286,method:"phone.toggleGroupCallStartSubscription",params:[{name:"call",type:"InputGroupCall"},{name:"subscribed",type:"Bool"}],type:"Updates"},{id:1451287362,method:"phone.startScheduledGroupCall",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:1465786252,method:"phone.saveDefaultGroupCallJoinAs",params:[{name:"peer",type:"InputPeer"},{name:"join_as",type:"InputPeer"}],type:"Bool"},{id:-873829436,method:"phone.joinGroupCallPresentation",params:[{name:"call",type:"InputGroupCall"},{name:"params",type:"DataJSON"}],type:"Updates"},{id:475058500,method:"phone.leaveGroupCallPresentation",params:[{name:"call",type:"InputGroupCall"}],type:"Updates"},{id:-219008246,method:"langpack.getLangPack",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"}],type:"LangPackDifference"},{id:-269862909,method:"langpack.getStrings",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"keys",type:"Vector<string>"}],type:"Vector<LangPackString>"},{id:-845657435,method:"langpack.getDifference",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"},{name:"from_version",type:"int"}],type:"LangPackDifference"},{id:1120311183,method:"langpack.getLanguages",params:[{name:"lang_pack",type:"string"}],type:"Vector<LangPackLanguage>"},{id:1784243458,method:"langpack.getLanguage",params:[{name:"lang_pack",type:"string"},{name:"lang_code",type:"string"}],type:"LangPackLanguage"},{id:1749536939,method:"folders.editPeerFolders",params:[{name:"folder_peers",type:"Vector<InputFolderPeer>"}],type:"Updates"},{id:472471681,method:"folders.deleteFolder",params:[{name:"folder_id",type:"int"}],type:"Updates"},{id:-1421720550,method:"stats.getBroadcastStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.BroadcastStats"},{id:1646092192,method:"stats.loadAsyncGraph",params:[{name:"flags",type:"#"},{name:"token",type:"string"},{name:"x",type:"flags.0?long"}],type:"StatsGraph"},{id:-589330937,method:"stats.getMegagroupStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"}],type:"stats.MegagroupStats"},{id:1445996571,method:"stats.getMessagePublicForwards",params:[{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"},{name:"offset_rate",type:"int"},{name:"offset_peer",type:"InputPeer"},{name:"offset_id",type:"int"},{name:"limit",type:"int"}],type:"messages.Messages"},{id:-1226791947,method:"stats.getMessageStats",params:[{name:"flags",type:"#"},{name:"dark",type:"flags.0?true"},{name:"channel",type:"InputChannel"},{name:"msg_id",type:"int"}],type:"stats.MessageStats"}]},layer:137},f=a(159),_=a(171),v=a.n(_),P=a(61),b=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const I="undefined"!=typeof window&&"crypto"in window?window.crypto.subtle:self.crypto.subtle;function S(e){return I.digest("SHA-1",Object(g.i)(e)).then(e=>new Uint8Array(e))}function C(e){return I.digest("SHA-256",Object(g.i)(e)).then(e=>new Uint8Array(e))}function M(e,t,a){e=Object(m.a)(e);const s=new f.a(Object(g.g)(t),Object(g.g)(a)).encrypt(Object(g.g)(e));return Object(g.d)(s)}function w(e,t,a){const s=new f.a(Object(g.g)(t),Object(g.g)(a)).decrypt(Object(g.g)(e));return Object(g.d)(s)}function k(e,t){const a=Object(u.y)(t.modulus,16),s=Object(u.y)(t.exponent,16),n=Object(u.y)(Object(g.f)(e),16),i=Object(u.w)(n,s,a);return Object(g.c)(Object(u.d)(i,16))}function A(e,t,a){return b(this,void 0,void 0,(function*(){const s=yield I.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]);return I.deriveBits({name:"PBKDF2",salt:t,iterations:a,hash:{name:"SHA-512"}},s,512).then(e=>new Uint8Array(e))}))}function E(e){let t;try{t=function(e){var t,a,s,n,i,r,o=Math.ceil(64/u.f)+1,p=0,d=new Array(o),c=new Array(o),l=new Array(o),m=new Array(o),g=new Array(o),h=new Array(o),y=new Array(o);for(t=0;t<3;++t){for(a=17+(15&Object(P.a)(8)),Object(u.i)(h,Object(u.r)(Object(u.o)(Object(P.a)(32),32,0),e)),Object(u.i)(y,h),n=1<<t+18,s=1;s<n;++s){for(++p,Object(u.i)(d,h),Object(u.i)(c,h),Object(u.h)(l,a);!Object(u.p)(c);)1&c[0]&&(Object(u.b)(l,d),Object(u.n)(l,e)&&Object(u.A)(l,e)),Object(u.b)(d,d),Object(u.n)(d,e)&&Object(u.A)(d,e),Object(u.x)(c,1);if(Object(u.i)(h,l),Object(u.n)(h,y)?(Object(u.i)(g,h),Object(u.A)(g,y)):(Object(u.i)(g,y),Object(u.A)(g,h)),Object(u.l)(g,e,m,d,c),!Object(u.m)(m,1))break;0==(s&s-1)&&Object(u.i)(y,h)}if(Object(u.n)(m,u.u))break}Object(u.j)(e,m,h,y),Object(u.n)(m,h)?(i=h,r=m):(i=m,r=h);return[new Uint8Array(Object(u.c)(i)),new Uint8Array(Object(u.c)(r)),p]}(Object(u.y)(Object(g.f)(e),16,Math.ceil(64/u.f)+1))}catch(e){console.error("Pq leemon Exception",e)}return t}function T(e,t,a){try{const s=Object(u.y)(Object(g.f)(e),16),n=Object(u.y)(Object(g.f)(t),16),i=Object(u.y)(Object(g.f)(a),16),r=Object(u.w)(s,n,i);return Object(g.c)(Object(u.d)(r,16))}catch(e){console.error("mod pow error",e)}}function D(e,t){return v.a.inflate(e,t?{to:"string"}:void 0)}const U=+y.API.constructors.find(e=>"boolFalse"===e.predicate).id,x=+y.API.constructors.find(e=>"boolTrue"===e.predicate).id,O=+y.API.constructors.find(e=>"vector"===e.predicate).id,F=+y.MTProto.constructors.find(e=>"gzip_packed"===e.predicate).id;class R{constructor(e={}){this.maxLength=2048,this.offset=0,this.mtproto=!1,this.debug=!1,this.maxLength=e.startMaxLength||2048,this.mtproto=e.mtproto||!1,this.createBuffer()}createBuffer(){this.buffer=new ArrayBuffer(this.maxLength),this.intView=new Int32Array(this.buffer),this.byteView=new Uint8Array(this.buffer)}getArray(){const e=new ArrayBuffer(this.offset),t=new Int32Array(e);return t.set(this.intView.subarray(0,this.offset/4)),t}getBuffer(){return this.getArray().buffer}getBytes(e=!0){if(e){const e=new ArrayBuffer(this.offset),t=new Uint8Array(e);return t.set(this.byteView.subarray(0,this.offset)),t}const t=new Array(this.offset);for(let e=0;e<this.offset;e++)t[e]=this.byteView[e];return t}getOffset(){return this.offset}checkLength(e){if(this.offset+e<this.maxLength)return;this.maxLength=4*Math.ceil(Math.max(2*this.maxLength,this.offset+e+16)/4);const t=this.buffer,a=new Int32Array(t);this.createBuffer(),new Int32Array(this.buffer).set(a)}writeInt(e,t){this.debug&&console.log(">>>",e.toString(16),e,t);const a=this.offset/4;return this.checkLength(4),this.intView[a]=e,this.offset+=4,a}storeInt(e,t){return this.writeInt(e,(t||"")+":int")}storeBool(e,t){e?this.writeInt(x,(t||"")+":bool"):this.writeInt(U,(t||"")+":bool")}storeLongP(e,t,a){this.writeInt(t,(a||"")+":long[low]"),this.writeInt(e,(a||"")+":long[high]")}storeLong(e,t){if(Array.isArray(e))return 2===e.length?this.storeLongP(e[0],e[1],t):this.storeIntBytes(e,64,t);"string"!=typeof e&&(e=e?e.toString():"0");const a=4294967296,s=Object(u.y)(e,10,64),n=Object(u.k)(s),i=Object(u.k)(s);Object(u.j)(s,Object(u.y)(a.toString(16),16,64),n,i);const r=+Object(u.d)(n,10);let o=+Object(u.d)(i,10);r<o&&(o-=a),this.writeInt(o,(t||"")+":long[low]"),this.writeInt(r,(t||"")+":long[high]")}storeDouble(e,t){const a=new ArrayBuffer(8),s=new Int32Array(a);new Float64Array(a)[0]=e,this.writeInt(s[0],(t||"")+":double[low]"),this.writeInt(s[1],(t||"")+":double[high]")}storeString(e,t){this.debug&&console.log(">>>",e,(t||"")+":string"),void 0===e&&(e="");const a=unescape(encodeURIComponent(e));this.checkLength(a.length+8);const s=a.length;s<=253?this.byteView[this.offset++]=s:(this.byteView[this.offset++]=254,this.byteView[this.offset++]=255&s,this.byteView[this.offset++]=(65280&s)>>8,this.byteView[this.offset++]=(16711680&s)>>16);for(let e=0;e<s;e++)this.byteView[this.offset++]=a.charCodeAt(e);for(;this.offset%4;)this.byteView[this.offset++]=0}storeBytes(e,t){e instanceof ArrayBuffer?e=new Uint8Array(e):void 0===e&&(e=[]),this.debug&&console.log(">>>",Object(g.f)(e),(t||"")+":bytes");const a=e.length;for(this.checkLength(a+8),a<=253?this.byteView[this.offset++]=a:(this.byteView[this.offset++]=254,this.byteView[this.offset++]=255&a,this.byteView[this.offset++]=(65280&a)>>8,this.byteView[this.offset++]=(16711680&a)>>16),this.byteView.set(e,this.offset),this.offset+=a;this.offset%4;)this.byteView[this.offset++]=0}storeIntBytes(e,t,a){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const s=e.length;if(t%32||8*s!==t){const n=new Error("Invalid bits: "+t+", "+s);throw console.error(n,e,a),n}this.debug&&console.log(">>>",Object(g.f)(e),(a||"")+":int"+t),this.checkLength(s),this.byteView.set(e,this.offset),this.offset+=s}storeRawBytes(e,t){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const a=e.length;this.debug&&console.log(">>>",Object(g.f)(e),t||""),this.checkLength(a),this.byteView.set(e,this.offset),this.offset+=a}storeMethod(e,t){const a=(this.mtproto?y.MTProto:y.API).methods.find(t=>t.method===e);if(!a)throw new Error("No method "+e+" found");this.storeInt(a.id,e+"[id]");const s=t.pFlags||t,n={};for(const i of a.params){let a=i.type;if(-1!==a.indexOf("?")){const e=a.split("?"),n=e[0].split(".");if(!(t[n[0]]&1<<+n[1])){if(!("true"===e[1]?s[i.name]:void 0!==t[i.name]))continue;t[n[0]]|=1<<+n[1]}a=e[1]}const r=this.storeObject(t[i.name],a,e+"["+i.name+"]");"#"===a&&(t[i.name]=t[i.name]||0,n[i.name]=r)}for(let e in n)this.intView[n[e]]=t[e];return a.type}storeObject(e,t,a){switch(t){case"#":e=e||0;case"int":return this.storeInt(e,a);case"long":return this.storeLong(e,a);case"int128":return this.storeIntBytes(e,128,a);case"int256":return this.storeIntBytes(e,256,a);case"int512":return this.storeIntBytes(e,512,a);case"string":return this.storeString(e,a);case"bytes":return this.storeBytes(e,a);case"double":return this.storeDouble(e,a);case"Bool":return this.storeBool(e,a);case"true":return}if(Array.isArray(e)){if("Vector"===t.substr(0,6))this.writeInt(O,a+"[id]");else if("vector"!==t.substr(0,6))throw new Error("Invalid vector type "+t);const s=t.substr(7,t.length-8);this.writeInt(e.length,a+"[count]");for(let t=0;t<e.length;t++)this.storeObject(e[t],s,a+"["+t+"]");return!0}if("vector"===t.substr(0,6).toLowerCase())throw new Error("Invalid vector object");if(!Object(m.b)(e))throw new Error("Invalid object for type "+t);const s=this.mtproto?y.MTProto:y.API,n=e._;let i=!1;const r=s.constructors.find(e=>e.predicate===n);if((i="%"===t.charAt(0))&&(t=t.substr(1)),!r)throw new Error("No predicate "+n+" found");n===t&&(i=!0),i||this.writeInt(r.id,a+"["+n+"][id]");const o=e.pFlags,p={};for(const t of r.params){let s=t.type;if(-1!==s.indexOf("?")){const a=s.split("?"),n=a[0].split(".");if(!(e[n[0]]&1<<+n[1])){if(!("true"===a[1]?o&&o[t.name]:void 0!==e[t.name]))continue;e[n[0]]|=1<<+n[1]}s=a[1]}const i=this.storeObject(e[t.name],s,a+"["+n+"]["+t.name+"]");"#"===s&&(e[t.name]=e[t.name]||0,p[t.name]=i)}for(let t in p)this.intView[p[t]]=e[t];return r.type}}class B{constructor(e,t={}){this.offset=0,this.mtproto=!1,e instanceof ArrayBuffer?(this.buffer=e,this.intView=new Int32Array(e),this.byteView=new Uint8Array(this.buffer)):(this.buffer=e.buffer,this.intView=new Int32Array(e.buffer),this.byteView=e),this.override=t.override||{},this.mtproto=!!t.mtproto,this.debug=void 0!==t.debug&&t.debug}readInt(e){if(this.byteView.length-this.offset<4)throw console.error(this.byteView,this.offset),new Error("Nothing to fetch: "+e);const t=this.intView[this.offset/4];return this.debug&&console.log("<<<",t.toString(16),t,e,this.byteView.slice(this.offset-16,this.offset+16),this.byteView.slice(this.offset-16,this.offset+16).hex),this.offset+=4,t}fetchInt(e){return this.readInt((e||"")+":int")}fetchDouble(e){const t=new ArrayBuffer(8),a=new Int32Array(t),s=new Float64Array(t);return a[0]=this.readInt((e||"")+":double[low]"),a[1]=this.readInt((e||"")+":double[high]"),s[0]}fetchLong(e){const t=this.readInt((e||"")+":long[low]"),a=this.readInt((e||"")+":long[high]"),s=Object(m.c)(a,t);if(!this.mtproto){const e=+s;if(Number.isSafeInteger(e))return e}return s}fetchBool(e){const t=this.readInt((e||"")+":bool");return t===x||t!==U&&(this.offset-=4,this.fetchObject("Object",e))}fetchString(e){let t=this.byteView[this.offset++];254===t&&(t=this.byteView[this.offset++]|this.byteView[this.offset++]<<8|this.byteView[this.offset++]<<16);let a,s="";for(let e=0;e<t;e++)s+=String.fromCharCode(this.byteView[this.offset++]);for(;this.offset%4;)this.offset++;try{a=decodeURIComponent(escape(s))}catch(e){a=s}return this.debug&&console.log("<<<",a,(e||"")+":string"),a}fetchBytes(e){let t=this.byteView[this.offset++];254===t&&(t=this.byteView[this.offset++]|this.byteView[this.offset++]<<8|this.byteView[this.offset++]<<16);const a=this.byteView.subarray(this.offset,this.offset+t);for(this.offset+=t;this.offset%4;)this.offset++;return this.debug&&console.log("<<<",Object(g.f)(a),(e||"")+":bytes"),a}fetchIntBytes(e,t=!0,a){if(e%32)throw new Error("Invalid bits: "+e);const s=e/8;if(t){const e=this.byteView.subarray(this.offset,this.offset+s);return this.offset+=s,e}const n=new Array(s);for(let e=0;e<s;e++)n[e]=this.byteView[this.offset++];return this.debug&&console.log("<<<",Object(g.f)(n),(a||"")+":int"+e),n}fetchRawBytes(e,t=!0,a){if(!1===e&&(e=this.readInt((a||"")+"_length"))>this.byteView.byteLength)throw new Error("Invalid raw bytes length: "+e+", buffer len: "+this.byteView.byteLength);if(t){const t=new Uint8Array(e);return t.set(this.byteView.subarray(this.offset,this.offset+e)),this.offset+=e,t}const s=new Array(e);for(let t=0;t<e;t++)s[t]=this.byteView[this.offset++];return this.debug&&console.log("<<<",Object(g.f)(s),a||""),s}fetchVector(e,t){const a=this.readInt(t+"[count]"),s=new Array(a);if(a>0){const n=e.substr(7,e.length-8);for(let e=0;e<a;++e)s[e]=this.fetchObject(n,t+"["+e+"]")}return s}fetchObject(e,t){switch(e){case"#":case"int":return this.fetchInt(t);case"long":return this.fetchLong(t);case"int128":return this.fetchIntBytes(128,!0,t);case"int256":return this.fetchIntBytes(256,!0,t);case"int512":return this.fetchIntBytes(512,!0,t);case"string":return this.fetchString(t);case"bytes":return this.fetchBytes(t);case"double":return this.fetchDouble(t);case"Bool":return this.fetchBool(t);case"true":return!0}if(t=t||e||"Object","v"===e.charAt(0)&&"ector"===e.substr(1,5))return this.fetchVector(e,t);const a=this.mtproto?y.MTProto:y.API;let s=null,n=!1;if("%"===e.charAt(0)){const t=e.substr(1);if(s=a.constructors.find(e=>e.type===t),!s)throw new Error("Constructor not found for type: "+e)}else{const i=this.readInt(t+"[id]");if(i===F){const a=D(this.fetchBytes(t+"[packed_string]"));return new B(a).fetchObject(e,t)}if(i===O)return this.fetchVector(e,t);let r=a.constructorsIndex;if(!r){a.constructorsIndex=r={};for(let e=0,t=a.constructors.length;e<t;e++)r[a.constructors[e].id]=e}const o=r[i];if(void 0!==o&&(s=a.constructors[o]),!s&&this.mtproto){const e=y.API;for(let t=0,a=e.constructors.length;t<a;t++)if(+e.constructors[t].id===i){s=e.constructors[t],delete this.mtproto,n=!0;break}}if(!s){let e,a;console.error("Constructor not found:",i);try{e=this.fetchInt(t),a=this.fetchInt(t)}catch(e){}throw new Error("Constructor not found: "+i+" "+e+" "+a+" "+t)}}const i=s.predicate,r={_:i},o=(this.mtproto?"mt_":"")+i;if(this.override[o])this.override[o](r,t+"["+i+"]");else for(let e=0,a=s.params.length;e<a;e++){const a=s.params[e];let n=a.type;"#"===n&&void 0===r.pFlags&&(r.pFlags={});const o=-1!==n.indexOf("?");if(o){const e=n.split("?"),t=e[0].split(".");if(!(r[t[0]]&1<<+t[1]))continue;n=e[1]}const p=this.fetchObject(n,t+"["+i+"]["+a.name+"]");o&&"true"===n?r.pFlags[a.name]=p:r[a.name]=p}return n&&(this.mtproto=!0),r}getOffset(){return this.offset}setOffset(e){this.offset=e}}h.a.TLDeserialization=B,h.a.TLSerialization=R;var V=a(150),L=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};Object(c.b)("SRP",c.a.Error);function j(e,t,a){return L(this,void 0,void 0,(function*(){const s=a?t.new_algo:t.current_algo,n=Object(u.y)(Object(g.f)(s.p),16),i=Object(u.o)(s.g,32,256),r=yield function(e,t,a){return L(this,void 0,void 0,(function*(){let s=yield q.invokeCrypto("sha256-hash",Object(g.a)(t,(new TextEncoder).encode(e),t));s=Object(g.a)(a,s,a),s=yield q.invokeCrypto("sha256-hash",s);let n=yield q.invokeCrypto("pbkdf2",new Uint8Array(s),t,1e5);return n=Object(g.a)(a,n,a),s=yield q.invokeCrypto("sha256-hash",n),s}))}(e,s.salt1,s.salt2),o=Object(u.y)(Object(g.f)(r),16),p=function(e,t){return e instanceof Uint8Array||(e=Object(g.i)(e)),Object(m.a)(e,t,!0,!0,!0)},d=Object(u.w)(i,o,n),c=e=>{const t=new Uint8Array(e.length);for(let a=0;a<e.length;a+=4)t[a]=e[a+3],t[a+1]=e[a+2],t[a+2]=e[a+1],t[a+3]=e[a];return t};if(a){return p(Object(g.c)(Object(u.d)(d,16)),256)}const l=Object(u.y)(Object(g.f)(t.srp_B),16),h=p(Object(g.c)(Object(u.d)(n,16)),256),y=p(Object(g.c)(Object(u.d)(i,16)),256),f=p(Object(g.c)(Object(u.d)(l,16)),256),_=yield q.invokeCrypto("sha256-hash",Object(g.a)(h,y)),v=Object(u.y)(Object(g.f)(_),16),P=Object(u.r)(Object(u.s)(v,d),n),b=(e,t)=>{const a=Object(u.z)(t,e);return!(Object(u.t)(a)||Object(u.e)(a)<1984||Object(u.e)(e)<1984||Math.floor((Object(u.e)(e)+7)/8)>256)},{a:I,a_for_hash:S,u:C}=yield(()=>L(this,void 0,void 0,(function*(){for(;;){const e=Object(u.y)(Object(g.f)(c(t.secure_random)),16),a=Object(u.w)(i,e,n);if(b(a,n)){const t=Object(g.c)(Object(u.d)(a,16)),s=yield q.invokeCrypto("sha256-hash",Object(g.a)(t,f)),n=Object(u.y)(s.hex,16);if(!Object(u.p)(n)&&!Object(u.t)(n))return{a:e,a_for_hash:t,u:n}}}})))();let M;M=Object(u.n)(l,P)?l:Object(u.a)(l,n),M=Object(u.r)(Object(u.z)(M,P),n);const w=Object(u.s)(C,o),k=Object(u.a)(I,w),A=Object(u.w)(M,k,n),E=yield q.invokeCrypto("sha256-hash",p(Object(g.c)(Object(u.d)(A,16)),256));let T=yield q.invokeCrypto("sha256-hash",h);const D=yield q.invokeCrypto("sha256-hash",y);T=Object(g.h)(T,D);const U=Object(g.a)(T,yield q.invokeCrypto("sha256-hash",s.salt1),yield q.invokeCrypto("sha256-hash",s.salt2),S,f,E),x=yield q.invokeCrypto("sha256-hash",U);return{_:"inputCheckPasswordSRP",srp_id:t.srp_id,A:new Uint8Array(S),M1:x}}))}class N extends V.a{constructor(){super(),this.webWorker=!1,this.taskId=0,this.awaiting={},this.pending=[],this.debug=!1,console.log("CW constructor"),this.utils={"sha1-hash":S,"sha256-hash":C,pbkdf2:A,"aes-encrypt":M,"aes-decrypt":w,"rsa-encrypt":k,factorize:E,"mod-pow":T,gzipUncompress:D,computeSRP:j}}performTaskWorker(e,...t){return this.debug&&console.log("CW start",e,t),Promise.resolve(this.utils[e](...t))}}var q=new N,G=a(117);const H=new class{constructor(){this.lastMessageId=[0,0],this.timeOffset=0,l.a.get("server_time_offset").then(e=>{e&&(this.timeOffset=e)})}generateId(){const e=Date.now();let t=[Math.floor(e/1e3)+this.timeOffset,e%1e3<<21|Object(P.a)(16)<<3|4];(this.lastMessageId[0]>t[0]||this.lastMessageId[0]===t[0]&&this.lastMessageId[1]>=t[1])&&(t=[this.lastMessageId[0],this.lastMessageId[1]+4]),this.lastMessageId=t;return Object(m.c)(t[0],t[1])}applyServerTime(e,t){const a=e-(t=(t||Date.now())/1e3|0),s=Math.abs(this.timeOffset-a)>10;l.a.set({server_time_offset:a}),this.lastMessageId=[0,0],this.timeOffset=a;const n={type:"applyServerTimeOffset",payload:a};return Object(G.e)(n),s}};h.a.timeManager=H;var z=H,W=a(7),K=a(63),$=a(75),J=a(80),Q=a(45),X=a(48),Y=a(151);class Z{constructor(e){this._counter=e}increment(){for(let e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}}}class ee{constructor(e,t){this._remainingCounter=null,this._remainingCounterIndex=16,this._counter=new Z(t),this._aes=new f.b(e)}update(e){const t=e.slice();for(let e=0;e<t.length;e++)16===this._remainingCounterIndex&&(this._remainingCounter=new Uint8Array(Object(g.d)(this._aes.encrypt(this._counter._counter))),this._remainingCounterIndex=0,this._counter.increment()),t[e]^=this._remainingCounter[this._remainingCounterIndex++];return t}}class te{init(e){const t=new Uint8Array(64);for(t.randomize();;){let e=t[3]<<24|t[2]<<16|t[1]<<8|t[0],a=t[7]<<24|t[6]<<16|t[5]<<8|t[4];if(239!==t[0]&&1145128264!==e&&1414745936!==e&&542393671!==e&&1230262351!==e&&4008636142!==e&&3722304989!==e&&0!==a)break;t.randomize()}const a=t.slice().reverse(),s=t.slice(8,40),n=t.slice(40,56),i=a.slice(8,40),r=a.slice(40,56);this.encNew=new ee(s,n),this.decNew=new ee(i,r),t.set(e.obfuscateTag,56);const o=this.encode(t);return t.set(o.slice(56,64),56),t}encode(e){return this.encNew.update(e)}decode(e){return this.decNew.update(e)}}var ae=new class{constructor(){this.tag=238,this.obfuscateTag=new Uint8Array([this.tag,this.tag,this.tag,this.tag])}encodePacket(e){e.length%4!=0&&console.error("Encode error!",e.length,e);const t=e.length;return new Uint8Array(new Int32Array([t]).buffer).concat(e)}readPacket(e){const t=e[0]|e[1]<<8|e[2]<<16|e[3]<<24;return e.slice(4,4+t)}},se=a(145);class ne{constructor(e,t,a,s,n){this.Connection=e,this.dcId=t,this.url=a,this.logSuffix=s,this.retryTimeout=n,this.codec=ae,this.obfuscation=new te,this.pending=[],this.debug=K.a.debug&&!1,this.connected=!1,this.autoReconnect=!0,this.onOpen=()=>{this.connected=!0,ge.setTransportOpened("websocket");const e=this.obfuscation.init(this.codec);if(this.connection.send(e),this.networker)this.pending.length=0,this.networker.setConnectionStatus(se.a.Connected),this.networker.cleanupSent(),this.networker.resend();else for(const e of this.pending)e.encoded&&e.body&&(e.encoded=this.encodeBody(e.body));setTimeout(()=>{this.releasePending()},0)},this.onMessage=e=>{let t=this.obfuscation.decode(new Uint8Array(e));if(t=this.codec.readPacket(t),this.networker)return this.debug&&this.log.debug("redirecting to networker",t.length),void this.networker.parseResponse(t).then(e=>{this.debug&&this.log.debug("redirecting to networker response:",e);try{this.networker.processMessage(e.response,e.messageId,e.sessionId)}catch(e){this.log.error("handleMessage networker processMessage error",e)}}).catch(e=>{this.log.error("handleMessage networker parseResponse error",e)});const a=this.pending.shift();a?a.resolve(t):this.debug&&this.log.debug("no pending for res:",t.hex)},this.onClose=()=>{let e,t;if(this.clear(),this.autoReconnect){const a=Date.now(),s=a-this.lastCloseTime;e=!isNaN(s)&&s<this.retryTimeout?this.retryTimeout-s:0,t=a+e}this.networker&&(this.networker.setConnectionStatus(se.a.Closed,t),this.pending.length=0),this.autoReconnect?(this.log("will try to reconnect after timeout:",e/1e3),this.reconnectTimeout=self.setTimeout(this.reconnect,e)):this.log("reconnect isn't needed")},this.reconnect=()=>{if(void 0!==this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),!this.connection){if(this.log("trying to reconnect..."),this.lastCloseTime=Date.now(),this.networker)this.networker.setConnectionStatus(se.a.Connecting);else for(const e of this.pending)e.bodySent&&(e.bodySent=!1);this.connect()}};let i=c.a.Error|c.a.Log;this.debug&&(i|=c.a.Debug),this.log=Object(c.b)("TCP-"+t+s,i),this.log("constructor"),this.connect()}clear(){this.connected&&ge.setTransportClosed("websocket"),this.connected=!1,this.connection&&(this.connection.removeEventListener("open",this.onOpen),this.connection.removeEventListener("close",this.onClose),this.connection.removeEventListener("message",this.onMessage),this.connection=void 0)}forceReconnect(){this.close(),this.reconnect()}destroy(){this.setAutoReconnect(!1),this.close(),this.pending.forEach(e=>{e.reject&&e.reject()}),this.pending.length=0}close(){const e=this.connection;if(e){const t=this.connected;this.clear(),t&&(e.addEventListener("message",this.onMessage),e.addEventListener("close",()=>{e.removeEventListener("message",this.onMessage)},{once:!0}),e.close())}}setAutoReconnect(e){this.autoReconnect=e,e?this.connection||void 0!==this.reconnectTimeout||this.reconnect():void 0!==this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0)}connect(){this.connection&&this.close(),this.connection=new this.Connection(this.dcId,this.url,this.logSuffix),this.connection.addEventListener("open",this.onOpen),this.connection.addEventListener("close",this.onClose),this.connection.addEventListener("message",this.onMessage)}encodeBody(e){const t=this.codec.encodePacket(e);return this.obfuscation.encode(t)}send(e){this.debug&&this.log.debug("-> body length to pending:",e.length);const t=this.connected?this.encodeBody(e):void 0;if(!this.networker){const a=new Promise((a,s)=>{this.pending.push({resolve:a,reject:s,body:e,encoded:t})});return this.releasePending(),a}this.pending.push({body:e,encoded:t}),this.releasePending()}releasePending(){if(!this.connected)return;let e=this.pending.length;for(let t=0;t<e;++t){const a=this.pending[t],{body:s,bodySent:n}=a;let i=a.encoded;s&&!n&&(this.debug&&this.log.debug("-> body length to send:",s.length),i||(i=a.encoded=this.encodeBody(s)),this.connection.send(i),a.resolve?a.bodySent=!0:(this.pending.splice(t--,1),e--))}}}let ie=0;class re extends X.a{constructor(e,t,a){super(),this.dcId=e,this.url=t,this.id=++ie,oe.set(this.id,this);const s={type:"socketProxy",payload:{type:"setup",payload:{dcId:e,url:t,logSuffix:a},id:this.id}};Object(G.d)(s)}send(e){const t={type:"socketProxy",payload:{type:"send",payload:e,id:this.id}};Object(G.d)(t)}close(){const e={type:"socketProxy",payload:{type:"close",id:this.id}};Object(G.d)(e)}}const oe=new Map,pe=K.a.test?"_test":"";class de{constructor(){this.sslSubdomains=["pluto","venus","aurora","vesta","flora"],this.dcOptions=K.a.test?[{id:1,host:"149.154.175.10",port:80},{id:2,host:"149.154.167.40",port:80},{id:3,host:"149.154.175.117",port:80}]:[{id:1,host:"149.154.175.50",port:80},{id:2,host:"149.154.167.50",port:80},{id:3,host:"149.154.175.100",port:80},{id:4,host:"149.154.167.91",port:80},{id:5,host:"149.154.171.5",port:80}],this.chosenServers={},this.transportSocket=(e,t,a)=>{const n="apiws"+pe,i=`wss://${W.a.suffix.toLowerCase()}ws${e}${a}.web.telegram.org/${n}`,r="upload"===t?"-U":"download"===t?"-D":"",o=s.IS_SAFARI&&G.b&&void 0!==re?re:Y.a;return new ne(o,e,i,r,1e4)},this.transportHTTP=(e,t,a)=>{let s;if(K.a.ssl||!K.a.http){s="https://"+(this.sslSubdomains[e-1]+("client"!==t?"-1":""))+".web.telegram.org/"+(K.a.test?"apiw_test1":"apiw1")}else for(let t of this.dcOptions)if(t.id===e){s="http://"+t.host+(80!==t.port?":"+t.port:"")+"/apiw1";break}return new ue(e,s,"upload"===t?"-U":"download"===t?"-D":"")}}chooseServer(e,t="client",a=K.a.transport,s=!0){this.chosenServers.hasOwnProperty(a)||(this.chosenServers[a]={client:{},download:{},upload:{}});const n=this.chosenServers[a][t];e in n||(n[e]=[]);const i=n[e];if(!i.length||!s){let n;const r="client"===t?"":"-1";return n=("websocket"===a?this.transportSocket:this.transportHTTP)(e,t,r),n?(s&&i.push(n),n):(console.error("No chosenServer!",e),null)}return i[0]}static removeTransport(e,t){for(const a in e)for(const s in e[a])for(const i in e[a][s]){const r=e[a][s][i];Object(n.e)(r,t)}}}var ce=new de,le=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};class me extends X.a{constructor(){super(!0),this.opened=new Map,this.addEventListener("change",e=>{e.get("websocket")||this.waitForWebSocket()}),setTimeout(()=>{this.waitForWebSocket()},200)}pingTransports(){return le(this,void 0,void 0,(function*(){const e=this.transports={https:ce.chooseServer(W.a.baseDcId,"client","https",!1),websocket:ce.chooseServer(W.a.baseDcId,"client","websocket",!1)},t=Object(Q.a)();this.transports.https._send(new Uint8Array,"no-cors").then(()=>t.resolve(!0),()=>t.resolve(!1)),setTimeout(()=>t.resolve(!1),2e3);const a=Object(Q.a)(),s=e.websocket;s.setAutoReconnect(!1),s.connection.addEventListener("close",()=>a.resolve(!1),{once:!0}),s.connection.addEventListener("open",()=>a.resolve(!0),{once:!0}),setTimeout(()=>a.resolve(!1),2e3);const[n,i]=yield Promise.all([t,a]);for(const t in e){e[t].destroy()}return{https:n||this.opened.get("https")>0,websocket:i||this.opened.get("websocket")>0}}))}waitForWebSocket(){return le(this,void 0,void 0,(function*(){if(!this.pinging){for(this.pinging=!0;;){const{https:e,websocket:t}=yield this.pingTransports();if((e||t)&&this.dispatchEvent("transport",t||!e?"websocket":"https"),t)break;yield Object(J.a)(1e4)}this.pinging=!1}}))}setTransportValue(e,t){let a=this.opened.get(e)||0;a+=t?1:-1,this.opened.set(e,a),this.dispatchEvent("change",this.opened)}setTransportOpened(e){return this.setTransportValue(e,!0)}setTransportClosed(e){return this.setTransportValue(e,!1)}}var ge=new me,he=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};class ue{constructor(e,t,a){this.dcId=e,this.url=t,this.pending=[],this.debug=K.a.debug&&!1;let s=c.a.Error|c.a.Log;this.debug&&(s|=c.a.Debug),this.log=Object(c.b)("HTTP-"+e+a,s),this.log("constructor"),this.connected=!1}_send(e,t){return this.debug&&this.log.debug("-> body length to send:",e.length),fetch(this.url,{method:"POST",body:e,mode:t}).then(e=>{if(200!==e.status&&!t)throw e.arrayBuffer().then(e=>{this.log.error("not 200",new TextDecoder("utf-8").decode(new Uint8Array(e)))}),e;return this.setConnected(!0),e.arrayBuffer().then(e=>new Uint8Array(e))},e=>{throw this.setConnected(!1),e})}setConnected(e){this.connected===e||this.destroyed||(this.connected=e,ge.setTransportValue("https",e))}destroy(){this.setConnected(!1),this.destroyed=!0,this.pending.forEach(e=>e.reject()),this.pending.length=0}send(e){if(this.networker)return this._send(e);{const t=new Promise((t,a)=>{this.pending.push({resolve:t,reject:a,body:e})});return this.releasePending(),t}}releasePending(){return he(this,void 0,void 0,(function*(){if(!this.releasing){this.releasing=!0;for(let e=0;e<this.pending.length;++e){const t=this.pending[e],{body:a,resolve:s}=t;try{s(yield this._send(a)),this.pending.splice(e,1)}catch(e){this.log.error("Send plain request error:",e),yield Object(J.a)(5e3)}--e}this.releasing=!1}}))}}var ye=a(2),fe=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};let _e;class ve{constructor(e,t,a,s,n={}){this.dcId=e,this.authKey=t,this.authKeyId=a,this.lastServerMessages=[],this.sentMessages={},this.pendingMessages={},this.pendingAcks=[],this.pendingResends=[],this.nextReq=0,this.checkConnectionPeriod=0,this.offline=!1,this.lastResendReq=null,this.isOnline=!1,this.status=se.a.Closed,this.lastResponseTime=0,this.debug=h.b||K.a.debug,this.activeRequests=0,this.checkLongPoll=()=>{const e=this.cleanupSent();if(this.longPollPending&&Date.now()<this.longPollPending||this.offline||this.isStopped()||this.isFileNetworker)return!1;l.a.get("dc").then(t=>{e&&(t!==this.dcId||this.sleepAfter&&Date.now()>this.sleepAfter)||this.sendLongPoll()})},this.checkConnection=e=>{if(this.debug&&this.log("Check connection",e),this.clearCheckConnectionTimeout(),!this.transport)return void this.log.warn("No transport for checkConnection");const t=new R({mtproto:!0}),a=Object(P.b)();t.storeMethod("ping",{ping_id:a});const s={msg_id:z.generateId(),seq_no:this.generateSeqNo(!0),body:t.getBytes(!0)};this.offline&&this.setConnectionStatus(se.a.Connecting),this.sendEncryptedRequest(s).then(()=>{this.toggleOffline(!1)},()=>{this.debug&&this.log("Delay",1e3*this.checkConnectionPeriod),this.checkConnectionTimeout=ye.a.setTimeout(()=>this.checkConnection("from failed checkConnection request"),1e3*this.checkConnectionPeriod|0),this.checkConnectionPeriod=Math.min(60,1.5*this.checkConnectionPeriod)})},this.authKeyUint8=Object(g.i)(this.authKey),this.serverSalt=Object(g.i)(s),this.isFileUpload=!!n.fileUpload,this.isFileDownload=!!n.fileDownload,this.isFileNetworker=this.isFileUpload||this.isFileDownload;const i=this.isFileUpload?"-U":this.isFileDownload?"-D":"";this.name="NET-"+e+i,this.log=Object(c.b)(this.name,c.a.Log|c.a.Debug|c.a.Error|c.a.Warn,void 0),this.log("constructor"),this.updateSession()}updateSession(){this.seqNo=0,this.prevSessionId=this.sessionId,this.sessionId=new Uint8Array(8).randomize()}updateSentMessage(e){const t=this.sentMessages[e];return!!t&&(t.container&&Object(n.d)(t.inner,(e,a)=>{const s=this.updateSentMessage(e);s?t.inner[a]=s.msg_id:t.inner.splice(a,1)}),t.msg_id=z.generateId(),t.seq_no=this.generateSeqNo(t.notContentRelated||t.container),this.debug&&this.log(`updateSentMessage, old=${e}, new=${t.msg_id}`),this.sentMessages[t.msg_id]=t,delete this.sentMessages[e],t)}generateSeqNo(e){let t=2*this.seqNo;return e||(t++,this.seqNo++),t}wrapMtpCall(e,t,a){const s=new R({mtproto:!0});s.storeMethod(e,t);const n=z.generateId(),i=this.generateSeqNo(),r={msg_id:n,seq_no:i,body:s.getBytes(!0)};return K.a.debug&&this.log("MT call",e,t,n,i),this.pushMessage(r,a)}wrapMtpMessage(e,t){const a=new R({mtproto:!0});a.storeObject(e,"Object");const s=z.generateId(),n=this.generateSeqNo(t.notContentRelated),i={msg_id:s,seq_no:n,body:a.getBytes(!0)};return K.a.debug&&this.log("MT message",e,s,n),this.pushMessage(i,t)}wrapApiCall(e,t={},a={}){const s=new R(a);if(!this.connectionInited){const e=y.API.methods.find(e=>"invokeWithLayer"===e.method);if(!e)throw new Error("no invokeWithLayer!");s.storeInt(+e.id,"invokeWithLayer"),s.storeInt(y.layer,"layer");const t=y.API.methods.find(e=>"initConnection"===e.method);if(!t)throw new Error("no initConnection!");s.storeInt(+t.id,"initConnection"),s.storeInt(0,"flags"),s.storeInt(W.a.id,"api_id"),s.storeString(be.userAgent||"Unknown UserAgent","device_model"),s.storeString(navigator.platform||"Unknown Platform","system_version"),s.storeString(W.a.version+(W.a.isMainDomain?" "+W.a.suffix:""),"app_version"),s.storeString(navigator.language||"en","system_lang_code"),s.storeString(W.a.langPack,"lang_pack"),s.storeString(be.language,"lang_code")}if(a.afterMessageId){if(void 0===_e){const e=y.API.methods.find(e=>"invokeAfterMsg"===e.method);_e=e?+e.id:0}_e?(s.storeInt(_e,"invokeAfterMsg"),s.storeLong(a.afterMessageId,"msg_id")):this.log.error("no invokeAfterMsg!")}a.resultType=s.storeMethod(e,t);const n={msg_id:z.generateId(),seq_no:this.generateSeqNo(),body:s.getBytes(!0),isAPI:!0};return K.a.debug?this.log("Api call",e,n,t,a):this.debug&&this.log("Api call",e,t,a),this.pushMessage(n,a)}changeTransport(e){const t=this.transport;t&&(t.destroy(),de.removeTransport(ce.chosenServers,this.transport),this.nextReqTimeout&&(clearTimeout(this.nextReqTimeout),this.nextReqTimeout=0,this.nextReq=0),void 0!==this.longPollInterval&&(clearInterval(this.longPollInterval),this.longPollInterval=void 0),this.clearCheckConnectionTimeout()),this.transport=e,e&&(e.networker=this,e instanceof ue&&(this.longPollInterval=ye.a.setInterval(this.checkLongPoll,1e4),this.checkLongPoll(),this.checkConnection("changed transport")),e.connected&&e.connection&&this.setConnectionStatus(se.a.Connected),this.resend())}destroy(){this.changeTransport()}forceReconnectTimeout(){this.transport.reconnect?this.transport.reconnect():this.resend()}forceReconnect(){this.transport.forceReconnect?this.transport.forceReconnect():this.checkConnection("force reconnect")}sendLongPoll(){if(this.sendingLongPoll)return;this.sendingLongPoll=!0;this.longPollPending=Date.now()+25e3,this.debug&&this.log.debug("sendLongPoll",this.longPollPending),this.wrapMtpCall("http_wait",{max_delay:500,wait_after:150,max_wait:25e3},{noResponse:!0,longPoll:!0}).then(()=>{this.longPollPending=void 0,setTimeout(this.checkLongPoll,0)},e=>{this.log("Long-poll failed",e)}).finally(()=>{this.sendingLongPoll=void 0})}clearCheckConnectionTimeout(){void 0!==this.checkConnectionTimeout&&(clearTimeout(this.checkConnectionTimeout),this.checkConnectionTimeout=void 0)}toggleOffline(e){if(this.offline!==e)if(this.offline=e,this.clearCheckConnectionTimeout(),e){clearTimeout(this.nextReqTimeout),this.nextReqTimeout=0,this.nextReq=0,this.checkConnectionPeriod<1.5&&(this.checkConnectionPeriod=0);const e=1e3*this.checkConnectionPeriod|0;this.checkConnectionRetryAt=Date.now()+e,this.setConnectionStatus(se.a.Closed,this.checkConnectionRetryAt),this.checkConnectionTimeout=ye.a.setTimeout(()=>this.checkConnection("from toggleOfline"),e),this.checkConnectionPeriod=Math.min(30,1.5*(1+this.checkConnectionPeriod))}else this.setConnectionStatus(se.a.Connected),this.checkLongPoll(),this.scheduleRequest();this.setConnectionStatus(e?se.a.Closed:se.a.Connected,e?this.checkConnectionRetryAt:void 0)}handleSentEncryptedRequestHTTP(e,t,a){e.then(e=>(this.toggleOffline(!1),this.parseResponse(e).then(e=>(this.debug&&this.log.debug("Server response",e),this.processMessage(e.response,e.messageId,e.sessionId),this.checkLongPoll(),this.checkConnectionPeriod=Math.max(1.1,Math.sqrt(this.checkConnectionPeriod)),!0))),e=>(this.log.error("Encrypted request failed",e,t),this.pushResend(t.msg_id),this.toggleOffline(!0),!1)).then(e=>{a.forEach(t=>{if(this.sentMessages[t]){const a=this.sentMessages[t].deferred;delete this.sentMessages[t],delete this.pendingMessages[t],e?a.resolve():a.reject()}})})}pushMessage(e,t){const a=new Promise((a,s)=>{this.sentMessages[e.msg_id]=Object.assign(e,t,t.notContentRelated?void 0:{deferred:{resolve:a,reject:s}}),this.pendingMessages[e.msg_id]=0,t.noSchedule||this.scheduleRequest(),Object(m.b)(t)&&(t.messageId=e.msg_id)});if(!t.notContentRelated&&!t.noResponse){const t=setTimeout(()=>{this.lastResponseTime&&Date.now()-this.lastResponseTime<5e3||(this.log.error("timeout",e),this.isOnline&&this.setConnectionStatus(se.a.TimedOut))},5e3);a.catch($.a).finally(()=>{clearTimeout(t),this.setConnectionStatus(se.a.Connected),--this.activeRequests,this.setDrainTimeout()}),++this.activeRequests,void 0!==this.onDrainTimeout&&(clearTimeout(this.onDrainTimeout),this.onDrainTimeout=void 0)}return a}setDrainTimeout(){!this.activeRequests&&this.onDrain&&void 0===this.onDrainTimeout&&(this.onDrainTimeout=ye.a.setTimeout(()=>{this.onDrainTimeout=void 0,this.log("drain"),this.onDrain()},1e4))}setConnectionStatus(e,t){const a=e===se.a.Connected,s=this.status!==e;this.isOnline=a,this.status=e,s&&(be.onConnectionStatusChange&&be.onConnectionStatusChange({_:"networkerStatus",status:e,dcId:this.dcId,name:this.name,isFileNetworker:this.isFileNetworker,isFileDownload:this.isFileDownload,isFileUpload:this.isFileUpload,retryAt:t}),this.isOnline&&this.scheduleRequest())}pushResend(e,t=100){const a=t?Date.now()+t:0,s=this.sentMessages[e];if(s.container)for(const e of s.inner)this.pendingMessages[e]=a;else this.pendingMessages[e]=a;s.acked&&this.log.error("pushResend: acked message?",s),this.debug&&this.log.debug("pushResend:",e,s,this.pendingMessages,t),this.scheduleRequest(t)}getMsgKey(e,t){return fe(this,void 0,void 0,(function*(){const a=t?0:8,s=Object(g.a)(this.authKeyUint8.subarray(88+a,88+a+32),e),n=yield q.invokeCrypto("sha256-hash",s);return new Uint8Array(n).subarray(8,24)}))}getAesKeyIv(e,t){const a=t?0:8,s=new Uint8Array(52),n=new Uint8Array(52),i=[];return s.set(e,0),s.set(this.authKeyUint8.subarray(a,a+36),16),i.push(q.invokeCrypto("sha256-hash",s)),n.set(this.authKeyUint8.subarray(40+a,40+a+36),0),n.set(e,36),i.push(q.invokeCrypto("sha256-hash",n)),Promise.all(i).then(e=>{const t=new Uint8Array(32),a=new Uint8Array(32),s=new Uint8Array(e[0]),n=new Uint8Array(e[1]);return t.set(s.subarray(0,8)),t.set(n.subarray(8,24),8),t.set(s.subarray(24,32),24),a.set(n.subarray(0,8)),a.set(s.subarray(8,24),8),a.set(n.subarray(24,32),24),[t,a]})}isStopped(){return be.akStopped&&!this.isFileNetworker}performScheduledRequest(){if(this.isStopped())return!1;if(this.pendingAcks.length){const e=this.pendingAcks.slice();this.wrapMtpMessage({_:"msgs_ack",msg_ids:e},{notContentRelated:!0,noSchedule:!0})}if(this.pendingResends.length){const e=this.pendingResends.slice(),t={noSchedule:!0,notContentRelated:!0,messageId:""};this.wrapMtpMessage({_:"msg_resend_req",msg_ids:e},t),this.lastResendReq={req_msg_id:t.messageId,resend_msg_ids:e}}let e;const t=[];let a=0,s=!1,n=!1,i=!1;const r=Object(m.d)(Object.keys(this.pendingMessages));for(const o of r){const r=this.sentMessages[o];if(r&&r.body){const o=r.body.length+32;if(a+o>655360&&(this.log.warn("lengthOverflow",r,t),i=!0,e))break;t.push(r),a+=o,r.isAPI?s=!0:r.longPoll&&(n=!0),e=r}delete this.pendingMessages[o]}if(this.transport instanceof ue&&s&&!n){const e=new R({mtproto:!0});e.storeMethod("http_wait",{max_delay:500,wait_after:150,max_wait:3e3}),t.push({msg_id:z.generateId(),seq_no:this.generateSeqNo(),body:e.getBytes(!0)})}if(!t.length)return;const o=t.filter(e=>e.noResponse).map(e=>e.msg_id);if(t.length>1){const s=this.generateContainerMessage(a,t);e=s.messageWithBody,this.sentMessages[e.msg_id]=s.message}else this.sentMessages[e.msg_id]=e;this.pendingAcks=[];const p=this.sendEncryptedRequest(e);this.transport instanceof ue&&this.handleSentEncryptedRequestHTTP(p,e,o),this.transport instanceof ue||this.cleanupSent(),i&&this.scheduleRequest()}generateContainerMessage(e,t){const a=new R({mtproto:!0,startMaxLength:e+64});a.storeInt(1945237724,"CONTAINER[id]"),a.storeInt(t.length,"CONTAINER[count]");const s=[];t.forEach((e,t)=>{s.push(e.msg_id),a.storeLong(e.msg_id,"CONTAINER["+t+"][msg_id]"),a.storeInt(e.seq_no,"CONTAINER["+t+"][seq_no]"),a.storeInt(e.body.length,"CONTAINER["+t+"][bytes]"),a.storeRawBytes(e.body,"CONTAINER["+t+"][body]")});const n={msg_id:z.generateId(),seq_no:this.generateSeqNo(!0),container:!0,inner:s};return K.a.debug&&this.log.warn("Container",s,n.msg_id,n.seq_no),{message:n,messageWithBody:Object.assign({body:a.getBytes(!0)},n)}}getEncryptedMessage(e){return fe(this,void 0,void 0,(function*(){const t=yield this.getMsgKey(e,!0),a=yield this.getAesKeyIv(t,!0);return{bytes:yield q.invokeCrypto("aes-encrypt",e,a[0],a[1]),msgKey:t}}))}getDecryptedMessage(e,t){return this.getAesKeyIv(e,!1).then(e=>q.invokeCrypto("aes-decrypt",t,e[0],e[1]))}getEncryptedOutput(e){const t=new R({startMaxLength:e.body.length+2048});t.storeIntBytes(this.serverSalt,64,"salt"),t.storeIntBytes(this.sessionId,64,"session_id"),t.storeLong(e.msg_id,"message_id"),t.storeInt(e.seq_no,"seq_no"),t.storeInt(e.body.length,"message_data_length"),t.storeRawBytes(e.body,"message_data");const a=t.getBuffer(),s=16-t.getOffset()%16+16*(1+Object(P.a)(8)%5),n=new Uint8Array(s).randomize(),i=Object(g.a)(a,n);return this.getEncryptedMessage(i).then(e=>{const t=new R({startMaxLength:e.bytes.length+256});t.storeIntBytes(this.authKeyId,64,"auth_key_id"),t.storeIntBytes(e.msgKey,128,"msg_key"),t.storeRawBytes(e.bytes,"encrypted_data");return t.getBytes(!0)})}sendEncryptedRequest(e){return this.getEncryptedOutput(e).then(t=>{this.debug&&this.log.debug("sendEncryptedRequest: launching message into space:",e,[e.msg_id].concat(e.inner||[]),t.length);const a=this.transport.send(t);if(!(this.transport instanceof ue))return a;const s={code:406,type:"NETWORK_BAD_RESPONSE",transport:this.transport};return a.then(e=>{if(!(null==e?void 0:e.byteLength))throw s;return e},e=>{throw e.message||e.type||(e=Object.assign(s,{type:"NETWORK_BAD_REQUEST",originalError:e})),e})})}parseResponse(e){this.lastResponseTime=Date.now();const t=new B(e),a=t.fetchIntBytes(64,!0,"auth_key_id");if(!Object(g.b)(a,this.authKeyId))throw new Error("[MT] Invalid server auth_key_id: "+a.hex);const s=t.fetchIntBytes(128,!0,"msg_key"),n=t.fetchRawBytes(e.byteLength-t.getOffset(),!0,"encrypted_data");return this.getDecryptedMessage(s,n).then(e=>this.getMsgKey(e,!1).then(t=>{if(!Object(g.b)(s,t))throw this.log.warn("[MT] msg_keys",s,t),this.updateSession(),new Error("[MT] server msgKey mismatch, updating session");let a=new B(e,{mtproto:!0});a.fetchIntBytes(64,!0,"salt");const n=a.fetchIntBytes(64,!0,"session_id"),i=a.fetchLong("message_id");if(!(Object(g.b)(n,this.sessionId)||this.prevSessionId&&Object(g.b)(n,this.prevSessionId)))throw this.log.warn("Sessions",n,this.sessionId,this.prevSessionId,e),new Error("[MT] Invalid server session_id: "+Object(g.f)(n));const r=a.fetchInt("seq_no"),o=e.byteLength,p=a.fetchInt("message_data[length]");let d=a.getOffset();if(p%4||p>o-d)throw new Error("[MT] Invalid body length: "+p);const c=a.fetchRawBytes(p,!0,"message_data");d=a.getOffset();const l=o-d;if(l<12||l>1024)throw new Error("[MT] Invalid padding length: "+l);a=new B(c,{mtproto:!0,override:{mt_message:(e,t)=>{e.msg_id=a.fetchLong(t+"[msg_id]"),e.seqno=a.fetchInt(t+"[seqno]"),e.bytes=a.fetchInt(t+"[bytes]");const s=a.getOffset();try{e.body=a.fetchObject("Object",t+"[body]")}catch(t){this.log.error("parse error",t.message,t.stack),e.body={_:"parse_error",error:t}}a.getOffset()!==s+e.bytes&&a.setOffset(s+e.bytes)},mt_rpc_result:(e,t)=>{e.req_msg_id=a.fetchLong(t+"[req_msg_id]");const s=this.sentMessages[e.req_msg_id],n=s&&s.resultType||"Object";e.req_msg_id&&!s||(e.result=a.fetchObject(n,t+"[result]"))}}});return{response:a.fetchObject("","INPUT"),messageId:i,sessionId:n,seqNo:r}}))}applyServerSalt(e){const t=function(e){const t=new Uint8Array(Object(u.c)(Object(u.y)(e,10),!1));return Object(m.a)(t,8,!0,!1,!1)}(e);l.a.set({["dc"+this.dcId+"_server_salt"]:Object(g.f)(t)}),this.serverSalt=new Uint8Array(t)}scheduleRequest(e){this.transport instanceof ue&&(this.offline&&this.checkConnection("forced schedule"),e||(e=0));const t=Date.now()+(e||0);if(this.nextReq&&(void 0===e||this.nextReq<=t))return;this.nextReqTimeout&&clearTimeout(this.nextReqTimeout);const a=()=>{this.nextReqTimeout=0,this.nextReq=0,this.transport instanceof ue&&this.offline||this.performScheduledRequest()};this.nextReq=t,void 0!==e?this.nextReqTimeout=self.setTimeout(a,e):a()}ackMessage(e){let t;this.pendingAcks.push(e),this.transport instanceof ue&&(t=3e4),this.scheduleRequest(t)}reqResendMessage(e){this.debug&&this.log.debug("Req resend",e),this.pendingResends.push(e),this.scheduleRequest(100)}cleanupSent(){let e=!1;return Object.keys(this.sentMessages).forEach(t=>{const a=this.sentMessages[t];if(a.notContentRelated&&void 0===this.pendingMessages[t])delete this.sentMessages[t];else if(a.container){for(const t of a.inner)if(void 0!==this.sentMessages[t])return void(e=!0);delete this.sentMessages[t]}else e=!0}),!e}processMessageAck(e){const t=this.sentMessages[e];t&&!t.acked&&(t.acked=!0)}processError(e){const t=(e.error_message||"").match(/^([A-Z_0-9]+\b)(: (.+))?/)||[];return e.error_code=e.error_code,{code:!e.error_code||e.error_code<=0?500:e.error_code,type:t[1]||"UNKNOWN",description:t[3]||"CODE#"+e.error_code+" "+e.error_message,originalError:e}}resend(){for(const e in this.sentMessages){const t=this.sentMessages[e];(t.body||t.container)&&this.pushResend(e)}}processMessage(e,t,a){if("messageEmpty"===e._)return void this.log.warn("processMessage: messageEmpty",e,t);if(parseInt(t.substr(0,-10),10)%2)this.log.warn("Server even message id: ",t,e);else switch(e._){case"msg_container":for(const t of e.messages)this.processMessage(t,t.msg_id,a);break;case"bad_server_salt":this.log("Bad server salt",e),this.applyServerSalt(e.new_server_salt),this.sentMessages[e.bad_msg_id]&&this.pushResend(e.bad_msg_id),this.ackMessage(t);break;case"bad_msg_notification":switch(this.log.error("Bad msg notification",e),e.error_code){case 16:case 17:case 32:case 33:case 64:{const a=Object(u.y)(t,10);Object(u.x)(a,32);const s=z.applyServerTime(+Object(u.d)(a,10));(17===e.error_code||s)&&(this.log("Update session"),this.updateSession());const n=this.updateSentMessage(e.bad_msg_id);n&&this.pushResend(n.msg_id)}}break;case"message":if(-1!==this.lastServerMessages.indexOf(t))return void this.ackMessage(t);this.lastServerMessages.push(t),this.lastServerMessages.length>100&&this.lastServerMessages.shift(),this.processMessage(e.body,e.msg_id,a);break;case"new_session_created":this.ackMessage(t),this.debug&&this.log.debug("new_session_created",e),this.processMessageAck(e.first_msg_id),this.applyServerSalt(e.server_salt),l.a.get("dc").then(t=>{t===this.dcId&&!this.isFileNetworker&&be.updatesProcessor&&be.updatesProcessor(e)});break;case"msgs_ack":for(const t of e.msg_ids)this.processMessageAck(t);break;case"msg_detailed_info":if(!this.sentMessages[e.msg_id]){this.ackMessage(e.answer_msg_id);break}case"msg_new_detailed_info":if(this.pendingAcks.indexOf(e.answer_msg_id))break;this.reqResendMessage(e.answer_msg_id);break;case"msgs_state_info":if(this.ackMessage(e.answer_msg_id),this.lastResendReq&&this.lastResendReq.req_msg_id===e.req_msg_id&&this.pendingResends.length)for(const e of this.lastResendReq.resend_msg_ids){const t=this.pendingResends.indexOf(e);-1!==t&&this.pendingResends.splice(t,1)}break;case"rpc_result":{this.ackMessage(t);const a=e.req_msg_id,s=this.sentMessages[a];if(this.processMessageAck(a),s){const t=s.deferred;if("rpc_error"===e.result._){const a=this.processError(e.result);this.log("Rpc error",a),t&&t.reject(a)}else t&&t.resolve(e.result),s.isAPI&&!this.connectionInited&&(this.connectionInited=!0);delete this.sentMessages[a]}else this.debug&&this.log("Rpc result for unknown message:",a,e);break}case"pong":{const t=e.msg_id,a=this.sentMessages[t];a&&(a.deferred.resolve(e),delete this.sentMessages[t]);break}default:this.ackMessage(t),null!==be.updatesProcessor&&be.updatesProcessor(e)}}}const Pe=new class{constructor(){this.networkers=[],this.language=navigator.language||W.a.langPackCode,this.updatesProcessor=null,this.onConnectionStatusChange=null,this.akStopped=!1,this.userAgent=navigator.userAgent}removeNetworker(e){Object(n.e)(this.networkers,e)}setUpdatesProcessor(e){this.updatesProcessor=e}getNetworker(e,t,a,s,n){const i=new ve(e,t,a,s,n);return this.networkers.push(i),i}startAll(){if(this.akStopped){const e=this.networkers.filter(e=>e.isStopped());this.akStopped=!1,this.updatesProcessor&&this.updatesProcessor({_:"new_session_created"});for(const t of e)t.scheduleRequest()}}stopAll(){this.akStopped=!0}setLanguage(e){this.language=e;for(const e of this.networkers)e.isFileNetworker||(e.connectionInited=!1)}forceReconnectTimeout(){for(const e of this.networkers)e.forceReconnectTimeout()}forceReconnect(){for(const e of this.networkers)if(!e.isFileNetworker){e.forceReconnect();break}}};h.a&&(h.a.networkerFactory=Pe);var be=Pe,Ie=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};var Se=new class{constructor(){this.testPublicKeysHex=[{modulus:"c8c11d635691fac091dd9489aedced2932aa8a0bcefef05fa800892d9b52ed03200865c9e97211cb2ee6c7ae96d3fb0e15aeffd66019b44a08a240cfdd2868a85e1f54d6fa5deaa041f6941ddf302690d61dc476385c2fa655142353cb4e4b59f6e5b6584db76fe8b1370263246c010c93d011014113ebdf987d093f9d37c2be48352d69a1683f8f6e6c2167983c761e3ab169fde5daaa12123fa1beab621e4da5935e9c198f82f35eae583a99386d8110ea6bd1abb0f568759f62694419ea5f69847c43462abef858b4cb5edc84e7b9226cd7bd7e183aa974a712c079dde85b9dc063b8a5c08e8f859c0ee5dcd824c7807f20153361a7f63cfd2a433a1be7f5",exponent:"010001"}],this.publisKeysHex=[{modulus:"e8bb3305c0b52c6cf2afdf7637313489e63e05268e5badb601af417786472e5f93b85438968e20e6729a301c0afc121bf7151f834436f7fda680847a66bf64accec78ee21c0b316f0edafe2f41908da7bd1f4a5107638eeb67040ace472a14f90d9f7c2b7def99688ba3073adb5750bb02964902a359fe745d8170e36876d4fd8a5d41b2a76cbff9a13267eb9580b2d06d10357448d20d9da2191cb5d8c93982961cdfdeda629e37f1fb09a0722027696032fe61ed663db7a37f6f263d370f69db53a0dc0a1748bdaaff6209d5645485e6e001d1953255757e4b8e42813347b11da6ab500fd0ace7e6dfa3736199ccaf9397ed0745a427dcfa6cd67bcb1acff3",exponent:"010001"}],this.publicKeysParsed={},this.prepared=!1,this.preparePromise=null,K.a.test&&(this.publisKeysHex=this.testPublicKeysHex)}prepare(){return this.preparePromise?this.preparePromise:this.prepared?Promise.resolve():this.preparePromise=Promise.all(this.publisKeysHex.map(e=>{const t=new R;t.storeBytes(Object(g.c)(e.modulus),"n"),t.storeBytes(Object(g.c)(e.exponent),"e");const a=t.getBuffer();return q.invokeCrypto("sha1-hash",a).then(t=>{const a=t.slice(-8);a.reverse(),this.publicKeysParsed[Object(g.f)(a).toLowerCase()]={modulus:e.modulus,exponent:e.exponent}})})).then(()=>{this.prepared=!0,this.preparePromise=null})}select(e){return Ie(this,void 0,void 0,(function*(){yield this.prepare();for(let t=0;t<e.length;++t){let a=Object(u.d)(Object(u.y)(e[t],10),16).toLowerCase();a.length<16&&(a=new Array(16-a.length).fill("0").join("")+a);const s=this.publicKeysParsed[a];if(s)return Object.assign({fingerprint:e[t]},s)}}))}},Ce=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};var Me=new class{constructor(){this.cached={},this.log=Object(c.b)("AUTHORIZER",c.a.Error|c.a.Log)}sendPlainRequest(e,t){const a=t.byteLength,s=new R;s.storeLongP(0,0,"auth_key_id"),s.storeLong(z.generateId(),"msg_id"),s.storeInt(a,"request_length");const n=s.getBytes(!0),i=new Uint8Array(n.byteLength+a);i.set(n),i.set(t,n.length);const r=ce.chooseServer(e,"client",this.transportType),o={code:406,type:"NETWORK_BAD_RESPONSE"};h.b&&this.log("mtpSendPlainRequest: creating requestPromise");return r.send(i).then(e=>{if(h.b&&this.log("mtpSendPlainRequest: in good sector",e),!e||!e.byteLength)throw o;try{const t=new B(e,{mtproto:!0});if(4===e.length){const e=t.fetchInt();throw this.log.error("mtpSendPlainRequest: wrong response, error code:",e),e}const a=t.fetchLong("auth_key_id");"0"!==a&&this.log.error("auth_key_id !== 0",a);const s=t.fetchLong("msg_id");"0"===s&&this.log.error("msg_id === 0",s);const n=t.fetchInt("msg_len");return n||this.log.error("no msg_len",n),t}catch(e){this.log.error("mtpSendPlainRequest: deserialization went bad",e);throw Object.assign(o,{originalError:e})}},e=>{throw e.message||e.type||(e=Object.assign(o,{originalError:e})),e})}sendReqPQ(e){return Ce(this,void 0,void 0,(function*(){const t=new R({mtproto:!0});let a;t.storeMethod("req_pq_multi",{nonce:e.nonce}),h.b&&this.log("Send req_pq",e.nonce.hex);try{const s=this.sendPlainRequest(e.dcId,t.getBytes(!0));Se.prepare(),a=yield s}catch(e){throw this.log.error("req_pq error",e.message),e}const s=a.fetchObject("ResPQ");if("resPQ"!==s._)throw new Error("[MT] resPQ response invalid: "+s._);if(!Object(g.b)(e.nonce,s.nonce))throw this.log.error(e.nonce,s.nonce),new Error("[MT] resPQ nonce mismatch");e.serverNonce=s.server_nonce,e.pq=s.pq,e.fingerprints=s.server_public_key_fingerprints,h.b&&this.log("Got ResPQ",Object(g.f)(e.serverNonce),Object(g.f)(e.pq),e.fingerprints);const n=yield Se.select(e.fingerprints);if(!n)throw new Error("[MT] No public key found");e.publicKey=n,h.b&&this.log("PQ factorization start",e.pq);try{var i=yield q.invokeCrypto("factorize",e.pq)}catch(e){throw this.log.error("worker error factorize",e),e}return e.p=i[0],e.q=i[1],h.b&&this.log("PQ factorization done",i),this.sendReqDhParams(e)}))}sendReqDhParams(e){return Ce(this,void 0,void 0,(function*(){e.newNonce=new Uint8Array(32).randomize();const t={_:"p_q_inner_data_dc",pq:e.pq,p:e.p,q:e.q,nonce:e.nonce,server_nonce:e.serverNonce,new_nonce:e.newNonce,dc:0},a=new R({mtproto:!0});a.storeObject(t,"P_Q_inner_data","DECRYPTED_DATA");const s=a.getBytes(!0);if(s.length>144)throw"DH_params: data is more than 144 bytes!";const n=Object(m.a)(s,192,!1,!0,!1),i=n.slice().reverse(),r=yield(()=>Ce(this,void 0,void 0,(function*(){for(;;){const t=new Uint8Array(32).randomize(),a=i.concat(yield q.invokeCrypto("sha256-hash",t.concat(n)));if(224!==a.length)throw"DH_params: dataWithHash !== 224 bytes!";const s=yield q.invokeCrypto("aes-encrypt",a,t,new Uint8Array([0])),r=Object(g.h)(t,yield q.invokeCrypto("sha256-hash",s)).concat(s),o=Object(u.y)(Object(g.f)(r),16),p=Object(u.y)(e.publicKey.modulus,16);if(-1===Object(u.g)(o,p))return r}})))(),o=Object(m.a)(yield q.invokeCrypto("rsa-encrypt",r,e.publicKey),256,!0,!0,!0),p={nonce:e.nonce,server_nonce:e.serverNonce,p:e.p,q:e.q,public_key_fingerprint:e.publicKey.fingerprint,encrypted_data:o},d=new R({mtproto:!0});d.storeMethod("req_DH_params",p);const c=d.getBytes(!0);let l;h.b&&this.log("Send req_DH_params",p);try{l=yield this.sendPlainRequest(e.dcId,c)}catch(e){throw this.log.error("Send req_DH_params FAIL!",e),e}const y=l.fetchObject("Server_DH_Params","RESPONSE");if(h.b&&this.log("Sent req_DH_params, response:",y),"server_DH_params_fail"!==y._&&"server_DH_params_ok"!==y._)throw new Error("[MT] Server_DH_Params response invalid: "+y._);if(!Object(g.b)(e.nonce,y.nonce))throw new Error("[MT] Server_DH_Params nonce mismatch");if(!Object(g.b)(e.serverNonce,y.server_nonce))throw new Error("[MT] Server_DH_Params server_nonce mismatch");if("server_DH_params_fail"===y._){const t=(yield q.invokeCrypto("sha1-hash",e.newNonce)).slice(-16);if(!Object(g.b)(t,y.new_nonce_hash))throw new Error("[MT] server_DH_params_fail new_nonce_hash mismatch");throw new Error("[MT] server_DH_params_fail")}try{yield this.decryptServerDhDataAnswer(e,y.encrypted_answer)}catch(e){throw this.log.error("mtpDecryptServerDhDataAnswer FAILED!",e),e}return this.sendSetClientDhParams(e)}))}decryptServerDhDataAnswer(e,t){return Ce(this,void 0,void 0,(function*(){e.localTime=Date.now(),e.tmpAesKey=(yield q.invokeCrypto("sha1-hash",e.newNonce.concat(e.serverNonce))).concat((yield q.invokeCrypto("sha1-hash",e.serverNonce.concat(e.newNonce))).slice(0,12)),e.tmpAesIv=(yield q.invokeCrypto("sha1-hash",e.serverNonce.concat(e.newNonce))).slice(12).concat(yield q.invokeCrypto("sha1-hash",e.newNonce.concat(e.newNonce)),e.newNonce.slice(0,4));const a=new Uint8Array(yield q.invokeCrypto("aes-decrypt",t,e.tmpAesKey,e.tmpAesIv)),s=a.slice(0,20),n=a.slice(20),i=new B(n,{mtproto:!0}),r=i.fetchObject("Server_DH_inner_data");if("server_DH_inner_data"!==r._)throw new Error("[MT] server_DH_inner_data response invalid: "+r);if(!Object(g.b)(e.nonce,r.nonce))throw new Error("[MT] server_DH_inner_data nonce mismatch");if(!Object(g.b)(e.serverNonce,r.server_nonce))throw new Error("[MT] server_DH_inner_data serverNonce mismatch");h.b&&this.log("Done decrypting answer"),e.g=r.g,e.dhPrime=r.dh_prime,e.gA=r.g_a,e.serverTime=r.server_time,e.retry=0,this.verifyDhParams(e.g,e.dhPrime,e.gA);const o=i.getOffset();if(!Object(g.b)(s,yield q.invokeCrypto("sha1-hash",n.slice(0,o))))throw new Error("[MT] server_DH_inner_data SHA1-hash mismatch");z.applyServerTime(e.serverTime,e.localTime)}))}verifyDhParams(e,t,a){h.b&&this.log("Verifying DH params",e,t,a);const s=Object(g.f)(t);if(3!==e||"c71caeb9c6b1c9048e6c522f70f13f73980d40238e3e21c14934d037563d930f48198a0aa7c14058229493d22530f4dbfa336f6e0ac925139543aed44cce7c3720fd51f69458705ac68cd4fe6b6b13abdc9746512969328454f18faf8c595f642477fe96bb2a941d5bcd1d4ac8cc49880708fa9b378e3c4f3a9060bee67cf9a4a4a695811051907e162753b56b0f6b410dba74d8a84b2a14b3144e0ef1284754fd17ed950d5965b4b9dd46582db1178d169c6bc465b0d6ff9ca3928fef5b9ae4e418fc15e83ebea0f87fa9ff5eed70050ded2849f47bf959d956850ce929851f0d8115f635b105ee2e4e15d04b2454bf6f4fadf034b10403119cd8e3b92fcc5b"!==s)throw new Error("[MT] DH params are not verified: unknown dhPrime");h.b&&this.log("dhPrime cmp OK");const n=Object(u.y)(Object(g.f)(a),16),i=Object(u.y)(s,16);if(Object(u.g)(n,u.u)<=0)throw new Error("[MT] DH params are not verified: gA <= 1");if(Object(u.g)(n,Object(u.z)(i,u.u))>=0)throw new Error("[MT] DH params are not verified: gA >= dhPrime - 1");h.b&&this.log("1 < gA < dhPrime-1 OK");const r=Object(u.o)(2,32,0),o=Object(u.v)(r,1984);if(Object(u.g)(n,o)<0)throw new Error("[MT] DH params are not verified: gA < 2^{2048-64}");if(Object(u.g)(n,Object(u.z)(i,o))>=0)throw new Error("[MT] DH params are not verified: gA > dhPrime - 2^{2048-64}");return h.b&&this.log("2^{2048-64} < gA < dhPrime-2^{2048-64} OK"),!0}sendSetClientDhParams(e){return Ce(this,void 0,void 0,(function*(){const t=Object(g.c)(e.g.toString(16));e.b=new Uint8Array(256).randomize();try{var a=yield q.invokeCrypto("mod-pow",t,e.b,e.dhPrime)}catch(e){throw e}const s=new R({mtproto:!0});s.storeObject({_:"client_DH_inner_data",nonce:e.nonce,server_nonce:e.serverNonce,retry_id:[0,e.retry++],g_b:a},"Client_DH_Inner_Data");const n=(yield q.invokeCrypto("sha1-hash",s.getBuffer())).concat(s.getBytes(!0)),i=yield q.invokeCrypto("aes-encrypt",n,e.tmpAesKey,e.tmpAesIv),r=new R({mtproto:!0});let o;r.storeMethod("set_client_DH_params",{nonce:e.nonce,server_nonce:e.serverNonce,encrypted_data:i}),h.b&&this.log("Send set_client_DH_params");try{o=yield this.sendPlainRequest(e.dcId,r.getBytes(!0))}catch(e){throw e}const p=o.fetchObject("Set_client_DH_params_answer");if("dh_gen_ok"!==p._&&"dh_gen_retry"!==p._&&"dh_gen_fail"!==p._)throw new Error("[MT] Set_client_DH_params_answer response invalid: "+p._);if(!Object(g.b)(e.nonce,p.nonce))throw new Error("[MT] Set_client_DH_params_answer nonce mismatch");if(!Object(g.b)(e.serverNonce,p.server_nonce))throw new Error("[MT] Set_client_DH_params_answer server_nonce mismatch");try{var d=yield q.invokeCrypto("mod-pow",e.gA,e.b,e.dhPrime)}catch(e){throw d}const c=yield q.invokeCrypto("sha1-hash",d),l=c.slice(0,8),m=c.slice(-8);switch(h.b&&this.log("Got Set_client_DH_params_answer",p._,d),p._){case"dh_gen_ok":{const t=(yield q.invokeCrypto("sha1-hash",e.newNonce.concat([1],l))).slice(-16);if(!Object(g.b)(t,p.new_nonce_hash1))throw this.log.error("Set_client_DH_params_answer new_nonce_hash1 mismatch",t,p),new Error("new_nonce_hash1 mismatch");const a=Object(g.h)(e.newNonce.slice(0,8),e.serverNonce.slice(0,8));return h.b&&this.log("Auth successfull!",m,d,a),e.authKeyId=m,e.authKey=d,e.serverSalt=a,e}case"dh_gen_retry":{const t=(yield q.invokeCrypto("sha1-hash",e.newNonce.concat([2],l))).slice(-16);if(!Object(g.b)(t,p.new_nonce_hash2))throw new Error("[MT] Set_client_DH_params_answer new_nonce_hash2 mismatch");return this.sendSetClientDhParams(e)}case"dh_gen_fail":{const t=(yield q.invokeCrypto("sha1-hash",e.newNonce.concat([3],l))).slice(-16);if(!Object(g.b)(t,p.new_nonce_hash3))throw new Error("[MT] Set_client_DH_params_answer new_nonce_hash3 mismatch");throw new Error("[MT] Set_client_DH_params_answer fail")}}}))}getTransportType(){return this.getTransportTypePromise?this.getTransportTypePromise:this.getTransportTypePromise=ge.pingTransports().then(({websocket:e})=>{this.transportType=e?"websocket":"https",this.log("will use transport:",this.transportType)})}auth(e){let t=this.cached[e];return t||(t=new Promise((t,a)=>Ce(this,void 0,void 0,(function*(){let s;yield this.getTransportType();let n=1;for(;n++<=3;)try{const a={dcId:e,nonce:new Uint8Array(16).randomize()},s=this.sendReqPQ(a);return void t(yield s)}catch(e){s=e}a(s)}))),this.cached[e]=t)}},we=a(149),ke=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};const Ae=new class{constructor(){this.log=Object(c.b)("API"),this.cachedNetworkers={},this.cachedExportPromise={},this.gettingNetworkers={},this.baseDcId=0,this.afterMessageTempIds={},this.transportType=K.a.transport,ge.addEventListener("transport",e=>{this.changeTransportType(e)})}getTransportType(e){return this.transportType}iterateNetworkers(e){for(const t in this.cachedNetworkers){const a=this.cachedNetworkers[t];for(const s in a){const n=a[s];for(const a in n){n[a].forEach((n,i,r)=>{e({networker:n,dcId:+a,connectionType:s,transportType:t,index:i,array:r})})}}}}chooseServer(e,t,a){return ce.chooseServer(e,t,a,"client"===t)}changeTransportType(e){const t=this.transportType;if(t===e)return;this.log("changing transport from",t,"to",e);const a=this.cachedNetworkers[t],s=this.cachedNetworkers[e];this.cachedNetworkers[e]=a,this.cachedNetworkers[t]=s,this.transportType=e;for(const a in this.gettingNetworkers){const s=this.gettingNetworkers[a];delete this.gettingNetworkers[a];const n=a.replace(t,e);this.gettingNetworkers[n]=s,this.log("changed networker getKey from",a,"to",n)}this.iterateNetworkers(e=>{const t=this.getTransportType(e.connectionType),a=this.chooseServer(e.dcId,e.connectionType,t);e.networker.changeTransport(a)})}getBaseDcId(){return ke(this,void 0,void 0,(function*(){if(this.baseDcId)return this.baseDcId;const e=yield l.a.get("dc");return this.baseDcId||(e?this.baseDcId=e:this.setBaseDcId(W.a.baseDcId)),this.baseDcId}))}setUserAuth(e){return ke(this,void 0,void 0,(function*(){if(!e.dcID){const t=yield this.getBaseDcId();e.dcID=t}l.a.set({user_auth:e})}))}setBaseDcId(e){const t=this.baseDcId;t&&this.getNetworker(t).then(e=>{this.setOnDrainIfNeeded(e)}),this.baseDcId=e,l.a.set({dc:this.baseDcId})}logOut(){return ke(this,void 0,void 0,(function*(){const e=[];for(let t=1;t<=5;t++)e.push("dc"+t+"_auth_key");const t=yield Promise.all(e.map(e=>l.a.get(e))),a=[];for(let e=0;e<t.length;e++)t[e]&&a.push(this.invokeApi("auth.logOut",{},{dcId:e+1,ignoreErrors:!0}));const s=()=>{this.baseDcId=void 0,we.a.closeDatabases(),self.postMessage({type:"clear"})};return setTimeout(s,1e3),Promise.all(a).catch(e=>{e.handled=!0}).finally(s)}))}generateNetworkerGetKey(e,t,a){return[e,t,a].join("-")}getNetworker(e,t={}){const a=t.fileDownload?"download":t.fileUpload?"upload":"client",s=this.getTransportType(a);this.cachedNetworkers[s]||(this.cachedNetworkers[s]={client:{},download:{},upload:{}});const n=this.cachedNetworkers[s][a];e in n||(n[e]=[]);const i=n[e],r="client"===a||"https"===s?1:3;if(i.length>=r){let e=i.length-1,t=!1;for(;e>=0;--e)if(i[e].isOnline){t=!0;break}const a=t?i.splice(e,1)[0]:i.pop();return i.unshift(a),Promise.resolve(a)}let o=this.generateNetworkerGetKey(e,s,a);if(this.gettingNetworkers[o])return this.gettingNetworkers[o];const p=`dc${e}_auth_key`,d=`dc${e}_server_salt`;let c=this.chooseServer(e,a,s);return this.gettingNetworkers[o]=Promise.all([p,d].map(e=>l.a.get(e))).then(([n,r])=>ke(this,void 0,void 0,(function*(){let m,h;if(n&&512===n.length){r&&16===r.length||(r="AAAAAAAAAAAAAAAA");const a=Object(g.c)(n),s=(yield q.invokeCrypto("sha1-hash",a)).slice(-8),i=Object(g.c)(r);m=be.getNetworker(e,a,s,i,t)}else try{const a=yield Me.auth(e);l.a.set({[p]:Object(g.f)(a.authKey),[d]:Object(g.f)(a.serverSalt)}),m=be.getNetworker(e,a.authKey,a.authKeyId,a.serverSalt,t)}catch(e){h=e}const u=this.getTransportType(a);if(u!==s&&(o=this.generateNetworkerGetKey(e,u,a),c.destroy(),de.removeTransport(ce.chosenServers,c),m&&(c=this.chooseServer(e,a,u)),this.log("transport has been changed during authorization from",s,"to",u)),delete this.gettingNetworkers[o],h)throw this.log("get networker error",h,h.stack),h;return m.changeTransport(c),i.unshift(m),this.setOnDrainIfNeeded(m),m})))}setOnDrainIfNeeded(e){if(e.onDrain)return;(e.isFileNetworker?Promise.resolve(!0):this.getBaseDcId().then(t=>e.dcId!==t)).then(t=>{e.onDrain||t&&(e.onDrain=()=>{this.log("networker drain",e.dcId),e.onDrain=void 0,e.destroy(),be.removeNetworker(e),de.removeTransport(this.cachedNetworkers,e)},e.setDrainTimeout())})}invokeApi(e,t={},a={}){const s=Object(Q.a)();let{afterMessageId:n,prepareTempMessageId:i}=a;if(i&&s.then(()=>{delete this.afterMessageTempIds[i]}),h.a){const n=Date.now(),i=ye.a.setInterval(()=>{p&&p.isStopped()||this.log.error("Request is still processing:",e,t,a,"time:",(Date.now()-n)/1e3)},5e3);s.catch($.a).finally(()=>{clearInterval(i)})}const r=t=>{t?Object(m.b)(t)||(t={message:t}):t={type:"ERROR_EMPTY"},s.reject(t),(401===t.code&&"SESSION_REVOKED"===t.type||406===t.code&&"AUTH_KEY_DUPLICATED"===t.type)&&this.logOut(),a.ignoreErrors||(406===t.code&&(t.handled=!0),a.noErrorBox||(t.input=e,t.stack=d||t.originalError&&t.originalError.stack||t.stack||(new Error).stack,setTimeout(()=>{t.handled||(401===t.code&&this.logOut(),t.handled=!0)},100)))};let o,p,d=(new Error).stack||"empty stack";const c=d=>{if(n){const e=this.afterMessageTempIds[n];e&&(a.afterMessageId=e.messageId)}const m=(p=d).wrapApiCall(e,t,a);return i&&(this.afterMessageTempIds[i]={messageId:a.messageId,promise:s}),m.then(s.resolve,i=>{if("FILE_REFERENCE_EXPIRED"!==i.type&&this.log.error("Error",i.code,i.type,this.baseDcId,o,e,t),401===i.code&&this.baseDcId===o)"SESSION_PASSWORD_NEEDED"!==i.type&&(l.a.delete("dc"),l.a.delete("user_auth")),r(i);else if(401===i.code&&this.baseDcId&&o!==this.baseDcId){if(void 0===this.cachedExportPromise[o]){const e=new Promise((e,t)=>{this.invokeApi("auth.exportAuthorization",{dc_id:o},{noErrorBox:!0}).then(a=>{this.invokeApi("auth.importAuthorization",{id:a.id,bytes:a.bytes},{dcId:o,noErrorBox:!0}).then(e,t)},t)});this.cachedExportPromise[o]=e}this.cachedExportPromise[o].then(()=>{this.invokeApi(e,t,a).then(s.resolve,r)},r)}else if(303===i.code){const n=+i.type.match(/^(PHONE_MIGRATE_|NETWORK_MIGRATE_|USER_MIGRATE_)(\d+)/)[2];n!==o&&(a.dcId?a.dcId=n:this.setBaseDcId(n),this.getNetworker(n,a).then(n=>{n.wrapApiCall(e,t,a).then(s.resolve,r)},r))}else if(400===i.code&&0===i.type.indexOf("FILE_MIGRATE")){const n=+i.type.match(/^(FILE_MIGRATE_)(\d+)/)[2];n!==o?this.getNetworker(n,a).then(n=>{n.wrapApiCall(e,t,a).then(s.resolve,r)},r):r(i)}else if(a.rawError||420!==i.code)if(!a.rawError&&["MSG_WAIT_FAILED","MSG_WAIT_TIMEOUT"].includes(i.type)){const e=this.afterMessageTempIds[n];n=void 0,delete a.afterMessageId,e?e.promise.then(()=>c(p)):c(p)}else if(a.rawError||500!==i.code)"UNKNOWN"===i.type?setTimeout(()=>{c(p)},1e3):r(i);else{const e=Date.now();if(a.stopTime&&e>=a.stopTime)return r(i);a.waitTime=a.waitTime?Math.min(60,1.5*a.waitTime):1,setTimeout(()=>{c(p)},1e3*a.waitTime)}else{const e=+i.type.match(/^FLOOD_WAIT_(\d+)/)[1]||1;if(e>(void 0!==a.floodMaxTimeout?a.floodMaxTimeout:60)&&!a.prepareTempMessageId)return r(i);setTimeout(()=>{c(p)},1e3*e)}})};return(o=a.dcId||this.baseDcId)?this.getNetworker(o,a).then(c,r):this.getBaseDcId().then(e=>{this.getNetworker(o=e,a).then(c,r)}),s}};h.a.apiManager=Ae;var Ee=Ae,Te=a(47),De=a(15),Ue=a(167),xe=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};function Oe(e){return xe(this,void 0,void 0,(function*(){return yield navigator.mediaDevices.getDisplayMedia(e)}))}var Fe=a(146),Re=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};function Be(){const e={main:{},screen:{}};return t=>Re(this,void 0,void 0,(function*(){const{isScreen:a,constraints:s}=t,n=e[a?"screen":"main"];let i=n[s.audio?"audio":"video"];i||(i=(a?Oe:Fe.a)(s,t.muted),s.audio&&!n.audio&&(n.audio=i.finally(()=>n.audio=void 0)),s.video&&!n.video&&(n.video=i.finally(()=>n.video=void 0)));try{return yield i}catch(e){throw e}}))}window.getStreamCached=Be;var Ve=a(147),Le=a(148);class je extends X.a{constructor(){super(!1);const e=this.player=document.createElement("div");e.classList.add("call-player"),e.style.display="none",document.body.append(e),this.elements=new Map;const t=this.audio=new Audio;t.autoplay=!0,t.volume=1,this.player.append(t),this.elements.set("audio",t),this.fixSafariAudio(),this.getStream=Be()}get isSharingAudio(){return!!this.streamManager.hasInputTrackKind("audio")}get isSharingVideo(){return!!this.streamManager.hasInputTrackKind("video")}fixSafariAudio(){this.audio.play().catch($.a)}requestAudioSource(e){return this.requestInputSource(!0,!1,e)}requestInputSource(e,t,a){const{streamManager:s}=this;if(s){const a=!e||this.isSharingAudio,s=!t||this.isSharingVideo;if(a&&s)return Promise.resolve()}const n={audio:e&&Object(Ue.a)(),video:t&&Object(Ve.a)()};return this.getStream({constraints:n,muted:a}).then(e=>{e.getVideoTracks().length&&this.saveInputVideoStream(e,"main"),this.onInputStream(e)})}getElement(e){return this.elements.get(""+e)}cleanup(){this.player.textContent="",this.player.remove(),this.elements.clear(),this.streamManager.stop(),super.cleanup()}onTrack(e){this.tryAddTrack({stream:e.streams[0],track:e.track,type:"output"})}saveInputVideoStream(e,t){const a=e.getVideoTracks()[0];this.tryAddTrack({stream:e,track:a,type:"input",source:t||"main"})}tryAddTrack({stream:e,track:t,type:a,source:s}){s||(s=Le.a.getSource(e,a)),this.log("tryAddTrack",e,t,a,s);const n="output"===a,{player:i,elements:r,streamManager:o}=this,p=t.kind,d="video"===p,c=d?s:p;let l=r.get(c);d&&t.addEventListener("ended",()=>{this.log("[track] onended"),r.delete(c)},{once:!0}),n&&o.addTrack(e,t,a);const m=d?e:o.outputStream;if(l)l.paused&&l.play().catch($.a),l.srcObject=m;else{if(l=document.createElement(p),l.autoplay=!0,l.srcObject=m,l.volume=1,"undefined"!==l.sinkId){const{outputDeviceId:e}=this;e&&l.setSinkId(e)}d||i.appendChild(l),r.set(c,l)}return s}setMuted(e){this.streamManager.inputStream.getAudioTracks().forEach(t=>{"audio"===(null==t?void 0:t.kind)&&(t.enabled=void 0===e?!t.enabled:!e)})}onInputStream(e){if(!this.isClosing){const{streamManager:t,description:a}=this;t.addStream(e,"input"),a&&t.appendToConference(a)}}}var Ne=a(136);var qe,Ge,He=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},ze=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class We{constructor(e,t){qe.set(this,void 0),Ge.set(this,void 0),He(this,qe,e,"f"),He(this,Ge,t,"f")}get session(){return ze(this,qe,"f")}get media(){return ze(this,Ge,"f")}get bundle(){return this.session.lines.find(e=>{var t;return"group"===(null===(t=e.parsed)||void 0===t?void 0:t.key)}).value.split(" ").slice(1)}toString(){return this.session.lines.concat(...this.media.map(e=>e.lines)).map(e=>e.toString()).join("\r\n")+"\r\n"}}function Ke(e,t,a){const s=e.split(t),n=[];for(;a>0&&s.length;)n.push(s.shift()),--a;return s.length&&n.push(s.join(t)),n}qe=new WeakMap,Ge=new WeakMap;var $e,Je,Qe,Xe=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},Ye=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class Ze{constructor(e,t){$e.set(this,void 0),Je.set(this,void 0),Qe.set(this,void 0),Xe(this,$e,new Set,"f"),Xe(this,Je,e,"f"),Xe(this,Qe,t,"f")}generate(){const e=Ye(this,Je,"f"),t=Ye(this,Qe,"f"),a=Ye(this,$e,"f"),s=t-e+1;let n=Math.floor(e+s*Math.random()),i=0;for(;a.has(n);)if(n<t?++n:n=e,++i>=s)return null;return a.add(n),n}add(e){Ye(this,$e,"f").add(e)}}$e=new WeakMap,Je=new WeakMap,Qe=new WeakMap;var et,tt,at=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},st=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class nt{constructor(e,t){et.set(this,void 0),tt.set(this,void 0),at(this,et,e,"f"),at(this,tt,t,"f")}get key(){return st(this,et,"f")}get value(){return st(this,tt,"f")}}et=new WeakMap,tt=new WeakMap;var it,rt,ot,pt,dt=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},ct=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class lt{constructor(e,t,a,s){it.set(this,void 0),rt.set(this,void 0),ot.set(this,void 0),pt.set(this,void 0),dt(this,it,e,"f"),dt(this,rt,t,"f"),dt(this,ot,a,"f"),dt(this,pt,s,"f")}get type(){return ct(this,it,"f")}get port(){return ct(this,rt,"f")}get protocol(){return ct(this,ot,"f")}get ids(){return ct(this,pt,"f")}toString(){return this.type+" "+this.port+" "+this.protocol+" "+this.ids.join(" ")}}it=new WeakMap,rt=new WeakMap,ot=new WeakMap,pt=new WeakMap;var mt,gt,ht,ut,yt=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},ft=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class _t{constructor(e,t){if(mt.set(this,void 0),gt.set(this,void 0),ht.set(this,void 0),ut.set(this,void 0),yt(this,mt,e,"f"),"string"==typeof t){if(yt(this,gt,t,"f"),"m"===e){const e=t.split(" ");yt(this,ht,new lt(e[0],e[1],e[2],e.slice(3)),"f")}else if("a"===e){const e=Ke(t,":",1);t=e[0],yt(this,ut,1===e.length?new nt(t,null):new nt(t,e[1]),"f")}}else t instanceof lt?(yt(this,ht,t,"f"),yt(this,gt,t.toString(),"f")):t instanceof nt&&(yt(this,ut,t,"f"),yt(this,gt,t.value?`${t.key}:${t.value}`:t.key,"f"))}get key(){return ft(this,mt,"f")}get value(){return ft(this,gt,"f")}get parsed(){return ft(this,ut,"f")}get mediaLineParts(){return ft(this,ht,"f")}toString(){return`${this.key}=${this.value}`}}mt=new WeakMap,gt=new WeakMap,ht=new WeakMap,ut=new WeakMap;var vt,Pt,bt,It,St,Ct,Mt=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},wt=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class kt{constructor(e,t,a=":",s=!1){vt.set(this,void 0),Pt.set(this,void 0),bt.set(this,void 0),It.set(this,void 0),St.set(this,void 0),Ct.set(this,void 0),Mt(this,vt,e,"f"),Mt(this,Pt,t,"f"),Mt(this,bt,a,"f"),Mt(this,St,s,"f"),Mt(this,It,s?new Map:null,"f"),Mt(this,Ct,s?[]:null,"f")}get lines(){return wt(this,Pt,"f")}get value(){return wt(this,St,"f")||!this.lines.length?null:this.lines[0]}get exists(){return!wt(this,St,"f")}get key(){return wt(this,vt,"f")}get keys(){return kt.fill(this),wt(this,Ct,"f")}forEach(e){kt.fill(this),wt(this,It,"f").forEach(e)}get(e){return kt.fill(this),wt(this,It,"f").get(e)||new kt(e,[],":",!0)}static fill(e){if(null!==wt(e,It,"f"))return;const t=new Map;e.lines.forEach(a=>{const[s,n]=Ke(a,wt(e,bt,"f"),1),i=t.get(s)||[];t.set(s,[...i,n||""])});const a=Mt(e,It,kt.makeAttributes(t),"f");Mt(e,Ct,Array.from(a.keys()),"f")}static makeAttributes(e){const t=new Map;return e.forEach((e,a)=>{t.set(a,new kt(a,e))}),t}}vt=new WeakMap,Pt=new WeakMap,bt=new WeakMap,It=new WeakMap,St=new WeakMap,Ct=new WeakMap;var At,Et,Tt=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},Dt=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class Ut{constructor(e){At.set(this,void 0),Et.set(this,void 0),Tt(this,At,e,"f"),Tt(this,Et,new Map,"f"),Ut.fillAttributes(this)}get(e){return Dt(this,Et,"f").get(e)||new kt(e,[]," ",!0)}static fillAttributes(e){const t=new Map;Dt(e,At,"f").forEach(e=>{if("a"===e.key){const{key:a,value:s}=e.parsed;let n=t.get(a);n||(n=[],t.set(a,n)),n.push(s||"")}}),t.forEach((t,a)=>{Dt(e,Et,"f").set(a,new kt(a,t," ",!1))})}}At=new WeakMap,Et=new WeakMap;var xt,Ot,Ft,Rt,Bt=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},Vt=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class Lt{constructor(e){xt.set(this,void 0),Ot.set(this,void 0),Ft.set(this,void 0),Rt.set(this,void 0),Bt(this,xt,e,"f"),Bt(this,Ot,e[0],"f"),Bt(this,Ft,Bt(this,Rt,null,"f"),"f")}get lines(){return Vt(this,xt,"f")}get mediaLine(){return Vt(this,Ot,"f")}get mediaLineParts(){return Vt(this,Ot,"f").mediaLineParts}get mediaType(){return this.mediaLineParts.type}get direction(){if(!Vt(this,Rt,"f")){const e=this.attributes;let t;t=e.get("sendonly").exists?"sendonly":e.get("recvonly").exists?"recvonly":e.get("inactive").exists?"inactive":"sendrecv",Bt(this,Rt,t,"f")}return Vt(this,Rt,"f")}get isSending(){return"sendrecv"===this.direction||"sendonly"===this.direction}get isReceiving(){return"sendrecv"===this.direction||"recvonly"===this.direction}get attributes(){return Vt(this,Ft,"f")||Bt(this,Ft,new Ut(this.lines),"f"),Vt(this,Ft,"f")}get mid(){return this.attributes.get("mid").value}lookupAttributeKeys(e){const t={};for(const a in e){const s=this.attributes.get(a),n=!e[a];t[a]=s?n?s.lines:s.value:n?[]:void 0}return t}}xt=new WeakMap,Ot=new WeakMap,Ft=new WeakMap,Rt=new WeakMap;var jt,Nt,qt=function(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a},Gt=function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)};class Ht{constructor(e){jt.set(this,void 0),Nt.set(this,void 0),qt(this,jt,e,"f"),qt(this,Nt,e.filter(e=>"o"===e.key).map(e=>e.value.split(" ")[1])[0],"f")}get lines(){return Gt(this,jt,"f")}get sessionId(){return Gt(this,Nt,"f")}}function zt(e){function t(){a?s.push(new Lt(n)):a=new Ht(n)}let a=null,s=[],n=[];return e.split(/\r?\n/).forEach(e=>{if(!function(e){return/^[\s\xa0]*$/.test(e)}(e)){const a=Wt(e);"m"===a.key&&(t(),n=[]),n.push(a)}}),t(),new We(a,s)}function Wt(e){const t=Ke(e,"=",1);return new _t(t[0],t[1])}jt=new WeakMap,Nt=new WeakMap;var Kt=a(168),$t=a(135);function Jt(e,t){const a=t.lookupAttributeKeys({"ice-ufrag":!0,"ice-pwd":!0,fingerprint:!0,setup:!0,ssrc:!0,mid:!0,"ssrc-group":!1});if(!a.fingerprint){const t=e.session.lines.find(e=>{var t;return"fingerprint"===(null===(t=e.parsed)||void 0===t?void 0:t.key)});a.fingerprint=t.parsed.value}const s=function(e){const t=e.map(e=>{const[t,...a]=e.split(" ");return{_:"groupCallParticipantVideoSourceGroup",semantics:t,sources:a.map(e=>Object($t.c)(+e))}});return t.length?t:void 0}(a["ssrc-group"]),[n,i]=a.fingerprint.split(" ",2),r=a.ssrc&&Object($t.c)(+a.ssrc.split(" ",1)[0]);return{raw:a,ufrag:a["ice-ufrag"],pwd:a["ice-pwd"],fingerprint:{fingerprint:i,setup:a.setup,hash:n},source:r,sourceGroups:s,mid:a.mid}}function Qt(e){const{offer:t,data:a}=e,s=zt(t.sdp);let r=!1;if(e.skipAddingMulticast||(r=function(e){let t;return e.media.forEach((a,s)=>{if("video"===a.mediaType&&a.isSending&&!a.attributes.get("ssrc-group").get("SIM").exists){t||(t=new Ze(2,4294967295));const n=a.attributes.get("ssrc-group").get("FID").value.split(" "),i=a.lines;n.forEach(e=>t.add(+e));const r=[n[0],t.generate(),t.generate()],o=[n[1],t.generate(),t.generate()];i.push(Wt("a=ssrc-group:SIM "+r.join(" ")));const p=a.attributes.get("ssrc").get(n[0]).lines;r.forEach((e,t)=>{const a=o[t];t>0&&(i.push(Wt("a=ssrc-group:FID "+e+" "+a)),p.forEach(t=>{i.push(Wt("a=ssrc:"+e+" "+t))}),p.forEach(e=>{i.push(Wt("a=ssrc:"+a+" "+e))}))}),e.media[s]=new Lt(i)}}),!!t}(s)||r),Object(n.d)(s.media,(e,t,n)=>{if(e.isSending)return;if("application"===e.mediaType)return;const o=e.mediaLine,p=o.mediaLineParts,d=(p.ids,o.toString()),c=a[e.mediaType]["payload-types"].map(e=>""+e.id);if(d!==Object(Kt.c)(e.mediaType,void 0,c)){const o=Jt(s,e);let d=Object.assign({},a);d.transport=Object(i.a)(d.transport),d.transport.ufrag=o.ufrag,d.transport.pwd=o.pwd,d.transport.fingerprints=[o.fingerprint],d.transport.candidates=[];const c=new Ne.a(o.mid,p.type);c.setPort(p.port),o.source&&c.setSource(o.sourceGroups||o.source),c.setDirection(e.direction);const l=zt((new Kt.a).addSsrcEntry(c,d).finalize()).media[0];n[t]=l,r=!0}}),r){const e=s.toString();t.sdp=e}return{offer:t,sdp:s}}var Xt=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};class Yt extends class{constructor(e){var t;Object(i.g)(this,e),this.log||(this.log=(null===(t=this.connection)||void 0===t?void 0:t.log)||Object(c.b)("CALL-CONNECTION-BASE")),this.sources={}}createPeerConnection(e){return this.connection||(this.connection=function(e,t){t||(t=Object(c.b)("RTCPeerConnection")),t("constructor");const a=new RTCPeerConnection(e);return a.addEventListener("track",e=>{t("ontrack",e)}),a.addEventListener("signalingstatechange",()=>{t("onsignalingstatechange",a.signalingState)}),a.addEventListener("connectionstatechange",()=>{t("onconnectionstatechange",a.connectionState)}),a.addEventListener("negotiationneeded",()=>{t("onnegotiationneeded",a.signalingState)}),a.addEventListener("icecandidate",e=>{t("onicecandidate",e)}),a.addEventListener("iceconnectionstatechange",()=>{t("oniceconnectionstatechange",a.iceConnectionState)}),a.addEventListener("datachannel",()=>{t("ondatachannel")}),a.log=t,{connection:a}}(e,this.log.bindPrefix("connection")).connection)}createDataChannel(e){return this.dataChannel||(this.dataChannel=function(e,t,a){a||(a=Object(c.b)("RTCDataChannel"));const s=e.createDataChannel("data",t);return s.addEventListener("message",e=>{a("onmessage",e)}),s.addEventListener("open",()=>{a("onopen")}),s.addEventListener("close",()=>{a("onclose")}),s.log=a,s}(this.connection,e,this.log.bindPrefix("data")))}createDescription(){return this.description||(this.description=new Ne.b(this.connection))}appendStreamToConference(){return this.streamManager.appendToConference(this.description)}closeConnection(){const{connection:e}=this;if(e)try{e.log("close"),e.close()}catch(e){this.log.error(e)}}closeConnectionAndStream(e){this.closeConnection(),e&&this.streamManager.stop()}negotiate(){let e=this.negotiating;return e||(this.negotiating=this.negotiateInternal().finally(()=>{this.negotiating=void 0}))}sendDataChannelData(e){"open"===this.dataChannel.readyState&&this.dataChannel.send(JSON.stringify(e))}}{constructor(e){super(e),this.negotiateThrottled=Object(r.a)(this.negotiate.bind(this),0,!1)}createPeerConnection(){return this.connection||super.createPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",iceCandidatePoolSize:0})}createDataChannel(){if(this.dataChannel)return this.dataChannel;const e=super.createDataChannel();return e.addEventListener("open",()=>{this.maybeUpdateRemoteVideoConstraints()}),e.addEventListener("close",()=>{this.updateConstraintsInterval&&(clearInterval(this.updateConstraintsInterval),this.updateConstraintsInterval=void 0)}),e}createDescription(){if(this.description)return this.description;return super.createDescription()}appendStreamToConference(){super.appendStreamToConference()}invokeJoinGroupCall(e,t,a){return Xt(this,void 0,void 0,(function*(){const{groupCall:s,description:i}=this,r=s.id,d=t.map(t=>{const a=function(e,t){const a=Jt(e,t),s=t.mediaType,n={source:a.source,sourceGroups:a.sourceGroups,type:s};a.fingerprint.setup="active";const i={fingerprints:[a.fingerprint],pwd:a.pwd,ssrc:a.source,"ssrc-groups":a.sourceGroups||[],ufrag:a.ufrag};return{params:{_:"dataJSON",data:JSON.stringify(i)},source:a.source,media:t,sourceGroups:a.sourceGroups,entry:n}}(e,t);return this.sources[a.entry.type]=a.entry,a});let c;const l=d.find(e=>"audio"===e.media.mediaType),m=d.find(e=>"video"===e.media.mediaType);let{source:g,params:h}=l||{};const u=m||l,y={audio:l,video:m};if(i.entries.forEach(e=>{if("sendonly"===e.direction){const t=y[e.type];if(!t)return;i.setEntrySource(e,t.sourceGroups||t.source),i.setEntryPeerId(e,De.default.myId)}}),h!==u.params){const e=JSON.parse(u.params.data);g?e.ssrc=g:delete e.ssrc,h={_:"dataJSON",data:JSON.stringify(e)}}const f=p.a.getGroupCallInput(r);if("main"===a.type){const e={call:f,join_as:{_:"inputPeerSelf"},params:h,muted:a.isMuted,video_stopped:!a.joinVideo};c=Ee.invokeApi("phone.joinGroupCall",e),this.log("[api] joinGroupCall id="+r,e)}else{const e={call:f,params:h};c=Ee.invokeApi("phone.joinGroupCallPresentation",e),this.log("[api] joinGroupCallPresentation id="+r,e)}const _=yield c;o.a.processUpdateMessage(_);const v=_.updates.find(e=>"updateGroupCallConnection"===e._),P=JSON.parse(v.params.data);return P.audio=P.audio||s.connections.main.description.audio,i.setData(P),function(e,t){["audio","video"].filter(e=>t[e]).map(e=>[t[e],e]).forEach(([t,a])=>{const s=e.find(e=>e.mediaType===a);if(!s)return;const i=(e=>{const t={};return e.attributes.get("extmap").forEach(e=>{const a=e.key.split("/",1)[0];t[a]=e.value}),t})(s);Object(n.d)(t["rtp-hdrexts"],(e,t,s)=>{i[e.id]!==e.uri&&(s.splice(t,1),console.log("[sdp] filtered extmap:",e,t,a))})})}(t,P),P}))}negotiateInternal(){return Xt(this,void 0,void 0,(function*(){const{connection:e,description:t}=this,a="new"===e.iceConnectionState&&!t.getEntryByMid("0").source,s=this.log.bindPrefix("startNegotiation");s("start");const i=yield e.createOffer({iceRestart:!1});if(a&&this.dataChannel){t.createEntry("application").setDirection("sendrecv")}const{sdp:r,offer:o}=Qt({offer:i,data:t});s("[sdp] setLocalDescription",o.sdp),yield e.setLocalDescription(o);const p=r.media.filter(e=>"application"!==e.mediaType&&e.isSending);if(a)try{yield this.invokeJoinGroupCall(r,p,this.options)}catch(e){this.log.error("[tdweb] joinGroupCall error",e)}const d=[],c=r.bundle;Object(n.d)(c,(e,a,s)=>{const n=t.getEntryByMid(e);n.shouldBeSkipped(!0)&&(s.splice(a,1),d.push(n))});const l=r.media.map(e=>{const a=e.mid;let s=t.getEntryByMid(a);return s||(s=new Ne.a(a,e.mediaType),s.setDirection("inactive")),s}),m={type:"answer",sdp:t.generateSdp({bundle:c,entries:l,isAnswer:!0})};d.forEach(e=>{t.deleteEntry(e)}),s(`[sdp] setRemoteDescription signaling=${e.signalingState} ice=${e.iceConnectionState} gathering=${e.iceGatheringState} connection=${e.connectionState}`,m.sdp),yield e.setRemoteDescription(m),s("end")}))}negotiate(){let e=this.negotiating;return e||(e=super.negotiate(),this.updateConstraints&&e.then(()=>{this.maybeUpdateRemoteVideoConstraints(),this.updateConstraints=!1}),e)}maybeUpdateRemoteVideoConstraints(){if("open"!==this.dataChannel.readyState)return;this.log("maybeUpdateRemoteVideoConstraints");const e={colibriClass:"ReceiverVideoConstraints",constraints:{},defaultConstraints:{maxHeight:0},onStageEndpoints:[]};for(const t of this.description.entries){if("recvonly"!==t.direction||"video"!==t.type)continue;const{endpoint:a}=t;e.onStageEndpoints.push(a),e.constraints[a]={minHeight:180,maxHeight:720}}this.sendDataChannelData(e),e.onStageEndpoints.length?this.updateConstraintsInterval||(this.updateConstraintsInterval=window.setInterval(this.maybeUpdateRemoteVideoConstraints.bind(this),5e3)):this.updateConstraintsInterval&&(clearInterval(this.updateConstraintsInterval),this.updateConstraintsInterval=void 0)}addInputVideoStream(e){this.groupCall.saveInputVideoStream(e,this.type),this.streamManager.addStream(e,"input"),this.appendStreamToConference()}}var Zt=a(116);var ea=a(161),ta=function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function r(e){try{p(s.next(e))}catch(e){i(e)}}function o(e){try{p(s.throw(e))}catch(e){i(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}p((s=s.apply(e,t||[])).next())}))};class aa extends je{constructor(e){super(),Object(i.g)(this,e),this.log||(this.log=Object(c.b)("GROUP-CALL")),this.connections||(this.connections={}),this.isSpeakingMap||(this.isSpeakingMap=new Map),this.pinnedSources=[],this.participantsSsrcs=new Map,this.hadAutoPinnedSources=new Set,this.dispatchPinnedThrottled=Object(r.a)(()=>{this.dispatchEvent("pinned",this.pinnedSource)},0,!1),this.addEventListener("state",e=>{e===Zt.a.CLOSED&&this.cleanup()})}get connectionState(){return this.connections.main.connection.iceConnectionState}get state(){const{connectionState:e}=this;if("closed"===e)return Zt.a.CLOSED;if("connected"===e||s.IS_SAFARI&&"completed"===e){const{participant:e}=this;return e.pFlags.can_self_unmute?e.pFlags.muted?Zt.a.MUTED:Zt.a.UNMUTED:Zt.a.MUTED_BY_ADMIN}return Zt.a.CONNECTING}get participants(){return p.a.getCachedParticipants(this.id)}get isSharingScreen(){return!!this.connections.presentation}get pinnedSource(){return this.pinnedSources[this.pinnedSources.length-1]}get isMuted(){return this.state!==Zt.a.UNMUTED}get isClosing(){const{state:e}=this;return e===Zt.a.CLOSED}get streamManager(){return this.connections.main.streamManager}get description(){return this.connections.main.description}pinSource(e){Object(n.e)(this.pinnedSources,e),this.pinnedSources.push(e),this.dispatchPinnedThrottled()}unpinSource(e){this.hadAutoPinnedSources.delete(e),Object(n.e)(this.pinnedSources,e),this.dispatchPinnedThrottled()}unpinAll(){this.pinnedSources.length=0,this.dispatchPinnedThrottled()}getParticipantByPeerId(e){return Te.c===e?this.participant:this.participants.get(e)}toggleMuted(){return this.requestAudioSource(!0).then(()=>p.a.toggleMuted())}getElement(e){return super.getElement(e)}getVideoElementFromParticipantByType(e,t){let a;if(e.pFlags.self){a="video"===t?"main":"presentation"}else{a=e[t].source_groups[0].sources[0]}const s=this.getElement(a);if(!s)return;const n=s.cloneNode();return n.srcObject=s.srcObject,n.setAttribute("playsinline","true"),n.muted=!0,{video:n,source:a}}createConnectionInstance(e){return this.connections[e.type]=new Yt(Object.assign({groupCall:this,log:this.log.bindPrefix(e.type)},e))}changeRaiseHand(e){return p.a.editParticipant(this.id,this.participant,{raiseHand:e})}startScreenSharingInternal(){return ta(this,void 0,void 0,(function*(){try{const e="presentation",t=yield Oe({video:{width:{max:1920},height:{max:1080},frameRate:{max:30}},audio:!0}),a=new Le.a,s=this.createConnectionInstance({streamManager:a,type:e,options:{type:e}});s.createPeerConnection().addEventListener("negotiationneeded",()=>{s.negotiate()}),t.getVideoTracks()[0].addEventListener("ended",()=>{this.connections.presentation&&this.stopScreenSharing()},{once:!0}),s.createDescription(),s.addInputVideoStream(t)}catch(e){this.log.error("start screen sharing error",e)}}))}startScreenSharing(){return this.startScreenSharingPromise||(this.startScreenSharingPromise=this.startScreenSharingInternal().finally(()=>{this.startScreenSharingPromise=void 0}))}stopScreenSharing(){const e=this.connections.presentation;return e?(delete this.connections.presentation,this.unpinSource("presentation"),e.closeConnectionAndStream(!0),delete this.participant.presentation,p.a.saveApiParticipant(this.id,this.participant),Ee.invokeApi("phone.leaveGroupCallPresentation",{call:p.a.getGroupCallInput(this.id)}).then(e=>{o.a.processUpdateMessage(e)})):Promise.resolve()}toggleScreenSharing(){return this.isSharingScreen?this.stopScreenSharing():this.startScreenSharing()}startVideoSharingInternal(){return ta(this,void 0,void 0,(function*(){const e={video:Object(Ve.a)()};try{const t=yield Object(Fe.a)(e,!1);this.connections.main.addInputVideoStream(t),yield p.a.editParticipant(this.id,this.participant,{videoPaused:!1,videoStopped:!1})}catch(t){this.log.error("startVideoSharing error",t,e)}}))}startVideoSharing(){return this.startVideoSharingPromise||(this.startVideoSharingPromise=this.startVideoSharingInternal().finally(()=>{this.startVideoSharingPromise=void 0}))}stopVideoSharing(){return ta(this,void 0,void 0,(function*(){const e=this.connections.main,t=e.streamManager.inputStream.getVideoTracks()[0];t&&(Object(ea.a)(t),e.streamManager.appendToConference(e.description),yield p.a.editParticipant(this.id,this.participant,{videoStopped:!0}))}))}toggleVideoSharing(){return this.isSharingVideo?this.stopVideoSharing():this.startVideoSharing()}hangUp(e=!1,t=!1,a=!1){return ta(this,void 0,void 0,(function*(){for(const e in this.connections){this.connections[e].closeConnectionAndStream(!t)}if(this.dispatchEvent("state",this.state),!a&&!t){let t;const a=p.a.getGroupCallInput(this.id);if(e)this.log("[api] discardGroupCall id="+this.id),t=Ee.invokeApi("phone.discardGroupCall",{call:a});else if(this.joined){this.log("[api] leaveGroupCall id="+this.id);const e=this.connections.main;t=Ee.invokeApi("phone.leaveGroupCall",{call:a,source:e.sources.audio.source})}else this.log(`[api] id=${this.id} payload=null`),t=Ee.invokeApi("phone.joinGroupCall",{call:a,join_as:{_:"inputPeerSelf"},muted:!0,video_stopped:!0,params:{_:"dataJSON",data:""}});const s=yield t;o.a.processUpdateMessage(s)}}))}tryAddTrack(e){const{description:t}=this,a=super.tryAddTrack(e);if("output"===e.type){const e=t.getEntryBySource(+a),s=this.participants.get(e.peerId);s&&De.default.dispatchEvent("group_call_participant",{groupCallId:this.id,participant:s})}return a}onParticipantUpdate(e,t){const a=this.connections.main,{connection:s,description:n}=a,i=d.a.getPeerId(e.peer),r=!!e.pFlags.left,o=this.participantsSsrcs.get(i)||[];if(e.presentation&&!r){const{source:t}=p.a.makeSsrcFromParticipant(e,"video",e.presentation.source_groups,e.presentation.endpoint);this.hadAutoPinnedSources.has(t)||(this.hadAutoPinnedSources.add(t),this.pinSource(e.pFlags.self?"presentation":t))}if(e.pFlags.self){this.participant=e,a.sources.audio.source!==e.source&&this.hangUp();let s=!1;return e.pFlags.can_self_unmute?e.pFlags.muted&&(s=!0):(this.stopScreenSharing(),this.stopVideoSharing(),s=!0),s&&this.setMuted(!0),void(t!==i&&this.dispatchEvent("state",this.state))}const c=r?[]:p.a.makeSsrcsFromParticipant(e);r?this.participantsSsrcs.delete(i):this.participantsSsrcs.set(i,c);const l=new Set;o.forEach(e=>{const t=e.source;if(!c.find(e=>e.source===t)){this.unpinSource(t);const e=n.getEntryBySource(t);e&&"inactive"!==e.direction&&(e.setDirection("inactive"),l.add(e.type))}}),c.forEach(e=>{let t=n.getEntryBySource(e.source);t?"inactive"===t.direction&&(t.setDirection(t.originalDirection),l.add(t.type)):(t=n.createEntry(e.type),n.setEntrySource(t,e.sourceGroups||e.source),n.setEntryPeerId(t,i),"video"===e.type&&t.setEndpoint(e.endpoint),t.createTransceiver(s,{direction:"recvonly"}),l.add(t.type))}),l.size&&(l.has("video")&&(a.updateConstraints=!0),a.negotiateThrottled())}}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(16);const n={s:"Seconds",m:"Minutes",h:"Hours",d:"Days",w:"Weeks"};function i(e,t){const a=function(e,t=2){e||(e=1);let a=[];const s=[{m:1,t:"s"},{m:60,t:"m"},{m:60,t:"h"},{m:24,t:"d"},{m:7,t:"w"}];let n=1;s.forEach((t,i)=>{if(n*=t.m,e<n)return;const r=s[i===s.length-1?i:i+1].m;a.push({duration:e/n%r|0,type:t.t})});const i=a.slice(-t).reverse();for(let e=i.length-1;e>=0;--e)0===i[e].duration&&i.splice(e,1);return i}(e,2);if(t){const e=a.map(e=>s.default.format(n[e.type],!0,[e.duration]));return Object(s.join)(e,!1,t)}const i=a.map(e=>Object(s.i18n)(n[e.type],[e.duration])),r=document.createElement("span");return r.append(...Object(s.join)(i,!1)),r}},function(e,t,a){"use strict";var s=a(0);var n=!!document.createElement("video").canPlayType("video/quicktime")||s.IS_SAFARI||s.IS_APPLE_MOBILE;const i=new Set(["image/gif","video/mp4","video/webm"]);n&&i.add("video/quicktime");t.a=i},function(e,t,a){"use strict";function s(){const e={channelCount:2};return["noiseSuppression","echoCancellation","autoGainControl"].forEach(t=>{(function(e){var t;return(!!(null===(t=null===navigator||void 0===navigator?void 0:navigator.mediaDevices)||void 0===t?void 0:t.getSupportedConstraints()))[e]})(t)&&(e[t]=!0)}),e}a.d(t,"a",(function(){return s}))},function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return p}));var s=a(0);var n=a(135);const i="9";function r(e){return"application"===e?"DTLS/SCTP":"RTP/SAVPF"}function o(e,t=i,a){return`m=${e} ${t} ${r(e)} ${a.join(" ")}`}class p extends class{constructor(e="\r\n"){this.joiner=e,this.lines=[],this.newLine=[]}add(...e){return this.lines.push(...e),this}push(e){return this.newLine.push(e),this}addJoined(e=""){return this.add(this.newLine.join(e)),this.newLine=[],this}join(){return this.lines.join(this.joiner)}finalize(){return this.join()+this.joiner}}{addCandidate(e){return this.add(function(e){const t=[];return t.push("a=candidate:"),t.push(`${e.foundation} ${e.component} ${e.protocol.toUpperCase()} ${e.priority} ${e.ip} ${e.port} typ ${e.type}`),void 0!==e["rel-addr"]&&t.push(` raddr ${e["rel-addr"]} rport ${e["rel-port"]}`),t.push(" generation "+e.generation),t.join("")}(e))}addHeader(e,t){const a=t.join(" ");return this.add("v=0",`o=- ${e} 2 IN IP4 0.0.0.0`,"s=-","t=0 0","a=extmap-allow-mixed","a=group:BUNDLE "+a,"a=ice-options:trickle","a=ice-lite","a=msid-semantic:WMS *")}addTransport(e,t){this.add("a=ice-ufrag:"+e.ufrag,"a=ice-pwd:"+e.pwd,"a=ice-options:trickle");for(const t of e.fingerprints)this.add(`a=fingerprint:${t.hash} ${t.fingerprint}`,"a=setup:"+t.setup);if(!t&&e.candidates)for(const t of e.candidates)this.addCandidate(t);return this}addSsrc(e){let t="stream",{type:a,sourceGroups:s}=e;const i=Object(n.a)(e.source);t+=i,a+=i;const r=e=>{this.add(`a=ssrc:${e} cname:${t}`,`a=ssrc:${e} msid:${t} ${a}`,`a=ssrc:${e} mslabel:${t}`,`a=ssrc:${e} label:${a}`)};return(()=>{this.add(`a=msid:${t} ${a}`)})(),(null==s?void 0:s.length)?s.forEach(e=>{if(e.sources.length){const t=e.sources.map(n.a);this.add(`a=ssrc-group:${e.semantics} ${t.join(" ")}`),t.forEach(r)}}):r(i),this}addSsrcEntry(e,t,a){const s=(...e)=>this.add(...e),{type:n,mid:i,direction:p,port:d}=e,c=t.transport,l="application"===n,m=l?void 0:t[n],g="inactive"===p;if(e.shouldBeSkipped(a))return s(`m=${n} 0 ${r(n)} 0`,"c=IN IP4 0.0.0.0","a=inactive","a=mid:"+i);const h=l?[{id:5e3}]:m["payload-types"],u=h.map(e=>e.id);s(o(n,d,u),"c=IN IP4 0.0.0.0",`a=rtcp:${d} IN IP4 0.0.0.0`),c["rtcp-mux"]&&s("a=rtcp-mux"),s("a=mid:"+i);let y=p;if("sendrecv"===p||!a||g||l||(y="sendonly"===p?"recvonly":"sendonly"),s("a="+y),this.addTransport(c),l)s(`a=sctpmap:${h[0].id} webrtc-datachannel 256`);else{const e=m["rtp-hdrexts"];(null==e?void 0:e.length)&&e.forEach(e=>{s(`a=extmap:${e.id} ${e.uri}`)}),h.forEach(e=>{s(`a=rtpmap:${e.id} ${e.name}/${e.clockrate}${e.channels&&e.channels>1?"/"+e.channels:""}`);const t=e.parameters;if(Array.isArray(t))t.length&&console.error("parameters is array???",t);else if(t&&Object.keys(t).length){const a=[];for(const e in t)a.push(`${e}=${t[e]}`);s(`a=fmtp:${e.id} ${a.join(";")}`)}const a=e["rtcp-fbs"];(null==a?void 0:a.length)&&a.forEach(t=>{s(`a=rtcp-fb:${e.id} ${t.type}${t.subtype?" "+t.subtype:""}`)})})}return!e.source||"sendonly"!==y&&"sendrecv"!==y||this.addSsrc(e),this}addConference(e){const{conference:t,entries:a,bundle:n,isAnswer:i}=e;this.addHeader(t.sessionId,n),s.IS_FIREFOX&&this.addTransport(t.transport);for(const e of a)this.addSsrcEntry((i?e.recvEntry||e.sendEntry:e.sendEntry||e.recvEntry)||e,t,i);return this}static fromConference(e){return(new p).addConference(e).finalize()}}}])]);
//# sourceMappingURL=5.e750a36ff1f0b07a3a83.chunk.js.map