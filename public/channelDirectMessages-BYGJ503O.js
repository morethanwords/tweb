import{dR as w,c as p,aQ as P,b as e,ad as v,k as M,a2 as _}from"./index-C39jgWGl.js";import{u as k,S as y}from"./saveButton-CTyJmK2u.js";import{a5 as D,ab as g}from"./appDialogsManager-B_FVTFP0.js";import{S as R}from"./starsRangeInput-Cg5-lbHC.js";import{u as T}from"./useStarsCommissionAndWithdrawalPrice-BmriHy1M.js";import{S as A}from"./staticSwitch-PDs0gCek.js";import{T as L}from"./transition-CUZa2v0X.js";import"./iconTsx-3FyAFBS8.js";import"./classNames-CN4lTu6a.js";import"./page-DolksLDc.js";import"./putPreloader-BN48kIWH.js";import"./avatar-BkNI1F67.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-CHpUDomT.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-CeJa3c4q.js";import"./fastBlur-Co-79rP4.js";import"./emailSetup-BdS1uOgO.js";import"./countryInputField-ByWDtOgE.js";import"./scrollable2-C0y96lOY.js";import"./chatBackground-BaGXqPKn.js";import"./tracking-p7G0SHug.js";import"./useAppConfig-C-HNPS9j.js";const te=()=>{const[n]=D(),{apiManagerProxy:u,rootScope:h,Row:i}=w(),r=n.payload.chat;if(!r)return[];const s=r.linked_monoforum_id?u.getChat(r.linked_monoforum_id):void 0,c=!!s,l=s?._==="channel"&&+s.send_paid_messages_stars||0,[t,S]=p(c),[a,C]=p(l),m=P(()=>c!==t()||t()&&l!==a()),{commissionPercents:f,willReceiveDollars:b}=T(a);let o=!1;async function d(){if(!o){o=!0;try{await h.managers.appChatsManager.updateChannelPaidMessagesPrice(r.id,t()?a():0,t()),n.close()}finally{o=!1}}}return n.isConfirmationNeededOnClose=k({saveAllSettings:d,hasChanges:m,descriptionLangKey:"UnsavedChangesDescription.Channel"}),[e(v,{get mount(){return n.header},get children(){return e(y,{get hasChanges(){return m()},onClick:()=>void d()})}}),e(g,{caption:"ChannelDirectMessages.Settings.SwitchLabelCaption",get children(){return e(i,{clickable:()=>{S(!t())},get children(){return[e(i.Title,{get children(){return M("ChannelDirectMessages.Settings.SwitchLabel")}}),e(i.RightContent,{get children(){return e(A,{get checked(){return t()}})}})]}})}}),e(L,{name:"fade",get children(){return e(_,{get when(){return t()},get children(){return e(g,{name:"PaidMessages.SetPrice",class:"overflow-hidden",caption:"PaidMessages.SetPriceChannelDescription",get captionArgs(){return[f(),b()]},get children(){return e(R,{get value(){return a()},onChange:C,startFromZero:!0})}})}})}})]};export{te as default};
//# sourceMappingURL=channelDirectMessages-BYGJ503O.js.map
