{"version":3,"file":"heightTransition-EFJv3YqM.js","sources":["../src/components/sidebarRight/tabs/adminRecentActions/heightTransition.tsx"],"sourcesContent":["import {createEffect, createSignal, ParentProps} from 'solid-js';\nimport {Transition} from 'solid-transition-group';\nimport {animate} from '@helpers/animation';\nimport liteMode from '@helpers/liteMode';\n\n\ntype HeightTransitionProps = {\n  onRunningAnimations?: (value: number) => void;\n  scale?: boolean;\n};\n\nconst transitionTime = 240;\n\nexport const HeightTransition = (props: ParentProps<HeightTransitionProps>) => {\n  const [runningAnimations, setRunningAnimations] = createSignal(0);\n\n  const increase = () => setRunningAnimations(prev => prev + 1);\n  const decrease = () => setRunningAnimations(prev => prev - 1);\n\n  createEffect(() => {\n    if(!props.onRunningAnimations) return;\n    props.onRunningAnimations(runningAnimations());\n  });\n\n  return (\n    <Transition\n      onBeforeEnter={increase}\n      onAfterEnter={decrease}\n      onBeforeExit={increase}\n      onAfterExit={decrease}\n\n      onEnter={async(_el, done) => {\n        const el = _el as HTMLElement;\n        el.style.height = '0px';\n        el.style.opacity = '0';\n\n        animate(() => {\n          const targetHeight = el.scrollHeight;\n          el.animate([\n            {height: '0px', opacity: 0, ...(props.scale && {transform: 'scale(0.95)', transformOrigin: '75% center'})},\n            {height: `${targetHeight}px`, opacity: 1, ...(props.scale && {transform: 'scale(1)'})}\n          ], {\n            duration: liteMode.isAvailable('animations') ? transitionTime : 0,\n            easing: 'ease-in-out'\n          }).finished\n          .then(() => {\n            el.style.removeProperty('height');\n            el.style.removeProperty('opacity');\n\n            done();\n          });\n        });\n      }}\n\n      onExit={async(el, done) => {\n        animate(() => {\n          el.animate([\n            {height: `${el.scrollHeight}px`, opacity: 1},\n            {height: '0px', opacity: 0}\n          ], {\n            duration: liteMode.isAvailable('animations') ? transitionTime : 0,\n            fill: 'forwards',\n            easing: 'ease-in-out'\n          }).finished.then(done);\n        });\n      }}\n    >\n      {props.children}\n    </Transition>\n  );\n};\n"],"names":["transitionTime","HeightTransition","props","runningAnimations","setRunningAnimations","createSignal","increase","prev","decrease","createEffect","onRunningAnimations","_$createComponent","Transition","onBeforeEnter","onAfterEnter","onBeforeExit","onAfterExit","onEnter","_el","done","el","style","height","opacity","animate","targetHeight","scrollHeight","scale","transform","transformOrigin","duration","liteMode","isAvailable","easing","finished","then","removeProperty","onExit","fill","children"],"mappings":"mHAWA,MAAMA,EAAiB,IAEVC,EAAoBC,GAA8C,CAC7E,KAAM,CAACC,EAAmBC,CAAoB,EAAIC,EAAa,CAAC,EAE1DC,EAAWA,IAAMF,EAAqBG,GAAQA,EAAO,CAAC,EACtDC,EAAWA,IAAMJ,EAAqBG,GAAQA,EAAO,CAAC,EAE5DE,OAAAA,EAAa,IAAM,CACbP,EAAMQ,qBACVR,EAAMQ,oBAAoBP,EAAiB,CAAE,CAC/C,CAAC,EAEDQ,EACGC,EAAU,CACTC,cAAeP,EACfQ,aAAcN,EACdO,aAAcT,EACdU,YAAaR,EAEbS,QAAS,MAAMC,EAAKC,IAAS,CAC3B,MAAMC,EAAKF,EACXE,EAAGC,MAAMC,OAAS,MAClBF,EAAGC,MAAME,QAAU,IAEnBC,EAAQ,IAAM,CACZ,MAAMC,EAAeL,EAAGM,aACxBN,EAAGI,QAAQ,CACT,CAACF,OAAQ,MAAOC,QAAS,EAAG,GAAIrB,EAAMyB,OAAS,CAACC,UAAW,cAAeC,gBAAiB,YAAa,CAAC,EACzG,CAACP,OAAS,GAAEG,CAAa,KAAKF,QAAS,EAAG,GAAIrB,EAAMyB,OAAS,CAACC,UAAW,UAAW,CAAC,CAAC,EACrF,CACDE,SAAUC,EAASC,YAAY,YAAY,EAAIhC,EAAiB,EAChEiC,OAAQ,aACV,CAAC,EAAEC,SACFC,KAAK,IAAM,CACVf,EAAGC,MAAMe,eAAe,QAAQ,EAChChB,EAAGC,MAAMe,eAAe,SAAS,EAEjCjB,GACF,CAAC,CACH,CAAC,CACF,EAEDkB,OAAQ,MAAMjB,EAAID,IAAS,CACzBK,EAAQ,IAAM,CACZJ,EAAGI,QAAQ,CACT,CAACF,OAAS,GAAEF,EAAGM,YAAa,KAAKH,QAAS,CAAC,EAC3C,CAACD,OAAQ,MAAOC,QAAS,CAAC,CAAC,EAC1B,CACDO,SAAUC,EAASC,YAAY,YAAY,EAAIhC,EAAiB,EAChEsC,KAAM,WACNL,OAAQ,aACT,CAAA,EAAEC,SAASC,KAAKhB,CAAI,CACvB,CAAC,CACF,EAAA,IAAAoB,UAAA,CAAA,OAEArC,EAAMqC,QAAQ,CAAA,CAAA,CAGrB"}