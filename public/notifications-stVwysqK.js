import{b as t,c as m,ah as v,d as f,a7 as w,cf as P,eV as _,k as g,cM as F,dR as x,aQ as A,ab as T,ef as K,cO as E,aX as k,v as O,a4 as b}from"./index-DbIWMua-.js";import{s as R,B as U}from"./emailSetup-DROx5e_O.js";import{af as G,ag as n,a9 as h,ab as N,ah as I}from"./appDialogsManager-Cr5EkjPL.js";import{t as V}from"./toast-50q9RP3w.js";import"./classNames-CN4lTu6a.js";import"./iconTsx-DPzSjzwl.js";import"./transition-BU_naQRn.js";import"./page-ev5_ZyjV.js";import"./putPreloader-c4RN8T4Z.js";import"./avatar-Cgty9DeW.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-DWBd3-Tv.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-DlRVafGe.js";import"./scrollable2-BKgUwUZy.js";import"./chatBackground-CxgtCOxk.js";import"./tracking-D_4ZC535.js";const y=s=>{const[o,r]=m(!0),[i,u]=m(!0),[a,p]=m(),d={_:s.inputKey};v(async()=>{const e=a();if(!e)return;const c=await f.managers.appNotificationsManager.isMuted(e);return r(!c),u(!!e.show_previews),c}),w(async()=>{const e=!o(),c=i(),C=a(),M=await f.managers.appNotificationsManager.isMuted(C);if(e===M&&c===C.show_previews)return;const S=P(C);S._="inputPeerNotifySettings",S.mute_until=e?_:0,S.show_previews=c,f.managers.appNotificationsManager.updateNotifySettings(d,S)}),R(f)("notify_settings",e=>{const c=G(e.peer._);s.inputKey===c&&p(e.notify_settings)});const l=f.managers.appNotificationsManager.getNotifySettings(d);return(l instanceof Promise?l:Promise.resolve(l)).then(e=>{a()||p(e)}),t(N,{get name(){return s.name},get children(){return[t(n,{get children(){return[t(n.CheckboxFieldToggle,{get children(){return t(h,{get checked(){return o()},onChange:r,toggle:!0})}}),t(n.Title,{get children(){return g(s.typeText)}})]}}),t(n,{get children(){return[t(n.CheckboxFieldToggle,{get children(){return t(h,{get checked(){return i()},onChange:u,toggle:!0})}}),t(n.Title,{get children(){return g("MessagePreview")}})]}})]}})},B=()=>{const[s,o]=m(!0),r=E();return f.managers.appNotificationsManager.getContactSignUpNotification().then(i=>{o(i),F(r,()=>w(()=>{const u=s();u!==i&&f.managers.appNotificationsManager.setContactSignUpNotification(!u)}))}),t(N,{name:"NotificationsOther",get children(){return t(n,{get children(){return[t(n.CheckboxFieldToggle,{get children(){return t(h,{get checked(){return s()},onChange:o,toggle:!0})}}),t(n.Title,{get children(){return g("ContactJoined")}})]}})}})},J=()=>{const{uiNotificationsManager:s}=x(),[o,r]=k(),[i,u]=m(Notification.permission),a=A(()=>i()==="granted"),p=e=>{O(e),Notification.requestPermission().then(c=>{if(u(c),c==="granted")s.onPushConditionsChange();else throw 1},()=>{V({langPackKey:"Notifications.Restricted"})})},d=e=>t(n,b(e,{get fakeDisabled(){return!a()},get clickable(){return!a()&&p}})),l=e=>t(h,b(e,{get checked(){return a()&&e.checked}}));return t(N,{name:"Notifications.Web",get caption(){return a()?"MultiAccount.ShowNotificationsFromCaption":"Notifications.Default"},get children(){return[t(d,{get children(){return[t(n.CheckboxFieldToggle,{get children(){return t(l,{get checked(){return o.notifications.desktop},onChange:e=>r("notifications","desktop",e),toggle:!0})}}),t(n.Title,{get children(){return g("Notifications.Show")}})]}}),t(d,{get children(){return[t(n.CheckboxFieldToggle,{get children(){return t(l,{get checked(){return o.notifications.push},onChange:e=>r("notifications","push",e),toggle:!0})}}),t(n.Title,{get children(){return g("Notifications.Offline")}})]}}),t(d,{get children(){return[t(n.CheckboxFieldToggle,{get children(){return t(l,{get checked(){return o.notifyAllAccounts},onChange:e=>r("notifyAllAccounts",e),toggle:!0})}}),t(n.Title,{get children(){return g("MultiAccount.AllAccounts")}})]}}),T(()=>T(()=>!a())()&&t(U,{text:"Notifications.Enable",class:"btn-primary primary btn-transparent",icon:"unmute",get disabled(){return a()},onClick:p}))]}})},D=()=>{const{uiNotificationsManager:s}=x(),[o,r]=k();return t(N,{name:"Notifications.Sound.Section",caption:"Notifications.Sound.Caption",get children(){return[t(n,{get children(){return[t(n.CheckboxFieldToggle,{get children(){return t(h,{get checked(){return o.notifications.sound},onChange:i=>{i&&!o.notifications.volume&&r("notifications","volume",K.notifications.volume),r("notifications","sound",i)},toggle:!0})}}),t(n.Title,{get children(){return g("Notifications.Sound")}})]}}),t(I,{get textLeft(){return g("Notifications.Sound.Volume")},textRight:i=>""+Math.floor(i*100)+"%",step:.01,get value(){return o.notifications.volume},minValue:0,maxValue:1,onChange:i=>{i=+i.toFixed(2),i||r("notifications","sound",!1),r("notifications","volume",i)},onMouseUp:()=>{s.testSound(o.notifications.volume)}})]}})},L=()=>{const[s,o]=k();return t(N,{name:"Notifications.Sound.Effects",get children(){return t(n,{get children(){return[t(n.CheckboxFieldToggle,{get children(){return t(h,{get checked(){return s.notifications.sentMessageSound},onChange:r=>o("notifications","sentMessageSound",r),toggle:!0})}}),t(n.Title,{get children(){return g("Notifications.Sound.Sent")}})]}})}})},ct=()=>[t(J,{}),t(D,{}),t(L,{}),t(y,{name:"NotificationsPrivateChats",typeText:"NotificationsForPrivateChats",inputKey:"inputNotifyUsers"}),t(y,{name:"NotificationsGroups",typeText:"NotificationsForGroups",inputKey:"inputNotifyChats"}),t(y,{name:"NotificationsChannels",typeText:"NotificationsForChannels",inputKey:"inputNotifyBroadcasts"}),t(B,{})];export{ct as default};
//# sourceMappingURL=notifications-stVwysqK.js.map
