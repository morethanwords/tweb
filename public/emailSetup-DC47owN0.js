import{a7 as z,a9 as re,c as y,aR as ve,b as l,a4 as K,dd as Me,a6 as ie,bf as Ne,i as p,a2 as j,a5 as I,ab as M,dp as Fe,t as O,a as w,bW as be,e6 as pe,E as De,aQ as Ce,k as ae,cu as je,cv as ze,aV as J,cJ as ye,aS as ue,cI as N,an as ee,b9 as de,ah as U,ai as X,T as Z,ad as He,bm as Ve,bo as fe,bI as V,e as qe,bT as ge,eK as Ke,aa as Se,bY as Ue,a8 as Ge,q as We,aB as me,f$ as Ye,g0 as Je,V as Qe,eP as Xe,aM as Ze,n as Ee,bM as et,dj as tt,d as $e,f as nt}from"./index-BV2I1Jtp.js";import{c as E}from"./classNames-CN4lTu6a.js";import{I as ne}from"./iconTsx-WcVB6J0T.js";import{T as rt,r as ke}from"./transition-RjVzGhLO.js";import{T as it}from"./page-CZapATw0.js";const at="_wrap_87tyg_1",st="_input_87tyg_11",lt="_disabled_87tyg_29",ot="_digit_87tyg_33",ct="_active_87tyg_48",ut="_error_87tyg_52",dt="_digitContent_87tyg_59",ft="_caret_87tyg_86",D={wrap:at,input:st,disabled:lt,digit:ot,active:ct,error:ut,digitContent:dt,caret:ft,"caret-blink":"_caret-blink_87tyg_1"};function Ie(e){return(t,r,n)=>{e.addEventListener(t,r,n),z(()=>{e.removeEventListener(t,r,n)})}}const gt=O("<div><input inputmode=numeric autocomplete=one-time-code required pattern=^d*$>"),te=O("<div>");class Zt{constructor(t){this.options=t,this.errorSignal=y(!1),this.disabledSignal=y(!1),this.valueSignal=y(""),this.container=ve(r=>{const n=this;this.dispose=r;const i=l(we,K(t,{ref(s){const o=n.input;typeof o=="function"?o(s):n.input=s},get error(){return n.errorSignal[0]()},get disabled(){return n.disabledSignal[0]()},get valueSignal(){return n.valueSignal}}));return Me(()=>i)()})}set error(t){this.errorSignal[1](t)}set disabled(t){this.disabledSignal[1](t)}set value(t){this.valueSignal[1](t)}get value(){return this.valueSignal[0]()}cleanup(){this.dispose()}}function we(e){const[t,r]=e.valueSignal??y(""),[n,i]=y(-1),[s,o]=y(-1),[h,v]=y(!1);let u=!1,c=!1;const a={inserting:!1,start:null,end:null},f=S=>{a.inserting=S.inserting,a.start=S.originalStart,a.end=S.originalEnd;const b=S.start,g=S.end;if(b===null||g===null){i(-1),o(-1);return}i(b),o(g)},_=S=>{if(!u||document.activeElement!==d||d.selectionStart===null||d.selectionEnd===null){f({start:null,end:null,inserting:!1,originalStart:d.selectionStart,originalEnd:d.selectionEnd}),v(!1);return}const b=e.length,g=d.value.length<b&&d.selectionStart===d.value.length;if(v(g),g||d.selectionStart!==d.selectionEnd){f({start:d.selectionStart,end:g?d.selectionEnd+1:d.selectionEnd,inserting:g,originalStart:d.selectionStart,originalEnd:d.selectionEnd});return}let $=0,m=0,C;if(d.selectionStart===0)$=0,m=1,C="forward";else if(d.selectionStart===b)$=b-1,m=b,C="backward";else{let T=0,P=1;if(a.start!==null&&a.end!==null){const R=d.selectionStart<a.end&&Math.abs(a.start-a.end)===1;C=R?"backward":"forward",(R&&!a.inserting&&S!=="deleteContentForward"||!R&&c)&&(T+=-1)}c&&S===void 0&&(P+=1),$=d.selectionStart+T,m=d.selectionEnd+T+P}d.setSelectionRange($,m,C),f({start:$,end:m,inserting:g,originalStart:d.selectionStart,originalEnd:d.selectionEnd})};Ie(document)("selectionchange",()=>_());let d;return(()=>{const S=gt(),b=S.firstChild;return b.$$input=g=>{const $=d.value;let m=$;const C=t(),T=Math.abs((a.start??0)-(a.end??0));(a.inserting||T===C.length)&&(m=m.replace(/[^\d]/g,"")),m=m.slice(0,e.length);const P=!/^\d*$/.test(m);if($.length!==0&&m.length===0||m===C||P){g.preventDefault(),g.currentTarget.value=C,P&&g.currentTarget.setSelectionRange(a.start??0,a.end??0);return}m.length<C.length&&_(g.inputType),r(m),e.onChange?.(m),m.length===e.length&&e.onFill?.(m)},b.$$keyup=g=>{g.key==="Shift"&&(c=!1)},b.$$keydown=g=>{g.key==="Shift"&&(c=!0)},b.addEventListener("blur",()=>{u=!1,_()}),b.addEventListener("focus",()=>{d.setSelectionRange(t().length,t().length),u=!0,_()}),ie(g=>{d=g,e.ref?.(g)},b),Ne(b,"spellcheck",!1),p(S,l(Fe,{get each(){return Array.from({length:e.length})},children:(g,$)=>(()=>{const m=te();return p(m,l(rt,{get children(){return l(j,{get when(){return t()[$]},get children(){const C=te();return p(C,()=>t()[$]),I(()=>w(C,D.digitContent)),C}})}}),null),p(m,(()=>{const C=M(()=>!!(h()&&t().length===$));return()=>C()&&(()=>{const T=te();return I(()=>w(T,D.caret)),T})()})(),null),I(()=>w(m,E(D.digit,n()<=$&&$<s()&&D.active))),m})()}),null),I(g=>{const $=E(D.wrap,e.error&&D.error,e.disabled&&D.disabled,e.class),m=D.input,C=e.disabled;return $!==g._v$&&w(S,g._v$=$),m!==g._v$2&&w(b,g._v$2=m),C!==g._v$3&&(b.disabled=g._v$3=C),g},{_v$:void 0,_v$2:void 0,_v$3:void 0}),I(()=>b.value=t()),S})()}re(["keydown","keyup","input"]);function mt(e){const[,t]=be(e,["noRipple","rippleSquare"]),[r,n]=y();return l(pe,K(t,{ref:i=>{I(()=>{if(!e.noRipple){const s=De(i,void 0,"no");n(s.element),z(()=>{s.dispose(),n()})}}),e.ref?.(i)},get class(){return E(e.class,!e.noRipple&&"rp",!e.noRipple&&e.rippleSquare&&"rp-square",...Object.entries(e.classList||{}).map(([i,s])=>s?i:void 0))},get children(){return[M(()=>r()),M(()=>e.children)]}}))}const H=(e={})=>{let t,r;return e.disabled!==void 0?t=Ce(()=>e.disabled):[t,r]=y(!1),l(mt,{ref(n){const i=e.ref;typeof i=="function"?i(n):e.ref=n},get component(){return e.as||"button"},get class(){return E(e.class,e.primaryFilled&&"btn-primary btn-color-primary",e.primary&&"btn btn-primary primary",e.primaryTransparent&&"btn-primary primary btn-transparent",e.large&&"btn-large",e.onlyMobile&&"only-handhelds")},get disabled(){return t()},get onClick(){return e.onClick&&r?n=>{try{const i=e.onClick(n);i instanceof Promise&&(r(!0),i.finally(()=>{r(!1)}))}catch(i){throw i}}:e.onClick},get noRipple(){return e.noRipple},get rippleSquare(){return e.rippleSquare},get tabIndex(){return e.tabIndex},get children(){return[M(()=>M(()=>!!e.icon)()&&l(ne,{get icon(){return e.icon},get class(){return E("button-icon",e.iconClass)}})),M(()=>M(()=>!!e.text)()?ae(e.text,e.textArgs):e.children),M(()=>M(()=>!!e.iconAfter)()&&l(ne,{get icon(){return e.iconAfter},get class(){return E("button-icon",e.iconClass)}}))]}})};H.Corner=e=>l(H,K(e,{get class(){return E("btn-circle","btn-corner","z-depth-1",e.class)},tabIndex:-1}));H.Icon=e=>l(H,K(e,{get class(){return E("btn-icon",e.icon,e.class)},tabIndex:-1}));const ht=O("<div><div>"),G=O("<div>"),_t=O("<div class=popup-title>"),vt=O("<button>"),bt=O('<button class="btn-primary btn-color-primary">'),F=ye(),xe=ye(),se=document.body,[pt,Ct]=y(se),Ae=()=>{Ct(ze()||se)};je(se,Ae);const A=e=>{const[t,r]=y(!1),[n,i]=ue({}),[s,o]=ue([]),[h,v]=y(),u=N(xe),c=e.managers||A.MANAGERS,a=fe(),f=fe(),_=e.withoutOverlay||!1,d=ee.isDarkOverlayActive,S=e.confirmShortcutIsSendShortcut||!1,b=e.isConfirmationNeededOnClose,g=(x,L)=>(i(x,L),z(()=>i(x,void 0)),L),$=(x,L)=>(o([...s,x]),z(()=>o(s.filter(B=>B!==x))),L),m=()=>{if(t()||P())return;r(!0);const x={type:"popup",onPop:()=>{if(b){const L=b();if(L)return Promise.resolve(L).then(()=>{T()}),!1}return T()}};v(x),V.pushItem(x),qe(),_||(ee.isOverlayActive=!0,ge.checkAnimations2(!0))},C=()=>{if(P())return;const x=h();if(!x){T();return}V.backByItem(x)},T=()=>{P()||(e.onClose?.(),le(!0),R(!0),r(!1),setTimeout(()=>{le(!1),a.destroy(),Ke.getInstance().hide(),_||(ee.isOverlayActive=!1);const x=h();x&&(V.removeItem(x),v(void 0)),de(A.POPUPS,W),Ae(),f.destroy(),_||ge.checkAnimations2(!1),u.dispose(),e.onCloseAfterTimeout?.()},250))},[P,R]=y(!1),[Re,le]=y(!1),[Oe,Be]=y(),W={register:g,registerButton:$,store:n,buttons:s,shown:t,show:m,hide:C,destroy:T,get destroyed(){return P()},managers:c,middlewareHelper:a,lateMiddlewareHelper:f,get navigationItem(){return h()},withoutOverlay:_,night:d,confirmShortcutIsSendShortcut:S,isConfirmationNeededOnClose:b,closable:e.closable||!1,withConfirm:e.withConfirm||!1,body:e.body||!1,footer:e.footer||!1,title:e.title||!1,get element(){return Oe()}};return A.POPUPS.push(W),z(()=>{de(A.POPUPS,W)}),e.show!==void 0?U(X(()=>e.show,x=>{let L;x?L=m:t()&&(L=C),L&&Z().then(L)})):setTimeout(()=>{m()},0),l(F.Provider,{value:W,get children(){return l(He,{get mount(){return pt()},get children(){const x=ht(),L=x.firstChild;return x.$$click=B=>{Ve(B.target,"popup-container")||!B.target.isConnected||e.closable!==!1&&C()},ie(Be,x),p(L,()=>e.children),I(B=>{const oe=E("popup",e.class,d&&"night",_&&"no-overlay",t()&&"active",Re()&&"hiding"),ce=E("popup-container z-depth-1",e.containerClass);return oe!==B._v$&&w(x,B._v$=oe),ce!==B._v$2&&w(L,B._v$2=ce),B},{_v$:void 0,_v$2:void 0}),x}})}})};A.POPUPS=[];A.MANAGERS=void 0;A.Header=e=>N(F).register("header",(()=>{const t=G();return p(t,()=>e.children),I(()=>w(t,E("popup-header",e.class))),t})());A.Title=e=>{const t=N(F),r=()=>{if(e.title){if(typeof e.title=="string")return ae(e.title);if(typeof e.title!="boolean")return e.title}return e.children};return t.register("title",l(j,{get when(){return r()},get children(){const n=_t();return p(n,r),n}}))};A.CloseButton=e=>{const t=N(F),r=()=>{e.canGoBack&&e.onBackClick?e.onBackClick():t.hide()};return t.register("closeButton",(()=>{const n=vt();return n.$$click=r,p(n,l(j,{get when(){return e.onBackClick},get fallback(){return l(ne,{icon:"close"})},get children(){const i=G();return I(()=>w(i,E("animated-close-icon",e.canGoBack&&"state-back"))),i}})),I(()=>w(n,E("btn-icon popup-close",e.class))),n})())};A.ConfirmButton=e=>{const t=N(F);return t.withConfirm?t.register("confirmButton",(()=>{const r=bt();return p(r,l(j,{get when(){return t.withConfirm!==!0},get children(){return ae(t.withConfirm)}})),r})()):null};A.Body=e=>N(F).register("body",(()=>{const t=G();return p(t,()=>e.children),I(()=>w(t,E("popup-body",e.class))),t})());A.Footer=e=>N(F).register("footer",(()=>{const t=G();return p(t,()=>e.children),I(()=>w(t,E("popup-footer popup-footer-abitlarger",e.class))),t})());A.FooterButton=e=>l(A.Button,K(e,{noDefaultClass:!0,get class(){return E("popup-footer-button","btn-primary",e.secondary?"btn-transparent primary text-bold":"btn-color-primary",e.class)}}));A.Button=e=>{const t=N(F),[r,n]=y(!1),i=async s=>{if(t.destroyed)return;let o=e.callback?.(s);if(o!==void 0&&o instanceof Promise){n(!0);try{o=await o}catch(h){console.log("popup button error",h),o=!1}o===!1&&n(!1)}o!==!1&&t.hide()};return t.registerButton(e,l(H,{get class(){return E(!e.noDefaultClass&&"popup-button btn",e.noDefaultClass?void 0:e.danger?"danger":"primary",e.class)},get noRipple(){return e.noRipple},onClick:i,get disabled(){return e.disabled||r()},get icon(){return e.iconLeft},get iconAfter(){return e.iconRight},get iconClass(){return E("popup-button-icon",e.iconLeft?"left":"right")},get text(){return e.langKey},get textArgs(){return e.langArgs},get children(){return e.children}}))};A.Buttons=e=>N(F).register("buttons",(()=>{const r=G();return p(r,()=>e.children),I(()=>w(r,E("popup-buttons",e.class))),r})());A.getPopups=e=>A.POPUPS.filter(t=>t instanceof e);function yt(e){ve(t=>{l(xe.Provider,{value:{dispose:t},get children(){return J(e)}})})}re(["click"]);const he=O("<div>");function St(e){const[,t]=be(e,["children","currentPage","class","tabClass"]);let r;return Se(()=>{const n=it({...t,content:r});U(X(()=>e.currentPage,i=>n(i)))}),(()=>{const n=he(),i=r;return typeof i=="function"?ie(i,n):r=n,p(n,l(Ue,{get each(){return e.children},children:s=>(()=>{const o=he();return p(o,s),I(()=>w(o,E("tabs-tab",e.tabClass))),o})()})),I(()=>w(n,E("tabs-container",e.class))),n})()}const Et="_popup_pjp0p_1",$t="_popupContainer_pjp0p_5",kt="_popupHeader_pjp0p_10",It="_popupCloseButton_pjp0p_16",wt="_popupFooter_pjp0p_20",xt="_slider_pjp0p_24",At="_page_pjp0p_31",Pt="_lottie_pjp0p_42",Tt="_title_pjp0p_49",Lt="_subtitle_pjp0p_56",Rt="_input_pjp0p_66",Ot="_footer_pjp0p_75",Bt="_button_pjp0p_82",Mt="_buttonContainer_pjp0p_87",Nt="_error_pjp0p_92",k={popup:Et,popupContainer:$t,popupHeader:kt,popupCloseButton:It,popupFooter:wt,slider:xt,page:At,lottie:Pt,title:Tt,subtitle:Lt,input:Rt,footer:Ot,button:Bt,buttonContainer:Mt,error:Nt},Ft=O("<div>"),Pe=e=>{const t=K({size:100},e);let r;const n=(()=>{const o=Ft();return o.$$click=()=>{t.restartOnClick&&r?.then(h=>{h.playOrRestart()})},I(h=>{const v={[t.class]:!!t.class},u=t.size+"px";return h._v$=Ge(o,v,h._v$),u!==h._v$2&&((h._v$2=u)!=null?o.style.setProperty("--size",u):o.style.removeProperty("--size")),h},{_v$:void 0,_v$2:void 0}),o})();let i=!1;function s(){if(t.needRaf&&!n.isConnected&&!i){requestAnimationFrame(s);return}r=t.lottieLoader.loadAnimationAsAsset({container:n,loop:!1,autoplay:!0,width:t.size,height:t.size,...t.rlottieOptions},t.name),t.onPromise?.(r)}return I(s),z(()=>{i=!0,r?.then(o=>{o.remove()})}),n};re(["click"]);function Dt(e,t){U(X(t,(r,n)=>{n&&e.classList.remove(...n.split(" ")),r&&e.classList.add(...r.split(" "))}))}function en(e,...t){e.classList.add(...t)}function q(e){const t=ke(()=>e.args,i=>i instanceof Node||typeof i=="string"),r=()=>t.toArray(),n=new We.IntlElement({key:e.key,args:r()});return Dt(n.element,()=>e.class),U(X(()=>[e.key,r()],([i,s],o)=>{n.update({key:i,args:s})},{defer:!0})),n.element}function jt(e,t){const r=J(e),{onChange:n}=t;let i=new Set(t.appear?void 0:r);const s=new WeakSet,[o,h]=y([],{equals:!1}),[v]=Je(),u=t.exitMethod==="remove"?me:f=>{h(_=>(_.push(...f),_));for(const _ of f)s.delete(_)};let c;return t.exitMethod==="remove"?c=me:t.exitMethod==="keep-index"?c=f=>f.elements.splice(f.previousIndex,0,f.element):t.exitMethod==="keep-relative"?c=f=>{let _;f.side==="start"?_=f.previousIndex:_=f.elements.length,f.elements.splice(_,0,f.element)}:c=f=>f.elements.push(f.element),Ce(f=>{const _=o(),d=e();if(d[Ye],J(v))return v(),f;if(_.length){const S=f.filter(b=>!_.includes(b));return _.length=0,n({list:S,added:[],removed:[],unchanged:S,finishRemoved:u}),S}return J(()=>{const S=new Set(d),b=d.slice(),g=[],$=[],m=[];for(const P of d)(i.has(P)?m:g).push(P);const C={elements:b,previousElements:f,side:"start"};let T=!g.length;for(let P=0;P<f.length;++P){const R=f[P];S.has(R)?C.side="end":(s.has(R)||($.push(R),s.add(R)),C.element=R,C.previousIndex=P,c(C)),T&&R!==b[P]&&(T=!1)}return!$.length&&T?f:(n({list:b,added:g,removed:$,unchanged:m,finishRemoved:u}),i=S,b)})},t.appear?[]:r.slice())}function zt(e){return typeof e!="function"?()=>e:e}function Ht(e){const t=ke(()=>e.children).toArray,r=e.itemClassName?i=>{i.forEach(s=>{s.classList.add(e.itemClassName)})}:void 0;return r?.(t()),jt(t,{exitMethod:"keep-index",appear:e.appear,onChange:({added:i,removed:s,finishRemoved:o})=>{const h=e.animationOptions;Qe.isAvailable("animations")||(h.duration=0),r?.(i);const v=zt(e.keyframes);let u=!1,c=!1;e.mode==="replacement"?(u=!!s.length,c=!!i.length):e.mode==="remove"?c=!!s.length:e.mode==="add-remove"&&(u=!!i.length,c=!!s.length),queueMicrotask(()=>{if(u){const _=i.map(d=>v(d,!1));i.forEach((d,S)=>{d.animate(_[S],h)})}if(!c){o(s);return}const a=s.map(_=>v(_,!0).slice().reverse()),f=[];s.forEach((_,d)=>{const S=_.animate(a[d],h);f.push(S.finished)}),Promise.all(f).then(()=>o(s))})}})}const _e=(e,t)=>[{[e]:0,opacity:0},{[e]:t+"px",opacity:1}],Vt={"cross-fade":[{opacity:0},{opacity:1}],"grow-width":e=>_e("width",e.clientWidth),"grow-height":e=>_e("height",e.clientHeight)};function qt(e){return l(Ht,{get animationOptions(){return{duration:200,easing:Xe("standard").easing}},get keyframes(){return e.keyframes},get mode(){return e.mode||"replacement"},get itemClassName(){return!e.noItemClass&&"animated-item"},get appear(){return e.appear},get children(){return e.children}})}function Te(e){return l(pe,{component:qt,get keyframes(){return Vt[e.type]},get mode(){return e.mode},get appear(){return e.appear},get noItemClass(){return e.noItemClass},get children(){return e.children}})}const Q=O("<div>"),Le=O("<div><div>");function Kt(e){if(e.includes(" ")||!e.includes("*"))return e;const t=[];for(let r=0;r<e.length;){const n=e.indexOf("*",r);if(n===-1)break;let i=n+1;for(;e[i]==="*";)i++;t.push({_:"messageEntitySpoiler",offset:n,length:i-n}),r=i}return Ze(e,{entities:t,noTextFormat:!0})}function Ut(e){const[t,r]=y(void 0),[n,i]=y(""),[s,o]=y(!1);let h;function v(){if(!n().includes("@")){h.setError();return}o(!0),$e.managers.appAccountManager.sendVerifyEmailCode(e.purpose,n()).then(()=>{o(!1),e.onCodeSent({_:"account.sentEmailCode",email_pattern:n(),length:6})}).catch(u=>{u.type==="EMAIL_INVALID"?r("EmailSetup.InvalidEmail"):u.type==="EMAIL_NOT_ALLOWED"?r("EmailSetup.BadEmail"):(console.error(u),r("Error.AnError")),setTimeout(()=>{o(!1)},200)})}return Se(()=>{Z().then(()=>{h.input.focus()}),Ie(h.input)("keydown",u=>{u.key==="Enter"&&(u.preventDefault(),v())})}),(()=>{const u=Le(),c=u.firstChild;return p(u,l(Pe,{get class(){return k.lottie},lottieLoader:Ee,name:"Mailbox",size:120,restartOnClick:!0,rlottieOptions:{loop:!1,autoplay:!0}}),c),p(u,l(q,{get class(){return k.title},get key(){return e.isInitialSetup?"EmailSetup.Title":"EmailSetup.ChangeTitle"}}),c),p(u,l(q,{get class(){return k.subtitle},get key(){return e.isInitialSetup?"EmailSetup.Subtitle":"EmailSetup.ChangeSubtitle"}}),c),p(u,l(tt,{instanceRef:a=>h=a,get class(){return k.input},label:"EmailSetup.InputCaption",get disabled(){return s()},get value(){return n()},get errorLabel(){return t()?null:void 0},onRawInput:a=>{i(a),r(void 0),h.setState(et.Neutral)}}),c),p(c,l(Te,{type:"cross-fade",get children(){return l(j,{get when(){return!t()},get fallback(){return(()=>{const a=Q();return p(a,l(q,{get key(){return t()}})),I(()=>w(a,k.error)),a})()},get children(){const a=Q();return p(a,l(H,{get class(){return E(k.button,"btn-primary btn-color-primary")},text:"Continue",get disabled(){return s()},onClick:v})),I(()=>w(a,k.buttonContainer)),a}})}})),I(a=>{const f=k.page,_=E(k.footer,e.footerClass);return f!==a._v$&&w(u,a._v$=f),_!==a._v$2&&w(c,a._v$2=_),a},{_v$:void 0,_v$2:void 0}),u})()}function Gt(e){const[t,r]=y(void 0),[n,i]=y(!1),s=y("");let o;U(()=>{e.visible!==!1&&Z().then(()=>{o.focus()})});function h(){i(!0),$e.managers.appAccountManager.verifyEmail(e.purpose,{_:"emailVerificationCode",code:s[0]()}).then(()=>{i(!1),e.onSuccess()}).catch(v=>{if(v.type==="EMAIL_VERIFY_EXPIRED")return i(!1),e.onExpired();v.type==="CODE_INVALID"?r("EmailSetup.WrongCode"):(console.error(v),r("Error.AnError")),s[1](""),setTimeout(()=>{i(!1),nt(()=>o.focus())},200)})}return(()=>{const v=Le(),u=v.firstChild;return p(v,l(Pe,{get class(){return k.lottie},lottieLoader:Ee,name:"LoveLetter",size:120,restartOnClick:!0,rlottieOptions:{loop:!1,autoplay:!0}}),u),p(v,l(q,{get class(){return k.title},key:"EmailSetup.CheckEmail"}),u),p(v,l(q,{get class(){return k.subtitle},key:"EmailSetup.CheckEmailSubtitle",get args(){return[Kt(e.sentCode.email_pattern)]}}),u),p(v,l(we,{ref(c){const a=o;typeof a=="function"?a(c):o=c},valueSignal:s,get class(){return k.input},get length(){return e.sentCode.length},get disabled(){return n()},onFill:h,get error(){return t()!=null},onChange:()=>r(void 0)}),u),p(u,l(Te,{type:"cross-fade",get children(){return l(j,{get when(){return!t()},get fallback(){return(()=>{const c=Q();return p(c,l(q,{get key(){return t()}})),I(()=>w(c,k.error)),c})()},get children(){const c=Q();return p(c,l(H,{get class(){return E(k.button,"btn-primary btn-color-primary")},text:"Continue",get disabled(){return n()||s[0]().length!==e.sentCode.length},onClick:h})),I(()=>w(c,k.buttonContainer)),c}})}})),I(c=>{const a=k.page,f=E(k.footer,e.footerClass);return a!==c._v$3&&w(v,c._v$3=a),f!==c._v$4&&w(u,c._v$4=f),c},{_v$3:void 0,_v$4:void 0}),v})()}let Y=!1;function tn(e){if(Y)return;Y=!0;const[t,r]=y(!1),[n,i]=y(0),[s,o]=y(void 0),[h,v]=y(!1);return yt(()=>{const u={type:"left",onPop:()=>void i(0)};z(()=>{Y=!1,V.removeItem(u)}),Z().then(()=>r(!0));let c=!1;return l(A,{get class(){return k.popup},get containerClass(){return k.popupContainer},get show(){return t()},get closable(){return!e.noskip},onClose:()=>{Y=!1,c||e.onDismiss?.()},isConfirmationNeededOnClose:()=>{if(e.noskip&&!c)return Promise.reject()},get children(){return[l(A.Header,{get class(){return k.popupHeader},get children(){return l(j,{get when(){return!e.noskip||n()===1},get children(){return l(A.CloseButton,{get class(){return k.popupCloseButton},get canGoBack(){return n()!==0},onBackClick:()=>void i(0)})}})}}),l(A.Body,{get children(){return l(St,{get class(){return k.slider},type:"navigation",transitionTime:150,animateFirst:!1,get currentPage(){return n()},onTransitionStart:a=>{v(!1),a===0?V.removeItem(u):V.pushItem(u)},onTransitionEnd:a=>{a===1&&v(!0)},get children(){return[l(Ut,{isInitialSetup:!0,get purpose(){return e.purpose},onCodeSent:a=>{o(a),i(1)}}),l(j,{get when(){return s()},get children(){return l(Gt,{get purpose(){return e.purpose},get sentCode(){return s()},get visible(){return M(()=>n()===1)()&&h()},onExpired:()=>{i(0),o(void 0)},onSuccess:()=>{c=!0,e.onSuccess?.(),r(!1)}})}})]}})}})]}})})}export{Te as A,H as B,Zt as C,Ut as E,q as I,Pe as L,A as P,mt as R,qt as S,St as T,Dt as a,yt as b,jt as c,en as d,Gt as e,tn as f,Ie as s,Kt as w};
//# sourceMappingURL=emailSetup-DC47owN0.js.map
