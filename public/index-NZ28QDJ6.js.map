{"version":3,"file":"index-NZ28QDJ6.js","sources":["../src/components/simpleFormField/index.tsx"],"sourcesContent":["import {Accessor, batch, createContext, createSignal, JSX, onMount, ParentProps, Ref, Setter, splitProps, useContext} from 'solid-js';\nimport {requestRAF} from '@helpers/solid/requestRAF';\nimport styles from '@components/simpleFormField/styles.module.scss';\n\n\ntype SimpleFormFieldContextValue = {\n  input: Accessor<HTMLInputElement>;\n  setInput: Setter<HTMLInputElement>;\n  offsetElement: Accessor<HTMLElement>;\n  setOffsetElement: Setter<HTMLElement>;\n  value: Accessor<string>;\n  onChange: (value: string) => void;\n};\n\nconst Context = createContext<SimpleFormFieldContextValue>();\n\nconst SimpleFormField = (inProps: ParentProps<{\n  value?: string;\n  onChange?: (value: string) => void;\n\n  onClick?: JSX.EventHandler<HTMLDivElement, MouseEvent>;\n  isError?: boolean;\n  clickable?: boolean;\n  withEndButtonIcon?: boolean;\n} & Omit<JSX.HTMLAttributes<HTMLDivElement>, 'onChange' | 'onClick'>>) => {\n  const [props, restProps] = splitProps(inProps, ['value', 'onChange', 'isError', 'children', 'onClick', 'class', 'classList', 'clickable', 'withEndButtonIcon']);\n  const [input, setInput] = createSignal<HTMLInputElement>();\n  const [offsetElement, setOffsetElement] = createSignal<HTMLElement>();\n\n  const contextValue: SimpleFormFieldContextValue = {\n    input,\n    setInput,\n    offsetElement,\n    setOffsetElement,\n    value: () => props.value,\n    get onChange() {\n      return props.onChange;\n    }\n  };\n\n  return (\n    <Context.Provider value={contextValue}>\n      <div\n        class={styles.Container}\n        classList={{\n          [styles.error]: props.isError,\n          [styles.clickable]: props.clickable,\n          [props.class]: !!props.class,\n          [styles.withEndButtonIcon]: props.withEndButtonIcon,\n          ...props.classList\n        }}\n        onClick={(...args) => {\n          contextValue.input()?.focus();\n          props.onClick?.(...args);\n        }}\n        {...restProps}\n      >\n        <div class={styles.BorderThin} />\n        <div class={styles.BorderThick} />\n        {props.children}\n      </div>\n    </Context.Provider>\n  );\n};\n\nSimpleFormField.Input = (inProps: {\n  ref?: Ref<HTMLInputElement>;\n  forceFieldValue?: boolean;\n} & Omit<JSX.InputHTMLAttributes<HTMLInputElement>, 'value' | 'onChange' | 'onInput' | 'ref'>) => {\n  const [props, restProps] = splitProps(inProps, ['ref', 'class', 'classList', 'forceFieldValue']);\n\n  const context = useContext(Context);\n\n  return (\n    <input\n      ref={(el) => batch(() => {\n        context.setInput(el);\n        context.setOffsetElement(el);\n        if(props.ref instanceof Function) props.ref(el);\n      })}\n      class={styles.Input}\n      classList={{\n        [props.class]: !!props.class,\n        ...props.classList\n      }}\n      value={context.value()}\n      onInput={(e) => {\n        context.onChange(e.currentTarget.value)\n        if(props.forceFieldValue) context.input().value = context.value();\n      }}\n      {...restProps}\n    />\n  );\n};\n\nSimpleFormField.InputStub = (props: ParentProps) => {\n  const context = useContext(Context);\n\n  return (\n    <div\n      ref={context.setOffsetElement}\n      class={styles.InputStub}\n    >\n      {props.children}\n    </div>\n  );\n};\n\nSimpleFormField.Label = (props: ParentProps<{\n  active?: boolean;\n  forceOffset?: number;\n}>) => {\n  const context = useContext(Context);\n\n  const [offset, setOffset] = createSignal(0);\n  const [noTransition, setNoTransition] = createSignal(true);\n\n  onMount(() => {\n    if(props.forceOffset || !context.offsetElement()) return;\n    const parentElement = context.offsetElement().parentElement;\n    if(!parentElement) return;\n\n    const rect = parentElement.getBoundingClientRect();\n    const inputRect = context.offsetElement().getBoundingClientRect();\n    setOffset(inputRect.left - rect.left);\n  });\n\n  onMount(() => {\n    requestRAF(() => {\n      setNoTransition(false);\n    });\n  });\n\n  return (\n    <div\n      class={styles.Label}\n      classList={{\n        [styles.active]: props.active || !!context.value(),\n        [styles.noTransition]: noTransition()\n      }}\n      style={{\n        '--offset': `${props.forceOffset || offset()}px`\n      }}\n    >\n      {props.children}\n    </div>\n  );\n};\n\nSimpleFormField.SideContent = (props: ParentProps<{\n  first?: boolean;\n  last?: boolean;\n}>) => {\n  return (\n    <div class={styles.SideContent} classList={{\n      [styles.first]: props.first,\n      [styles.last]: props.last\n    }}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default SimpleFormField;\n"],"names":["Context","createContext","SimpleFormField","inProps","props","restProps","splitProps","input","setInput","createSignal","offsetElement","setOffsetElement","contextValue","value","onChange","_$createComponent","Provider","children","_el$","_tmpl$","_el$2","firstChild","_el$3","nextSibling","$$click","args","focus","onClick","_$spread","_$mergeProps","styles","Container","classList","error","isError","clickable","class","withEndButtonIcon","_$insert","_$effect","_p$","_v$","BorderThin","_v$2","BorderThick","_$className","undefined","Input","context","useContext","_el$4","_tmpl$2","$$input","e","currentTarget","forceFieldValue","_$use","el","batch","ref","Function","InputStub","_el$5","_tmpl$3","_ref$","Label","offset","setOffset","noTransition","setNoTransition","onMount","forceOffset","parentElement","rect","getBoundingClientRect","inputRect","left","requestRAF","_el$6","_v$3","_v$4","active","_v$5","_$classList","style","setProperty","removeProperty","SideContent","_el$7","_v$6","_v$7","first","last","_$delegateEvents"],"mappings":"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"}