import{a3 as me,c as L,ah as De,a0 as sn,aV as V,i as A,b as n,bQ as ke,a2 as y,a as h,t as B,aW as N,bR as we,aj as dn,a9 as k,e7 as Fe,ga as cn,aQ as O,c1 as ln,c3 as gn,a7 as Te,aa as ye,a4 as an,E as un,a5 as $,bq as mn,a6 as ne,k as c,dT as oe,dh as Oe,a_ as Se,aM as de,cg as vn,a$ as hn,af as _n,bP as pn,f3 as An,ab as qe,J as fn,V as Cn,a8 as $n,gb as Mn,eM as En}from"./index-BADHTlgz.js";import{T as ue}from"./transition-DzrEwt1Z.js";import{L as He,u as bn,X as xn,Y as wn,y as Ae,g as Le,I as Tn,Z as yn,_ as Rn,h as Ge}from"./appDialogsManager-DpDJuVgr.js";import{u as Pn,F as In,l as xe,H as Ue,c as Sn}from"./useFlagFilters-wO79rg0N.js";import{I as te}from"./iconTsx-DoSczV7A.js";import{w as Ke,f as Ne}from"./wrapDuration-anKMCwQ-.js";import{I as q,B as We}from"./emailSetup-DiJaahi7.js";import{u as je,g as fe,i as Je,d as Be,p as Ce,r as Qe,T as ae,a as Ln}from"./topicName-CVhe7p7q.js";import{S as K}from"./space-BvgVr93v.js";import"./page-BmhISZ_F.js";import"./avatar-D1dEAMCU.js";import"./toast-DldnwnKq.js";import"./classNames-CN4lTu6a.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./fastBlur-Co-79rP4.js";import"./putPreloader-K30N2k1L.js";import"./countryInputField-32Ovn8C_.js";import"./scrollable2-D8ePU3YR.js";import"./chatBackground-nUzwn1Yy.js";import"./tracking-Ba_rtFbf.js";import"./index-YxC1K3--.js";function Bn(){let e=!1;return me(()=>{e=!0}),()=>e}function kn(){const e=new Map,t=new Map,i=new ResizeObserver(a=>{for(const s of a)t.has(s.target)||He(()=>{const r=t.get(s.target);t.delete(s.target),r?.()}),t.set(s.target,()=>{const r=e.get(s.target),d=s.borderBoxSize[0];r&&d&&r({entry:s,size:{width:d.inlineSize,height:d.blockSize}})})});return me(()=>{i.disconnect(),e.clear(),t.clear()}),(a,s)=>{e.set(a,s),i.observe(a),me(()=>{e.delete(a),i.unobserve(a)})}}function Fn(e){const[t,i]=L(0);let a=!1;const s=r=>{a||(a=!0,He(()=>{a=!1,i(r.scrollTop)}))};return De(()=>{const r=e();if(!r){i(0);return}s(r);const d=()=>s(r);r.addEventListener("scroll",d,{passive:!0}),me(()=>{r.removeEventListener("scroll",d)})}),t}const Dn=100;function Hn(e,t,i,a){let s=0;for(;e<=t;){const r=e+Math.floor((t-e)/2),d=a(r);if(i>d?e=r+1:t=r-1,s++>Dn)return 0}return e}const jn="_Container_6yug7_1",zn={Container:jn},Vn=B("<div>"),Ye=.05,On=50,qn=1,Gn=e=>{const t=cn(e,(i,a)=>{const[s,r]=L(),[d,l]=L(0),[o,u]=L(0);return{payload:i,prevCachedHeight:0,cachedHeight:s,setCachedHeight:r,offset:d,setOffset:l,translate:o,setTranslate:u,idx:a,needScrollAdjustment:!1}});return O(()=>t())},Un=({listItemStates:e,estimateItemHeight:t,verticalPadding:i})=>{const[a,s]=L(0);return we(()=>{N(()=>{const r=e().reduce((d,l)=>{const o=V(()=>l.cachedHeight()??t(l.payload));return l.prevCachedHeight=o,l.setCachedHeight(o),l.setOffset(d),d+o},i());s(r+i())})}),[a,s]},Kn=({list:e,scrollable:t,maxBatchSize:i,estimateItemHeight:a,verticalPadding:s,renderAtLeastFromBottom:r})=>{const d=Fn(t),l=bn(t),o=()=>l.height,u=Gn(e),[m,g]=Un({listItemStates:u,estimateItemHeight:a,verticalPadding:s}),[p,C]=L([],{equals:(f,M)=>f.length===M.length&&f.every((E,R)=>E===M[R])}),[v,w]=L([]);return De(()=>{v();const f=u(),M=V(i),E=V(p),R=[],j=E.length?E.reduce((T,J)=>Math.min(T,J.idx()),1/0):0;let W=0;for(const T of E)if(T.needScrollAdjustment){const P=(V(T.cachedHeight)||0)-T.prevCachedHeight;W+=P,T.needScrollAdjustment=!1}const ie=d()+W,G=o(),se=ie-Ye*G,Re=ie+G*(1+Ye);let ve=0,he=0,re=0;N(()=>{let T=Hn(0,j-1,se,P=>V(()=>f[P].offset()+(f[P].cachedHeight()||0)));const J=f.length-r({clientHeight:G});for(T=Math.min(T,J),T=Math.max(T,0),re=V(()=>f[T]?.offset())||s();T<f.length;T++){const P=f[T],_=V(P.cachedHeight)||0,S=_-P.prevCachedHeight;ve+=S,P.prevCachedHeight=_,P.setOffset(re);const x=re,H=x+_,_e=E.includes(P),pe=(H>se||T>=J)&&x<Re;if(!_e&&pe&&(he+=1),!(he>M)&&pe)R.push(P),P.needScrollAdjustment=T<j;else if(R.length)break;re+=_}R.forEach(P=>void P.cachedHeight()),Math.abs(W)>qn&&(V(t).scrollTop+=W),g(P=>P+ve),C(R)})}),{scrollTop:d,clientHeight:o,height:m,renderedItems:p,onMeasure:()=>{w(V(p))}}},Nn=({component:e,measureElementHeight:t})=>{const i=kn();return a=>{let s;const[r,d]=L(!1),l=gn(),o=Bn(),{offset:u,setCachedHeight:m,idx:g}=a.item,[p,C]=L(0),[v,w]=L(0);let f;me(()=>{self.clearTimeout(f),a.item.needScrollAdjustment=!1});let M=!0;return He(()=>{if(o())return;const E=t(s);m(E),d(!1),M=!0,ln(l,()=>{i(s,({size:R})=>{m(t(s))})})}),we(dn(u,()=>{if(M){M=!1,C(u());return}const E=u()-p();E&&(w(E),self.clearTimeout(f),f=self.setTimeout(()=>{N(()=>{C(u()),w(0)})},On))})),n(Fe,{get component(){return e()},ref(E){const R=s;typeof R=="function"?R(E):s=E},get payload(){return a.item.payload},get isMeasuring(){return r()},get offset(){return k(()=>!!r())()?0:p()},get translation(){return k(()=>!!r())()?0:v()},get idx(){return g()}})}},Wn=e=>{const t=sn({nearBottomThreshold:120,verticalPadding:0,renderAtLeastFromBottom:()=>0},e),{scrollTop:i,clientHeight:a,height:s,renderedItems:r,onMeasure:d}=Kn({list:()=>t.list,estimateItemHeight:(...o)=>t.estimateItemHeight(...o),maxBatchSize:()=>t.maxBatchSize,scrollable:()=>t.scrollable,verticalPadding:()=>t.verticalPadding,renderAtLeastFromBottom:o=>t.renderAtLeastFromBottom(o)});De(()=>{t.onNearBottom&&i()+a()>=s()-t.nearBottomThreshold&&V(()=>t.onNearBottom())});const l=Nn({component:()=>t.Item,measureElementHeight:(...o)=>(d(),t.measureElementHeight(...o))});return(()=>{const o=Vn();return A(o,n(ke,{get each(){return r()},children:u=>n(l,{item:u})})),y(u=>{const m=zn.Container,g=`${s()}px`;return m!==u._v$&&h(o,u._v$=m),g!==u._v$2&&((u._v$2=g)!=null?o.style.setProperty("--height",g):o.style.removeProperty("--height")),u},{_v$:void 0,_v$2:void 0}),o})()},Jn="_Placeholder_1qzqg_36",Qn="_Icon_1qzqg_40",Yn="_first_1qzqg_49",Xn="_toggled_1qzqg_53",Zn="_second_1qzqg_56",Q={Placeholder:Jn,Icon:Qn,first:Yn,toggled:Xn,second:Zn},et=B("<button class=btn-icon>"),nt=e=>(()=>{const t=et();return ye(t,"click",e.onClick,!0),an(un,t,()=>!0),A(t,n(te,{icon:"plus",get class(){return Q.Placeholder}}),null),A(t,n(te,{icon:"arrowhead",get class(){return`${Q.Icon} ${Q.first}`},get classList(){return{[Q.toggled]:e.expanded}}}),null),A(t,n(te,{icon:"arrowhead",get class(){return`${Q.Icon} ${Q.second}`},get classList(){return{[Q.toggled]:e.expanded}}}),null),t})();Te(["click"]);const tt="_Container_1yj7p_1",rt="_ContainerBackdropFill_1yj7p_21",at="_ContainerBackdropExtension_1yj7p_30",ot="_ContainerEnterActive_1yj7p_40",it="_ContainerExitActive_1yj7p_40",st="_ContainerEnter_1yj7p_40",dt="_ContainerExitTo_1yj7p_43",ct="_Card_1yj7p_48",lt="_hideThumb_1yj7p_59",gt="_Overlay_1yj7p_63",ut="_TopLevelCheckbox_1yj7p_69",z={Container:tt,ContainerBackdropFill:rt,ContainerBackdropExtension:at,ContainerEnterActive:ot,ContainerExitActive:it,ContainerEnter:st,ContainerExitTo:dt,Card:ct,hideThumb:lt,Overlay:gt,TopLevelCheckbox:ut},mt=B("<div>"),vt=B("<div><div><div></div><div></div></div><div>"),ht=100,_t=e=>{const t=Pn({channelId:()=>e.channelId,isBroadcast:()=>e.isBroadcast});we(()=>{xn(()=>e.open),t.setFromCommittedFilters(e.committedFilters)});const i=()=>N(()=>{e.onCommit(null),e.onClose?.()}),a=r=>N(()=>{e.onCommit(r),e.onClose?.()}),s=r=>{mn||setTimeout(()=>r.focus(),ht)};return[n(ue,{name:"fade",get children(){return n($,{get when(){return e.open},get children(){const r=mt();return ye(r,"click",e.onClose,!0),y(()=>h(r,z.Overlay)),r}})}}),n(ue,{get enterActiveClass(){return z.ContainerEnterActive},get exitActiveClass(){return z.ContainerExitActive},get enterClass(){return z.ContainerEnter},get exitToClass(){return z.ContainerExitTo},get children(){return n($,{get when(){return e.open},get children(){const r=vt(),d=r.firstChild,l=d.firstChild,o=l.nextSibling,u=d.nextSibling;return A(u,n(In,{filtersControls:t,inputRef:s,onCommit:a,onReset:i,hasSearch:!0})),y(m=>{const g=z.Container,p=z.ContainerBackdrop,C=z.ContainerBackdropFill,v=z.ContainerBackdropExtension,w=z.Card;return g!==m._v$&&h(r,m._v$=g),p!==m._v$2&&h(d,m._v$2=p),C!==m._v$3&&h(l,m._v$3=C),v!==m._v$4&&h(o,m._v$4=v),w!==m._v$5&&h(u,m._v$5=w),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),r}})}})]};Te(["click"]);const pt="_Container_1taye_1",At="_rounded_1taye_8",ft="_Photo_1taye_8",Ct="_forum_1taye_11",$e={Container:pt,rounded:At,Photo:ft,forum:Ct},$t=B("<div>"),Xe=120,Y=e=>(()=>{const t=$t();return A(t,n(wn,{get class(){return $e.Photo},get photo(){return e.photo},boxWidth:Xe,boxHeight:Xe,withoutPreloader:!0})),y(i=>{const a=$e.Container,s={[$e.forum]:e.isForum,[$e.rounded]:e.rounded};return a!==i._v$&&h(t,i._v$=a),i._v$2=ne(t,s,i._v$2),i},{_v$:void 0,_v$2:void 0}),t})(),Mt="_Container_uohs4_1",Et="_hoverable_uohs4_12",bt="_Value_uohs4_16",xt="_Border_uohs4_20",Me={Container:Mt,hoverable:Et,Value:bt,Border:xt},wt=B("<div><div></div><div>:</div><div>"),ee=e=>(()=>{const t=wt(),i=t.firstChild,a=i.nextSibling,s=a.firstChild,r=a.nextSibling;return ye(t,"click",e.onClick,!0),A(a,()=>e.label,s),A(r,()=>e.value),y(d=>{const l=Me.Container,o={interactable:e.interactable||!!e.onClick,[Me.hoverable]:!!e.onClick},u=Me.Border,m=Me.Value;return l!==d._v$&&h(t,d._v$=l),d._v$2=ne(t,o,d._v$2),u!==d._v$3&&h(i,d._v$3=u),m!==d._v$4&&h(r,d._v$4=m),d},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})(),X=e=>n(ee,{get label(){return e.label||c("AdminRecentActions.ChangedTo")},get value(){return k(()=>!!e.value)()?c("AdminRecentActions.Enabled"):c("AdminRecentActions.Disabled")}}),Ee=e=>n($,{get when(){return e.invite._==="chatInviteExported"},get children(){return n(ee,{get label(){return n(q,{key:"InviteLink"})},get value(){return e.invite._==="chatInviteExported"?e.invite.link:""}})}}),Z=e=>{const{PeerTitleTsx:t}=oe();return n($,{get when(){return e.peerId},get children(){return n(ee,{get label(){return e.label||n(q,{key:"AdminRecentActions.Participant"})},get value(){return n(t,{get peerId(){return e.peerId},limitSymbols:xe})},get onClick(){return je(e.peerId)}})}})};Te(["click"]);const Tt="_Container_1lwmw_1",yt="_vertical_1lwmw_1",Rt="_Block_1lwmw_8",Pt="_added_1lwmw_23",It="_removed_1lwmw_27",St="_unroundedTop_1lwmw_31",Lt="_unroundedBottom_1lwmw_35",Bt="_unroundedRight_1lwmw_39",kt="_unroundedLeft_1lwmw_43",Ft="_Border_1lwmw_48",Dt="_Line_1lwmw_62",Ht="_Separator_1lwmw_66",jt="_Strip_1lwmw_71",zt="_Content_1lwmw_85",b={Container:Tt,vertical:yt,Block:Rt,added:Pt,removed:It,unroundedTop:St,unroundedBottom:Lt,unroundedRight:Bt,unroundedLeft:kt,Border:Ft,Line:Dt,Separator:Ht,Strip:jt,Content:zt},Ze=B("<div><div>"),en=B("<div>"),nn=B("<div><div></div><div>"),I=e=>{const t=Oe(()=>e.added),i=Oe(()=>e.removed),a=O(()=>t.toArray().filter(Boolean)),s=O(()=>i.toArray().filter(Boolean)),r=O(()=>a().length>0),d=O(()=>s().length>0);return(()=>{const l=en();return A(l,n($,{get when(){return r()},get children(){const o=Ze(),u=o.firstChild;return A(o,n(ke,{get each(){return a()},children:m=>(()=>{const g=nn(),p=g.firstChild,C=p.nextSibling;return A(p,n(te,{icon:"plus"})),A(C,m),y(v=>{const w=b.Line,f=`${b.Strip} ${b.added}`,M=b.Content;return w!==v._v$9&&h(g,v._v$9=w),f!==v._v$10&&h(p,v._v$10=f),M!==v._v$11&&h(C,v._v$11=M),v},{_v$9:void 0,_v$10:void 0,_v$11:void 0}),g})()}),null),y(m=>{const g=`${b.Block} ${b.added}`,p={[e.vertical?b.unroundedRight:b.unroundedBottom]:d()},C=`${b.Border} ${b.added}`;return g!==m._v$&&h(o,m._v$=g),m._v$2=ne(o,p,m._v$2),C!==m._v$3&&h(u,m._v$3=C),m},{_v$:void 0,_v$2:void 0,_v$3:void 0}),o}}),null),A(l,n($,{get when(){return k(()=>!!r())()&&d()},get children(){const o=en();return y(()=>h(o,b.Separator)),o}}),null),A(l,n($,{get when(){return d()},get children(){const o=Ze(),u=o.firstChild;return A(o,n(ke,{get each(){return s()},children:m=>(()=>{const g=nn(),p=g.firstChild,C=p.nextSibling;return A(p,n(te,{icon:"minus"})),A(C,m),y(v=>{const w=b.Line,f=`${b.Strip} ${b.removed}`,M=b.Content;return w!==v._v$12&&h(g,v._v$12=w),f!==v._v$13&&h(p,v._v$13=f),M!==v._v$14&&h(C,v._v$14=M),v},{_v$12:void 0,_v$13:void 0,_v$14:void 0}),g})()}),null),y(m=>{const g=`${b.Block} ${b.removed}`,p={[e.vertical?b.unroundedLeft:b.unroundedTop]:r()},C=`${b.Border} ${b.removed}`;return g!==m._v$4&&h(o,m._v$4=g),m._v$5=ne(o,p,m._v$5),C!==m._v$6&&h(u,m._v$6=C),m},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),o}}),null),y(o=>{const u=b.Container,m={[b.vertical]:e.vertical,interactable:!e.vertical};return u!==o._v$7&&h(l,o._v$7=u),o._v$8=ne(l,m,o._v$8),o},{_v$7:void 0,_v$8:void 0}),l})()},Vt="_Container_1wvd6_1",Ot="_Button_1wvd6_7",qt="_added_1wvd6_17",Gt="_removed_1wvd6_23",ce={Container:Vt,Button:Ot,added:qt,removed:Gt},Ut=B("<div>"),le=e=>{const{rootScope:t,appImManager:i,ChatType:a}=oe(),s=o=>o&&(o._==="message"||o._==="messageService")?o:void 0,r=O(()=>s(e.added)),d=O(()=>s(e.removed)),l=async o=>{const u=await t.managers.appMessagesManager.saveLogsMessage(e.channelId.toPeerId(!0),o);i.setPeer({peerId:e.channelId.toPeerId(!0),messages:[u],type:a.Static})};return n($,{get when(){return r()||d()},get children(){const o=Ut();return A(o,n($,{get when(){return r()&&e.addedKey},get children(){return n(We,{get class(){return`interactable ${ce.Button} ${ce.added}`},onClick:()=>l(r()),get children(){return n(q,{get key(){return e.addedKey}})}})}}),null),A(o,n($,{get when(){return d()&&e.removedKey},get children(){return n(We,{get class(){return`interactable ${ce.Button} ${ce.removed}`},onClick:()=>l(d()),get children(){return n(q,{get key(){return e.removedKey}})}})}}),null),y(()=>h(o,ce.Container)),o}})},Kt={channelAdminLogEventActionChangeTitle:({action:e,isBroadcast:t})=>({group:"info",Message:()=>c(t?"AdminRecentActionMessage.ChangeTitleChannel":"AdminRecentActionMessage.ChangeTitleGroup"),ExpandableContent:()=>n(I,{get added(){return e.new_value},get removed(){return e.prev_value}})}),channelAdminLogEventActionChangeAbout:({action:e,isBroadcast:t})=>({group:"info",Message:()=>c(t?"AdminRecentActionMessage.ChangeAboutChannel":"AdminRecentActionMessage.ChangeAboutGroup"),ExpandableContent:()=>n(I,{get added(){return e.new_value},get removed(){return e.prev_value}})}),channelAdminLogEventActionChangeUsername:({action:e,isBroadcast:t})=>({group:"identity",Message:()=>c(t?"AdminRecentActionMessage.ChangeUsernameChannel":"AdminRecentActionMessage.ChangeUsernameGroup"),ExpandableContent:()=>n(I,{get added(){return e.new_value},get removed(){return e.prev_value}})}),channelAdminLogEventActionChangePhoto:({action:e,isBroadcast:t,isForum:i})=>({group:"media",Message:()=>c(t?"AdminRecentActionMessage.ChangePhotoChannel":"AdminRecentActionMessage.ChangePhotoGroup"),ExpandableContent:()=>n(I,{vertical:!0,get added(){return k(()=>e.new_photo?._==="photo")()&&n(Y,{get photo(){return e.new_photo},rounded:!0,isForum:i})},get removed(){return k(()=>e.prev_photo?._==="photo")()&&n(Y,{get photo(){return e.prev_photo},rounded:!0,isForum:i})}})}),channelAdminLogEventActionToggleInvites:({action:e})=>({group:"invites",Message:()=>c("AdminRecentActionMessage.ToggleInvites"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionToggleSignatures:({action:e})=>({group:"identity",Message:()=>c("AdminRecentActionMessage.ToggleSignatures"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionUpdatePinned:({channelId:e,action:t})=>({group:"pinned",Message:()=>c("AdminRecentActionMessage.UpdatePinnedMessage"),ExpandableContent:()=>{const i=fe(t.message),a=t.message?._==="message"?t.message:void 0,s=i,r=a?.message,d=Se().get(),l=t.message?._==="message"&&t.message.pFlags?.pinned;return[n($,{when:s,get children(){return n(I,{vertical:!0,get added(){return l&&i&&n(Y,{photo:i})},get removed(){return!l&&i&&n(Y,{photo:i})}})}}),s&&r&&n(K,{amount:"4px"}),n($,{when:r,get children(){return n(I,{get added(){return l&&a&&de(a.message,{entities:a.entities,middleware:d})},get removed(){return!l&&a&&de(a.message,{entities:a.entities,middleware:d})}})}}),n(K,{amount:"8px"}),n(le,{channelId:e,get added(){return l?t.message:void 0},get removed(){return l?void 0:t.message},addedKey:"AdminRecentActions.ViewPinned",removedKey:"AdminRecentActions.ViewUnpinned"})]}}),channelAdminLogEventActionEditMessage:({channelId:e,action:t})=>({group:"messages",Message:()=>c("AdminRecentActionMessage.EditedMessage"),ExpandableContent:()=>{const i=fe(t.prev_message),a=fe(t.new_message),s=t.prev_message?._==="message"?t.prev_message:void 0,r=t.new_message?._==="message"?t.new_message:void 0,d=i?.id!==a?.id,l=s?.message!==r?.message||!vn(s?.entities,r?.entities),o=Se().get();return[n($,{when:d,get children(){return n(I,{vertical:!0,get added(){return a&&n(Y,{photo:a})},get removed(){return i&&n(Y,{photo:i})}})}}),n($,{when:d&&l,get children(){return n(K,{amount:"4px"})}}),n($,{when:l,get children(){return n(I,{get added(){return r&&de(r.message,{entities:r.entities,middleware:o})},get removed(){return s&&de(s.message,{entities:s.entities,middleware:o})}})}}),n(K,{amount:"8px"}),n(le,{channelId:e,get added(){return t.new_message},get removed(){return t.prev_message},addedKey:"AdminRecentActions.ViewUpdatedMessage",removedKey:"AdminRecentActions.ViewPreviousMessage"})]}}),channelAdminLogEventActionDeleteMessage:({channelId:e,action:t})=>({group:"messages",Message:()=>c("AdminRecentActionMessage.DeletedMessage"),ExpandableContent:()=>{const i=fe(t.message),a=t.message?._==="message"?structuredClone(t.message):void 0,s=i,r=a?.message,d=Se().get();return a&&a.media?._==="messageMediaPoll"&&(a.media.poll.pFlags||(a.media.poll.pFlags={}),a.media.poll.pFlags.closed=!0),[n($,{when:s,get children(){return n(I,{vertical:!0,get removed(){return i&&n(Y,{photo:i})}})}}),s&&r&&n(K,{amount:"4px"}),n($,{when:r,get children(){return n(I,{get removed(){return a&&de(a.message,{entities:a.entities,middleware:d})}})}}),n(K,{amount:"8px"}),n(le,{channelId:e,get removed(){return a||t.message},removedKey:"AdminRecentActions.ViewDeletedMessage"})]}}),channelAdminLogEventActionParticipantJoin:({isBroadcast:e})=>({group:"join",Message:()=>c(e?"AdminRecentActionMessage.ParticipantJoinedChannel":"AdminRecentActionMessage.ParticipantJoinedGroup")}),channelAdminLogEventActionParticipantLeave:({isBroadcast:e})=>({group:"leave",Message:()=>c(e?"AdminRecentActionMessage.ParticipantLeftChannel":"AdminRecentActionMessage.ParticipantLeftGroup")}),channelAdminLogEventActionParticipantInvite:({action:e})=>({group:"invites",Message:()=>c("AdminRecentActionMessage.ParticipantInvited"),ExpandableContent:()=>n(Z,{get peerId(){return Ae(e.participant)}})}),channelAdminLogEventActionParticipantToggleBan:({channelId:e,action:t})=>({group:"permissions",Message:()=>c(Je(t.new_participant)?"AdminRecentActionMessage.ParticipantBanned":"AdminRecentActionMessage.ParticipantPermissionsToggled"),ExpandableContent:()=>{const{apiManagerProxy:i}=oe(),a=t.prev_participant?._==="channelParticipantBanned"?t.prev_participant:void 0,s=t.new_participant?._==="channelParticipantBanned"?t.new_participant:void 0,r=i.getChat(e),d=u=>r?._==="channel"&&u?Ln(r,u):u,l=Ae(t.prev_participant||t.new_participant),o=Be(d(a?.banned_rights)?.pFlags,d(s?.banned_rights)?.pFlags);return[n(Z,{peerId:l}),n($,{get when(){return!Je(t.new_participant)},get children(){return[n(K,{amount:"4px"}),n(I,{get removed(){return o.new.map(u=>Ce[u]).filter(Boolean).map(u=>c(u))},get added(){return o.old.map(u=>Ce[u]).filter(Boolean).map(u=>c(u))}})]}})]}}),channelAdminLogEventActionParticipantToggleAdmin:({action:e,isBroadcast:t})=>({group:"permissions",Message:()=>c("AdminRecentActionMessage.AdminToggled"),ExpandableContent:()=>{const{PeerTitleTsx:i}=oe(),a="admin_rights"in e.prev_participant?e.prev_participant.admin_rights:null,s="admin_rights"in e.new_participant?e.new_participant.admin_rights:null,r=Be(a?.pFlags,s?.pFlags),d=Ae(e.prev_participant||e.new_participant);return[n($,{when:d,get children(){return[n(ee,{get label(){return c("AdminRecentActions.ChangedPermissionsToUser")},get value(){return n(i,{peerId:d,limitSymbols:xe})},get onClick(){return je(d)}}),n(K,{amount:"4px"})]}}),n(I,{get added(){return r.new.map(l=>c(Qe(l,{isBroadcast:t})))},get removed(){return r.old.map(l=>c(Qe(l,{isBroadcast:t})))}})]}}),channelAdminLogEventActionChangeStickerSet:()=>({group:"appearance",Message:()=>c("AdminRecentActionMessage.ChangeStickerSet")}),channelAdminLogEventActionTogglePreHistoryHidden:()=>({group:"permissions",Message:()=>c("AdminRecentActionMessage.TogglePreHistoryHidden")}),channelAdminLogEventActionDefaultBannedRights:({action:e})=>({group:"permissions",Message:()=>c("AdminRecentActionMessage.DefaultBannedRightsChanged"),ExpandableContent:()=>{const t=Be(e.prev_banned_rights?.pFlags,e.new_banned_rights?.pFlags);return n(I,{get removed(){return t.new.map(i=>Ce[i]).filter(Boolean).map(i=>c(i))},get added(){return t.old.map(i=>Ce[i]).filter(Boolean).map(i=>c(i))}})}}),channelAdminLogEventActionStopPoll:({channelId:e,action:t})=>({group:"messages",Message:()=>c("AdminRecentActionMessage.PollStopped"),ExpandableContent:()=>n(le,{channelId:e,get removed(){return t.message},removedKey:"AdminRecentActions.ViewStopped"})}),channelAdminLogEventActionChangeLinkedChat:({action:e})=>({group:"links",Message:()=>c("AdminRecentActionMessage.ChangeLinkedChat"),ExpandableContent:()=>{const{PeerTitleTsx:t}=oe();return n(ee,{get label(){return n(q,{key:"DiscussionController.Channel.Title"})},get value(){return k(()=>!!e.new_value)()?n(t,{get peerId(){return e.new_value.toPeerId(!0)},limitSymbols:xe}):c("AdminRecentActions.Disabled")}})}}),channelAdminLogEventActionChangeLocation:({isBroadcast:e,action:t})=>({group:"location",Message:()=>c(e?"AdminRecentActionMessage.ChangeLocationChannel":"AdminRecentActionMessage.ChangeLocationGroup"),ExpandableContent:()=>{const i=t.prev_value?._==="channelLocation"?t.prev_value:void 0,a=t.new_value?._==="channelLocation"?t.new_value:void 0;return n(I,{get added(){return a?.address},get removed(){return i?.address}})}}),channelAdminLogEventActionToggleSlowMode:({action:e})=>({group:"permissions",Message:()=>c("AdminRecentActionMessage.ToggleSlowMode"),ExpandableContent:()=>n(ee,{get label(){return n(q,{key:"AdminRecentActions.SlowModeDuration"})},get value(){return k(()=>!!e.new_value)()?Ke(Ne(e.new_value)):c("AdminRecentActions.Disabled")}})}),channelAdminLogEventActionStartGroupCall:()=>({group:"calls",Message:()=>c("AdminRecentActionMessage.StartGroupCall")}),channelAdminLogEventActionDiscardGroupCall:()=>({group:"calls",Message:()=>c("AdminRecentActionMessage.DiscardGroupCall")}),channelAdminLogEventActionParticipantMute:({action:e})=>({group:"calls",Message:()=>c("AdminRecentActionMessage.ParticipantMuted"),ExpandableContent:()=>n(Z,{get peerId(){return Le(e.participant?.peer)}})}),channelAdminLogEventActionParticipantUnmute:({action:e})=>({group:"calls",Message:()=>c("AdminRecentActionMessage.ParticipantUnmuted"),ExpandableContent:()=>n(Z,{get peerId(){return Le(e.participant?.peer)}})}),channelAdminLogEventActionToggleGroupCallSetting:({action:e})=>({group:"calls",Message:()=>c("AdminRecentActionMessage.ToggleGroupCallSetting"),ExpandableContent:()=>n(X,{get label(){return n(q,{key:"AdminRecentActions.JoinMuted"})},get value(){return e.join_muted}})}),channelAdminLogEventActionParticipantJoinByInvite:({action:e})=>({group:"join",Message:()=>c("AdminRecentActionMessage.ParticipantJoinedByInvite"),ExpandableContent:()=>n(Ee,{get invite(){return e.invite}})}),channelAdminLogEventActionExportedInviteDelete:({action:e})=>({group:"invites",Message:()=>c("AdminRecentActionMessage.ExportedInviteDeleted"),ExpandableContent:()=>n(Ee,{get invite(){return e.invite}})}),channelAdminLogEventActionExportedInviteRevoke:({action:e})=>({group:"invites",Message:()=>c("AdminRecentActionMessage.ExportedInviteRevoked"),ExpandableContent:()=>n(Ee,{get invite(){return e.invite}})}),channelAdminLogEventActionExportedInviteEdit:({action:e})=>({group:"invites",Message:()=>c("AdminRecentActionMessage.ExportedInviteEdited"),ExpandableContent:()=>n(Ee,{get invite(){return e.new_invite}})}),channelAdminLogEventActionParticipantVolume:({action:e})=>({group:"calls",Message:()=>c("AdminRecentActionMessage.ParticipantVolumeChanged"),ExpandableContent:()=>n(Z,{get peerId(){return Le(e.participant?.peer)}})}),channelAdminLogEventActionChangeHistoryTTL:({action:e})=>({group:"messages",Message:()=>c("AdminRecentActionMessage.ChangeHistoryTTL"),ExpandableContent:()=>n(ee,{get label(){return n(q,{key:"AdminRecentActions.AutoDeleteTimer"})},get value(){return k(()=>!!e.new_value)()?Ke(Ne(e.new_value)):c("AdminRecentActions.Disabled")}})}),channelAdminLogEventActionParticipantJoinByRequest:({action:e})=>({group:"participants",Message:()=>c("AdminRecentActionMessage.ParticipantJoinedByRequest"),ExpandableContent:()=>n(Z,{get label(){return c("AdminRecentActions.ApprovedBy")},get peerId(){return e.approved_by.toPeerId()}})}),channelAdminLogEventActionToggleNoForwards:({action:e})=>({group:"permissions",Message:()=>e.new_value?c("AdminRecentActionMessage.ToggleNoForwardsEnabled"):c("AdminRecentActionMessage.ToggleNoForwardsDisabled")}),channelAdminLogEventActionSendMessage:({action:e,channelId:t})=>({group:"messages",Message:()=>c("AdminRecentActionMessage.MessageSent"),ExpandableContent:()=>n(le,{channelId:t,get added(){return e.message},addedKey:"AdminRecentActions.ViewSentMessage"})}),channelAdminLogEventActionChangeAvailableReactions:()=>({group:"reactions",Message:()=>c("AdminRecentActionMessage.ChangeAvailableReactions")}),channelAdminLogEventActionChangeUsernames:()=>({group:"identity",Message:()=>c("AdminRecentActionMessage.ChangeUsernames")}),channelAdminLogEventActionToggleForum:({action:e})=>({group:"forum",Message:()=>c("AdminRecentActionMessage.ToggleForum"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionCreateTopic:({action:e})=>({group:"topics",Message:()=>c("AdminRecentActionMessage.TopicCreated"),ExpandableContent:()=>n(I,{get added(){return n(ae,{get topic(){return e.topic}})}})}),channelAdminLogEventActionEditTopic:({action:e})=>({group:"topics",Message:()=>c("AdminRecentActionMessage.TopicEdited"),ExpandableContent:()=>n(I,{get added(){return n(ae,{get topic(){return e.new_topic}})},get removed(){return n(ae,{get topic(){return e.prev_topic}})}})}),channelAdminLogEventActionDeleteTopic:({action:e})=>({group:"topics",Message:()=>c("AdminRecentActionMessage.TopicDeleted"),ExpandableContent:()=>n(I,{get removed(){return n(ae,{get topic(){return e.topic}})}})}),channelAdminLogEventActionPinTopic:({action:e})=>({group:"topics",Message:()=>c(e.new_topic?"AdminRecentActionMessage.TopicPinned":"AdminRecentActionMessage.TopicUnpinned"),ExpandableContent:()=>n(I,{get added(){return k(()=>!!e.new_topic)()?n(ae,{get topic(){return e.new_topic}}):void 0},get removed(){return k(()=>!!e.prev_topic)()?n(ae,{get topic(){return e.prev_topic}}):void 0}})}),channelAdminLogEventActionToggleAntiSpam:({action:e})=>({group:"permissions",Message:()=>c("AdminRecentActionMessage.ToggleAntiSpam"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionChangePeerColor:()=>({group:"appearance",Message:()=>c("AdminRecentActionMessage.ChangePeerColor")}),channelAdminLogEventActionChangeProfilePeerColor:()=>({group:"appearance",Message:()=>c("AdminRecentActionMessage.ChangeProfilePeerColor")}),channelAdminLogEventActionChangeWallpaper:()=>({group:"appearance",Message:()=>c("AdminRecentActionMessage.ChangeWallpaper")}),channelAdminLogEventActionChangeEmojiStatus:()=>({group:"appearance",Message:()=>c("AdminRecentActionMessage.ChangeEmojiStatus")}),channelAdminLogEventActionChangeEmojiStickerSet:()=>({group:"appearance",Message:()=>c("AdminRecentActionMessage.ChangeEmojiStickerSet")}),channelAdminLogEventActionToggleSignatureProfiles:({action:e})=>({group:"identity",Message:()=>c("AdminRecentActionMessage.ToggleSignatureProfiles"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionParticipantSubExtend:({action:e})=>({group:"participants",Message:()=>c("AdminRecentActionMessage.ParticipantSubscriptionExtended"),ExpandableContent:()=>n(Z,{get peerId(){return Ae(e.new_participant)}})}),channelAdminLogEventActionToggleAutotranslation:({action:e})=>({group:"translations",Message:()=>c("AdminRecentActionMessage.ToggleAutoTranslation"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})})},Nt=({channelId:e,event:t,isBroadcast:i,isForum:a})=>{const s=Kt[t.action._];return s?s({channelId:e,action:t.action,isBroadcast:i,isForum:a}):null},Wt={info:"info",identity:"username",media:"image",permissions:"permissions",messages:"message",participants:"group",join:"adduser",invites:"link",leave:"deleteuser",links:"link",location:"location",calls:"phone",topics:"topics",appearance:"brush",reactions:"reactions",forum:"comments",translations:"language",pinned:"pin",other:"more"},Jt="_Container_1gnhs_2",Qt="_Header_1gnhs_18",Yt="_Group_1gnhs_25",Xt="_Icon_1gnhs_30",Zt="_NameRow_1gnhs_35",er="_PeerTitle_1gnhs_41",nr="_PeerTitleText_1gnhs_52",tr="_PeerTitleTextClickArea_1gnhs_56",rr="_Message_1gnhs_73",ar="_ExpandableContent_1gnhs_92",or="_ExpandableContentWrapper_1gnhs_98",ir="_ExpandableContentTitle_1gnhs_101",sr="_ExpandableContentSpace_1gnhs_104",F={Container:Jt,Header:Qt,Group:Yt,Icon:Xt,NameRow:Zt,PeerTitle:er,PeerTitleText:nr,PeerTitleTextClickArea:tr,Message:rr,Date:"_Date_1gnhs_84",ExpandableContent:ar,ExpandableContentWrapper:or,ExpandableContentTitle:ir,ExpandableContentSpace:sr},dr=B("<div><div>"),cr=B("<div>"),lr=B("<div><div><div>"),gr=B("<div><div><div></div><div><div><div><div></div></div></div></div><div>"),ur=e=>{const[t,i]=L(!1);return(()=>{const a=gr(),s=a.firstChild,r=s.firstChild,d=r.nextSibling,l=d.firstChild,o=l.firstChild,u=o.firstChild,m=d.nextSibling;return a.$$click=g=>{g.target.closest(".interactable")||!t()&&e.onExpandedChange?.(!e.expanded)},A(r,n(te,{get icon(){return e.icon}})),ye(o,"click",e.onPeerTitleClick,!0),A(o,()=>e.peerTitle,null),A(d,n(Ue,{onRunningAnimations:g=>i(!!g),get children(){return n($,{get when(){return!e.expanded},get children(){const g=dr(),p=g.firstChild;return A(p,()=>e.message),y(()=>h(p,F.Message)),g}})}}),null),A(m,()=>hn(e.date,{withTime:!0,shortMonth:!0})),A(a,n(Ue,{scale:!0,get children(){return n($,{get when(){return e.expanded},get children(){const g=lr(),p=g.firstChild,C=p.firstChild;return A(C,()=>e.message),A(p,n($,{get when(){return e.expandableContent},get children(){return[(()=>{const v=cr();return y(()=>h(v,F.ExpandableContentSpace)),v})(),k(()=>e.expandableContent)]}}),null),y(v=>{const w=F.ExpandableContentWrapper,f=F.ExpandableContent,M=F.ExpandableContentTitle,E={[F.offset]:e.offsetTitle};return w!==v._v$&&h(g,v._v$=w),f!==v._v$2&&h(p,v._v$2=f),M!==v._v$3&&h(C,v._v$3=M),v._v$4=ne(C,E,v._v$4),v},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),g}})}}),null),y(g=>{const p=F.Container,C=F.Header,v=F.Icon,w=F.Group,f=F.PeerTitle,M=`${F.PeerTitleText} interactable`,E=F.PeerTitleTextClickArea,R=F.Date;return p!==g._v$5&&h(a,g._v$5=p),C!==g._v$6&&h(s,g._v$6=C),v!==g._v$7&&h(r,g._v$7=v),w!==g._v$8&&h(d,g._v$8=w),f!==g._v$9&&h(l,g._v$9=f),M!==g._v$10&&h(o,g._v$10=M),E!==g._v$11&&h(u,g._v$11=E),R!==g._v$12&&h(m,g._v$12=R),g},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0}),a})()};Te(["click"]);const mr="_Overlay_1amcu_1",vr="_Container_1amcu_10",hr="_Icon_1amcu_22",_r="_Title_1amcu_27",ge={Overlay:mr,Container:vr,Icon:hr,Title:_r},pr=B("<div><div><div></div><div>"),Ar=e=>(()=>{const t=pr(),i=t.firstChild,a=i.firstChild,s=a.nextSibling;return A(i,n(te,{icon:"clipboard",get class(){return ge.Icon}}),a),A(a,n(q,{get key(){return e.forFilters?"AdminRecentActionsPlaceholder.WithFilterTitle":"AdminRecentActionsPlaceholder.Title"}})),A(s,n(q,{get key(){return e.forFilters?"AdminRecentActionsPlaceholder.WithFilterDescription":"AdminRecentActionsPlaceholder.Description"}})),y(r=>{const d=ge.Overlay,l=ge.Container,o=ge.Title,u=ge.Description;return d!==r._v$&&h(t,r._v$=d),l!==r._v$2&&h(i,r._v$2=l),o!==r._v$3&&h(a,r._v$3=o),u!==r._v$4&&h(s,r._v$4=u),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})(),fr="_IconsFlex_1utce_1",Cr="_Item_1utce_6",$r="_hidden_1utce_14",Mr="_absolute_1utce_18",be={IconsFlex:fr,Item:Cr,hidden:$r,absolute:Mr},tn=B("<div>"),Er=30,br=200,xr=20,rn=70,wr=120,Tr=200,yr=20,Rr=50,Pr=120,Ir=100,ea=()=>{const{rootScope:e,PeerTitleTsx:t,apiManagerProxy:i,appImManager:a,ChatType:s}=oe(),[r]=Tn(),d=i.isForum(r.payload.channelId.toPeerId(!0));let l=!0,o=!1,u=!0,m=!1,g=0;const[p,C]=L(!1),[v,w]=L(null),[f,M]=L(!0),[E,R]=Sn(),[j,W]=L([]),ie=_=>e.managers.appChatsManager.getAdminLogs({channelId:r.payload.channelId,search:v()?.search,admins:v()?.admins,flags:v()?.flags,limit:Er,offsetId:_}).then(({items:S})=>S),[G]=_n(()=>v()||{},()=>ie()),se=O(()=>f()&&!E().size),Re=pn(()=>[f(),E()],(_,[S,x])=>S?!x.has(_):x.has(_));we(()=>{l=!0,o=!1,m=!1,N(()=>{W(G()||[]),R(new Set)}),g=r.scrollable.container.scrollTop,r.scrollable.container.scrollTop=0});const ve=An(async()=>{if(G.loading||m)return;const _=yn(j());if(!_)return;const S=await ie(_.id);if(!S.length){m=!0;return}const x=new Set(S.map(H=>String(H.id)));W([...j().filter(H=>!x.has(String(H.id))),...S])},br),he=Rn(()=>{r.scrollable.updateThumb()},Ir),re=()=>{const _=se();N(()=>{M(!_),R(new Set)})},T=_=>{N(()=>{R(S=>{const x=new Set(S);return x.has(_)?x.delete(_):x.add(_),x}),E().size===j().length&&(M(!f()),R(new Set))})},J=()=>{En("logsDiffView",!1),r.close(),a.setInnerPeer({peerId:r.payload.channelId.toPeerId(!0),type:s.Logs})},P=()=>{ve(),he()};return[n(qe,{get mount(){return r.header},get children(){const _=tn();return A(_,n(ue,{name:"fade",mode:"outin",get children(){return n($,{get when(){return j().length},get children(){return n(nt,{get expanded(){return se()},onClick:re})}})}}),null),A(_,n(ue,{name:"fade",mode:"outin",get children(){return n($,{get when(){return j().length||v()},get children(){return n(Ge,{icon:"filter",onClick:()=>C(!p())})}})}}),null),A(_,n(Ge,{icon:"message",onClick:J}),null),y(()=>h(_,be.IconsFlex)),_}}),n(qe,{get mount(){return r.content},get children(){return n(_t,{get channelId(){return r.payload.channelId},get isBroadcast(){return r.payload.isBroadcast},get open(){return p()},onClose:()=>C(!1),get committedFilters(){return v()},onCommit:w})}}),n(ue,{name:"fade-2",onExit:(_,S)=>{const x=_;x.classList.add(be.absolute),x.style.transform=`translateY(${-g}px)`,fn(200).then(S)},onAfterExit:()=>{r.scrollable.updateThumb()},get children(){return[n($,{get when(){return k(()=>G.state==="ready")()&&G()?.length===0},get children(){return n(Ar,{get forFilters(){return!!v()}})}}),n($,{keyed:!0,get when(){return k(()=>!!j().length)()?G():!1},get children(){return n(Wn,{get list(){return j()},measureElementHeight:_=>_.offsetHeight,estimateItemHeight:()=>f()?wr:rn,maxBatchSize:xr,get scrollable(){return r.scrollable.container},onNearBottom:P,verticalPadding:8,renderAtLeastFromBottom:({clientHeight:_})=>Math.ceil(_/rn),Item:_=>{let S;const x=O(()=>_.payload),H=O(()=>Nt({channelId:r.payload.channelId,event:x(),isBroadcast:r.payload.isBroadcast,isForum:d})),_e=Cn.isAvailable("animations"),[pe,ze]=L(_e&&l);return l&&_e&&($n(()=>{S?.animate({opacity:[0,1],transform:["translateY(-4px)","translateY(0)"]},{duration:Tr,delay:_.idx*(f()?Rr:yr)+(u?0:Pr)}).finished.then(()=>{ze(!1)})}),o||(o=!0,queueMicrotask(()=>{l=!1,u=!1}))),(()=>{const U=tn();return an(D=>{S=D,_.ref instanceof Function&&_.ref(D)},U),A(U,n($,{get when(){return H()},get children(){return n(ur,{get peerTitle(){return n(t,{get peerId(){return x().user_id.toPeerId()},limitSymbols:xe})},get message(){return n(Fe,{get component(){return H().Message}})},get date(){return new Date(x().date*1e3)},get icon(){return Wt[H().group]},onExpandedChange:()=>T(x()),get expanded(){return Re(x())},get expandableContent(){return k(()=>!!H().ExpandableContent)()&&n(Mn,{get fallback(){return[]},get children(){return n(Fe,{get component(){return H().ExpandableContent}})}})},get onPeerTitleClick(){return je(x().user_id.toPeerId())}})}})),y(D=>{const Ve=be.Item,on={[be.hidden]:pe()||_.isMeasuring},Pe=`${_.offset}px`,Ie=`${_.translation}px`;return Ve!==D._v$&&h(U,D._v$=Ve),D._v$2=ne(U,on,D._v$2),Pe!==D._v$3&&((D._v$3=Pe)!=null?U.style.setProperty("--top",Pe):U.style.removeProperty("--top")),Ie!==D._v$4&&((D._v$4=Ie)!=null?U.style.setProperty("--translation",Ie):U.style.removeProperty("--translation")),D},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),U})()}})}})]}})]};export{ea as default};
//# sourceMappingURL=index-UFlxCz6p.js.map
