import{a7 as de,c as _,aQ as Y,ew as ue,a3 as Se,de as fe,ah as me,aj as he,aa as k,a4 as D,i as F,a2 as be,t as U,fH as ve,v as h,b as ge,C as Te,a as we,c6 as Ee,d9 as xe,b$ as Pe}from"./index-CKohjhry.js";import{c as _e}from"./classNames-CN4lTu6a.js";const Le=U("<div>"),ye=U("<div class=scrollable-thumb-container><div class=scrollable-thumb>"),ze=24,S=!ve;let L,y;S?(L=t=>requestAnimationFrame(t),y=t=>cancelAnimationFrame(t)):(L=t=>window.setTimeout(t,ze),y=t=>window.clearTimeout(t));const Ce=Pe();function Oe(t){const n=t.axis??"y",b=n==="x"?"scrollLeft":"scrollTop",N=n==="x"?"scrollWidth":"scrollHeight",V=n==="x"?"clientWidth":"clientHeight",X=n==="x"?"offsetWidth":"offsetHeight",z=n==="x"?"clientX":"clientY",[j,C]=_(!1),i=()=>s[b],q=e=>s[b]=e,u=()=>s[N],v=()=>s[V],g=()=>s[X],A=()=>u()-Math.round(i()+g()),Q=Y(()=>t.onScrollOffset??300);let T=0,f=0,M,O,w=!1,m=!1;const[G,J]=_(!0),[K,Z]=_(!0);let a=0;const p=ue(()=>{w=!0,a&&(B(),m=!0)},()=>{w=!1,m&&(E(),m=!1)});Se(p);const E=()=>{if(w){B(),m=!0;return}!t.onScrolledTop&&!t.onScrolledBottom&&!H().length&&!S||a||(a=L(()=>{a=0;const e=i();T=f===e?0:f<e?1:-1,f=e,oe(e),H().forEach(o=>o()),ee()}))},B=()=>{a&&(y(a),a=0)},ee=()=>{if(!t.onScrolledTop&&!t.onScrolledBottom)return;const e=u();if(!e)return;const o=i(),l=g(),c=Q(),d=e-l;t.onScrolledTop&&o<=c&&T<=0&&t.onScrolledTop(),t.onScrolledBottom&&d-o<=c&&T>=0&&t.onScrolledBottom()},te=()=>{J(!i()),Z(A()<=1)},oe=(e=i())=>{if(!S||!r)return;const o=u(),l=v(),c=o/l/.75,d=Math.max(20,l/c),x=e/(o-l)*l,W=e/(o-l),P=l-d;l<o?(r.style.height=d+"px",r.style.transform=`translateY(${Math.min(P,x-d*W)}px)`):r.style.height="0px"},le=e=>{f=e,ne(),q(e)},ne=()=>{C(!0),s.addEventListener("scroll",e=>{h(e),C(!1)},{capture:!0,passive:!1,once:!0})},H=Y(()=>[t.onScroll,t.withBorders&&te].filter(Boolean)),R=e=>{h(e);const o=u(),l=v(),c=r.offsetHeight,d=o-l,x=l-c,P=(e[z]-M)/x*d,ae=O+P;s[b]=ae},se=e=>{h(e),M=e[z],O=i(),e.target.classList.add("is-focused"),window.addEventListener("mousemove",R),window.addEventListener("mouseup",ce,{once:!0})},ce=e=>{window.removeEventListener("mousemove",R),r.classList.remove("is-focused")},re=e=>{e.stopPropagation();const o=e.target;!e.deltaX&&o.scrollWidth>o.clientWidth&&(o.scrollLeft+=e.deltaY/4,h(e))},I=()=>{S&&r&&E()},ie={get scrollPosition(){return i()},get scrollSize(){return u()},get clientSize(){return v()},get offsetSize(){return g()},getDistanceToEnd:A,get container(){return s},onSizeChange:I,setScrollPositionSilently:le},$=fe(()=>ge(Ce.Provider,{value:ie,get children(){return t.children}}));me(he($,I));let s,r;return(()=>{const e=Le();return k(e,"wheel",n==="x"&&!Te&&re||void 0),k(e,"scroll",!j()&&E),D(o=>{s=o,t.ref?.(o)},e),F(e,S&&n==="y"&&(()=>{const o=ye(),l=o.firstChild;return l.$$mousedown=se,D(c=>{r=c,t.thumbRef?.(c)},l),o})(),null),F(e,$,null),be(()=>we(e,_e("scrollable",`scrollable-${n}`,t.class,Ee&&!xe&&"no-scrollbar",...t.withBorders?[G()&&"scrolled-start",K()&&"scrolled-end",n==="y"&&"scrollable-y-bordered",(t.withBorders==="top"||t.withBorders==="both")&&"scrollable-y-bordered-top",(t.withBorders==="bottom"||t.withBorders==="both")&&"scrollable-y-bordered-bottom"]:[]))),e})()}de(["mousedown"]);export{Oe as S,Ce as a};
//# sourceMappingURL=scrollable2-CvJWlig5.js.map
