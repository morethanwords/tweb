import{a5 as J,ey as oe,i as y,a2 as D,w as W,a0 as B,a as f,a4 as V,b as s,t as M,bs as de,a7 as A,c as H,ae as me,a6 as _e,a1 as Z,cD as ge,a9 as he,bt as ee,af as pe,da as ve,dc as te,ac as N,ej as K,a3 as X,h as _,br as Se}from"./index-tI-xhcaB.js";import{u as se}from"./actions-CrQM1gkt.js";import{v as fe,x as ae,y as Y,R as F,r as $e}from"./appDialogsManager-Ctnre_om.js";import{S as be}from"./staticSwitch-BwQ-gCGE.js";import{S as U}from"./space-CnFSSmka.js";import{I as ne}from"./iconTsx-qmx_azUz.js";import{L as ce,c as Pe}from"./lottieAnimation-DZt2L5mS.js";import{T as ye}from"./chatBackground-D2WLYWfB.js";import"./page-CQRZVIxS.js";import"./avatar-DWSeRtxV.js";import"./putPreloader-DqTE7FdZ.js";import"./classNames-DTFwb2o_.js";import"./htmlToSpan-DhAls8qz.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-tRNYmPsw.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./codeInputField-BAbC2luo.js";const ke="_Container_1qplo_1",Ce="_KeysContainer_1qplo_7",Le="_KeyButton_1qplo_13",we="_selected_1qplo_35",Ee="_KeyButtonFirst_1qplo_53",Te="_KeyButtonLast_1qplo_57",Be="_PlusIcon_1qplo_62",Me="_TargetKey_1qplo_67",E={Container:ke,KeysContainer:Ce,KeyButton:Le,selected:we,KeyButtonFirst:Ee,KeyButtonLast:Te,PlusIcon:Be,TargetKey:Me},Re=M("<span>"),Ke=M("<div><div></div><div>"),xe=M("<button>"),Q=["Ctrl","Alt","Shift","Meta"],Oe=n=>{const d=oe(()=>n.value,(a,l)=>l.includes(a)),$=a=>a==="Meta"?s(ne,{icon:de?"mac_command_key":"win_key"}):(()=>{const l=Re();return y(l,a),l})(),k=a=>{if(n.value.includes(a)){const l=n.value.filter(g=>g!==a);if(!l.length){const g=[0,1,2,3].filter(e=>e!==Q.indexOf(a));l.push(Q[g[Math.floor(Math.random()*g.length)]])}n.onChange(l)}else n.onChange([...n.value,a])};return(()=>{const a=Ke(),l=a.firstChild,g=l.nextSibling;return y(l,()=>Q.map((e,i,b)=>(()=>{const v=xe();return v.$$click=k,v.$$clickData=e,D(W,v,()=>!0),y(v,()=>$(e)),B(t=>{const m=E.KeyButton,u={[E.selected]:d(e),[E.KeyButtonFirst]:i===0,[E.KeyButtonLast]:i===b.length-1};return m!==t._v$5&&f(v,t._v$5=m),t._v$6=V(v,u,t._v$6),t},{_v$5:void 0,_v$6:void 0}),v})())),y(a,s(ne,{get class(){return E.PlusIcon},icon:"plus"}),g),y(g,()=>n.key),B(e=>{const i=E.Container,b={[n.class]:!!n.class},v=E.KeysContainer,t=E.TargetKey;return i!==e._v$&&f(a,e._v$=i),e._v$2=V(a,b,e._v$2),v!==e._v$3&&f(l,e._v$3=v),t!==e._v$4&&f(g,e._v$4=t),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),a})()};J(["click"]);const De="_Overlay_deagn_36",Ae="_Value_deagn_45",He="_Select_deagn_52",Ie="_SelectClip_deagn_63",qe="_Option_deagn_75",Fe="_selected_deagn_87",R={Overlay:De,Value:Ae,Select:He,SelectClip:Ie,Option:qe,selected:Fe},Ne=M("<div>"),Ve=M("<div><div><div>"),Ue=M("<div><span>"),ze=n=>{let d;const $=A(()=>n.options.find(t=>t.value===n.value)?.label),[k,a]=H();me(()=>{a($()())});const l=oe(()=>n.value),[g,e]=H();_e(()=>{const t=new ee;t.add(window)("resize",()=>{n.isOpen&&n.onClose?.()}),Z(()=>{t.removeAll()})});const i=(t,m)=>{const u=t.firstElementChild,r=u.querySelector(`.${R.selected}`);if(!r||!u)return;const c=d.getBoundingClientRect(),h=u.getBoundingClientRect(),p=r.getBoundingClientRect(),P=p.top-h.top,C=P+p.height,I=P+p.height/2,z=c.left+c.width/2;let L=c.top+c.height/2-I;const O=L+h.height>window.innerHeight||L<0;if(O&&(L+=Math.max(0,-L)+Math.min(0,window.innerHeight-(L+h.height))),u.style.setProperty("--x",""+z),u.style.setProperty("--y",""+L),u.animate({opacity:[0,1]},{duration:120}).finished.then(()=>{O&&m()}),O)return;const q=Math.max(P,h.height-C),j=w=>`polygon(0% ${P-w}px, 100% ${P-w}px, 100% ${C+w}px, 0px ${C+w}px)`;pe(0,q,400,w=>{u.style.setProperty("clip-path",j(w))},{easing:ve,onEnd:()=>{u.style.removeProperty("clip-path"),m()}})},b=async(t,m)=>{await t.firstElementChild.animate({opacity:[1,0]},{duration:120}).finished,m()},v=t=>{const m=[n.parent,g()];if(!m.every(Boolean))return;m.every(r=>{const c=r.getBoundingClientRect();return Math.max(c.left-t.clientX,t.clientX-c.right,c.top-t.clientY,t.clientY-c.bottom)>100})&&n.onClose?.()};return[(()=>{const t=Ne(),m=d;return typeof m=="function"?D(m,t):d=t,y(t,k),B(()=>f(t,R.Value)),t})(),s(he,{get children(){return s(ye,{appear:!0,onEnter:i,onExit:b,get children(){return A(()=>!!n.isOpen)()&&(()=>{const t=Ve(),m=t.firstChild,u=m.firstChild;return t.$$mousemove=v,t.$$click=r=>{r.stopPropagation(),n.onClose?.()},D(e,u),y(u,s(ge,{get each(){return n.options},children:r=>(()=>{const c=Ue(),h=c.firstChild;return c.$$click=n.onChange,c.$$clickData=r.value,D(W,c,()=>!0),y(h,()=>r.label()),B(p=>{const P=R.Option,C={[R.selected]:l(r.value)};return P!==p._v$4&&f(c,p._v$4=P),p._v$5=V(c,C,p._v$5),p},{_v$4:void 0,_v$5:void 0}),c})()})),B(r=>{const c=R.Overlay,h=R.SelectClip,p=R.Select;return c!==r._v$&&f(t,r._v$=c),h!==r._v$2&&f(m,r._v$2=h),p!==r._v$3&&f(u,r._v$3=p),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}})}})]};J(["click","mousemove"]);const je="_MainDescription_1pm2o_36",Qe="_FirstSection_1pm2o_44",Xe="_Row_1pm2o_49",Ye="_ShortcutBuilderRow_1pm2o_54",Ge="_ShortcutBuilderRowChild_1pm2o_60",Je="_collapsed_1pm2o_63",We="_Hint_1pm2o_68",T={MainDescription:je,FirstSection:Qe,Row:Xe,ShortcutBuilderRow:Ye,ShortcutBuilderRowChild:Ge,collapsed:Je,Hint:We},ie=M("<div>"),Ze=M('<div><button class="btn-primary btn-color-primary btn-large">'),G=(n,d)=>({appendTo:n.scrollable.container,duration:2500,from:"bottom",textElement:_(d),icon:"premium_lock",class:T.Hint,canCloseOnPeerChange:!1}),$t=()=>{const{rootScope:n}=te(),d=fe(),[$,{mutate:k}]=N(()=>{const e=n.managers.appStateManager.getState().then(i=>i.settings?.passcode?.enabled||!1);return d.collect(e),e}),[a,l]=H(!1),g=new ee;return g.add(n)("settings_updated",({key:e,value:i})=>{e===K("settings","passcode","enabled")&&k(i)}),Z(()=>{g.removeAll()}),s(X,{get when(){return $.state==="ready"},get children(){return A(()=>!!($()||a()))()?s(tt,{onDisable:()=>l(!0)}):s(et,{})}})},et=()=>{const[n,{AppPasscodeEnterPasswordTab:d,AppPasscodeLockTab:$}]=ae(),{enablePasscode:k}=se(),{setQuizHint:a}=te(),l=()=>{n.slider.createTab(d).open({onSubmit:e=>{g(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},g=e=>{n.slider.createTab(d).open({onSubmit:async(i,b)=>{if(i!==e)throw{};await k(i),i="",b.slider.sliceTabsUntilTab($,b),b.close(),a(G(n,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return s(Y,{caption:"PasscodeLock.Notice",get children(){return[s(ce,{name:"UtyanPasscode"}),(()=>{const e=ie();return y(e,()=>_("PasscodeLock.Description")),B(()=>f(e,T.MainDescription)),e})(),s(U,{amount:"0.5rem"}),(()=>{const e=Ze(),i=e.firstChild;return i.$$click=l,D(W,i,()=>!0),y(i,()=>_("PasscodeLock.TurnOn")),B(()=>f(e,Pe.AdditionalPadding)),e})(),s(U,{amount:"1rem"})]}})},tt=n=>{const[d,{AppPasscodeEnterPasswordTab:$,AppPasscodeLockTab:k,AppPrivacyAndSecurityTab:a}]=ae(),{disablePasscode:l,changePasscode:g}=se(),{rootScope:e,setQuizHint:i}=te(),b=[{value:0,label:()=>_("PasscodeLock.Disabled")},{value:1,label:()=>_("MinutesShort",[1])},{value:5,label:()=>_("MinutesShort",[5])},{value:10,label:()=>_("MinutesShort",[10])},{value:15,label:()=>_("MinutesShort",[15])},{value:30,label:()=>_("MinutesShort",[30])}],[v,t]=H(),[m,u]=H(!1),[r,{mutate:c}]=N(()=>e.managers.appStateManager.getState().then(o=>o?.settings?.passcode?.autoLockTimeoutMins||0)),[h,{mutate:p}]=N(()=>e.managers.appStateManager.getState().then(o=>o?.settings?.passcode?.lockShortcutEnabled||!1)),[P,{mutate:C}]=N(()=>e.managers.appStateManager.getState().then(o=>o?.settings?.passcode?.lockShortcut||[])),I=new ee;I.add(e)("settings_updated",({key:o,value:S})=>{o===K("settings","passcode","lockShortcut")?C(S):o===K("settings","passcode","lockShortcutEnabled")?p(S):o===K("settings","passcode","autoLockTimeoutMins")&&c(S)});function z(o){C(o),e.managers.appStateManager.setByKey(K("settings","passcode","lockShortcut"),o)}function L(o){p(o),e.managers.appStateManager.setByKey(K("settings","passcode","lockShortcutEnabled"),o)}function O(o){c(o),e.managers.appStateManager.setByKey(K("settings","passcode","autoLockTimeoutMins"),o)}Z(()=>{I.removeAll()});const q=()=>!Se&&P.state==="ready"&&h.state==="ready",j=()=>{d.slider.createTab($).open({onSubmit:o=>{w(o),o=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},w=o=>{d.slider.createTab($).open({onSubmit:async(S,x)=>{if(S!==o)throw{};await g(S),S="",x.slider.sliceTabsUntilTab(k,x),x.close(),i(G(d,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},re=()=>{$e({title:_("PasscodeLock.TurnOff.Title"),description:_("PasscodeLock.TurnOff.Description"),button:{text:_("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{n.onDisable(),await l(),d.close(),i(G(d.slider.getTab(a),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},le=[A(()=>_("PasscodeLock.Description")),s(U,{amount:"1rem"}),A(()=>_("PasscodeLock.Notice"))];return[s(Y,{get class(){return T.FirstSection},caption:le,get children(){return[s(ce,{name:"UtyanPasscode"}),s(U,{amount:"1.125rem"}),s(F,{get title(){return _("PasscodeLock.TurnOff.Title")},icon:"lockoff",clickable:re}),s(F,{get title(){return _("PasscodeLock.ChangePasscode")},icon:"key",clickable:j})]}}),s(Y,{get caption(){return q()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[s(X,{get when(){return r.state==="ready"},get children(){return s(F,{ref:t,get classList(){return{[T.Row]:!0}},get title(){return _("PasscodeLock.AutoLock")},get rightContent(){return s(ze,{get value(){return r()},onClose:()=>u(!1),options:b,onChange:O,get isOpen(){return m()},get parent(){return v()}})},clickable:()=>{u(!0)}})}}),s(X,{get when(){return q()},get children(){return[s(F,{get title(){return _("PasscodeLock.EnableLockShortcut")},get classList(){return{[T.Row]:!0}},get rightContent(){return s(be,{get checked(){return h()}})},clickable:o=>{L(!h())}}),(()=>{const o=ie();return y(o,s(Oe,{get class(){return T.ShortcutBuilderRowChild},get value(){return P()||[]},onChange:z,key:"L"})),B(S=>{const x=T.ShortcutBuilderRow,ue={[T.collapsed]:!h()};return x!==S._v$&&f(o,S._v$=x),S._v$2=V(o,ue,S._v$2),S},{_v$:void 0,_v$2:void 0}),o})()]}})]}})]};J(["click"]);export{$t as default};
//# sourceMappingURL=mainTab-BUyFrCY4.js.map
