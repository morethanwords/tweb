{"version":3,"file":"saveButton-CshT2ZIP.js","sources":["../src/hooks/useIsConfirmationNeededOnClose.ts","../src/components/sidebarLeft/tabs/privacy/messages/appearZoomTransition.tsx","../src/components/saveButton.tsx"],"sourcesContent":["import type {Accessor} from 'solid-js';\nimport type {ConfirmationPopupRejectReason} from '@components/confirmationPopup';\nimport type {PopupPeerOptions} from '@components/popups/peer';\nimport type {LangPackKey} from '@lib/langPack';\nimport {useHotReloadGuard} from '@lib/solidjs/hotReloadGuard';\n\n\ntype UseIsConfirmationNeededOnCloseArgs = {\n  descriptionLangKey: LangPackKey;\n  hasChanges: Accessor<boolean>;\n  saveAllSettings: () => Promise<void>;\n};\n\nconst useIsConfirmationNeededOnClose = ({descriptionLangKey, hasChanges, saveAllSettings}: UseIsConfirmationNeededOnCloseArgs) => {\n  const {confirmationPopup} = useHotReloadGuard();\n\n  return async() => {\n    if(!hasChanges()) return;\n\n    const saveButton: PopupPeerOptions['buttons'][number] = {\n      langKey: 'Save'\n    };\n\n    try {\n      await confirmationPopup({\n        titleLangKey: 'UnsavedChanges',\n        descriptionLangKey,\n        button: saveButton,\n        buttons: [\n          saveButton,\n          {isCancel: true, langKey: 'Discard'}\n        ],\n        rejectWithReason: true\n      });\n      saveAllSettings();\n\n      return true;\n    } catch(_reason: any) {\n      const reason: ConfirmationPopupRejectReason = _reason;\n\n      if(reason === 'closed') throw new Error();\n    }\n  };\n};\n\nexport default useIsConfirmationNeededOnClose;\n","import {ParentComponent} from 'solid-js';\nimport {Transition} from 'solid-transition-group';\n\n\nconst animateEl = (backwards = false) => async(el: Element, done: () => void) => {\n  const keyframes = ['scale(0)', 'scale(1)'];\n  if(backwards) keyframes.reverse();\n\n  await el.animate(\n    {transform: keyframes},\n    {duration: 80}\n  ).finished;\n\n  done();\n};\n\nconst AppearZoomTransition: ParentComponent = (props) => {\n  return (\n    <Transition\n      onEnter={animateEl()}\n      onExit={animateEl(true)}\n    >\n      {props.children}\n    </Transition>\n  );\n};\n\nexport default AppearZoomTransition;\n","import {Component, Show} from 'solid-js';\nimport {keepMe} from '@helpers/keepMe';\nimport {IconTsx} from '@components/iconTsx';\nimport ripple from '@components/ripple';\nimport AppearZoomTransition from '@components/sidebarLeft/tabs/privacy/messages/appearZoomTransition';\n\nkeepMe(ripple);\n\n\nconst SaveButton: Component<{\n  hasChanges: boolean;\n  onClick: () => void;\n}> = (props) => {\n  return (\n    <AppearZoomTransition>\n      <Show when={props.hasChanges}>\n        <button\n          use:ripple\n          class=\"btn-icon blue\"\n          onClick={props.onClick}\n        >\n          <IconTsx icon=\"check\" />\n        </button>\n      </Show>\n    </AppearZoomTransition>\n  )\n};\n\nexport default SaveButton;\n"],"names":["useIsConfirmationNeededOnClose","descriptionLangKey","hasChanges","saveAllSettings","confirmationPopup","useHotReloadGuard","saveButton","_reason","animateEl","backwards","el","done","keyframes","reverse","animate","transform","duration","finished","AppearZoomTransition","props","_$createComponent","Transition","onEnter","onExit","children","SaveButton","Show","when","_el$","_tmpl$","_$addEventListener","onClick","_$use","ripple","_$insert","IconTsx","icon","_$delegateEvents"],"mappings":"4LAaA,MAAMA,EAAiC,CAAC,CAAC,mBAAAC,EAAoB,WAAAC,EAAY,gBAAAC,KAAyD,CAC1H,KAAA,CAAC,kBAAAC,GAAqBC,IAE5B,MAAO,UAAW,CAChB,GAAG,CAACH,EAAW,EAAG,OAElB,MAAMI,EAAkD,CACtD,QAAS,MAAA,EAGP,GAAA,CACF,aAAMF,EAAkB,CACtB,aAAc,iBACd,mBAAAH,EACA,OAAQK,EACR,QAAS,CACPA,EACA,CAAC,SAAU,GAAM,QAAS,SAAS,CACrC,EACA,iBAAkB,EAAA,CACnB,EACeH,IAET,SACDI,EAAc,CAGpB,GAF8CA,IAEhC,SAAU,MAAM,IAAI,KACpC,CAAA,CAEJ,ECvCMC,EAAYA,CAACC,EAAY,KAAU,MAAMC,EAAaC,IAAqB,CAC/E,MAAMC,EAAY,CAAC,WAAY,UAAU,EACtCH,GAAWG,EAAUC,UAExB,MAAMH,EAAGI,QACP,CAACC,UAAWH,CAAS,EACrB,CAACI,SAAU,EACb,CAAA,EAAEC,SAEFN,GACF,EAEMO,EAAyCC,GAC7CC,EACGC,EAAU,CAAA,IACTC,SAAO,CAAA,OAAEd,EAAS,CAAE,EAAA,IACpBe,QAAM,CAAA,OAAEf,EAAU,EAAI,CAAC,EAAA,IAAAgB,UAAA,CAAA,OAEtBL,EAAMK,QAAQ,CAAA,CAAA,wCCbfC,EAGAN,GACJC,EACGF,EAAoB,CAAA,IAAAM,UAAA,CAAA,OAAAJ,EAClBM,EAAI,CAAA,IAACC,MAAI,CAAA,OAAER,EAAMjB,UAAU,EAAA,IAAAsB,UAAA,CAAA,MAAAI,EAAAC,IAAAC,OAAAA,EAAAF,EAIfT,QAAAA,EAAMY,QAAO,EAAA,EAAAC,EAFlBC,EAAML,EAAA,IAAA,EAAA,EAAAM,EAAAN,EAAAR,EAITe,EAAO,CAACC,KAAI,OAAA,CAAA,CAAA,EAAAR,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAOGS,EAAA,CAAA,OAAA,CAAA"}