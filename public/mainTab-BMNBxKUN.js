import{a9 as G,aQ as _e,c as D,ah as pe,c4 as oe,aa as ge,a6 as J,i as y,a5 as B,a as b,b as n,ab as N,a7 as A,bU as ve,E as W,a8 as V,ad as fe,t as R,bx as Z,aj as Se,c2 as be,bw as $e,dN as ee,af as q,dt as F,a2 as j,k as _,bv as Pe}from"./index-BvGL1xuo.js";import{u as se}from"./actions-BP-FXbPE.js";import{S as ce}from"./settingsTabLottieAnimation-D48p2LOE.js";import{a4 as ye,a2 as ae,a8 as X}from"./appDialogsManager-XaPh8Ebl.js";import{S as U}from"./space-Dhq067wA.js";import{S as ke}from"./staticSwitch-DDvhRTPx.js";import{c as Ce}from"./common.module-D7GySBIo.js";import{T as Le}from"./transition-BiOz51yx.js";import{I as ne}from"./iconTsx-CaCwBDRa.js";import"./classNames-CN4lTu6a.js";import"./emailSetup-WdO0dYdx.js";import"./page-BVzOy6XJ.js";import"./putPreloader-kvx-XxnM.js";import"./avatar-CB40gZt-.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-Ckwu71fG.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-RbAV3hV8.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-BLPl1XHv.js";import"./scrollable2-B-xx7ucK.js";import"./chatBackground-D1efQpC1.js";import"./tracking-B2ZwtkRX.js";const we="_Overlay_1tf9c_36",Te="_Value_1tf9c_45",Ee="_Select_1tf9c_52",Be="_SelectClip_1tf9c_62",Re="_Option_1tf9c_70",Me="_selected_1tf9c_82",M={Overlay:we,Value:Te,Select:Ee,SelectClip:Be,Option:Re,selected:Me},xe=R("<div>"),Oe=R("<div><div><div>"),Ke=R("<div><span>"),Ae=o=>{let m;const $=_e(()=>o.options.find(t=>t.value===o.value)?.label),[k,c]=D();pe(()=>{c($()())});const l=oe(()=>o.value),[p,e]=D();ge(()=>{const t=new Z;t.add(window)("resize",()=>{o.isOpen&&o.onClose?.()}),J(()=>{t.removeAll()})});const a=(t,u)=>{const h=t.firstElementChild,d=h.querySelector(`.${M.selected}`);if(!d||!h)return;const r=m.getBoundingClientRect(),S=h.getBoundingClientRect(),g=d.getBoundingClientRect(),P=g.top-S.top,L=P+g.height,x=P+g.height/2,I=r.left+r.width/2;let C=r.top+r.height/2-x;const O=C+S.height>window.innerHeight||C<0;if(O&&(C+=Math.max(0,-C)+Math.min(0,window.innerHeight-(C+S.height))),h.style.setProperty("--x",""+I),h.style.setProperty("--y",""+C),h.animate({opacity:[0,1]},{duration:120}).finished.then(()=>{O&&u()}),O)return;const H=Math.max(P,S.height-L),z=w=>`polygon(0% ${P-w}px, 100% ${P-w}px, 100% ${L+w}px, 0px ${L+w}px)`;Se(0,H,400,w=>{h.style.setProperty("clip-path",z(w))},{easing:be,onEnd:()=>{h.style.removeProperty("clip-path"),u()}})},i=async(t,u)=>{await t.firstElementChild.animate({opacity:[1,0]},{duration:120}).finished,u()},v=t=>{const u=[o.parent,p()];if(!u.every(Boolean))return;u.every(d=>{const r=d.getBoundingClientRect();return Math.max(r.left-t.clientX,t.clientX-r.right,r.top-t.clientY,t.clientY-r.bottom)>100})&&o.onClose?.()};return[(()=>{const t=xe(),u=m;return typeof u=="function"?A(u,t):m=t,y(t,k),B(()=>b(t,M.Value)),t})(),n(fe,{get children(){return n(Le,{appear:!0,onEnter:a,onExit:i,get children(){return N(()=>!!o.isOpen)()&&(()=>{const t=Oe(),u=t.firstChild,h=u.firstChild;return t.$$mousemove=v,t.$$click=d=>{d.stopPropagation(),o.onClose?.()},A(e,h),y(h,n(ve,{get each(){return o.options},children:d=>(()=>{const r=Ke(),S=r.firstChild;return r.$$click=o.onChange,r.$$clickData=d.value,A(W,r,()=>!0),y(S,()=>d.label()),B(g=>{const P=M.Option,L={[M.selected]:l(d.value)};return P!==g._v$4&&b(r,g._v$4=P),g._v$5=V(r,L,g._v$5),g},{_v$4:void 0,_v$5:void 0}),r})()})),B(d=>{const r=M.Overlay,S=M.SelectClip,g=M.Select;return r!==d._v$&&b(t,d._v$=r),S!==d._v$2&&b(u,d._v$2=S),g!==d._v$3&&b(h,d._v$3=g),d},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}})}})]};G(["click","mousemove"]);const De="_MainDescription_1pm2o_36",Ie="_FirstSection_1pm2o_44",He="_Row_1pm2o_49",qe="_ShortcutBuilderRow_1pm2o_54",Fe="_ShortcutBuilderRowChild_1pm2o_60",Ne="_collapsed_1pm2o_63",Ve="_Hint_1pm2o_68",E={MainDescription:De,FirstSection:Ie,Row:He,ShortcutBuilderRow:qe,ShortcutBuilderRowChild:Fe,collapsed:Ne,Hint:Ve},Ue="_Container_1qplo_1",ze="_KeysContainer_1qplo_7",Qe="_KeyButton_1qplo_13",je="_selected_1qplo_35",Xe="_KeyButtonFirst_1qplo_53",Ye="_KeyButtonLast_1qplo_57",Ge="_PlusIcon_1qplo_62",Je="_TargetKey_1qplo_67",T={Container:Ue,KeysContainer:ze,KeyButton:Qe,selected:je,KeyButtonFirst:Xe,KeyButtonLast:Ye,PlusIcon:Ge,TargetKey:Je},We=R("<span>"),Ze=R("<div><div></div><div>"),et=R("<button>"),Q=["Ctrl","Alt","Shift","Meta"],tt=o=>{const m=oe(()=>o.value,(c,l)=>l.includes(c)),$=c=>c==="Meta"?n(ne,{icon:$e?"mac_command_key":"win_key"}):(()=>{const l=We();return y(l,c),l})(),k=c=>{if(o.value.includes(c)){const l=o.value.filter(p=>p!==c);if(!l.length){const p=[0,1,2,3].filter(e=>e!==Q.indexOf(c));l.push(Q[p[Math.floor(Math.random()*p.length)]])}o.onChange(l)}else o.onChange([...o.value,c])};return(()=>{const c=Ze(),l=c.firstChild,p=l.nextSibling;return y(l,()=>Q.map((e,a,i)=>(()=>{const v=et();return v.$$click=k,v.$$clickData=e,A(W,v,()=>!0),y(v,()=>$(e)),B(t=>{const u=T.KeyButton,h={[T.selected]:m(e),[T.KeyButtonFirst]:a===0,[T.KeyButtonLast]:a===i.length-1};return u!==t._v$5&&b(v,t._v$5=u),t._v$6=V(v,h,t._v$6),t},{_v$5:void 0,_v$6:void 0}),v})())),y(c,n(ne,{get class(){return T.PlusIcon},icon:"plus"}),p),y(p,()=>o.key),B(e=>{const a=T.Container,i={[o.class]:!!o.class},v=T.KeysContainer,t=T.TargetKey;return a!==e._v$&&b(c,e._v$=a),e._v$2=V(c,i,e._v$2),v!==e._v$3&&b(l,e._v$3=v),t!==e._v$4&&b(p,e._v$4=t),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),c})()};G(["click"]);const ie=R("<div>"),nt=R('<div><button class="btn-primary btn-color-primary btn-large">'),Y=(o,m)=>({appendTo:o.scrollable.container,duration:2500,from:"bottom",textElement:_(m),icon:"premium_lock",class:E.Hint,canCloseOnPeerChange:!1}),Tt=()=>{const{rootScope:o}=ee(),m=ye(),[$,{mutate:k}]=q(()=>{const e=o.managers.appStateManager.getState().then(a=>a.settings?.passcode?.enabled||!1);return m.collect(e),e}),[c,l]=D(!1),p=new Z;return p.add(o)("settings_updated",({key:e,value:a})=>{e===F("settings","passcode","enabled")&&k(a)}),J(()=>{p.removeAll()}),n(j,{get when(){return $.state==="ready"},get children(){return N(()=>!!($()||c()))()?n(st,{onDisable:()=>l(!0)}):n(ot,{})}})},ot=()=>{const[o,{AppPasscodeEnterPasswordTab:m,AppPasscodeLockTab:$}]=ae(),{enablePasscode:k}=se(),{setQuizHint:c}=ee(),l=()=>{o.slider.createTab(m).open({onSubmit:e=>{p(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},p=e=>{o.slider.createTab(m).open({onSubmit:async(a,i)=>{if(a!==e)throw{};await k(a),a="",i.slider.sliceTabsUntilTab($,i),i.close(),c(Y(o,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return n(X,{caption:"PasscodeLock.Notice",get children(){return[n(ce,{name:"UtyanPasscode"}),(()=>{const e=ie();return y(e,()=>_("PasscodeLock.Description")),B(()=>b(e,E.MainDescription)),e})(),n(U,{amount:"0.5rem"}),(()=>{const e=nt(),a=e.firstChild;return a.$$click=l,A(W,a,()=>!0),y(a,()=>_("PasscodeLock.TurnOn")),B(()=>b(e,Ce.AdditionalPadding)),e})(),n(U,{amount:"1rem"})]}})},st=o=>{const[m,{AppPasscodeEnterPasswordTab:$,AppPasscodeLockTab:k,AppPrivacyAndSecurityTab:c}]=ae(),{disablePasscode:l,changePasscode:p}=se(),{rootScope:e,setQuizHint:a,Row:i,useAppSettings:v,confirmationPopup:t}=ee(),[,u]=v(),h=[{value:0,label:()=>_("PasscodeLock.Disabled")},{value:1,label:()=>_("MinutesShort",[1])},{value:5,label:()=>_("MinutesShort",[5])},{value:10,label:()=>_("MinutesShort",[10])},{value:15,label:()=>_("MinutesShort",[15])},{value:30,label:()=>_("MinutesShort",[30])}],[d,r]=D(),[S,g]=D(!1),[P,{mutate:L}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.autoLockTimeoutMins||0)),[x,{mutate:I}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcutEnabled||!1)),[C,{mutate:O}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcut||[])),H=new Z;H.add(e)("settings_updated",({key:s,value:f})=>{s===F("settings","passcode","lockShortcut")?O(f):s===F("settings","passcode","lockShortcutEnabled")?I(f):s===F("settings","passcode","autoLockTimeoutMins")&&L(f)});function z(s){O(s),u("passcode","lockShortcut",s)}function w(s){I(s),u("passcode","lockShortcutEnabled",s)}function re(s){L(s),u("passcode","autoLockTimeoutMins",s)}J(()=>{H.removeAll()});const te=()=>!Pe&&C.state==="ready"&&x.state==="ready",le=()=>{m.slider.createTab($).open({onSubmit:s=>{ue(s),s=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},ue=s=>{m.slider.createTab($).open({onSubmit:async(f,K)=>{if(f!==s)throw{};await p(f),f="",K.slider.sliceTabsUntilTab(k,K),K.close(),a(Y(m,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},de=()=>{t({title:_("PasscodeLock.TurnOff.Title"),description:_("PasscodeLock.TurnOff.Description"),button:{text:_("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{o.onDisable(),await l(),m.close(),a(Y(m.slider.getTab(c),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},me=[N(()=>_("PasscodeLock.Description")),n(U,{amount:"1rem"}),N(()=>_("PasscodeLock.Notice"))];return[n(X,{get class(){return E.FirstSection},caption:me,get children(){return[n(ce,{name:"UtyanPasscode"}),n(U,{amount:"1.125rem"}),n(i,{clickable:de,get children(){return[n(i.Icon,{icon:"lockoff"}),n(i.Title,{get children(){return _("PasscodeLock.TurnOff.Title")}})]}}),n(i,{clickable:le,get children(){return[n(i.Icon,{icon:"key"}),n(i.Title,{get children(){return _("PasscodeLock.ChangePasscode")}})]}})]}}),n(X,{get caption(){return te()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[n(j,{get when(){return P.state==="ready"},get children(){return n(i,{ref:r,get class(){return E.Row},clickable:()=>{g(!0)},get children(){return[n(i.Title,{get children(){return _("PasscodeLock.AutoLock")}}),n(i.RightContent,{get children(){return n(Ae,{get value(){return P()},onClose:()=>g(!1),options:h,onChange:re,get isOpen(){return S()},get parent(){return d()}})}})]}})}}),n(j,{get when(){return te()},get children(){return[n(i,{get class(){return E.Row},clickable:s=>{w(!x())},get children(){return[n(i.Title,{get children(){return _("PasscodeLock.EnableLockShortcut")}}),n(i.RightContent,{get children(){return n(ke,{get checked(){return x()}})}})]}}),(()=>{const s=ie();return y(s,n(tt,{get class(){return E.ShortcutBuilderRowChild},get value(){return C()||[]},onChange:z,key:"L"})),B(f=>{const K=E.ShortcutBuilderRow,he={[E.collapsed]:!x()};return K!==f._v$&&b(s,f._v$=K),f._v$2=V(s,he,f._v$2),f},{_v$:void 0,_v$2:void 0}),s})()]}})]}})]};G(["click"]);export{Tt as default};
//# sourceMappingURL=mainTab-BMNBxKUN.js.map
