import{a7 as G,bP as oe,i as y,a4 as A,E as J,a2 as B,a as b,a6 as N,b as n,t as R,br as _e,aQ as pe,c as D,ah as ge,a8 as ve,a3 as W,a9 as V,bQ as fe,ab as Se,bs as Z,ai as be,bO as $e,dT as ee,af as q,dB as F,a5 as X,k as _,bq as Pe}from"./index-BADHTlgz.js";import{u as se}from"./actions-B15X-9kX.js";import{K as ye,I as ce,Q as Y}from"./appDialogsManager-DpDJuVgr.js";import{S as ke}from"./staticSwitch-Bci0SlkV.js";import{S as Q}from"./space-BvgVr93v.js";import{I as ne}from"./iconTsx-DoSczV7A.js";import{L as ae,c as Ce}from"./lottieAnimation-CQ3k3QEd.js";import{T as Le}from"./transition-DzrEwt1Z.js";import"./page-BmhISZ_F.js";import"./avatar-D1dEAMCU.js";import"./toast-DldnwnKq.js";import"./classNames-CN4lTu6a.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-anKMCwQ-.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./emailSetup-DiJaahi7.js";import"./fastBlur-Co-79rP4.js";import"./putPreloader-K30N2k1L.js";import"./countryInputField-32Ovn8C_.js";import"./scrollable2-D8ePU3YR.js";import"./chatBackground-nUzwn1Yy.js";import"./tracking-Ba_rtFbf.js";const we="_Container_1qplo_1",Te="_KeysContainer_1qplo_7",Ee="_KeyButton_1qplo_13",Be="_selected_1qplo_35",Re="_KeyButtonFirst_1qplo_53",Me="_KeyButtonLast_1qplo_57",Oe="_PlusIcon_1qplo_62",Ke="_TargetKey_1qplo_67",T={Container:we,KeysContainer:Te,KeyButton:Ee,selected:Be,KeyButtonFirst:Re,KeyButtonLast:Me,PlusIcon:Oe,TargetKey:Ke},xe=R("<span>"),Ae=R("<div><div></div><div>"),De=R("<button>"),z=["Ctrl","Alt","Shift","Meta"],Ie=o=>{const m=oe(()=>o.value,(c,l)=>l.includes(c)),$=c=>c==="Meta"?n(ne,{icon:_e?"mac_command_key":"win_key"}):(()=>{const l=xe();return y(l,c),l})(),k=c=>{if(o.value.includes(c)){const l=o.value.filter(p=>p!==c);if(!l.length){const p=[0,1,2,3].filter(e=>e!==z.indexOf(c));l.push(z[p[Math.floor(Math.random()*p.length)]])}o.onChange(l)}else o.onChange([...o.value,c])};return(()=>{const c=Ae(),l=c.firstChild,p=l.nextSibling;return y(l,()=>z.map((e,a,i)=>(()=>{const v=De();return v.$$click=k,v.$$clickData=e,A(J,v,()=>!0),y(v,()=>$(e)),B(t=>{const u=T.KeyButton,h={[T.selected]:m(e),[T.KeyButtonFirst]:a===0,[T.KeyButtonLast]:a===i.length-1};return u!==t._v$5&&b(v,t._v$5=u),t._v$6=N(v,h,t._v$6),t},{_v$5:void 0,_v$6:void 0}),v})())),y(c,n(ne,{get class(){return T.PlusIcon},icon:"plus"}),p),y(p,()=>o.key),B(e=>{const a=T.Container,i={[o.class]:!!o.class},v=T.KeysContainer,t=T.TargetKey;return a!==e._v$&&b(c,e._v$=a),e._v$2=N(c,i,e._v$2),v!==e._v$3&&b(l,e._v$3=v),t!==e._v$4&&b(p,e._v$4=t),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),c})()};G(["click"]);const He="_Overlay_1tf9c_36",qe="_Value_1tf9c_45",Fe="_Select_1tf9c_52",Ne="_SelectClip_1tf9c_62",Ve="_Option_1tf9c_70",Qe="_selected_1tf9c_82",M={Overlay:He,Value:qe,Select:Fe,SelectClip:Ne,Option:Ve,selected:Qe},Ue=R("<div>"),ze=R("<div><div><div>"),Xe=R("<div><span>"),Ye=o=>{let m;const $=pe(()=>o.options.find(t=>t.value===o.value)?.label),[k,c]=D();ge(()=>{c($()())});const l=oe(()=>o.value),[p,e]=D();ve(()=>{const t=new Z;t.add(window)("resize",()=>{o.isOpen&&o.onClose?.()}),W(()=>{t.removeAll()})});const a=(t,u)=>{const h=t.firstElementChild,d=h.querySelector(`.${M.selected}`);if(!d||!h)return;const r=m.getBoundingClientRect(),S=h.getBoundingClientRect(),g=d.getBoundingClientRect(),P=g.top-S.top,L=P+g.height,O=P+g.height/2,I=r.left+r.width/2;let C=r.top+r.height/2-O;const K=C+S.height>window.innerHeight||C<0;if(K&&(C+=Math.max(0,-C)+Math.min(0,window.innerHeight-(C+S.height))),h.style.setProperty("--x",""+I),h.style.setProperty("--y",""+C),h.animate({opacity:[0,1]},{duration:120}).finished.then(()=>{K&&u()}),K)return;const H=Math.max(P,S.height-L),U=w=>`polygon(0% ${P-w}px, 100% ${P-w}px, 100% ${L+w}px, 0px ${L+w}px)`;be(0,H,400,w=>{h.style.setProperty("clip-path",U(w))},{easing:$e,onEnd:()=>{h.style.removeProperty("clip-path"),u()}})},i=async(t,u)=>{await t.firstElementChild.animate({opacity:[1,0]},{duration:120}).finished,u()},v=t=>{const u=[o.parent,p()];if(!u.every(Boolean))return;u.every(d=>{const r=d.getBoundingClientRect();return Math.max(r.left-t.clientX,t.clientX-r.right,r.top-t.clientY,t.clientY-r.bottom)>100})&&o.onClose?.()};return[(()=>{const t=Ue(),u=m;return typeof u=="function"?A(u,t):m=t,y(t,k),B(()=>b(t,M.Value)),t})(),n(Se,{get children(){return n(Le,{appear:!0,onEnter:a,onExit:i,get children(){return V(()=>!!o.isOpen)()&&(()=>{const t=ze(),u=t.firstChild,h=u.firstChild;return t.$$mousemove=v,t.$$click=d=>{d.stopPropagation(),o.onClose?.()},A(e,h),y(h,n(fe,{get each(){return o.options},children:d=>(()=>{const r=Xe(),S=r.firstChild;return r.$$click=o.onChange,r.$$clickData=d.value,A(J,r,()=>!0),y(S,()=>d.label()),B(g=>{const P=M.Option,L={[M.selected]:l(d.value)};return P!==g._v$4&&b(r,g._v$4=P),g._v$5=N(r,L,g._v$5),g},{_v$4:void 0,_v$5:void 0}),r})()})),B(d=>{const r=M.Overlay,S=M.SelectClip,g=M.Select;return r!==d._v$&&b(t,d._v$=r),S!==d._v$2&&b(u,d._v$2=S),g!==d._v$3&&b(h,d._v$3=g),d},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}})}})]};G(["click","mousemove"]);const je="_MainDescription_1pm2o_36",Ge="_FirstSection_1pm2o_44",Je="_Row_1pm2o_49",We="_ShortcutBuilderRow_1pm2o_54",Ze="_ShortcutBuilderRowChild_1pm2o_60",et="_collapsed_1pm2o_63",tt="_Hint_1pm2o_68",E={MainDescription:je,FirstSection:Ge,Row:Je,ShortcutBuilderRow:We,ShortcutBuilderRowChild:Ze,collapsed:et,Hint:tt},ie=R("<div>"),nt=R('<div><button class="btn-primary btn-color-primary btn-large">'),j=(o,m)=>({appendTo:o.scrollable.container,duration:2500,from:"bottom",textElement:_(m),icon:"premium_lock",class:E.Hint,canCloseOnPeerChange:!1}),wt=()=>{const{rootScope:o}=ee(),m=ye(),[$,{mutate:k}]=q(()=>{const e=o.managers.appStateManager.getState().then(a=>a.settings?.passcode?.enabled||!1);return m.collect(e),e}),[c,l]=D(!1),p=new Z;return p.add(o)("settings_updated",({key:e,value:a})=>{e===F("settings","passcode","enabled")&&k(a)}),W(()=>{p.removeAll()}),n(X,{get when(){return $.state==="ready"},get children(){return V(()=>!!($()||c()))()?n(st,{onDisable:()=>l(!0)}):n(ot,{})}})},ot=()=>{const[o,{AppPasscodeEnterPasswordTab:m,AppPasscodeLockTab:$}]=ce(),{enablePasscode:k}=se(),{setQuizHint:c}=ee(),l=()=>{o.slider.createTab(m).open({onSubmit:e=>{p(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},p=e=>{o.slider.createTab(m).open({onSubmit:async(a,i)=>{if(a!==e)throw{};await k(a),a="",i.slider.sliceTabsUntilTab($,i),i.close(),c(j(o,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return n(Y,{caption:"PasscodeLock.Notice",get children(){return[n(ae,{name:"UtyanPasscode"}),(()=>{const e=ie();return y(e,()=>_("PasscodeLock.Description")),B(()=>b(e,E.MainDescription)),e})(),n(Q,{amount:"0.5rem"}),(()=>{const e=nt(),a=e.firstChild;return a.$$click=l,A(J,a,()=>!0),y(a,()=>_("PasscodeLock.TurnOn")),B(()=>b(e,Ce.AdditionalPadding)),e})(),n(Q,{amount:"1rem"})]}})},st=o=>{const[m,{AppPasscodeEnterPasswordTab:$,AppPasscodeLockTab:k,AppPrivacyAndSecurityTab:c}]=ce(),{disablePasscode:l,changePasscode:p}=se(),{rootScope:e,setQuizHint:a,Row:i,useAppSettings:v,confirmationPopup:t}=ee(),[,u]=v(),h=[{value:0,label:()=>_("PasscodeLock.Disabled")},{value:1,label:()=>_("MinutesShort",[1])},{value:5,label:()=>_("MinutesShort",[5])},{value:10,label:()=>_("MinutesShort",[10])},{value:15,label:()=>_("MinutesShort",[15])},{value:30,label:()=>_("MinutesShort",[30])}],[d,r]=D(),[S,g]=D(!1),[P,{mutate:L}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.autoLockTimeoutMins||0)),[O,{mutate:I}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcutEnabled||!1)),[C,{mutate:K}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcut||[])),H=new Z;H.add(e)("settings_updated",({key:s,value:f})=>{s===F("settings","passcode","lockShortcut")?K(f):s===F("settings","passcode","lockShortcutEnabled")?I(f):s===F("settings","passcode","autoLockTimeoutMins")&&L(f)});function U(s){K(s),u("passcode","lockShortcut",s)}function w(s){I(s),u("passcode","lockShortcutEnabled",s)}function re(s){L(s),u("passcode","autoLockTimeoutMins",s)}W(()=>{H.removeAll()});const te=()=>!Pe&&C.state==="ready"&&O.state==="ready",le=()=>{m.slider.createTab($).open({onSubmit:s=>{ue(s),s=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},ue=s=>{m.slider.createTab($).open({onSubmit:async(f,x)=>{if(f!==s)throw{};await p(f),f="",x.slider.sliceTabsUntilTab(k,x),x.close(),a(j(m,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},de=()=>{t({title:_("PasscodeLock.TurnOff.Title"),description:_("PasscodeLock.TurnOff.Description"),button:{text:_("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{o.onDisable(),await l(),m.close(),a(j(m.slider.getTab(c),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},me=[V(()=>_("PasscodeLock.Description")),n(Q,{amount:"1rem"}),V(()=>_("PasscodeLock.Notice"))];return[n(Y,{get class(){return E.FirstSection},caption:me,get children(){return[n(ae,{name:"UtyanPasscode"}),n(Q,{amount:"1.125rem"}),n(i,{clickable:de,get children(){return[n(i.Icon,{icon:"lockoff"}),n(i.Title,{get children(){return _("PasscodeLock.TurnOff.Title")}})]}}),n(i,{clickable:le,get children(){return[n(i.Icon,{icon:"key"}),n(i.Title,{get children(){return _("PasscodeLock.ChangePasscode")}})]}})]}}),n(Y,{get caption(){return te()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[n(X,{get when(){return P.state==="ready"},get children(){return n(i,{ref:r,get class(){return E.Row},clickable:()=>{g(!0)},get children(){return[n(i.Title,{get children(){return _("PasscodeLock.AutoLock")}}),n(i.RightContent,{get children(){return n(Ye,{get value(){return P()},onClose:()=>g(!1),options:h,onChange:re,get isOpen(){return S()},get parent(){return d()}})}})]}})}}),n(X,{get when(){return te()},get children(){return[n(i,{get class(){return E.Row},clickable:s=>{w(!O())},get children(){return[n(i.Title,{get children(){return _("PasscodeLock.EnableLockShortcut")}}),n(i.RightContent,{get children(){return n(ke,{get checked(){return O()}})}})]}}),(()=>{const s=ie();return y(s,n(Ie,{get class(){return E.ShortcutBuilderRowChild},get value(){return C()||[]},onChange:U,key:"L"})),B(f=>{const x=E.ShortcutBuilderRow,he={[E.collapsed]:!O()};return x!==f._v$&&b(s,f._v$=x),f._v$2=N(s,he,f._v$2),f},{_v$:void 0,_v$2:void 0}),s})()]}})]}})]};G(["click"]);export{wt as default};
//# sourceMappingURL=mainTab-MToodtyK.js.map
