import{dr as v,c as o,ae as M,af as _,b as e,a9 as k,h as y,a3 as D}from"./index-KPMK1N-c.js";import{T as R}from"./chatBackground-CshRx65S.js";import{H,R as c,J as h}from"./appDialogsManager-DZwNlL7T.js";import{u as T,S as A}from"./saveButton-4xRKs9lE.js";import{S as E}from"./starsRangeInput-Bd9_Rah5.js";import{u as L}from"./useStarsCommissionAndWithdrawalPrice-BxLGGaaE.js";import{S as x}from"./staticSwitch-Bwa0g8Ql.js";import"./classNames-C4Mf0-DM.js";import"./page-CWWtMUGW.js";import"./avatar-Cfg84CnU.js";import"./putPreloader-DhRaCtmJ.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./iconTsx-DY1Le2iB.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-BK8hQSGD.js";import"./codeInputField-CXZjk-lA.js";import"./useAppConfig-CM6aGACg.js";const ee=()=>{const[a]=H(),{apiManagerProxy:p,rootScope:u}=v(),n=a.payload.chat;if(!n)return[];const s=n.linked_monoforum_id?p.getChat(n.linked_monoforum_id):void 0,l=!!s,d=s?._==="channel"&&+s.send_paid_messages_stars||0,[t,f]=o(l),[r,S]=o(d),[m,C]=o(!1),{commissionPercents:w,willReceiveDollars:P}=L(r),b=M(C,200);_(()=>{b(l!==t()||t()&&d!==r())});let i=!1;async function g(){if(!i){i=!0;try{await u.managers.appChatsManager.updateChannelPaidMessagesPrice(n.id,t()?r():0,t()),a.close()}finally{i=!1}}}return a.isConfirmationNeededOnClose=T({saveAllSettings:g,hasChanges:m,descriptionLangKey:"UnsavedChangesDescription.Channel"}),[e(k,{get mount(){return a.header},get children(){return e(A,{get hasChanges(){return m()},onClick:()=>void g()})}}),e(h,{caption:"ChannelDirectMessages.Settings.SwitchLabelCaption",get children(){return e(c,{clickable:()=>{f(!t())},get children(){return[e(c.Title,{get children(){return y("ChannelDirectMessages.Settings.SwitchLabel")}}),e(c.RightContent,{get children(){return e(x,{get checked(){return t()}})}})]}})}}),e(R,{name:"fade",get children(){return e(D,{get when(){return t()},get children(){return e(h,{name:"PaidMessages.SetPrice",class:"overflow-hidden",caption:"PaidMessages.SetPriceChannelDescription",get captionArgs(){return[w(),P()]},get children(){return e(E,{get value(){return r()},onChange:S,startFromZero:!0})}})}})}})]};export{ee as default};
//# sourceMappingURL=channelDirectMessages-CQ5iCZH_.js.map
