import{a9 as j,c4 as me,i as S,a6 as G,E as V,a5 as L,a as P,a8 as B,b as t,t as v,bw as pe,dN as I,af as y,c as E,du as $,a7 as J,ab as R,a2 as M,k as i,bx as W,bv as ge}from"./index-B7WIMVLo.js";import{u as X}from"./actions-Cbssnv5L.js";import{S as Y}from"./settingsTabLottieAnimation-cmIIXy4V.js";import{a6 as he,a4 as Z,aa as A,ab as _e}from"./appDialogsManager-DWM6BLp0.js";import{S as C}from"./space-Bz_xbP0m.js";import{S as Se}from"./staticSwitch-o-LkR90f.js";import{c as be}from"./common.module-D7GySBIo.js";import{I as Q}from"./iconTsx-Dm7uuor6.js";import"./classNames-CN4lTu6a.js";import"./emailSetup-0NlYvq0Q.js";import"./transition-4sVVeuD9.js";import"./page-CFQq45dV.js";import"./putPreloader-BhMVPekh.js";import"./avatar-CyLVJWYN.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-N7gVnHGH.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-CTXjJKhu.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-CGoQGdNE.js";import"./scrollable2-B9qrN0bL.js";import"./chatBackground-BOw4waSL.js";import"./tracking-CFAwSx7m.js";const Pe="_MainDescription_1pm2o_36",fe="_FirstSection_1pm2o_44",ke="_Row_1pm2o_49",Le="_ShortcutBuilderRow_1pm2o_54",ve="_ShortcutBuilderRowChild_1pm2o_60",Te="_collapsed_1pm2o_63",ye="_Hint_1pm2o_68",_={MainDescription:Pe,FirstSection:fe,Row:ke,ShortcutBuilderRow:Le,ShortcutBuilderRowChild:ve,collapsed:Te,Hint:ye},$e="_Container_1qplo_1",Ce="_KeysContainer_1qplo_7",we="_KeyButton_1qplo_13",Ke="_selected_1qplo_35",Be="_KeyButtonFirst_1qplo_53",Ee="_KeyButtonLast_1qplo_57",Re="_PlusIcon_1qplo_62",Me="_TargetKey_1qplo_67",h={Container:$e,KeysContainer:Ce,KeyButton:we,selected:Ke,KeyButtonFirst:Be,KeyButtonLast:Ee,PlusIcon:Re,TargetKey:Me},Ae=v("<span>"),De=v("<div><div></div><div>"),Ie=v("<button>"),K=["Ctrl","Alt","Shift","Meta"],xe=s=>{const u=me(()=>s.value,(n,r)=>r.includes(n)),g=n=>n==="Meta"?t(Q,{icon:pe?"mac_command_key":"win_key"}):(()=>{const r=Ae();return S(r,n),r})(),b=n=>{if(s.value.includes(n)){const r=s.value.filter(l=>l!==n);if(!r.length){const l=[0,1,2,3].filter(e=>e!==K.indexOf(n));r.push(K[l[Math.floor(Math.random()*l.length)]])}s.onChange(r)}else s.onChange([...s.value,n])};return(()=>{const n=De(),r=n.firstChild,l=r.nextSibling;return S(r,()=>K.map((e,a,c)=>(()=>{const m=Ie();return m.$$click=b,m.$$clickData=e,G(V,m,()=>!0),S(m,()=>g(e)),L(p=>{const f=h.KeyButton,w={[h.selected]:u(e),[h.KeyButtonFirst]:a===0,[h.KeyButtonLast]:a===c.length-1};return f!==p._v$5&&P(m,p._v$5=f),p._v$6=B(m,w,p._v$6),p},{_v$5:void 0,_v$6:void 0}),m})())),S(n,t(Q,{get class(){return h.PlusIcon},icon:"plus"}),l),S(l,()=>s.key),L(e=>{const a=h.Container,c={[s.class]:!!s.class},m=h.KeysContainer,p=h.TargetKey;return a!==e._v$&&P(n,e._v$=a),e._v$2=B(n,c,e._v$2),m!==e._v$3&&P(r,e._v$3=m),p!==e._v$4&&P(l,e._v$4=p),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),n})()};j(["click"]);const ee=v("<div>"),He=v('<div><button class="btn-primary btn-color-primary btn-large">'),D=(s,u)=>({appendTo:s.scrollable.container,duration:2500,from:"bottom",textElement:i(u),icon:"premium_lock",class:_.Hint,canCloseOnPeerChange:!1}),ut=()=>{const{rootScope:s}=I(),u=he(),[g,{mutate:b}]=y(()=>{const e=s.managers.appStateManager.getState().then(a=>a.settings?.passcode?.enabled||!1);return u.collect(e),e}),[n,r]=E(!1),l=new W;return l.add(s)("settings_updated",({key:e,value:a})=>{e===$("settings","passcode","enabled")&&b(a)}),J(()=>{l.removeAll()}),t(M,{get when(){return g.state==="ready"},get children(){return R(()=>!!(g()||n()))()?t(qe,{onDisable:()=>r(!0)}):t(Oe,{})}})},Oe=()=>{const[s,{AppPasscodeEnterPasswordTab:u,AppPasscodeLockTab:g}]=Z(),{enablePasscode:b}=X(),{setQuizHint:n}=I(),r=()=>{s.slider.createTab(u).open({onSubmit:e=>{l(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},l=e=>{s.slider.createTab(u).open({onSubmit:async(a,c)=>{if(a!==e)throw{};await b(a),a="",c.slider.sliceTabsUntilTab(g,c),c.close(),n(D(s,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return t(A,{caption:"PasscodeLock.Notice",get children(){return[t(Y,{name:"UtyanPasscode"}),(()=>{const e=ee();return S(e,()=>i("PasscodeLock.Description")),L(()=>P(e,_.MainDescription)),e})(),t(C,{amount:"0.5rem"}),(()=>{const e=He(),a=e.firstChild;return a.$$click=r,G(V,a,()=>!0),S(a,()=>i("PasscodeLock.TurnOn")),L(()=>P(e,be.AdditionalPadding)),e})(),t(C,{amount:"1rem"})]}})},qe=s=>{const[u,{AppPasscodeEnterPasswordTab:g,AppPasscodeLockTab:b,AppPrivacyAndSecurityTab:n}]=Z(),{disablePasscode:r,changePasscode:l}=X(),{rootScope:e,setQuizHint:a,Row:c,useAppSettings:m,confirmationPopup:p}=I(),[,f]=m(),w=[{value:0,label:()=>i("PasscodeLock.Disabled")},{value:1,label:()=>i("MinutesShort",[1])},{value:5,label:()=>i("MinutesShort",[5])},{value:10,label:()=>i("MinutesShort",[10])},{value:15,label:()=>i("MinutesShort",[15])},{value:30,label:()=>i("MinutesShort",[30])}],[te,oe]=E(),[ne,x]=E(!1),[H,{mutate:O}]=y(()=>e.managers.appStateManager.getState().then(o=>o?.settings?.passcode?.autoLockTimeoutMins||0)),[T,{mutate:q}]=y(()=>e.managers.appStateManager.getState().then(o=>o?.settings?.passcode?.lockShortcutEnabled||!1)),[F,{mutate:N}]=y(()=>e.managers.appStateManager.getState().then(o=>o?.settings?.passcode?.lockShortcut||[])),U=new W;U.add(e)("settings_updated",({key:o,value:d})=>{o===$("settings","passcode","lockShortcut")?N(d):o===$("settings","passcode","lockShortcutEnabled")?q(d):o===$("settings","passcode","autoLockTimeoutMins")&&O(d)});function se(o){N(o),f("passcode","lockShortcut",o)}function ae(o){q(o),f("passcode","lockShortcutEnabled",o)}function ce(o){O(o),f("passcode","autoLockTimeoutMins",o)}J(()=>{U.removeAll()});const z=()=>!ge&&F.state==="ready"&&T.state==="ready",re=()=>{u.slider.createTab(g).open({onSubmit:o=>{ie(o),o=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},ie=o=>{u.slider.createTab(g).open({onSubmit:async(d,k)=>{if(d!==o)throw{};await l(d),d="",k.slider.sliceTabsUntilTab(b,k),k.close(),a(D(u,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},le=()=>{p({title:i("PasscodeLock.TurnOff.Title"),description:i("PasscodeLock.TurnOff.Description"),button:{text:i("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{s.onDisable(),await r(),u.close(),a(D(u.slider.getTab(n),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},ue=[R(()=>i("PasscodeLock.Description")),t(C,{amount:"1rem"}),R(()=>i("PasscodeLock.Notice"))];return[t(A,{get class(){return _.FirstSection},caption:ue,get children(){return[t(Y,{name:"UtyanPasscode"}),t(C,{amount:"1.125rem"}),t(c,{clickable:le,get children(){return[t(c.Icon,{icon:"lockoff"}),t(c.Title,{get children(){return i("PasscodeLock.TurnOff.Title")}})]}}),t(c,{clickable:re,get children(){return[t(c.Icon,{icon:"key"}),t(c.Title,{get children(){return i("PasscodeLock.ChangePasscode")}})]}})]}}),t(A,{get caption(){return z()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[t(M,{get when(){return H.state==="ready"},get children(){return t(c,{ref:oe,get class(){return _.Row},clickable:()=>{x(!0)},get children(){return[t(c.Title,{get children(){return i("PasscodeLock.AutoLock")}}),t(c.RightContent,{get children(){return t(_e,{get value(){return H()},onClose:()=>x(!1),options:w,onChange:ce,get isOpen(){return ne()},get parent(){return te()}})}})]}})}}),t(M,{get when(){return z()},get children(){return[t(c,{get class(){return _.Row},clickable:o=>{ae(!T())},get children(){return[t(c.Title,{get children(){return i("PasscodeLock.EnableLockShortcut")}}),t(c.RightContent,{get children(){return t(Se,{get checked(){return T()}})}})]}}),(()=>{const o=ee();return S(o,t(xe,{get class(){return _.ShortcutBuilderRowChild},get value(){return F()||[]},onChange:se,key:"L"})),L(d=>{const k=_.ShortcutBuilderRow,de={[_.collapsed]:!T()};return k!==d._v$&&P(o,d._v$=k),d._v$2=B(o,de,d._v$2),d},{_v$:void 0,_v$2:void 0}),o})()]}})]}})]};j(["click"]);export{ut as default};
//# sourceMappingURL=mainTab-q22xvRFr.js.map
