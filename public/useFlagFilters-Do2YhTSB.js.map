{"version":3,"file":"useFlagFilters-Do2YhTSB.js","sources":["../src/helpers/solid/createSetSignal.ts","../src/components/sidebarRight/tabs/adminRecentActions/constants.ts","../src/components/sidebarRight/tabs/adminRecentActions/filters/expandableFilterGroup.tsx","../src/components/sidebarRight/tabs/adminRecentActions/filters/flagFilters.tsx","../src/components/sidebarRight/tabs/adminRecentActions/filters/config.ts","../src/components/sidebarRight/tabs/adminRecentActions/filters/useFlagFilters.ts"],"sourcesContent":["import {createSignal} from 'solid-js';\n\nexport const createSetSignal = <T, >(initialValue = new Set<T>()) => createSignal(initialValue, {\n  equals: (prev, next) => prev.size === next.size && [...prev].every(id => next.has(id))\n});\n","export const limitPeerTitleSymbols = 32;\n","import {Accessor, createMemo, createSignal, For, JSX, Show} from 'solid-js';\nimport {keepMe} from '@helpers/keepMe';\nimport CheckboxFieldTsx from '@components/checkboxFieldTsx';\nimport {IconTsx} from '@components/iconTsx';\nimport ripple from '@components/ripple';\nimport {HeightTransition} from '@components/sidebarRight/tabs/adminRecentActions/heightTransition';\nimport styles from '@components/sidebarRight/tabs/adminRecentActions/filters/expandableFilterGroup.module.scss';\n\nkeepMe(ripple);\n\n\ntype Item = {\n  checked: Accessor<boolean>;\n  label: JSX.Element;\n  onClick: () => void;\n};\n\ntype ExpandableFilterGroupProps = {\n  mainLabel: JSX.Element;\n  onMainCheckboxClick: () => void;\n  checkedCount: number;\n  items: Item[];\n};\n\nexport const ExpandableFilterGroup = (props: ExpandableFilterGroupProps) => {\n  const [isExpanded, setIsExpanded] = createSignal(false);\n\n  const isMainChecked = createMemo(() => props.items.every(item => item.checked()));\n\n  const onMainCheckboxClick = (e: MouseEvent) => {\n    e.stopPropagation();\n    props.onMainCheckboxClick();\n  };\n\n  return (\n    <>\n      <div class={`${styles.Row} hover-effect rp`} use:ripple onClick={() => setIsExpanded(!isExpanded())}>\n        <div class={styles.RowCheckboxWrapper} onClick={onMainCheckboxClick}>\n          <CheckboxFieldTsx class={styles.RowCheckbox} checked={isMainChecked()} />\n          <div class={styles.RowCheckboxClickArea} />\n        </div>\n        <div class={styles.RowSeparator} />\n        <div class={styles.RowLabel}>\n          {props.mainLabel}\n          <div class={styles.Count}>\n            {props.checkedCount}/{props.items.length}\n            <IconTsx class={styles.CountArrow} classList={{[styles.toggled]: isExpanded()}} icon='arrowhead' />\n          </div>\n        </div>\n      </div>\n\n      <HeightTransition>\n        <Show when={isExpanded()}>\n          <div class={styles.ExpandedItems}>\n            <For each={props.items}>\n              {item => (\n                <div class={`${styles.Row} hover-effect rp`} use:ripple onClick={item.onClick}>\n                  <div class={styles.RowOffset} />\n                  <div class={styles.RowCheckboxWrapper}>\n                    <CheckboxFieldTsx class={styles.RowCheckbox} checked={item.checked()} />\n                  </div>\n                  <div class={styles.RowLabel}>\n                    {item.label}\n                  </div>\n                </div>\n              )}\n            </For>\n          </div>\n        </Show>\n      </HeightTransition>\n    </>\n  )\n};\n","import {For, Show} from 'solid-js';\nimport {I18nTsx} from '@helpers/solid/i18n';\nimport {useHotReloadGuard} from '@lib/solidjs/hotReloadGuard';\nimport Button from '@components/buttonTsx';\nimport Scrollable from '@components/scrollable2';\nimport SimpleFormField from '@components/simpleFormField';\nimport Space from '@components/space';\nimport {limitPeerTitleSymbols} from '@components/sidebarRight/tabs/adminRecentActions/constants';\nimport {ExpandableFilterGroup} from '@components/sidebarRight/tabs/adminRecentActions/filters/expandableFilterGroup';\nimport styles from '@components/sidebarRight/tabs/adminRecentActions/filters/flagFilters.module.scss';\nimport {CommittedFilters} from '@components/sidebarRight/tabs/adminRecentActions/filters/types';\nimport {useFlagFilters} from '@components/sidebarRight/tabs/adminRecentActions/filters/useFlagFilters';\n\n\nexport const FlagFilters = (props: {\n  hasSearch?: boolean;\n\n  inputRef?: (input: HTMLInputElement) => void;\n\n  onCommit: (committedFilters: CommittedFilters) => void;\n  onReset: () => void;\n\n  filtersControls: ReturnType<typeof useFlagFilters>;\n}) => {\n  const {PeerTitleTsx} = useHotReloadGuard();\n\n  const filtersControls = () => props.filtersControls;\n\n  const onCommit = () => {\n    props.onCommit(filtersControls().getCommittedReady());\n  };\n\n  const onSubmit = (e: Event) => {\n    e.preventDefault();\n    onCommit();\n  };\n\n  return <>\n    <Show when={props.hasSearch}>\n      <Space amount='2px' />\n\n      <form class={styles.Search} onSubmit={onSubmit}>\n        <SimpleFormField value={filtersControls().search()} onChange={filtersControls().onSearchChange}>\n          <SimpleFormField.Label><I18nTsx key='Search' /></SimpleFormField.Label>\n          <SimpleFormField.Input ref={/* @once */props.inputRef} />\n        </SimpleFormField>\n      </form>\n\n      <Space amount='1rem' />\n    </Show>\n\n    <Scrollable class={styles.Scrollable} withBorders='both' relative>\n      <div class={styles.SectionTitle}>\n        <I18nTsx key='AdminRecentActionsFilters.ByType' />\n      </div>\n      <For each={filtersControls().filterGroupsConfig()}>\n        {group => (\n          <ExpandableFilterGroup\n            mainLabel={<I18nTsx key={group.i18nKey} />}\n            checkedCount={filtersControls().flagGroupCheckCount(group)}\n            onMainCheckboxClick={() => filtersControls().onFlagGroupClick(group)}\n            items={group.items.map(item => ({\n              checked: () => filtersControls().isFlagSelected(item.pFlag),\n              label: <I18nTsx key={item.i18nKey} />,\n              onClick: () => filtersControls().onFlagClick(item.pFlag)\n            }))}\n          />\n        )}\n      </For>\n      <Space amount='1rem' />\n      <div class={styles.SectionTitle}>\n        <I18nTsx key='AdminRecentActionsFilters.ByAdmin' />\n      </div>\n      <Show when={filtersControls().adminIds().length}>\n        <ExpandableFilterGroup\n          mainLabel={<I18nTsx key='AdminRecentActionsFilters.ShowAllAdminActions' />}\n          checkedCount={filtersControls().selectedAdminIds().size}\n          onMainCheckboxClick={filtersControls().onAllAdminsClick}\n          items={filtersControls().adminIds().map(userId => ({\n            checked: () => filtersControls().isAdminIdSelected(userId.toPeerId()),\n            label: <PeerTitleTsx peerId={userId.toPeerId()} limitSymbols={limitPeerTitleSymbols} />,\n            onClick: () => filtersControls().onAdminClick(userId.toPeerId())\n          }))}\n        />\n      </Show>\n      <Show when={filtersControls().notShowingAdmins()}>\n        <div class={styles.SectionTitle}>\n          <I18nTsx key='AdminRecentActionsFilters.NotShowingAdmins' args={[filtersControls().notShowingAdmins() + '']} />\n        </div>\n      </Show>\n\n    </Scrollable>\n\n    <Space amount='1rem' />\n\n    <div class={styles.Footer}>\n      <Button class={styles.Button} primary onClick={props.onReset}>\n        <I18nTsx key='AdminRecentActionsFilters.ResetFilters' />\n      </Button>\n      <Button class={styles.Button} primaryFilled onClick={onCommit}>\n        <I18nTsx key='AdminRecentActionsFilters.ApplyFilters' />\n      </Button>\n    </div>\n  </>\n};\n","import {ChannelAdminLogEventsFilter} from '@layer';\nimport {LangPackKey} from '@lib/langPack';\n\n\nexport type FilterGroupConfigItem = {\n  i18nKey: LangPackKey;\n  items: {\n    pFlag: keyof ChannelAdminLogEventsFilter['pFlags'];\n    i18nKey: LangPackKey;\n  }[];\n};\n\nexport type GetFilterGroupsConfigArgs = {\n  isBroadcast?: boolean;\n};\n\nexport function getFilterGroupsConfig({isBroadcast}: GetFilterGroupsConfigArgs): FilterGroupConfigItem[] {\n  return [\n    {\n      i18nKey: 'AdminRecentActionsFilters.MembersAndAdmins',\n      items: [\n        {\n          pFlag: 'join',\n          i18nKey: 'AdminRecentActionsFilters.NewMembers'\n        },\n        {\n          pFlag: 'leave',\n          i18nKey: isBroadcast ? 'AdminRecentActionsFilters.MembersLeftChannel' : 'AdminRecentActionsFilters.MembersLeftGroup'\n        },\n        {\n          pFlag: 'invite',\n          i18nKey: 'AdminRecentActionsFilters.InvitedMembers'\n        },\n        {\n          pFlag: 'ban',\n          i18nKey: 'AdminRecentActionsFilters.BannedMembers'\n        },\n        {\n          pFlag: 'unban',\n          i18nKey: 'AdminRecentActionsFilters.UnbannedMembers'\n        },\n        {\n          pFlag: 'kick',\n          i18nKey: 'AdminRecentActionsFilters.RemovedMembers'\n        },\n        {\n          pFlag: 'unkick',\n          i18nKey: 'AdminRecentActionsFilters.UnkickedMembers'\n        },\n        {\n          pFlag: 'promote',\n          i18nKey: 'AdminRecentActionsFilters.NewAdminRights'\n        },\n        {\n          pFlag: 'demote',\n          i18nKey: 'AdminRecentActionsFilters.RemovedAdminRights'\n        }\n      ]\n    },\n\n    {\n      i18nKey: isBroadcast ? 'AdminRecentActionsFilters.ChannelSettings' : 'AdminRecentActionsFilters.GroupSettings',\n      items: [\n        {\n          pFlag: 'info',\n          i18nKey: isBroadcast ? 'AdminRecentActionsFilters.ChannelInfo' : 'AdminRecentActionsFilters.GroupInfo'\n        },\n        {\n          pFlag: 'settings',\n          i18nKey: isBroadcast ? 'AdminRecentActionsFilters.ChannelSettings' : 'AdminRecentActionsFilters.GroupSettings'\n        },\n        {\n          pFlag: 'invites',\n          i18nKey: 'AdminRecentActionsFilters.InviteLinks'\n        },\n        {\n          pFlag: 'group_call',\n          i18nKey: 'AdminRecentActionsFilters.GroupCall'\n        },\n        {\n          pFlag: 'forums',\n          i18nKey: 'AdminRecentActionsFilters.Forums'\n        },\n        {\n          pFlag: 'sub_extend',\n          i18nKey: 'AdminRecentActionsFilters.SubscriptionExtensions'\n        }\n      ]\n    },\n\n    {\n      i18nKey: 'AdminRecentActionsFilters.Messages',\n      items: [\n        {\n          pFlag: 'send',\n          i18nKey: 'AdminRecentActionsFilters.SentMessages'\n        },\n        {\n          pFlag: 'delete',\n          i18nKey: 'AdminRecentActionsFilters.DeletedMessages'\n        },\n        {\n          pFlag: 'edit',\n          i18nKey: 'AdminRecentActionsFilters.EditedMessages'\n        },\n        {\n          pFlag: 'pinned',\n          i18nKey: 'AdminRecentActionsFilters.PinnedMessages'\n        }\n      ]\n    }\n  ];\n}\n","import {Accessor, createMemo, createResource, createSelector, createSignal} from 'solid-js';\nimport {createStore, reconcile} from 'solid-js/store';\nimport {createSetSignal} from '@helpers/solid/createSetSignal';\nimport {useHotReloadGuard} from '@lib/solidjs/hotReloadGuard';\nimport {FilterGroupConfigItem, getFilterGroupsConfig} from '@components/sidebarRight/tabs/adminRecentActions/filters/config';\nimport {CommittedFilters} from '@components/sidebarRight/tabs/adminRecentActions/filters/types';\n\n\ntype UseFlagFiltersArgs = {\n  channelId: Accessor<ChatId>;\n  isBroadcast: Accessor<boolean>;\n};\n\nconst adminsFetchLimit = 40; // Have more admins? I'm really sorry :)\n\nexport function useFlagFilters({channelId, isBroadcast}: UseFlagFiltersArgs) {\n  const {rootScope} = useHotReloadGuard();\n\n  const filterGroupsConfig = createMemo(() => getFilterGroupsConfig({isBroadcast: isBroadcast()}));\n\n  const getAllFlagKeys = () => filterGroupsConfig().flatMap(group => group.items.map(item => item.pFlag));\n\n  const getInitialFlagsStore = () => {\n    const keys = getAllFlagKeys();\n    return Object.fromEntries(keys.map(key => [key, true]));\n  };\n\n  const [adminsResource] = createResource(channelId, (id) =>\n    rootScope.managers.appProfileManager.getChannelParticipants({\n      id,\n      filter: {_: 'channelParticipantsAdmins'},\n      offset: 0,\n      limit: adminsFetchLimit\n    })\n  );\n\n  const [search, setSearch] = createSignal('');\n  const [selectedFlagsStore, setSelectedFlagsStore] = createStore(getInitialFlagsStore());\n  const [selectedAdminIds, setSelectedAdminIds] = createSetSignal<PeerId>();\n\n  const adminIds = createMemo(() =>\n    // [...Array.from({length: 20}).flatMap(() => [...adminsResource()?.participants || []])]\n    adminsResource()?.participants\n    ?.filter(item => 'user_id' in item)\n    .map(item => item.user_id) || []\n  );\n\n  const notShowingAdmins = createMemo(() => {\n    if(!adminsResource()) return null;\n\n    const length = adminIds().length;\n    const count = adminsResource().count || length;\n    return count - length > 0 ? count - length : null;\n  });\n\n  const allAdminPeerIds = createMemo(() =>\n    adminIds().map(id => id.toPeerId())\n  );\n\n  const isAdminIdSelected = createSelector(\n    selectedAdminIds,\n    (id: PeerId, ids) => ids.has(id.toPeerId())\n  );\n\n  const isFlagSelected = (flag: string) => selectedFlagsStore[flag];\n\n  const flagGroupCheckCount = (group: FilterGroupConfigItem) => {\n    return group.items.filter(item => selectedFlagsStore[item.pFlag]).length;\n  };\n\n  const onFlagClick = (flag: string) => {\n    setSelectedFlagsStore(flag, (prev) => !prev);\n  };\n\n  const onFlagGroupClick = (group: FilterGroupConfigItem) => {\n    const areAllChecked = group.items.every(item => selectedFlagsStore[item.pFlag]);\n\n    setSelectedFlagsStore(group.items.map(item => item.pFlag), !areAllChecked);\n  };\n\n  const onAllAdminsClick = () => {\n    const areAllSelected = selectedAdminIds().size === allAdminPeerIds().length;\n    setSelectedAdminIds(areAllSelected ? new Set<number> : new Set(allAdminPeerIds()));\n  };\n\n  const onAdminClick = (id: PeerId) => {\n    const newIds = new Set(selectedAdminIds());\n    if(newIds.has(id.toPeerId())) {\n      newIds.delete(id.toPeerId());\n    } else {\n      newIds.add(id.toPeerId());\n    }\n    setSelectedAdminIds(newIds);\n  };\n\n  const getCommittedReady = () => {\n    const activeFlagEntries = Object.entries(selectedFlagsStore).filter(([, value]) => value);\n\n    const flags = activeFlagEntries.length && activeFlagEntries.length < getAllFlagKeys().length ?\n      Object.fromEntries(activeFlagEntries) :\n      undefined;\n\n    const admins = selectedAdminIds().size < allAdminPeerIds().length ?\n      Array.from(selectedAdminIds()) :\n      undefined;\n\n    if(!search() && !flags && !admins) return null;\n\n    return {\n      search: search() || undefined,\n      flags,\n      admins\n    };\n  };\n\n  const setFromCommittedFilters = (committedFilters?: CommittedFilters | null) => {\n    setSearch(committedFilters?.search || '');\n    setSelectedFlagsStore(reconcile(committedFilters?.flags || getInitialFlagsStore()));\n    setSelectedAdminIds(new Set(committedFilters?.admins || allAdminPeerIds()));\n  };\n\n  return {\n    filterGroupsConfig,\n\n    adminIds,\n    notShowingAdmins,\n\n    setFromCommittedFilters,\n    getCommittedReady,\n\n    search,\n    selectedAdminIds,\n\n    onSearchChange: setSearch,\n    onFlagClick,\n    onFlagGroupClick,\n    onAllAdminsClick,\n    onAdminClick,\n\n    isFlagSelected,\n    isAdminIdSelected,\n    flagGroupCheckCount\n  };\n}\n"],"names":["createSetSignal","initialValue","createSignal","prev","next","id","limitPeerTitleSymbols","ExpandableFilterGroup","props","isExpanded","setIsExpanded","isMainChecked","createMemo","items","every","item","checked","onMainCheckboxClick","e","stopPropagation","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$5","_el$6","_el$7","$$click","_$use","ripple","_$insert","_$createComponent","CheckboxFieldTsx","styles","RowCheckbox","mainLabel","checkedCount","length","IconTsx","CountArrow","classList","toggled","icon","_$effect","_p$","_v$","Row","_v$2","RowCheckboxWrapper","_v$3","RowCheckboxClickArea","_v$4","RowSeparator","_v$5","RowLabel","_v$6","Count","_$className","undefined","HeightTransition","children","Show","when","_el$8","_tmpl$2","For","each","_el$9","_tmpl$3","_el$10","_el$11","_el$12","_$addEventListener","onClick","label","_v$7","_v$8","RowOffset","_v$9","_v$10","ExpandedItems","_$delegateEvents","FlagFilters","PeerTitleTsx","useHotReloadGuard","filtersControls","onCommit","getCommittedReady","onSubmit","preventDefault","hasSearch","Space","amount","addEventListener","SimpleFormField","value","search","onChange","onSearchChange","Label","I18nTsx","key","Input","ref","r$","_ref$","inputRef","Search","Scrollable","withBorders","relative","SectionTitle","filterGroupsConfig","group","i18nKey","flagGroupCheckCount","onFlagGroupClick","map","isFlagSelected","pFlag","onFlagClick","adminIds","selectedAdminIds","size","onAllAdminsClick","userId","isAdminIdSelected","toPeerId","peerId","limitSymbols","onAdminClick","notShowingAdmins","args","Button","primary","onReset","primaryFilled","Footer","getFilterGroupsConfig","isBroadcast","adminsFetchLimit","useFlagFilters","channelId","rootScope","getAllFlagKeys","getInitialFlagsStore","keys","adminsResource","createResource","setSearch","selectedFlagsStore","setSelectedFlagsStore","createStore","setSelectedAdminIds","count","allAdminPeerIds","createSelector","ids","committedFilters","reconcile","activeFlagEntries","flags","admins","flag","areAllChecked","areAllSelected","newIds"],"mappings":"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"}