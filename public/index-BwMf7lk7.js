import{a9 as Z,c as T,aQ as ee,i as D,a5 as I,a as m,ah as x,ai as te,aV as ne,a7 as W,aj as oe,a6 as j,b as w,bU as le,t as M,bV as ie,dN as se,K as re}from"./index-B7WIMVLo.js";import{s as ae,I as ce}from"./emailSetup-0NlYvq0Q.js";import{v as ue,a2 as de,d as me,a3 as pe}from"./appDialogsManager-DWM6BLp0.js";import{s as fe}from"./useSwipe-BngiT1Ja.js";import{u as ve}from"./useIsCleaned-DiqUhPa5.js";import{u as _e}from"./useScrollTop-DtbdXgTM.js";import"./classNames-CN4lTu6a.js";import"./iconTsx-Dm7uuor6.js";import"./transition-4sVVeuD9.js";import"./page-CFQq45dV.js";import"./putPreloader-BhMVPekh.js";import"./avatar-CyLVJWYN.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-N7gVnHGH.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-CTXjJKhu.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-CGoQGdNE.js";import"./scrollable2-B9qrN0bL.js";import"./chatBackground-BOw4waSL.js";import"./tracking-CFAwSx7m.js";const ge="_Container_88x8u_1",he="_Scrollable_88x8u_5",$e="_Option_88x8u_15",be="_hidden_88x8u_23",Se="_EmptyOption_88x8u_27",Ce="_Divider_88x8u_31",ye="_upper_88x8u_40",Te="_lower_88x8u_43",a={Container:ge,Scrollable:he,Option:$e,hidden:be,EmptyOption:Se,Divider:Ce,upper:ye,lower:Te},xe=M("<div>"),De=M("<div><div><div></div><div></div><div></div><div></div></div><div></div><div>"),Oe=250,Ee=5,Ie=320,E=40,we=10,Me=.1,Pe=p=>{const[s,g]=T(),[b,S]=T(!1),[u,d]=T(!1),[Q,P]=T(!1),A=_e(s),k=ue(s),U=ve(),C=ee(()=>p.options.map((e,n)=>({option:e,element:(()=>{const o=xe();return o.$$click=Y,o.$$clickData=n,D(o,()=>e.label),I(()=>m(o,a.Option)),o})()})));x(te(C,()=>{const e=s(),n=C();if(!e||!n.length)return;const o=Math.max(0,n.findIndex(({option:r})=>r.value===p.value));o&&(e.scrollTop=o*E),S(!0)})),x(()=>{const e=C();if(!e.length||!b())return;let n=e[0],o=1/0;for(let l=0;l<e.length;l++){const v=e[l],c=v.element,t=F(l),_=Math.abs(t),h=t/k.height*2,$=Math.abs(h);_<o&&(n=v,o=_),c.classList.toggle(a.hidden,$>1),$<=1?(c.style.setProperty("--current-dist",`${$}`),c.style.setProperty("--current-dist-sign",`${Math.sign(h)}`)):(c.style.removeProperty("--current-dist"),c.style.removeProperty("--current-dist-sign"))}const r=ne(()=>p.value),i=n.option.value;i!==r&&p.onChange(i)});let V;x(()=>{u()||(A(),V=self.setTimeout(X,Oe),W(()=>{self.clearTimeout(V)}))}),x(()=>{const e=s();e&&ae(e)("wheel",()=>{y?.()},{passive:!0})});let O,y;W(()=>{y?.(),O?.()});let z=0,f=[];const q={onStart:()=>{z=s()?.scrollTop??0,f=[],O?.(),y?.(),d(!0)},onMove:(e,n)=>{const o=s();o&&(J(n),Math.abs(n)>we&&P(!0),o.scrollTop=z-n)},onEnd:()=>{O=B(),d(!1),setTimeout(()=>{P(!1)},0)}};function F(e){return k.height/2+A()-(e+2.5)*E}function B(){const e=s();if(f.length<2||!e){f=[];return}const n=performance.now();let o=!1;const r=.2,i=1e3/60;let l=0;for(let t=0;t<f.length-1;t++)l+=f[t+1].diff-f[t].diff;l=l*i/(n-de(f).time);let v=performance.now(),c=-1;return ie(()=>{if(U()||o)return!1;const t=performance.now(),_=t-v;return v=t,e.scrollTop===c?!1:(c=e.scrollTop,e.scrollTop=c+l,l-=Math.sign(l)*(r*_/i),Math.abs(l)>1)}),()=>{o=!0}}function J(e){f=[{time:performance.now(),diff:e},...f.slice(0,Ee-1)]}function X(){const e=s(),n=C();if(!n.length||!e)return;let o=0,r=1/0;for(let i=0;i<n.length;i++){const l=Math.abs(F(i));l<r&&(o=i,r=l)}r>Me&&H(o)}function Y(e){Q()||H(e)}function H(e){const n=s();n&&(y?.(),y=oe(n.scrollTop,e*E,Ie,o=>{n.scrollTop=o}))}return(()=>{const e=De(),n=e.firstChild,o=n.firstChild,r=o.nextSibling,i=r.nextSibling,l=i.nextSibling,v=n.nextSibling,c=v.nextSibling;return e.style.setProperty("--option-size","40px"),j(fe,n,()=>q),j(g,n),D(n,w(le,{get each(){return C()},children:({element:t})=>t}),i),I(t=>{const _=a.Container,h=a.Scrollable,$=a.EmptyOption,K=a.EmptyOption,L=a.EmptyOption,N=a.EmptyOption,R=`${a.Divider} ${a.upper}`,G=`${a.Divider} ${a.lower}`;return _!==t._v$&&m(e,t._v$=_),h!==t._v$2&&m(n,t._v$2=h),$!==t._v$3&&m(o,t._v$3=$),K!==t._v$4&&m(r,t._v$4=K),L!==t._v$5&&m(i,t._v$5=L),N!==t._v$6&&m(l,t._v$6=N),R!==t._v$7&&m(v,t._v$7=R),G!==t._v$8&&m(c,t._v$8=G),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),e})()};Z(["click"]);const Ae="_Container_1kyr7_1",ke={Container:Ae},Ve=M("<div>"),ze=me({name:"auto-delete-messages-custom-time-popup-content",component:p=>{const{i18n:s}=se(),[g,b]=T(p.initialPeriod),S=[{value:0,label:()=>s("Never")},...pe];return(()=>{const u=Ve();return D(u,w(ce,{get key(){return p.descriptionLangKey}}),null),D(u,w(Pe,{get value(){return g()},onChange:d=>{b(d),p.onChange(d)},get options(){return S.map(d=>({label:d.label(),value:d.value}))}}),null),I(()=>m(u,ke.Container)),u})()}});class lt extends re{constructor({descriptionLangKey:s,period:g,HotReloadGuard:b,onFinish:S}){super("auto-delete-messages-custom-time-popup",{overlayClosable:!0,closable:!0,body:!0,title:"AutoDeleteMessages",buttons:[{langKey:"Save",callback:()=>{S(this.period),this.hide()}},{langKey:"Cancel",isCancel:!0}]}),this.period=g;const u=new ze;u.HotReloadGuard=b,u.feedProps({initialPeriod:g||0,descriptionLangKey:s,onChange:d=>{this.period=d}}),this.body.append(u)}}export{lt as default};
//# sourceMappingURL=index-BwMf7lk7.js.map
