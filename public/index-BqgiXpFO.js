import{c as h,b as e,i as g,a0 as p,a2 as $,a5 as v,t as y,a7 as f,a3 as I,w as k,a as _,G as w}from"./index-4ugwRoSj.js";import{d as F,a as M,z as D,I as u,A as N}from"./appDialogsManager-D48wV3S5.js";import{u as x}from"./useAppConfig-Cgr6GCJt.js";import{u as G}from"./useStarsCommissionAndWithdrawalPrice-CGFv6Blj.js";import{s as d,S as r,c as R,P as L}from"./publishTimeField-KgXmtIs2.js";import{S as b}from"./space-C1PT3j0F.js";import"./page-BJ2GTZdy.js";import"./avatar-BnQyfmkq.js";import"./putPreloader-DHZpVoox.js";import"./classNames-CMCa94Lt.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./iconTsx-Btr9x9To.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-BKbl9wI1.js";import"./chatBackground-BAnJmbIn.js";import"./codeInputField-Cz10P9Mk.js";const C=y("<div>"),H=y('<button class="btn-primary btn-color-primary btn-large">'),O=5,K=1e5,U=1,z=F({name:"suggested-post-popup-content",component:s=>{M(s.element,d.Container);const[n,c]=h(s.initialStars?s.initialStars+"":""),[i,l]=h(s.initialTimestamp&&s.initialTimestamp*1e3>Date.now()+U*60*1e3?s.initialTimestamp:void 0),[o]=x(),{willReceiveDollars:a}=G(()=>+n()||0,{commissionKey:"stars_suggested_post_commission_permille"}),S=()=>o()?.stars_suggested_post_amount_min||O,T=()=>o()?.stars_suggested_post_amount_max||K,m=()=>+n()&&+n()<S(),P=()=>m(),E=t=>{c(t&&""+Math.min(T(),+t.replace(/\D/g,"")||0))},A=()=>{P()||s.onFinish({stars:+n()||void 0,timestamp:i()||void 0})};return[e(r,{get value(){return n()},onChange:E,get isError(){return m()},get children(){return[e(r.SideContent,{first:!0,get children(){return D({class:R.Icon})}}),e(r.Input,{type:"number",forceFieldValue:!0}),e(r.Label,{forceOffset:44,get children(){return e(u,{get key(){return m()?"SuggestedPosts.EnterPrice.MinOffer":"SuggestedPosts.EnterPrice.Label"},get args(){return f(()=>!!m())()?[S()+""]:void 0}})}}),e(r.SideContent,{last:!0,get children(){return e(I,{get when(){return a()},get children(){return["~",f(()=>N(a(),",")),"$"]}})}})]}}),(()=>{const t=C();return g(t,e(u,{key:"SuggestedPosts.EnterPrice.Description"})),p(()=>_(t,d.Caption)),t})(),e(b,{amount:"2rem"}),e(L,{noTimeLangKey:"SuggestedPosts.PublishingTime.Anytime",get value(){return i()},onChange:l}),(()=>{const t=C();return g(t,e(u,{key:"SuggestedPosts.PublishingTime.Description"})),p(()=>_(t,d.Caption)),t})(),e(b,{amount:"2rem"}),(()=>{const t=H();return t.$$click=A,$(k,t,()=>!0),g(t,e(u,{key:"SuggestedPosts.MakeAnOffer"})),p(()=>t.disabled=P()),t})()]}}),B=z;v(["click"]);class ut extends w{constructor({HotReloadGuard:n,suggestChange:c,onFinish:i,...l}){super("suggested-post-popup",{overlayClosable:!0,closable:!0,body:!0,title:c?"SuggestedPosts.SuggestAChange":"SuggestedPosts.SuggestAPost"});const o=new B;o.HotReloadGuard=n,o.feedProps({...l,onFinish:a=>{i(a),this.hide()}}),this.body.append(o)}}export{ut as default};
//# sourceMappingURL=index-BqgiXpFO.js.map
