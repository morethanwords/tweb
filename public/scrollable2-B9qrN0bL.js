import{a9 as de,c as _,aQ as D,eD as ue,a7 as Se,d9 as fe,ah as me,ai as he,ac as Y,a6 as k,i as F,a5 as ve,t as N,fN as be,v as h,C as ge,b as Te,a as Ee,c7 as we,cR as xe,cE as Pe}from"./index-B7WIMVLo.js";import{c as _e}from"./classNames-CN4lTu6a.js";const Le=N("<div>"),ye=N("<div class=scrollable-thumb-container><div class=scrollable-thumb>"),ze=24,S=!be;let L,y;S?(L=t=>requestAnimationFrame(t),y=t=>cancelAnimationFrame(t)):(L=t=>window.setTimeout(t,ze),y=t=>window.clearTimeout(t));const Ce=Pe();function Oe(t){const n=t.axis??"y",v=n==="x"?"scrollLeft":"scrollTop",U=n==="x"?"scrollWidth":"scrollHeight",V=n==="x"?"clientWidth":"clientHeight",X=n==="x"?"offsetWidth":"offsetHeight",z=n==="x"?"clientX":"clientY",[q,C]=_(!1),i=()=>s[v],Q=e=>s[v]=e,u=()=>s[U],b=()=>s[V],g=()=>s[X],A=()=>u()-Math.round(i()+g()),j=D(()=>t.onScrollOffset??300);let T=0,f=0,M,O,E=!1,m=!1;const[G,J]=_(!0),[K,Z]=_(!0);let a=0;const p=ue(()=>{E=!0,a&&(R(),m=!0)},()=>{E=!1,m&&(w(),m=!1)});Se(p);const w=()=>{if(E){R(),m=!0;return}!t.onScrolledTop&&!t.onScrolledBottom&&!B().length&&!S||a||(a=L(()=>{a=0;const e=i();T=f===e?0:f<e?1:-1,f=e,oe(e),B().forEach(o=>o()),ee()}))},R=()=>{a&&(y(a),a=0)},ee=()=>{if(!t.onScrolledTop&&!t.onScrolledBottom)return;const e=u();if(!e)return;const o=i(),l=g(),c=j(),d=e-l;t.onScrolledTop&&o<=c&&T<=0&&t.onScrolledTop(),t.onScrolledBottom&&d-o<=c&&T>=0&&t.onScrolledBottom()},te=()=>{J(!i()),Z(A()<=1)},oe=(e=i())=>{if(!S||!r)return;const o=u(),l=b(),c=o/l/.75,d=Math.max(20,l/c),x=e/(o-l)*l,W=e/(o-l),P=l-d;l<o?(r.style.height=d+"px",r.style.transform=`translateY(${Math.min(P,x-d*W)}px)`):r.style.height="0px"},le=e=>{f=e,ne(),Q(e)},ne=()=>{C(!0),s.addEventListener("scroll",e=>{h(e),C(!1)},{capture:!0,passive:!1,once:!0})},B=D(()=>[t.onScroll,t.withBorders&&te].filter(Boolean)),H=e=>{h(e);const o=u(),l=b(),c=r.offsetHeight,d=o-l,x=l-c,P=(e[z]-M)/x*d,ae=O+P;s[v]=ae},se=e=>{h(e),M=e[z],O=i(),e.target.classList.add("is-focused"),window.addEventListener("mousemove",H),window.addEventListener("mouseup",ce,{once:!0})},ce=e=>{window.removeEventListener("mousemove",H),r.classList.remove("is-focused")},re=e=>{e.stopPropagation();const o=e.target;!e.deltaX&&o.scrollWidth>o.clientWidth&&(o.scrollLeft+=e.deltaY/4,h(e))},I=()=>{S&&r&&w()},ie={get scrollPosition(){return i()},get scrollSize(){return u()},get clientSize(){return b()},get offsetSize(){return g()},getDistanceToEnd:A,get container(){return s},onSizeChange:I,setScrollPositionSilently:le},$=fe(()=>Te(Ce.Provider,{value:ie,get children(){return t.children}}));me(he($,I));let s,r;return(()=>{const e=Le();return Y(e,"wheel",n==="x"&&!ge&&re||void 0),Y(e,"scroll",!q()&&w),k(o=>{s=o,t.ref?.(o)},e),F(e,S&&n==="y"&&(()=>{const o=ye(),l=o.firstChild;return l.$$mousedown=se,k(c=>{r=c,t.thumbRef?.(c)},l),o})(),null),F(e,$,null),ve(()=>Ee(e,_e("scrollable",`scrollable-${n}`,t.class,t.relative&&"relative",we&&!xe&&"no-scrollbar",...t.withBorders?[G()&&"scrolled-start",K()&&"scrolled-end",n==="y"&&"scrollable-y-bordered",(t.withBorders==="top"||t.withBorders==="both")&&"scrollable-y-bordered-top",(t.withBorders==="bottom"||t.withBorders==="both")&&"scrollable-y-bordered-bottom"]:[]))),e})()}de(["mousedown"]);export{Oe as S,Ce as a};
//# sourceMappingURL=scrollable2-B9qrN0bL.js.map
