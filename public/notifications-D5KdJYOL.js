import{a7 as tt,c as N,a8 as et,a3 as E,ah as U,a4 as $,a as nt,bf as R,a2 as it,t as W,bD as A,q as ot,i as F,b as t,d as b,b_ as st,eH as rt,k as v,c1 as at,dT as q,aQ as ct,a9 as B,fd as ut,c3 as lt,aX as K,v as gt,a0 as J}from"./index-BADHTlgz.js";import{s as ft,B as dt}from"./emailSetup-DiJaahi7.js";import{V as ht,W as mt,R as s,N as T,Q as _}from"./appDialogsManager-DpDJuVgr.js";import{t as pt}from"./toast-DldnwnKq.js";import"./classNames-CN4lTu6a.js";import"./iconTsx-DoSczV7A.js";import"./transition-DzrEwt1Z.js";import"./page-BmhISZ_F.js";import"./avatar-D1dEAMCU.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-anKMCwQ-.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./fastBlur-Co-79rP4.js";import"./putPreloader-K30N2k1L.js";import"./countryInputField-32Ovn8C_.js";import"./scrollable2-D8ePU3YR.js";import"./chatBackground-nUzwn1Yy.js";import"./tracking-Ba_rtFbf.js";const St=W("<div><div class=progress-line__filled></div><input class=progress-line__seek type=range>");function Nt(e){const[a,r]=N(!1),[i,m]=N(),[u,p]=N(e.value||0);let c,f,n,l=null;const d=e.min??0,C=e.max??0,y=e.step,H=e.withTransition||!1,L=e.useTransform||!1,Q=e.useProperty||!1,M=e.vertical||!1,k=e.offsetAxisValue||0,I=""+y,O=I.indexOf("."),X=O===-1?0:I.length-O-1,G=o=>{let S=(o-d)/(C-d);S=A(S,0,1),L?f.style.transform=`scaleX(${S})`:Q?c.style.setProperty("--progress",""+S):f.style.width=S*100+"%"},P=o=>{n.value=""+o,G(+n.value),p(+n.value)},j=()=>{const o=+n.value;G(o),p(o),e.onScrub?.(o)},z=o=>{D(o)},Y=o=>{m(c.getBoundingClientRect()),r(!0),D(o),c.classList.add("is-focused"),e.onMouseDown?.(o)},Z=o=>{r(!1),c.classList.remove("is-focused"),e.onMouseUp?.(o)},D=(o,S)=>{const g=i();if(!g)return 0;let x=M?g.height:g.width;k&&(x-=k);let w=A(M?-(o.y-g.bottom):o.x-g.left-k/2,0,x);!M&&ot.isRTL&&(w=x-w);let h=d+w/x*(C-d);return h-d<(C-d)/2&&(h-=y/10),h=+h.toFixed(X),h=A(h,d,C),P(h),e.onScrub?.(h),h};return et(()=>{e.value&&P(e.value),l=ht(c,Y,z,Z)}),E(()=>{l?.()}),U(()=>{e.value!==void 0&&P(e.value)}),(()=>{const o=St(),S=o.firstChild,g=S.nextSibling,x=c;typeof x=="function"?$(x,o):c=o,nt(o,`progress-line ${L?"use-transform":""} ${H?"with-transition":""}`);const w=f;typeof w=="function"?$(w,S):f=S,g.$$input=j;const h=n;return typeof h=="function"?$(h,g):n=g,R(g,"step",y),R(g,"min",d),R(g,"max",C),it(()=>g.value=u()),o})()}tt(["input"]);const vt=W("<div class=range-setting-selector><div class=range-setting-selector-details><div class=range-setting-selector-name></div><div class=range-setting-selector-value>");function yt(e){const[a,r]=N(e.value);return U(()=>{r(e.value)}),(()=>{const i=vt(),m=i.firstChild,u=m.firstChild,p=u.nextSibling;return F(u,()=>e.textLeft),F(p,()=>e.textRight(a())),F(i,t(Nt,{get step(){return e.step},get min(){return e.minValue},get max(){return e.maxValue},get value(){return e.value},onScrub:c=>{e.onChange?.(c),r(c)},get onMouseUp(){return e.onMouseUp}}),null),i})()}const V=e=>{const[a,r]=N(!0),[i,m]=N(!0),[u,p]=N(),c={_:e.inputKey};U(async()=>{const n=u();if(!n)return;const l=await b.managers.appNotificationsManager.isMuted(n);return r(!l),m(!!n.show_previews),l}),E(async()=>{const n=!a(),l=i(),d=u(),C=await b.managers.appNotificationsManager.isMuted(d);if(n===C&&l===d.show_previews)return;const y=st(d);y._="inputPeerNotifySettings",y.mute_until=n?rt:0,y.show_previews=l,b.managers.appNotificationsManager.updateNotifySettings(c,y)}),ft(b)("notify_settings",n=>{const l=mt(n.peer._);e.inputKey===l&&p(n.notify_settings)});const f=b.managers.appNotificationsManager.getNotifySettings(c);return(f instanceof Promise?f:Promise.resolve(f)).then(n=>{u()||p(n)}),t(_,{get name(){return e.name},get children(){return[t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return a()},onChange:r,toggle:!0})}}),t(s.Title,{get children(){return v(e.typeText)}})]}}),t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return i()},onChange:m,toggle:!0})}}),t(s.Title,{get children(){return v("MessagePreview")}})]}})]}})},Ct=()=>{const[e,a]=N(!0),r=lt();return b.managers.appNotificationsManager.getContactSignUpNotification().then(i=>{a(i),at(r,()=>E(()=>{const m=e();m!==i&&b.managers.appNotificationsManager.setContactSignUpNotification(!m)}))}),t(_,{name:"NotificationsOther",get children(){return t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return e()},onChange:a,toggle:!0})}}),t(s.Title,{get children(){return v("ContactJoined")}})]}})}})},xt=()=>{const{uiNotificationsManager:e}=q(),[a,r]=K(),[i,m]=N(Notification.permission),u=ct(()=>i()==="granted"),p=n=>{gt(n),Notification.requestPermission().then(l=>{if(m(l),l==="granted")e.onPushConditionsChange();else throw 1},()=>{pt({langPackKey:"Notifications.Restricted"})})},c=n=>t(s,J(n,{get fakeDisabled(){return!u()},get clickable(){return!u()&&p}})),f=n=>t(T,J(n,{get checked(){return u()&&n.checked}}));return t(_,{name:"Notifications.Web",get caption(){return u()?"MultiAccount.ShowNotificationsFromCaption":"Notifications.Default"},get children(){return[t(c,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifications.desktop},onChange:n=>r("notifications","desktop",n),toggle:!0})}}),t(s.Title,{get children(){return v("Notifications.Show")}})]}}),t(c,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifications.push},onChange:n=>r("notifications","push",n),toggle:!0})}}),t(s.Title,{get children(){return v("Notifications.Offline")}})]}}),t(c,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifyAllAccounts},onChange:n=>r("notifyAllAccounts",n),toggle:!0})}}),t(s.Title,{get children(){return v("MultiAccount.AllAccounts")}})]}}),B(()=>B(()=>!u())()&&t(dt,{text:"Notifications.Enable",class:"btn-primary primary btn-transparent",icon:"unmute",get disabled(){return u()},onClick:p}))]}})},bt=()=>{const{uiNotificationsManager:e}=q(),[a,r]=K();return t(_,{name:"Notifications.Sound.Section",caption:"Notifications.Sound.Caption",get children(){return[t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return a.notifications.sound},onChange:i=>{i&&!a.notifications.volume&&r("notifications","volume",ut.notifications.volume),r("notifications","sound",i)},toggle:!0})}}),t(s.Title,{get children(){return v("Notifications.Sound")}})]}}),t(yt,{get textLeft(){return v("Notifications.Sound.Volume")},textRight:i=>""+Math.floor(i*100)+"%",step:.01,get value(){return a.notifications.volume},minValue:0,maxValue:1,onChange:i=>{i=+i.toFixed(2),i||r("notifications","sound",!1),r("notifications","volume",i)},onMouseUp:()=>{e.testSound(a.notifications.volume)}})]}})},wt=()=>{const[e,a]=K();return t(_,{name:"Notifications.Sound.Effects",get children(){return t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return e.notifications.sentMessageSound},onChange:r=>a("notifications","sentMessageSound",r),toggle:!0})}}),t(s.Title,{get children(){return v("Notifications.Sound.Sent")}})]}})}})},Bt=()=>[t(xt,{}),t(bt,{}),t(wt,{}),t(V,{name:"NotificationsPrivateChats",typeText:"NotificationsForPrivateChats",inputKey:"inputNotifyUsers"}),t(V,{name:"NotificationsGroups",typeText:"NotificationsForGroups",inputKey:"inputNotifyChats"}),t(V,{name:"NotificationsChannels",typeText:"NotificationsForChannels",inputKey:"inputNotifyBroadcasts"}),t(Ct,{})];export{Bt as default};
//# sourceMappingURL=notifications-D5KdJYOL.js.map
