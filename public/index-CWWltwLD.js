import{c3 as tn,a7 as Be,a4 as sn,ah as rn,aV as V,i as A,b as n,bU as ke,a5 as y,a as h,t as L,c as k,aW as N,cI as dn,bj as xe,ai as cn,ab as B,e2 as Fe,fV as ln,aQ as O,cK as gn,a9 as we,ac as Te,a6 as an,E as un,a2 as $,bv as mn,a8 as ne,k as d,dN as oe,d9 as ze,a_ as Ie,aM as de,ca as vn,a$ as hn,af as _n,c4 as pn,f8 as An,ad as Ve,J as fn,V as Cn,aa as $n,fW as Mn,eQ as En}from"./index-B7WIMVLo.js";import{T as ue}from"./transition-4sVVeuD9.js";import{v as bn,ah as xn,ai as wn,V as pe,g as Se,a4 as Tn,a2 as yn,aj as Rn,r as Oe}from"./appDialogsManager-DWM6BLp0.js";import{u as Pn,F as In,l as be,H as qe,c as Sn}from"./useFlagFilters-Cndz2Rln.js";import{u as Ln}from"./useIsCleaned-DiqUhPa5.js";import{u as Bn}from"./useScrollTop-DtbdXgTM.js";import{I as te}from"./iconTsx-Dm7uuor6.js";import{w as Ge,f as Ke}from"./wrapDuration-N7gVnHGH.js";import{I as q,B as Ue}from"./emailSetup-0NlYvq0Q.js";import{u as De,g as Ae,i as Ne,d as Le,p as fe,r as We,T as ae,a as kn}from"./topicName-CbDEBNd1.js";import{S as U}from"./space-Bz_xbP0m.js";import"./page-CFQq45dV.js";import"./putPreloader-BhMVPekh.js";import"./avatar-CyLVJWYN.js";import"./classNames-CN4lTu6a.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-CTXjJKhu.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-CGoQGdNE.js";import"./scrollable2-B9qrN0bL.js";import"./chatBackground-BOw4waSL.js";import"./tracking-CFAwSx7m.js";import"./index-NZ28QDJ6.js";function Fn(){const e=new Map,t=new Map,i=new ResizeObserver(a=>{for(const s of a)t.has(s.target)||tn(()=>{const r=t.get(s.target);t.delete(s.target),r?.()}),t.set(s.target,()=>{const r=e.get(s.target),c=s.borderBoxSize[0];r&&c&&r({entry:s,size:{width:c.inlineSize,height:c.blockSize}})})});return Be(()=>{i.disconnect(),e.clear(),t.clear()}),(a,s)=>{e.set(a,s),i.observe(a),Be(()=>{e.delete(a),i.unobserve(a)})}}const Dn=100;function Hn(e,t,i,a){let s=0;for(;e<=t;){const r=e+Math.floor((t-e)/2),c=a(r);if(i>c?e=r+1:t=r-1,s++>Dn)return 0}return e}const jn="_Container_6yug7_1",zn={Container:jn},Vn=L("<div>"),Je=.05,On=50,qn=1,Gn=e=>{const t=ln(e,(i,a)=>{const[s,r]=k(),[c,l]=k(0),[o,u]=k(0);return{payload:i,prevCachedHeight:0,cachedHeight:s,setCachedHeight:r,offset:c,setOffset:l,translate:o,setTranslate:u,idx:a,needScrollAdjustment:!1}});return O(()=>t())},Kn=({listItemStates:e,estimateItemHeight:t,verticalPadding:i})=>{const[a,s]=k(0);return xe(()=>{N(()=>{const r=e().reduce((c,l)=>{const o=V(()=>l.cachedHeight()??t(l.payload));return l.prevCachedHeight=o,l.setCachedHeight(o),l.setOffset(c),c+o},i());s(r+i())})}),[a,s]},Un=({list:e,scrollable:t,maxBatchSize:i,estimateItemHeight:a,verticalPadding:s,renderAtLeastFromBottom:r})=>{const c=Bn(t),l=bn(t),o=()=>l.height,u=Gn(e),[m,g]=Kn({listItemStates:u,estimateItemHeight:a,verticalPadding:s}),[p,C]=k([],{equals:(f,M)=>f.length===M.length&&f.every((E,R)=>E===M[R])}),[v,w]=k([]);return rn(()=>{v();const f=u(),M=V(i),E=V(p),R=[],j=E.length?E.reduce((T,J)=>Math.min(T,J.idx()),1/0):0;let W=0;for(const T of E)if(T.needScrollAdjustment){const P=(V(T.cachedHeight)||0)-T.prevCachedHeight;W+=P,T.needScrollAdjustment=!1}const ie=c()+W,G=o(),se=ie-Je*G,ye=ie+G*(1+Je);let me=0,ve=0,re=0;N(()=>{let T=Hn(0,j-1,se,P=>V(()=>f[P].offset()+(f[P].cachedHeight()||0)));const J=f.length-r({clientHeight:G});for(T=Math.min(T,J),T=Math.max(T,0),re=V(()=>f[T]?.offset())||s();T<f.length;T++){const P=f[T],_=V(P.cachedHeight)||0,S=_-P.prevCachedHeight;me+=S,P.prevCachedHeight=_,P.setOffset(re);const x=re,H=x+_,he=E.includes(P),_e=(H>se||T>=J)&&x<ye;if(!he&&_e&&(ve+=1),!(ve>M)&&_e)R.push(P),P.needScrollAdjustment=T<j;else if(R.length)break;re+=_}R.forEach(P=>void P.cachedHeight()),Math.abs(W)>qn&&(V(t).scrollTop+=W),g(P=>P+me),C(R)})}),{scrollTop:c,clientHeight:o,height:m,renderedItems:p,onMeasure:()=>{w(V(p))}}},Nn=({component:e,measureElementHeight:t})=>{const i=Fn();return a=>{let s;const[r,c]=k(!1),l=gn(),o=Ln(),{offset:u,setCachedHeight:m,idx:g}=a.item,[p,C]=k(0),[v,w]=k(0);let f;Be(()=>{self.clearTimeout(f),a.item.needScrollAdjustment=!1});let M=!0;return tn(()=>{if(o())return;const E=t(s);m(E),c(!1),M=!0,dn(l,()=>{i(s,({size:R})=>{m(t(s))})})}),xe(cn(u,()=>{if(M){M=!1,C(u());return}const E=u()-p();E&&(w(E),self.clearTimeout(f),f=self.setTimeout(()=>{N(()=>{C(u()),w(0)})},On))})),n(Fe,{get component(){return e()},ref(E){const R=s;typeof R=="function"?R(E):s=E},get payload(){return a.item.payload},get isMeasuring(){return r()},get offset(){return B(()=>!!r())()?0:p()},get translation(){return B(()=>!!r())()?0:v()},get idx(){return g()}})}},Wn=e=>{const t=sn({nearBottomThreshold:120,verticalPadding:0,renderAtLeastFromBottom:()=>0},e),{scrollTop:i,clientHeight:a,height:s,renderedItems:r,onMeasure:c}=Un({list:()=>t.list,estimateItemHeight:(...o)=>t.estimateItemHeight(...o),maxBatchSize:()=>t.maxBatchSize,scrollable:()=>t.scrollable,verticalPadding:()=>t.verticalPadding,renderAtLeastFromBottom:o=>t.renderAtLeastFromBottom(o)});rn(()=>{t.onNearBottom&&i()+a()>=s()-t.nearBottomThreshold&&V(()=>t.onNearBottom())});const l=Nn({component:()=>t.Item,measureElementHeight:(...o)=>(c(),t.measureElementHeight(...o))});return(()=>{const o=Vn();return A(o,n(ke,{get each(){return r()},children:u=>n(l,{item:u})})),y(u=>{const m=zn.Container,g=`${s()}px`;return m!==u._v$&&h(o,u._v$=m),g!==u._v$2&&((u._v$2=g)!=null?o.style.setProperty("--height",g):o.style.removeProperty("--height")),u},{_v$:void 0,_v$2:void 0}),o})()},Jn="_Placeholder_1qzqg_36",Qn="_Icon_1qzqg_40",Yn="_first_1qzqg_49",Xn="_toggled_1qzqg_53",Zn="_second_1qzqg_56",Q={Placeholder:Jn,Icon:Qn,first:Yn,toggled:Xn,second:Zn},et=L("<button class=btn-icon>"),nt=e=>(()=>{const t=et();return Te(t,"click",e.onClick,!0),an(un,t,()=>!0),A(t,n(te,{icon:"plus",get class(){return Q.Placeholder}}),null),A(t,n(te,{icon:"arrowhead",get class(){return`${Q.Icon} ${Q.first}`},get classList(){return{[Q.toggled]:e.expanded}}}),null),A(t,n(te,{icon:"arrowhead",get class(){return`${Q.Icon} ${Q.second}`},get classList(){return{[Q.toggled]:e.expanded}}}),null),t})();we(["click"]);const tt="_Container_1yj7p_1",rt="_ContainerBackdropFill_1yj7p_21",at="_ContainerBackdropExtension_1yj7p_30",ot="_ContainerEnterActive_1yj7p_40",it="_ContainerExitActive_1yj7p_40",st="_ContainerEnter_1yj7p_40",dt="_ContainerExitTo_1yj7p_43",ct="_Card_1yj7p_48",lt="_hideThumb_1yj7p_59",gt="_Overlay_1yj7p_63",ut="_TopLevelCheckbox_1yj7p_69",z={Container:tt,ContainerBackdropFill:rt,ContainerBackdropExtension:at,ContainerEnterActive:ot,ContainerExitActive:it,ContainerEnter:st,ContainerExitTo:dt,Card:ct,hideThumb:lt,Overlay:gt,TopLevelCheckbox:ut},mt=L("<div>"),vt=L("<div><div><div></div><div></div></div><div>"),ht=100,_t=e=>{const t=Pn({channelId:()=>e.channelId,isBroadcast:()=>e.isBroadcast});xe(()=>{xn(()=>e.open),t.setFromCommittedFilters(e.committedFilters)});const i=()=>N(()=>{e.onCommit(null),e.onClose?.()}),a=r=>N(()=>{e.onCommit(r),e.onClose?.()}),s=r=>{mn||setTimeout(()=>r.focus(),ht)};return[n(ue,{name:"fade",get children(){return n($,{get when(){return e.open},get children(){const r=mt();return Te(r,"click",e.onClose,!0),y(()=>h(r,z.Overlay)),r}})}}),n(ue,{get enterActiveClass(){return z.ContainerEnterActive},get exitActiveClass(){return z.ContainerExitActive},get enterClass(){return z.ContainerEnter},get exitToClass(){return z.ContainerExitTo},get children(){return n($,{get when(){return e.open},get children(){const r=vt(),c=r.firstChild,l=c.firstChild,o=l.nextSibling,u=c.nextSibling;return A(u,n(In,{filtersControls:t,inputRef:s,onCommit:a,onReset:i,hasSearch:!0})),y(m=>{const g=z.Container,p=z.ContainerBackdrop,C=z.ContainerBackdropFill,v=z.ContainerBackdropExtension,w=z.Card;return g!==m._v$&&h(r,m._v$=g),p!==m._v$2&&h(c,m._v$2=p),C!==m._v$3&&h(l,m._v$3=C),v!==m._v$4&&h(o,m._v$4=v),w!==m._v$5&&h(u,m._v$5=w),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),r}})}})]};we(["click"]);const pt="_Container_1taye_1",At="_rounded_1taye_8",ft="_Photo_1taye_8",Ct="_forum_1taye_11",Ce={Container:pt,rounded:At,Photo:ft,forum:Ct},$t=L("<div>"),Qe=120,Y=e=>(()=>{const t=$t();return A(t,n(wn,{get class(){return Ce.Photo},get photo(){return e.photo},boxWidth:Qe,boxHeight:Qe,withoutPreloader:!0})),y(i=>{const a=Ce.Container,s={[Ce.forum]:e.isForum,[Ce.rounded]:e.rounded};return a!==i._v$&&h(t,i._v$=a),i._v$2=ne(t,s,i._v$2),i},{_v$:void 0,_v$2:void 0}),t})(),Mt="_Container_uohs4_1",Et="_hoverable_uohs4_12",bt="_Value_uohs4_16",xt="_Border_uohs4_20",$e={Container:Mt,hoverable:Et,Value:bt,Border:xt},wt=L("<div><div></div><div>:</div><div>"),ee=e=>(()=>{const t=wt(),i=t.firstChild,a=i.nextSibling,s=a.firstChild,r=a.nextSibling;return Te(t,"click",e.onClick,!0),A(a,()=>e.label,s),A(r,()=>e.value),y(c=>{const l=$e.Container,o={interactable:e.interactable||!!e.onClick,[$e.hoverable]:!!e.onClick},u=$e.Border,m=$e.Value;return l!==c._v$&&h(t,c._v$=l),c._v$2=ne(t,o,c._v$2),u!==c._v$3&&h(i,c._v$3=u),m!==c._v$4&&h(r,c._v$4=m),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})(),X=e=>n(ee,{get label(){return e.label||d("AdminRecentActions.ChangedTo")},get value(){return B(()=>!!e.value)()?d("AdminRecentActions.Enabled"):d("AdminRecentActions.Disabled")}}),Me=e=>n($,{get when(){return e.invite._==="chatInviteExported"},get children(){return n(ee,{get label(){return n(q,{key:"InviteLink"})},get value(){return e.invite._==="chatInviteExported"?e.invite.link:""}})}}),Z=e=>{const{PeerTitleTsx:t}=oe();return n($,{get when(){return e.peerId},get children(){return n(ee,{get label(){return e.label||n(q,{key:"AdminRecentActions.Participant"})},get value(){return n(t,{get peerId(){return e.peerId},limitSymbols:be})},get onClick(){return De(e.peerId)}})}})};we(["click"]);const Tt="_Container_1lwmw_1",yt="_vertical_1lwmw_1",Rt="_Block_1lwmw_8",Pt="_added_1lwmw_23",It="_removed_1lwmw_27",St="_unroundedTop_1lwmw_31",Lt="_unroundedBottom_1lwmw_35",Bt="_unroundedRight_1lwmw_39",kt="_unroundedLeft_1lwmw_43",Ft="_Border_1lwmw_48",Dt="_Line_1lwmw_62",Ht="_Separator_1lwmw_66",jt="_Strip_1lwmw_71",zt="_Content_1lwmw_85",b={Container:Tt,vertical:yt,Block:Rt,added:Pt,removed:It,unroundedTop:St,unroundedBottom:Lt,unroundedRight:Bt,unroundedLeft:kt,Border:Ft,Line:Dt,Separator:Ht,Strip:jt,Content:zt},Ye=L("<div><div>"),Xe=L("<div>"),Ze=L("<div><div></div><div>"),I=e=>{const t=ze(()=>e.added),i=ze(()=>e.removed),a=O(()=>t.toArray().filter(Boolean)),s=O(()=>i.toArray().filter(Boolean)),r=O(()=>a().length>0),c=O(()=>s().length>0);return(()=>{const l=Xe();return A(l,n($,{get when(){return r()},get children(){const o=Ye(),u=o.firstChild;return A(o,n(ke,{get each(){return a()},children:m=>(()=>{const g=Ze(),p=g.firstChild,C=p.nextSibling;return A(p,n(te,{icon:"plus"})),A(C,m),y(v=>{const w=b.Line,f=`${b.Strip} ${b.added}`,M=b.Content;return w!==v._v$9&&h(g,v._v$9=w),f!==v._v$10&&h(p,v._v$10=f),M!==v._v$11&&h(C,v._v$11=M),v},{_v$9:void 0,_v$10:void 0,_v$11:void 0}),g})()}),null),y(m=>{const g=`${b.Block} ${b.added}`,p={[e.vertical?b.unroundedRight:b.unroundedBottom]:c()},C=`${b.Border} ${b.added}`;return g!==m._v$&&h(o,m._v$=g),m._v$2=ne(o,p,m._v$2),C!==m._v$3&&h(u,m._v$3=C),m},{_v$:void 0,_v$2:void 0,_v$3:void 0}),o}}),null),A(l,n($,{get when(){return B(()=>!!r())()&&c()},get children(){const o=Xe();return y(()=>h(o,b.Separator)),o}}),null),A(l,n($,{get when(){return c()},get children(){const o=Ye(),u=o.firstChild;return A(o,n(ke,{get each(){return s()},children:m=>(()=>{const g=Ze(),p=g.firstChild,C=p.nextSibling;return A(p,n(te,{icon:"minus"})),A(C,m),y(v=>{const w=b.Line,f=`${b.Strip} ${b.removed}`,M=b.Content;return w!==v._v$12&&h(g,v._v$12=w),f!==v._v$13&&h(p,v._v$13=f),M!==v._v$14&&h(C,v._v$14=M),v},{_v$12:void 0,_v$13:void 0,_v$14:void 0}),g})()}),null),y(m=>{const g=`${b.Block} ${b.removed}`,p={[e.vertical?b.unroundedLeft:b.unroundedTop]:r()},C=`${b.Border} ${b.removed}`;return g!==m._v$4&&h(o,m._v$4=g),m._v$5=ne(o,p,m._v$5),C!==m._v$6&&h(u,m._v$6=C),m},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),o}}),null),y(o=>{const u=b.Container,m={[b.vertical]:e.vertical,interactable:!e.vertical};return u!==o._v$7&&h(l,o._v$7=u),o._v$8=ne(l,m,o._v$8),o},{_v$7:void 0,_v$8:void 0}),l})()},Vt="_Container_1wvd6_1",Ot="_Button_1wvd6_7",qt="_added_1wvd6_17",Gt="_removed_1wvd6_23",ce={Container:Vt,Button:Ot,added:qt,removed:Gt},Kt=L("<div>"),le=e=>{const{rootScope:t,appImManager:i,ChatType:a}=oe(),s=o=>o&&(o._==="message"||o._==="messageService")?o:void 0,r=O(()=>s(e.added)),c=O(()=>s(e.removed)),l=async o=>{const u=await t.managers.appMessagesManager.saveLogsMessage(e.channelId.toPeerId(!0),o);i.setPeer({peerId:e.channelId.toPeerId(!0),messages:[u],type:a.Static})};return n($,{get when(){return r()||c()},get children(){const o=Kt();return A(o,n($,{get when(){return r()&&e.addedKey},get children(){return n(Ue,{get class(){return`interactable ${ce.Button} ${ce.added}`},onClick:()=>l(r()),get children(){return n(q,{get key(){return e.addedKey}})}})}}),null),A(o,n($,{get when(){return c()&&e.removedKey},get children(){return n(Ue,{get class(){return`interactable ${ce.Button} ${ce.removed}`},onClick:()=>l(c()),get children(){return n(q,{get key(){return e.removedKey}})}})}}),null),y(()=>h(o,ce.Container)),o}})},Ut={channelAdminLogEventActionChangeTitle:({action:e,isBroadcast:t})=>({group:"info",Message:()=>d(t?"AdminRecentActionMessage.ChangeTitleChannel":"AdminRecentActionMessage.ChangeTitleGroup"),ExpandableContent:()=>n(I,{get added(){return e.new_value},get removed(){return e.prev_value}})}),channelAdminLogEventActionChangeAbout:({action:e,isBroadcast:t})=>({group:"info",Message:()=>d(t?"AdminRecentActionMessage.ChangeAboutChannel":"AdminRecentActionMessage.ChangeAboutGroup"),ExpandableContent:()=>n(I,{get added(){return e.new_value},get removed(){return e.prev_value}})}),channelAdminLogEventActionChangeUsername:({action:e,isBroadcast:t})=>({group:"identity",Message:()=>d(t?"AdminRecentActionMessage.ChangeUsernameChannel":"AdminRecentActionMessage.ChangeUsernameGroup"),ExpandableContent:()=>n(I,{get added(){return e.new_value},get removed(){return e.prev_value}})}),channelAdminLogEventActionChangePhoto:({action:e,isBroadcast:t,isForum:i})=>({group:"media",Message:()=>d(t?"AdminRecentActionMessage.ChangePhotoChannel":"AdminRecentActionMessage.ChangePhotoGroup"),ExpandableContent:()=>n(I,{vertical:!0,get added(){return B(()=>e.new_photo?._==="photo")()&&n(Y,{get photo(){return e.new_photo},rounded:!0,isForum:i})},get removed(){return B(()=>e.prev_photo?._==="photo")()&&n(Y,{get photo(){return e.prev_photo},rounded:!0,isForum:i})}})}),channelAdminLogEventActionToggleInvites:({action:e})=>({group:"invites",Message:()=>d("AdminRecentActionMessage.ToggleInvites"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionToggleSignatures:({action:e})=>({group:"identity",Message:()=>d("AdminRecentActionMessage.ToggleSignatures"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionUpdatePinned:({channelId:e,action:t})=>({group:"pinned",Message:()=>d("AdminRecentActionMessage.UpdatePinnedMessage"),ExpandableContent:()=>{const i=Ae(t.message),a=t.message?._==="message"?t.message:void 0,s=i,r=a?.message,c=Ie().get(),l=t.message?._==="message"&&t.message.pFlags?.pinned;return[n($,{when:s,get children(){return n(I,{vertical:!0,get added(){return l&&i&&n(Y,{photo:i})},get removed(){return!l&&i&&n(Y,{photo:i})}})}}),s&&r&&n(U,{amount:"4px"}),n($,{when:r,get children(){return n(I,{get added(){return l&&a&&de(a.message,{entities:a.entities,middleware:c})},get removed(){return!l&&a&&de(a.message,{entities:a.entities,middleware:c})}})}}),n(U,{amount:"8px"}),n(le,{channelId:e,get added(){return l?t.message:void 0},get removed(){return l?void 0:t.message},addedKey:"AdminRecentActions.ViewPinned",removedKey:"AdminRecentActions.ViewUnpinned"})]}}),channelAdminLogEventActionEditMessage:({channelId:e,action:t})=>({group:"messages",Message:()=>d("AdminRecentActionMessage.EditedMessage"),ExpandableContent:()=>{const i=Ae(t.prev_message),a=Ae(t.new_message),s=t.prev_message?._==="message"?t.prev_message:void 0,r=t.new_message?._==="message"?t.new_message:void 0,c=i?.id!==a?.id,l=s?.message!==r?.message||!vn(s?.entities,r?.entities),o=Ie().get();return[n($,{when:c,get children(){return n(I,{vertical:!0,get added(){return a&&n(Y,{photo:a})},get removed(){return i&&n(Y,{photo:i})}})}}),n($,{when:c&&l,get children(){return n(U,{amount:"4px"})}}),n($,{when:l,get children(){return n(I,{get added(){return r&&de(r.message,{entities:r.entities,middleware:o})},get removed(){return s&&de(s.message,{entities:s.entities,middleware:o})}})}}),n(U,{amount:"8px"}),n(le,{channelId:e,get added(){return t.new_message},get removed(){return t.prev_message},addedKey:"AdminRecentActions.ViewUpdatedMessage",removedKey:"AdminRecentActions.ViewPreviousMessage"})]}}),channelAdminLogEventActionDeleteMessage:({channelId:e,action:t})=>({group:"messages",Message:()=>d("AdminRecentActionMessage.DeletedMessage"),ExpandableContent:()=>{const i=Ae(t.message),a=t.message?._==="message"?structuredClone(t.message):void 0,s=i,r=a?.message,c=Ie().get();return a&&a.media?._==="messageMediaPoll"&&(a.media.poll.pFlags||(a.media.poll.pFlags={}),a.media.poll.pFlags.closed=!0),[n($,{when:s,get children(){return n(I,{vertical:!0,get removed(){return i&&n(Y,{photo:i})}})}}),s&&r&&n(U,{amount:"4px"}),n($,{when:r,get children(){return n(I,{get removed(){return a&&de(a.message,{entities:a.entities,middleware:c})}})}}),n(U,{amount:"8px"}),n(le,{channelId:e,get removed(){return a||t.message},removedKey:"AdminRecentActions.ViewDeletedMessage"})]}}),channelAdminLogEventActionParticipantJoin:({isBroadcast:e})=>({group:"join",Message:()=>d(e?"AdminRecentActionMessage.ParticipantJoinedChannel":"AdminRecentActionMessage.ParticipantJoinedGroup")}),channelAdminLogEventActionParticipantLeave:({isBroadcast:e})=>({group:"leave",Message:()=>d(e?"AdminRecentActionMessage.ParticipantLeftChannel":"AdminRecentActionMessage.ParticipantLeftGroup")}),channelAdminLogEventActionParticipantInvite:({action:e})=>({group:"invites",Message:()=>d("AdminRecentActionMessage.ParticipantInvited"),ExpandableContent:()=>n(Z,{get peerId(){return pe(e.participant)}})}),channelAdminLogEventActionParticipantToggleBan:({channelId:e,action:t})=>({group:"permissions",Message:()=>d(Ne(t.new_participant)?"AdminRecentActionMessage.ParticipantBanned":"AdminRecentActionMessage.ParticipantPermissionsToggled"),ExpandableContent:()=>{const{apiManagerProxy:i}=oe(),a=t.prev_participant?._==="channelParticipantBanned"?t.prev_participant:void 0,s=t.new_participant?._==="channelParticipantBanned"?t.new_participant:void 0,r=i.getChat(e),c=u=>r?._==="channel"&&u?kn(r,u):u,l=pe(t.prev_participant||t.new_participant),o=Le(c(a?.banned_rights)?.pFlags,c(s?.banned_rights)?.pFlags);return[n(Z,{peerId:l}),n($,{get when(){return!Ne(t.new_participant)},get children(){return[n(U,{amount:"4px"}),n(I,{get removed(){return o.new.map(u=>fe[u]).filter(Boolean).map(u=>d(u))},get added(){return o.old.map(u=>fe[u]).filter(Boolean).map(u=>d(u))}})]}})]}}),channelAdminLogEventActionParticipantToggleAdmin:({action:e,isBroadcast:t})=>({group:"permissions",Message:()=>d("AdminRecentActionMessage.AdminToggled"),ExpandableContent:()=>{const{PeerTitleTsx:i}=oe(),a="admin_rights"in e.prev_participant?e.prev_participant.admin_rights:null,s="admin_rights"in e.new_participant?e.new_participant.admin_rights:null,r=Le(a?.pFlags,s?.pFlags),c=pe(e.prev_participant||e.new_participant);return[n($,{when:c,get children(){return[n(ee,{get label(){return d("AdminRecentActions.ChangedPermissionsToUser")},get value(){return n(i,{peerId:c,limitSymbols:be})},get onClick(){return De(c)}}),n(U,{amount:"4px"})]}}),n(I,{get added(){return r.new.map(l=>d(We(l,{isBroadcast:t})))},get removed(){return r.old.map(l=>d(We(l,{isBroadcast:t})))}})]}}),channelAdminLogEventActionChangeStickerSet:()=>({group:"appearance",Message:()=>d("AdminRecentActionMessage.ChangeStickerSet")}),channelAdminLogEventActionTogglePreHistoryHidden:()=>({group:"permissions",Message:()=>d("AdminRecentActionMessage.TogglePreHistoryHidden")}),channelAdminLogEventActionDefaultBannedRights:({action:e})=>({group:"permissions",Message:()=>d("AdminRecentActionMessage.DefaultBannedRightsChanged"),ExpandableContent:()=>{const t=Le(e.prev_banned_rights?.pFlags,e.new_banned_rights?.pFlags);return n(I,{get removed(){return t.new.map(i=>fe[i]).filter(Boolean).map(i=>d(i))},get added(){return t.old.map(i=>fe[i]).filter(Boolean).map(i=>d(i))}})}}),channelAdminLogEventActionStopPoll:({channelId:e,action:t})=>({group:"messages",Message:()=>d("AdminRecentActionMessage.PollStopped"),ExpandableContent:()=>n(le,{channelId:e,get removed(){return t.message},removedKey:"AdminRecentActions.ViewStopped"})}),channelAdminLogEventActionChangeLinkedChat:({action:e})=>({group:"links",Message:()=>d("AdminRecentActionMessage.ChangeLinkedChat"),ExpandableContent:()=>{const{PeerTitleTsx:t}=oe();return n(ee,{get label(){return n(q,{key:"DiscussionController.Channel.Title"})},get value(){return B(()=>!!e.new_value)()?n(t,{get peerId(){return e.new_value.toPeerId(!0)},limitSymbols:be}):d("AdminRecentActions.Disabled")}})}}),channelAdminLogEventActionChangeLocation:({isBroadcast:e,action:t})=>({group:"location",Message:()=>d(e?"AdminRecentActionMessage.ChangeLocationChannel":"AdminRecentActionMessage.ChangeLocationGroup"),ExpandableContent:()=>{const i=t.prev_value?._==="channelLocation"?t.prev_value:void 0,a=t.new_value?._==="channelLocation"?t.new_value:void 0;return n(I,{get added(){return a?.address},get removed(){return i?.address}})}}),channelAdminLogEventActionToggleSlowMode:({action:e})=>({group:"permissions",Message:()=>d("AdminRecentActionMessage.ToggleSlowMode"),ExpandableContent:()=>n(ee,{get label(){return n(q,{key:"AdminRecentActions.SlowModeDuration"})},get value(){return B(()=>!!e.new_value)()?Ge(Ke(e.new_value)):d("AdminRecentActions.Disabled")}})}),channelAdminLogEventActionStartGroupCall:()=>({group:"calls",Message:()=>d("AdminRecentActionMessage.StartGroupCall")}),channelAdminLogEventActionDiscardGroupCall:()=>({group:"calls",Message:()=>d("AdminRecentActionMessage.DiscardGroupCall")}),channelAdminLogEventActionParticipantMute:({action:e})=>({group:"calls",Message:()=>d("AdminRecentActionMessage.ParticipantMuted"),ExpandableContent:()=>n(Z,{get peerId(){return Se(e.participant?.peer)}})}),channelAdminLogEventActionParticipantUnmute:({action:e})=>({group:"calls",Message:()=>d("AdminRecentActionMessage.ParticipantUnmuted"),ExpandableContent:()=>n(Z,{get peerId(){return Se(e.participant?.peer)}})}),channelAdminLogEventActionToggleGroupCallSetting:({action:e})=>({group:"calls",Message:()=>d("AdminRecentActionMessage.ToggleGroupCallSetting"),ExpandableContent:()=>n(X,{get label(){return n(q,{key:"AdminRecentActions.JoinMuted"})},get value(){return e.join_muted}})}),channelAdminLogEventActionParticipantJoinByInvite:({action:e})=>({group:"join",Message:()=>d("AdminRecentActionMessage.ParticipantJoinedByInvite"),ExpandableContent:()=>n(Me,{get invite(){return e.invite}})}),channelAdminLogEventActionExportedInviteDelete:({action:e})=>({group:"invites",Message:()=>d("AdminRecentActionMessage.ExportedInviteDeleted"),ExpandableContent:()=>n(Me,{get invite(){return e.invite}})}),channelAdminLogEventActionExportedInviteRevoke:({action:e})=>({group:"invites",Message:()=>d("AdminRecentActionMessage.ExportedInviteRevoked"),ExpandableContent:()=>n(Me,{get invite(){return e.invite}})}),channelAdminLogEventActionExportedInviteEdit:({action:e})=>({group:"invites",Message:()=>d("AdminRecentActionMessage.ExportedInviteEdited"),ExpandableContent:()=>n(Me,{get invite(){return e.new_invite}})}),channelAdminLogEventActionParticipantVolume:({action:e})=>({group:"calls",Message:()=>d("AdminRecentActionMessage.ParticipantVolumeChanged"),ExpandableContent:()=>n(Z,{get peerId(){return Se(e.participant?.peer)}})}),channelAdminLogEventActionChangeHistoryTTL:({action:e})=>({group:"messages",Message:()=>d("AdminRecentActionMessage.ChangeHistoryTTL"),ExpandableContent:()=>n(ee,{get label(){return n(q,{key:"AdminRecentActions.AutoDeleteTimer"})},get value(){return B(()=>!!e.new_value)()?Ge(Ke(e.new_value)):d("AdminRecentActions.Disabled")}})}),channelAdminLogEventActionParticipantJoinByRequest:({action:e})=>({group:"participants",Message:()=>d("AdminRecentActionMessage.ParticipantJoinedByRequest"),ExpandableContent:()=>n(Z,{get label(){return d("AdminRecentActions.ApprovedBy")},get peerId(){return e.approved_by.toPeerId()}})}),channelAdminLogEventActionToggleNoForwards:({action:e})=>({group:"permissions",Message:()=>e.new_value?d("AdminRecentActionMessage.ToggleNoForwardsEnabled"):d("AdminRecentActionMessage.ToggleNoForwardsDisabled")}),channelAdminLogEventActionSendMessage:({action:e,channelId:t})=>({group:"messages",Message:()=>d("AdminRecentActionMessage.MessageSent"),ExpandableContent:()=>n(le,{channelId:t,get added(){return e.message},addedKey:"AdminRecentActions.ViewSentMessage"})}),channelAdminLogEventActionChangeAvailableReactions:()=>({group:"reactions",Message:()=>d("AdminRecentActionMessage.ChangeAvailableReactions")}),channelAdminLogEventActionChangeUsernames:()=>({group:"identity",Message:()=>d("AdminRecentActionMessage.ChangeUsernames")}),channelAdminLogEventActionToggleForum:({action:e})=>({group:"forum",Message:()=>d("AdminRecentActionMessage.ToggleForum"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionCreateTopic:({action:e})=>({group:"topics",Message:()=>d("AdminRecentActionMessage.TopicCreated"),ExpandableContent:()=>n(I,{get added(){return n(ae,{get topic(){return e.topic}})}})}),channelAdminLogEventActionEditTopic:({action:e})=>({group:"topics",Message:()=>d("AdminRecentActionMessage.TopicEdited"),ExpandableContent:()=>n(I,{get added(){return n(ae,{get topic(){return e.new_topic}})},get removed(){return n(ae,{get topic(){return e.prev_topic}})}})}),channelAdminLogEventActionDeleteTopic:({action:e})=>({group:"topics",Message:()=>d("AdminRecentActionMessage.TopicDeleted"),ExpandableContent:()=>n(I,{get removed(){return n(ae,{get topic(){return e.topic}})}})}),channelAdminLogEventActionPinTopic:({action:e})=>({group:"topics",Message:()=>d(e.new_topic?"AdminRecentActionMessage.TopicPinned":"AdminRecentActionMessage.TopicUnpinned"),ExpandableContent:()=>n(I,{get added(){return B(()=>!!e.new_topic)()?n(ae,{get topic(){return e.new_topic}}):void 0},get removed(){return B(()=>!!e.prev_topic)()?n(ae,{get topic(){return e.prev_topic}}):void 0}})}),channelAdminLogEventActionToggleAntiSpam:({action:e})=>({group:"permissions",Message:()=>d("AdminRecentActionMessage.ToggleAntiSpam"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionChangePeerColor:()=>({group:"appearance",Message:()=>d("AdminRecentActionMessage.ChangePeerColor")}),channelAdminLogEventActionChangeProfilePeerColor:()=>({group:"appearance",Message:()=>d("AdminRecentActionMessage.ChangeProfilePeerColor")}),channelAdminLogEventActionChangeWallpaper:()=>({group:"appearance",Message:()=>d("AdminRecentActionMessage.ChangeWallpaper")}),channelAdminLogEventActionChangeEmojiStatus:()=>({group:"appearance",Message:()=>d("AdminRecentActionMessage.ChangeEmojiStatus")}),channelAdminLogEventActionChangeEmojiStickerSet:()=>({group:"appearance",Message:()=>d("AdminRecentActionMessage.ChangeEmojiStickerSet")}),channelAdminLogEventActionToggleSignatureProfiles:({action:e})=>({group:"identity",Message:()=>d("AdminRecentActionMessage.ToggleSignatureProfiles"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})}),channelAdminLogEventActionParticipantSubExtend:({action:e})=>({group:"participants",Message:()=>d("AdminRecentActionMessage.ParticipantSubscriptionExtended"),ExpandableContent:()=>n(Z,{get peerId(){return pe(e.new_participant)}})}),channelAdminLogEventActionToggleAutotranslation:({action:e})=>({group:"translations",Message:()=>d("AdminRecentActionMessage.ToggleAutoTranslation"),ExpandableContent:()=>n(X,{get value(){return e.new_value}})})},Nt=({channelId:e,event:t,isBroadcast:i,isForum:a})=>{const s=Ut[t.action._];return s?s({channelId:e,action:t.action,isBroadcast:i,isForum:a}):null},Wt={info:"info",identity:"username",media:"image",permissions:"permissions",messages:"message",participants:"group",join:"adduser",invites:"link",leave:"deleteuser",links:"link",location:"location",calls:"phone",topics:"topics",appearance:"brush",reactions:"reactions",forum:"comments",translations:"language",pinned:"pin",other:"more"},Jt="_Container_1gnhs_2",Qt="_Header_1gnhs_18",Yt="_Group_1gnhs_25",Xt="_Icon_1gnhs_30",Zt="_NameRow_1gnhs_35",er="_PeerTitle_1gnhs_41",nr="_PeerTitleText_1gnhs_52",tr="_PeerTitleTextClickArea_1gnhs_56",rr="_Message_1gnhs_73",ar="_ExpandableContent_1gnhs_92",or="_ExpandableContentWrapper_1gnhs_98",ir="_ExpandableContentTitle_1gnhs_101",sr="_ExpandableContentSpace_1gnhs_104",F={Container:Jt,Header:Qt,Group:Yt,Icon:Xt,NameRow:Zt,PeerTitle:er,PeerTitleText:nr,PeerTitleTextClickArea:tr,Message:rr,Date:"_Date_1gnhs_84",ExpandableContent:ar,ExpandableContentWrapper:or,ExpandableContentTitle:ir,ExpandableContentSpace:sr},dr=L("<div><div>"),cr=L("<div>"),lr=L("<div><div><div>"),gr=L("<div><div><div></div><div><div><div><div></div></div></div></div><div>"),ur=e=>{const[t,i]=k(!1);return(()=>{const a=gr(),s=a.firstChild,r=s.firstChild,c=r.nextSibling,l=c.firstChild,o=l.firstChild,u=o.firstChild,m=c.nextSibling;return a.$$click=g=>{g.target.closest(".interactable")||!t()&&e.onExpandedChange?.(!e.expanded)},A(r,n(te,{get icon(){return e.icon}})),Te(o,"click",e.onPeerTitleClick,!0),A(o,()=>e.peerTitle,null),A(c,n(qe,{onRunningAnimations:g=>i(!!g),get children(){return n($,{get when(){return!e.expanded},get children(){const g=dr(),p=g.firstChild;return A(p,()=>e.message),y(()=>h(p,F.Message)),g}})}}),null),A(m,()=>hn(e.date,{withTime:!0,shortMonth:!0})),A(a,n(qe,{scale:!0,get children(){return n($,{get when(){return e.expanded},get children(){const g=lr(),p=g.firstChild,C=p.firstChild;return A(C,()=>e.message),A(p,n($,{get when(){return e.expandableContent},get children(){return[(()=>{const v=cr();return y(()=>h(v,F.ExpandableContentSpace)),v})(),B(()=>e.expandableContent)]}}),null),y(v=>{const w=F.ExpandableContentWrapper,f=F.ExpandableContent,M=F.ExpandableContentTitle,E={[F.offset]:e.offsetTitle};return w!==v._v$&&h(g,v._v$=w),f!==v._v$2&&h(p,v._v$2=f),M!==v._v$3&&h(C,v._v$3=M),v._v$4=ne(C,E,v._v$4),v},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),g}})}}),null),y(g=>{const p=F.Container,C=F.Header,v=F.Icon,w=F.Group,f=F.PeerTitle,M=`${F.PeerTitleText} interactable`,E=F.PeerTitleTextClickArea,R=F.Date;return p!==g._v$5&&h(a,g._v$5=p),C!==g._v$6&&h(s,g._v$6=C),v!==g._v$7&&h(r,g._v$7=v),w!==g._v$8&&h(c,g._v$8=w),f!==g._v$9&&h(l,g._v$9=f),M!==g._v$10&&h(o,g._v$10=M),E!==g._v$11&&h(u,g._v$11=E),R!==g._v$12&&h(m,g._v$12=R),g},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0}),a})()};we(["click"]);const mr="_Overlay_1amcu_1",vr="_Container_1amcu_10",hr="_Icon_1amcu_22",_r="_Title_1amcu_27",ge={Overlay:mr,Container:vr,Icon:hr,Title:_r},pr=L("<div><div><div></div><div>"),Ar=e=>(()=>{const t=pr(),i=t.firstChild,a=i.firstChild,s=a.nextSibling;return A(i,n(te,{icon:"clipboard",get class(){return ge.Icon}}),a),A(a,n(q,{get key(){return e.forFilters?"AdminRecentActionsPlaceholder.WithFilterTitle":"AdminRecentActionsPlaceholder.Title"}})),A(s,n(q,{get key(){return e.forFilters?"AdminRecentActionsPlaceholder.WithFilterDescription":"AdminRecentActionsPlaceholder.Description"}})),y(r=>{const c=ge.Overlay,l=ge.Container,o=ge.Title,u=ge.Description;return c!==r._v$&&h(t,r._v$=c),l!==r._v$2&&h(i,r._v$2=l),o!==r._v$3&&h(a,r._v$3=o),u!==r._v$4&&h(s,r._v$4=u),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})(),fr="_IconsFlex_1utce_1",Cr="_Item_1utce_6",$r="_hidden_1utce_14",Mr="_absolute_1utce_18",Ee={IconsFlex:fr,Item:Cr,hidden:$r,absolute:Mr},en=L("<div>"),Er=30,br=200,xr=20,nn=70,wr=120,Tr=200,yr=20,Rr=50,Pr=120,Ir=100,ta=()=>{const{rootScope:e,PeerTitleTsx:t,apiManagerProxy:i,appImManager:a,ChatType:s}=oe(),[r]=Tn(),c=i.isForum(r.payload.channelId.toPeerId(!0));let l=!0,o=!1,u=!0,m=!1,g=0;const[p,C]=k(!1),[v,w]=k(null),[f,M]=k(!0),[E,R]=Sn(),[j,W]=k([]),ie=_=>e.managers.appChatsManager.getAdminLogs({channelId:r.payload.channelId,search:v()?.search,admins:v()?.admins,flags:v()?.flags,limit:Er,offsetId:_}).then(({items:S})=>S),[G]=_n(()=>v()||{},()=>ie()),se=O(()=>f()&&!E().size),ye=pn(()=>[f(),E()],(_,[S,x])=>S?!x.has(_):x.has(_));xe(()=>{l=!0,o=!1,m=!1,N(()=>{W(G()||[]),R(new Set)}),g=r.scrollable.container.scrollTop,r.scrollable.container.scrollTop=0});const me=An(async()=>{if(G.loading||m)return;const _=yn(j());if(!_)return;const S=await ie(_.id);if(!S.length){m=!0;return}const x=new Set(S.map(H=>String(H.id)));W([...j().filter(H=>!x.has(String(H.id))),...S])},br),ve=Rn(()=>{r.scrollable.updateThumb()},Ir),re=()=>{const _=se();N(()=>{M(!_),R(new Set)})},T=_=>{N(()=>{R(S=>{const x=new Set(S);return x.has(_)?x.delete(_):x.add(_),x}),E().size===j().length&&(M(!f()),R(new Set))})},J=()=>{En("logsDiffView",!1),r.close(),a.setInnerPeer({peerId:r.payload.channelId.toPeerId(!0),type:s.Logs})},P=()=>{me(),ve()};return[n(Ve,{get mount(){return r.header},get children(){const _=en();return A(_,n(ue,{name:"fade",mode:"outin",get children(){return n($,{get when(){return j().length},get children(){return n(nt,{get expanded(){return se()},onClick:re})}})}}),null),A(_,n(ue,{name:"fade",mode:"outin",get children(){return n($,{get when(){return j().length||v()},get children(){return n(Oe,{icon:"filter",onClick:()=>C(!p())})}})}}),null),A(_,n(Oe,{icon:"message",onClick:J}),null),y(()=>h(_,Ee.IconsFlex)),_}}),n(Ve,{get mount(){return r.content},get children(){return n(_t,{get channelId(){return r.payload.channelId},get isBroadcast(){return r.payload.isBroadcast},get open(){return p()},onClose:()=>C(!1),get committedFilters(){return v()},onCommit:w})}}),n(ue,{name:"fade-2",onExit:(_,S)=>{const x=_;x.classList.add(Ee.absolute),x.style.transform=`translateY(${-g}px)`,fn(200).then(S)},onAfterExit:()=>{r.scrollable.updateThumb()},get children(){return[n($,{get when(){return B(()=>G.state==="ready")()&&G()?.length===0},get children(){return n(Ar,{get forFilters(){return!!v()}})}}),n($,{keyed:!0,get when(){return B(()=>!!j().length)()?G():!1},get children(){return n(Wn,{get list(){return j()},measureElementHeight:_=>_.offsetHeight,estimateItemHeight:()=>f()?wr:nn,maxBatchSize:xr,get scrollable(){return r.scrollable.container},onNearBottom:P,verticalPadding:8,renderAtLeastFromBottom:({clientHeight:_})=>Math.ceil(_/nn),Item:_=>{let S;const x=O(()=>_.payload),H=O(()=>Nt({channelId:r.payload.channelId,event:x(),isBroadcast:r.payload.isBroadcast,isForum:c})),he=Cn.isAvailable("animations"),[_e,He]=k(he&&l);return l&&he&&($n(()=>{S?.animate({opacity:[0,1],transform:["translateY(-4px)","translateY(0)"]},{duration:Tr,delay:_.idx*(f()?Rr:yr)+(u?0:Pr)}).finished.then(()=>{He(!1)})}),o||(o=!0,queueMicrotask(()=>{l=!1,u=!1}))),(()=>{const K=en();return an(D=>{S=D,_.ref instanceof Function&&_.ref(D)},K),A(K,n($,{get when(){return H()},get children(){return n(ur,{get peerTitle(){return n(t,{get peerId(){return x().user_id.toPeerId()},limitSymbols:be})},get message(){return n(Fe,{get component(){return H().Message}})},get date(){return new Date(x().date*1e3)},get icon(){return Wt[H().group]},onExpandedChange:()=>T(x()),get expanded(){return ye(x())},get expandableContent(){return B(()=>!!H().ExpandableContent)()&&n(Mn,{get fallback(){return[]},get children(){return n(Fe,{get component(){return H().ExpandableContent}})}})},get onPeerTitleClick(){return De(x().user_id.toPeerId())}})}})),y(D=>{const je=Ee.Item,on={[Ee.hidden]:_e()||_.isMeasuring},Re=`${_.offset}px`,Pe=`${_.translation}px`;return je!==D._v$&&h(K,D._v$=je),D._v$2=ne(K,on,D._v$2),Re!==D._v$3&&((D._v$3=Re)!=null?K.style.setProperty("--top",Re):K.style.removeProperty("--top")),Pe!==D._v$4&&((D._v$4=Pe)!=null?K.style.setProperty("--translation",Pe):K.style.removeProperty("--translation")),D},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),K})()}})}})]}})]};export{ta as default};
//# sourceMappingURL=index-CWWltwLD.js.map
