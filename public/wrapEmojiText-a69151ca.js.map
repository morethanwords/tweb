{"version":3,"mappings":"mrBAAwB,YAAkBA,EAAiBC,EAAgE,CACjH,UAASD,EAAM,OAAQE,EAAIC,EAAS,EAAGD,GAAK,EAAG,EAAEA,EACvDD,EAASD,EAAME,CAAC,EAAGA,EAAGF,CAAK,CAE/B,CCFA,SAAwBI,GAASC,EAA0B,CACrD,IACI,QAAUA,EAAM,OACnBC,aAAmB,SACpBA,EAAQ,MAAMC,EAAI,QAEdC,GACN,QAAQ,MAAMA,CAAC,CACjB,CACF,CCiCO,MAAMC,EAAqB,CAahC,aAAc,CACZ,KAAK,SAAW,IAAI,qBAAsBC,GAAY,CAGpD,UAAUC,KAASD,EAAS,CAC1B,MAAME,EAASD,EAAM,OAEX,eAAS,KAAK,SAAU,CAC7B,QAAK,yBAAyBE,CAA2B,EAC1D,SAGI,QAAY,KAAK,SAASA,CAA2B,EAAE,KAAMC,GAAMA,EAAE,KAAOF,CAAM,EACxF,GAAIG,EAIJ,IAAGJ,EAAM,eACF,aAAQ,IAAII,CAAS,EACrB,oBAAeA,EAAW,EAAK,MAM/B,CACA,aAAQ,OAAOA,CAAS,EACxB,oBAAeA,EAAW,EAAI,EAEnC,MAAMC,EAAaD,EAAU,UAC1BA,EAAU,OAAS,UAEnBC,EAA6B,WAAW,EAQ7C,QAEJ,CACD,EAEI,iBAAc,IAEd,4BAAyB,IAC9B,KAAK,SAAW,GACX,kBAAe,IACpB,KAAK,aAAe,GACpB,KAAK,qBAAuB,GAE5B,KAAK,yBAA2B,GAChC,KAAK,aAAe,GAELC,oBAAiB,SAAWC,GAAS,CAClD,KAAK,iBAAiBA,CAAI,EAC3B,CACH,CAEO,iBAAiBC,EAAiB,CACpCA,EACE,KAAK,eACN,KAAK,aAAe,GACpB,KAAK,iBAAiB,IAGxB,KAAK,aAAe,GACpB,KAAK,iBAAiB,EAE1B,CAEO,qBAAqBN,EAAeO,EAAmB,CACzDA,EAAe,wBAAmB,IAAIP,CAAK,EACpC,wBAAmB,OAAOA,CAAK,CAC3C,CAEO,cAAcQ,EAAsB,CACzC,MAAMC,EAAyB,GACrB,eAAS,KAAK,SACtB,UAAUC,KAAU,KAAK,SAASV,CAA2B,EACxDU,EAAO,KAAOF,GACfC,EAAM,KAAKC,CAAM,EAKhB,QACT,CAEO,gBAAgBA,EAAuB,CACtC,MAAC,KAAI,WAAa,IACrB,CAACA,EAAO,YAAcA,EAAO,OAAS,SACvCR,EAAU,OAAO,EAGhBQ,EAAO,OAAS,SAAWC,IAC5B,WAAW,IAAM,CACdT,EAA+B,IAAM,GACrCA,EAA+B,KAAK,GACpC,GAAG,EAGR,MAAMF,EAAQ,KAAK,SAASU,EAAO,KAAK,EACrCV,IACDY,GAAiBZ,EAAOU,CAAM,EAC1BV,EAAM,QACD,YAAK,SAASU,EAAO,KAAK,GAIhC,cAAS,UAAUG,CAAE,EACrB,aAAQ,OAAOH,CAAM,EACrB,cAAS,OAAOR,CAAS,CAChC,CAEO,wBAAwBQ,EAA8B,CAC3D,MAAMI,EAAO,KAAK,SAAS,IAAIJ,CAAM,EAClCI,GACD,KAAK,gBAAgBA,CAAI,CAE7B,CAEO,aAAaC,EAOjB,OACK,MAAC,YAAW,QAAQ,GAAI,iBAAgB,aAAY,cAAa,MAAQ,IAC/E,GAAGf,IAAU,QAAU,KAAK,SAAS,IAAIE,CAAS,EAChD,OAGF,MAAMY,EAAsB,CAC1B,GAAIE,EACJ,YACA,QACA,aACA,cACA,QAGCC,GAAc,OAAOA,GAAgB,WACtCA,EAAW,QAAQ,IAAM,CACvB,KAAK,wBAAwBf,CAAS,EACvC,EAGAY,EAAK,OAAS,UACZ,CAACI,EAAU,SAAS,SAAS,MAAQhB,EAAU,OACtCA,OAAOgB,EAAU,SAAS,SAAS,QAIhDC,OAAK,UAALnB,UAA+C,KAAI,KAAKc,CAAI,EACxD,cAAS,QAAQA,EAAK,EAAE,EACxB,cAAS,IAAIZ,EAAWY,CAAI,CACnC,CAEO,gBACLM,EACApB,EACAqB,EACAC,EACA,CAGA,GAAGtB,IAAU,QAAa,CAAC,KAAK,SAASA,CAAK,EAE5C,OAGI,QAASA,IAAU,OAA2B,CAACA,CAAK,EAAI,OAAO,KAAK,KAAK,QAAQ,EAEvF,UAAUA,KAASuB,EAAQ,CACzB,GAAGD,GAAuB,KAAK,yBAAyBtB,CAAK,EAC3D,SAGI,QAAa,KAAK,SAASA,CAAK,EAEvBwB,KAAatB,GAAc,CACnC,oBAAeA,EAAWkB,EAASC,CAAO,EAChD,EAEL,CAEO,iBAAiBD,EAAmB,CACzC,KAAK,gBAAgBA,EAAS,OAAW,OAAW,EAAI,CAC1D,CAEO,eAAeV,EAAuBU,EAAmBC,EAAmB,CACjF,KAAM,CAAC,KAAI,YAAW,SAASX,EAE5B,MAAY,CAAC,KAAK,aAAaV,CAAK,GAAK,CAACyB,GAAQZ,CAAE,EAAI,EACtD,CAACH,EAAO,YAAcW,IACvB,KAAK,gBAAgBX,CAAM,EAG7B,OAGCU,GACA,KAAK,sBAAwB,KAAK,uBAAyBpB,GAC3DU,EAAO,OAAS,SAAW,KAAK,aAE7BR,EAAU,QAEZA,EAAU,MAAM,EAEVA,EAAU,QAClB,KAAK,QAAQ,IAAIQ,CAAM,GACvBR,EAAU,WACT,CAAC,KAAK,sBAAwB,KAAK,uBAAyBF,KAC5D,CAACI,GAAe,QAAU,KAAK,mBAAmB,IAAIM,EAAO,KAAK,IAGnEnB,GAASW,CAAS,CAEtB,CAEO,yBAA0B,CAC/B,OAAO,KAAK,oBACd,CAEO,wBAAwBF,EAA4B,GAAI,CAC7D,KAAK,qBAAuBA,CAC9B,CAEO,UAAUA,EAA2B,CACrC,kBAAaA,CAAK,EAAI,EAC7B,CAEO,YAAYA,EAA2B,CACrC,YAAK,aAAaA,CAAK,EACzB,qBAAgB,OAAWA,CAAK,CACvC,CAEO,aAAaA,EAA2B,CACvC,QAAa,KAAK,SAASA,CAAK,EAClC0B,GAAY,SAILA,UAASxB,GAAc,CAC3B,cAAS,UAAUA,EAAU,EAAE,EACrC,EAEDyB,GAAQ,IAAM,CACDD,UAASxB,GAAc,CAC3B,cAAS,QAAQA,EAAU,EAAE,EACnC,EACF,EACH,CAEO,sBAAsBF,EAA2B,CACjD,8BAAyBA,CAAK,EAAI,EACzC,CAEO,wBAAwBA,EAA2B,CACjD,YAAK,yBAAyBA,CAAK,EAC1C,KAAK,aAAaA,CAAK,CACzB,CAEO,wBAAwBA,EAA2B4B,EAAe,CACpEA,EAAM,KAAK,sBAAsB5B,CAAK,EACpC,KAAK,wBAAwBA,CAAK,CACzC,CAEO,YAAY6B,EAAeC,EAA0B,CAC1D,IAAIC,EAAU,GACd,YAAK,SAAS,QAAQ,CAACC,EAAe9B,IAAc,CAC/C8B,EAAc,cAAgBF,IACrBC,KACA7B,WAAW2B,EAAO,CAAC,CAAC,CAACG,EAAc,GAAG,QAAQ,YAAc,GACtE9B,EAAU,KAAO2B,EAAO,CAAC,CAAC,CAACG,EAAc,GAAG,QAAQ,aAAed,EAAU,SAAS,SAAS,KAAO,GACxG,CACD,EAEMa,CACT,CAEO,QAAQE,EAAe,CAC5B,IAAIF,EAAU,GACd,YAAK,SAAS,QAAQ,CAACC,EAAe9B,IAAc,CAC7C,CAAC8B,EAAc,GAAG,QAAQ,aAC7B9B,EAAU,OAAS+B,IAClBD,EAAc,OAAS,UAAYA,EAAc,OAAS,WACjDD,KACV7B,EAAU,KAAO+B,EAGjB/B,EAAU,SAAW,CAAC,CAAC,CAAC8B,EAAc,GAAG,QAAQ,YAEnD,CACD,EAEMD,CACT,CACF,CAEM,SAAuB,IAAInC,GACjCsC,KAAmBA,GAAe,qBAAuBC,IC3WnD,SAA4B,OAAO,YAAiB,ICmBnD,MAAMC,EAAY,CAGvB,aAAc,CACP,eAAY,GACnB,CAEA,OAAc,aAA+B,CAC3C,MAAMC,EAAyB,CAC7B,WAAY,IACZ,cAAe,IACf,eAAgB,IAChB,WAAY,IAAM,CACVA,YAAU,QAASC,GAAU,CAChCA,EAAsB,QAAQ,EAChC,EAEDD,EAAM,OAAO,QACbA,EAAM,UAAU,QAChBA,EAAM,WAAW,OACnB,EACA,QAAS,GAGJ,QACT,CAEO,SAASE,EAAc,CAC5B,IAAIF,EAAQ,KAAK,MAAM,IAAIE,CAAI,EAC/B,OAAIF,GACF,KAAK,MAAM,IAAIE,EAAMF,EAAQD,GAAY,aAAa,EAKxD,EAAEC,EAAM,QACDA,CACT,CAEO,aAAaE,EAAc,CAChC,MAAMF,EAAQ,KAAK,MAAM,IAAIE,CAAI,EAC9BF,GAAS,CAAC,EAAEA,EAAM,SACd,WAAM,OAAOE,CAAI,CAG1B,CAEO,gBAAgBA,EAAc,CAEnC,OADc,KAAK,MAAM,IAAIA,CAAI,GACnB,OAChB,CAEO,aAAaA,EAAcC,EAAeC,EAAgBC,EAAqBC,EAAmB,CAChG,OACLJ,EACAC,EACAC,EAGAE,GAAa,EACb,SAAO,OAAO,EAAE,KAAK,GAAG,CAC5B,CACF,CAEA,MAAMC,GAAc,IAAIR,GCtCR,YAAoBI,EAAeC,EAAgBI,EAAuB,CACxF,IAAIC,EAAaC,GAAM,OAAO,iBAAkB,EAAG,CAAC,EACjD,SAAa,GAAK,CAACF,IACjBL,EAAQ,IAAMC,EAAS,GACrB,CAACO,IAAYC,GAAW,WACZH,MAENN,EAAQ,IAAMC,EAAS,IAAOS,MACvCJ,EAAa,KAAK,IAAI,IAAKA,EAAa,GAAG,IAIxCA,CACT,CAEO,SAASK,GACdC,EACAV,EACAW,EACAC,EACAd,EACAC,EACA,CACAW,EAAQ,yBAA2B,cACnCA,EAAQ,UAAY,OAAOV,GAAW,SAAWA,EAAQ,OAAOA,EAAM,CAAC,MAAMA,EAAM,CAAC,MAAMA,EAAM,CAAC,KACjGU,EAAQ,SAASC,EAAGC,EAAGd,EAAOC,CAAM,EACpCW,EAAQ,yBAA2B,aACrC,CAEA,MAAqBG,GAArB,cAA2CC,EAMR,CAgEjC,YAAY,CAAC,KAAI,SAAQ,WAItB,CACD,MAAM,EAAI,EAjEZ,KAAO,MAAQ,EAWf,KAAQ,MAAQ,EAChB,KAAQ,OAAS,EAMjB,KAAO,OAAS,GAEhB,KAAO,UAAY,EACnB,KAAQ,MAAQ,EAChB,KAAO,SAAW,GAElB,KAAO,KAAyB,GAEhC,KAAO,MAA4B,GAanC,KAAQ,aAAe,EASvB,KAAQ,YAAc,EAmBf,WAAQ,EAAED,GAAc,MAC7B,KAAK,GAAK1C,EACV,KAAK,OAAS4C,EAEd,UAAUpE,KAAK0B,EACV,KAAK,eAAe1B,CAAC,IAEjB,MAAC,EAAI0B,EAAQ1B,CAAC,GAIvB,KAAK,MAAQ,KAAK,KAClB,KAAK,UAAY,KAAK,SAGtB,KAAK,UAAY0B,EAAQ,UACzB,KAAK,MAAQA,EAAQ,MACrB,KAAK,UAAYA,EAAQ,UACzB,KAAK,KAAOA,EAAQ,KACpB,KAAK,wBAA0BA,EAAQ,wBACvC,KAAK,UAAYA,EAAQ,UACzB,KAAK,IAAM,GACX,KAAK,YAAcA,EAAQ,YAExB,KAAK,OACD,eAAYwC,GAAc,MAAM,aACnC,KAAK,KACL,KAAK,MACL,KAAK,OACL,KAAK,MACL,KAAK,YAKL,MACDxC,EAAQ,YAAc,OAAW2C,EAAY3C,EAAQ,WAC/CmC,IAAcS,IAAoBX,IAAY,CAACrC,IAAa,CAACiD,KAAiB,KAAK,MAAQ,KAAO,KAAK,OAAS,KAAO,CAAC7C,EAAQ,cAC3H2C,MAGd,KAAK,UAAYA,IAAc,OAAY,EAAIA,EAAY,EAAI,EAK/D,MAAMZ,EAAae,GAAoB,KAAK,MAAO,KAAK,OAAQ9C,EAAQ,WAAW,EAEnF,KAAK,MAAQ,KAAK,MAAM,KAAK,MAAQ+B,CAAU,EAC/C,KAAK,OAAS,KAAK,MAAM,KAAK,OAASA,CAAU,EAK7C/B,EAAQ,UAEPiC,IAAY,KAAK,MAAQ,KAAO,KAAK,OAAS,IAC/C,KAAK,aAAe,EACZ,KAAK,MAAQ,KAAO,KAAK,OAAS,IAC1C,KAAK,aAAe,IAEpB,KAAK,aAAe,GAUpB,KAAK,SACP,KAAK,OAAS,KAAK,GAAG,IAAI,IAAM,CACxB,QAAS,SAAS,cAAc,QAAQ,EACvC,mBAAU,IAAI,SAAS,EAC9Bc,EAAO,MAAQ,KAAK,MACpBA,EAAO,OAAS,KAAK,OACrBA,EAAO,IAAMhB,EACNgB,EACR,GAGE,cAAW,KAAK,OAAO,IAAKA,GAAWA,EAAO,WAAW,IAAI,CAAC,GAEhE,CAACC,IAA6B,KAAK,OACpC,KAAK,UAAY,IAAI,UAAU,KAAK,MAAO,KAAK,MAAM,EAEnDC,KACD,KAAK,QAAU,IAAI,kBAAkB,KAAK,MAAQ,KAAK,OAAS,CAAC,IAIlE,KAAK,KACN,KAAK,MAAQT,GAAc,MAAM,SAAS,KAAK,SAAS,EAEnD,WAAQnB,GAAY,aAE7B,CAEO,QAAQI,EAAeC,EAAgB,CAC5C,KAAK,MAAQD,EACb,KAAK,OAASC,EACT,YAAO,QAASqB,GAAW,CAC9BA,EAAO,MAAQtB,EACfsB,EAAO,OAASrB,EACjB,CACH,CAEO,YAAa,CACf,KAAK,eAAiB,MAItB,KAAK,WAAa,KAAK,MAAM,QAAU,GAI1C,KAAK,MAAM,aACb,CAEO,UAAUwB,EAAaC,EAA2B,CAClD,YAAO,UAAU,CAACD,EAAK,QAAS,KAAK,MAAO,GAAGA,CAAI,EAAGC,CAAQ,CACrE,CAEO,aAAaC,EAAuC,CACzD,KAAK,UAAU,CACb,eACAA,EACA,KAAK,MACL,KAAK,OACL,KAAK,UACL,KAAK,IAEN,CACH,CAEO,MAAO,CACR,KAAK,SAIT,KAAK,OAAS,GACd,KAAK,YAAY,EACnB,CAEO,MAAMC,EAAkB,GAAM,CAChC,KAAK,SAIR,KAAK,OAAS,GACXA,IACD,aAAa,KAAK,KAAK,EACvB,KAAK,MAAQ,QAGjB,CAEQ,mBAAoB,CACnB,YAAK,SAAW,KAAK,YAAc,KAAK,YAAc,EAAI,KAAK,SAAW,KAAK,SACxF,CAEO,KAAKC,EAAmB,GAAM,CACnC,KAAK,MAAM,EAEL,QAAW,KAAK,oBACnBA,GACD,KAAK,aAAaC,CAAQ,CAG9B,CAEO,SAAU,CACf,KAAK,KAAK,EAAK,EACf,KAAK,KAAK,CACZ,CAEO,eAAgB,CACjB,KAAK,SAIN,KAAK,WAAa,KAAK,SACxB,KAAK,QAAQ,EAEb,KAAK,KAAK,EAEd,CAEO,SAASC,EAAe,CAC1B,KAAK,QAAUA,IAIlB,KAAK,MAAQA,EAET,KAAK,QACP,KAAK,YAAY,EAErB,CAEO,aAAaC,EAAmB,CAClC,KAAK,YAAcA,IAItB,KAAK,UAAYA,EAEb,KAAK,QACP,KAAK,YAAY,EAErB,CAEO,QAAS,CACd,KAAK,MAAM,EACN,eAAU,CAAC,SAAS,CAAC,EACvB,KAAK,WAAyBjB,SAAM,aAAa,KAAK,SAAS,EAClE,KAAK,cAAc,SAAS,EAC5B,KAAK,QAAQ,CACf,CAEO,aAAakB,EAA4DC,EAAiB,CAI3F,IACCD,aAAiB,mBACb,eAAU,KAAK,IAAIA,CAAK,EAI/B,KAAK,SAAS,QAAQ,CAACrB,EAASuB,IAAQ,CACtC,IAAIC,EAAgD,KAAK,MAAM,UAAU,IAAIF,CAAO,EAOpF,GANKD,aAAiB,kBAEZE,EAAM,IACCC,OAAK,OAAO,CAAC,GAFbA,IAKd,CAACA,EAAc,CACV,QAAI,SAAS,cAAc,QAAQ,EACvCC,QAAQzB,EAAQ,OAAO,MACvByB,SAASzB,EAAQ,OAAO,OAC1ByB,EAAE,WAAW,IAAI,EAAE,aAAa,KAAK,UAAW,EAAG,CAAC,EACpD,KAAK,MAAM,UAAU,IAAIH,EAASG,CAAC,EACpBD,IAGd,KAAK,gBAAkB,KAAK,mBACxB,oBAAeA,GAAgB,KAAK,SAAS,EAC1CA,GACRxB,EAAQ,UAAU,EAAG,EAAGwB,EAAa,MAAOA,EAAa,MAAM,EACvDxB,YAAUwB,EAAc,EAAG,CAAC,GAEpCxB,EAAQ,aAAa,KAAK,UAAW,EAAG,CAAC,GAGxC,KAAK,OAAS,KAAK,YACpBD,GACEC,EACA,KAAK,OAAS0B,GAAiB,YAAY,KAAK,SAAS,EACzD,EACA,EACA,KAAK,MACL,KAAK,QAIL,KAAK,qBACP,KAAK,mBAAqB,GAC5B,CACD,EAEI,mBAAc,aAAcJ,CAAO,QAClCK,GACN,QAAQ,MAAM,mCAAoCA,EAAkB,KAAK,MAAO,KAAK,MAAM,EAC3F,KAAK,SAAW,GAChB,KAAK,MAAM,CACb,CACF,CAEO,YAAYN,EAAqDC,EAAiB,CAmBvF,GAlBsB,KAAK,eAAiBA,EAAU,KAAK,cAAgB,CAACA,KAEvED,aAAiB,mBAAqB,CAAC,KAAK,MAAM,OAAO,IAAIC,CAAO,EACrE,KAAK,MAAM,OAAO,IAAIA,EAAS,IAAI,kBAAkBD,CAAK,CAAC,EACnDV,IAA6BU,aAAiB,aAAe,CAAC,KAAK,MAAM,UAAU,IAAIC,CAAO,GACtG,KAAK,MAAM,UAAU,IAAIA,EAASD,CAAK,GAaxC,KAAK,WAAY,CAClB,MAAMO,EAAM,KAAK,MAAOC,EAAQD,EAAM,KAAK,OAE3C,GAAGC,EAAQ,EAAG,CACN,QAAU,KAAK,WAAa,CAACA,EAAQ,CAACA,EAAQ,KAAK,WAAa,KAAK,WACxE,KAAK,OAAO,aAAa,KAAK,KAAK,EACjC,WAAQ,OAAO,WAAW,IAAM,CAC9B,kBAAaR,EAAOC,CAAO,GAC/BQ,CAAO,EAEV,QAIC,kBAAaT,EAAOC,CAAO,CAClC,CAEO,aAAaA,EAAiB,CACnC,MAAMD,EAAQ,KAAK,MAAM,OAAO,IAAIC,CAAO,EACrCS,EAAW,KAAK,MAAM,UAAU,IAAIT,CAAO,EAC9CS,EACI,iBAAYA,EAAUT,CAAO,EAC1BD,EACH,iBAAYA,EAAOC,CAAO,GAE5B,KAAK,SAAW,CAAC,KAAK,QAAQ,SAC/B,KAAK,QAAU,IAAI,kBAAkB,KAAK,MAAQ,KAAK,OAAS,CAAC,GAGnE,KAAK,UAAU,CAAC,cAAeA,CAAO,EAAG,KAAK,QAAU,CAAC,KAAK,QAAQ,MAAM,EAAI,MAAS,EAE7F,CAEQ,OAAQ,CAKX,MAJA,EAAE,KAAK,cAAgB,KAAK,OAC7B,KAAK,KAAO,IAGV,KAAK,KAKF,IAJL,KAAK,MAAM,EAAK,EACT,GAIX,CAEQ,kBAAmB,CACnB,MAAC,YAAW,UAAY,OACxBD,EAAS,KAAK,SAAWW,EAAaC,EAAW,KAAK,SAAY,KAAK,KAAO,KAAK,SAAW,KAAK,SAAY,KAAK,UAAYD,EAIlI,OADJ,KAAK,aAAaX,CAAK,EACnBA,EAAQW,EAAaC,EAChB,KAAK,QAGP,EACT,CAEQ,mBAAoB,CACpB,MAAC,YAAW,UAAY,OACxBZ,EAAS,KAAK,SAAWW,EAAaE,EAAW,KAAK,SAAY,KAAK,KAAO,KAAK,SAAW,KAAK,SAAY,KAAK,UAAYF,EAIlI,OADJ,KAAK,aAAaX,CAAK,EACnBA,EAAQW,EAAaE,EAChB,KAAK,QAGP,EACT,CAEO,aAAc,CAEnB,aAAa,KAAK,KAAK,EACvB,KAAK,MAAQ,OAEb,KAAK,WAAa,IAAO,KAAK,IAAM,KAAK,MAAQ,KAAK,UACtD,KAAK,OAAS,KAAK,IAAI,EAAI,KAAK,WAI1B,SAAU,KAAK,YAAc,EAAI,KAAK,iBAAmB,KAAK,mBAAmB,KAAK,IAAI,EAChG,KAAK,cAAgBC,EAOlB,KAAK,eACa,KAAK,gBAAgB,aACtB,QACX,mBAAc,KAAK,QAAQ,CAOtC,CAEO,SAASxE,EAIb,CACD,KAAK,MAAM,EAEX,KAAM,CAAC,OAAM,KAAI,YAAYA,EAC7B,YAAK,SAAWyE,EAAO,EAEhB,KAAK,YAAY,CACtB,MAAOC,EACP,UAAWA,EAAKD,EAAO,EAAI,GAC3B,WACD,CACH,CAEO,YAAYzE,EAKhB,CACD,KAAK,MAAM,EAEX,KAAM,CAAC,QAAO,QAAO,WAAU,aAAaA,EACvC,kBAAayD,IAAc,OAAY,KAAK,SAAWC,EAAQ,GAAK,EAAID,CAAS,EAC5ED,YAAa,KAAK,SAASA,CAAK,EAE1C,MAAMmB,EAAS,CAAC,KAAK,SAAUjB,CAAK,EACjC,KAAK,YAAc,IAAIiB,EAAO,QAAQ,EAEzC,KAAK,KAAO,GACZ,KAAK,UAAUA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EAEhC,KAAK,4BACD,yBAAoB,aAAc,KAAK,0BAA0B,EAGrEtG,IACI,gCAA8BsF,GAAoB,CAClDA,IAAYD,IACR,yBAAoB,aAAc,KAAK,0BAA0B,EAC7DrF,IACX,EAGG,sBAAiB,aAAc,KAAK,0BAA0B,GAGrE,KAAK,KAAK,CACZ,CAEO,SAASsD,EAAqBiD,EAAyB,CAC5D,KAAK,MAAQjD,EAEViD,GAAkB,KAAK,QACxB,KAAK,aAAa,KAAK,UAAU,KAAM,KAAK,QAAQ,CAExD,CAEQ,UAAUL,EAAW,EAAGD,EAAW,KAAK,WAAa,EAAG,CAC9D,KAAK,SAAWC,EAChB,KAAK,SAAWD,CAClB,CAEA,MAAa,OAAOO,EAAoBC,EAAa,CACnD,KAAK,WAAaD,EAClB,KAAK,IAAMC,EACX,KAAK,UAAU,EACZ,KAAK,YAAc,SACpB,KAAK,UAAY9C,GAAM,KAAK,UAAW,KAAK,SAAU,KAAK,QAAQ,GAG/D,QAAW,KAAK,oBAGtB,GAAG,KAAK,IAAM,IAAM,KAAK,YAAc,EAAG,CACxC,MAAM+C,EAAO,GAAKD,EACb,eAAY,KAAK,UAAYC,EAAO,EAG3C,KAAK,WAAa,IAAO,KAAK,IAAM,KAAK,MAAQ,KAAK,UACtD,KAAK,OAAS,KAAK,IAAI,EAAI,KAAK,WAyBhC,CAAC,KAAK,yBAA2B,KAAK,aAAaxB,CAAQ,EAC3D,KAAK,cAAc,OAAO,EACrB,sBAAiB,aAAc,IAAM,CACxC,KAAK,cAAc,YAAY,EAE5B,CAAC,KAAK,OAAO,CAAC,EAAE,YAAc,KAAK,IAAM,CAAC,KAAK,gBAC3C,QAAG,QAAQ,CAACyB,EAAWpB,IAAQoB,EAAU,OAAO,KAAK,OAAOpB,CAAG,CAAC,CAAC,EAMxE,KAAK,cAAgB,IAAM,CACzB,GAAG,KAAK,QAAU,CAAC,KAAK,cACtB,OAGI,QAAO,KAAK,MAQb,YAASqB,EAAO,KAAK,WAEvB,CADiB,KAAK,iBACN,CAAC,KAAK,MAAQ,KAAK,WACpC,KAAK,SAAW,GAClB,EAGG,sBAAiB,aAAc,KAAK,aAAa,EAInD,KAAK,QAAU,QAAU,KAAK,UAC/B,KAAK,KAAK,CACZ,EACC,CAAC,KAAM,GAAK,CACjB,CACF,EApnBA,IAAqBC,GAArB1C,GAAqB0C,GAOL,MAAQrD,GAPHqD,GAQJ,MAAQ,ECzEzB,MAAqBC,WAAwB1C,EAM1C,CACD,YAAoBC,EAAgB,CAC5B,QADY,cAGb,YAAO,QAAW0C,GAAU,CAC3B,IACG,mBAAc,cAAeA,CAAK,EACvC,KAAK,QAAQ,EACb,KAAK,UAAU,QAGjB,GAGG,YAAO,UAAaC,GAAU,CACjC,KAAK,cAAcA,EAAM,KAAK,oBAAqB,GAAGA,EAAM,KAAK,oBAAoB,EAEzF,CAEO,YAAYC,EAAc,CAC1B,YAAO,YAAYA,CAAO,CACjC,CAEO,WAAY,CACjB,KAAK,OAAO,WACd,CAEO,UAAUpC,EAAaC,EAA2B,CACvD,KAAK,OAAO,YAAY,CACtB,YAAaD,EAAK,MAAM,EACxB,qBAAsBA,CACxB,EAAGD,GAAwBE,EAAU,MAAS,CAChD,CACF,CChDA,MAAMoC,GAA4B,OAAO,YAAiB,IC0BnD,MAAMC,EAAa,CAAnB,cACG,iBAA8BD,GAAmE,OAAvC,QAAQ,OAAOE,GAAU,SAAS,CAAC,EACrG,KAAQ,OAAS,GAEjB,KAAQ,aAAeC,GAAI,QAC3B,KAAQ,QAA4C,GACpD,KAAQ,mBAAgE,GAExE,KAAQ,QAA6B,GACrC,KAAQ,aAAe,EAEvB,KAAQ,IAAMC,GAAO,SAAUC,GAAS,KAAK,EAoK7C,KAAQ,eAAiB,CAACC,EAAehB,EAAoBC,IAAgB,CACrE,QAAS,KAAK,QAAQe,CAAK,EACjC,GAAG,CAAClG,EAAQ,CACV,KAAK,IAAI,KAAK,sCAAuCkG,EAAOhB,CAAU,EACtE,OAGG,SAAI,MAAM,gBAAgB,EACxBlF,SAAOkF,EAAYC,CAAG,GAG/B,KAAQ,QAAU,CAACe,EAAelC,EAAiBD,IAA2C,CACtF,QAAS,KAAK,QAAQmC,CAAK,EACjC,GAAG,CAAClG,EAAQ,CACV,KAAK,IAAI,KAAK,+BAAgCkG,EAAOlC,CAAO,EAC5D,OAGChE,EAAO,UAAY,QAAa+D,aAAiB,oBAClD/D,EAAO,QAAU+D,GAGZ/D,cAAY+D,EAAOC,CAAO,GAG3B,mBAAgB,CAACkC,EAAeT,IAAiB,CACjD,QAAS,KAAK,QAAQS,CAAK,EACjC,GAAG,CAAClG,EACF,OAIiByB,GAAqB,cAAczB,EAAO,GAAG,CAAC,CAAC,EACvD,QAASR,GAAc,CAChCiC,GAAqB,gBAAgBjC,CAAS,EAC/C,EACH,CAtMO,aAAaM,EAAsB,CAC9B,eAAK,KAAK,QAClB,GAAG,KAAK,QAAQnB,CAAC,EAAE,GAAG,SAASmB,CAAO,EAC7B,YAAK,QAAQnB,CAAC,EAIlB,WACT,CAEO,mBAAoB,CACzB,OAAG,KAAK,YACC,KAAK,YAGP,KAAK,YAAc,IAAI,QAAQ,CAACwH,EAASC,IAAW,CACzD,IAAIC,EAAS,KAAK,aAClB,QAAQ1H,EAAI,EAAGA,EAAI,KAAK,aAAc,EAAEA,EAAG,CACzC,MAAMoE,EAAS,IAAI,OAAO,qFAAiD,CAAC,KAAM,QAAS,GACrFuD,EAAkB,KAAK,QAAQ3H,CAAC,EAAI,IAAI6G,GAAgBzC,CAAM,EAEpDuD,mBAAiB,QAAS,IAAM,CACzC,SAAI,WAAa3H,EAAI,QAAQ,EAElB2H,mBAAiB,QAAS,KAAK,OAAO,EACtCA,mBAAiB,SAAU,KAAK,cAAc,EAC9CA,mBAAiB,QAAS,KAAK,aAAa,EAE1D,IACED,IACF,KAAK,IAAI,eAAe,EAChBF,IACR,KAAK,OAAS,GAChB,EACC,CAAC,KAAM,GAAK,EAECG,mBAAiB,cAAgBb,GAAU,CAClDW,yBAAyBX,EAAM,OAAO,EAC7C,KAAK,OAAS,IACb,CAAC,KAAM,GAAK,EACjB,CACD,CACH,CAEO,aAAa5D,EAAuB,CACzC,MAAO,cAAgBA,EAAO,OAChC,CAEO,qBAAqB0E,EAAwD1E,EAAuB,CAEzG,OAAO,KAAK,qBAAqB0E,EAAQ,KAAK,aAAa1E,CAAI,CAAC,CAClE,CAIO,yBAAyB2E,EAAa3B,EAA0B,OAA6B,CAClG,OAAIe,IAIJ,KAAK,kBAAkB,EAEhB,MAAMY,CAAG,EACf,KAAMC,GACF,CAACA,EAAI,SAAWA,EAAI,QAAQ,IAAI,cAAc,IAAM,2BAC9CA,EAAI,cACV,KAAMhD,GAASiD,GAAgB,aAAa,iBAAkBjD,CAAI,CAAC,EACnE,KAAMkD,GAAQC,GAAcD,EAAmB,EAAE,CAAC,EAE5CF,EAAI5B,CAAM,GAEpB,GAdQ,KAAK,WAkBhB,CAEO,6BAA6BhD,EAAuB,CACnD,QAAM,KAAK,aAAaA,CAAI,EAClC,OAAO,KAAK,yBAAyB2E,CAAG,EAAE,KAAMK,GACtCN,GAAkD,KAAK,yBAAyBM,EAAMN,EAAQC,CAAG,CAC1G,CACH,CAEO,qBAAqBD,EAA+CC,EAAa,CACtF,OAAO,KAAK,yBAAyBA,CAAG,EAAE,KAAMK,GACvC,KAAK,yBAAyBA,EAAMN,EAAQC,CAAG,CACvD,CACH,CAEO,yBAAyBK,EAAYN,EAA+CC,EAAa,CAChG,QAAY,OAAO,OAAOD,EAAQ,CAAC,cAAeM,EAAM,YAAa,GAAK,EAChF,SAAU,OAAVC,EAAU,KAASN,GACZ,KAAK,oBAAoBM,CAAS,CAC3C,CAEO,kBAAkB9G,EAAuB,CAC9C,OAAO,QAAQ,KAAK,CAMlB,IAAI,QAAemG,GAAY,CAC7BnG,EAAO,iBAAiB,aAAcmG,EAAS,CAAC,KAAM,GAAK,EAC5D,EACDY,GAAM,IAAI,EACX,EAAE,KAAK,IAAM/G,CAAM,CACtB,CAEA,MAAa,oBAAoBuG,EAAgD,CAC/E,GAAG,CAACX,GACF,OAAO,KAAK,YAGV,KAAK,QACP,MAAM,KAAK,oBAGb,KAAM,CAAC,aAAY,QAAQ,IAAMW,EAC9B,MAAc,CAACS,IAChB,MAAMlB,GAAU,YAAY,EAG9B,GAAGS,EAAO,KAAM,CACd,MAAMU,EAAY1B,GAAc,MAAM,aAAagB,EAAO,KAAMA,EAAO,MAAOA,EAAO,OAAQA,EAAO,MAAOA,EAAO,SAAS,EACrHW,EAAU,KAAK,mBAAmBD,CAAS,EACjD,GAAGC,GAAS,KACH,eAAQ,QAAQA,EAAQ,UAAU,OAAO,MAAM,CAAC,CAAC,EAItD,QAAa,MAAM,QAAQX,EAAO,SAAS,EAAIA,EAAO,UAAY,CAACA,EAAO,SAAS,EAMzF,IALG,CAACA,EAAO,OAAS,CAACA,EAAO,UAC1BA,EAAO,MAAQ,SAASY,EAAW,CAAC,EAAE,MAAM,KAAK,EACjDZ,EAAO,OAAS,SAASY,EAAW,CAAC,EAAE,MAAM,MAAM,GAGlD,CAACZ,EAAO,OAAS,CAACA,EAAO,OACpB,UAAI,MAAM,sBAAsB,EAGxCA,EAAO,MAAQjH,EAEf,MAAMU,EAAS,KAAK,WAAWmH,EAAYZ,CAAM,EAEjD,UAAqB,aAAa,CAChC,UAAWvG,EACX,QACA,eAAgBA,EAAO,GAAG,CAAC,EAC3B,WAAYgH,EACZ,YAAaT,EAAO,YACpB,KAAM,SACP,EAEMA,cAAY,UAAU,IAAM,CACjCvG,EAAO,OAAO,EACf,EAEMA,CACT,CAwCO,UAAUkG,EAAe,CACvB,YAAK,QAAQA,CAAK,CAC3B,CAEO,gBAAiB,CAClBN,KAIJ,KAAK,QAAQ,QAAQ,CAAC7C,EAAQkB,IAAQ,CACpClB,EAAO,UAAU,EACZ,SAAI,WAAakB,EAAM,aAAa,EAC1C,EAED,KAAK,IAAI,mBAAmB,EAC5B,KAAK,QAAQ,OAAS,EACtB,KAAK,aAAe,EACpB,KAAK,OAAS,GACd,KAAK,YAAc,OACrB,CAEQ,WAAW9D,EAAyBE,EAAyB,OAC7D,QAAS,IAAIkF,GAAc,CAC/B,KACA,OAAQ,KAAK,QAAQ,KAAK,cAAc,EACxC,UACD,EAEK,CAAC,QAAO,WAAa,IACtB,aAAQW,CAAK,EAAIlG,EAEhB,QAAqBiH,GAAYxG,OAAK,oBAALwG,UAAuC,IAAI,KAAQ,OAC1F,OAAGA,GACDG,EAAmB,IAAIpH,CAAM,EAG5B,KAAK,cAAgB,KAAK,QAAQ,SACnC,KAAK,aAAe,GAGfA,mBAAiB,UAAW,IAAM,CACvC,KAAK,UAAUkG,CAAK,EACjBkB,EAAmB,OAAOpH,CAAM,GAAK,CAACoH,EAAmB,MACnD,YAAK,mBAAmBH,CAAS,CAC1C,CACD,EAEMjH,eAAaK,EAAQ,aAAa,EAElCL,CACT,CACF,CAEM,SAAe,IAAI6F,GACzBrE,GAAe,aAAe6F,GC/RN,YAAeC,EAAmBC,EAAqB,CAC1E,UAAOA,GAAU,SAAU,CAC5BD,EAAK,YAAcC,EACnB,OAIF,MAAMC,EAAaF,EAAK,WACrBE,EACEF,EAAK,YAAcE,EACpBA,EAAW,YAAYD,CAAI,GAE3BD,EAAK,YAAc,GACnBA,EAAK,OAAOC,CAAI,GAGlBD,EAAK,OAAOC,CAAI,CAEpB,CCXA,SAAwBE,GAAgBtH,EAAiBuH,EAAmB,GAAOC,EAAQ,GAAM,CAC5F,UAAuB,CAACD,GAAqB,SAAS,cAAc,UAAY,SAAW,CAAE,SAAS,cAA8B,oBAKvI,GADAC,GAASxH,EAAG,QACTA,aAAc,iBAAkB,CAC3B,QAASA,EAAG,MAAM,OACxBA,EAAG,eAAiBvB,EACpBuB,EAAG,aAAevB,MACb,CACC,QAAQ,SAAS,cACvBgJ,EAAM,mBAAmBzH,CAAE,EAC3ByH,EAAM,SAAS,EAAK,EACd,QAAM,OAAO,eACnBC,EAAI,gBAAgB,EACpBA,EAAI,SAASD,CAAK,EAEtB,CAEC,OAAe,gBAAkBH,GCvBlC,MAAqBK,EAAsB,CAKzC,YAAYC,EAAwC1H,EAAoC,CAHhF,eAAsC,IAC9C,KAAQ,OAAS,GAGf,KAAK,SAAW,IAAI,qBAAsBlB,GAAY,CACpD,GAAG,KAAK,OACN,OAGF,MAAMkC,EAAoC,GAElClC,UAAQ,CAACC,EAAO4I,IAAU,CAChC,MAAM3I,EAASD,EAAM,OAErB,GAAG,KAAK,MAAM,IAAIC,CAAM,IAAMD,EAAM,eAClC,OAEA,KAAK,MAAM,IAAIC,EAAQD,EAAM,cAAc,EAW7C,MAAM6I,EAA4B,CAAC,SAAQ,QAAS7I,EAAM,eAAgB,QAAO,SAIjFiC,EAAQ,KAAK4G,CAAM,EAGpB,EAEO5G,UAASjB,GAAS,CACxB2H,EAAmB3H,CAAI,EACxB,GACAC,CAAO,CACZ,CAEO,YAAa,CAClB,MAAM6H,EAAsB,GAC5B,YAAK,MAAM,QAAQ,CAACtG,EAAOuG,IAAQ,CAC9BvG,GACDsG,EAAM,KAAKC,CAAG,CAChB,CACD,EAEMD,CACT,CAEO,cAAe,CACd,QAAU,KAAK,aACrB,UAAU7I,KAAU+I,EACb,WAAM,IAAI/I,EAAQ,EAAK,CAEhC,CAEO,UAAUA,EAAoB,CAC5B,YAAK,MAAM,IAAIA,CAAM,CAC9B,CAEO,YAAa,CAClB,KAAK,SAAS,aACd,KAAK,MAAM,OACb,CAEO,SAAU,CACf,KAAK,SAAS,aAGd,MAAMgJ,EAAU,CAAC,GAAG,KAAK,MAAM,KAAM,GACrC,UAAUhJ,KAAUgJ,EAEb,cAAS,QAAQhJ,CAAM,CAGhC,CAEO,gBAAiB,CAChB,QAAU,KAAK,aACrB,UAAUA,KAAU+I,EACb,cAAS,UAAU/I,CAAM,EAGhC,UAAUA,KAAU+I,EACb,cAAS,QAAQ/I,CAAM,CAEhC,CAEO,QAAQA,EAAoB,CAC5B,WAAM,IAAIA,EAAQ,EAAK,EACvB,cAAS,QAAQA,CAAM,CAC9B,CAEO,UAAUA,EAAoB,CAC9B,cAAS,UAAUA,CAAM,EACzB,WAAM,OAAOA,CAAM,CAC1B,CAEO,QAAS,CACd,KAAK,OAAS,EAChB,CAEO,kBAAmB,CACxB,KAAK,OAAO,EACZ,KAAK,QAAQ,CACf,CAEO,MAAO,CACZ,KAAK,OAAS,EAChB,CACF,CC/HwB,YAAoBZ,EAAiB6J,EAAiE,CAC5H,MAAMC,EAAoB,GAC1B,IAAItE,EAAM,GACV,MAAOA,EAAMxF,EAAM,UAAU6J,CAAM,KAAO,IACxCC,EAAI,KAAK9J,EAAM,OAAOwF,EAAK,CAAC,EAAE,CAAC,CAAC,EAG3B,QACT,CCGA,MAAMuE,GAAiB,EACjBC,OAAoC,IAAI,CAAC,iBAAkB,kBAAmB,aAAc,kBAAkB,CAAC,EAOrH,MAAqBC,EAAkB,CAWrC,YAAsBC,EAAgBH,GAAgB,CAAhC,qBAVtB,KAAO,QAAU,EACjB,KAAU,MAAoC,GACpC,mBAA0C,IAEpD,KAAU,YAA6B,KACvC,KAAU,cAA4B,KAEtC,KAAU,IAAMxC,GAAO,KAAMC,GAAS,KAAK,EAIzC,KAAK,aAAe2C,GAAS,IAAM,KAAK,gBAAiB,EAAG,EAAK,CACnE,CAEO,OAAQ,CACb,KAAK,UAAU,QAEf,KAAK,MAAM,OAAS,CAKtB,CAEO,MAAO,CACT,KAAK,cAGR,KAAK,YAAc,IAAI,QAAQ,CAACzC,EAASC,IAAW,CAClD,KAAK,cAAgBD,EACtB,EAOH,CAEO,QAAS,CACV,KAAK,gBAET,KAAK,cAAc,EACd,mBAAgB,KAAK,YAAc,KAExC,KAAK,aAAa,EACpB,CAEA,MAAgB,YAAY/F,EAA2B,CACrD,GAAG,MAAK,YAIH,gBAAU,IAAIA,CAAI,EAMnB,IAII,WAAK,SAASA,CAAI,QAClBiE,GACFoE,GAAc,IAAKpE,GAAkB,IAAI,GAC3C,KAAK,IAAI,MAAM,wBAAyBA,EAE5C,CAEK,eAAU,OAAOjE,CAAI,EAM1B,KAAK,aAAa,EACpB,CAEU,SAASA,EAA2B,CAC5C,OAAOA,EAAK,MACd,CAEU,SAAU,CACX,YAAK,MAAM,OACpB,CAEU,WAAWyE,EAA4B1E,EAAyB,CACnE,WAAM0E,CAAM,EAAE1E,CAAE,EACrB,KAAK,aAAa,CACpB,CAEU,cAAcC,EAA4B,CAClD,GAAG,GAAC,KAAK,MAAM,QAAU,KAAK,aAAgB,KAAK,cAAgB,GAAK,KAAK,UAAU,MAAQ,KAAK,eAIjG,GAOD,GANGA,EACgBF,QAAK,MAAOE,CAAI,EAEjCA,EAAO,KAAK,UAGXA,EACD,KAAK,YAAYA,CAAI,MAErB,OAGKA,aAED,KAAK,UAAU,KAAO,KAAK,eAAiB,KAAK,MAAM,OAEjE,CAEO,KAAKD,EAAyB,CAC9B,gBAAW,OAAQA,CAAE,CAC5B,CAEO,QAAQA,EAAyB,CACjC,gBAAW,UAAWA,CAAE,CAC/B,CACF,CC9HA,MAAqB0I,WAAiCH,EAAkB,CAOtE,YAAYC,EAAwB,CAClC,MAAMA,CAAa,EAPrB,KAAU,MAAgC,GAChC,mBAAsC,GAOhD,CAEO,MAAO,CACZ,MAAM,KAAK,EACX,KAAK,YAAY,MACnB,CAEO,QAAS,CACd,MAAM,OAAO,EACb,KAAK,YAAY,QACnB,CAEO,kBAAmB,CACxB,MAAM,OAAO,EACb,KAAK,YAAY,kBACnB,CAEO,OAAQ,CACb,MAAM,MAAM,EACZ,KAAK,YAAY,YACnB,CAEO,SAAU,CACf,KAAK,YAAY,SACnB,CAEU,SAASvI,EAAuB,CACjC,SAAK,KAAKA,EAAK,GAAG,CAC3B,CAEU,WAAWyE,EAA4B1E,EAAqB,CAEpE,GADa,KAAK,MAAM,KAAMxB,GAAMA,EAAE,MAAQwB,EAAG,KAAOxB,EAAE,OAASwB,EAAG,IAAI,EAEjE,SAEGC,eAAQ,KAAK,UACrB,GAAGA,EAAK,MAAQD,EAAG,KAAOC,EAAK,OAASD,EAAG,KAClC,SAKR,kBAAM0E,CAAM,EAAE1E,CAAE,EACd,EACT,CAEU,wBAAyB,CAC5B,kDAAuB,OAAO,WAAW,IAAM,CAClD,KAAK,mBAAqB,OAC1B,KAAK,aAAa,GACjB,CAAC,EACN,CAEO,KAAKA,EAAqB,CAC/B,MAAM,KAAKA,CAAE,CACf,CAEO,QAAQA,EAAqB,CAClC,MAAM,QAAQA,CAAE,CAClB,CAEO,OAAOA,EAAmC,CAC/C2I,GAAiB,KAAK,MAAQnK,GAAMA,EAAE,MAAQwB,EAAG,GAAG,EACpD,KAAK,UAAUA,CAAE,CACnB,CAEO,QAAQA,EAAqB,CAC7B,iBAAY,QAAQA,EAAG,GAAG,CACjC,CAEO,UAAUA,EAAmC,CAC7C,iBAAY,UAAUA,EAAG,GAAG,CACnC,CACF,CCvFA,MAAqB4I,WAAsBF,EAAyB,CAClE,YAAYF,EAAwBK,EAAgC,CAClE,MAAML,CAAa,EAWrB,KAAQ,mBAAqB,CAAC,CAAC,SAAQ,aAAqC,CAMzDG,QAAK,MAAQnK,GAAMA,EAAE,MAAQU,CAAM,EAAE,QAASe,GAAS,CACnEgI,IACDhI,EAAK,QAAU,IAGjBA,EAAK,QAAUgI,EACT,QAAQ,KAAK,MAAM,UAAWhI,GAAS,CAACA,EAAK,OAAO,EACrD,WAAM,OAAO,KAAK,IAAI,EAAG4H,CAAK,EAAG,EAAG5H,CAAI,EAC9C,EAED,KAAK,uBAAuB,GAzB5B,KAAK,YAAc,IAAI0H,GAAsB,KAAK,kBAAkB,EAEnE,IAAwBmB,GAAuB,IAAM,CACpD,KAAK,KAAK,GACT,IAAM,CACP,KAAK,iBAAiB,EACvB,CACH,CAqBU,SAAU,CAClB,OAAOC,GAAc,KAAK,MAAQ9I,GAASA,EAAK,OAAO,CACzD,CAEA,MAAa,YAAYA,EAAuB,CACxC,YAAM,YAAYA,CAAI,EACvB,iBAAY,UAAUA,EAAK,GAAG,CACrC,CAEU,WAAWyE,EAA4B1E,EAAqB,CAGpE,OAFiB,MAAM,WAAW0E,EAAQ1E,CAAE,GAI5C,KAAK,QAAQA,CAAE,EAIfA,EAAG,UAAHA,EAAG,QAAY,IAER,IARc,EASvB,CAEO,YAAa,CACb,WAAM,QAASC,GAAS,CAC3BA,EAAK,QAAU,GAChB,EAED,KAAK,uBAAuB,CAC9B,CACF,CCjEA,SAAwB+I,GAAiBC,EAAmB,CAC1D,MAAMC,EAAS,mEAEf,IAAIC,EAAO,IACH,UAAI,EAAG1K,EAASwK,EAAM,OAAQzK,EAAIC,EAAQ,EAAED,EAAG,CAC/C,QAAMyK,EAAMzK,CAAC,EAEhB4K,GAAQ,IAAM,GACPD,KAAOC,EAAM,IAAM,EAAE,GAE1BA,GAAO,IACAD,OACAC,GAAO,KACPD,QAEVA,GAAQ,IAAMC,EAAM,KAGhB,cAEDD,CACT,CC7BA,SAAwBE,GAAiBpG,EAA2B,CAC5D,QAAUA,EAAO,WAAW,IAAI,EAChCqG,EAAO,IAAMrG,EAAO,KAAO,GAC3BtB,EAAQ2H,EACR1H,EAAS0H,EACTC,GAAStG,EAAO,MAAQtB,GAAS,EACjC6H,EAAS,EACTC,EAAQxG,EAAO,OAASrB,EAAS4H,EACjCE,EAAYnH,EAAQ,aAAagH,EAAOE,EAAO9H,EAAOC,CAAM,EAAE,KACpE,IAAI+H,EAAK,EAAGC,EAAK,EAAGC,EAAK,EAAGC,EAAK,EACjC,QAAQtL,EAAI,EAAGA,EAAIkL,EAAU,OAAQlL,GAAK,EACxCmL,GAAMD,EAAUlL,CAAC,EACXoL,KAAUpL,EAAI,CAAC,EACfqL,KAAUrL,EAAI,CAAC,EACfsL,KAAUtL,EAAI,CAAC,EAGjB,QAAY,SAAS,cAAc,QAAQ,EACjDuL,EAAU,MAAQT,EAClBS,EAAU,OAAST,EACb,QAAaS,EAAU,WAAW,IAAI,EACtClI,EAAQ,IAAI,kBAAkB,CAAC8H,EAAK,IAAMG,EAAIF,EAAK,IAAME,EAAID,EAAK,IAAMC,EAAI,GAAG,CAAC,EAChFE,EAAO,QAAQnI,EAAM,CAAC,MAAMA,EAAM,CAAC,MAAMA,EAAM,CAAC,MAAMA,EAAM,CAAC,KACnE,SAAW,UAAYmI,EACvBC,EAAW,SAAS,EAAG,EAAGF,EAAU,MAAOA,EAAU,MAAM,EAC3DE,EAAW,UAAY,2BACvBA,EAAW,SAAS,EAAG,EAAGF,EAAU,MAAOA,EAAU,MAAM,EAEpDA,EAAU,UAAU,YAAY,CACzC,CC7BwB,YAAY7J,EAEhC,GAAI,CACA,QAAQ,SAAS,cAAc,OAAO,EAC5C,OAAIA,EAAQ,MAAKgK,EAAM,wBAA0B,IAC3CA,eAAa,cAAe,MAAM,EAEjCA,CACT,CCPO,SAASC,GAAuB,EAAe,CAChD,IAEF,MAAMC,EADS,EAAE,OACW,MAAM,QAAQ,SAAS,kBAAkB,EACrE,OAAGA,GACO,aAAK,0BAA2B,CAAC,EAEpCA,QAEA,QACT,CACF,CAEA,SAAwBC,GAAY1L,EAAyB2L,EAAa3L,EAAM,cAAe4L,EAA2B,CACxH,OAAO,IAAI,QAAc,CAACvE,EAASC,IAAW,CACzC,KAAM,YAAcqE,EAAY,CACzBtE,IACR,OAGF,MAAMwE,EAAgB1H,IAAmB,CAACyH,EAAkB,aAAe,UACrEE,EAAiB,QACjBC,EAAS,IAAM,CACb/L,sBAAoB8L,EAAgBE,CAAO,EACzC3E,KAEJ2E,EAAW7L,GAAkB,CAC9BqL,GAAuBrL,CAAC,IAIrBH,sBAAoB6L,EAAeE,CAAM,EACzC/L,sBAAoB8L,EAAgBE,CAAO,EACjD1E,EAAOtH,EAAM,KAAK,IAEpBA,EAAM,iBAAiB6L,EAAeE,EAAQ,CAAC,KAAM,GAAK,EACpD/L,mBAAiB8L,EAAgBE,CAAO,EAC/C,CACH,CC9BO,MAAMC,GAAuC,GAC9CC,GAAM,CAAC1D,EAA2Ed,IAAgB,CACnGc,aAAgB,kBAAoBA,aAAgB,iBAAkBA,EAAK,IAAMd,EAC5Ec,aAAgB,gBAAsBA,iBAAe,KAAM,OAAQd,CAAG,EACpEc,QAAM,gBAAkB,OAASd,EAAM,GACnD,EAGA,SAAwByE,GACtB3D,EACAd,EACA9H,EACAwM,EAAW,GACX,CACA,GAAG,CAAC1E,EAAK,CACC,cAAM,8BAA+Bc,EAAMd,CAAG,EAC3C9H,MACX,OAGF,MAAMyM,EAAU7D,aAAgB,iBAChC,GAAKyD,GAAWvE,CAAG,GAAqB0E,GAAaC,GAUnD,GAJa7D,GACX0D,GAAI1D,EAAMd,CAAG,EAGZ9H,EAAU,CACX,GAAGyM,EACD,OAAOX,GAAYlD,CAAI,EAAE,KAAK5I,CAAQ,EAE3BA,WAIV,CACL,MAAM0M,EAAU9D,aAAgB,iBAC1B+D,EAASD,EAAU9D,EAAO,IAAI,MAI9BuD,EAAS,IAAM,CAChB,CAACO,GAAW9D,GACb0D,GAAI1D,EAAMd,CAAG,EAGfuE,GAAWvE,CAAG,EAAI,GAIP9H,OAcPoM,EAAWzG,GAAsB,CACjCA,EAAI,QAAQ,SAAS,mBAAmB,GAClC,cAAM,gCAAiCA,EAAKmC,EAAK6E,EAAQhH,EAAI,QAASgH,EAAO,YAAY,EAGxF3M,OAGb,SAAO,SAAW,QAClB2M,EAAO,IAAM7E,EACN6E,EAAO,OAAS,OAAKR,EAAQC,CAAO,EAS/C,CAEgB,YACdxD,EACAd,EACA0E,EACA,CACO,WAAI,QAAe/E,GAAY,CACjB8E,KAAMzE,EAAKL,EAAS+E,CAAQ,EAChD,CACH,CC3GA,SAAwBI,GAAaC,EAAmB,CACtD,MAAMC,EAAMD,EAAU,OAChBnC,EAAQ,IAAI,WAAW,KAAK,KAAKoC,EAAM,CAAC,CAAC,EAC/C,IAAIC,EAAQ,EAETD,EAAM,IACPpC,EAAMqC,GAAO,EAAI,SAASF,EAAU,OAAO,CAAC,EAAG,EAAE,GAGnD,QAAQ5M,EAAI8M,EAAO9M,EAAI6M,EAAK7M,GAAK,EACzByK,KAAO,EAAI,SAASmC,EAAU,OAAO5M,EAAG,CAAC,EAAG,EAAE,EAG/C,QACT,CCdwB,YAAeyK,EAAmBsC,EAAmB,aAAc,CACzF,MAAO,QAAQA,YAAmB,KAAK,OAAO,aAAa,GAAGtC,CAAK,CAAC,GACtE,CCFA,SAAwBuC,GAAoBvC,EAAiE,CAC3G,OAAGA,aAAiB,WACXA,EACC,OAAOA,GAAW,SACnB,IAAI,cAAc,OAAOA,CAAK,EAGhC,IAAI,WAAWA,CAAK,CAC7B,CCGA,MAAMwC,GAAkB,iuCAElBC,GAAcP,GAAaM,EAAe,EAC1CE,GAAYR,GAAa,MAAM,EAE9B,SAASS,GAAuBvF,EAAa,CAClD,MAAMwF,EAAS,UACTC,EAASzF,EAAI,MAAMA,EAAI,QAAQwF,CAAM,EAAIA,EAAO,MAAM,EACtDE,EAAY,CAAC,GAAG,KAAKD,CAAM,CAAC,EAAE,IAAKE,GAASA,EAAK,WAAW,CAAC,CAAC,EAE7D,WAAI,WAAWD,CAAS,CAkBjC,CAEwB,YAAuB9C,EAA8BgD,EAAY,GAAO,CAC1F,MACD,CAACA,GAAahD,EAAM,CAAC,IAAM,GAC5BzC,EAAM,IAAI,WAAWkF,GAAY,OAAO,MAAM,KAAKzC,EAAM,MAAM,CAAC,CAAC,EAAG0C,EAAS,CAAC,EAC1EnF,KAAG,EAAIyC,EAAM,CAAC,EACdzC,KAAG,EAAIyC,EAAM,CAAC,GAElBzC,EAAMgF,GAAoBvC,CAAK,EAG7B,MACJ,OAAGgD,EACDV,EAAWzL,GAAY,YAAc,aAE1ByL,eAGGW,GAAe1F,EAAK+E,CAAQ,CAE9C,CChDA,SAAwBY,GAAuBC,EAA6BC,EAAgEJ,EAAY,GAAO,CAGtJ,UAAuBI,EAAM,MAAOJ,CAAS,CACtD,CCCA,MAAMK,GAAgC,GACtC,IAAIC,GAAkB,GAEE,YAAsCC,EAAU9H,EAA6B,OAAQ,CACxG,IAAC8H,EAAM,MAAM,OACP,eAAQ,QAAQ,EAAE,EAGrB,QAAUA,EAAM,QAAUC,GAAgB,EACrC,WAAM,EAAED,CAAK,EACNE,KAEX9N,CACT,CAEA,SAAS8N,IAAoB,CAC3B,GAAG,CAACH,GAAiB,CACb,QAAQD,GAAW,QACdK,IAAK,EAAE,QAAQ,IAAM,CACZJ,MACfD,GAAW,QACMI,IACpB,CACD,EAEL,CAEA,SAASC,GAAoCH,EAAsB,CAC9D,IAACA,EAAM,MAAM,OACR,iBAAQ,QAAQ,EAAS,EACxB,QAAQ,QAAQ,EAAE,EAGrB,QAAOA,EAAM,MAAM,MAAM,EACzBI,EAAsC,GAE5C,OAAO,IAAI,QAAwB,CAAC5G,EAASC,IAAW,CACtD,MAAM4G,EAAI,SAAW,CACb,QAAQ,YAAY,MAEvB,GACD,MAAMC,GAAyB,EACzB,QAAkBN,EAAM,QAAQ,MAAMA,EAAM,QAASO,EAAK,OAAO,EACnE,MAEJ,GAAGC,aAA2B,QACxB,IACFC,EAAa,MAAMD,QACb9I,GACN+B,EAAO/B,CAAG,EACV,MACF,MAEa+I,IAGfL,EAAQ,KAAKK,CAAU,QACjBF,EAAK,OAAS,GAAM,YAAY,MAAQzB,EAAS,GAEtDyB,EAAK,OAAS,EACfjM,GAAQ+L,CAAC,EAGT7G,EAAQ4G,CAAO,CACjB,EAGF9L,GAAQ+L,CAAC,EAEV,EAAE,KAAKL,EAAM,QAAQ,QAAQ,KAAKA,EAAM,OAAO,EAAGA,EAAM,QAAQ,OAAO,KAAKA,EAAM,OAAO,CAAC,CAC7F,CC7EA,MAAMU,GAAS,EACTC,GAAa,EAEnB,IAAIC,GACAC,GACAC,GAKFF,GAAqB,QAAQ,UAJ7BA,UAAqB,OAAO,wBAAoB,sBAAE,KAAMG,GAAM,CAC5DF,GAAeE,EAAE,QAClB,EAKH,SAASC,GACPC,EACAC,EACAC,EACA1K,EAA4B,SAAS,cAAc,QAAQ,EAC3D,CACAA,EAAO,MAAQwK,EAAI,MACnBxK,EAAO,OAASwK,EAAI,OAEpB,MAAMG,EAAM3K,EAAO,WAAW,KAAM,CAAC,MAAO,GAAM,EAClD,OAAGqK,IACDM,EAAI,OAAS,QAAQF,OACrBE,EAAI,UAAUH,EAAK,CAACC,EAAS,EAAG,CAACA,EAAS,EAAGzK,EAAO,MAAQyK,EAAS,EAAGzK,EAAO,OAASyK,EAAS,CAAC,IAE9FE,YAAUH,EAAK,EAAG,CAAC,EACVJ,KAAK,EAAG,EAAGpK,EAAO,MAAOA,EAAO,OAAQyK,EAAQC,CAAU,GAGlE1K,CACT,CAGA,MAAMzB,OAAqC,IACrCqM,GAAa,IAEnB,SAAwBC,GAAKC,EAAiBL,EAAiBR,GAAQS,EAAqBR,GAAY,CACtG,GAAG,CAACY,EACF,KAAM,wBAA0BA,EAG/BvM,GAAM,KAAOqM,IACdrM,GAAM,MAAM,EAGR,QAAS,SAAS,cAAc,QAAQ,EAC9CyB,EAAO,UAAY,mBAEf,MAASzB,GAAM,IAAIuM,CAAO,EAC9B,GAAIC,EA6BK/K,QAAQ+K,EAAO,OAAO,MACtB/K,SAAS+K,EAAO,OAAO,OACvBA,UAAQ,KAAK,IAAM,CACjB/K,aAAW,IAAI,EAAE,UAAU+K,EAAO,OAAQ,EAAG,EAAG/K,EAAO,MAAOA,EAAO,MAAM,EACnF,MAjCS,CACV,MAAMrE,EAAiC,IAAI,QAASoH,GAAY,CAE9DoH,GAAmB,KAAK,IAAM,CACtB,QAAM,IAAI,MAChBK,EAAI,OAAS,IAAM,CAIDQ,GAAa,CAC3B,MAAO,CAAC,CAACR,EAAKC,EAAQC,EAAY1K,CAAM,CAAC,EACzC,QAAS,KACT,QAASuK,IACR,SAAS,EAEJ,KAAK,IAAM,CACTxH,IACT,GAGHyH,EAAI,IAAMM,EACX,EACF,EAEKvM,OAAIuM,EAASC,EAAS,CAC1B,SACA,UACD,EASI,OACL,GAAGA,EACH,SAEJ,CCxFwB,YACtB5B,EACAC,EACA6B,EACA7H,EAAM8F,GAAuBC,EAAOC,EAAO,EAAK,EAChD,CACA,IAAI1M,EAA+CwO,EACnD,GAAG,CAACD,EACFvO,EAAU,IAAI,MACAwO,KAA0BxO,EAAS0G,CAAG,MAC/C,CACL,MAAM+H,EAASN,GAAKzH,EAAK,OAAO6H,GAAa,SAAWA,EAAU,MAAS,EAC3EvO,EAAUyO,EAAO,OACjBD,EAAcC,EAAO,QAGf,mBAAU,IAAI,WAAW,EAE1B,CAAC,MAAOzO,EAAS,cAC1B,CCpBA,MAAM0O,GAAyE,GAExE,SAASC,GAAsBC,EAAiBzM,EAA4BH,EAAeC,EAAgB,CAChH,MAAMoG,EAAMwG,GAAmBD,EAAI,GAAIzM,CAAS,EAC1C2M,EAASJ,GAAoBrG,CAAG,EACtC,OAAOyG,GAAUA,EAAO,OAAS9M,GAAS8M,EAAO,QAAU7M,CAC7D,CAEA,IAAI8M,GAAiCC,GACrC,MAAMC,GAAe,IAAM,CACfvO,mBAAiB,eAAgB,IAAM,CACrCA,WAAS,cAAc,4BAEjC,UAAU2H,KAAOqG,GAAqB,CACpC,KAAM,CAAG,EAAS,EAAIrG,EAAI,MAAM,GAAG,EAChClG,GAAa,MAAM,CAACA,CAAS,GAC9B,OAAOuM,GAAoBrG,CAAG,EAElC,CACD,EAEc0G,YAAS,cAAc,QAAQ,EAC9BC,MAAa,WAAW,IAAI,CAC9C,EAEsB,kBAAkBJ,EAAiBtL,EAA2BnB,EAA4B,CAC9G,MAAMkG,EAAMwG,GAAmBD,EAAI,GAAIzM,CAAS,EAC1C,CAAC,QAAO,QAAU,IACxB,GAAGwM,GAAsBC,EAAKzM,EAAWH,EAAOC,CAAM,EACpD,OAGI,QAASyM,GAAoBrG,CAAG,EAAI,CACxC,QACA,UAGIqE,EAAQ,MAAMhM,EAAU,SAAS,cAAc,sBAAsBkO,EAAI,GAAIzM,CAAS,EAK5F,GAJGuM,GAAoBrG,CAAG,IAAMyG,GAI7BpC,GAASA,EAAM,GAAK1K,GAAS0K,EAAM,GAAKzK,EACzC,OAGC,OAAOE,GAAe,WACnB4M,IACWE,KAGfF,GAAa,MAAQ/M,EACrB+M,GAAa,OAAS9M,EACtB+M,GAAc,UAAU1L,EAAQ,EAAG,EAAGtB,EAAOC,CAAM,EAC/BU,MAAe2B,GAAiB,YAAYnC,CAAS,EAAG,EAAG,EAAGH,EAAOC,CAAM,EACtFqB,MAOX,MAAMyD,EAAO,MAJG,IAAI,QAAeV,GAAY,CAC7C/C,EAAO,OAAQyD,GAASV,EAAQU,CAAI,CAAC,EACtC,EAGE,MAAoBsB,CAAG,IAAMyG,EAIhC,IAAG,CAAC/H,EAAM,CACA,cAAM,8CAA+C,SAAS,EACtE,SACA,OAGQrG,WAAS,cAAc,mBAAmBkO,EAAI,GAAI7H,EAAM/E,EAAOC,EAAQE,CAAS,EAC5F,CC9EA,IAAI+M,GAAW,EACf,SAAwBC,GAAqBC,EAAmB,CAC1D,MACJ,MAAMxD,EAAWwD,GAAM,KACvB,GAAGxD,EAAU,CACL,QAAM,GAAGyD,MAASH,QAActD,EAAS,MAAM,GAAG,EAAE,CAAC,IAExD,CAAC,aAAc,YAAa,WAAW,EAAE,QAAQA,CAAQ,GAAK,EAC/D0D,EAAW,QAAUC,EACb3D,EAAS,QAAQ,QAAQ,IAAM,GAAK,CAAC,WAAW,EAAE,QAAQA,CAAQ,GAAK,EAC/E0D,EAAW,QAAUC,EACb3D,EAAS,QAAQ,QAAQ,IAAM,EACvC0D,EAAW,QAAUC,EAErBD,EAAW,WAAaC,OAG1BD,EAAW,UAAUD,MAASH,OAGzB,QACT,CCrBwB,YAA6BN,EAAwBY,EAAiE,CACrI,OACL,EAAG,4BACH,GAAIZ,EAAI,GACR,YAAaA,EAAI,YACjB,eAAgBA,EAAI,eACpB,WAAYY,EAEhB,CCNA,SAAwBC,GACtBb,EACAlC,EACAgD,EACAC,EACiB,CACjB,MAAMC,EAAoBC,GAA6BjB,EAAKlC,GAAO,IAAI,EAEnE,MACD,UAAO,IAAM,YACHd,IAAI,QAAU,aAAgBgD,EAAI,UAAU,WAAW,QAAQ,EAAIA,EAAI,UAAY,aAE9FhD,EAAWgD,EAAI,WAAa,2BAGvB,CACL,KAAMA,EAAI,MACV,SAAUgB,EACV,KAAMlD,EAAQA,EAAM,KAAOkC,EAAI,KAC/B,WACA,SAAUA,EAAI,UACd,UACA,YAEJ,CCvBA,SAAwBkB,GAAwBrD,EAA6BsD,EAAsBL,EAAkBC,EAAsC,CACnJ,QAAalD,EAAM,IAAM,WAE/B,GAAG,CAACsD,GAAaA,EAAU,IAAM,iBAEzB,UAAI,MAAM,iBAAiB,EAI7B,QAAU,CAAC,GAAGA,EAAU,IAAM,aAAeA,EAAU,IAAM,yBAA2BtD,EAAM,aAAeA,EAAM,gBACnHuD,EAAmG,CACvG,EAAGC,EAAa,4BAA8B,yBAC9C,GAAIxD,EAAM,GACV,YAAaA,EAAM,YACnB,eAAgBA,EAAM,eACtB,WAAYsD,EAAU,MAGjB,OACL,KAAMtD,EAAM,MACZ,WACA,KAAMyD,EAAWH,EAAkC,KAAO,OAC1D,SAAU,aACV,UACA,YAEJ,CClCA,SAAwBI,GAA0BH,EAAiD,CAa1F,MAZkC,CACvC,KAAM,EACN,WACA,KAAM,EACN,SAAU,aASd,CCbA,SAAwBI,GAA8BC,EAA2C,CAC/F,MAAMC,EAAkBH,GAA0B,CAChD,EAAG,uBACH,YAAcE,EAAwC,YACtD,IAAKA,EAAY,IAClB,EAED,SAAgB,KAAOA,EAAY,KACnCC,EAAgB,SAAWD,EAAY,UAEhCC,CACT,CCbA,SAAwBC,GAAcF,EAA8C,CAClF,MAAO,CAAC,EAAEA,IAAgBA,EAAY,IAAM,eAAiBA,EAAY,IAAM,sBACjF,CCKA,SAAwBG,GAA+BjQ,EAA0B,CACxE,UAAsBA,EAAQ,SAAUA,CAAO,CACxD,CCIA,SAAwBkQ,GAAwBlQ,EAA+B,CAC7E,KAAM,CAAC,QAAO,QAAO,UAAS,aAAaA,EAEvC,MACJ,OAAGvB,EAAM,IAAM,WAAYsR,EAAkBb,GAA2BzQ,EAAO0N,EAAcgD,EAASC,CAAS,EACvG3Q,EAAM,IAAM,QAASsR,EAAkBR,GAAwB9Q,EAAO0N,EAAcgD,EAASC,CAAS,EACtGY,GAAcvR,CAAK,EAAGsR,EAAkBF,GAA8BpR,CAAK,EAC3E0R,GAAkB1R,CAAK,IAAGsR,EAAkBH,GAA0BnR,CAAK,GAEnFsR,EAAgB,WAAa/P,EAAQ,WAG9B,CAAC,SADSiQ,GAA+BF,CAAe,EAC7C,kBACpB,CCtBwB,YAAqB5J,EAAa4I,EAAkBqB,EAAuB,CAC3F,QAAI,SAAS,cAAc,GAAG,EACpCC,EAAE,KAAOlK,EACTkK,EAAE,SAAWtB,EACbsB,EAAE,OAAS,SAEXA,EAAE,MAAM,SAAW,WACnBA,EAAE,MAAM,IAAM,MACdA,EAAE,MAAM,KAAO,MAEN,cAAK,OAAOA,CAAC,EAElB,IACI,QAAa,SAAS,YAAY,aAAa,EACrDC,EAAW,eAAe,QAAS,GAAM,GAAO,OAAQ,EAAG,EAAG,EAAG,EAAG,EAAG,GAAO,GAAO,GAAO,GAAO,EAAG,IAAI,EAC1GD,EAAE,cAAcC,CAAU,QACpB1R,GACE,cAAM,uBAAwBA,CAAC,EACnC,IACFyR,EAAE,MAAM,QAED,YAAKlK,EAAe,QAAQ,CACrC,CACF,CAEA,WAAW,IAAM,CACfkK,EAAE,OAAO,EACTD,GAAYA,EAAS,GACpB,GAAG,CACR,CCQO,MAAMG,EAAmB,CAAzB,cACL,KAAQ,UAA0F,GAElG,KAAQ,SAA2C,EAAC,CAI7C,UAAUC,EAAuB,CACtC,KAAK,SAAWA,EACNrQ,mBAAiB,oBAAsBsQ,GAAY,CAM3D,MAAMC,EAAW,KAAK,UAAUD,EAAQ,QAAQ,EAC7CC,GAAU,MAAM,YACZ,cAASD,EAAQ,QAAQ,EAAIA,EACzBC,OAAK,UAAUD,CAAO,EACjC,CACD,CACH,CAEQ,eAAkB1B,EAAkB4B,EAAqB,CAC/D,MAAMC,EAAWrE,KAEb,MAAW,KAAK,UAAUwC,CAAQ,EACtC,GAAG,CAAC2B,EACSA,OAAK,UAAU3B,CAAQ,EAAI,CACpC,KAAM6B,GAGRA,EAAS,OAAS,IAAM,CAChB,QAAQnL,GAAU,mBAAmB,EAEtC,cAAS,eAAe,eAAesJ,CAAQ,EAEpD6B,EAAS,OAAOxL,CAAK,EACrBwL,EAAS,OAASjS,IAGpBiS,EAAS,MAAM,IAAM,CACd,mBAAc7B,EAAU4B,CAAI,EAClC,EAAE,QAAQ,IAAM,CACR,YAAK,SAAS5B,CAAQ,EAE9B,MACI,CACL,MAAM8B,EAAOH,EAAS,KACrB,CAAC,SAAU,oBAAqB,SAAU,WAAW,EAAyC,QAAS5I,GAAQ,CAC1G+I,EAAK/I,CAAG,IAKZ8I,EAAS9I,CAAG,EAAI+I,EAAK/I,CAAG,EAAE,KAAK+I,CAAI,GACpC,EAIH,OADoBF,IAAS,QAE3BC,EAAS,MAAMjS,EAAI,EAAE,QAAQ,IAAM,CAC5B,mBAAcoQ,EAAU4B,CAAI,EAClC,EAGID,EAASC,CAAI,EAAIC,CAC1B,CAEO,wBAAgD7B,EAAkBrQ,EAAY,CAC7E,QAA2C,KAAK,eAA0BqQ,CAAQ,EAChF,cAAK6B,EAAS,QAAQ,KAAKA,CAAQ,EAAGA,EAAS,OAAO,KAAKA,CAAQ,CAAC,EAE5EA,EAAS,QAAQ,IAAM,CACrB,KAAK,cAAc7B,CAAQ,EAC5B,EAEM6B,CACT,CAEQ,cAAc7B,EAAkB4B,EAAqB,CACrD,QAAY,KAAK,UAAU5B,CAAQ,EACzC,GAAG,CAAC+B,EACF,OAGF,OAAOA,EAAUH,CAAI,EAErB,MAAMpS,EAAS,OAAO,KAAKuS,CAAS,EAAE,QACnC,CAACvS,GAAWuS,EAAU,MAAQvS,IAAW,IACnC,YAAK,UAAUwQ,CAAQ,CAElC,CAEO,UAAUA,EAAyE,CACpF,MAAoC,KAAK,YAAYA,CAAQ,EACjE,OAAG6B,IAIQA,OAAK,eAAe7B,CAAQ,EACvC,KAAK,SAAS,mBAAmB,iBAAiBA,CAAQ,EAAE,KAAK6B,EAAS,QAAQ,KAAKA,CAAQ,EAAGA,EAAS,OAAO,KAAKA,CAAQ,CAAC,EACzHA,EACT,CAeQ,EAAE7B,EAAkBgC,EAAgCJ,EAAqB,CAC/E,IAAIC,EAAW,KAAK,YAAY7B,EAAU4B,CAAI,EAC3C,WAEQC,OAAK,eAAqB7B,EAAU4B,CAAI,EACxCI,IAAE,KAAKH,EAAS,QAAQ,KAAKA,CAAQ,EAAGA,EAAS,OAAO,KAAKA,CAAQ,CAAC,EAC1EA,EACT,CAEO,SAAS5Q,EAAwC,CAChD,QAAWiQ,GAA+BjQ,CAAO,EAChD,YAAK,EAAE+O,EAAU,IAAM,KAAK,SAAS,eAAe,SAAS/O,CAAO,EAAG,MAAM,CACtF,CAEO,cAAcA,EAA+B2Q,EAAqB,OAAQK,EAA4C,CAC3H,KAAM,CAAC,kBAAiB,UAAQ,EAAId,GAAwBlQ,CAAO,EAE5D,YAAK,EAAE+O,EAAU,IAAM,CACxB,MASJ,OARG4B,IAAS,MACLM,OAAK,SAAS,eAAe,iBAC1BN,IAAS,OACZM,OAAK,SAAS,eAAe,kBAE7BA,OAAK,SAAS,eAAe,cAGjCD,EACMA,EAAc,KAAK,IAAMC,EAAGjR,CAAO,CAAC,EAGtCiR,EAAGjR,CAAO,GAChB2Q,CAAI,CACT,CAEO,iBAAiB3Q,EAA4C,CAC3D,YAAK,cAAcA,EAAS,KAAK,CAC1C,CAEO,kBAAkBA,EAA6C,CAC7D,YAAK,cAAcA,EAAS,MAAM,CAC3C,CAEO,OAAO6O,EAAmBE,EAAmBrQ,EAAwB,CAC1E,OAAIqQ,IACFA,EAAWH,GAAqBC,CAAI,GAGlCnQ,IACFA,EAAU,KAAK,SAAS,eAAe,OAAO,CAAC,OAAM,WAAS,GAG/C,KAAK,wBAAwBqQ,EAAUrQ,CAAO,CAEjE,CAEO,YAAYqQ,EAAkB4B,EAAqB,CAClD,QAAI,KAAK,UAAU5B,CAAQ,EAC1B,UAAKmC,EAAEP,CAAI,CACpB,CAWO,eAAe3Q,EAA+BmR,EAAsB,CACzE,MAAM1S,EAAQuB,EAAQ,MAChB0P,EAAajR,EAAM,IAAM,WAC5B,CAACiR,GAAc,CAAC1P,EAAQ,QACzBA,EAAQ,MAASvB,EAAsB,MAAM,QAAQ,OAavD,MAAM2S,EAAK,IAAM,KAAK,SAAW,WAAa,GAExCjL,EAAM,YAAYiL,IACxBpR,EAAQ,WAAaoR,EAEf,QAAc/K,GAAgB,8BAE9B3H,EAAU,KAAK,cAAcsB,EAAS,OAAQqR,CAAW,EAG/D,GAAGF,EACM,SAGH,QAAS,SAAS,cAAc,QAAQ,EAC9CG,EAAO,OAAS,GAEhBD,EAAY,KAAK,IAAM,CACrBC,EAAO,IAAMnL,EACJ,cAAK,OAAOmL,CAAM,EAC5B,EAiBD,IAAI7R,EAAsB8R,EAAc,GACxC,MAAMC,EAAa,IAAM,CACpBD,IAIWA,KACJ9R,IAEOI,KAAQ,UAAW2R,CAAU,IAGhD,SAAQ,kBAAkBA,CAAU,EAC5B9S,OAAM8H,GAAS,CACrB,GAAG,CAACA,EACF,OAGIL,QAAM,IAAI,gBAAgBK,CAAI,EAC9BuJ,EAAkBL,EACtBR,GAA2BzQ,CAAK,EAChC8Q,GAAwB9Q,EAAcuB,EAAQ,KAA4B,EACtE+O,EAAY/O,EAAQ,MAAqB,WAAayR,GAAsB1B,EAAgB,QAAQ,EAC1G2B,GAAqBvL,EAAK4J,EAAgB,UAAYhB,EAAU,IAAM,CACpE,IAAI,gBAAgB5I,CAAG,EACxB,CACF,GAAE,MAAMxH,EAAI,EAAE,QAAQ,IAAM,CACvB4S,GACSC,IAGb,WAAW,IAAM,CACf/R,GAAS,OAAO,GACf,GAAI,EAKR,EAEMf,CACT,CACF,CAEM,SAAqB,IAAI6R,GAC/BpP,KAAmBA,GAAe,mBAAqBwQ,IC9T/B,YACtBzF,EACA0F,EAAW,EACXC,EAAY,EACZC,EAAW,GACXC,EAAmB,GACnB,CACG,OAAO,iBAAmB,IACfH,KACCC,MAcX,MAAsB3F,EAAkB,OAAUA,EAAqB,OACvE8F,EAAiC,CAAC,EAAG,iBAAkB,KAAMC,EAAe,EAWhF,GAVGF,GAAoBG,GAAShG,EAAM,IAAM,UAC1CgG,EAAQA,EAAM,OAAO,CACnB,EAAG,YACH,EAAGhG,EAAM,EACT,EAAGA,EAAM,EACT,KAAMA,EAAM,KACZ,KAAM+F,GACP,GAGAC,GAAO,OAAQ,CACR,UAAI,EAAG3T,EAAS2T,EAAM,OAAQ5T,EAAIC,EAAQ,EAAED,EAAG,CAC/C,QAAY4T,EAAM5T,CAAC,EACzB,GAAG,EAAE,MAAOkR,IAAc,EAAE,MAAOA,GAAY,SAE/BwC,IAEhB,MAAM5I,EAAO+I,GAAe3C,EAAU,EAAGA,EAAU,EAAGoC,EAAUC,CAAS,EACzE,GAAGzI,EAAK,OAASwI,GAAYxI,EAAK,QAAUyI,EAC1C,MAIDC,GAAYE,EAAc,IAAM,kBAAoBE,EAAM,CAAC,EAAE,IAAM,sBACpEF,EAAgBE,EAAM,CAAC,GAIpB,QACT,CC/DA,SAAwBE,GAAsB/D,EAAiB,CACtD,SAAI,eAAe,CAAC,CAC7B,CCHO,SAASgE,GAAYC,EAAmB,CAEtC,OADYC,GAAaC,GAAYF,CAAS,CAAC,EAAE,KAAK,GAAG,CAElE,CAEA,MAAMG,GAAa,UAEbC,GAAkB,OAAO,aAAa,IAAM,EAE5CF,GAAeG,GAAsBA,EAAS,QAAQD,EAAe,EAAI,EAAIC,EAAS,QAAQF,GAAY,EAAE,EAAIE,EAE/G,SAASJ,GAAaK,EAA0C,CACrE,MAAMC,EAAS,GACf,IAAI/G,EAAO,EACPgH,EAAW,EACXxU,EAAI,EACF,OAAIsU,EAAkB,QACnB9G,IAAkB,WAAWxN,GAAG,EACpCwU,GACMD,QAAM,OAAYC,EAAW,OAAW,KAAOhH,EAAO,QAAS,SAAS,EAAE,CAAC,EACvEgH,KACHhH,EAAO,OAAUA,GAAQ,MACtBgH,IAEXD,EAAO,KAAK/G,EAAK,SAAS,EAAE,CAAC,EAIjC,OAAG+G,EAAO,QAAUA,EAAO,CAAC,EAAE,SAAW,IACvCA,EAAO,CAAC,EAAI,KAAOA,EAAO,CAAC,GAGtBA,CACT,CAEO,SAASE,GAAkBC,EAAe,CACzC,QAAQA,EAAM,MAAM,iBAAiB,EACpC,SAAQ,GAAK,MAAQC,EAAM,CAAC,EAAE,WAAW,CAAC,GAAK,CACxD,CAEA,MAAMC,OAAoD,IAAI,CAC5D,CAAC,KAAM,MAAM,CACf,CAAC,EAEM,SAASC,GAAgBC,EAAc,CAC5C,OAAOF,GAAyB,IAAIE,CAAI,GACtC,OAAO,aAAa,MAAO,MAAQA,EAAK,WAAW,CAAC,EAAG,MAAO,MAAQA,EAAK,WAAW,CAAC,CAAC,CAC5F,CAEO,SAASC,GAAoBC,EAAoB,CACtD,OAAOA,EAAW,MAAM,GAAG,EAAE,OAAO,CAACC,EAAMC,IAASD,EAAO,OAAO,cAAc,SAASC,EAAM,EAAE,CAAC,EAAG,EAAE,CACzG,CCrCA,MAAMC,GAAgB,KAKhB,CACJ,QAAS,GACT,MAAO,CAAC,EACR,iBAAkB,CAAC,CACrB,GAEMC,GAAmBjO,GAAU,YAAY,EAIxC,MAAMkO,EAAiB,CAAvB,cACL,KAAQ,QAAUF,KAClB,KAAQ,mBAAqC,GA4DtC,eAAapV,GAA2B,CAC7C,GAAG,KAAK,UAAW,OAAOA,EAAS,EAC9B,wBAAmB,KAAKA,CAAQ,EACvC,CA3DO,OAAQ,CACb,MAAMoS,EAAU,KAAK,QACrBA,EAAQ,QAAU,GAClBA,EAAQ,MAAM,OAAO,EAAGA,EAAQ,MAAM,MAAM,EAAE,QAASmD,GAAWA,EAAO,QAAS,GAC1EnD,mBAAiB,OAAO,EAAGA,EAAQ,iBAAiB,MAAM,EAAE,QAASpS,GAAaA,EAAU,GACpGoS,EAAQ,WAAa,OACrB,KAAK,QAAUgD,IACjB,CAEO,SAAU,CACf,KAAK,UAAY,GACjB,KAAK,MAAM,EACN,wBAAmB,OAAO,EAAG,KAAK,mBAAmB,MAAM,EAAE,QAASpV,GAAaA,EAAU,GAE/F,KAAK,SACNwB,GAAiB,KAAK,OAAO,QAAQ,MAAO,IAAI,EAChD,KAAK,OAAS,OAElB,CAEQ,2BAA2B4Q,EAA2CoD,EAAoC,CAChH,MAAMlN,EAAyB,IACtB,CAAC8J,EAAQ,UAAY,CAACoD,GAAsBA,EAAmB,GAGxE,SAAW,OAAS,IAAM,CACxB,GAAG,CAAClN,EAAW,EAAS,SACxB,MAAMiN,EAASE,KACf,SAAO,OAAS,KACRrD,QAAM,KAAKmD,CAAM,EAClBA,GAGEjN,UAAWtI,GAAa,CACjC,GAAG,CAACsI,EAAW,EAAG,OAAOtI,EAAS,EAC1BoS,mBAAiB,KAAKpS,CAAQ,GAGxCsI,EAAW,UAAY,KAAK,UAErBA,CACT,CAEO,IAAIkN,EAAoC,CAC7C,MAAMpD,EAAU,KAAK,QACrB,OAAGA,EAAQ,QACF,KAAK,2BAA2BA,CAAO,EAG7CoD,EACM,KAAK,2BAA2BpD,EAASoD,CAAkB,EAG7DpD,EAAQ,aAARA,EAAQ,WAAe,KAAK,2BAA2BA,CAAO,EACvE,CAMF,CAGO,SAASqD,IAAgB,CAC9B,OAAO,IAAIH,EACb,CClGwB,YAA0CI,EAAgCC,EAAO,CACvG,IAAIC,EAAU,GACV/Q,EAEJ,MAAO,IAAIgR,IAAyB,CAC3BhR,IAEH+Q,IACQA,KAEVF,EAAY,IAAM,CACNE,KAEVD,EAAG,GAAG9Q,CAAI,EACX,EACH,CAEJ,CCfA,SAAwBiR,GAA6CH,EAAO,CACnE,UAAapT,GAASoT,CAAE,CACjC,CC4GK,MAACI,GAAe,CACnB,QAAS,OACT,SAAU,MACZ,EAYMC,GAAU,CAAChE,EAAGiE,IAAMjE,IAAMiE,EAC1BC,GAAS,OAAO,aAAa,EAC7BC,GAAS,OAAO,aAAa,EAE7BC,GAAgB,CACpB,OAAQJ,EACV,EAEA,IAAIK,GAAaC,GACjB,MAAMC,GAAQ,EACRC,GAAU,EACVC,GAAU,CACd,MAAO,KACP,SAAU,KACV,QAAS,KACT,MAAO,IACT,EACMC,GAAU,GAChB,IAAIC,EAAQ,KACZ,IAAIC,GAAa,KAGbC,EAAW,KACXC,EAAU,KACVC,GAAU,KACVC,GAAY,EAChB,KAAM,CAACC,GAAcC,EAAe,EAAiBC,GAAa,EAAK,EACvE,SAASC,GAAWzB,EAAI0B,EAAe,CACrC,MAAMC,EAAWT,EACfU,EAAQZ,EACRa,EAAU7B,EAAG,SAAW,EACxB8B,EAAOD,EAAUf,GAAU,CACzB,MAAO,KACP,SAAU,KACV,QAAS,KACT,MAAOY,IAAkB,OAAYE,EAAQF,CAC9C,EACDK,EAAWF,EAAU7B,EAAK,IAAMA,EAAG,IAAMgC,EAAQ,IAAMC,GAAUH,CAAI,CAAC,CAAC,EACzEd,EAAQc,EACRZ,EAAW,KACX,GAAI,CACF,OAAOgB,GAAWH,EAAU,EAAI,CACpC,QAAY,CACRb,EAAWS,EACXX,EAAQY,CACT,CACH,CACA,SAASJ,GAAajU,EAAOvB,EAAS,CACpCA,EAAUA,EAAU,OAAO,OAAO,CAAE,EAAEyU,GAAezU,CAAO,EAAIyU,GAChE,MAAM0B,EAAI,CACR,QACA,UAAW,KACX,cAAe,KACf,WAAYnW,EAAQ,QAAU,MAClC,EACQoW,EAAS7U,IACT,OAAOA,GAAU,aAC6EA,EAAQA,EAAM4U,EAAE,KAAK,GAEhHE,GAAYF,EAAG5U,CAAK,GAE7B,MAAO,CAAC+U,GAAW,KAAKH,CAAC,EAAGC,CAAM,CACpC,CACA,SAASG,GAAevC,EAAIzS,EAAOvB,EAAS,CAC1C,MAAM8D,EAAI0S,GAAkBxC,EAAIzS,EAAO,GAAMqT,EAAK,EACsB6B,GAAkB3S,CAAC,CAC7F,CACA,SAAS4S,GAAmB1C,EAAIzS,EAAOvB,EAAS,CAC9C,MAAM8D,EAAI0S,GAAkBxC,EAAIzS,EAAO,GAAOqT,EAAK,EACqB6B,GAAkB3S,CAAC,CAC7F,CACA,SAAS6S,GAAa3C,EAAIzS,EAAOvB,EAAS,CACxC0U,GAAakC,GACR,MAAC9S,EAAI0S,GAAkBxC,EAAIzS,EAAO,GAAOqT,EAAK,GAG/C,CAAC5U,GAAW,CAACA,EAAQ,UAAQ8D,EAAE,KAAO,IAC1CsR,GAAUA,GAAQ,KAAKtR,CAAC,EAAI2S,GAAkB3S,CAAC,CACjD,CACA,SAAS+S,GAAeC,EAAc9W,EAAS,CAC7C,IAAIgU,EACC,MAAClQ,EAAI0S,GAAkB,IAAM,CAC9BxC,EAAKA,EAAE,EAAKgC,EAAQc,CAAY,EAChC9C,EAAK,MACX,EAAO,OAAW,GAAO,CAAC,EAGxB,SAAE,KAAO,GACF+C,GAAY,CACjB/C,EAAK+C,EACLN,GAAkB3S,CAAC,CACvB,CACA,CACA,SAASkT,GAAWhD,EAAIzS,EAAOvB,EAAS,CACtCA,EAAUA,EAAU,OAAO,OAAO,CAAE,EAAEyU,GAAezU,CAAO,EAAIyU,GAChE,MAAM3Q,EAAI0S,GAAkBxC,EAAIzS,EAAO,GAAM,CAAC,EAC9C,SAAE,UAAY,KACduC,EAAE,cAAgB,KAClBA,EAAE,WAAa9D,EAAQ,QAAU,OAI1ByW,GAAkB3S,CAAC,EACnBwS,GAAW,KAAKxS,CAAC,CAC1B,CACA,SAASmT,GAAeC,EAASC,EAAUC,EAAU,CACnD,IAAIC,EACAC,EACAtX,EACA,UAAU,SAAW,GAAK,OAAOmX,GAAa,UAAY,UAAU,SAAW,GACjFE,EAAS,GACTC,EAAUJ,EACVlX,EAAUmX,GAAY,KAEtBE,EAASH,EACTI,EAAUH,EACVnX,EAAUoX,GAAY,IAErB,IAACG,EAAK,KACPC,EAAQzC,GAGR0C,EAAY,GACZC,EAAY,iBAAkB1X,EAC9B2X,EAAU,OAAON,GAAW,YAAcL,GAAWK,CAAM,EAC7D,MAAMO,EAAW,IAAI,IACnB,CAACrW,EAAOsW,CAAQ,GAAK7X,EAAQ,SAAWwV,IAAcxV,EAAQ,YAAY,EAC1E,CAACoF,EAAO0S,CAAQ,EAAItC,GAAa,MAAS,EAC1C,CAACuC,EAAOC,CAAO,EAAIxC,GAAa,OAAW,CACzC,OAAQ,EACd,CAAK,EACD,CAACyC,EAAOC,CAAQ,EAAI1C,GAAakC,EAAW,QAAU,YAAY,EAMpE,SAASS,EAAQjZ,EAAGkZ,EAAGhT,EAAO0C,EAAK,CACjC,OAAIyP,IAAOrY,IACTqY,EAAK,KACLzP,IAAQ,SAAc4P,EAAW,KAC5BxY,IAAMsY,GAASY,IAAMZ,IAAUxX,EAAQ,YAAY,eAAe,IAAMA,EAAQ,WAAW8H,EAAK,CACnG,MAAOsQ,CACR,EAAC,EACFZ,EAAQzC,GAQDsD,EAAaD,EAAGhT,CAAK,GAEvBgT,CACR,CACD,SAASC,EAAaD,EAAGpU,EAAK,CAC5BkS,GAAW,IAAM,CACXlS,IAAQ,QAAW6T,EAAS,IAAMO,CAAC,EACvCF,EAASlU,IAAQ,OAAY,UAAY0T,EAAW,QAAU,YAAY,EAC1EI,EAAS9T,CAAG,EACZ,UAAWF,KAAK8T,EAAS,KAAI,EAAI9T,EAAE,YACnC8T,EAAS,MAAK,CACf,EAAE,EAAK,CACT,CACD,SAASU,GAAO,CACd,MAAMxU,EAAIyU,GACRH,EAAI7W,EAAO,EACXyC,EAAMoB,EAAK,EACb,GAAIpB,IAAQ,QAAa,CAACuT,EAAI,MAAMvT,EACpC,OAAIkR,GAAY,CAACA,EAAS,MAAQpR,GAChCyS,GAAe,IAAM,CACnBwB,IACIR,IACEzT,EAAE,UAAuF8T,EAAS,IAAI9T,CAAC,IACzGA,EAAE,UAAS,EACX8T,EAAS,IAAI9T,CAAC,GAG1B,CAAO,EAEIsU,CACR,CACD,SAASI,EAAKC,EAAa,GAAM,CAC/B,GAAIA,IAAe,IAAShB,EAAW,OACvCA,EAAY,GACZ,MAAMzO,EAAS2O,EAAUA,EAAO,EAAKN,EAErC,GAAIrO,GAAU,MAAQA,IAAW,GAAO,CACtCmP,EAAQZ,EAAIvB,EAAQzU,CAAK,CAAC,EAC1B,OAGF,MAAMrC,EAAIsY,IAAUzC,GAAUyC,EAAQxB,EAAQ,IAAMsB,EAAQtO,EAAQ,CAClE,MAAOzH,EAAO,EACd,YACD,EAAC,EACF,OAAI,OAAOrC,GAAM,UAAY,EAAEA,GAAK,SAAUA,IAC5CiZ,EAAQZ,EAAIrY,EAAG,OAAW8J,CAAM,EACzB9J,IAETqY,EAAKrY,EACLuY,EAAY,GACZ,eAAe,IAAMA,EAAY,EAAK,EACtCvB,GAAW,IAAM,CACfgC,EAASR,EAAW,aAAe,SAAS,EAC5CM,GACD,EAAE,EAAK,EACD9Y,EAAE,KAAKkZ,GAAKD,EAAQjZ,EAAGkZ,EAAG,OAAWpP,CAAM,EAAGpK,GAAKuZ,EAAQjZ,EAAG,OAAWwZ,GAAU9Z,CAAC,EAAGoK,CAAM,CAAC,EACtG,CACD,cAAO,iBAAiBsP,EAAM,CAC5B,MAAO,CACL,IAAK,IAAML,EAAO,CACnB,EACD,MAAO,CACL,IAAK,IAAM7S,EAAO,CACnB,EACD,QAAS,CACP,KAAM,CACJ,MAAM+Q,EAAI8B,IACV,OAAO9B,IAAM,WAAaA,IAAM,YACjC,CACF,EACD,OAAQ,CACN,KAAM,CACJ,GAAI,CAACuB,EAAU,OAAOY,IACtB,MAAMtU,EAAMoB,IACZ,GAAIpB,GAAO,CAACuT,EAAI,MAAMvT,EACtB,OAAOzC,EAAK,CACb,CACF,CACL,CAAG,EACGoW,EAASpB,GAAe,IAAMiC,EAAK,EAAK,CAAC,EAAOA,EAAK,EAAK,EACvD,CAACF,EAAM,CACZ,QAASE,EACT,OAAQX,CACZ,CAAG,CACH,CAyCA,SAASc,GAAM3E,EAAI,CACjB,OAAOkC,GAAWlC,EAAI,EAAK,CAC7B,CACA,SAASgC,EAAQhC,EAAI,CACnB,GAAIkB,IAAa,KAAM,OAAOlB,IAC9B,MAAM2B,EAAWT,EACjBA,EAAW,KACX,GAAI,CACF,OAAOlB,EAAE,CACb,QAAY,CACRkB,EAAWS,CACZ,CACH,CACA,SAASiD,GAAGC,EAAM7E,EAAIhU,EAAS,CAC7B,MAAM8Y,EAAU,MAAM,QAAQD,CAAI,EAClC,IAAIE,EACAC,EAAQhZ,GAAWA,EAAQ,MAC/B,OAAOiZ,GAAa,CAClB,IAAIjG,EACJ,GAAI8F,EAAS,CACX9F,EAAQ,MAAM6F,EAAK,MAAM,EACzB,QAASva,EAAI,EAAGA,EAAIua,EAAK,OAAQva,IAAK0U,EAAM1U,CAAC,EAAIua,EAAKva,CAAC,EAAC,OACnD0U,EAAQ6F,IACf,GAAIG,EAAO,CACTA,EAAQ,GACR,OAEF,MAAM9K,EAAS8H,EAAQ,IAAMhC,EAAGhB,EAAO+F,EAAWE,CAAS,CAAC,EAC5D,SAAYjG,EACL9E,CACX,CACA,CACA,SAASgL,GAAQlF,EAAI,CACnB2C,GAAa,IAAMX,EAAQhC,CAAE,CAAC,CAChC,CACA,SAASmF,GAAUnF,EAAI,CACrB,OAAIgB,IAAU,OAAgBA,EAAM,WAAa,KAAMA,EAAM,SAAW,CAAChB,CAAE,EAAOgB,EAAM,SAAS,KAAKhB,CAAE,GACjGA,CACT,CAsBA,SAASoF,IAAc,CACrB,OAAOlE,CACT,CACA,SAASmE,IAAW,CAClB,OAAOrE,CACT,CACA,SAASsE,GAAaC,EAAGvF,EAAI,CAC3B,MAAMT,EAAOyB,EACPwE,EAAetE,EACrBF,EAAQuE,EACRrE,EAAW,KACX,GAAI,CACF,OAAOgB,GAAWlC,EAAI,EAAI,CAC3B,OAAQhQ,EAAP,CACAyV,GAAYzV,CAAG,CACnB,QAAY,CACRgR,EAAQzB,EACR2B,EAAWsE,CACZ,CACH,CAIA,SAASE,GAAgB1F,EAAI,CAK3B,MAAM2F,EAAIzE,EACJqE,EAAIvE,EACV,OAAO,QAAQ,UAAU,KAAK,IAAM,CAClCE,EAAWyE,EACX3E,EAAQuE,EACR,IAAIK,EAaJ,UAAW5F,EAAI,EAAK,EACpBkB,EAAWF,EAAQ,KACZ4E,EAAIA,EAAE,KAAO,MACxB,CAAG,CACH,CACA,SAASC,IAAgB,CACvB,MAAO,CAACvE,GAAcoE,EAAe,CACvC,CAKA,SAASI,GAAcC,EAAc/Z,EAAS,CAC5C,MAAMoR,EAAK,OAAO,SAAS,EAC3B,MAAO,CACL,KACA,SAAU4I,GAAe5I,CAAE,EAC3B,cACJ,CACA,CACA,SAAS6I,GAAW5X,EAAS,CAC3B,IAAIqL,EACJ,OAAQA,EAAM1E,GAAOgM,EAAO3S,EAAQ,EAAE,KAAO,OAAYqL,EAAMrL,EAAQ,YACzE,CACA,SAAS6X,GAASlG,EAAI,CACpB,MAAMkG,EAAWlD,GAAWhD,CAAE,EACxBmG,EAAOnD,GAAW,IAAMoD,GAAgBF,EAAQ,CAAE,CAAC,EACzD,SAAK,QAAU,IAAM,CACnB,MAAMpW,EAAIqW,IACV,OAAO,MAAM,QAAQrW,CAAC,EAAIA,EAAIA,GAAK,KAAO,CAACA,CAAC,EAAI,EACpD,EACSqW,CACT,CACA,IAAI5B,GAsBJ,SAASjC,IAAa,CAEpB,GAAI,KAAK,SAA8C,KAAK,MAC1D,GAAuC,KAAK,QAAW1B,GAAO6B,GAAkB,IAAI,MAAO,CACzF,MAAM4D,EAAUlF,EAChBA,EAAU,KACVe,GAAW,IAAMoE,GAAa,IAAI,EAAG,EAAK,EAC1CnF,EAAUkF,EAGd,GAAInF,EAAU,CACZ,MAAMqF,EAAQ,KAAK,UAAY,KAAK,UAAU,OAAS,EAClDrF,EAAS,SAIZA,EAAS,QAAQ,KAAK,IAAI,EAC1BA,EAAS,YAAY,KAAKqF,CAAK,IAJ/BrF,EAAS,QAAU,CAAC,IAAI,EACxBA,EAAS,YAAc,CAACqF,CAAK,GAK1B,KAAK,WAIR,KAAK,UAAU,KAAKrF,CAAQ,EAC5B,KAAK,cAAc,KAAKA,EAAS,QAAQ,OAAS,CAAC,IAJnD,KAAK,UAAY,CAACA,CAAQ,EAC1B,KAAK,cAAgB,CAACA,EAAS,QAAQ,OAAS,CAAC,GAOrD,OAAO,KAAK,KACd,CACA,SAASmB,GAAYnP,EAAM3F,EAAOiZ,EAAQ,CACxC,IAAIC,EAA2FvT,EAAK,MACpG,OAAI,CAACA,EAAK,YAAc,CAACA,EAAK,WAAWuT,EAASlZ,CAAK,KAQ9C2F,EAAK,MAAQ3F,EAChB2F,EAAK,WAAaA,EAAK,UAAU,QACnCgP,GAAW,IAAM,CACf,QAAS5X,EAAI,EAAGA,EAAI4I,EAAK,UAAU,OAAQ5I,GAAK,EAAG,CACjD,MAAMib,EAAIrS,EAAK,UAAU5I,CAAC,EACpBoc,EAAoBzF,IAAcA,GAAW,QAC/CyF,GAAqBzF,GAAW,SAAS,IAAIsE,CAAC,GAC9CmB,EAAoB,CAACnB,EAAE,OAAS,CAACA,EAAE,SACjCA,EAAE,KAAMpE,EAAQ,KAAKoE,CAAC,EAAOnE,GAAQ,KAAKmE,CAAC,EAC3CA,EAAE,WAAWoB,GAAepB,CAAC,GAE9BmB,IAAmBnB,EAAE,MAAQ3E,IAEpC,GAAIO,EAAQ,OAAS,IACnB,QAAU,GAEJ,IAAI,KAEb,EAAE,EAAK,GAGL5T,CACT,CACA,SAASkV,GAAkBvP,EAAM,CAC/B,GAAI,CAACA,EAAK,GAAI,OACd+O,GAAU/O,CAAI,EACd,MAAM0O,EAAQZ,EACZW,EAAWT,EACXjQ,EAAOoQ,GACTH,EAAWF,EAAQ9N,EACnB0T,GAAe1T,EAAuFA,EAAK,MAAOjC,CAAI,EAWtHiQ,EAAWS,EACXX,EAAQY,CACV,CACA,SAASgF,GAAe1T,EAAM3F,EAAO0D,EAAM,CACzC,IAAI4V,EACJ,GAAI,CACFA,EAAY3T,EAAK,GAAG3F,CAAK,CAC1B,OAAQyC,EAAP,CACA,OAAIkD,EAAK,OAMLA,EAAK,MAAQ0N,GACb1N,EAAK,OAASA,EAAK,MAAM,QAAQ+O,EAAS,EAC1C/O,EAAK,MAAQ,MAGjBA,EAAK,UAAYjC,EAAO,EACjBwU,GAAYzV,CAAG,CACvB,EACG,CAACkD,EAAK,WAAaA,EAAK,WAAajC,KACnCiC,EAAK,WAAa,MAAQ,cAAeA,EAC3CmP,GAAYnP,EAAM2T,CAAe,EAI5B3T,EAAK,MAAQ2T,EACpB3T,EAAK,UAAYjC,EAErB,CACA,SAASuR,GAAkBxC,EAAI8G,EAAMC,EAAM9C,EAAQrD,GAAO5U,EAAS,CACjE,MAAM8D,EAAI,CACR,KACA,MAAOmU,EACP,UAAW,KACX,MAAO,KACP,QAAS,KACT,YAAa,KACb,SAAU,KACV,MAAO6C,EACP,MAAO9F,EACP,QAAS,KACT,MACJ,EAKE,OAAIA,IAAU,MAAgBA,IAAUF,KAI/BE,EAAM,MAA8BA,EAAM,MAAM,KAAKlR,CAAC,EAAzCkR,EAAM,MAAQ,CAAClR,CAAC,GAgB/BA,CACT,CACA,SAASkX,GAAO9T,EAAM,CAEpB,GAAuCA,EAAK,QAAW,EAAG,OAC1D,GAAuCA,EAAK,QAAW2N,GAAS,OAAOyF,GAAapT,CAAI,EACxF,GAAIA,EAAK,UAAY8O,EAAQ9O,EAAK,SAAS,UAAU,EAAG,OAAOA,EAAK,SAAS,QAAQ,KAAKA,CAAI,EAC9F,MAAM+T,EAAY,CAAC/T,CAAI,EACvB,MAAQA,EAAOA,EAAK,SAAW,CAACA,EAAK,WAAaA,EAAK,UAAYmO,KAE3BnO,EAAK,OAAO+T,EAAU,KAAK/T,CAAI,EAEvE,QAAS5I,EAAI2c,EAAU,OAAS,EAAG3c,GAAK,EAAGA,IASzC,GARA4I,EAAO+T,EAAU3c,CAAC,EAQqB4I,EAAK,QAAW0N,GACrD6B,GAAkBvP,CAAI,UACsBA,EAAK,QAAW2N,GAAS,CACrE,MAAMwF,EAAUlF,EAChBA,EAAU,KACVe,GAAW,IAAMoE,GAAapT,EAAM+T,EAAU,CAAC,CAAC,EAAG,EAAK,EACxD9F,EAAUkF,EAGhB,CACA,SAASnE,GAAWlC,EAAI8G,EAAM,CAC5B,GAAI3F,EAAS,OAAOnB,IACpB,IAAIkH,EAAO,GACNJ,IAAM3F,EAAU,IACjBC,GAAS8F,EAAO,GAAU9F,GAAU,GACxCC,KACA,GAAI,CACF,MAAMjP,EAAM4N,IACZ,UAAgBkH,CAAI,EACb9U,CACR,OAAQpC,EAAP,CACKkX,IAAM9F,GAAU,MACrBD,EAAU,KACVsE,GAAYzV,CAAG,CAChB,CACH,CACA,SAASmX,GAAgBD,EAAM,CAK7B,GAJI/F,IAC6ER,GAASQ,CAAO,EAC/FA,EAAU,MAER+F,EAAM,OAmCV,MAAMtc,EAAIwW,GACVA,GAAU,KACNxW,EAAE,QAAQsX,GAAW,IAAMxB,GAAW9V,CAAC,EAAG,EAAK,CAErD,CACA,SAAS+V,GAASrI,EAAO,CACvB,QAAShO,EAAI,EAAGA,EAAIgO,EAAM,OAAQhO,IAAK0c,GAAO1O,EAAMhO,CAAC,CAAC,CACxD,CAkBA,SAASsY,GAAetK,EAAO,CAC7B,IAAIhO,EACF8c,EAAa,EACf,IAAK9c,EAAI,EAAGA,EAAIgO,EAAM,OAAQhO,IAAK,CACjC,MAAMM,EAAI0N,EAAMhO,CAAC,EACZM,EAAE,KAAqB0N,EAAM8O,GAAY,EAAIxc,EAArCoc,GAAOpc,CAAC,EAcvB,IAAKN,EAAI,EAAGA,EAAI8c,EAAY9c,IAAK0c,GAAO1O,EAAMhO,CAAC,CAAC,CAClD,CACA,SAASgc,GAAapT,EAAMmU,EAAQ,CAEUnU,EAAK,MAAQ,EACzD,QAAS5I,EAAI,EAAGA,EAAI4I,EAAK,QAAQ,OAAQ5I,GAAK,EAAG,CAC/C,MAAM+Y,EAASnQ,EAAK,QAAQ5I,CAAC,EAC7B,GAAI+Y,EAAO,QAAS,CAClB,MAAMY,EAA4CZ,EAAO,MACrDY,IAAUrD,GACRyC,IAAWgE,IAAW,CAAChE,EAAO,WAAaA,EAAO,UAAYhC,KAAY2F,GAAO3D,CAAM,EAClFY,IAAUpD,IAASyF,GAAajD,EAAQgE,CAAM,GAG/D,CACA,SAASV,GAAezT,EAAM,CAE5B,QAAS5I,EAAI,EAAGA,EAAI4I,EAAK,UAAU,OAAQ5I,GAAK,EAAG,CACjD,MAAMib,EAAIrS,EAAK,UAAU5I,CAAC,EACWib,EAAE,QACUA,EAAE,MAAQ1E,GACrD0E,EAAE,KAAMpE,EAAQ,KAAKoE,CAAC,EAAOnE,GAAQ,KAAKmE,CAAC,EAC/CA,EAAE,WAAaoB,GAAepB,CAAC,GAGrC,CACA,SAAStD,GAAU/O,EAAM,CACvB,IAAI5I,EACJ,GAAI4I,EAAK,QACP,KAAOA,EAAK,QAAQ,QAAQ,CAC1B,MAAMmQ,EAASnQ,EAAK,QAAQ,IAAK,EAC/BS,EAAQT,EAAK,YAAY,IAAK,EAC9BoU,EAAMjE,EAAO,UACf,GAAIiE,GAAOA,EAAI,OAAQ,CACrB,MAAM,EAAIA,EAAI,IAAK,EACjBnF,EAAIkB,EAAO,cAAc,MACvB1P,EAAQ2T,EAAI,SACd,EAAE,YAAYnF,CAAC,EAAIxO,EACnB2T,EAAI3T,CAAK,EAAI,EACb0P,EAAO,cAAc1P,CAAK,EAAIwO,IAW/B,GAAIjP,EAAK,MAAO,CACrB,IAAK5I,EAAI4I,EAAK,MAAM,OAAS,EAAG5I,GAAK,EAAGA,IAAK2X,GAAU/O,EAAK,MAAM5I,CAAC,CAAC,EACpE4I,EAAK,MAAQ,KAEf,GAAIA,EAAK,SAAU,CACjB,IAAK5I,EAAI4I,EAAK,SAAS,OAAS,EAAG5I,GAAK,EAAGA,IAAK4I,EAAK,SAAS5I,CAAC,EAAC,EAChE4I,EAAK,SAAW,KAEyCA,EAAK,MAAQ,EACxEA,EAAK,QAAU,IACjB,CAUA,SAASwR,GAAU1U,EAAK,CACtB,OAAIA,aAAe,MAAcA,EAC1B,IAAI,MAAM,OAAOA,GAAQ,SAAWA,EAAM,gBAAiB,CAChE,MAAOA,CACX,CAAG,CACH,CAQA,SAASyV,GAAYzV,EAAK4R,EAAQZ,EAAO,CAEvC,MAAM5P,EAAQsT,GAAU1U,CAAG,EACjB,CACR,QAAQ,MAAM,cAAeoB,CAAK,EAClC,MACD,CAOH,CACA,SAAS4D,GAAO4M,EAAO9N,EAAK,CAC1B,OAAO8N,EAAQA,EAAM,SAAWA,EAAM,QAAQ9N,CAAG,IAAM,OAAY8N,EAAM,QAAQ9N,CAAG,EAAIkB,GAAO4M,EAAM,MAAO9N,CAAG,EAAI,MACrH,CACA,SAASsS,GAAgBF,EAAU,CACjC,GAAI,OAAOA,GAAa,YAAc,CAACA,EAAS,OAAQ,OAAOE,GAAgBF,EAAQ,CAAE,EACzF,GAAI,MAAM,QAAQA,CAAQ,EAAG,CAC3B,MAAMxN,EAAU,GAChB,QAASpO,EAAI,EAAGA,EAAI4b,EAAS,OAAQ5b,IAAK,CACxC,MAAM4P,EAASkM,GAAgBF,EAAS5b,CAAC,CAAC,EAC1C,MAAM,QAAQ4P,CAAM,EAAIxB,EAAQ,KAAK,MAAMA,EAASwB,CAAM,EAAIxB,EAAQ,KAAKwB,CAAM,EAEnF,OAAOxB,EAET,OAAOwN,CACT,CACA,SAASF,GAAe5I,EAAIpR,EAAS,CACnC,OAAO,SAAkBub,EAAO,CAC9B,IAAInV,EACJ,UAAmB,IAAMA,EAAM4P,EAAQ,KACrChB,EAAM,QAAU,CACd,CAAC5D,CAAE,EAAGmK,EAAM,KACpB,EACarB,GAAS,IAAMqB,EAAM,QAAQ,EACrC,EAAG,MAAS,EACNnV,CACX,CACA,CA+CA,MAAMoV,GAAW,OAAO,UAAU,EAClC,SAASC,GAAQvK,EAAG,CAClB,QAAS5S,EAAI,EAAGA,EAAI4S,EAAE,OAAQ5S,IAAK4S,EAAE5S,CAAC,GACxC,CACA,SAASod,GAASC,EAAMC,EAAO5b,EAAU,GAAI,CAC3C,IAAI6H,EAAQ,CAAE,EACZgU,EAAS,CAAE,EACXC,EAAY,CAAE,EACd3Q,EAAM,EACN4Q,EAAUH,EAAM,OAAS,EAAI,GAAK,KACpC,UAAU,IAAMH,GAAQK,CAAS,CAAC,EAC3B,IAAM,CACX,IAAIE,EAAWL,EAAI,GAAM,CAAE,EACzBrd,EACA2d,EACF,SAASzH,EAAM,EACRwB,EAAQ,IAAM,CACnB,IAAIkG,EAASF,EAAS,OACpBG,EACAC,EACAC,EACAC,EACAC,EACAnR,EACAoR,EACAC,EACA1c,EACF,GAAImc,IAAW,EACT/Q,IAAQ,IACVsQ,GAAQK,CAAS,EACjBA,EAAY,GACZjU,EAAQ,GACRgU,EAAS,GACT1Q,EAAM,EACN4Q,IAAYA,EAAU,KAEpB/b,EAAQ,WACV6H,EAAQ,CAAC2T,EAAQ,EACjBK,EAAO,CAAC,EAAIpG,GAAWiH,IACrBZ,EAAU,CAAC,EAAIY,EACR1c,EAAQ,WAChB,EACDmL,EAAM,WAGDA,IAAQ,EAAG,CAElB,IADA0Q,EAAS,IAAI,MAAMK,CAAM,EACpBD,EAAI,EAAGA,EAAIC,EAAQD,IACtBpU,EAAMoU,CAAC,EAAID,EAASC,CAAC,EACrBJ,EAAOI,CAAC,EAAIxG,GAAWkH,CAAM,EAE/BxR,EAAM+Q,MACD,CAIL,IAHAG,EAAO,IAAI,MAAMH,CAAM,EACvBI,EAAgB,IAAI,MAAMJ,CAAM,EAChCH,IAAYQ,EAAc,IAAI,MAAML,CAAM,GACrC9Q,EAAQ,EAAGoR,EAAM,KAAK,IAAIrR,EAAK+Q,CAAM,EAAG9Q,EAAQoR,GAAO3U,EAAMuD,CAAK,IAAM4Q,EAAS5Q,CAAK,EAAGA,IAAQ,CACtG,IAAKoR,EAAMrR,EAAM,EAAGsR,EAASP,EAAS,EAAGM,GAAOpR,GAASqR,GAAUrR,GAASvD,EAAM2U,CAAG,IAAMR,EAASS,CAAM,EAAGD,IAAOC,IAClHJ,EAAKI,CAAM,EAAIZ,EAAOW,CAAG,EACzBF,EAAcG,CAAM,EAAIX,EAAUU,CAAG,EACrCT,IAAYQ,EAAYE,CAAM,EAAIV,EAAQS,CAAG,GAI/C,IAFAL,EAAa,IAAI,IACjBC,EAAiB,IAAI,MAAMK,EAAS,CAAC,EAChCR,EAAIQ,EAAQR,GAAK7Q,EAAO6Q,IAC3Blc,EAAOic,EAASC,CAAC,EACjB3d,EAAI6d,EAAW,IAAIpc,CAAI,EACvBqc,EAAeH,CAAC,EAAI3d,IAAM,OAAY,GAAKA,EAC3C6d,EAAW,IAAIpc,EAAMkc,CAAC,EAExB,IAAK3d,EAAI8M,EAAO9M,GAAKke,EAAKle,IACxByB,EAAO8H,EAAMvJ,CAAC,EACd2d,EAAIE,EAAW,IAAIpc,CAAI,EACnBkc,IAAM,QAAaA,IAAM,IAC3BI,EAAKJ,CAAC,EAAIJ,EAAOvd,CAAC,EAClBge,EAAcL,CAAC,EAAIH,EAAUxd,CAAC,EAC9Byd,IAAYQ,EAAYN,CAAC,EAAIF,EAAQzd,CAAC,GACtC2d,EAAIG,EAAeH,CAAC,EACpBE,EAAW,IAAIpc,EAAMkc,CAAC,GACjBH,EAAUxd,CAAC,IAEpB,IAAK2d,EAAI7Q,EAAO6Q,EAAIC,EAAQD,IACtBA,KAAKI,GACPR,EAAOI,CAAC,EAAII,EAAKJ,CAAC,EAClBH,EAAUG,CAAC,EAAIK,EAAcL,CAAC,EAC1BF,IACFA,EAAQE,CAAC,EAAIM,EAAYN,CAAC,EAC1BF,EAAQE,CAAC,EAAEA,CAAC,IAETJ,EAAOI,CAAC,EAAIxG,GAAWkH,CAAM,EAEtCd,EAASA,EAAO,MAAM,EAAG1Q,EAAM+Q,CAAM,EACrCrU,EAAQmU,EAAS,MAAM,CAAC,EAE1B,OAAOH,CACb,CAAK,EACD,SAASc,EAAOD,EAAU,CAExB,GADAZ,EAAUG,CAAC,EAAIS,EACXX,EAAS,CACX,KAAM,CAAC5F,EAAGxL,CAAG,EAAI6K,GAAayG,CAAC,EAC/B,SAAQA,CAAC,EAAItR,EACNiR,EAAMI,EAASC,CAAC,EAAG9F,CAAC,EAE7B,OAAOyF,EAAMI,EAASC,CAAC,CAAC,CACzB,CACL,CACA,CAkEA,SAASW,GAAgBC,EAAMtB,EAAO,CAUpC,OAAOvF,EAAQ,IAAM6G,EAAKtB,GAAS,EAAE,CAAC,CACxC,CACA,SAASuB,IAAS,CAChB,MAAO,EACT,CACA,MAAMC,GAAY,CAChB,IAAIC,EAAGC,EAAUC,EAAU,CACzB,OAAID,IAAa1I,GAAe2I,EACzBF,EAAE,IAAIC,CAAQ,CACtB,EACD,IAAID,EAAGC,EAAU,CACf,OAAIA,IAAa1I,GAAe,GACzByI,EAAE,IAAIC,CAAQ,CACtB,EACD,IAAKH,GACL,eAAgBA,GAChB,yBAAyBE,EAAGC,EAAU,CACpC,MAAO,CACL,aAAc,GACd,WAAY,GACZ,KAAM,CACJ,OAAOD,EAAE,IAAIC,CAAQ,CACtB,EACD,IAAKH,GACL,eAAgBA,EACtB,CACG,EACD,QAAQE,EAAG,CACT,OAAOA,EAAE,MACV,CACH,EACA,SAASG,GAAchH,EAAG,CACxB,OAASA,EAAI,OAAOA,GAAM,WAAaA,EAAC,EAAKA,GAAUA,EAAL,CAAE,CACtD,CACA,SAASiH,IAAiB,CACxB,QAAS9e,EAAI,EAAGC,EAAS,KAAK,OAAQD,EAAIC,EAAQ,EAAED,EAAG,CACrD,MAAM8Z,EAAI,KAAK9Z,CAAC,IAChB,GAAI8Z,IAAM,OAAW,OAAOA,EAEhC,CACA,SAASiF,MAAcC,EAAS,CAC9B,IAAIC,EAAQ,GACZ,QAASjf,EAAI,EAAGA,EAAIgf,EAAQ,OAAQhf,IAAK,CACvC,MAAM6X,EAAImH,EAAQhf,CAAC,EACnBif,EAAQA,GAAS,CAAC,CAACpH,GAAK5B,MAAU4B,EAClCmH,EAAQhf,CAAC,EAAI,OAAO6X,GAAM,YAAcoH,EAAQ,GAAMvG,GAAWb,CAAC,GAAKA,EAEzE,GAAIoH,EACF,OAAO,IAAI,MAAM,CACf,IAAIN,EAAU,CACZ,QAAS,EAAIK,EAAQ,OAAS,EAAG,GAAK,EAAG,IAAK,CAC5C,MAAMlF,EAAI+E,GAAcG,EAAQ,CAAC,CAAC,EAAEL,CAAQ,EAC5C,GAAI7E,IAAM,OAAW,OAAOA,EAE/B,EACD,IAAI6E,EAAU,CACZ,QAAS,EAAIK,EAAQ,OAAS,EAAG,GAAK,EAAG,IACvC,GAAIL,KAAYE,GAAcG,EAAQ,CAAC,CAAC,EAAG,MAAO,GAEpD,MAAO,EACR,EACD,MAAO,CACL,MAAME,EAAO,GACb,QAAS,EAAI,EAAG,EAAIF,EAAQ,OAAQ,IAAKE,EAAK,KAAK,GAAG,OAAO,KAAKL,GAAcG,EAAQ,CAAC,CAAC,CAAC,CAAC,EAC5F,MAAO,CAAC,GAAG,IAAI,IAAIE,CAAI,CAAC,CACzB,CACF,EAAET,EAAS,EAEd,MAAM/d,EAAS,GACTye,EAAa,GACbC,EAAU,IAAI,IACpB,QAASpf,EAAIgf,EAAQ,OAAS,EAAGhf,GAAK,EAAGA,IAAK,CAC5C,MAAM+Y,EAASiG,EAAQhf,CAAC,EACxB,GAAI,CAAC+Y,EAAQ,SACb,MAAMsG,EAAa,OAAO,oBAAoBtG,CAAM,EACpD,QAAS/Y,EAAI,EAAGC,EAASof,EAAW,OAAQrf,EAAIC,EAAQD,IAAK,CAC3D,MAAMwJ,EAAM6V,EAAWrf,CAAC,EACxB,GAAIwJ,IAAQ,aAAeA,IAAQ,cAAe,SAClD,MAAM8V,EAAO,OAAO,yBAAyBvG,EAAQvP,CAAG,EACxD,GAAI,CAAC4V,EAAQ,IAAI5V,CAAG,EACd8V,EAAK,KACPF,EAAQ,IAAI5V,CAAG,EACf,OAAO,eAAe9I,EAAQ8I,EAAK,CACjC,WAAY,GACZ,aAAc,GACd,IAAKsV,GAAe,KAAKK,EAAW3V,CAAG,EAAI,CAAC8V,EAAK,IAAI,KAAKvG,CAAM,CAAC,CAAC,CAC9E,CAAW,IAEGuG,EAAK,QAAU,QAAWF,EAAQ,IAAI5V,CAAG,EAC7C9I,EAAO8I,CAAG,EAAI8V,EAAK,WAEhB,CACL,MAAMN,EAAUG,EAAW3V,CAAG,EAC1BwV,EACEM,EAAK,IACPN,EAAQ,KAAKM,EAAK,IAAI,KAAKvG,CAAM,CAAC,EACzBuG,EAAK,QAAU,QACxBN,EAAQ,KAAK,IAAMM,EAAK,KAAK,EAEtB5e,EAAO8I,CAAG,IAAM,SAAW9I,EAAO8I,CAAG,EAAI8V,EAAK,SAI/D,OAAO5e,CACT,CACA,SAAS6e,GAAWtC,KAAUiC,EAAM,CAClC,GAAIjJ,MAAUgH,EAAO,CACnB,MAAMuC,EAAU,IAAI,IAAIN,EAAK,OAAS,EAAIA,EAAK,KAAM,EAAGA,EAAK,CAAC,CAAC,EACzDpX,EAAMoX,EAAK,IAAIO,GACZ,IAAI,MAAM,CACf,IAAId,EAAU,CACZ,OAAOc,EAAE,SAASd,CAAQ,EAAI1B,EAAM0B,CAAQ,EAAI,MACjD,EACD,IAAIA,EAAU,CACZ,OAAOc,EAAE,SAASd,CAAQ,GAAKA,KAAY1B,CAC5C,EACD,MAAO,CACL,OAAOwC,EAAE,OAAOd,GAAYA,KAAY1B,CAAK,CAC9C,CACF,EAAEwB,EAAS,CACb,EACD,SAAI,KAAK,IAAI,MAAM,CACjB,IAAIE,EAAU,CACZ,OAAOa,EAAQ,IAAIb,CAAQ,EAAI,OAAY1B,EAAM0B,CAAQ,CAC1D,EACD,IAAIA,EAAU,CACZ,OAAOa,EAAQ,IAAIb,CAAQ,EAAI,GAAQA,KAAY1B,CACpD,EACD,MAAO,CACL,OAAO,OAAO,KAAKA,CAAK,EAAE,OAAOwC,GAAK,CAACD,EAAQ,IAAIC,CAAC,CAAC,CACtD,CACP,EAAOhB,EAAS,CAAC,EACN3W,EAET,MAAM4X,EAAc,GACdC,EAAUT,EAAK,IAAI,KAAO,GAAG,EACnC,UAAWU,KAAY,OAAO,oBAAoB3C,CAAK,EAAG,CACxD,MAAMqC,EAAO,OAAO,yBAAyBrC,EAAO2C,CAAQ,EACtDC,EAAgB,CAACP,EAAK,KAAO,CAACA,EAAK,KAAOA,EAAK,YAAcA,EAAK,UAAYA,EAAK,aACzF,IAAIE,EAAU,GACVM,EAAc,EAClB,UAAWL,KAAKP,EACVO,EAAE,SAASG,CAAQ,IACrBJ,EAAU,GACVK,EAAgBF,EAAQG,CAAW,EAAEF,CAAQ,EAAIN,EAAK,MAAQ,OAAO,eAAeK,EAAQG,CAAW,EAAGF,EAAUN,CAAI,GAE1H,EAAEQ,EAECN,IACHK,EAAgBH,EAAYE,CAAQ,EAAIN,EAAK,MAAQ,OAAO,eAAeI,EAAaE,EAAUN,CAAI,GAG1G,MAAO,CAAC,GAAGK,EAASD,CAAW,CACjC,CAyCA,MAAMK,GAAgB7c,GAAQ,oBAAoBA,MAClD,SAAS8c,GAAI/C,EAAO,CAClB,MAAMgD,EAAW,aAAchD,GAAS,CACtC,SAAU,IAAMA,EAAM,QAC1B,EACE,OAAOvE,GAAW0E,GAAS,IAAMH,EAAM,KAAMA,EAAM,SAAUgD,GAAY,MAAS,CAAC,CACrF,CAOA,SAASC,GAAKjD,EAAO,CACnB,MAAMkD,EAAQlD,EAAM,MACdmD,EAAY1H,GAAW,IAAMuE,EAAM,KAAM,OAAW,CACxD,OAAQ,CAAClL,EAAGiE,IAAMmK,EAAQpO,IAAMiE,EAAI,CAACjE,GAAM,CAACiE,CAChD,CAAG,EACD,OAAO0C,GAAW,IAAM,CACtB,MAAMlT,EAAI4a,IACV,GAAI5a,EAAG,CACL,MAAM6a,EAAQpD,EAAM,SAEpB,OADW,OAAOoD,GAAU,YAAcA,EAAM,OAAS,EAC7C3I,EAAQ,IAAM2I,EAAMF,EAAQ3a,EAAI,IAAM,CAChD,GAAI,CAACkS,EAAQ0I,CAAS,EAAG,MAAML,GAAc,MAAM,EACnD,OAAO9C,EAAM,IACrB,CAAO,CAAC,EAAIoD,EAER,OAAOpD,EAAM,QACjB,EAAK,OAAW,MAAS,CACzB,CCl5CA,SAAwBqD,MAAgC1b,EAAmD,CACzG,KAAM,CAAC2b,EAAQzI,CAAM,EAAIZ,GAAgB,GAAGtS,CAAI,EAChD,MAAO,IAAqCA,IAEvCA,EAAK,SAAW,EACV2b,EAAO,EAITzI,EAAO,GAAGlT,CAAI,CAEzB,CCHO,MAAM4b,EAAW,CAMtB,aAAc,CACZ,GAAGC,GACD,OAGF,KAAK,OAASH,KACd,KAAK,QAAUA,KAEV,cAAsE,OAC3E,MAAMjU,EAAM,IAAM,CAChB,KAAK,cAAc,GAgBhB,cAAS,iBAAiB,SAAUA,CAAG,EACxCA,GACN,CAEQ,eAAgB,CACtB,MAAMqU,EAAI,KAAK,SACf,KAAK,OAAQA,EAAqB,OAAUA,EAAa,UAAU,EACnE,KAAK,QAASA,EAAqB,QAAWA,EAAa,WAAW,CACxE,CAEA,IAAW,OAAQ,CACjB,OAAO,KAAK,QACd,CAEA,IAAW,QAAS,CAClB,OAAO,KAAK,SACd,CACF,CAEM,SAAa,IAAIF,GACvB3d,KAAmBA,GAAe,WAAa8d,IC1ClC,SAA0B,SAAS,cAAc,KAAK,EACnEC,GAAwB,UAAU,IAAI,2BAA2B,EAIjE,SAAwBC,GAAqB,CAC3C,OACA,cACA,MACA,aACA,SACA,OACA,YACA,OACA,WACA,YACA,mBACA,iBACA,aACA,YACA,aACA,WACF,EAiBG,CACK,QAAe,SAAS,cAAc,KAAK,EACpCC,YAAU,IAAI,iBAAiB,EAG/BA,QAAM,MAAQhW,EAAO,KACrBgW,QAAM,OAAShW,EAAO,KAE/B,MACJ,MAAMiW,EAAmB,IAAM,CAK7BC,EAAiB,QAAQ,EACzB,MAAMjP,EAAIlR,EACEA,SACZkR,GAAG,OAAO,EACV+O,EAAa,OAAO,EACpBG,GAAYC,EAAW,UAAU,oBAAoB,SAAUD,CAAQ,EAC3DE,OAGRH,EAAmB3Y,GAAY,OAAO,GAAKmN,GAAc,EAC/DnN,EAAa2Y,EAAiB,MAE9B,MAAMI,EAAiBC,GAAY,CACjC,IAAKP,EACL,MACA,aACA,UAAW,GACX,WAAY,GACZ,KAAM,CAAC,CAACQ,EACR,MAAOC,GAAezW,EACtB,OAAQyW,GAAezW,EACvB,OACA,MAAO,OACP,YACA,WACA,YACA,SAAU,GACV,YACD,EAAE,KAAK,CAAC,CAAC,QAAM,IAAM0W,CAAM,EAAE,KAAM1gB,GAAe,CAE9C,IAACuH,IACF,QAAW,OAAO,EACZlB,GAAU,YAAY,EAGlB,WACFtG,mBAAiB,aAAewE,GAAY,EAChD,CAACic,GAAcjc,IAAYxE,EAAU,UAAa,CAACuB,GAAQ1B,CAAM,IAClDqgB,GACnB,CACD,EAESlgB,mBAAiB,UAAWkgB,CAAgB,EAEnDU,IACS5gB,mBAAiB,aAAc,IAAM,CAC7C,UAAU,QAAQ,GAAG,GACpB,CAAC,KAAM,GAAK,EAGPA,mBAAiB,aAAc,IAAM,CACjC6gB,KACX,CAAC,KAAM,GAAK,EAER7gB,EACR,EAEK8gB,EAAwBC,GAAgB,CAC5C,MAAMC,EAAI,KAAK,OAAO,EAAID,EAAM,EAChC,OAAOC,EAAID,EAAM,CAACC,EAAID,EAAMC,GAGxBC,EAAgBC,EAAmBJ,EAAqB,EAAE,EAAI,EAC9DK,EAAgBD,EAAmBJ,EAAqB,CAAC,EAAI,EAC7DD,EAAc,IAAM,CACrB,IAACtf,GAAQ1B,CAAM,EAAG,CACFqgB,IACjB,OAGI,QAAOrgB,EAAO,wBAEduhB,EAASC,EAAK,MAAQ,IACtBC,EAAgBC,IAAS,SAAW,EAAI,IAAMA,IAAS,QAAU,EAAI,IAAMH,EAE3EI,EAAgBD,IAAS,SAAW,EAAI,EAAIH,EAE5CK,EAAQF,IAAS,QAAUF,EAAK,MAAQA,EAAK,KAC7CK,EAAQL,EAAK,IAEbM,IAAcJ,IAAS,UAAYF,EAAK,MAAQpX,GAAQ,EAAKsX,IAAS,QAAU,CAACtX,EAAO,GAAMqX,EAAgBL,EAC9GW,GAA2CP,EAAK,OAASpX,GAAQ,EAASuX,EAAgBL,EAC1Fhe,EAAIse,EAAQE,GACZve,EAAIse,EAAQE,EAElB,GAAGxe,GAAK,CAAC6G,GAAQ7G,GAAK0c,GAAW,OAAQ,CACtBI,IACjB,OAGC2B,GACEN,IAAS,SAAUtB,EAAa,MAAMsB,CAAI,EAAI,KAAK,IAAID,CAAa,EAAI,GAAK,KAC9DrB,QAAM,KAAO0B,GAAa,KAC/B1B,QAAM,IAAM2B,EAAa,OAEzB3B,QAAM,IAAM7c,EAAI,KAChB6c,QAAM,KAAO9c,EAAI,KAChC,EAGE,MACJ,OAAGkd,IACDD,EAAWpL,GAAgB6L,CAAW,EAC3BR,YAAU,iBAAiB,SAAUD,CAAQ,GAKvDyB,GACY5B,YAAU,IAAI,aAAa,EACjCpgB,gBAAc,OAAOogB,CAAY,GAExCF,GAAwB,OAAOE,CAAY,EAGtC,CAAC,eAAc,iBACxB,CC7LwB,YAAe3gB,EAAyBwiB,EAAqB,CACnFxiB,EAAM,UAAY,GAClBA,EAAM,YAAcwiB,CACtB,CCKA,MAAMC,GAAUC,GAEhB,eAAsBC,GAAYpX,EAAyB,CAEzD,MAAMqX,EAAoBrX,EAAM,kBAChC,GAAG,CAACqX,EACF,QAAM,IAAM,GACZrX,EAAM,KAAK,EACL,IAAI,MAAM,MAAM,EAGxB,MAAMzK,EAASyK,EAAM,OAIrB,GAHAqX,EAAkB,OAAO,EACzBrX,EAAM,KAAK,EAER,CAACA,EAAM,mBAAqB,CAACA,EAAM,IAC9B,UAAI,MAAM,MAAM,EAGxB,OAAIzK,EACC+hB,GAAetX,EAAO,IAAM,EADrBxL,GAASwL,CAAK,EAGnBuX,GAAgBvX,EAAOG,GAAYH,CAAK,CAAC,CAClD,CAEA,eAAsBwX,GACpBxX,EACAyX,EAAS,CAACzX,EAAM,0BAA0B,iBAC1C,CACA,GAAIyX,EAIJ,OAAOL,GAAYpX,CAAK,CAC1B,CAG8B,kBAAgBA,EAAyBiE,EAA4B,CACjG,GAAG,CAACiT,GACK,SAGT,MAAMQ,EAAe,IAAM,CACzBF,GAAcxX,CAAK,EAAE,KACnB4G,EAAS,QAAQ,KAAKA,CAAQ,EAC9BA,EAAS,OAAO,KAAKA,CAAQ,EAC/B,EAGIA,EAAWrE,KACb,IACI,cAEOmV,IACb,MACF,CAEA,GACE,IAAM,0BAA0B,kBAChC1X,EAAM,WAAaA,EAAM,eAK3B,SAAM,iBAAiB,aAAc0X,EAAc,CAAC,KAAM,GAAK,EACxD9Q,CACT,CAEA,MAAM+Q,GAAc,CAElB,SACA,UACA,iBACA,SAEF,EACMC,GAAoBD,GAAY,OAEhCE,OAAgB,QACTC,OAAyB,QACtCZ,IAAWS,GAAY,QAAStc,GAAU,CAC/B,0BAAiBA,EAAQzG,GAAM,CACtC,MAAMI,EAASJ,EAAE,OAEf,KAAEI,aAAkB,mBACpBA,EAAO,WAAaA,EAAO,eAC3BA,EAAO,UAEP,OAQE,MAAQ6iB,GAAU,IAAI7iB,CAAM,EAKhC,GAJIsC,GACQugB,OAAI7iB,EAAQsC,EAAQ,CAAC,OAAY,QAAM,EAGhD,GAAM,OAAO,IAAI+D,CAAK,IAInB/D,SAAO,IAAI+D,CAAK,EAEnB/D,EAAM,OAAO,OAASsgB,IAAwE,CAC/F,MAAMG,EAAS,MAAM,KAAKzgB,EAAM,MAAM,EAChCqG,EAAQga,GAAY,QAAQI,EAAO,CAAC,CAAC,EACrCC,EAAaL,GAAY,MAAMha,CAAK,EAAE,OAAOga,GAAY,MAAM,EAAGha,CAAK,CAAC,EAC9E,GAAG,CAACsa,GAAUF,EAAQC,CAAU,EAC9B,OAKI,QAAmBF,GAAmB,IAAI9iB,CAAM,EACnDkjB,GACgBA,IACjBJ,GAAmB,OAAO9iB,CAAM,GAEpBoiB,IAAM,EAAE,MAAMziB,EAAI,IAoBjC,EAAI,CACT,CAAC,ECxGY,SAA4B,EAAI,KAAQ,EAI/CwjB,GAAuC,GAEhCC,GAA6C,GAEpDC,GAAiB,CAAC5iB,EAAsB4iB,EAA4Ble,IAAoB,CAC5F,MAAMme,EAAQ,IAAM,CACV7iB,sBAAoB,eAAgB6iB,CAAK,EACjDD,IACA,aAAaE,CAAQ,GAEf9iB,mBAAiB,eAAgB6iB,CAAK,EACxC,QAAW,WAAWA,EAAOne,CAAO,CAC5C,EAEMqe,GAAoBxd,GAA2B,CACnD,MAAMyd,EAAoBzd,EAAU,kBACpC,OAAIyd,EACUzd,EAAU,kBACX,UAAU,SAAS,sBAAsB,GAAKyd,IAAsB,EAFnD,EAGhC,EAEMC,GAAyB1d,GAA2B,CACxD,IAAIvF,EAAUuF,EAAU,kBACxB,OAAGvF,GAAWA,EAAQ,UAAU,SAAS,sBAAsB,IAC7DA,EAAUA,EAAQ,oBAGbA,CACT,EAEA,eAA8BkgB,GAAY,CAAC,MAAK,MAAK,aAAY,wBAAuB,gBAAe,aAAY,QAAO,OAAM,YAAW,QAAO,QAAO,SAAQ,YAAW,OAAM,eAAc,aAAY,cAAa,YAAW,OAAQgD,EAAU,WAAWxiB,EAAU,SAAU,YAAW,QAAO,YAAW,WAAU,iBAAgB,aAAY,gBAAe,cAAa,cAAa,WAAU,YAAW,aAAY,oBAkC/Z,CACK,QAAU,UAAU,CAAC,EAC3ByiB,EAAM,MAAM,QAAQA,CAAG,EAAIA,EAAM,CAACA,CAAG,EAErB7hB,wBAEb8hB,IACDC,EAAQzU,EAAI,iBAGd,MAAM0U,EAAc1U,EAAI,QAKrB,GAJA0U,IAAgB,IACNJ,MAGV,CAAClhB,GAAS,CAACC,EAAQ,CACpB,MAAMwQ,EAAQhQ,GAAW,OACnB8gB,EAAUF,EAAQ5Q,EAAM,aAAgB7D,EAAI,SAAW6D,EAAM,gBAAkBA,EAAM,cACrF9I,EAAO6Z,GAAc5U,EAAI,EAAGA,EAAI,CAAC,EAAE,aAAa2U,CAAO,EAC7DvhB,EAAQ2H,EAAK,MACb1H,EAAS0H,EAAK,OAGb2Z,IAAgB,GAEjB/b,GAAa,kBAAkB,EAGjC9F,EAAO,CAAC,EAAE,CAAC4hB,GAASD,IAAkB3hB,EAElC0hB,UAASA,GAAQ,CACnBA,EAAI,QAAQ,MAAQ,GAAKvU,EAAI,GAC1ByU,IACDF,EAAI,QAAQ,aAAeE,GAG7BF,EAAI,QAAQ,YAAc,IAAK,EAAE9hB,GAAQ,IACzC8hB,EAAI,QAAQ,YAAc,IAAK,EAAE1hB,GAAQ,IAEzC0hB,EAAI,UAAU,IAAI,uBAAuB,EAC1C,EAEE9hB,GAAQC,GAAe,CAACmiB,GAAS,YAAYniB,CAAW,GAAK,CAAC8hB,GAAiB,CAACM,IAC1EriB,KACAI,MAiCL,MACJ,MAAMkiB,EAAkB,CAACzS,EAAe0S,GAAc,OAC7CA,EAAehd,GAAgB,gBAAgBgI,EAAKsC,CAAI,EAG3D2S,EAAa,CAACX,IAAaI,IAAgB,GAAKA,IAAgB,GAEhEQ,EAAcnR,GAAsB/D,CAAG,EAC1CmV,IAAU,QAAaD,GAAe,CAACC,GACxCZ,EAAI,QAASA,GAAQA,EAAI,UAAU,IAAI,WAAW,CAAC,EAGrD,MAAMa,GAAeF,GAAeG,EACpC,GAAGD,GAAc,CACT,QAAUtB,GAAU9T,EAAI,EAAE,EAC5BuU,UAASA,GAAQ,CACnBA,EAAI,UAAU,IAAI,oBAAoB,EACtCA,EAAI,OAAOe,GAAK,eAAgB,sBAAsB,CAAC,EACvDC,GAAWhB,EAAI,MAAM,YAAY,aAAc,OAAOgB,IAAU,EACjE,EAGA,MAAYb,IAAgB,EAAG,CAChC,MAAM5W,EAAQ0X,GAAgBxV,EAAK5M,EAAOC,EAAQ,EAAK,EACvD0hB,EAAgBjX,EAAM,IAAI,OAE1BiX,EAAgBU,GAAW,IAAI,EAG3B,SAAuBzV,EAAI,WAAW,KAAM0V,GAAcA,EAAU,IAAM,8BAA8B,EAC3G,CAACC,IAAwB,CAACA,GAAqB,OAAO,WAC3CC,SACHA,IACGA,wBAGd,MAAMriB,GAAYkhB,GAAS,CAACD,EAAgB9P,GAAkB+P,CAAK,EAAI,GACjEoB,GAA6BtiB,KAAc,GAAKqiB,GAAariB,GAAYA,GACzEuiB,GAAad,EAAa,YAAc,CAACe,EAEzCC,GAAuBf,EACvBgB,GAAoBvB,IAAgB,GAAKA,IAAgB,EAAI1c,GAAgB,sBAAsBgI,EAAI,GAAI6V,EAA0B,EAAI,OAEzIK,GAAM,CACV,OAAQ,OACR,KAAM,OACN,QACA,UAEF,IAAIC,GAAmBjY,KACnBkY,GAAkB,GACtB,IACEpW,EAAI,QAAQ,QACViW,KAEF9B,GAAiBI,EAAI,CAAC,CAAC,IACvB,CAACuB,IACCE,IACAK,IACCC,IAAc,GACjB,CACA,IAAIxY,EAAQmY,IAAqBjW,EAAI,OAAO,CAAC,EAIvC,QAAc,CAACuU,EAAkBgC,IAA4B,CAC9DpC,GAAiBI,CAAG,EACPiC,iBAAcjC,EAAK,IAAM,CAClCJ,GAAiBI,CAAG,IACVgC,YAAU,IAAI,gBAAiB,WAAW,EACrDhC,EAAI,OAAOgC,CAAU,GAGvBJ,GAAiB,QAAQ,EAC1B,EAEDA,GAAiB,QAAQ,CAC3B,EAGF,GAAG,QAASrY,EACQsY,MACd7B,UAASA,GAAQ,CACb,QAAa,IAAI,MACvBhY,GAAmBga,EAAazY,EAAc,IAAK,IAAM2Y,EAAYlC,EAAKgC,CAAU,CAAC,EACtF,UACO,UAAWzY,GAChB,KAAM,IAAM,gBAAiB,CAC1BA,EAAM,MAAM,SACNA,IAAI,OAAO,KAAMyN,GAAOA,EAAkC,OAAO,MAAM,GAAKzN,GAGhF,QAAIrD,GAAkBqD,EAAsC,KAAK,EACjE4Y,EAAK,6BACLC,EAAM,SAAS,gBAAgBD,EAAI,KAAK,EAC9CC,EAAI,UAAU,IAAI,iBAAkB,gBAAiB,WAAW,EAC5DA,iBAAe,KAAM,UAAW,OAAO3W,EAAI,GAAK,OAAOA,EAAI,GAAK,KAAK,EAoCzE,MAAMpF,EAAO,SAAS,gBAAgB8b,EAAI,MAAM,EAC3C9b,iBAAe,KAAM,IAAKiI,CAAC,EAEhC8T,EAAI,OAAO/b,CAAI,EACf2Z,EAAI,QAAQ,CAACA,EAAKhf,IAAQgf,EAAI,OAAOhf,EAAM,EAAIohB,EAAI,UAAU,EAAI,EAAIA,CAAG,CAAC,EACvDP,MAClBD,GAAiB,QAAQ,UACjB5iB,IAAa,EAAG,CACxB,MAAMue,EAAI,IAAM,CACbyC,EAAsB,QAASA,GAAQ,CAChC,QAAa,IAAI,MACjBzc,EAAM8F,GAAuBoC,EAAKlC,EAAsC,EAAI,EAClFvB,GAAmBga,EAAYze,EAAK,IAAM2e,EAAYlC,EAAKgC,CAAU,CAAC,EACvE,GAGCK,IAAqB5W,EAAI,OAAO,uBAAyBgV,EAAa,KACtDoB,MAChBtE,MAEgBsE,MACGS,WAAQ,QAAU7W,EAAI,GAAIlC,EAAM,KAAK,EAAE,KAAMpD,GAAU,CAKtE,GAJJyH,EAAS,eAAe,+BAA+BnC,EAAI,GAAItF,CAAK,EACnEoD,EAAsC,MAAQpD,EAC/CsF,EAAI,OAAO,sBAAwB,GAE/B1H,GAAc,CAACA,EAAW,GAAM,CAAC6b,GAAkBI,EAAsB,CAAC,CAAC,EAAG,CAChF4B,GAAiB,QAAQ,EACzB,OAGArE,GACH,GAAE,MAAM,IAAMqE,GAAiB,QAAS,cAGnCzB,IAAgB,GAAKnhB,IAAa,GAAMmhB,IAAgB,KAAO4B,GAAaD,GAAY,CAClG,MAAMlM,EAAO,SAAW,CACnB,IAACgK,GAAkBI,EAAsB,CAAC,CAAC,GAAMjc,GAAc,CAACA,IAAe,CAChF6d,GAAiB,QAAQ,EACzB,OAGF,MAAMrE,EAAI,CAACyC,EAAkBgC,EAAyBze,IAAgB,CACpE,GAAG,CAACqc,GAAiBI,CAAG,GAAMjc,GAAc,CAACA,IAAe,CAC1D6d,GAAiB,QAAQ,EACzB,OAGEre,EACCyE,GAAmBga,EAAYze,EAAK,IAAM2e,EAAYlC,EAAKgC,CAAU,CAAC,EADlEE,EAAYlC,EAAKgC,CAAU,CACuC,EAG7DxB,IACfR,EAAsB,QAASA,GAAQ,CACtC,GAAGS,EAAa,IACdlD,EAAEyC,EAAK,IAAI,MAASS,EAAa,GAAG,UAC5B,UAAWlX,EAAO,CAC1B,MAAM/F,EAAM+e,GAA0B9W,EAAKlC,EAAsC,EAAI,EACjF/F,cAAY,KAAK,IAAM+Z,EAAEyC,EAAKxc,EAAI,MAAO,EAAE,CAAC,OAIhDuL,GAAmB,iBAAiB,CAClC,MAAOtD,EACP,QACD,EAAE,KAAK,MAAMlI,GACLga,EAAEyC,EAAK,IAAI,MAASzc,CAAG,CAC/B,CACH,CACD,GAGH,GAAGif,GAAiBV,EACJ,cAAK,CAAC,IAAK9B,EAAI,CAAC,EAAG,OAAK,EACtC4B,GAAiB,QAAQ,EAClBD,GAEP/L,IAEIrM,EAAc,MACEsY,QAU1B,GAJGY,GAAgBZ,IACjBY,EAAa,KAAKb,EAAgB,EAGjCE,EACM,UAGH,SAAkBjf,GAAU,YAAY,EACxC+S,GAAO,SAAW,CACnB,MAAc,CAAC7R,IACV,SAGL,OAAgB,GAAK,CAACgc,EAAU,CACjC,MAAMnc,EAAO,MAAMmL,GAAmB,cAAc,CAAC,MAAOtD,EAAK,QAAS+W,GAAe,QAAS,MAAOtB,CAAU,GAChH,MAAc,CAACnd,IACV,SAGF,QAAY,MAAMK,GAAa,oBAAoB,CACvD,UAAY4b,EAAsB,CAAC,EACnC,OACA,SAAU9hB,EACV,cAAe0F,EACf,QACA,SACA,KAAM,MAAQ6H,EAAI,GAClB,cACA,YACA,aACA,KAAMwU,EACN,WAAYyC,GAAyB3e,EACrC,QACA,YAAa5F,GAAe,OAC5B,UAAY8hB,EAA4B,OAAZoB,CAAY,CACzC,EAIKsB,EAAe9B,GAAe,IAAM,OAClC,QAAUtB,KAAU9T,EAAI,MAAd8T,MAAsBhZ,GAAiBhK,EAAU,OAAO,CAAC,CAAC,GACzEyjB,EAAsB,QAASA,GAAQA,EAAI,MAAM,YAAY,aAAc,OAAOgB,IAAU,CAAC,CAC5F,SAEE4B,EAAe,CAACxgB,EAAwBjC,IAA8B,CACtE,MAAU2f,GAAsB1d,CAAS,EAC7CvF,EAAUA,IAAYsD,GAAUtD,EAC7B2kB,IAAe,KACFA,MAAc,CAAC3kB,GAAWA,EAAQ,UAAY,QAAUyjB,GAAS,YAAY,YAAY,GAGzG,MAAMjS,EAAK,IAAM,CAEbxR,GACAA,IAAYsD,GACZtD,EAAQ,UAAY,OAEpBA,EAAQ,OAAO,CACjB,EAGE2kB,EAKFS,GAAc,OAAO,IAAM,CACf9hB,KAAO,UAAU,IAAI,SAAS,EACrCtD,GACOA,YAAU,IAAI,UAAU,EAGnB4iB,MAAU5iB,EAAS,IAAM,CACtColB,GAAc,OAAO,IAAM,CACf9hB,KAAO,UAAU,OAAO,SAAS,EACxCkO,IACJ,GACA,GAAG,EACP,EAhBExR,GACDolB,GAAc,OAAO5T,CAAE,CAgB3B,EAGQ,0BAAiB,aAAc,IAAM,CACvC,QAAS9R,EAAU,OAAO,CAAC,GAC9BwlB,IAAc,IAAS9B,IACN4C,KAAK1iB,EAAQmhB,EAA0B,EAGxDT,IACY8B,IAGX1C,GACDD,EAAsB,QAAQ,CAAC5d,EAAWpB,IAAQ,CACjD4hB,EAAaxgB,EAAW7F,EAAU,OAAOyE,CAAG,CAAC,EAC9C,CACH,EACC,CAAC,KAAM,GAAK,EAEZkf,GACQtS,qBAAmB,qCAAqCsS,CAAK,EAGjE3jB,UAICwjB,GAAYI,IAAgB,EAAG,CACvC,MAAM2C,EAAgBpC,GAAcqC,EAC9B/e,EAAY8e,EAAgB7jB,GAAY,aAAa,GAAKwM,EAAI,GAAI,EAAG,EAAG,OAAW,MAAS,EAAI,OAEhGuX,EAAexD,GAAYxb,CAAS,EAC1C,GAAGgf,EACM,SAIH,SADIF,EAAiB9C,EAAsB,MAAM,EAAG,CAAC,EAAIA,GAChC,IAAI,IAAM,CACnCnkB,MACJ,GAAGkkB,EACDlkB,EAAQ,IAAI,UACP,CACC,SAAQA,EAAQonB,KAKnB,GAJH7b,GAAM,MAAQ,GACXlJ,IAAMkJ,GAAM,SAAW,IACvB9I,IAAM8I,GAAM,KAAO,IAEnB9I,GAAQ,OAAOA,GAAU,SAAU,CAEpC,IAAS4kB,GAAT,UAA8C,CACzCC,GAAe,KAAK,aAAe,EAAEC,KAAgB9kB,IACtD,KAAK,SAAW,GAChB,KAAK,KAAO,GACZ,KAAK,MAAM,EACL8I,uBAAoB,aAAc8b,EAAY,GAGtDC,GAAe,KAAK,aATlBA,GAAe,EAAGC,GAAc,EAY9Bhc,oBAAiB,aAAc8b,EAAY,GAIrDrnB,SAAM,UAAU,IAAI,eAAe,EAC5BA,EACR,EAEKmmB,EAAchC,EAAsB,IAAI,CAACA,EAAKhf,KAAQ,CACpD,SAAQ8e,GAAsBE,CAAG,EAC/B,YAA0BnkB,EAAMmF,EAAG,GAAKuI,GACjD,EACEiY,IAAe,KAChBA,GAAcA,GAAc,CAACD,KAAexB,EAAWiC,EAAW,CAAC,EAAK,CAACA,EAAW,CAAC,GAAKA,EAAW,CAAC,EAAE,UAAY,SAAY1B,GAAS,YAAY,YAAY,GAGhKkB,GACD3lB,EAAM,QAASA,GAAUA,EAAM,UAAU,IAAI,SAAS,CAAC,EAGzD,MAAMC,EAAU,IAAI,QAAiD,MAAMoH,EAASC,KAAW,CAC7F,MAAMoa,GAAI,SAAW,CAChB,MAAc,CAACxZ,IAAc,CAC9BZ,GAAOkgB,EAAe,EACtB,OAGF,MAAMC,GAAcznB,EAAM,OACpB0nB,GAAwB,GACxB3b,GAAS,CAACoY,GAAkBnkB,EAAoBmmB,IAA4B,CAClEC,iBAAcjC,GAAK,IAAM,CAClC,MAAc,CAACjc,IAAc,CAC9BZ,GAAOkgB,EAAe,EACtB,OAGF,GAAG,CAACxnB,EAAO,EACN,CAACinB,GAAiB,CAACpC,IACFsB,GAAY,OAAO,EAGvC,OAGF,MAAM9Z,GAAUrM,aAAiB,iBACjC,GAAGqM,GAAoC,CAE/B,MAAC,cAAY,cAAerM,IAC5B2nB,GAAQC,GAAaC,GAEvB,OAAI7kB,EAAQ,OAAO,iBACnB8kB,GAAI7kB,EAAS,OAAO,iBAOxB,GANG0kB,GAAQ,EACTpH,GAAIuH,GAAIH,GAERG,GAAIvH,GAAIoH,GAGP,CAAChY,GAAsBC,EAAKzM,GAAWod,GAAGuH,EAAC,EAAG,CAEzC,SAAS,SAAS,cAAc,QAAQ,EAC9CxjB,GAAO,MAAQic,GACfjc,GAAO,OAASwjB,GACJxjB,GAAO,WAAW,IAAI,EAC9B,UAAUtE,EAAO,EAAG,EAAGsE,GAAO,MAAOA,GAAO,MAAM,EACpC0iB,KAAK1iB,GAAQnB,EAAS,GAK5C,GAAG8jB,EAAe,CAChB5f,EAAQrH,CAAY,EACpB,OAGCqM,IACkBgX,OAAIrjB,EAAO,IAAM,CAClC,MAAM+nB,GAAQ,IAAM,CACN/nB,IAAK,EAAE,MAAME,EAAI,GAG/B,GAAG,CAACimB,GAAc,EAAEA,aAAsB,kBAAmB,CACrD1T,SAAI,SAAS,cAAc,KAAK,EAC1ByO,IACV,GAAG3f,EACH,IAAKkR,GACL,OAAQ,GACR,WAAY,OACZ,WAAY,GACZ,cAAe,MAEhB,GAAE,KAAK,CAAC,CAAC,aACD4O,EACR,EAAE,QAAQ,IAAM,CACD+E,iBAAcpmB,EAAO,IAAM,CACpCkI,EAAW,GAAGic,GAAI,OAAO,GAAG,MAAM,KAAK1R,GAAE,QAAQ,CAAC,EACrDzS,EAAM,OAAO,EACP+nB,KACP,EACF,OAED/nB,EAAM,YAAYmmB,CAAU,EACtB4B,IACR,CACD,EAGH5D,GAAI,OAAOnkB,CAAK,EAEb2lB,GACDQ,GAAcA,EAAW,UAAU,IAAI,UAAU,EACjDvC,GAAe5jB,EAAO,IAAM,CAC1BA,EAAM,UAAU,OAAO,SAAS,EACdmmB,GAAY,OAAO,GACpC,GAAG,GAEYA,GAAY,OAAO,EAGpCtB,GACDliB,GAAqB,aAAa,CAChC,UAAW3C,EACX,eAAgBmkB,GAChB,QACA,WAAYjc,EACZ,YAAa5F,GAAe,OAC5B,KAAM,QACP,EAGAolB,GAAO,KAAK1nB,CAAK,IAAMynB,IACxBpgB,EAAQqgB,EAAa,CACvB,CACD,GAGa/C,IACZ,OACHR,EAAsB,QAAQ,CAACA,GAAKhf,IAAQ,CACrC,QAASnF,EAAMmF,CAAG,EAClBqN,GAAK,IAAMzG,GAAOoY,GAAK6D,EAAQ7B,EAAWhhB,CAAG,CAAC,EACjD6iB,IAAsBC,MAA0BD,EAAQpD,EAAa,GAAG,GAC3EqD,GAAY,KAAKzV,EAAE,EACpB,GAIH,GADgBmS,IACbC,EAAa,IAAOlD,SAClB,CACCzhB,OACD,OAAgB,GAAKikB,EAAU,CAChC,MAAMxW,GAAQ0X,GAAgBxV,EAAK5M,EAAOC,EAAQ,EAAK,EAEvDhD,GAAUiT,GAAmB,iBAAiB,CAAC,MAAOtD,EAAK,SAAO,QAAS+W,GAAe,QAAQ,OAElG1mB,GAAUiT,GAAmB,iBAAiB,CAAC,MAAOtD,EAAK,QAAS+W,GAAe,QAAQ,EAG7F1mB,GAAQ,KAAKyhB,GAAGpa,EAAM,EACxB,CACD,EAED,OAAGa,IACDwb,GAAYxb,CAAS,EAAIlI,EACA4mB,KAAQ,QAAQ,IAAM,CACzCA,KACF,OAAOlD,GAAYxb,CAAS,CAC9B,CACD,GAGIlI,EACT,EAGF,GAAGioB,IAAgBA,IAAe,IAAM,CAACxC,IAAcb,IAAgBqD,IAAe,GACpF,UAAI,KAAOnO,GACJ+L,GAGT,MAAMtW,GAAgEmX,IAAkB,CAACjB,IAAcb,IACpG8B,EAAc,KAAK,CAAC,IAAKxC,EAAI,CAAC,EAAG,OAAK,GAAG,QAAQ,WAClDpK,KAEF,OAAG2L,IAAexB,IACG6B,MACnBa,GAAc,KAAKb,EAAgB,GAGlCzB,IAAgB,GAAKQ,GAAeC,IAAU,QAAa,CAACoD,GAClCC,IACzB,UAAWjE,EAAI,CAAC,EAChB,MACA,WACA,aACA,QACA,QACA,eACA,iBACA,aACA,aACA,mBACD,EAGH2B,GAAI,OAAStW,GACNsW,EACT,CAEA,SAASsC,GAA2B,CAAC,YAAW,MAAK,WAAU,aAAY,QAAO,QAAO,cAAa,iBAAgB,aAAY,aAAY,mBAY3I,CACDrW,EAAS,mBAAmB,eAAenC,EAAI,GAAI,EAAI,EAEtCyY,KAAW,MAAMloB,GAAM,CACtC,MAAMmoB,EAAc7D,GAAS,YAAY,yBAAyB,GAAKlC,EAEvE,GADAgG,GAAYpoB,CAAC,EACV,CAACA,EAAE,WAAa,CAACmoB,EAClB,OAGF,GAAG/hB,EAAU,QAAQ,SAAW,CAAC+hB,EAAa,CAC1BE,MAClB,OAGFjiB,EAAU,QAAQ,QAAU,IAEtB,QACN,KAAM,CAAC,eAAc,gBAAc,EAAIma,GAAqB,CAC1D,MACA,aACA,KAAMqE,EAAQ,QAAU,OACxB,KAAM/hB,EAAQylB,GACd,OAAQliB,EACR,KAAM,GACN,UAAWoN,GAAsB/D,CAAG,EACpC,iBACA,aACA,aACD,EAEEmV,IAAU,QAAa,CAACA,GACZpE,YAAU,IAAI,WAAW,EAGzBM,OAAM/f,GAAW,CACvBA,mBAAiB,UAAW,IAAM,CACvC,OAAOqF,EAAU,QAAQ,QAC1B,EACF,EACF,CACH,CCryBwB,YACtBvF,EACA0nB,EACAC,EACA5G,EAAwB/gB,EAAQ,wBAChC4nB,EAAgCF,EAAgB,wBAChD,CACI,IAAC,IAAKG,EAAa,MAAOC,EAAe,OAAQC,EAAgB,KAAMC,CAAgB,IAG3F,GAAGL,EAAe,CACV,QAASD,EAAgB,cAAc,SAAS,EACnDO,IAEDJ,EADmBI,EAAO,wBACD,QAI1B,KAAK,KAAOF,GACbhH,EAAK,QAAU8G,GACf9G,EAAK,OAASiH,GACdjH,EAAK,MAAQ+G,EACN,YAGT,MAAMI,EAAW,CACf,IAAK,GACL,MAAO,GACP,OAAQ,GACR,KAAM,GACN,SAAU,EACV,WAAY,GAGRC,EAAc3I,GAAW,MACzB4I,EAAe5I,GAAW,OAEzB,OACL,KAAM,CACJ,IAAKuB,EAAK,IAAM8G,GAAeA,IAAgB,GAAKK,EAAS,IAAM,GAAM,EAAEA,EAAS,SAAUL,GAAe9G,EAAK,IAClH,MAAOA,EAAK,MAAQ+G,GAAiBA,IAAkBK,GAAeD,EAAS,MAAQ,GAAM,EAAEA,EAAS,WAAYJ,GAAiB/G,EAAK,MAC1I,OAAQA,EAAK,OAASgH,GAAkBA,IAAmBK,GAAgBF,EAAS,OAAS,GAAM,EAAEA,EAAS,SAAUH,GAAkBhH,EAAK,OAC/I,KAAMA,EAAK,KAAOiH,GAAgBA,IAAiB,GAAKE,EAAS,KAAO,GAAM,EAAEA,EAAS,WAAYF,GAAgBjH,EAAK,IAC5H,EACA,WAEJ,CAEC,OAAe,eAAiBsH,GC9CjC,SAAwBC,GAAiB,CACvC,kBACA,eACA,WACA,YACA,iBACA,UACF,EAOG,CAEDV,MAAiBF,EAAgB,yBACjCa,MAAa,MAAM,KAAKb,EAAgB,iBAA8Bc,CAAQ,CAAC,GAE5EC,IACcb,GACb,IAAKA,EAAa,IAAMa,EACxB,MAAOb,EAAa,MAAQa,EAC5B,OAAQb,EAAa,OAASa,EAC9B,KAAMb,EAAa,KAAOa,IAI9B,MAAMC,EAAkC,GACtCpgB,EAA+B,GAC/BqgB,EAAuC,GACzC,IAAIC,EAAe,GACnB,UAAU5oB,KAAWuoB,EAAU,CACvB,QAAOvoB,EAAQ,wBACf6oB,EAAcR,GAAeroB,EAAS0nB,EAAiB,GAAO3G,EAAM6G,CAAY,EAEhFkB,EAAY,CAAC,CAACD,EAChB,MACDC,GACcF,KACPjqB,KACAiqB,EACAjqB,IAEAA,IAGVA,EAAM,KAAK,CACT,UACA,OACA,cACD,EAGH,OAAGoqB,IACDzgB,EAAQ,QAAQ,GAAGogB,EAAa,OAAO,KAAK,IAAI,EAAGA,EAAa,OAASK,CAAc,EAAGA,CAAc,CAAC,EACzGzgB,EAAQ,KAAK,GAAGqgB,EAAgB,OAAO,EAAGI,CAAc,CAAC,GA6BpD,CAAC,eAAc,UAAS,kBACjC,CCrEA,MAAMC,OAAsE,QACtEC,GAAiB,IAAI,eAAgB5pB,GAAY,CACrD,UAAUC,KAASD,EACA2pB,GAAkB,IAAI1pB,EAAM,MAAM,EAC1C,sBAAsBA,EAAM,WAAW,CAEpD,CAAC,EAEK4pB,GAAsB,IAAIjgB,GAEnBkgB,GAAN,cAAyC,WAAY,CAgC1D,aAAc,CACN,QAED,eAAU,IAAI,uBAAuB,EACrC,YAAS,SAAS,cAAc,QAAQ,EACxC,YAAO,UAAU,IAAI,qBAAqB,EAC/C,KAAK,QAAU,KAAK,OAAO,WAAW,IAAI,EACrC,YAAO,KAAK,MAAM,EAElB,uBAAoB,IACpB,qBAAkB,IAClB,yBAAsB,QACtB,sBAAmB,IAExB,KAAK,eAAiB,QACtB,KAAK,cAAgB,EACvB,CAEO,mBAAoB,CACtB,MAAe,IAAI,IAAI,EACxB,OAKI,QAAiB,KAAK,sBAAwB,KAAK,OACvCH,OAAIxoB,EAAgB,IAAI,EAC1CyoB,GAAe,QAAQzoB,CAAc,EACrC4oB,GAAe,IAAI,IAAI,EAEvB,KAAK,kBAAoB,MAC3B,CAEO,sBAAuB,CACzB,KAAK,aAAe,CAAC,KAAK,OAI7B,KAAK,UAAU,EAEf,KAAK,qBAAuB,OAC9B,CAEO,SAAU,CAKT,QAAiB,KAAK,sBAAwB,KAAK,OACzDJ,GAAkB,OAAOxoB,CAAc,EACvCyoB,GAAe,UAAUzoB,CAAc,EAElC,kBAAa,QAAS+nB,GAAa,CAC7BA,UAASvoB,GAAY,CAC5BA,EAAQ,MAAM,EACf,EACF,EAEDopB,GAAe,OAAO,IAAI,EAC1B,KAAK,cAAc,QACnB,KAAK,kBAAkB,QACvB,KAAK,aAAa,QAClB,KAAK,YAAY,QAEZ,aACH,KAAK,gBACL,MACJ,CAEO,WAAWC,EAAyF,QAAO,CAC7G,IAAC,KAAK,cAAc,KACd,SAGT,MAAM3B,EAAkB4B,GAAgB,KAAM,YAAY,GAAK,KAAK,aACpE,GAAG,CAAC5B,EACK,SAGH,QAAeA,EAAgB,wBAC/B3G,EAAO,KAAK,wBAElB,UAAUwH,KAAY,KAAK,cAAc,OAAQ,CACzC,QAAc,MAAM,KAAKA,CAAQ,EACjCgB,EAAe,KAAK,aAAeC,EAAY,IAAKxpB,GAAYA,EAAQ,WAAW,EAAIwpB,EACvF,CAAC,SAAO,EAAIlB,GAAiB,CACjC,kBACA,eACA,SAAUiB,EACV,UAAW,KAAK,KAAK,OAAS,IAC/B,EAEKE,EAAUnhB,EAAQ,IAAI,CAAC,CAAC,KAAMohB,KAAiB,CAC7C,QAAMA,EAAY,IAAM3I,EAAK,IAC7B4I,EAAOD,EAAY,KAAO3I,EAAK,KACrC,MAAO,CAAC,MAAK,OAAM,MAAO2I,EAAY,KAAK,EAC5C,EAEED,EAAQ,QACEJ,MAAId,EAAUkB,CAAO,EAqB7B,QACT,CAEO,aAAc,CACnB,GAAG,KAAK,cACN,OAGI,MAAC,UAAS,QAAU,OAC1B7mB,EAAQ,UAAU,EAAG,EAAGU,EAAO,MAAOA,EAAO,MAAM,EACnD,KAAK,cAAgB,EACvB,CAEO,OAAO+lB,EAAkE,CAC9E,KAAM,CAAC,UAAS,SAAQ,mBAAmB,KACvCO,GACG,2BAAsB,OAAW,EAAK,EAG7C,KAAK,cAAgB,GAErB,KAAM,CAAC,QAAO,SAAQ,OAAOtmB,EAC7B,SAAU,CAACilB,EAAUkB,CAAO,IAAKJ,EAAY,CAC3C,MAAMnpB,EAAS,KAAK,cAAc,IAAIqoB,CAAQ,EACxCtkB,EAAQ4lB,GAAoB,IAAI3pB,CAAM,IAAMA,aAAkB,iBAAmBA,EAAS,QAChG,GAAG,CAAC+D,EACF,SAGF,MAAM6lB,EAAc7lB,aAAiB,UACrC,IAAI8lB,EAAoBC,EACrB9pB,aAAkB,kBACN6pB,OAAK,KAAK,MAAQE,EACjBD,OAAK,KAAK,OAASC,IAEjCF,EAAa9lB,EAAM,MACnB+lB,EAAc/lB,EAAM,QAItB,MAAMimB,EAAe,KAAK,MAAMT,EAAQ,CAAC,EAAE,MAAQQ,CAAG,EACnDC,IAAiBH,IAKLA,IACCC,KAIhB,MAAMG,EAAUnoB,EAAQ+nB,EAClB7nB,EAAQ,KAAK,YAAY,IAAIqmB,CAAQ,EAAIjkB,GAAiB,YAAY,KAAK,SAAS,EAAI,OAE3F,CAAC,KAAK,gBAAgB,IAAIikB,CAAQ,GAAK,CAAC,KAAK,eAC3C,KAAK,aACGA,UAASvoB,GAAY,CAC5BA,EAAQ,eAARA,EAAQ,aAAiBA,EAAQ,WAClBoqB,KAASpqB,EAAQ,UAAU,EAC3C,EAEQuoB,UAASvoB,GAAY,CAC5BA,EAAQ,gBAAgB,EACzB,EAGE,qBAAgB,IAAIuoB,CAAQ,GAGnCkB,EAAQ,QAAQ,CAAC,CAAC,MAAK,UAAU,CACzBY,OAAK,MAAMA,EAAMJ,CAAG,EAAGN,EAAO,KAAK,MAAMA,EAAOM,CAAG,EACtD,IAAO,GAA0BN,EAAOQ,KAIxCL,EACOlnB,eAAaqB,EAAO0lB,EAAMU,CAAG,EAGrCznB,EAAQ,UAAUqB,EAAO0lB,EAAMU,EAAKN,EAAYC,CAAW,EAG1D9nB,GACDS,GAAoBC,EAASV,EAAOynB,EAAMU,EAAKN,EAAYC,CAAW,EACxE,CACD,EAEL,CAEO,kBAAmB,CACxB,UAAU9pB,KAAU,KAAK,cAAc,SACrC,GAAG2pB,GAAoB,IAAI3pB,CAAM,GAAKA,aAAkB,iBAC/C,SAIJ,QACT,CAEO,QAAS,CACd,MAAM,OAAO,CAEf,CAUO,sBAAsB6gB,EAAgB,KAAK,SAAUuJ,EAAmB,GAAM,CAC7E,MAAC,QAAU,OACX,CAAC,KAAO,IAMd,GAJG,KAAK,WAAavJ,IACnB,KAAK,SAAWA,GAGf,CAACA,GAAQ,CAACkJ,GAAO,KAAK,wBACvB,OAGI,MAAC,QAAO,QAAU,IAQlBM,EAAW,KAAK,MAAM,KAAK,MAAMvoB,EAAQioB,CAAG,CAAC,EAC7CO,EAAY,KAAK,MAAM,KAAK,MAAMvoB,EAASgoB,CAAG,CAAC,EAClD3mB,EAAO,QAAUinB,GAAYjnB,EAAO,SAAWknB,IAIlDlnB,EAAO,MAAQinB,EACfjnB,EAAO,OAASknB,EAChB,KAAK,gBAAkB,GACvB,KAAK,cAAgB,GAElB,KAAK,uBACN,KAAK,OAAO,MAAM,YAAY,QAASxoB,EAAQ,KAAM,WAAW,EAChE,KAAK,OAAO,MAAM,YAAY,SAAUC,EAAS,KAAM,WAAW,IAGjE,KAAK,sBAAyB,KAAK,cAAgBqoB,KACpD,KAAK,qBAAuB,OAC5B,KAAK,YAAY,GAErB,CAEO,aAAc,CACf,KAAK,kBAILG,GAAiB,QAAI,CAAC,IAAI,CAAC,CAAC,GAC9B,KAAK,YAAY,EAErB,CAEO,IAAI,CACT,kBACA,gBACA,YACA,aAMC,CACD,MAAMC,EAAW,KA4Bd,GA1BaC,UAAQ,CAACC,EAAaC,IAAU,CAC9C,IAAItC,EAAW,KAAK,aAAa,IAAIsC,CAAK,EACtCtC,EACM,qBAAgB,OAAOA,CAAQ,EAD3B,KAAK,aAAa,IAAIsC,EAAOtC,EAAW,IAAI,GAAK,EAG/D,UAAUloB,KAAMuqB,EACXrC,EAAS,IAAIloB,CAAE,EAChBuqB,EAAY,OAAOvqB,CAAE,GAErBA,EAAG,MAAQ,GACXA,EAAG,SAAWqqB,EACdrqB,EAAG,SAAWkoB,EACdloB,EAAG,iBAAmB,KAAK,iBAAiB,MAAM,SAClDkoB,EAAS,IAAIloB,CAAE,EAEZA,EAAG,cAAgB,CAACA,EAAG,aAAa,YAClCA,SAAOA,EAAG,YAAY,GAK3BuqB,EAAY,MACdD,EAAgB,OAAOE,CAAK,CAC9B,CACD,EAEE,CAACF,EAAgB,KAClB,OAGF,MAAMG,EAAgB,CAAC,EAAE,CAACnF,GAAiBA,IAAkB,IAASuD,IAEhE6B,EAAS,MAAM,KAAKJ,EAAgB,KAAM,GAE1C5Z,EAAWrQ,EAAU,SACrBwG,EAAa,KAAK,iBAAiB,IAAI,EACvCyC,EAAO,KAAK,KAmUX,OAjUaoH,EAAS,gBAAgB,8BAA8Bga,CAAM,EAAE,KAAMC,GAAS,CAC7F,MAAc,CAAC9jB,EAAW,EAAG,OAEhC,MAAM0e,EAA+B,GAC/BqF,EAAO,CAACrc,EAAiBsc,IAAmC,CAChE,MAAML,EAAQjc,EAAI,GACZuc,EAAcR,EAAgB,IAAIE,CAAK,EACvCO,EAAeV,EAAS,aAAa,IAAIG,CAAK,EAC9CQ,EAAmB,MAAM,KAAKF,CAAW,EACzCG,EAAW1c,EAAI,UAAY,EAC3B2c,EAAWF,EAAiB,CAAC,EAAE,QAAWzc,EAAI,YAAc,cAAgB,CAAC4c,GAC7EC,GAAwBH,GAAa1c,EAAI,UAAY,GAAK,KAAK,eAAkB,CAACqW,GAAa,CAACsG,EAEhGjH,EAAY1V,EAAI,WAAW,KAAM0V,GAAcA,EAAU,IAAM,8BAA8B,EAChGA,GACEA,EAAU,OAAO,YACToG,cAAY,IAAIU,CAAY,EAIzC,MAAMxF,EAA+B,GAC/B3mB,EAAUihB,GAAY,CAC1B,IAAKmL,EACL,MACA,MAAO1hB,EAAK,MACZ,OAAQA,EAAK,OACb,KAAM,GACN,KAAM+hB,GACN,WACA,cAAe,GACf,MAAO,OACP,eACA,aACA,WAAYZ,GAAiBnF,IAAkB,GAAQ,EAAI,EAC3D,WAAY,GACZ,sBAAuB8F,GAAwBvkB,EAAaA,EAAW,OAAO,EAAE,IAAI,IAc3E,CAAC,CAACykB,EAAa,YAAY,IACnC,EAAI,OACL,OAAQJ,EACR,YACA,UAAWrG,IAAcwF,EAAS,gBAAgB,IAAIU,CAAY,EAAI,GAAQ,QAC9E,YAAa,KAAK,aAClB,UAAWV,EAAS,UACrB,EAEEQ,GACDjsB,EAAQ,KAAK,IAAMisB,EAAc,KAAK,GAAGtF,CAAY,CAAC,EAGxD,MAAMgG,EAGF,CACF,SAAUT,GAGNU,GAAeR,EAAiB,CAAC,EAAE,aAezC,GAdGQ,IACD5sB,EAAQ,KAAK,CAAC,CAAC,YAAY,CACzB,GAAG,CAACohB,EAAQ,CACVwL,GAAa,QAAQ,EACrB,OAGKxL,OACL,IAAMwL,GAAa,QAAQ,EAC3BA,GAAa,OAAO,KAAKA,EAAY,EACvC,CACD,EAGAjd,EAAI,UAAY,GAAKqW,GAAasG,EACnC,OAAG,KAAK,eACNK,EAAS,SAAW,IAAM,QAAQ,IAAIhG,CAAY,EAAE,KAAK,IAAM,CAC1D1e,GAAc,CAACA,EAAW,GACZmkB,UAASrrB,GAAY,CAC9B,MAAC,aAAe,IACV8rB,MAAO9rB,EAAQ,kBAAuC,IACnE,EACF,GAGIf,EAAQ,KAAM0H,IAAS,CAAC,GAAGA,EAAK,GAAGilB,CAAU,IAI7CA,WAAYG,GAAO,QAAQ,IAAInG,CAAY,EAAE,KAAK,IAAM,CAC/D,GAAI1e,GAAc,CAACA,EAAiB,IAAC0H,EAAI,SACvC,OAGF,MAAMxH,EAAU,MAAM,QAAQ2kB,CAAE,EAAIA,EAA2B,CAACA,CAAmB,EAC7E7rB,EAAS,MAAM,QAAQkH,CAAO,EAAIA,EAAQ,CAAC,EAAIA,EAsFrD,GApFiBikB,UAAQ,CAACrrB,EAASmE,KAAQ,CACzC,MAAMjE,GAASkH,EAAQjD,EAAG,GAAKiD,EAAQ,CAAC,EACxCpH,EAAQ,OAASE,GAEdyrB,IACD3rB,EAAQ,aAAe2rB,EACpB3rB,EAAQ,OACDA,eAAa,eAAe,IAAIA,CAAO,EACvCE,GAAO,QACfA,GAAO,KAAK,GAIbF,EAAQ,aACT2B,GAAqB,aAAa,CAChC,UAAW3B,EACX,MAAOA,EAAQ,SAAS,eACxB,eAAgBA,EAAQ,aAAeA,EACvC,WAAY,GACZ,KAAM,QACP,CACH,CACD,GAEEE,aAAkBuF,IAAkBvF,aAAkB,kBAAoB,KAAK,gBAChFyrB,EAAa,OAASzrB,EACbwqB,gBAAc,IAAIU,EAAclrB,CAAM,GAG9CA,aAAkBuF,KACnBvF,EAAO,MAAQwqB,EAAS,eAEjBxqB,oCAAoB+D,GAAU,CACf4lB,OAAI3pB,EAAQ+D,CAAK,KAmDtCwnB,EAAsB,CACvB,MAAMxB,EAAM5mB,GAAoB,KAAK,KAAK,MAAO,KAAK,KAAK,MAAM,EACjEqnB,EAAS,OAAO,IAAMT,EACJ+B,KACpB,CACD,EAEG,MACE,QAAM,CAACnB,EAAOlhB,EAAK,MAAOA,EAAK,MAAM,EAAE,KAAK,GAAG,EACrD,GAAG8hB,EAAsB,CACRE,KAAc,IAAItjB,CAAG,EAChCsjB,IACaA,GACb,OAAQ,OACR,gBAAiB,IACjB,mBAAoB,IACpB,OAGYM,OAAI5jB,EAAKsjB,CAAY,GAGrC,UAAU3rB,KAAWmrB,EAAa,CAC1BjkB,QAAalH,EAAQ,iBAAiB,IAAI,EACnC2rB,cAAY,IAAIzkB,CAAU,EACvCA,EAAW,QAAQ,IAAM,CAKpB,GAJHlH,EAAQ,MAAM,EAED2rB,cAAY,OAAOzkB,CAAU,EAEvC,CAACykB,EAAa,YAAY,KAAM,CACjC,GAAGA,EAAa,OAAQ,CACtB,MAAM1nB,EAAQ4lB,GAAoB,IAAI8B,EAAa,MAAM,EAOtD,GANA1nB,IACAA,EAAsB,QAAQ,EACX4lB,UAAO8B,EAAa,MAAM,GAG5B9B,UAAO8B,EAAa,MAAM,EAC3CA,EAAa,kBAAkBlmB,GAChCkmB,EAAa,OAAO,eAAiBzsB,GACrCysB,EAAa,OAAO,iBACZA,EAAa,kBAAkB,iBAAkB,CACnD,QAAYvpB,GAAY,aAAa,GAAKpC,EAAQ,MAAO,EAAG,EAAG,OAAW,MAAS,EACzF,OAAO2iB,GAAYxb,CAAS,EAG9BwkB,EAAa,OAAS,OAGrBM,GAAc,IAAIN,EAAa,GAAG,IAAMA,GAAgBM,GAAc,OAAON,EAAa,GAAG,GAAK,CAACM,GAAc,MAC9FC,KAExB,CACD,GAIE,SAAQ,KAAMvlB,IAAS,CAAC,GAAGA,EAAK,GAAGilB,CAAU,KAGhDO,EAAmB,GACnBC,EAAiBpB,EAAK,IAAI,CAACpc,EAAKzK,IAAQ,CAC5C,GAAG,CAACyK,EAAK,CACCud,OAAKpB,EAAO5mB,CAAG,CAAC,EACxB,OAGK,SAAKyK,EAAKgX,CAAY,EAC9B,EAAE,OAAO,OAAO,EAEXyG,EAA2BF,EAAQ,OAEvCpb,EAAS,gBAAgB,wBAAwBob,CAAO,EAAE,KAAMnB,GAC3D9jB,GAAc,CAACA,EAAW,EAAU,GAChC8jB,EAAK,OAAO,OAAO,EAAE,IAAKpc,GAAQqc,EAAKrc,CAAG,CAAC,CACnD,EAJD,QAAQ,QAAQ,CAA2B,GAMvC0d,EAAoBC,GACjB,QAAQ,IAAIA,CAAQ,EAAE,KAAM1lB,GAAQ,CACnC0lB,QAAW1lB,EAAI,IAAI,CAAC,CAAC,OAAM,WAAU,cAAc,CACvD,GAAG,CAACkS,EACF,OAGF,MAAMmB,EAAI,IAAMnB,EAAK,EAAE,KAAKyT,CAAQ,EAEpC,GAAG1B,EACQvC,UAASvoB,GAAY,CAC5BkpB,GAAoB,KAAK,CACvB,IAAKlpB,EACL,KAAM,KACKuoB,UAASvoB,GAAY,CAC5BkpB,GAAoB,OAAO,CAAC,IAAKlpB,CAAQ,GAC1C,EAEMka,EAAE,EACX,CACD,EACF,MAED,QAAOA,EAAE,CACX,CACD,EAEM,eAAQ,IAAIqS,CAAQ,EAC5B,EAGGxT,EAAO,IAAM,CACd,MAAc,CAAC7R,EAAW,EAAG,OAC1B,QAASolB,EAAiBF,CAAc,EACxCK,EAAWJ,EAAwB,KAAME,GAAaD,EAAiBC,CAAQ,CAAC,EACtF,OAAO,QAAQ,IAAI,CAACle,EAAQoe,CAAQ,CAAC,GAGvC,OAAG9G,EACDA,EAAc,KAAK,CACjB,IAAK+E,EAAS,OACd,OACD,EAEI3R,IAGA,QAAQ,IAAIqT,CAAc,EAAE,KAAK,IAAM,QAAQ,IAAIxG,CAAY,CAAC,EAAE,KAAK,IAAM,EAAE,EACvF,CAKH,CAEO,aAAapB,EAAmB,CACrC,KAAK,UAAYA,CACnB,CAEA,OAAc,OAAOjkB,EAA4C,CACzD,QAAW,IAAI4oB,GACrBuB,EAAS,eAAiBnqB,EAAQ,eAClCmqB,EAAS,KAAOnqB,EAAQ,iBAAmBkC,GAAW,OAAO,YAC7DioB,EAAS,aAAenqB,EAAQ,aAChCmqB,EAAS,UAAYnqB,EAAQ,UAC7BmqB,EAAS,qBAAuBnqB,EAAQ,qBACrCA,EAAQ,gBACTmqB,EAAS,gBAAkB,QAC3BA,EAAS,MAAM,OAAS,WAG1B,IAAIxjB,EAAa3G,EAAQ,WACzB,OAAG2G,GACQwjB,mBAAmBxjB,EAAW,SAC1BA,IAAS,iBAAiB,MACvCA,EAAW,UAAU,IAAM,CACzBwjB,EAAS,UAAU,EACpB,IAGDA,EAAS,KAAO,GAChBA,EAAS,iBAAmBrW,MAGvBqW,CACT,CACF,EAltBO,IAAMgC,GAANvD,GAAMuD,GACG,oBAAqCxD,GAuuBrD,MAAMwC,GAA4B,GAClC,IAAIiB,GACJ,MAAMvD,OAA+C,IAC/C6C,OAA+C,IAC/CpC,OAAmF,IAC5EY,GAAe,CAACmC,EAAYxD,KAAmB,CAE1D,MAAM,EADI,MAAM,KAAKwD,CAAS,EAClB,OAAQlM,GAAMA,EAAE,aAAeA,EAAE,iBAAiB,GAAK,CAACA,EAAE,uBAAuB,EAC1F,IAAC,EAAE,OACG,SAGT,MAAM5G,EAAI,EAAE,IAAK4Q,GAAa,CAC5B,MAAM5qB,EAAS,CAAC,GAAG4qB,EAAS,cAAc,OAAQ,GAAE,OAAO,CAACmC,EAAKlU,IAAMkU,GAAM,CAAC,CAAC,CAAClU,EAAE,OAAQ,CAAC,EACxF,KAAS,cAAc,OAAS7Y,EACjC,OAGI,QAAU4qB,EAAS,aACzB,GAAGjB,EAAQ,KACF,OAACiB,EAAUjB,CAAO,CAC3B,CACD,EAAE,OAAO,OAAO,EAEP,UAACiB,CAAQ,IAAK5Q,EACtB4Q,EAAS,YAAY,EAGvB,SAAU,CAACA,EAAUjB,CAAO,IAAK3P,EAC/B4Q,EAAS,OAAOjB,CAAO,EAGlB,QACT,EACMqD,GAAmB,GACnBC,GAA8B,IAAOD,GACrCd,GAAoB,IAAM,CAC3BW,KAImBA,UAAO,YAAYlC,GAAcsC,EAA2B,EACrEtC,KACf,EACMyB,GAAsB,IAAM,CAC5BS,KAIJ,cAAcA,EAAmB,EACXA,UACxB,EAEC,OAAe,cAAgBV,GAC/B,OAAe,eAAiB7C,GAEjC,eAAe,OAAO,gCAAiCsD,EAA0B,ECr0BjF,SAAwBM,GAAelrB,EAAe,CAC7C,SAAM,QAAQ,KAAM,OAAO,EAAE,QAAQ,kCAAoCA,GAAU,CAClF,QAAKA,EAAM,WAAW,CAAC,EACvBmrB,EAAMnrB,EAAM,WAAW,CAAC,EAC9B,MAAO,OAAUorB,EAAK,OAAU,MAAUD,EAAM,OAAU,OAAW,GACtE,GAAE,QAAQ,iBAAmBnrB,GACrB,KAAOA,EAAM,WAAW,CAAC,EAAI,GACrC,EAAE,QAAQ,KAAM,MAAM,EAAE,QAAQ,KAAM,MAAM,CAC/C,CCNA,SAAwBqrB,GAAuBC,EAA4B,CACzE,OAAO,MAAM,KAAKA,EAAS,UAAU,EAAE,IAAK3lB,GACnCA,EAAK,WAAaA,EAAK,UAAYulB,GAAevlB,EAAK,WAAW,EAAKA,EAAiB,SAChG,EAAE,KAAK,EAAE,CACZ,CCAwB,YAAgBpH,EAASikB,EAAgC,CACxE,SAAG,QAAQ,IAAIA,IAAY,CASpC,CCVwB,YAAUjkB,EAASgtB,EAA0B,CAC5D,SAAG,QAAQA,CAAG,CASvB,CCRwB,YAAe9Z,EAAoB+Z,EAA4E,CAC/H,QAAY,SAAS,eAErB7lB,EAAO8lB,EAAUD,EAAS,aAAe,WAAW,EACpDE,EAASD,EAAUD,EAAS,eAAiB,aAAa,EAChE,MAAG,CAACG,GAAchmB,EAAM8L,CAAK,GAAK9L,IAAS8L,EAClC,CAAC,WAAS,EAGZ,CAAC,GAAGma,GAAana,EAAO9L,EAAM+lB,CAAM,EAAG,YAChD,CAEgB,YAAaja,EAAoB9L,EAAY+lB,EAAgB,CAC3E,GAAG/lB,IAAS8L,EAAO,CACjB,MAAMoa,EAAapa,EAAM,WACnBqa,EAAmBD,EAAW,OACjCC,GAAoBJ,GAAUI,GACxBnmB,IAAWmmB,EAAmB,CAAC,EACtCJ,GAAU/lB,EAAK,aAAgBA,EAA0B,KAAO,IAAI,SAEpEA,EAAOkmB,EAAWH,CAAM,EACfA,KAIN,OAAC,OAAyB,SACnC,CC1BA,MAAMK,OAAoD,IAAI,CAC5D,oBACA,sBACA,oBACA,mBACA,yBACA,sBACA,0BACA,sBACF,CAAC,EACD,SAAwBC,GAAoBC,EAA2B,CAErE,QAAQlvB,EAAI,EAAGA,EAAIkvB,EAAS,OAAQ,EAAElvB,EAAG,CACjC,QAASkvB,EAASlvB,CAAC,EAEzB,IAAImvB,EAAgB,GACjB,EAKD,IAJAA,EAAgBD,EAAS,UAAU,CAAC5uB,EAAG8uB,IAC9BJ,GAAqB,IAAI1uB,EAAE,CAAC,GAAK8uB,IAAOpvB,GAAKM,EAAE,IAAM+uB,EAAO,GAAM/uB,EAAE,OAAS+uB,EAAO,SAAYA,EAAO,MAC/G,EAEEF,IAAkB,GAAI,CACjB,QAAaD,EAASC,CAAa,EACzCE,EAAO,QAAUC,EAAW,OACnBJ,SAAOC,EAAe,CAAC,QAE5BA,IAAkB,IAG9B,CCnCA,SAAwBI,GAAaL,EAA2B,CACrDA,OAAK,CAACnd,EAAGiE,IACRjE,EAAE,OAASiE,EAAE,QAAYA,EAAE,OAASjE,EAAE,MAC/C,CACH,CCNA,MAAMyd,EAAM,SCqBCC,GAAsD,CACjE,KAAM,CACJ,MAAO,+IACP,WAAY,mBACd,EACA,UAAW,CACT,MAAO,+BACP,WAAY,wBACd,EACA,OAAQ,CACN,MAAO,2BACP,WAAY,qBACd,EACA,UAAW,CACT,MAAO,iDACP,WAAY,mBACd,EACA,cAAe,CACb,MAAO,oEACP,WAAY,qBACd,EACA,KAAM,CACJ,MAAO,iBACP,WAAY,sBACd,EACA,YAAa,CACX,MAAO,WACP,WAAY,0BACd,EACA,QAAS,CACP,MAAO,qBACP,WAAY,sBACd,CAKF,EAEMC,GAAkB,gCAgBlBC,OAAiB,IAAI,CACzB,MACA,IACA,KACA,KACA,UACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACF,CAAC,EAOKC,GAAc,IAAI,OAAOJ,EAAK,GAAG,EAC1BK,GAAsB,IAEnC,SAASC,GAAmBlnB,EAAY3F,EAAeisB,EAA2BP,EAA0B,CAC1G,MAAMoB,EAAgBnnB,EAAK,cAG3B,UAAUyJ,KAAQod,GAAc,CACxB,QAAMA,GAAapd,CAAoB,EACvC2d,EAAuBD,EAAc,QAAQvB,EAAI,MAAQ,4BAA4B,EACxFwB,GAAS,aAAa,iBAAiB,IAAM,OAU7CxB,EAAI,aAAe,uBACpBU,EAAS,KAAK,CACZ,EAAGV,EAAI,WACP,IAAMwB,EAA8B,KACpC,OAAQrB,EAAO,OACf,OAAQ1rB,EAAM,OACf,EACOurB,EAAI,aAAe,2BAC3BU,EAAS,KAAK,CACZ,EAAGV,EAAI,WACP,OAAQG,EAAO,OACf,OAAQ1rB,EAAM,OACd,QAAU+sB,EAAwB,QAAQ,OAAO,SAAS,EAC3D,EASDd,EAAS,KAAK,CACZ,EAAGV,EAAI,WACP,OAAQG,EAAO,OACf,OAAQ1rB,EAAM,OACf,GAGP,CAEA,SAASgtB,GAAYC,EAAgB,CAC7B,MAAC,QAAU,IAKjB,MAJG,CAACjwB,GAIDiwB,EAAKjwB,EAAS,CAAC,IAAM4vB,IAAuB5vB,IAAW4vB,GAAoB,MAKhF,CAEwB,YACtBjnB,EACAunB,EACAD,EACAE,EACAC,EACAnB,EACAP,EAAS,CAAC,OAAQ,GAClB,CACG,KAAK,WAAa/lB,EAAK,UAAW,CACnC,IAAI0nB,EAAY1nB,EAAK,UAET0nB,IAAU,QAAQV,GAAa,EAAE,EAU1CU,EACEF,IAAYxnB,EACRsnB,OAAKI,EAAU,OAAO,EAAGD,CAAS,EAAIR,GAAsBS,EAAU,OAAOD,CAAS,CAAC,EAE5FH,EAAK,KAAKI,CAAS,EAEbF,IAAYxnB,GACpBsnB,EAAK,KAAKL,EAAmB,EAG5BX,GAAYoB,EAAU,QAAU1nB,EAAK,YACnBknB,KAAMQ,EAAWpB,EAAUP,CAAM,EAGtDA,EAAO,QAAU2B,EAAU,OAC3B,OAGC,KAAK,WAAa1nB,EAAK,aACxB,OAGF,MAAM2nB,EAAW,IAAM,CACrBJ,EAAM,KAAKD,EAAK,KAAK,EAAE,CAAC,EACxBA,EAAK,OAAS,EACd,EAAEvB,EAAO,QAGL6B,EAAaJ,IAAYxnB,EACzB6nB,EAAUd,GAAW,IAAI/mB,EAAK,OAAO,EAC3C,GAAG6nB,IAAaP,EAAK,QAAUA,EAAKA,EAAK,OAAS,CAAC,EAAE,MAAM,EAAE,IAAM;AAAA,GAAStnB,EAAK,UAAY,MAClF2nB,QACJ,CACL,MAAMG,EAAM9nB,EAAK,QAAQ,cAAiBA,EAA0B,IAC9D+nB,EAAe/nB,EAAK,QAAQ,aAE/B8nB,GAAOxB,GACWY,KAAMY,EAAKxB,EAAUP,CAAM,EAG7CgC,GAAgBzB,GACjBA,EAAS,KAAK,CACZ,EAAG,2BACH,YAAatmB,EAAK,QAAQ,MAC1B,OAAQ+lB,EAAO,OACf,OAAQ+B,EAAI,OACb,EAGAA,IACDR,EAAK,KAAKQ,CAAG,EACb/B,EAAO,QAAU+B,EAAI,QAItBF,GAAc,CAACH,GAChBH,EAAK,KAAKL,EAAmB,EAGzB,QAAcjnB,EAAK,QAAQ8mB,EAAe,EAC1CkB,EAAoB1B,GAAU,OACbiB,EAAM,OAC7B,IAAIU,EAAe,GAEfC,EAAWloB,EAAK,WACpB,KAAMkoB,GACJC,GAAoBD,EAAUX,EAAOD,EAAME,EAASC,EAAWnB,EAAUP,CAAM,EAC/EmC,EAAWA,EAAS,YAEhBb,GAAYC,CAAI,IACHW,MAanB,GARGA,GAAgBjoB,EAAK,aAAa,QAAQ,UAAW,EAAE,IACzCioB,MAGdL,GAAcH,GACfH,EAAK,KAAKL,EAAmB,EAG5BmB,GAAepoB,EAAK,aAAe,CAACqnB,GAAYC,CAAI,IACrDA,EAAK,KAAK,GAAG,EACb,EAAEvB,EAAO,OAGNiC,IAAsB,QACf,UAAIA,EAAmB3wB,EAASivB,EAAS,OAAQlvB,EAAIC,EAAQ,EAAED,EACnE,IAASA,CAAC,EAAE,OAKjBywB,GAAW,CAACI,GACJN,IAGR,CAACM,GAAgBjoB,EAAK,UAAY,KAAOA,EAAK,cAC/CunB,EAAM,KAAK,EAAE,EACb,EAAExB,EAAO,OAEb,CC9QO,SAASsC,GAAYC,EAAoB,CACxC,QAAM,OAAO,eACf,MACAb,EACJ,GAAGnnB,GAAK,WAAY,CACZ,QAAQA,EAAI,WAAW,CAAC,EACxBioB,EAAcloB,EAAM,YAExB,KAAM,gBACNA,EAAM,gBAAkBA,EAAM,cAC9BkoB,GAAeloB,EAAM,UACrB,CAEA,MAAMmoB,EAA8BD,EAAc,EAC5CrC,EAAaoC,EAAM,WACzB,GAAGjoB,EAAM,iBAAmBioB,GAASpC,EAAWsC,CAA2B,EAAG,CAC5EhB,EAAUtB,EAAWsC,CAA2B,EACpCf,IAEZ,QAAQrwB,EAAI,EAAGA,EAAIiJ,EAAM,UAAW,EAAEjJ,EAAG,CACjC,QAAO8uB,EAAW9uB,CAAC,EACnBiD,EAAQ2F,EAAK,WAAcA,EAA0B,IAExD3F,IACDotB,GAAaptB,EAAM,cAIvBmtB,EAAUnnB,EAAM,eACJonB,KAKlB,MAAO,CAAC,KAAMD,EAAS,OAAQC,CAAS,CAC1C,CAEA,SAAwBgB,GACtBH,EACAI,EAAe,GACfC,EAAY,GACZ,CACA,MAAMpB,EAAkB,GAClBD,EAAiB,GAEjB,CAAC,KAAME,EAAS,OAAQC,CAAa,IAAEa,aAAiB,mBAAqBK,GAAaN,GAAYC,CAAK,EAE3GhC,EAA4BoC,EAAe,CAAK,SAChD3C,EAAS,CAAC,OAAQ,GACxB,GAAGuC,aAAiB,iBAAkB,CACpC,IAAIJ,EAAWI,EAAM,WACrB,KAAMJ,GACJC,GAAoBD,EAAUX,EAAOD,EAAME,EAASC,EAAWnB,EAAUP,CAAM,EAC/EmC,EAAWA,EAAS,iBAGtBC,GAAoBG,EAAOf,EAAOD,EAAME,EAASC,EAAWnB,EAAUP,CAAM,EAG3EuB,EAAK,QACNC,EAAM,KAAKD,EAAK,KAAK,EAAE,CAAC,EAGtB,MAAQC,EAAM,KAAK;AAAA,CAAI,EACrB,QAAWltB,EAAM,QAAQ4sB,EAAmB,EAClD,OAAG2B,IAAa,KACNvuB,IAAM,OAAO,EAAGuuB,CAAQ,EAAIvuB,EAAM,OAAOuuB,EAAW,CAAC,GAEvDvuB,IAAM,QAAQ,UAAW,GAAG,EAEjCisB,GAAU,SASXD,GAAoBC,CAAQ,EAC5BK,GAAaL,CAAQ,GAGhB,CAAC,QAAO,WAAU,WAC3B,CAEArsB,GAAe,sBAAwBwuB,GCjGvC,SAAwBI,GAAatwB,EAAsB,CACzD,OAAGA,EAAQ,mBAAqBA,EAAQ,UAAY,QAK3C,CAACA,EAAQ,YAAY,QAAU,CAACA,EAAQ,cAAc,kDAAkD,EAExG,CAAEA,EAA6B,MAAM,MAEhD,CCRa,SAAyE,CAAC,GAAK,CAAC,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,IAAK,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,+BAA+B,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,GAAI,GAAG,CAAC,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,KAAM,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,IAAK,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,OAAO,MAAO,OAAO,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,MAAO,kBAAkB,MAAO,QAAQ,MAAO,kBAAkB,MAAO,4CAA4C,MAAO,4CAA4C,MAAO,4CAA4C,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,6BAA6B,KAAM,wCAAwC,KAAM,QAAQ,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,6BAA6B,KAAM,6BAA6B,KAAM,wCAAwC,KAAM,wCAAwC,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,GAAI,QAAQ,IAAK,QAAQ,IAAK,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,GAAI,QAAQ,IAAK,QAAQ,IAAK,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,IAAK,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,IAAK,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,iBAAiB,KAAM,iBAAiB,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,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","names":["array","callback","i","length","safePlay","media","promise","noop","e","AnimationIntersector","entries","entry","target","group","p","animation","_animation","idleController","idle","paused","override","element","found","player","IS_SAFARI","indexOfAndSplice","el","item","options","observeElement","controlled","rootScope","_a","blurred","destroy","imitateIntersection","groups","forEachReverse","isInDOM","animations","fastRaf","lock","play","liteModeKey","changed","animationItem","loop","MOUNT_CLASS_TO","animationIntersector","FramesCache","cache","value","name","width","height","color","toneIndex","framesCache","needUpscale","pixelRatio","clamp","IS_APPLE","mediaSizes","IS_ANDROID","applyColorOnContext","context","x","y","_RLottiePlayer","EventListenerBase","worker","skipRatio","IS_APPLE_MOBILE","IS_APPLE_MX","getLottiePixelRatio","canvas","IS_IMAGE_BITMAP_SUPPORTED","CAN_USE_TRANSFERABLES","args","transfer","data","clearPendingRAF","renderFirstFrame","curFrame","speed","direction","frame","frameNo","idx","cachedSource","c","customProperties","err","now","delta","timeout","frameNew","skipDelta","maxFrame","minFrame","method","from","to","bounds","renderIfPaused","frameCount","fps","diff","container","time","RLottiePlayer","QueryableWorker","error","event","message","IS_WEB_ASSEMBLY_SUPPORTED","LottieLoader","makeError","App","logger","LogTypes","reqId","resolve","reject","remain","queryableWorker","params","url","res","apiManagerProxy","arr","blobConstruct","blob","newParams","pause","middleware","cacheName","players","containers","playersByCacheName","lottieLoader","elem","node","firstChild","placeCaretAtEnd","ignoreTouchCheck","focus","range","sel","VisibilityIntersector","onVisibilityChange","index","change","items","key","visible","targets","verify","out","PARALLEL_LIMIT","IGNORE_ERRORS","LazyLoadQueueBase","parallelLimit","throttle","LazyLoadQueueIntersector","findAndSpliceAll","LazyLoadQueue","ignoreHeavyAnimation","useHeavyAnimationCheck","findAndSplice","getPathFromBytes","bytes","lookup","path","num","computeLockColor","size","skipx","margin","skipy","imageData","sr","sg","sb","sa","outCanvas","rgba","outContext","video","shouldIgnoreVideoError","shouldIgnore","onMediaLoad","readyState","useCanplayOnIos","loadEventName","errorEventName","onLoad","onError","loadedURLs","set","renderImageFromUrl","useCache","isVideo","isImage","loader","bytesFromHex","hexString","len","start","mimeType","convertToUint8Array","JPEG_HEADER_HEX","JPEG_HEADER","JPEG_TAIL","getPreviewBytesFromURL","needle","sliced","jpegBytes","char","isSticker","bytesToDataURL","getPreviewURLFromThumb","photo","thumb","heavyQueue","processingQueue","queue","deferredPromise","processHeavyQueue","timedChunk","results","f","getHeavyAnimationPromise","todo","possiblePromise","realResult","RADIUS","ITERATIONS","requireBlurPromise","fastBlurFunc","IS_CANVAS_FILTER_SUPPORTED","m","processBlurNext","img","radius","iterations","ctx","CACHE_SIZE","blur","dataUri","cached","addHeavyTask","useBlur","loadPromise","result","savingLottiePreview","isSavingLottiePreview","doc","getStickerThumbKey","saving","sharedCanvas","sharedContext","createCanvas","uploadId","getFileNameForUpload","file","tabId","fileName","ext","thumbSize","getDocumentDownloadOptions","queueId","onlyCache","inputFileLocation","getDocumentInputFileLocation","getPhotoDownloadOptions","photoSize","location","isDocument","isPhoto","getWebFileDownloadOptions","getWebDocumentDownloadOptions","webDocument","downloadOptions","isWebDocument","getDownloadFileNameFromOptions","getDownloadMediaDetails","isWebFileLocation","onRemove","a","clickEvent","AppDownloadManager","managers","details","download","type","deferred","main","downloads","getPromise","promiseBefore","cb","d","justAttach","id","pingPromise","iframe","hadProgress","onProgress","getFileNameByLocation","createDownloadAnchor","appDownloadManager","boxWidth","boxHeight","useBytes","pushDocumentSize","bestPhotoSize","THUMB_TYPE_FULL","sizes","calcImageInBox","getStickerEffectThumb","encodeEmoji","emojiText","toCodePoints","removeVS16s","vs16RegExp","zeroWidthJoiner","rawEmoji","unicodeSurrogates","points","previous","getEmojiToneIndex","input","match","VIRTUAL_COUNTRIES_EMOJIS","getCountryEmoji","iso2","emojiFromCodePoints","codePoints","prev","curr","createDetails","MIDDLEWARE_ERROR","MiddlewareHelper","helper","additionalCallback","getMiddleware","schedulerFn","fn","waiting","_args","throttleWithRaf","sharedConfig","equalFn","b","$PROXY","$TRACK","signalOptions","runEffects","runQueue","STALE","PENDING","UNOWNED","NO_INIT","Owner","Transition","Listener","Updates","Effects","ExecCount","transPending","setTransPending","createSignal","createRoot","detachedOwner","listener","owner","unowned","root","updateFn","untrack","cleanNode","runUpdates","s","setter","writeSignal","readSignal","createComputed","createComputation","updateComputation","createRenderEffect","createEffect","runUserEffects","createReaction","onInvalidate","tracking","createMemo","createResource","pSource","pFetcher","pOptions","source","fetcher","pr","initP","scheduled","resolved","dynamic","contexts","setValue","setError","track","trigger","state","setState","loadEnd","v","completeLoad","read","SuspenseContext","load","refetching","castError","batch","on","deps","isArray","prevInput","defer","prevValue","onMount","onCleanup","getListener","getOwner","runWithOwner","o","prevListener","handleError","startTransition","l","t","useTransition","createContext","defaultValue","createProvider","useContext","children","memo","resolveChildren","updates","lookUpstream","sSlot","isComp","current","TransitionRunning","markDownstream","runComputation","nextValue","init","pure","runTop","ancestors","wait","completeUpdates","userLength","ignore","obs","props","FALLBACK","dispose","mapArray","list","mapFn","mapped","disposers","indexes","newItems","j","newLen","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","end","newEnd","disposer","mapper","createComponent","Comp","trueFn","propTraps","_","property","receiver","resolveSource","resolveSources","mergeProps","sources","proxy","keys","sourcesMap","defined","sourceKeys","desc","splitProps","blocked","k","otherObject","objects","propName","isDefaultDesc","objectIndex","narrowedError","For","fallback","Show","keyed","condition","child","createUnifiedSignal","getter","WindowSize","IS_WORKER","w","windowSize","emojiAnimationContainer","wrapStickerAnimation","animationDiv","unmountAnimation","middlewareHelper","onScroll","scrollable","onUnmount","stickerPromise","wrapSticker","loopEffect","stickerSize","render","IS_VIBRATE_SUPPORTED","setPosition","generateRandomSigned","max","r","randomOffsetX","withRandomOffset","randomOffsetY","factor","rect","stableOffsetX","side","stableOffsetY","rectX","rectY","addOffsetX","addOffsetY","relativeEffect","currentTime","USE_FIX","IS_CHROMIUM","onVideoLeak","firstElementChild","setCurrentTime","handleVideoLeak","testVideoLeak","isLeak","onTimeUpdate","eventsOrder","eventsOrderLength","sawEvents","leakVideoFallbacks","events","normalized","deepEqual","fallbackCallback","locksUrls","videosCache","onAnimationEnd","onEnd","_timeout","isEmptyContainer","childElementCount","getThumbFromContainer","asStatic","div","isCustomEmoji","emoji","stickerType","boxSize","makeMediaSize","liteMode","isEffect","getCacheContext","cacheContext","isAnimated","effectThumb","isOut","willHaveLock","withLock","Icon","lockUrl","choosePhotoSize","fullThumb","attribute","customEmojiAttribute","textColor","lottieCachedThumbToneIndex","downloaded","needFadeIn","isThumbNeededForType","lottieCachedThumb","ret","loadThumbPromise","haveThumbCached","onlyThumb","withThumb","thumbImage","sequentialDom","afterRender","ns","svg","IS_WEBP_SUPPORTED","webpWorkerController","getImageFromStrippedThumb","lazyLoadQueue","loadPromises","loadStickerMiddleware","setLockColor","onFirstFrame","saveLottiePreview","isSingleVideo","syncedVideo","cachePromise","createVideo","onTimeupdate","previousTime","playedTimes","middlewareError","mediaLength","loaded","ratio","videoWidth","videoHeight","h","reset","_media","lastPromise","exportLoad","noPremium","attachStickerEffectHandler","attachClickEvent","isAvailable","cancelEvent","showPremiumInfo","STICKER_EFFECT_MULTIPLIER","overflowElement","lookForSticky","overflowRect","overflowTop","overflowRight","overflowBottom","overflowLeft","sticky","overflow","windowWidth","windowHeight","getVisibleRect","getViewportSlice","elements","selector","extraSize","invisibleTop","invisibleBottom","foundVisible","visibleRect","isVisible","extraMinLength","resizeObserverMap","resizeObserver","globalLazyLoadQueue","_CustomEmojiRendererElement","emojiRenderers","offsetsMap","findUpClassName","placeholders","elementsArr","offsets","elementRect","left","isDimensionsSet","syncedPlayersFrames","isImageData","frameWidth","frameHeight","dpr","elementWidth","maxLeft","replaceContent","top","forceRenderAfter","newWidth","newHeight","renderEmojis","renderer","addCustomEmojis","addElements","docId","usingOwnQueue","docIds","docs","wrap","_loadPromises","newElements","customEmojis","newElementsArray","isLottie","isStatic","IS_WEBM_SUPPORTED","willHaveSyncedPlayer","CUSTOM_EMOJI_INSTANT_PLAY","syncedPlayer","addition","readyPromise","placeholder","_p","setRenderInterval","syncedPlayers","clearRenderInterval","missing","cachedPromises","uncachedPromisesPromise","loadFromPromises","promises","onRender","uncached","CustomEmojiRendererElement","emojiRenderInterval","renderers","acc","CUSTOM_EMOJI_FPS","CUSTOM_EMOJI_FRAME_INTERVAL","encodeEntities","low","hi","documentFragmentToHTML","fragment","tag","anchor","selection","offset","findUpAsChild","getCaretPosF","childNodes","childNodesLength","CAN_COMBINE_ENTITIES","combineSameEntities","entities","nextEntityIdx","_i","entity","nextEntity","sortEntities","BOM","markdownTags","tabulationMatch","BLOCK_TAGS","BOM_REG_EXP","SELECTION_SEPARATOR","checkNodeForEntity","parentElement","closest","isLineEmpty","line","lines","selNode","selOffset","nodeValue","pushLine","isSelected","isBlock","alt","stickerEmoji","wasEntitiesLength","wasNodeEmpty","curChild","getRichElementValue","isTableCell","getCaretPos","field","startOffset","possibleChildrenFocusOffset","getRichValueWithCaret","withEntities","withCaret","caretPos","isInputEmpty","Emoji","EmojiVersions","version","buildURLHash","str","spoiler","text","chars","charsLength","before","spoilerBefore","spoilerAfter","after","TLD","checkBrackets","urlLength","urlOpenBrackets","urlCloseBrackets","getEmojiUnified","emojiCode","unified","parseEntities","raw","rawOffset","FULL_REG_EXP","matchIndex","EMAIL_REG_EXP","protocol","tld","balanced","splitted","timestamp","splittedLength","hours","minutes","seconds","setBlankToAnchor","EMOJI_VERSIONS_SUPPORTED","isEmojiSupported","inlineEl","newEmojiWidth","legacyEmojiWidth","IS_EMOJI_SUPPORTED","wrapTelegramUrlToAnchor","url1","wrapUrl","onclick","CustomEmojiElement","replaceChildren","createCustomFiller","createMarkupFormatting","formatting","wrapRichText","wrapSomething","wrapElement","noFiller","lastElement","customWraps","nasty","passEntities","contextSite","contextExternal","textLength","copy","endOffset","endPartOffset","fullEntityText","partText","usedText","bot","atPos","command","customEmojiElement","isSupported","IS_FIREFOX","masked","wrapped","hostname","currentContext","href","contextUrl","SITE_HASHTAGS","hashtag","username","encoded","encodeSpoiler","n","CLICK_EVENT_NAME","insertCustomFillers","notFiller","isCustomFillerNeededBySiblingNode","check","needed","previousSibling","nextSibling","ListenerSetter","_listener","compareNodes","node1","node1Offset","node2","node2Offset","whichChild","parents","commonAncestorContainer","NOT_ONLY_BOMS_REG_EXP","RichInputHandler","caret","toLeft","addInputCallback","log","moveFirst","isBOM","something","fromSelectionChange","smthIndex","move","moved","idxidx","onlyBOMs","rangeString","br","capture","newCallback","sibling","getCaretPosNew","treeWalker","textNode","cleanSiblings","bomNode","focusNodeBefore","focusOffsetBefore","focusNodeAfter","focusOffsetAfter","fillers","smths","selectElementContents","SINGLE_ENTITIES","currentEntities","newEntity","singleEnd","currentEntity","PASS_SINGLE_CONFLICTING_ENTITIES","PASS_CONFLICTING_ENTITIES","newEntities","filtered","findConflictingEntity","wrapDraftText","insertRichTextAsHTML","wrappingForPeerId","createCustomEmojiRendererForInput","html","pre","customEmojiElements","simulateEvent","findUpAttribute","noLinebreaks","plainText","usePlainText","regExp","peerId","NULL_PEER_ID","span","richValue","lineIndex","nextLine","correctedText","richTextLength","plainTextLength","entities2","filterEntity","mergeEntities","InputState","processCustomEmojisInInput","hasSet","InputField","label","onInputCallbacks","autocomplete","isEmpty","canBeEdited","findUpTag","centerX","focusOnNext","setDirection","_i18n","withBorder","border","maxLength","showingLength","onInput","wasError","inputLength","isError","showLengthOn","labelEl","setInnerHTML","i18n","fromSet","silent","_value","wrapEmojiText","isDraft"],"sources":["../src/helpers/array/forEachReverse.ts","../src/helpers/dom/safePlay.ts","../src/components/animationIntersector.ts","../src/environment/imageBitmapSupport.ts","../src/helpers/framesCache.ts","../src/lib/rlottie/rlottiePlayer.ts","../src/lib/rlottie/queryableWorker.ts","../src/environment/webAssemblySupport.ts","../src/lib/rlottie/lottieLoader.ts","../src/helpers/dom/replaceContent.ts","../src/helpers/dom/placeCaretAtEnd.ts","../src/components/visibilityIntersector.ts","../src/helpers/array/findAndSpliceAll.ts","../src/components/lazyLoadQueueBase.ts","../src/components/lazyLoadQueueIntersector.ts","../src/components/lazyLoadQueue.ts","../src/helpers/bytes/getPathFromBytes.ts","../src/helpers/computeLockColor.ts","../src/helpers/dom/createVideo.ts","../src/helpers/onMediaLoad.ts","../src/helpers/dom/renderImageFromUrl.ts","../src/helpers/bytes/bytesFromHex.ts","../src/helpers/bytes/bytesToDataURL.ts","../src/helpers/bytes/convertToUint8Array.ts","../src/helpers/bytes/getPreviewURLFromBytes.ts","../src/helpers/getPreviewURLFromThumb.ts","../src/helpers/heavyQueue.ts","../src/helpers/blur.ts","../src/helpers/getImageFromStrippedThumb.ts","../src/helpers/saveLottiePreview.ts","../src/helpers/getFileNameForUpload.ts","../src/lib/appManagers/utils/docs/getDocumentInputFileLocation.ts","../src/lib/appManagers/utils/docs/getDocumentDownloadOptions.ts","../src/lib/appManagers/utils/photos/getPhotoDownloadOptions.ts","../src/lib/appManagers/utils/webFiles/getWebFileDownloadOptions.ts","../src/lib/appManagers/utils/webDocs/getWebDocumentDownloadOptions.ts","../src/lib/appManagers/utils/webDocs/isWebDocument.ts","../src/lib/appManagers/utils/download/getDownloadFileNameFromOptions.ts","../src/lib/appManagers/utils/download/getDownloadMediaDetails.ts","../src/helpers/dom/createDownloadAnchor.ts","../src/lib/appManagers/appDownloadManager.ts","../src/lib/appManagers/utils/photos/choosePhotoSize.ts","../src/lib/appManagers/utils/stickers/getStickerEffectThumb.ts","../src/vendor/emoji/index.ts","../src/helpers/middleware.ts","../src/helpers/schedulers/throttleWith.ts","../src/helpers/schedulers/throttleWithRaf.ts","../src/solid/packages/solid/dist/solid.js","../src/helpers/solid/createUnifiedSignal.ts","../src/helpers/windowSize.ts","../src/components/wrappers/stickerAnimation.ts","../src/helpers/dom/setCurrentTime.ts","../src/helpers/dom/handleVideoLeak.ts","../src/components/wrappers/sticker.ts","../src/helpers/dom/getVisibleRect.ts","../src/helpers/dom/getViewportSlice.ts","../src/lib/customEmoji/renderer.ts","../src/helpers/string/encodeEntities.ts","../src/helpers/dom/documentFragmentToHTML.ts","../src/helpers/dom/findUpAttribute.ts","../src/helpers/dom/findUpTag.ts","../src/helpers/dom/getCaretPosNew.ts","../src/lib/richTextProcessor/combineSameEntities.ts","../src/lib/richTextProcessor/sortEntities.ts","../src/helpers/string/bom.ts","../src/helpers/dom/getRichElementValue.ts","../src/helpers/dom/getRichValueWithCaret.ts","../src/helpers/dom/isInputEmpty.ts","../src/config/emoji.ts","../src/helpers/buildURLHash.ts","../src/lib/richTextProcessor/spoiler.ts","../src/lib/richTextProcessor/encodeSpoiler.ts","../src/config/tld.ts","../src/lib/richTextProcessor/checkBrackets.ts","../src/lib/richTextProcessor/getEmojiUnified.ts","../src/lib/richTextProcessor/parseEntities.ts","../src/lib/richTextProcessor/setBlankToAnchor.ts","../src/environment/emojiVersionsSupport.ts","../src/lib/richTextProcessor/wrapTelegramUrlToAnchor.ts","../src/lib/customEmoji/element.ts","../src/lib/richTextProcessor/wrapRichText.ts","../src/helpers/listenerSetter.ts","../src/helpers/dom/compareNodes.ts","../src/helpers/dom/richInputHandler.ts","../src/helpers/dom/selectElementContents.ts","../src/lib/richTextProcessor/findConflictingEntity.ts","../src/lib/richTextProcessor/mergeEntities.ts","../src/lib/richTextProcessor/wrapDraftText.ts","../src/components/inputField.ts","../src/lib/richTextProcessor/wrapEmojiText.ts"],"sourcesContent":["export default function forEachReverse<T>(array: Array<T>, callback: (value: T, index?: number, array?: Array<T>) => void) {\n  for(let length = array.length, i = length - 1; i >= 0; --i) {\n    callback(array[i], i, array);\n  }\n};\n","import noop from '../noop';\n\nexport default function safePlay(media: {play: () => any}) {\n  try {\n    const promise = media.play();\n    if(promise instanceof Promise) {\n      promise.catch(noop);\n    }\n  } catch(e) {\n    console.error(e);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {LiteModeKey} from '../helpers/liteMode';\nimport type RLottiePlayer from '../lib/rlottie/rlottiePlayer';\nimport rootScope from '../lib/rootScope';\nimport {IS_SAFARI} from '../environment/userAgent';\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport isInDOM from '../helpers/dom/isInDOM';\nimport indexOfAndSplice from '../helpers/array/indexOfAndSplice';\nimport forEachReverse from '../helpers/array/forEachReverse';\nimport idleController from '../helpers/idleController';\nimport {fastRaf} from '../helpers/schedulers';\nimport {Middleware} from '../helpers/middleware';\nimport safePlay from '../helpers/dom/safePlay';\n\nexport type AnimationItemGroup = '' | 'none' | 'chat' | 'lock' |\n  'STICKERS-POPUP' | 'emoticons-dropdown' | 'STICKERS-SEARCH' | 'GIFS-SEARCH' |\n  `CHAT-MENU-REACTIONS-${number}` | 'INLINE-HELPER' | 'GENERAL-SETTINGS' | 'STICKER-VIEWER' | 'EMOJI' |\n  'EMOJI-STATUS' | `chat-${number}`;\nexport interface AnimationItem {\n  el: HTMLElement,\n  group: AnimationItemGroup,\n  animation: AnimationItemWrapper,\n  liteModeKey?: LiteModeKey,\n  controlled?: boolean | Middleware,\n  type: AnimationItemType\n};\n\nexport type AnimationItemType = 'lottie' | 'dots' | 'video' | 'emoji';\n\nexport interface AnimationItemWrapper {\n  remove: () => void;\n  paused: boolean;\n  pause: () => any;\n  play: () => any;\n  autoplay: boolean;\n  loop: boolean | number;\n  // onVisibilityChange?: (visible: boolean) => boolean;\n};\n\nexport class AnimationIntersector {\n  private observer: IntersectionObserver;\n  private visible: Set<AnimationItem>;\n\n  private overrideIdleGroups: Set<string>;\n  private byGroups: {[group in AnimationItemGroup]?: AnimationItem[]};\n  private byPlayer: Map<AnimationItem['animation'], AnimationItem>;\n  private lockedGroups: {[group in AnimationItemGroup]?: true};\n  private onlyOnePlayableGroup: AnimationItemGroup;\n\n  private intersectionLockedGroups: {[group in AnimationItemGroup]?: true};\n  private videosLocked: boolean;\n\n  constructor() {\n    this.observer = new IntersectionObserver((entries) => {\n      // if(rootScope.idle.isIDLE) return;\n\n      for(const entry of entries) {\n        const target = entry.target;\n\n        for(const group in this.byGroups) {\n          if(this.intersectionLockedGroups[group as AnimationItemGroup]) {\n            continue;\n          }\n\n          const animation = this.byGroups[group as AnimationItemGroup].find((p) => p.el === target);\n          if(!animation) {\n            continue;\n          }\n\n          if(entry.isIntersecting) {\n            this.visible.add(animation);\n            this.checkAnimation(animation, false);\n\n            /* if(animation instanceof HTMLVideoElement && animation.dataset.src) {\n              animation.src = animation.dataset.src;\n              animation.load();\n            } */\n          } else {\n            this.visible.delete(animation);\n            this.checkAnimation(animation, true);\n\n            const _animation = animation.animation;\n            if(animation.type === 'lottie'/*  && animation.cachingDelta === 2 */) {\n              // console.warn('will clear cache', player);\n              (_animation as RLottiePlayer).clearCache();\n            }/*  else if(animation instanceof HTMLVideoElement && animation.src) {\n              animation.dataset.src = animation.src;\n              animation.src = '';\n              animation.load();\n            } */\n          }\n\n          break;\n        }\n      }\n    });\n\n    this.visible = new Set();\n\n    this.overrideIdleGroups = new Set();\n    this.byGroups = {};\n    this.byPlayer = new Map();\n    this.lockedGroups = {};\n    this.onlyOnePlayableGroup = '';\n\n    this.intersectionLockedGroups = {};\n    this.videosLocked = false;\n\n    idleController.addEventListener('change', (idle) => {\n      this.checkAnimations2(idle);\n    });\n  }\n\n  public toggleMediaPause(paused: boolean) {\n    if(paused) {\n      if(this.videosLocked) {\n        this.videosLocked = false;\n        this.checkAnimations2();\n      }\n    } else {\n      this.videosLocked = true;\n      this.checkAnimations2();\n    }\n  }\n\n  public setOverrideIdleGroup(group: string, override: boolean) {\n    if(override) this.overrideIdleGroups.add(group);\n    else this.overrideIdleGroups.delete(group);\n  }\n\n  public getAnimations(element: HTMLElement) {\n    const found: AnimationItem[] = [];\n    for(const group in this.byGroups) {\n      for(const player of this.byGroups[group as AnimationItemGroup]) {\n        if(player.el === element) {\n          found.push(player);\n        }\n      }\n    }\n\n    return found;\n  }\n\n  public removeAnimation(player: AnimationItem) {\n    const {el, animation} = player;\n    if(!player.controlled && player.type !== 'video') {\n      animation.remove();\n    }\n\n    if(player.type === 'video' && IS_SAFARI) {\n      setTimeout(() => { // TODO:   ,       \n        (animation as HTMLVideoElement).src = '';\n        (animation as HTMLVideoElement).load();\n      }, 1e3);\n    }\n\n    const group = this.byGroups[player.group];\n    if(group) {\n      indexOfAndSplice(group, player);\n      if(!group.length) {\n        delete this.byGroups[player.group];\n      }\n    }\n\n    this.observer.unobserve(el);\n    this.visible.delete(player);\n    this.byPlayer.delete(animation);\n  }\n\n  public removeAnimationByPlayer(player: AnimationItemWrapper) {\n    const item = this.byPlayer.get(player);\n    if(item) {\n      this.removeAnimation(item);\n    }\n  }\n\n  public addAnimation(options: {\n    animation: AnimationItem['animation'],\n    group?: AnimationItemGroup,\n    observeElement: HTMLElement,\n    controlled?: AnimationItem['controlled'],\n    liteModeKey?: LiteModeKey\n    type: AnimationItemType\n  }) {\n    const {animation, group = '', observeElement, controlled, liteModeKey, type} = options;\n    if(group === 'none' || this.byPlayer.has(animation)) {\n      return;\n    }\n\n    const item: AnimationItem = {\n      el: observeElement,\n      animation: animation,\n      group,\n      controlled,\n      liteModeKey,\n      type\n    };\n\n    if(controlled && typeof(controlled) !== 'boolean') {\n      controlled.onClean(() => {\n        this.removeAnimationByPlayer(animation);\n      });\n    }\n\n    if(item.type === 'lottie') {\n      if(!rootScope.settings.stickers.loop && animation.loop) {\n        animation.loop = rootScope.settings.stickers.loop;\n      }\n    }\n\n    (this.byGroups[group as AnimationItemGroup] ??= []).push(item);\n    this.observer.observe(item.el);\n    this.byPlayer.set(animation, item);\n  }\n\n  public checkAnimations(\n    blurred?: boolean,\n    group?: AnimationItemGroup,\n    destroy?: boolean,\n    imitateIntersection?: boolean\n  ) {\n    // if(rootScope.idle.isIDLE) return;\n\n    if(group !== undefined && !this.byGroups[group]) {\n      // console.warn('no animation group:', group);\n      return;\n    }\n\n    const groups = group !== undefined /* && false */ ? [group] : Object.keys(this.byGroups) as AnimationItemGroup[];\n\n    for(const group of groups) {\n      if(imitateIntersection && this.intersectionLockedGroups[group]) {\n        continue;\n      }\n\n      const animations = this.byGroups[group];\n\n      forEachReverse(animations, (animation) => {\n        this.checkAnimation(animation, blurred, destroy);\n      });\n    }\n  }\n\n  public checkAnimations2(blurred?: boolean) {\n    this.checkAnimations(blurred, undefined, undefined, true);\n  }\n\n  public checkAnimation(player: AnimationItem, blurred?: boolean, destroy?: boolean) {\n    const {el, animation, group} = player;\n    // return;\n    if(destroy || (!this.lockedGroups[group] && !isInDOM(el))) {\n      if(!player.controlled || destroy) {\n        this.removeAnimation(player);\n      }\n\n      return;\n    }\n\n    if(blurred ||\n      (this.onlyOnePlayableGroup && this.onlyOnePlayableGroup !== group) ||\n      (player.type === 'video' && this.videosLocked)\n    ) {\n      if(!animation.paused) {\n        // console.warn('pause animation:', animation);\n        animation.pause();\n      }\n    } else if(animation.paused &&\n      this.visible.has(player) &&\n      animation.autoplay &&\n      (!this.onlyOnePlayableGroup || this.onlyOnePlayableGroup === group) &&\n      (!idleController.isIdle || this.overrideIdleGroups.has(player.group))\n    ) {\n      // console.warn('play animation:', animation);\n      safePlay(animation);\n    }\n  }\n\n  public getOnlyOnePlayableGroup() {\n    return this.onlyOnePlayableGroup;\n  }\n\n  public setOnlyOnePlayableGroup(group: AnimationItemGroup = '') {\n    this.onlyOnePlayableGroup = group;\n  }\n\n  public lockGroup(group: AnimationItemGroup) {\n    this.lockedGroups[group] = true;\n  }\n\n  public unlockGroup(group: AnimationItemGroup) {\n    delete this.lockedGroups[group];\n    this.checkAnimations(undefined, group);\n  }\n\n  public refreshGroup(group: AnimationItemGroup) {\n    const animations = this.byGroups[group];\n    if(!animations?.length) {\n      return;\n    }\n\n    animations.forEach((animation) => {\n      this.observer.unobserve(animation.el);\n    });\n\n    fastRaf(() => {\n      animations.forEach((animation) => {\n        this.observer.observe(animation.el);\n      });\n    });\n  }\n\n  public lockIntersectionGroup(group: AnimationItemGroup) {\n    this.intersectionLockedGroups[group] = true;\n  }\n\n  public unlockIntersectionGroup(group: AnimationItemGroup) {\n    delete this.intersectionLockedGroups[group];\n    this.refreshGroup(group);\n  }\n\n  public toggleIntersectionGroup(group: AnimationItemGroup, lock: boolean) {\n    if(lock) this.lockIntersectionGroup(group);\n    else this.unlockIntersectionGroup(group);\n  }\n\n  public setAutoplay(play: boolean, liteModeKey: LiteModeKey) {\n    let changed = false;\n    this.byPlayer.forEach((animationItem, animation) => {\n      if(animationItem.liteModeKey === liteModeKey) {\n        changed = true;\n        animation.autoplay = play ? !!+animationItem.el.dataset.stickerPlay : false;\n        animation.loop = play ? !!+animationItem.el.dataset.stickerLoop && rootScope.settings.stickers.loop : false;\n      }\n    });\n\n    return changed;\n  }\n\n  public setLoop(loop: boolean) {\n    let changed = false;\n    this.byPlayer.forEach((animationItem, animation) => {\n      if(!!+animationItem.el.dataset.stickerLoop &&\n        animation.loop !== loop &&\n        (animationItem.type === 'lottie' || animationItem.type === 'video')) {\n        changed = true;\n        animation.loop = loop;\n\n        // if(animation._autoplay && animation.autoplay !== animation._autoplay) {\n        animation.autoplay = !!+animationItem.el.dataset.stickerPlay;\n        // }\n      }\n    });\n\n    return changed;\n  }\n}\n\nconst animationIntersector = new AnimationIntersector();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.animationIntersector = animationIntersector);\nexport default animationIntersector;\n","const IS_IMAGE_BITMAP_SUPPORTED = typeof(ImageBitmap) !== 'undefined';\n\nexport default IS_IMAGE_BITMAP_SUPPORTED;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {RLottieColor} from '../lib/rlottie/rlottiePlayer';\n\nexport type FramesCacheMap = Map<number, Uint8ClampedArray>;\nexport type FramesCacheMapNew = Map<number, HTMLCanvasElement | ImageBitmap>;\nexport type FramesCacheMapURLs = Map<number, string>;\nexport type FramesCacheItem = {\n  frames: FramesCacheMap,\n  framesNew: FramesCacheMapNew,\n  framesURLs: FramesCacheMapURLs,\n  clearCache: () => void,\n  counter: number\n};\n\nexport class FramesCache {\n  private cache: Map<string, FramesCacheItem>;\n\n  constructor() {\n    this.cache = new Map();\n  }\n\n  public static createCache(): FramesCacheItem {\n    const cache: FramesCacheItem = {\n      frames: new Map(),\n      framesNew: new Map(),\n      framesURLs: new Map(),\n      clearCache: () => {\n        cache.framesNew.forEach((value) => {\n          (value as ImageBitmap).close?.();\n        });\n\n        cache.frames.clear();\n        cache.framesNew.clear();\n        cache.framesURLs.clear();\n      },\n      counter: 0\n    };\n\n    return cache;\n  }\n\n  public getCache(name: string) {\n    let cache = this.cache.get(name);\n    if(!cache) {\n      this.cache.set(name, cache = FramesCache.createCache());\n    } else {\n      // console.warn('[RLottieCache] cache will be reused', cache);\n    }\n\n    ++cache.counter;\n    return cache;\n  }\n\n  public releaseCache(name: string) {\n    const cache = this.cache.get(name);\n    if(cache && !--cache.counter) {\n      this.cache.delete(name);\n      // console.warn('[RLottieCache] released cache', cache);\n    }\n  }\n\n  public getCacheCounter(name: string) {\n    const cache = this.cache.get(name);\n    return cache?.counter;\n  }\n\n  public generateName(name: string, width: number, height: number, color: RLottieColor, toneIndex: number) {\n    return [\n      name,\n      width,\n      height,\n      // color ? rgbaToHexa(color) : ''\n      // color ? 'colored' : '',\n      toneIndex || ''\n    ].filter(Boolean).join('-');\n  }\n}\n\nconst framesCache = new FramesCache();\n\nexport default framesCache;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {AnimationItemGroup, AnimationItemWrapper} from '../../components/animationIntersector';\nimport type {Middleware} from '../../helpers/middleware';\nimport type {LiteModeKey} from '../../helpers/liteMode';\nimport CAN_USE_TRANSFERABLES from '../../environment/canUseTransferables';\nimport IS_APPLE_MX from '../../environment/appleMx';\nimport {IS_ANDROID, IS_APPLE_MOBILE, IS_APPLE, IS_SAFARI} from '../../environment/userAgent';\nimport EventListenerBase from '../../helpers/eventListenerBase';\nimport mediaSizes from '../../helpers/mediaSizes';\nimport clamp from '../../helpers/number/clamp';\nimport QueryableWorker from './queryableWorker';\nimport IS_IMAGE_BITMAP_SUPPORTED from '../../environment/imageBitmapSupport';\nimport framesCache, {FramesCache, FramesCacheItem} from '../../helpers/framesCache';\nimport customProperties, {CustomProperty} from '../../helpers/dom/customProperties';\n\nexport type RLottieOptions = {\n  container: HTMLElement | HTMLElement[],\n  middleware?: Middleware,\n  canvas?: HTMLCanvasElement,\n  autoplay?: boolean,\n  animationData: Blob,\n  loop?: RLottiePlayer['loop'],\n  width?: number,\n  height?: number,\n  group?: AnimationItemGroup,\n  noCache?: boolean,\n  needUpscale?: boolean,\n  skipRatio?: number,\n  initFrame?: number, // index\n  color?: RLottieColor,\n  textColor?: CustomProperty,\n  name?: string,\n  skipFirstFrameRendering?: boolean,\n  toneIndex?: number,\n  sync?: boolean,\n  liteModeKey?: LiteModeKey\n};\n\nexport type RLottieColor = [number, number, number];\n\nexport function getLottiePixelRatio(width: number, height: number, needUpscale?: boolean) {\n  let pixelRatio = clamp(window.devicePixelRatio, 1, 2);\n  if(pixelRatio > 1 && !needUpscale) {\n    if(width > 90 && height > 90) {\n      if(!IS_APPLE && mediaSizes.isMobile) {\n        pixelRatio = 1;\n      }\n    } else if((width > 60 && height > 60) || IS_ANDROID) {\n      pixelRatio = Math.max(1.5, pixelRatio - 1.5);\n    }\n  }\n\n  return pixelRatio;\n}\n\nexport function applyColorOnContext(\n  context: CanvasRenderingContext2D,\n  color: RLottieColor | string,\n  x: number,\n  y: number,\n  width: number,\n  height: number\n) {\n  context.globalCompositeOperation = 'source-atop';\n  context.fillStyle = typeof(color) === 'string' ? color : `rgb(${color[0]}, ${color[1]}, ${color[2]})`;\n  context.fillRect(x, y, width, height);\n  context.globalCompositeOperation = 'source-over';\n}\n\nexport default class RLottiePlayer extends EventListenerBase<{\n  enterFrame: (frameNo: number) => void,\n  ready: () => void,\n  firstFrame: () => void,\n  cached: () => void,\n  destroy: () => void\n}> implements AnimationItemWrapper {\n  public static CACHE = framesCache;\n  private static reqId = 0;\n\n  public reqId = 0;\n  public curFrame: number;\n  private frameCount: number;\n  private fps: number;\n  private skipDelta: number;\n  public name: string;\n  public cacheName: string;\n  private toneIndex: number;\n\n  private worker: QueryableWorker;\n\n  private width = 0;\n  private height = 0;\n\n  public el: HTMLElement[];\n  public canvas: HTMLCanvasElement[];\n  public contexts: CanvasRenderingContext2D[];\n\n  public paused = true;\n  // public paused = false;\n  public direction = 1;\n  private speed = 1;\n  public autoplay = true;\n  public _autoplay: boolean; // ! will be used to store original value for settings.stickers.loop\n  public loop: number | boolean = true;\n  public _loop: RLottiePlayer['loop']; // ! will be used to store original value for settings.stickers.loop\n  public group: AnimationItemGroup = '';\n  public liteModeKey: LiteModeKey;\n\n  private frInterval: number;\n  private frThen: number;\n  private rafId: number;\n\n  // private caching = false;\n  // private removed = false;\n\n  private cache: FramesCacheItem;\n  private imageData: ImageData;\n  public clamped: Uint8ClampedArray;\n  private cachingDelta = 0;\n\n  private initFrame: number;\n  private color: RLottieColor;\n  private textColor: CustomProperty;\n\n  public minFrame: number;\n  public maxFrame: number;\n\n  private playedTimes = 0;\n\n  private currentMethod: RLottiePlayer['mainLoopForwards'] | RLottiePlayer['mainLoopBackwards'];\n  private frameListener: (currentFrame: number) => void;\n  private skipFirstFrameRendering: boolean;\n  private playToFrameOnFrameCallback: (frameNo: number) => void;\n\n  public overrideRender: (frame: ImageData | HTMLCanvasElement | ImageBitmap) => void;\n  private renderedFirstFrame: boolean;\n\n  private raw: boolean;\n\n  constructor({el, worker, options}: {\n    el: RLottiePlayer['el'],\n    worker: QueryableWorker,\n    options: RLottieOptions\n  }) {\n    super(true);\n\n    this.reqId = ++RLottiePlayer['reqId'];\n    this.el = el;\n    this.worker = worker;\n\n    for(const i in options) {\n      if(this.hasOwnProperty(i)) {\n        // @ts-ignore\n        this[i] = options[i];\n      }\n    }\n\n    this._loop = this.loop;\n    this._autoplay = this.autoplay;\n\n    // ! :(\n    this.initFrame = options.initFrame;\n    this.color = options.color;\n    this.textColor = options.textColor;\n    this.name = options.name;\n    this.skipFirstFrameRendering = options.skipFirstFrameRendering;\n    this.toneIndex = options.toneIndex;\n    this.raw = false;\n    this.liteModeKey = options.liteModeKey;\n\n    if(this.name) {\n      this.cacheName = RLottiePlayer.CACHE.generateName(\n        this.name,\n        this.width,\n        this.height,\n        this.color,\n        this.toneIndex\n      );\n    }\n\n    // * Skip ratio (30fps)\n    let skipRatio: number;\n    if(options.skipRatio !== undefined) skipRatio = options.skipRatio;\n    else if((IS_ANDROID || IS_APPLE_MOBILE || (IS_APPLE && !IS_SAFARI && !IS_APPLE_MX)) && this.width < 100 && this.height < 100 && !options.needUpscale) {\n      skipRatio = 0.5;\n    }\n\n    this.skipDelta = skipRatio !== undefined ? 1 / skipRatio | 0 : 1;\n\n    // options.needUpscale = true;\n\n    // * Pixel ratio\n    const pixelRatio = getLottiePixelRatio(this.width, this.height, options.needUpscale);\n\n    this.width = Math.round(this.width * pixelRatio);\n    this.height = Math.round(this.height * pixelRatio);\n\n    // options.noCache = true;\n\n    // * Cache frames params\n    if(!options.noCache/*  && false */) {\n      //      ,     ,   8080  6868,   75%\n      if(IS_APPLE && this.width > 100 && this.height > 100) {\n        this.cachingDelta = 2; // 2 // 50%\n      } else if(this.width < 100 && this.height < 100) {\n        this.cachingDelta = Infinity; // 100%\n      } else {\n        this.cachingDelta = 4; // 75%\n      }\n    }\n\n    // this.cachingDelta = Infinity;\n    // this.cachingDelta = 0;\n    // if(isApple) {\n    //   this.cachingDelta = 0; //2 // 50%\n    // }\n\n    if(!this.canvas) {\n      this.canvas = this.el.map(() => {\n        const canvas = document.createElement('canvas');\n        canvas.classList.add('rlottie');\n        canvas.width = this.width;\n        canvas.height = this.height;\n        canvas.dpr = pixelRatio;\n        return canvas;\n      });\n    }\n\n    this.contexts = this.canvas.map((canvas) => canvas.getContext('2d'));\n\n    if(!IS_IMAGE_BITMAP_SUPPORTED || this.raw) {\n      this.imageData = new ImageData(this.width, this.height);\n\n      if(CAN_USE_TRANSFERABLES) {\n        this.clamped = new Uint8ClampedArray(this.width * this.height * 4);\n      }\n    }\n\n    if(this.name) {\n      this.cache = RLottiePlayer.CACHE.getCache(this.cacheName);\n    } else {\n      this.cache = FramesCache.createCache();\n    }\n  }\n\n  public setSize(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n    this.canvas.forEach((canvas) => {\n      canvas.width = width;\n      canvas.height = height;\n    });\n  }\n\n  public clearCache() {\n    if(this.cachingDelta === Infinity) {\n      return;\n    }\n\n    if(this.cacheName && this.cache.counter > 1) { // skip clearing because same sticker can be still visible\n      return;\n    }\n\n    this.cache.clearCache();\n  }\n\n  public sendQuery(args: any[], transfer?: Transferable[]) {\n    this.worker.sendQuery([args.shift(), this.reqId, ...args], transfer);\n  }\n\n  public loadFromData(data: RLottieOptions['animationData']) {\n    this.sendQuery([\n      'loadFromData',\n      data,\n      this.width,\n      this.height,\n      this.toneIndex,\n      this.raw\n      /* , this.canvas.transferControlToOffscreen() */\n    ]);\n  }\n\n  public play() {\n    if(!this.paused) {\n      return;\n    }\n\n    this.paused = false;\n    this.setMainLoop();\n  }\n\n  public pause(clearPendingRAF = true) {\n    if(this.paused) {\n      return;\n    }\n\n    this.paused = true;\n    if(clearPendingRAF) {\n      clearTimeout(this.rafId);\n      this.rafId = undefined;\n    }\n    // window.cancelAnimationFrame(this.rafId);\n  }\n\n  private resetCurrentFrame() {\n    return this.curFrame = this.initFrame ?? (this.direction === 1 ? this.minFrame : this.maxFrame);\n  }\n\n  public stop(renderFirstFrame = true) {\n    this.pause();\n\n    const curFrame = this.resetCurrentFrame();\n    if(renderFirstFrame) {\n      this.requestFrame(curFrame);\n      // this.sendQuery('renderFrame', this.curFrame);\n    }\n  }\n\n  public restart() {\n    this.stop(false);\n    this.play();\n  }\n\n  public playOrRestart() {\n    if(!this.paused) {\n      return;\n    }\n\n    if(this.curFrame === this.maxFrame) {\n      this.restart();\n    } else {\n      this.play();\n    }\n  }\n\n  public setSpeed(speed: number) {\n    if(this.speed === speed) {\n      return;\n    }\n\n    this.speed = speed;\n\n    if(!this.paused) {\n      this.setMainLoop();\n    }\n  }\n\n  public setDirection(direction: number) {\n    if(this.direction === direction) {\n      return;\n    }\n\n    this.direction = direction;\n\n    if(!this.paused) {\n      this.setMainLoop();\n    }\n  }\n\n  public remove() {\n    this.pause();\n    this.sendQuery(['destroy']);\n    if(this.cacheName) RLottiePlayer.CACHE.releaseCache(this.cacheName);\n    this.dispatchEvent('destroy');\n    this.cleanup();\n  }\n\n  public renderFrame2(frame: Uint8ClampedArray | HTMLCanvasElement | ImageBitmap, frameNo: number) {\n    /* this.setListenerResult('enterFrame', frameNo);\n    return; */\n\n    try {\n      if(frame instanceof Uint8ClampedArray) {\n        this.imageData.data.set(frame);\n      }\n\n      // this.context.putImageData(new ImageData(frame, this.width, this.height), 0, 0);\n      this.contexts.forEach((context, idx) => {\n        let cachedSource: HTMLCanvasElement | ImageBitmap = this.cache.framesNew.get(frameNo);\n        if(!(frame instanceof Uint8ClampedArray)) {\n          cachedSource = frame;\n        } else if(idx > 0) {\n          cachedSource = this.canvas[0];\n        }\n\n        if(!cachedSource) {\n          const c = document.createElement('canvas');\n          c.width = context.canvas.width;\n          c.height = context.canvas.height;\n          c.getContext('2d').putImageData(this.imageData, 0, 0);\n          this.cache.framesNew.set(frameNo, c);\n          cachedSource = c;\n        }\n\n        if(this.overrideRender && this.renderedFirstFrame) {\n          this.overrideRender(cachedSource || this.imageData);\n        } else if(cachedSource) {\n          context.clearRect(0, 0, cachedSource.width, cachedSource.height);\n          context.drawImage(cachedSource, 0, 0);\n        } else {\n          context.putImageData(this.imageData, 0, 0);\n        }\n\n        if(this.color || this.textColor) {\n          applyColorOnContext(\n            context,\n            this.color || customProperties.getProperty(this.textColor),\n            0,\n            0,\n            this.width,\n            this.height\n          );\n        }\n\n        if(!this.renderedFirstFrame) {\n          this.renderedFirstFrame = true;\n        }\n      });\n\n      this.dispatchEvent('enterFrame', frameNo);\n    } catch(err) {\n      console.error('RLottiePlayer renderFrame error:', err/* , frame */, this.width, this.height);\n      this.autoplay = false;\n      this.pause();\n    }\n  }\n\n  public renderFrame(frame: Parameters<RLottiePlayer['renderFrame2']>[0], frameNo: number) {\n    const canCacheFrame = this.cachingDelta && (frameNo % this.cachingDelta || !frameNo);\n    if(canCacheFrame) {\n      if(frame instanceof Uint8ClampedArray && !this.cache.frames.has(frameNo)) {\n        this.cache.frames.set(frameNo, new Uint8ClampedArray(frame));// frame;\n      } else if(IS_IMAGE_BITMAP_SUPPORTED && frame instanceof ImageBitmap && !this.cache.framesNew.has(frameNo)) {\n        this.cache.framesNew.set(frameNo, frame);\n      }\n    }\n\n    /* if(!this.listenerResults.hasOwnProperty('cached')) {\n      this.setListenerResult('enterFrame', frameNo);\n      if(frameNo === (this.frameCount - 1)) {\n        this.setListenerResult('cached');\n      }\n\n      return;\n    } */\n\n    if(this.frInterval) {\n      const now = Date.now(), delta = now - this.frThen;\n\n      if(delta < 0) {\n        const timeout = this.frInterval > -delta ? -delta % this.frInterval : this.frInterval;\n        if(this.rafId) clearTimeout(this.rafId);\n        this.rafId = window.setTimeout(() => {\n          this.renderFrame2(frame, frameNo);\n        }, timeout);\n        // await new Promise((resolve) => setTimeout(resolve, -delta % this.frInterval));\n        return;\n      }\n    }\n\n    this.renderFrame2(frame, frameNo);\n  }\n\n  public requestFrame(frameNo: number) {\n    const frame = this.cache.frames.get(frameNo);\n    const frameNew = this.cache.framesNew.get(frameNo);\n    if(frameNew) {\n      this.renderFrame(frameNew, frameNo);\n    } else if(frame) {\n      this.renderFrame(frame, frameNo);\n    } else {\n      if(this.clamped && !this.clamped.length) { // fix detached\n        this.clamped = new Uint8ClampedArray(this.width * this.height * 4);\n      }\n\n      this.sendQuery(['renderFrame', frameNo], this.clamped ? [this.clamped.buffer] : undefined);\n    }\n  }\n\n  private onLap() {\n    if(++this.playedTimes === this.loop) {\n      this.loop = false;\n    }\n\n    if(!this.loop) {\n      this.pause(false);\n      return false;\n    }\n\n    return true;\n  }\n\n  private mainLoopForwards() {\n    const {skipDelta, maxFrame} = this;\n    const frame = (this.curFrame + skipDelta) > maxFrame ? this.curFrame = (this.loop ? this.minFrame : this.maxFrame) : this.curFrame += skipDelta;\n    // console.log('mainLoopForwards', this.curFrame, skipDelta, frame);\n\n    this.requestFrame(frame);\n    if((frame + skipDelta) > maxFrame) {\n      return this.onLap();\n    }\n\n    return true;\n  }\n\n  private mainLoopBackwards() {\n    const {skipDelta, minFrame} = this;\n    const frame = (this.curFrame - skipDelta) < minFrame ? this.curFrame = (this.loop ? this.maxFrame : this.minFrame) : this.curFrame -= skipDelta;\n    // console.log('mainLoopBackwards', this.curFrame, skipDelta, frame);\n\n    this.requestFrame(frame);\n    if((frame - skipDelta) < minFrame) {\n      return this.onLap();\n    }\n\n    return true;\n  }\n\n  public setMainLoop() {\n    // window.cancelAnimationFrame(this.rafId);\n    clearTimeout(this.rafId);\n    this.rafId = undefined;\n\n    this.frInterval = 1000 / this.fps / this.speed * this.skipDelta;\n    this.frThen = Date.now() - this.frInterval;\n\n    // console.trace('setMainLoop', this.frInterval, this.direction, this, JSON.stringify(this.listenerResults), this.listenerResults);\n\n    const method = (this.direction === 1 ? this.mainLoopForwards : this.mainLoopBackwards).bind(this);\n    this.currentMethod = method;\n    // this.frameListener && this.removeListener('enterFrame', this.frameListener);\n\n    // setTimeout(() => {\n    // this.addListener('enterFrame', this.frameListener);\n    // }, 0);\n\n    if(this.frameListener) {\n      const lastResult = this.listenerResults.enterFrame;\n      if(lastResult !== undefined) {\n        this.frameListener(this.curFrame);\n      }\n    }\n\n    // this.mainLoop(method);\n    // this.r(method);\n    // method();\n  }\n\n  public playPart(options: {\n    from: number,\n    to: number,\n    callback?: () => void\n  }) {\n    this.pause();\n\n    const {from, to, callback} = options;\n    this.curFrame = from - 1;\n\n    return this.playToFrame({\n      frame: to,\n      direction: to > from ? 1 : -1,\n      callback\n    });\n  }\n\n  public playToFrame(options: {\n    frame: number,\n    speed?: number,\n    direction?: number,\n    callback?: () => void\n  }) {\n    this.pause();\n\n    const {frame, speed, callback, direction} = options;\n    this.setDirection(direction === undefined ? this.curFrame > frame ? -1 : 1 : direction);\n    speed !== undefined && this.setSpeed(speed);\n\n    const bounds = [this.curFrame, frame];\n    if(this.direction === -1) bounds.reverse();\n\n    this.loop = false;\n    this.setMinMax(bounds[0], bounds[1]);\n\n    if(this.playToFrameOnFrameCallback) {\n      this.removeEventListener('enterFrame', this.playToFrameOnFrameCallback);\n    }\n\n    if(callback) {\n      this.playToFrameOnFrameCallback = (frameNo: number) => {\n        if(frameNo === frame) {\n          this.removeEventListener('enterFrame', this.playToFrameOnFrameCallback);\n          callback();\n        }\n      };\n\n      this.addEventListener('enterFrame', this.playToFrameOnFrameCallback);\n    }\n\n    this.play();\n  }\n\n  public setColor(color: RLottieColor, renderIfPaused: boolean) {\n    this.color = color;\n\n    if(renderIfPaused && this.paused) {\n      this.renderFrame2(this.imageData.data, this.curFrame);\n    }\n  }\n\n  private setMinMax(minFrame = 0, maxFrame = this.frameCount - 1) {\n    this.minFrame = minFrame;\n    this.maxFrame = maxFrame;\n  }\n\n  public async onLoad(frameCount: number, fps: number) {\n    this.frameCount = frameCount;\n    this.fps = fps;\n    this.setMinMax();\n    if(this.initFrame !== undefined) {\n      this.initFrame = clamp(this.initFrame, this.minFrame, this.maxFrame);\n    }\n\n    const curFrame = this.resetCurrentFrame();\n\n    // * Handle 30fps stickers if 30fps set\n    if(this.fps < 60 && this.skipDelta !== 1) {\n      const diff = 60 / fps;\n      this.skipDelta = this.skipDelta / diff | 0;\n    }\n\n    this.frInterval = 1000 / this.fps / this.speed * this.skipDelta;\n    this.frThen = Date.now() - this.frInterval;\n    // this.sendQuery('renderFrame', 0);\n\n    //    ,   ()  519,\n    //   75%      ,  475, ..  100%   593,    84.\n\n    /* console.time('cache' + this.reqId);\n    for(let i = 0; i < frameCount; ++i) {\n      //if(this.removed) return;\n\n      if(i % 4) {\n        await new Promise((resolve) => {\n          delete this.listenerResults.enterFrame;\n          this.addListener('enterFrame', resolve, true);\n          this.requestFrame(i);\n        });\n      }\n    }\n\n    console.timeEnd('cache' + this.reqId); */\n    // console.log('cached');\n    /* this.el.innerHTML = '';\n    this.el.append(this.canvas);\n    return; */\n\n    !this.skipFirstFrameRendering && this.requestFrame(curFrame);\n    this.dispatchEvent('ready');\n    this.addEventListener('enterFrame', () => {\n      this.dispatchEvent('firstFrame');\n\n      if(!this.canvas[0].parentNode && this.el && !this.overrideRender) {\n        this.el.forEach((container, idx) => container.append(this.canvas[idx]));\n      }\n\n      // console.log('enterFrame firstFrame');\n\n      // let lastTime = this.frThen;\n      this.frameListener = () => {\n        if(this.paused || !this.currentMethod) {\n          return;\n        }\n\n        const time = Date.now();\n        // console.log(`enterFrame handle${this.reqId}`, time, (time - lastTime), this.frInterval);\n        /* if(Math.round(time - lastTime + this.frInterval * 0.25) < Math.round(this.frInterval)) {\n          return;\n        } */\n\n        // lastTime = time;\n\n        this.frThen = time + this.frInterval;\n        const canContinue = this.currentMethod();\n        if(!canContinue && !this.loop && this.autoplay) {\n          this.autoplay = false;\n        }\n      };\n\n      this.addEventListener('enterFrame', this.frameListener);\n      // setInterval(this.frameListener, this.frInterval);\n\n      // ! fix autoplaying since there will be no animationIntersector for it\n      if(this.group === 'none' && this.autoplay) {\n        this.play();\n      }\n    }, {once: true});\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport CAN_USE_TRANSFERABLES from '../../environment/canUseTransferables';\nimport EventListenerBase from '../../helpers/eventListenerBase';\n\nexport default class QueryableWorker extends EventListenerBase<{\n  ready: () => void,\n  frame: (reqId: number, frameNo: number, frame: Uint8ClampedArray | ImageBitmap) => void,\n  loaded: (reqId: number, frameCount: number, fps: number) => void,\n  error: (reqId: number, error: Error) => void,\n  workerError: (error: ErrorEvent) => void\n}> {\n  constructor(private worker: Worker) {\n    super();\n\n    this.worker.onerror = (error) => {\n      try {\n        this.dispatchEvent('workerError', error);\n        this.cleanup();\n        this.terminate();\n      } catch(err) {\n\n      }\n    };\n\n    this.worker.onmessage = (event) => {\n      this.dispatchEvent(event.data.queryMethodListener, ...event.data.queryMethodArguments);\n    };\n  }\n\n  public postMessage(message: any) {\n    this.worker.postMessage(message);\n  }\n\n  public terminate() {\n    this.worker.terminate();\n  }\n\n  public sendQuery(args: any[], transfer?: Transferable[]) {\n    this.worker.postMessage({\n      queryMethod: args.shift(),\n      queryMethodArguments: args\n    }, CAN_USE_TRANSFERABLES ? transfer: undefined);\n  }\n}\n","const IS_WEB_ASSEMBLY_SUPPORTED = typeof(WebAssembly) !== 'undefined';\n\nexport default IS_WEB_ASSEMBLY_SUPPORTED;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport animationIntersector from '../../components/animationIntersector';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport pause from '../../helpers/schedulers/pause';\nimport {logger, LogTypes} from '../logger';\nimport RLottiePlayer, {RLottieOptions} from './rlottiePlayer';\nimport QueryableWorker from './queryableWorker';\nimport blobConstruct from '../../helpers/blob/blobConstruct';\nimport apiManagerProxy from '../mtproto/mtprotoworker';\nimport IS_WEB_ASSEMBLY_SUPPORTED from '../../environment/webAssemblySupport';\nimport makeError from '../../helpers/makeError';\nimport App from '../../config/app';\n\nexport type LottieAssetName = 'EmptyFolder' | 'Folders_1' | 'Folders_2' |\n  'TwoFactorSetupMonkeyClose' | 'TwoFactorSetupMonkeyCloseAndPeek' |\n  'TwoFactorSetupMonkeyCloseAndPeekToIdle' | 'TwoFactorSetupMonkeyIdle' |\n  'TwoFactorSetupMonkeyPeek' | 'TwoFactorSetupMonkeyTracking' |\n  'voice_outlined2' | 'voip_filled' | 'voice_mini' | 'jolly_roger' |\n  'Gift3' | 'Gift6' | 'Gift12' | 'Folders_Shared' | 'UtyanSearch' |\n  'UtyanDiscussion' | 'UtyanLinks' | 'UtyanStories' | 'ReactionGeneric';\n\nexport class LottieLoader {\n  private loadPromise: Promise<void> = !IS_WEB_ASSEMBLY_SUPPORTED ? Promise.reject(makeError('NO_WASM')) : undefined;\n  private loaded = false;\n\n  private workersLimit = App.threads;\n  private players: {[reqId: number]: RLottiePlayer} = {};\n  private playersByCacheName: {[cacheName: string]: Set<RLottiePlayer>} = {};\n\n  private workers: QueryableWorker[] = [];\n  private curWorkerNum = 0;\n\n  private log = logger('LOTTIE', LogTypes.Error);\n\n  public getAnimation(element: HTMLElement) {\n    for(const i in this.players) {\n      if(this.players[i].el.includes(element)) {\n        return this.players[i];\n      }\n    }\n\n    return null;\n  }\n\n  public loadLottieWorkers() {\n    if(this.loadPromise) {\n      return this.loadPromise;\n    }\n\n    return this.loadPromise = new Promise((resolve, reject) => {\n      let remain = this.workersLimit;\n      for(let i = 0; i < this.workersLimit; ++i) {\n        const worker = new Worker(new URL('./rlottie.worker.ts', import.meta.url), {type: 'module'});\n        const queryableWorker = this.workers[i] = new QueryableWorker(worker);\n\n        queryableWorker.addEventListener('ready', () => {\n          this.log('worker #' + i + ' ready');\n\n          queryableWorker.addEventListener('frame', this.onFrame);\n          queryableWorker.addEventListener('loaded', this.onPlayerLoaded);\n          queryableWorker.addEventListener('error', this.onPlayerError);\n\n          --remain;\n          if(!remain) {\n            this.log('workers ready');\n            resolve();\n            this.loaded = true;\n          }\n        }, {once: true});\n\n        queryableWorker.addEventListener('workerError', (error) => {\n          reject('rlottie load error: ' + error.message);\n          this.loaded = false;\n        }, {once: true});\n      }\n    });\n  }\n\n  public makeAssetUrl(name: LottieAssetName) {\n    return 'assets/tgs/' + name + '.json';\n  }\n\n  public loadAnimationAsAsset(params: Omit<RLottieOptions, 'animationData' | 'name'>, name: LottieAssetName) {\n    // (params as RLottieOptions).name = name;\n    return this.loadAnimationFromURL(params, this.makeAssetUrl(name));\n  }\n\n  public loadAnimationDataFromURL(url: string, method: 'json'): Promise<any>;\n  public loadAnimationDataFromURL(url: string, method?: 'blob'): Promise<Blob>;\n  public loadAnimationDataFromURL(url: string, method: 'json' | 'blob' = 'blob'): Promise<Blob | any> {\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\n      return this.loadPromise as any;\n    }\n\n    this.loadLottieWorkers();\n\n    return fetch(url)\n    .then((res) => {\n      if(!res.headers || res.headers.get('content-type') === 'application/octet-stream') {\n        return res.arrayBuffer()\n        .then((data) => apiManagerProxy.invokeCrypto('gzipUncompress', data))\n        .then((arr) => blobConstruct(arr as Uint8Array, ''));\n      } else {\n        return res[method]();\n      }\n    });\n    /* .then((str) => {\n      return new Promise<string>((resolve) => setTimeout(() => resolve(str), 2e3));\n    }) */\n  }\n\n  public loadAnimationFromURLManually(name: LottieAssetName) {\n    const url = this.makeAssetUrl(name);\n    return this.loadAnimationDataFromURL(url).then((blob) => {\n      return (params: Omit<RLottieOptions, 'animationData'>) => this.loadAnimationFromURLNext(blob, params, url);\n    });\n  }\n\n  public loadAnimationFromURL(params: Omit<RLottieOptions, 'animationData'>, url: string) {\n    return this.loadAnimationDataFromURL(url).then((blob) => {\n      return this.loadAnimationFromURLNext(blob, params, url);\n    });\n  }\n\n  public loadAnimationFromURLNext(blob: Blob, params: Omit<RLottieOptions, 'animationData'>, url: string) {\n    const newParams = Object.assign(params, {animationData: blob, needUpscale: true});\n    newParams.name ||= url;\n    return this.loadAnimationWorker(newParams);\n  }\n\n  public waitForFirstFrame(player: RLottiePlayer) {\n    return Promise.race([\n      /* new Promise<void>((resolve) => {\n        player.addEventListener('firstFrame', () => {\n          setTimeout(() => resolve(), 1500);\n        }, true);\n      }) */\n      new Promise<void>((resolve) => {\n        player.addEventListener('firstFrame', resolve, {once: true});\n      }),\n      pause(2500)\n    ]).then(() => player);\n  }\n\n  public async loadAnimationWorker(params: RLottieOptions): Promise<RLottiePlayer> {\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\n      return this.loadPromise as any;\n    }\n\n    if(!this.loaded) {\n      await this.loadLottieWorkers();\n    }\n\n    const {middleware, group = ''} = params;\n    if(middleware && !middleware()) {\n      throw makeError('MIDDLEWARE');\n    }\n\n    if(params.sync) {\n      const cacheName = RLottiePlayer.CACHE.generateName(params.name, params.width, params.height, params.color, params.toneIndex);\n      const players = this.playersByCacheName[cacheName];\n      if(players?.size) {\n        return Promise.resolve(players.entries().next().value[0]);\n      }\n    }\n\n    const containers = Array.isArray(params.container) ? params.container : [params.container];\n    if(!params.width || !params.height) {\n      params.width = parseInt(containers[0].style.width);\n      params.height = parseInt(containers[0].style.height);\n    }\n\n    if(!params.width || !params.height) {\n      throw new Error('No size for sticker!');\n    }\n\n    params.group = group;\n\n    const player = this.initPlayer(containers, params);\n\n    animationIntersector.addAnimation({\n      animation: player,\n      group,\n      observeElement: player.el[0],\n      controlled: middleware,\n      liteModeKey: params.liteModeKey,\n      type: 'lottie'\n    });\n\n    params.middleware?.onDestroy(() => {\n      player.remove();\n    });\n\n    return player;\n  }\n\n  private onPlayerLoaded = (reqId: number, frameCount: number, fps: number) => {\n    const player = this.players[reqId];\n    if(!player) {\n      this.log.warn('onPlayerLoaded on destroyed player:', reqId, frameCount);\n      return;\n    }\n\n    this.log.debug('onPlayerLoaded');\n    player.onLoad(frameCount, fps);\n  };\n\n  private onFrame = (reqId: number, frameNo: number, frame: Uint8ClampedArray | ImageBitmap) => {\n    const player = this.players[reqId];\n    if(!player) {\n      this.log.warn('onFrame on destroyed player:', reqId, frameNo);\n      return;\n    }\n\n    if(player.clamped !== undefined && frame instanceof Uint8ClampedArray) {\n      player.clamped = frame;\n    }\n\n    player.renderFrame(frame, frameNo);\n  };\n\n  private onPlayerError = (reqId: number, error: Error) => {\n    const player = this.players[reqId];\n    if(!player) {\n      return;\n    }\n\n    // ! will need refactoring later, this is not the best way to remove the animation\n    const animations = animationIntersector.getAnimations(player.el[0]);\n    animations.forEach((animation) => {\n      animationIntersector.removeAnimation(animation);\n    });\n  };\n\n  public onDestroy(reqId: number) {\n    delete this.players[reqId];\n  }\n\n  public destroyWorkers() {\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\n      return;\n    }\n\n    this.workers.forEach((worker, idx) => {\n      worker.terminate();\n      this.log('worker #' + idx + ' terminated');\n    });\n\n    this.log('workers destroyed');\n    this.workers.length = 0;\n    this.curWorkerNum = 0;\n    this.loaded = false;\n    this.loadPromise = undefined;\n  }\n\n  private initPlayer(el: RLottiePlayer['el'], options: RLottieOptions) {\n    const player = new RLottiePlayer({\n      el,\n      worker: this.workers[this.curWorkerNum++],\n      options\n    });\n\n    const {reqId, cacheName} = player;\n    this.players[reqId] = player;\n\n    const playersByCacheName = cacheName ? this.playersByCacheName[cacheName] ??= new Set() : undefined;\n    if(cacheName) {\n      playersByCacheName.add(player);\n    }\n\n    if(this.curWorkerNum >= this.workers.length) {\n      this.curWorkerNum = 0;\n    }\n\n    player.addEventListener('destroy', () => {\n      this.onDestroy(reqId);\n      if(playersByCacheName.delete(player) && !playersByCacheName.size) {\n        delete this.playersByCacheName[cacheName];\n      }\n    });\n\n    player.loadFromData(options.animationData);\n\n    return player;\n  }\n}\n\nconst lottieLoader = new LottieLoader();\nMOUNT_CLASS_TO.lottieLoader = lottieLoader;\nexport default lottieLoader;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function replaceContent(elem: HTMLElement, node: string | Node) {\n  if(typeof(node) === 'string') {\n    elem.textContent = node;\n    return;\n  }\n\n  // * children.length doesn't count text nodes\n  const firstChild = elem.firstChild;\n  if(firstChild) {\n    if(elem.lastChild === firstChild) {\n      firstChild.replaceWith(node);\n    } else {\n      elem.textContent = '';\n      elem.append(node);\n    }\n  } else {\n    elem.append(node);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport IS_TOUCH_SUPPORTED from '../../environment/touchSupport';\n\nexport default function placeCaretAtEnd(el: HTMLElement, ignoreTouchCheck = false, focus = true) {\n  if(IS_TOUCH_SUPPORTED && (!ignoreTouchCheck || (document.activeElement.tagName !== 'INPUT' && !(document.activeElement as HTMLElement).isContentEditable))) {\n    return;\n  }\n\n  focus && el.focus();\n  if(el instanceof HTMLInputElement) {\n    const length = el.value.length;\n    el.selectionStart = length;\n    el.selectionEnd = length;\n  } else {\n    const range = document.createRange();\n    range.selectNodeContents(el);\n    range.collapse(false);\n    const sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n}\n\n(window as any).placeCaretAtEnd = placeCaretAtEnd;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\ntype TargetType = HTMLElement;\nexport type OnVisibilityChangeItem = {target: TargetType, visible: boolean, entry: IntersectionObserverEntry, index: number};\nexport type OnVisibilityChange = (item: OnVisibilityChangeItem) => void;\n\nexport default class VisibilityIntersector {\n  private observer: IntersectionObserver;\n  private items: Map<TargetType, boolean> = new Map();\n  private locked = false;\n\n  constructor(onVisibilityChange: OnVisibilityChange, options?: IntersectionObserverInit) {\n    this.observer = new IntersectionObserver((entries) => {\n      if(this.locked) {\n        return;\n      }\n\n      const changed: OnVisibilityChangeItem[] = [];\n\n      entries.forEach((entry, index) => {\n        const target = entry.target as TargetType;\n\n        if(this.items.get(target) === entry.isIntersecting) {\n          return;\n        } else {\n          this.items.set(target, entry.isIntersecting);\n        }\n\n        /* if(entry.isIntersecting) {\n          console.log('ooo', entry);\n        } */\n\n        /* if(this.locked) {\n          return;\n        } */\n\n        const change: typeof changed[0] = {target, visible: entry.isIntersecting, entry, index};\n\n        // ! order will be incorrect so can't use it\n        // changed[entry.isIntersecting ? 'unshift' : 'push'](change);\n        changed.push(change);\n\n        // onVisibilityChange(target, entry.isIntersecting);\n      });\n\n      changed.forEach((item) => {\n        onVisibilityChange(item);\n      });\n    }, options);\n  }\n\n  public getVisible() {\n    const items: TargetType[] = [];\n    this.items.forEach((value, key) => {\n      if(value) {\n        items.push(key);\n      }\n    });\n\n    return items;\n  }\n\n  public clearVisible() {\n    const visible = this.getVisible();\n    for(const target of visible) {\n      this.items.set(target, false);\n    }\n  }\n\n  public isVisible(target: TargetType) {\n    return this.items.get(target);\n  }\n\n  public disconnect() {\n    this.observer.disconnect();\n    this.items.clear();\n  }\n\n  public refresh() {\n    this.observer.disconnect();\n\n    // window.requestAnimationFrame(() => {\n    const targets = [...this.items.keys()];\n    for(const target of targets) {\n      // this.items.set(target, false);\n      this.observer.observe(target);\n    }\n    // });\n  }\n\n  public refreshVisible() {\n    const visible = this.getVisible();\n    for(const target of visible) {\n      this.observer.unobserve(target);\n    }\n\n    for(const target of visible) {\n      this.observer.observe(target);\n    }\n  }\n\n  public observe(target: TargetType) {\n    this.items.set(target, false);\n    this.observer.observe(target);\n  }\n\n  public unobserve(target: TargetType) {\n    this.observer.unobserve(target);\n    this.items.delete(target);\n  }\n\n  public unlock() {\n    this.locked = false;\n  }\n\n  public unlockAndRefresh() {\n    this.unlock();\n    this.refresh();\n  }\n\n  public lock() {\n    this.locked = true;\n  }\n}\n","export default function findAndSpliceAll<T>(array: Array<T>, verify: (value: T, index: number, arr: typeof array) => boolean) {\n  const out: typeof array = [];\n  let idx = -1;\n  while((idx = array.findIndex(verify)) !== -1) {\n    out.push(array.splice(idx, 1)[0]);\n  }\n\n  return out;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport indexOfAndSplice from '../helpers/array/indexOfAndSplice';\nimport {Middleware} from '../helpers/middleware';\nimport throttle from '../helpers/schedulers/throttle';\nimport {logger, LogTypes} from '../lib/logger';\n\nconst PARALLEL_LIMIT = 8;\nconst IGNORE_ERRORS: Set<ErrorType> = new Set(['NO_ENTRY_FOUND', 'STORAGE_OFFLINE', 'MIDDLEWARE', 'NO_AUTO_DOWNLOAD']);\n\nexport type LazyLoadElementBase = {\n  load: () => Promise<any>,\n  middleware?: Middleware\n};\n\nexport default class LazyLoadQueueBase {\n  public queueId = 0;\n  protected queue: Array<LazyLoadElementBase> = [];\n  protected inProcess: Set<LazyLoadElementBase> = new Set();\n\n  protected lockPromise: Promise<void> = null;\n  protected unlockResolve: () => void = null;\n\n  protected log = logger('LL', LogTypes.Error);\n  protected processQueue: () => void;\n\n  constructor(protected parallelLimit = PARALLEL_LIMIT) {\n    this.processQueue = throttle(() => this._processQueue(), 8, false);\n  }\n\n  public clear() {\n    this.inProcess.clear(); //  ,  \n\n    this.queue.length = 0;\n    // unreachable code\n    /* for(let item of this.inProcess) {\n      this.lazyLoadMedia.push(item);\n    } */\n  }\n\n  public lock() {\n    if(this.lockPromise) return;\n\n    // const perf = performance.now();\n    this.lockPromise = new Promise((resolve, reject) => {\n      this.unlockResolve = resolve;\n    });\n\n    /* if(DEBUG) {\n      this.lockPromise.then(() => {\n        this.log('was locked for:', performance.now() - perf);\n      });\n    } */\n  }\n\n  public unlock() {\n    if(!this.unlockResolve) return;\n\n    this.unlockResolve();\n    this.unlockResolve = this.lockPromise = null;\n\n    this.processQueue();\n  }\n\n  protected async processItem(item: LazyLoadElementBase) {\n    if(this.lockPromise) {\n      return;\n    }\n\n    this.inProcess.add(item);\n\n    /* if(DEBUG) {\n      this.log('will load media', this.lockPromise, item);\n    } */\n\n    try {\n      // await new Promise((resolve) => setTimeout(resolve, 2e3));\n      // await new Promise((resolve, reject) => window.requestAnimationFrame(() => window.requestAnimationFrame(resolve)));\n      // await item.load(item.div);\n      await this.loadItem(item);\n    } catch(err) {\n      if(!IGNORE_ERRORS.has((err as ApiError)?.type)) {\n        this.log.error('loadMediaQueue error:', err/* , item */);\n      }\n    }\n\n    this.inProcess.delete(item);\n\n    /* if(DEBUG) {\n      this.log('loaded media', item);\n    } */\n\n    this.processQueue();\n  }\n\n  protected loadItem(item: LazyLoadElementBase) {\n    return item.load();\n  }\n\n  protected getItem() {\n    return this.queue.shift();\n  }\n\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElementBase) {\n    this.queue[method](el);\n    this.processQueue();\n  }\n\n  protected _processQueue(item?: LazyLoadElementBase) {\n    if(!this.queue.length || this.lockPromise || (this.parallelLimit > 0 && this.inProcess.size >= this.parallelLimit)) return;\n\n    // console.log('_processQueue start');\n    // let added = 0;\n    do {\n      if(item) {\n        indexOfAndSplice(this.queue, item);\n      } else {\n        item = this.getItem();\n      }\n\n      if(item) {\n        this.processItem(item);\n      } else {\n        break;\n      }\n\n      item = null;\n      // ++added;\n    } while(this.inProcess.size < this.parallelLimit && this.queue.length);\n    // console.log('_processQueue end, added', added, this.queue.length);\n  }\n\n  public push(el: LazyLoadElementBase) {\n    this.addElement('push', el);\n  }\n\n  public unshift(el: LazyLoadElementBase) {\n    this.addElement('unshift', el);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport findAndSpliceAll from '../helpers/array/findAndSpliceAll';\nimport LazyLoadQueueBase, {LazyLoadElementBase} from './lazyLoadQueueBase';\nimport VisibilityIntersector from './visibilityIntersector';\n\nexport type LazyLoadElement = Omit<LazyLoadElementBase, 'load'> & {\n  load: (target?: HTMLElement) => Promise<any>,\n  div: HTMLElement\n  wasSeen?: boolean,\n  visible?: boolean\n};\n\nexport default class LazyLoadQueueIntersector extends LazyLoadQueueBase {\n  protected queue: Array<LazyLoadElement> = [];\n  protected inProcess: Set<LazyLoadElement> = new Set();\n\n  public intersector: VisibilityIntersector;\n  protected intersectorTimeout: number;\n\n  constructor(parallelLimit?: number) {\n    super(parallelLimit);\n  }\n\n  public lock() {\n    super.lock();\n    this.intersector.lock();\n  }\n\n  public unlock() {\n    super.unlock();\n    this.intersector.unlock();\n  }\n\n  public unlockAndRefresh() {\n    super.unlock();\n    this.intersector.unlockAndRefresh();\n  }\n\n  public clear() {\n    super.clear();\n    this.intersector.disconnect();\n  }\n\n  public refresh() {\n    this.intersector.refresh();\n  }\n\n  protected loadItem(item: LazyLoadElement) {\n    return item.load(item.div);\n  }\n\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElement) {\n    const item = this.queue.find((i) => i.div === el.div && i.load === el.load);\n    if(item) {\n      return false;\n    } else {\n      for(const item of this.inProcess) {\n        if(item.div === el.div && item.load === el.load) {\n          return false;\n        }\n      }\n    }\n\n    this.queue[method](el);\n    return true;\n  }\n\n  protected setProcessQueueTimeout() {\n    this.intersectorTimeout ??= window.setTimeout(() => {\n      this.intersectorTimeout = undefined;\n      this.processQueue();\n    }, 0);\n  }\n\n  public push(el: LazyLoadElement) {\n    super.push(el);\n  }\n\n  public unshift(el: LazyLoadElement) {\n    super.unshift(el);\n  }\n\n  public delete(el: Omit<LazyLoadElement, 'load'>) {\n    findAndSpliceAll(this.queue, (i) => i.div === el.div);\n    this.unobserve(el);\n  }\n\n  public observe(el: LazyLoadElement) {\n    this.intersector.observe(el.div);\n  }\n\n  public unobserve(el: Omit<LazyLoadElement, 'load'>) {\n    this.intersector.unobserve(el.div);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport VisibilityIntersector, {OnVisibilityChangeItem} from './visibilityIntersector';\nimport findAndSpliceAll from '../helpers/array/findAndSpliceAll';\nimport findAndSplice from '../helpers/array/findAndSplice';\nimport LazyLoadQueueIntersector, {LazyLoadElement} from './lazyLoadQueueIntersector';\nimport useHeavyAnimationCheck from '../hooks/useHeavyAnimationCheck';\n\nexport default class LazyLoadQueue extends LazyLoadQueueIntersector {\n  constructor(parallelLimit?: number, ignoreHeavyAnimation?: boolean) {\n    super(parallelLimit);\n\n    this.intersector = new VisibilityIntersector(this.onVisibilityChange);\n\n    !ignoreHeavyAnimation && useHeavyAnimationCheck(() => {\n      this.lock();\n    }, () => {\n      this.unlockAndRefresh();\n    });\n  }\n\n  private onVisibilityChange = ({target, visible}: OnVisibilityChangeItem) => {\n    // if(DEBUG) {\n    //   this.log('isIntersecting', target, visible);\n    // }\n\n    // if visible - will move to the end of visible arary\n    findAndSpliceAll(this.queue, (i) => i.div === target).forEach((item) => {\n      if(visible) {\n        item.wasSeen = true;\n      }\n\n      item.visible = visible;\n      const index = this.queue.findIndex((item) => !item.visible);\n      this.queue.splice(Math.max(0, index), 0, item);\n    });\n\n    this.setProcessQueueTimeout();\n  };\n\n  protected getItem() {\n    return findAndSplice(this.queue, (item) => item.wasSeen);\n  }\n\n  public async processItem(item: LazyLoadElement) {\n    await super.processItem(item);\n    this.intersector.unobserve(item.div);\n  }\n\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElement) {\n    const inserted = super.addElement(method, el);\n\n    if(!inserted) return false;\n\n    this.observe(el);\n    /* if(el.wasSeen) {\n      this.processQueue(el);\n    } else  */\n    el.wasSeen ??= false;\n\n    return true;\n  }\n\n  public setAllSeen() {\n    this.queue.forEach((item) => {\n      item.wasSeen = true;\n    });\n\n    this.setProcessQueueTimeout();\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n/**\n  * https://core.telegram.org/api/files#vector-thumbnails\n  */\nexport default function getPathFromBytes(bytes: Uint8Array) {\n  const lookup = 'AACAAAAHAAALMAAAQASTAVAAAZaacaaaahaaalmaaaqastava.az0123456789-,';\n\n  let path = 'M';\n  for(let i = 0, length = bytes.length; i < length; ++i) {\n    const num = bytes[i];\n\n    if(num >= (128 + 64)) {\n      path += lookup[num - 128 - 64];\n    } else {\n      if(num >= 128) {\n        path += ',';\n      } else if(num >= 64) {\n        path += '-';\n      }\n      path += '' + (num & 63);\n    }\n  }\n  path += 'z';\n\n  return path;\n}\n","// https://github.com/telegramdesktop/tdesktop/blob/543bfab24a76402992421063f1e6444f347d31fe/Telegram/SourceFiles/boxes/sticker_set_box.cpp#L75\nexport default function computeLockColor(canvas: HTMLCanvasElement) {\n  const context = canvas.getContext('2d');\n  const size = 20 * (canvas.dpr ?? 1);\n  const width = size;\n  const height = size;\n  const skipx = (canvas.width - width) / 2;\n  const margin = 0/*  * (canvas.dpr ?? 1) */;\n  const skipy = canvas.height - height - margin;\n  const imageData = context.getImageData(skipx, skipy, width, height).data;\n  let sr = 0, sg = 0, sb = 0, sa = 0;\n  for(let i = 0; i < imageData.length; i += 4) {\n    sr += imageData[i];\n    sg += imageData[i + 1];\n    sb += imageData[i + 2];\n    sa += imageData[i + 3];\n  }\n\n  const outCanvas = document.createElement('canvas');\n  outCanvas.width = size;\n  outCanvas.height = size;\n  const outContext = outCanvas.getContext('2d');\n  const color = new Uint8ClampedArray([sr * 255 / sa, sg * 255 / sa, sb * 255 / sa, 255]);\n  const rgba = `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3]})`;\n  outContext.fillStyle = rgba;\n  outContext.fillRect(0, 0, outCanvas.width, outCanvas.height);\n  outContext.fillStyle = `rgba(112, 117, 121, 0.3)`;\n  outContext.fillRect(0, 0, outCanvas.width, outCanvas.height);\n  // document.querySelector('.popup-title').append(c);\n  return outCanvas.toDataURL('image/jpeg');\n}\n","// const createdVideos: HTMLVideoElement[] = [];\nexport default function createVideo(options: {\n  pip?: boolean\n} = {}) {\n  const video = document.createElement('video');\n  if(!options.pip) video.disablePictureInPicture = true;\n  video.setAttribute('playsinline', 'true');\n  // createdVideos.push(video);\n  return video;\n}\n\n// (window as any).createdVideos = createdVideos;\n","import {IS_APPLE_MOBILE} from '../environment/userAgent';\n\nexport function shouldIgnoreVideoError(e: ErrorEvent) {\n  try {\n    const target = e.target as HTMLVideoElement;\n    const shouldIgnore = target.error.message.includes('URL safety check');\n    if(shouldIgnore) {\n      console.warn('will ignore video error', e);\n    }\n    return shouldIgnore;\n  } catch(err) {\n    return false;\n  }\n}\n\nexport default function onMediaLoad(media: HTMLMediaElement, readyState = media.HAVE_METADATA, useCanplayOnIos?: boolean) {\n  return new Promise<void>((resolve, reject) => {\n    if(media.readyState >= readyState) {\n      resolve();\n      return;\n    }\n\n    const loadEventName = IS_APPLE_MOBILE && !useCanplayOnIos ? 'loadeddata' : 'canplay';\n    const errorEventName = 'error';\n    const onLoad = () => {\n      media.removeEventListener(errorEventName, onError);\n      resolve();\n    };\n    const onError = (e: ErrorEvent) => {\n      if(shouldIgnoreVideoError(e)) {\n        return;\n      }\n\n      media.removeEventListener(loadEventName, onLoad);\n      media.removeEventListener(errorEventName, onError);\n      reject(media.error);\n    };\n    media.addEventListener(loadEventName, onLoad, {once: true});\n    media.addEventListener(errorEventName, onError);\n  });\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport onMediaLoad from '../onMediaLoad';\n\n// import { getHeavyAnimationPromise } from \"../../hooks/useHeavyAnimationCheck\";\n\nexport const loadedURLs: {[url: string]: boolean} = {};\nconst set = (elem: HTMLElement | HTMLImageElement | SVGImageElement | HTMLVideoElement, url: string) => {\n  if(elem instanceof HTMLImageElement || elem instanceof HTMLVideoElement) elem.src = url;\n  else if(elem instanceof SVGImageElement) elem.setAttributeNS(null, 'href', url);\n  else elem.style.backgroundImage = 'url(' + url + ')';\n};\n\n//    ,      ,    blob',      'load'  .\nexport default function renderImageFromUrl(\n  elem: HTMLElement | HTMLImageElement | SVGImageElement | HTMLVideoElement,\n  url: string,\n  callback?: () => void,\n  useCache = true\n) {\n  if(!url) {\n    console.error('renderImageFromUrl: no url?', elem, url);\n    callback?.();\n    return;\n  }\n\n  const isVideo = elem instanceof HTMLVideoElement;\n  if(((loadedURLs[url]/*  && false */) && useCache) || isVideo) {\n    /* if(isVideo) {\n      const source = document.createElement('source');\n      source.src = url;\n      source.type = 'video/webm';\n      elem.append(source);\n    } else  */if(elem) {\n      set(elem, url);\n    }\n\n    if(callback) {\n      if(isVideo) {\n        return onMediaLoad(elem).then(callback);\n      } else {\n        callback?.();\n      }\n      // callback && getHeavyAnimationPromise().then(() => callback());\n    }\n  } else {\n    const isImage = elem instanceof HTMLImageElement;\n    const loader = isImage ? elem : new Image();\n    // const loader = new Image();\n    // let perf = performance.now();\n\n    const onLoad = () => {\n      if(!isImage && elem) {\n        set(elem, url);\n      }\n\n      loadedURLs[url] = true;\n      // console.log('onload:', url, performance.now(), loader.naturalWidth, loader.naturalHeight);\n      // TODO:      ,       \n      // callback && getHeavyAnimationPromise().then(() => callback());\n      callback?.();\n\n      // if(loader.naturalWidth) {\n      //   const interval = setInterval(() => {\n      //     if(!loader.naturalWidth) {\n      //       const parents = getParents(loader);\n      //       console.warn('image no dimensions', loader.isConnected, parents, (parents[parents.length - 1] as HTMLElement).outerHTML, loader.src === url);\n      //     }\n      //   }, 1);\n\n      //   setTimeout(() => clearInterval(interval), 1e3);\n      // }\n    };\n\n    const onError = (err: DOMException) => {\n      if(!err.message.includes('cannot be decoded')) {\n        console.error('Render image from url failed:', err, url, loader, err.message, loader.naturalWidth);\n      }\n\n      callback?.();\n    };\n\n    loader.decoding = 'async';\n    loader.src = url;\n    return loader.decode().then(onLoad, onError);\n    // const timeout = setTimeout(() => {\n    //   console.error('not yet decoded', loader, url);\n    //   debugger;\n    // }, 1e3);\n    // decodePromise.finally(() => {\n    //   clearTimeout(timeout);\n    // });\n  }\n}\n\nexport function renderImageFromUrlPromise(\n  elem: Parameters<typeof renderImageFromUrl>[0],\n  url: string,\n  useCache?: boolean\n) {\n  return new Promise<void>((resolve) => {\n    renderImageFromUrl(elem, url, resolve, useCache);\n  });\n}\n","export default function bytesFromHex(hexString: string) {\n  const len = hexString.length;\n  const bytes = new Uint8Array(Math.ceil(len / 2));\n  let start = 0;\n\n  if(len % 2) { // read 0x581 as 0x0581\n    bytes[start++] = parseInt(hexString.charAt(0), 16);\n  }\n\n  for(let i = start; i < len; i += 2) {\n    bytes[start++] = parseInt(hexString.substr(i, 2), 16);\n  }\n\n  return bytes;\n}\n","export default function bytesToDataURL(bytes: Uint8Array, mimeType: string = 'image/jpeg') {\n  return `data:${mimeType};base64,${btoa(String.fromCharCode(...bytes))}`;\n}\n","export default function convertToUint8Array(bytes: Uint8Array | ArrayBuffer | number[] | string): Uint8Array {\n  if(bytes instanceof Uint8Array) {\n    return bytes;\n  } else if(typeof(bytes) === 'string') {\n    return new TextEncoder().encode(bytes);\n  }\n\n  return new Uint8Array(bytes);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {IS_SAFARI} from '../../environment/userAgent';\nimport bytesFromHex from './bytesFromHex';\nimport bytesToDataURL from './bytesToDataURL';\nimport convertToUint8Array from './convertToUint8Array';\n\nconst JPEG_HEADER_HEX = 'ffd8ffe000104a46494600010100000100010000ffdb004300281c1e231e19282321232d2b28303c64413c37373c7b585d4964918099968f808c8aa0b4e6c3a0aadaad8a8cc8ffcbdaeef5ffffff9bc1fffffffaffe6fdfff8ffdb0043012b2d2d3c353c76414176f8a58ca5f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8ffc00011080000000003012200021101031101ffc4001f0000010501010101010100000000000000000102030405060708090a0bffc400b5100002010303020403050504040000017d01020300041105122131410613516107227114328191a1082342b1c11552d1f02433627282090a161718191a25262728292a3435363738393a434445464748494a535455565758595a636465666768696a737475767778797a838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae1e2e3e4e5e6e7e8e9eaf1f2f3f4f5f6f7f8f9faffc4001f0100030101010101010101010000000000000102030405060708090a0bffc400b51100020102040403040705040400010277000102031104052131061241510761711322328108144291a1b1c109233352f0156272d10a162434e125f11718191a262728292a35363738393a434445464748494a535455565758595a636465666768696a737475767778797a82838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae2e3e4e5e6e7e8e9eaf2f3f4f5f6f7f8f9faffda000c03010002110311003f00';\n\nconst JPEG_HEADER = bytesFromHex(JPEG_HEADER_HEX);\nconst JPEG_TAIL = bytesFromHex('ffd9');\n\nexport function getPreviewBytesFromURL(url: string) {\n  const needle = 'base64,';\n  const sliced = url.slice(url.indexOf(needle) + needle.length);\n  const jpegBytes = [...atob(sliced)].map((char) => char.charCodeAt(0));\n\n  return new Uint8Array(jpegBytes);\n  // console.log('getPreviewBytesFromURL', bytesToHex(jpegBytes));\n\n  // const n = JPEG_HEADER_HEX.slice(-10);\n  // const one = jpegBytes[164];\n  // const two = jpegBytes[166];\n\n  // const body = jpegBytes.slice(bytesToHex(jpegBytes).indexOf(n) / 2 + n.length / 2/* JPEG_HEADER.length */, jpegBytes.length - JPEG_TAIL.length);\n  // const original = new Uint8Array([\n  //   0xFF,\n  //   one,\n  //   two,\n  //   ...body\n  // ]);\n\n  // console.log(bytesToHex(body));\n\n  // return original;\n}\n\nexport default function getPreviewURLFromBytes(bytes: Uint8Array | number[], isSticker = false) {\n  let arr: Uint8Array;\n  if(!isSticker && bytes[0] === 0x1) {\n    arr = new Uint8Array(JPEG_HEADER.concat(Array.from(bytes.slice(3)), JPEG_TAIL));\n    arr[164] = bytes[1];\n    arr[166] = bytes[2];\n  } else {\n    arr = convertToUint8Array(bytes);\n  }\n\n  let mimeType: string;\n  if(isSticker) {\n    mimeType = IS_SAFARI ? 'image/png' : 'image/webp';\n  } else {\n    mimeType = 'image/jpeg';\n  }\n\n  const dataURL = bytesToDataURL(arr, mimeType);\n  return dataURL;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../lib/appManagers/appDocsManager';\nimport type {MyPhoto} from '../lib/appManagers/appPhotosManager';\nimport {PhotoSize} from '../layer';\n// import appDownloadManager from \"../lib/appManagers/appDownloadManager\";\nimport getPreviewURLFromBytes from './bytes/getPreviewURLFromBytes';\n\nexport default function getPreviewURLFromThumb(photo: MyPhoto | MyDocument, thumb: PhotoSize.photoCachedSize | PhotoSize.photoStrippedSize, isSticker = false) {\n  // const cacheContext = appDownloadManager.getCacheContext(photo, thumb.type);\n  // return cacheContext.url || (cacheContext.url = getPreviewURLFromBytes(thumb.bytes, isSticker));\n  return getPreviewURLFromBytes(thumb.bytes, isSticker);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport deferredPromise, {CancellablePromise} from './cancellablePromise';\nimport {getHeavyAnimationPromise} from '../hooks/useHeavyAnimationCheck';\nimport {fastRaf} from './schedulers';\nimport {ArgumentTypes} from '../types';\n\ntype HeavyQueue<T extends HeavyQueue<any>> = {\n  items: ArgumentTypes<T['process']>[],\n  process: (...args: any[]) => ReturnType<T['process']>,\n  context: any,\n  promise?: CancellablePromise<ReturnType<T['process']>[]>\n};\nconst heavyQueue: HeavyQueue<any>[] = [];\nlet processingQueue = false;\n\nexport default function addHeavyTask<T extends HeavyQueue<T>>(queue: T, method: 'push' | 'unshift' = 'push') {\n  if(!queue.items.length) {\n    return Promise.resolve([]) as typeof promise;\n  }\n\n  const promise = queue.promise = deferredPromise();\n  heavyQueue[method](queue);\n  processHeavyQueue();\n\n  return promise;\n}\n\nfunction processHeavyQueue() {\n  if(!processingQueue) {\n    const queue = heavyQueue.shift();\n    timedChunk(queue).finally(() => {\n      processingQueue = false;\n      if(heavyQueue.length) {\n        processHeavyQueue();\n      }\n    });\n  }\n}\n\nfunction timedChunk<T extends HeavyQueue<T>>(queue: HeavyQueue<T>) {\n  if(!queue.items.length) {\n    queue.promise.resolve([] as any);\n    return Promise.resolve([]);\n  }\n\n  const todo = queue.items.slice();\n  const results: ReturnType<T['process']>[] = [];\n\n  return new Promise<typeof results>((resolve, reject) => {\n    const f = async() => {\n      const start = performance.now();\n\n      do {\n        await getHeavyAnimationPromise();\n        const possiblePromise = queue.process.apply(queue.context, todo.shift());\n        let realResult: typeof results[0];\n        // @ts-ignore\n        if(possiblePromise instanceof Promise) {\n          try {\n            realResult = await possiblePromise;\n          } catch(err) {\n            reject(err);\n            return;\n          }\n        } else {\n          realResult = possiblePromise;\n        }\n\n        results.push(realResult);\n      } while(todo.length > 0 && (performance.now() - start) < 6);\n\n      if(todo.length > 0) {\n        fastRaf(f);\n        // setTimeout(f, 25);\n      } else {\n        resolve(results);\n      }\n    };\n\n    fastRaf(f);\n    // setTimeout(f, 25);\n  }).then(queue.promise.resolve.bind(queue.promise), queue.promise.reject.bind(queue.promise));\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type fastBlur from '../vendor/fastBlur';\nimport addHeavyTask from './heavyQueue';\nimport IS_CANVAS_FILTER_SUPPORTED from '../environment/canvasFilterSupport';\n\nconst RADIUS = 2;\nconst ITERATIONS = 2;\n\nlet requireBlurPromise: Promise<any>;\nlet fastBlurFunc: typeof fastBlur;\nif(!IS_CANVAS_FILTER_SUPPORTED) {\n  requireBlurPromise = import('../vendor/fastBlur').then((m) => {\n    fastBlurFunc = m.default;\n  });\n} else {\n  requireBlurPromise = Promise.resolve();\n}\n\nfunction processBlurNext(\n  img: HTMLImageElement,\n  radius: number,\n  iterations: number,\n  canvas: HTMLCanvasElement = document.createElement('canvas')\n) {\n  canvas.width = img.width;\n  canvas.height = img.height;\n\n  const ctx = canvas.getContext('2d', {alpha: false});\n  if(IS_CANVAS_FILTER_SUPPORTED) {\n    ctx.filter = `blur(${radius}px)`;\n    ctx.drawImage(img, -radius * 2, -radius * 2, canvas.width + radius * 4, canvas.height + radius * 4);\n  } else {\n    ctx.drawImage(img, 0, 0);\n    fastBlurFunc(ctx, 0, 0, canvas.width, canvas.height, radius, iterations);\n  }\n\n  return canvas;\n}\n\ntype CacheValue = {canvas: HTMLCanvasElement, promise: Promise<void>};\nconst cache: Map<string, CacheValue> = new Map();\nconst CACHE_SIZE = 150;\n\nexport default function blur(dataUri: string, radius: number = RADIUS, iterations: number = ITERATIONS) {\n  if(!dataUri) {\n    throw 'no dataUri for blur: ' + dataUri;\n  }\n\n  if(cache.size > CACHE_SIZE) {\n    cache.clear();\n  }\n\n  const canvas = document.createElement('canvas');\n  canvas.className = 'canvas-thumbnail';\n\n  let cached = cache.get(dataUri);\n  if(!cached) {\n    const promise: CacheValue['promise'] = new Promise((resolve) => {\n      // return resolve(dataUri);\n      requireBlurPromise.then(() => {\n        const img = new Image();\n        img.onload = () => {\n          // if(IS_CANVAS_FILTER_SUPPORTED) {\n          // resolve(processBlurNext(img, radius, iterations));\n          // } else {\n          const promise = addHeavyTask({\n            items: [[img, radius, iterations, canvas]],\n            context: null,\n            process: processBlurNext\n          }, 'unshift');\n\n          promise.then(() => {\n            resolve();\n          });\n          // }\n        };\n        img.src = dataUri;\n      });\n    });\n\n    cache.set(dataUri, cached = {\n      canvas,\n      promise\n    });\n  } else {\n    canvas.width = cached.canvas.width;\n    canvas.height = cached.canvas.height;\n    cached.promise.then(() => {\n      canvas.getContext('2d').drawImage(cached.canvas, 0, 0, canvas.width, canvas.height);\n    });\n  }\n\n  return {\n    ...cached,\n    canvas\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {PhotoSize} from '../layer';\nimport {MyDocument} from '../lib/appManagers/appDocsManager';\nimport {MyPhoto} from '../lib/appManagers/appPhotosManager';\nimport {renderImageFromUrlPromise} from './dom/renderImageFromUrl';\nimport getPreviewURLFromThumb from './getPreviewURLFromThumb';\nimport blur from './blur';\n\nexport default function getImageFromStrippedThumb(\n  photo: MyPhoto | MyDocument,\n  thumb: PhotoSize.photoCachedSize | PhotoSize.photoStrippedSize,\n  useBlur: boolean | number,\n  url = getPreviewURLFromThumb(photo, thumb, false)\n) {\n  let element: HTMLImageElement | HTMLCanvasElement, loadPromise: Promise<void>;\n  if(!useBlur) {\n    element = new Image();\n    loadPromise = renderImageFromUrlPromise(element, url);\n  } else {\n    const result = blur(url, typeof(useBlur) === 'number' ? useBlur : undefined);\n    element = result.canvas;\n    loadPromise = result.promise;\n  }\n\n  element.classList.add('thumbnail');\n\n  return {image: element, loadPromise};\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../lib/appManagers/appDocsManager';\nimport {applyColorOnContext} from '../lib/rlottie/rlottiePlayer';\nimport rootScope from '../lib/rootScope';\nimport getStickerThumbKey from '../lib/storages/utils/thumbs/getStickerThumbKey';\nimport customProperties from './dom/customProperties';\n\nconst savingLottiePreview: {[docId: DocId]: {width: number, height: number}} = {};\n\nexport function isSavingLottiePreview(doc: MyDocument, toneIndex: number | string, width: number, height: number) {\n  const key = getStickerThumbKey(doc.id, toneIndex);\n  const saving = savingLottiePreview[key];\n  return saving && saving.width >= width && saving.height >= height;\n}\n\nlet sharedCanvas: HTMLCanvasElement, sharedContext: CanvasRenderingContext2D;\nconst createCanvas = () => {\n  rootScope.addEventListener('theme_change', () => {\n    rootScope.managers.thumbsStorage.clearColoredStickerThumbs();\n\n    for(const key in savingLottiePreview) {\n      const [, toneIndex] = key.split('-');\n      if(toneIndex && isNaN(+toneIndex)) {\n        delete savingLottiePreview[key];\n      }\n    }\n  });\n\n  sharedCanvas = document.createElement('canvas');\n  sharedContext = sharedCanvas.getContext('2d');\n};\n\nexport async function saveLottiePreview(doc: MyDocument, canvas: HTMLCanvasElement, toneIndex: number | string) {\n  const key = getStickerThumbKey(doc.id, toneIndex);\n  const {width, height} = canvas;\n  if(isSavingLottiePreview(doc, toneIndex, width, height)) {\n    return;\n  }\n\n  const saving = savingLottiePreview[key] = {\n    width,\n    height\n  };\n\n  const thumb = await rootScope.managers.thumbsStorage.getStickerCachedThumb(doc.id, toneIndex);\n  if(savingLottiePreview[key] !== saving) {\n    return;\n  }\n\n  if(thumb && thumb.w >= width && thumb.h >= height) {\n    return;\n  }\n\n  if(typeof(toneIndex) === 'string') {\n    if(!sharedCanvas) {\n      createCanvas();\n    }\n\n    sharedCanvas.width = width;\n    sharedCanvas.height = height;\n    sharedContext.drawImage(canvas, 0, 0, width, height);\n    applyColorOnContext(sharedContext, customProperties.getProperty(toneIndex), 0, 0, width, height);\n    canvas = sharedCanvas;\n  }\n\n  const promise = new Promise<Blob>((resolve) => {\n    canvas.toBlob((blob) => resolve(blob));\n  });\n\n  const blob = await promise;\n  if(savingLottiePreview[key] !== saving) {\n    return;\n  }\n\n  if(!blob) {\n    console.error('trying to save sticker preview with no blob', arguments);\n    debugger;\n    return;\n  }\n\n  rootScope.managers.thumbsStorage.saveStickerPreview(doc.id, blob, width, height, toneIndex);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport tabId from '../config/tabId';\n\nlet uploadId = 0;\nexport default function getFileNameForUpload(file: File | Blob) {\n  let fileName: string;\n  const mimeType = file?.type;\n  if(mimeType) { // the same like apiFileName in appMessagesManager for upload!\n    const ext = `${tabId}_${uploadId++}.${mimeType.split('/')[1]}`;\n\n    if(['image/jpeg', 'image/png', 'image/bmp'].indexOf(mimeType) >= 0) {\n      fileName = 'photo' + ext;\n    } else if(mimeType.indexOf('audio/') === 0 || ['video/ogg'].indexOf(mimeType) >= 0) {\n      fileName = 'audio' + ext;\n    } else if(mimeType.indexOf('video/') === 0) {\n      fileName = 'video' + ext;\n    } else {\n      fileName = 'document' + ext;\n    }\n  } else {\n    fileName = `upload-${tabId}_${uploadId++}`;\n  }\n\n  return fileName;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {Document, InputFileLocation} from '../../../../layer';\n\nexport default function getDocumentInputFileLocation(doc: Document.document, thumbSize?: string): InputFileLocation.inputDocumentFileLocation {\n  return {\n    _: 'inputDocumentFileLocation',\n    id: doc.id,\n    access_hash: doc.access_hash,\n    file_reference: doc.file_reference,\n    thumb_size: thumbSize\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {Document, PhotoSize, VideoSize} from '../../../../layer';\nimport type {DownloadOptions} from '../../../mtproto/apiFileManager';\nimport getDocumentInputFileLocation from './getDocumentInputFileLocation';\n\nexport default function getDocumentDownloadOptions(\n  doc: Document.document,\n  thumb?: PhotoSize.photoSize | Extract<VideoSize, VideoSize.videoSize>,\n  queueId?: number,\n  onlyCache?: boolean\n): DownloadOptions {\n  const inputFileLocation = getDocumentInputFileLocation(doc, thumb?.type);\n\n  let mimeType: MTMimeType;\n  if(thumb?._ === 'photoSize') {\n    mimeType = doc.sticker ? 'image/webp' : (doc.mime_type.startsWith('image/') ? doc.mime_type : 'image/jpeg');\n  } else {\n    mimeType = doc.mime_type || 'application/octet-stream';\n  }\n\n  return {\n    dcId: doc.dc_id,\n    location: inputFileLocation,\n    size: thumb ? thumb.size : doc.size,\n    mimeType,\n    fileName: doc.file_name,\n    queueId,\n    onlyCache\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {PhotoSize, InputFileLocation} from '../../../../layer';\nimport type {DownloadOptions} from '../../../mtproto/apiFileManager';\nimport type {MyDocument} from '../../appDocsManager';\nimport type {MyPhoto} from '../../appPhotosManager';\n\nexport default function getPhotoDownloadOptions(photo: MyPhoto | MyDocument, photoSize: PhotoSize, queueId?: number, onlyCache?: boolean): DownloadOptions {\n  const isDocument = photo._ === 'document';\n\n  if(!photoSize || photoSize._ === 'photoSizeEmpty') {\n    // console.error('no photoSize by photo:', photo);\n    throw new Error('photoSizeEmpty!');\n  }\n\n  // maybe it's a thumb\n  const isPhoto = !!((photoSize._ === 'photoSize' || photoSize._ === 'photoSizeProgressive') && photo.access_hash && photo.file_reference);\n  const location: InputFileLocation.inputPhotoFileLocation | InputFileLocation.inputDocumentFileLocation = {\n    _: isDocument ? 'inputDocumentFileLocation' : 'inputPhotoFileLocation',\n    id: photo.id,\n    access_hash: photo.access_hash,\n    file_reference: photo.file_reference,\n    thumb_size: photoSize.type\n  };\n\n  return {\n    dcId: photo.dc_id,\n    location,\n    size: isPhoto ? (photoSize as PhotoSize.photoSize).size : undefined,\n    mimeType: 'image/jpeg',\n    queueId,\n    onlyCache\n  };\n}\n","import {InputWebFileLocation} from '../../../../layer';\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\n\nexport default function getWebFileDownloadOptions(location: InputWebFileLocation): DownloadOptions {\n  const downloadOptions: DownloadOptions = {\n    dcId: 0,\n    location,\n    size: 0,\n    mimeType: 'image/jpeg'\n  };\n\n  // if(location._ === 'inputWebFileGeoPointLocation') {\n  //   downloadOptions.size = 512 * 1024;\n  //   downloadOptions.mimeType = 'image/jpeg';\n  // }\n\n  return downloadOptions;\n}\n","import {WebDocument} from '../../../../layer';\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\nimport getWebFileDownloadOptions from '../webFiles/getWebFileDownloadOptions';\n\nexport default function getWebDocumentDownloadOptions(webDocument: WebDocument): DownloadOptions {\n  const downloadOptions = getWebFileDownloadOptions({\n    _: 'inputWebFileLocation',\n    access_hash: (webDocument as WebDocument.webDocument).access_hash,\n    url: webDocument.url\n  });\n\n  downloadOptions.size = webDocument.size;\n  downloadOptions.mimeType = webDocument.mime_type;\n\n  return downloadOptions;\n}\n","import {WebDocument} from '../../../../layer';\n\nexport default function isWebDocument(webDocument: any): webDocument is WebDocument {\n  return !!(webDocument && (webDocument._ === 'webDocument' || webDocument._ === 'webDocumentNoProxy'));\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {getFileNameByLocation} from '../../../../helpers/fileName';\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\n\nexport default function getDownloadFileNameFromOptions(options: DownloadOptions) {\n  return getFileNameByLocation(options.location, options);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {DownloadMediaOptions, DownloadOptions} from '../../../mtproto/apiFileManager';\nimport getDocumentDownloadOptions from '../docs/getDocumentDownloadOptions';\nimport getPhotoDownloadOptions from '../photos/getPhotoDownloadOptions';\nimport getWebDocumentDownloadOptions from '../webDocs/getWebDocumentDownloadOptions';\nimport isWebDocument from '../webDocs/isWebDocument';\nimport getWebFileDownloadOptions from '../webFiles/getWebFileDownloadOptions';\nimport isWebFileLocation from '../webFiles/isWebFileLocation';\nimport getDownloadFileNameFromOptions from './getDownloadFileNameFromOptions';\n\nexport default function getDownloadMediaDetails(options: DownloadMediaOptions) {\n  const {media, thumb, queueId, onlyCache} = options;\n\n  let downloadOptions: DownloadOptions;\n  if(media._ === 'document') downloadOptions = getDocumentDownloadOptions(media, thumb as any, queueId, onlyCache);\n  else if(media._ === 'photo') downloadOptions = getPhotoDownloadOptions(media, thumb as any, queueId, onlyCache);\n  else if(isWebDocument(media)) downloadOptions = getWebDocumentDownloadOptions(media);\n  else if(isWebFileLocation(media)) downloadOptions = getWebFileDownloadOptions(media);\n\n  downloadOptions.downloadId = options.downloadId;\n\n  const fileName = getDownloadFileNameFromOptions(downloadOptions);\n  return {fileName, downloadOptions};\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function createDownloadAnchor(url: string, fileName: string, onRemove?: () => void) {\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = fileName;\n  a.target = '_blank';\n\n  a.style.position = 'absolute';\n  a.style.top = '1px';\n  a.style.left = '1px';\n\n  document.body.append(a);\n\n  try {\n    const clickEvent = document.createEvent('MouseEvents');\n    clickEvent.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    a.dispatchEvent(clickEvent);\n  } catch(e) {\n    console.error('Download click error', e);\n    try {\n      a.click();\n    } catch(e) {\n      window.open(url as string, '_blank');\n    }\n  }\n\n  setTimeout(() => {\n    a.remove();\n    onRemove && onRemove();\n  }, 100);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {DownloadMediaOptions, DownloadOptions} from '../mtproto/apiFileManager';\nimport type {AppMessagesManager} from './appMessagesManager';\nimport type {MyDocument} from './appDocsManager';\nimport deferredPromise, {CancellablePromise} from '../../helpers/cancellablePromise';\nimport {InputFile, Photo, PhotoSize} from '../../layer';\nimport getFileNameForUpload from '../../helpers/getFileNameForUpload';\nimport {AppManagers} from './managers';\nimport rootScope from '../rootScope';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport noop from '../../helpers/noop';\nimport getDownloadMediaDetails from './utils/download/getDownloadMediaDetails';\nimport getDownloadFileNameFromOptions from './utils/download/getDownloadFileNameFromOptions';\nimport indexOfAndSplice from '../../helpers/array/indexOfAndSplice';\nimport makeError from '../../helpers/makeError';\nimport createDownloadAnchor from '../../helpers/dom/createDownloadAnchor';\nimport {getFileNameByLocation} from '../../helpers/fileName';\nimport getDocumentDownloadOptions from './utils/docs/getDocumentDownloadOptions';\nimport getPhotoDownloadOptions from './utils/photos/getPhotoDownloadOptions';\nimport apiManagerProxy from '../mtproto/mtprotoworker';\n\nexport type ResponseMethodBlob = 'blob';\nexport type ResponseMethodJson = 'json';\nexport type ResponseMethod = ResponseMethodBlob | ResponseMethodJson;\n\n/* export type DownloadBlob = {promise: Promise<Blob>, controller: AbortController};\nexport type DownloadJson = {promise: Promise<any>, controller: AbortController}; */\nexport type DownloadBlob = CancellablePromise<Blob>;\nexport type DownloadUrl = CancellablePromise<string>;\nexport type DownloadJson = CancellablePromise<any>;\n// export type Download = DownloadBlob/*  | DownloadJson */;\nexport type Download = DownloadBlob | DownloadUrl/*  | DownloadJson */;\n\nexport type Progress = {done: number, fileName: string, total: number, offset: number};\nexport type ProgressCallback = (details: Progress) => void;\n\ntype DownloadType = 'url' | 'blob' | 'void' | 'disc';\n\nexport class AppDownloadManager {\n  private downloads: {[fileName: string]: {main: Download} & {[type in DownloadType]?: Download}} = {};\n  // private downloadsToDisc: {[fileName: string]: Download} = {};\n  private progress: {[fileName: string]: Progress} = {};\n  // private progressCallbacks: {[fileName: string]: Array<ProgressCallback>} = {};\n  private managers: AppManagers;\n\n  public construct(managers: AppManagers) {\n    this.managers = managers;\n    rootScope.addEventListener('download_progress', (details) => {\n      // const callbacks = this.progressCallbacks[details.fileName];\n      // if(callbacks) {\n      //   callbacks.forEach((callback) => callback(details));\n      // }\n\n      const download = this.downloads[details.fileName];\n      if(download?.main?.notifyAll) {\n        this.progress[details.fileName] = details;\n        download.main.notifyAll(details);\n      }\n    });\n  }\n\n  private getNewDeferred<T>(fileName: string, type?: DownloadType) {\n    const deferred = deferredPromise<T>();\n\n    let download = this.downloads[fileName];\n    if(!download) {\n      download = this.downloads[fileName] = {\n        main: deferred as any\n      };\n\n      deferred.cancel = () => {\n        const error = makeError('DOWNLOAD_CANCELED');\n\n        this.managers.apiFileManager.cancelDownload(fileName);\n\n        deferred.reject(error);\n        deferred.cancel = noop;\n      };\n\n      deferred.catch(() => {\n        this.clearDownload(fileName, type);\n      }).finally(() => {\n        delete this.progress[fileName];\n        // delete this.progressCallbacks[fileName];\n      });\n    } else {\n      const main = download.main;\n      (['cancel', 'addNotifyListener', 'notify', 'notifyAll'] as (keyof CancellablePromise<void>)[]).forEach((key) => {\n        if(!main[key]) {\n          return;\n        }\n\n        // @ts-ignore\n        deferred[key] = main[key].bind(main);\n      });\n    }\n\n    const haveToClear = type === 'disc';\n    if(haveToClear) {\n      deferred.catch(noop).finally(() => {\n        this.clearDownload(fileName, type);\n      });\n    }\n\n    return download[type] = deferred as any;\n  }\n\n  public getNewDeferredForUpload<T extends Promise<any>>(fileName: string, promise: T) {\n    const deferred: CancellablePromise<Awaited<T>> = this.getNewDeferred<InputFile>(fileName);\n    promise.then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\n\n    deferred.finally(() => {\n      this.clearDownload(fileName);\n    });\n\n    return deferred;\n  }\n\n  private clearDownload(fileName: string, type?: DownloadType) {\n    const downloads = this.downloads[fileName];\n    if(!downloads) {\n      return;\n    }\n\n    delete downloads[type];\n\n    const length = Object.keys(downloads).length;\n    if(!length || (downloads.main && length === 1)) {\n      delete this.downloads[fileName];\n    }\n  }\n\n  public getUpload(fileName: string): ReturnType<AppMessagesManager['sendFile']>['promise'] {\n    let deferred: CancellablePromise<any> = this.getDownload(fileName);\n    if(deferred) {\n      return deferred;\n    }\n\n    deferred = this.getNewDeferred(fileName);\n    this.managers.appMessagesManager.getUploadPromise(fileName).then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\n    return deferred;\n  }\n\n  /* public fakeDownload(fileName: string, value: Blob | string) {\n    const deferred = this.getNewDeferred<Blob>(fileName);\n    if(typeof(value) === 'string') {\n      fetch(value)\n      .then((response) => response.blob())\n      .then((blob) => deferred.resolve(blob));\n    } else {\n      deferred.resolve(value);\n    }\n\n    return deferred;\n  } */\n\n  private d(fileName: string, getPromise: () => Promise<any>, type?: DownloadType) {\n    let deferred = this.getDownload(fileName, type);\n    if(deferred) return deferred;\n\n    deferred = this.getNewDeferred<Blob>(fileName, type);\n    getPromise().then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\n    return deferred;\n  }\n\n  public download(options: DownloadOptions): DownloadBlob {\n    const fileName = getDownloadFileNameFromOptions(options);\n    return this.d(fileName, () => this.managers.apiFileManager.download(options), 'blob') as any;\n  }\n\n  public downloadMedia(options: DownloadMediaOptions, type: DownloadType = 'blob', promiseBefore?: Promise<any>): DownloadBlob {\n    const {downloadOptions, fileName} = getDownloadMediaDetails(options);\n\n    return this.d(fileName, () => {\n      let cb: any;\n      if(type === 'url') {\n        cb = this.managers.apiFileManager.downloadMediaURL;\n      } else if(type === 'void'/*  || type === 'disc' */) {\n        cb = this.managers.apiFileManager.downloadMediaVoid;\n      } else /* if(type === 'blob') */ {\n        cb = this.managers.apiFileManager.downloadMedia;\n      }\n\n      if(promiseBefore) {\n        return promiseBefore.then(() => cb(options));\n      }\n\n      return cb(options);\n    }, type) as any;\n  }\n\n  public downloadMediaURL(options: DownloadMediaOptions): DownloadUrl {\n    return this.downloadMedia(options, 'url') as any;\n  }\n\n  public downloadMediaVoid(options: DownloadMediaOptions): DownloadBlob {\n    return this.downloadMedia(options, 'void');\n  }\n\n  public upload(file: File | Blob, fileName?: string, promise?: Promise<any>) {\n    if(!fileName) {\n      fileName = getFileNameForUpload(file);\n    }\n\n    if(!promise) {\n      promise = this.managers.apiFileManager.upload({file, fileName});\n    }\n\n    const deferred = this.getNewDeferredForUpload(fileName, promise);\n    return deferred as any as CancellablePromise<InputFile>;\n  }\n\n  public getDownload(fileName: string, type?: DownloadType) {\n    const d = this.downloads[fileName];\n    return d && d[type];\n  }\n\n  // public addProgressCallback(fileName: string, callback: ProgressCallback) {\n  //   const progress = this.progress[fileName];\n  //   (this.progressCallbacks[fileName] ?? (this.progressCallbacks[fileName] = [])).push(callback);\n\n  //   if(progress) {\n  //     callback(progress);\n  //   }\n  // }\n\n  public downloadToDisc(options: DownloadMediaOptions, justAttach?: boolean) {\n    const media = options.media;\n    const isDocument = media._ === 'document';\n    if(!isDocument && !options.thumb) {\n      options.thumb = (media as Photo.photo).sizes.slice().pop() as PhotoSize.photoSize;\n    }\n\n    // const {fileName: cacheFileName} = getDownloadMediaDetails(options);\n    // if(justAttach) {\n    //   const promise = this.downloadsToDisc[cacheFileName];\n    //   if(promise) {\n    //     return promise;\n    //   }\n    // }\n\n    // const {downloadOptions, fileName} = getDownloadMediaDetails(options);\n    // if(downloadOptions.size && downloadOptions.size > MAX_FILE_SAVE_SIZE) {\n    const id = '' + (Math.random() * 0x7FFFFFFF | 0);\n    // const id = 'test';\n    const url = `download/${id}`;\n    options.downloadId = id;\n\n    const pingPromise = apiManagerProxy.pingServiceWorkerWithIframe();\n\n    const promise = this.downloadMedia(options, 'disc', pingPromise);\n    // this.downloadsToDisc[cacheFileName] = promise;\n\n    if(justAttach) {\n      return promise;\n    }\n\n    const iframe = document.createElement('iframe');\n    iframe.hidden = true;\n\n    pingPromise.then(() => {\n      iframe.src = url;\n      document.body.append(iframe);\n    });\n\n    // createDownloadAnchor(url, 'asd.txt');\n\n    // const events = [\n    //   'emptied',\n    //   'abort',\n    //   'suspend',\n    //   'reset',\n    //   'error',\n    //   'ended',\n    //   'load'\n    // ].forEach((event) => {\n    //   iframe.addEventListener(event, () => alert(event));\n    //   iframe.contentWindow.addEventListener(event, () => alert(event));\n    // });\n\n    let element: HTMLElement, hadProgress = false;\n    const onProgress = () => {\n      if(hadProgress) {\n        return;\n      }\n\n      hadProgress = true;\n      element = iframe;\n\n      indexOfAndSplice(promise.listeners, onProgress);\n    };\n\n    promise.addNotifyListener(onProgress);\n    promise.then((blob) => {\n      if(!blob) {\n        return;\n      }\n\n      const url = URL.createObjectURL(blob);\n      const downloadOptions = isDocument ?\n        getDocumentDownloadOptions(media) :\n        getPhotoDownloadOptions(media as any, options.thumb as PhotoSize.photoSize);\n      const fileName = (options.media as MyDocument).file_name || getFileNameByLocation(downloadOptions.location);\n      createDownloadAnchor(url, downloadOptions.fileName || fileName, () => {\n        URL.revokeObjectURL(url);\n      });\n    }).catch(noop).finally(() => {\n      if(!hadProgress) {\n        onProgress();\n      }\n\n      setTimeout(() => {\n        element?.remove();\n      }, 1000);\n\n      // if(this.downloadsToDisc[cacheFileName] === promise) {\n      //   delete this.downloadsToDisc[cacheFileName];\n      // }\n    });\n\n    return promise;\n  }\n}\n\nconst appDownloadManager = new AppDownloadManager();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.appDownloadManager = appDownloadManager);\nexport default appDownloadManager;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../../appDocsManager';\nimport type {MyPhoto} from '../../appPhotosManager';\nimport type {PhotoSize, VideoSize, WebDocument} from '../../../../layer';\nimport calcImageInBox from '../../../../helpers/calcImageInBox';\nimport {THUMB_TYPE_FULL} from '../../../mtproto/mtproto_config';\n\nexport default function choosePhotoSize(\n  photo: MyPhoto | MyDocument | WebDocument,\n  boxWidth = 0,\n  boxHeight = 0,\n  useBytes = false,\n  pushDocumentSize = false\n) {\n  if(window.devicePixelRatio > 1) {\n    boxWidth *= 2;\n    boxHeight *= 2;\n  }\n\n  /*\n  s box 100x100\n  m box 320x320\n  x box 800x800\n  y box 1280x1280\n  w box 2560x2560\n  a crop  160x160\n  b crop  320x320\n  c crop  640x640\n  d crop  1280x1280 */\n\n  let sizes: PhotoSize[] = (photo as MyPhoto).sizes || (photo as MyDocument).thumbs as PhotoSize[];\n  let bestPhotoSize: typeof sizes[0] = {_: 'photoSizeEmpty', type: THUMB_TYPE_FULL};\n  if(pushDocumentSize && sizes && photo._ !== 'photo') {\n    sizes = sizes.concat({\n      _: 'photoSize',\n      w: photo.w,\n      h: photo.h,\n      size: photo.size,\n      type: THUMB_TYPE_FULL\n    });\n  }\n\n  if(sizes?.length) {\n    for(let i = 0, length = sizes.length; i < length; ++i) {\n      const photoSize = sizes[i];\n      if(!('w' in photoSize) && !('h' in photoSize)) continue;\n\n      bestPhotoSize = photoSize;\n\n      const size = calcImageInBox(photoSize.w, photoSize.h, boxWidth, boxHeight);\n      if(size.width >= boxWidth || size.height >= boxHeight) {\n        break;\n      }\n    }\n\n    if(useBytes && bestPhotoSize._ === 'photoSizeEmpty' && sizes[0]._ === 'photoStrippedSize') {\n      bestPhotoSize = sizes[0];\n    }\n  }\n\n  return bestPhotoSize;\n}\n","import {MyDocument} from '../../appDocsManager';\nimport {VideoSize} from '../../../../layer';\n\nexport default function getStickerEffectThumb(doc: MyDocument) {\n  return doc.video_thumbs?.[0] as Extract<VideoSize, VideoSize.videoSize>;\n}\n","// https://github.com/twitter/twemoji-parser/blob/master/src/lib/regex.js\n\nexport function encodeEmoji(emojiText: string) {\n  const codepoints = toCodePoints(removeVS16s(emojiText)).join('-');\n  return codepoints;\n}\n\nconst vs16RegExp = /\\uFE0F/g;\n// avoid using a string literal like '\\u200D' here because minifiers expand it inline\nconst zeroWidthJoiner = String.fromCharCode(0x200d);\n\nconst removeVS16s = (rawEmoji: string) => (rawEmoji.indexOf(zeroWidthJoiner) < 0 ? rawEmoji.replace(vs16RegExp, '') : rawEmoji);\n\nexport function toCodePoints(unicodeSurrogates: string): Array<string> {\n  const points = [];\n  let char = 0;\n  let previous = 0;\n  let i = 0;\n  while(i < unicodeSurrogates.length) {\n    char = unicodeSurrogates.charCodeAt(i++);\n    if(previous) {\n      points.push((0x10000 + ((previous - 0xd800) << 10) + (char - 0xdc00)).toString(16));\n      previous = 0;\n    } else if(char > 0xd800 && char <= 0xdbff) {\n      previous = char;\n    } else {\n      points.push(char.toString(16));\n    }\n  }\n\n  if(points.length && points[0].length === 2) {\n    points[0] = '00' + points[0];\n  }\n\n  return points;\n}\n\nexport function getEmojiToneIndex(input: string) {\n  const match = input.match(/[\\uDFFB-\\uDFFF]/);\n  return match ? 5 - (57343 - match[0].charCodeAt(0)) : 0;\n}\n\nconst VIRTUAL_COUNTRIES_EMOJIS: Map<string, string> = new Map([\n  ['FT', '']\n]);\n\nexport function getCountryEmoji(iso2: string) {\n  return VIRTUAL_COUNTRIES_EMOJIS.get(iso2) ??\n    String.fromCharCode(55356, 56741 + iso2.charCodeAt(0), 55356, 56741 + iso2.charCodeAt(1));\n}\n\nexport function emojiFromCodePoints(codePoints: string) {\n  return codePoints.split('-').reduce((prev, curr) => prev + String.fromCodePoint(parseInt(curr, 16)), '');\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport indexOfAndSplice from './array/indexOfAndSplice';\nimport makeError from './makeError';\n\nexport type Middleware = {\n  (): boolean;\n  create(): MiddlewareHelper;\n  onClean: (callback: VoidFunction) => void;\n  onDestroy: (callback: VoidFunction) => void;\n};\n\nconst createDetails = (): {\n  cleaned?: boolean,\n  inner: MiddlewareHelper[],\n  onCleanCallbacks: VoidFunction[],\n  middleware?: Middleware\n} => ({\n  cleaned: false,\n  inner: [],\n  onCleanCallbacks: []\n});\n\nconst MIDDLEWARE_ERROR = makeError('MIDDLEWARE');\n\n// * onClean == cancel promises, etc\n// * onDestroy == destructor\nexport class MiddlewareHelper {\n  private details = createDetails();\n  private onDestroyCallbacks: VoidFunction[] = [];\n  private parent: MiddlewareHelper;\n  private destroyed: boolean;\n\n  public clean() {\n    const details = this.details;\n    details.cleaned = true;\n    details.inner.splice(0, details.inner.length).forEach((helper) => helper.destroy());\n    details.onCleanCallbacks.splice(0, details.onCleanCallbacks.length).forEach((callback) => callback());\n    details.middleware = undefined;\n    this.details = createDetails();\n  }\n\n  public destroy() {\n    this.destroyed = true;\n    this.clean();\n    this.onDestroyCallbacks.splice(0, this.onDestroyCallbacks.length).forEach((callback) => callback());\n\n    if(this.parent) {\n      indexOfAndSplice(this.parent.details.inner, this);\n      this.parent = undefined;\n    }\n  }\n\n  private createMiddlewareForDetails(details: ReturnType<typeof createDetails>, additionalCallback?: () => boolean) {\n    const middleware: Middleware = () => {\n      return !details.cleaned && (!additionalCallback || additionalCallback());\n    };\n\n    middleware.create = () => {\n      if(!middleware()) throw MIDDLEWARE_ERROR;\n      const helper = getMiddleware();\n      helper.parent = this;\n      details.inner.push(helper);\n      return helper;\n    };\n\n    middleware.onClean = (callback) => {\n      if(!middleware()) return callback();\n      details.onCleanCallbacks.push(callback);\n    };\n\n    middleware.onDestroy = this.onDestroy;\n\n    return middleware;\n  }\n\n  public get(additionalCallback?: () => boolean) {\n    const details = this.details;\n    if(details.cleaned) {\n      return this.createMiddlewareForDetails(details);\n    }\n\n    if(additionalCallback) {\n      return this.createMiddlewareForDetails(details, additionalCallback);\n    }\n\n    return details.middleware ??= this.createMiddlewareForDetails(details);\n  }\n\n  public onDestroy = (callback: VoidFunction) => {\n    if(this.destroyed) return callback();\n    this.onDestroyCallbacks.push(callback);\n  };\n}\n\n// * will change .cleaned and new instance will be created\nexport function getMiddleware() {\n  return new MiddlewareHelper();\n}\n","// * Jolly Cobra's schedulers\n\nimport {AnyToVoidFunction} from '../../types';\n\nexport default function throttleWith<F extends AnyToVoidFunction>(schedulerFn: AnyToVoidFunction, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if(!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        // @ts-ignore\n        fn(...args);\n      });\n    }\n  };\n}\n","// * Jolly Cobra's schedulers\n\nimport {AnyToVoidFunction} from '../../types';\nimport {fastRaf} from '../schedulers';\nimport throttleWith from './throttleWith';\n\nexport default function throttleWithRaf<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(fastRaf, fn);\n}\n","let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined\n};\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: `${sharedConfig.context.id}${sharedConfig.context.count++}-`,\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceFactory = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nconst [transPending, setTransPending] = /*@__PURE__*/createSignal(false);\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    root = unowned ? UNOWNED : {\n      owned: null,\n      cleanups: null,\n      context: null,\n      owner: detachedOwner === undefined ? owner : detachedOwner\n    },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(() => {\n      fn ? fn() : untrack(onInvalidate);\n      fn = undefined;\n    }, undefined, false, 0),\n    s = SuspenseContext && lookup(Owner, SuspenseContext.id);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if (arguments.length === 2 && typeof pFetcher === \"object\" || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = (\"initialValue\" in options),\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = `${sharedConfig.context.id}${sharedConfig.context.count++}`;\n    let v;\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;else if (sharedConfig.load && (v = sharedConfig.load(id))) initP = v[0];\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      key !== undefined && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated) queueMicrotask(() => options.onHydrated(key, {\n        value: v\n      }));\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && lookup(Owner, SuspenseContext.id),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p = initP !== NO_INIT ? initP : untrack(() => fetcher(lookup, {\n      value: value(),\n      refetching\n    }));\n    if (typeof p !== \"object\" || !(p && \"then\" in p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    scheduled = true;\n    queueMicrotask(() => scheduled = false);\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(v => loadEnd(p, v, undefined, lookup), e => loadEnd(p, undefined, castError(e), lookup));\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));else load(false);\n  return [read, {\n    refetch: load,\n    mutate: setValue\n  }];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(() => node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  const [deferred, setDeferred] = createSignal(node.value, options);\n  updateComputation(node);\n  setDeferred(() => node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const [key, val] of subs.entries()) if (fn(key, v) !== fn(key, p)) {\n      for (const c of val.values()) {\n        c.state = STALE;\n        if (c.pure) Updates.push(c);else Effects.push(c);\n      }\n    }\n    return v;\n  }, undefined, true, STALE);\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if (l = subs.get(key)) l.add(listener);else subs.set(key, l = new Set([listener]));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(key, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return undefined;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) ;else if (Owner.context === null) Owner.context = {\n    [ERROR]: [fn]\n  };else if (!Owner.context[ERROR]) Owner.context[ERROR] = [fn];else Owner.context[ERROR].push(fn);\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t = Transition || (Transition = {\n        sources: new Set(),\n        effects: [],\n        promises: new Set(),\n        disposed: new Set(),\n        queue: new Set(),\n        running: true\n      });\n      t.done || (t.done = new Promise(res => t.resolve = res));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  let ctx;\n  return (ctx = lookup(Owner, context.id)) !== undefined ? ctx : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext({}));\n}\nfunction enableExternalSource(factory) {\n  if (ExternalSourceFactory) {\n    const oldFactory = ExternalSourceFactory;\n    ExternalSourceFactory = (fn, trigger) => {\n      const oldSource = oldFactory(fn, trigger);\n      const source = factory(x => oldSource.track(x), trigger);\n      return {\n        track: x => source.track(x),\n        dispose() {\n          source.dispose();\n          oldSource.dispose();\n        }\n      };\n    };\n  } else {\n    ExternalSourceFactory = factory;\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current = Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || !isComp && Transition.sources.has(node)) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false) ;\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const owner = Owner,\n    listener = Listener,\n    time = ExecCount;\n  Listener = Owner = node;\n  runComputation(node, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n  Listener = listener;\n  Owner = owner;\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null) ;else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceFactory) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceFactory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceFactory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    } else if (sharedConfig.effects) {\n      queue = [...sharedConfig.effects, ...queue];\n      userLength += sharedConfig.effects.length;\n      delete sharedConfig.effects;\n    }\n    setHydrateContext();\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount)) runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;else o.state = PENDING;\n      if (o.pure) Updates.push(o);else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;else node.state = 0;\n  node.context = null;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, owner && owner.owner || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && lookup(owner, ERROR);\n  const error = castError(err);\n  if (!fns) {\n    console.error('solid error', error);\n    return;\n  }\n  if (Effects) Effects.push({\n    fn() {\n      runErrors(error, fns, owner);\n    },\n    state: STALE\n  });else runErrors(error, fns, owner);\n}\nfunction lookup(owner, key) {\n  return owner ? owner.context && owner.context[key] !== undefined ? owner.context[key] : lookup(owner.owner, key) : undefined;\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(() => res = untrack(() => {\n      Owner.context = {\n        [id]: props.value\n      };\n      return children(() => props.children);\n    }), undefined);\n    return res;\n  };\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler = typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => \"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub());\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newLen = newItems.length,\n        newIndices,\n        newIndicesNext,\n        temp,\n        tempdisposers,\n        tempIndexes,\n        start,\n        end,\n        newEnd,\n        item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n        for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, len = newLen);\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [];\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return mapped = mapped.slice(0, len);\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== undefined) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || !!s && $PROXY in s;\n    sources[i] = typeof s === \"function\" ? (proxy = true, createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy({\n      get(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          const v = resolveSource(sources[i])[property];\n          if (v !== undefined) return v;\n        }\n      },\n      has(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          if (property in resolveSource(sources[i])) return true;\n        }\n        return false;\n      },\n      keys() {\n        const keys = [];\n        for (let i = 0; i < sources.length; i++) keys.push(...Object.keys(resolveSource(sources[i])));\n        return [...new Set(keys)];\n      }\n    }, propTraps);\n  }\n  const target = {};\n  const sourcesMap = {};\n  const defined = new Set();\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i = 0, length = sourceKeys.length; i < length; i++) {\n      const key = sourceKeys[i];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined.has(key)) {\n        if (desc.get) {\n          defined.add(key);\n          Object.defineProperty(target, key, {\n            enumerable: true,\n            configurable: true,\n            get: resolveSources.bind(sourcesMap[key] = [desc.get.bind(source)])\n          });\n        } else {\n          if (desc.value !== undefined) defined.add(key);\n          target[key] = desc.value;\n        }\n      } else {\n        const sources = sourcesMap[key];\n        if (sources) {\n          if (desc.get) {\n            sources.push(desc.get.bind(source));\n          } else if (desc.value !== undefined) {\n            sources.push(() => desc.value);\n          }\n        } else if (target[key] === undefined) target[key] = desc.value;\n      }\n    }\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if ($PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map(k => {\n      return new Proxy({\n        get(property) {\n          return k.includes(property) ? props[property] : undefined;\n        },\n        has(property) {\n          return k.includes(property) && property in props;\n        },\n        keys() {\n          return k.filter(property => property in props);\n        }\n      }, propTraps);\n    });\n    res.push(new Proxy({\n      get(property) {\n        return blocked.has(property) ? undefined : props[property];\n      },\n      has(property) {\n        return blocked.has(property) ? false : property in props;\n      },\n      keys() {\n        return Object.keys(props).filter(k => !blocked.has(k));\n      }\n    }, propTraps));\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc = !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc ? objects[objectIndex][propName] = desc.value : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc ? otherObject[propName] = desc.value : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then(mod => {\n        setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() => (Comp = comp()) && untrack(() => {\n      if (false) ;\n      if (!ctx) return Comp(props);\n      const c = sharedConfig.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      setHydrateContext(c);\n      return r;\n    }));\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => comp = () => mod.default), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? `${ctx.id}${ctx.count++}` : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => keyed ? a === b : !a === !b\n  });\n  return createMemo(() => {\n    const c = condition();\n    if (c) {\n      const child = props.children;\n      const fn = typeof child === \"function\" && child.length > 0;\n      return fn ? untrack(() => child(keyed ? c : () => {\n        if (!untrack(condition)) throw narrowedError(\"Show\");\n        return props.when;\n      })) : child;\n    }\n    return props.fallback;\n  }, undefined, undefined);\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) => a[0] === b[0] && (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(() => {\n      let conds = conditions();\n      if (!Array.isArray(conds)) conds = [conds];\n      for (let i = 0; i < conds.length; i++) {\n        const c = conds[i].when;\n        if (c) {\n          keyed = !!conds[i].keyed;\n          return [i, c, conds[i]];\n        }\n      }\n      return [-1];\n    }, undefined, {\n      equals\n    });\n  return createMemo(() => {\n    const [index, when, cond] = evalConditions();\n    if (index < 0) return props.fallback;\n    const c = cond.children;\n    const fn = typeof c === \"function\" && c.length > 0;\n    return fn ? untrack(() => c(keyed ? when : () => {\n      if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n      return cond.when;\n    })) : c;\n  }, undefined, undefined);\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  let v;\n  if (sharedConfig.context && sharedConfig.load && (v = sharedConfig.load(sharedConfig.context.id + sharedConfig.context.count))) err = v[0];\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(() => {\n    let e;\n    if (e = errored()) {\n      const f = props.fallback;\n      return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n    }\n    return catchError(() => props.children, setErrored);\n  }, undefined, undefined);\n}\n\nconst suspenseListEquals = (a, b) => a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(prev => {\n    const reveal = props.revealOrder,\n      tail = props.tail,\n      {\n        showContent = true,\n        showFallback = true\n      } = show ? show() : {},\n      reg = registry(),\n      reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = reg.every(inFallback => !inFallback());\n      const res = reg.map(() => ({\n        showContent: all && showContent,\n        showFallback\n      }));\n      res.inFallback = !all;\n      return res;\n    }\n    let stop = false;\n    let inFallback = prev.inFallback;\n    const res = [];\n    for (let i = 0, len = reg.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n        s = reg[n]();\n      if (!stop && !s) {\n        res[n] = {\n          showContent,\n          showFallback\n        };\n      } else {\n        const next = !stop;\n        if (next) inFallback = true;\n        res[n] = {\n          showContent: next,\n          showFallback: !tail || next && tail === \"collapsed\" ? showFallback : false\n        };\n        stop = true;\n      }\n    }\n    if (!stop) inFallback = false;\n    res.inFallback = inFallback;\n    return res;\n  }, {\n    inFallback: false\n  });\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.context.id + sharedConfig.context.count;\n    let ref = sharedConfig.load(key);\n    if (ref && (p = ref[0]) && p !== \"$$f\") {\n      if (typeof p !== \"object\" || !(\"then\" in p)) p = Promise.resolve(p);\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(err => {\n        if (err || sharedConfig.done) {\n          err && (error = err);\n          return set();\n        }\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return flicker = undefined;\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            {\n              showContent = true,\n              showFallback = true\n            } = show ? show() : {};\n          if ((!inFallback || p && p !== \"$$f\") && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"f\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport { $DEVCOMP, $PROXY, $TRACK, DEV, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, batch, cancelCallback, catchError, children, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, createUniqueId, enableExternalSource, enableHydration, enableScheduling, equalFn, from, getListener, getOwner, indexArray, lazy, mapArray, mergeProps, observable, on, onCleanup, onError, onMount, requestCallback, resetErrorBoundaries, runWithOwner, sharedConfig, splitProps, startTransition, untrack, useContext, useTransition };\n","import {createSignal, Setter} from 'solid-js';\n\nexport default function createUnifiedSignal<T = any>(...args: Partial<Parameters<typeof createSignal<T>>>) {\n  const [getter, setter] = createSignal<T>(...args);\n  return <A extends Parameters<Setter<T>>>(...args: Partial<A>) => {\n    // @ts-ignore\n    if(args.length === 0) {\n      return getter();\n    }\n\n    // @ts-ignore\n    return setter(...args);\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport {IS_WORKER} from './context';\nimport createUnifiedSignal from './solid/createUnifiedSignal';\n\nexport class WindowSize {\n  private _width: ReturnType<typeof createUnifiedSignal<number>>;\n  private _height: ReturnType<typeof createUnifiedSignal<number>>;\n  // private rAF: number;\n  private viewport: VisualViewport | Window;\n\n  constructor() {\n    if(IS_WORKER) {\n      return;\n    }\n\n    this._width = createUnifiedSignal();\n    this._height = createUnifiedSignal();\n\n    this.viewport = /* 'visualViewport' in window ? window.visualViewport :  */window;\n    const set = () => {\n      this.setDimensions();\n\n      // if(this.width === undefined) {\n      //   this.setDimensions();\n      //   return;\n      // }\n\n      // if(this.rAF) window.cancelAnimationFrame(this.rAF);\n      // this.rAF = window.requestAnimationFrame(() => {\n      //   this.rAF = 0;\n\n      //   batch(() => {\n      //     this.setDimensions();\n      //   });\n      // });\n    };\n    this.viewport.addEventListener('resize', set);\n    set();\n  }\n\n  private setDimensions() {\n    const w = this.viewport;\n    this._width((w as VisualViewport).width || (w as Window).innerWidth);\n    this._height((w as VisualViewport).height || (w as Window).innerHeight);\n  }\n\n  public get width() {\n    return this._width();\n  }\n\n  public get height() {\n    return this._height();\n  }\n}\n\nconst windowSize = new WindowSize();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.windowSize = windowSize);\nexport default windowSize;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../../lib/appManagers/appDocsManager';\nimport IS_VIBRATE_SUPPORTED from '../../environment/vibrateSupport';\nimport assumeType from '../../helpers/assumeType';\nimport isInDOM from '../../helpers/dom/isInDOM';\nimport makeError from '../../helpers/makeError';\nimport {getMiddleware, Middleware} from '../../helpers/middleware';\nimport throttleWithRaf from '../../helpers/schedulers/throttleWithRaf';\nimport windowSize from '../../helpers/windowSize';\nimport {PhotoSize, VideoSize} from '../../layer';\nimport {AppManagers} from '../../lib/appManagers/managers';\nimport RLottiePlayer from '../../lib/rlottie/rlottiePlayer';\nimport Scrollable from '../scrollable';\nimport wrapSticker from './sticker';\n\nexport const emojiAnimationContainer = document.createElement('div');\nemojiAnimationContainer.classList.add('emoji-animation-container');\n\nconst NO_UNMOUNT = false;\n\nexport default function wrapStickerAnimation({\n  size,\n  stickerSize,\n  doc,\n  middleware,\n  target,\n  side,\n  skipRatio,\n  play,\n  managers,\n  fullThumb,\n  withRandomOffset,\n  relativeEffect,\n  loopEffect,\n  onUnmount,\n  scrollable,\n  textColor\n}: {\n  size: number,\n  stickerSize?: number,\n  doc: MyDocument,\n  middleware?: Middleware,\n  target: HTMLElement,\n  side: 'left' | 'center' | 'right',\n  skipRatio?: number,\n  play: boolean,\n  managers?: AppManagers,\n  fullThumb?: PhotoSize | Extract<VideoSize, VideoSize.videoSize>,\n  withRandomOffset?: boolean,\n  relativeEffect?: boolean,\n  loopEffect?: boolean,\n  onUnmount?: () => void,\n  scrollable?: Scrollable,\n  textColor?: string\n}) {\n  const animationDiv = document.createElement('div');\n  animationDiv.classList.add('emoji-animation');\n\n  // const size = 280;\n  animationDiv.style.width = size + 'px';\n  animationDiv.style.height = size + 'px';\n\n  let animation: RLottiePlayer;\n  const unmountAnimation = () => {\n    if(NO_UNMOUNT) {\n      return;\n    }\n\n    middlewareHelper.destroy();\n    const a = animation;\n    animation = undefined;\n    a?.remove();\n    animationDiv.remove();\n    onScroll && scrollable.container.removeEventListener('scroll', onScroll);\n    onUnmount?.();\n  };\n\n  const middlewareHelper = middleware?.create() ?? getMiddleware();\n  middleware = middlewareHelper.get();\n\n  const stickerPromise = wrapSticker({\n    div: animationDiv,\n    doc,\n    middleware,\n    withThumb: false,\n    needFadeIn: false,\n    loop: !!loopEffect,\n    width: stickerSize || size,\n    height: stickerSize || size,\n    play,\n    group: 'none',\n    skipRatio,\n    managers,\n    fullThumb,\n    isEffect: true,\n    textColor\n  }).then(({render}) => render).then((_animation) => {\n    assumeType<RLottiePlayer>(_animation);\n    if(!middleware()) {\n      _animation.remove();\n      throw makeError('MIDDLEWARE');\n    }\n\n    animation = _animation;\n    animation.addEventListener('enterFrame', (frameNo) => {\n      if((!loopEffect && frameNo === animation.maxFrame) || !isInDOM(target)) {\n        unmountAnimation();\n      }\n    });\n\n    animation.addEventListener('destroy', unmountAnimation);\n\n    if(IS_VIBRATE_SUPPORTED) {\n      animation.addEventListener('firstFrame', () => {\n        navigator.vibrate(100);\n      }, {once: true});\n    }\n\n    animation.addEventListener('firstFrame', () => {\n      setPosition();\n    }, {once: true});\n\n    return animation;\n  });\n\n  const generateRandomSigned = (max: number) => {\n    const r = Math.random() * max * 2;\n    return r > max ? -r % max : r;\n  };\n\n  const randomOffsetX = withRandomOffset ? generateRandomSigned(16) : 0;\n  const randomOffsetY = withRandomOffset ? generateRandomSigned(4) : 0;\n  const setPosition = () => {\n    if(!isInDOM(target)) {\n      unmountAnimation();\n      return;\n    }\n\n    const rect = target.getBoundingClientRect();\n\n    const factor = rect.width / 200;\n    const stableOffsetX = side === 'center' ? 0 : 16 * (side === 'right' ? 1 : -1) * factor;\n    // const stableOffsetY = side === 'center' ? 0 : -50 * factor;\n    const stableOffsetY = side === 'center' ? 0 : 0 * factor;\n\n    const rectX = side === 'right' ? rect.right : rect.left;\n    const rectY = rect.top;\n\n    const addOffsetX = (side === 'center' ? (rect.width - size) / 2 : (side === 'right' ? -size : 0)) + stableOffsetX + randomOffsetX;\n    const addOffsetY = (side === 'center' || true ? (rect.height - size) / 2 : 0) + stableOffsetY + randomOffsetY;\n    const x = rectX + addOffsetX;\n    const y = rectY + addOffsetY;\n\n    if(y <= -size || y >= windowSize.height) {\n      unmountAnimation();\n      return;\n    }\n\n    if(relativeEffect) {\n      if(side !== 'center') animationDiv.style[side] = Math.abs(stableOffsetX) * -1 + 'px';\n      else animationDiv.style.left = addOffsetX + 'px';\n      animationDiv.style.top = addOffsetY + 'px';\n    } else {\n      animationDiv.style.top = y + 'px';\n      animationDiv.style.left = x + 'px';\n    }\n  };\n\n  let onScroll: () => void;\n  if(scrollable) {\n    onScroll = throttleWithRaf(setPosition);\n    scrollable.container.addEventListener('scroll', onScroll);\n  }\n\n  // setPosition();\n\n  if(relativeEffect) {\n    animationDiv.classList.add('is-relative');\n    target.parentElement.append(animationDiv);\n  } else {\n    emojiAnimationContainer.append(animationDiv);\n  }\n\n  return {animationDiv, stickerPromise};\n}\n","export default function setCurrentTime(media: HTMLMediaElement, currentTime: number) {\n  media.isSeeking = true;\n  media.currentTime = currentTime;\n}\n","import {IS_CHROMIUM} from '../../environment/userAgent';\nimport deferredPromise from '../cancellablePromise';\nimport noop from '../noop';\nimport deepEqual from '../object/deepEqual';\nimport onMediaLoad from '../onMediaLoad';\nimport safePlay from './safePlay';\nimport setCurrentTime from './setCurrentTime';\n\nconst USE_FIX = IS_CHROMIUM;\n\nexport async function onVideoLeak(video: HTMLVideoElement) {\n  // console.error('video is stuck', video.src, video, video.paused, videoPlaybackQuality);\n  const firstElementChild = video.firstElementChild as HTMLSourceElement;\n  if(!firstElementChild) {\n    video.src = '';\n    video.load();\n    throw new Error('leak');\n  }\n\n  const paused = video.paused;\n  firstElementChild.remove();\n  video.load();\n\n  if(!video.childElementCount && !video.src) {\n    throw new Error('leak');\n  }\n\n  if(!paused) safePlay(video);\n  else setCurrentTime(video, 0.0001);\n\n  return handleVideoLeak(video, onMediaLoad(video));\n}\n\nexport async function testVideoLeak(\n  video: HTMLVideoElement,\n  isLeak = !video.getVideoPlaybackQuality().totalVideoFrames\n) {\n  if(!isLeak) {\n    return;\n  }\n\n  return onVideoLeak(video);\n}\n\n// * fix new memory leak of chrome\nexport default async function handleVideoLeak(video: HTMLVideoElement, loadPromise?: Promise<any>) {\n  if(!USE_FIX) {\n    return loadPromise;\n  }\n\n  const onTimeUpdate = () => {\n    testVideoLeak(video).then(\n      deferred.resolve.bind(deferred),\n      deferred.reject.bind(deferred)\n    );\n  };\n\n  const deferred = deferredPromise<void>();\n  try {\n    await loadPromise;\n  } catch(err) {\n    onTimeUpdate();\n    return;\n  }\n\n  if(\n    video.getVideoPlaybackQuality().totalVideoFrames ||\n    video.readyState > video.HAVE_METADATA // * video can lose metadata on timeupdate if has no next chunk\n  ) {\n    return;\n  }\n\n  video.addEventListener('timeupdate', onTimeUpdate, {once: true});\n  return deferred;\n}\n\nconst eventsOrder = [\n  // 'timeupdate',\n  'seeked',\n  'canplay',\n  'canplaythrough',\n  'seeking'\n  // 'play'\n];\nconst eventsOrderLength = eventsOrder.length;\n\nconst sawEvents = new WeakMap<HTMLElement, {events: Set<string>}>();\nexport const leakVideoFallbacks = new WeakMap<HTMLElement, () => void>();\nUSE_FIX && eventsOrder.forEach((event) => {\n  document.addEventListener(event, (e) => {\n    const target = e.target;\n    if(\n      !(target instanceof HTMLVideoElement) ||\n      target.readyState > target.HAVE_METADATA ||\n      target.isSeeking\n    ) {\n      return;\n    }\n\n    // const needLog = target.parentElement.dataset.docId === '';\n    // if(needLog) {\n    //   console.log('video event', event/* , target */, target.currentTime, target.duration);\n    // }\n\n    let cache = sawEvents.get(target);\n    if(!cache) {\n      sawEvents.set(target, cache = {events: new Set()});\n    }\n\n    if(cache.events.has(event)) {\n      return;\n    }\n\n    cache.events.add(event);\n\n    if(cache.events.size === eventsOrderLength/*  && event == eventsOrder[eventsOrderLength - 1] */) {\n      const events = Array.from(cache.events);\n      const index = eventsOrder.indexOf(events[0]);\n      const normalized = eventsOrder.slice(index).concat(eventsOrder.slice(0, index));\n      if(!deepEqual(events, normalized)) {\n        return;\n      }\n\n      // console.log('bad video', target.currentTime, target.duration);\n\n      const fallbackCallback = leakVideoFallbacks.get(target);\n      if(fallbackCallback) {\n        fallbackCallback();\n        leakVideoFallbacks.delete(target);\n      } else {\n        onVideoLeak(target).catch(noop);\n      }\n    }\n\n    // const lastEvent = sawEvents.get(target);\n    // if(!lastEvent) {\n    //   if(eventsOrder[0] === event) {\n    //     sawEvents.set(target, event);\n    //   }\n    // } else if(lastEvent !== event) {\n    //   const lastEventIndex = eventsOrder.indexOf(lastEvent);\n    //   const shouldBeEvent = eventsOrder[lastEventIndex + 1];\n    //   if(shouldBeEvent === event) { // save event for next check\n    //     sawEvents.set(target, event);\n    //   } else if(!shouldBeEvent) { // saw all events\n    //     onVideoLeak(target).catch(noop);\n    //   } else { // wrong event\n    //     sawEvents.delete(target);\n    //   }\n    // }\n  }, true);\n});\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type RLottiePlayer from '../../lib/rlottie/rlottiePlayer';\nimport type {ThumbCache} from '../../lib/storages/thumbs';\nimport type {MyDocument} from '../../lib/appManagers/appDocsManager';\nimport IS_WEBP_SUPPORTED from '../../environment/webpSupport';\nimport getPathFromBytes from '../../helpers/bytes/getPathFromBytes';\nimport deferredPromise from '../../helpers/cancellablePromise';\nimport computeLockColor from '../../helpers/computeLockColor';\nimport cancelEvent from '../../helpers/dom/cancelEvent';\nimport {attachClickEvent} from '../../helpers/dom/clickEvent';\nimport createVideo from '../../helpers/dom/createVideo';\nimport renderImageFromUrl, {renderImageFromUrlPromise} from '../../helpers/dom/renderImageFromUrl';\nimport getImageFromStrippedThumb from '../../helpers/getImageFromStrippedThumb';\nimport getPreviewURLFromThumb from '../../helpers/getPreviewURLFromThumb';\nimport makeError from '../../helpers/makeError';\nimport {makeMediaSize} from '../../helpers/mediaSize';\nimport mediaSizes from '../../helpers/mediaSizes';\nimport {Middleware} from '../../helpers/middleware';\nimport {isSavingLottiePreview, saveLottiePreview} from '../../helpers/saveLottiePreview';\nimport sequentialDom from '../../helpers/sequentialDom';\nimport {DocumentAttribute, PhotoSize, VideoSize} from '../../layer';\nimport appDownloadManager from '../../lib/appManagers/appDownloadManager';\nimport {AppManagers} from '../../lib/appManagers/managers';\nimport choosePhotoSize from '../../lib/appManagers/utils/photos/choosePhotoSize';\nimport getStickerEffectThumb from '../../lib/appManagers/utils/stickers/getStickerEffectThumb';\nimport lottieLoader from '../../lib/rlottie/lottieLoader';\nimport rootScope from '../../lib/rootScope';\nimport webpWorkerController from '../../lib/webp/webpWorkerController';\nimport {Awaited} from '../../types';\nimport {getEmojiToneIndex} from '../../vendor/emoji';\nimport animationIntersector, {AnimationItemGroup} from '../animationIntersector';\nimport LazyLoadQueue from '../lazyLoadQueue';\nimport wrapStickerAnimation from './stickerAnimation';\nimport framesCache from '../../helpers/framesCache';\nimport liteMode, {LiteModeKey} from '../../helpers/liteMode';\nimport Scrollable from '../scrollable';\nimport apiManagerProxy from '../../lib/mtproto/mtprotoworker';\nimport Icon from '../icon';\nimport {leakVideoFallbacks, onVideoLeak} from '../../helpers/dom/handleVideoLeak';\nimport noop from '../../helpers/noop';\n\n// https://github.com/telegramdesktop/tdesktop/blob/master/Telegram/SourceFiles/history/view/media/history_view_sticker.cpp#L40\nexport const STICKER_EFFECT_MULTIPLIER = 1 + 0.245 * 2;\nconst EMOJI_EFFECT_MULTIPLIER = 3;\nconst UNMOUNT_THUMBS = true;\n\nconst locksUrls: {[docId: string]: string} = {};\n\nexport const videosCache: {[key: string]: Promise<any>} = {};\n\nconst onAnimationEnd = (element: HTMLElement, onAnimationEnd: () => void, timeout: number) => {\n  const onEnd = () => {\n    element.removeEventListener('animationend', onEnd);\n    onAnimationEnd();\n    clearTimeout(_timeout);\n  };\n  element.addEventListener('animationend', onEnd);\n  const _timeout = setTimeout(onEnd, timeout);\n};\n\nconst isEmptyContainer = (container: HTMLElement) => {\n  const childElementCount = container.childElementCount;\n  if(!childElementCount) return true;\n  const child = container.firstElementChild as HTMLElement;\n  return child.classList.contains('premium-sticker-lock') && childElementCount === 1;\n};\n\nconst getThumbFromContainer = (container: HTMLElement) => {\n  let element = container.firstElementChild as HTMLElement;\n  if(element && element.classList.contains('premium-sticker-lock')) {\n    element = element.nextElementSibling as HTMLElement;\n  }\n\n  return element;\n};\n\nexport default async function wrapSticker({doc, div, middleware, loadStickerMiddleware, lazyLoadQueue, exportLoad, group, play, onlyThumb, emoji, width, height, withThumb, loop, loadPromises, needFadeIn, needUpscale, skipRatio, static: asStatic, managers = rootScope.managers, fullThumb, isOut, noPremium, withLock, relativeEffect, loopEffect, isCustomEmoji, syncedVideo, liteModeKey, isEffect, textColor, scrollable, showPremiumInfo}: {\n  doc: MyDocument,\n  div: HTMLElement | HTMLElement[],\n  middleware?: Middleware,\n  loadStickerMiddleware?: Middleware,\n  lazyLoadQueue?: LazyLoadQueue,\n  exportLoad?: number,\n  group?: AnimationItemGroup,\n  play?: boolean,\n  onlyThumb?: boolean,\n  emoji?: string,\n  width?: number,\n  height?: number,\n  withThumb?: boolean,\n  loop?: RLottiePlayer['loop'],\n  loadPromises?: Promise<any>[],\n  needFadeIn?: boolean,\n  needUpscale?: boolean,\n  skipRatio?: number,\n  static?: boolean,\n  managers?: AppManagers,\n  fullThumb?: PhotoSize | Extract<VideoSize, VideoSize.videoSize>,\n  isOut?: boolean,\n  noPremium?: boolean,\n  withLock?: boolean,\n  relativeEffect?: boolean,\n  loopEffect?: boolean,\n  isCustomEmoji?: boolean,\n  syncedVideo?: boolean,\n  liteModeKey?: LiteModeKey | false,\n  isEffect?: boolean,\n  textColor?: WrapSomethingOptions['textColor'],\n  scrollable?: Scrollable\n  showPremiumInfo?: () => void\n}) {\n  const options = arguments[0];\n  div = Array.isArray(div) ? div : [div];\n\n  liteModeKey ??= 'stickers_panel';\n\n  if(isCustomEmoji) {\n    emoji = doc.stickerEmojiRaw;\n  }\n\n  const stickerType = doc.sticker;\n  if(stickerType === 1) {\n    asStatic = true;\n  }\n\n  if(!width && !height) {\n    const sizes = mediaSizes.active;\n    const boxSize = emoji ? sizes.emojiSticker : (doc.animated ? sizes.animatedSticker : sizes.staticSticker);\n    const size = makeMediaSize(doc.w, doc.h).aspectFitted(boxSize);\n    width = size.width;\n    height = size.height;\n  }\n\n  if(stickerType === 2) {\n    // LottieLoader.loadLottie();\n    lottieLoader.loadLottieWorkers();\n  }\n\n  loop = !!(!emoji || isCustomEmoji) && loop;\n\n  div.forEach((div) => {\n    div.dataset.docId = '' + doc.id;\n    if(emoji) {\n      div.dataset.stickerEmoji = emoji;\n    }\n\n    div.dataset.stickerPlay = '' + +(play || false);\n    div.dataset.stickerLoop = '' + +(loop || false);\n\n    div.classList.add('media-sticker-wrapper');\n  });\n\n  if(play && liteModeKey && !liteMode.isAvailable(liteModeKey) && !isCustomEmoji && !isEffect) {\n    play = false;\n    loop = false;\n  }\n\n  /* if(stickerType === 3) {\n    const videoRes = wrapVideo({\n      doc,\n      boxWidth: width,\n      boxHeight: height,\n      container: div,\n      group,\n      lazyLoadQueue,\n      middleware,\n      withoutPreloader: true,\n      loadPromises,\n      noPlayButton: true,\n      noInfo: true\n    });\n\n    if(videoRes.thumb) {\n      if(videoRes.thumb.images.thumb) {\n        videoRes.thumb.images.thumb.classList.add('media-sticker', 'thumbnail');\n      }\n\n      if(videoRes.thumb.images.full) {\n        videoRes.thumb.images.full.classList.add('media-sticker');\n      }\n    }\n\n    return videoRes.loadPromise;\n  } */\n\n  // console.log('wrap sticker', doc, div, onlyThumb);\n\n  let cacheContext: ThumbCache;\n  const getCacheContext = (type: string = cacheContext?.type) => {\n    return cacheContext = apiManagerProxy.getCacheContext(doc, type);\n  };\n\n  const isAnimated = !asStatic && (stickerType === 2 || stickerType === 3);\n\n  const effectThumb = getStickerEffectThumb(doc);\n  if(isOut !== undefined && effectThumb && !isOut) {\n    div.forEach((div) => div.classList.add('reflect-x'));\n  }\n\n  const willHaveLock = effectThumb && withLock;\n  if(willHaveLock) {\n    const lockUrl = locksUrls[doc.id];\n    div.forEach((div) => {\n      div.classList.add('is-premium-sticker');\n      div.append(Icon('premium_lock', 'premium-sticker-lock'));\n      lockUrl && div.style.setProperty('--lock-url', `url(${lockUrl})`);\n    });\n  }\n\n  if(asStatic && stickerType !== 1) {\n    const thumb = choosePhotoSize(doc, width, height, false) as PhotoSize.photoSize;\n    getCacheContext(thumb.type);\n  } else {\n    getCacheContext(fullThumb?.type);\n  }\n\n  const customEmojiAttribute = doc.attributes.find((attribute) => attribute._ === 'documentAttributeCustomEmoji') as DocumentAttribute.documentAttributeCustomEmoji;\n  if(!customEmojiAttribute || !customEmojiAttribute.pFlags.text_color) {\n    textColor = undefined;\n  } else if(!textColor) {\n    textColor = 'primary-text-color';\n  }\n\n  const toneIndex = emoji && !isCustomEmoji ? getEmojiToneIndex(emoji) : -1;\n  const lottieCachedThumbToneIndex = toneIndex === -1 ? textColor ?? toneIndex : toneIndex;\n  const downloaded = cacheContext.downloaded && !needFadeIn;\n\n  const isThumbNeededForType = isAnimated;\n  const lottieCachedThumb = stickerType === 2 || stickerType === 3 ? apiManagerProxy.getStickerCachedThumb(doc.id, lottieCachedThumbToneIndex) : undefined;\n\n  const ret = {\n    render: undefined as typeof loadPromise,\n    load: undefined as typeof load,\n    width,\n    height\n  };\n  let loadThumbPromise = deferredPromise<void>();\n  let haveThumbCached = false;\n  if((\n    doc.thumbs?.length ||\n      lottieCachedThumb\n  ) &&\n    isEmptyContainer(div[0]) && (\n    !downloaded ||\n      isThumbNeededForType ||\n      onlyThumb\n  ) && withThumb !== false/*  && doc.thumbs[0]._ !== 'photoSizeEmpty' */\n  ) {\n    let thumb = lottieCachedThumb || doc.thumbs[0];\n\n    // console.log('wrap sticker', thumb, div);\n\n    const afterRender = (div: HTMLElement, thumbImage: HTMLElement) => {\n      if(isEmptyContainer(div)) {\n        sequentialDom.mutateElement(div, () => {\n          if(isEmptyContainer(div)) {\n            thumbImage.classList.add('media-sticker', 'thumbnail');\n            div.append(thumbImage);\n          }\n\n          loadThumbPromise.resolve();\n        });\n      } else {\n        loadThumbPromise.resolve();\n      }\n    };\n\n    if('url' in thumb) {\n      haveThumbCached = true;\n      div.forEach((div) => {\n        const thumbImage = new Image();\n        renderImageFromUrl(thumbImage, (thumb as any).url, () => afterRender(div, thumbImage));\n      });\n    } else if('bytes' in thumb) {\n      if(thumb._ === 'photoPathSize') {\n        if(!thumb.bytes.length) {\n          thumb = doc.thumbs.find((t) => (t as PhotoSize.photoStrippedSize).bytes?.length) || thumb;\n        }\n\n        const d = getPathFromBytes((thumb as PhotoSize.photoStrippedSize).bytes);\n        const ns = 'http://www.w3.org/2000/svg';\n        const svg = document.createElementNS(ns, 'svg');\n        svg.classList.add('rlottie-vector', 'media-sticker', 'thumbnail');\n        svg.setAttributeNS(null, 'viewBox', `0 0 ${doc.w || 512} ${doc.h || 512}`);\n\n        // const defs = document.createElementNS(ns, 'defs');\n        // const linearGradient = document.createElementNS(ns, 'linearGradient');\n        // linearGradient.setAttributeNS(null, 'id', 'g');\n        // linearGradient.setAttributeNS(null, 'x1', '-300%');\n        // linearGradient.setAttributeNS(null, 'x2', '-200%');\n        // linearGradient.setAttributeNS(null, 'y1', '0');\n        // linearGradient.setAttributeNS(null, 'y2', '0');\n        // const stops = [\n        //   ['-10%', '.1'],\n        //   ['30%', '.07'],\n        //   ['70%', '.07'],\n        //   ['110%', '.1']\n        // ].map(([offset, stopOpacity]) => {\n        //   const stop = document.createElementNS(ns, 'stop');\n        //   stop.setAttributeNS(null, 'offset', offset);\n        //   stop.setAttributeNS(null, 'stop-opacity', stopOpacity);\n        //   return stop;\n        // });\n        // const animates = [\n        //   ['-300%', '1200%'],\n        //   ['-200%', '1300%']\n        // ].map(([from, to], idx) => {\n        //   const animate = document.createElementNS(ns, 'animate');\n        //   animate.setAttributeNS(null, 'attributeName', 'x' + (idx + 1));\n        //   animate.setAttributeNS(null, 'from', from);\n        //   animate.setAttributeNS(null, 'to', to);\n        //   animate.setAttributeNS(null, 'dur', '3s');\n        //   animate.setAttributeNS(null, 'repeatCount', 'indefinite');\n        //   return animate;\n        // });\n        // linearGradient.append(...stops, ...animates);\n        // defs.append(linearGradient);\n        // svg.append(defs);\n\n        const path = document.createElementNS(ns, 'path');\n        path.setAttributeNS(null, 'd', d);\n        // if(liteMode.isAvailable('animations') && !isCustomEmoji) path.setAttributeNS(null, 'fill', 'url(#g)');\n        svg.append(path);\n        div.forEach((div, idx) => div.append(idx > 0 ? svg.cloneNode(true) : svg));\n        haveThumbCached = true;\n        loadThumbPromise.resolve();\n      } else if(toneIndex <= 0) {\n        const r = () => {\n          (div as HTMLElement[]).forEach((div) => {\n            const thumbImage = new Image();\n            const url = getPreviewURLFromThumb(doc, thumb as PhotoSize.photoStrippedSize, true);\n            renderImageFromUrl(thumbImage, url, () => afterRender(div, thumbImage));\n          });\n        };\n\n        if((IS_WEBP_SUPPORTED || doc.pFlags.stickerThumbConverted || cacheContext.url)/*  && false */) {\n          haveThumbCached = true;\n          r();\n        } else {\n          haveThumbCached = true;\n          webpWorkerController.convert('main-' + doc.id, thumb.bytes).then((bytes) => {\n            managers.appDocsManager.saveWebPConvertedStrippedThumb(doc.id, bytes);\n            (thumb as PhotoSize.photoStrippedSize).bytes = bytes;\n            doc.pFlags.stickerThumbConverted = true;\n\n            if((middleware && !middleware()) || !isEmptyContainer((div as HTMLElement[])[0])) {\n              loadThumbPromise.resolve();\n              return;\n            }\n\n            r();\n          }).catch(() => loadThumbPromise.resolve());\n        }\n      }\n    } else if(((stickerType === 2 && toneIndex <= 0) || stickerType === 3) && (withThumb || onlyThumb)) {\n      const load = async() => {\n        if(!isEmptyContainer((div as HTMLElement[])[0]) || (middleware && !middleware())) {\n          loadThumbPromise.resolve();\n          return;\n        }\n\n        const r = (div: HTMLElement, thumbImage: HTMLElement, url: string) => {\n          if(!isEmptyContainer(div) || (middleware && !middleware())) {\n            loadThumbPromise.resolve();\n            return;\n          }\n\n          if(!url) afterRender(div, thumbImage);\n          else renderImageFromUrl(thumbImage, url, () => afterRender(div, thumbImage));\n        };\n\n        getCacheContext();\n        (div as HTMLElement[]).forEach((div) => {\n          if(cacheContext.url) {\n            r(div, new Image(), cacheContext.url);\n          } else if('bytes' in thumb) {\n            const res = getImageFromStrippedThumb(doc, thumb as PhotoSize.photoStrippedSize, true);\n            res.loadPromise.then(() => r(div, res.image, ''));\n\n            // return managers.appDocsManager.getThumbURL(doc, thumb as PhotoSize.photoStrippedSize).promise.then(r);\n          } else {\n            appDownloadManager.downloadMediaURL({\n              media: doc,\n              thumb: thumb as PhotoSize\n            }).then(async(url) => {\n              return r(div, new Image(), url);\n            });\n          }\n        });\n      };\n\n      if(lazyLoadQueue && onlyThumb) {\n        lazyLoadQueue.push({div: div[0], load});\n        loadThumbPromise.resolve();\n        return ret;\n      } else {\n        load();\n\n        if((thumb as any).url) {\n          haveThumbCached = true;\n        }\n      }\n    }\n  }\n\n  if(loadPromises && haveThumbCached) {\n    loadPromises.push(loadThumbPromise);\n  }\n\n  if(onlyThumb/*  || true */) { // for sticker panel\n    return ret;\n  }\n\n  const middlewareError = makeError('MIDDLEWARE');\n  const load = async() => {\n    if(middleware && !middleware()) {\n      throw middlewareError;\n    }\n\n    if(stickerType === 2 && !asStatic) {\n      const blob = await appDownloadManager.downloadMedia({media: doc, queueId: lazyLoadQueue?.queueId, thumb: fullThumb});\n      if(middleware && !middleware()) {\n        throw middlewareError;\n      }\n\n      const animation = await lottieLoader.loadAnimationWorker({\n        container: (div as HTMLElement[])[0],\n        loop,\n        autoplay: play,\n        animationData: blob,\n        width,\n        height,\n        name: 'doc' + doc.id,\n        needUpscale,\n        skipRatio,\n        toneIndex,\n        sync: isCustomEmoji,\n        middleware: loadStickerMiddleware ?? middleware,\n        group,\n        liteModeKey: liteModeKey || undefined,\n        textColor: !isCustomEmoji ? textColor : undefined\n      });\n\n      // const deferred = deferredPromise<void>();\n\n      const setLockColor = willHaveLock ? () => {\n        const lockUrl = locksUrls[doc.id] ??= computeLockColor(animation.canvas[0]);\n        (div as HTMLElement[]).forEach((div) => div.style.setProperty('--lock-url', `url(${lockUrl})`));\n      } : undefined;\n\n      const onFirstFrame = (container: HTMLElement, canvas: HTMLCanvasElement) => {\n        let element = getThumbFromContainer(container);\n        element = element !== canvas && element as HTMLElement;\n        if(needFadeIn !== false) {\n          needFadeIn = (needFadeIn || !element || element.tagName === 'svg') && liteMode.isAvailable('animations');\n        }\n\n        const cb = () => {\n          if(\n            element &&\n            element !== canvas &&\n            element.tagName !== 'DIV'\n          ) {\n            element.remove();\n          }\n        };\n\n        if(!needFadeIn) {\n          if(element) {\n            sequentialDom.mutate(cb);\n          }\n        } else {\n          sequentialDom.mutate(() => {\n            canvas && canvas.classList.add('fade-in');\n            if(element) {\n              element.classList.add('fade-out');\n            }\n\n            onAnimationEnd(canvas || element, () => {\n              sequentialDom.mutate(() => {\n                canvas && canvas.classList.remove('fade-in');\n                cb();\n              });\n            }, 400);\n          });\n        }\n      };\n\n      animation.addEventListener('firstFrame', () => {\n        const canvas = animation.canvas[0];\n        if(withThumb !== false || isCustomEmoji) {\n          saveLottiePreview(doc, canvas, lottieCachedThumbToneIndex);\n        }\n\n        if(willHaveLock) {\n          setLockColor();\n        }\n\n        if(!isCustomEmoji) {\n          (div as HTMLElement[]).forEach((container, idx) => {\n            onFirstFrame(container, animation.canvas[idx]);\n          });\n        }\n      }, {once: true});\n\n      if(emoji) {\n        managers.appStickersManager.preloadAnimatedEmojiStickerAnimation(emoji);\n      }\n\n      return animation;\n\n      // return deferred;\n      // await new Promise((resolve) => setTimeout(resolve, 5e3));\n    } else if(asStatic || stickerType === 3) {\n      const isSingleVideo = isAnimated && syncedVideo;\n      const cacheName = isSingleVideo ? framesCache.generateName('' + doc.id, 0, 0, undefined, undefined) : undefined;\n\n      const cachePromise = videosCache[cacheName];\n      if(cachePromise) {\n        return cachePromise as typeof promise;\n      }\n\n      const d = isSingleVideo ? (div as HTMLElement[]).slice(0, 1) : div as HTMLElement[];\n      const media: HTMLElement[] = d.map(() => {\n        let media: HTMLElement;\n        if(asStatic) {\n          media = new Image();\n        } else {\n          const video = media = createVideo();\n          video.muted = true;\n          if(play) video.autoplay = true;\n          if(loop) video.loop = true;\n\n          if(loop && typeof(loop) === 'number') {\n            let previousTime = 0, playedTimes = 0;\n            function onTimeupdate(this: HTMLVideoElement) {\n              if(previousTime > this.currentTime && ++playedTimes === loop as number) {\n                this.autoplay = false;\n                this.loop = false;\n                this.pause();\n                video.removeEventListener('timeupdate', onTimeupdate);\n              }\n\n              previousTime = this.currentTime;\n            }\n\n            video.addEventListener('timeupdate', onTimeupdate);\n          }\n        }\n\n        media.classList.add('media-sticker');\n        return media;\n      });\n\n      const thumbImage = (div as HTMLElement[]).map((div, idx) => {\n        const thumb = getThumbFromContainer(div);\n        return (thumb as HTMLElement) !== media[idx] && thumb;\n      }) as HTMLElement[];\n      if(needFadeIn !== false) {\n        needFadeIn = (needFadeIn || !downloaded || (asStatic ? thumbImage[0] : (!thumbImage[0] || thumbImage[0].tagName === 'svg'))) && liteMode.isAvailable('animations');\n      }\n\n      if(needFadeIn) {\n        media.forEach((media) => media.classList.add('fade-in'));\n      }\n\n      const promise = new Promise<HTMLVideoElement[] | HTMLImageElement[]>(async(resolve, reject) => {\n        const r = async() => {\n          if(middleware && !middleware()) {\n            reject(middlewareError);\n            return;\n          }\n\n          const mediaLength = media.length;\n          const loaded: HTMLElement[] = [];\n          const onLoad = (div: HTMLElement, media: HTMLElement, thumbImage: HTMLElement) => {\n            sequentialDom.mutateElement(div, () => {\n              if(middleware && !middleware()) {\n                reject(middlewareError);\n                return;\n              }\n\n              if(!media) {\n                if(!isSingleVideo || !isAnimated) {\n                  UNMOUNT_THUMBS && thumbImage?.remove();\n                }\n\n                return;\n              }\n\n              const isVideo = media instanceof HTMLVideoElement;\n              if(isVideo/*  && media.isConnected */) {\n                // * video sticker can have arbitrary dimensions\n                const {videoWidth, videoHeight} = media;\n                const ratio = videoWidth / videoHeight;\n\n                let w = width * window.devicePixelRatio;\n                let h = height * window.devicePixelRatio;\n                if(ratio < 1) {\n                  w = h * ratio;\n                } else {\n                  h = w / ratio;\n                }\n\n                if(!isSavingLottiePreview(doc, toneIndex, w, h)) {\n                  // const perf = performance.now();\n                  const canvas = document.createElement('canvas');\n                  canvas.width = w;\n                  canvas.height = h;\n                  const ctx = canvas.getContext('2d');\n                  ctx.drawImage(media, 0, 0, canvas.width, canvas.height);\n                  saveLottiePreview(doc, canvas, toneIndex);\n                  // console.log('perf', performance.now() - perf);\n                }\n              }\n\n              if(isSingleVideo) {\n                resolve(media as any);\n                return;\n              }\n\n              if(isVideo) {\n                leakVideoFallbacks.set(media, () => {\n                  const reset = () => {\n                    onVideoLeak(media).catch(noop);\n                  };\n\n                  if(!thumbImage || !(thumbImage instanceof HTMLImageElement)) {\n                    const d = document.createElement('div');\n                    wrapSticker({\n                      ...options,\n                      div: d,\n                      static: true,\n                      exportLoad: undefined,\n                      needFadeIn: false,\n                      lazyLoadQueue: undefined\n                      // onlyThumb: true\n                    }).then(({render}) => {\n                      return render;\n                    }).finally(() => {\n                      sequentialDom.mutateElement(media, () => {\n                        if(middleware()) div.append(...Array.from(d.children));\n                        media.remove();\n                        reset();\n                      });\n                    });\n                  } else {\n                    media.replaceWith(thumbImage);\n                    reset();\n                  }\n                });\n              }\n\n              div.append(media);\n\n              if(needFadeIn) {\n                thumbImage && thumbImage.classList.add('fade-out');\n                onAnimationEnd(media, () => {\n                  media.classList.remove('fade-in');\n                  UNMOUNT_THUMBS && thumbImage?.remove();\n                }, 400);\n              } else {\n                UNMOUNT_THUMBS && thumbImage?.remove();\n              }\n\n              if(isAnimated) {\n                animationIntersector.addAnimation({\n                  animation: media as HTMLVideoElement,\n                  observeElement: div,\n                  group,\n                  controlled: middleware,\n                  liteModeKey: liteModeKey || undefined,\n                  type: 'video'\n                });\n              }\n\n              if(loaded.push(media) === mediaLength) {\n                resolve(loaded as any);\n              }\n            });\n          };\n\n          getCacheContext();\n          let lastPromise: Promise<any>;\n          (div as HTMLElement[]).forEach((div, idx) => {\n            const _media = media[idx];\n            const cb = () => onLoad(div, _media, thumbImage[idx]);\n            if(_media) lastPromise = renderImageFromUrlPromise(_media, cacheContext.url);\n            lastPromise.then(cb);\n          });\n        };\n\n        getCacheContext();\n        if(cacheContext.url) r();\n        else {\n          let promise: Promise<any>;\n          if(stickerType !== 1 && asStatic) {\n            const thumb = choosePhotoSize(doc, width, height, false) as PhotoSize.photoSize;\n            // promise = managers.appDocsManager.getThumbURL(doc, thumb).promise\n            promise = appDownloadManager.downloadMediaURL({media: doc, thumb, queueId: lazyLoadQueue?.queueId});\n          } else {\n            promise = appDownloadManager.downloadMediaURL({media: doc, queueId: lazyLoadQueue?.queueId});\n          }\n\n          promise.then(r, reject);\n        }\n      });\n\n      if(cacheName) {\n        videosCache[cacheName] = promise as any;\n        loadStickerMiddleware && promise.finally(() => {\n          if(!loadStickerMiddleware()) {\n            delete videosCache[cacheName];\n          }\n        });\n      }\n\n      return promise;\n    }\n  };\n\n  if(exportLoad && ((exportLoad === 1 && (!downloaded || isAnimated)) || exportLoad === 2)) {\n    ret.load = load;\n    return ret;\n  }\n\n  const loadPromise: Promise<Awaited<ReturnType<typeof load>> | void> = lazyLoadQueue && (!downloaded || isAnimated) ?\n    (lazyLoadQueue.push({div: div[0], load}), Promise.resolve()) :\n    load();\n\n  if(downloaded && (asStatic/*  || stickerType === 3 */)) {\n    loadThumbPromise = loadPromise as any;\n    loadPromises?.push(loadThumbPromise);\n  }\n\n  if(stickerType === 2 && effectThumb && isOut !== undefined && !noPremium) {\n    attachStickerEffectHandler({\n      container: div[0],\n      doc,\n      managers,\n      middleware,\n      isOut,\n      width,\n      loadPromise,\n      relativeEffect,\n      loopEffect,\n      scrollable,\n      showPremiumInfo\n    });\n  }\n\n  ret.render = loadPromise as any;\n  return ret;\n}\n\nfunction attachStickerEffectHandler({container, doc, managers, middleware, isOut, width, loadPromise, relativeEffect, loopEffect, scrollable, showPremiumInfo}: {\n  container: HTMLElement,\n  doc: MyDocument,\n  managers: AppManagers,\n  middleware: Middleware,\n  isOut: boolean,\n  width: number,\n  loadPromise: Promise<any>,\n  relativeEffect?: boolean,\n  loopEffect?: boolean,\n  scrollable?: Scrollable,\n  showPremiumInfo?: () => void\n}) {\n  managers.appStickersManager.preloadSticker(doc.id, true);\n\n  attachClickEvent(container, async(e) => {\n    const isAvailable = liteMode.isAvailable('effects_premiumstickers') || relativeEffect;\n    cancelEvent(e);\n    if(!e.isTrusted && !isAvailable) {\n      return;\n    }\n\n    if(container.dataset.playing || !isAvailable) {\n      showPremiumInfo?.();\n      return;\n    }\n\n    container.dataset.playing = '1';\n\n    await loadPromise;\n    const {animationDiv, stickerPromise} = wrapStickerAnimation({\n      doc,\n      middleware,\n      side: isOut ? 'right' : 'left',\n      size: width * STICKER_EFFECT_MULTIPLIER,\n      target: container,\n      play: true,\n      fullThumb: getStickerEffectThumb(doc),\n      relativeEffect,\n      loopEffect,\n      scrollable\n    });\n\n    if(isOut !== undefined && !isOut/*  && !relativeEffect */) {\n      animationDiv.classList.add('reflect-x');\n    }\n\n    stickerPromise.then((player) => {\n      player.addEventListener('destroy', () => {\n        delete container.dataset.playing;\n      });\n    });\n  });\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport windowSize from '../windowSize';\n\nexport default function getVisibleRect(\n  element: HTMLElement,\n  overflowElement: HTMLElement,\n  lookForSticky?: boolean,\n  rect: DOMRectMinified = element.getBoundingClientRect(),\n  overflowRect: DOMRectMinified = overflowElement.getBoundingClientRect()\n) {\n  let {top: overflowTop, right: overflowRight, bottom: overflowBottom, left: overflowLeft} = overflowRect;\n\n  // * respect sticky headers\n  if(lookForSticky) {\n    const sticky = overflowElement.querySelector('.sticky');\n    if(sticky) {\n      const stickyRect = sticky.getBoundingClientRect();\n      overflowTop = stickyRect.bottom;\n    }\n  }\n\n  if(rect.top >= overflowBottom ||\n    rect.bottom <= overflowTop ||\n    rect.right <= overflowLeft ||\n    rect.left >= overflowRight) {\n    return null;\n  }\n\n  const overflow = {\n    top: false,\n    right: false,\n    bottom: false,\n    left: false,\n    vertical: 0 as 0 | 1 | 2,\n    horizontal: 0 as 0 | 1 | 2\n  };\n\n  const windowWidth = windowSize.width;\n  const windowHeight = windowSize.height;\n\n  return {\n    rect: {\n      top: rect.top < overflowTop && overflowTop !== 0 ? (overflow.top = true, ++overflow.vertical, overflowTop) : rect.top,\n      right: rect.right > overflowRight && overflowRight !== windowWidth ? (overflow.right = true, ++overflow.horizontal, overflowRight) : rect.right,\n      bottom: rect.bottom > overflowBottom && overflowBottom !== windowHeight ? (overflow.bottom = true, ++overflow.vertical, overflowBottom) : rect.bottom,\n      left: rect.left < overflowLeft && overflowLeft !== 0 ? (overflow.left = true, ++overflow.horizontal, overflowLeft) : rect.left\n    },\n    overflow\n  };\n}\n\n(window as any).getVisibleRect = getVisibleRect;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport getVisibleRect from './getVisibleRect';\n\nexport type ViewportSlicePart = {element: HTMLElement, rect: DOMRect, visibleRect: ReturnType<typeof getVisibleRect>}[];\n\nexport default function getViewportSlice({\n  overflowElement,\n  overflowRect,\n  selector,\n  extraSize,\n  extraMinLength,\n  elements\n}: {\n  overflowElement: HTMLElement,\n  overflowRect?: DOMRectMinified,\n  extraSize?: number,\n  extraMinLength?: number,\n  selector?: string,\n  elements?: HTMLElement[]\n}) {\n  // const perf = performance.now();\n  overflowRect ??= overflowElement.getBoundingClientRect();\n  elements ??= Array.from(overflowElement.querySelectorAll<HTMLElement>(selector));\n\n  if(extraSize) {\n    overflowRect = {\n      top: overflowRect.top - extraSize,\n      right: overflowRect.right + extraSize,\n      bottom: overflowRect.bottom + extraSize,\n      left: overflowRect.left - extraSize\n    };\n  }\n\n  const invisibleTop: ViewportSlicePart = [],\n    visible: typeof invisibleTop = [],\n    invisibleBottom: typeof invisibleTop = [];\n  let foundVisible = false;\n  for(const element of elements) {\n    const rect = element.getBoundingClientRect();\n    const visibleRect = getVisibleRect(element, overflowElement, false, rect, overflowRect);\n\n    const isVisible = !!visibleRect;\n    let array: typeof invisibleTop;\n    if(isVisible) {\n      foundVisible = true;\n      array = visible;\n    } else if(foundVisible) {\n      array = invisibleBottom;\n    } else {\n      array = invisibleTop;\n    }\n\n    array.push({\n      element,\n      rect,\n      visibleRect\n    });\n  }\n\n  if(extraMinLength) {\n    visible.unshift(...invisibleTop.splice(Math.max(0, invisibleTop.length - extraMinLength), extraMinLength));\n    visible.push(...invisibleBottom.splice(0, extraMinLength));\n  }\n\n  // if(extraSize && visible.length) {\n  //   const maxTop = visible[0].rect.top;\n  //   const minTop = maxTop - extraSize;\n  //   const minBottom = visible[visible.length - 1].rect.bottom;\n  //   const maxBottom = minBottom + extraSize;\n\n  //   for(let length = invisibleTop.length, i = length - 1; i >= 0; --i) {\n  //     const element = invisibleTop[i];\n  //     if(element.rect.top >= minTop) {\n  //       invisibleTop.splice(i, 1);\n  //       visible.unshift(element);\n  //     }\n  //   }\n\n  //   for(let i = 0, length = invisibleBottom.length; i < length; ++i) {\n  //     const element = invisibleBottom[i];\n  //     if(element.rect.bottom <= maxBottom) {\n  //       invisibleBottom.splice(i--, 1);\n  //       --length;\n  //       visible.push(element);\n  //     }\n  //   }\n  // }\n\n  // console.log('getViewportSlice time:', performance.now() - perf);\n\n  return {invisibleTop, visible, invisibleBottom};\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../appManagers/appDocsManager';\nimport animationIntersector, {AnimationItemGroup} from '../../components/animationIntersector';\nimport LazyLoadQueue from '../../components/lazyLoadQueue';\nimport wrapSticker, {videosCache} from '../../components/wrappers/sticker';\nimport customProperties, {CustomProperty} from '../../helpers/dom/customProperties';\nimport findUpClassName from '../../helpers/dom/findUpClassName';\nimport getViewportSlice from '../../helpers/dom/getViewportSlice';\nimport replaceContent from '../../helpers/dom/replaceContent';\nimport framesCache from '../../helpers/framesCache';\nimport {MediaSize} from '../../helpers/mediaSize';\nimport mediaSizes from '../../helpers/mediaSizes';\nimport {Middleware, MiddlewareHelper, getMiddleware} from '../../helpers/middleware';\nimport noop from '../../helpers/noop';\nimport {DocumentAttribute} from '../../layer';\nimport wrapRichText from '../richTextProcessor/wrapRichText';\nimport RLottiePlayer, {applyColorOnContext, getLottiePixelRatio} from '../rlottie/rlottiePlayer';\nimport rootScope from '../rootScope';\nimport CustomEmojiElement, {CustomEmojiElements} from './element';\nimport assumeType from '../../helpers/assumeType';\nimport {IS_WEBM_SUPPORTED} from '../../environment/videoSupport';\n\nconst resizeObserverMap: WeakMap<Element, CustomEmojiRendererElement> = new WeakMap();\nconst resizeObserver = new ResizeObserver((entries) => {\n  for(const entry of entries) {\n    const renderer = resizeObserverMap.get(entry.target);\n    renderer.setDimensionsFromRect(entry.contentRect);\n  }\n});\n\nconst globalLazyLoadQueue = new LazyLoadQueue();\n\nexport class CustomEmojiRendererElement extends HTMLElement {\n  public static globalLazyLoadQueue: LazyLoadQueue = globalLazyLoadQueue;\n\n  public canvas: HTMLCanvasElement;\n  public context: CanvasRenderingContext2D;\n\n  public playersSynced: Map<CustomEmojiElements, RLottiePlayer | HTMLVideoElement>;\n  public textColored: Set<CustomEmojiElements>;\n  public clearedElements: WeakSet<CustomEmojiElements>;\n  public customEmojis: Parameters<typeof wrapRichText>[1]['customEmojis'];\n  public lastPausedVideo: HTMLVideoElement;\n\n  public lastRect: DOMRect;\n  public isDimensionsSet: boolean;\n\n  public animationGroup: AnimationItemGroup;\n  public size: MediaSize;\n\n  public isSelectable: boolean;\n  public isCanvasClean: boolean;\n\n  public ignoreSettingDimensions: boolean;\n\n  public forceRenderAfterSize: boolean;\n\n  public middlewareHelper: MiddlewareHelper;\n\n  public auto: boolean;\n  public textColor: CustomProperty;\n\n  public observeResizeElement: HTMLElement;\n\n  constructor() {\n    super();\n\n    this.classList.add('custom-emoji-renderer');\n    this.canvas = document.createElement('canvas');\n    this.canvas.classList.add('custom-emoji-canvas');\n    this.context = this.canvas.getContext('2d');\n    this.append(this.canvas);\n\n    this.playersSynced = new Map();\n    this.textColored = new Set();\n    this.clearedElements = new WeakSet();\n    this.customEmojis = new Map();\n\n    this.animationGroup = 'EMOJI';\n    this.isCanvasClean = false;\n  }\n\n  public connectedCallback() {\n    if(emojiRenderers.has(this)) {\n      return;\n    }\n\n    // this.setDimensions();\n    // animationIntersector.addAnimation(this, this.animationGroup);\n    const observeElement = this.observeResizeElement ?? this.canvas;\n    resizeObserverMap.set(observeElement, this);\n    resizeObserver.observe(observeElement);\n    emojiRenderers.add(this);\n\n    this.connectedCallback = undefined;\n  }\n\n  public disconnectedCallback() {\n    if(this.isConnected || !this.auto) {\n      return;\n    }\n\n    this.destroy?.();\n\n    this.disconnectedCallback = undefined;\n  }\n\n  public destroy() {\n    // if(this.isConnected) {\n    //   return;\n    // }\n\n    const observeElement = this.observeResizeElement ?? this.canvas;\n    resizeObserverMap.delete(observeElement);\n    resizeObserver.unobserve(observeElement);\n\n    this.customEmojis.forEach((elements) => {\n      elements.forEach((element) => {\n        element.clear();\n      });\n    });\n\n    emojiRenderers.delete(this);\n    this.playersSynced.clear();\n    this.middlewareHelper?.clean();\n    this.customEmojis.clear();\n    this.textColored.clear();\n\n    this.destroy =\n      this.lastPausedVideo =\n      undefined;\n  }\n\n  public getOffsets(offsetsMap: Map<CustomEmojiElements, {top: number, left: number, width: number}[]> = new Map()) {\n    if(!this.playersSynced.size) {\n      return offsetsMap;\n    }\n\n    const overflowElement = findUpClassName(this, 'scrollable') || this.offsetParent as HTMLElement;\n    if(!overflowElement) {\n      return offsetsMap;\n    }\n\n    const overflowRect = overflowElement.getBoundingClientRect();\n    const rect = this.getBoundingClientRect();\n\n    for(const elements of this.playersSynced.keys()) {\n      const elementsArr = Array.from(elements);\n      const placeholders = this.isSelectable ? elementsArr.map((element) => element.placeholder) : elementsArr;\n      const {visible} = getViewportSlice({\n        overflowElement,\n        overflowRect,\n        elements: placeholders,\n        extraSize: this.size.height * 2.5 // let's add some margin\n      });\n\n      const offsets = visible.map(({rect: elementRect}) => {\n        const top = elementRect.top - rect.top;\n        const left = elementRect.left - rect.left;\n        return {top, left, width: elementRect.width};\n      });\n\n      if(offsets.length) {\n        offsetsMap.set(elements, offsets);\n      }\n    }\n\n    // const rect = this.getBoundingClientRect();\n    // const visibleRect = getVisibleRect(this, overflowElement, undefined, rect);\n    // const minTop = visibleRect ? visibleRect.rect.top - this.size.height : 0;\n    // const maxTop = Infinity;\n    // for(const elements of this.playersSynced.keys()) {\n    //   const offsets = elements.map((element) => {\n    //     const elementRect = element.getBoundingClientRect();\n    //     const top = elementRect.top - rect.top;\n    //     const left = elementRect.left - rect.left;\n    //     return top >= minTop && (top + elementRect.height) <= maxTop ? {top, left} : undefined;\n    //   }).filter(Boolean);\n\n    //   if(offsets.length) {\n    //     offsetsMap.set(elements, offsets);\n    //   }\n    // }\n\n    return offsetsMap;\n  }\n\n  public clearCanvas() {\n    if(this.isCanvasClean) {\n      return;\n    }\n\n    const {context, canvas} = this;\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    this.isCanvasClean = true;\n  }\n\n  public render(offsetsMap: ReturnType<CustomEmojiRendererElement['getOffsets']>) {\n    const {context, canvas, isDimensionsSet} = this;\n    if(!isDimensionsSet) {\n      this.setDimensionsFromRect(undefined, false);\n    }\n\n    this.isCanvasClean = false;\n\n    const {width, height, dpr} = canvas;\n    for(const [elements, offsets] of offsetsMap) {\n      const player = this.playersSynced.get(elements);\n      const frame = syncedPlayersFrames.get(player) || (player instanceof HTMLVideoElement ? player : undefined);\n      if(!frame) {\n        continue;\n      }\n\n      const isImageData = frame instanceof ImageData;\n      let frameWidth: number, frameHeight: number;\n      if(player instanceof HTMLVideoElement) {\n        frameWidth = this.size.width * dpr;\n        frameHeight = this.size.height * dpr;\n      } else {\n        frameWidth = frame.width;\n        frameHeight = frame.height;\n      }\n\n      // ! check performance of scaling\n      const elementWidth = Math.round(offsets[0].width * dpr);\n      if(elementWidth !== frameWidth) {\n        // if(this.size.width === 36) {\n        //   console.warn('different width', elementWidth, frameWidth, this);\n        // }\n\n        frameWidth = elementWidth;\n        frameHeight = elementWidth;\n      }\n\n      const maxTop = height - frameHeight;\n      const maxLeft = width - frameWidth;\n      const color = this.textColored.has(elements) ? customProperties.getProperty(this.textColor) : undefined;\n\n      if(!this.clearedElements.has(elements) && !this.isSelectable) {\n        if(this.isSelectable/*  && false */) {\n          elements.forEach((element) => {\n            element.lastChildWas ??= element.lastChild;\n            replaceContent(element, element.firstChild);\n          });\n        } else {\n          elements.forEach((element) => {\n            element.replaceChildren();\n          });\n        }\n\n        this.clearedElements.add(elements);\n      }\n\n      offsets.forEach(({top, left}) => {\n        top = Math.round(top * dpr), left = Math.round(left * dpr);\n        if(left < 0 ||/* top > maxTop ||  */left > maxLeft) {\n          return;\n        }\n\n        if(isImageData) {\n          context.putImageData(frame, left, top);\n        } else {\n          // context.clearRect(left, top, width, height);\n          context.drawImage(frame, left, top, frameWidth, frameHeight);\n        }\n\n        if(color) {\n          applyColorOnContext(context, color, left, top, frameWidth, frameHeight);\n        }\n      });\n    }\n  }\n\n  public checkForAnyFrame() {\n    for(const player of this.playersSynced.values()) {\n      if(syncedPlayersFrames.has(player) || player instanceof HTMLVideoElement) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  public remove() {\n    super.remove();\n    // this.canvas.remove();\n  }\n\n  // public setDimensions() {\n  //   const {canvas} = this;\n  //   sequentialDom.mutateElement(canvas, () => {\n  //     const rect = canvas.getBoundingClientRect();\n  //     this.setDimensionsFromRect(rect);\n  //   });\n  // }\n\n  public setDimensionsFromRect(rect: DOMRect = this.lastRect, forceRenderAfter = true) {\n    const {canvas} = this;\n    const {dpr} = canvas;\n\n    if(this.lastRect !== rect) {\n      this.lastRect = rect;\n    }\n\n    if(!rect || !dpr || this.ignoreSettingDimensions) {\n      return;\n    }\n\n    const {width, height} = rect;\n    // if(this.isSelectable) {\n    //   height = this.parentElement.scrollHeight || height;\n\n    //   this.style.width = width + 'px';\n    //   this.style.height = height + 'px';\n    // }\n\n    const newWidth = Math.floor(Math.round(width * dpr));\n    const newHeight = Math.floor(Math.round(height * dpr));\n    if(canvas.width === newWidth && canvas.height === newHeight) {\n      return;\n    }\n\n    canvas.width = newWidth;\n    canvas.height = newHeight;\n    this.isDimensionsSet = true;\n    this.isCanvasClean = true;\n\n    if(this.observeResizeElement) {\n      this.canvas.style.setProperty('width', width + 'px', 'important');\n      this.canvas.style.setProperty('height', height + 'px', 'important');\n    }\n\n    if(this.forceRenderAfterSize || (this.isSelectable && forceRenderAfter)) {\n      this.forceRenderAfterSize = undefined;\n      this.forceRender();\n    }\n  }\n\n  public forceRender() {\n    if(!this.isDimensionsSet) {\n      return;\n    }\n\n    if(!renderEmojis(new Set([this]))) {\n      this.clearCanvas();\n    }\n  }\n\n  public add({\n    addCustomEmojis,\n    lazyLoadQueue,\n    onlyThumb,\n    withThumb\n  }: {\n    addCustomEmojis: Parameters<typeof wrapRichText>[1]['customEmojis'],\n    lazyLoadQueue?: LazyLoadQueue | false,\n    onlyThumb?: boolean,\n    withThumb?: boolean\n  }) {\n    const renderer = this;\n\n    addCustomEmojis.forEach((addElements, docId) => { // prevent adding old elements\n      let elements = this.customEmojis.get(docId);\n      if(!elements) this.customEmojis.set(docId, elements = new Set());\n      else this.clearedElements.delete(elements);\n\n      for(const el of addElements) {\n        if(elements.has(el)) {\n          addElements.delete(el);\n        } else {\n          el.clean = false;\n          el.renderer = renderer;\n          el.elements = elements;\n          el.middlewareHelper = this.middlewareHelper.get().create();\n          elements.add(el);\n\n          if(el.lastChildWas && !el.lastChildWas.parentNode) {\n            el.append(el.lastChildWas);\n          }\n        }\n      }\n\n      if(!addElements.size) {\n        addCustomEmojis.delete(docId);\n      }\n    });\n\n    if(!addCustomEmojis.size) {\n      return;\n    }\n\n    const usingOwnQueue = !!(!lazyLoadQueue && lazyLoadQueue !== false && globalLazyLoadQueue);\n\n    const docIds = Array.from(addCustomEmojis.keys());\n\n    const managers = rootScope.managers;\n    const middleware = this.middlewareHelper.get();\n    const size = this.size;\n\n    const loadPromise = managers.appEmojiManager.getCachedCustomEmojiDocuments(docIds).then((docs) => {\n      if(middleware && !middleware()) return;\n\n      const loadPromises: Promise<any>[] = [];\n      const wrap = (doc: MyDocument, _loadPromises?: Promise<any>[]) => {\n        const docId = doc.id;\n        const newElements = addCustomEmojis.get(docId);\n        const customEmojis = renderer.customEmojis.get(docId);\n        const newElementsArray = Array.from(newElements);\n        const isLottie = doc.sticker === 2;\n        const isStatic = newElementsArray[0].static || (doc.mime_type === 'video/webm' && !IS_WEBM_SUPPORTED);\n        const willHaveSyncedPlayer = (isLottie || (doc.sticker === 3 && this.isSelectable)) && !onlyThumb && !isStatic;\n\n        const attribute = doc.attributes.find((attribute) => attribute._ === 'documentAttributeCustomEmoji') as DocumentAttribute.documentAttributeCustomEmoji;\n        if(attribute) {\n          if(attribute.pFlags.text_color) {\n            renderer.textColored.add(customEmojis);\n          }\n        }\n\n        const loadPromises: Promise<any>[] = [];\n        const promise = wrapSticker({\n          div: newElementsArray,\n          doc,\n          width: size.width,\n          height: size.height,\n          loop: true,\n          play: CUSTOM_EMOJI_INSTANT_PLAY,\n          managers,\n          isCustomEmoji: true,\n          group: 'none',\n          loadPromises,\n          middleware,\n          exportLoad: usingOwnQueue || lazyLoadQueue === false ? 2 : 1, // 2 - export load always, 1 - do not export load if cached static\n          needFadeIn: false,\n          loadStickerMiddleware: willHaveSyncedPlayer && middleware ? middleware.create().get(() => {\n            // if(syncedPlayers.get(key) !== syncedPlayer) {\n            //   return false;\n            // }\n\n            // let good = false;\n            // for(const middleware of syncedPlayer.middlewares) {\n            //   if(middleware()) {\n            //     good = true;\n            //     break;\n            //   }\n            // }\n\n            // return good;\n            return !!syncedPlayer.middlewares.size;\n          }) : undefined,\n          static: isStatic,\n          onlyThumb,\n          withThumb: withThumb ?? (renderer.clearedElements.has(customEmojis) ? false : undefined),\n          syncedVideo: this.isSelectable,\n          textColor: renderer.textColor\n        });\n\n        if(_loadPromises) {\n          promise.then(() => _loadPromises.push(...loadPromises));\n        }\n\n        const addition: {\n          onRender?: (_p: Awaited<Awaited<typeof promise>['render']>) => Promise<void>,\n          elements: typeof newElements\n        } = {\n          elements: newElements\n        };\n\n        const readyPromise = newElementsArray[0].readyPromise;\n        if(readyPromise) {\n          promise.then(({render}) => {\n            if(!render) {\n              readyPromise.resolve();\n              return;\n            }\n\n            render.then(\n              () => readyPromise.resolve(),\n              readyPromise.reject.bind(readyPromise)\n            );\n          });\n        }\n\n        if(doc.sticker === 1 || onlyThumb || isStatic) {\n          if(this.isSelectable) {\n            addition.onRender = () => Promise.all(loadPromises).then(() => {\n              if(middleware && !middleware()) return;\n              newElementsArray.forEach((element) => {\n                const {placeholder} = element;\n                placeholder.src = (element.firstElementChild as HTMLImageElement).src;\n              });\n            });\n          }\n\n          return promise.then((res) => ({...res, ...addition}));\n        }\n\n        // eslint-disable-next-line prefer-const\n        addition.onRender = (_p) => Promise.all(loadPromises).then(() => {\n          if((middleware && !middleware()) || !doc.animated) {\n            return;\n          }\n\n          const players = Array.isArray(_p) ? _p as HTMLVideoElement[] : [_p as RLottiePlayer];\n          const player = Array.isArray(players) ? players[0] : players;\n          assumeType<RLottiePlayer | HTMLVideoElement>(player);\n          newElementsArray.forEach((element, idx) => {\n            const player = players[idx] || players[0];\n            element.player = player;\n\n            if(syncedPlayer) {\n              element.syncedPlayer = syncedPlayer;\n              if(element.paused) {\n                element.syncedPlayer.pausedElements.add(element);\n              } else if(player.paused) {\n                player.play();\n              }\n            }\n\n            if(element.isConnected) {\n              animationIntersector.addAnimation({\n                animation: element,\n                group: element.renderer.animationGroup,\n                observeElement: element.placeholder ?? element,\n                controlled: true,\n                type: 'emoji'\n              });\n            }\n          });\n\n          if(player instanceof RLottiePlayer || (player instanceof HTMLVideoElement && this.isSelectable)) {\n            syncedPlayer.player = player;\n            renderer.playersSynced.set(customEmojis, player);\n          }\n\n          if(player instanceof RLottiePlayer) {\n            player.group = renderer.animationGroup;\n\n            player.overrideRender ??= (frame) => {\n              syncedPlayersFrames.set(player, frame);\n              // frames.set(containers, frame);\n            };\n          } else if(player instanceof HTMLVideoElement) {\n            // player.play();\n\n            // const cache = framesCache.getCache(key);\n            // let {width, height} = renderer.size;\n            // width *= dpr;\n            // height *= dpr;\n\n            // const onFrame = (frame: ImageBitmap | HTMLCanvasElement) => {\n            //   topFrames.set(player, frame);\n            //   player.requestVideoFrameCallback(callback);\n            // };\n\n            // let frameNo = -1, lastTime = 0;\n            // const callback: VideoFrameRequestCallback = (now, metadata) => {\n            //   const time = player.currentTime;\n            //   if(lastTime > time) {\n            //     frameNo = -1;\n            //   }\n\n            //   const _frameNo = ++frameNo;\n            //   lastTime = time;\n            //   // const frameNo = Math.floor(player.currentTime * 1000 / CUSTOM_EMOJI_FRAME_INTERVAL);\n            //   // const frameNo = metadata.presentedFrames;\n            //   const imageBitmap = cache.framesNew.get(_frameNo);\n\n            //   if(imageBitmap) {\n            //     onFrame(imageBitmap);\n            //   } else if(IS_IMAGE_BITMAP_SUPPORTED) {\n            //     createImageBitmap(player, {resizeWidth: width, resizeHeight: height}).then((imageBitmap) => {\n            //       cache.framesNew.set(_frameNo, imageBitmap);\n            //       if(frameNo === _frameNo) onFrame(imageBitmap);\n            //     });\n            //   } else {\n            //     const canvas = document.createElement('canvas');\n            //     const context = canvas.getContext('2d');\n            //     canvas.width = width;\n            //     canvas.height = height;\n            //     context.drawImage(player, 0, 0);\n            //     cache.framesNew.set(_frameNo, canvas);\n            //     onFrame(canvas);\n            //   }\n            // };\n\n            // // player.requestVideoFrameCallback(callback);\n            // // setInterval(callback, CUSTOM_EMOJI_FRAME_INTERVAL);\n          }\n\n          if(willHaveSyncedPlayer) {\n            const dpr = getLottiePixelRatio(this.size.width, this.size.height);\n            renderer.canvas.dpr = dpr;\n            setRenderInterval();\n          }\n        });\n\n        let syncedPlayer: SyncedPlayer;\n        const key = [docId, size.width, size.height].join('-');\n        if(willHaveSyncedPlayer) {\n          syncedPlayer = syncedPlayers.get(key);\n          if(!syncedPlayer) {\n            syncedPlayer = {\n              player: undefined,\n              middlewares: new Set(),\n              pausedElements: new Set(),\n              key\n            };\n\n            syncedPlayers.set(key, syncedPlayer);\n          }\n\n          for(const element of newElements) {\n            const middleware = element.middlewareHelper.get();\n            syncedPlayer.middlewares.add(middleware);\n            middleware.onClean(() => {\n              element.clear(); // * it is correct\n\n              syncedPlayer.middlewares.delete(middleware);\n\n              if(!syncedPlayer.middlewares.size) {\n                if(syncedPlayer.player) {\n                  const frame = syncedPlayersFrames.get(syncedPlayer.player);\n                  if(frame) {\n                    (frame as ImageBitmap).close?.();\n                    syncedPlayersFrames.delete(syncedPlayer.player);\n                  }\n\n                  syncedPlayersFrames.delete(syncedPlayer.player);\n                  if(syncedPlayer.player instanceof RLottiePlayer) {\n                    syncedPlayer.player.overrideRender = noop;\n                    syncedPlayer.player.remove();\n                  } else if(syncedPlayer.player instanceof HTMLVideoElement) {\n                    const cacheName = framesCache.generateName('' + element.docId, 0, 0, undefined, undefined);\n                    delete videosCache[cacheName];\n                  }\n\n                  syncedPlayer.player = undefined;\n                }\n\n                if(syncedPlayers.get(syncedPlayer.key) === syncedPlayer && syncedPlayers.delete(syncedPlayer.key) && !syncedPlayers.size) {\n                  clearRenderInterval();\n                }\n              }\n            });\n          }\n        }\n\n        return promise.then((res) => ({...res, ...addition}));\n      };\n\n      const missing: DocId[] = [];\n      const cachedPromises = docs.map((doc, idx) => {\n        if(!doc) {\n          missing.push(docIds[idx]);\n          return;\n        }\n\n        return wrap(doc, loadPromises);\n      }).filter(Boolean);\n\n      const uncachedPromisesPromise = !missing.length ?\n        Promise.resolve([] as typeof cachedPromises) :\n        managers.appEmojiManager.getCustomEmojiDocuments(missing).then((docs) => {\n          if(middleware && !middleware()) return [];\n          return docs.filter(Boolean).map((doc) => wrap(doc));\n        });\n\n      const loadFromPromises = (promises: typeof cachedPromises) => {\n        return Promise.all(promises).then((arr) => {\n          const promises = arr.map(({load, onRender, elements}) => {\n            if(!load) {\n              return;\n            }\n\n            const l = () => load().then(onRender);\n\n            if(usingOwnQueue) {\n              elements.forEach((element) => {\n                globalLazyLoadQueue.push({\n                  div: element,\n                  load: () => {\n                    elements.forEach((element) => {\n                      globalLazyLoadQueue.delete({div: element});\n                    });\n\n                    return l();\n                  }\n                });\n              });\n            } else {\n              return l();\n            }\n          });\n\n          return Promise.all(promises);\n        });\n      };\n\n      const load = () => {\n        if(middleware && !middleware()) return;\n        const cached = loadFromPromises(cachedPromises);\n        const uncached = uncachedPromisesPromise.then((promises) => loadFromPromises(promises));\n        return Promise.all([cached, uncached]);\n      };\n\n      if(lazyLoadQueue) {\n        lazyLoadQueue.push({\n          div: renderer.canvas,\n          load\n        });\n      } else {\n        load();\n      }\n\n      return Promise.all(cachedPromises).then(() => Promise.all(loadPromises)).then(() => {});\n    });\n\n    // recordPromise(loadPromise, 'render emojis: ' + docIds.length);\n\n    return loadPromise;\n  }\n\n  public setTextColor(textColor: string) {\n    this.textColor = textColor;\n  }\n\n  public static create(options: CustomEmojiRendererElementOptions) {\n    const renderer = new CustomEmojiRendererElement();\n    renderer.animationGroup = options.animationGroup;\n    renderer.size = options.customEmojiSize || mediaSizes.active.customEmoji;\n    renderer.isSelectable = options.isSelectable;\n    renderer.textColor = options.textColor;\n    renderer.observeResizeElement = options.observeResizeElement;\n    if(options.wrappingDraft) {\n      renderer.contentEditable = 'false';\n      renderer.style.height = 'inherit';\n    }\n    // const middleware = () => !!renderer.disconnectedCallback && (!options.middleware || options.middleware());\n    let middleware = options.middleware;\n    if(middleware) {\n      renderer.middlewareHelper = middleware.create();\n      middleware = renderer.middlewareHelper.get();\n      middleware.onDestroy(() => {\n        renderer.destroy?.();\n      });\n    } else {\n      // console.error('no middleware', this, options);\n      renderer.auto = true;\n      renderer.middlewareHelper = getMiddleware();\n    }\n\n    return renderer;\n  }\n}\n\nexport type CustomEmojiRenderer = CustomEmojiRendererElement;\nexport type SyncedPlayer = {\n  player: RLottiePlayer | HTMLVideoElement,\n  middlewares: Set<Middleware>,\n  pausedElements: Set<CustomEmojiElement>,\n  key: string\n};\nexport type CustomEmojiFrame = Parameters<RLottiePlayer['overrideRender']>[0] | HTMLVideoElement;\n\nexport type CustomEmojiRendererElementOptions = Partial<{\n  loadPromises: Promise<any>[],\n  customEmojiRenderer: CustomEmojiRendererElement,\n\n  isSelectable: boolean,\n  wrappingDraft: boolean,\n\n  textColor?: CustomProperty,\n  observeResizeElement?: HTMLElement\n}> & WrapSomethingOptions;\n\nconst CUSTOM_EMOJI_INSTANT_PLAY = true; // do not wait for animationIntersector\nlet emojiRenderInterval: number;\nconst emojiRenderers: Set<CustomEmojiRenderer> = new Set();\nconst syncedPlayers: Map<string, SyncedPlayer> = new Map();\nconst syncedPlayersFrames: Map<RLottiePlayer | HTMLVideoElement, CustomEmojiFrame> = new Map();\nexport const renderEmojis = (renderers = emojiRenderers) => {\n  const r = Array.from(renderers);\n  const t = r.filter((r) => r.isConnected && r.checkForAnyFrame() && !r.ignoreSettingDimensions);\n  if(!t.length) {\n    return false;\n  }\n\n  const o = t.map((renderer) => {\n    const paused = [...renderer.playersSynced.values()].reduce((acc, v) => acc + +!!v.paused, 0);\n    if(renderer.playersSynced.size === paused) {\n      return;\n    }\n\n    const offsets = renderer.getOffsets();\n    if(offsets.size) {\n      return [renderer, offsets] as const;\n    }\n  }).filter(Boolean);\n\n  for(const [renderer] of o) {\n    renderer.clearCanvas();\n  }\n\n  for(const [renderer, offsets] of o) {\n    renderer.render(offsets);\n  }\n\n  return true;\n};\nconst CUSTOM_EMOJI_FPS = 60;\nconst CUSTOM_EMOJI_FRAME_INTERVAL = 1000 / CUSTOM_EMOJI_FPS;\nconst setRenderInterval = () => {\n  if(emojiRenderInterval) {\n    return;\n  }\n\n  emojiRenderInterval = window.setInterval(renderEmojis, CUSTOM_EMOJI_FRAME_INTERVAL);\n  renderEmojis();\n};\nconst clearRenderInterval = () => {\n  if(!emojiRenderInterval) {\n    return;\n  }\n\n  clearInterval(emojiRenderInterval);\n  emojiRenderInterval = undefined;\n};\n\n(window as any).syncedPlayers = syncedPlayers;\n(window as any).emojiRenderers = emojiRenderers;\n\ncustomElements.define('custom-emoji-renderer-element', CustomEmojiRendererElement);\n","export default function encodeEntities(value: string) {\n  return value.replace(/&/g, '&amp;').replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, (value) => {\n    const hi = value.charCodeAt(0);\n    const low = value.charCodeAt(1);\n    return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';\n  }).replace(/([^\\#-~| |!])/g, (value) => { // non-alphanumeric\n    return '&#' + value.charCodeAt(0) + ';';\n  }).replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n","import encodeEntities from '../string/encodeEntities';\n\nexport default function documentFragmentToHTML(fragment: DocumentFragment) {\n  return Array.from(fragment.childNodes).map((node) => {\n    return node.nodeType === node.TEXT_NODE ? encodeEntities(node.textContent) : (node as Element).outerHTML;\n  }).join('');\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function findUpAttribute(el: any, attribute: string): HTMLElement {\n  return el.closest(`[${attribute}]`);\n  /* if(el.getAttribute(attribute) !== null) return el; // 03.02.2020\n\n  while(el.parentElement) {\n    el = el.parentElement;\n    if(el.getAttribute(attribute) !== null)\n      return el;\n  }\n  return null; */\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function findUpTag(el: any, tag: string): HTMLElement {\n  return el.closest(tag);\n  /* if(el.tagName === tag) return el; // 03.02.2020\n\n  while(el.parentElement) {\n    el = el.parentElement;\n    if(el.tagName === tag)\n      return el;\n  }\n  return null; */\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport findUpAsChild from './findUpAsChild';\n\nexport default function getCaretPosNew(input: HTMLElement, anchor?: boolean): ReturnType<typeof getCaretPosF> & {selection: Selection} {\n  const selection = document.getSelection();\n  // let {focusNode: node, focusOffset: offset} = selection;\n  const node = selection[anchor ? 'anchorNode' : 'focusNode'];\n  const offset = selection[anchor ? 'anchorOffset' : 'focusOffset'];\n  if(!findUpAsChild(node, input) && node !== input) {\n    return {selection} as any;\n  }\n\n  return {...getCaretPosF(input, node, offset), selection};\n}\n\nexport function getCaretPosF(input: HTMLElement, node: Node, offset: number) {\n  if(node === input) {\n    const childNodes = input.childNodes;\n    const childNodesLength = childNodes.length;\n    if(childNodesLength && offset >= childNodesLength) {\n      node = childNodes[childNodesLength - 1];\n      offset = (node.textContent || (node as HTMLImageElement).alt || '').length;\n    } else {\n      node = childNodes[offset];\n      offset = 0;\n    }\n  }\n\n  return {node: node as ChildNode, offset};\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MessageEntity} from '../../layer';\n\nconst CAN_COMBINE_ENTITIES: Set<MessageEntity['_']> = new Set([\n  'messageEntityBold',\n  'messageEntityItalic',\n  'messageEntityCode',\n  'messageEntityPre',\n  'messageEntityUnderline',\n  'messageEntityStrike',\n  'messageEntityBlockquote',\n  'messageEntitySpoiler'\n]);\nexport default function combineSameEntities(entities: MessageEntity[]) {\n  // entities = entities.slice();\n  for(let i = 0; i < entities.length; ++i) {\n    const entity = entities[i];\n\n    let nextEntityIdx = -1;\n    do {\n      nextEntityIdx = entities.findIndex((e, _i) => {\n        return CAN_COMBINE_ENTITIES.has(e._) && _i !== i && e._ === entity._ && (e.offset - entity.length) === entity.offset;\n      });\n\n      if(nextEntityIdx !== -1) {\n        const nextEntity = entities[nextEntityIdx];\n        entity.length += nextEntity.length;\n        entities.splice(nextEntityIdx, 1);\n      }\n    } while(nextEntityIdx !== -1);\n  }\n  // return entities;\n}\n","import {MessageEntity} from '../../layer';\n\nexport default function sortEntities(entities: MessageEntity[]) {\n  entities.sort((a, b) => {\n    return (a.offset - b.offset) || (b.length - a.length);\n  });\n}\n","const BOM = '';\n// const BOM = 'K';\nexport default BOM;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport {MessageEntity} from '../../layer';\nimport BOM from '../string/bom';\n\nexport type MarkdownType = 'bold' | 'italic' | 'underline' | 'strikethrough' | 'monospace' | 'link' | 'mentionName' | 'spoiler'/*  | 'customEmoji' */;\nexport type MarkdownTag = {\n  match: string,\n  entityName: Extract<MessageEntity['_'], 'messageEntityBold' | 'messageEntityUnderline' | 'messageEntityItalic' | 'messageEntityCode' | 'messageEntityStrike' | 'messageEntityTextUrl' | 'messageEntityMentionName' | 'messageEntitySpoiler'/*  | 'messageEntityCustomEmoji' */>;\n};\n\n// https://core.telegram.org/bots/api#html-style\nexport const markdownTags: {[type in MarkdownType]: MarkdownTag} = {\n  bold: {\n    match: '[style*=\"bold\"], [style*=\"font-weight: 700\"], [style*=\"font-weight: 600\"], [style*=\"font-weight:700\"], [style*=\"font-weight:600\"], b, strong',\n    entityName: 'messageEntityBold'\n  },\n  underline: {\n    match: '[style*=\"underline\"], u, ins',\n    entityName: 'messageEntityUnderline'\n  },\n  italic: {\n    match: '[style*=\"italic\"], i, em',\n    entityName: 'messageEntityItalic'\n  },\n  monospace: {\n    match: '[style*=\"monospace\"], [face*=\"monospace\"], pre',\n    entityName: 'messageEntityCode'\n  },\n  strikethrough: {\n    match: '[style*=\"line-through\"], [style*=\"strikethrough\"], strike, del, s',\n    entityName: 'messageEntityStrike'\n  },\n  link: {\n    match: 'A:not(.follow)',\n    entityName: 'messageEntityTextUrl'\n  },\n  mentionName: {\n    match: 'A.follow',\n    entityName: 'messageEntityMentionName'\n  },\n  spoiler: {\n    match: '[style*=\"spoiler\"]',\n    entityName: 'messageEntitySpoiler'\n  }\n  // customEmoji: {\n  //   match: '.custom-emoji',\n  //   entityName: 'messageEntityCustomEmoji'\n  // }\n};\n\nconst tabulationMatch = '[style*=\"table-cell\"], th, td';\n\n/* export function getDepth(child: Node, container?: Node) {\n  let depth = 0;\n\n  do {\n    if(child === container) {\n      return depth;\n    }\n\n    ++depth;\n  } while((child = child.parentNode) !== null);\n\n  return depth;\n} */\n\nconst BLOCK_TAGS = new Set([\n  'DIV',\n  'P',\n  'BR',\n  'LI',\n  'SECTION',\n  'H6',\n  'H5',\n  'H4',\n  'H3',\n  'H2',\n  'H1',\n  'TR',\n  'OL',\n  'UL'\n]);\n\n// const INSERT_NEW_LINE_TAGS = new Set([\n//   'OL',\n//   'UL'\n// ]);\n\nconst BOM_REG_EXP = new RegExp(BOM, 'g');\nexport const SELECTION_SEPARATOR = '\\x01';\n\nfunction checkNodeForEntity(node: Node, value: string, entities: MessageEntity[], offset: {offset: number}) {\n  const parentElement = node.parentElement;\n\n  // let closestTag: MarkdownTag, closestElementByTag: Element, closestDepth = Infinity;\n  for(const type in markdownTags) {\n    const tag = markdownTags[type as MarkdownType];\n    const closest: HTMLElement = parentElement.closest(tag.match + ', [contenteditable=\"true\"]');\n    if(closest?.getAttribute('contenteditable') !== null) {\n      /* const depth = getDepth(closest, parentElement.closest('[contenteditable]'));\n      if(closestDepth > depth) {\n        closestDepth = depth;\n        closestTag = tag;\n        closestElementByTag = closest;\n      } */\n      continue;\n    }\n\n    if(tag.entityName === 'messageEntityTextUrl') {\n      entities.push({\n        _: tag.entityName,\n        url: (closest as HTMLAnchorElement).href,\n        offset: offset.offset,\n        length: value.length\n      });\n    } else if(tag.entityName === 'messageEntityMentionName') {\n      entities.push({\n        _: tag.entityName,\n        offset: offset.offset,\n        length: value.length,\n        user_id: (closest as HTMLElement).dataset.follow.toUserId()\n      });\n    }/*  else if(tag.entityName === 'messageEntityCustomEmoji') {\n      entities.push({\n        _: tag.entityName,\n        document_id: (closest as HTMLElement).dataset.docId,\n        offset: offset.offset,\n        length: emoji.length\n      });\n    } */ else {\n      entities.push({\n        _: tag.entityName,\n        offset: offset.offset,\n        length: value.length\n      });\n    }\n  }\n}\n\nfunction isLineEmpty(line: string[]) {\n  const {length} = line;\n  if(!length) {\n    return true;\n  }\n\n  if(line[length - 1] === SELECTION_SEPARATOR && length === SELECTION_SEPARATOR.length) {\n    return true;\n  }\n\n  return false;\n}\n\nexport default function getRichElementValue(\n  node: HTMLElement,\n  lines: string[],\n  line: string[],\n  selNode?: Node,\n  selOffset?: number,\n  entities?: MessageEntity[],\n  offset = {offset: 0}\n) {\n  if(node.nodeType === node.TEXT_NODE) { // TEXT\n    let nodeValue = node.nodeValue;\n    // if(nodeValue[0] === BOM) {\n    nodeValue = nodeValue.replace(BOM_REG_EXP, '');\n    // }\n\n    /* const tabulation = node.parentElement?.closest(tabulationMatch + ', [contenteditable]');\n    if(tabulation?.getAttribute('contenteditable') === null) {\n      nodeValue += ' ';\n      // line.push('\\t');\n      // ++offset.offset;\n    } */\n\n    if(nodeValue) {\n      if(selNode === node) {\n        line.push(nodeValue.substr(0, selOffset) + SELECTION_SEPARATOR + nodeValue.substr(selOffset));\n      } else {\n        line.push(nodeValue);\n      }\n    } else if(selNode === node) {\n      line.push(SELECTION_SEPARATOR);\n    }\n\n    if(entities && nodeValue.length && node.parentNode) {\n      checkNodeForEntity(node, nodeValue, entities, offset);\n    }\n\n    offset.offset += nodeValue.length;\n    return;\n  }\n\n  if(node.nodeType !== node.ELEMENT_NODE) { // NON-ELEMENT\n    return;\n  }\n\n  const pushLine = () => {\n    lines.push(line.join(''));\n    line.length = 0;\n    ++offset.offset;\n  };\n\n  const isSelected = selNode === node;\n  const isBlock = BLOCK_TAGS.has(node.tagName);\n  if(isBlock && ((line.length && line[line.length - 1].slice(-1) !== '\\n') || node.tagName === 'BR'/*  || (BLOCK_TAGS.has(node.tagName) && lines.length) */)) {\n    pushLine();\n  } else {\n    const alt = node.dataset.stickerEmoji || (node as HTMLImageElement).alt;\n    const stickerEmoji = node.dataset.stickerEmoji;\n\n    if(alt && entities) {\n      checkNodeForEntity(node, alt, entities, offset);\n    }\n\n    if(stickerEmoji && entities) {\n      entities.push({\n        _: 'messageEntityCustomEmoji',\n        document_id: node.dataset.docId,\n        offset: offset.offset,\n        length: alt.length\n      });\n    }\n\n    if(alt) {\n      line.push(alt);\n      offset.offset += alt.length;\n    }\n  }\n\n  if(isSelected && !selOffset) {\n    line.push(SELECTION_SEPARATOR);\n  }\n\n  const isTableCell = node.matches(tabulationMatch);\n  const wasEntitiesLength = entities?.length;\n  const wasLinesLength = lines.length;\n  let wasNodeEmpty = true;\n\n  let curChild = node.firstChild as HTMLElement;\n  while(curChild) {\n    getRichElementValue(curChild, lines, line, selNode, selOffset, entities, offset);\n    curChild = curChild.nextSibling as any;\n\n    if(!isLineEmpty(line)) {\n      wasNodeEmpty = false;\n    }\n  }\n\n  // can test on text with list (https://www.who.int/initiatives/sports-and-health)\n  if(wasNodeEmpty && node.textContent?.replace(/[\\r\\n]/g, '')) {\n    wasNodeEmpty = false;\n  }\n\n  if(isSelected && selOffset) {\n    line.push(SELECTION_SEPARATOR);\n  }\n\n  if(isTableCell && node.nextSibling && !isLineEmpty(line)) {\n    line.push(' ');\n    ++offset.offset;\n\n    // * combine entities such as url after adding space\n    if(wasEntitiesLength !== undefined) {\n      for(let i = wasEntitiesLength, length = entities.length; i < length; ++i) {\n        ++entities[i].length;\n      }\n    }\n  }\n\n  if(isBlock && !wasNodeEmpty) {\n    pushLine();\n  }\n\n  if(!wasNodeEmpty && node.tagName === 'P' && node.nextSibling) {\n    lines.push('');\n    ++offset.offset;\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport {MessageEntity} from '../../layer';\nimport combineSameEntities from '../../lib/richTextProcessor/combineSameEntities';\nimport sortEntities from '../../lib/richTextProcessor/sortEntities';\nimport getRichElementValue, {SELECTION_SEPARATOR} from './getRichElementValue';\n\nexport function getCaretPos(field: HTMLElement) {\n  const sel = window.getSelection();\n  let selNode: Node;\n  let selOffset: number;\n  if(sel?.rangeCount) {\n    const range = sel.getRangeAt(0);\n    const startOffset = range.startOffset;\n    if(\n      range.startContainer &&\n      range.startContainer == range.endContainer &&\n      startOffset == range.endOffset\n    ) {\n      // * if focused on img, or caret has been set via placeCaretAtEnd\n      const possibleChildrenFocusOffset = startOffset - 1;\n      const childNodes = field.childNodes;\n      if(range.startContainer === field && childNodes[possibleChildrenFocusOffset]) {\n        selNode = childNodes[possibleChildrenFocusOffset];\n        selOffset = 0;\n\n        for(let i = 0; i < range.endOffset; ++i) {\n          const node = childNodes[i];\n          const value = node.nodeValue || (node as HTMLImageElement).alt;\n\n          if(value) {\n            selOffset += value.length;\n          }\n        }\n      } else {\n        selNode = range.startContainer;\n        selOffset = startOffset;\n      }\n    }\n  }\n\n  return {node: selNode, offset: selOffset};\n}\n\nexport default function getRichValueWithCaret(\n  field: HTMLElement | DocumentFragment,\n  withEntities = true,\n  withCaret = true\n) {\n  const lines: string[] = [];\n  const line: string[] = [];\n\n  const {node: selNode, offset: selOffset} = !(field instanceof DocumentFragment) && withCaret && getCaretPos(field);\n\n  const entities: MessageEntity[] = withEntities ? [] : undefined;\n  const offset = {offset: 0};\n  if(field instanceof DocumentFragment) {\n    let curChild = field.firstChild as HTMLElement;\n    while(curChild) {\n      getRichElementValue(curChild, lines, line, selNode, selOffset, entities, offset);\n      curChild = curChild.nextSibling as any;\n    }\n  } else {\n    getRichElementValue(field, lines, line, selNode, selOffset, entities, offset);\n  }\n\n  if(line.length) {\n    lines.push(line.join(''));\n  }\n\n  let value = lines.join('\\n');\n  const caretPos = value.indexOf(SELECTION_SEPARATOR);\n  if(caretPos !== -1) {\n    value = value.substr(0, caretPos) + value.substr(caretPos + 1);\n  }\n  value = value.replace(/\\u00A0/g, ' ');\n\n  if(entities?.length) {\n    // ! cannot do that here because have the same check before the sending in RichTextProcessor.parseMarkdown\n    /* const entity = entities[entities.length - 1];\n    const length = value.length;\n    const trimmedLength = value.trimRight().length;\n    if(length !== trimmedLength) {\n      entity.length -= length - trimmedLength;\n    } */\n\n    combineSameEntities(entities);\n    sortEntities(entities);\n  }\n\n  return {value, entities, caretPos};\n}\n\nMOUNT_CLASS_TO.getRichValueWithCaret = getRichValueWithCaret;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function isInputEmpty(element: HTMLElement) {\n  if(element.isContentEditable || element.tagName !== 'INPUT') {\n    /* const value = element.innerText;\n\n    return !value.trim() && !serializeNodes(Array.from(element.childNodes)).trim(); */\n    // return !getRichValueWithCaret(element, false, false).value.trim();\n    return !element.textContent.trim() && !element.querySelector('.emoji, .custom-emoji, .custom-emoji-placeholder');\n  } else {\n    return !(element as HTMLInputElement).value.trim();\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {EMOJI_VERSION} from '../environment/emojiVersionsSupport';\n\nexport const EmojiVersions: {[version in EMOJI_VERSION]: {[emoji: string]: number}} = {'14':{'1f6dd':4867, '1f6de':4916, '1f6df':4923, '1f7f0':62832, '1f979':183, '1f9cc':1557, '1fa7b':61332, '1fa7c':61330, '1faa9':51093, '1faaa':61364, '1faab':61189, '1faac':51085, '1fab7':2651, '1fab8':2631, '1fab9':2672, '1faba':2673, '1fac3':1520, '1fac4':1521, '1fac5':1505, '1fad7':3793, '1fad8':3707, '1fad9':3804, '1fae0':111, '1fae1':136, '1fae2':132, '1fae3':133, '1fae4':174, '1fae5':142, '1fae6':1385, '1fae7':61353, '1faf0':1341, '1faf1':1332, '1faf2':1333, '1faf3':1334, '1faf4':1335, '1faf5':1351, '1faf6':1360, '1faf1-1f3fb-200d-1faf2-1f3fc':0, '1faf1-1f3fb-200d-1faf2-1f3fd':0, '1faf1-1f3fb-200d-1faf2-1f3fe':0, '1faf1-1f3fb-200d-1faf2-1f3ff':0, '1faf1-1f3fc-200d-1faf2-1f3fb':0, '1faf1-1f3fc-200d-1faf2-1f3fd':0, '1faf1-1f3fc-200d-1faf2-1f3fe':0, '1faf1-1f3fc-200d-1faf2-1f3ff':0, '1faf1-1f3fd-200d-1faf2-1f3fb':0, '1faf1-1f3fd-200d-1faf2-1f3fc':0, '1faf1-1f3fd-200d-1faf2-1f3fe':0, '1faf1-1f3fd-200d-1faf2-1f3ff':0, '1faf1-1f3fe-200d-1faf2-1f3fb':0, '1faf1-1f3fe-200d-1faf2-1f3fc':0, '1faf1-1f3fe-200d-1faf2-1f3fd':0, '1faf1-1f3fe-200d-1faf2-1f3ff':0, '1faf1-1f3ff-200d-1faf2-1f3fb':0, '1faf1-1f3ff-200d-1faf2-1f3fc':0, '1faf1-1f3ff-200d-1faf2-1f3fd':0, '1faf1-1f3ff-200d-1faf2-1f3fe':0, '1fac3-1f3fb':0, '1fac3-1f3fc':0, '1fac3-1f3fd':0, '1fac3-1f3fe':0, '1fac3-1f3ff':0, '1fac4-1f3fb':0, '1fac4-1f3fc':0, '1fac4-1f3fd':0, '1fac4-1f3fe':0, '1fac4-1f3ff':0, '1fac5-1f3fb':0, '1fac5-1f3fc':0, '1fac5-1f3fd':0, '1fac5-1f3fe':0, '1fac5-1f3ff':0, '1faf0-1f3fb':0, '1faf0-1f3fc':0, '1faf0-1f3fd':0, '1faf0-1f3fe':0, '1faf0-1f3ff':0, '1faf1-1f3fb':0, '1faf1-1f3fc':0, '1faf1-1f3fd':0, '1faf1-1f3fe':0, '1faf1-1f3ff':0, '1faf2-1f3fb':0, '1faf2-1f3fc':0, '1faf2-1f3fd':0, '1faf2-1f3fe':0, '1faf2-1f3ff':0, '1faf3-1f3fb':0, '1faf3-1f3fc':0, '1faf3-1f3fd':0, '1faf3-1f3fe':0, '1faf3-1f3ff':0, '1faf4-1f3fb':0, '1faf4-1f3fc':0, '1faf4-1f3fd':0, '1faf4-1f3fe':0, '1faf4-1f3ff':0, '1faf5-1f3fb':0, '1faf5-1f3fc':0, '1faf5-1f3fd':0, '1faf5-1f3fe':0, '1faf5-1f3ff':0, '1faf6-1f3fb':0, '1faf6-1f3fc':0, '1faf6-1f3fd':0, '1faf6-1f3fe':0, '1faf6-1f3ff':0}, '':{'2049':62835, '2122':62863, '2139':62888, '2194':62764, '2195':62763, '2196':62762, '2197':62756, '2198':62758, '2199':62760, '2328':61194, '2600':4990, '2601':4998, '2602':41013, '2603':41018, '2604':41020, '2611':62851, '2614':41014, '2615':3781, '2618':2667, '2620':1106, '2622':62753, '2623':62754, '2626':62783, '2638':62780, '2639':177, '2648':62788, '2649':62789, '2650':62796, '2651':62797, '2652':62798, '2653':62799, '2660':51095, '2663':51098, '2665':51096, '2666':51097, '2668':4865, '2692':61297, '2693':4922, '2694':61300, '2696':61311, '2697':61319, '2699':61309, '2702':61284, '2705':62850, '2708':4931, '2709':61245, '2712':61259, '2714':62852, '2716':62828, '2721':62779, '2728':51029, '2733':62858, '2734':62859, '2744':41017, '2747':62860, '2753':62836, '2754':62837, '2755':62838, '2757':62839, '2763':1137, '2764':1141, '2795':62829, '2796':62830, '2797':62831, '2934':62767, '2935':62768, '3030':62840, '3297':62912, '3299':62913, '0023-20e3':62864, '002a-20e3':62865, '0030-20e3':62866, '0031-20e3':62867, '0032-20e3':62868, '0033-20e3':62869, '0034-20e3':62870, '0035-20e3':62871, '0036-20e3':62872, '0037-20e3':62873, '0038-20e3':62874, '0039-20e3':62875, '00a9':62861, '00ae':62862, '1f004':51101, '1f0cf':51100, '1f170':62882, '1f171':62884, '1f17e':62893, '1f17f':62895, '1f18e':62883, '1f191':62885, '1f192':62886, '1f193':62887, '1f194':62889, '1f195':62891, '1f196':62892, '1f197':62894, '1f198':62896, '1f199':62897, '1f19a':62898, '1f1e6-1f1e8':71594, '1f1e6-1f1e9':71595, '1f1e6-1f1ea':71596, '1f1e6-1f1eb':71597, '1f1e6-1f1ec':71598, '1f1e6-1f1ee':71599, '1f1e6-1f1f1':71600, '1f1e6-1f1f2':71601, '1f1e6-1f1f4':71602, '1f1e6-1f1f6':71603, '1f1e6-1f1f7':71604, '1f1e6-1f1f8':71605, '1f1e6-1f1f9':71606, '1f1e6-1f1fa':71607, '1f1e6-1f1fc':71608, '1f1e6-1f1fd':71609, '1f1e6-1f1ff':71610, '1f1e7-1f1e6':71611, '1f1e7-1f1e7':71612, '1f1e7-1f1e9':71613, '1f1e7-1f1ea':71614, '1f1e7-1f1eb':71615, '1f1e7-1f1ec':71616, '1f1e7-1f1ed':71617, '1f1e7-1f1ee':71618, '1f1e7-1f1ef':71619, '1f1e7-1f1f1':71620, '1f1e7-1f1f2':71621, '1f1e7-1f1f3':71622, '1f1e7-1f1f4':71623, '1f1e7-1f1f6':71624, '1f1e7-1f1f7':71625, '1f1e7-1f1f8':71626, '1f1e7-1f1f9':71627, '1f1e7-1f1fb':71628, '1f1e7-1f1fc':71629, '1f1e7-1f1fe':71630, '1f1e7-1f1ff':71631, '1f1e8-1f1e6':71632, '1f1e8-1f1e8':71633, '1f1e8-1f1e9':71634, '1f1e8-1f1eb':71635, '1f1e8-1f1ec':71636, '1f1e8-1f1ed':71637, '1f1e8-1f1ee':71638, '1f1e8-1f1f0':71639, '1f1e8-1f1f1':71640, '1f1e8-1f1f2':71641, '1f1e8-1f1f3':71642, '1f1e8-1f1f4':71643, '1f1e8-1f1f5':71644, '1f1e8-1f1f7':71645, '1f1e8-1f1fa':71646, '1f1e8-1f1fb':71647, '1f1e8-1f1fc':71648, '1f1e8-1f1fd':71649, '1f1e8-1f1fe':71650, '1f1e8-1f1ff':71651, '1f1e9-1f1ea':71652, '1f1e9-1f1ec':71653, '1f1e9-1f1ef':71654, '1f1e9-1f1f0':71655, '1f1e9-1f1f2':71656, '1f1e9-1f1f4':71657, '1f1e9-1f1ff':71658, '1f1ea-1f1e6':71659, '1f1ea-1f1e8':71660, '1f1ea-1f1ea':71661, '1f1ea-1f1ec':71662, '1f1ea-1f1ed':71663, '1f1ea-1f1f7':71664, '1f1ea-1f1f8':71665, '1f1ea-1f1f9':71666, '1f1ea-1f1fa':71667, '1f1eb-1f1ee':71668, '1f1eb-1f1ef':71669, '1f1eb-1f1f0':71670, '1f1eb-1f1f2':71671, '1f1eb-1f1f4':71672, '1f1eb-1f1f7':71673, '1f1ec-1f1e6':71674, '1f1ec-1f1e7':71675, '1f1ec-1f1e9':71676, '1f1ec-1f1ea':71677, '1f1ec-1f1eb':71678, '1f1ec-1f1ec':71679, '1f1ec-1f1ed':71680, '1f1ec-1f1ee':71681, '1f1ec-1f1f1':71682, '1f1ec-1f1f2':71683, '1f1ec-1f1f3':71684, '1f1ec-1f1f5':71685, '1f1ec-1f1f6':71686, '1f1ec-1f1f7':71687, '1f1ec-1f1f8':71688, '1f1ec-1f1f9':71689, '1f1ec-1f1fa':71690, '1f1ec-1f1fc':71691, '1f1ec-1f1fe':71692, '1f1ed-1f1f0':71693, '1f1ed-1f1f2':71694, '1f1ed-1f1f3':71695, '1f1ed-1f1f7':71696, '1f1ed-1f1f9':71697, '1f1ed-1f1fa':71698, '1f1ee-1f1e8':71699, '1f1ee-1f1e9':71700, '1f1ee-1f1ea':71701, '1f1ee-1f1f1':71702, '1f1ee-1f1f2':71703, '1f1ee-1f1f3':71704, '1f1ee-1f1f4':71705, '1f1ee-1f1f6':71706, '1f1ee-1f1f7':71707, '1f1ee-1f1f8':71708, '1f1ee-1f1f9':71709, '1f1ef-1f1ea':71710, '1f1ef-1f1f2':71711, '1f1ef-1f1f4':71712, '1f1ef-1f1f5':71713, '1f1f0-1f1ea':71714, '1f1f0-1f1ec':71715, '1f1f0-1f1ed':71716, '1f1f0-1f1ee':71717, '1f1f0-1f1f2':71718, '1f1f0-1f1f3':71719, '1f1f0-1f1f5':71720, '1f1f0-1f1f7':71721, '1f1f0-1f1fc':71722, '1f1f0-1f1fe':71723, '1f1f0-1f1ff':71724, '1f1f1-1f1e6':71725, '1f1f1-1f1e7':71726, '1f1f1-1f1e8':71727, '1f1f1-1f1ee':71728, '1f1f1-1f1f0':71729, '1f1f1-1f1f7':71730, '1f1f1-1f1f8':71731, '1f1f1-1f1f9':71732, '1f1f1-1f1fa':71733, '1f1f1-1f1fb':71734, '1f1f1-1f1fe':71735, '1f1f2-1f1e6':71736, '1f1f2-1f1e8':71737, '1f1f2-1f1e9':71738, '1f1f2-1f1ea':71739, '1f1f2-1f1eb':71740, '1f1f2-1f1ec':71741, '1f1f2-1f1ed':71742, '1f1f2-1f1f0':71743, '1f1f2-1f1f1':71744, '1f1f2-1f1f2':71745, '1f1f2-1f1f3':71746, '1f1f2-1f1f4':71747, '1f1f2-1f1f5':71748, '1f1f2-1f1f6':71749, '1f1f2-1f1f7':71750, '1f1f2-1f1f8':71751, '1f1f2-1f1f9':71752, '1f1f2-1f1fa':71753, '1f1f2-1f1fb':71754, '1f1f2-1f1fc':71755, '1f1f2-1f1fd':71756, '1f1f2-1f1fe':71757, '1f1f2-1f1ff':71758, '1f1f3-1f1e6':71759, '1f1f3-1f1e8':71760, '1f1f3-1f1ea':71761, '1f1f3-1f1eb':71762, '1f1f3-1f1ec':71763, '1f1f3-1f1ee':71764, '1f1f3-1f1f1':71765, '1f1f3-1f1f4':71766, '1f1f3-1f1f5':71767, '1f1f3-1f1f7':71768, '1f1f3-1f1fa':71769, '1f1f3-1f1ff':71770, '1f1f4-1f1f2':71771, '1f1f5-1f1e6':71772, '1f1f5-1f1ea':71773, '1f1f5-1f1eb':71774, '1f1f5-1f1ec':71775, '1f1f5-1f1ed':71776, '1f1f5-1f1f0':71777, '1f1f5-1f1f1':71778, '1f1f5-1f1f2':71779, '1f1f5-1f1f3':71780, '1f1f5-1f1f7':71781, '1f1f5-1f1f8':71782, '1f1f5-1f1f9':71783, '1f1f5-1f1fc':71784, '1f1f5-1f1fe':71785, '1f1f6-1f1e6':71786, '1f1f7-1f1ea':71787, '1f1f7-1f1f4':71788, '1f1f7-1f1f8':71789, '1f1f7-1f1fa':71790, '1f1f7-1f1fc':71791, '1f1f8-1f1e6':71792, '1f1f8-1f1e7':71793, '1f1f8-1f1e8':71794, '1f1f8-1f1e9':71795, '1f1f8-1f1ea':71796, '1f1f8-1f1ec':71797, '1f1f8-1f1ed':71798, '1f1f8-1f1ee':71799, '1f1f8-1f1ef':71800, '1f1f8-1f1f0':71801, '1f1f8-1f1f1':71802, '1f1f8-1f1f2':71803, '1f1f8-1f1f3':71804, '1f1f8-1f1f4':71805, '1f1f8-1f1f7':71806, '1f1f8-1f1f8':71807, '1f1f8-1f1f9':71808, '1f1f8-1f1fb':71809, '1f1f8-1f1fd':71810, '1f1f8-1f1fe':71811, '1f1f8-1f1ff':71812, '1f1f9-1f1e6':71813, '1f1f9-1f1e8':71814, '1f1f9-1f1e9':71815, '1f1f9-1f1eb':71816, '1f1f9-1f1ec':71817, '1f1f9-1f1ed':71818, '1f1f9-1f1ef':71819, '1f1f9-1f1f0':71820, '1f1f9-1f1f1':71821, '1f1f9-1f1f2':71822, '1f1f9-1f1f3':71823, '1f1f9-1f1f4':71824, '1f1f9-1f1f7':71825, '1f1f9-1f1f9':71826, '1f1f9-1f1fb':71827, '1f1f9-1f1fc':71828, '1f1f9-1f1ff':71829, '1f1fa-1f1e6':71830, '1f1fa-1f1ec':71831, '1f1fa-1f1f2':71832, '1f1fa-1f1f3':71833, '1f1fa-1f1f8':71834, '1f1fa-1f1fe':71835, '1f1fa-1f1ff':71836, '1f1fb-1f1e6':71837, '1f1fb-1f1e8':71838, '1f1fb-1f1ea':71839, '1f1fb-1f1ec':71840, '1f1fb-1f1ee':71841, '1f1fb-1f1f3':71842, '1f1fb-1f1fa':71843, '1f1fc-1f1eb':71844, '1f1fc-1f1f8':71845, '1f1fd-1f1f0':71846, '1f1fe-1f1ea':71847, '1f1fe-1f1f9':71848, '1f1ff-1f1e6':71849, '1f1ff-1f1f2':71850, '1f1ff-1f1fc':71851, '1f201':62899, '1f202':62900, '1f21a':62906, '1f22f':62903, '1f232':62907, '1f233':62911, '1f234':62910, '1f235':62915, '1f236':62902, '1f237':62901, '1f238':62909, '1f239':62905, '1f23a':62914, '1f250':62904, '1f251':62908, '1f300':41010, '1f301':4857, '1f302':41012, '1f303':4858, '1f304':4860, '1f305':4861, '1f306':4862, '1f307':4863, '1f308':41011, '1f309':4864, '1f30a':41023, '1f30b':4815, '1f30c':4997, '1f30d':4806, '1f30e':4807, '1f30f':4808, '1f310':4809, '1f311':4977, '1f312':4978, '1f313':4979, '1f314':4980, '1f315':4981, '1f316':4982, '1f317':4983, '1f318':4984, '1f319':4985, '1f31a':4986, '1f31b':4987, '1f31c':4988, '1f31d':4991, '1f31e':4992, '1f31f':4995, '1f320':4996, '1f321':4989, '1f324':41001, '1f325':41002, '1f326':41003, '1f327':41004, '1f328':41005, '1f329':41006, '1f32a':41007, '1f32b':41008, '1f32c':41009, '1f32d':3725, '1f32e':3727, '1f32f':3728, '1f330':3708, '1f331':2659, '1f332':2661, '1f333':2662, '1f334':2663, '1f335':2664, '1f336':3698, '1f337':2658, '1f338':2649, '1f339':2653, '1f33a':2655, '1f33b':2656, '1f33c':2657, '1f33d':3697, '1f33e':2665, '1f33f':2666, '1f340':2668, '1f341':2669, '1f342':2670, '1f343':2671, '1f344':3705, '1f345':3690, '1f346':3694, '1f347':3674, '1f348':3675, '1f349':3676, '1f34a':3677, '1f34b':3678, '1f34c':3679, '1f34d':3680, '1f34e':3682, '1f34f':3683, '1f350':3684, '1f351':3685, '1f352':3686, '1f353':3687, '1f354':3722, '1f355':3724, '1f356':3718, '1f357':3719, '1f358':3744, '1f359':3745, '1f35a':3746, '1f35b':3747, '1f35c':3748, '1f35d':3749, '1f35e':3709, '1f35f':3723, '1f360':3750, '1f361':3756, '1f362':3751, '1f363':3752, '1f364':3753, '1f365':3754, '1f366':3765, '1f367':3766, '1f368':3767, '1f369':3768, '1f36a':3769, '1f36b':3774, '1f36c':3775, '1f36d':3776, '1f36e':3777, '1f36f':3778, '1f370':3771, '1f371':3743, '1f372':3735, '1f373':3733, '1f374':3801, '1f375':3783, '1f376':3784, '1f377':3786, '1f378':3787, '1f379':3788, '1f37a':3789, '1f37b':3790, '1f37c':3779, '1f37d':3800, '1f37e':3785, '1f37f':3739, '1f380':51040, '1f381':51041, '1f382':3770, '1f383':51024, '1f384':51025, '1f385':1527, '1f386':51026, '1f387':51027, '1f388':51030, '1f389':51031, '1f38a':51032, '1f38b':51033, '1f38c':71588, '1f38d':51034, '1f38e':51035, '1f38f':51036, '1f390':51037, '1f391':51038, '1f392':61134, '1f393':61147, '1f396':51045, '1f397':51042, '1f399':61167, '1f39a':61168, '1f39b':61169, '1f39e':61203, '1f39f':51043, '1f3a0':4866, '1f3a1':4868, '1f3a2':4869, '1f3a3':51072, '1f3a4':61170, '1f3a5':61202, '1f3a6':62819, '1f3a7':61171, '1f3a8':51105, '1f3a9':61146, '1f3aa':4871, '1f3ab':51044, '1f3ac':61205, '1f3ad':51103, '1f3ae':51086, '1f3af':51078, '1f3b0':51088, '1f3b1':51081, '1f3b2':51089, '1f3b3':51060, '1f3b4':51102, '1f3b5':61165, '1f3b6':61166, '1f3b7':61173, '1f3b8':61175, '1f3b9':61176, '1f3ba':61177, '1f3bb':61178, '1f3bc':61164, '1f3bd':51074, '1f3be':51058, '1f3bf':51075, '1f3c0':51054, '1f3c1':71586, '1f3c2':1600, '1f3c3-200d-2640':1584, '1f3c3-200d-2642':1583, '1f3c3':1582, '1f3c4-200d-2640':1606, '1f3c4-200d-2642':1605, '1f3c4':1604, '1f3c5':51047, '1f3c6':51046, '1f3c7':1598, '1f3c8':51056, '1f3c9':51057, '1f3ca-200d-2640':1612, '1f3ca-200d-2642':1611, '1f3ca':1610, '1f3cb-200d-2640':1618, '1f3cb-200d-2642':1617, '1f3cb':1616, '1f3cc-200d-2640':1603, '1f3cc-200d-2642':1602, '1f3cc':1601, '1f3cd':4902, '1f3ce':4901, '1f3cf':51061, '1f3d0':51055, '1f3d1':51062, '1f3d2':51063, '1f3d3':51065, '1f3d4':4813, '1f3d5':4817, '1f3d6':4818, '1f3d7':4824, '1f3d8':4829, '1f3d9':4859, '1f3da':4830, '1f3db':4823, '1f3dc':4819, '1f3dd':4820, '1f3de':4821, '1f3df':4822, '1f3e0':4831, '1f3e1':4832, '1f3e2':4833, '1f3e3':4834, '1f3e4':4835, '1f3e5':4836, '1f3e6':4837, '1f3e7':62729, '1f3e8':4838, '1f3e9':4839, '1f3ea':4840, '1f3eb':4841, '1f3ec':4842, '1f3ed':4843, '1f3ee':61216, '1f3ef':4844, '1f3f0':4845, '1f3f3-200d-1f308':71591, '1f3f3-200d-26a7':71592, '1f3f3':71590, '1f3f4-200d-2620':71593, '1f3f4-e0067-e0062-e0065-e006e-e0067-e007f':71852, '1f3f4-e0067-e0062-e0073-e0063-e0074-e007f':71853, '1f3f4-e0067-e0062-e0077-e006c-e0073-e007f':71854, '1f3f4':71589, '1f3f5':2652, '1f3f7':61234, '1f3f8':51066, '1f3f9':61303, '1f3fa':3805, '1f3fb':9525, '1f3fc':9526, '1f3fd':9527, '1f3fe':9528, '1f3ff':9529, '1f400':2576, '1f401':2575, '1f402':2556, '1f403':2557, '1f404':2558, '1f405':2547, '1f406':2548, '1f407':2579, '1f408-200d-2b1b':2544, '1f408':2543, '1f409':2618, '1f40a':2613, '1f40b':2622, '1f40c':2632, '1f40d':2616, '1f40e':2550, '1f40f':2563, '1f410':2565, '1f411':2564, '1f412':2531, '1f413':2596, '1f414':2595, '1f415-200d-1f9ba':2537, '1f415':2535, '1f416':2560, '1f417':2561, '1f418':2570, '1f419':2629, '1f41a':2630, '1f41b':2634, '1f41c':2635, '1f41d':2636, '1f41e':2638, '1f41f':2625, '1f420':2626, '1f421':2627, '1f422':2614, '1f423':2597, '1f424':2598, '1f425':2599, '1f426':2600, '1f427':2601, '1f428':2586, '1f429':2538, '1f42a':2566, '1f42b':2567, '1f42c':2623, '1f42d':2574, '1f42e':2555, '1f42f':2546, '1f430':2578, '1f431':2542, '1f432':2617, '1f433':2621, '1f434':2549, '1f435':2530, '1f436':2534, '1f437':2559, '1f438':2612, '1f439':2577, '1f43a':2539, '1f43b-200d-2744':2585, '1f43b':2584, '1f43c':2587, '1f43d':2562, '1f43e':2593, '1f43f':2580, '1f440':1381, '1f441-200d-1f5e8':1159, '1f441':1382, '1f442':1373, '1f443':1375, '1f444':1384, '1f445':1383, '1f446':1347, '1f447':1349, '1f448':1345, '1f449':1346, '1f44a':1355, '1f44b':1327, '1f44c':1336, '1f44d':1352, '1f44e':1353, '1f44f':1358, '1f450':1361, '1f451':61144, '1f452':61145, '1f453':61110, '1f454':61115, '1f455':61116, '1f456':61117, '1f457':61122, '1f458':61123, '1f459':61128, '1f45a':61129, '1f45b':61130, '1f45c':61131, '1f45d':61132, '1f45e':61136, '1f45f':61137, '1f460':61140, '1f461':61141, '1f462':61143, '1f463':1687, '1f464':1684, '1f465':1685, '1f466':1388, '1f467':1389, '1f468-200d-1f33e':1457, '1f468-200d-1f373':1460, '1f468-200d-1f37c':1524, '1f468-200d-1f393':1448, '1f468-200d-1f3a4':1478, '1f468-200d-1f3a8':1481, '1f468-200d-1f3eb':1451, '1f468-200d-1f3ed':1466, '1f468-200d-1f466-200d-1f466':1674, '1f468-200d-1f466':1673, '1f468-200d-1f467-200d-1f466':1676, '1f468-200d-1f467-200d-1f467':1677, '1f468-200d-1f467':1675, '1f468-200d-1f468-200d-1f466':1663, '1f468-200d-1f468-200d-1f466-200d-1f466':1666, '1f468-200d-1f468-200d-1f467':1664, '1f468-200d-1f468-200d-1f467-200d-1f466':1665, '1f468-200d-1f468-200d-1f467-200d-1f467':1667, '1f468-200d-1f469-200d-1f466':1658, '1f468-200d-1f469-200d-1f466-200d-1f466':1661, '1f468-200d-1f469-200d-1f467':1659, '1f468-200d-1f469-200d-1f467-200d-1f466':1660, '1f468-200d-1f469-200d-1f467-200d-1f467':1662, '1f468-200d-1f4bb':1475, '1f468-200d-1f4bc':1469, '1f468-200d-1f527':1463, '1f468-200d-1f52c':1472, '1f468-200d-1f680':1487, '1f468-200d-1f692':1490, '1f468-200d-1f9af':1574, '1f468-200d-1f9b0':1396, '1f468-200d-1f9b1':1397, '1f468-200d-1f9b2':1399, '1f468-200d-1f9b3':1398, '1f468-200d-1f9bc':1577, '1f468-200d-1f9bd':1580, '1f468-200d-2695':1445, '1f468-200d-2696':1454, '1f468-200d-2708':1484, '1f468-200d-2764-200d-1f468':1655, '1f468-200d-2764-200d-1f48b-200d-1f468':1651, '1f468':1392, '1f469-200d-1f33e':1458, '1f469-200d-1f373':1461, '1f469-200d-1f37c':1523, '1f469-200d-1f393':1449, '1f469-200d-1f3a4':1479, '1f469-200d-1f3a8':1482, '1f469-200d-1f3eb':1452, '1f469-200d-1f3ed':1467, '1f469-200d-1f466-200d-1f466':1679, '1f469-200d-1f466':1678, '1f469-200d-1f467-200d-1f466':1681, '1f469-200d-1f467-200d-1f467':1682, '1f469-200d-1f467':1680, '1f469-200d-1f469-200d-1f466':1668, '1f469-200d-1f469-200d-1f466-200d-1f466':1671, '1f469-200d-1f469-200d-1f467':1669, '1f469-200d-1f469-200d-1f467-200d-1f466':1670, '1f469-200d-1f469-200d-1f467-200d-1f467':1672, '1f469-200d-1f4bb':1476, '1f469-200d-1f4bc':1470, '1f469-200d-1f527':1464, '1f469-200d-1f52c':1473, '1f469-200d-1f680':1488, '1f469-200d-1f692':1491, '1f469-200d-1f9af':1575, '1f469-200d-1f9b0':1401, '1f469-200d-1f9b1':1403, '1f469-200d-1f9b2':1407, '1f469-200d-1f9b3':1405, '1f469-200d-1f9bc':1578, '1f469-200d-1f9bd':1581, '1f469-200d-2695':1446, '1f469-200d-2696':1455, '1f469-200d-2708':1485, '1f469-200d-2764-200d-1f468':1654, '1f469-200d-2764-200d-1f469':1656, '1f469-200d-2764-200d-1f48b-200d-1f468':1650, '1f469-200d-2764-200d-1f48b-200d-1f469':1652, '1f469':1400, '1f46a':1657, '1f46b':1647, '1f46c':1648, '1f46d':1646, '1f46e-200d-2640':1494, '1f46e-200d-2642':1493, '1f46e':1492, '1f46f-200d-2640':1590, '1f46f-200d-2642':1589, '1f46f':1588, '1f470-200d-2640':1518, '1f470-200d-2642':1517, '1f470':1516, '1f471-200d-2640':1409, '1f471-200d-2642':1410, '1f471':1391, '1f472':1511, '1f473-200d-2640':1510, '1f473-200d-2642':1509, '1f473':1508, '1f474':1412, '1f475':1413, '1f476':1386, '1f477-200d-2640':1504, '1f477-200d-2642':1503, '1f477':1502, '1f478':1507, '1f479':1109, '1f47a':1110, '1f47b':1111, '1f47c':1526, '1f47d':1112, '1f47e':1113, '1f47f':1104, '1f480':1105, '1f481-200d-2640':1428, '1f481-200d-2642':1427, '1f481':1426, '1f482-200d-2640':1500, '1f482-200d-2642':1499, '1f482':1498, '1f483':1585, '1f484':61152, '1f485':1366, '1f486-200d-2640':1560, '1f486-200d-2642':1559, '1f486':1558, '1f487-200d-2640':1563, '1f487-200d-2642':1562, '1f487':1561, '1f488':4870, '1f489':61326, '1f48a':61328, '1f48b':1127, '1f48c':1128, '1f48d':61153, '1f48e':61154, '1f48f':1649, '1f490':2648, '1f491':1653, '1f492':4846, '1f493':1133, '1f494':1138, '1f495':1135, '1f496':1131, '1f497':1132, '1f498':1129, '1f499':1145, '1f49a':1144, '1f49b':1143, '1f49c':1146, '1f49d':1130, '1f49e':1134, '1f49f':1136, '1f4a0':62946, '1f4a1':61214, '1f4a2':1151, '1f4a3':1157, '1f4a4':1163, '1f4a5':1152, '1f4a6':1154, '1f4a7':41022, '1f4a8':1155, '1f4a9':1107, '1f4aa':1368, '1f4ab':1153, '1f4ac':1158, '1f4ad':1162, '1f4ae':2650, '1f4af':1150, '1f4b0':61235, '1f4b1':62841, '1f4b2':62842, '1f4b3':61242, '1f4b4':61237, '1f4b5':61238, '1f4b6':61239, '1f4b7':61240, '1f4b8':61241, '1f4b9':61244, '1f4ba':4936, '1f4bb':61191, '1f4bc':61265, '1f4bd':61197, '1f4be':61198, '1f4bf':61199, '1f4c0':61200, '1f4c1':61266, '1f4c2':61267, '1f4c3':61227, '1f4c4':61229, '1f4c5':61269, '1f4c6':61270, '1f4c7':61273, '1f4c8':61274, '1f4c9':61275, '1f4ca':61276, '1f4cb':61277, '1f4cc':61278, '1f4cd':61279, '1f4ce':61280, '1f4cf':61282, '1f4d0':61283, '1f4d1':61232, '1f4d2':61226, '1f4d3':61225, '1f4d4':61218, '1f4d5':61219, '1f4d6':61220, '1f4d7':61221, '1f4d8':61222, '1f4d9':61223, '1f4da':61224, '1f4db':62847, '1f4dc':61228, '1f4dd':61264, '1f4de':61185, '1f4df':61186, '1f4e0':61187, '1f4e1':61325, '1f4e2':61159, '1f4e3':61160, '1f4e4':61249, '1f4e5':61250, '1f4e6':61251, '1f4e7':61246, '1f4e8':61247, '1f4e9':61248, '1f4ea':61253, '1f4eb':61252, '1f4ec':61254, '1f4ed':61255, '1f4ee':61256, '1f4ef':61161, '1f4f0':61230, '1f4f1':61182, '1f4f2':61183, '1f4f3':62823, '1f4f4':62824, '1f4f5':62751, '1f4f6':62822, '1f4f7':61207, '1f4f8':61208, '1f4f9':61209, '1f4fa':61206, '1f4fb':61172, '1f4fc':61210, '1f4fd':61204, '1f4ff':61151, '1f500':62801, '1f501':62802, '1f502':62803, '1f503':62769, '1f504':62770, '1f505':62820, '1f506':62821, '1f507':61155, '1f508':61156, '1f509':61157, '1f50a':61158, '1f50b':61188, '1f50c':61190, '1f50d':61211, '1f50e':61212, '1f50f':61290, '1f510':61291, '1f511':61292, '1f512':61288, '1f513':61289, '1f514':61162, '1f515':61163, '1f516':61233, '1f517':61313, '1f518':62947, '1f519':62771, '1f51a':62772, '1f51b':62773, '1f51c':62774, '1f51d':62775, '1f51e':62752, '1f51f':62876, '1f520':62877, '1f521':62878, '1f522':62879, '1f523':62880, '1f524':62881, '1f525':41021, '1f526':61215, '1f527':61306, '1f528':61294, '1f529':61308, '1f52a':3803, '1f52b':61301, '1f52c':61323, '1f52d':61324, '1f52e':51082, '1f52f':62787, '1f530':62848, '1f531':62846, '1f532':62949, '1f533':62948, '1f534':62916, '1f535':62920, '1f536':62940, '1f537':62941, '1f538':62942, '1f539':62943, '1f53a':62944, '1f53b':62945, '1f53c':62811, '1f53d':62813, '1f549':62778, '1f54a':2602, '1f54b':4854, '1f54c':4850, '1f54d':4852, '1f54e':62786, '1f550':4955, '1f551':4957, '1f552':4959, '1f553':4961, '1f554':4963, '1f555':4965, '1f556':4967, '1f557':4969, '1f558':4971, '1f559':4973, '1f55a':4975, '1f55b':4953, '1f55c':4956, '1f55d':4958, '1f55e':4960, '1f55f':4962, '1f560':4964, '1f561':4966, '1f562':4968, '1f563':4970, '1f564':4972, '1f565':4974, '1f566':4976, '1f567':4954, '1f56f':61213, '1f570':4952, '1f573':1156, '1f574':1587, '1f575-200d-2640':1497, '1f575-200d-2642':1496, '1f575':1495, '1f576':61111, '1f577':2641, '1f578':2642, '1f579':51087, '1f57a':1586, '1f587':61281, '1f58a':61261, '1f58b':61260, '1f58c':61262, '1f58d':61263, '1f590':1329, '1f595':1348, '1f596':1331, '1f5a4':1148, '1f5a5':61192, '1f5a8':61193, '1f5b1':61195, '1f5b2':61196, '1f5bc':51104, '1f5c2':61268, '1f5c3':61285, '1f5c4':61286, '1f5d1':61287, '1f5d2':61271, '1f5d3':61272, '1f5dc':61310, '1f5dd':61293, '1f5de':61231, '1f5e1':61299, '1f5e3':1683, '1f5e8':1160, '1f5ef':1161, '1f5f3':61257, '1f5fa':4810, '1f5fb':4816, '1f5fc':4847, '1f5fd':4848, '1f5fe':4811, '1f5ff':61362, '1f600':11, '1f601':14, '1f602':18, '1f603':12, '1f604':13, '1f605':16, '1f606':15, '1f607':114, '1f608':1103, '1f609':112, '1f60a':113, '1f60b':124, '1f60c':150, '1f60d':116, '1f60e':170, '1f60f':144, '1f610':139, '1f611':140, '1f612':145, '1f613':195, '1f614':151, '1f615':173, '1f616':192, '1f617':119, '1f618':118, '1f619':122, '1f61a':121, '1f61b':125, '1f61c':126, '1f61d':128, '1f61e':194, '1f61f':175, '1f620':1101, '1f621':1100, '1f622':189, '1f623':193, '1f624':199, '1f625':188, '1f626':184, '1f627':185, '1f628':186, '1f629':196, '1f62a':152, '1f62b':197, '1f62c':147, '1f62d':190, '1f62e-200d-1f4a8':148, '1f62e':178, '1f62f':179, '1f630':187, '1f631':191, '1f632':180, '1f633':181, '1f634':154, '1f635-200d-1f4ab':165, '1f635':164, '1f636-200d-1f32b':143, '1f636':141, '1f637':155, '1f638':1116, '1f639':1117, '1f63a':1115, '1f63b':1118, '1f63c':1119, '1f63d':1120, '1f63e':1123, '1f63f':1122, '1f640':1121, '1f641':176, '1f642':19, '1f643':110, '1f644':146, '1f645-200d-2640':1422, '1f645-200d-2642':1421, '1f645':1420, '1f646-200d-2640':1425, '1f646-200d-2642':1424, '1f646':1423, '1f647-200d-2640':1437, '1f647-200d-2642':1436, '1f647':1435, '1f648':1124, '1f649':1125, '1f64a':1126, '1f64b-200d-2640':1431, '1f64b-200d-2642':1430, '1f64b':1429, '1f64c':1359, '1f64d-200d-2640':1416, '1f64d-200d-2642':1415, '1f64d':1414, '1f64e-200d-2640':1419, '1f64e-200d-2642':1418, '1f64e':1417, '1f64f':1364, '1f680':4942, '1f681':4937, '1f682':4872, '1f683':4873, '1f684':4874, '1f685':4875, '1f686':4876, '1f687':4877, '1f688':4878, '1f689':4879, '1f68a':4880, '1f68b':4883, '1f68c':4884, '1f68d':4885, '1f68e':4886, '1f68f':4911, '1f690':4887, '1f691':4888, '1f692':4889, '1f693':4890, '1f694':4891, '1f695':4892, '1f696':4893, '1f697':4894, '1f698':4895, '1f699':4896, '1f69a':4898, '1f69b':4899, '1f69c':4900, '1f69d':4881, '1f69e':4882, '1f69f':4938, '1f6a0':4939, '1f6a1':4940, '1f6a2':4930, '1f6a3-200d-2640':1609, '1f6a3-200d-2642':1608, '1f6a3':1607, '1f6a4':4926, '1f6a5':4918, '1f6a6':4919, '1f6a7':4921, '1f6a8':4917, '1f6a9':71587, '1f6aa':61333, '1f6ab':62745, '1f6ac':61358, '1f6ad':62747, '1f6ae':62730, '1f6af':62748, '1f6b0':62731, '1f6b1':62749, '1f6b2':4907, '1f6b3':62746, '1f6b4-200d-2640':1621, '1f6b4-200d-2642':1620, '1f6b4':1619, '1f6b5-200d-2640':1624, '1f6b5-200d-2642':1623, '1f6b5':1622, '1f6b6-200d-2640':1566, '1f6b6-200d-2642':1565, '1f6b6':1564, '1f6b7':62750, '1f6b8':62743, '1f6b9':62733, '1f6ba':62734, '1f6bb':62735, '1f6bc':62736, '1f6bd':61340, '1f6be':62737, '1f6bf':61342, '1f6c0':1643, '1f6c1':61343, '1f6c2':62738, '1f6c3':62739, '1f6c4':62740, '1f6c5':62741, '1f6cb':61338, '1f6cc':1644, '1f6cd':61133, '1f6ce':4944, '1f6cf':61337, '1f6d0':62776, '1f6d1':4920, '1f6d2':61357, '1f6d5':4851, '1f6d6':4828, '1f6d7':61334, '1f6e0':61298, '1f6e1':61304, '1f6e2':4914, '1f6e3':4912, '1f6e4':4913, '1f6e5':4929, '1f6e9':4932, '1f6eb':4933, '1f6ec':4934, '1f6f0':4941, '1f6f3':4927, '1f6f4':4908, '1f6f5':4903, '1f6f6':4925, '1f6f7':51076, '1f6f8':4943, '1f6f9':4909, '1f6fa':4906, '1f6fb':4897, '1f6fc':4910, '1f7e0':62917, '1f7e1':62918, '1f7e2':62919, '1f7e3':62921, '1f7e4':62922, '1f7e5':62925, '1f7e6':62929, '1f7e7':62926, '1f7e8':62927, '1f7e9':62928, '1f7ea':62930, '1f7eb':62931, '1f90c':1337, '1f90d':1149, '1f90e':1147, '1f90f':1338, '1f910':137, '1f911':129, '1f912':156, '1f913':171, '1f914':135, '1f915':157, '1f916':1114, '1f917':130, '1f918':1343, '1f919':1344, '1f91a':1328, '1f91b':1356, '1f91c':1357, '1f91d':1363, '1f91e':1340, '1f91f':1342, '1f920':167, '1f921':1108, '1f922':158, '1f923':17, '1f924':153, '1f925':149, '1f926-200d-2640':1440, '1f926-200d-2642':1439, '1f926':1438, '1f927':160, '1f928':138, '1f929':117, '1f92a':127, '1f92b':134, '1f92c':1102, '1f92d':131, '1f92e':159, '1f92f':166, '1f930':1519, '1f931':1522, '1f932':1362, '1f933':1367, '1f934':1506, '1f935-200d-2640':1515, '1f935-200d-2642':1514, '1f935':1513, '1f936':1528, '1f937-200d-2640':1443, '1f937-200d-2642':1442, '1f937':1441, '1f938-200d-2640':1627, '1f938-200d-2642':1626, '1f938':1625, '1f939-200d-2640':1639, '1f939-200d-2642':1638, '1f939':1637, '1f93a':1597, '1f93c-200d-2640':1630, '1f93c-200d-2642':1629, '1f93c':1628, '1f93d-200d-2640':1633, '1f93d-200d-2642':1632, '1f93d':1631, '1f93e-200d-2640':1636, '1f93e-200d-2642':1635, '1f93e':1634, '1f93f':51073, '1f940':2654, '1f941':61180, '1f942':3791, '1f943':3792, '1f944':3802, '1f945':51069, '1f947':51048, '1f948':51049, '1f949':51050, '1f94a':51067, '1f94b':51068, '1f94c':51077, '1f94d':51064, '1f94e':51053, '1f94f':51059, '1f950':3710, '1f951':3693, '1f952':3700, '1f953':3721, '1f954':3695, '1f955':3696, '1f956':3711, '1f957':3738, '1f958':3734, '1f959':3730, '1f95a':3732, '1f95b':3780, '1f95c':3706, '1f95d':3689, '1f95e':3715, '1f95f':3757, '1f960':3758, '1f961':3759, '1f962':3799, '1f963':3737, '1f964':3794, '1f965':3692, '1f966':3702, '1f967':3773, '1f968':3713, '1f969':3720, '1f96a':3726, '1f96b':3742, '1f96c':3701, '1f96d':3681, '1f96e':3755, '1f96f':3714, '1f970':115, '1f971':198, '1f972':123, '1f973':168, '1f974':163, '1f975':161, '1f976':162, '1f977':1501, '1f978':169, '1f97a':182, '1f97b':61124, '1f97c':61113, '1f97d':61112, '1f97e':61138, '1f97f':61139, '1f980':3760, '1f981':2545, '1f982':2643, '1f983':2594, '1f984':2551, '1f985':2603, '1f986':2604, '1f987':2583, '1f988':2628, '1f989':2606, '1f98a':2540, '1f98b':2633, '1f98c':2553, '1f98d':2532, '1f98e':2615, '1f98f':2572, '1f990':3762, '1f991':3763, '1f992':2569, '1f993':2552, '1f994':2582, '1f995':2619, '1f996':2620, '1f997':2639, '1f998':2591, '1f999':2568, '1f99a':2610, '1f99b':2573, '1f99c':2611, '1f99d':2541, '1f99e':3761, '1f99f':2644, '1f9a0':2647, '1f9a1':2592, '1f9a2':2605, '1f9a3':2571, '1f9a4':2607, '1f9a5':2588, '1f9a6':2589, '1f9a7':2533, '1f9a8':2590, '1f9a9':2609, '1f9aa':3764, '1f9ab':2581, '1f9ac':2554, '1f9ad':2624, '1f9ae':2536, '1f9af':61312, '1f9b4':1380, '1f9b5':1371, '1f9b6':1372, '1f9b7':1379, '1f9b8-200d-2640':1532, '1f9b8-200d-2642':1531, '1f9b8':1530, '1f9b9-200d-2640':1535, '1f9b9-200d-2642':1534, '1f9b9':1533, '1f9ba':61114, '1f9bb':1374, '1f9bc':4905, '1f9bd':4904, '1f9be':1369, '1f9bf':1370, '1f9c0':3717, '1f9c1':3772, '1f9c2':3741, '1f9c3':3796, '1f9c4':3703, '1f9c5':3704, '1f9c6':3731, '1f9c7':3716, '1f9c8':3740, '1f9c9':3797, '1f9ca':3798, '1f9cb':3795, '1f9cd-200d-2640':1569, '1f9cd-200d-2642':1568, '1f9cd':1567, '1f9ce-200d-2640':1572, '1f9ce-200d-2642':1571, '1f9ce':1570, '1f9cf-200d-2640':1434, '1f9cf-200d-2642':1433, '1f9cf':1432, '1f9d0':172, '1f9d1-200d-1f33e':1456, '1f9d1-200d-1f373':1459, '1f9d1-200d-1f37c':1525, '1f9d1-200d-1f384':1529, '1f9d1-200d-1f393':1447, '1f9d1-200d-1f3a4':1477, '1f9d1-200d-1f3a8':1480, '1f9d1-200d-1f3eb':1450, '1f9d1-200d-1f3ed':1465, '1f9d1-200d-1f4bb':1474, '1f9d1-200d-1f4bc':1468, '1f9d1-200d-1f527':1462, '1f9d1-200d-1f52c':1471, '1f9d1-200d-1f680':1486, '1f9d1-200d-1f692':1489, '1f9d1-200d-1f91d-200d-1f9d1':1645, '1f9d1-200d-1f9af':1573, '1f9d1-200d-1f9b0':1402, '1f9d1-200d-1f9b1':1404, '1f9d1-200d-1f9b2':1408, '1f9d1-200d-1f9b3':1406, '1f9d1-200d-1f9bc':1576, '1f9d1-200d-1f9bd':1579, '1f9d1-200d-2695':1444, '1f9d1-200d-2696':1453, '1f9d1-200d-2708':1483, '1f9d1':1390, '1f9d2':1387, '1f9d3':1411, '1f9d4-200d-2640':1395, '1f9d4-200d-2642':1394, '1f9d4':1393, '1f9d5':1512, '1f9d6-200d-2640':1593, '1f9d6-200d-2642':1592, '1f9d6':1591, '1f9d7-200d-2640':1596, '1f9d7-200d-2642':1595, '1f9d7':1594, '1f9d8-200d-2640':1642, '1f9d8-200d-2642':1641, '1f9d8':1640, '1f9d9-200d-2640':1538, '1f9d9-200d-2642':1537, '1f9d9':1536, '1f9da-200d-2640':1541, '1f9da-200d-2642':1540, '1f9da':1539, '1f9db-200d-2640':1544, '1f9db-200d-2642':1543, '1f9db':1542, '1f9dc-200d-2640':1547, '1f9dc-200d-2642':1546, '1f9dc':1545, '1f9dd-200d-2640':1550, '1f9dd-200d-2642':1549, '1f9dd':1548, '1f9de-200d-2640':1553, '1f9de-200d-2642':1552, '1f9de':1551, '1f9df-200d-2640':1556, '1f9df-200d-2642':1555, '1f9df':1554, '1f9e0':1376, '1f9e1':1142, '1f9e2':61148, '1f9e3':61118, '1f9e4':61119, '1f9e5':61120, '1f9e6':61121, '1f9e7':51039, '1f9e8':51028, '1f9e9':51090, '1f9ea':61320, '1f9eb':61321, '1f9ec':61322, '1f9ed':4812, '1f9ee':61201, '1f9ef':61356, '1f9f0':61316, '1f9f1':4825, '1f9f2':61317, '1f9f3':4945, '1f9f4':61346, '1f9f5':51106, '1f9f6':51108, '1f9f7':61347, '1f9f8':51091, '1f9f9':61348, '1f9fa':61349, '1f9fb':61350, '1f9fc':61352, '1f9fd':61355, '1f9fe':61243, '1f9ff':51084, '1fa70':61142, '1fa71':61125, '1fa72':61126, '1fa73':61127, '1fa74':61135, '1fa78':61327, '1fa79':61329, '1fa7a':61331, '1fa80':51079, '1fa81':51080, '1fa82':4935, '1fa83':61302, '1fa84':51083, '1fa85':51092, '1fa86':51094, '1fa90':4993, '1fa91':61339, '1fa92':61345, '1fa93':61295, '1fa94':61217, '1fa95':61179, '1fa96':61149, '1fa97':61174, '1fa98':61181, '1fa99':61236, '1fa9a':61305, '1fa9b':61307, '1fa9c':61318, '1fa9d':61315, '1fa9e':61335, '1fa9f':61336, '1faa0':61341, '1faa1':51107, '1faa2':51109, '1faa3':61351, '1faa4':61344, '1faa5':61354, '1faa6':61360, '1faa7':61363, '1faa8':4826, '1fab0':2645, '1fab1':2646, '1fab2':2637, '1fab3':2640, '1fab4':2660, '1fab5':4827, '1fab6':2608, '1fac0':1377, '1fac1':1378, '1fac2':1686, '1fad0':3688, '1fad1':3699, '1fad2':3691, '1fad3':3712, '1fad4':3729, '1fad5':3736, '1fad6':3782, '203c':62834, '21a9':62765, '21aa':62766, '231a':4948, '231b':4946, '23cf':62818, '23e9':62805, '23ea':62809, '23eb':62812, '23ec':62814, '23ed':62806, '23ee':62810, '23ef':62807, '23f0':4949, '23f1':4950, '23f2':4951, '23f3':4947, '23f8':62815, '23f9':62816, '23fa':62817, '24c2':62890, '25aa':62938, '25ab':62939, '25b6':62804, '25c0':62808, '25fb':62935, '25fc':62934, '25fd':62937, '25fe':62936, '260e':61184, '261d':1350, '262a':62784, '262e':62785, '262f':62781, '263a':120, '264a':62790, '264b':62791, '264c':62792, '264d':62793, '264e':62794, '264f':62795, '265f':51099, '267b':62844, '267e':62833, '267f':62732, '269b':62777, '269c':62845, '26a0':62742, '26a1':41016, '26a7':62827, '26aa':62924, '26ab':62923, '26b0':61359, '26b1':61361, '26bd':51051, '26be':51052, '26c4':41019, '26c5':4999, '26c8':41000, '26ce':62800, '26cf':61296, '26d1':61150, '26d3':61314, '26d4':62744, '26e9':4853, '26ea':4849, '26f0':4814, '26f1':41015, '26f2':4855, '26f3':51070, '26f4':4928, '26f5':4924, '26f7':1599, '26f8':51071, '26f9-200d-2640':1615, '26f9-200d-2642':1614, '26f9':1613, '26fa':4856, '26fd':4915, '270a':1354, '270b':1330, '270c':1339, '270d':1365, '270f':61258, '271d':62782, '274c':62853, '274e':62854, '2764-200d-1f525':1139, '2764-200d-1fa79':1140, '27a1':62757, '27b0':62855, '27bf':62856, '2b05':62761, '2b06':62755, '2b07':62759, '2b1b':62932, '2b1c':62933, '2b50':4994, '2b55':62849, '303d':62857, '1f385-1f3fb':0, '1f385-1f3fc':0, '1f385-1f3fd':0, '1f385-1f3fe':0, '1f385-1f3ff':0, '1f3c2-1f3fb':0, '1f3c2-1f3fc':0, '1f3c2-1f3fd':0, '1f3c2-1f3fe':0, '1f3c2-1f3ff':0, '1f3c3-1f3fb-200d-2640':0, '1f3c3-1f3fc-200d-2640':0, '1f3c3-1f3fd-200d-2640':0, '1f3c3-1f3fe-200d-2640':0, '1f3c3-1f3ff-200d-2640':0, '1f3c3-1f3fb-200d-2642':0, '1f3c3-1f3fc-200d-2642':0, '1f3c3-1f3fd-200d-2642':0, '1f3c3-1f3fe-200d-2642':0, '1f3c3-1f3ff-200d-2642':0, '1f3c3-1f3fb':0, '1f3c3-1f3fc':0, '1f3c3-1f3fd':0, '1f3c3-1f3fe':0, '1f3c3-1f3ff':0, '1f3c4-1f3fb-200d-2640':0, '1f3c4-1f3fc-200d-2640':0, '1f3c4-1f3fd-200d-2640':0, '1f3c4-1f3fe-200d-2640':0, '1f3c4-1f3ff-200d-2640':0, '1f3c4-1f3fb-200d-2642':0, '1f3c4-1f3fc-200d-2642':0, '1f3c4-1f3fd-200d-2642':0, '1f3c4-1f3fe-200d-2642':0, '1f3c4-1f3ff-200d-2642':0, '1f3c4-1f3fb':0, '1f3c4-1f3fc':0, '1f3c4-1f3fd':0, '1f3c4-1f3fe':0, '1f3c4-1f3ff':0, '1f3c7-1f3fb':0, '1f3c7-1f3fc':0, '1f3c7-1f3fd':0, '1f3c7-1f3fe':0, '1f3c7-1f3ff':0, '1f3ca-1f3fb-200d-2640':0, '1f3ca-1f3fc-200d-2640':0, '1f3ca-1f3fd-200d-2640':0, '1f3ca-1f3fe-200d-2640':0, '1f3ca-1f3ff-200d-2640':0, '1f3ca-1f3fb-200d-2642':0, '1f3ca-1f3fc-200d-2642':0, '1f3ca-1f3fd-200d-2642':0, '1f3ca-1f3fe-200d-2642':0, '1f3ca-1f3ff-200d-2642':0, '1f3ca-1f3fb':0, '1f3ca-1f3fc':0, '1f3ca-1f3fd':0, '1f3ca-1f3fe':0, '1f3ca-1f3ff':0, '1f3cb-1f3fb-200d-2640':0, '1f3cb-1f3fc-200d-2640':0, '1f3cb-1f3fd-200d-2640':0, '1f3cb-1f3fe-200d-2640':0, '1f3cb-1f3ff-200d-2640':0, '1f3cb-1f3fb-200d-2642':0, '1f3cb-1f3fc-200d-2642':0, '1f3cb-1f3fd-200d-2642':0, '1f3cb-1f3fe-200d-2642':0, '1f3cb-1f3ff-200d-2642':0, '1f3cb-1f3fb':0, '1f3cb-1f3fc':0, '1f3cb-1f3fd':0, '1f3cb-1f3fe':0, '1f3cb-1f3ff':0, '1f3cc-1f3fb-200d-2640':0, '1f3cc-1f3fc-200d-2640':0, '1f3cc-1f3fd-200d-2640':0, '1f3cc-1f3fe-200d-2640':0, '1f3cc-1f3ff-200d-2640':0, '1f3cc-1f3fb-200d-2642':0, '1f3cc-1f3fc-200d-2642':0, '1f3cc-1f3fd-200d-2642':0, '1f3cc-1f3fe-200d-2642':0, '1f3cc-1f3ff-200d-2642':0, '1f3cc-1f3fb':0, '1f3cc-1f3fc':0, '1f3cc-1f3fd':0, '1f3cc-1f3fe':0, '1f3cc-1f3ff':0, '1f442-1f3fb':0, '1f442-1f3fc':0, '1f442-1f3fd':0, '1f442-1f3fe':0, '1f442-1f3ff':0, '1f443-1f3fb':0, '1f443-1f3fc':0, '1f443-1f3fd':0, '1f443-1f3fe':0, '1f443-1f3ff':0, '1f446-1f3fb':0, '1f446-1f3fc':0, '1f446-1f3fd':0, '1f446-1f3fe':0, '1f446-1f3ff':0, '1f447-1f3fb':0, '1f447-1f3fc':0, '1f447-1f3fd':0, '1f447-1f3fe':0, '1f447-1f3ff':0, '1f448-1f3fb':0, '1f448-1f3fc':0, '1f448-1f3fd':0, '1f448-1f3fe':0, '1f448-1f3ff':0, '1f449-1f3fb':0, '1f449-1f3fc':0, '1f449-1f3fd':0, '1f449-1f3fe':0, '1f449-1f3ff':0, '1f44a-1f3fb':0, '1f44a-1f3fc':0, '1f44a-1f3fd':0, '1f44a-1f3fe':0, '1f44a-1f3ff':0, '1f44b-1f3fb':0, '1f44b-1f3fc':0, '1f44b-1f3fd':0, '1f44b-1f3fe':0, '1f44b-1f3ff':0, '1f44c-1f3fb':0, '1f44c-1f3fc':0, '1f44c-1f3fd':0, '1f44c-1f3fe':0, '1f44c-1f3ff':0, '1f44d-1f3fb':0, '1f44d-1f3fc':0, '1f44d-1f3fd':0, '1f44d-1f3fe':0, '1f44d-1f3ff':0, '1f44e-1f3fb':0, '1f44e-1f3fc':0, '1f44e-1f3fd':0, '1f44e-1f3fe':0, '1f44e-1f3ff':0, '1f44f-1f3fb':0, '1f44f-1f3fc':0, '1f44f-1f3fd':0, '1f44f-1f3fe':0, '1f44f-1f3ff':0, '1f450-1f3fb':0, '1f450-1f3fc':0, '1f450-1f3fd':0, '1f450-1f3fe':0, '1f450-1f3ff':0, '1f466-1f3fb':0, '1f466-1f3fc':0, '1f466-1f3fd':0, '1f466-1f3fe':0, '1f466-1f3ff':0, '1f467-1f3fb':0, '1f467-1f3fc':0, '1f467-1f3fd':0, '1f467-1f3fe':0, '1f467-1f3ff':0, '1f468-1f3fb-200d-1f33e':0, '1f468-1f3fc-200d-1f33e':0, '1f468-1f3fd-200d-1f33e':0, '1f468-1f3fe-200d-1f33e':0, '1f468-1f3ff-200d-1f33e':0, '1f468-1f3fb-200d-1f373':0, '1f468-1f3fc-200d-1f373':0, '1f468-1f3fd-200d-1f373':0, '1f468-1f3fe-200d-1f373':0, '1f468-1f3ff-200d-1f373':0, '1f468-1f3fb-200d-1f37c':0, '1f468-1f3fc-200d-1f37c':0, '1f468-1f3fd-200d-1f37c':0, '1f468-1f3fe-200d-1f37c':0, '1f468-1f3ff-200d-1f37c':0, '1f468-1f3fb-200d-1f393':0, '1f468-1f3fc-200d-1f393':0, '1f468-1f3fd-200d-1f393':0, '1f468-1f3fe-200d-1f393':0, '1f468-1f3ff-200d-1f393':0, '1f468-1f3fb-200d-1f3a4':0, '1f468-1f3fc-200d-1f3a4':0, '1f468-1f3fd-200d-1f3a4':0, '1f468-1f3fe-200d-1f3a4':0, '1f468-1f3ff-200d-1f3a4':0, '1f468-1f3fb-200d-1f3a8':0, '1f468-1f3fc-200d-1f3a8':0, '1f468-1f3fd-200d-1f3a8':0, '1f468-1f3fe-200d-1f3a8':0, '1f468-1f3ff-200d-1f3a8':0, '1f468-1f3fb-200d-1f3eb':0, '1f468-1f3fc-200d-1f3eb':0, '1f468-1f3fd-200d-1f3eb':0, '1f468-1f3fe-200d-1f3eb':0, '1f468-1f3ff-200d-1f3eb':0, '1f468-1f3fb-200d-1f3ed':0, '1f468-1f3fc-200d-1f3ed':0, '1f468-1f3fd-200d-1f3ed':0, '1f468-1f3fe-200d-1f3ed':0, '1f468-1f3ff-200d-1f3ed':0, '1f468-1f3fb-200d-1f4bb':0, '1f468-1f3fc-200d-1f4bb':0, '1f468-1f3fd-200d-1f4bb':0, '1f468-1f3fe-200d-1f4bb':0, '1f468-1f3ff-200d-1f4bb':0, '1f468-1f3fb-200d-1f4bc':0, '1f468-1f3fc-200d-1f4bc':0, '1f468-1f3fd-200d-1f4bc':0, '1f468-1f3fe-200d-1f4bc':0, '1f468-1f3ff-200d-1f4bc':0, '1f468-1f3fb-200d-1f527':0, '1f468-1f3fc-200d-1f527':0, '1f468-1f3fd-200d-1f527':0, '1f468-1f3fe-200d-1f527':0, '1f468-1f3ff-200d-1f527':0, '1f468-1f3fb-200d-1f52c':0, '1f468-1f3fc-200d-1f52c':0, '1f468-1f3fd-200d-1f52c':0, '1f468-1f3fe-200d-1f52c':0, '1f468-1f3ff-200d-1f52c':0, '1f468-1f3fb-200d-1f680':0, '1f468-1f3fc-200d-1f680':0, '1f468-1f3fd-200d-1f680':0, '1f468-1f3fe-200d-1f680':0, '1f468-1f3ff-200d-1f680':0, '1f468-1f3fb-200d-1f692':0, '1f468-1f3fc-200d-1f692':0, '1f468-1f3fd-200d-1f692':0, '1f468-1f3fe-200d-1f692':0, '1f468-1f3ff-200d-1f692':0, '1f468-1f3fb-200d-1f9af':0, '1f468-1f3fc-200d-1f9af':0, '1f468-1f3fd-200d-1f9af':0, '1f468-1f3fe-200d-1f9af':0, '1f468-1f3ff-200d-1f9af':0, '1f468-1f3fb-200d-1f9b0':0, '1f468-1f3fc-200d-1f9b0':0, '1f468-1f3fd-200d-1f9b0':0, '1f468-1f3fe-200d-1f9b0':0, '1f468-1f3ff-200d-1f9b0':0, '1f468-1f3fb-200d-1f9b1':0, '1f468-1f3fc-200d-1f9b1':0, '1f468-1f3fd-200d-1f9b1':0, '1f468-1f3fe-200d-1f9b1':0, '1f468-1f3ff-200d-1f9b1':0, '1f468-1f3fb-200d-1f9b2':0, '1f468-1f3fc-200d-1f9b2':0, '1f468-1f3fd-200d-1f9b2':0, '1f468-1f3fe-200d-1f9b2':0, '1f468-1f3ff-200d-1f9b2':0, '1f468-1f3fb-200d-1f9b3':0, '1f468-1f3fc-200d-1f9b3':0, '1f468-1f3fd-200d-1f9b3':0, '1f468-1f3fe-200d-1f9b3':0, '1f468-1f3ff-200d-1f9b3':0, '1f468-1f3fb-200d-1f9bc':0, '1f468-1f3fc-200d-1f9bc':0, '1f468-1f3fd-200d-1f9bc':0, '1f468-1f3fe-200d-1f9bc':0, '1f468-1f3ff-200d-1f9bc':0, '1f468-1f3fb-200d-1f9bd':0, '1f468-1f3fc-200d-1f9bd':0, '1f468-1f3fd-200d-1f9bd':0, '1f468-1f3fe-200d-1f9bd':0, '1f468-1f3ff-200d-1f9bd':0, '1f468-1f3fb-200d-2695':0, '1f468-1f3fc-200d-2695':0, '1f468-1f3fd-200d-2695':0, '1f468-1f3fe-200d-2695':0, '1f468-1f3ff-200d-2695':0, '1f468-1f3fb-200d-2696':0, '1f468-1f3fc-200d-2696':0, '1f468-1f3fd-200d-2696':0, '1f468-1f3fe-200d-2696':0, '1f468-1f3ff-200d-2696':0, '1f468-1f3fb-200d-2708':0, '1f468-1f3fc-200d-2708':0, '1f468-1f3fd-200d-2708':0, '1f468-1f3fe-200d-2708':0, '1f468-1f3ff-200d-2708':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fb':0, '1f468-1f3fc':0, '1f468-1f3fd':0, '1f468-1f3fe':0, '1f468-1f3ff':0, '1f469-1f3fb-200d-1f33e':0, '1f469-1f3fc-200d-1f33e':0, '1f469-1f3fd-200d-1f33e':0, '1f469-1f3fe-200d-1f33e':0, '1f469-1f3ff-200d-1f33e':0, '1f469-1f3fb-200d-1f373':0, '1f469-1f3fc-200d-1f373':0, '1f469-1f3fd-200d-1f373':0, '1f469-1f3fe-200d-1f373':0, '1f469-1f3ff-200d-1f373':0, '1f469-1f3fb-200d-1f37c':0, '1f469-1f3fc-200d-1f37c':0, '1f469-1f3fd-200d-1f37c':0, '1f469-1f3fe-200d-1f37c':0, '1f469-1f3ff-200d-1f37c':0, '1f469-1f3fb-200d-1f393':0, '1f469-1f3fc-200d-1f393':0, '1f469-1f3fd-200d-1f393':0, '1f469-1f3fe-200d-1f393':0, '1f469-1f3ff-200d-1f393':0, '1f469-1f3fb-200d-1f3a4':0, '1f469-1f3fc-200d-1f3a4':0, '1f469-1f3fd-200d-1f3a4':0, '1f469-1f3fe-200d-1f3a4':0, '1f469-1f3ff-200d-1f3a4':0, '1f469-1f3fb-200d-1f3a8':0, '1f469-1f3fc-200d-1f3a8':0, '1f469-1f3fd-200d-1f3a8':0, '1f469-1f3fe-200d-1f3a8':0, '1f469-1f3ff-200d-1f3a8':0, '1f469-1f3fb-200d-1f3eb':0, '1f469-1f3fc-200d-1f3eb':0, '1f469-1f3fd-200d-1f3eb':0, '1f469-1f3fe-200d-1f3eb':0, '1f469-1f3ff-200d-1f3eb':0, '1f469-1f3fb-200d-1f3ed':0, '1f469-1f3fc-200d-1f3ed':0, '1f469-1f3fd-200d-1f3ed':0, '1f469-1f3fe-200d-1f3ed':0, '1f469-1f3ff-200d-1f3ed':0, '1f469-1f3fb-200d-1f4bb':0, '1f469-1f3fc-200d-1f4bb':0, '1f469-1f3fd-200d-1f4bb':0, '1f469-1f3fe-200d-1f4bb':0, '1f469-1f3ff-200d-1f4bb':0, '1f469-1f3fb-200d-1f4bc':0, '1f469-1f3fc-200d-1f4bc':0, '1f469-1f3fd-200d-1f4bc':0, '1f469-1f3fe-200d-1f4bc':0, '1f469-1f3ff-200d-1f4bc':0, '1f469-1f3fb-200d-1f527':0, '1f469-1f3fc-200d-1f527':0, '1f469-1f3fd-200d-1f527':0, '1f469-1f3fe-200d-1f527':0, '1f469-1f3ff-200d-1f527':0, '1f469-1f3fb-200d-1f52c':0, '1f469-1f3fc-200d-1f52c':0, '1f469-1f3fd-200d-1f52c':0, '1f469-1f3fe-200d-1f52c':0, '1f469-1f3ff-200d-1f52c':0, '1f469-1f3fb-200d-1f680':0, '1f469-1f3fc-200d-1f680':0, '1f469-1f3fd-200d-1f680':0, '1f469-1f3fe-200d-1f680':0, '1f469-1f3ff-200d-1f680':0, '1f469-1f3fb-200d-1f692':0, '1f469-1f3fc-200d-1f692':0, '1f469-1f3fd-200d-1f692':0, '1f469-1f3fe-200d-1f692':0, '1f469-1f3ff-200d-1f692':0, '1f469-1f3fb-200d-1f9af':0, '1f469-1f3fc-200d-1f9af':0, '1f469-1f3fd-200d-1f9af':0, '1f469-1f3fe-200d-1f9af':0, '1f469-1f3ff-200d-1f9af':0, '1f469-1f3fb-200d-1f9b0':0, '1f469-1f3fc-200d-1f9b0':0, '1f469-1f3fd-200d-1f9b0':0, '1f469-1f3fe-200d-1f9b0':0, '1f469-1f3ff-200d-1f9b0':0, '1f469-1f3fb-200d-1f9b1':0, '1f469-1f3fc-200d-1f9b1':0, '1f469-1f3fd-200d-1f9b1':0, '1f469-1f3fe-200d-1f9b1':0, '1f469-1f3ff-200d-1f9b1':0, '1f469-1f3fb-200d-1f9b2':0, '1f469-1f3fc-200d-1f9b2':0, '1f469-1f3fd-200d-1f9b2':0, '1f469-1f3fe-200d-1f9b2':0, '1f469-1f3ff-200d-1f9b2':0, '1f469-1f3fb-200d-1f9b3':0, '1f469-1f3fc-200d-1f9b3':0, '1f469-1f3fd-200d-1f9b3':0, '1f469-1f3fe-200d-1f9b3':0, '1f469-1f3ff-200d-1f9b3':0, '1f469-1f3fb-200d-1f9bc':0, '1f469-1f3fc-200d-1f9bc':0, '1f469-1f3fd-200d-1f9bc':0, '1f469-1f3fe-200d-1f9bc':0, '1f469-1f3ff-200d-1f9bc':0, '1f469-1f3fb-200d-1f9bd':0, '1f469-1f3fc-200d-1f9bd':0, '1f469-1f3fd-200d-1f9bd':0, '1f469-1f3fe-200d-1f9bd':0, '1f469-1f3ff-200d-1f9bd':0, '1f469-1f3fb-200d-2695':0, '1f469-1f3fc-200d-2695':0, '1f469-1f3fd-200d-2695':0, '1f469-1f3fe-200d-2695':0, '1f469-1f3ff-200d-2695':0, '1f469-1f3fb-200d-2696':0, '1f469-1f3fc-200d-2696':0, '1f469-1f3fd-200d-2696':0, '1f469-1f3fe-200d-2696':0, '1f469-1f3ff-200d-2696':0, '1f469-1f3fb-200d-2708':0, '1f469-1f3fc-200d-2708':0, '1f469-1f3fd-200d-2708':0, '1f469-1f3fe-200d-2708':0, '1f469-1f3ff-200d-2708':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fb':0, '1f469-1f3fc':0, '1f469-1f3fd':0, '1f469-1f3fe':0, '1f469-1f3ff':0, '1f46b-1f3fb':0, '1f46b-1f3fc':0, '1f46b-1f3fd':0, '1f46b-1f3fe':0, '1f46b-1f3ff':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe':0, '1f46c-1f3fb':0, '1f46c-1f3fc':0, '1f46c-1f3fd':0, '1f46c-1f3fe':0, '1f46c-1f3ff':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe':0, '1f46d-1f3fb':0, '1f46d-1f3fc':0, '1f46d-1f3fd':0, '1f46d-1f3fe':0, '1f46d-1f3ff':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe':0, '1f46e-1f3fb-200d-2640':0, '1f46e-1f3fc-200d-2640':0, '1f46e-1f3fd-200d-2640':0, '1f46e-1f3fe-200d-2640':0, '1f46e-1f3ff-200d-2640':0, '1f46e-1f3fb-200d-2642':0, '1f46e-1f3fc-200d-2642':0, '1f46e-1f3fd-200d-2642':0, '1f46e-1f3fe-200d-2642':0, '1f46e-1f3ff-200d-2642':0, '1f46e-1f3fb':0, '1f46e-1f3fc':0, '1f46e-1f3fd':0, '1f46e-1f3fe':0, '1f46e-1f3ff':0, '1f470-1f3fb-200d-2640':0, '1f470-1f3fc-200d-2640':0, '1f470-1f3fd-200d-2640':0, '1f470-1f3fe-200d-2640':0, '1f470-1f3ff-200d-2640':0, '1f470-1f3fb-200d-2642':0, '1f470-1f3fc-200d-2642':0, '1f470-1f3fd-200d-2642':0, '1f470-1f3fe-200d-2642':0, '1f470-1f3ff-200d-2642':0, '1f470-1f3fb':0, '1f470-1f3fc':0, '1f470-1f3fd':0, '1f470-1f3fe':0, '1f470-1f3ff':0, '1f471-1f3fb-200d-2640':0, '1f471-1f3fc-200d-2640':0, '1f471-1f3fd-200d-2640':0, '1f471-1f3fe-200d-2640':0, '1f471-1f3ff-200d-2640':0, '1f471-1f3fb-200d-2642':0, '1f471-1f3fc-200d-2642':0, '1f471-1f3fd-200d-2642':0, '1f471-1f3fe-200d-2642':0, '1f471-1f3ff-200d-2642':0, '1f471-1f3fb':0, '1f471-1f3fc':0, '1f471-1f3fd':0, '1f471-1f3fe':0, '1f471-1f3ff':0, '1f472-1f3fb':0, '1f472-1f3fc':0, '1f472-1f3fd':0, '1f472-1f3fe':0, '1f472-1f3ff':0, '1f473-1f3fb-200d-2640':0, '1f473-1f3fc-200d-2640':0, '1f473-1f3fd-200d-2640':0, '1f473-1f3fe-200d-2640':0, '1f473-1f3ff-200d-2640':0, '1f473-1f3fb-200d-2642':0, '1f473-1f3fc-200d-2642':0, '1f473-1f3fd-200d-2642':0, '1f473-1f3fe-200d-2642':0, '1f473-1f3ff-200d-2642':0, '1f473-1f3fb':0, '1f473-1f3fc':0, '1f473-1f3fd':0, '1f473-1f3fe':0, '1f473-1f3ff':0, '1f474-1f3fb':0, '1f474-1f3fc':0, '1f474-1f3fd':0, '1f474-1f3fe':0, '1f474-1f3ff':0, '1f475-1f3fb':0, '1f475-1f3fc':0, '1f475-1f3fd':0, '1f475-1f3fe':0, '1f475-1f3ff':0, '1f476-1f3fb':0, '1f476-1f3fc':0, '1f476-1f3fd':0, '1f476-1f3fe':0, '1f476-1f3ff':0, '1f477-1f3fb-200d-2640':0, '1f477-1f3fc-200d-2640':0, '1f477-1f3fd-200d-2640':0, '1f477-1f3fe-200d-2640':0, '1f477-1f3ff-200d-2640':0, '1f477-1f3fb-200d-2642':0, '1f477-1f3fc-200d-2642':0, '1f477-1f3fd-200d-2642':0, '1f477-1f3fe-200d-2642':0, '1f477-1f3ff-200d-2642':0, '1f477-1f3fb':0, '1f477-1f3fc':0, '1f477-1f3fd':0, '1f477-1f3fe':0, '1f477-1f3ff':0, '1f478-1f3fb':0, '1f478-1f3fc':0, '1f478-1f3fd':0, '1f478-1f3fe':0, '1f478-1f3ff':0, '1f47c-1f3fb':0, '1f47c-1f3fc':0, '1f47c-1f3fd':0, '1f47c-1f3fe':0, '1f47c-1f3ff':0, '1f481-1f3fb-200d-2640':0, '1f481-1f3fc-200d-2640':0, '1f481-1f3fd-200d-2640':0, '1f481-1f3fe-200d-2640':0, '1f481-1f3ff-200d-2640':0, '1f481-1f3fb-200d-2642':0, '1f481-1f3fc-200d-2642':0, '1f481-1f3fd-200d-2642':0, '1f481-1f3fe-200d-2642':0, '1f481-1f3ff-200d-2642':0, '1f481-1f3fb':0, '1f481-1f3fc':0, '1f481-1f3fd':0, '1f481-1f3fe':0, '1f481-1f3ff':0, '1f482-1f3fb-200d-2640':0, '1f482-1f3fc-200d-2640':0, '1f482-1f3fd-200d-2640':0, '1f482-1f3fe-200d-2640':0, '1f482-1f3ff-200d-2640':0, '1f482-1f3fb-200d-2642':0, '1f482-1f3fc-200d-2642':0, '1f482-1f3fd-200d-2642':0, '1f482-1f3fe-200d-2642':0, '1f482-1f3ff-200d-2642':0, '1f482-1f3fb':0, '1f482-1f3fc':0, '1f482-1f3fd':0, '1f482-1f3fe':0, '1f482-1f3ff':0, '1f483-1f3fb':0, '1f483-1f3fc':0, '1f483-1f3fd':0, '1f483-1f3fe':0, '1f483-1f3ff':0, '1f485-1f3fb':0, '1f485-1f3fc':0, '1f485-1f3fd':0, '1f485-1f3fe':0, '1f485-1f3ff':0, '1f486-1f3fb-200d-2640':0, '1f486-1f3fc-200d-2640':0, '1f486-1f3fd-200d-2640':0, '1f486-1f3fe-200d-2640':0, '1f486-1f3ff-200d-2640':0, '1f486-1f3fb-200d-2642':0, '1f486-1f3fc-200d-2642':0, '1f486-1f3fd-200d-2642':0, '1f486-1f3fe-200d-2642':0, '1f486-1f3ff-200d-2642':0, '1f486-1f3fb':0, '1f486-1f3fc':0, '1f486-1f3fd':0, '1f486-1f3fe':0, '1f486-1f3ff':0, '1f487-1f3fb-200d-2640':0, '1f487-1f3fc-200d-2640':0, '1f487-1f3fd-200d-2640':0, '1f487-1f3fe-200d-2640':0, '1f487-1f3ff-200d-2640':0, '1f487-1f3fb-200d-2642':0, '1f487-1f3fc-200d-2642':0, '1f487-1f3fd-200d-2642':0, '1f487-1f3fe-200d-2642':0, '1f487-1f3ff-200d-2642':0, '1f487-1f3fb':0, '1f487-1f3fc':0, '1f487-1f3fd':0, '1f487-1f3fe':0, '1f487-1f3ff':0, '1f48f-1f3fb':0, '1f48f-1f3fc':0, '1f48f-1f3fd':0, '1f48f-1f3fe':0, '1f48f-1f3ff':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f491-1f3fb':0, '1f491-1f3fc':0, '1f491-1f3fd':0, '1f491-1f3fe':0, '1f491-1f3ff':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fe':0, '1f4aa-1f3fb':0, '1f4aa-1f3fc':0, '1f4aa-1f3fd':0, '1f4aa-1f3fe':0, '1f4aa-1f3ff':0, '1f574-1f3fb':0, '1f574-1f3fc':0, '1f574-1f3fd':0, '1f574-1f3fe':0, '1f574-1f3ff':0, '1f575-1f3fb-200d-2640':0, '1f575-1f3fc-200d-2640':0, '1f575-1f3fd-200d-2640':0, '1f575-1f3fe-200d-2640':0, '1f575-1f3ff-200d-2640':0, '1f575-1f3fb-200d-2642':0, '1f575-1f3fc-200d-2642':0, '1f575-1f3fd-200d-2642':0, '1f575-1f3fe-200d-2642':0, '1f575-1f3ff-200d-2642':0, '1f575-1f3fb':0, '1f575-1f3fc':0, '1f575-1f3fd':0, '1f575-1f3fe':0, '1f575-1f3ff':0, '1f57a-1f3fb':0, '1f57a-1f3fc':0, '1f57a-1f3fd':0, '1f57a-1f3fe':0, '1f57a-1f3ff':0, '1f590-1f3fb':0, '1f590-1f3fc':0, '1f590-1f3fd':0, '1f590-1f3fe':0, '1f590-1f3ff':0, '1f595-1f3fb':0, '1f595-1f3fc':0, '1f595-1f3fd':0, '1f595-1f3fe':0, '1f595-1f3ff':0, '1f596-1f3fb':0, '1f596-1f3fc':0, '1f596-1f3fd':0, '1f596-1f3fe':0, '1f596-1f3ff':0, '1f645-1f3fb-200d-2640':0, '1f645-1f3fc-200d-2640':0, '1f645-1f3fd-200d-2640':0, '1f645-1f3fe-200d-2640':0, '1f645-1f3ff-200d-2640':0, '1f645-1f3fb-200d-2642':0, '1f645-1f3fc-200d-2642':0, '1f645-1f3fd-200d-2642':0, '1f645-1f3fe-200d-2642':0, '1f645-1f3ff-200d-2642':0, '1f645-1f3fb':0, '1f645-1f3fc':0, '1f645-1f3fd':0, '1f645-1f3fe':0, '1f645-1f3ff':0, '1f646-1f3fb-200d-2640':0, '1f646-1f3fc-200d-2640':0, '1f646-1f3fd-200d-2640':0, '1f646-1f3fe-200d-2640':0, '1f646-1f3ff-200d-2640':0, '1f646-1f3fb-200d-2642':0, '1f646-1f3fc-200d-2642':0, '1f646-1f3fd-200d-2642':0, '1f646-1f3fe-200d-2642':0, '1f646-1f3ff-200d-2642':0, '1f646-1f3fb':0, '1f646-1f3fc':0, '1f646-1f3fd':0, '1f646-1f3fe':0, '1f646-1f3ff':0, '1f647-1f3fb-200d-2640':0, '1f647-1f3fc-200d-2640':0, '1f647-1f3fd-200d-2640':0, '1f647-1f3fe-200d-2640':0, '1f647-1f3ff-200d-2640':0, '1f647-1f3fb-200d-2642':0, '1f647-1f3fc-200d-2642':0, '1f647-1f3fd-200d-2642':0, '1f647-1f3fe-200d-2642':0, '1f647-1f3ff-200d-2642':0, '1f647-1f3fb':0, '1f647-1f3fc':0, '1f647-1f3fd':0, '1f647-1f3fe':0, '1f647-1f3ff':0, '1f64b-1f3fb-200d-2640':0, '1f64b-1f3fc-200d-2640':0, '1f64b-1f3fd-200d-2640':0, '1f64b-1f3fe-200d-2640':0, '1f64b-1f3ff-200d-2640':0, '1f64b-1f3fb-200d-2642':0, '1f64b-1f3fc-200d-2642':0, '1f64b-1f3fd-200d-2642':0, '1f64b-1f3fe-200d-2642':0, '1f64b-1f3ff-200d-2642':0, '1f64b-1f3fb':0, '1f64b-1f3fc':0, '1f64b-1f3fd':0, '1f64b-1f3fe':0, '1f64b-1f3ff':0, '1f64c-1f3fb':0, '1f64c-1f3fc':0, '1f64c-1f3fd':0, '1f64c-1f3fe':0, '1f64c-1f3ff':0, '1f64d-1f3fb-200d-2640':0, '1f64d-1f3fc-200d-2640':0, '1f64d-1f3fd-200d-2640':0, '1f64d-1f3fe-200d-2640':0, '1f64d-1f3ff-200d-2640':0, '1f64d-1f3fb-200d-2642':0, '1f64d-1f3fc-200d-2642':0, '1f64d-1f3fd-200d-2642':0, '1f64d-1f3fe-200d-2642':0, '1f64d-1f3ff-200d-2642':0, '1f64d-1f3fb':0, '1f64d-1f3fc':0, '1f64d-1f3fd':0, '1f64d-1f3fe':0, '1f64d-1f3ff':0, '1f64e-1f3fb-200d-2640':0, '1f64e-1f3fc-200d-2640':0, '1f64e-1f3fd-200d-2640':0, '1f64e-1f3fe-200d-2640':0, '1f64e-1f3ff-200d-2640':0, '1f64e-1f3fb-200d-2642':0, '1f64e-1f3fc-200d-2642':0, '1f64e-1f3fd-200d-2642':0, '1f64e-1f3fe-200d-2642':0, '1f64e-1f3ff-200d-2642':0, '1f64e-1f3fb':0, '1f64e-1f3fc':0, '1f64e-1f3fd':0, '1f64e-1f3fe':0, '1f64e-1f3ff':0, '1f64f-1f3fb':0, '1f64f-1f3fc':0, '1f64f-1f3fd':0, '1f64f-1f3fe':0, '1f64f-1f3ff':0, '1f6a3-1f3fb-200d-2640':0, '1f6a3-1f3fc-200d-2640':0, '1f6a3-1f3fd-200d-2640':0, '1f6a3-1f3fe-200d-2640':0, '1f6a3-1f3ff-200d-2640':0, '1f6a3-1f3fb-200d-2642':0, '1f6a3-1f3fc-200d-2642':0, '1f6a3-1f3fd-200d-2642':0, '1f6a3-1f3fe-200d-2642':0, '1f6a3-1f3ff-200d-2642':0, '1f6a3-1f3fb':0, '1f6a3-1f3fc':0, '1f6a3-1f3fd':0, '1f6a3-1f3fe':0, '1f6a3-1f3ff':0, '1f6b4-1f3fb-200d-2640':0, '1f6b4-1f3fc-200d-2640':0, '1f6b4-1f3fd-200d-2640':0, '1f6b4-1f3fe-200d-2640':0, '1f6b4-1f3ff-200d-2640':0, '1f6b4-1f3fb-200d-2642':0, '1f6b4-1f3fc-200d-2642':0, '1f6b4-1f3fd-200d-2642':0, '1f6b4-1f3fe-200d-2642':0, '1f6b4-1f3ff-200d-2642':0, '1f6b4-1f3fb':0, '1f6b4-1f3fc':0, '1f6b4-1f3fd':0, '1f6b4-1f3fe':0, '1f6b4-1f3ff':0, '1f6b5-1f3fb-200d-2640':0, '1f6b5-1f3fc-200d-2640':0, '1f6b5-1f3fd-200d-2640':0, '1f6b5-1f3fe-200d-2640':0, '1f6b5-1f3ff-200d-2640':0, '1f6b5-1f3fb-200d-2642':0, '1f6b5-1f3fc-200d-2642':0, '1f6b5-1f3fd-200d-2642':0, '1f6b5-1f3fe-200d-2642':0, '1f6b5-1f3ff-200d-2642':0, '1f6b5-1f3fb':0, '1f6b5-1f3fc':0, '1f6b5-1f3fd':0, '1f6b5-1f3fe':0, '1f6b5-1f3ff':0, '1f6b6-1f3fb-200d-2640':0, '1f6b6-1f3fc-200d-2640':0, '1f6b6-1f3fd-200d-2640':0, '1f6b6-1f3fe-200d-2640':0, '1f6b6-1f3ff-200d-2640':0, '1f6b6-1f3fb-200d-2642':0, '1f6b6-1f3fc-200d-2642':0, '1f6b6-1f3fd-200d-2642':0, '1f6b6-1f3fe-200d-2642':0, '1f6b6-1f3ff-200d-2642':0, '1f6b6-1f3fb':0, '1f6b6-1f3fc':0, '1f6b6-1f3fd':0, '1f6b6-1f3fe':0, '1f6b6-1f3ff':0, '1f6c0-1f3fb':0, '1f6c0-1f3fc':0, '1f6c0-1f3fd':0, '1f6c0-1f3fe':0, '1f6c0-1f3ff':0, '1f6cc-1f3fb':0, '1f6cc-1f3fc':0, '1f6cc-1f3fd':0, '1f6cc-1f3fe':0, '1f6cc-1f3ff':0, '1f90c-1f3fb':0, '1f90c-1f3fc':0, '1f90c-1f3fd':0, '1f90c-1f3fe':0, '1f90c-1f3ff':0, '1f90f-1f3fb':0, '1f90f-1f3fc':0, '1f90f-1f3fd':0, '1f90f-1f3fe':0, '1f90f-1f3ff':0, '1f918-1f3fb':0, '1f918-1f3fc':0, '1f918-1f3fd':0, '1f918-1f3fe':0, '1f918-1f3ff':0, '1f919-1f3fb':0, '1f919-1f3fc':0, '1f919-1f3fd':0, '1f919-1f3fe':0, '1f919-1f3ff':0, '1f91a-1f3fb':0, '1f91a-1f3fc':0, '1f91a-1f3fd':0, '1f91a-1f3fe':0, '1f91a-1f3ff':0, '1f91b-1f3fb':0, '1f91b-1f3fc':0, '1f91b-1f3fd':0, '1f91b-1f3fe':0, '1f91b-1f3ff':0, '1f91c-1f3fb':0, '1f91c-1f3fc':0, '1f91c-1f3fd':0, '1f91c-1f3fe':0, '1f91c-1f3ff':0, '1f91d-1f3fb':0, '1f91d-1f3fc':0, '1f91d-1f3fd':0, '1f91d-1f3fe':0, '1f91d-1f3ff':0, '1f91e-1f3fb':0, '1f91e-1f3fc':0, '1f91e-1f3fd':0, '1f91e-1f3fe':0, '1f91e-1f3ff':0, '1f91f-1f3fb':0, '1f91f-1f3fc':0, '1f91f-1f3fd':0, '1f91f-1f3fe':0, '1f91f-1f3ff':0, '1f926-1f3fb-200d-2640':0, '1f926-1f3fc-200d-2640':0, '1f926-1f3fd-200d-2640':0, '1f926-1f3fe-200d-2640':0, '1f926-1f3ff-200d-2640':0, '1f926-1f3fb-200d-2642':0, '1f926-1f3fc-200d-2642':0, '1f926-1f3fd-200d-2642':0, '1f926-1f3fe-200d-2642':0, '1f926-1f3ff-200d-2642':0, '1f926-1f3fb':0, '1f926-1f3fc':0, '1f926-1f3fd':0, '1f926-1f3fe':0, '1f926-1f3ff':0, '1f930-1f3fb':0, '1f930-1f3fc':0, '1f930-1f3fd':0, '1f930-1f3fe':0, '1f930-1f3ff':0, '1f931-1f3fb':0, '1f931-1f3fc':0, '1f931-1f3fd':0, '1f931-1f3fe':0, '1f931-1f3ff':0, '1f932-1f3fb':0, '1f932-1f3fc':0, '1f932-1f3fd':0, '1f932-1f3fe':0, '1f932-1f3ff':0, '1f933-1f3fb':0, '1f933-1f3fc':0, '1f933-1f3fd':0, '1f933-1f3fe':0, '1f933-1f3ff':0, '1f934-1f3fb':0, '1f934-1f3fc':0, '1f934-1f3fd':0, '1f934-1f3fe':0, '1f934-1f3ff':0, '1f935-1f3fb-200d-2640':0, '1f935-1f3fc-200d-2640':0, '1f935-1f3fd-200d-2640':0, '1f935-1f3fe-200d-2640':0, '1f935-1f3ff-200d-2640':0, '1f935-1f3fb-200d-2642':0, '1f935-1f3fc-200d-2642':0, '1f935-1f3fd-200d-2642':0, '1f935-1f3fe-200d-2642':0, '1f935-1f3ff-200d-2642':0, '1f935-1f3fb':0, '1f935-1f3fc':0, '1f935-1f3fd':0, '1f935-1f3fe':0, '1f935-1f3ff':0, '1f936-1f3fb':0, '1f936-1f3fc':0, '1f936-1f3fd':0, '1f936-1f3fe':0, '1f936-1f3ff':0, '1f937-1f3fb-200d-2640':0, '1f937-1f3fc-200d-2640':0, '1f937-1f3fd-200d-2640':0, '1f937-1f3fe-200d-2640':0, '1f937-1f3ff-200d-2640':0, '1f937-1f3fb-200d-2642':0, '1f937-1f3fc-200d-2642':0, '1f937-1f3fd-200d-2642':0, '1f937-1f3fe-200d-2642':0, '1f937-1f3ff-200d-2642':0, '1f937-1f3fb':0, '1f937-1f3fc':0, '1f937-1f3fd':0, '1f937-1f3fe':0, '1f937-1f3ff':0, '1f938-1f3fb-200d-2640':0, '1f938-1f3fc-200d-2640':0, '1f938-1f3fd-200d-2640':0, '1f938-1f3fe-200d-2640':0, '1f938-1f3ff-200d-2640':0, '1f938-1f3fb-200d-2642':0, '1f938-1f3fc-200d-2642':0, '1f938-1f3fd-200d-2642':0, '1f938-1f3fe-200d-2642':0, '1f938-1f3ff-200d-2642':0, '1f938-1f3fb':0, '1f938-1f3fc':0, '1f938-1f3fd':0, '1f938-1f3fe':0, '1f938-1f3ff':0, '1f939-1f3fb-200d-2640':0, '1f939-1f3fc-200d-2640':0, '1f939-1f3fd-200d-2640':0, '1f939-1f3fe-200d-2640':0, '1f939-1f3ff-200d-2640':0, '1f939-1f3fb-200d-2642':0, '1f939-1f3fc-200d-2642':0, '1f939-1f3fd-200d-2642':0, '1f939-1f3fe-200d-2642':0, '1f939-1f3ff-200d-2642':0, '1f939-1f3fb':0, '1f939-1f3fc':0, '1f939-1f3fd':0, '1f939-1f3fe':0, '1f939-1f3ff':0, '1f93d-1f3fb-200d-2640':0, '1f93d-1f3fc-200d-2640':0, '1f93d-1f3fd-200d-2640':0, '1f93d-1f3fe-200d-2640':0, '1f93d-1f3ff-200d-2640':0, '1f93d-1f3fb-200d-2642':0, '1f93d-1f3fc-200d-2642':0, '1f93d-1f3fd-200d-2642':0, '1f93d-1f3fe-200d-2642':0, '1f93d-1f3ff-200d-2642':0, '1f93d-1f3fb':0, '1f93d-1f3fc':0, '1f93d-1f3fd':0, '1f93d-1f3fe':0, '1f93d-1f3ff':0, '1f93e-1f3fb-200d-2640':0, '1f93e-1f3fc-200d-2640':0, '1f93e-1f3fd-200d-2640':0, '1f93e-1f3fe-200d-2640':0, '1f93e-1f3ff-200d-2640':0, '1f93e-1f3fb-200d-2642':0, '1f93e-1f3fc-200d-2642':0, '1f93e-1f3fd-200d-2642':0, '1f93e-1f3fe-200d-2642':0, '1f93e-1f3ff-200d-2642':0, '1f93e-1f3fb':0, '1f93e-1f3fc':0, '1f93e-1f3fd':0, '1f93e-1f3fe':0, '1f93e-1f3ff':0, '1f977-1f3fb':0, '1f977-1f3fc':0, '1f977-1f3fd':0, '1f977-1f3fe':0, '1f977-1f3ff':0, '1f9b5-1f3fb':0, '1f9b5-1f3fc':0, '1f9b5-1f3fd':0, '1f9b5-1f3fe':0, '1f9b5-1f3ff':0, '1f9b6-1f3fb':0, '1f9b6-1f3fc':0, '1f9b6-1f3fd':0, '1f9b6-1f3fe':0, '1f9b6-1f3ff':0, '1f9b8-1f3fb-200d-2640':0, '1f9b8-1f3fc-200d-2640':0, '1f9b8-1f3fd-200d-2640':0, '1f9b8-1f3fe-200d-2640':0, '1f9b8-1f3ff-200d-2640':0, '1f9b8-1f3fb-200d-2642':0, '1f9b8-1f3fc-200d-2642':0, '1f9b8-1f3fd-200d-2642':0, '1f9b8-1f3fe-200d-2642':0, '1f9b8-1f3ff-200d-2642':0, '1f9b8-1f3fb':0, '1f9b8-1f3fc':0, '1f9b8-1f3fd':0, '1f9b8-1f3fe':0, '1f9b8-1f3ff':0, '1f9b9-1f3fb-200d-2640':0, '1f9b9-1f3fc-200d-2640':0, '1f9b9-1f3fd-200d-2640':0, '1f9b9-1f3fe-200d-2640':0, '1f9b9-1f3ff-200d-2640':0, '1f9b9-1f3fb-200d-2642':0, '1f9b9-1f3fc-200d-2642':0, '1f9b9-1f3fd-200d-2642':0, '1f9b9-1f3fe-200d-2642':0, '1f9b9-1f3ff-200d-2642':0, '1f9b9-1f3fb':0, '1f9b9-1f3fc':0, '1f9b9-1f3fd':0, '1f9b9-1f3fe':0, '1f9b9-1f3ff':0, '1f9bb-1f3fb':0, '1f9bb-1f3fc':0, '1f9bb-1f3fd':0, '1f9bb-1f3fe':0, '1f9bb-1f3ff':0, '1f9cd-1f3fb-200d-2640':0, '1f9cd-1f3fc-200d-2640':0, '1f9cd-1f3fd-200d-2640':0, '1f9cd-1f3fe-200d-2640':0, '1f9cd-1f3ff-200d-2640':0, '1f9cd-1f3fb-200d-2642':0, '1f9cd-1f3fc-200d-2642':0, '1f9cd-1f3fd-200d-2642':0, '1f9cd-1f3fe-200d-2642':0, '1f9cd-1f3ff-200d-2642':0, '1f9cd-1f3fb':0, '1f9cd-1f3fc':0, '1f9cd-1f3fd':0, '1f9cd-1f3fe':0, '1f9cd-1f3ff':0, '1f9ce-1f3fb-200d-2640':0, '1f9ce-1f3fc-200d-2640':0, '1f9ce-1f3fd-200d-2640':0, '1f9ce-1f3fe-200d-2640':0, '1f9ce-1f3ff-200d-2640':0, '1f9ce-1f3fb-200d-2642':0, '1f9ce-1f3fc-200d-2642':0, '1f9ce-1f3fd-200d-2642':0, '1f9ce-1f3fe-200d-2642':0, '1f9ce-1f3ff-200d-2642':0, '1f9ce-1f3fb':0, '1f9ce-1f3fc':0, '1f9ce-1f3fd':0, '1f9ce-1f3fe':0, '1f9ce-1f3ff':0, '1f9cf-1f3fb-200d-2640':0, '1f9cf-1f3fc-200d-2640':0, '1f9cf-1f3fd-200d-2640':0, '1f9cf-1f3fe-200d-2640':0, '1f9cf-1f3ff-200d-2640':0, '1f9cf-1f3fb-200d-2642':0, '1f9cf-1f3fc-200d-2642':0, '1f9cf-1f3fd-200d-2642':0, '1f9cf-1f3fe-200d-2642':0, '1f9cf-1f3ff-200d-2642':0, '1f9cf-1f3fb':0, '1f9cf-1f3fc':0, '1f9cf-1f3fd':0, '1f9cf-1f3fe':0, '1f9cf-1f3ff':0, '1f9d1-1f3fb-200d-1f33e':0, '1f9d1-1f3fc-200d-1f33e':0, '1f9d1-1f3fd-200d-1f33e':0, '1f9d1-1f3fe-200d-1f33e':0, '1f9d1-1f3ff-200d-1f33e':0, '1f9d1-1f3fb-200d-1f373':0, '1f9d1-1f3fc-200d-1f373':0, '1f9d1-1f3fd-200d-1f373':0, '1f9d1-1f3fe-200d-1f373':0, '1f9d1-1f3ff-200d-1f373':0, '1f9d1-1f3fb-200d-1f37c':0, '1f9d1-1f3fc-200d-1f37c':0, '1f9d1-1f3fd-200d-1f37c':0, '1f9d1-1f3fe-200d-1f37c':0, '1f9d1-1f3ff-200d-1f37c':0, '1f9d1-1f3fb-200d-1f384':0, '1f9d1-1f3fc-200d-1f384':0, '1f9d1-1f3fd-200d-1f384':0, '1f9d1-1f3fe-200d-1f384':0, '1f9d1-1f3ff-200d-1f384':0, '1f9d1-1f3fb-200d-1f393':0, '1f9d1-1f3fc-200d-1f393':0, '1f9d1-1f3fd-200d-1f393':0, '1f9d1-1f3fe-200d-1f393':0, '1f9d1-1f3ff-200d-1f393':0, '1f9d1-1f3fb-200d-1f3a4':0, '1f9d1-1f3fc-200d-1f3a4':0, '1f9d1-1f3fd-200d-1f3a4':0, '1f9d1-1f3fe-200d-1f3a4':0, '1f9d1-1f3ff-200d-1f3a4':0, '1f9d1-1f3fb-200d-1f3a8':0, '1f9d1-1f3fc-200d-1f3a8':0, '1f9d1-1f3fd-200d-1f3a8':0, '1f9d1-1f3fe-200d-1f3a8':0, '1f9d1-1f3ff-200d-1f3a8':0, '1f9d1-1f3fb-200d-1f3eb':0, '1f9d1-1f3fc-200d-1f3eb':0, '1f9d1-1f3fd-200d-1f3eb':0, '1f9d1-1f3fe-200d-1f3eb':0, '1f9d1-1f3ff-200d-1f3eb':0, '1f9d1-1f3fb-200d-1f3ed':0, '1f9d1-1f3fc-200d-1f3ed':0, '1f9d1-1f3fd-200d-1f3ed':0, '1f9d1-1f3fe-200d-1f3ed':0, '1f9d1-1f3ff-200d-1f3ed':0, '1f9d1-1f3fb-200d-1f4bb':0, '1f9d1-1f3fc-200d-1f4bb':0, '1f9d1-1f3fd-200d-1f4bb':0, '1f9d1-1f3fe-200d-1f4bb':0, '1f9d1-1f3ff-200d-1f4bb':0, '1f9d1-1f3fb-200d-1f4bc':0, '1f9d1-1f3fc-200d-1f4bc':0, '1f9d1-1f3fd-200d-1f4bc':0, '1f9d1-1f3fe-200d-1f4bc':0, '1f9d1-1f3ff-200d-1f4bc':0, '1f9d1-1f3fb-200d-1f527':0, '1f9d1-1f3fc-200d-1f527':0, '1f9d1-1f3fd-200d-1f527':0, '1f9d1-1f3fe-200d-1f527':0, '1f9d1-1f3ff-200d-1f527':0, '1f9d1-1f3fb-200d-1f52c':0, '1f9d1-1f3fc-200d-1f52c':0, '1f9d1-1f3fd-200d-1f52c':0, '1f9d1-1f3fe-200d-1f52c':0, '1f9d1-1f3ff-200d-1f52c':0, '1f9d1-1f3fb-200d-1f680':0, '1f9d1-1f3fc-200d-1f680':0, '1f9d1-1f3fd-200d-1f680':0, '1f9d1-1f3fe-200d-1f680':0, '1f9d1-1f3ff-200d-1f680':0, '1f9d1-1f3fb-200d-1f692':0, '1f9d1-1f3fc-200d-1f692':0, '1f9d1-1f3fd-200d-1f692':0, '1f9d1-1f3fe-200d-1f692':0, '1f9d1-1f3ff-200d-1f692':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fb-200d-1f9af':0, '1f9d1-1f3fc-200d-1f9af':0, '1f9d1-1f3fd-200d-1f9af':0, '1f9d1-1f3fe-200d-1f9af':0, '1f9d1-1f3ff-200d-1f9af':0, '1f9d1-1f3fb-200d-1f9b0':0, '1f9d1-1f3fc-200d-1f9b0':0, '1f9d1-1f3fd-200d-1f9b0':0, '1f9d1-1f3fe-200d-1f9b0':0, '1f9d1-1f3ff-200d-1f9b0':0, '1f9d1-1f3fb-200d-1f9b1':0, '1f9d1-1f3fc-200d-1f9b1':0, '1f9d1-1f3fd-200d-1f9b1':0, '1f9d1-1f3fe-200d-1f9b1':0, '1f9d1-1f3ff-200d-1f9b1':0, '1f9d1-1f3fb-200d-1f9b2':0, '1f9d1-1f3fc-200d-1f9b2':0, '1f9d1-1f3fd-200d-1f9b2':0, '1f9d1-1f3fe-200d-1f9b2':0, '1f9d1-1f3ff-200d-1f9b2':0, '1f9d1-1f3fb-200d-1f9b3':0, '1f9d1-1f3fc-200d-1f9b3':0, '1f9d1-1f3fd-200d-1f9b3':0, '1f9d1-1f3fe-200d-1f9b3':0, '1f9d1-1f3ff-200d-1f9b3':0, '1f9d1-1f3fb-200d-1f9bc':0, '1f9d1-1f3fc-200d-1f9bc':0, '1f9d1-1f3fd-200d-1f9bc':0, '1f9d1-1f3fe-200d-1f9bc':0, '1f9d1-1f3ff-200d-1f9bc':0, '1f9d1-1f3fb-200d-1f9bd':0, '1f9d1-1f3fc-200d-1f9bd':0, '1f9d1-1f3fd-200d-1f9bd':0, '1f9d1-1f3fe-200d-1f9bd':0, '1f9d1-1f3ff-200d-1f9bd':0, '1f9d1-1f3fb-200d-2695':0, '1f9d1-1f3fc-200d-2695':0, '1f9d1-1f3fd-200d-2695':0, '1f9d1-1f3fe-200d-2695':0, '1f9d1-1f3ff-200d-2695':0, '1f9d1-1f3fb-200d-2696':0, '1f9d1-1f3fc-200d-2696':0, '1f9d1-1f3fd-200d-2696':0, '1f9d1-1f3fe-200d-2696':0, '1f9d1-1f3ff-200d-2696':0, '1f9d1-1f3fb-200d-2708':0, '1f9d1-1f3fc-200d-2708':0, '1f9d1-1f3fd-200d-2708':0, '1f9d1-1f3fe-200d-2708':0, '1f9d1-1f3ff-200d-2708':0, '1f9d1-1f3fb':0, '1f9d1-1f3fc':0, '1f9d1-1f3fd':0, '1f9d1-1f3fe':0, '1f9d1-1f3ff':0, '1f9d2-1f3fb':0, '1f9d2-1f3fc':0, '1f9d2-1f3fd':0, '1f9d2-1f3fe':0, '1f9d2-1f3ff':0, '1f9d3-1f3fb':0, '1f9d3-1f3fc':0, '1f9d3-1f3fd':0, '1f9d3-1f3fe':0, '1f9d3-1f3ff':0, '1f9d4-1f3fb-200d-2640':0, '1f9d4-1f3fc-200d-2640':0, '1f9d4-1f3fd-200d-2640':0, '1f9d4-1f3fe-200d-2640':0, '1f9d4-1f3ff-200d-2640':0, '1f9d4-1f3fb-200d-2642':0, '1f9d4-1f3fc-200d-2642':0, '1f9d4-1f3fd-200d-2642':0, '1f9d4-1f3fe-200d-2642':0, '1f9d4-1f3ff-200d-2642':0, '1f9d4-1f3fb':0, '1f9d4-1f3fc':0, '1f9d4-1f3fd':0, '1f9d4-1f3fe':0, '1f9d4-1f3ff':0, '1f9d5-1f3fb':0, '1f9d5-1f3fc':0, '1f9d5-1f3fd':0, '1f9d5-1f3fe':0, '1f9d5-1f3ff':0, '1f9d6-1f3fb-200d-2640':0, '1f9d6-1f3fc-200d-2640':0, '1f9d6-1f3fd-200d-2640':0, '1f9d6-1f3fe-200d-2640':0, '1f9d6-1f3ff-200d-2640':0, '1f9d6-1f3fb-200d-2642':0, '1f9d6-1f3fc-200d-2642':0, '1f9d6-1f3fd-200d-2642':0, '1f9d6-1f3fe-200d-2642':0, '1f9d6-1f3ff-200d-2642':0, '1f9d6-1f3fb':0, '1f9d6-1f3fc':0, '1f9d6-1f3fd':0, '1f9d6-1f3fe':0, '1f9d6-1f3ff':0, '1f9d7-1f3fb-200d-2640':0, '1f9d7-1f3fc-200d-2640':0, '1f9d7-1f3fd-200d-2640':0, '1f9d7-1f3fe-200d-2640':0, '1f9d7-1f3ff-200d-2640':0, '1f9d7-1f3fb-200d-2642':0, '1f9d7-1f3fc-200d-2642':0, '1f9d7-1f3fd-200d-2642':0, '1f9d7-1f3fe-200d-2642':0, '1f9d7-1f3ff-200d-2642':0, '1f9d7-1f3fb':0, '1f9d7-1f3fc':0, '1f9d7-1f3fd':0, '1f9d7-1f3fe':0, '1f9d7-1f3ff':0, '1f9d8-1f3fb-200d-2640':0, '1f9d8-1f3fc-200d-2640':0, '1f9d8-1f3fd-200d-2640':0, '1f9d8-1f3fe-200d-2640':0, '1f9d8-1f3ff-200d-2640':0, '1f9d8-1f3fb-200d-2642':0, '1f9d8-1f3fc-200d-2642':0, '1f9d8-1f3fd-200d-2642':0, '1f9d8-1f3fe-200d-2642':0, '1f9d8-1f3ff-200d-2642':0, '1f9d8-1f3fb':0, '1f9d8-1f3fc':0, '1f9d8-1f3fd':0, '1f9d8-1f3fe':0, '1f9d8-1f3ff':0, '1f9d9-1f3fb-200d-2640':0, '1f9d9-1f3fc-200d-2640':0, '1f9d9-1f3fd-200d-2640':0, '1f9d9-1f3fe-200d-2640':0, '1f9d9-1f3ff-200d-2640':0, '1f9d9-1f3fb-200d-2642':0, '1f9d9-1f3fc-200d-2642':0, '1f9d9-1f3fd-200d-2642':0, '1f9d9-1f3fe-200d-2642':0, '1f9d9-1f3ff-200d-2642':0, '1f9d9-1f3fb':0, '1f9d9-1f3fc':0, '1f9d9-1f3fd':0, '1f9d9-1f3fe':0, '1f9d9-1f3ff':0, '1f9da-1f3fb-200d-2640':0, '1f9da-1f3fc-200d-2640':0, '1f9da-1f3fd-200d-2640':0, '1f9da-1f3fe-200d-2640':0, '1f9da-1f3ff-200d-2640':0, '1f9da-1f3fb-200d-2642':0, '1f9da-1f3fc-200d-2642':0, '1f9da-1f3fd-200d-2642':0, '1f9da-1f3fe-200d-2642':0, '1f9da-1f3ff-200d-2642':0, '1f9da-1f3fb':0, '1f9da-1f3fc':0, '1f9da-1f3fd':0, '1f9da-1f3fe':0, '1f9da-1f3ff':0, '1f9db-1f3fb-200d-2640':0, '1f9db-1f3fc-200d-2640':0, '1f9db-1f3fd-200d-2640':0, '1f9db-1f3fe-200d-2640':0, '1f9db-1f3ff-200d-2640':0, '1f9db-1f3fb-200d-2642':0, '1f9db-1f3fc-200d-2642':0, '1f9db-1f3fd-200d-2642':0, '1f9db-1f3fe-200d-2642':0, '1f9db-1f3ff-200d-2642':0, '1f9db-1f3fb':0, '1f9db-1f3fc':0, '1f9db-1f3fd':0, '1f9db-1f3fe':0, '1f9db-1f3ff':0, '1f9dc-1f3fb-200d-2640':0, '1f9dc-1f3fc-200d-2640':0, '1f9dc-1f3fd-200d-2640':0, '1f9dc-1f3fe-200d-2640':0, '1f9dc-1f3ff-200d-2640':0, '1f9dc-1f3fb-200d-2642':0, '1f9dc-1f3fc-200d-2642':0, '1f9dc-1f3fd-200d-2642':0, '1f9dc-1f3fe-200d-2642':0, '1f9dc-1f3ff-200d-2642':0, '1f9dc-1f3fb':0, '1f9dc-1f3fc':0, '1f9dc-1f3fd':0, '1f9dc-1f3fe':0, '1f9dc-1f3ff':0, '1f9dd-1f3fb-200d-2640':0, '1f9dd-1f3fc-200d-2640':0, '1f9dd-1f3fd-200d-2640':0, '1f9dd-1f3fe-200d-2640':0, '1f9dd-1f3ff-200d-2640':0, '1f9dd-1f3fb-200d-2642':0, '1f9dd-1f3fc-200d-2642':0, '1f9dd-1f3fd-200d-2642':0, '1f9dd-1f3fe-200d-2642':0, '1f9dd-1f3ff-200d-2642':0, '1f9dd-1f3fb':0, '1f9dd-1f3fc':0, '1f9dd-1f3fd':0, '1f9dd-1f3fe':0, '1f9dd-1f3ff':0, '261d-1f3fb':0, '261d-1f3fc':0, '261d-1f3fd':0, '261d-1f3fe':0, '261d-1f3ff':0, '26f9-1f3fb-200d-2640':0, '26f9-1f3fc-200d-2640':0, '26f9-1f3fd-200d-2640':0, '26f9-1f3fe-200d-2640':0, '26f9-1f3ff-200d-2640':0, '26f9-1f3fb-200d-2642':0, '26f9-1f3fc-200d-2642':0, '26f9-1f3fd-200d-2642':0, '26f9-1f3fe-200d-2642':0, '26f9-1f3ff-200d-2642':0, '26f9-1f3fb':0, '26f9-1f3fc':0, '26f9-1f3fd':0, '26f9-1f3fe':0, '26f9-1f3ff':0, '270a-1f3fb':0, '270a-1f3fc':0, '270a-1f3fd':0, '270a-1f3fe':0, '270a-1f3ff':0, '270b-1f3fb':0, '270b-1f3fc':0, '270b-1f3fd':0, '270b-1f3fe':0, '270b-1f3ff':0, '270c-1f3fb':0, '270c-1f3fc':0, '270c-1f3fd':0, '270c-1f3fe':0, '270c-1f3ff':0, '270d-1f3fb':0, '270d-1f3fc':0, '270d-1f3fd':0, '270d-1f3fe':0, '270d-1f3ff':0}};\n\nconst Emoji: {[emoji: string]: number} = EmojiVersions[''];\nfor(const version in EmojiVersions) {\n  if(version) {\n    Object.assign(Emoji, EmojiVersions[version as EMOJI_VERSION]);\n  }\n}\n\nexport default Emoji;\n\n/* Emoji[\"00a9-fe0f\"] = 6362;\nEmoji[\"00ae-fe0f\"] = 6363;\nEmoji[\"2122-fe0f\"] = 6364; */\n","// just for the future\nexport default function buildURLHash(str: string) {\n  return '#' + encodeURIComponent(str);\n}\n","export default function spoiler(text: string): string {\n  const chars = '';\n  const charsLength = chars.length;\n\n  const out: string[] = [];\n  for(let i = 0; i < text.length; ++i) {\n    const char = text.charCodeAt(i);\n    out.push(chars[char % charsLength]);\n  }\n\n  return out.join('');\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MessageEntity} from '../../layer';\nimport spoiler from './spoiler';\n\nexport default function encodeSpoiler(text: string, entity: MessageEntity.messageEntitySpoiler) {\n  const before = text.slice(0, entity.offset);\n  const spoilerBefore = text.slice(entity.offset, entity.offset + entity.length);\n  const spoilerAfter = spoiler(spoilerBefore)/*  ''.repeat(entity.length) */;\n  const after = text.slice(entity.offset + entity.length);\n  text = before + spoilerAfter + after;\n  return {text, entityText: spoilerAfter};\n};\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\n// From https://github.com/stephenmathieson/node-tlds/blob/master/index.js\nconst TLD = ['abogado', 'ac', 'academy', 'accountants', 'active', 'actor', 'ad', 'adult', 'ae', 'aero', 'af', 'ag', 'agency', 'ai', 'airforce', 'al', 'allfinanz', 'alsace', 'am', 'amsterdam', 'an', 'android', 'ao', 'apartments', 'aq', 'aquarelle', 'ar', 'archi', 'army', 'arpa', 'as', 'asia', 'associates', 'at', 'attorney', 'au', 'auction', 'audio', 'autos', 'aw', 'ax', 'axa', 'az', 'ba', 'band', 'bank', 'bar', 'barclaycard', 'barclays', 'bargains', 'bayern', 'bb', 'bd', 'be', 'beer', 'berlin', 'best', 'bf', 'bg', 'bh', 'bi', 'bid', 'bike', 'bingo', 'bio', 'biz', 'bj', 'black', 'blackfriday', 'bloomberg', 'blue', 'bm', 'bmw', 'bn', 'bnpparibas', 'bo', 'boo', 'boutique', 'br', 'brussels', 'bs', 'bt', 'budapest', 'build', 'builders', 'business', 'buzz', 'bv', 'bw', 'by', 'bz', 'bzh', 'ca', 'cab', 'cal', 'camera', 'camp', 'cancerresearch', 'canon', 'capetown', 'capital', 'caravan', 'cards', 'care', 'career', 'careers', 'cartier', 'casa', 'cash', 'cat', 'catering', 'cc', 'cd', 'center', 'ceo', 'cern', 'cf', 'cg', 'ch', 'channel', 'chat', 'cheap', 'christmas', 'chrome', 'church', 'ci', 'citic', 'city', 'ck', 'cl', 'claims', 'cleaning', 'click', 'clinic', 'clothing', 'club', 'cm', 'cn', 'co', 'coach', 'codes', 'coffee', 'college', 'cologne', 'com', 'community', 'company', 'computer', 'condos', 'construction', 'consulting', 'contractors', 'cooking', 'cool', 'coop', 'country', 'cr', 'credit', 'creditcard', 'cricket', 'crs', 'cruises', 'cu', 'cuisinella', 'cv', 'cw', 'cx', 'cy', 'cymru', 'cz', 'dabur', 'dad', 'dance', 'dating', 'day', 'dclk', 'de', 'deals', 'degree', 'delivery', 'democrat', 'dental', 'dentist', 'desi', 'design', 'dev', 'diamonds', 'diet', 'digital', 'direct', 'directory', 'discount', 'dj', 'dk', 'dm', 'dnp', 'do', 'docs', 'domains', 'doosan', 'durban', 'dvag', 'dz', 'eat', 'ec', 'edu', 'education', 'ee', 'eg', 'email', 'emerck', 'energy', 'engineer', 'engineering', 'enterprises', 'equipment', 'er', 'es', 'esq', 'estate', 'et', 'eu', 'eurovision', 'eus', 'events', 'everbank', 'exchange', 'expert', 'exposed', 'fail', 'farm', 'fashion', 'feedback', 'fi', 'finance', 'financial', 'firmdale', 'fish', 'fishing', 'fit', 'fitness', 'fj', 'fk', 'flights', 'florist', 'flowers', 'flsmidth', 'fly', 'fm', 'fo', 'foo', 'forsale', 'foundation', 'fr', 'frl', 'frogans', 'fund', 'furniture', 'futbol', 'ga', 'gal', 'gallery', 'garden', 'gb', 'gbiz', 'gd', 'ge', 'gent', 'gf', 'gg', 'ggee', 'gh', 'gi', 'gift', 'gifts', 'gives', 'gl', 'glass', 'gle', 'global', 'globo', 'gm', 'gmail', 'gmo', 'gmx', 'gn', 'goog', 'google', 'gop', 'gov', 'gp', 'gq', 'gr', 'graphics', 'gratis', 'green', 'gripe', 'gs', 'gt', 'gu', 'guide', 'guitars', 'guru', 'gw', 'gy', 'hamburg', 'hangout', 'haus', 'healthcare', 'help', 'here', 'hermes', 'hiphop', 'hiv', 'hk', 'hm', 'hn', 'holdings', 'holiday', 'homes', 'horse', 'host', 'hosting', 'house', 'how', 'hr', 'ht', 'hu', 'ibm', 'id', 'ie', 'ifm', 'il', 'im', 'immo', 'immobilien', 'in', 'industries', 'info', 'ing', 'ink', 'institute', 'insure', 'int', 'international', 'investments', 'io', 'iq', 'ir', 'irish', 'is', 'it', 'iwc', 'jcb', 'je', 'jetzt', 'jm', 'jo', 'jobs', 'joburg', 'jp', 'juegos', 'kaufen', 'kddi', 'ke', 'kg', 'kh', 'ki', 'kim', 'kitchen', 'kiwi', 'km', 'kn', 'koeln', 'kp', 'kr', 'krd', 'kred', 'kw', 'ky', 'kyoto', 'kz', 'la', 'lacaixa', 'land', 'lat', 'latrobe', 'lawyer', 'lb', 'lc', 'lds', 'lease', 'legal', 'lgbt', 'li', 'lidl', 'life', 'lighting', 'limited', 'limo', 'link', 'lk', 'loans', 'london', 'lotte', 'lotto', 'lr', 'ls', 'lt', 'ltda', 'lu', 'luxe', 'luxury', 'lv', 'ly', 'ma', 'madrid', 'maison', 'management', 'mango', 'market', 'marketing', 'marriott', 'mc', 'md', 'me', 'media', 'meet', 'melbourne', 'meme', 'memorial', 'menu', 'mg', 'mh', 'miami', 'mil', 'mini', 'mk', 'ml', 'mm', 'mn', 'mo', 'mobi', 'moda', 'moe', 'monash', 'money', 'mormon', 'mortgage', 'moscow', 'motorcycles', 'mov', 'mp', 'mq', 'mr', 'ms', 'mt', 'mu', 'museum', 'mv', 'mw', 'mx', 'my', 'mz', 'na', 'nagoya', 'name', 'navy', 'nc', 'ne', 'net', 'network', 'neustar', 'new', 'nexus', 'nf', 'ng', 'ngo', 'nhk', 'ni', 'nico', 'ninja', 'nl', 'no', 'np', 'nr', 'nra', 'nrw', 'ntt', 'nu', 'nyc', 'nz', 'okinawa', 'om', 'one', 'ong', 'onl', 'ooo', 'org', 'organic', 'osaka', 'otsuka', 'ovh', 'pa', 'paris', 'partners', 'parts', 'party', 'pe', 'pf', 'pg', 'ph', 'pharmacy', 'photo', 'photography', 'photos', 'physio', 'pics', 'pictures', 'pink', 'pizza', 'pk', 'pl', 'place', 'plumbing', 'pm', 'pn', 'pohl', 'poker', 'porn', 'post', 'pr', 'praxi', 'press', 'pro', 'prod', 'productions', 'prof', 'properties', 'property', 'ps', 'pt', 'pub', 'pw', 'py', 'qa', 'qpon', 'quebec', 're', 'realtor', 'recipes', 'red', 'rehab', 'reise', 'reisen', 'reit', 'ren', 'rentals', 'repair', 'report', 'republican', 'rest', 'restaurant', 'reviews', 'rich', 'rio', 'rip', 'ro', 'rocks', 'rodeo', 'rs', 'rsvp', 'ru', 'ruhr', 'rw', 'ryukyu', 'sa', 'saarland', 'sale', 'samsung', 'sarl', 'saxo', 'sb', 'sc', 'sca', 'scb', 'schmidt', 'schule', 'schwarz', 'science', 'scot', 'sd', 'se', 'services', 'sew', 'sexy', 'sg', 'sh', 'shiksha', 'shoes', 'shriram', 'si', 'singles', 'sj', 'sk', 'sky', 'sl', 'sm', 'sn', 'so', 'social', 'software', 'sohu', 'solar', 'solutions', 'soy', 'space', 'spiegel', 'sr', 'st', 'style', 'su', 'supplies', 'supply', 'support', 'surf', 'surgery', 'suzuki', 'sv', 'sx', 'sy', 'sydney', 'systems', 'sz', 'taipei', 'tatar', 'tattoo', 'tax', 'tc', 'td', 'technology', 'tel', 'temasek', 'tennis', 'tf', 'tg', 'th', 'tienda', 'tips', 'tires', 'tirol', 'tj', 'tk', 'tl', 'tm', 'tn', 'to', 'today', 'tokyo', 'tools', 'top', 'toshiba', 'town', 'toys', 'tp', 'tr', 'trade', 'training', 'travel', 'trust', 'tt', 'tui', 'tv', 'tw', 'tz', 'ua', 'ug', 'uk', 'university', 'uno', 'uol', 'us', 'uy', 'uz', 'va', 'vacations', 'vc', 've', 'vegas', 'ventures', 'versicherung', 'vet', 'vg', 'vi', 'viajes', 'video', 'villas', 'vision', 'vlaanderen', 'vn', 'vodka', 'vote', 'voting', 'voto', 'voyage', 'vu', 'wales', 'wang', 'watch', 'webcam', 'website', 'wed', 'wedding', 'wf', 'whoswho', 'wien', 'wiki', 'williamhill', 'wme', 'work', 'works', 'world', 'ws', 'wtc', 'wtf', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'vermgensberater', 'vermgensberatung', '', '', '', '', '', '', '', '', '', 'xxx', 'xyz', 'yachts', 'yandex', 'ye', 'yoga', 'yokohama', 'youtube', 'yt', 'za', 'zip', 'zm', 'zone', 'zuerich', 'zw'];\n\nexport default TLD;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nexport default function checkBrackets(url: string) {\n  var urlLength = url.length;\n  var urlOpenBrackets = url.split('(').length - 1;\n  var urlCloseBrackets = url.split(')').length - 1;\n  while(urlCloseBrackets > urlOpenBrackets &&\n    url.charAt(urlLength - 1) === ')') {\n    url = url.substr(0, urlLength - 1)\n    urlCloseBrackets--;\n    urlLength--;\n  }\n  if(urlOpenBrackets > urlCloseBrackets) {\n    url = url.replace(/\\)+$/, '');\n  }\n  return url;\n}\n","import Emoji from '../../config/emoji';\nimport {encodeEmoji} from '../../vendor/emoji';\n\nexport default function getEmojiUnified(emojiCode: string) {\n  const unified = encodeEmoji(emojiCode).replace(/-?fe0f/g, '');\n\n  /* if(unified === '1f441-200d-1f5e8') {\n    //unified = '1f441-fe0f-200d-1f5e8-fe0f';\n    unified = '1f441-fe0f-200d-1f5e8';\n  } */\n\n  if(!Emoji.hasOwnProperty(unified)\n  // && !emojiData.hasOwnProperty(unified.replace(/-?fe0f$/, ''))\n  ) {\n    // console.error('lol', unified);\n    return;\n  }\n\n  return unified;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport {EMAIL_REG_EXP, FULL_REG_EXP} from '.';\nimport TLD from '../../config/tld';\nimport {MessageEntity} from '../../layer';\nimport checkBrackets from './checkBrackets';\nimport getEmojiUnified from './getEmojiUnified';\n\nexport default function parseEntities(text: string) {\n  let match: RegExpMatchArray;\n  let raw = text;\n  const entities: MessageEntity[] = [];\n  let matchIndex;\n  let rawOffset = 0;\n  // var start = tsNow()\n  FULL_REG_EXP.lastIndex = 0;\n  while(match = raw.match(FULL_REG_EXP)) {\n    matchIndex = rawOffset + match.index;\n\n    // console.log('parseEntities match:', match);\n\n    if(match[3]) { // mentions\n      entities.push({\n        _: 'messageEntityMention',\n        offset: matchIndex + match[1].length,\n        length: match[2].length + match[3].length\n      });\n    } else if(match[4]) {\n      if(EMAIL_REG_EXP.test(match[4])) { // email\n        entities.push({\n          _: 'messageEntityEmail',\n          offset: matchIndex,\n          length: match[4].length\n        });\n      } else {\n        let url: string;\n        let protocol = match[5];\n        const tld = match[6];\n        // let excluded = '';\n        if(tld) { // URL\n          if(!protocol && (tld.substr(0, 4) === 'xn--' || TLD.indexOf(tld.toLowerCase()) !== -1)) {\n            protocol = 'http://';\n          }\n\n          if(protocol) {\n            const balanced = checkBrackets(match[4]);\n            if(balanced.length !== match[4].length) {\n              // excluded = match[4].substring(balanced.length);\n              match[4] = balanced;\n            }\n\n            url = (match[5] ? '' : protocol) + match[4];\n          }\n        } else { // IP address\n          url = (match[5] ? '' : 'http://') + match[4];\n        }\n\n        if(url) {\n          entities.push({\n            _: 'messageEntityUrl',\n            offset: matchIndex,\n            length: match[4].length\n          });\n        }\n      }\n    } else if(match[7]) { // New line\n      entities.push({\n        _: 'messageEntityLinebreak',\n        offset: matchIndex,\n        length: 1\n      });\n    } else if(match[8]) { // Emoji\n      const unified = getEmojiUnified(match[8]);\n      if(unified) {\n        entities.push({\n          _: 'messageEntityEmoji',\n          offset: matchIndex,\n          length: match[8].length,\n          unicode: unified\n        });\n      }\n    } else if(match[11]) { // Hashtag\n      entities.push({\n        _: 'messageEntityHashtag',\n        offset: matchIndex + (match[10] ? match[10].length : 0),\n        length: match[11].length\n      });\n    } else if(match[13]) { // Bot command\n      entities.push({\n        _: 'messageEntityBotCommand',\n        offset: matchIndex + (match[11] ? match[11].length : 0) + (match[12] ? match[12].length : 0),\n        length: 1 + match[13].length + (match[14] ? 1 + match[14].length : 0),\n        unsafe: true\n      });\n    } else if(match[16]) { // Media timestamp\n      const timestamp = match[16];\n      const splitted: string[] = timestamp.split(':');\n      const splittedLength = splitted.length;\n      const hours = splittedLength === 3 ? +splitted[0] : 0;\n      const minutes = +splitted[splittedLength === 3 ? 1 : 0];\n      const seconds = +splitted[splittedLength - 1];\n      entities.push({\n        _: 'messageEntityTimestamp',\n        offset: matchIndex + (/\\D/.test(match[0][0]) ? 1 : 0),\n        length: timestamp.length,\n        raw: timestamp,\n        time: hours * 3600 + minutes * 60 + seconds\n      });\n    }\n\n    raw = raw.substr(match.index + match[0].length);\n    rawOffset += match.index + match[0].length;\n  }\n\n  // if (entities.length) {\n  //   console.log('parse entities', text, entities.slice())\n  // }\n  return entities;\n}\n","export default function setBlankToAnchor(anchor: HTMLAnchorElement) {\n  anchor.target = '_blank';\n  anchor.rel = 'noopener noreferrer';\n  return anchor;\n}\n","import IS_EMOJI_SUPPORTED from './emojiSupport';\n\nexport type EMOJI_VERSION = '' | '14';\n\nconst EMOJI_VERSIONS_SUPPORTED: {\n  [v in EMOJI_VERSION]: boolean\n} = {} as any;\n\n// Thanks to WebZ for the detect\nfunction isEmojiSupported(emoji: string) {\n  const ALLOWABLE_CALCULATION_ERROR_SIZE = 5;\n  const inlineEl = document.createElement('span');\n  inlineEl.classList.add('emoji');\n  document.body.appendChild(inlineEl);\n\n  inlineEl.innerText = emoji; // Emoji from 14.0 version\n  const newEmojiWidth = inlineEl.offsetWidth;\n  inlineEl.innerText = ''; // Emoji from 1.0 version\n  const legacyEmojiWidth = inlineEl.offsetWidth;\n\n  document.body.removeChild(inlineEl);\n\n  return Math.abs(newEmojiWidth - legacyEmojiWidth) < ALLOWABLE_CALCULATION_ERROR_SIZE;\n}\n\nif(IS_EMOJI_SUPPORTED) {\n  EMOJI_VERSIONS_SUPPORTED[''] = true;\n\n  const a: [keyof typeof EMOJI_VERSIONS_SUPPORTED, string][] = [\n    ['14', '']\n  ];\n\n  a.forEach(([version, emoji]) => {\n    EMOJI_VERSIONS_SUPPORTED[version] = isEmojiSupported(emoji);\n  });\n}\n\nexport default EMOJI_VERSIONS_SUPPORTED;\n","import wrapUrl from './wrapUrl';\n\nexport default function wrapTelegramUrlToAnchor(url1: string) {\n  const {url, onclick} = wrapUrl(url1);\n  const element = document.createElement('a');\n  (element as HTMLAnchorElement).href = url;\n  if(onclick) {\n    element.setAttribute('onclick', `${onclick}(this)`);\n  }\n\n  return element;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {CancellablePromise} from '../../helpers/cancellablePromise';\nimport animationIntersector from '../../components/animationIntersector';\nimport safePlay from '../../helpers/dom/safePlay';\nimport {MiddlewareHelper} from '../../helpers/middleware';\nimport {createCustomFiller} from '../richTextProcessor/wrapRichText';\nimport RLottiePlayer from '../rlottie/rlottiePlayer';\nimport {CustomEmojiRendererElement, SyncedPlayer} from './renderer';\n\nexport type CustomEmojiElements = Set<CustomEmojiElement>;\n\nexport default class CustomEmojiElement extends HTMLElement {\n  public elements: CustomEmojiElements;\n  public renderer: CustomEmojiRendererElement;\n  public player: RLottiePlayer | HTMLVideoElement;\n  public paused: boolean;\n  public syncedPlayer: SyncedPlayer;\n  public clean: boolean;\n  public lastChildWas: Node;\n  // public docId: DocId;\n  public placeholder: HTMLImageElement;\n  public middlewareHelper: MiddlewareHelper;\n  public static: boolean;\n  public readyPromise: CancellablePromise<void>;\n\n  constructor() {\n    super();\n    this.paused = true;\n    this.classList.add('custom-emoji');\n  }\n\n  public get docId() {\n    return this.dataset.docId;\n  }\n\n  public set docId(docId: DocId) {\n    this.dataset.docId = '' + docId;\n  }\n\n  public static create(docId?: DocId) {\n    const element = new CustomEmojiElement();\n    if(docId) element.docId = docId;\n    return element;\n  }\n\n  public get isConnected() {\n    return this.placeholder?.isConnected ?? super.isConnected;\n  }\n\n  public connectedCallback() {\n    // if(this.isConnected) {\n    //   return;\n    // }\n\n    if(this.player) {\n      animationIntersector.addAnimation({\n        animation: this,\n        group: this.renderer.animationGroup,\n        observeElement: this.placeholder ?? this,\n        controlled: true,\n        type: 'emoji'\n      });\n    }\n\n    // this.connectedCallback = undefined;\n  }\n\n  public disconnectedCallback() {\n    if(this.isConnected || !this.renderer?.isSelectable) { // prepend on sibling can invoke disconnectedCallback\n      return;\n    }\n\n    this.clear();\n  }\n\n  public destroy() {\n    this.clear();\n  }\n\n  public clear(replaceChildren = true) {\n    if(this.clean) {\n      return;\n    }\n\n    // if(this.docId === '5399836826758290421') {\n    //   console.log('clear', this, this.isConnected);\n    // }\n\n    this.clean = true;\n    this.pause();\n\n    const {syncedPlayer} = this;\n    if(syncedPlayer) {\n      syncedPlayer.pausedElements.delete(this);\n    }\n\n    this.middlewareHelper?.clean();\n    this.readyPromise?.reject();\n\n    if(this.renderer) {\n      const elements = this.renderer.customEmojis.get(this.docId);\n      if(elements?.delete(this) && !elements.size) {\n        this.renderer.customEmojis.delete(this.docId);\n        this.renderer.textColored.delete(elements);\n        this.renderer.playersSynced.delete(elements);\n      }\n\n      if(replaceChildren) {\n        if(this.renderer.isSelectable) {\n          this.replaceChildren(createCustomFiller(true));\n        } else {\n          // otherwise https://bugs.chromium.org/p/chromium/issues/detail?id=1144736#c27 will happen\n          this.replaceChildren();\n        }\n      }\n    }\n\n    if(this.player) {\n      animationIntersector.removeAnimationByPlayer(this);\n    }\n\n    CustomEmojiRendererElement.globalLazyLoadQueue?.delete({div: this});\n\n    /* this.disconnectedCallback =  */this.elements =\n      this.renderer =\n      this.player =\n      this.syncedPlayer =\n      undefined;\n  }\n\n  public pause() {\n    if(this.paused) {\n      return;\n    }\n\n    this.paused = true;\n\n    if(this.player instanceof HTMLVideoElement && !this.syncedPlayer) {\n      this.renderer.lastPausedVideo = this.player;\n      this.player.pause();\n    }\n\n    if(this.syncedPlayer && !this.syncedPlayer.pausedElements.has(this)) {\n      this.syncedPlayer.pausedElements.add(this);\n\n      if(this.syncedPlayer.player && this.syncedPlayer.pausedElements.size === this.syncedPlayer.middlewares.size) {\n        this.syncedPlayer.player.pause();\n      }\n    }\n  }\n\n  public play() {\n    if(!this.paused) {\n      return;\n    }\n\n    this.paused = false;\n\n    if(this.player instanceof HTMLVideoElement) {\n      this.player.currentTime = this.renderer.lastPausedVideo?.currentTime ?? this.player.currentTime;\n      safePlay(this.player);\n    }\n\n    if(this.syncedPlayer && this.syncedPlayer.pausedElements.has(this)) {\n      this.syncedPlayer.pausedElements.delete(this);\n\n      if(this.syncedPlayer.pausedElements.size !== this.syncedPlayer.middlewares.size) {\n        this.player.play();\n      }\n    }\n  }\n\n  public remove() {\n    super.remove();\n    this.clear();\n    // this.elements = this.renderer = this.player = undefined;\n  }\n\n  public get autoplay() {\n    return true;\n  }\n\n  public get loop() {\n    return true;\n  }\n}\n\ncustomElements.define('custom-emoji-element', CustomEmojiElement);\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {EMOJI_VERSION} from '../../environment/emojiVersionsSupport';\nimport {SITE_HASHTAGS} from '.';\nimport {EmojiVersions} from '../../config/emoji';\nimport IS_EMOJI_SUPPORTED from '../../environment/emojiSupport';\nimport buildURLHash from '../../helpers/buildURLHash';\nimport copy from '../../helpers/object/copy';\nimport encodeEntities from '../../helpers/string/encodeEntities';\nimport {MessageEntity} from '../../layer';\nimport encodeSpoiler from './encodeSpoiler';\nimport parseEntities from './parseEntities';\nimport setBlankToAnchor from './setBlankToAnchor';\nimport wrapUrl from './wrapUrl';\nimport EMOJI_VERSIONS_SUPPORTED from '../../environment/emojiVersionsSupport';\nimport {CLICK_EVENT_NAME} from '../../helpers/dom/clickEvent';\nimport IS_CUSTOM_EMOJI_SUPPORTED from '../../environment/customEmojiSupport';\nimport BOM from '../../helpers/string/bom';\nimport wrapTelegramUrlToAnchor from './wrapTelegramUrlToAnchor';\nimport {IS_FIREFOX} from '../../environment/userAgent';\nimport CustomEmojiElement, {CustomEmojiElements} from '../customEmoji/element';\nimport {CustomEmojiRendererElementOptions, CustomEmojiRendererElement} from '../customEmoji/renderer';\n\nexport type WrapRichTextOptions = Partial<{\n  entities: MessageEntity[],\n  contextSite: string,\n  highlightUsername: string,\n  noLinks: boolean,\n  noLinebreaks: boolean,\n  noCommands: boolean,\n  wrappingDraft: boolean,\n  // mustWrapEmoji: boolean,\n  fromBot: boolean,\n  noTextFormat: boolean,\n  passEntities: Partial<{\n    [_ in MessageEntity['_']]: boolean\n  }>,\n  maxMediaTimestamp: number,\n  noEncoding: boolean,\n  isSelectable: boolean,\n  whitelistedDomains?: string[],\n  passMaskedLinks?: boolean,\n\n  contextHashtag?: string,\n\n  // ! recursive, do not provide\n  nasty?: {\n    i: number,\n    usedLength: number,\n    text: string,\n    lastEntity?: MessageEntity\n  },\n  voodoo?: boolean,\n  customEmojis?: Map<DocId, CustomEmojiElements>,\n  customWraps?: Set<HTMLElement>,\n}> & CustomEmojiRendererElementOptions;\n\nfunction createMarkupFormatting(formatting: string) {\n  const element = document.createElement('span');\n  element.style.fontFamily = 'markup-' + formatting;\n  element.classList.add('is-markup');\n  element.dataset.markup = formatting;\n  return element;\n}\n\n/**\n * * Expecting correctly sorted nested entities (RichTextProcessor.sortEntities)\n */\nexport default function wrapRichText(text: string, options: WrapRichTextOptions = {}) {\n  const fragment = document.createDocumentFragment();\n  if(!text) {\n    return fragment;\n  }\n\n  const nasty = options.nasty ??= {\n    i: 0,\n    usedLength: 0,\n    text\n  };\n\n  const wrapSomething = (wrapElement: HTMLElement, noFiller?: boolean) => {\n    const element = document.createElement('span');\n    // element.append(BOM, a, BOM);\n    if(options.wrappingDraft) {\n      element.contentEditable = 'false';\n    }\n    // element.style.display = 'inline-block';\n    element.classList.add('input-something');\n    element.append(/* BOM,  */wrapElement);\n\n    (lastElement || fragment).append(element);\n\n    wrapElement.classList.add('input-selectable');\n    // if(wrapElement instanceof HTMLImageElement) {\n    //   element.prepend(f());\n    // } else {\n    !noFiller && wrapElement.append(createCustomFiller(true));\n    // }\n\n    customWraps.add(element);\n\n    return element;\n  };\n\n  options.isSelectable ||= options.wrappingDraft;\n\n  const customEmojis = options.customEmojis ??= new Map() as Map<DocId, CustomEmojiElements>;\n  const customWraps = options.customWraps ??= new Set();\n\n  const entities = options.entities ??= parseEntities(nasty.text);\n\n  const passEntities = options.passEntities ??= {};\n  const contextSite = options.contextSite ??= 'Telegram';\n  const contextExternal = contextSite !== 'Telegram';\n\n  const textLength = nasty.text.length;\n  const length = entities.length;\n  let lastElement: HTMLElement | DocumentFragment;\n  for(; nasty.i < length; ++nasty.i) {\n    let entity = entities[nasty.i];\n\n    // * check whether text was sliced\n    // TODO: consider about moving it to other function\n    if(entity.offset >= textLength) {\n      if(entity._ !== 'messageEntityCaret') { // * can set caret to the end\n        continue;\n      }\n    } else if((entity.offset + entity.length) > textLength) {\n      entity = copy(entity);\n      // entity.length = entity.offset + entity.length - textLength;\n      entity.length = textLength - entity.offset;\n    }\n\n    if(entity.length) {\n      nasty.lastEntity = entity;\n    }\n\n    let nextEntity = entities[nasty.i + 1];\n\n    const startOffset = entity.offset;\n    const endOffset = startOffset + entity.length;\n    const endPartOffset = Math.min(endOffset, nextEntity?.offset ?? 0xFFFF);\n    const fullEntityText = nasty.text.slice(startOffset, endOffset);\n    const sliced = nasty.text.slice(startOffset, endPartOffset);\n    let partText = sliced;\n\n    if(nasty.usedLength < startOffset) {\n      (lastElement || fragment).append(nasty.text.slice(nasty.usedLength, startOffset));\n    }\n\n    if(lastElement) {\n      lastElement = fragment;\n    }\n\n    nasty.usedLength = endPartOffset;\n\n    let element: HTMLElement,\n      property: 'textContent' | 'alt' = 'textContent',\n      usedText = false;\n    switch(entity._) {\n      case 'messageEntityBold': {\n        if(!options.noTextFormat) {\n          if(options.wrappingDraft) {\n            element = createMarkupFormatting('bold');\n          } else {\n            element = document.createElement('strong');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityItalic': {\n        if(!options.noTextFormat) {\n          if(options.wrappingDraft) {\n            element = createMarkupFormatting('italic');\n          } else {\n            element = document.createElement('em');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityStrike': {\n        if(options.wrappingDraft) {\n          element = createMarkupFormatting('strikethrough');\n          // element = document.createElement('span');\n          // const styleName = IS_SAFARI ? 'text-decoration' : 'text-decoration-line';\n          // element.style.cssText = `${styleName}: line-through;`;\n          // element.style.fontFamily = 'markup-strikethrough';\n        } else/*  if(!options.noTextFormat) */ {\n          element = document.createElement('del');\n        }\n\n        break;\n      }\n\n      case 'messageEntityUnderline': {\n        if(options.wrappingDraft) {\n          element = createMarkupFormatting('underline');\n          // element = document.createElement('span');\n          // const styleName = IS_SAFARI ? 'text-decoration' : 'text-decoration-line';\n          // element.style.cssText = `${styleName}: underline;`;\n          // element.style.fontFamily = 'markup-underline';\n        } else if(!options.noTextFormat) {\n          element = document.createElement('u');\n        }\n\n        break;\n      }\n\n      case 'messageEntityPre':\n      case 'messageEntityCode': {\n        if(options.wrappingDraft) {\n          element = createMarkupFormatting('monospace');\n          // element = document.createElement('span');\n          // element.style.fontFamily = 'var(--font-monospace)';\n          // element.style.fontFamily = 'markup-monospace';\n        } else if(!options.noTextFormat) {\n          element = document.createElement('code');\n        }\n\n        break;\n      }\n\n      // case 'messageEntityPre': {\n      //   if(options.wrappingDraft) {\n      //     element = document.createElement('span');\n      //     element.style.fontFamily = 'var(--font-monospace)';\n      //   } else if(!options.noTextFormat) {\n      //     element = document.createElement('pre');\n      //     const inner = document.createElement('code');\n      //     if(entity.language) {\n      //       inner.className = 'language-' + entity.language;\n      //       inner.textContent = entityText;\n      //       usedText = true;\n      //     }\n      //   }\n\n      //   break;\n      // }\n\n      case 'messageEntityHighlight': {\n        element = document.createElement('i');\n        element.className = 'text-highlight';\n        break;\n      }\n\n      case 'messageEntityBotCommand': {\n        // if(!(options.noLinks || options.noCommands || contextExternal)/*  && !entity.unsafe */) {\n        if(!options.noLinks && passEntities[entity._]) {\n          let command = fullEntityText.slice(1);\n          let bot: string | boolean;\n          let atPos: number;\n          if((atPos = command.indexOf('@')) !== -1) {\n            bot = command.slice(atPos + 1);\n            command = command.slice(0, atPos);\n          } else {\n            bot = options.fromBot;\n          }\n\n          element = document.createElement('a');\n          (element as HTMLAnchorElement).href = encodeEntities('tg://bot_command?command=' + encodeURIComponent(command) + (bot ? '&bot=' + encodeURIComponent(bot) : ''));\n          if(!contextExternal) {\n            element.setAttribute('onclick', 'execBotCommand(this)');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityCustomEmoji': {\n        if(!IS_CUSTOM_EMOJI_SUPPORTED) {\n          break;\n        }\n\n        while(nextEntity?._ === 'messageEntityEmoji' && nextEntity.offset < endOffset) {\n          ++nasty.i;\n          nasty.lastEntity = nextEntity;\n          nasty.usedLength += nextEntity.length;\n          nextEntity = entities[nasty.i + 1];\n        }\n\n        const customEmojiElement = element = CustomEmojiElement.create(entity.document_id);\n        const {docId} = customEmojiElement;\n        let set = customEmojis.get(docId);\n        if(!set) customEmojis.set(docId, set = new Set());\n        set.add(customEmojiElement);\n        customEmojiElement.dataset.stickerEmoji = fullEntityText;\n\n        if(options.wrappingDraft) {\n          element = document.createElement('img');\n          (element as HTMLImageElement).alt = fullEntityText;\n          for(const i in customEmojiElement.dataset) {\n            element.dataset[i] = customEmojiElement.dataset[i];\n          }\n          (element as any).customEmojiElement = customEmojiElement;\n          customEmojiElement.placeholder = element as HTMLImageElement;\n          element.classList.add('custom-emoji-placeholder');\n          (element as HTMLImageElement).src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC';\n          property = 'alt';\n          break;\n        }\n\n        if(options.isSelectable) {\n          // const s = document.createElement('span');\n          // s.append(fullEntityText);\n          // element.append(s);\n          // element.textContent = fullEntityText;\n          // element.textContent = 'a';\n          // element.contentEditable = 'false';\n\n          // const x = f();\n          // x.style.display = 'inline-block';\n          // x.contentEditable = 'false';\n          // (lastElement || fragment).append(BOM);\n          // (lastElement || fragment).append(x);\n\n          element = wrapSomething(element, !!options.customEmojiRenderer);\n\n          // const a = element;\n          // element = document.createElement('span');\n          // element.append(BOM, a, BOM);\n          // element.contentEditable = 'false';\n        }\n\n        property = 'alt';\n        break;\n      }\n\n      case 'messageEntityEmoji': {\n        let isSupported = IS_EMOJI_SUPPORTED;\n        if(isSupported) {\n          for(const version in EmojiVersions) {\n            if(version) {\n              const emojiData = EmojiVersions[version as EMOJI_VERSION];\n              if(emojiData.hasOwnProperty(entity.unicode) && !EMOJI_VERSIONS_SUPPORTED[version as EMOJI_VERSION]) {\n                isSupported = false;\n                break;\n              }\n            }\n          }\n        }\n\n        // if(!(options.wrappingDraft && isSupported)) { // * fix safari emoji\n        if(!isSupported) { // no wrapping needed\n          // if(isSupported) { // ! contenteditable=\"false\"    ,       Safari,     ,  \n          //   insertPart(entity, '<span class=\"emoji\">', '</span>');\n          // } else {\n          element = document.createElement('img');\n          (element as HTMLImageElement).src = `assets/img/emoji/${entity.unicode}.png`;\n          property = 'alt';\n          element.className = 'emoji emoji-image';\n\n          // if(options.isSelectable) {\n          //   usedText = true;\n          //   (element as HTMLImageElement).alt = partText;\n          //   element = wrapSomething(element);\n          // }\n\n          // const a = element;\n          // a.contentEditable = 'false';\n          // element = document.createElement('span');\n          // element.append(a);\n          // element.contentEditable = 'false';\n          // }\n        // } else if(options.mustWrapEmoji) {\n        } else if(!options.wrappingDraft) {\n          element = document.createElement('span');\n          element.className = 'emoji emoji-native';\n        }/*  else if(!IS_SAFARI) {\n          insertPart(entity, '<span class=\"emoji\" contenteditable=\"false\">', '</span>');\n        } */\n        /* if(!isSupported) {\n          insertPart(entity, `<img src=\"assets/img/emoji/${entity.unicode}.png\" alt=\"`, `\" class=\"emoji\">`);\n        } */\n\n        break;\n      }\n\n      case 'messageEntityCaret': {\n        element = document.createElement('span');\n        element.className = 'composer-sel';\n        break;\n      }\n\n      case 'messageEntityLinebreak': {\n        if(options.wrappingDraft && IS_FIREFOX) {\n          element = document.createElement('br');\n          usedText = true;\n        }\n        // if(options.noLinebreaks) {\n        //   insertPart(entity, ' ');\n        // } else {\n        //   insertPart(entity, '<br/>');\n        // }\n\n        break;\n      }\n\n      case 'messageEntityUrl':\n      case 'messageEntityTextUrl': {\n        if(!(options.noLinks && !passEntities[entity._])) {\n          // let inner: string;\n          let url: string = (entity as MessageEntity.messageEntityTextUrl).url || fullEntityText;\n          let masked = false;\n          let onclick: string;\n\n          const wrapped = wrapUrl(url, true);\n          url = wrapped.url;\n          onclick = wrapped.onclick;\n\n          if(options.whitelistedDomains) {\n            try {\n              const hostname = new URL(url).hostname;\n              if(!options.whitelistedDomains.includes(hostname)) {\n                break;\n              }\n            } catch(err) {\n              break;\n            }\n          }\n\n          if(entity._ === 'messageEntityTextUrl') {\n            if(nextEntity?._ === 'messageEntityUrl' &&\n              nextEntity.length === entity.length &&\n              nextEntity.offset === entity.offset) {\n              nasty.lastEntity = nextEntity;\n              ++nasty.i;\n            }\n\n            if(url !== fullEntityText) {\n              masked = true;\n            }\n          } else {\n            // inner = encodeEntities(replaceUrlEncodings(entityText));\n          }\n\n          const currentContext = !!onclick;\n          if(!onclick && masked && !currentContext && !options.passMaskedLinks) {\n            onclick = 'showMaskedAlert';\n          }\n\n          if(options.wrappingDraft) {\n            onclick = undefined;\n          }\n\n          const href = (currentContext || typeof electronHelpers === 'undefined') ?\n            url :\n            `javascript:electronHelpers.openExternal('${url}');`;\n\n          element = document.createElement('a');\n          element.className = 'anchor-url';\n          (element as HTMLAnchorElement).href = href;\n\n          if(!(currentContext || typeof electronHelpers !== 'undefined')) {\n            setBlankToAnchor(element as HTMLAnchorElement);\n          }\n\n          if(onclick) {\n            element.setAttribute('onclick', onclick + '(this)');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityEmail': {\n        if(!options.noLinks) {\n          element = document.createElement('a');\n          (element as HTMLAnchorElement).href = encodeEntities('mailto:' + fullEntityText);\n          setBlankToAnchor(element as HTMLAnchorElement);\n        }\n\n        break;\n      }\n\n      case 'messageEntityHashtag': {\n        const contextUrl = !options.noLinks && SITE_HASHTAGS[contextSite];\n        if(contextUrl) {\n          const hashtag = fullEntityText.slice(1);\n          element = document.createElement('a');\n          element.className = 'anchor-hashtag';\n          (element as HTMLAnchorElement).href = contextUrl.replace('{1}', encodeURIComponent(hashtag));\n          if(contextExternal) {\n            setBlankToAnchor(element as HTMLAnchorElement);\n          } else {\n            element.setAttribute('onclick', 'searchByHashtag(this)');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityMentionName': {\n        if(!(options.noLinks && !passEntities[entity._])) {\n          element = document.createElement('a');\n          (element as HTMLAnchorElement).href = buildURLHash('' + entity.user_id);\n          element.className = 'follow';\n          element.dataset.follow = '' + entity.user_id;\n        }\n\n        break;\n      }\n\n      case 'messageEntityMention': {\n        // const contextUrl = !options.noLinks && siteMentions[contextSite];\n        if(!options.noLinks) {\n          const username = fullEntityText.slice(1);\n\n          element = wrapTelegramUrlToAnchor('t.me/' + username);\n          element.className = 'mention';\n\n          // insertPart(entity, `<a class=\"mention\" href=\"${contextUrl.replace('{1}', encodeURIComponent(username))}\"${contextExternal ? ' target=\"_blank\" rel=\"noopener noreferrer\"' : ''}>`, '</a>');\n        }\n\n        break;\n      }\n\n      case 'messageEntitySpoiler': {\n        if(options.noTextFormat) {\n          const encoded = encodeSpoiler(nasty.text, entity);\n          nasty.text = encoded.text;\n          partText = encoded.entityText;\n          if(endPartOffset !== endOffset) {\n            nasty.usedLength += endOffset - endPartOffset;\n          }\n          let n: MessageEntity;\n          for(; n = entities[nasty.i + 1], n && n.offset < endOffset;) {\n            // nasty.usedLength += n.length;\n            ++nasty.i;\n            nasty.lastEntity = n;\n            nextEntity = entities[nasty.i + 1];\n          }\n        } else if(options.wrappingDraft) {\n          element = createMarkupFormatting('spoiler');\n          // element = document.createElement('span');\n          // element.style.fontFamily = 'spoiler';\n          // element.style.fontFamily = 'markup-spoiler';\n        } else {\n          const container = document.createElement('span');\n          container.className = 'spoiler';\n          element = document.createElement('span');\n          element.className = 'spoiler-text';\n          element.textContent = partText;\n          usedText = true;\n          container.append(element);\n          fragment.append(container);\n\n          container[`on${CLICK_EVENT_NAME}`] = (window as any).onSpoilerClick;\n        }\n\n        break;\n      }\n\n      case 'messageEntityTimestamp': {\n        if(!options.maxMediaTimestamp || entity.time > options.maxMediaTimestamp) {\n          break;\n        }\n\n        element = document.createElement('a');\n        element.classList.add('timestamp');\n        element.dataset.timestamp = '' + entity.time;\n        (element as HTMLAnchorElement).href = '#';\n        element.setAttribute('onclick', 'setMediaTimestamp(this)');\n\n        if(options.maxMediaTimestamp === Infinity) {\n          element.classList.add('is-disabled');\n        }\n\n        break;\n      }\n    }\n\n    if(!usedText && partText) {\n      if(element) {\n        // @ts-ignore\n        element[property] = partText;\n      } else {\n        (element || fragment).append(partText);\n      }\n    }\n\n    if(element && !element.parentNode) {\n      (lastElement || fragment).append(element);\n    }\n\n    while(nextEntity && nextEntity.offset < endOffset) {\n      ++nasty.i;\n\n      (element || fragment).append(wrapRichText(nasty.text, {\n        ...options,\n        voodoo: true\n      }));\n\n      nextEntity = entities[nasty.i + 1];\n    }\n\n    // if(!element?.parentNode) {\n    //   (lastElement || fragment).append(element ?? partText);\n    // }\n\n    if(nasty.usedLength <= endOffset) {\n      if(nasty.usedLength < endOffset) {\n        (element || fragment).append(nasty.text.slice(nasty.usedLength, endOffset));\n        nasty.usedLength = endOffset;\n      }\n\n      lastElement = fragment;\n      nasty.lastEntity = undefined;\n    } else if(entity.length > partText.length && element) {\n      lastElement = element;\n    } else {\n      lastElement = fragment;\n    }\n\n    if(options.voodoo) {\n      return fragment;\n    }\n  }\n\n  if(nasty.lastEntity) {\n    nasty.usedLength = nasty.lastEntity.offset + nasty.lastEntity.length;\n  }\n\n  if(nasty.usedLength < textLength) {\n    (lastElement || fragment).append(nasty.text.slice(nasty.usedLength));\n  }\n\n  if((!options.wrappingDraft || options.customEmojiRenderer) && customEmojis.size) {\n    let renderer = options.customEmojiRenderer;\n    if(!renderer) {\n      renderer = CustomEmojiRendererElement.create(options);\n      fragment.prepend(renderer);\n    }\n\n    const loadPromise = renderer.add({\n      addCustomEmojis: customEmojis,\n      lazyLoadQueue: options.lazyLoadQueue,\n      onlyThumb: options.wrappingDraft\n    });\n    options.loadPromises?.push(loadPromise);\n    // recordPromise(loadPromise, 'render emojis: ' + docIds.length);\n  }\n\n  if(customWraps.size) {\n    insertCustomFillers(customWraps);\n  }\n\n  return fragment;\n}\n\nexport const createCustomFiller = (notFiller?: boolean) => {\n  const x = document.createElement('span');\n  x.classList.add(notFiller ? 'input-filler2' : 'input-filler');\n  x.textContent = BOM;\n  return x;\n};\n\nexport function isCustomFillerNeededBySiblingNode(node: ChildNode) {\n  if(\n    // !node?.textContent ||\n    // node.textContent.endsWith('\\n') ||\n    node?.textContent !== BOM ||\n    (node as HTMLElement)?.getAttribute?.('contenteditable') === 'false'\n  ) {\n    // if(!node || (node as HTMLElement).firstElementChild || node.textContent.endsWith('\\n')) {\n    if(!node || node.textContent !== BOM || (node as HTMLElement).firstElementChild) {\n      return 2;\n    } else if(node.nodeType === node.ELEMENT_NODE) {\n      return 1;\n    }/*  else if(node.nodeType === node.TEXT_NODE && !node.nodeValue) {\n      (node as CharacterData).insertData(0, BOM);\n    } */\n  }\n\n  return 0;\n}\n\nexport function insertCustomFillers(elements: Iterable<HTMLElement>) {\n  const check = (element: HTMLElement, node: ChildNode, method: 'before' | 'after') => {\n    const needed = isCustomFillerNeededBySiblingNode(node);\n    if(needed === 2) {\n      element[method](createCustomFiller());\n    } else if(needed === 1) {\n      node.appendChild(document.createTextNode(BOM));\n    }\n  };\n\n  for(const element of elements) {\n    const {previousSibling, nextSibling} = element;\n    check(element, previousSibling, 'before');\n    check(element, nextSibling, 'after');\n  }\n}\n\n(window as any).wrapRichText = wrapRichText;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type EventListenerBase from './eventListenerBase';\n\nexport type Listener = {\n  element: ListenerElement,\n  event: ListenerEvent,\n  callback: ListenerCallback,\n  options?: ListenerOptions,\n\n  onceFired?: true, // will be set only when options.once is set\n  onceCallback?: () => void,\n};\n\nexport type ListenerElement = Window | Document | HTMLElement | Element | EventListenerBase<any>;\nexport type ListenerEvent = string;\nexport type ListenerCallback = Function;\nexport type ListenerOptions = AddEventListenerOptions;\n\n/* const originalAddEventListener = HTMLElement.prototype.addEventListener;\nHTMLElement.prototype.addEventListener = function(this, name: string, callback: EventListenerOrEventListenerObject, options: AddEventListenerOptions) {\n  console.log('nu zdarova', name);\n  originalAddEventListener.call(this, name, callback, options);\n\n  if(options?.ls) {\n    return options.ls.addFromElement(this, name, callback as any, options);\n  }\n}; */\n\nexport default class ListenerSetter {\n  private listeners: Set<Listener> = new Set();\n\n  public add<T extends ListenerElement>(element: T): T['addEventListener'] {\n    return ((event: string, callback: Function, options: ListenerOptions) => {\n      const listener: Listener = {element, event, callback, options};\n      this.addManual(listener);\n      return listener;\n    }) as any;\n  }\n\n  /* public addFromElement<T extends ListenerElement>(element: T, event: ListenerEvent, callback: ListenerCallback, options: ListenerOptions) {\n    const listener: Listener = {element, event, callback, options};\n    this.addManual(listener);\n    return listener;\n  } */\n\n  public addManual(listener: Listener) {\n    // @ts-ignore\n    listener.element.addEventListener(listener.event, listener.callback, listener.options);\n\n    if(listener.options?.once) { // remove listener when its called\n      listener.onceCallback = () => {\n        this.remove(listener);\n        listener.onceFired = true;\n      };\n\n      // @ts-ignore\n      listener.element.addEventListener(listener.event, listener.onceCallback, listener.options);\n    }\n\n    this.listeners.add(listener);\n  }\n\n  public remove(listener: Listener) {\n    if(!listener.onceFired) {\n      // @ts-ignore\n      listener.element.removeEventListener(listener.event, listener.callback, listener.options);\n\n      if(listener.onceCallback) {\n        // @ts-ignore\n        listener.element.removeEventListener(listener.event, listener.onceCallback, listener.options);\n      }\n    }\n\n    this.listeners.delete(listener);\n  }\n\n  public removeManual<T extends ListenerElement>(\n    element: T,\n    event: ListenerEvent,\n    callback: ListenerCallback,\n    options?: ListenerOptions\n  ) {\n    let listener: Listener;\n    for(const _listener of this.listeners) {\n      if(_listener.element === element &&\n        _listener.event === event &&\n        _listener.callback === callback &&\n        _listener.options === options) {\n        listener = _listener;\n        break;\n      }\n    }\n\n    if(listener) {\n      this.remove(listener);\n    }\n  }\n\n  public removeAll() {\n    this.listeners.forEach((listener) => {\n      this.remove(listener);\n    });\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport clamp from '../number/clamp';\nimport findUpAsChild from './findUpAsChild';\nimport whichChild from './whichChild';\n\nexport default function compareNodes(node1: ChildNode, node1Offset: number, node2: ChildNode, node2Offset: number) {\n  let diff: number;\n  if(node1 === node2) {\n    diff = node1Offset - node2Offset;\n  } else if(node1.parentElement === node2.parentElement) {\n    diff = whichChild(node1, true) - whichChild(node2, true);\n  } else {\n    const parents: HTMLElement[] = [];\n    let parentElement = node1.parentElement;\n    do {\n      parents.push(parentElement);\n    } while(parentElement = parentElement.parentElement);\n\n    parentElement = node2.parentElement;\n    do {\n      if(parents.includes(parentElement)) {\n        break;\n      }\n    } while(parentElement = parentElement.parentElement);\n\n    const commonAncestorContainer = parentElement;\n    // const range = document.createRange();\n    // range.setStart(node1, 0);\n    // range.setEnd(node2, node2.textContent.length);\n    // const {commonAncestorContainer} = range;\n    node1 = findUpAsChild(node1 as HTMLElement, commonAncestorContainer as HTMLElement);\n    node2 = findUpAsChild(node2 as HTMLElement, commonAncestorContainer as HTMLElement);\n    diff = whichChild(node1, true) - whichChild(node2, true);\n  }\n\n  return clamp(diff, -1, 1);\n}\n\n(window as any).compareNodes = compareNodes;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {IS_FIREFOX} from '../../environment/userAgent';\nimport {logger} from '../../lib/logger';\nimport {isCustomFillerNeededBySiblingNode} from '../../lib/richTextProcessor/wrapRichText';\nimport ListenerSetter from '../listenerSetter';\nimport BOM from '../string/bom';\nimport compareNodes from './compareNodes';\nimport getCaretPosNew from './getCaretPosNew';\nimport placeCaretAtEnd from './placeCaretAtEnd';\nimport whichChild from './whichChild';\n\nconst NOT_ONLY_BOMS_REG_EXP = new RegExp(`[^${BOM}]`);\n\nexport const USING_BOMS = false;\n\nexport default class RichInputHandler {\n  private static INSTANCE: RichInputHandler;\n\n  private listenerSetter: ListenerSetter;\n\n  private lastNode: Node;\n  private lastOffset: number;\n  private savedRanges: WeakMap<HTMLElement, Range>;\n\n  private log: ReturnType<typeof logger>;\n\n  private inputCaptureCallbacks: Function[];\n\n  constructor() {\n    this.log = logger('RICH-INPUT');\n    this.listenerSetter = new ListenerSetter();\n    this.savedRanges = new WeakMap();\n\n    this.listenerSetter.add(document)('selectionchange', this.saveSelectionOnChange);\n    if(USING_BOMS) {\n      this.listenerSetter.add(document)('focusout', this.onFocusOut);\n      this.listenerSetter.add(document)('selectionchange', this.onSelectionChange);\n      this.listenerSetter.add(document)('beforeinput', this.onBeforeInput);\n      this.listenerSetter.add(document)('keydown', this.onKeyDown, {capture: true});\n\n      if(IS_FIREFOX) {\n        this.inputCaptureCallbacks = [];\n        this.listenerSetter.add(document)('input', () => {\n          this.inputCaptureCallbacks.forEach((callback) => callback());\n          this.inputCaptureCallbacks.length = 0;\n        }, {capture: true});\n      }\n    }\n  }\n\n  private get input() {\n    const selection = document.getSelection();\n    const {anchorNode: node} = selection;\n    if(!node) return;\n    return ((node as HTMLElement).closest ? node as HTMLElement : node.parentElement).closest<HTMLElement>('[contenteditable=\"true\"]');\n  }\n\n  private saveRangeForElement(element: HTMLElement) {\n    if(element && (element.isContentEditable || element.tagName === 'INPUT')) {\n      const selection = document.getSelection();\n      if(selection.rangeCount) {\n        this.savedRanges.set(element as HTMLElement, document.getSelection().getRangeAt(0));\n      }\n    }\n  }\n\n  private saveSelectionOnChange = (e: Event) => {\n    const element = document.activeElement as HTMLElement; // e.target as HTMLElement;\n    this.saveRangeForElement(element);\n  };\n\n  private onFocusOut = (e: FocusEvent) => {\n    this.lastNode = this.lastOffset = undefined;\n  };\n\n  private findPreviousSmthIndex(input: HTMLElement, node: ChildNode, something?: NodeListOf<Element>) {\n    // node = this.getFiller(node);\n    // const childNodes = Array.from(node.parentElement.childNodes);\n    // fillerIndex = childNodes.indexOf(node);\n    // let smthIndex = -1;\n    // for(let i = fillerIndex; i >= 0; --i) {\n    //   const node = childNodes[i];\n    //   if((node as HTMLElement)?.classList?.contains('input-something')) {\n    //     smthIndex = i;\n    //     break;\n    //   }\n    // }\n    // return smthIndex;\n\n    const elements = Array.from(something ?? input.querySelectorAll('.input-something'));\n    const index = elements.findIndex((element) => compareNodes(element, 0, node, 0) >= 0);\n    return index === -1 ? elements.length - 1 : Math.max(0, index - 1);\n  }\n\n  private superMove(\n    input: HTMLElement,\n    caret: ReturnType<RichInputHandler['getCaretPosN']>,\n    toLeft: boolean,\n    fromSelectionChange: boolean\n  ) {\n    const {node, offset, move} = caret;\n    const something = input.querySelectorAll('.input-something');\n    const smthIndex = this.findPreviousSmthIndex(input, node, something);\n    const r = document.createRange();\n    r[toLeft ? 'setEnd' : 'setStart'](node, offset);\n\n    if(fromSelectionChange) {\n      move(toLeft);\n    }\n\n    const c = this.getCaretPosN();\n    if(c.node?.nodeValue === BOM && (!fromSelectionChange || node === this.lastNode)) {\n      const idx = this.findPreviousSmthIndex(input, c.node, something);\n\n      let moved = !fromSelectionChange;\n\n      do {\n        const c = this.getCaretPosN();\n        const idxidx = this.findPreviousSmthIndex(input, c.node, something);\n        r[toLeft ? 'setStart' : 'setEnd'](c.node, c.offset);\n        const rangeString = r.toString();\n        const onlyBOMs = !NOT_ONLY_BOMS_REG_EXP.test(rangeString);\n        this.log('test cursor', rangeString, onlyBOMs, idx, idxidx);\n        if(\n          onlyBOMs &&\n          c.node?.nodeValue === BOM &&\n          idxidx === idx &&\n          // (idxidx > 1 || c.offset) &&\n          // (idxidx < (getFiller(c.node).parentElement.childNodes.length - 2) || c.offset < BOM.length)\n          (idxidx || c.offset) &&\n          (idxidx < (something.length - 1) || c.offset < BOM.length)\n        ) {\n          move(toLeft);\n          moved = true;\n        } else if(!moved) {\n          break;\n        } else {\n          if((!this.getFiller(node as HTMLElement).classList.contains('input-filler-text') && idx !== smthIndex) || c.offset === BOM.length) {\n            move(!toLeft);\n          }\n\n          break;\n        }\n      } while(true);\n    }\n  }\n\n  private onSelectionChange = (e: Event) => {\n    const {input} = this;\n    if(!input) {\n      this.setSelectionClassName(document.getSelection());\n      return;\n    }\n\n    // return;\n\n    // this.log('selectionchange', document.getSelection(), document.getSelection().rangeCount && document.getSelection().getRangeAt(0), getCaretPosN());\n    // let {node, offset} = getCaretPos(this.messageInput);\n\n    let caret = this.getCaretPosN();\n    do {\n      const {node, offset, selection, move} = caret;\n\n      const nodeValue = node?.nodeValue;\n      // if(!nodeValue?.includes(BOM)) {\n      if(nodeValue !== BOM || !this.lastNode) {\n        break;\n      }\n\n      // node = getFiller(node);\n\n      // const childIndex = whichChild(getFiller(node), true);\n      // let toLeft: boolean;\n      // // if(node === lastNode) toLeft = lastOffset >= offset;\n      // if(node === lastNode) toLeft = lastOffset > offset;\n      // else {\n      //   // toLeft = whichChild(getFiller(lastNode)) > childIndex;\n      //   toLeft = (lastNode.nodeValue === BOM ? whichChild(getFiller(lastNode), true) : whichChild(findUpAsChild(lastNode as any, getFiller(node).parentElement), true)) > childIndex;\n      // }\n\n      const toLeft = compareNodes(node, offset, this.lastNode as ChildNode, this.lastOffset) < 0;\n\n      // const childNodes = Array.from(node.parentElement.childNodes);\n      // if(toLeft) {\n      //   for(let i = childIndex; i >= 0; --i) {\n      //     const sibling = childNodes[i];\n      //     const {textContent} = sibling;\n      //     for()\n      //   }\n      // }\n\n      // {\n      //   if(toLeft === undefined) {\n      //     return;\n      //   }\n\n      //   const selection = window.getSelection();\n      //   selection.modify(selection.isCollapsed ? 'move' : 'extend', toLeft ? 'backward' : 'forward', 'character');\n      //   return;\n      // }\n\n      // const parent = getFiller(node);\n      if(toLeft !== undefined) {\n        // let newNode = toLeft ? parent.previousSibling : parent.nextSibling;\n        if(selection.isCollapsed) {\n          this.superMove(input, caret, toLeft, true);\n\n          // if(offset === BOM.length) {\n          //   newNode = toLeft ? newNode.nextSibling.nextSibling : parent.previousSibling.previousSibling;\n          // }\n\n          // setCaretAt(newNode);\n        } else {\n          selection.modify(selection.isCollapsed ? 'move' : 'extend', toLeft ? 'backward' : 'forward', 'character');\n          // const range = selection.getRangeAt(0);\n\n          // if(toLeft) {\n          //   newNode = parent.previousSibling.previousSibling.firstChild;\n          //   const value = newNode.nodeValue;\n          //   range.setStart(newNode, value?.length);\n          // } else {\n          //   newNode = parent.nextSibling.nextSibling.firstChild;\n          //   range.setEnd(newNode, 0);\n          // }\n        }\n      }\n\n      this.log('selectionchange',\n        node,\n        offset,\n        this.lastNode,\n        this.lastOffset,\n        node === this.lastNode,\n        whichChild(this.getFiller(node)),\n        whichChild(this.getFiller(this.lastNode)),\n        toLeft,\n        selection,\n        document.getSelection(),\n        document.getSelection().getRangeAt(0),\n        node?.parentNode,\n        this.lastNode?.parentNode\n      );\n\n      caret = this.getCaretPosN();\n      this.lastNode = node;\n      this.lastOffset = offset;\n\n      break;\n\n      // if(findPreviousSmthIndex(caret.node) !== smthIndex) {\n      //   break;\n      // }\n    } while(true);\n\n    this.lastNode = this.lastOffset = undefined;\n\n    // if(offset === BOM.length) {\n    //   setCaretAt(parent);\n    // } else {\n    //   setCaretAt(parent.nextSibling);\n    // }\n\n    this.setSelectionClassName(caret.selection, input);\n  };\n\n  public restoreSavedRange(input: HTMLElement) {\n    const range = this.getSavedRange(input);\n    if(!range) {\n      return false;\n    }\n\n    const selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n\n    return true;\n  }\n\n  public getSavedRange(input: HTMLElement) {\n    return this.savedRanges.get(input);\n  }\n\n  public makeFocused(input: HTMLElement) {\n    if(document.activeElement !== input && !this.restoreSavedRange(input)) {\n      placeCaretAtEnd(input, false, false);\n    }\n  }\n\n  private fixInsertedLineBreaks(input: HTMLElement) {\n    input.querySelectorAll('br').forEach((br) => {\n      br.classList.add('br-not-br');\n    });\n  }\n\n  private fixBuggedCaret() {\n    const selection = document.getSelection();\n    const range = selection.getRangeAt(0);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n\n  public onBeforeInput = (e: Pick<InputEvent, 'inputType'>) => {\n    const {input, log} = this;\n    if(!input) {\n      return;\n    }\n\n    const addInputCallback = this.addInputCallback.bind(this, input);\n\n    const caretPos = this.getCaretPosN();\n    let {node, offset, selection, move} = caretPos;\n    log('beforeinput', e, node, offset, selection, caretPos);\n    this.lastNode = this.lastOffset = undefined;\n\n    if(e.inputType.startsWith('delete')) { // delete current BOM\n      addInputCallback(() => {\n        this.processEmptiedFillers(input);\n        this.removeExtraBOMs(input);\n        this.fixInsertedLineBreaks(input);\n      });\n\n      if(node?.nodeValue === BOM && selection.isCollapsed && e.inputType.includes('deleteContent')) {\n        const toLeft = e.inputType.includes('Backward');\n        const moveFirst = (offset === BOM.length && toLeft) || (!offset && !toLeft);\n        this.superMove(input, caretPos, toLeft, moveFirst);\n        // if((offset === BOM.length && toLeft) || (!offset && !toLeft)) {\n        //   move(toLeft);\n        // }\n\n        // addInputCallback(() => {\n        //   removePossibleBOMSiblingsByNode(getFiller(node));\n        // });\n\n        // if(node.parentNode.childNodes.length === 1) {\n        //   (node.parentNode as HTMLElement).remove();\n        //   move(e.inputType.includes('Backward') ? false : true);\n        // } else {\n        //   move(e.inputType.includes('Backward') ? true : false);\n        //   addInputCallback(() => {\n        //     move(e.inputType.includes('Backward') ? false : true);\n        //   });\n        // }\n\n        // for(let i = 0, length = BOM.length + (direction === 'backward' ? offset : BOM.length - offset); i < length; ++i) {\n        //   selection.modify('extend', direction, 'character');\n        // }\n\n        // selection.modify('extend', direction, 'character');\n        // selection.modify('extend', direction, 'character');\n\n        // selection.deleteFromDocument();\n        // e.preventDefault();\n      } else {\n        // const filler = getFiller(node);\n        // if(filler?.classList?.contains('input-filler-text')) {\n        //   const {previousSibling, nextSibling} = filler;\n        //   addInputCallback(() => {\n        //     if(!filler.isConnected) {\n        //       removePossibleBOMSiblings(previousSibling, nextSibling);\n        //     }\n        //     // removeExtraBOMs();\n        //     // processEmptiedFillers();\n        //   });\n        // }\n        // addInputCallback(() => {\n        //   this.fixInsertedLineBreaks(input);\n        // });\n      }\n    } else if(e.inputType.startsWith('insert')) { // clear current BOM\n      if((node as HTMLElement)?.classList?.contains('input-something')/*  || (node.textContent === BOM && offset === BOM.length) */) {\n        node = node.previousSibling.firstChild;\n        const range = selection.getRangeAt(0);\n        range.setStart(node, 0);\n        range.setEnd(node, 0);\n        range.collapse(true);\n        // selection.modify('move', 'backward', 'character');\n\n        const c = this.getCaretPosN();\n        node = c.node;\n        selection = c.selection;\n        offset = c.offset;\n      }\n      if(node && node.textContent === BOM && offset === BOM.length) {\n        // const range = selection.getRangeAt(0);\n        // range.setStart(node, 0);\n        // range.setEnd(node, 0);\n        // range.collapse(true);\n        selection.modify('move', 'backward', 'character');\n\n        const c = this.getCaretPosN();\n        node = c.node;\n        selection = c.selection;\n        offset = c.offset;\n      }\n      // if(node && node.textContent === BOM && offset === 0) {\n      //   selection.modify('move', 'forward', 'character');\n      //   offset = BOM.length;\n      // }\n\n      if(e.inputType === 'insertLineBreak' || true) {\n        // const appendix = 'X';\n        // const textNode = document.createTextNode(appendix);\n        // if(node.parentElement !== this.messageInput) node.parentElement.after(textNode);\n        // else node.after(textNode);\n        // selection.modify('move', 'forward', 'character');\n        // selection.modify('move', 'forward', 'character');\n        // addInputCallback(() => {\n        //   textNode.remove();\n        // });\n\n        /* if(node?.nodeValue === BOM) */ {\n          // const parent = node.parentElement;\n          // parent.contentEditable = 'false';\n          // addInputCallback(() => {\n          //   parent.contentEditable = 'inherit';\n          // });\n          // node.parentElement.remove();\n\n          // const textNode = document.createTextNode(appendix);\n          // if(node.parentElement !== this.messageInput) node.parentElement.after(textNode);\n          // else node.after(textNode);\n          // // selection.modify('move', 'forward', 'character');\n          // // selection.modify('move', 'forward', 'character');\n          // addInputCallback(() => {\n          //   textNode.remove();\n          // });\n\n          // fix case when focused somehow on span instead of text node\n          if(node && node.nodeType === node.ELEMENT_NODE) {\n            node = node.firstChild;\n            log.warn('fixing focus on span');\n          }\n\n          const isBOM = node?.nodeValue === BOM;\n          log('inserting line break', isBOM, node, `\"${node?.nodeValue}\"`, node?.parentElement ? Array.from(node.parentElement.childNodes).slice() : []);\n          if(isBOM) {\n            // (node as ChildNode).replaceWith(this.messageInput.querySelector('.lol'));\n\n            const parentElement = node.parentElement;\n            parentElement.classList.replace('input-filler', 'input-filler-text');\n            const childNodesLength = parentElement.childNodes.length;\n            addInputCallback(() => {\n              const newChildNodesLength = parentElement.childNodes.length;\n              if(newChildNodesLength > 1/*  && newChildNodesLength !== childNodesLength */) {\n                log('inserting line break, remove');\n                node = Array.from(parentElement.childNodes).find((node) => node.nodeValue === BOM);\n                (parentElement as any).t = node;\n                // node?.remove();\n\n                // const n = parentElement.firstChild;\n                // const range = selection.getRangeAt(0);\n                // range.setStart(n, n.nodeValue.length);\n                // range.setEnd(n, n.nodeValue.length);\n              } else if(node.nodeValue !== BOM) {\n                log('inserting line break, deleteData');\n                (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\n                // node = document.createTextNode(BOM);\n              }\n\n              this.fixInsertedLineBreaks(input);\n              // (parentElement as any).t = node;\n              // node.remove();\n            });\n            // addInputCallback(() => {\n            //   node.parentElement.classList.replace('input-filler', 'input-filler3');\n            //   const s = document.createElement('span');\n            //   s.style.display = 'none';\n            //   node.replaceWith(s);\n            //   s.prepend(node);\n            // });\n          } else if(e.inputType === 'insertLineBreak') {\n            addInputCallback(() => {\n              this.fixInsertedLineBreaks(input);\n            });\n            // const range = selection.getRangeAt(0);\n            // this.messageInput.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\n            //   el.contentEditable = 'inherit';\n            // });\n\n            // addInputCallback(() => {\n            //   this.messageInput.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\n            //     el.contentEditable = 'false';\n            //   });\n\n            //   selection.removeAllRanges();\n            //   selection.addRange(range);\n            // }, false);\n          }/*  else if(node &&\n            node.nodeType === node.TEXT_NODE &&\n            node.nodeValue.length === offset) {\n\n          } */\n\n          // if(e.inputType === 'insertLineBreak') {\n          //   e.preventDefault();\n          //   document.execCommand('insertHTML', false, '<span class=\"lol\">\\n</span>');\n\n          //   this.messageInputField.simulateInputEvent();\n          // }\n\n          // node.parentElement.replaceWith(node);\n          // selection.removeAllRanges();\n          // const range = new Range();\n          // range.setStart(node, 0);\n          // range.setEnd(node, node.nodeValue.length);\n          // selection.addRange(range);\n          // node.parentElement.classList.remove('input-filler');\n          // node.parentElement\n        }\n\n        // document.execCommand('insertHTML', false, '\\n');\n        // e.preventDefault();\n        // (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\n        // if(node?.nodeValue === BOM) {\n        //   addInputCallback(() => {\n        //     node.remove();\n        //   });\n        // }\n        // this.messageInputField.simulateInputEvent();\n\n        // this.messageInput.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\n        //   el.contentEditable = 'inherit';\n        // });\n        // addInputCallback(() => {\n        //   this.messageInput.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\n        //     el.contentEditable = 'false';\n        //   });\n        // });\n        return;\n      }\n\n      if(node?.nodeValue === BOM) {\n        // node.nodeValue = ''; // ! will move cursor forward\n        // addInputCallback(() => {\n        //   (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\n        // });\n\n        if(e.inputType === 'insertLineBreak') {\n          if(offset === BOM.length) {\n            selection.modify('move', 'backward', 'character');\n          }\n\n          // if(offset !== BOM.length) {\n          //   selection.modify('move', 'forward', 'character');\n          // }\n\n          addInputCallback(() => {\n            node.remove();\n            // (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\n            // selection.modify('move', 'forward', 'character');\n\n            setTimeout(() => {\n              selection.modify('move', 'forward', 'character');\n            }, 0);\n          });\n        }\n\n        // node.parentElement.replaceWith(node);\n\n        // node.parentElement.replaceWith(node);\n        if(e.inputType === 'insertLineBreak') {\n          // const previousParentSibling = node.parentNode.previousSibling;\n          // addInputCallback(() => {\n          //   if(previousParentSibling.nextSibling.nodeValue === '\\n') {\n          //     previousParentSibling.nextSibling.remove();\n\n          //     setTimeout(() => {\n          //       // selection.modify('move', 'forward', 'character');\n          //       // selection.modify('move', 'forward', 'character');\n          //     }, 0);\n          //   } else {\n          //     previousParentSibling.nextSibling.nodeValue = previousParentSibling.nextSibling.nodeValue.replace('\\n\\n', '\\n');\n          //   }\n          // });\n        } else {\n          // if(node.parentElement !== this.messageInput) {\n          //   node.parentElement.replaceWith(node);\n          // }\n\n          // setTimeout(() => {\n          //   this.log(JSON.stringify(node.parentElement.innerHTML));\n          //   node.nodeValue = node.nodeValue.replace(BOM, '');\n          //   // (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\n          //   this.log(JSON.stringify(node.parentElement.innerHTML));\n          // }, 1000);\n\n          addInputCallback(() => {\n            (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\n            if(!node.nodeValue) {\n              node.remove();\n            }\n\n            // selection.modify('move', 'forward', 'character');\n          });\n        }\n\n        if(selection.isCollapsed && false) {\n          node.parentElement.replaceWith(node);\n          // const textNode = document.createTextNode(BOM);\n          // (node.parentNode as any as ChildNode).after(textNode);\n          // setCaretAt(textNode.nextSibling);\n          // selection.modify('move', 'forward', 'character');\n          node.remove();\n          // (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\n          // selection.modify('move', 'forward', 'character');\n          // selection.collapseToEnd();\n\n          // addInputCallback(() => {\n          //   (textNode as CharacterData).deleteData(textNode.nodeValue.indexOf(BOM), BOM.length);\n          //   node.parentElement.remove();\n          // });\n        }\n      } else if(e.inputType === 'insertLineBreak' &&\n        node &&\n        node.nodeType === node.TEXT_NODE &&\n        node.nodeValue.length === offset) {\n        log('inserting line break');\n        // const appendix = '\\x01';\n\n        input.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\n          el.contentEditable = 'inherit';\n        });\n        addInputCallback(() => {\n          input.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\n            el.contentEditable = 'false';\n          });\n        });\n\n        // const textNode = document.createTextNode(appendix);\n        // if(node.parentElement !== this.messageInput) node.parentElement.after(textNode);\n        // else node.after(textNode);\n        // // selection.modify('move', 'forward', 'character');\n        // addInputCallback(() => {\n        //   textNode.remove();\n        // });\n\n        // const offset = node.nodeValue.length;\n        // (node as CharacterData).insertData(offset, appendix);\n        // addInputCallback(() => {\n        //   selection.modify('move', 'forward', 'character');\n        //   (node as CharacterData).deleteData(node.nodeValue.indexOf(appendix), appendix.length);\n        //   if(!node.nodeValue) {\n        //     node.remove();\n        //   }\n        // });\n      }\n    } else if(e.inputType === 'historyUndo') { // have to remove extra BOMs\n      addInputCallback(() => {\n        this.processFilledFillers(input);\n        this.processEmptiedFillers(input);\n        this.removeExtraBOMs(input);\n        this.removeEmptyTextNodes(input);\n\n        // ! lol what, caret will be at the wrong position, have to set it to the same\n        this.fixBuggedCaret();\n\n        // lol\n        // this.messageInput.querySelectorAll('.has-text').forEach((el) => {\n        //   if(el.textContent === BOM) {\n        //     el.firstElementChild.replaceWith(el.firstElementChild.firstChild);\n        //     el.classList.replace('input-filler3', 'input-filler');\n        //   }\n        // });\n      });\n    } else if(e.inputType === 'historyRedo') {\n      // if(node?.nodeValue === BOM && offset === BOM.length) {\n      //   selection.modify('move', 'backward', 'character');\n      // }\n\n      addInputCallback(() => {\n        this.processFilledFillers(input);\n        this.processEmptiedFillers(input);\n\n        // fix contenteditable attribute\n        input.querySelectorAll<HTMLElement>('.input-something:not([contenteditable])').forEach((el) => {\n          el.contentEditable = 'false';\n        });\n\n        this.removeExtraBOMs(input);\n\n        // ! lol what, caret will be at the wrong position, have to set it to the same\n        this.fixBuggedCaret();\n      });\n    }\n  };\n\n  private onKeyDown = (e: KeyboardEvent) => {\n    const key = e.key;\n\n    // // have to ignore line up and down\n    if(key === 'ArrowDown' || key === 'ArrowUp') {\n      this.lastNode = this.lastOffset = undefined;\n    } else {\n      const {node, offset} = this.getCaretPosN();\n      this.lastNode = node/* getFiller(node) */, this.lastOffset = offset;\n      if(this.lastNode === this.input) {\n        this.lastNode = this.lastOffset = undefined;\n      }\n    }\n\n    this.log('keydown', this.lastNode, this.lastNode?.parentNode, this.lastOffset, this.getCaretPosN(), e);\n  };\n\n  private addInputCallback(input: HTMLElement, callback: () => void, capture = true) {\n    const newCallback = () => {\n      this.log('input modify callback');\n      callback();\n    };\n\n    if(capture && IS_FIREFOX) this.inputCaptureCallbacks.push(newCallback);\n    else this.listenerSetter.add(input)('input', newCallback, {once: true, capture});\n  }\n\n  public removeExtraBOMs(input: HTMLElement) {\n    const c = (sibling: ChildNode) => {\n      return (sibling as HTMLElement)?.classList?.contains('input-something');\n    };\n\n    input.querySelectorAll('.input-filler').forEach((el) => {\n      const {previousSibling, nextSibling} = el;\n      let needed = false;\n\n      // if(!(previousSibling as HTMLElement)?.classList?.contains('input-filler') && isCustomFillerNeededBySiblingNode(previousSibling)) {\n      if(!(nextSibling as HTMLElement)?.classList?.contains('input-filler') && isCustomFillerNeededBySiblingNode(nextSibling)) {\n        needed = c(previousSibling) || c(nextSibling);\n      }\n\n      if(!needed) {\n        this.log.warn('removing empty bom node', el);\n        el.remove();\n      }\n    });\n  }\n\n  private getFiller(node: Node) {\n    return node && node.nodeType === node.TEXT_NODE && node.parentElement !== this.input ? node.parentElement : node as HTMLElement;\n  }\n\n  private getCaretPosN() {\n    const ret = getCaretPosNew(this.input);\n    // const {node} = ret;\n    // if((node as HTMLElement)?.classList?.contains('input-something')) {\n    //   ret.node = node.previousSibling;\n    //   ret.offset = ret.node.textContent.length;\n    // }\n\n    return {...ret, move: this.move.bind(this, ret.selection)};\n  }\n\n  private removeEmptyTextNodes(input: HTMLElement) {\n    const {log} = this;\n    // let i = -1;\n    // remove empty text nodes\n    const treeWalker = document.createTreeWalker(\n      input,\n      NodeFilter.SHOW_TEXT,\n      {acceptNode: (node) => node.parentElement === input && !node.nodeValue/*  && !++i */ ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT}\n    );\n\n    let textNode: Text;\n    while(textNode = treeWalker.nextNode() as Text) {\n      log.warn('removing empty text node', textNode);\n      textNode.remove();\n    }\n  }\n\n  private removePossibleBOMSiblings(previousSibling: ChildNode, nextSibling: ChildNode) {\n    [previousSibling, nextSibling].forEach((sibling) => {\n      if((sibling as HTMLElement)?.classList?.contains('input-filler')) {\n        sibling.remove();\n      }\n    });\n  }\n\n  private removePossibleBOMSiblingsByNode(node: ChildNode) {\n    const {previousSibling, nextSibling} = node;\n    this.removePossibleBOMSiblings(previousSibling, nextSibling);\n  };\n\n  private processEmptiedFillers(input: HTMLElement) {\n    input.querySelectorAll<HTMLElement>('.input-filler-text').forEach((el) => {\n      this.removeExtraBOMs(el);\n\n      let cleanSiblings = true;\n      if(!el.textContent) {\n        el.classList.replace('input-filler-text', 'input-filler');\n\n        const textNode = Array.from(el.childNodes).find((node) => node.nodeType === node.TEXT_NODE);\n        if(textNode) {\n          (textNode as CharacterData).insertData(0, BOM);\n        } else if(((el as any).t as ChildNode)?.nodeValue) {\n          el.append((el as any).t);\n        } else {\n          el.append(document.createTextNode(BOM));\n        }\n      } else if(!NOT_ONLY_BOMS_REG_EXP.test(el.textContent) && !el.querySelector('.input-something')) {\n        el.classList.replace('input-filler-text', 'input-filler');\n      } else {\n        cleanSiblings = false;\n      }\n\n      if(cleanSiblings) {\n        this.removePossibleBOMSiblingsByNode(el);\n      }\n    });\n  }\n\n  private processFilledFillers(input: HTMLElement) {\n    // remove the BOM when changing to text\n    input.querySelectorAll('.input-filler').forEach((el) => {\n      if(el.textContent !== BOM) {\n        el.classList.replace('input-filler', 'input-filler-text');\n        const t = (el as any).t as ChildNode;\n        const bomNode = Array.from(el.childNodes).find((node) => node.nodeType === node.TEXT_NODE && node.nodeValue.includes(BOM));\n        if(bomNode && !t?.nodeValue) {\n          const idx = bomNode.nodeValue.indexOf(BOM);\n          if(idx !== -1) {\n            (bomNode as CharacterData).deleteData(idx, BOM.length);\n          }\n        }\n\n        // t?.remove();\n      }\n    });\n  }\n\n  private setSelectionClassName(selection: Selection, input?: HTMLElement) {\n    // Array.from(this.messageInput.querySelectorAll('.selection')).forEach((element) => {\n    //   element.classList.remove('selection');\n    // });\n\n    if(selection.rangeCount) {\n      const range = selection.getRangeAt(0);\n\n      if(input) {\n        Array.from(input.querySelectorAll('.input-selectable')).forEach((element) => {\n          element.classList.toggle('selection', !range.collapsed && range.intersectsNode(element));\n        });\n      } else {\n        Array.from(document.querySelectorAll('.input-selectable.selection')).forEach((element) => element.classList.remove('selection'));\n      }\n    }\n  }\n\n  private move(selection: Selection, left: boolean) {\n    const {focusNode: focusNodeBefore, focusOffset: focusOffsetBefore} = selection;\n    selection.modify('extend', left ? 'backward' : 'forward', 'character');\n    // if(offset === nodeValue.length) {\n    //   selection.modify('extend', !left ? 'backward' : 'forward', 'character');\n    // }\n    if(left) selection.collapseToStart();\n    else selection.collapseToEnd();\n    const {focusNode: focusNodeAfter, focusOffset: focusOffsetAfter} = selection;\n    this.log(\n      'moving cursor',\n      left,\n      focusNodeBefore,\n      focusNodeBefore.nodeType === focusNodeBefore.ELEMENT_NODE ? focusNodeBefore : focusNodeBefore.parentElement,\n      focusOffsetBefore,\n      focusNodeAfter,\n      focusNodeAfter.nodeType === focusNodeAfter.ELEMENT_NODE ? focusNodeAfter : focusNodeAfter.parentElement,\n      focusOffsetAfter\n    );\n  }\n\n  public prepareApplyingMarkdown() {\n    const {input} = this;\n\n    // do not wrap fillers into spans\n    const fillers = input.querySelectorAll<HTMLElement>('.input-filler');\n    // fillers.forEach((el) => {\n    //   el.contentEditable = 'false';\n    // });\n\n    const smths = input.querySelectorAll<HTMLElement>('.input-something');\n    smths.forEach((el) => {\n      el.contentEditable = 'inherit';\n    });\n\n    return () => {\n      fillers.forEach((el) => {\n        el.contentEditable = 'inherit';\n      });\n\n      smths.forEach((el) => {\n        el.contentEditable = 'false';\n      });\n\n      this.removeExtraBOMs(input);\n    };\n  }\n\n  public static getInstance() {\n    return this.INSTANCE ??= new RichInputHandler();\n  }\n}\n","// https://stackoverflow.com/a/6150060\nexport default function selectElementContents(el: HTMLElement) {\n  const range = document.createRange();\n  range.selectNodeContents(el);\n  const sel = window.getSelection();\n  sel.removeAllRanges();\n  sel.addRange(range);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {PASS_CONFLICTING_ENTITIES, PASS_SINGLE_CONFLICTING_ENTITIES} from '.';\nimport {MessageEntity} from '../../layer';\n\nconst SINGLE_ENTITIES: Set<MessageEntity['_']> = new Set(['messageEntityPre', 'messageEntityCode']);\n\nexport default function findConflictingEntity(currentEntities: MessageEntity[], newEntity: MessageEntity) {\n  let singleEnd = -1;\n  return currentEntities.find((currentEntity) => {\n    if(SINGLE_ENTITIES.has(currentEntity._)) {\n      singleEnd = currentEntity.offset + currentEntity.length;\n    }\n\n    if(newEntity.offset < singleEnd && !PASS_SINGLE_CONFLICTING_ENTITIES.has(newEntity._)) {\n      return true;\n    }\n\n    const isConflictingTypes = newEntity._ === currentEntity._ ||\n      (!PASS_CONFLICTING_ENTITIES.has(newEntity._) && !PASS_CONFLICTING_ENTITIES.has(currentEntity._));\n\n    if(!isConflictingTypes) {\n      return false;\n    }\n\n    const isConflictingOffset = newEntity.offset >= currentEntity.offset &&\n      (newEntity.length + newEntity.offset) <= (currentEntity.length + currentEntity.offset);\n\n    return isConflictingOffset;\n  });\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MessageEntity} from '../../layer';\nimport findConflictingEntity from './findConflictingEntity';\nimport sortEntities from './sortEntities';\n\nexport default function mergeEntities(currentEntities: MessageEntity[], newEntities: MessageEntity[]) {\n  const filtered = newEntities.filter((e) => {\n    return !findConflictingEntity(currentEntities, e);\n  });\n\n  currentEntities.push(...filtered);\n  sortEntities(currentEntities);\n  // currentEntities.sort((a, b) => a.offset - b.offset);\n  // currentEntities.sort((a, b) => (a.offset - b.offset) || (a._ === 'messageEntityCaret' && -1));\n\n  // * fix splitted emoji. messageEntityTextUrl can split the emoji if starts before its end (e.g. on fe0f)\n  // * have to fix even if emoji supported since it's being wrapped in span\n  // if(!IS_EMOJI_SUPPORTED) {\n  for(let i = 0; i < currentEntities.length; ++i) {\n    const entity = currentEntities[i];\n    if(entity._ === 'messageEntityEmoji') {\n      const nextEntity = currentEntities[i + 1];\n      if(nextEntity /* && nextEntity._ !== 'messageEntityCaret' */ && nextEntity.offset < (entity.offset + entity.length)) {\n        entity.length = nextEntity.offset - entity.offset;\n      }\n    }\n  }\n  // }\n\n  return currentEntities;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport rootScope from '../rootScope';\nimport wrapRichText from './wrapRichText';\n\nexport default function wrapDraftText(text: string, options: Partial<{\n  wrappingForPeerId: PeerId\n}> & Parameters<typeof wrapRichText>[1] = {}) {\n  if(!text) {\n    return wrapRichText('');\n  }\n\n  let entities = options.entities;\n  if(entities && !rootScope.premium && options.wrappingForPeerId !== rootScope.myId) {\n    entities = entities.filter((entity) => entity._ !== 'messageEntityCustomEmoji');\n  }\n\n  const fragment = wrapRichText(text, {\n    ...options,\n    entities,\n    noLinks: true,\n    wrappingDraft: true,\n    passEntities: {\n      messageEntityTextUrl: true,\n      messageEntityMentionName: true\n    }\n  });\n\n  return fragment;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type CustomEmojiElement from '../lib/customEmoji/element';\nimport {CustomEmojiRendererElement} from '../lib/customEmoji/renderer';\nimport cancelEvent from '../helpers/dom/cancelEvent';\nimport simulateEvent from '../helpers/dom/dispatchEvent';\nimport documentFragmentToHTML from '../helpers/dom/documentFragmentToHTML';\nimport findUpAttribute from '../helpers/dom/findUpAttribute';\nimport findUpTag from '../helpers/dom/findUpTag';\nimport getCaretPosNew from '../helpers/dom/getCaretPosNew';\nimport getRichValueWithCaret from '../helpers/dom/getRichValueWithCaret';\nimport isInputEmpty from '../helpers/dom/isInputEmpty';\nimport replaceContent from '../helpers/dom/replaceContent';\nimport RichInputHandler, {USING_BOMS} from '../helpers/dom/richInputHandler';\nimport selectElementContents from '../helpers/dom/selectElementContents';\nimport setInnerHTML, {setDirection} from '../helpers/dom/setInnerHTML';\nimport {MessageEntity} from '../layer';\nimport {i18n, LangPackKey, _i18n} from '../lib/langPack';\nimport {NULL_PEER_ID} from '../lib/mtproto/mtproto_config';\nimport mergeEntities from '../lib/richTextProcessor/mergeEntities';\nimport parseEntities from '../lib/richTextProcessor/parseEntities';\nimport wrapDraftText from '../lib/richTextProcessor/wrapDraftText';\nimport {createCustomFiller, insertCustomFillers} from '../lib/richTextProcessor/wrapRichText';\n\nexport async function insertRichTextAsHTML(input: HTMLElement, text: string, entities: MessageEntity[], wrappingForPeerId: PeerId) {\n  const loadPromises: Promise<any>[] = [];\n  const wrappingCustomEmoji = entities?.some((entity) => entity._ === 'messageEntityCustomEmoji');\n  const renderer = wrappingCustomEmoji ? createCustomEmojiRendererForInput() : undefined;\n  const fragment = wrapDraftText(text, {entities, wrappingForPeerId, loadPromises, customEmojiRenderer: renderer});\n  const something = fragment.querySelectorAll<HTMLElement>('[contenteditable=\"false\"]');\n  something.forEach((el) => {\n    el.contentEditable = 'inherit';\n    el.classList.add('pc');\n  });\n\n  loadPromises.length && await Promise.all(loadPromises);\n\n  fragment.querySelectorAll<HTMLElement>('.input-selectable').forEach((el) => {\n    el.prepend(createCustomFiller(true));\n  });\n\n  const richInputHandler = USING_BOMS ? RichInputHandler.getInstance() : undefined;\n  // const restore = richInputHandler.prepareApplyingMarkdown();\n\n  // fragment.querySelectorAll('.input-filler').forEach((el) => el.remove());\n\n  // const fillers = Array.from(input.querySelectorAll<HTMLElement>('.input-filler')).map((el) => {\n  //   el.contentEditable = 'false';\n  //   return el;\n  // });\n\n  const customEmojiElements = Array.from(fragment.querySelectorAll<HTMLImageElement>('.custom-emoji-placeholder')).map((el) => {\n    el.dataset.ces = '1';\n    return (el as any).customEmojiElement as CustomEmojiElement;\n  });\n\n  const html = documentFragmentToHTML(fragment);\n  renderer?.destroy();\n\n  // console.log(html);\n\n  const pre = getCaretPosNew(input);\n  // console.log('pre', pre);\n  let textNode: ChildNode, textNodeValue: string;\n  if(pre.node) {\n    // if(pre.node?.nodeValue === BOM && false) {\n    //   textNode = document.createTextNode(textNodeValue = BOM);\n    //   (pre.node.parentNode as any as ChildNode).after(textNode);\n    //   pre.selection.modify('extend', 'forward', 'character');\n    //   pre.selection.collapseToEnd();\n    // }\n  } else {\n    const range = document.createRange();\n    let node = input.lastChild;\n    if(!node) {\n      input.append(node /* = textNode */ = document.createTextNode(''));\n    }\n\n    range.setStartAfter(node);\n    range.collapse(true);\n    pre.selection.removeAllRanges();\n    pre.selection.addRange(range);\n  }\n\n  // const fragmentLastChild = fragment.lastChild;\n\n  // const s = document.createElement('span');\n  // (node as ChildNode).replaceWith(s);\n  // s.append(node);\n  input.addEventListener('input', cancelEvent, {capture: true, once: true, passive: false});\n  richInputHandler?.onBeforeInput({inputType: 'insertContent'});\n  window.document.execCommand('insertHTML', false, html);\n  Array.from(input.querySelectorAll<HTMLImageElement>('[data-ces]')).forEach((el, idx) => {\n    delete el.dataset.ces;\n    const customEmojiElement = customEmojiElements[idx];\n    (el as any).customEmojiElement = customEmojiElement;\n    customEmojiElement.placeholder = el;\n  });\n  // fillers.forEach((el) => {\n  //   el.contentEditable = 'inherit';\n  // });\n  input.querySelectorAll<HTMLElement>('.pc').forEach((el) => {\n    el.contentEditable = 'false';\n  });\n  if(textNode) {\n    const {nodeValue} = textNode;\n    if(nodeValue === textNodeValue) {\n      textNode.remove();\n    } else {\n      (textNode as CharacterData).replaceData(nodeValue.indexOf(textNodeValue), textNodeValue.length, '');\n    }\n  }\n  // restore();\n  richInputHandler?.removeExtraBOMs(input);\n  simulateEvent(input, 'input');\n\n  // if(textNode) {\n  //   const selection = document.getSelection();\n  //   const node = fragmentLastChild.nextSibling || fragmentLastChild;\n  //   const range = document.createRange();\n  //   range.setStartAfter(node);\n  //   range.collapse(true);\n  //   selection.removeAllRanges();\n  //   selection.addRange(range);\n  // }\n\n  // const after = getCaretPosNew(input);\n  // console.log('after', after);\n  // if(after.node?.nodeValue === BOM) {\n  //   const smth = findUpClassName(after.node.parentElement, 'input-something');\n  //   if(smth) {\n  //     const selection = document.getSelection();\n  //     const node = smth.nextSibling;\n  //     const range = document.createRange();\n  //     range.setStartAfter(node);\n  //     range.collapse(true);\n  //     selection.removeAllRanges();\n  //     selection.addRange(range);\n\n  //     // if(after.offset === 0) after.selection.modify('extend', 'forward', 'character');\n  //     // after.selection.modify('extend', 'forward', 'character');\n  //     // after.selection.collapseToEnd();\n  //   }\n  // }\n\n  // setCaretAt(fragmentLastChild.nextSibling);\n\n  // console.log('ASD');\n}\n\nlet init = () => {\n  document.addEventListener('paste', (e) => {\n    const input = findUpAttribute(e.target, 'contenteditable=\"true\"');\n    if(!input) {\n      return;\n    }\n\n    const noLinebreaks = !!input.dataset.noLinebreaks;\n    e.preventDefault();\n    let text: string, entities: MessageEntity[];\n\n    // @ts-ignore\n    let plainText: string = (e.originalEvent || e).clipboardData.getData('text/plain');\n    let usePlainText = true;\n\n    // @ts-ignore\n    let html: string = (e.originalEvent || e).clipboardData.getData('text/html') || plainText;\n\n    const filterEntity = (e: MessageEntity) => e._ === 'messageEntityEmoji' || (e._ === 'messageEntityLinebreak' && !noLinebreaks);\n    if(noLinebreaks) {\n      const regExp = /[\\r\\n]/g;\n      plainText = plainText.replace(regExp, '');\n      html = html.replace(regExp, '');\n    }\n\n    const peerId = (input.dataset.peerId || NULL_PEER_ID).toPeerId();\n    if(html.trim()) {\n      // console.log(html.replace(/ (style|class|id)=\".+?\"/g, ''));\n\n      html = html.replace(/<style([\\s\\S]*)<\\/style>/, '');\n      html = html.replace(/<!--([\\s\\S]*)-->/, '');\n      html = html.replace('<br class=\"Apple-interchange-newline\">', '');\n\n      const match = html.match(/<body>([\\s\\S]*)<\\/body>/);\n      if(match) {\n        html = match[1].trim();\n      }\n\n      // const s = cleanHTML(html, true) as NodeList;\n      // console.log(s);\n\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(html, 'text/html');\n      const span = doc.body || document.createElement('body');\n\n      // const span: HTMLElement = document.createElement('span');\n      // span.innerHTML = html;\n      // span.append(...Array.from(s));\n\n      let curChild = span.firstChild;\n      while(curChild) { // * fix whitespace between elements like <p>asd</p>\\n<p>zxc</p>\n        const nextSibling = curChild.nextSibling;\n        if(curChild.nodeType === curChild.TEXT_NODE) {\n          if(!curChild.nodeValue.trim()) {\n            curChild.remove();\n          }\n        }\n\n        curChild = nextSibling;\n      }\n\n      const richValue = getRichValueWithCaret(span, true, false);\n\n      const canWrapCustomEmojis = !!peerId;\n      if(!canWrapCustomEmojis) {\n        richValue.entities = richValue.entities.filter((entity) => entity._ !== 'messageEntityCustomEmoji');\n      }\n\n      /* if(false) */ { // * fix extra new lines appearing from <p> (can have them from some sources, like macOS Terminal)\n        const lines = richValue.value.split('\\n');\n        let textLength = 0;\n        for(let lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\n          const line = lines[lineIndex];\n          textLength += line.length;\n\n          const index = textLength;\n          if(plainText[index] !== '\\n' && lineIndex !== (lines.length - 1)) {\n            const nextLine = lines.splice(lineIndex + 1, 1)[0];\n            lines[lineIndex] = line + nextLine;\n\n            // fix entities\n            richValue.entities.forEach((entity) => {\n              if(entity.offset >= index) {\n                entity.offset -= 1;\n              }\n            });\n\n            textLength += nextLine.length;\n          }\n\n          textLength += 1;\n        }\n\n        const correctedText = lines.join('\\n');\n        richValue.value = correctedText;\n      }\n\n      const richTextLength = richValue.value.replace(/\\s/g, '').length;\n      const plainTextLength = plainText.replace(/\\s/g, '').length;\n      if(richTextLength === plainTextLength ||\n        richValue.entities.find((entity) => entity._ === 'messageEntityCustomEmoji')) {\n        text = richValue.value;\n        entities = richValue.entities;\n        usePlainText = false;\n\n        let entities2 = parseEntities(text);\n        entities2 = entities2.filter(filterEntity);\n        mergeEntities(entities, entities2);\n      }\n\n      // console.log('usePlainText', usePlainText);\n    }\n\n    if(usePlainText) {\n      text = plainText;\n      entities = parseEntities(text);\n      entities = entities.filter(filterEntity);\n    }\n\n    insertRichTextAsHTML(input, text, entities, peerId);\n  });\n\n  init = null;\n};\n\n// ! it doesn't respect symbols other than strongs\n/* const checkAndSetRTL = (input: HTMLElement) => {\n  //const isEmpty = isInputEmpty(input);\n  //console.log('input', isEmpty);\n\n  //const char = [...getRichValue(input)][0];\n  const char = (input instanceof HTMLInputElement ? input.value : input.innerText)[0];\n  let direction = 'ltr';\n  if(char && checkRTL(char)) {\n    direction = 'rtl';\n  }\n\n  //console.log('RTL', direction, char);\n\n  input.style.direction = direction;\n}; */\n\nexport enum InputState {\n  Neutral = 0,\n  Valid = 1,\n  Error = 2\n};\n\nexport type InputFieldOptions = {\n  placeholder?: LangPackKey,\n  label?: LangPackKey,\n  labelOptions?: any[],\n  labelText?: string | DocumentFragment,\n  name?: string,\n  maxLength?: number,\n  showLengthOn?: number,\n  plainText?: true,\n  required?: boolean,\n  canBeEdited?: boolean,\n  validate?: () => boolean,\n  inputMode?: 'tel' | 'numeric',\n  withLinebreaks?: boolean,\n  autocomplete?: string,\n  withBorder?: boolean\n};\n\nfunction createCustomEmojiRendererForInput(textColor?: string) {\n  const renderer = CustomEmojiRendererElement.create({\n    wrappingDraft: true,\n    isSelectable: true,\n    textColor: textColor || 'primary-text-color'\n  });\n  return renderer;\n}\n\nfunction processCustomEmojisInInput(input: HTMLElement) {\n  const customEmojiElements = Array.from(input.querySelectorAll<CustomEmojiElement | HTMLElement>('.custom-emoji, .custom-emoji-placeholder'));\n  let renderer = input.querySelector<CustomEmojiRendererElement>('.custom-emoji-renderer');\n  if(!renderer && customEmojiElements.length) {\n    renderer = createCustomEmojiRendererForInput(input.dataset.textColor);\n    input.prepend(renderer);\n  } else if(renderer && !customEmojiElements.length) {\n    renderer.remove();\n    return;\n  }\n\n  if(!renderer) {\n    return;\n  }\n\n  const customEmojis: Parameters<CustomEmojiRendererElement['add']>[0]['addCustomEmojis'] = new Map();\n  customEmojiElements.forEach((element) => {\n    const customEmojiElement: CustomEmojiElement = (element as CustomEmojiElement).loop !== undefined ? element as CustomEmojiElement : (element as any).customEmojiElement as CustomEmojiElement;\n    const {docId} = customEmojiElement;\n    let set = customEmojis.get(docId);\n    if(!set) {\n      customEmojis.set(docId, set = new Set());\n    }\n\n    set.add(customEmojiElement);\n  });\n\n  for(const [docId, customEmojiElements] of customEmojis) {\n    let hasSet = renderer.customEmojis.get(docId);\n    if(hasSet) {\n      for(const customEmojiElement of hasSet) {\n        if(!customEmojiElements.has(customEmojiElement)) {\n          customEmojiElement.destroy();\n        }\n      }\n    } else {\n      hasSet = new Set();\n    }\n\n    for(const customEmojiElement of customEmojiElements) {\n      if(!hasSet.has(customEmojiElement)) {\n        customEmojiElement.connectedCallback();\n      }\n    }\n  }\n\n  renderer.add({\n    addCustomEmojis: customEmojis,\n    lazyLoadQueue: false\n  });\n  renderer.forceRender();\n}\n\nexport default class InputField {\n  public container: HTMLElement;\n  public input: HTMLElement;\n  public label: HTMLLabelElement;\n\n  public originalValue: string;\n\n  public required: boolean;\n  public validate: () => boolean;\n\n  constructor(public options: InputFieldOptions = {}) {\n    this.container = document.createElement('div');\n    this.container.classList.add('input-field');\n\n    this.required = options.required;\n    this.validate = options.validate;\n\n    if(options.maxLength !== undefined && options.showLengthOn === undefined) {\n      options.showLengthOn = Math.min(40, Math.round(options.maxLength / 3));\n    }\n\n    const {placeholder, maxLength, showLengthOn, name, plainText, canBeEdited = true, autocomplete, withBorder} = options;\n    const label = options.label || options.labelText;\n\n    const onInputCallbacks: Array<() => void> = [];\n    let input: HTMLElement;\n    if(!plainText) {\n      if(init) {\n        init();\n      }\n\n      this.container.innerHTML = `<div class=\"input-field-input is-empty\"></div>`;\n\n      input = this.container.firstElementChild as HTMLElement;\n      input.contentEditable = '' + !!canBeEdited;\n      // const observer = new MutationObserver(() => {\n      //   //checkAndSetRTL(input);\n\n      //   if(processInput) {\n      //     processInput();\n      //   }\n      // });\n\n      RichInputHandler.getInstance();\n\n      input.addEventListener('mousedown', (e) => {\n        const selection = document.getSelection();\n        if(!selection.isCollapsed) {\n          return;\n        }\n\n        const placeholder = findUpTag(e.target, 'IMG');\n        if(!placeholder) {\n          return;\n        }\n\n        const rect = placeholder.getBoundingClientRect();\n        const centerX = rect.left + rect.width / 2;\n        const focusOnNext = e.clientX >= centerX;\n\n        const range = document.createRange();\n        range.setStartAfter(focusOnNext ? placeholder : placeholder.previousSibling ?? placeholder);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      });\n\n      onInputCallbacks.push(() => {\n        // console.log('input');\n        // return;\n        // * because if delete all characters there will br left\n        const isEmpty = isInputEmpty(input);\n        if(isEmpty) {\n          // const textNode = Array.from(input.childNodes).find((node) => node.nodeType === node.TEXT_NODE) || document.createTextNode('');\n          input.replaceChildren();\n          // input.append(document.createTextNode('')); // need first text node to support history stack\n        }\n\n        input.classList.toggle('is-empty', isEmpty);\n\n        // const fillers = Array.from(input.querySelectorAll('.emoji-filler')) as HTMLElement[];\n        // fillers.forEach((filler) => {\n        //   const textContent = filler.textContent;\n        //   if(textContent === BOM) {\n        //     return;\n        //   }\n\n        //   if(textContent) {\n\n        //   } else {\n        //     let curChild = filler.firstChild;\n        //     while(curChild) {\n        //       curChild = curChild.nextSibling;\n        //     }\n        //   }\n\n        //   filler.classList.remove('emoji-filler');\n        // });\n\n        // Array.from(input.querySelectorAll('br, span:empty')).forEach((el) => {\n        //   const parentElement = el.parentElement;\n        //   (parentElement === input ? el : parentElement).remove();\n        // });\n        USING_BOMS && Array.from(input.querySelectorAll('br:not(.br-not-br)')).forEach((el) => {\n          // const parentElement = el.parentElement;\n          el.remove();\n          // if(!parentElement.children.length && !parentElement.textContent) {\n          //   parentElement.textContent = '';\n          // }\n        });\n\n        insertCustomFillers(Array.from(input.querySelectorAll('.input-something')));\n\n        processCustomEmojisInInput(input);\n\n        // .forEach((el) => el.remove());\n      });\n\n      // ! childList for paste first symbol\n      // observer.observe(input, {characterData: true, childList: true, subtree: true});\n    } else {\n      this.container.innerHTML = `\n      <input type=\"text\" ${name ? `name=\"${name}\"` : ''} autocomplete=\"${autocomplete ?? 'off'}\" ${label ? 'required=\"\"' : ''} class=\"input-field-input is-empty\">\n      `;\n\n      input = this.container.firstElementChild as HTMLElement;\n      // input.addEventListener('input', () => checkAndSetRTL(input));\n\n      onInputCallbacks.push(() => {\n        const isEmpty = isInputEmpty(input);\n        input.classList.toggle('is-empty', isEmpty);\n      });\n    }\n\n    setDirection(input);\n\n    if(options.inputMode) {\n      input.inputMode = options.inputMode;\n    }\n\n    if(placeholder) {\n      _i18n(input, placeholder, undefined, 'placeholder');\n    }\n\n    if(withBorder !== false && withBorder || label || placeholder) {\n      const border = document.createElement('div');\n      border.classList.add('input-field-border');\n      this.container.append(border);\n    }\n\n    if(label) {\n      this.label = document.createElement('label');\n      this.setLabel();\n      this.container.append(this.label);\n    }\n\n    if(maxLength) {\n      const labelEl = this.container.lastElementChild as HTMLLabelElement;\n      let showingLength = false;\n\n      const onInput = () => {\n        const wasError = input.classList.contains('error');\n        // * https://stackoverflow.com/a/54369605 #2 to count emoji as 1 symbol\n        const inputLength = plainText ? (input as HTMLInputElement).value.length : [...getRichValueWithCaret(input, false, false).value].length;\n        const diff = maxLength - inputLength;\n        const isError = diff < 0;\n        input.classList.toggle('error', isError);\n\n        // this.onLengthChange && this.onLengthChange(inputLength, isError);\n\n        if(isError || diff <= showLengthOn) {\n          this.setLabel();\n          labelEl.append(` (${maxLength - inputLength})`);\n          if(!showingLength) showingLength = true;\n        } else if((wasError && !isError) || showingLength) {\n          this.setLabel();\n          showingLength = false;\n        }\n      };\n\n      onInputCallbacks.push(onInput);\n    }\n\n    const noLinebreaks = !options.withLinebreaks;\n    if(noLinebreaks && !plainText) {\n      input.dataset.noLinebreaks = '1';\n      input.addEventListener('keypress', (e) => {\n        if(e.key === 'Enter') {\n          e.preventDefault();\n          return false;\n        }\n      });\n    }\n\n    if(onInputCallbacks.length) {\n      input.addEventListener('input', () => {\n        onInputCallbacks.forEach((callback) => callback());\n      });\n    }\n\n    this.input = input;\n  }\n\n  public select() {\n    if(!this.value) { // * avoid selecting whole empty field on iOS devices\n      return;\n    }\n\n    if(this.options.plainText) {\n      (this.input as HTMLInputElement).select(); // * select text\n    } else {\n      selectElementContents(this.input);\n    }\n  }\n\n  public setLabel() {\n    this.label.textContent = '';\n    if(this.options.labelText) {\n      setInnerHTML(this.label, this.options.labelText);\n    } else {\n      this.label.append(i18n(this.options.label, this.options.labelOptions));\n    }\n  }\n\n  get value(): string {\n    return this.options.plainText ? (this.input as HTMLInputElement).value : getRichValueWithCaret(this.input, false, false).value;\n    // return getRichValue(this.input);\n  }\n\n  set value(value: Parameters<typeof replaceContent>[1]) {\n    this.setValueSilently(value, true);\n    this.simulateInputEvent();\n  }\n\n  public simulateInputEvent() {\n    simulateEvent(this.input, 'input');\n  }\n\n  public setValueSilently(value: Parameters<typeof replaceContent>[1], fromSet?: boolean) {\n    if(this.options.plainText) {\n      (this.input as HTMLInputElement).value = value as string;\n    } else {\n      replaceContent(this.input, value);\n      processCustomEmojisInInput(this.input);\n    }\n\n    this.input.classList.toggle('is-empty', isInputEmpty(this.input));\n  }\n\n  public isChanged() {\n    return this.value !== this.originalValue;\n  }\n\n  public isValid() {\n    return !this.input.classList.contains('error') &&\n      (!this.validate || this.validate()) &&\n      (!this.required || !isInputEmpty(this.input));\n  }\n\n  public isValidToChange() {\n    return this.isValid() && this.isChanged();\n  }\n\n  public setDraftValue(value = '', silent?: boolean) {\n    let _value: Parameters<typeof replaceContent>[1] = value;\n    if(!this.options.plainText) {\n      _value = /* documentFragmentToHTML */(wrapDraftText(value));\n    }\n\n    if(silent) {\n      this.setValueSilently(_value, false);\n    } else {\n      this.value = _value;\n    }\n  }\n\n  public setOriginalValue(value: InputField['originalValue'] = '', silent?: boolean) {\n    this.originalValue = value;\n    this.setDraftValue(value, silent);\n  }\n\n  public setState(state: InputState, label?: LangPackKey) {\n    if(label) {\n      this.label.textContent = '';\n      this.label.append(i18n(label, this.options.labelOptions));\n    } else {\n      this.setLabel();\n    }\n\n    this.input.classList.toggle('error', !!(state & InputState.Error));\n    this.input.classList.toggle('valid', !!(state & InputState.Valid));\n  }\n\n  public setError(label?: LangPackKey) {\n    this.setState(InputState.Error, label);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MessageEntity} from '../../layer';\nimport parseEntities from './parseEntities';\nimport wrapRichText from './wrapRichText';\n\nexport default function wrapEmojiText(text: string, isDraft = false, entities?: MessageEntity[]) {\n  if(!text) return wrapRichText('');\n\n  entities ??= parseEntities(text).filter((e) => e._ === 'messageEntityEmoji');\n  return wrapRichText(text, {entities, wrappingDraft: isDraft});\n}\n"],"file":"wrapEmojiText-a69151ca.js"}