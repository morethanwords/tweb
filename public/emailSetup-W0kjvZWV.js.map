{"version":3,"file":"emailSetup-W0kjvZWV.js","sources":["../src/helpers/solid/subscribeOn.ts","../src/components/codeInputField.tsx","../src/components/rippleElement.tsx","../src/components/buttonTsx.tsx","../src/components/popups/indexTsx.tsx","../src/components/transitionTsx.tsx","../src/components/lottieAnimation.tsx","../src/helpers/solid/classname.tsx","../src/helpers/solid/i18n.tsx","../src/helpers/solid/createListTransition.ts","../src/helpers/solid/animationList.ts","../src/helpers/solid/animations.tsx","../src/components/popups/emailSetup.tsx"],"sourcesContent":["import {onCleanup} from 'solid-js';\nimport {ListenerElement} from '../listenerSetter';\n\nexport function subscribeOn<T extends ListenerElement>(obj: T): T['addEventListener'] {\n  return ((event: string, callback: Function, options: any) => {\n    // @ts-ignore\n    obj.addEventListener(event, callback, options);\n\n    onCleanup(() => {\n      // @ts-ignore\n      obj.removeEventListener(event, callback, options);\n    });\n  }) as any;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport styles from './codeInputField.module.scss';\nimport classNames from '../helpers/string/classNames';\nimport {children, createRoot, createSignal, Index, Ref, Show, Signal} from 'solid-js';\nimport {subscribeOn} from '../helpers/solid/subscribeOn';\nimport {Transition} from '../vendor/solid-transition-group';\n\nexport default class CodeInputFieldCompat {\n  public container: HTMLDivElement;\n  public input: HTMLInputElement;\n  private dispose: () => void;\n  private errorSignal!: Signal<boolean>;\n  private disabledSignal!: Signal<boolean>;\n  private valueSignal!: Signal<string>;\n\n  constructor(public options: {\n    length: number\n    onChange?: (code: string) => void\n    onFill?: (code: string) => void\n  }) {\n    this.errorSignal = createSignal(false);\n    this.disabledSignal = createSignal(false);\n    this.valueSignal = createSignal('');\n    this.container = createRoot((dispose) => {\n      this.dispose = dispose;\n      const el = (\n        <CodeInputField\n          {...options}\n          ref={this.input}\n          error={this.errorSignal[0]()}\n          disabled={this.disabledSignal[0]()}\n          valueSignal={this.valueSignal}\n        />\n      );\n      return children(() => el)() as HTMLDivElement;\n    });\n  }\n\n  set error(value: boolean) {\n    this.errorSignal[1](value);\n  }\n\n  set disabled(value: boolean) {\n    this.disabledSignal[1](value);\n  }\n\n  set value(value: string) {\n    this.valueSignal[1](value);\n  }\n\n  get value() {\n    return this.valueSignal[0]();\n  }\n\n  cleanup() {\n    this.dispose();\n  }\n}\n\nexport function CodeInputField(props: {\n  valueSignal?: Signal<string>\n  ref?: Ref<HTMLInputElement>\n  class?: string\n  length: number\n  onChange?: (code: string) => void\n  onFill?: (code: string) => void\n  error?: boolean\n  disabled?: boolean\n}) {\n  const [value, setValue] = props.valueSignal ?? createSignal('');\n  const [activeIndexStart, setActiveIndexStart] = createSignal(-1);\n  const [activeIndexEnd, setActiveIndexEnd] = createSignal(-1);\n  const [isInserting, setIsInserting] = createSignal(false);\n\n  let isFocused = false;\n  let isShiftKeyDown = false;\n  const previousSelection = {\n    inserting: false as boolean,\n    start: null as number | null,\n    end: null as number | null\n  };\n\n  const syncSelection = (props: {\n    start: number | null\n    end: number | null\n    inserting: boolean\n    originalStart: number | null\n    originalEnd: number | null\n  }) => {\n    previousSelection.inserting = props.inserting\n    previousSelection.start = props.originalStart\n    previousSelection.end = props.originalEnd\n    const start = props.start\n    const end = props.end\n    if(start === null || end === null) {\n      setActiveIndexStart(-1)\n      setActiveIndexEnd(-1)\n      return\n    }\n\n    setActiveIndexStart(start)\n    setActiveIndexEnd(end)\n  }\n\n  const onSelectionChange = (inputType?: string) => {\n    if(\n      !isFocused ||\n      document.activeElement !== inputRef ||\n      inputRef.selectionStart === null ||\n      inputRef.selectionEnd === null\n    ) {\n      syncSelection({\n        start: null,\n        end: null,\n        inserting: false,\n        originalStart: inputRef.selectionStart,\n        originalEnd: inputRef.selectionEnd\n      })\n      setIsInserting(false)\n      return\n    }\n    const maxLength = props.length\n    const inserting =\n      inputRef.value.length < maxLength &&\n      inputRef.selectionStart === inputRef.value.length\n    setIsInserting(inserting)\n\n    if(inserting || inputRef.selectionStart !== inputRef.selectionEnd) {\n      syncSelection({\n        start: inputRef.selectionStart,\n        end: inserting ? inputRef.selectionEnd + 1 : inputRef.selectionEnd,\n        inserting: inserting,\n        originalStart: inputRef.selectionStart,\n        originalEnd: inputRef.selectionEnd\n      })\n      return\n    }\n\n    let selectionStart = 0\n    let selectionEnd = 0\n    let direction: 'forward' | 'backward' | undefined = undefined\n    if(inputRef.selectionStart === 0) {\n      selectionStart = 0\n      selectionEnd = 1\n      direction = 'forward'\n    } else if(inputRef.selectionStart === maxLength) {\n      selectionStart = maxLength - 1\n      selectionEnd = maxLength\n      direction = 'backward'\n    } else {\n      let startOffset = 0\n      let endOffset = 1\n      if(previousSelection.start !== null && previousSelection.end !== null) {\n        const navigatedBackwards =\n          inputRef.selectionStart < previousSelection.end &&\n          Math.abs(previousSelection.start - previousSelection.end) === 1\n        direction = navigatedBackwards ? 'backward' : 'forward'\n        if(\n          (navigatedBackwards &&\n            !previousSelection.inserting &&\n            inputType !== 'deleteContentForward') ||\n          (!navigatedBackwards && isShiftKeyDown)\n        ) {\n          startOffset += -1\n        }\n      }\n      if(isShiftKeyDown && inputType === undefined) {\n        endOffset += 1\n      }\n      selectionStart = inputRef.selectionStart + startOffset\n      selectionEnd = inputRef.selectionEnd + startOffset + endOffset\n    }\n\n    inputRef.setSelectionRange(selectionStart, selectionEnd, direction)\n    syncSelection({\n      start: selectionStart,\n      end: selectionEnd,\n      inserting: inserting,\n      originalStart: inputRef.selectionStart,\n      originalEnd: inputRef.selectionEnd\n    })\n  }\n\n  subscribeOn(document)('selectionchange', () => onSelectionChange())\n\n  let inputRef!: HTMLInputElement;\n  return (\n    <div\n      class={classNames(\n        styles.wrap,\n        props.error && styles.error,\n        props.disabled && styles.disabled,\n        props.class\n      )}>\n      <input\n        ref={(el) => {\n          inputRef = el;\n          (props.ref as any)?.(el);\n        }}\n        class={styles.input}\n        inputmode=\"numeric\"\n        autocomplete=\"one-time-code\"\n        required\n        spellcheck={false}\n        pattern=\"^\\d*$\"\n        value={value()}\n        disabled={props.disabled}\n        onFocus={() => {\n          inputRef.setSelectionRange(value().length, value().length);\n          isFocused = true;\n          onSelectionChange()\n        }}\n        onBlur={() => {\n          isFocused = false;\n          onSelectionChange()\n        }}\n        onKeyDown={(e) => {\n          if(e.key === 'Shift') {\n            isShiftKeyDown = true;\n          }\n        }}\n        onKeyUp={(e) => {\n          if(e.key === 'Shift') {\n            isShiftKeyDown = false;\n          }\n        }}\n        onInput={(e) => {\n          const rawValue = inputRef.value\n          let finalValue = rawValue\n          const oldValue = value()\n          const selectionSize = Math.abs(\n            (previousSelection.start ?? 0) - (previousSelection.end ?? 0),\n          )\n\n          if((previousSelection.inserting || selectionSize === oldValue.length)) {\n            finalValue = finalValue.replace(/[^\\d]/g, '')\n          }\n          finalValue = finalValue.slice(0, props.length)\n\n          const hasInvalidChars = !/^\\d*$/.test(finalValue)\n          if(\n            (rawValue.length !== 0 && finalValue.length === 0) ||\n            finalValue === oldValue ||\n            hasInvalidChars\n          ) {\n            e.preventDefault()\n            e.currentTarget.value = oldValue\n            if(hasInvalidChars) {\n              e.currentTarget.setSelectionRange(\n                previousSelection.start ?? 0,\n                previousSelection.end ?? 0,\n              )\n            }\n            return\n          }\n\n          if(finalValue.length < oldValue.length) {\n            onSelectionChange(e.inputType)\n          }\n\n          setValue(finalValue)\n\n          props.onChange?.(finalValue)\n          if(finalValue.length === props.length) {\n            props.onFill?.(finalValue)\n          }\n        }}\n      />\n\n      <Index each={Array.from({length: props.length})}>\n        {(_, idx) => (\n          <div\n            class={classNames(\n              styles.digit,\n              (activeIndexStart() <= idx && idx < activeIndexEnd()) && styles.active\n            )}\n          >\n            <Transition>\n              <Show when={value()[idx]}>\n                <div class={styles.digitContent}>\n                  {value()[idx]}\n                </div>\n              </Show>\n            </Transition>\n            {isInserting() && value().length === idx && <div class={styles.caret} />}\n          </div>\n        )}\n      </Index>\n    </div>\n  )\n}\n","import {createRenderEffect, createSignal, onCleanup, Ref, splitProps, ValidComponent} from 'solid-js';\nimport {Dynamic, DynamicProps} from 'solid-js/web';\nimport ripple from './ripple';\nimport classNames from '../helpers/string/classNames';\nripple; // keep\n\nexport default function RippleElement<T extends ValidComponent>(props: DynamicProps<T> & {noRipple?: boolean, rippleSquare?: boolean}) {\n  const [, rest] = splitProps(props, ['noRipple', 'rippleSquare']);\n  const [rippleElement, setRippleElement] = createSignal<HTMLElement>();\n  return (\n    <Dynamic\n      {...rest as typeof props}\n      ref={(ref: any) => {\n        createRenderEffect(() => {\n          if(!props.noRipple) {\n            const ret = ripple(ref, undefined, 'no');\n            setRippleElement(ret.element);\n            onCleanup(() => {\n              ret.dispose();\n              setRippleElement();\n            });\n          }\n        });\n\n        (props.ref as Ref<any>)?.(ref);\n      }}\n      class={classNames(\n        props.class,\n        !props.noRipple && 'rp',\n        !props.noRipple && props.rippleSquare && 'rp-square',\n        ...Object.entries(props.classList || {}).map(([key, value]) => value ? key : undefined)\n      )}\n    >\n      {rippleElement()}\n      {props.children}\n    </Dynamic>\n  );\n}\n","import {JSX, Ref} from 'solid-js';\nimport {FormatterArguments, i18n, LangPackKey} from '../lib/langPack';\nimport {IconTsx} from './iconTsx';\nimport classNames from '../helpers/string/classNames';\nimport RippleElement from './rippleElement';\n\nconst Button = (props: Partial<{\n  ref: Ref<HTMLElement>,\n  as: 'a' | 'div' | 'button',\n  class: string,\n  disabled: boolean,\n  children: JSX.Element,\n  icon: Icon,\n  iconAfter: Icon,\n  iconClass: string,\n  onClick: (e: MouseEvent) => void,\n  text: LangPackKey,\n  textArgs: FormatterArguments,\n  noRipple: boolean,\n  rippleSquare: boolean,\n  onlyMobile: boolean\n  tabIndex: number,\n}> = {}): JSX.Element => {\n  return (\n    <RippleElement\n      ref={props.ref as Ref<any>}\n      component={props.as || 'button'}\n      class={classNames(\n        props.class,\n        props.onlyMobile && 'only-handhelds'\n      )}\n      disabled={props.disabled}\n      onClick={props.onClick}\n      noRipple={props.noRipple}\n      rippleSquare={props.rippleSquare}\n      tabIndex={props.tabIndex}\n    >\n      {props.icon && <IconTsx icon={props.icon} class={classNames('button-icon', props.iconClass)} />}\n      {props.text ? i18n(props.text, props.textArgs) : props.children}\n      {props.iconAfter && <IconTsx icon={props.iconAfter} class={classNames('button-icon', props.iconClass)} />}\n    </RippleElement>\n  );\n};\n\nButton.Corner = (props: Partial<{\n  ref: Ref<HTMLElement>,\n  children: JSX.Element,\n  onClick: (e: MouseEvent) => void,\n  class: string\n}>) => {\n  return (\n    <Button {...props} class={classNames('btn-circle', 'btn-corner', 'z-depth-1', props.class)} tabIndex={-1} />\n  );\n};\n\nButton.Icon = (props: {icon: Icon} & Partial<{\n  ref: Ref<HTMLElement>,\n  children: JSX.Element,\n  onClick: (e: MouseEvent) => void,\n  class: string\n}>) => {\n  return (\n    <Button {...props} class={classNames('btn-icon', props.icon, props.class)} tabIndex={-1} />\n  )\n};\n\nexport default Button;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {createContext, useContext, createSignal, onCleanup, JSX, Show, children, createRoot, Accessor, createEffect, untrack, on} from 'solid-js';\nimport {createStore} from 'solid-js/store';\nimport {Portal} from 'solid-js/web';\nimport classNames from '../../helpers/string/classNames';\nimport {IconTsx} from '../iconTsx';\nimport RippleElement from '../rippleElement';\nimport {FormatterArguments, i18n, LangPackKey} from '../../lib/langPack';\nimport {AppManagers} from '../../lib/appManagers/managers';\nimport overlayCounter from '../../helpers/overlayCounter';\nimport {getMiddleware, MiddlewareHelper} from '../../helpers/middleware';\nimport findUpClassName from '../../helpers/dom/findUpClassName';\nimport blurActiveElement from '../../helpers/dom/blurActiveElement';\nimport animationIntersector from '../animationIntersector';\nimport appNavigationController, {NavigationItem} from '../appNavigationController';\nimport {addFullScreenListener, getFullScreenElement} from '../../helpers/dom/fullScreen';\nimport indexOfAndSplice from '../../helpers/array/indexOfAndSplice';\nimport MarkupTooltip from '../chat/markupTooltip';\nimport Button from '../buttonTsx';\n\nexport type PopupButton = {\n  text?: HTMLElement | DocumentFragment | Text,\n  callback?: (e: MouseEvent) => void | MaybePromise<boolean>,\n  langKey?: LangPackKey,\n  langArgs?: any[],\n  isDanger?: boolean,\n  isCancel?: boolean,\n  element?: HTMLButtonElement,\n  noRipple?: boolean,\n  iconLeft?: Icon,\n  iconRight?: Icon\n};\n\nexport type PopupOptions = Partial<{\n  closable: boolean,\n  onBackClick: () => void | false,\n  onClose: () => void,\n  onCloseAfterTimeout: () => void,\n  isConfirmationNeededOnClose: () => void | boolean | Promise<any>,\n  // overlayClosable: boolean,\n  withConfirm: LangPackKey | boolean,\n  body: boolean,\n  footer: boolean,\n  confirmShortcutIsSendShortcut: boolean,\n  withoutOverlay: boolean,\n  scrollable: boolean,\n  buttons: Array<PopupButton>,\n  title: boolean | LangPackKey | DocumentFragment | HTMLElement,\n  floatingHeader: boolean,\n  withFooterConfirm: boolean\n}>;\n\ntype PopupKind = 'header' | 'title' | 'body' | 'footer' | 'buttons' | 'closeButton' | 'confirmButton';\n\ntype PopupContextValue = {\n  register: (kind: PopupKind, element: JSX.Element) => JSX.Element,\n  registerButton: (props: PopupButton, element: JSX.Element) => JSX.Element,\n  store: {[key in PopupKind]?: JSX.Element},\n  buttons: PopupButton[],\n  shown: () => boolean,\n  show: () => void,\n  hide: () => void,\n  destroy: () => void,\n  destroyed: boolean,\n  managers: AppManagers,\n  middlewareHelper: MiddlewareHelper,\n  lateMiddlewareHelper: MiddlewareHelper,\n  navigationItem: NavigationItem | undefined,\n  // scrollable: Scrollable | undefined,\n  withoutOverlay: boolean,\n  night: boolean,\n  confirmShortcutIsSendShortcut: boolean,\n  // btnConfirmOnEnter: HTMLElement | undefined,\n  isConfirmationNeededOnClose: PopupOptions['isConfirmationNeededOnClose'],\n  closable: boolean,\n  withConfirm: LangPackKey | boolean,\n  body: boolean,\n  footer: boolean,\n  title: boolean | LangPackKey | DocumentFragment | HTMLElement,\n  element: HTMLElement | undefined\n};\n\ntype PopupControllerContextValue = {\n  dispose: () => void\n};\n\nconst PopupContext = createContext<PopupContextValue>();\nconst PopupControllerContext = createContext<PopupControllerContextValue>();\n\nconst DEFAULT_APPEND_TO = document.body;\nconst [appendPopupTo, setAppendPopupTo] = createSignal(DEFAULT_APPEND_TO);\n\nconst onFullScreenChange = () => {\n  setAppendPopupTo(getFullScreenElement() || DEFAULT_APPEND_TO);\n};\n\naddFullScreenListener(DEFAULT_APPEND_TO, onFullScreenChange);\n\nconst PopupElement = (props: {\n  class?: string,\n  containerClass?: string,\n  managers?: AppManagers,\n  children: JSX.Element,\n  show?: boolean\n} & PopupOptions) => {\n  const [shown, setShown] = createSignal(false);\n  const [store, setStore] = createStore<PopupContextValue['store']>({});\n  const [buttons, setButtons] = createStore<PopupButton[]>([]);\n  const [navigationItem, setNavigationItem] = createSignal<NavigationItem | undefined>();\n  const controllerContext = useContext(PopupControllerContext);\n\n  const managers = props.managers || PopupElement.MANAGERS;\n  const middlewareHelper = getMiddleware();\n  const lateMiddlewareHelper = getMiddleware();\n  const withoutOverlay = props.withoutOverlay || false;\n  const night = overlayCounter.isDarkOverlayActive;\n  const confirmShortcutIsSendShortcut = props.confirmShortcutIsSendShortcut || false;\n  const isConfirmationNeededOnClose = props.isConfirmationNeededOnClose;\n\n  const register = (kind: PopupKind, element: JSX.Element) => {\n    setStore(kind, element);\n    onCleanup(() => setStore(kind, undefined));\n    return element;\n  };\n\n  const registerButton = (props: PopupButton, element: JSX.Element) => {\n    setButtons([...buttons, props]);\n    onCleanup(() => setButtons(buttons.filter((b) => b !== props)));\n    return element;\n  };\n\n  const show = () => {\n    if(shown() || destroyed()) return;\n\n    setShown(true);\n    const navItem: NavigationItem = {\n      type: 'popup',\n      onPop: () => {\n        if(isConfirmationNeededOnClose) {\n          const result = isConfirmationNeededOnClose();\n          if(result) {\n            Promise.resolve(result).then(() => {\n              destroy();\n            });\n            return false;\n          }\n        }\n        return destroy();\n      }\n    };\n    setNavigationItem(navItem);\n    appNavigationController.pushItem(navItem);\n\n    blurActiveElement();\n\n    if(!withoutOverlay) {\n      overlayCounter.isOverlayActive = true;\n      animationIntersector.checkAnimations2(true);\n    }\n\n    // Add keyboard event listener\n    // setTimeout(() => {\n    //   const element = popupElement();\n    //   if(!element || !element.classList.contains('active')) return;\n\n    //   const handleKeydown = (e: KeyboardEvent) => {\n    //     const btnConfirm = btnConfirmOnEnter();\n    //     if(!btnConfirm ||\n    //        (btnConfirm as HTMLButtonElement).disabled ||\n    //        PopupElementTsx.POPUPS[PopupElementTsx.POPUPS.length - 1] !== value) {\n    //       return;\n    //     }\n\n    //     if(confirmShortcutIsSendShortcut ? isSendShortcutPressed(e) : e.key === 'Enter') {\n    //       simulateClickEvent(btnConfirm);\n    //       cancelEvent(e);\n    //     }\n    //   };\n\n    //   document.body.addEventListener('keydown', handleKeydown);\n    //   onCleanup(() => document.body.removeEventListener('keydown', handleKeydown));\n    // }, 0);\n  };\n\n  const hide = () => {\n    if(destroyed()) return;\n\n    const navItem = navigationItem();\n    if(!navItem) {\n      destroy();\n      return;\n    }\n\n    appNavigationController.backByItem(navItem);\n  };\n\n  const destroy = () => {\n    if(destroyed()) return;\n\n    props.onClose?.()\n\n    setHiding(true);\n    setDestroyed(true);\n    setShown(false);\n\n    setTimeout(() => {\n      setHiding(false);\n      middlewareHelper.destroy();\n      MarkupTooltip.getInstance().hide();\n\n      if(!withoutOverlay) {\n        overlayCounter.isOverlayActive = false;\n      }\n\n      const navItem = navigationItem();\n      if(navItem) {\n        appNavigationController.removeItem(navItem);\n        setNavigationItem(undefined);\n      }\n\n      indexOfAndSplice(PopupElement.POPUPS, value);\n\n      onFullScreenChange();\n\n      lateMiddlewareHelper.destroy();\n\n      if(!withoutOverlay) {\n        animationIntersector.checkAnimations2(false);\n      }\n\n      controllerContext.dispose();\n      props.onCloseAfterTimeout?.();\n    }, 250);\n  };\n\n  const [destroyed, setDestroyed] = createSignal(false);\n  const [hiding, setHiding] = createSignal(false);\n  const [popupElement, setPopupElement] = createSignal<HTMLElement>();\n\n  const value: PopupContextValue = {\n    register,\n    registerButton,\n    store,\n    buttons,\n    shown,\n    show,\n    hide,\n    destroy,\n    get destroyed() { return destroyed(); },\n    managers,\n    middlewareHelper,\n    lateMiddlewareHelper,\n    get navigationItem() { return navigationItem(); },\n    // get scrollable() { return scrollable(); },\n    withoutOverlay,\n    night,\n    confirmShortcutIsSendShortcut,\n    // get btnConfirmOnEnter() { return btnConfirmOnEnter(); },\n    isConfirmationNeededOnClose,\n    closable: props.closable || false,\n    withConfirm: props.withConfirm || false,\n    body: props.body || false,\n    footer: props.footer || false,\n    title: props.title || false,\n    get element() { return popupElement(); }\n  };\n\n  // Add to popups array\n  PopupElement.POPUPS.push(value);\n  onCleanup(() => {\n    indexOfAndSplice(PopupElement.POPUPS, value);\n  });\n\n  if(props.show !== undefined) {\n    createEffect(on(() => props.show, (_show) => {\n      if(_show) {\n        show();\n      } else if(shown()) {\n        hide();\n      }\n    }));\n  } else {\n    setTimeout(() => {\n      show();\n    }, 0);\n  }\n\n  return (\n    <PopupContext.Provider value={value}>\n      <Portal mount={appendPopupTo()}>\n        <div\n          ref={setPopupElement}\n          class={classNames(\n            'popup',\n            props.class,\n            night && 'night',\n            withoutOverlay && 'no-overlay',\n            shown() && 'active',\n            hiding() && 'hiding'\n          )}\n          onClick={/* store.closeButton &&  */((e) => {\n            if(findUpClassName(e.target, 'popup-container') || !(e.target as HTMLElement).isConnected) {\n              return;\n            }\n\n            if(props.closable === false) return\n\n            hide();\n          })}\n        >\n          <div class={classNames('popup-container z-depth-1', props.containerClass)}>\n            {props.children}\n          </div>\n        </div>\n      </Portal>\n    </PopupContext.Provider>\n  );\n};\n\n// Static properties\nPopupElement.POPUPS = [] as any[];\nPopupElement.MANAGERS = undefined as any;\n\nPopupElement.Header = (props: {\n  class?: string,\n  children?: JSX.Element\n}) => {\n  return useContext(PopupContext).register('header', (\n    <div class={classNames('popup-header', props.class)}>\n      {props.children}\n    </div>\n  ));\n};\n\nPopupElement.Title = (props: {\n  children?: JSX.Element,\n  title?: boolean | LangPackKey | DocumentFragment | HTMLElement\n}) => {\n  const context = useContext(PopupContext);\n  const titleContent = () => {\n    if(props.title) {\n      if(typeof(props.title) === 'string') {\n        return i18n(props.title);\n      } else if(typeof(props.title) !== 'boolean') {\n        return props.title;\n      }\n    }\n    return props.children;\n  };\n\n  return context.register('title', (\n    <Show when={titleContent()}>\n      <div class=\"popup-title\">\n        {titleContent()}\n      </div>\n    </Show>\n  ));\n};\n\nPopupElement.CloseButton = (props: {\n  canGoBack?: boolean,\n  onBackClick?: () => void | false\n  class?: string\n}) => {\n  const context = useContext(PopupContext);\n\n  const handleClick = () => {\n    if(props.canGoBack && props.onBackClick) {\n      props.onBackClick()\n    } else {\n      context.hide();\n    }\n  };\n\n  return context.register('closeButton', (\n    <button\n      class={classNames('btn-icon popup-close', props.class)}\n      onClick={handleClick}\n    >\n      <Show when={props.onBackClick} fallback={<IconTsx icon=\"close\" />}>\n        <div class={classNames('animated-close-icon', props.canGoBack && 'state-back')} />\n      </Show>\n    </button>\n  ));\n};\n\nPopupElement.ConfirmButton = (props: {\n  withConfirm?: LangPackKey | boolean\n}) => {\n  const context = useContext(PopupContext);\n\n  if(!context.withConfirm) return null;\n\n  return context.register('confirmButton', (\n    <button class=\"btn-primary btn-color-primary\">\n      <Show when={context.withConfirm !== true}>\n        {i18n(context.withConfirm as LangPackKey)}\n      </Show>\n    </button>\n  ));\n};\n\nPopupElement.Body = (props: {\n  children: JSX.Element,\n  class?: string,\n  scrollable?: boolean,\n  floatingHeader?: boolean\n}) => {\n  return useContext(PopupContext).register('body', (\n    <div class={classNames('popup-body', props.class)}>\n      {props.children}\n    </div>\n  ));\n};\n\nPopupElement.Footer = (props: {\n  children: JSX.Element,\n  class?: string\n}) => {\n  return useContext(PopupContext).register('footer', (\n    <div class={classNames('popup-footer popup-footer-abitlarger', props.class)}>\n      {props.children}\n    </div>\n  ));\n};\n\nPopupElement.FooterButton = (props: Parameters<typeof PopupElement.Button>[0] & {secondary?: boolean}) => {\n  return (\n    <PopupElement.Button\n      {...props}\n      noDefaultClass\n      class={classNames(\n        'popup-footer-button',\n        'btn-primary',\n        props.secondary ? 'btn-transparent primary text-bold' : 'btn-color-primary',\n        props.class\n      )}\n    />\n  );\n};\n\nPopupElement.Button = (props: {\n  children?: JSX.Element,\n  callback?: (e: MouseEvent) => void | MaybePromise<boolean>,\n  langKey?: LangPackKey,\n  langArgs?: FormatterArguments,\n  danger?: boolean,\n  cancel?: boolean,\n  noRipple?: boolean,\n  iconLeft?: Icon,\n  iconRight?: Icon,\n  class?: string,\n  noDefaultClass?: boolean,\n  disabled?: boolean\n}) => {\n  const context = useContext(PopupContext);\n\n  const [disabled, setDisabled] = createSignal(false);\n\n  const handleClick = async(e: MouseEvent) => {\n    if(context.destroyed) return;\n    let result = props.callback?.(e);\n    if(result !== undefined && result instanceof Promise) {\n      setDisabled(true);\n      try {\n        result = await result;\n      } catch(err) {\n        result = false;\n      }\n\n      if(result === false) {\n        setDisabled(false);\n      }\n    }\n\n    if(result === false) {\n      return;\n    }\n\n    context.hide();\n  };\n\n  return context.registerButton(props, (\n    <Button\n      class={classNames(\n        !props.noDefaultClass && 'popup-button btn',\n        props.noDefaultClass ? undefined : (props.danger ? 'danger' : 'primary'),\n        props.class\n      )}\n      noRipple={props.noRipple}\n      onClick={handleClick}\n      disabled={props.disabled || disabled()}\n      icon={props.iconLeft}\n      iconAfter={props.iconRight}\n      iconClass={classNames('popup-button-icon', props.iconLeft ? 'left' : 'right')}\n      text={props.langKey}\n      textArgs={props.langArgs}\n    >{props.children}</Button>\n  ));\n};\n\nPopupElement.Buttons = (props: {\n  children?: JSX.Element\n}) => {\n  const context = useContext(PopupContext);\n  return context.register('buttons', (\n    <div class=\"popup-buttons\">\n      {props.children}\n    </div>\n  ));\n};\n\nPopupElement.getPopups = <T extends any>(popupConstructor: any) => {\n  return PopupElement.POPUPS.filter((element) => element instanceof popupConstructor) as T[];\n};\n\nexport const addCancelButton = (buttons: PopupButton[]) => {\n  const button = buttons.find((b) => b.isCancel);\n  if(!button) {\n    buttons.push({\n      langKey: 'Cancel',\n      isCancel: true\n    });\n  }\n\n  return buttons;\n};\n\nexport function createPopup(callback: () => JSX.Element) {\n  createRoot((dispose) => {\n    <PopupControllerContext.Provider value={{dispose}}>\n      {untrack(callback)}\n    </PopupControllerContext.Provider>\n  });\n}\n\nexport default PopupElement;\n\n/*\nПример использования PopupElementTsx:\n\nimport PopupElementTsx from './indexTsx';\n\n// Простой попап с заголовком и кнопками (чистый JSX)\n<PopupElementTsx\n  class=\"my-popup\"\n  closable={true}\n  overlayClosable={true}\n  title=\"MyPopupTitle\"\n  body={true}\n>\n  <PopupElementTsx.CloseButton />\n  <PopupElementTsx.Title />\n  <PopupElementTsx.Body>\n    <div>Содержимое попапа</div>\n  </PopupElementTsx.Body>\n  <PopupElementTsx.Buttons>\n    <PopupElementTsx.Button\n      langKey=\"Cancel\"\n      isCancel={true}\n    />\n    <PopupElementTsx.Button\n      langKey=\"OK\"\n      callback={() => {\n        console.log('OK clicked');\n        return true; // закрыть попап\n      }}\n    />\n  </PopupElementTsx.Buttons>\n</PopupElementTsx>\n\n// Теперь весь попап полностью реактивный без ручных DOM манипуляций!\n// - JSX с Portal для монтирования\n// - Сигналы для всех состояний (shown, hiding, disabled, backState)\n// - Реактивные классы вместо classList манипуляций\n// - Автоматическое переключение fullscreen через appendPopupTo сигнал\n// - Никаких createElement, dispatchEvent, classList.add/remove\n*/\n","import {createEffect, For, JSX, on, onMount, splitProps} from 'solid-js';\nimport TransitionSlider, {TransitionSliderOptions} from './transition';\nimport classNames from '../helpers/string/classNames';\n\nexport function TransitionSliderTsx(props: Omit<TransitionSliderOptions, 'content'> & {\n  children: JSX.Element[]\n  currentPage: number\n  class?: string\n  tabClass?: string\n}) {\n  const [, rest] = splitProps(props, ['children', 'currentPage', 'class', 'tabClass']);\n\n  let ref!: HTMLDivElement;\n  onMount(() => {\n    const transitionTo = TransitionSlider({\n      ...rest,\n      content: ref\n    });\n\n    createEffect(on(() => props.currentPage, (currentPage) => transitionTo(currentPage)));\n  })\n\n  return (\n    <div class={classNames('tabs-container', props.class)} ref={ref}>\n      <For each={props.children}>\n        {(child) => (\n          <div class={classNames('tabs-tab', props.tabClass)}>\n            {child}\n          </div>\n        )}\n      </For>\n    </div>\n  )\n}\n","import {Component, createRenderEffect, mergeProps, onCleanup, onMount} from 'solid-js';\n\nimport type {LottieAssetName, LottieLoader} from '../lib/rlottie/lottieLoader';\nimport RLottiePlayer, {RLottieOptions} from '../lib/rlottie/rlottiePlayer';\n\nconst LottieAnimation: Component<{\n  lottieLoader: LottieLoader;\n  class?: string;\n  name: LottieAssetName;\n  size?: number;\n  needRaf?: boolean;\n  restartOnClick?: boolean;\n  rlottieOptions?: Partial<RLottieOptions>\n  onPromise?: (promise: Promise<RLottiePlayer>) => void;\n}> = (inProps) => {\n  const props = mergeProps({size: 100}, inProps);\n\n  let animationPromise: Promise<RLottiePlayer>;\n\n  const div = (\n    <div\n      classList={{\n        [props.class]: !!props.class\n      }}\n      style={{\n        '--size': props.size + 'px'\n      }}\n      onClick={() => {\n        if(!props.restartOnClick) return;\n        animationPromise?.then((animation) => {\n          animation.playOrRestart();\n        });\n      }}\n    />\n  ) as HTMLDivElement;\n\n  let cleanup = false\n  function loadAnimation() {\n    if(props.needRaf && !div.isConnected && !cleanup) {\n      requestAnimationFrame(loadAnimation);\n      return\n    }\n\n    animationPromise = props.lottieLoader.loadAnimationAsAsset(\n      {\n        container: div,\n        loop: false,\n        autoplay: true,\n        width: props.size,\n        height: props.size,\n        ...props.rlottieOptions\n      },\n      props.name\n    );\n    props.onPromise?.(animationPromise);\n  }\n\n  createRenderEffect(loadAnimation);\n\n  onCleanup(() => {\n    cleanup = true;\n    animationPromise?.then((animation) => {\n      animation.remove();\n    });\n  });\n\n\n  return div;\n}\n\nexport default LottieAnimation;\n","import {createEffect, on, onCleanup} from 'solid-js';\n\nexport function attachClassName(element: HTMLElement, accessor: () => string) {\n  createEffect(on(accessor, (value, prev) => {\n    if(prev) {\n      element.classList.remove(...prev.split(' '));\n    }\n    if(value) {\n      element.classList.add(...value.split(' '));\n    }\n  }));\n}\n\nexport function attachHotClassName(element: HTMLElement, ...className: string[]) {\n  element.classList.add(...className);\n  if(import.meta.hot) onCleanup(() => void element.classList.remove(...className));\n}\n","import {Accessor, createEffect, createMemo, JSX, on} from 'solid-js';\nimport I18n, {FormatterArgument, FormatterArguments, LangPackKey} from '../../lib/langPack';\nimport {attachClassName} from './classname';\nimport {resolveElements} from '@solid-primitives/refs';\n\nexport function I18nTsx(props: {\n  key: LangPackKey,\n  class?: string,\n  args?: JSX.Element | (JSX.Element | FormatterArgument)[],\n}) {\n  const argsEls = resolveElements(() => props.args, it => it instanceof Node || typeof it === 'string');\n  const args: Accessor<FormatterArguments> = () => argsEls.toArray()\n\n  const el = new I18n.IntlElement({\n    key: props.key,\n    args: args()\n  })\n\n  attachClassName(el.element, () => props.class);\n\n  createEffect(on(() => [props.key, args()] as const, ([key, args], _prev) => {\n    el.update({key, args});\n  }, {defer: true}))\n\n  return el.element;\n}\n","import type {ListTransitionOptions} from '@solid-primitives/transition-group';\nimport {Modify} from '../../types';\nimport {createSignal, useTransition, $TRACK, createMemo, Accessor, untrack} from 'solid-js';\nimport {isServer} from 'solid-js/web';\nimport noop from '../noop';\n\nexport function createListTransition<T extends object>(\n  source: Accessor<readonly T[]>,\n  options: Modify<ListTransitionOptions<T>, {exitMethod?: ListTransitionOptions<T>['exitMethod'] | 'keep-relative'}>\n): Accessor<T[]> {\n  const initSource = untrack(source);\n\n  if(isServer) {\n    const copy = initSource.slice();\n    return () => copy;\n  }\n\n  const {onChange} = options;\n\n  // if appear is enabled, the initial transition won't have any previous elements.\n  // otherwise the elements will match and transition skipped, or transitioned if the source is different from the initial value\n  let prevSet: ReadonlySet<T> = new Set(options.appear ? undefined : initSource);\n  const exiting = new WeakSet<T>();\n\n  const [toRemove, setToRemove] = createSignal<T[]>([], {equals: false});\n  const [isTransitionPending] = useTransition();\n\n  const finishRemoved: (els: T[]) => void =\n    options.exitMethod === 'remove' ?\n      noop :\n      (els) => {\n        setToRemove((p) => (p.push(...els), p));\n        for(const el of els) exiting.delete(el);\n      };\n\n  type RemovedOptions = {\n    elements: T[],\n    element: T,\n    previousElements: T[],\n    previousIndex: number,\n    side: 'start' | 'end'\n  };\n\n  let handleRemoved: (options: RemovedOptions) => void;\n  if(options.exitMethod === 'remove') {\n    handleRemoved = noop;\n  } else if(options.exitMethod === 'keep-index') {\n    handleRemoved = (options) => options.elements.splice(options.previousIndex, 0, options.element);\n  } else if(options.exitMethod === 'keep-relative') {\n    handleRemoved = (options) => {\n      let index: number;\n      if(options.side === 'start') {\n        index = options.previousIndex;\n      } else {\n        // index = options.elements.length - (options.previousElements.length - 1 - options.previousIndex);\n        index = options.elements.length;\n      }\n\n      options.elements.splice(index, 0, options.element);\n    };\n  } else {\n    handleRemoved = (options) => options.elements.push(options.element);\n  }\n\n  const compute = (prev: T[]) => {\n    const elsToRemove = toRemove();\n    const sourceList = source();\n    (sourceList as any)[$TRACK]; // top level store tracking\n\n    if(untrack(isTransitionPending)) {\n      // wait for pending transition to end before animating\n      isTransitionPending();\n      return prev;\n    }\n\n    if(elsToRemove.length) {\n      const next = prev.filter((e) => !elsToRemove.includes(e));\n      elsToRemove.length = 0;\n      onChange({list: next, added: [], removed: [], unchanged: next, finishRemoved});\n      return next;\n    }\n\n    return untrack(() => {\n      const nextSet: ReadonlySet<T> = new Set(sourceList);\n      const next: T[] = sourceList.slice();\n\n      const added: T[] = [];\n      const removed: T[] = [];\n      const unchanged: T[] = [];\n\n      for(const el of sourceList) {\n        (prevSet.has(el) ? unchanged : added).push(el);\n      }\n\n      const removedOptions: Modify<RemovedOptions, {element?: T, previousIndex?: number}> = {\n        elements: next,\n        previousElements: prev,\n        side: 'start'\n      };\n\n      let nothingChanged = !added.length;\n      for(let i = 0; i < prev.length; ++i) {\n        const el = prev[i]!;\n        if(!nextSet.has(el)) {\n          if(!exiting.has(el)) {\n            removed.push(el);\n            exiting.add(el);\n          }\n\n          removedOptions.element = el;\n          removedOptions.previousIndex = i;\n\n          handleRemoved(removedOptions as RemovedOptions);\n        } else {\n          removedOptions.side = 'end';\n        }\n\n        if(nothingChanged && el !== next[i]) {\n          nothingChanged = false;\n        }\n      }\n\n      // skip if nothing changed\n      if(!removed.length && nothingChanged) {\n        return prev;\n      }\n\n      onChange({list: next, added, removed, unchanged, finishRemoved});\n\n      prevSet = nextSet;\n      return next;\n    });\n  };\n\n  return createMemo(compute, options.appear ? [] : initSource.slice());\n}\n","import {JSX} from 'solid-js';\nimport {createListTransition} from './createListTransition';\nimport {resolveElements} from '@solid-primitives/refs';\nimport liteMode from '../liteMode';\n\nfunction wrapKeyframes(keyframes: Keyframe[] | ((element: Element, removed: boolean) => Keyframe[])) {\n  return typeof(keyframes) !== 'function' ? () => keyframes : keyframes;\n}\n\nexport function AnimationList(props: {\n  children: JSX.Element\n  animationOptions: KeyframeAnimationOptions,\n  keyframes: Keyframe[] | ((element: Element, removed: boolean) => Keyframe[]),\n  mode: 'replacement' | 'add-remove'/*  | 'add' */ | 'remove',\n  itemClassName?: string,\n  appear?: boolean\n}) {\n  const children = resolveElements(() => props.children).toArray;\n\n  const addClassName = props.itemClassName ? (added: Element[]) => {\n    added.forEach((element) => {\n      element.classList.add(props.itemClassName);\n    });\n  } : undefined;\n\n  addClassName?.(children());\n\n  const transitionList = createListTransition(children, {\n    exitMethod: 'keep-index',\n    appear: props.appear,\n    onChange: ({added, removed, finishRemoved}) => {\n      const options = props.animationOptions;\n      if(!liteMode.isAvailable('animations')) {\n        options.duration = 0;\n      }\n\n      addClassName?.(added);\n\n      const getKeyframes = wrapKeyframes(props.keyframes);\n      let shouldAnimateAdded = false, shouldAnimateRemoved = false;\n      if(props.mode === 'replacement') {\n        shouldAnimateAdded = !!removed.length;\n        shouldAnimateRemoved = !!added.length;\n      } else if(props.mode === 'remove') {\n        shouldAnimateRemoved = !!removed.length;\n      } else if(props.mode === 'add-remove') {\n        shouldAnimateAdded = !!added.length;\n        shouldAnimateRemoved = !!removed.length;\n      }\n\n      queueMicrotask(() => {\n        if(shouldAnimateAdded) {\n          const keyframes = added.map((element) => getKeyframes(element, false));\n          added.forEach((element, idx) => {\n            element.animate(keyframes[idx], options);\n          });\n        }\n\n        if(!shouldAnimateRemoved) {\n          finishRemoved(removed);\n          return;\n        }\n\n        const reversedKeyframes = removed.map((element) => getKeyframes(element, true).slice().reverse());\n        const promises: Promise<any>[] = [];\n        removed.forEach((element, idx) => {\n          const animation = element.animate(reversedKeyframes[idx], options);\n          promises.push(animation.finished);\n        });\n\n        Promise.all(promises).then(() => finishRemoved(removed));\n      });\n    }\n  }) as unknown as JSX.Element;\n\n  return transitionList;\n}\n","import {JSX} from 'solid-js';\nimport {Dynamic} from 'solid-js/web';\nimport {AnimationList} from './animationList';\nimport {getTransition} from '../../config/transitions';\n\ntype AnimationType = 'cross-fade' | 'grow-width' | 'grow-height';\n\nconst growKeyframes = (property: 'width' | 'height', size: number): Keyframe[] => {\n  return [\n    {[property]: 0, opacity: 0},\n    // {width: clientWidth / 2 + 'px', opacity: .25},\n    {[property]: size + 'px', opacity: 1}\n  ];\n};\n\nconst ANIMATIONS: {[key in AnimationType]: Keyframe[] | ((element: Element) => Keyframe[])} = {\n  'cross-fade': [{opacity: 0}, {opacity: 1}],\n  'grow-width': (element) => growKeyframes('width', element.clientWidth),\n  'grow-height': (element) => growKeyframes('height', element.clientHeight)\n};\n\nexport function SimpleAnimation(props: Pick<\n  Parameters<typeof AnimationList>[0], 'children' | 'keyframes' | 'mode' | 'appear'\n> & {\n  noItemClass?: boolean\n}) {\n  return (\n    <AnimationList\n      animationOptions={{duration: 200, easing: getTransition('standard').easing}}\n      keyframes={props.keyframes}\n      mode={props.mode || 'replacement'}\n      itemClassName={!props.noItemClass && 'animated-item'}\n      appear={props.appear}\n    >\n      {props.children}\n    </AnimationList>\n  );\n}\n\n// const MAP = {\n//   'cross-fade': ReplacementAnimation\n// };\n\nexport default function Animated(props: {\n  children: JSX.Element,\n  type: AnimationType,\n  mode?: Parameters<typeof AnimationList>[0]['mode'],\n  appear?: boolean,\n  noItemClass?: boolean\n}) {\n  return (\n    <Dynamic\n      component={SimpleAnimation}\n      keyframes={ANIMATIONS[props.type]}\n      mode={props.mode}\n      appear={props.appear}\n      noItemClass={props.noItemClass}\n    >\n      {props.children}\n    </Dynamic>\n  );\n}\n","import PopupElement, {createPopup} from './indexTsx'\n\nimport {CodeInputField} from '../codeInputField';\nimport {TransitionSliderTsx} from '../transitionTsx';\nimport {createEffect, createSignal, onCleanup, onMount, Ref, Show} from 'solid-js';\n\nimport styles from './emailSetup.module.scss';\nimport LottieAnimation from '../lottieAnimation';\nimport lottieLoader from '../../lib/rlottie/lottieLoader';\nimport {I18nTsx} from '../../helpers/solid/i18n';\nimport {InputFieldTsx} from '../inputFieldTsx';\nimport {LangPackKey} from '../../lib/langPack';\nimport ButtonTsx from '../buttonTsx';\nimport classNames from '../../helpers/string/classNames';\nimport {AccountSentEmailCode, EmailVerifyPurpose, MessageEntity} from '../../layer';\nimport appNavigationController, {NavigationItem} from '../appNavigationController';\nimport InputField, {InputState} from '../inputField';\nimport {doubleRaf, fastRaf} from '../../helpers/schedulers';\nimport Animated from '../../helpers/solid/animations';\nimport rootScope from '../../lib/rootScope';\nimport {subscribeOn} from '../../helpers/solid/subscribeOn';\nimport wrapRichText from '../../lib/richTextProcessor/wrapRichText';\n\nexport function wrapEmailPattern(pattern: string) {\n  if(pattern.includes(' ') || !pattern.includes('*')) return pattern\n\n  const entities: MessageEntity[] = []\n  for(let i = 0; i < pattern.length;) {\n    const idx = pattern.indexOf('*', i)\n    if(idx === -1) break\n    let endIdx = idx + 1\n    while(pattern[endIdx] === '*') endIdx++\n\n    entities.push({\n      _: 'messageEntitySpoiler',\n      offset: idx,\n      length: endIdx - idx\n    })\n\n    i = endIdx\n  }\n\n  return wrapRichText(pattern, {entities, noTextFormat: true})\n}\n\nexport function EnterEmailStep(props: {\n  isInitialSetup?: boolean\n  footerClass?: string\n  purpose: EmailVerifyPurpose\n  onCodeSent: (code: AccountSentEmailCode.accountSentEmailCode) => void\n}) {\n  const [error, setError] = createSignal<LangPackKey | undefined>(undefined);\n  const [email, setEmail] = createSignal<string>('');\n  const [loading, setLoading] = createSignal(false);\n\n  let inputRef!: InputField;\n\n  function onSubmit() {\n    if(!email().includes('@')) {\n      inputRef.setError()\n      return;\n    }\n\n    setLoading(true);\n    rootScope.managers.apiManager.invokeApi('account.sendVerifyEmailCode', {\n      purpose: props.purpose,\n      email: email()\n    }).then(() => {\n      setLoading(false);\n      props.onCodeSent({\n        _: 'account.sentEmailCode',\n        email_pattern: email(),\n        length: 6\n      })\n    }).catch((err: ApiError) => {\n      if(err.type === 'EMAIL_INVALID') {\n        setError('EmailSetup.InvalidEmail')\n      } else if(err.type === 'EMAIL_NOT_ALLOWED') {\n        setError('EmailSetup.BadEmail')\n      } else {\n        console.error(err);\n        setError('Error.AnError')\n      }\n\n      // avoid flashing while transitioning to error state\n      setTimeout(() => {\n        setLoading(false);\n      }, 200);\n    });\n  }\n\n  onMount(() => {\n    doubleRaf().then(() => {\n      inputRef.input.focus();\n    })\n\n    subscribeOn(inputRef.input)('keydown', (e) => {\n      if(e.key === 'Enter') {\n        e.preventDefault();\n        onSubmit();\n      }\n    });\n  })\n\n  return (\n    <div class={styles.page}>\n      <LottieAnimation\n        class={styles.lottie}\n        lottieLoader={lottieLoader}\n        name=\"Mailbox\"\n        size={120}\n        restartOnClick\n        rlottieOptions={{\n          loop: false,\n          autoplay: true\n        }}\n      />\n\n      <I18nTsx class={styles.title} key={props.isInitialSetup ? 'EmailSetup.Title' : 'EmailSetup.ChangeTitle'} />\n      <I18nTsx class={styles.subtitle} key={props.isInitialSetup ? 'EmailSetup.Subtitle' : 'EmailSetup.ChangeSubtitle'} />\n\n      <InputFieldTsx\n        instanceRef={ref => inputRef = ref}\n        class={styles.input}\n        label=\"EmailSetup.InputCaption\"\n        disabled={loading()}\n        value={email()}\n        errorLabel={error() ? null : undefined}\n        onRawInput={(val) => {\n          setEmail(val);\n          setError(undefined);\n          inputRef.setState(InputState.Neutral);\n        }}\n      />\n\n      <div class={classNames(styles.footer, props.footerClass)}>\n        <Animated type=\"cross-fade\">\n          <Show\n            when={!error()}\n            fallback={(\n              <div class={styles.error}>\n                <I18nTsx key={error()} />\n              </div>\n            )}\n          >\n            <div class={styles.buttonContainer}>\n              <ButtonTsx\n                class={classNames(styles.button, 'btn-primary btn-color-primary')}\n                text=\"Continue\"\n                disabled={loading()}\n                onClick={onSubmit}\n              />\n            </div>\n          </Show>\n        </Animated>\n      </div>\n    </div>\n  )\n}\n\nexport function EnterCodeStep(props: {\n  footerClass?: string\n  visible?: boolean\n  purpose: EmailVerifyPurpose\n  sentCode: AccountSentEmailCode.accountSentEmailCode\n  onSuccess: () => void\n  onExpired: () => void\n}) {\n  const [error, setError] = createSignal<LangPackKey | undefined>(undefined);\n  const [loading, setLoading] = createSignal(false);\n  const codeSignal = createSignal<string>('');\n\n  let inputRef!: HTMLInputElement;\n\n  createEffect(() => {\n    if(props.visible !== false) {\n      doubleRaf().then(() => {\n        inputRef.focus();\n      })\n    }\n  })\n\n  function onSubmit() {\n    setLoading(true);\n    rootScope.managers.apiManager.invokeApi('account.verifyEmail', {\n      purpose: props.purpose,\n      verification: {\n        _: 'emailVerificationCode',\n        code: codeSignal[0]()\n      }\n    }).then(() => {\n      setLoading(false);\n      props.onSuccess();\n    }).catch((err: ApiError) => {\n      if(err.type === 'EMAIL_VERIFY_EXPIRED') {\n        setLoading(false);\n        return props.onExpired();\n      }\n\n      if(err.type === 'CODE_INVALID') {\n        setError('EmailSetup.WrongCode');\n      } else {\n        console.error(err);\n        setError('Error.AnError');\n      }\n\n      codeSignal[1]('');\n\n      // avoid flashing while transitioning to error state\n      setTimeout(() => {\n        setLoading(false);\n        fastRaf(() => inputRef.focus());\n      }, 200);\n    });\n  }\n\n  return (\n    <div class={styles.page}>\n      <LottieAnimation\n        class={styles.lottie}\n        lottieLoader={lottieLoader}\n        name=\"LoveLetter\"\n        size={120}\n        restartOnClick\n        rlottieOptions={{\n          loop: false,\n          autoplay: true\n        }}\n      />\n\n      <I18nTsx class={styles.title} key=\"EmailSetup.CheckEmail\" />\n      <I18nTsx\n        class={styles.subtitle}\n        key=\"EmailSetup.CheckEmailSubtitle\"\n        args={[wrapEmailPattern(props.sentCode.email_pattern)]}\n      />\n\n      <CodeInputField\n        ref={inputRef}\n        valueSignal={codeSignal}\n        class={styles.input}\n        length={props.sentCode.length}\n        disabled={loading()}\n        onFill={onSubmit}\n        error={error() != null}\n        onChange={() => setError(undefined)}\n      />\n\n      <div class={classNames(styles.footer, props.footerClass)}>\n        <Animated type=\"cross-fade\">\n          <Show\n            when={!error()}\n            fallback={(\n              <div class={styles.error}>\n                <I18nTsx key={error()} />\n              </div>\n            )}\n          >\n            <div class={styles.buttonContainer}>\n              <ButtonTsx\n                class={classNames(styles.button, 'btn-primary btn-color-primary')}\n                text=\"Continue\"\n                disabled={loading() || codeSignal[0]().length !== props.sentCode.length}\n                onClick={onSubmit}\n              />\n            </div>\n          </Show>\n        </Animated>\n      </div>\n    </div>\n  )\n}\n\nlet isCurrentlyShowing = false;\nexport function showEmailSetupPopup(options: {\n  purpose: EmailVerifyPurpose\n  noskip: boolean\n  onSuccess?: () => void\n  onDismiss?: () => void\n}) {\n  if(isCurrentlyShowing) {\n    return;\n  }\n  isCurrentlyShowing = true;\n\n  const [show, setShow] = createSignal(false);\n  const [page, setPage] = createSignal(0);\n  const [code, setCode] = createSignal<AccountSentEmailCode.accountSentEmailCode | undefined>(undefined);\n  const [codePageTransitionEnded, setCodePageTransitionEnded] = createSignal(false);\n\n  return createPopup(() => {\n    const secondPageNavigationItem: NavigationItem = {\n      type: 'left',\n      onPop: () => void setPage(0)\n    }\n\n    onCleanup(() => {\n      isCurrentlyShowing = false;\n      appNavigationController.removeItem(secondPageNavigationItem);\n    });\n\n    doubleRaf().then(() => setShow(true));\n\n    let isSuccess = false\n\n    return (\n      <PopupElement\n        class={styles.popup}\n        containerClass={styles.popupContainer}\n        show={show()}\n        closable={!options.noskip}\n        onClose={() => {\n          isCurrentlyShowing = false;\n          if(!isSuccess) options.onDismiss?.()\n        }}\n        isConfirmationNeededOnClose={() => {\n          if(options.noskip && !isSuccess) return Promise.reject()\n        }}\n      >\n        <PopupElement.Header class={styles.popupHeader}>\n          <Show when={!options.noskip || page() === 1}>\n            <PopupElement.CloseButton\n              class={styles.popupCloseButton}\n              canGoBack={page() !== 0}\n              onBackClick={() => void setPage(0)}\n            />\n          </Show>\n        </PopupElement.Header>\n        <PopupElement.Body>\n          <TransitionSliderTsx\n            class={styles.slider}\n            type=\"navigation\"\n            transitionTime={150}\n            animateFirst={false}\n            currentPage={page()}\n            onTransitionStart={(id) => {\n              setCodePageTransitionEnded(false);\n              if(id === 0) {\n                appNavigationController.removeItem(secondPageNavigationItem);\n              } else {\n                appNavigationController.pushItem(secondPageNavigationItem);\n              }\n            }}\n            onTransitionEnd={(id) => {\n              if(id === 1) {\n                setCodePageTransitionEnded(true);\n              }\n            }}\n          >\n            <EnterEmailStep\n              isInitialSetup={true}\n              purpose={options.purpose}\n              onCodeSent={code => {\n                setCode(code);\n                setPage(1);\n              }}\n            />\n            <Show when={code()}>\n              <EnterCodeStep\n                purpose={options.purpose}\n                sentCode={code()!}\n                visible={page() === 1 && codePageTransitionEnded()}\n                onExpired={() => {\n                  setPage(0);\n                  setCode(undefined);\n                }}\n                onSuccess={() => {\n                  isSuccess = true\n                  options.onSuccess?.();\n                  setShow(false);\n                }}\n              />\n            </Show>\n          </TransitionSliderTsx>\n        </PopupElement.Body>\n      </PopupElement>\n    );\n  })\n}\n"],"names":["subscribeOn","obj","event","callback","options","onCleanup","CodeInputFieldCompat","constructor","errorSignal","createSignal","disabledSignal","valueSignal","container","createRoot","dispose","_self$","el","_$createComponent","CodeInputField","_$mergeProps","ref","r$","_ref$","input","error","disabled","children","value","cleanup","props","setValue","activeIndexStart","setActiveIndexStart","activeIndexEnd","setActiveIndexEnd","isInserting","setIsInserting","isFocused","isShiftKeyDown","previousSelection","inserting","start","end","syncSelection","originalStart","originalEnd","onSelectionChange","inputType","document","activeElement","inputRef","selectionStart","selectionEnd","maxLength","length","direction","startOffset","endOffset","navigatedBackwards","Math","abs","undefined","setSelectionRange","_el$","_tmpl$","_el$2","firstChild","$$input","e","rawValue","finalValue","oldValue","selectionSize","replace","slice","hasInvalidChars","test","preventDefault","currentTarget","onChange","onFill","$$keyup","key","$$keydown","addEventListener","_$use","_$setAttribute","_$insert","Index","each","Array","from","_","idx","_el$3","_tmpl$2","Transition","Show","when","_el$4","_$effect","_$className","styles","digitContent","_c$","_$memo","_el$5","caret","classNames","digit","active","_p$","_v$","wrap","class","_v$2","_v$3","_$delegateEvents","RippleElement","rest","splitProps","rippleElement","setRippleElement","Dynamic","createRenderEffect","noRipple","ret","ripple","element","rippleSquare","Object","entries","classList","map","Button","component","as","onlyMobile","onClick","tabIndex","icon","IconTsx","iconClass","text","i18n","textArgs","iconAfter","Corner","Icon","PopupContext","createContext","PopupControllerContext","DEFAULT_APPEND_TO","body","appendPopupTo","setAppendPopupTo","onFullScreenChange","getFullScreenElement","addFullScreenListener","PopupElement","shown","setShown","store","setStore","createStore","buttons","setButtons","navigationItem","setNavigationItem","controllerContext","useContext","managers","MANAGERS","middlewareHelper","getMiddleware","lateMiddlewareHelper","withoutOverlay","night","overlayCounter","isDarkOverlayActive","confirmShortcutIsSendShortcut","isConfirmationNeededOnClose","register","kind","registerButton","filter","b","show","destroyed","navItem","type","onPop","result","Promise","resolve","then","destroy","appNavigationController","pushItem","blurActiveElement","isOverlayActive","animationIntersector","checkAnimations2","hide","backByItem","onClose","setHiding","setDestroyed","setTimeout","MarkupTooltip","getInstance","removeItem","indexOfAndSplice","POPUPS","onCloseAfterTimeout","hiding","popupElement","setPopupElement","closable","withConfirm","footer","title","push","createEffect","on","_show","Provider","Portal","mount","$$click","findUpClassName","target","isConnected","containerClass","Header","Title","context","titleContent","_tmpl$3","CloseButton","handleClick","canGoBack","onBackClick","_tmpl$4","fallback","_el$6","ConfirmButton","_el$7","_tmpl$5","Body","_el$8","Footer","_el$9","FooterButton","noDefaultClass","secondary","setDisabled","danger","iconLeft","iconRight","langKey","langArgs","Buttons","_el$10","_tmpl$6","getPopups","popupConstructor","createPopup","untrack","TransitionSliderTsx","onMount","transitionTo","TransitionSlider","content","currentPage","For","child","tabClass","LottieAnimation","inProps","mergeProps","size","animationPromise","div","restartOnClick","animation","playOrRestart","_$classList","style","setProperty","removeProperty","loadAnimation","needRaf","requestAnimationFrame","lottieLoader","loadAnimationAsAsset","loop","autoplay","width","height","rlottieOptions","name","onPromise","remove","attachClassName","accessor","prev","split","add","attachHotClassName","className","I18nTsx","argsEls","resolveElements","args","it","Node","toArray","I18n","IntlElement","_prev","update","defer","createListTransition","source","initSource","prevSet","exiting","toRemove","setToRemove","isTransitionPending","useTransition","finishRemoved","noop","els","p","handleRemoved","index","createMemo","elsToRemove","sourceList","$TRACK","next","nextSet","added","removed","unchanged","removedOptions","nothingChanged","i","wrapKeyframes","keyframes","AnimationList","addClassName","liteMode","getKeyframes","shouldAnimateAdded","shouldAnimateRemoved","reversedKeyframes","promises","growKeyframes","property","opacity","ANIMATIONS","clientWidth","clientHeight","SimpleAnimation","animationOptions","duration","easing","getTransition","mode","itemClassName","noItemClass","appear","Animated","wrapEmailPattern","pattern","includes","entities","indexOf","endIdx","offset","wrapRichText","noTextFormat","EnterEmailStep","setError","email","setEmail","loading","setLoading","onSubmit","rootScope","apiManager","invokeApi","purpose","onCodeSent","email_pattern","catch","err","console","doubleRaf","focus","lottie","isInitialSetup","subtitle","InputFieldTsx","instanceRef","label","errorLabel","onRawInput","val","setState","InputState","Neutral","ButtonTsx","button","buttonContainer","page","footerClass","EnterCodeStep","codeSignal","visible","verification","code","onSuccess","onExpired","fastRaf","sentCode","_v$4","isCurrentlyShowing","showEmailSetupPopup","setShow","setPage","setCode","codePageTransitionEnded","setCodePageTransitionEnded","secondPageNavigationItem","isSuccess","popup","popupContainer","noskip","onDismiss","reject","popupHeader","popupCloseButton","slider","transitionTime","animateFirst","onTransitionStart","id","onTransitionEnd"],"mappings":"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"}