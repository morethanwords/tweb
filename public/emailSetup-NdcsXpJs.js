import{a6 as q,a9 as ne,c as y,aR as ve,b as l,a4 as U,d8 as Me,a7 as re,bf as Ne,i as b,a2 as j,a5 as w,ab as M,dm as Fe,t as L,a as x,bS as pe,e2 as be,E as De,aQ as Ce,k as ie,cq as je,cr as qe,aV as Q,cE as ye,aS as ue,cF as N,an as Z,b9 as de,ah as K,aj as Y,ad as ze,bi as He,bm as fe,bE as H,e as Ve,bP as ge,eA as Ue,aa as Se,bU as Ke,a8 as Ge,q as We,aB as me,fQ as Qe,fR as Xe,V as Ye,eF as Je,aM as Ze,T as ae,n as Ee,bI as et,dh as tt,d as $e,f as nt}from"./index-BVX-iRp_.js";import{c as E}from"./classNames-CN4lTu6a.js";import{I as te}from"./iconTsx-BtEg9wOQ.js";import{T as rt,r as ke}from"./transition-B7SXBnPO.js";import{T as it}from"./page-Bdc-Pcm-.js";const at="_wrap_87tyg_1",st="_input_87tyg_11",lt="_disabled_87tyg_29",ot="_digit_87tyg_33",ct="_active_87tyg_48",ut="_error_87tyg_52",dt="_digitContent_87tyg_59",ft="_caret_87tyg_86",D={wrap:at,input:st,disabled:lt,digit:ot,active:ct,error:ut,digitContent:dt,caret:ft,"caret-blink":"_caret-blink_87tyg_1"};function Ie(e){return(t,r,n)=>{e.addEventListener(t,r,n),q(()=>{e.removeEventListener(t,r,n)})}}const gt=L("<div><input inputmode=numeric autocomplete=one-time-code required pattern=^d*$>"),ee=L("<div>");class en{constructor(t){this.options=t,this.errorSignal=y(!1),this.disabledSignal=y(!1),this.valueSignal=y(""),this.container=ve(r=>{const n=this;this.dispose=r;const i=l(we,U(t,{ref(s){const o=n.input;typeof o=="function"?o(s):n.input=s},get error(){return n.errorSignal[0]()},get disabled(){return n.disabledSignal[0]()},get valueSignal(){return n.valueSignal}}));return Me(()=>i)()})}set error(t){this.errorSignal[1](t)}set disabled(t){this.disabledSignal[1](t)}set value(t){this.valueSignal[1](t)}get value(){return this.valueSignal[0]()}cleanup(){this.dispose()}}function we(e){const[t,r]=e.valueSignal??y(""),[n,i]=y(-1),[s,o]=y(-1),[h,v]=y(!1);let u=!1,c=!1;const a={inserting:!1,start:null,end:null},f=S=>{a.inserting=S.inserting,a.start=S.originalStart,a.end=S.originalEnd;const p=S.start,g=S.end;if(p===null||g===null){i(-1),o(-1);return}i(p),o(g)},_=S=>{if(!u||document.activeElement!==d||d.selectionStart===null||d.selectionEnd===null){f({start:null,end:null,inserting:!1,originalStart:d.selectionStart,originalEnd:d.selectionEnd}),v(!1);return}const p=e.length,g=d.value.length<p&&d.selectionStart===d.value.length;if(v(g),g||d.selectionStart!==d.selectionEnd){f({start:d.selectionStart,end:g?d.selectionEnd+1:d.selectionEnd,inserting:g,originalStart:d.selectionStart,originalEnd:d.selectionEnd});return}let $=0,m=0,C;if(d.selectionStart===0)$=0,m=1,C="forward";else if(d.selectionStart===p)$=p-1,m=p,C="backward";else{let T=0,P=1;if(a.start!==null&&a.end!==null){const R=d.selectionStart<a.end&&Math.abs(a.start-a.end)===1;C=R?"backward":"forward",(R&&!a.inserting&&S!=="deleteContentForward"||!R&&c)&&(T+=-1)}c&&S===void 0&&(P+=1),$=d.selectionStart+T,m=d.selectionEnd+T+P}d.setSelectionRange($,m,C),f({start:$,end:m,inserting:g,originalStart:d.selectionStart,originalEnd:d.selectionEnd})};Ie(document)("selectionchange",()=>_());let d;return(()=>{const S=gt(),p=S.firstChild;return p.$$input=g=>{const $=d.value;let m=$;const C=t(),T=Math.abs((a.start??0)-(a.end??0));(a.inserting||T===C.length)&&(m=m.replace(/[^\d]/g,"")),m=m.slice(0,e.length);const P=!/^\d*$/.test(m);if($.length!==0&&m.length===0||m===C||P){g.preventDefault(),g.currentTarget.value=C,P&&g.currentTarget.setSelectionRange(a.start??0,a.end??0);return}m.length<C.length&&_(g.inputType),r(m),e.onChange?.(m),m.length===e.length&&e.onFill?.(m)},p.$$keyup=g=>{g.key==="Shift"&&(c=!1)},p.$$keydown=g=>{g.key==="Shift"&&(c=!0)},p.addEventListener("blur",()=>{u=!1,_()}),p.addEventListener("focus",()=>{d.setSelectionRange(t().length,t().length),u=!0,_()}),re(g=>{d=g,e.ref?.(g)},p),Ne(p,"spellcheck",!1),b(S,l(Fe,{get each(){return Array.from({length:e.length})},children:(g,$)=>(()=>{const m=ee();return b(m,l(rt,{get children(){return l(j,{get when(){return t()[$]},get children(){const C=ee();return b(C,()=>t()[$]),w(()=>x(C,D.digitContent)),C}})}}),null),b(m,(()=>{const C=M(()=>!!(h()&&t().length===$));return()=>C()&&(()=>{const T=ee();return w(()=>x(T,D.caret)),T})()})(),null),w(()=>x(m,E(D.digit,n()<=$&&$<s()&&D.active))),m})()}),null),w(g=>{const $=E(D.wrap,e.error&&D.error,e.disabled&&D.disabled,e.class),m=D.input,C=e.disabled;return $!==g._v$&&x(S,g._v$=$),m!==g._v$2&&x(p,g._v$2=m),C!==g._v$3&&(p.disabled=g._v$3=C),g},{_v$:void 0,_v$2:void 0,_v$3:void 0}),w(()=>p.value=t()),S})()}ne(["keydown","keyup","input"]);function mt(e){const[,t]=pe(e,["noRipple","rippleSquare"]),[r,n]=y();return l(be,U(t,{ref:i=>{w(()=>{if(!e.noRipple){const s=De(i,void 0,"no");n(s.element),q(()=>{s.dispose(),n()})}}),e.ref?.(i)},get class(){return E(e.class,!e.noRipple&&"rp",!e.noRipple&&e.rippleSquare&&"rp-square",...Object.entries(e.classList||{}).map(([i,s])=>s?i:void 0))},get children(){return[M(()=>r()),M(()=>e.children)]}}))}const z=(e={})=>{let t,r;return e.disabled!==void 0?t=Ce(()=>e.disabled):[t,r]=y(!1),l(mt,{ref(n){const i=e.ref;typeof i=="function"?i(n):e.ref=n},get component(){return e.as||"button"},get class(){return E(e.class,e.primaryFilled&&"btn-primary btn-color-primary",e.primary&&"btn btn-primary primary",e.primaryTransparent&&"btn-primary primary btn-transparent",e.large&&"btn-large",e.onlyMobile&&"only-handhelds")},get disabled(){return t()},get onClick(){return e.onClick&&r?n=>{try{const i=e.onClick(n);i instanceof Promise&&(r(!0),i.finally(()=>{r(!1)}))}catch(i){throw i}}:e.onClick},get noRipple(){return e.noRipple},get rippleSquare(){return e.rippleSquare},get tabIndex(){return e.tabIndex},get children(){return[M(()=>M(()=>!!e.icon)()&&l(te,{get icon(){return e.icon},get class(){return E("button-icon",e.iconClass)}})),M(()=>M(()=>!!e.text)()?ie(e.text,e.textArgs):e.children),M(()=>M(()=>!!e.iconAfter)()&&l(te,{get icon(){return e.iconAfter},get class(){return E("button-icon",e.iconClass)}}))]}})};z.Corner=e=>l(z,U(e,{get class(){return E("btn-circle","btn-corner","z-depth-1",e.class)},tabIndex:-1}));z.Icon=e=>l(z,U(e,{get class(){return E("btn-icon",e.icon,e.class)},tabIndex:-1}));const ht=L("<div><div>"),J=L("<div>"),_t=L("<div class=popup-title>"),vt=L("<button>"),pt=L('<button class="btn-primary btn-color-primary">'),bt=L("<div class=popup-buttons>"),F=ye(),xe=ye(),se=document.body,[Ct,yt]=y(se),Ae=()=>{yt(qe()||se)};je(se,Ae);const A=e=>{const[t,r]=y(!1),[n,i]=ue({}),[s,o]=ue([]),[h,v]=y(),u=N(xe),c=e.managers||A.MANAGERS,a=fe(),f=fe(),_=e.withoutOverlay||!1,d=Z.isDarkOverlayActive,S=e.confirmShortcutIsSendShortcut||!1,p=e.isConfirmationNeededOnClose,g=(I,O)=>(i(I,O),q(()=>i(I,void 0)),O),$=(I,O)=>(o([...s,I]),q(()=>o(s.filter(B=>B!==I))),O),m=()=>{if(t()||P())return;r(!0);const I={type:"popup",onPop:()=>{if(p){const O=p();if(O)return Promise.resolve(O).then(()=>{T()}),!1}return T()}};v(I),H.pushItem(I),Ve(),_||(Z.isOverlayActive=!0,ge.checkAnimations2(!0))},C=()=>{if(P())return;const I=h();if(!I){T();return}H.backByItem(I)},T=()=>{P()||(e.onClose?.(),le(!0),R(!0),r(!1),setTimeout(()=>{le(!1),a.destroy(),Ue.getInstance().hide(),_||(Z.isOverlayActive=!1);const I=h();I&&(H.removeItem(I),v(void 0)),de(A.POPUPS,G),Ae(),f.destroy(),_||ge.checkAnimations2(!1),u.dispose(),e.onCloseAfterTimeout?.()},250))},[P,R]=y(!1),[Le,le]=y(!1),[Oe,Be]=y(),G={register:g,registerButton:$,store:n,buttons:s,shown:t,show:m,hide:C,destroy:T,get destroyed(){return P()},managers:c,middlewareHelper:a,lateMiddlewareHelper:f,get navigationItem(){return h()},withoutOverlay:_,night:d,confirmShortcutIsSendShortcut:S,isConfirmationNeededOnClose:p,closable:e.closable||!1,withConfirm:e.withConfirm||!1,body:e.body||!1,footer:e.footer||!1,title:e.title||!1,get element(){return Oe()}};return A.POPUPS.push(G),q(()=>{de(A.POPUPS,G)}),e.show!==void 0?K(Y(()=>e.show,I=>{I?m():t()&&C()})):setTimeout(()=>{m()},0),l(F.Provider,{value:G,get children(){return l(ze,{get mount(){return Ct()},get children(){const I=ht(),O=I.firstChild;return I.$$click=B=>{He(B.target,"popup-container")||!B.target.isConnected||e.closable!==!1&&C()},re(Be,I),b(O,()=>e.children),w(B=>{const oe=E("popup",e.class,d&&"night",_&&"no-overlay",t()&&"active",Le()&&"hiding"),ce=E("popup-container z-depth-1",e.containerClass);return oe!==B._v$&&x(I,B._v$=oe),ce!==B._v$2&&x(O,B._v$2=ce),B},{_v$:void 0,_v$2:void 0}),I}})}})};A.POPUPS=[];A.MANAGERS=void 0;A.Header=e=>N(F).register("header",(()=>{const t=J();return b(t,()=>e.children),w(()=>x(t,E("popup-header",e.class))),t})());A.Title=e=>{const t=N(F),r=()=>{if(e.title){if(typeof e.title=="string")return ie(e.title);if(typeof e.title!="boolean")return e.title}return e.children};return t.register("title",l(j,{get when(){return r()},get children(){const n=_t();return b(n,r),n}}))};A.CloseButton=e=>{const t=N(F),r=()=>{e.canGoBack&&e.onBackClick?e.onBackClick():t.hide()};return t.register("closeButton",(()=>{const n=vt();return n.$$click=r,b(n,l(j,{get when(){return e.onBackClick},get fallback(){return l(te,{icon:"close"})},get children(){const i=J();return w(()=>x(i,E("animated-close-icon",e.canGoBack&&"state-back"))),i}})),w(()=>x(n,E("btn-icon popup-close",e.class))),n})())};A.ConfirmButton=e=>{const t=N(F);return t.withConfirm?t.register("confirmButton",(()=>{const r=pt();return b(r,l(j,{get when(){return t.withConfirm!==!0},get children(){return ie(t.withConfirm)}})),r})()):null};A.Body=e=>N(F).register("body",(()=>{const t=J();return b(t,()=>e.children),w(()=>x(t,E("popup-body",e.class))),t})());A.Footer=e=>N(F).register("footer",(()=>{const t=J();return b(t,()=>e.children),w(()=>x(t,E("popup-footer popup-footer-abitlarger",e.class))),t})());A.FooterButton=e=>l(A.Button,U(e,{noDefaultClass:!0,get class(){return E("popup-footer-button","btn-primary",e.secondary?"btn-transparent primary text-bold":"btn-color-primary",e.class)}}));A.Button=e=>{const t=N(F),[r,n]=y(!1),i=async s=>{if(t.destroyed)return;let o=e.callback?.(s);if(o!==void 0&&o instanceof Promise){n(!0);try{o=await o}catch(h){console.log("popup button error",h),o=!1}o===!1&&n(!1)}o!==!1&&t.hide()};return t.registerButton(e,l(z,{get class(){return E(!e.noDefaultClass&&"popup-button btn",e.noDefaultClass?void 0:e.danger?"danger":"primary",e.class)},get noRipple(){return e.noRipple},onClick:i,get disabled(){return e.disabled||r()},get icon(){return e.iconLeft},get iconAfter(){return e.iconRight},get iconClass(){return E("popup-button-icon",e.iconLeft?"left":"right")},get text(){return e.langKey},get textArgs(){return e.langArgs},get children(){return e.children}}))};A.Buttons=e=>N(F).register("buttons",(()=>{const r=bt();return b(r,()=>e.children),r})());A.getPopups=e=>A.POPUPS.filter(t=>t instanceof e);function St(e){ve(t=>{l(xe.Provider,{value:{dispose:t},get children(){return Q(e)}})})}ne(["click"]);const he=L("<div>");function Et(e){const[,t]=pe(e,["children","currentPage","class","tabClass"]);let r;return Se(()=>{const n=it({...t,content:r});K(Y(()=>e.currentPage,i=>n(i)))}),(()=>{const n=he(),i=r;return typeof i=="function"?re(i,n):r=n,b(n,l(Ke,{get each(){return e.children},children:s=>(()=>{const o=he();return b(o,s),w(()=>x(o,E("tabs-tab",e.tabClass))),o})()})),w(()=>x(n,E("tabs-container",e.class))),n})()}const $t="_popup_pjp0p_1",kt="_popupContainer_pjp0p_5",It="_popupHeader_pjp0p_10",wt="_popupCloseButton_pjp0p_16",xt="_popupFooter_pjp0p_20",At="_slider_pjp0p_24",Pt="_page_pjp0p_31",Tt="_lottie_pjp0p_42",Rt="_title_pjp0p_49",Lt="_subtitle_pjp0p_56",Ot="_input_pjp0p_66",Bt="_footer_pjp0p_75",Mt="_button_pjp0p_82",Nt="_buttonContainer_pjp0p_87",Ft="_error_pjp0p_92",k={popup:$t,popupContainer:kt,popupHeader:It,popupCloseButton:wt,popupFooter:xt,slider:At,page:Pt,lottie:Tt,title:Rt,subtitle:Lt,input:Ot,footer:Bt,button:Mt,buttonContainer:Nt,error:Ft},Dt=L("<div>"),Pe=e=>{const t=U({size:100},e);let r;const n=(()=>{const o=Dt();return o.$$click=()=>{t.restartOnClick&&r?.then(h=>{h.playOrRestart()})},w(h=>{const v={[t.class]:!!t.class},u=t.size+"px";return h._v$=Ge(o,v,h._v$),u!==h._v$2&&((h._v$2=u)!=null?o.style.setProperty("--size",u):o.style.removeProperty("--size")),h},{_v$:void 0,_v$2:void 0}),o})();let i=!1;function s(){if(t.needRaf&&!n.isConnected&&!i){requestAnimationFrame(s);return}r=t.lottieLoader.loadAnimationAsAsset({container:n,loop:!1,autoplay:!0,width:t.size,height:t.size,...t.rlottieOptions},t.name),t.onPromise?.(r)}return w(s),q(()=>{i=!0,r?.then(o=>{o.remove()})}),n};ne(["click"]);function jt(e,t){K(Y(t,(r,n)=>{n&&e.classList.remove(...n.split(" ")),r&&e.classList.add(...r.split(" "))}))}function tn(e,...t){e.classList.add(...t)}function V(e){const t=ke(()=>e.args,i=>i instanceof Node||typeof i=="string"),r=()=>t.toArray(),n=new We.IntlElement({key:e.key,args:r()});return jt(n.element,()=>e.class),K(Y(()=>[e.key,r()],([i,s],o)=>{n.update({key:i,args:s})},{defer:!0})),n.element}function qt(e,t){const r=Q(e),{onChange:n}=t;let i=new Set(t.appear?void 0:r);const s=new WeakSet,[o,h]=y([],{equals:!1}),[v]=Xe(),u=t.exitMethod==="remove"?me:f=>{h(_=>(_.push(...f),_));for(const _ of f)s.delete(_)};let c;return t.exitMethod==="remove"?c=me:t.exitMethod==="keep-index"?c=f=>f.elements.splice(f.previousIndex,0,f.element):t.exitMethod==="keep-relative"?c=f=>{let _;f.side==="start"?_=f.previousIndex:_=f.elements.length,f.elements.splice(_,0,f.element)}:c=f=>f.elements.push(f.element),Ce(f=>{const _=o(),d=e();if(d[Qe],Q(v))return v(),f;if(_.length){const S=f.filter(p=>!_.includes(p));return _.length=0,n({list:S,added:[],removed:[],unchanged:S,finishRemoved:u}),S}return Q(()=>{const S=new Set(d),p=d.slice(),g=[],$=[],m=[];for(const P of d)(i.has(P)?m:g).push(P);const C={elements:p,previousElements:f,side:"start"};let T=!g.length;for(let P=0;P<f.length;++P){const R=f[P];S.has(R)?C.side="end":(s.has(R)||($.push(R),s.add(R)),C.element=R,C.previousIndex=P,c(C)),T&&R!==p[P]&&(T=!1)}return!$.length&&T?f:(n({list:p,added:g,removed:$,unchanged:m,finishRemoved:u}),i=S,p)})},t.appear?[]:r.slice())}function zt(e){return typeof e!="function"?()=>e:e}function Ht(e){const t=ke(()=>e.children).toArray,r=e.itemClassName?i=>{i.forEach(s=>{s.classList.add(e.itemClassName)})}:void 0;return r?.(t()),qt(t,{exitMethod:"keep-index",appear:e.appear,onChange:({added:i,removed:s,finishRemoved:o})=>{const h=e.animationOptions;Ye.isAvailable("animations")||(h.duration=0),r?.(i);const v=zt(e.keyframes);let u=!1,c=!1;e.mode==="replacement"?(u=!!s.length,c=!!i.length):e.mode==="remove"?c=!!s.length:e.mode==="add-remove"&&(u=!!i.length,c=!!s.length),queueMicrotask(()=>{if(u){const _=i.map(d=>v(d,!1));i.forEach((d,S)=>{d.animate(_[S],h)})}if(!c){o(s);return}const a=s.map(_=>v(_,!0).slice().reverse()),f=[];s.forEach((_,d)=>{const S=_.animate(a[d],h);f.push(S.finished)}),Promise.all(f).then(()=>o(s))})}})}const _e=(e,t)=>[{[e]:0,opacity:0},{[e]:t+"px",opacity:1}],Vt={"cross-fade":[{opacity:0},{opacity:1}],"grow-width":e=>_e("width",e.clientWidth),"grow-height":e=>_e("height",e.clientHeight)};function Ut(e){return l(Ht,{get animationOptions(){return{duration:200,easing:Je("standard").easing}},get keyframes(){return e.keyframes},get mode(){return e.mode||"replacement"},get itemClassName(){return!e.noItemClass&&"animated-item"},get appear(){return e.appear},get children(){return e.children}})}function Te(e){return l(be,{component:Ut,get keyframes(){return Vt[e.type]},get mode(){return e.mode},get appear(){return e.appear},get noItemClass(){return e.noItemClass},get children(){return e.children}})}const X=L("<div>"),Re=L("<div><div>");function Kt(e){if(e.includes(" ")||!e.includes("*"))return e;const t=[];for(let r=0;r<e.length;){const n=e.indexOf("*",r);if(n===-1)break;let i=n+1;for(;e[i]==="*";)i++;t.push({_:"messageEntitySpoiler",offset:n,length:i-n}),r=i}return Ze(e,{entities:t,noTextFormat:!0})}function Gt(e){const[t,r]=y(void 0),[n,i]=y(""),[s,o]=y(!1);let h;function v(){if(!n().includes("@")){h.setError();return}o(!0),$e.managers.appAccountManager.sendVerifyEmailCode(e.purpose,n()).then(()=>{o(!1),e.onCodeSent({_:"account.sentEmailCode",email_pattern:n(),length:6})}).catch(u=>{u.type==="EMAIL_INVALID"?r("EmailSetup.InvalidEmail"):u.type==="EMAIL_NOT_ALLOWED"?r("EmailSetup.BadEmail"):(console.error(u),r("Error.AnError")),setTimeout(()=>{o(!1)},200)})}return Se(()=>{ae().then(()=>{h.input.focus()}),Ie(h.input)("keydown",u=>{u.key==="Enter"&&(u.preventDefault(),v())})}),(()=>{const u=Re(),c=u.firstChild;return b(u,l(Pe,{get class(){return k.lottie},lottieLoader:Ee,name:"Mailbox",size:120,restartOnClick:!0,rlottieOptions:{loop:!1,autoplay:!0}}),c),b(u,l(V,{get class(){return k.title},get key(){return e.isInitialSetup?"EmailSetup.Title":"EmailSetup.ChangeTitle"}}),c),b(u,l(V,{get class(){return k.subtitle},get key(){return e.isInitialSetup?"EmailSetup.Subtitle":"EmailSetup.ChangeSubtitle"}}),c),b(u,l(tt,{instanceRef:a=>h=a,get class(){return k.input},label:"EmailSetup.InputCaption",get disabled(){return s()},get value(){return n()},get errorLabel(){return t()?null:void 0},onRawInput:a=>{i(a),r(void 0),h.setState(et.Neutral)}}),c),b(c,l(Te,{type:"cross-fade",get children(){return l(j,{get when(){return!t()},get fallback(){return(()=>{const a=X();return b(a,l(V,{get key(){return t()}})),w(()=>x(a,k.error)),a})()},get children(){const a=X();return b(a,l(z,{get class(){return E(k.button,"btn-primary btn-color-primary")},text:"Continue",get disabled(){return s()},onClick:v})),w(()=>x(a,k.buttonContainer)),a}})}})),w(a=>{const f=k.page,_=E(k.footer,e.footerClass);return f!==a._v$&&x(u,a._v$=f),_!==a._v$2&&x(c,a._v$2=_),a},{_v$:void 0,_v$2:void 0}),u})()}function Wt(e){const[t,r]=y(void 0),[n,i]=y(!1),s=y("");let o;K(()=>{e.visible!==!1&&ae().then(()=>{o.focus()})});function h(){i(!0),$e.managers.appAccountManager.verifyEmail(e.purpose,{_:"emailVerificationCode",code:s[0]()}).then(()=>{i(!1),e.onSuccess()}).catch(v=>{if(v.type==="EMAIL_VERIFY_EXPIRED")return i(!1),e.onExpired();v.type==="CODE_INVALID"?r("EmailSetup.WrongCode"):(console.error(v),r("Error.AnError")),s[1](""),setTimeout(()=>{i(!1),nt(()=>o.focus())},200)})}return(()=>{const v=Re(),u=v.firstChild;return b(v,l(Pe,{get class(){return k.lottie},lottieLoader:Ee,name:"LoveLetter",size:120,restartOnClick:!0,rlottieOptions:{loop:!1,autoplay:!0}}),u),b(v,l(V,{get class(){return k.title},key:"EmailSetup.CheckEmail"}),u),b(v,l(V,{get class(){return k.subtitle},key:"EmailSetup.CheckEmailSubtitle",get args(){return[Kt(e.sentCode.email_pattern)]}}),u),b(v,l(we,{ref(c){const a=o;typeof a=="function"?a(c):o=c},valueSignal:s,get class(){return k.input},get length(){return e.sentCode.length},get disabled(){return n()},onFill:h,get error(){return t()!=null},onChange:()=>r(void 0)}),u),b(u,l(Te,{type:"cross-fade",get children(){return l(j,{get when(){return!t()},get fallback(){return(()=>{const c=X();return b(c,l(V,{get key(){return t()}})),w(()=>x(c,k.error)),c})()},get children(){const c=X();return b(c,l(z,{get class(){return E(k.button,"btn-primary btn-color-primary")},text:"Continue",get disabled(){return n()||s[0]().length!==e.sentCode.length},onClick:h})),w(()=>x(c,k.buttonContainer)),c}})}})),w(c=>{const a=k.page,f=E(k.footer,e.footerClass);return a!==c._v$3&&x(v,c._v$3=a),f!==c._v$4&&x(u,c._v$4=f),c},{_v$3:void 0,_v$4:void 0}),v})()}let W=!1;function nn(e){if(W)return;W=!0;const[t,r]=y(!1),[n,i]=y(0),[s,o]=y(void 0),[h,v]=y(!1);return St(()=>{const u={type:"left",onPop:()=>void i(0)};q(()=>{W=!1,H.removeItem(u)}),ae().then(()=>r(!0));let c=!1;return l(A,{get class(){return k.popup},get containerClass(){return k.popupContainer},get show(){return t()},get closable(){return!e.noskip},onClose:()=>{W=!1,c||e.onDismiss?.()},isConfirmationNeededOnClose:()=>{if(e.noskip&&!c)return Promise.reject()},get children(){return[l(A.Header,{get class(){return k.popupHeader},get children(){return l(j,{get when(){return!e.noskip||n()===1},get children(){return l(A.CloseButton,{get class(){return k.popupCloseButton},get canGoBack(){return n()!==0},onBackClick:()=>void i(0)})}})}}),l(A.Body,{get children(){return l(Et,{get class(){return k.slider},type:"navigation",transitionTime:150,animateFirst:!1,get currentPage(){return n()},onTransitionStart:a=>{v(!1),a===0?H.removeItem(u):H.pushItem(u)},onTransitionEnd:a=>{a===1&&v(!0)},get children(){return[l(Gt,{isInitialSetup:!0,get purpose(){return e.purpose},onCodeSent:a=>{o(a),i(1)}}),l(j,{get when(){return s()},get children(){return l(Wt,{get purpose(){return e.purpose},get sentCode(){return s()},get visible(){return M(()=>n()===1)()&&h()},onExpired:()=>{i(0),o(void 0)},onSuccess:()=>{c=!0,e.onSuccess?.(),r(!1)}})}})]}})}})]}})})}export{Te as A,z as B,en as C,Gt as E,V as I,Pe as L,A as P,mt as R,Ut as S,Et as T,jt as a,tn as b,St as c,qt as d,Wt as e,nn as f,Ie as s,Kt as w};
//# sourceMappingURL=emailSetup-NdcsXpJs.js.map
