"use strict";(this.webpackChunktweb=this.webpackChunktweb||[]).push([[339],{2582:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(2325);class i{constructor(e){this.element=document.body.querySelector("."+e.className),this.container=document.createElement("div"),this.container.className="container center-align",this.imageDiv=document.createElement("div"),this.imageDiv.className="auth-image",this.title=document.createElement("h4"),e.titleLangKey&&this.title.append((0,n.ag)(e.titleLangKey)),this.subtitle=document.createElement("p"),this.subtitle.className="subtitle",e.subtitleLangKey&&this.subtitle.append((0,n.ag)(e.subtitleLangKey)),this.container.append(this.imageDiv,this.title,this.subtitle),e.withInputWrapper&&(this.inputWrapper=document.createElement("div"),this.inputWrapper.className="input-wrapper",this.container.append(this.inputWrapper)),this.element.append(this.container)}}},8339:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(4494),i=a(503),s=a(279),r=a(6765),p=a(2325),l=a(2582),u=a(4874),c=a(8799),o=a(5565),m=a(1168),d=a(8115),h=a(3512);let g=null;const v=new u.Z("page-signUp",!0,(()=>{const e=new l.Z({className:"page-signUp",withInputWrapper:!0,titleLangKey:"YourName",subtitleLangKey:"Login.Register.Subtitle"});e.imageDiv.classList.add("avatar-edit"),e.title.classList.add("fullName");const t=document.createElement("canvas");t.id="canvas-avatar",t.className="avatar-edit-canvas";const u=document.createElement("span");let v;u.className="tgico tgico-cameraadd",e.imageDiv.append(t,u),e.imageDiv.addEventListener("click",(()=>{m.Z.createPopup(r.Z).open(t,(e=>{v=e}))}));const b=t=>{const a=L.value||"",n=y.value||"",i=a||n?(a+" "+n).trim():"";i?(0,o.Z)(e.title,(0,d.Z)(i)):(0,o.Z)(e.title,(0,p.ag)("YourName"))},L=new i.Z({label:"FirstName",maxLength:70}),y=new i.Z({label:"LastName",maxLength:64}),Z=(0,n.Z)("btn-primary btn-color-primary"),w=new p.ZP.IntlElement({key:"StartMessaging"});return Z.append(w.element),e.inputWrapper.append(L.container,y.container,Z),L.input.addEventListener("input",b),y.input.addEventListener("input",b),Z.addEventListener("click",(function(e){if(L.input.classList.contains("error")||y.input.classList.contains("error"))return!1;if(!L.value.length)return L.input.classList.add("error"),!1;this.disabled=!0;const t=L.value.trim(),n=y.value.trim(),i={phone_number:g.phone_number,phone_code_hash:g.phone_code_hash,first_name:t,last_name:n};w.update({key:"PleaseWait"});const r=(0,s.y)(this);h.Z.managers.apiManager.invokeApi("auth.signUp",i).then((e=>{"auth.authorization"===e._?(h.Z.managers.apiManager.setUser(e.user),new Promise(((e,t)=>{if(!v)return e();v().then((a=>{h.Z.managers.appProfileManager.uploadProfilePhoto(a).then(e,t)}),t)})).finally((()=>{a.e(781).then(a.bind(a,5436)).then((e=>{e.default.mount()}))}))):(w.update({key:e._}),this.removeAttribute("disabled"),r.remove())})).catch((e=>{this.removeAttribute("disabled"),r.remove(),e.type,w.update({key:e.type})}))})),(0,c.Z)(),new Promise((e=>{window.requestAnimationFrame(e)}))}),(e=>{g=e,h.Z.managers.appStateManager.pushToState("authState",{_:"authStateSignUp",authCode:e})}))}}]);
//# sourceMappingURL=339.6f9573a4830d89de5c12.chunk.js.map