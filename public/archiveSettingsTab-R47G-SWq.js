import{dR as f,af as F,aQ as C,aS as _,ce as y,bn as w,b as e,ad as b,a2 as h,i as U,t as N}from"./index-C39jgWGl.js";import{u as P,S as T}from"./saveButton-CTyJmK2u.js";import{a5 as R,a8 as D,ab as l,a6 as G,ad as d}from"./appDialogsManager-B_FVTFP0.js";import{H}from"./heightTransition-EFJv3YqM.js";import{S as p}from"./staticSwitch-PDs0gCek.js";import{I as m}from"./emailSetup-BdS1uOgO.js";import{u as I}from"./useIsPremium-WfuyKJW7.js";import"./iconTsx-3FyAFBS8.js";import"./classNames-CN4lTu6a.js";import"./transition-CUZa2v0X.js";import"./page-DolksLDc.js";import"./putPreloader-BN48kIWH.js";import"./avatar-BkNI1F67.js";import"./htmlToSpan-DhAls8qz.js";import"./wrapDuration-CHpUDomT.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./toast-CeJa3c4q.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-ByWDtOgE.js";import"./scrollable2-C0y96lOY.js";import"./chatBackground-BaGXqPKn.js";import"./tracking-p7G0SHug.js";const M=N("<div> ");function ie(){const[s]=R(),{Row:r,rootScope:u}=f(),A=D(),[a]=F(()=>{const t=u.managers.appPrivacyManager.getGlobalPrivacySettings();return A.collect(t),t}),k=I(),o=C(()=>a.state==="ready"),[n,i]=_({keepArchivedUnmutedChats:!1,keepArchiveFromFolders:!1,archiveNonContactChats:!1});let c={keepArchivedUnmutedChats:!1,keepArchiveFromFolders:!1,archiveNonContactChats:!1};const g=C(()=>!y(n,c));w(()=>{o()&&(c={keepArchivedUnmutedChats:!!a()?.pFlags?.keep_archived_unmuted,keepArchiveFromFolders:!!a()?.pFlags?.keep_archived_folders,archiveNonContactChats:!!a()?.pFlags?.archive_and_mute_new_noncontact_peers},i(c))});const v=G(async()=>{if(!o())return;const t=structuredClone(a());t.pFlags??(t.pFlags={}),d(t.pFlags,"keep_archived_unmuted",n.keepArchivedUnmutedChats),d(t.pFlags,"keep_archived_folders",n.keepArchivedUnmutedChats?!0:n.keepArchiveFromFolders),d(t.pFlags,"archive_and_mute_new_noncontact_peers",n.archiveNonContactChats),await u.managers.appPrivacyManager.setGlobalPrivacySettings(t),s.close()});return s.isConfirmationNeededOnClose=P({hasChanges:g,saveAllSettings:v,descriptionLangKey:"UnsavedChangesDescription.Archive"}),[e(b,{get mount(){return s.header},get children(){return e(T,{get hasChanges(){return g()},onClick:()=>void v()})}}),e(l,{name:"ArchiveSettings.UnmutedChats.Title",caption:"ArchiveSettings.UnmutedChats.Description",get children(){return e(r,{clickable:()=>i("keepArchivedUnmutedChats",t=>!t),get children(){return[e(r.Title,{get children(){return e(m,{key:"ArchiveSettings.UnmutedChats.Action"})}}),e(r.RightContent,{get children(){return e(p,{get checked(){return n.keepArchivedUnmutedChats}})}})]}})}}),e(h,{get when(){return o()},get children(){return[" ",e(H,{get children(){return e(h,{get when(){return!n.keepArchivedUnmutedChats},get children(){const t=M();return t.firstChild,t.style.setProperty("overflow","hidden"),U(t,e(l,{name:"ArchiveSettings.FolderChats.Title",caption:"ArchiveSettings.FolderChats.Description",get children(){return e(r,{clickable:()=>i("keepArchiveFromFolders",S=>!S),get children(){return[e(r.Title,{get children(){return e(m,{key:"ArchiveSettings.FolderChats.Action"})}}),e(r.RightContent,{get children(){return e(p,{get checked(){return n.keepArchiveFromFolders}})}})]}})}}),null),t}})}})]}}),e(h,{get when(){return k()},get children(){return e(l,{name:"ArchiveSettings.NewChats.Title",caption:"ArchiveSettings.NewChats.Description",get children(){return e(r,{clickable:()=>i("archiveNonContactChats",t=>!t),get children(){return[e(r.Title,{get children(){return e(m,{key:"ArchiveSettings.NewChats.Action"})}}),e(r.RightContent,{get children(){return e(p,{get checked(){return n.archiveNonContactChats}})}})]}})}})}})]}export{ie as default};
//# sourceMappingURL=archiveSettingsTab-R47G-SWq.js.map
