import{a5 as tt,c as N,a6 as et,a1 as V,af as E,a2 as $,a as nt,bg as A,a0 as it,t as J,bC as R,z as ot,i as F,b as t,d as b,bU as st,bA as rt,h as v,eu as at,cH as W,az as ct,a7 as B,f1 as ut,ev as lt,aG as K,x as gt,Z as H}from"./index-DfTYkYxh.js";import{Q as ft,T as dt,U as ht,R as s,V as T,H as M,W as mt,M as pt}from"./appDialogsManager-ChFFjUti.js";import"./page-BamLxGNn.js";import"./avatar-BryH42q2.js";import"./putPreloader-QnwUs36x.js";import"./classNames-B6PjWW0V.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./iconTsx-j2e5Z_SD.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-DgfJ9iqb.js";import"./chatBackground-DVGnHfQ0.js";import"./codeInputField-CMD-FCtI.js";const St=J("<div><div class=progress-line__filled></div><input class=progress-line__seek type=range>");function Nt(e){const[a,r]=N(!1),[i,m]=N(),[u,p]=N(e.value||0);let c,f,n,l=null;const d=e.min??0,C=e.max??0,y=e.step,z=e.withTransition||!1,L=e.useTransform||!1,q=e.useProperty||!1,_=e.vertical||!1,k=e.offsetAxisValue||0,G=""+y,I=G.indexOf("."),Q=I===-1?0:G.length-I-1,O=o=>{let S=(o-d)/(C-d);S=R(S,0,1),L?f.style.transform=`scaleX(${S})`:q?c.style.setProperty("--progress",""+S):f.style.width=S*100+"%"},P=o=>{n.value=""+o,O(+n.value),p(+n.value)},X=()=>{const o=+n.value;O(o),p(o),e.onScrub?.(o)},Z=o=>{D(o)},j=o=>{m(c.getBoundingClientRect()),r(!0),D(o),c.classList.add("is-focused"),e.onMouseDown?.(o)},Y=o=>{r(!1),c.classList.remove("is-focused"),e.onMouseUp?.(o)},D=(o,S)=>{const g=i();if(!g)return 0;let x=_?g.height:g.width;k&&(x-=k);let w=R(_?-(o.y-g.bottom):o.x-g.left-k/2,0,x);!_&&ot.isRTL&&(w=x-w);let h=d+w/x*(C-d);return h-d<(C-d)/2&&(h-=y/10),h=+h.toFixed(Q),h=R(h,d,C),P(h),e.onScrub?.(h),h};return et(()=>{e.value&&P(e.value),l=ft(c,j,Z,Y)}),V(()=>{l?.()}),E(()=>{e.value!==void 0&&P(e.value)}),(()=>{const o=St(),S=o.firstChild,g=S.nextSibling,x=c;typeof x=="function"?$(x,o):c=o,nt(o,`progress-line ${L?"use-transform":""} ${z?"with-transition":""}`);const w=f;typeof w=="function"?$(w,S):f=S,g.$$input=X;const h=n;return typeof h=="function"?$(h,g):n=g,A(g,"step",y),A(g,"min",d),A(g,"max",C),it(()=>g.value=u()),o})()}tt(["input"]);const vt=J("<div class=range-setting-selector><div class=range-setting-selector-details><div class=range-setting-selector-name></div><div class=range-setting-selector-value>");function yt(e){const[a,r]=N(e.value);return E(()=>{r(e.value)}),(()=>{const i=vt(),m=i.firstChild,u=m.firstChild,p=u.nextSibling;return F(u,()=>e.textLeft),F(p,()=>e.textRight(a())),F(i,t(Nt,{get step(){return e.step},get min(){return e.minValue},get max(){return e.maxValue},get value(){return e.value},onScrub:c=>{e.onChange?.(c),r(c)},get onMouseUp(){return e.onMouseUp}}),null),i})()}const U=e=>{const[a,r]=N(!0),[i,m]=N(!0),[u,p]=N(),c={_:e.inputKey};E(async()=>{const n=u();if(!n)return;const l=await b.managers.appNotificationsManager.isMuted(n);return r(!l),m(!!n.show_previews),l}),V(async()=>{const n=!a(),l=i(),d=u(),C=await b.managers.appNotificationsManager.isMuted(d);if(n===C&&l===d.show_previews)return;const y=st(d);y._="inputPeerNotifySettings",y.mute_until=n?rt:0,y.show_previews=l,b.managers.appNotificationsManager.updateNotifySettings(c,y)}),dt(b)("notify_settings",n=>{const l=ht(n.peer._);e.inputKey===l&&p(n.notify_settings)});const f=b.managers.appNotificationsManager.getNotifySettings(c);return(f instanceof Promise?f:Promise.resolve(f)).then(n=>{u()||p(n)}),t(M,{get name(){return e.name},get children(){return[t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return a()},onChange:r,toggle:!0})}}),t(s.Title,{get children(){return v(e.typeText)}})]}}),t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return i()},onChange:m,toggle:!0})}}),t(s.Title,{get children(){return v("MessagePreview")}})]}})]}})},Ct=()=>{const[e,a]=N(!0),r=lt();return b.managers.appNotificationsManager.getContactSignUpNotification().then(i=>{a(i),at(r,()=>V(()=>{const m=e();m!==i&&b.managers.appNotificationsManager.setContactSignUpNotification(!m)}))}),t(M,{name:"NotificationsOther",get children(){return t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return e()},onChange:a,toggle:!0})}}),t(s.Title,{get children(){return v("ContactJoined")}})]}})}})},xt=()=>{const{uiNotificationsManager:e}=W(),[a,r]=K(),[i,m]=N(Notification.permission),u=ct(()=>i()==="granted"),p=n=>{gt(n),Notification.requestPermission().then(l=>{if(m(l),l==="granted")e.onPushConditionsChange();else throw 1},()=>{pt({langPackKey:"Notifications.Restricted"})})},c=n=>t(s,H(n,{get fakeDisabled(){return!u()},get clickable(){return!u()&&p}})),f=n=>t(T,H(n,{get checked(){return u()&&n.checked}}));return t(M,{name:"Notifications.Web",get caption(){return u()?"MultiAccount.ShowNotificationsFromCaption":"Notifications.Default"},get children(){return[t(c,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifications.desktop},onChange:n=>r("notifications","desktop",n),toggle:!0})}}),t(s.Title,{get children(){return v("Notifications.Show")}})]}}),t(c,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifications.push},onChange:n=>r("notifications","push",n),toggle:!0})}}),t(s.Title,{get children(){return v("Notifications.Offline")}})]}}),t(c,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifyAllAccounts},onChange:n=>r("notifyAllAccounts",n),toggle:!0})}}),t(s.Title,{get children(){return v("MultiAccount.AllAccounts")}})]}}),B(()=>B(()=>!u())()&&t(mt,{text:"Notifications.Enable",class:"btn-primary primary btn-transparent",icon:"unmute",get disabled(){return u()},onClick:p}))]}})},bt=()=>{const{uiNotificationsManager:e}=W(),[a,r]=K();return t(M,{name:"Notifications.Sound.Section",caption:"Notifications.Sound.Caption",get children(){return[t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return a.notifications.sound},onChange:i=>{i&&!a.notifications.volume&&r("notifications","volume",ut.notifications.volume),r("notifications","sound",i)},toggle:!0})}}),t(s.Title,{get children(){return v("Notifications.Sound")}})]}}),t(yt,{get textLeft(){return v("Notifications.Sound.Volume")},textRight:i=>""+Math.floor(i*100)+"%",step:.01,get value(){return a.notifications.volume},minValue:0,maxValue:1,onChange:i=>{i=+i.toFixed(2),i||r("notifications","sound",!1),r("notifications","volume",i)},onMouseUp:()=>{e.testSound(a.notifications.volume)}})]}})},wt=()=>{const[e,a]=K();return t(M,{name:"Notifications.Sound.Effects",get children(){return t(s,{get children(){return[t(s.CheckboxFieldToggle,{get children(){return t(T,{get checked(){return e.notifications.sentMessageSound},onChange:r=>a("notifications","sentMessageSound",r),toggle:!0})}}),t(s.Title,{get children(){return v("Notifications.Sound.Sent")}})]}})}})},Gt=()=>[t(xt,{}),t(bt,{}),t(wt,{}),t(U,{name:"NotificationsPrivateChats",typeText:"NotificationsForPrivateChats",inputKey:"inputNotifyUsers"}),t(U,{name:"NotificationsGroups",typeText:"NotificationsForGroups",inputKey:"inputNotifyChats"}),t(U,{name:"NotificationsChannels",typeText:"NotificationsForChannels",inputKey:"inputNotifyBroadcasts"}),t(Ct,{})];export{Gt as default};
//# sourceMappingURL=notifications-bxB6XgNX.js.map
